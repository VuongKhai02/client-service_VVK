(window.webpackJsonp = window.webpackJsonp || []).push([[14], { "+5dr": function (e, t, n) { "use strict"; n.d(t, "b", function () { return l }), n.d(t, "c", function () { return i }), n.d(t, "g", function () { return u }), n.d(t, "f", function () { return d }), n.d(t, "a", function () { return c }), n.d(t, "e", function () { return p }), n.d(t, "d", function () { return f }); var i, r = n("mrSG"), o = n("RxGS"), a = n("fXoL"), s = n("l7P3"), l = function (e) { function t(t) { var n = e.call(this, t) || this; return n.store = t, n.configurationSet = !1, n.configurationChangedEmiter = new a.EventEmitter, n.configurationChanged = n.configurationChangedEmiter.asObservable(), n } return Object(r.d)(t, e), Object.defineProperty(t.prototype, "configuration", { get: function () { return this.configurationValue }, set: function (e) { this.configurationValue = e, this.configurationSet ? this.updateConfiguration(e) : (this.configurationSet = !0, this.setupConfiguration(e)) }, enumerable: !1, configurable: !0 }), t.prototype.ngOnInit = function () { }, t.prototype.ngAfterViewInit = function () { var e = this; setTimeout(function () { e.validateConfig() || e.configurationChangedEmiter.emit(null) }, 0) }, t.prototype.validate = function () { this.onValidate() }, t.prototype.setupConfiguration = function (e) { var t = this; this.onConfigurationSet(this.prepareInputConfig(e)), this.updateValidators(!1); for (var n = function (e) { for (var n = e.split("."), r = i.configForm(), o = 0, a = n; o < a.length; o++) { var s = a[o]; r = r.get(s) } r.valueChanges.subscribe(function () { t.updateValidators(!0, e) }) }, i = this, r = 0, o = this.validatorTriggers(); r < o.length; r++) { n(o[r]) } this.configForm().valueChanges.subscribe(function (e) { t.onConfigurationChanged(e) }) }, t.prototype.updateConfiguration = function (e) { this.configForm().reset(this.prepareInputConfig(e), { emitEvent: !1 }), this.updateValidators(!1) }, t.prototype.updateValidators = function (e, t) { }, t.prototype.validatorTriggers = function () { return [] }, t.prototype.onConfigurationChanged = function (e) { this.configurationValue = e, this.validateConfig() ? this.configurationChangedEmiter.emit(this.prepareOutputConfig(e)) : this.configurationChangedEmiter.emit(null) }, t.prototype.prepareInputConfig = function (e) { return e }, t.prototype.prepareOutputConfig = function (e) { return e }, t.prototype.validateConfig = function () { return this.configForm().valid }, t.prototype.onValidate = function () { }, t.\u0275fac = function (e) { return new (e || t)(a["\u0275\u0275directiveInject"](s.Store)) }, t.\u0275dir = a["\u0275\u0275defineDirective"]({ type: t, features: [a["\u0275\u0275InheritDefinitionFeature"]] }), t }(o.a); 0, void 0, function (e) { e.FILTER = "FILTER", e.ENRICHMENT = "ENRICHMENT", e.TRANSFORMATION = "TRANSFORMATION", e.ACTION = "ACTION", e.EXTERNAL = "EXTERNAL", e.RULE_CHAIN = "RULE_CHAIN", e.UNKNOWN = "UNKNOWN", e.INPUT = "INPUT" }(i || (i = {})); var c, u = [i.FILTER, i.ENRICHMENT, i.TRANSFORMATION, i.ACTION, i.EXTERNAL, i.RULE_CHAIN], d = new Map([[i.FILTER, { value: i.FILTER, name: "rulenode.type-filter", details: "rulenode.type-filter-details", nodeClass: "tb-filter-type", icon: "filter_list" }], [i.ENRICHMENT, { value: i.ENRICHMENT, name: "rulenode.type-enrichment", details: "rulenode.type-enrichment-details", nodeClass: "tb-enrichment-type", icon: "playlist_add" }], [i.TRANSFORMATION, { value: i.TRANSFORMATION, name: "rulenode.type-transformation", details: "rulenode.type-transformation-details", nodeClass: "tb-transformation-type", icon: "transform" }], [i.ACTION, { value: i.ACTION, name: "rulenode.type-action", details: "rulenode.type-action-details", nodeClass: "tb-action-type", icon: "flash_on" }], [i.EXTERNAL, { value: i.EXTERNAL, name: "rulenode.type-external", details: "rulenode.type-external-details", nodeClass: "tb-external-type", icon: "cloud_upload" }], [i.RULE_CHAIN, { value: i.RULE_CHAIN, name: "rulenode.type-rule-chain", details: "rulenode.type-rule-chain-details", nodeClass: "tb-rule-chain-type", icon: "settings_ethernet" }], [i.INPUT, { value: i.INPUT, name: "rulenode.type-input", details: "rulenode.type-input-details", nodeClass: "tb-input-type", icon: "input", special: !0 }], [i.UNKNOWN, { value: i.UNKNOWN, name: "rulenode.type-unknown", details: "rulenode.type-unknown-details", nodeClass: "tb-unknown-type", icon: "help_outline" }]]); !function (e) { e.POST_ATTRIBUTES_REQUEST = "POST_ATTRIBUTES_REQUEST", e.POST_TELEMETRY_REQUEST = "POST_TELEMETRY_REQUEST", e.TO_SERVER_RPC_REQUEST = "TO_SERVER_RPC_REQUEST", e.RPC_CALL_FROM_SERVER_TO_DEVICE = "RPC_CALL_FROM_SERVER_TO_DEVICE", e.ACTIVITY_EVENT = "ACTIVITY_EVENT", e.INACTIVITY_EVENT = "INACTIVITY_EVENT", e.CONNECT_EVENT = "CONNECT_EVENT", e.DISCONNECT_EVENT = "DISCONNECT_EVENT", e.ENTITY_CREATED = "ENTITY_CREATED", e.ENTITY_UPDATED = "ENTITY_UPDATED", e.ENTITY_DELETED = "ENTITY_DELETED", e.ENTITY_ASSIGNED = "ENTITY_ASSIGNED", e.ENTITY_UNASSIGNED = "ENTITY_UNASSIGNED", e.ATTRIBUTES_UPDATED = "ATTRIBUTES_UPDATED", e.ATTRIBUTES_DELETED = "ATTRIBUTES_DELETED", e.TIMESERIES_UPDATED = "TIMESERIES_UPDATED", e.TIMESERIES_DELETED = "TIMESERIES_DELETED", e.RPC_QUEUED = "RPC_QUEUED", e.RPC_DELIVERED = "RPC_DELIVERED", e.RPC_SUCCESSFUL = "RPC_SUCCESSFUL", e.RPC_TIMEOUT = "RPC_TIMEOUT", e.RPC_FAILED = "RPC_FAILED" }(c || (c = {})); var p = new Map([[c.POST_ATTRIBUTES_REQUEST, "Post attributes"], [c.POST_TELEMETRY_REQUEST, "Post telemetry"], [c.TO_SERVER_RPC_REQUEST, "RPC Request from Device"], [c.RPC_CALL_FROM_SERVER_TO_DEVICE, "RPC Request to Device"], [c.ACTIVITY_EVENT, "Activity Event"], [c.INACTIVITY_EVENT, "Inactivity Event"], [c.CONNECT_EVENT, "Connect Event"], [c.DISCONNECT_EVENT, "Disconnect Event"], [c.ENTITY_CREATED, "Entity Created"], [c.ENTITY_UPDATED, "Entity Updated"], [c.ENTITY_DELETED, "Entity Deleted"], [c.ENTITY_ASSIGNED, "Entity Assigned"], [c.ENTITY_UNASSIGNED, "Entity Unassigned"], [c.ATTRIBUTES_UPDATED, "Attributes Updated"], [c.ATTRIBUTES_DELETED, "Attributes Deleted"], [c.TIMESERIES_UPDATED, "Timeseries Updated"], [c.TIMESERIES_DELETED, "Timeseries Deleted"], [c.RPC_QUEUED, "RPC Queued"], [c.RPC_DELIVERED, "RPC Delivered"], [c.RPC_SUCCESSFUL, "RPC Successful"], [c.RPC_TIMEOUT, "RPC Timeout"], [c.RPC_FAILED, "RPC Failed"]]), m = { "org.thingsboard.rule.engine.filter.TbCheckRelationNode": "ruleNodeCheckRelation", "org.thingsboard.rule.engine.filter.TbCheckMessageNode": "ruleNodeCheckExistenceFields", "org.thingsboard.rule.engine.geo.TbGpsGeofencingFilterNode": "ruleNodeGpsGeofencingFilter", "org.thingsboard.rule.engine.filter.TbJsFilterNode": "ruleNodeJsFilter", "org.thingsboard.rule.engine.filter.TbJsSwitchNode": "ruleNodeJsSwitch", "org.thingsboard.rule.engine.filter.TbMsgTypeFilterNode": "ruleNodeMessageTypeFilter", "org.thingsboard.rule.engine.filter.TbMsgTypeSwitchNode": "ruleNodeMessageTypeSwitch", "org.thingsboard.rule.engine.filter.TbOriginatorTypeFilterNode": "ruleNodeOriginatorTypeFilter", "org.thingsboard.rule.engine.filter.TbOriginatorTypeSwitchNode": "ruleNodeOriginatorTypeSwitch", "org.thingsboard.rule.engine.metadata.TbGetAttributesNode": "ruleNodeOriginatorAttributes", "org.thingsboard.rule.engine.metadata.TbGetOriginatorFieldsNode": "ruleNodeOriginatorFields", "org.thingsboard.rule.engine.metadata.TbGetTelemetryNode": "ruleNodeOriginatorTelemetry", "org.thingsboard.rule.engine.metadata.TbGetCustomerAttributeNode": "ruleNodeCustomerAttributes", "org.thingsboard.rule.engine.metadata.TbGetCustomerDetailsNode": "ruleNodeCustomerDetails", "org.thingsboard.rule.engine.metadata.TbGetDeviceAttrNode": "ruleNodeDeviceAttributes", "org.thingsboard.rule.engine.metadata.TbGetRelatedAttributeNode": "ruleNodeRelatedAttributes", "org.thingsboard.rule.engine.metadata.TbGetTenantAttributeNode": "ruleNodeTenantAttributes", "org.thingsboard.rule.engine.metadata.TbGetTenantDetailsNode": "ruleNodeTenantDetails", "org.thingsboard.rule.engine.transform.TbChangeOriginatorNode": "ruleNodeChangeOriginator", "org.thingsboard.rule.engine.transform.TbTransformMsgNode": "ruleNodeTransformMsg", "org.thingsboard.rule.engine.mail.TbMsgToEmailNode": "ruleNodeMsgToEmail", "org.thingsboard.rule.engine.action.TbAssignToCustomerNode": "ruleNodeAssignToCustomer", "org.thingsboard.rule.engine.action.TbUnassignFromCustomerNode": "ruleNodeUnassignFromCustomer", "org.thingsboard.rule.engine.action.TbClearAlarmNode": "ruleNodeClearAlarm", "org.thingsboard.rule.engine.action.TbCreateAlarmNode": "ruleNodeCreateAlarm", "org.thingsboard.rule.engine.action.TbCreateRelationNode": "ruleNodeCreateRelation", "org.thingsboard.rule.engine.action.TbDeleteRelationNode": "ruleNodeDeleteRelation", "org.thingsboard.rule.engine.delay.TbMsgDelayNode": "ruleNodeMsgDelay", "org.thingsboard.rule.engine.debug.TbMsgGeneratorNode": "ruleNodeMsgGenerator", "org.thingsboard.rule.engine.geo.TbGpsGeofencingActionNode": "ruleNodeGpsGeofencingEvents", "org.thingsboard.rule.engine.action.TbLogNode": "ruleNodeLog", "org.thingsboard.rule.engine.rpc.TbSendRPCReplyNode": "ruleNodeRpcCallReply", "org.thingsboard.rule.engine.rpc.TbSendRPCRequestNode": "ruleNodeRpcCallRequest", "org.thingsboard.rule.engine.telemetry.TbMsgAttributesNode": "ruleNodeSaveAttributes", "org.thingsboard.rule.engine.telemetry.TbMsgTimeseriesNode": "ruleNodeSaveTimeseries", "org.thingsboard.rule.engine.action.TbSaveToCustomCassandraTableNode": "ruleNodeSaveToCustomTable", "tb.internal.RuleChain": "ruleNodeRuleChain", "org.thingsboard.rule.engine.aws.sns.TbSnsNode": "ruleNodeAwsSns", "org.thingsboard.rule.engine.aws.sqs.TbSqsNode": "ruleNodeAwsSqs", "org.thingsboard.rule.engine.kafka.TbKafkaNode": "ruleNodeKafka", "org.thingsboard.rule.engine.mqtt.TbMqttNode": "ruleNodeMqtt", "org.thingsboard.rule.engine.mqtt.azure.TbAzureIotHubNode": "ruleNodeAzureIotHub", "org.thingsboard.rule.engine.rabbitmq.TbRabbitMqNode": "ruleNodeRabbitMq", "org.thingsboard.rule.engine.rest.TbRestApiCallNode": "ruleNodeRestApiCall", "org.thingsboard.rule.engine.mail.TbSendEmailNode": "ruleNodeSendEmail", "org.thingsboard.rule.engine.sms.TbSendSmsNode": "ruleNodeSendSms", "org.thingsboard.rule.engine.edge.TbMsgPushToCloudNode": "ruleNodePushToCloud", "org.thingsboard.rule.engine.edge.TbMsgPushToEdgeNode": "ruleNodePushToEdge" }; function f(e) { if (e) { if (e.configurationDescriptor && e.configurationDescriptor.nodeDefinition && e.configurationDescriptor.nodeDefinition.docUrl) return e.configurationDescriptor.nodeDefinition.docUrl; if (e.clazz && m[e.clazz]) return m[e.clazz] } return "ruleEngine" } }, "//Q6": function (e, t, n) { "use strict"; n.d(t, "I", function () { return d }), n.d(t, "u", function () { return p }), n.d(t, "a", function () { return m }), n.d(t, "B", function () { return f }), n.d(t, "C", function () { return h }), n.d(t, "n", function () { return g }), n.d(t, "o", function () { return y }), n.d(t, "q", function () { return b }), n.d(t, "w", function () { return v }), n.d(t, "s", function () { return E }), n.d(t, "z", function () { return T }), n.d(t, "x", function () { return S }), n.d(t, "y", function () { return C }), n.d(t, "A", function () { return O }), n.d(t, "p", function () { return w }), n.d(t, "t", function () { return I }), n.d(t, "h", function () { return x }), n.d(t, "H", function () { return M }), n.d(t, "g", function () { return j }), n.d(t, "E", function () { return A }), n.d(t, "F", function () { return R }), n.d(t, "b", function () { return N }), n.d(t, "l", function () { return F }), n.d(t, "G", function () { return L }), n.d(t, "e", function () { return D }), n.d(t, "r", function () { return V }), n.d(t, "D", function () { return U }), n.d(t, "k", function () { return B }), n.d(t, "L", function () { return q }), n.d(t, "j", function () { return z }), n.d(t, "m", function () { return H }), n.d(t, "d", function () { return W }), n.d(t, "J", function () { return Q }), n.d(t, "c", function () { return Y }), n.d(t, "M", function () { return K }), n.d(t, "f", function () { return X }), n.d(t, "i", function () { return J }), n.d(t, "N", function () { return $ }), n.d(t, "v", function () { return Z }), n.d(t, "K", function () { return te }); var i = n("mrSG"), r = n("LvDl"), o = n.n(r), a = n("XNiG"), s = n("nYR2"), l = n("w1tV"), c = n("oKkZ"), u = /\${([^}]*)}/g; function d(e) { var t = new a.b, n = function (e) { if (!(e instanceof HTMLElement || e instanceof SVGElement)) return []; var t = []; k(e, []).forEach(function (e) { (function (e) { return e instanceof Element && P.test(_(t = e, "overflow") + _(t, "overflow-y") + _(t, "overflow-x")); var t })(e) && t.push(e) }), document.scrollingElement ? t.push(document.scrollingElement) : document.documentElement && t.push(document.documentElement); return t }(e), i = { handleEvent: function (e) { t.next(e) } }; return n.forEach(function (e) { e.addEventListener("scroll", i) }), window.addEventListener("resize", i), t.pipe(Object(s.a)(function () { n.forEach(function (e) { e.removeEventListener("scroll", i) }), window.removeEventListener("resize", i) }), Object(l.a)()) } function p(e) { var t = document.createElement("a"); t.href = e; var n = t.hostname; return "localhost" === n || "127.0.0.1" === n } function m(e, t, n) { var i = 0, r = e.scrollTop, o = t, a = n || 0, s = o - r, l = function () { 0 === a ? e.scrollTop = o : (i += 20, e.scrollTop = function (e, t, n, i) { if ((e /= i / 2) < 1) return n / 2 * e * e + t; return e--, -n / 2 * (e * (e - 2) - 1) + t }(i, r, s, a), i < a && setTimeout(l, 20)) }; l() } function f(e) { return void 0 === e } function h(e) { return null == e } function g(e) { return void 0 !== e } function y(e) { return null != e } function b(e) { return "" === e } function v(e) { return null !== e && "string" == typeof e && e.trim().length > 0 } function E(e) { return "function" == typeof e } function T(e) { return null !== e && "object" == typeof e } function S(e) { return "number" == typeof e } function C(e) { return e - parseFloat(e) + 1 >= 0 } function O(e) { return "string" == typeof e } function w(e) { for (var t = 0, n = Object.keys(e); t < n.length; t++) { var i = n[t]; if (Object.prototype.hasOwnProperty.call(e, i)) return !1 } return !0 } function I(e) { return !!e && e.constructor === Object } function x(e, t, n, i) { if (y(e) && C(e) && (y(t) || y(n) || Number(e).toString() === e)) { var r = Number(e); return y(t) && (r = r.toFixed(t)), i || (r = Number(r)), r = r.toString(), y(n) && n.length > 0 && (r += " " + n), r } return null !== e ? e : "" } function M(e) { return Object.keys(e).map(function (t) { return e[t] }) } function j(e) { f(e) || null == e || Object.keys(e).forEach(function (t) { null === e[t] || f(e[t]) ? delete e[t] : T(e[t]) ? j(e[t]) : e[t] instanceof Array && e[t].forEach(function (e) { j(e) }) }) } function A(e) { var t = JSON.stringify(e); return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g, function (e, t) { return String.fromCharCode(Number("0x" + t)) })) } function R(e) { return encodeURIComponent(A(e)) } function N(e) { var t = decodeURIComponent(atob(e).split("").map(function (e) { return "%" + ("00" + e.charCodeAt(0).toString(16)).slice(-2) }).join("")); return JSON.parse(t) } var P = /(auto|scroll)/; function k(e, t) { return null === e.parentNode ? t : k(e.parentNode, t.concat([e])) } function _(e, t) { return getComputedStyle(e, null).getPropertyValue(t) } function F(e) { var t, n = 0; if (0 === e.length) return n; for (t = 0; t < e.length; t++)n = (n << 5) - n + e.charCodeAt(t), n &= n; return n } function L(e) { var t = 0; e && (t = F(JSON.stringify(e))); return t } function D(e, t) { if (null === e) return e; if (e instanceof Date) return new Date(e.getTime()); if (e instanceof Array) { var n = []; return e.forEach(function (e) { n.push(e) }), n.map(function (e) { return D(e) }) } if ("object" == typeof e && e !== {}) { var r = Object(i.a)({}, e); return Object.keys(r).forEach(function (e) { t && -1 !== t.indexOf(e) || (r[e] = D(r[e])) }), r } return e } function V(e, t) { return o.a.isEqual(e, t) } function U(e) { for (var t = [], n = 1; n < arguments.length; n++)t[n - 1] = arguments[n]; return o.a.merge.apply(o.a, Object(i.h)([e], t)) } function B() { function e() { return Math.floor(65536 * (1 + Math.random())).toString(16).substring(1) } return e() + e() + "-" + e() + "-" + e() + "-" + e() + "-" + e() + e() + e() } var G = /[A-Z]/g; function q(e, t) { return t = t || "_", e.replace(G, function (e, n) { return (n ? t : "") + e.toLowerCase() }) } function z(e, t) { return e.hasOwnProperty(t) ? e[t] : t.split(".").reduce(function (e, t) { return e && e[t] }, e) } function H(e, t, n) { for (var i = e, r = u.exec(e); null !== r;) { var o = r[0]; r[1] === t && (i = i.replace(o, n)), r = u.exec(e) } return i } function W(e, t) { var n = t; if (!e) return n; for (var i = u.exec(t); null !== i;) { var r = i[0], o = i[1]; "dsName" === o ? n = n.replace(r, e.name) : "entityName" === o || "deviceName" === o ? n = n.replace(r, e.entityName) : "entityLabel" === o ? n = n.replace(r, e.entityLabel || e.entityName) : "aliasName" === o ? n = n.replace(r, e.aliasName) : "entityDescription" === o && (n = n.replace(r, e.entityDescription)), i = u.exec(t) } return n } function Q(e, t) { var n; return n = (e = parseFloat(e)) < 0, e = Math.abs(e), (n ? "-" : "") + (t > 0 ? e.toFixed(t) : Math.round(e).toString()) } function Y() { var e = window.location.protocol + "//" + window.location.hostname, t = window.location.port; return t && t.length > 0 && "80" !== t && "443" !== t && (e += ":" + t), e } function K(e) { return Object.keys(e).sort().reduce(function (t, n) { return t[n] = e[n], t }, {}) } function X(e) { return S(e) || f(e) || O(e) || null === e || e instanceof File ? e : Object.keys(e).reduce(function (t, n) { return O(e[n]) ? t[n] = e[n].trim() : T(e[n]) ? t[n] = X(e[n]) : t[n] = e[n], t }, Array.isArray(e) ? [] : {}) } function J(e) { (f(e) || null == e) && (e = 1); var t = e > 10 ? 10 : e, n = Math.random().toString(36).substr(2, t); return n.length >= e ? n : n.concat(J(e - n.length)) } function $(e) { return y(null == e ? void 0 : e.id) && e.id !== c.a && y(null == e ? void 0 : e.entityType) } function Z() { return g(window.flutter_inappwebview) } var ee = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".length; function te(e) { for (var t = "", n = 0; n < e; n++)t += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(Math.random() * ee)); return t } }, "/3Pq": function (e, t, n) { "use strict"; var i; n.d(t, "a", function () { return i }), function (e) { e.TB_CORE = "TB_CORE", e.TB_RULE_ENGINE = "TB_RULE_ENGINE", e.TB_TRANSPORT = "TB_TRANSPORT", e.JS_EXECUTOR = "JS_EXECUTOR" }(i || (i = {})) }, "/crD": function (e, t, n) { "use strict"; n.d(t, "a", function () { return d }); var i = n("fXoL"), r = n("Vurf"), o = n("l7P3"), a = n("C/rb"), s = n("2Vo4"), l = n("zp9Z"), c = n("//Q6"), u = n("YnEf"), d = function () { function e(e, t, n) { var i = this; this.store = e, this.authService = t, this.dashboardService = n, this.menuSections$ = new s.a([]), this.homeSections$ = new s.a([]), this.sectionAA = [], this.store.pipe(Object(o.select)(a.c)).subscribe(function (e) { var t; e.authUser && i.dashboardService.getHomeDashboard(null === (t = e.userDetails) || void 0 === t ? void 0 : t.email).subscribe(function (t) { i.buildMenu(t, e) }) }) } return e.prototype.ngOnInit = function () { }, e.prototype.buildMenu = function (e, t) { var n, i; switch (t.authUser.authority) { case l.a.SYS_ADMIN: n = this.buildSysAdminMenu(t), i = this.buildSysAdminHome(t); break; case l.a.TENANT_ADMIN: n = this.buildTenantAdminMenu(t, e), i = this.buildTenantAdminHome(t); break; case l.a.CUSTOMER_USER: n = this.buildCustomerUserMenu(t, e), i = this.buildCustomerUserHome(t) }this.menuSections$.next(n), this.homeSections$.next(i) }, e.prototype.buildSysAdminMenu = function (e) { var t = []; return t.push({ id: Object(c.k)(), name: "home.home", type: "link", path: "/home", icon: "home" }, { id: Object(c.k)(), name: "tenant.tenants", type: "link", path: "/tenants", icon: "supervisor_account" }, { id: Object(c.k)(), name: "tenant-profile.tenant-profiles", type: "link", path: "/tenantProfiles", icon: "mdi:alpha-t-box", isMdiIcon: !0 }, { id: Object(c.k)(), name: "widget.widget-library", type: "link", path: "/widgets-bundles", icon: "now_widgets" }, { id: Object(c.k)(), name: "admin.system-settings", type: "toggle", path: "/settings", height: "240px", icon: "settings", pages: [{ id: Object(c.k)(), name: "admin.general", type: "link", path: "/settings/general", icon: "settings_applications" }, { id: Object(c.k)(), name: "admin.outgoing-mail", type: "link", path: "/settings/outgoing-mail", icon: "mail" }, { id: Object(c.k)(), name: "admin.sms-provider", type: "link", path: "/settings/sms-provider", icon: "sms" }, { id: Object(c.k)(), name: "admin.security-settings", type: "link", path: "/settings/security-settings", icon: "security" }, { id: Object(c.k)(), name: "admin.oauth2.oauth2", type: "link", path: "/settings/oauth2", icon: "security" }, { id: Object(c.k)(), name: "resource.resources-library", type: "link", path: "/settings/resources-library", icon: "folder" }] }), t }, e.prototype.buildSysAdminHome = function (e) { var t = []; return t.push({ name: "tenant.management", places: [{ name: "tenant.tenants", icon: "supervisor_account", path: "/tenants" }, { name: "tenant-profile.tenant-profiles", icon: "mdi:alpha-t-box", isMdiIcon: !0, path: "/tenantProfiles" }] }, { name: "widget.management", places: [{ name: "widget.widget-library", icon: "now_widgets", path: "/widgets-bundles" }] }, { name: "admin.system-settings", places: [{ name: "admin.general", icon: "settings_applications", path: "/settings/general" }, { name: "admin.outgoing-mail", icon: "mail", path: "/settings/outgoing-mail" }, { name: "admin.sms-provider", icon: "sms", path: "/settings/sms-provider" }, { name: "admin.security-settings", icon: "security", path: "/settings/security-settings" }, { name: "admin.oauth2.oauth2", icon: "security", path: "/settings/oauth2" }, { name: "resource.resources-library", icon: "folder", path: "/settings/resources-library" }] }), t }, e.prototype.buildTenantAdminMenuOld = function (e) { var t = []; return t.push({ id: Object(c.k)(), name: "home.home", type: "link", path: "/home", notExact: !0, icon: "home" }, { id: Object(c.k)(), name: "rulechain.rulechains", type: "link", path: "/ruleChains", icon: "settings_ethernet" }, { id: Object(c.k)(), name: "customer.customers", type: "link", path: "/customers", icon: "supervisor_account" }, { id: Object(c.k)(), name: "asset.assets", type: "link", path: "/assets", icon: "domain" }, { id: Object(c.k)(), name: "device.devices", type: "link", path: "/devices", icon: "devices_other" }, { id: Object(c.k)(), name: "device-profile.device-profiles", type: "link", path: "/deviceProfiles", icon: "mdi:alpha-d-box", isMdiIcon: !0 }, { id: Object(c.k)(), name: "ota-update.ota-updates", type: "link", path: "/otaUpdates", icon: "memory" }, { id: Object(c.k)(), name: "entity-view.entity-views", type: "link", path: "/entityViews", icon: "view_quilt" }, { id: Object(c.k)(), name: "Device Management", type: "link", path: "/device-management", icon: "devices_other" }, { id: Object(c.k)(), name: "Production Line", type: "link", path: "/production-line", icon: "settings_applications" }, { id: Object(c.k)(), name: "PLC and Machine", type: "link", path: "/plc-machine", icon: "touch_app" }), e.edgesSupportEnabled && t.push({ id: Object(c.k)(), name: "edge.edge-instances", type: "link", path: "/edgeInstances", icon: "router" }, { id: Object(c.k)(), name: "edge.management", type: "toggle", path: "/edgeManagement", height: "40px", icon: "settings_input_antenna", pages: [{ id: Object(c.k)(), name: "edge.rulechain-templates", type: "link", path: "/edgeManagement/ruleChains", icon: "settings_ethernet" }] }), t.push({ id: Object(c.k)(), name: "widget.widget-library", type: "link", path: "/widgets-bundles", icon: "now_widgets" }, { id: Object(c.k)(), name: "dashboard.dashboards", type: "link", path: "/dashboards", icon: "dashboards" }, { id: Object(c.k)(), name: "audit-log.audit-logs", type: "link", path: "/auditLogs", icon: "track_changes" }, { id: Object(c.k)(), name: "api-usage.api-usage", type: "link", path: "/usage", icon: "insert_chart", notExact: !0 }, { id: Object(c.k)(), name: "admin.system-settings", type: "toggle", path: "/settings", height: "80px", icon: "settings", pages: [{ id: Object(c.k)(), name: "admin.home-settings", type: "link", path: "/settings/home", icon: "settings_applications" }, { id: Object(c.k)(), name: "resource.resources-library", type: "link", path: "/settings/resources-library", icon: "folder" }] }, { id: Object(c.k)(), name: "Product", type: "link", path: "/product", icon: "settings_backup_restore" }), t }, e.prototype.buildTenantAdminMenu = function (e, t) { var n = []; if (n.push({ id: Object(c.k)(), name: "home.home", type: "link", path: "/home", notExact: !0, icon: "home" }), t.configuration) { var i = t.configuration.widgets; for (var r in i) { var o = i[r]; n.push({ id: Object(c.k)(), name: o.config.settings.name, type: "link", path: o.config.settings.path, notExact: !0, icon: o.config.settings.icon }) } } return (t.roles.includes("manager_scada") || e.userDetails.email.includes("ecyberlinh@gmail.com")) && n.push({ id: Object(c.k)(), name: "asset.assets", type: "link", path: "/assets", icon: "domain" }, { id: Object(c.k)(), name: "device.devices", type: "link", path: "/devices", icon: "devices_other" }, { id: Object(c.k)(), name: "device-profile.device-profiles", type: "link", path: "/deviceProfiles", icon: "mdi:alpha-d-box", isMdiIcon: !0 }, { id: Object(c.k)(), name: "ota-update.ota-updates", type: "link", path: "/otaUpdates", icon: "memory" }, { id: Object(c.k)(), name: "entity-view.entity-views", type: "link", path: "/entityViews", icon: "view_quilt" }, { id: Object(c.k)(), name: "rulechain.rulechains", type: "link", path: "/ruleChains", icon: "settings_ethernet" }, { id: Object(c.k)(), name: "widget.widget-library", type: "link", path: "/widgets-bundles", icon: "now_widgets" }, { id: Object(c.k)(), name: "admin.system-settings", type: "toggle", path: "/settings", height: "80px", icon: "settings", pages: [{ id: Object(c.k)(), name: "admin.home-settings", type: "link", path: "/settings/home", icon: "settings_applications" }, { id: Object(c.k)(), name: "resource.resources-library", type: "link", path: "/settings/resources-library", icon: "folder" }] }), n }, e.prototype.buildTenantAdminHome = function (e) { var t = []; return t.push({ name: "rulechain.management", places: [{ name: "rulechain.rulechains", icon: "settings_ethernet", path: "/ruleChains" }] }, { name: "customer.management", places: [{ name: "customer.customers", icon: "supervisor_account", path: "/customers" }] }, { name: "asset.management", places: [{ name: "asset.assets", icon: "domain", path: "/assets" }] }, { name: "device.management", places: [{ name: "device.devices", icon: "devices_other", path: "/devices" }, { name: "device-profile.device-profiles", icon: "mdi:alpha-d-box", isMdiIcon: !0, path: "/deviceProfiles" }, { name: "ota-update.ota-updates", icon: "memory", path: "/otaUpdates" }] }, { name: "entity-view.management", places: [{ name: "entity-view.entity-views", icon: "view_quilt", path: "/entityViews" }] }), e.edgesSupportEnabled && t.push({ name: "edge.management", places: [{ name: "edge.edge-instances", icon: "router", path: "/edgeInstances" }, { name: "edge.rulechain-templates", icon: "settings_ethernet", path: "/edgeManagement/ruleChains" }] }), t.push({ name: "dashboard.management", places: [{ name: "widget.widget-library", icon: "now_widgets", path: "/widgets-bundles" }, { name: "dashboard.dashboards", icon: "dashboard", path: "/dashboards" }] }, { name: "audit-log.audit", places: [{ name: "audit-log.audit-logs", icon: "track_changes", path: "/auditLogs" }, { name: "api-usage.api-usage", icon: "insert_chart", path: "/usage" }] }, { name: "admin.system-settings", places: [{ name: "admin.home-settings", icon: "settings_applications", path: "/settings/home" }, { name: "resource.resources-library", icon: "folder", path: "/settings/resources-library" }] }), t }, e.prototype.buildCustomerUserMenuOld = function (e) { var t = []; return t.push({ id: Object(c.k)(), name: "home.home", type: "link", path: "/home", notExact: !0, icon: "home" }, { id: Object(c.k)(), name: "asset.assets", type: "link", path: "/assets", icon: "domain" }, { id: Object(c.k)(), name: "device.devices", type: "link", path: "/devices", icon: "devices_other" }, { id: Object(c.k)(), name: "entity-view.entity-views", type: "link", path: "/entityViews", icon: "view_quilt" }), e.edgesSupportEnabled && t.push({ id: Object(c.k)(), name: "edge.edge-instances", type: "link", path: "/edgeInstances", icon: "router" }), t.push({ id: Object(c.k)(), name: "dashboard.dashboards", type: "link", path: "/dashboards", icon: "dashboard" }), t }, e.prototype.buildCustomerUserMenu = function (e, t) { var n = []; if (n.push({ id: Object(c.k)(), name: "home.home", type: "link", path: "/home", notExact: !0, icon: "home" }), t.configuration) { var i = t.configuration.widgets; for (var r in i) { var o = i[r]; n.push({ id: Object(c.k)(), name: o.config.settings.name, type: "link", path: o.config.settings.path, notExact: !0, icon: o.config.settings.icon }) } } return n }, e.prototype.buildCustomerUserHome = function (e) { var t = []; return t.push({ name: "asset.view-assets", places: [{ name: "asset.assets", icon: "domain", path: "/assets" }] }, { name: "device.view-devices", places: [{ name: "device.devices", icon: "devices_other", path: "/devices" }] }, { name: "entity-view.management", places: [{ name: "entity-view.entity-views", icon: "view_quilt", path: "/entityViews" }] }), e.edgesSupportEnabled && t.push({ name: "edge.management", places: [{ name: "edge.edge-instances", icon: "settings_input_antenna", path: "/edgeInstances" }] }), t.push({ name: "dashboard.view-dashboards", places: [{ name: "dashboard.dashboards", icon: "dashboard", path: "/dashboards" }] }), t }, e.prototype.menuSections = function () { return this.menuSections$ }, e.prototype.homeSections = function () { return this.homeSections$ }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275inject"](o.Store), i["\u0275\u0275inject"](r.a), i["\u0275\u0275inject"](u.a)) }, e.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, 0: function (e, t, n) { e.exports = n("zUnb") }, "0G7Z": function (e, t, n) { "use strict"; n.d(t, "c", function () { return h }), n.d(t, "b", function () { return g }), n.d(t, "a", function () { return y }), n.d(t, "d", function () { return b }), n.d(t, "e", function () { return v }), n.d(t, "g", function () { return E }), n.d(t, "f", function () { return T }); var i = n("mrSG"), r = n("0lYY"), o = n("//Q6"), a = n("LRne"), s = n("cp0P"), l = n("xKAQ"), c = n("C/rb"), u = n("mbhL"), d = n("lJxs"), p = n("5+tZ"), m = n("eIep"), f = n("JIr8"), h = function () { function e(e, t, n) { var i = this; this.dashboard = e, this.dashboardWidget = t, this.widget = n, this.inited = !1, this.destroyed = !1, this.subscriptions = {}, this.defaultSubscription = null, this.timewindowFunctions = { onUpdateTimewindow: function (e, t, n) { i.defaultSubscription && i.defaultSubscription.onUpdateTimewindow(e, t, n) }, onResetTimewindow: function () { i.defaultSubscription && i.defaultSubscription.onResetTimewindow() } }, this.controlApi = { sendOneWayCommand: function (e, t, n, r, o) { return i.defaultSubscription ? i.defaultSubscription.sendOneWayCommand(e, t, n, r, o) : Object(a.a)(null) }, sendTwoWayCommand: function (e, t, n, r, o) { return i.defaultSubscription ? i.defaultSubscription.sendTwoWayCommand(e, t, n, r, o) : Object(a.a)(null) }, completedCommand: function () { return i.defaultSubscription ? i.defaultSubscription.completedCommand() : Object(a.a)(null) } }, this.utils = { formatValue: o.h }, this.hideTitlePanel = !1, this.rxjs = { forkJoin: s.a, of: a.a, map: d.a, mergeMap: p.b, switchMap: m.a, catchError: f.a } } return Object.defineProperty(e.prototype, "stateController", { get: function () { return this.dashboard.stateController }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "aliasController", { get: function () { return this.dashboard.aliasController }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "dashboardTimewindow", { get: function () { return this.dashboard.dashboardTimewindow }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "widgetConfig", { get: function () { return this.widget.config }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "settings", { get: function () { return this.widget.config.settings }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "units", { get: function () { return this.widget.config.units || "" }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "decimals", { get: function () { return Object(o.n)(this.widget.config.decimals) ? this.widget.config.decimals : 2 }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "changeDetector", { set: function (e) { this.changeDetectorValue = e }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "containerChangeDetector", { set: function (e) { this.containerChangeDetectorValue = e }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "currentUser", { get: function () { return this.store ? Object(c.b)(this.store) : null }, enumerable: !1, configurable: !0 }), e.prototype.showSuccessToast = function (e, t, n, i, r) { void 0 === t && (t = 1e3), void 0 === n && (n = "bottom"), void 0 === i && (i = "left"), this.showToast("success", e, t, n, i, r) }, e.prototype.showInfoToast = function (e, t, n, i) { void 0 === t && (t = "bottom"), void 0 === n && (n = "left"), this.showToast("info", e, void 0, t, n, i) }, e.prototype.showWarnToast = function (e, t, n, i) { void 0 === t && (t = "bottom"), void 0 === n && (n = "left"), this.showToast("warn", e, void 0, t, n, i) }, e.prototype.showErrorToast = function (e, t, n, i) { void 0 === t && (t = "bottom"), void 0 === n && (n = "left"), this.showToast("error", e, void 0, t, n, i) }, e.prototype.showToast = function (e, t, n, i, r, o) { void 0 === i && (i = "bottom"), void 0 === r && (r = "left"), this.store.dispatch(new l.b({ message: t, type: e, duration: n, verticalPosition: i, horizontalPosition: r, target: o, panelClass: this.widgetNamespace, forceDismiss: !0 })) }, e.prototype.hideToast = function (e) { this.store.dispatch(new l.a({ target: e })) }, e.prototype.detectChanges = function (e) { if (void 0 === e && (e = !1), !this.destroyed) { e && this.dashboardWidget.updateWidgetParams(); try { this.changeDetectorValue.detectChanges() } catch (t) { } } }, e.prototype.detectContainerChanges = function () { if (!this.destroyed) try { this.containerChangeDetectorValue.detectChanges() } catch (e) { } }, e.prototype.updateWidgetParams = function () { var e = this; this.destroyed || setTimeout(function () { e.dashboardWidget.updateWidgetParams() }, 0) }, e.prototype.updateAliases = function (e) { this.aliasController.updateAliases(e) }, e.prototype.reset = function () { this.destroyed = !1, this.hideTitlePanel = !1, this.widgetTitle = void 0, this.widgetActions = void 0 }, e.prototype.pageLink = function (e, t, n, i) { return void 0 === t && (t = 0), void 0 === n && (n = null), void 0 === i && (i = null), new u.b(e, t, n, i) }, e }(), g = { type: r.m.latest, widgetName: "Widget type not found", alias: "undefined", sizeX: 8, sizeY: 6, resources: [], templateHtml: '<div class="tb-widget-error-container"><div class="tb-widget-error-msg" innerHTML="{{\'widget.widget-type-not-found\' | translate }}"></div></div>', templateCss: "", controllerScript: "self.onInit = function() {}", settingsSchema: "{}\n", dataKeySettingsSchema: "{}\n", image: null, description: null, defaultConfig: '{\n"title": "Widget type not found",\n"datasources": [],\n"settings": {}\n}\n', typeParameters: {} }, y = { type: r.m.latest, widgetName: "Error loading widget", alias: "error", sizeX: 8, sizeY: 6, resources: [], templateHtml: '<div class="tb-widget-error-container"><div translate class="tb-widget-error-msg">widget.widget-type-load-error</div><div *ngFor="let error of errorMessages" class="tb-widget-error-msg">{{ error }}</div></div>', templateCss: "", controllerScript: "self.onInit = function() {}", settingsSchema: "{}\n", dataKeySettingsSchema: "{}\n", image: null, description: null, defaultConfig: '{\n"title": "Widget failed to load",\n"datasources": [],\n"settings": {}\n}\n', typeParameters: {} }; function b(e) { var t = v(e); return t.image = e.image, t.description = e.description, t } function v(e) { return { widgetName: e.name, alias: e.alias, type: e.descriptor.type, sizeX: e.descriptor.sizeX, sizeY: e.descriptor.sizeY, resources: e.descriptor.resources, templateHtml: e.descriptor.templateHtml, templateCss: e.descriptor.templateCss, controllerScript: e.descriptor.controllerScript, settingsSchema: e.descriptor.settingsSchema, dataKeySettingsSchema: e.descriptor.dataKeySettingsSchema, defaultConfig: e.descriptor.defaultConfig } } function E(e, t, n, r, o) { var a = T(e, t, n, r, o); return Object(i.a)(Object(i.a)({}, a), { description: e.description, image: e.image }) } function T(e, t, n, i, r) { var o = { type: e.type, sizeX: e.sizeX, sizeY: e.sizeY, resources: e.resources, templateHtml: e.templateHtml, templateCss: e.templateCss, controllerScript: e.controllerScript, settingsSchema: e.settingsSchema, dataKeySettingsSchema: e.dataKeySettingsSchema, defaultConfig: e.defaultConfig }; return { id: t, tenantId: n, createdTime: r, bundleAlias: i, alias: e.alias, name: e.widgetName, descriptor: o } } }, "0HhY": function (e, t, n) { "use strict"; n.d(t, "a", function () { return A }); var i = n("mrSG"), r = n("fXoL"), o = n("RxGS"), a = n("3Pt+"), s = n("8LU1"), l = n("OiFK"), c = n("S+vS"), u = n("9DSm"), d = n("l7P3"), p = n("jhN1"), m = n("sYmb"), f = n("ofXK"), h = n("3TNn"), g = n("bTqV"), y = n("Qu3c"), b = n("NFeN"), v = ["flow"]; function E(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "label", 9), r["\u0275\u0275text"](1), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = r["\u0275\u0275nextContext"](); r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate"](n.label) } } function T(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "div"), r["\u0275\u0275text"](1), r["\u0275\u0275pipe"](2, "translate"), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = r["\u0275\u0275nextContext"](2); r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](2, 1, n.disabled ? "dashboard.empty-image" : "dashboard.no-image")) } } function S(e, t) { if (1 & e && r["\u0275\u0275element"](0, "img", 13), 2 & e) { var n = r["\u0275\u0275nextContext"](2); r["\u0275\u0275property"]("src", n.safeImageUrl, r["\u0275\u0275sanitizeUrl"]) } } function C(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "div", 10), r["\u0275\u0275template"](1, T, 3, 3, "div", 11), r["\u0275\u0275template"](2, S, 1, 1, "ng-template", null, 12, r["\u0275\u0275templateRefExtractor"]), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = r["\u0275\u0275reference"](3), i = r["\u0275\u0275nextContext"](); r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", !i.safeImageUrl)("ngIfElse", n) } } function O(e, t) { if (1 & e) { var n = r["\u0275\u0275getCurrentView"](); r["\u0275\u0275elementStart"](0, "div", 14), r["\u0275\u0275elementStart"](1, "button", 15), r["\u0275\u0275listener"]("click", function () { return r["\u0275\u0275restoreView"](n), r["\u0275\u0275nextContext"]().clearImage() }), r["\u0275\u0275pipe"](2, "translate"), r["\u0275\u0275elementStart"](3, "mat-icon"), r["\u0275\u0275text"](4, "close"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]() } 2 & e && (r["\u0275\u0275advance"](1), r["\u0275\u0275propertyInterpolate"]("matTooltip", r["\u0275\u0275pipeBind1"](2, 1, "action.remove"))) } var w = function () { return { accept: "image/*" } }; function I(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "div", 16), r["\u0275\u0275elementStart"](1, "label", 17), r["\u0275\u0275text"](2, "dashboard.drop-image"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](3, "input", 18), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = r["\u0275\u0275nextContext"](), i = r["\u0275\u0275reference"](3); r["\u0275\u0275property"]("flow", i.flowJs), r["\u0275\u0275advance"](1), r["\u0275\u0275propertyInterpolate"]("for", n.inputId), r["\u0275\u0275advance"](2), r["\u0275\u0275propertyInterpolate"]("id", n.inputId), r["\u0275\u0275property"]("flow", i.flowJs)("flowAttributes", r["\u0275\u0275pureFunction0"](5, w)) } } var x = function (e) { return { size: e } }; function M(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "div", 19), r["\u0275\u0275pipe"](1, "fileSize"), r["\u0275\u0275text"](2, "dashboard.maximum-upload-file-size"), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = r["\u0275\u0275nextContext"](); r["\u0275\u0275property"]("translateParams", r["\u0275\u0275pureFunction1"](3, x, r["\u0275\u0275pipeBind1"](1, 1, n.maxSizeByte))) } } var j = function () { return { singleFile: !0, allowDuplicateUploads: !0 } }, A = function (e) { function t(t, n, i, r, o, a) { var s = e.call(this, t) || this; return s.store = t, s.utils = n, s.sanitizer = i, s.dialog = r, s.translate = o, s.fileSize = a, s.showClearButton = !0, s.showPreview = !0, s.inputId = s.utils.guid(), s.propagateChange = null, s } return Object(i.d)(t, e), Object.defineProperty(t.prototype, "required", { get: function () { return this.requiredValue }, set: function (e) { var t = Object(s.coerceBooleanProperty)(e); this.requiredValue !== t && (this.requiredValue = t) }, enumerable: !1, configurable: !0 }), t.prototype.ngAfterViewInit = function () { var e = this; this.autoUploadSubscription = this.flow.events$.subscribe(function (t) { if ("fileAdded" === t.type) { var n = t.event[0].file; if (e.maxSizeByte && e.maxSizeByte < n.size) return e.dialog.alert(e.translate.instant("dashboard.cannot-upload-file"), e.translate.instant("dashboard.maximum-upload-file-size", { size: e.fileSize.transform(e.maxSizeByte) })).subscribe(function () { }), !1; var i = new FileReader; i.onload = function (t) { "string" == typeof i.result && i.result.startsWith("data:image/") && (e.imageUrl = i.result, e.safeImageUrl = e.sanitizer.bypassSecurityTrustUrl(e.imageUrl), e.updateModel()) }, i.readAsDataURL(n) } }) }, t.prototype.ngOnDestroy = function () { this.autoUploadSubscription.unsubscribe() }, t.prototype.registerOnChange = function (e) { this.propagateChange = e }, t.prototype.registerOnTouched = function (e) { }, t.prototype.setDisabledState = function (e) { this.disabled = e }, t.prototype.writeValue = function (e) { this.imageUrl = e, this.imageUrl ? this.safeImageUrl = this.sanitizer.bypassSecurityTrustUrl(this.imageUrl) : this.safeImageUrl = null }, t.prototype.updateModel = function () { this.propagateChange(this.imageUrl) }, t.prototype.clearImage = function () { this.imageUrl = null, this.safeImageUrl = null, this.updateModel() }, t.\u0275fac = function (e) { return new (e || t)(r["\u0275\u0275directiveInject"](d.Store), r["\u0275\u0275directiveInject"](l.a), r["\u0275\u0275directiveInject"](p.DomSanitizer), r["\u0275\u0275directiveInject"](c.a), r["\u0275\u0275directiveInject"](m.TranslateService), r["\u0275\u0275directiveInject"](u.a)) }, t.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: t, selectors: [["tb-image-input"]], viewQuery: function (e, t) { if (1 & e && r["\u0275\u0275viewQuery"](v, 3), 2 & e) { var n; r["\u0275\u0275queryRefresh"](n = r["\u0275\u0275loadQuery"]()) && (t.flow = n.first) } }, inputs: { label: "label", maxSizeByte: "maxSizeByte", required: "required", disabled: "disabled", showClearButton: "showClearButton", showPreview: "showPreview", inputId: "inputId" }, features: [r["\u0275\u0275ProvidersFeature"]([{ provide: a.NG_VALUE_ACCESSOR, useExisting: Object(r.forwardRef)(function () { return t }), multi: !0 }]), r["\u0275\u0275InheritDefinitionFeature"]], decls: 9, vars: 7, consts: [[1, "tb-container"], ["class", "tb-title", 4, "ngIf"], [3, "flowConfig"], ["flow", "flow"], [1, "tb-image-select-container"], ["class", "tb-image-preview-container", 4, "ngIf"], ["class", "tb-image-clear-container", 4, "ngIf"], ["class", "drop-area tb-flow-drop", "flowDrop", "", 3, "flow", 4, "ngIf"], ["class", "tb-hint", "translate", "", 3, "translateParams", 4, "ngIf"], [1, "tb-title"], [1, "tb-image-preview-container"], [4, "ngIf", "ngIfElse"], ["elseBlock", ""], [1, "tb-image-preview", 3, "src"], [1, "tb-image-clear-container"], ["mat-button", "", "mat-icon-button", "", "color", "accent", "type", "button", "matTooltipPosition", "above", 1, "tb-image-clear-btn", 3, "matTooltip", "click"], ["flowDrop", "", 1, "drop-area", "tb-flow-drop", 3, "flow"], ["translate", "", 3, "for"], ["flowButton", "", "type", "file", 1, "file-input", 3, "flow", "flowAttributes", "id"], ["translate", "", 1, "tb-hint", 3, "translateParams"]], template: function (e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "div", 0), r["\u0275\u0275template"](1, E, 2, 1, "label", 1), r["\u0275\u0275elementContainerStart"](2, 2, 3), r["\u0275\u0275elementStart"](4, "div", 4), r["\u0275\u0275template"](5, C, 4, 2, "div", 5), r["\u0275\u0275template"](6, O, 5, 3, "div", 6), r["\u0275\u0275template"](7, I, 4, 6, "div", 7), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementContainerEnd"](), r["\u0275\u0275template"](8, M, 3, 5, "div", 8), r["\u0275\u0275elementEnd"]()), 2 & e && (r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", t.label), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("flowConfig", r["\u0275\u0275pureFunction0"](6, j)), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("ngIf", t.showPreview), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", t.showClearButton && !t.disabled), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", !t.disabled), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", t.maxSizeByte && !t.disabled)) }, directives: [f.NgIf, h.c, g.MatButton, y.MatTooltip, b.MatIcon, h.b, m.TranslateDirective, h.a], pipes: [m.TranslatePipe, u.a], styles: ["[_nghost-%COMP%]   .tb-container[_ngcontent-%COMP%]{margin-top:0}[_nghost-%COMP%]   .tb-container[_ngcontent-%COMP%]   label.tb-title[_ngcontent-%COMP%]{display:block;padding-bottom:8px}[_nghost-%COMP%]   .tb-image-select-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100px}[_nghost-%COMP%]   .tb-image-preview[_ngcontent-%COMP%]{width:auto;max-width:98px;height:auto;max-height:98px}[_nghost-%COMP%]   .tb-image-preview-container[_ngcontent-%COMP%]{position:relative;float:left;width:100px;height:100px;margin-right:12px;vertical-align:top;border:1px solid}[_nghost-%COMP%]   .tb-image-preview-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;font-size:18px;text-align:center}[_nghost-%COMP%]   .tb-image-preview-container[_ngcontent-%COMP%]   .tb-image-preview[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-image-preview-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}[_nghost-%COMP%]   .tb-image-clear-container[_ngcontent-%COMP%]{position:relative;float:right;width:48px;height:100px}[_nghost-%COMP%]   .tb-image-clear-btn[_ngcontent-%COMP%]{position:absolute!important;top:50%;transform:translateY(-50%)!important}[_nghost-%COMP%]   .file-input[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .tb-flow-drop[_ngcontent-%COMP%]{position:relative;height:100px;overflow:hidden;border:2px dashed}[_nghost-%COMP%]   .tb-flow-drop[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;width:100%;height:100%;font-size:16px;text-align:center}@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-flow-drop[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:24px}}[_nghost-%COMP%]   .tb-hint[_ngcontent-%COMP%]{margin-top:8px}"] }), t }(o.a); 0, void 0 }, "0Miz": function (e, t, n) { "use strict"; n.d(t, "a", function () { return a }); var i = n("fXoL"), r = n("R0Ic"), o = n("kmnG"), a = function () { function e() { } return Object.defineProperty(e.prototype, "error", { set: function (e) { var t = this; e && !this.message ? (this.message = e, this.state = "hide", setTimeout(function () { t.state = "show" })) : (this.errorValue = e, this.state = e ? "show" : "hide") }, enumerable: !1, configurable: !0 }), e.\u0275fac = function (t) { return new (t || e) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-error"]], inputs: { error: "error" }, decls: 3, vars: 2, consts: [[2, "margin-top", "0.5rem", "font-size", ".75rem"]], template: function (e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "div", 0), i["\u0275\u0275elementStart"](1, "mat-error"), i["\u0275\u0275text"](2), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275property"]("@animation", t.state), i["\u0275\u0275advance"](2), i["\u0275\u0275textInterpolate1"](" ", t.message, " ")) }, directives: [o.MatError], styles: ["[_nghost-%COMP%] {\n        height: 24px;\n    }"], data: { animation: [Object(r.trigger)("animation", [Object(r.state)("show", Object(r.style)({ opacity: 1 })), Object(r.state)("hide", Object(r.style)({ opacity: 0, transform: "translateY(-1rem)" })), Object(r.transition)("show => hide", Object(r.animate)("200ms ease-out")), Object(r.transition)("* => show", Object(r.animate)("200ms ease-in"))])] } }), e }(); 0, void 0 }, "0lYY": function (e, t, n) { "use strict"; var i; n.d(t, "m", function () { return i }), n.d(t, "n", function () { return o }), n.d(t, "j", function () { return a }), n.d(t, "b", function () { return r }), n.d(t, "h", function () { return l }), n.d(t, "c", function () { return s }), n.d(t, "i", function () { return u }), n.d(t, "g", function () { return d }), n.d(t, "a", function () { return c }), n.d(t, "f", function () { return f }), n.d(t, "d", function () { return p }), n.d(t, "e", function () { return m }), n.d(t, "k", function () { return h }), n.d(t, "l", function () { return g }), function (e) { e.timeseries = "timeseries", e.latest = "latest", e.rpc = "rpc", e.alarm = "alarm", e.static = "static" }(i || (i = {})); var r, o = new Map([[i.timeseries, { name: "widget.timeseries", icon: "timeline", configHelpLinkId: "widgetsConfigTimeseries", template: { bundleAlias: "charts", alias: "basic_timeseries" } }], [i.latest, { name: "widget.latest", icon: "track_changes", configHelpLinkId: "widgetsConfigLatest", template: { bundleAlias: "cards", alias: "attributes_card" } }], [i.rpc, { name: "widget.rpc", icon: "mdi:developer-board", configHelpLinkId: "widgetsConfigRpc", isMdiIcon: !0, template: { bundleAlias: "gpio_widgets", alias: "basic_gpio_control" } }], [i.alarm, { name: "widget.alarm", icon: "error", configHelpLinkId: "widgetsConfigAlarm", template: { bundleAlias: "alarm_widgets", alias: "alarms_table" } }], [i.static, { name: "widget.static", icon: "font_download", configHelpLinkId: "widgetsConfigStatic", template: { bundleAlias: "cards", alias: "html_card" } }]]), a = { headerButton: { name: "widget-action.header-button", value: "headerButton", multiple: !0 } }; !function (e) { e.column = "column", e.row = "row" }(r || (r = {})); var s, l = new Map([[r.column, "direction.column"], [r.row, "direction.row"]]); !function (e) { e.top = "top", e.bottom = "bottom", e.left = "left", e.right = "right" }(s || (s = {})); var c, u = new Map([[s.top, "position.top"], [s.bottom, "position.bottom"], [s.left, "position.left"], [s.right, "position.right"]]); function d(e) { return { direction: r.column, position: s.bottom, sortDataKeys: !1, showMin: !1, showMax: !1, showAvg: e === i.timeseries, showTotal: !1 } } !function (e) { e.function = "function", e.entity = "entity", e.entityCount = "entityCount" }(c || (c = {})); var p, m, f = new Map([[c.function, "function.function"], [c.entity, "entity.entity"], [c.entityCount, "entity.entities-count"]]); !function (e) { e.openDashboardState = "openDashboardState", e.updateDashboardState = "updateDashboardState", e.openDashboard = "openDashboard", e.custom = "custom", e.customPretty = "customPretty", e.mobileAction = "mobileAction" }(p || (p = {})), function (e) { e.takePictureFromGallery = "takePictureFromGallery", e.takePhoto = "takePhoto", e.mapDirection = "mapDirection", e.mapLocation = "mapLocation", e.scanQrCode = "scanQrCode", e.makePhoneCall = "makePhoneCall", e.getLocation = "getLocation", e.takeScreenshot = "takeScreenshot" }(m || (m = {})); var h = new Map([[p.openDashboardState, "widget-action.open-dashboard-state"], [p.updateDashboardState, "widget-action.update-dashboard-state"], [p.openDashboard, "widget-action.open-dashboard"], [p.custom, "widget-action.custom"], [p.customPretty, "widget-action.custom-pretty"], [p.mobileAction, "widget-action.mobile-action"]]), g = new Map([[m.takePictureFromGallery, "widget-action.mobile.take-picture-from-gallery"], [m.takePhoto, "widget-action.mobile.take-photo"], [m.mapDirection, "widget-action.mobile.map-direction"], [m.mapLocation, "widget-action.mobile.map-location"], [m.scanQrCode, "widget-action.mobile.scan-qr-code"], [m.makePhoneCall, "widget-action.mobile.make-phone-call"], [m.getLocation, "widget-action.mobile.get-location"], [m.takeScreenshot, "widget-action.mobile.take-screenshot"]]) }, "16lU": function (e, t, n) { "use strict"; n.d(t, "a", function () { return V }); var i = n("mrSG"), r = n("fXoL"), o = n("3Pt+"), a = n("z6cu"), s = n("lJxs"), l = n("5+tZ"), c = n("w1tV"), u = n("05l1"), d = n("x+ZX"), p = n("U3y+"), m = n("8LU1"), f = n("1y+p"), h = n("DaoB"), g = n("y7gY"), y = n("j37L"), b = n("gM18"), v = n("FtGj"), E = n("l7P3"), T = n("sYmb"), S = n("kmnG"), C = n("A5z7"), O = n("ofXK"), w = n("qFsG"), I = n("/1cH"), x = n("NFeN"), M = n("FKr1"), j = n("d5eY"), A = ["entitySubtypeInput"], R = ["entitySubtypeAutocomplete"], N = ["chipList"]; function P(e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "mat-icon", 13), r["\u0275\u0275text"](1, "close"), r["\u0275\u0275elementEnd"]()) } function k(e, t) { if (1 & e) { var n = r["\u0275\u0275getCurrentView"](); r["\u0275\u0275elementStart"](0, "mat-chip", 11), r["\u0275\u0275listener"]("removed", function () { r["\u0275\u0275restoreView"](n); var e = t.$implicit; return r["\u0275\u0275nextContext"]().remove(e) }), r["\u0275\u0275text"](1), r["\u0275\u0275template"](2, P, 2, 0, "mat-icon", 12), r["\u0275\u0275elementEnd"]() } if (2 & e) { var i = t.$implicit, o = r["\u0275\u0275nextContext"](); r["\u0275\u0275property"]("selectable", !o.disabled)("removable", !o.disabled), r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate1"](" ", i, " "), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", !o.disabled) } } function _(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "mat-option", 14), r["\u0275\u0275element"](1, "span", 15), r["\u0275\u0275pipe"](2, "highlight"), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit, i = r["\u0275\u0275nextContext"](); r["\u0275\u0275property"]("value", n), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("innerHTML", r["\u0275\u0275pipeBind2"](2, 2, n, i.searchText), r["\u0275\u0275sanitizeHtml"]) } } var F = function (e) { return { entitySubtype: e } }; function L(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "mat-option", 14), r["\u0275\u0275elementStart"](1, "span"), r["\u0275\u0275text"](2), r["\u0275\u0275pipe"](3, "async"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = r["\u0275\u0275nextContext"](); r["\u0275\u0275property"]("value", null), r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](3, 2, n.translate.get(n.noSubtypesMathingText, r["\u0275\u0275pureFunction1"](4, F, n.searchText))), " ") } } function D(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "mat-error"), r["\u0275\u0275text"](1), r["\u0275\u0275pipe"](2, "translate"), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = r["\u0275\u0275nextContext"](); r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](2, 1, n.subtypeListEmptyText), " ") } } var V = function () { function e(e, t, n, i, r, a, s, l) { this.store = e, this.broadcast = t, this.translate = n, this.assetService = i, this.deviceService = r, this.edgeService = a, this.entityViewService = s, this.fb = l, this.entitySubtypeList = [], this.separatorKeysCodes = [v.ENTER, v.COMMA, v.SEMICOLON], this.searchText = "", this.dirty = !1, this.propagateChange = function (e) { }, this.entitySubtypeListFormGroup = this.fb.group({ entitySubtypeList: [this.entitySubtypeList, this.required ? [o.Validators.required] : []], entitySubtype: [null] }) } return Object.defineProperty(e.prototype, "required", { get: function () { return this.requiredValue }, set: function (e) { var t = Object(m.coerceBooleanProperty)(e); this.requiredValue !== t && (this.requiredValue = t, this.updateValidators()) }, enumerable: !1, configurable: !0 }), e.prototype.updateValidators = function () { this.entitySubtypeListFormGroup.get("entitySubtypeList").setValidators(this.required ? [o.Validators.required] : []), this.entitySubtypeListFormGroup.get("entitySubtypeList").updateValueAndValidity() }, e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.ngOnInit = function () { var e = this; switch (this.entityType) { case p.b.ASSET: this.placeholder = this.required ? this.translate.instant("asset.enter-asset-type") : this.translate.instant("asset.any-asset"), this.secondaryPlaceholder = "+" + this.translate.instant("asset.asset-type"), this.noSubtypesMathingText = "asset.no-asset-types-matching", this.subtypeListEmptyText = "asset.asset-type-list-empty", this.broadcastSubscription = this.broadcast.on("assetSaved", function () { e.entitySubtypes = null }); break; case p.b.DEVICE: this.placeholder = this.required ? this.translate.instant("device.enter-device-type") : this.translate.instant("device.any-device"), this.secondaryPlaceholder = "+" + this.translate.instant("device.device-type"), this.noSubtypesMathingText = "device.no-device-types-matching", this.subtypeListEmptyText = "device.device-type-list-empty", this.broadcastSubscription = this.broadcast.on("deviceSaved", function () { e.entitySubtypes = null }); break; case p.b.EDGE: this.placeholder = this.required ? this.translate.instant("edge.enter-edge-type") : this.translate.instant("edge.any-edge"), this.secondaryPlaceholder = "+" + this.translate.instant("edge.edge-type"), this.noSubtypesMathingText = "edge.no-edge-types-matching", this.subtypeListEmptyText = "edge.edge-type-list-empty", this.broadcastSubscription = this.broadcast.on("edgeSaved", function () { e.entitySubtypes = null }); break; case p.b.ENTITY_VIEW: this.placeholder = this.required ? this.translate.instant("entity-view.enter-entity-view-type") : this.translate.instant("entity-view.any-entity-view"), this.secondaryPlaceholder = "+" + this.translate.instant("entity-view.entity-view-type"), this.noSubtypesMathingText = "entity-view.no-entity-view-types-matching", this.subtypeListEmptyText = "entity-view.entity-view-type-list-empty", this.broadcastSubscription = this.broadcast.on("entityViewSaved", function () { e.entitySubtypes = null }) }this.filteredEntitySubtypeList = this.entitySubtypeListFormGroup.get("entitySubtype").valueChanges.pipe(Object(s.a)(function (e) { return e || "" }), Object(l.b)(function (t) { return e.fetchEntitySubtypes(t) }), Object(c.a)()) }, e.prototype.ngAfterViewInit = function () { }, e.prototype.ngOnDestroy = function () { this.broadcastSubscription && this.broadcastSubscription.unsubscribe() }, e.prototype.setDisabledState = function (e) { this.disabled = e, e ? this.entitySubtypeListFormGroup.disable({ emitEvent: !1 }) : this.entitySubtypeListFormGroup.enable({ emitEvent: !1 }) }, e.prototype.writeValue = function (e) { this.searchText = "", null != e && e.length > 0 ? (this.modelValue = Object(i.h)(e), this.entitySubtypeList = Object(i.h)(e), this.entitySubtypeListFormGroup.get("entitySubtypeList").setValue(this.entitySubtypeList)) : (this.entitySubtypeList = [], this.entitySubtypeListFormGroup.get("entitySubtypeList").setValue(this.entitySubtypeList), this.modelValue = null), this.dirty = !0 }, e.prototype.add = function (e) { this.modelValue && -1 !== this.modelValue.indexOf(e) || (this.modelValue || (this.modelValue = []), this.modelValue.push(e), this.entitySubtypeList.push(e), this.entitySubtypeListFormGroup.get("entitySubtypeList").setValue(this.entitySubtypeList)), this.propagateChange(this.modelValue) }, e.prototype.chipAdd = function (e) { var t = (e.value || "").trim(); t && this.add(t), this.clear("") }, e.prototype.remove = function (e) { var t = this.entitySubtypeList.indexOf(e); t >= 0 && (this.entitySubtypeList.splice(t, 1), this.entitySubtypeListFormGroup.get("entitySubtypeList").setValue(this.entitySubtypeList), this.modelValue.splice(t, 1), this.modelValue.length || (this.modelValue = null), this.propagateChange(this.modelValue)) }, e.prototype.selected = function (e) { this.add(e.option.viewValue), this.clear("") }, e.prototype.displayEntitySubtypeFn = function (e) { return e || void 0 }, e.prototype.fetchEntitySubtypes = function (e) { return this.searchText = e, this.getEntitySubtypes().pipe(Object(s.a)(function (t) { var n = t.filter(function (t) { return !e || t.toUpperCase().startsWith(e.toUpperCase()) }); return n.length || (n = [e]), n })) }, e.prototype.getEntitySubtypes = function () { if (!this.entitySubtypes) { var e = void 0; switch (this.entityType) { case p.b.ASSET: e = this.assetService.getAssetTypes({ ignoreLoading: !0 }); break; case p.b.DEVICE: e = this.deviceService.getDeviceTypes({ ignoreLoading: !0 }); break; case p.b.EDGE: e = this.edgeService.getEdgeTypes({ ignoreLoading: !0 }); break; case p.b.ENTITY_VIEW: e = this.entityViewService.getEntityViewTypes({ ignoreLoading: !0 }) }if (!e) return Object(a.a)(null); this.entitySubtypes = e.pipe(Object(s.a)(function (e) { return e.map(function (e) { return e.type }) }), Object(u.a)(1), Object(d.a)()) } return this.entitySubtypes }, e.prototype.onFocus = function () { this.dirty && (this.entitySubtypeListFormGroup.get("entitySubtype").updateValueAndValidity({ onlySelf: !0, emitEvent: !0 }), this.dirty = !1) }, e.prototype.clear = function (e) { var t = this; void 0 === e && (e = ""), this.entitySubtypeInput.nativeElement.value = e, this.entitySubtypeListFormGroup.get("entitySubtype").patchValue(e, { emitEvent: !0 }), setTimeout(function () { t.entitySubtypeInput.nativeElement.blur(), t.entitySubtypeInput.nativeElement.focus() }, 0) }, e.\u0275fac = function (t) { return new (t || e)(r["\u0275\u0275directiveInject"](E.Store), r["\u0275\u0275directiveInject"](b.a), r["\u0275\u0275directiveInject"](T.TranslateService), r["\u0275\u0275directiveInject"](f.a), r["\u0275\u0275directiveInject"](h.a), r["\u0275\u0275directiveInject"](g.a), r["\u0275\u0275directiveInject"](y.a), r["\u0275\u0275directiveInject"](o.FormBuilder)) }, e.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-entity-subtype-list"]], viewQuery: function (e, t) { if (1 & e && (r["\u0275\u0275viewQuery"](A, 1), r["\u0275\u0275viewQuery"](R, 1), r["\u0275\u0275viewQuery"](N, 3)), 2 & e) { var n = void 0; r["\u0275\u0275queryRefresh"](n = r["\u0275\u0275loadQuery"]()) && (t.entitySubtypeInput = n.first), r["\u0275\u0275queryRefresh"](n = r["\u0275\u0275loadQuery"]()) && (t.entitySubtypeAutocomplete = n.first), r["\u0275\u0275queryRefresh"](n = r["\u0275\u0275loadQuery"]()) && (t.chipList = n.first) } }, inputs: { required: "required", disabled: "disabled", entityType: "entityType" }, features: [r["\u0275\u0275ProvidersFeature"]([{ provide: o.NG_VALUE_ACCESSOR, useExisting: Object(r.forwardRef)(function () { return e }), multi: !0 }])], decls: 14, vars: 15, consts: [["appearance", "standard", 1, "mat-block", 3, "formGroup"], ["formControlName", "entitySubtypeList"], ["chipList", ""], [3, "selectable", "removable", "removed", 4, "ngFor", "ngForOf"], ["matInput", "", "type", "text", "formControlName", "entitySubtype", "matAutocompleteOrigin", "", 2, "max-width", "200px", 3, "placeholder", "matAutocompleteConnectedTo", "matAutocomplete", "matChipInputFor", "matChipInputSeparatorKeyCodes", "focusin", "matChipInputTokenEnd"], ["entitySubtypeInput", "", "origin", "matAutocompleteOrigin"], [1, "tb-autocomplete", 3, "displayWith", "optionSelected"], ["entitySubtypeAutocomplete", "matAutocomplete"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value", 4, "ngIf"], [4, "ngIf"], [3, "selectable", "removable", "removed"], ["matChipRemove", "", 4, "ngIf"], ["matChipRemove", ""], [3, "value"], [3, "innerHTML"]], template: function (e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "mat-form-field", 0), r["\u0275\u0275elementStart"](1, "mat-chip-list", 1, 2), r["\u0275\u0275template"](3, k, 3, 4, "mat-chip", 3), r["\u0275\u0275elementStart"](4, "input", 4, 5), r["\u0275\u0275listener"]("focusin", function () { return t.onFocus() })("matChipInputTokenEnd", function (e) { return t.chipAdd(e) }), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](7, "mat-autocomplete", 6, 7), r["\u0275\u0275listener"]("optionSelected", function (e) { return t.selected(e) }), r["\u0275\u0275template"](9, _, 3, 5, "mat-option", 8), r["\u0275\u0275pipe"](10, "async"), r["\u0275\u0275template"](11, L, 4, 6, "mat-option", 9), r["\u0275\u0275pipe"](12, "async"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275template"](13, D, 3, 3, "mat-error", 10), r["\u0275\u0275elementEnd"]()), 2 & e) { var n, i = r["\u0275\u0275reference"](2), o = r["\u0275\u0275reference"](6), a = r["\u0275\u0275reference"](8); r["\u0275\u0275property"]("formGroup", t.entitySubtypeListFormGroup), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("ngForOf", t.entitySubtypeList), r["\u0275\u0275advance"](1), r["\u0275\u0275propertyInterpolate"]("placeholder", t.disabled ? "" : t.entitySubtypeList && t.entitySubtypeList.length ? t.secondaryPlaceholder : t.placeholder), r["\u0275\u0275property"]("matAutocompleteConnectedTo", o)("matAutocomplete", a)("matChipInputFor", i)("matChipInputSeparatorKeyCodes", t.separatorKeysCodes), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("displayWith", t.displayEntitySubtypeFn), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngForOf", r["\u0275\u0275pipeBind1"](10, 11, t.filteredEntitySubtypeList)), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngIf", !(null != (n = r["\u0275\u0275pipeBind1"](12, 13, t.filteredEntitySubtypeList)) && n.length)), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngIf", t.entitySubtypeListFormGroup.get("entitySubtypeList").hasError("required")) } }, directives: [S.MatFormField, o.NgControlStatusGroup, o.FormGroupDirective, C.MatChipList, o.NgControlStatus, o.FormControlName, O.NgForOf, w.MatInput, o.DefaultValueAccessor, I.MatAutocompleteTrigger, C.MatChipInput, I.MatAutocompleteOrigin, I.MatAutocomplete, O.NgIf, C.MatChip, x.MatIcon, C.MatChipRemove, M.MatOption, S.MatError], pipes: [O.AsyncPipe, j.a, T.TranslatePipe], styles: ["[_nghost-%COMP%]     .mat-form-field .mat-form-field-infix{border-top:none}"] }), e }(); 0, void 0 }, "1wU7": function (e, t, n) { "use strict"; n.d(t, "a", function () { return o }); var i = n("fXoL"), r = n("XiUz"), o = function () { function e() { this.logo = "assets/rangdong_logo.jpg" } return e.prototype.gotoThingsboard = function () { window.open("https://thingsboard.io", "_blank") }, e.\u0275fac = function (t) { return new (t || e) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-logo"]], decls: 1, vars: 1, consts: [["fxFlex", "", "aria-label", "logo", 1, "tb-logo-title", 3, "src", "click"]], template: function (e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "img", 0), i["\u0275\u0275listener"]("click", function () { return t.gotoThingsboard() }), i["\u0275\u0275elementEnd"]()), 2 & e && i["\u0275\u0275property"]("src", t.logo, i["\u0275\u0275sanitizeUrl"]) }, directives: [r.b], styles: [".login-logo[_nghost-%COMP%]   img.tb-logo-title[_ngcontent-%COMP%], .login-logo   [_nghost-%COMP%]   img.tb-logo-title[_ngcontent-%COMP%]{width:280px;height:60px;text-decoration:none;cursor:pointer;border:none;transform:none}.login-logo[_nghost-%COMP%]   img.tb-logo-title[_ngcontent-%COMP%]:focus, .login-logo   [_nghost-%COMP%]   img.tb-logo-title[_ngcontent-%COMP%]:focus{outline:0}"] }), e }(); 0, void 0 }, "1y+p": function (e, t, n) { "use strict"; n.d(t, "a", function () { return l }); var i = n("fXoL"), r = n("Y8nr"), o = n("mbhL"), a = n("AytR"), s = n("tk/3"), l = function () { function e(e) { this.http = e } return e.prototype.getTenantAssetInfosError = function (e, t, n, i) { void 0 === e && (e = ""); var a = new o.b(t, n); return this.http.get("/api/tenant/assetInfos" + a.toQuery() + "&type=" + e, Object(r.b)(i)) }, e.prototype.getTenantAssetInfos = function (e, t, n) { return void 0 === t && (t = ""), this.http.get("/api/tenant/assetInfos" + e.toQuery() + "&type=" + t, Object(r.b)(n)) }, e.prototype.getCustomerAssetInfos = function (e, t, n, i) { return void 0 === n && (n = ""), this.http.get("/api/customer/" + e + "/assetInfos" + t.toQuery() + "&type=" + n, Object(r.b)(i)) }, e.prototype.getAsset = function (e, t) { return this.http.get(a.a.integration_service + "/wrapperApis/asset/" + e, Object(r.b)(t)) }, e.prototype.getAssets = function (e, t) { return this.http.get("/api/assets?assetIds=" + e.join(","), Object(r.b)(t)) }, e.prototype.getAssetInfo = function (e, t) { return this.http.get(a.a.integration_service + "/wrapperApis/asset/info/" + e, Object(r.b)(t)) }, e.prototype.saveAsset = function (e, t) { return this.http.post("/api/asset", e, Object(r.b)(t)) }, e.prototype.deleteAsset = function (e, t) { return this.http.delete("/api/asset/" + e, Object(r.b)(t)) }, e.prototype.getAssetTypes = function (e) { return this.http.get("/api/asset/types", Object(r.b)(e)) }, e.prototype.makeAssetPublic = function (e, t) { return this.http.post("/api/customer/public/asset/" + e, null, Object(r.b)(t)) }, e.prototype.assignAssetToCustomer = function (e, t, n) { return this.http.post("/api/customer/" + e + "/asset/" + t, null, Object(r.b)(n)) }, e.prototype.unassignAssetFromCustomer = function (e, t) { return this.http.delete("/api/customer/asset/" + e, Object(r.b)(t)) }, e.prototype.findByQuery = function (e, t) { return this.http.post("/api/assets", e, Object(r.b)(t)) }, e.prototype.findByName = function (e, t) { return this.http.get("/api/tenant/assets?assetName=" + e, Object(r.b)(t)) }, e.prototype.assignAssetToEdge = function (e, t, n) { return this.http.post("/api/edge/" + e + "/asset/" + t, null, Object(r.b)(n)) }, e.prototype.unassignAssetFromEdge = function (e, t, n) { return this.http.delete("/api/edge/" + e + "/asset/" + t, Object(r.b)(n)) }, e.prototype.getEdgeAssets = function (e, t, n, i) { return void 0 === n && (n = ""), this.http.get("/api/edge/" + e + "/assets" + t.toQuery() + "&type=" + n, Object(r.b)(i)) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275inject"](s.HttpClient)) }, e.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, "2+wj": function (e, t, n) { "use strict"; n.d(t, "a", function () { return o }); var i = n("fXoL"), r = n("A5z7"), o = function () { function e(e, t) { this.chipsList = e, this.elementRef = t, this.chipDrop = new i.EventEmitter, this.draggableChips = [] } return e.prototype.onDocumentMouseUp = function () { this.draggableChips.forEach(function (e) { e.preventDrag = !1 }) }, e.prototype.ngAfterViewInit = function () { var e = this; this.configureDraggableChipList(), this.chipsList.chips.changes.subscribe(function () { e.configureDraggableChipList() }) }, e.prototype.configureDraggableChipList = function () { var e = this, t = []; this.chipsList.chips.forEach(function (t) { e.draggableChips.find(function (e) { return e.chip === t }) || e.draggableChips.push(new s(t, e.chipsList, e.elementRef.nativeElement, e.chipDrop)) }), this.draggableChips.forEach(function (n) { e.chipsList.chips.find(function (e) { return e === n.chip }) || t.push(n) }), t.forEach(function (t) { var n = e.draggableChips.indexOf(t); e.draggableChips.splice(n, 1) }) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](r.MatChipList), i["\u0275\u0275directiveInject"](i.ElementRef)) }, e.\u0275dir = i["\u0275\u0275defineDirective"]({ type: e, selectors: [["mat-chip-list", "tb-chip-draggable", ""]], hostBindings: function (e, t) { 1 & e && i["\u0275\u0275listener"]("mouseup", function () { return t.onDocumentMouseUp() }, !1, i["\u0275\u0275resolveDocument"]) }, outputs: { chipDrop: "chipDrop" } }), e }(); 0, void 0; var a = null, s = function () { function e(e, t, n, i) { this.chip = e, this.chipsList = t, this.chipListElement = n, this.chipDrop = i, this.dragging = !1, this.counter = 0, this.preventDrag = !1, this.dropHandler = this.onDrop.bind(this), this.dragOverHandler = this.onDragOver.bind(this), this.chipElement = e._elementRef.nativeElement, this.chipElement.setAttribute("draggable", "true"), this.handle = this.chipElement.getElementsByClassName("tb-chip-drag-handle")[0], this.chipElement.addEventListener("mousedown", this.onMouseDown.bind(this)), this.chipElement.addEventListener("dragstart", this.onDragStart.bind(this)), this.chipElement.addEventListener("dragend", this.onDragEnd.bind(this)), this.chipElement.addEventListener("dragenter", this.onDragEnter.bind(this)), this.chipElement.addEventListener("dragleave", this.onDragLeave.bind(this)) } return e.prototype.onMouseDown = function (e) { e.target !== this.handle && (this.preventDrag = !0) }, e.prototype.onDragStart = function (e) { if (this.preventDrag) e.preventDefault(); else { e.stopPropagation(), this.dragging = !0, a = this.chipListElement.id, this.chipListElement.classList.add("dragging"), this.chipElement.classList.add("dragging"); var t = (e = e.originalEvent || e).dataTransfer; t.effectAllowed = "copyMove", t.dropEffect = "move", t.setData("text", this.index() + "") } }, e.prototype.onDragEnter = function (e) { this.counter++, this.dragging || (this.chipElement.removeEventListener("dragover", this.dragOverHandler), this.chipElement.removeEventListener("drop", this.dropHandler), this.chipElement.addEventListener("dragover", this.dragOverHandler), this.chipElement.addEventListener("drop", this.dropHandler)) }, e.prototype.onDragLeave = function (e) { this.counter--, this.counter <= 0 && (this.counter = 0, this.chipElement.classList.remove("dropping"), this.chipElement.classList.remove("dropping-after"), this.chipElement.classList.remove("dropping-before")) }, e.prototype.onDragEnd = function (e) { e.stopPropagation(), this.dragging = !1, a = null, this.chipListElement.classList.remove("dragging"), this.chipElement.classList.remove("dragging") }, e.prototype.onDragOver = function (e) { if (!this.dragging && (e.preventDefault(), a === this.chipListElement.id)) { var t = this.chipElement.getBoundingClientRect(); e = e.originalEvent || e; var n = { width: t.right - t.left, height: t.bottom - t.top, x: e.clientX - t.left, y: e.clientY - t.top }, i = n.x, r = n.width / 2, o = n.y, s = n.height / 2; this.chipElement.classList.add("dropping"), this.chipElement.classList.remove("dropping-after"), this.chipElement.classList.remove("dropping-before"), i >= r || o >= s ? (this.dropPosition = "after", this.chipElement.classList.add("dropping-after")) : (this.dropPosition = "before", this.chipElement.classList.add("dropping-before")) } }, e.prototype.onDrop = function (e) { var t = this; if (this.counter = 0, e.preventDefault(), a === this.chipListElement.id) { e = e.originalEvent || e; var n, i = parseInt(e.dataTransfer.getData("text"), 10), r = this.index(); n = "before" === this.dropPosition ? i < r ? r - 1 : r : i < r ? r : r + 1, this.dropTimeout && clearTimeout(this.dropTimeout), this.dropTimeout = setTimeout(function () { t.dropPosition = null, t.chipElement.classList.remove("dropping"), t.chipElement.classList.remove("dropping-after"), t.chipElement.classList.remove("dropping-before"), t.chipElement.removeEventListener("drop", t.dropHandler); var e = { from: i, to: n }; t.chipDrop.emit(e) }, 62.5) } }, e.prototype.index = function () { return this.chipsList.chips.toArray().indexOf(this.chip) }, e }() }, "21Fy": function (e, t, n) { "use strict"; n.d(t, "a", function () { return Y }); var i = n("mrSG"), r = n("fXoL"), o = n("z6cu"), a = n("cp0P"), s = n("EY2u"), l = n("LRne"), c = n("mbhL"), u = n("U3y+"), d = n("DaoB"), p = n("WNjs"), m = n("ktVl"), f = n("9D3k"), h = n("YnEf"), g = n("4r/P"), y = n("C/rb"), b = n("zp9Z"), v = n("lJxs"), E = n("FQpF"), T = n("bOdf"), S = n("IAdc"), C = n("5+tZ"), O = n("JIr8"), w = n("1y+p"), I = n("j37L"), x = n("3Tyt"), M = n("Y8nr"), j = n("C4fA"), A = n("0lYY"), R = n("OiFK"), N = n("MBk6"), P = n("6OOC"), k = n("Bjlt"), _ = n("//Q6"), F = n("JIJk"), L = n("BsGH"), D = n("xw5a"), V = n("UZbx"), U = n("Dnot"), B = n("y7gY"), G = n("7zTf"), q = n("8km5"), z = n("5xOD"), H = n("g+M/"), W = n("tk/3"), Q = n("l7P3"), Y = function () { function e(e, t, n, i, r, o, a, s, l, c, u, d, p, m, f, h, g) { this.http = e, this.store = t, this.deviceService = n, this.edgeService = i, this.assetService = r, this.entityViewService = o, this.tenantService = a, this.customerService = s, this.userService = l, this.ruleChainService = c, this.dashboardService = u, this.entityRelationService = d, this.attributeService = p, this.otaPackageService = m, this.widgetService = f, this.deviceProfileService = h, this.utils = g } return e.prototype.getEntityObservable = function (e, t, n) { var i; switch (e) { case u.b.DEVICE: i = this.deviceService.getDevice(t, n); break; case u.b.ASSET: i = this.assetService.getAsset(t, n); break; case u.b.EDGE: i = this.edgeService.getEdge(t, n); break; case u.b.ENTITY_VIEW: i = this.entityViewService.getEntityView(t, n); break; case u.b.TENANT: i = this.tenantService.getTenant(t, n); break; case u.b.CUSTOMER: i = this.customerService.getCustomer(t, n); break; case u.b.DASHBOARD: i = this.dashboardService.getDashboardInfo(t, n); break; case u.b.USER: i = this.userService.getUser(t, n); break; case u.b.RULE_CHAIN: i = this.ruleChainService.getRuleChain(t, n); break; case u.b.ALARM: console.error("Get Alarm Entity is not implemented!"); break; case u.b.OTA_PACKAGE: i = this.otaPackageService.getOtaPackageInfo(t, n) }return i }, e.prototype.getEntity = function (e, t, n) { var i = this.getEntityObservable(e, t, n); return i || Object(o.a)(null) }, e.prototype.getEntitiesByIdsObservable = function (e, t) { var n = []; return t.forEach(function (t) { n.push(e(t)) }), Object(a.a)(n).pipe(Object(v.a)(function (e) { return e ? (e.sort(function (e, n) { return t.indexOf(e.id.id) - t.indexOf(n.id.id) }), e) : [] })) }, e.prototype.getEntitiesObservable = function (e, t, n) { var i, r = this; switch (e) { case u.b.DEVICE: i = this.deviceService.getDevices(t, n); break; case u.b.ASSET: i = this.assetService.getAssets(t, n); break; case u.b.EDGE: i = this.edgeService.getEdges(t, n); break; case u.b.ENTITY_VIEW: i = this.getEntitiesByIdsObservable(function (e) { return r.entityViewService.getEntityView(e, n) }, t); break; case u.b.TENANT: i = this.getEntitiesByIdsObservable(function (e) { return r.tenantService.getTenant(e, n) }, t); break; case u.b.CUSTOMER: i = this.getEntitiesByIdsObservable(function (e) { return r.customerService.getCustomer(e, n) }, t); break; case u.b.DASHBOARD: i = this.getEntitiesByIdsObservable(function (e) { return r.dashboardService.getDashboardInfo(e, n) }, t); break; case u.b.USER: i = this.getEntitiesByIdsObservable(function (e) { return r.userService.getUser(e, n) }, t); break; case u.b.ALARM: console.error("Get Alarm Entity is not implemented!") }return i }, e.prototype.getEntities = function (e, t, n) { var i = this.getEntitiesObservable(e, t, n); return i || Object(o.a)(null) }, e.prototype.getSingleTenantByPageLinkObservable = function (e, t) { var n = Object(y.b)(this.store).tenantId; return this.tenantService.getTenant(n, t).pipe(Object(v.a)(function (t) { var n = { data: [], totalPages: 0, totalElements: 0, hasNext: !1 }; return t.title.toLowerCase().startsWith(e.textSearch.toLowerCase()) && (n.data.push(t), n.totalPages = 1, n.totalElements = 1), n })) }, e.prototype.getSingleCustomerByPageLinkObservable = function (e, t) { var n = Object(y.b)(this.store).customerId; return this.customerService.getCustomer(n, t).pipe(Object(v.a)(function (t) { var n = { data: [], totalPages: 0, totalElements: 0, hasNext: !1 }; return t.title.toLowerCase().startsWith(e.textSearch.toLowerCase()) && (n.data.push(t), n.totalPages = 1, n.totalElements = 1), n })) }, e.prototype.getEntitiesByPageLinkObservable = function (e, t, n, i) { var r; void 0 === n && (n = ""); var o = Object(y.b)(this.store), a = o.customerId; switch (e) { case u.b.DEVICE: t.sortOrder.property = "name", o.authority === b.a.CUSTOMER_USER ? r = this.deviceService.getCustomerDeviceInfos(a, t, n, i) : (console.log("pageLink: ", t), r = this.deviceService.getTenantDeviceInfos(t, n, i)); break; case u.b.ASSET: t.sortOrder.property = "name", r = o.authority === b.a.CUSTOMER_USER ? this.assetService.getCustomerAssetInfos(a, t, n, i) : this.assetService.getTenantAssetInfos(t, n, i); break; case u.b.EDGE: t.sortOrder.property = "name", r = o.authority === b.a.CUSTOMER_USER ? this.edgeService.getCustomerEdgeInfos(a, t, n, i) : this.edgeService.getTenantEdgeInfos(t, n, i); break; case u.b.ENTITY_VIEW: t.sortOrder.property = "name", r = o.authority === b.a.CUSTOMER_USER ? this.entityViewService.getCustomerEntityViewInfos(a, t, n, i) : this.entityViewService.getTenantEntityViewInfos(t, n, i); break; case u.b.TENANT: t.sortOrder.property = "title", r = o.authority === b.a.TENANT_ADMIN ? this.getSingleTenantByPageLinkObservable(t, i) : this.tenantService.getTenants(t, i); break; case u.b.CUSTOMER: t.sortOrder.property = "title", r = o.authority === b.a.CUSTOMER_USER ? this.getSingleCustomerByPageLinkObservable(t, i) : this.customerService.getCustomers(t, i); break; case u.b.RULE_CHAIN: t.sortOrder.property = "name", r = q.a[n] ? this.ruleChainService.getRuleChains(t, n, i) : this.ruleChainService.getRuleChains(t, q.a.CORE, i); break; case u.b.DASHBOARD: t.sortOrder.property = "title", r = o.authority === b.a.CUSTOMER_USER ? this.dashboardService.getCustomerDashboards(a, t, i) : this.dashboardService.getTenantDashboards(t, i); break; case u.b.USER: t.sortOrder.property = "email", r = this.userService.getUsers(t); break; case u.b.ALARM: console.error("Get Alarm Entities is not implemented!"); break; case u.b.OTA_PACKAGE: t.sortOrder.property = "title", r = this.otaPackageService.getOtaPackages(t, i) }return r }, e.prototype.getEntitiesByPageLink = function (e, t, n, i) { var r = this; void 0 === n && (n = ""); var o = this.getEntitiesByPageLinkObservable(e, t, n, i); return o ? o.pipe(Object(E.a)(function (o) { return o.hasNext ? (t.page += 1, r.getEntitiesByPageLinkObservable(e, t, n, i)) : s.a }), Object(v.a)(function (e) { return e.data }), Object(T.a)(function (e) { return e }), Object(S.a)()) : Object(l.a)(null) }, e.prototype.getEntitiesByNameFilter = function (e, t, n, i, r) { void 0 === i && (i = ""); var o = new c.b(n, 0, t, { property: "name", direction: g.a.ASC }); if (-1 === n) return o.pageSize = 100, this.getEntitiesByPageLink(e, o, i, r).pipe(Object(v.a)(function (e) { return e && e.length ? e : null })); var a = this.getEntitiesByPageLinkObservable(e, o, i, r); return a ? a.pipe(Object(v.a)(function (e) { return e && e.data.length ? e.data : null })) : Object(l.a)(null) }, e.prototype.findEntityDataByQuery = function (e, t) { return this.http.post("/api/entitiesQuery/find", e, Object(M.b)(t)) }, e.prototype.findEntityKeysByQuery = function (e, t, n, i) { return void 0 === t && (t = !0), void 0 === n && (n = !0), this.http.post("/api/entitiesQuery/find/keys?attributes=" + t + "&timeseries=" + n, e, Object(M.b)(i)) }, e.prototype.findAlarmDataByQuery = function (e, t) { return this.http.post("/api/alarmsQuery/find", e, Object(M.b)(t)) }, e.prototype.findEntityInfosByFilterAndName = function (e, t, n) { var i = { type: D.d.ENTITY_FIELD, key: "name" }, r = { entityFilter: e, pageLink: { pageSize: 10, page: 0, sortOrder: { key: i, direction: g.a.ASC } }, entityFields: D.t, keyFilters: t && t.length ? [{ key: i, valueType: D.e.STRING, value: null, predicate: { type: D.f.STRING, operation: D.h.STARTS_WITH, ignoreCase: !0, value: { defaultValue: t } } }] : null }; return this.findEntityDataByQuery(r, n).pipe(Object(v.a)(function (e) { return { data: e.data.map(function (e) { return Object(D.s)(e) }), hasNext: e.hasNext, totalElements: e.totalElements, totalPages: e.totalPages } })) }, e.prototype.findSingleEntityInfoByEntityFilter = function (e, t) { var n = { entityFilter: e, pageLink: Object(D.k)(1), entityFields: D.t }; return this.findEntityDataByQuery(n, t).pipe(Object(v.a)(function (e) { if (e.data.length) { var t = e.data[0]; return Object(D.s)(t) } return null })) }, e.prototype.getAliasFilterTypesByEntityTypes = function (e) { var t = Object.keys(N.a).map(function (e) { return N.a[e] }); if (!e || !e.length) return t; for (var n = [], i = 0, r = t; i < r.length; i++) { var o = r[i]; this.filterAliasFilterTypeByEntityTypes(o, e) && n.push(o) } return n }, e.prototype.filterAliasByEntityTypes = function (e, t) { var n = e.filter; if (this.filterAliasFilterTypeByEntityTypes(n.type, t)) switch (n.type) { case N.a.singleEntity: return t.indexOf(n.singleEntity.entityType) > -1; case N.a.entityList: case N.a.entityName: case N.a.entityType: return t.indexOf(n.entityType) > -1; case N.a.stateEntity: return !0; case N.a.assetType: return t.indexOf(u.b.ASSET) > -1; case N.a.deviceType: return t.indexOf(u.b.DEVICE) > -1; case N.a.edgeType: return t.indexOf(u.b.EDGE) > -1; case N.a.entityViewType: return t.indexOf(u.b.ENTITY_VIEW) > -1; case N.a.relationsQuery: if (n.filters && n.filters.length) { for (var i = !1, r = 0, o = n.filters; r < o.length; r++) { var a = o[r]; if (!a.entityTypes || !a.entityTypes.length) { i = !0; break } for (var s = 0, l = a.entityTypes; s < l.length; s++) { var c = l[s]; if (t.indexOf(c) > -1) { i = !0; break } } } return i } return !0; case N.a.assetSearchQuery: return t.indexOf(u.b.ASSET) > -1; case N.a.deviceSearchQuery: return t.indexOf(u.b.DEVICE) > -1; case N.a.edgeSearchQuery: return t.indexOf(u.b.EDGE) > -1; case N.a.entityViewSearchQuery: return t.indexOf(u.b.ENTITY_VIEW) > -1 }return !1 }, e.prototype.filterAliasFilterTypeByEntityTypes = function (e, t) { var n = this; if (!t || !t.length) return !0; var i = !1; return t.forEach(function (t) { i = i || n.filterAliasFilterTypeByEntityType(e, t) }), i }, e.prototype.filterAliasFilterTypeByEntityType = function (e, t) { switch (e) { case N.a.singleEntity: case N.a.entityList: case N.a.entityName: case N.a.entityType: case N.a.stateEntity: return !0; case N.a.assetType: return t === u.b.ASSET; case N.a.deviceType: return t === u.b.DEVICE; case N.a.edgeType: return t === u.b.EDGE; case N.a.entityViewType: return t === u.b.ENTITY_VIEW; case N.a.relationsQuery: case N.a.apiUsageState: return !0; case N.a.assetSearchQuery: return t === u.b.ASSET; case N.a.deviceSearchQuery: return t === u.b.DEVICE; case N.a.edgeSearchQuery: return t === u.b.EDGE; case N.a.entityViewSearchQuery: return t === u.b.ENTITY_VIEW }return !1 }, e.prototype.prepareAllowedEntityTypesList = function (e, t) { var n = Object(y.a)(this.store), i = []; switch (n.authUser.authority) { case b.a.SYS_ADMIN: i.push(u.b.TENANT); break; case b.a.TENANT_ADMIN: i.push(u.b.DEVICE), i.push(u.b.ASSET), n.edgesSupportEnabled && i.push(u.b.EDGE), i.push(u.b.ENTITY_VIEW), i.push(u.b.TENANT), i.push(u.b.CUSTOMER), i.push(u.b.USER), i.push(u.b.DASHBOARD), t && (i.push(u.a.CURRENT_CUSTOMER), i.push(u.a.CURRENT_TENANT)); break; case b.a.CUSTOMER_USER: i.push(u.b.DEVICE), i.push(u.b.ASSET), n.edgesSupportEnabled && i.push(u.b.EDGE), i.push(u.b.ENTITY_VIEW), i.push(u.b.CUSTOMER), i.push(u.b.USER), i.push(u.b.DASHBOARD), t && i.push(u.a.CURRENT_CUSTOMER) }if (t && (i.push(u.a.CURRENT_USER), n.authUser.authority !== b.a.SYS_ADMIN && i.push(u.a.CURRENT_USER_OWNER)), e && e.length) for (var r = i.length - 1; r >= 0; r--)-1 === e.indexOf(i[r]) && i.splice(r, 1); return i }, e.prototype.getEntityFieldKeys = function (e, t) { void 0 === t && (t = ""); var n = [P.a.createdTime.keyName], i = t.toLowerCase(); switch (e) { case u.b.USER: n.push(P.a.name.keyName), n.push(P.a.email.keyName), n.push(P.a.firstName.keyName), n.push(P.a.lastName.keyName); break; case u.b.TENANT: case u.b.CUSTOMER: n.push(P.a.title.keyName), n.push(P.a.email.keyName), n.push(P.a.country.keyName), n.push(P.a.state.keyName), n.push(P.a.city.keyName), n.push(P.a.address.keyName), n.push(P.a.address2.keyName), n.push(P.a.zip.keyName), n.push(P.a.phone.keyName); break; case u.b.ENTITY_VIEW: n.push(P.a.name.keyName), n.push(P.a.type.keyName); break; case u.b.DEVICE: case u.b.EDGE: case u.b.ASSET: n.push(P.a.name.keyName), n.push(P.a.type.keyName), n.push(P.a.label.keyName); break; case u.b.DASHBOARD: n.push(P.a.title.keyName); break; case u.b.API_USAGE_STATE: n.push(P.a.name.keyName) }return i ? n.filter(function (e) { return 0 === e.toLowerCase().indexOf(i) }) : n }, e.prototype.getAlarmKeys = function (e) { void 0 === e && (e = ""); var t = Object.keys(V.e), n = e.toLowerCase(); return n ? t.filter(function (e) { return 0 === e.toLowerCase().indexOf(n) }) : t }, e.prototype.getEntityKeys = function (e, t, n, i) { if (n === x.h.entityField) return Object(l.a)(this.getEntityFieldKeys(e.entityType, t)); if (n === x.h.alarm) return Object(l.a)(this.getAlarmKeys(t)); var r = "/api/plugins/telemetry/" + e.entityType + "/" + e.id + "/keys/"; return n === x.h.timeseries ? r += "timeseries" : n === x.h.attribute && (r += "attributes"), this.http.get(r, Object(M.b)(i)).pipe(Object(v.a)(function (e) { if (t) { var n = t.toLowerCase(); return e.filter(function (e) { return 0 === e.toLowerCase().indexOf(n) }) } return e })) }, e.prototype.getEntityKeysByEntityFilter = function (e, t, n) { var i, r = this; if (!t.length) return Object(l.a)([]); if (null !== e && t.some(function (e) { return [x.h.timeseries, x.h.attribute].includes(e) })) { var o = { entityFilter: e, pageLink: Object(D.k)(100) }; i = this.findEntityKeysByQuery(o, t.includes(x.h.attribute), t.includes(x.h.timeseries), n) } else i = Object(l.a)({ attribute: [], timeseries: [], entityTypes: [] }); return i.pipe(Object(v.a)(function (e) { var n = []; return t.forEach(function (t) { var i; switch (t) { case x.h.entityField: if (e.entityTypes.length) { var o = []; e.entityTypes.forEach(function (e) { return o.push.apply(o, r.getEntityFieldKeys(e)) }), i = Array.from(new Set(o)) } break; case x.h.alarm: i = r.getAlarmKeys(); break; case x.h.attribute: case x.h.timeseries: e[t].length && (i = e[t]) }i && n.push.apply(n, i.map(function (e) { return { name: e, type: t } })) }), n })) }, e.prototype.createDatasourcesFromSubscriptionsInfo = function (e) { var t = this, n = e.map(function (e) { return t.createDatasourceFromSubscriptionInfo(e) }); return this.utils.generateColors(n), n }, e.prototype.createAlarmSourceFromSubscriptionInfo = function (e) { if (e.entityId && e.entityType) { var t = this.createDatasourceFromSubscriptionInfo(e); return this.utils.generateColors([t]), t } throw new Error("Can't crate alarm source without entityId information!") }, e.prototype.resolveAlias = function (e, t) { var n = this, i = e.filter; return this.resolveAliasFilter(i, t).pipe(Object(C.b)(function (t) { var r = { alias: e.alias, entityFilter: t.entityFilter, stateEntity: t.stateEntity, entityParamName: t.entityParamName, resolveMultiple: i.resolveMultiple, currentEntity: null }; return !r.resolveMultiple && r.entityFilter ? n.findSingleEntityInfoByEntityFilter(r.entityFilter, { ignoreLoading: !0, ignoreErrors: !0 }).pipe(Object(v.a)(function (e) { return r.currentEntity = e, r })) : Object(l.a)(r) })) }, e.prototype.resolveAliasFilter = function (e, t) { var n = { entityFilter: null, stateEntity: !1 }; e.stateEntityParamName && e.stateEntityParamName.length && (n.entityParamName = e.stateEntityParamName); var i = this.getStateEntityInfo(e, t).entityId; switch (e.type) { case N.a.singleEntity: var r = this.resolveAliasEntityId(e.singleEntity.entityType, e.singleEntity.id); return n.entityFilter = { type: N.a.singleEntity, singleEntity: r }, Object(l.a)(n); case N.a.entityList: case N.a.entityName: case N.a.entityType: return n.entityFilter = Object(_.e)(e), Object(l.a)(n); case N.a.stateEntity: return n.stateEntity = !0, i && (n.entityFilter = { type: N.a.singleEntity, singleEntity: i }), Object(l.a)(n); case N.a.assetType: case N.a.deviceType: case N.a.entityViewType: case N.a.apiUsageState: case N.a.edgeType: return n.entityFilter = Object(_.e)(e), Object(l.a)(n); case N.a.relationsQuery: n.stateEntity = e.rootStateEntity; var o = void 0, a = void 0; if (n.stateEntity && i ? (o = i.entityType, a = i.id) : n.stateEntity || (o = e.rootEntity.entityType, a = e.rootEntity.id), o && a) { var s = this.resolveAliasEntityId(o, a); return n.entityFilter = Object(_.e)(e), n.entityFilter.rootEntity = s, Object(l.a)(n) } return Object(l.a)(n); case N.a.assetSearchQuery: case N.a.deviceSearchQuery: case N.a.edgeSearchQuery: case N.a.entityViewSearchQuery: if (n.stateEntity = e.rootStateEntity, n.stateEntity && i ? (o = i.entityType, a = i.id) : n.stateEntity || (o = e.rootEntity.entityType, a = e.rootEntity.id), o && a) { var c = this.resolveAliasEntityId(o, a); return n.entityFilter = Object(_.e)(e), n.entityFilter.rootEntity = c, Object(l.a)(n) } return Object(l.a)(n) } }, e.prototype.checkEntityAlias = function (e) { return this.resolveAliasFilter(e.filter, null).pipe(Object(v.a)(function (e) { return !!e.stateEntity || Object(_.o)(e.entityFilter) }), Object(O.a)(function (e) { return Object(l.a)(!1) })) }, e.prototype.saveEntityParameters = function (e, t, n, i) { var r = this; return this.getSaveEntityObservable(e, t, i).pipe(Object(C.b)(function (e) { return r.saveEntityData(e.id, t, i).pipe(Object(v.a)(function () { return { create: { entity: 1 } } }), Object(O.a)(function (e) { return Object(l.a)({ error: { entity: 1 } }) })) }), Object(O.a)(function (o) { if (n) { var s = void 0; switch (e) { case u.b.DEVICE: s = r.deviceService.findByName(t.name, i); break; case u.b.ASSET: s = r.assetService.findByName(t.name, i); break; case u.b.EDGE: s = r.edgeService.findByName(t.name, i) }return s.pipe(Object(C.b)(function (n) { var o = r.getUpdateEntityTasks(e, t, n, i); return Object(a.a)(o).pipe(Object(v.a)(function () { return { update: { entity: 1 } } }), Object(O.a)(function (e) { return Object(l.a)({ error: { entity: 1 } }) })) }), Object(O.a)(function (e) { return Object(l.a)({ error: { entity: 1 } }) })) } return Object(l.a)({ error: { entity: 1 } }) })) }, e.prototype.getSaveEntityObservable = function (e, t, n) { var r; switch (e) { case u.b.DEVICE: var o = { name: t.name, type: t.type, label: t.label, additionalInfo: { description: t.description } }; null !== t.gateway && (o.additionalInfo = Object(i.a)(Object(i.a)({}, o.additionalInfo), { gateway: t.gateway })), r = this.deviceService.saveDevice(o, n); break; case u.b.ASSET: var a = { name: t.name, type: t.type, label: t.label, additionalInfo: { description: t.description } }; r = this.assetService.saveAsset(a, n); break; case u.b.EDGE: var s = t, l = { name: s.name, type: s.type, label: s.label, additionalInfo: { description: s.description }, edgeLicenseKey: s.edgeLicenseKey, cloudEndpoint: "" !== s.cloudEndpoint ? s.cloudEndpoint : window.location.origin, routingKey: "" !== s.routingKey ? s.routingKey : Object(_.k)(), secret: "" !== s.secret ? s.secret : Object(_.i)(20) }; r = this.edgeService.saveEdge(l, n) }return r }, e.prototype.getUpdateEntityTasks = function (e, t, n, i) { var r, o, a = []; switch (e) { case u.b.ASSET: case u.b.DEVICE: if (o = (r = n).additionalInfo || {}, r.label !== t.label || r.type !== t.type || o.description !== t.description || r.id.entityType === u.b.DEVICE && o.gateway !== t.gateway) switch (r.label = t.label, r.type = t.type, r.additionalInfo = o, r.additionalInfo.description = t.description, r.id.entityType === u.b.DEVICE && (r.additionalInfo.gateway = t.gateway), r.id.entityType) { case u.b.DEVICE: a.push(this.deviceService.saveDevice(r, i)); break; case u.b.ASSET: a.push(this.assetService.saveAsset(r, i)) }a.push(this.saveEntityData(n.id, t, i)); break; case u.b.EDGE: o = (r = n).additionalInfo || {}; var s = t; (r.label !== s.label || r.type !== s.type || "" !== s.cloudEndpoint && r.cloudEndpoint !== s.cloudEndpoint || "" !== s.edgeLicenseKey && r.edgeLicenseKey !== s.edgeLicenseKey || "" !== s.routingKey && r.routingKey !== s.routingKey || "" !== s.secret && r.secret !== s.secret || o.description !== s.description) && (r.label = s.label, r.type = s.type, r.additionalInfo = o, r.additionalInfo.description = s.description, "" !== s.cloudEndpoint && (r.cloudEndpoint = s.cloudEndpoint), "" !== s.edgeLicenseKey && (r.edgeLicenseKey = s.edgeLicenseKey), "" !== s.routingKey && (r.routingKey = s.routingKey), "" !== s.secret && (r.secret = s.secret), a.push(this.edgeService.saveEdge(r, i))), a.push(this.saveEntityData(n.id, s, i)) }return a }, e.prototype.saveEntityData = function (e, t, n) { var i, r = this, o = []; return t.accessToken && "" !== t.accessToken && (i = this.deviceService.getDeviceCredentials(e.id, !1, n).pipe(Object(C.b)(function (e) { return e.credentialsId = t.accessToken, e.credentialsType = F.g.ACCESS_TOKEN, e.credentialsValue = null, r.deviceService.saveDeviceCredentials(e, n).pipe(Object(v.a)(function () { return "ok" }), Object(O.a)(function (e) { return Object(l.a)("error") })) })), o.push(i)), t.attributes.shared && t.attributes.shared.length && (i = this.attributeService.saveEntityAttributes(e, x.d.SHARED_SCOPE, t.attributes.shared, n).pipe(Object(v.a)(function () { return "ok" }), Object(O.a)(function (e) { return Object(l.a)("error") })), o.push(i)), t.attributes.server && t.attributes.server.length && (i = this.attributeService.saveEntityAttributes(e, x.d.SERVER_SCOPE, t.attributes.server, n).pipe(Object(v.a)(function () { return "ok" }), Object(O.a)(function (e) { return Object(l.a)("error") })), o.push(i)), t.timeseries && t.timeseries.length && (i = this.attributeService.saveEntityTimeseries(e, "time", t.timeseries, n).pipe(Object(v.a)(function () { return "ok" }), Object(O.a)(function (e) { return Object(l.a)("error") })), o.push(i)), o.length ? Object(a.a)(o).pipe(Object(v.a)(function (e) { if (e.filter(function (e) { return "error" === e }).length > 0) throw Error(); return e })) : Object(l.a)(null) }, e.prototype.getStateEntityInfo = function (e, t) { var n = null; return t && (e.stateEntityParamName && e.stateEntityParamName.length ? t[e.stateEntityParamName] && (n = t[e.stateEntityParamName].entityId) : n = t.entityId), n || (n = e.defaultStateEntity), n && (n = this.resolveAliasEntityId(n.entityType, n.id)), { entityId: n } }, e.prototype.resolveAliasEntityId = function (e, t) { var n = { entityType: e, id: t }; if (e === u.a.CURRENT_CUSTOMER) { var i = Object(y.b)(this.store); n.entityType = u.b.CUSTOMER, i.authority === b.a.CUSTOMER_USER && (n.id = i.customerId) } else if (e === u.a.CURRENT_TENANT) { i = Object(y.b)(this.store); n.entityType = u.b.TENANT, n.id = i.tenantId } else if (e === u.a.CURRENT_USER) { i = Object(y.b)(this.store); n.entityType = u.b.USER, n.id = i.userId } else if (e === u.a.CURRENT_USER_OWNER) { (i = Object(y.b)(this.store)).authority === b.a.TENANT_ADMIN ? (n.entityType = u.b.TENANT, n.id = i.tenantId) : i.authority === b.a.CUSTOMER_USER && (n.entityType = u.b.CUSTOMER, n.id = i.customerId) } return n }, e.prototype.createDatasourceFromSubscriptionInfo = function (e) { var t = null; if ((e = this.validateSubscriptionInfo(e)).type === A.a.entity ? (t = { type: e.type, entityName: e.entityName, name: e.entityName, entityType: e.entityType, entityId: e.entityId, dataKeys: [] }, this.prepareEntityFilterFromSubscriptionInfo(t, e)) : e.type !== A.a.function && e.type !== A.a.entityCount || (t = { type: e.type, name: e.name || e.type, dataKeys: [] }), null !== t && (e.timeseries && this.createDatasourceKeys(e.timeseries, x.h.timeseries, t), e.attributes && this.createDatasourceKeys(e.attributes, x.h.attribute, t), e.functions && this.createDatasourceKeys(e.functions, x.h.function, t), e.alarmFields && this.createDatasourceKeys(e.alarmFields, x.h.alarm, t), e.type === A.a.entityCount)) { var n = this.utils.createKey({ name: "count" }, x.h.count); t.dataKeys.push(n) } return t }, e.prototype.validateSubscriptionInfo = function (e) { return "device" === e.type && (e.type = A.a.entity, e.entityType = u.b.DEVICE, e.deviceId ? e.entityId = e.deviceId : e.deviceName ? e.entityName = e.deviceName : e.deviceNamePrefix ? e.entityNamePrefix = e.deviceNamePrefix : e.deviceIds && (e.entityIds = e.deviceIds)), e }, e.prototype.prepareEntityFilterFromSubscriptionInfo = function (e, t) { if (t.entityId) e.entityFilter = { type: N.a.singleEntity, singleEntity: { entityType: t.entityType, id: t.entityId } }, e.pageLink = D.I; else if (t.entityName || t.entityNamePrefix) { var n = void 0, i = void 0; Object(_.n)(t.entityName) && t.entityName.length ? (n = t.entityName, i = Object(_.e)(D.I)) : (n = t.entityNamePrefix, i = Object(_.e)(D.p)), e.entityFilter = { type: N.a.entityName, entityType: t.entityType, entityNameFilter: n }, e.pageLink = i } else t.entityIds && (e.entityFilter = { type: N.a.entityList, entityType: t.entityType, entityList: t.entityIds }, e.pageLink = Object(_.e)(D.p)) }, e.prototype.createDatasourceKeys = function (e, t, n) { var i = this; e.forEach(function (e) { var r = i.utils.createKey(e, t); n.dataKeys.push(r) }) }, e.prototype.getAssignedToEdgeEntitiesByType = function (e, t, n) { var i; switch (t) { case u.b.ASSET: i = this.assetService.getEdgeAssets(e, n); break; case u.b.DEVICE: i = this.deviceService.getEdgeDevices(e, n); break; case u.b.ENTITY_VIEW: i = this.entityViewService.getEdgeEntityViews(e, n); break; case u.b.DASHBOARD: i = this.dashboardService.getEdgeDashboards(e, n); break; case u.b.RULE_CHAIN: i = this.ruleChainService.getEdgeRuleChains(e, n) }return i }, e.prototype.getEdgeEventContent = function (e) { var t, n = e.entityId, i = e.type; switch (i) { case G.c.DASHBOARD: case G.c.ALARM: case G.c.RULE_CHAIN: case G.c.EDGE: case G.c.USER: case G.c.CUSTOMER: case G.c.TENANT: case G.c.ASSET: case G.c.DEVICE: case G.c.ENTITY_VIEW: t = this.getEntity(i, n, { ignoreLoading: !0, ignoreErrors: !0 }); break; case G.c.RULE_CHAIN_METADATA: t = this.ruleChainService.getRuleChainMetadata(n); break; case G.c.WIDGET_TYPE: t = this.widgetService.getWidgetTypeById(n); break; case G.c.WIDGETS_BUNDLE: t = this.widgetService.getWidgetsBundle(n); break; case G.c.DEVICE_PROFILE: t = this.deviceProfileService.getDeviceProfile(n); break; case G.c.RELATION: t = Object(l.a)(e.body) }return t }, e.\u0275fac = function (t) { return new (t || e)(r["\u0275\u0275inject"](W.HttpClient), r["\u0275\u0275inject"](Q.Store), r["\u0275\u0275inject"](d.a), r["\u0275\u0275inject"](B.a), r["\u0275\u0275inject"](w.a), r["\u0275\u0275inject"](I.a), r["\u0275\u0275inject"](p.a), r["\u0275\u0275inject"](m.a), r["\u0275\u0275inject"](f.a), r["\u0275\u0275inject"](j.a), r["\u0275\u0275inject"](h.a), r["\u0275\u0275inject"](k.a), r["\u0275\u0275inject"](L.a), r["\u0275\u0275inject"](U.a), r["\u0275\u0275inject"](z.a), r["\u0275\u0275inject"](H.a), r["\u0275\u0275inject"](R.a)) }, e.\u0275prov = r["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, "2OQP": function (e, t, n) { "use strict"; var i; n.d(t, "a", function () { return i }), n.d(t, "b", function () { return o }), n.d(t, "d", function () { return r }), n.d(t, "e", function () { return a }), n.d(t, "c", function () { return s }), function (e) { e.MD5 = "MD5", e.SHA256 = "SHA256", e.SHA384 = "SHA384", e.SHA512 = "SHA512", e.CRC32 = "CRC32", e.MURMUR3_32 = "MURMUR3_32", e.MURMUR3_128 = "MURMUR3_128" }(i || (i = {})); var r, o = new Map([[i.MD5, "MD5"], [i.SHA256, "SHA-256"], [i.SHA384, "SHA-384"], [i.SHA512, "SHA-512"], [i.CRC32, "CRC-32"], [i.MURMUR3_32, "MURMUR3-32"], [i.MURMUR3_128, "MURMUR3-128"]]); !function (e) { e.FIRMWARE = "FIRMWARE", e.SOFTWARE = "SOFTWARE" }(r || (r = {})); var a = new Map([[r.FIRMWARE, "ota-update.types.firmware"], [r.SOFTWARE, "ota-update.types.software"]]), s = new Map([[r.FIRMWARE, { label: "ota-update.assign-firmware", required: "ota-update.assign-firmware-required", noFound: "ota-update.no-firmware-text", noMatching: "ota-update.no-firmware-matching", hint: "ota-update.chose-firmware-distributed-device" }], [r.SOFTWARE, { label: "ota-update.assign-software", required: "ota-update.assign-software-required", noFound: "ota-update.no-software-text", noMatching: "ota-update.no-software-matching", hint: "ota-update.chose-software-distributed-device" }]]) }, "3Tyt": function (e, t, n) { "use strict"; n.d(t, "h", function () { return i }), n.d(t, "r", function () { return r }), n.d(t, "d", function () { return o }), n.d(t, "u", function () { return a }), n.d(t, "D", function () { return f }), n.d(t, "C", function () { return g }), n.d(t, "z", function () { return y }), n.d(t, "i", function () { return h }), n.d(t, "s", function () { return v }), n.d(t, "e", function () { return E }), n.d(t, "x", function () { return T }), n.d(t, "q", function () { return S }), n.d(t, "n", function () { return C }), n.d(t, "k", function () { return O }), n.d(t, "a", function () { return w }), n.d(t, "o", function () { return I }), n.d(t, "l", function () { return x }), n.d(t, "b", function () { return M }), n.d(t, "v", function () { return j }), n.d(t, "g", function () { return b }), n.d(t, "B", function () { return A }), n.d(t, "y", function () { return R }), n.d(t, "A", function () { return N }), n.d(t, "t", function () { return P }), n.d(t, "f", function () { return k }), n.d(t, "j", function () { return _ }), n.d(t, "p", function () { return F }), n.d(t, "c", function () { return L }), n.d(t, "m", function () { return D }), n.d(t, "w", function () { return V }); var i, r, o, a, s = n("mrSG"), l = n("jtHE"), c = n("XNiG"), u = n("lJxs"), d = n("UZbx"), p = n("6OOC"), m = n("//Q6"); function f(e) { return r[e] ? r[e] : o[e] } !function (e) { e.timeseries = "timeseries", e.attribute = "attribute", e.function = "function", e.alarm = "alarm", e.entityField = "entityField", e.count = "count" }(i || (i = {})), function (e) { e.LATEST_TELEMETRY = "LATEST_TELEMETRY" }(r || (r = {})), function (e) { e.CLIENT_SCOPE = "CLIENT_SCOPE", e.SERVER_SCOPE = "SERVER_SCOPE", e.SHARED_SCOPE = "SHARED_SCOPE" }(o || (o = {})), function (e) { e.ATTRIBUTES = "ATTRIBUTES", e.TIMESERIES = "TIMESERIES" }(a || (a = {})); var h, g = new Map([[r.LATEST_TELEMETRY, "attribute.scope-latest-telemetry"], [o.CLIENT_SCOPE, "attribute.scope-client"], [o.SERVER_SCOPE, "attribute.scope-server"], [o.SHARED_SCOPE, "attribute.scope-shared"]]), y = new Map([[r.LATEST_TELEMETRY, !0], [o.CLIENT_SCOPE, !0], [o.SERVER_SCOPE, !1], [o.SHARED_SCOPE, !1]]); !function (e) { e.ASC = "ASC", e.DESC = "DESC" }(h || (h = {})); var b, v = function () { }, E = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Object(s.d)(t, e), t.prototype.getType = function () { return a.ATTRIBUTES }, t }(v), T = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Object(s.d)(t, e), t.prototype.getType = function () { return a.TIMESERIES }, t }(v), S = function () { }, C = function () { function e() { } return e.prototype.isEmpty = function () { return !(this.query || this.historyCmd || this.latestCmd || this.tsCmd) }, e }(), O = function () { }, w = function () { function e() { } return e.prototype.isEmpty = function () { return !this.query }, e }(), I = function () { }, x = function () { }, M = function () { }, j = function () { function e() { this.attrSubCmds = [], this.tsSubCmds = [], this.historyCmds = [], this.entityDataCmds = [], this.entityDataUnsubscribeCmds = [], this.alarmDataCmds = [], this.alarmDataUnsubscribeCmds = [], this.entityCountCmds = [], this.entityCountUnsubscribeCmds = [] } return e.prototype.hasCommands = function () { return this.tsSubCmds.length > 0 || this.historyCmds.length > 0 || this.attrSubCmds.length > 0 || this.entityDataCmds.length > 0 || this.entityDataUnsubscribeCmds.length > 0 || this.alarmDataCmds.length > 0 || this.alarmDataUnsubscribeCmds.length > 0 || this.entityCountCmds.length > 0 || this.entityCountUnsubscribeCmds.length > 0 }, e.prototype.clear = function () { this.attrSubCmds.length = 0, this.tsSubCmds.length = 0, this.historyCmds.length = 0, this.entityDataCmds.length = 0, this.entityDataUnsubscribeCmds.length = 0, this.alarmDataCmds.length = 0, this.alarmDataUnsubscribeCmds.length = 0, this.entityCountCmds.length = 0, this.entityCountUnsubscribeCmds.length = 0 }, e.prototype.preparePublishCommands = function (t) { var n = new e, i = t; return n.tsSubCmds = this.popCmds(this.tsSubCmds, i), i -= n.tsSubCmds.length, n.historyCmds = this.popCmds(this.historyCmds, i), i -= n.historyCmds.length, n.attrSubCmds = this.popCmds(this.attrSubCmds, i), i -= n.attrSubCmds.length, n.entityDataCmds = this.popCmds(this.entityDataCmds, i), i -= n.entityDataCmds.length, n.entityDataUnsubscribeCmds = this.popCmds(this.entityDataUnsubscribeCmds, i), i -= n.entityDataUnsubscribeCmds.length, n.alarmDataCmds = this.popCmds(this.alarmDataCmds, i), i -= n.alarmDataCmds.length, n.alarmDataUnsubscribeCmds = this.popCmds(this.alarmDataUnsubscribeCmds, i), i -= n.alarmDataUnsubscribeCmds.length, n.entityCountCmds = this.popCmds(this.entityCountCmds, i), i -= n.entityCountCmds.length, n.entityCountUnsubscribeCmds = this.popCmds(this.entityCountUnsubscribeCmds, i), n }, e.prototype.popCmds = function (e, t) { var n = Math.min(e.length, t); return n > 0 ? e.splice(0, n) : [] }, e }(); function A(e) { var t = e; return void 0 !== t.cmdId && t.cmdUpdateType === b.ENTITY_DATA } function R(e) { var t = e; return void 0 !== t.cmdId && t.cmdUpdateType === b.ALARM_DATA } function N(e) { var t = e; return void 0 !== t.cmdId && t.cmdUpdateType === b.COUNT_DATA } !function (e) { e.ENTITY_DATA = "ENTITY_DATA", e.ALARM_DATA = "ALARM_DATA", e.COUNT_DATA = "COUNT_DATA" }(b || (b = {})); var P = function () { function e(e) { this.subscriptionId = e.subscriptionId, this.errorCode = e.errorCode, this.errorMsg = e.errorMsg, this.data = e.data } return e.prototype.prepareData = function (e) { var t = this; this.data || (this.data = {}), e && e.forEach(function (e) { t.data[e] || (t.data[e] = []) }) }, e.prototype.updateAttributeData = function (e) { for (var t = function (t) { var i = n.data[t]; if (i.length) { var r = e.find(function (e) { return e.key === t }); r ? (r.lastUpdateTs = i[0][0], r.value = i[0][1]) : e.push({ key: t, lastUpdateTs: i[0][0], value: i[0][1] }) } }, n = this, i = 0, r = Object.keys(this.data); i < r.length; i++) { t(r[i]) } return e }, e }(), k = function (e) { this.cmdId = e.cmdId, this.errorCode = e.errorCode, this.errorMsg = e.errorMsg, this.cmdUpdateType = e.cmdUpdateType }, _ = function (e) { function t(t) { var n = e.call(this, t) || this; return n.data = t.data, n.update = t.update, n } return Object(s.d)(t, e), t }(k), F = function (e) { function t(t) { return e.call(this, t) || this } return Object(s.d)(t, e), t.prototype.prepareData = function (e) { this.data && this.processEntityData(this.data.data, e), this.update && this.processEntityData(this.update, e) }, t.prototype.processEntityData = function (e, t) { for (var n = 0, i = e; n < i.length; n++) { var r = i[n]; if (r.timeseries) for (var o = 0, a = Object.keys(r.timeseries); o < a.length; o++)for (var s = a[o], l = 0, c = r.timeseries[s]; l < c.length; l++) { (y = c[l]).ts && (y.ts += t) } if (r.latest) for (var u = 0, d = Object.keys(r.latest); u < d.length; u++)for (var m = d[u], f = r.latest[m], h = 0, g = Object.keys(f); h < g.length; h++) { var y; (y = f[s = g[h]]).ts && (y.ts += t), s === p.a.createdTime.keyName && y.value && (y.value = Number(y.value) + t + "") } } }, t }(_), L = function (e) { function t(t) { var n = e.call(this, t) || this; return n.allowedEntities = t.allowedEntities, n.totalEntities = t.totalEntities, n } return Object(s.d)(t, e), t.prototype.prepareData = function (e) { this.data && this.processAlarmData(this.data.data, e), this.update && this.processAlarmData(this.update, e) }, t.prototype.processAlarmData = function (e, t) { for (var n = 0, i = e; n < i.length; n++) { var r = i[n]; if (r.createdTime += t, r.ackTs && (r.ackTs += t), r.clearTs && (r.clearTs += t), r.endTs && (r.endTs += t), r.latest) for (var o = 0, a = Object.keys(r.latest); o < a.length; o++)for (var s = a[o], l = r.latest[s], c = 0, u = Object.keys(l); c < u.length; c++) { var m = u[c], f = l[m]; f.ts && (f.ts += t), m in [p.a.createdTime.keyName, d.e.startTime.keyName, d.e.endTime.keyName, d.e.ackTime.keyName, d.e.clearTime.keyName] && f.value && (f.value = Number(f.value) + t + "") } } }, t }(_), D = function (e) { function t(t) { var n = e.call(this, t) || this; return n.count = t.count, n } return Object(s.d)(t, e), t }(k), V = function () { function e(e, t) { this.telemetryService = e, this.zone = t, this.dataSubject = new l.a(1), this.entityDataSubject = new l.a(1), this.alarmDataSubject = new l.a(1), this.entityCountSubject = new l.a(1), this.reconnectSubject = new c.b, this.tsOffset = void 0, this.data$ = this.dataSubject.asObservable(), this.entityData$ = this.entityDataSubject.asObservable(), this.alarmData$ = this.alarmDataSubject.asObservable(), this.entityCount$ = this.entityCountSubject.asObservable(), this.reconnect$ = this.reconnectSubject.asObservable(), this.subscriptionCommands = [] } return e.createEntityAttributesSubscription = function (t, n, i, o, a) { var s; void 0 === a && (a = null), (s = i === r.LATEST_TELEMETRY ? new T : new E).entityType = n.entityType, s.entityId = n.id, s.scope = i, a && (s.keys = a.join(",")); var l = new e(t, o); return l.subscriptionCommands.push(s), l }, e.prototype.subscribe = function () { this.telemetryService.subscribe(this) }, e.prototype.update = function () { this.telemetryService.update(this) }, e.prototype.unsubscribe = function () { this.telemetryService.unsubscribe(this), this.complete() }, e.prototype.complete = function () { this.dataSubject.complete(), this.entityDataSubject.complete(), this.alarmDataSubject.complete(), this.entityCountSubject.complete(), this.reconnectSubject.complete() }, e.prototype.setTsOffset = function (e) { if (this.tsOffset !== e) { var t = !Object(m.B)(this.tsOffset); return this.tsOffset = e, t } return !1 }, e.prototype.onData = function (e) { var t, n = this, i = e.subscriptionId, r = this.subscriptionCommands.find(function (e) { return e.cmdId === i }); if (r) { var o = r; o.keys && o.keys.length && (t = o.keys.split(",")) } e.prepareData(t), this.zone ? this.zone.run(function () { n.dataSubject.next(e) }) : this.dataSubject.next(e) }, e.prototype.onEntityData = function (e) { var t = this; this.tsOffset && e.prepareData(this.tsOffset), this.zone ? this.zone.run(function () { t.entityDataSubject.next(e) }) : this.entityDataSubject.next(e) }, e.prototype.onAlarmData = function (e) { var t = this; this.tsOffset && e.prepareData(this.tsOffset), this.zone ? this.zone.run(function () { t.alarmDataSubject.next(e) }) : this.alarmDataSubject.next(e) }, e.prototype.onEntityCount = function (e) { var t = this; this.zone ? this.zone.run(function () { t.entityCountSubject.next(e) }) : this.entityCountSubject.next(e) }, e.prototype.onReconnected = function () { this.reconnectSubject.next() }, e.prototype.attributeData$ = function () { var e = new Array; return this.data$.pipe(Object(u.a)(function (t) { return t.updateAttributeData(e) })) }, e }() }, "3Zdl": function (e, t, n) { "use strict"; var i, r; n.d(t, "b", function () { return i }), n.d(t, "a", function () { return r }), function (e) { e.ENRICHMENT = "ENRICHMENT", e.FILTER = "FILTER", e.TRANSFORMATION = "TRANSFORMATION", e.ACTION = "ACTION", e.EXTERNAL = "EXTERNAL" }(i || (i = {})), function (e) { e.SYSTEM = "SYSTEM", e.TENANT = "TENANT" }(r || (r = {})) }, "40Wt": function (e, t, n) { "use strict"; n.d(t, "a", function () { return l }); var i = n("fXoL"), r = n("ofXK"), o = n("bTqV"), a = n("NFeN"); function s(e, t) { if (1 & e) { var n = i["\u0275\u0275getCurrentView"](); i["\u0275\u0275elementStart"](0, "button", 1), i["\u0275\u0275listener"]("click", function (e) { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().togglePassword(e) }), i["\u0275\u0275elementStart"](1, "mat-icon"), i["\u0275\u0275text"](2), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]() } if (2 & e) { var r = i["\u0275\u0275nextContext"](); i["\u0275\u0275attribute"]("aria-pressed", r.showPassword), i["\u0275\u0275advance"](2), i["\u0275\u0275textInterpolate"](r.showPassword ? "visibility" : "visibility_off") } } var l = function () { function e(e) { this.hostElement = e, this.showPassword = !1, this.hideToggle = !1, this.input = null } return e.prototype.togglePassword = function (e) { e.stopPropagation(), this.showPassword = !this.showPassword, this.input.type = this.showPassword ? "text" : "password" }, e.prototype.ngAfterViewInit = function () { this.input = this.hostElement.nativeElement.closest("mat-form-field").querySelector('input[type="password"]'), null === this.input && (this.hideToggle = !0) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](i.ElementRef)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-toggle-password"]], decls: 1, vars: 1, consts: [["mat-icon-button", "", "type", "button", 3, "click", 4, "ngIf"], ["mat-icon-button", "", "type", "button", 3, "click"]], template: function (e, t) { 1 & e && i["\u0275\u0275template"](0, s, 3, 2, "button", 0), 2 & e && i["\u0275\u0275property"]("ngIf", !t.hideToggle) }, directives: [r.NgIf, o.MatButton, a.MatIcon], encapsulation: 2 }), e }(); 0, void 0 }, "49Ji": function (e, t, n) { "use strict"; n.d(t, "a", function () { return o }); var i = n("fXoL"), r = n("yl57"), o = (n("imBb"), n("WEPN"), function () { function e(e) { this.elementRef = e, this.hotkeys = [], this.hotkeysList = [], this.preventIn = ["INPUT", "SELECT", "TEXTAREA"], this.mousetrap = new Mousetrap(this.elementRef.nativeElement), this.elementRef.nativeElement.tabIndex = -1, this.elementRef.nativeElement.style.outline = "0" } return e.prototype.ngOnInit = function () { for (var e = this, t = 0, n = this.hotkeys; t < n.length; t++) { var i = n[t]; this.hotkeysList.push(i), this.bindEvent(i) } if (this.cheatSheet) { var o = new r.a("?", function (t) { return e.cheatSheet.toggleCheatSheet(), !1 }, [], "Show / hide this help menu"); this.hotkeysList.unshift(o), this.bindEvent(o), this.cheatSheet.setHotKeys(this.hotkeysList) } }, e.prototype.bindEvent = function (e) { var t = this; this.mousetrap.bind(e.combo, function (n, i) { var r = !0; if (n) { var o = n.target || n.srcElement, a = o.nodeName.toUpperCase(); (" " + o.className + " ").indexOf(" mousetrap ") > -1 ? r = !0 : t.preventIn.indexOf(a) > -1 && -1 === e.allowIn.map(function (e) { return e.toUpperCase() }).indexOf(a) && (r = !1) } if (r) return e.callback.apply(t, [n, i]) }) }, e.prototype.ngOnDestroy = function () { for (var e = 0, t = this.hotkeysList; e < t.length; e++) { var n = t[e]; this.mousetrap.unbind(n.combo) } }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](i.ElementRef)) }, e.\u0275dir = i["\u0275\u0275defineDirective"]({ type: e, selectors: [["", "tb-hotkeys", ""]], inputs: { hotkeys: "hotkeys", cheatSheet: "cheatSheet" } }), e }()); 0, void 0 }, "4Th+": function (e, t, n) { "use strict"; n.d(t, "a", function () { return L }); var i = n("fXoL"), r = n("3Pt+"), o = n("8LU1"), a = n("FtGj"), s = n("LRne"), l = n("vkgz"), c = n("lJxs"), u = n("5+tZ"), d = n("w1tV"), p = n("21Fy"), m = n("U3y+"), f = n("S+vS"), h = n("DaoB"), g = n("C/rb"), y = n("zp9Z"), b = n("l7P3"), v = n("sYmb"), E = n("kmnG"), T = n("qFsG"), S = n("/1cH"), C = n("ofXK"), O = n("bTqV"), w = n("NFeN"), I = n("FKr1"), x = n("d5eY"), M = n("T4sd"), j = ["deviceGatewayInput"]; function A(e, t) { if (1 & e) { var n = i["\u0275\u0275getCurrentView"](); i["\u0275\u0275elementStart"](0, "button", 9), i["\u0275\u0275listener"]("click", function () { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().clear() }), i["\u0275\u0275elementStart"](1, "mat-icon", 10), i["\u0275\u0275text"](2, "close"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]() } } function R(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-option", 11), i["\u0275\u0275element"](1, "span", 12), i["\u0275\u0275pipe"](2, "highlight"), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit, r = i["\u0275\u0275nextContext"](); i["\u0275\u0275property"]("value", n), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("innerHTML", i["\u0275\u0275pipeBind2"](2, 2, n.name, r.searchText), i["\u0275\u0275sanitizeHtml"]) } } function N(e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "div"), i["\u0275\u0275elementStart"](1, "span", 18), i["\u0275\u0275text"](2, "gateway.no-gateway-found"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()) } var P = function (e) { return { item: e } }; function k(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "span", 19), i["\u0275\u0275pipe"](1, "truncate"), i["\u0275\u0275text"](2, " gateway.no-gateway-matching "), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275nextContext"](2); i["\u0275\u0275property"]("translateParams", i["\u0275\u0275pureFunction1"](6, P, i["\u0275\u0275pipeBind4"](1, 1, n.searchText, !0, 6, "..."))) } } function _(e, t) { if (1 & e) { var n = i["\u0275\u0275getCurrentView"](); i["\u0275\u0275elementStart"](0, "mat-option", 13), i["\u0275\u0275elementStart"](1, "div", 14), i["\u0275\u0275listener"]("click", function (e) { return e.stopPropagation() }), i["\u0275\u0275template"](2, N, 3, 0, "div", 15), i["\u0275\u0275template"](3, k, 3, 8, "ng-template", null, 16, i["\u0275\u0275templateRefExtractor"]), i["\u0275\u0275elementStart"](5, "span"), i["\u0275\u0275elementStart"](6, "a", 17), i["\u0275\u0275listener"]("click", function (e) { i["\u0275\u0275restoreView"](n); var t = i["\u0275\u0275nextContext"](); return t.createGateway(e, t.searchText) }), i["\u0275\u0275text"](7, "gateway.create-new-gateway"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]() } if (2 & e) { var r = i["\u0275\u0275reference"](4), o = i["\u0275\u0275nextContext"](); i["\u0275\u0275property"]("value", null), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngIf", !o.textIsNotEmpty(o.searchText))("ngIfElse", r) } } function F(e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "mat-error"), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"](" ", i["\u0275\u0275pipeBind1"](2, 1, "gateway.gateway-name-required"), " ")) } var L = function () { function e(e, t, n, r, o, a) { this.store = e, this.entityService = t, this.dialogService = n, this.deviceService = r, this.translate = o, this.fb = a, this.gatewayNameExist = new i.EventEmitter, this.gatewayType = "Gateway", this.searchText = "", this.propagateChange = function (e) { } } return Object.defineProperty(e.prototype, "required", { get: function () { return this.requiredValue }, set: function (e) { this.requiredValue = Object(o.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "newGatewayType", { set: function (e) { this.gatewayType = e }, enumerable: !1, configurable: !0 }), e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.ngOnInit = function () { var e = this; this.selectDeviceGatewayFormGroup = this.fb.group({ gateway: this.fb.control({ value: null, disabled: this.isStateForm }) }), this.loadGatewayList(), this.filteredGateways = this.selectDeviceGatewayFormGroup.get("gateway").valueChanges.pipe(Object(l.a)(function (t) { var n; n = "string" != typeof t && t ? t.id.id : null, e.updateView(n), null === t && e.clear() }), Object(c.a)(function (e) { return e ? "string" == typeof e ? e : e.name : "" }), Object(u.b)(function (t) { return e.fetchGateway(t) }), Object(d.a)()) }, e.prototype.fetchGateway = function (e) { this.searchText = e; var t = []; return t = e && e.length ? this.gatewayList.filter(function (t) { return t.name.toLowerCase().includes(e.toLowerCase()) }) : this.gatewayList, Object(s.a)(t) }, e.prototype.onFocus = function () { this.dirty && (this.selectDeviceGatewayFormGroup.get("gateway").updateValueAndValidity({ onlySelf: !0, emitEvent: !0 }), this.dirty = !1) }, e.prototype.displayGatewayFn = function (e) { return e ? e.name : void 0 }, e.prototype.setDisabledState = function (e) { }, e.prototype.writeValue = function (e) { null === e && (this.searchText = "", this.selectDeviceGatewayFormGroup.get("gateway").patchValue("", { emitEvent: !1 }), this.dirty = !0) }, e.prototype.clear = function (e, t) { var n = this; void 0 === e && (e = ""), this.searchText = e, this.selectDeviceGatewayFormGroup.get("gateway").patchValue(e, { emitEvent: !0 }), t || setTimeout(function () { n.deviceGatewayInput.nativeElement.blur(), n.deviceGatewayInput.nativeElement.focus() }, 0) }, e.prototype.textIsNotEmpty = function (e) { return !!e && e.length > 0 }, e.prototype.gatewayNameEnter = function (e) { e.keyCode === a.ENTER && (this.modelValue || this.createGateway(e, this.searchText)) }, e.prototype.createGateway = function (e, t) { var n = this; e.preventDefault(), e.stopPropagation(); var i = this.translate.instant("gateway.create-new-gateway"), r = this.translate.instant("gateway.create-new-gateway-text", { gatewayName: t }); this.dialogService.confirm(i, r, null, null, !0).subscribe(function (e) { e ? n.createDeviceGateway(t) : n.clear("", !0) }) }, e.prototype.createDeviceGateway = function (e) { var t = this; this.deviceService.findByName(e, { ignoreErrors: !0 }).subscribe(function (n) { t.gatewayNameExist.emit(e) }, function () { var n = { name: e, label: null, type: t.gatewayType, additionalInfo: { gateway: !0 } }; t.deviceService.saveDevice(n).subscribe(function (e) { t.searchText = "", t.gatewayList.push(e), t.selectDeviceGatewayFormGroup.get("gateway").patchValue(e, { emitEvent: !0 }) }) }) }, e.prototype.loadGatewayList = function () { var e, t = this; if (Object(g.b)(this.store).authority === y.a.SYS_ADMIN) e = Object(s.a)([]); else { var n = this.isStateForm && this.deviceName ? this.deviceName : ""; e = this.entityService.getEntitiesByNameFilter(m.b.DEVICE, n, -1, "", { ignoreLoading: !0 }) } e.pipe(Object(c.a)(function (e) { return e ? e.filter(function (e) { var t, n; return null === (n = null === (t = e) || void 0 === t ? void 0 : t.additionalInfo) || void 0 === n ? void 0 : n.gateway }) : [] })).subscribe(function (e) { if (t.gatewayList = e, !t.searchText && t.gatewayList.length) { var n = null; t.deviceName && (n = t.gatewayList.find(function (e) { return e.name === t.deviceName })), n || (n = t.gatewayList[0]), n && t.selectDeviceGatewayFormGroup.get("gateway").patchValue(n, { emitEvent: !0 }) } }) }, e.prototype.updateView = function (e) { this.propagateChange(e) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](b.Store), i["\u0275\u0275directiveInject"](p.a), i["\u0275\u0275directiveInject"](f.a), i["\u0275\u0275directiveInject"](h.a), i["\u0275\u0275directiveInject"](v.TranslateService), i["\u0275\u0275directiveInject"](r.FormBuilder)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-entity-gateway-select"]], viewQuery: function (e, t) { if (1 & e && i["\u0275\u0275viewQuery"](j, 3), 2 & e) { var n; i["\u0275\u0275queryRefresh"](n = i["\u0275\u0275loadQuery"]()) && (t.deviceGatewayInput = n.first) } }, inputs: { required: "required", newGatewayType: "newGatewayType", deviceName: "deviceName", isStateForm: "isStateForm" }, outputs: { gatewayNameExist: "gatewayNameExist" }, features: [i["\u0275\u0275ProvidersFeature"]([{ provide: r.NG_VALUE_ACCESSOR, useExisting: Object(i.forwardRef)(function () { return e }), multi: !0 }])], decls: 12, vars: 15, consts: [[1, "mat-block", 3, "formGroup"], ["matInput", "", "type", "text", "formControlName", "gateway", 3, "placeholder", "required", "matAutocomplete", "focusin", "keydown", "keypress"], ["deviceGatewayInput", ""], ["type", "button", "matSuffix", "", "mat-icon-button", "", "aria-label", "Clear", 3, "click", 4, "ngIf"], [1, "tb-autocomplete", 3, "displayWith"], ["gatewayAutocomplete", "matAutocomplete"], [3, "value", 4, "ngFor", "ngForOf"], ["class", "tb-not-found", 3, "value", 4, "ngIf"], [4, "ngIf"], ["type", "button", "matSuffix", "", "mat-icon-button", "", "aria-label", "Clear", 3, "click"], [1, "material-icons"], [3, "value"], [3, "innerHTML"], [1, "tb-not-found", 3, "value"], [1, "tb-not-found-content", 3, "click"], [4, "ngIf", "ngIfElse"], ["searchNotEmpty", ""], ["translate", "", 3, "click"], ["translate", ""], ["translate", "", 3, "translateParams"]], template: function (e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-form-field", 0), i["\u0275\u0275elementStart"](1, "input", 1, 2), i["\u0275\u0275listener"]("focusin", function () { return t.onFocus() })("keydown", function (e) { return t.gatewayNameEnter(e) })("keypress", function (e) { return t.gatewayNameEnter(e) }), i["\u0275\u0275pipe"](3, "translate"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](4, A, 3, 0, "button", 3), i["\u0275\u0275elementStart"](5, "mat-autocomplete", 4, 5), i["\u0275\u0275template"](7, R, 3, 5, "mat-option", 6), i["\u0275\u0275pipe"](8, "async"), i["\u0275\u0275template"](9, _, 8, 3, "mat-option", 7), i["\u0275\u0275pipe"](10, "async"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](11, F, 3, 3, "mat-error", 8), i["\u0275\u0275elementEnd"]()), 2 & e) { var n, r = i["\u0275\u0275reference"](6); i["\u0275\u0275property"]("formGroup", t.selectDeviceGatewayFormGroup), i["\u0275\u0275advance"](1), i["\u0275\u0275propertyInterpolate"]("placeholder", i["\u0275\u0275pipeBind1"](3, 9, "gateway.gateway-name")), i["\u0275\u0275property"]("required", t.required)("matAutocomplete", r), i["\u0275\u0275advance"](3), i["\u0275\u0275property"]("ngIf", t.selectDeviceGatewayFormGroup.get("gateway").value && !t.isStateForm), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("displayWith", t.displayGatewayFn), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngForOf", i["\u0275\u0275pipeBind1"](8, 11, t.filteredGateways)), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngIf", !(null != (n = i["\u0275\u0275pipeBind1"](10, 13, t.filteredGateways)) && n.length)), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngIf", t.selectDeviceGatewayFormGroup.get("gateway").hasError("required")) } }, directives: [E.MatFormField, r.NgControlStatusGroup, r.FormGroupDirective, T.MatInput, r.DefaultValueAccessor, S.MatAutocompleteTrigger, r.NgControlStatus, r.FormControlName, r.RequiredValidator, C.NgIf, S.MatAutocomplete, C.NgForOf, O.MatButton, E.MatSuffix, w.MatIcon, I.MatOption, v.TranslateDirective, E.MatError], pipes: [v.TranslatePipe, C.AsyncPipe, x.a, M.a], encapsulation: 2 }), e }(); 0, void 0 }, "4bh6": function (e, t, n) { "use strict"; n.d(t, "a", function () { return j }); var i = n("fXoL"), r = n("3Pt+"), o = n("XNiG"), a = n("z6cu"), s = n("JX91"), l = n("5+tZ"), c = n("lJxs"), u = n("vkgz"), d = n("05l1"), p = n("x+ZX"), m = n("DaoB"), f = n("U3y+"), h = n("gM18"), g = n("1y+p"), y = n("y7gY"), b = n("j37L"), v = n("l7P3"), E = n("sYmb"), T = n("kmnG"), S = n("ofXK"), C = n("d3UM"), O = n("znSr"), w = n("FKr1"); function I(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-label"), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275nextContext"](); i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2, 1, n.entitySubtypeTitle)) } } function x(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-option", 4), i["\u0275\u0275text"](1), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit, r = i["\u0275\u0275nextContext"](); i["\u0275\u0275property"]("value", n), i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"](" ", r.displaySubTypeFn(n), " ") } } function M(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-error"), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275nextContext"](); i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"](" ", i["\u0275\u0275pipeBind1"](2, 1, n.entitySubtypeRequiredText), " ") } } var j = function () { function e(e, t, n, i, r, a, s, l) { this.store = e, this.broadcast = t, this.translate = n, this.deviceService = i, this.assetService = r, this.edgeService = a, this.entityViewService = s, this.fb = l, this.modelValue = "", this.subTypesOptionsSubject = new o.b, this.subTypesLoaded = !1, this.propagateChange = function (e) { }, this.subTypeFormGroup = this.fb.group({ subType: [""] }) } return e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.ngOnInit = function () { var e = this; switch (this.entityType) { case f.b.ASSET: this.entitySubtypeTitle = "asset.asset-type", this.entitySubtypeRequiredText = "asset.asset-type-required", this.broadcastSubscription = this.broadcast.on("assetSaved", function () { e.subTypes = null, e.subTypesOptionsSubject.next("") }); break; case f.b.DEVICE: this.entitySubtypeTitle = "device.device-type", this.entitySubtypeRequiredText = "device.device-type-required", this.broadcastSubscription = this.broadcast.on("deviceSaved", function () { e.subTypes = null, e.subTypesOptionsSubject.next("") }); break; case f.b.EDGE: this.entitySubtypeTitle = "edge.edge-type", this.entitySubtypeRequiredText = "edge.edge-type-required", this.broadcastSubscription = this.broadcast.on("edgeSaved", function () { e.subTypes = null, e.subTypesOptionsSubject.next("") }); break; case f.b.ENTITY_VIEW: this.entitySubtypeTitle = "entity-view.entity-view-type", this.entitySubtypeRequiredText = "entity-view.entity-view-type-required", this.broadcastSubscription = this.broadcast.on("entityViewSaved", function () { e.subTypes = null, e.subTypesOptionsSubject.next("") }) }this.subTypesOptions = this.subTypesOptionsSubject.asObservable().pipe(Object(s.a)(""), Object(l.b)(function () { return e.getSubTypes() })), this.subTypeFormGroup.get("subType").valueChanges.subscribe(function (t) { var n; n = t && "" !== t ? t.type : "", e.updateView(n) }) }, e.prototype.ngAfterViewInit = function () { }, e.prototype.ngOnDestroy = function () { this.broadcastSubscription && this.broadcastSubscription.unsubscribe() }, e.prototype.setDisabledState = function (e) { this.disabled = e, this.disabled ? this.subTypeFormGroup.disable() : this.subTypeFormGroup.enable() }, e.prototype.writeValue = function (e) { var t = this; null != e && "" !== e ? (this.modelValue = e, this.findSubTypes(e).subscribe(function (e) { var n = e && 1 === e.length ? e[0] : ""; t.subTypeFormGroup.get("subType").patchValue(n, { emitEvent: !0 }) })) : (this.modelValue = "", this.subTypeFormGroup.get("subType").patchValue("", { emitEvent: !0 })) }, e.prototype.updateView = function (e) { this.modelValue !== e && (this.modelValue = e, this.propagateChange(this.modelValue)) }, e.prototype.displaySubTypeFn = function (e) { return e && "string" != typeof e ? this.typeTranslatePrefix ? this.translate.instant(this.typeTranslatePrefix + "." + e.type) : e.type : this.translate.instant("entity.all-subtypes") }, e.prototype.findSubTypes = function (e) { return this.getSubTypes().pipe(Object(c.a)(function (t) { return t.filter(function (t) { return !!e && ("string" != typeof t && t.type === e) }) })) }, e.prototype.getSubTypes = function () { var e = this; if (!this.subTypes) { switch (this.entityType) { case f.b.ASSET: this.subTypes = this.assetService.getAssetTypes({ ignoreLoading: !0 }); break; case f.b.DEVICE: this.subTypes = this.deviceService.getDeviceTypes({ ignoreLoading: !0 }); break; case f.b.EDGE: this.subTypes = this.edgeService.getEdgeTypes({ ignoreLoading: !0 }); break; case f.b.ENTITY_VIEW: this.subTypes = this.entityViewService.getEntityViewTypes({ ignoreLoading: !0 }) }if (!this.subTypes) return Object(a.a)(null); this.subTypes = this.subTypes.pipe(Object(c.a)(function (t) { return t.unshift(""), e.subTypesLoaded = !0, t }), Object(u.a)(function (t) { var n = e.subTypeFormGroup.get("subType").value, i = "string" == typeof n ? n : n.type, r = t.find(function (e) { return "string" == typeof e ? e === n : e.type === i }); r && e.subTypeFormGroup.get("subType").patchValue(r) }), Object(d.a)(1), Object(p.a)()) } return this.subTypes }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](v.Store), i["\u0275\u0275directiveInject"](h.a), i["\u0275\u0275directiveInject"](E.TranslateService), i["\u0275\u0275directiveInject"](m.a), i["\u0275\u0275directiveInject"](g.a), i["\u0275\u0275directiveInject"](y.a), i["\u0275\u0275directiveInject"](b.a), i["\u0275\u0275directiveInject"](r.FormBuilder)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-entity-subtype-select"]], inputs: { entityType: "entityType", showLabel: "showLabel", required: "required", disabled: "disabled", typeTranslatePrefix: "typeTranslatePrefix" }, features: [i["\u0275\u0275ProvidersFeature"]([{ provide: r.NG_VALUE_ACCESSOR, useExisting: Object(i.forwardRef)(function () { return e }), multi: !0 }])], decls: 6, vars: 7, consts: [[1, "mat-block", 3, "formGroup"], [4, "ngIf"], ["formControlName", "subType", 1, "tb-entity-subtype-select", 3, "fxShow"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"]], template: function (e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "mat-form-field", 0), i["\u0275\u0275template"](1, I, 3, 3, "mat-label", 1), i["\u0275\u0275elementStart"](2, "mat-select", 2), i["\u0275\u0275template"](3, x, 2, 2, "mat-option", 3), i["\u0275\u0275pipe"](4, "async"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](5, M, 3, 3, "mat-error", 1), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275property"]("formGroup", t.subTypeFormGroup), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngIf", t.showLabel), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("fxShow", t.subTypesLoaded), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngForOf", i["\u0275\u0275pipeBind1"](4, 5, t.subTypesOptions)), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngIf", t.subTypeFormGroup.get("subType").hasError("required"))) }, directives: [T.MatFormField, r.NgControlStatusGroup, r.FormGroupDirective, S.NgIf, C.MatSelect, r.NgControlStatus, r.FormControlName, O.d, S.NgForOf, T.MatLabel, w.MatOption, T.MatError], pipes: [S.AsyncPipe, E.TranslatePipe], styles: [""] }), e }(); 0, void 0 }, "4r/P": function (e, t, n) { "use strict"; var i; function r(e) { var t, n = i.ASC; return e.startsWith("-") ? (n = i.DESC, t = e.substring(1)) : t = e.startsWith("+") ? e.substring(1) : e, { property: t, direction: n } } n.d(t, "a", function () { return i }), n.d(t, "b", function () { return r }), function (e) { e.ASC = "ASC", e.DESC = "DESC" }(i || (i = {})) }, "4t+N": function (e, t, n) { "use strict"; n.d(t, "a", function () { return P }); var i = n("fXoL"), r = n("3Pt+"), o = n("he9t"), a = n("//Q6"), s = n("HeHW"), l = n("0IaG"), c = n("XiUz"), u = n("kmnG"), d = n("sYmb"), p = n("d3UM"), m = n("NFeN"), f = n("ofXK"), h = n("FKr1"), g = n("qFsG"), y = n("bSwM"), b = n("ZI//"), v = n("bTqV"), E = ["inputForm"]; function T(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-option", 10), i["\u0275\u0275element"](1, "mat-icon", 5), i["\u0275\u0275elementStart"](2, "span"), i["\u0275\u0275text"](3), i["\u0275\u0275pipe"](4, "translate"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit, r = i["\u0275\u0275nextContext"](); i["\u0275\u0275property"]("value", n), i["\u0275\u0275advance"](1), i["\u0275\u0275propertyInterpolate"]("svgIcon", r.valueTypes.get(r.valueTypeEnum[n]).icon), i["\u0275\u0275advance"](2), i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4, 3, r.valueTypes.get(r.valueTypeEnum[n]).name)) } } function S(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-error"), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275nextContext"](2); i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"](" ", i["\u0275\u0275pipeBind1"](2, 1, n.requiredText ? n.requiredText : "value.string-value-required"), " ") } } function C(e, t) { if (1 & e) { var n = i["\u0275\u0275getCurrentView"](); i["\u0275\u0275elementStart"](0, "mat-form-field", 11), i["\u0275\u0275elementStart"](1, "mat-label", 3), i["\u0275\u0275text"](2, "value.string-value"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](3, "input", 12, 13), i["\u0275\u0275listener"]("ngModelChange", function (e) { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().modelValue = e })("ngModelChange", function () { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().onValueChanged() }), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](5, S, 3, 3, "mat-error", 14), i["\u0275\u0275elementEnd"]() } if (2 & e) { var r = i["\u0275\u0275reference"](4), o = i["\u0275\u0275nextContext"](); i["\u0275\u0275advance"](3), i["\u0275\u0275property"]("disabled", o.disabled)("ngModel", o.modelValue), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngIf", r.hasError("required")) } } function O(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-error"), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275nextContext"](2); i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"](" ", i["\u0275\u0275pipeBind1"](2, 1, n.requiredText ? n.requiredText : "value.integer-value-required"), " ") } } function w(e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "mat-error"), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"](" ", i["\u0275\u0275pipeBind1"](2, 1, "value.invalid-integer-value"), " ")) } function I(e, t) { if (1 & e) { var n = i["\u0275\u0275getCurrentView"](); i["\u0275\u0275elementStart"](0, "mat-form-field", 11), i["\u0275\u0275elementStart"](1, "mat-label", 3), i["\u0275\u0275text"](2, "value.integer-value"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](3, "input", 15, 13), i["\u0275\u0275listener"]("ngModelChange", function (e) { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().modelValue = e })("ngModelChange", function () { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().onValueChanged() }), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](5, O, 3, 3, "mat-error", 14), i["\u0275\u0275template"](6, w, 3, 3, "mat-error", 14), i["\u0275\u0275elementEnd"]() } if (2 & e) { var r = i["\u0275\u0275reference"](4), o = i["\u0275\u0275nextContext"](); i["\u0275\u0275advance"](3), i["\u0275\u0275property"]("disabled", o.disabled)("ngModel", o.modelValue), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngIf", r.hasError("required")), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngIf", r.hasError("pattern")) } } function x(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-error"), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275nextContext"](2); i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"](" ", i["\u0275\u0275pipeBind1"](2, 1, n.requiredText ? n.requiredText : "value.double-value-required"), " ") } } function M(e, t) { if (1 & e) { var n = i["\u0275\u0275getCurrentView"](); i["\u0275\u0275elementStart"](0, "mat-form-field", 11), i["\u0275\u0275elementStart"](1, "mat-label", 3), i["\u0275\u0275text"](2, "value.double-value"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](3, "input", 16, 13), i["\u0275\u0275listener"]("ngModelChange", function (e) { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().modelValue = e })("ngModelChange", function () { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().onValueChanged() }), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](5, x, 3, 3, "mat-error", 14), i["\u0275\u0275elementEnd"]() } if (2 & e) { var r = i["\u0275\u0275reference"](4), o = i["\u0275\u0275nextContext"](); i["\u0275\u0275advance"](3), i["\u0275\u0275property"]("disabled", o.disabled)("ngModel", o.modelValue), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngIf", r.hasError("required")) } } function j(e, t) { if (1 & e) { var n = i["\u0275\u0275getCurrentView"](); i["\u0275\u0275elementStart"](0, "div", 17), i["\u0275\u0275elementStart"](1, "mat-checkbox", 18, 13), i["\u0275\u0275listener"]("ngModelChange", function (e) { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().modelValue = e })("ngModelChange", function () { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().onValueChanged() }), i["\u0275\u0275text"](3), i["\u0275\u0275pipe"](4, "translate"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]() } if (2 & e) { var r = i["\u0275\u0275nextContext"](); i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("disabled", r.disabled)("ngModel", r.modelValue), i["\u0275\u0275advance"](2), i["\u0275\u0275textInterpolate1"](" ", i["\u0275\u0275pipeBind1"](4, 3, r.modelValue ? "value.true" : "value.false"), " ") } } function A(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-error"), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275nextContext"](2); i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"](" ", i["\u0275\u0275pipeBind1"](2, 1, n.requiredText ? n.requiredText : "value.json-value-required"), " ") } } function R(e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "mat-error"), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"](" ", i["\u0275\u0275pipeBind1"](2, 1, "value.json-value-invalid"), " ")) } function N(e, t) { if (1 & e) { var n = i["\u0275\u0275getCurrentView"](); i["\u0275\u0275elementStart"](0, "div", 19), i["\u0275\u0275elementStart"](1, "mat-form-field", 20), i["\u0275\u0275elementStart"](2, "mat-label", 3), i["\u0275\u0275text"](3, "value.json-value"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](4, "input", 21, 13), i["\u0275\u0275listener"]("ngModelChange", function (e) { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().modelValue = e })("ngModelChange", function () { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().onValueChanged() }), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](6, "button", 22), i["\u0275\u0275listener"]("click", function (e) { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().openEditJSONDialog(e) }), i["\u0275\u0275elementStart"](7, "mat-icon"), i["\u0275\u0275text"](8, "open_in_new"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](9, A, 3, 3, "mat-error", 14), i["\u0275\u0275template"](10, R, 3, 3, "mat-error", 14), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]() } if (2 & e) { var r = i["\u0275\u0275reference"](5), o = i["\u0275\u0275nextContext"](); i["\u0275\u0275advance"](4), i["\u0275\u0275property"]("disabled", o.disabled)("ngModel", o.modelValue), i["\u0275\u0275advance"](5), i["\u0275\u0275property"]("ngIf", r.hasError("required")), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngIf", r.hasError("invalidJSON")) } } var P = function () { function e(e) { this.dialog = e, this.valueTypeEnum = o.h, this.valueTypeKeys = Object.keys(o.h), this.valueTypes = o.m, this.propagateChange = null } return e.prototype.ngOnInit = function () { }, e.prototype.openEditJSONDialog = function (e) { var t = this; e && e.stopPropagation(), this.dialog.open(s.a, { disableClose: !0, panelClass: ["tb-dialog", "tb-fullscreen-dialog"], data: { jsonValue: this.modelValue } }).afterClosed().subscribe(function (e) { e && (t.modelValue = e, t.inputForm.control.patchValue({ value: t.modelValue })) }) }, e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.setDisabledState = function (e) { this.disabled = e }, e.prototype.writeValue = function (e) { this.modelValue = e, !0 === this.modelValue || !1 === this.modelValue ? this.valueType = o.h.BOOLEAN : "number" == typeof this.modelValue ? -1 === this.modelValue.toString().indexOf(".") ? this.valueType = o.h.INTEGER : this.valueType = o.h.DOUBLE : Object(a.z)(this.modelValue) ? this.valueType = o.h.JSON : this.valueType = o.h.STRING }, e.prototype.updateView = function () { this.inputForm.valid || this.valueType === o.h.BOOLEAN ? this.propagateChange(this.modelValue) : this.propagateChange(null) }, e.prototype.onValueTypeChanged = function () { this.valueType === o.h.BOOLEAN && (this.modelValue = !1), this.valueType === o.h.JSON ? this.modelValue = {} : this.modelValue = null, this.updateView() }, e.prototype.onValueChanged = function () { this.updateView() }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](l.MatDialog)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-value-input"]], viewQuery: function (e, t) { if (1 & e && i["\u0275\u0275viewQuery"](E, 3), 2 & e) { var n; i["\u0275\u0275queryRefresh"](n = i["\u0275\u0275loadQuery"]()) && (t.inputForm = n.first) } }, inputs: { disabled: "disabled", requiredText: "requiredText" }, features: [i["\u0275\u0275ProvidersFeature"]([{ provide: r.NG_VALUE_ACCESSOR, useExisting: Object(i.forwardRef)(function () { return e }), multi: !0 }])], decls: 18, vars: 12, consts: [["inputForm", "ngForm"], ["fxLayout", "row", "fxLayoutGap", "8px"], ["fxFlex", "40", 1, "mat-block", "tb-value-type"], ["translate", ""], ["matInput", "", "name", "valueType", 3, "disabled", "ngModel", "ngModelChange"], [3, "svgIcon"], [3, "value", 4, "ngFor", "ngForOf"], ["fxFlex", "60", "class", "mat-block", 4, "ngIf"], ["fxLayout", "column", "fxLayoutAlign", "center", "fxFlex", "60", 4, "ngIf"], ["fxLayout", "row", "fxLayoutAlign", "center", "fxFlex", "60", "class", "mat-block", 4, "ngIf"], [3, "value"], ["fxFlex", "60", 1, "mat-block"], ["matInput", "", "required", "", "name", "value", 3, "disabled", "ngModel", "ngModelChange"], ["value", "ngModel"], [4, "ngIf"], ["matInput", "", "required", "", "name", "value", "type", "number", "step", "1", "pattern", "^-?[0-9]+$", 3, "disabled", "ngModel", "ngModelChange"], ["matInput", "", "required", "", "name", "value", "type", "number", "step", "any", 3, "disabled", "ngModel", "ngModelChange"], ["fxLayout", "column", "fxLayoutAlign", "center", "fxFlex", "60"], ["name", "value", 2, "margin-bottom", "0", 3, "disabled", "ngModel", "ngModelChange"], ["fxLayout", "row", "fxLayoutAlign", "center", "fxFlex", "60", 1, "mat-block"], ["fxFlex", "", 1, "mat-block"], ["matInput", "", "tb-json-to-string", "", "required", "", "name", "value", 3, "disabled", "ngModel", "ngModelChange"], ["matSuffix", "", "mat-button", "", "mat-icon-button", "", 3, "click"]], template: function (e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "form", null, 0), i["\u0275\u0275elementStart"](2, "section", 1), i["\u0275\u0275elementStart"](3, "mat-form-field", 2), i["\u0275\u0275elementStart"](4, "mat-label", 3), i["\u0275\u0275text"](5, "value.type"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](6, "mat-select", 4), i["\u0275\u0275listener"]("ngModelChange", function (e) { return t.valueType = e })("ngModelChange", function () { return t.onValueTypeChanged() }), i["\u0275\u0275elementStart"](7, "mat-select-trigger"), i["\u0275\u0275element"](8, "mat-icon", 5), i["\u0275\u0275elementStart"](9, "span"), i["\u0275\u0275text"](10), i["\u0275\u0275pipe"](11, "translate"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](12, T, 5, 5, "mat-option", 6), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](13, C, 6, 3, "mat-form-field", 7), i["\u0275\u0275template"](14, I, 7, 4, "mat-form-field", 7), i["\u0275\u0275template"](15, M, 6, 3, "mat-form-field", 7), i["\u0275\u0275template"](16, j, 5, 5, "div", 8), i["\u0275\u0275template"](17, N, 11, 4, "div", 9), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275advance"](6), i["\u0275\u0275property"]("disabled", t.disabled)("ngModel", t.valueType), i["\u0275\u0275advance"](2), i["\u0275\u0275propertyInterpolate"]("svgIcon", t.valueTypes.get(t.valueType).icon), i["\u0275\u0275advance"](2), i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](11, 10, t.valueTypes.get(t.valueType).name)), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngForOf", t.valueTypeKeys), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngIf", t.valueType === t.valueTypeEnum.STRING), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngIf", t.valueType === t.valueTypeEnum.INTEGER), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngIf", t.valueType === t.valueTypeEnum.DOUBLE), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngIf", t.valueType === t.valueTypeEnum.BOOLEAN), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngIf", t.valueType === t.valueTypeEnum.JSON)) }, directives: [r["\u0275angular_packages_forms_forms_ba"], r.NgControlStatusGroup, r.NgForm, c.f, c.g, u.MatFormField, c.b, u.MatLabel, d.TranslateDirective, p.MatSelect, r.NgControlStatus, r.NgModel, p.MatSelectTrigger, m.MatIcon, f.NgForOf, f.NgIf, h.MatOption, g.MatInput, r.DefaultValueAccessor, r.RequiredValidator, u.MatError, r.NumberValueAccessor, r.PatternValidator, c.e, y.MatCheckbox, b.a, v.MatButton, u.MatSuffix], pipes: [d.TranslatePipe], styles: ["[_nghost-%COMP%]     mat-form-field.tb-value-type .mat-form-field-infix{padding-bottom:1px}[_nghost-%COMP%]     mat-form-field.tb-value-type mat-select-trigger .mat-icon{vertical-align:middle;margin-right:16px}"] }), e }(); 0, void 0 }, "5U8l": function (e, t, n) { "use strict"; n.d(t, "a", function () { return P }); var i = n("fXoL"), r = n("3Pt+"), o = n("LRne"), a = n("Kj3r"), s = n("/uUt"), l = n("vkgz"), c = n("lJxs"), u = n("eIep"), d = n("JIr8"), p = n("05l1"), m = n("x+ZX"), f = n("8LU1"), h = n("IaQH"), g = (n("/3Pq"), n("l7P3")), y = n("sYmb"), b = n("kmnG"), v = n("qFsG"), E = n("/1cH"), T = n("ofXK"), S = n("znSr"), C = n("bTqV"), O = n("NFeN"), w = n("FKr1"), I = n("d5eY"), x = ["queueInput"]; function M(e, t) { if (1 & e) { var n = i["\u0275\u0275getCurrentView"](); i["\u0275\u0275elementStart"](0, "button", 10), i["\u0275\u0275listener"]("click", function () { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().clear() }), i["\u0275\u0275elementStart"](1, "mat-icon", 11), i["\u0275\u0275text"](2, "close"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]() } } function j(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-option", 12), i["\u0275\u0275element"](1, "span", 13), i["\u0275\u0275pipe"](2, "highlight"), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit, r = i["\u0275\u0275nextContext"](); i["\u0275\u0275property"]("value", n), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("innerHTML", i["\u0275\u0275pipeBind2"](2, 2, n.queueName, r.searchText), i["\u0275\u0275sanitizeHtml"]) } } var A = function (e) { return { queue: e } }; function R(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-option", 12), i["\u0275\u0275elementStart"](1, "span"), i["\u0275\u0275text"](2), i["\u0275\u0275pipe"](3, "async"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275nextContext"](); i["\u0275\u0275property"]("value", null), i["\u0275\u0275advance"](2), i["\u0275\u0275textInterpolate1"](" ", i["\u0275\u0275pipeBind1"](3, 2, n.translate.get("queue.no-queues-matching", i["\u0275\u0275pureFunction1"](4, A, n.searchText))), " ") } } function N(e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "mat-error"), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"](" ", i["\u0275\u0275pipeBind1"](2, 1, "queue.name_required"), " ")) } var P = function () { function e(e, t, n, i) { this.store = e, this.translate = t, this.queueService = n, this.fb = i, this.searchText = "", this.dirty = !1, this.propagateChange = function (e) { }, this.queueFormGroup = this.fb.group({ queue: [null] }) } return Object.defineProperty(e.prototype, "required", { get: function () { return this.requiredValue }, set: function (e) { this.requiredValue = Object(f.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.ngOnInit = function () { var e = this; this.filteredQueues = this.queueFormGroup.get("queue").valueChanges.pipe(Object(a.a)(150), Object(s.a)(), Object(l.a)(function (t) { var n; n = "string" != typeof t && t ? t : null, e.updateView(n) }), Object(c.a)(function (e) { return e ? "string" == typeof e ? e : e.queueName : "" }), Object(u.a)(function (t) { return e.fetchQueues(t) })) }, e.prototype.ngAfterViewInit = function () { }, e.prototype.ngOnDestroy = function () { }, e.prototype.setDisabledState = function (e) { this.disabled = e, this.disabled ? this.queueFormGroup.disable({ emitEvent: !1 }) : this.queueFormGroup.enable({ emitEvent: !1 }) }, e.prototype.writeValue = function (e) { this.searchText = "", this.modelValue = e ? { queueName: e } : null, this.queueFormGroup.get("queue").patchValue(this.modelValue, { emitEvent: !1 }), this.dirty = !0 }, e.prototype.onFocus = function () { this.dirty && (this.queueFormGroup.get("queue").updateValueAndValidity({ onlySelf: !0, emitEvent: !0 }), this.dirty = !1) }, e.prototype.updateView = function (e) { this.modelValue !== e && (this.modelValue = e, this.propagateChange(this.modelValue ? this.modelValue.queueName : null)) }, e.prototype.displayQueueFn = function (e) { return e ? e.queueName : void 0 }, e.prototype.fetchQueues = function (e) { return this.searchText = e, this.getQueues().pipe(Object(d.a)(function () { return Object(o.a)([]) }), Object(c.a)(function (t) { var n = t.filter(function (t) { return !e || t.queueName.toUpperCase().startsWith(e.toUpperCase()) }); return n.length && n.sort(function (e, t) { return e.queueName.localeCompare(t.queueName) }), n })) }, e.prototype.getQueues = function () { return this.queues || (this.queues = this.queueService.getTenantQueuesByServiceType(this.queueType, { ignoreLoading: !0 }).pipe(Object(c.a)(function (e) { return e.map(function (e) { return { queueName: e } }) }), Object(p.a)(1), Object(m.a)())), this.queues }, e.prototype.clear = function () { var e = this; this.queueFormGroup.get("queue").patchValue(null, { emitEvent: !0 }), setTimeout(function () { e.queueInput.nativeElement.blur(), e.queueInput.nativeElement.focus() }, 0) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](g.Store), i["\u0275\u0275directiveInject"](y.TranslateService), i["\u0275\u0275directiveInject"](h.a), i["\u0275\u0275directiveInject"](r.FormBuilder)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-queue-type-list"]], viewQuery: function (e, t) { if (1 & e && i["\u0275\u0275viewQuery"](x, 3), 2 & e) { var n; i["\u0275\u0275queryRefresh"](n = i["\u0275\u0275loadQuery"]()) && (t.queueInput = n.first) } }, inputs: { required: "required", disabled: "disabled", queueType: "queueType" }, features: [i["\u0275\u0275ProvidersFeature"]([{ provide: r.NG_VALUE_ACCESSOR, useExisting: Object(i.forwardRef)(function () { return e }), multi: !0 }])], decls: 17, vars: 19, consts: [[1, "mat-block", 3, "formGroup"], ["matInput", "", "type", "text", "formControlName", "queue", 3, "placeholder", "required", "matAutocomplete", "focusin"], ["queueInput", ""], ["type", "button", "matSuffix", "", "mat-button", "", "mat-icon-button", "", "aria-label", "Clear", 3, "click", 4, "ngIf"], [1, "tb-autocomplete", 3, "displayWith"], ["queueAutocomplete", "matAutocomplete"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value", 4, "ngIf"], [4, "ngIf"], ["translate", "", 1, "tb-hint", 3, "fxShow"], ["type", "button", "matSuffix", "", "mat-button", "", "mat-icon-button", "", "aria-label", "Clear", 3, "click"], [1, "material-icons"], [3, "value"], [3, "innerHTML"]], template: function (e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-form-field", 0), i["\u0275\u0275elementStart"](1, "mat-label"), i["\u0275\u0275text"](2), i["\u0275\u0275pipe"](3, "translate"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](4, "input", 1, 2), i["\u0275\u0275listener"]("focusin", function () { return t.onFocus() }), i["\u0275\u0275pipe"](6, "translate"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](7, M, 3, 0, "button", 3), i["\u0275\u0275elementStart"](8, "mat-autocomplete", 4, 5), i["\u0275\u0275template"](10, j, 3, 5, "mat-option", 6), i["\u0275\u0275pipe"](11, "async"), i["\u0275\u0275template"](12, R, 4, 6, "mat-option", 7), i["\u0275\u0275pipe"](13, "async"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](14, N, 3, 3, "mat-error", 8), i["\u0275\u0275elementStart"](15, "mat-hint", 9), i["\u0275\u0275text"](16, "device-profile.select-queue-hint"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e) { var n, r = i["\u0275\u0275reference"](9); i["\u0275\u0275property"]("formGroup", t.queueFormGroup), i["\u0275\u0275advance"](2), i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3, 11, "queue.name")), i["\u0275\u0275advance"](2), i["\u0275\u0275propertyInterpolate"]("placeholder", i["\u0275\u0275pipeBind1"](6, 13, "queue.select_name")), i["\u0275\u0275property"]("required", t.required)("matAutocomplete", r), i["\u0275\u0275advance"](3), i["\u0275\u0275property"]("ngIf", t.queueFormGroup.get("queue").value && !t.disabled), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("displayWith", t.displayQueueFn), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngForOf", i["\u0275\u0275pipeBind1"](11, 15, t.filteredQueues)), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngIf", !(null != (n = i["\u0275\u0275pipeBind1"](13, 17, t.filteredQueues)) && n.length)), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngIf", t.queueFormGroup.get("queue").hasError("required")), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("fxShow", !t.disabled) } }, directives: [b.MatFormField, r.NgControlStatusGroup, r.FormGroupDirective, b.MatLabel, v.MatInput, r.DefaultValueAccessor, E.MatAutocompleteTrigger, r.NgControlStatus, r.FormControlName, r.RequiredValidator, T.NgIf, E.MatAutocomplete, T.NgForOf, b.MatHint, y.TranslateDirective, S.d, C.MatButton, b.MatSuffix, O.MatIcon, w.MatOption, b.MatError], pipes: [y.TranslatePipe, T.AsyncPipe, I.a], encapsulation: 2 }), e }(); 0, void 0 }, "5xOD": function (e, t, n) { "use strict"; n.d(t, "a", function () { return T }); var i = n("fXoL"), r = n("Y8nr"), o = n("XNiG"), a = n("LRne"), s = n("jtHE"), l = n("0lYY"), c = n("OiFK"), u = n("OCOE"), d = n("0G7Z"), p = n("pLZG"), m = n("lJxs"), f = n("vkgz"), h = n("5+tZ"), g = n("oKkZ"), y = n("tyNb"), b = n("AytR"), v = n("tk/3"), E = n("sYmb"), T = function () { function e(e, t, n, i, r) { var a = this; this.http = e, this.utils = t, this.resources = n, this.translate = i, this.router = r, this.widgetTypeUpdatedSubject = new o.b, this.widgetsBundleDeletedSubject = new o.b, this.widgetTypeInfosCache = new Map, this.router.events.pipe(Object(p.a)(function (e) { return e instanceof y.ActivationEnd })).subscribe(function () { a.invalidateWidgetsBundleCache() }) } return e.prototype.getAllWidgetsBundles = function (e) { var t = this; return this.loadWidgetsBundleCache(e).pipe(Object(m.a)(function () { return t.allWidgetsBundles })) }, e.prototype.getSystemWidgetsBundles = function (e) { var t = this; return this.loadWidgetsBundleCache(e).pipe(Object(m.a)(function () { return t.systemWidgetsBundles })) }, e.prototype.getTenantWidgetsBundles = function (e) { var t = this; return this.loadWidgetsBundleCache(e).pipe(Object(m.a)(function () { return t.tenantWidgetsBundles })) }, e.prototype.getWidgetBundles = function (e, t) { return this.http.get("/api/widgetsBundles" + e.toQuery(), Object(r.b)(t)) }, e.prototype.getWidgetsBundle = function (e, t) { return this.http.get("/api/widgetsBundle/" + e, Object(r.b)(t)) }, e.prototype.saveWidgetsBundle = function (e, t) { var n = this; return this.http.post("/api/widgetsBundle", e, Object(r.b)(t)).pipe(Object(f.a)(function () { n.invalidateWidgetsBundleCache() })) }, e.prototype.deleteWidgetsBundle = function (e, t) { var n = this; return this.getWidgetsBundle(e, t).pipe(Object(h.b)(function (i) { return n.http.delete("/api/widgetsBundle/" + e, Object(r.b)(t)).pipe(Object(f.a)(function () { n.invalidateWidgetsBundleCache(), n.widgetsBundleDeletedSubject.next(i) })) })) }, e.prototype.getBundleWidgetTypes = function (e, t, n) { return this.http.get("/api/widgetTypes?isSystem=" + t + "&bundleAlias=" + e, Object(r.b)(n)) }, e.prototype.getBundleWidgetTypesDetails = function (e, t, n) { return this.http.get("/api/widgetTypesDetails?isSystem=" + t + "&bundleAlias=" + e, Object(r.b)(n)) }, e.prototype.getBundleWidgetTypeInfos = function (e, t, n) { var i = this, o = e + (t ? "_sys" : ""); return this.widgetTypeInfosCache.has(o) ? Object(a.a)(this.widgetTypeInfosCache.get(o)) : this.http.get("/api/widgetTypesInfos?isSystem=" + t + "&bundleAlias=" + e, Object(r.b)(n)).pipe(Object(f.a)(function (e) { return i.widgetTypeInfosCache.set(o, e) })) }, e.prototype.loadBundleLibraryWidgets = function (e, t, n) { return this.getBundleWidgetTypes(e, t, n).pipe(Object(m.a)(function (n) { n = n.sort(function (e, t) { var n = l.m[t.descriptor.type].localeCompare(l.m[e.descriptor.type]); return 0 === n && (n = t.createdTime - e.createdTime), n }); var i = new Array, r = 0, o = [0, 0, 0], a = 0, s = 0; return n.forEach(function (n) { var l = Object(d.e)(n), c = Math.floor(l.sizeY), u = { typeId: n.id, isSystemType: t, bundleAlias: e, typeAlias: l.alias, type: l.type, title: l.widgetName, sizeX: 8, sizeY: c, row: r, col: a, config: JSON.parse(l.defaultConfig) }; u.config.title = l.widgetName, i.push(u), (r += c) > o[s] + 10 && (o[s] = r, ++s > 2 && (s = 0), r = o[s], a = 8 * s) }), i })) }, e.prototype.getWidgetType = function (e, t, n, i) { return this.http.get(b.a.integration_service + "/wrapperApis/widgetType?isSystem=" + n + "&bundleAlias=" + e + "&alias=" + t, Object(r.b)(i)) }, e.prototype.saveWidgetTypeDetails = function (e, t, n, i, o) { var a = this, s = Object(d.g)(e, t, void 0, n, i); return this.http.post("/api/widgetType", s, Object(r.b)(o)).pipe(Object(f.a)(function (e) { a.widgetTypeUpdatedSubject.next(e) })) }, e.prototype.saveImportedWidgetTypeDetails = function (e, t) { var n = this; return this.http.post("/api/widgetType", e, Object(r.b)(t)).pipe(Object(f.a)(function (e) { n.widgetTypeUpdatedSubject.next(e) })) }, e.prototype.deleteWidgetType = function (e, t, n, i) { var o = this; return this.getWidgetType(e, t, n, i).pipe(Object(h.b)(function (e) { return o.http.delete("/api/widgetType/" + e.id.id, Object(r.b)(i)).pipe(Object(f.a)(function () { o.widgetTypeUpdatedSubject.next(e) })) })) }, e.prototype.getWidgetTypeById = function (e, t) { return this.http.get("/api/widgetType/" + e, Object(r.b)(t)) }, e.prototype.getWidgetTemplate = function (e, t) { var n = l.n.get(e); return this.getWidgetType(n.template.bundleAlias, n.template.alias, !0, t).pipe(Object(m.a)(function (e) { var t = Object(d.e)(e); return t.alias = void 0, t })) }, e.prototype.onWidgetTypeUpdated = function () { return this.widgetTypeUpdatedSubject.asObservable() }, e.prototype.onWidgetBundleDeleted = function () { return this.widgetsBundleDeletedSubject.asObservable() }, e.prototype.loadWidgetsBundleCache = function (e) { var t = this; return this.allWidgetsBundles ? Object(a.a)(null) : (this.loadWidgetsBundleCacheSubject || (this.loadWidgetsBundleCacheSubject = new s.a, this.http.get("/api/widgetsBundles", Object(r.b)(e)).subscribe(function (e) { t.allWidgetsBundles = e, t.systemWidgetsBundles = new Array, t.tenantWidgetsBundles = new Array, t.allWidgetsBundles = t.allWidgetsBundles.sort(function (e, t) { var n = e.title.localeCompare(t.title); return 0 === n && (n = t.createdTime - e.createdTime), n }), t.allWidgetsBundles.forEach(function (e) { e.tenantId.id === g.a ? t.systemWidgetsBundles.push(e) : t.tenantWidgetsBundles.push(e) }), t.loadWidgetsBundleCacheSubject.next(), t.loadWidgetsBundleCacheSubject.complete() }, function () { t.loadWidgetsBundleCacheSubject.error(null) })), this.loadWidgetsBundleCacheSubject.asObservable()) }, e.prototype.invalidateWidgetsBundleCache = function () { this.allWidgetsBundles = void 0, this.systemWidgetsBundles = void 0, this.tenantWidgetsBundles = void 0, this.loadWidgetsBundleCacheSubject = void 0, this.widgetTypeInfosCache.clear() }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275inject"](v.HttpClient), i["\u0275\u0275inject"](c.a), i["\u0275\u0275inject"](u.a), i["\u0275\u0275inject"](E.TranslateService), i["\u0275\u0275inject"](y.Router)) }, e.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, "5yRj": function (e, t, n) { "use strict"; n.d(t, "a", function () { return g }); var i = n("fXoL"), r = n("//Q6"), o = n("XiUz"), a = n("znSr"), s = n("bTqV"), l = n("iQdX"), c = n("Qu3c"), u = n("NFeN"), d = n("sYmb"), p = function () { return { provider: "Facebook" } }, m = function () { return { provider: "Twitter" } }, f = function () { return { provider: "Linkedin" } }, h = function () { return { provider: "Reddit" } }, g = function () { function e() { } return e.prototype.ngOnInit = function () { }, e.prototype.isShareLinkLocal = function () { return !(this.shareLink && this.shareLink.length > 0) || Object(r.u)(this.shareLink) }, e.\u0275fac = function (t) { return new (t || e) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-social-share-panel"]], inputs: { shareTitle: "shareTitle", shareText: "shareText", shareLink: "shareLink", shareHashTags: "shareHashTags" }, decls: 13, vars: 31, consts: [["fxLayout", "row", "fxLayoutGap", "12px", 3, "fxHide"], ["mat-icon-button", "", "mat-raised-button", "", "shareButton", "facebook", "matTooltipPosition", "above", 1, "mat-primary", 3, "title", "description", "url", "matTooltip"], ["svgIcon", "mdi:facebook"], ["mat-icon-button", "", "mat-raised-button", "", "shareButton", "twitter", "matTooltipPosition", "above", 1, "mat-primary", 3, "title", "tags", "url", "matTooltip"], ["svgIcon", "mdi:twitter"], ["mat-icon-button", "", "mat-raised-button", "", "shareButton", "linkedin", "matTooltipPosition", "above", 1, "mat-primary", 3, "title", "url", "matTooltip"], ["svgIcon", "mdi:linkedin"], ["mat-icon-button", "", "mat-raised-button", "", "shareButton", "reddit", "matTooltipPosition", "above", 1, "mat-primary", 3, "title", "url", "matTooltip"], ["svgIcon", "mdi:reddit"]], template: function (e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "div", 0), i["\u0275\u0275elementStart"](1, "button", 1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275element"](3, "mat-icon", 2), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](4, "button", 3), i["\u0275\u0275pipe"](5, "translate"), i["\u0275\u0275element"](6, "mat-icon", 4), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](7, "button", 5), i["\u0275\u0275pipe"](8, "translate"), i["\u0275\u0275element"](9, "mat-icon", 6), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](10, "button", 7), i["\u0275\u0275pipe"](11, "translate"), i["\u0275\u0275element"](12, "mat-icon", 8), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275property"]("fxHide", t.isShareLinkLocal()), i["\u0275\u0275advance"](1), i["\u0275\u0275propertyInterpolate"]("title", t.shareTitle), i["\u0275\u0275propertyInterpolate"]("description", t.shareText), i["\u0275\u0275propertyInterpolate"]("url", t.shareLink), i["\u0275\u0275propertyInterpolate"]("matTooltip", i["\u0275\u0275pipeBind2"](2, 15, "action.share-via", i["\u0275\u0275pureFunction0"](27, p))), i["\u0275\u0275advance"](3), i["\u0275\u0275propertyInterpolate"]("title", t.shareTitle), i["\u0275\u0275propertyInterpolate"]("tags", t.shareHashTags), i["\u0275\u0275propertyInterpolate"]("url", t.shareLink), i["\u0275\u0275propertyInterpolate"]("matTooltip", i["\u0275\u0275pipeBind2"](5, 18, "action.share-via", i["\u0275\u0275pureFunction0"](28, m))), i["\u0275\u0275advance"](3), i["\u0275\u0275propertyInterpolate"]("title", t.shareTitle), i["\u0275\u0275propertyInterpolate"]("url", t.shareLink), i["\u0275\u0275propertyInterpolate"]("matTooltip", i["\u0275\u0275pipeBind2"](8, 21, "action.share-via", i["\u0275\u0275pureFunction0"](29, f))), i["\u0275\u0275advance"](3), i["\u0275\u0275propertyInterpolate"]("title", t.shareTitle), i["\u0275\u0275propertyInterpolate"]("url", t.shareLink), i["\u0275\u0275propertyInterpolate"]("matTooltip", i["\u0275\u0275pipeBind2"](11, 24, "action.share-via", i["\u0275\u0275pureFunction0"](30, h)))) }, directives: [o.f, o.g, a.d, s.MatButton, l.a, c.MatTooltip, u.MatIcon], pipes: [d.TranslatePipe], styles: ["[_nghost-%COMP%]{display:block}"] }), e }(); 0, void 0 }, "6OOC": function (e, t, n) { "use strict"; n.d(t, "a", function () { return i }); var i = { createdTime: { keyName: "createdTime", name: "entity-field.created-time", value: "createdTime", time: !0 }, name: { keyName: "name", name: "entity-field.name", value: "name" }, type: { keyName: "type", name: "entity-field.type", value: "type" }, firstName: { keyName: "firstName", name: "entity-field.first-name", value: "firstName" }, lastName: { keyName: "lastName", name: "entity-field.last-name", value: "lastName" }, email: { keyName: "email", name: "entity-field.email", value: "email" }, title: { keyName: "title", name: "entity-field.title", value: "title" }, country: { keyName: "country", name: "entity-field.country", value: "country" }, state: { keyName: "state", name: "entity-field.state", value: "state" }, city: { keyName: "city", name: "entity-field.city", value: "city" }, address: { keyName: "address", name: "entity-field.address", value: "address" }, address2: { keyName: "address2", name: "entity-field.address2", value: "address2" }, zip: { keyName: "zip", name: "entity-field.zip", value: "zip" }, phone: { keyName: "phone", name: "entity-field.phone", value: "phone" }, label: { keyName: "label", name: "entity-field.label", value: "label" } } }, "6XAR": function (e, t, n) { "use strict"; n.d(t, "a", function () { return F }); var i = n("fXoL"), r = n("3Pt+"), o = n("LRne"), a = n("z6cu"), s = n("Kj3r"), l = n("/uUt"), c = n("vkgz"), u = n("lJxs"), d = n("eIep"), p = n("JIr8"), m = n("05l1"), f = n("x+ZX"), h = n("DaoB"), g = n("U3y+"), y = n("gM18"), b = n("8LU1"), v = n("1y+p"), E = n("j37L"), T = n("y7gY"), S = n("l7P3"), C = n("sYmb"), O = n("kmnG"), w = n("qFsG"), I = n("/1cH"), x = n("ofXK"), M = n("bTqV"), j = n("NFeN"), A = n("FKr1"), R = n("d5eY"), N = ["subTypeInput"]; function P(e, t) { if (1 & e) { var n = i["\u0275\u0275getCurrentView"](); i["\u0275\u0275elementStart"](0, "button", 8), i["\u0275\u0275listener"]("click", function () { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().clear() }), i["\u0275\u0275elementStart"](1, "mat-icon", 9), i["\u0275\u0275text"](2, "close"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]() } } function k(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-option", 10), i["\u0275\u0275element"](1, "span", 11), i["\u0275\u0275pipe"](2, "highlight"), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit, r = i["\u0275\u0275nextContext"](); i["\u0275\u0275property"]("value", n), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("innerHTML", i["\u0275\u0275pipeBind2"](2, 2, n, r.searchText), i["\u0275\u0275sanitizeHtml"]) } } function _(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-error"), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275nextContext"](); i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"](" ", i["\u0275\u0275pipeBind1"](2, 1, n.entitySubtypeRequiredText), " ") } } var F = function () { function e(e, t, n, i, r, o, a, s) { this.store = e, this.broadcast = t, this.translate = n, this.deviceService = i, this.assetService = r, this.edgeService = o, this.entityViewService = a, this.fb = s, this.searchText = "", this.dirty = !1, this.propagateChange = function (e) { }, this.subTypeFormGroup = this.fb.group({ subType: [null] }) } return Object.defineProperty(e.prototype, "required", { get: function () { return this.requiredValue }, set: function (e) { this.requiredValue = Object(b.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.ngOnInit = function () { var e = this; switch (this.entityType) { case g.b.ASSET: this.selectEntitySubtypeText = "asset.select-asset-type", this.entitySubtypeText = "asset.asset-type", this.entitySubtypeRequiredText = "asset.asset-type-required", this.broadcastSubscription = this.broadcast.on("assetSaved", function () { e.subTypes = null }); break; case g.b.DEVICE: this.selectEntitySubtypeText = "device.select-device-type", this.entitySubtypeText = "device.device-type", this.entitySubtypeRequiredText = "device.device-type-required", this.broadcastSubscription = this.broadcast.on("deviceSaved", function () { e.subTypes = null }); break; case g.b.EDGE: this.selectEntitySubtypeText = "edge.select-edge-type", this.entitySubtypeText = "edge.edge-type", this.entitySubtypeRequiredText = "edge.edge-type-required", this.broadcastSubscription = this.broadcast.on("edgeSaved", function () { e.subTypes = null }); break; case g.b.ENTITY_VIEW: this.selectEntitySubtypeText = "entity-view.select-entity-view-type", this.entitySubtypeText = "entity-view.entity-view-type", this.entitySubtypeRequiredText = "entity-view.entity-view-type-required", this.broadcastSubscription = this.broadcast.on("entityViewSaved", function () { e.subTypes = null }) }this.filteredSubTypes = this.subTypeFormGroup.get("subType").valueChanges.pipe(Object(s.a)(150), Object(l.a)(), Object(c.a)(function (t) { e.updateView(t) }), Object(u.a)(function (e) { return e || "" }), Object(d.a)(function (t) { return e.fetchSubTypes(t) })) }, e.prototype.ngAfterViewInit = function () { }, e.prototype.ngOnDestroy = function () { this.broadcastSubscription && this.broadcastSubscription.unsubscribe() }, e.prototype.setDisabledState = function (e) { this.disabled = e, this.disabled ? this.subTypeFormGroup.disable({ emitEvent: !1 }) : this.subTypeFormGroup.enable({ emitEvent: !1 }) }, e.prototype.writeValue = function (e) { this.searchText = "", this.modelValue = e, this.subTypeFormGroup.get("subType").patchValue(e, { emitEvent: !1 }), this.dirty = !0 }, e.prototype.onFocus = function () { this.dirty && (this.subTypeFormGroup.get("subType").updateValueAndValidity({ onlySelf: !0, emitEvent: !0 }), this.dirty = !1) }, e.prototype.updateView = function (e) { this.modelValue !== e && (this.modelValue = e, this.propagateChange(this.modelValue)) }, e.prototype.displaySubTypeFn = function (e) { return e || void 0 }, e.prototype.fetchSubTypes = function (e, t) { return void 0 === t && (t = !1), this.searchText = e, this.getSubTypes().pipe(Object(u.a)(function (n) { return n.filter(function (n) { return t ? !!e && n === e : !e || n.toUpperCase().startsWith(e.toUpperCase()) }) })) }, e.prototype.getSubTypes = function () { if (!this.subTypes) { var e = void 0; switch (this.entityType) { case g.b.ASSET: e = this.assetService.getAssetTypes({ ignoreLoading: !0 }); break; case g.b.DEVICE: e = this.deviceService.getDeviceTypes({ ignoreLoading: !0 }); break; case g.b.EDGE: e = this.edgeService.getEdgeTypes({ ignoreLoading: !0 }); break; case g.b.ENTITY_VIEW: e = this.entityViewService.getEntityViewTypes({ ignoreLoading: !0 }) }if (!e) return Object(a.a)(null); this.subTypes = e.pipe(Object(p.a)(function () { return Object(o.a)([]) }), Object(u.a)(function (e) { return e.map(function (e) { return e.type }) }), Object(m.a)(1), Object(f.a)()) } return this.subTypes }, e.prototype.clear = function () { var e = this; this.subTypeFormGroup.get("subType").patchValue(null, { emitEvent: !0 }), setTimeout(function () { e.subTypeInput.nativeElement.blur(), e.subTypeInput.nativeElement.focus() }, 0) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](S.Store), i["\u0275\u0275directiveInject"](y.a), i["\u0275\u0275directiveInject"](C.TranslateService), i["\u0275\u0275directiveInject"](h.a), i["\u0275\u0275directiveInject"](v.a), i["\u0275\u0275directiveInject"](T.a), i["\u0275\u0275directiveInject"](E.a), i["\u0275\u0275directiveInject"](r.FormBuilder)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-entity-subtype-autocomplete"]], viewQuery: function (e, t) { if (1 & e && i["\u0275\u0275viewQuery"](N, 3), 2 & e) { var n; i["\u0275\u0275queryRefresh"](n = i["\u0275\u0275loadQuery"]()) && (t.subTypeInput = n.first) } }, inputs: { entityType: "entityType", required: "required", disabled: "disabled" }, features: [i["\u0275\u0275ProvidersFeature"]([{ provide: r.NG_VALUE_ACCESSOR, useExisting: Object(i.forwardRef)(function () { return e }), multi: !0 }])], decls: 13, vars: 15, consts: [[1, "mat-block", 3, "formGroup"], ["matInput", "", "type", "text", "formControlName", "subType", 3, "placeholder", "required", "matAutocomplete", "focusin"], ["subTypeInput", ""], ["type", "button", "matSuffix", "", "mat-button", "", "mat-icon-button", "", "aria-label", "Clear", 3, "click", 4, "ngIf"], [1, "tb-autocomplete", 3, "displayWith"], ["subTypeAutocomplete", "matAutocomplete"], [3, "value", 4, "ngFor", "ngForOf"], [4, "ngIf"], ["type", "button", "matSuffix", "", "mat-button", "", "mat-icon-button", "", "aria-label", "Clear", 3, "click"], [1, "material-icons"], [3, "value"], [3, "innerHTML"]], template: function (e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-form-field", 0), i["\u0275\u0275elementStart"](1, "mat-label"), i["\u0275\u0275text"](2), i["\u0275\u0275pipe"](3, "translate"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](4, "input", 1, 2), i["\u0275\u0275listener"]("focusin", function () { return t.onFocus() }), i["\u0275\u0275pipe"](6, "translate"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](7, P, 3, 0, "button", 3), i["\u0275\u0275elementStart"](8, "mat-autocomplete", 4, 5), i["\u0275\u0275template"](10, k, 3, 5, "mat-option", 6), i["\u0275\u0275pipe"](11, "async"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](12, _, 3, 3, "mat-error", 7), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275reference"](9); i["\u0275\u0275property"]("formGroup", t.subTypeFormGroup), i["\u0275\u0275advance"](2), i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3, 9, t.entitySubtypeText)), i["\u0275\u0275advance"](2), i["\u0275\u0275propertyInterpolate"]("placeholder", i["\u0275\u0275pipeBind1"](6, 11, t.selectEntitySubtypeText)), i["\u0275\u0275property"]("required", t.required)("matAutocomplete", n), i["\u0275\u0275advance"](3), i["\u0275\u0275property"]("ngIf", t.subTypeFormGroup.get("subType").value && !t.disabled), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("displayWith", t.displaySubTypeFn), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngForOf", i["\u0275\u0275pipeBind1"](11, 13, t.filteredSubTypes)), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngIf", t.subTypeFormGroup.get("subType").hasError("required")) } }, directives: [O.MatFormField, r.NgControlStatusGroup, r.FormGroupDirective, O.MatLabel, w.MatInput, r.DefaultValueAccessor, I.MatAutocompleteTrigger, r.NgControlStatus, r.FormControlName, r.RequiredValidator, x.NgIf, I.MatAutocomplete, x.NgForOf, M.MatButton, O.MatSuffix, j.MatIcon, A.MatOption, O.MatError], pipes: [C.TranslatePipe, x.AsyncPipe, R.a], encapsulation: 2 }), e }(); 0, void 0 }, "7JTo": function (e, t, n) { "use strict"; n.d(t, "a", function () { return o }), n.d(t, "c", function () { return a }), n.d(t, "e", function () { return s }), n.d(t, "d", function () { return i }), n.d(t, "b", function () { return r }), n.d(t, "g", function () { return l }), n.d(t, "f", function () { return c }); var i, r, o = "Contains", a = "Manages", s = [o, a]; !function (e) { e.COMMON = "COMMON", e.ALARM = "ALARM", e.DASHBOARD = "DASHBOARD", e.RULE_CHAIN = "RULE_CHAIN", e.RULE_NODE = "RULE_NODE" }(i || (i = {})), function (e) { e.FROM = "FROM", e.TO = "TO" }(r || (r = {})); var l = new Map([[r.FROM, "relation.search-direction.FROM"], [r.TO, "relation.search-direction.TO"]]), c = new Map([[r.FROM, "relation.direction-type.FROM"], [r.TO, "relation.direction-type.TO"]]) }, "7dgu": function (e, t, n) { "use strict"; n.d(t, "a", function () { return o }), n.d(t, "b", function () { return a }); for (var i = n("Zss7"), r = i, o = { red: { 50: "#ffebee", 100: "#ffcdd2", 200: "#ef9a9a", 300: "#e57373", 400: "#ef5350", 500: "#f44336", 600: "#e53935", 700: "#d32f2f", 800: "#c62828", 900: "#b71c1c", A100: "#ff8a80", A200: "#ff5252", A400: "#ff1744", A700: "#d50000" }, pink: { 50: "#fce4ec", 100: "#f8bbd0", 200: "#f48fb1", 300: "#f06292", 400: "#ec407a", 500: "#e91e63", 600: "#d81b60", 700: "#c2185b", 800: "#ad1457", 900: "#880e4f", A100: "#ff80ab", A200: "#ff4081", A400: "#f50057", A700: "#c51162" }, purple: { 50: "#f3e5f5", 100: "#e1bee7", 200: "#ce93d8", 300: "#ba68c8", 400: "#ab47bc", 500: "#9c27b0", 600: "#8e24aa", 700: "#7b1fa2", 800: "#6a1b9a", 900: "#4a148c", A100: "#ea80fc", A200: "#e040fb", A400: "#d500f9", A700: "#aa00ff" }, "deep-purple": { 50: "#ede7f6", 100: "#d1c4e9", 200: "#b39ddb", 300: "#9575cd", 400: "#7e57c2", 500: "#673ab7", 600: "#5e35b1", 700: "#512da8", 800: "#4527a0", 900: "#311b92", A100: "#b388ff", A200: "#7c4dff", A400: "#651fff", A700: "#6200ea" }, indigo: { 50: "#e8eaf6", 100: "#c5cae9", 200: "#9fa8da", 300: "#7986cb", 400: "#5c6bc0", 500: "#3f51b5", 600: "#3949ab", 700: "#303f9f", 800: "#283593", 900: "#1a237e", A100: "#8c9eff", A200: "#536dfe", A400: "#3d5afe", A700: "#304ffe" }, blue: { 50: "#e3f2fd", 100: "#bbdefb", 200: "#90caf9", 300: "#64b5f6", 400: "#42a5f5", 500: "#2196f3", 600: "#1e88e5", 700: "#1976d2", 800: "#1565c0", 900: "#0d47a1", A100: "#82b1ff", A200: "#448aff", A400: "#2979ff", A700: "#2962ff" }, "light-blue": { 50: "#e1f5fe", 100: "#b3e5fc", 200: "#81d4fa", 300: "#4fc3f7", 400: "#29b6f6", 500: "#03a9f4", 600: "#039be5", 700: "#0288d1", 800: "#0277bd", 900: "#01579b", A100: "#80d8ff", A200: "#40c4ff", A400: "#00b0ff", A700: "#0091ea" }, cyan: { 50: "#e0f7fa", 100: "#b2ebf2", 200: "#80deea", 300: "#4dd0e1", 400: "#26c6da", 500: "#00bcd4", 600: "#00acc1", 700: "#0097a7", 800: "#00838f", 900: "#006064", A100: "#84ffff", A200: "#18ffff", A400: "#00e5ff", A700: "#00b8d4" }, teal: { 50: "#e0f2f1", 100: "#b2dfdb", 200: "#80cbc4", 300: "#4db6ac", 400: "#26a69a", 500: "#009688", 600: "#00897b", 700: "#00796b", 800: "#00695c", 900: "#004d40", A100: "#a7ffeb", A200: "#64ffda", A400: "#1de9b6", A700: "#00bfa5" }, green: { 50: "#e8f5e9", 100: "#c8e6c9", 200: "#a5d6a7", 300: "#81c784", 400: "#66bb6a", 500: "#4caf50", 600: "#43a047", 700: "#388e3c", 800: "#2e7d32", 900: "#1b5e20", A100: "#b9f6ca", A200: "#69f0ae", A400: "#00e676", A700: "#00c853" }, "light-green": { 50: "#f1f8e9", 100: "#dcedc8", 200: "#c5e1a5", 300: "#aed581", 400: "#9ccc65", 500: "#8bc34a", 600: "#7cb342", 700: "#689f38", 800: "#558b2f", 900: "#33691e", A100: "#ccff90", A200: "#b2ff59", A400: "#76ff03", A700: "#64dd17" }, lime: { 50: "#f9fbe7", 100: "#f0f4c3", 200: "#e6ee9c", 300: "#dce775", 400: "#d4e157", 500: "#cddc39", 600: "#c0ca33", 700: "#afb42b", 800: "#9e9d24", 900: "#827717", A100: "#f4ff81", A200: "#eeff41", A400: "#c6ff00", A700: "#aeea00" }, yellow: { 50: "#fffde7", 100: "#fff9c4", 200: "#fff59d", 300: "#fff176", 400: "#ffee58", 500: "#ffeb3b", 600: "#fdd835", 700: "#fbc02d", 800: "#f9a825", 900: "#f57f17", A100: "#ffff8d", A200: "#ffff00", A400: "#ffea00", A700: "#ffd600" }, amber: { 50: "#fff8e1", 100: "#ffecb3", 200: "#ffe082", 300: "#ffd54f", 400: "#ffca28", 500: "#ffc107", 600: "#ffb300", 700: "#ffa000", 800: "#ff8f00", 900: "#ff6f00", A100: "#ffe57f", A200: "#ffd740", A400: "#ffc400", A700: "#ffab00" }, orange: { 50: "#fff3e0", 100: "#ffe0b2", 200: "#ffcc80", 300: "#ffb74d", 400: "#ffa726", 500: "#ff9800", 600: "#fb8c00", 700: "#f57c00", 800: "#ef6c00", 900: "#e65100", A100: "#ffd180", A200: "#ffab40", A400: "#ff9100", A700: "#ff6d00" }, "deep-orange": { 50: "#fbe9e7", 100: "#ffccbc", 200: "#ffab91", 300: "#ff8a65", 400: "#ff7043", 500: "#ff5722", 600: "#f4511e", 700: "#e64a19", 800: "#d84315", 900: "#bf360c", A100: "#ff9e80", A200: "#ff6e40", A400: "#ff3d00", A700: "#dd2c00" }, brown: { 50: "#efebe9", 100: "#d7ccc8", 200: "#bcaaa4", 300: "#a1887f", 400: "#8d6e63", 500: "#795548", 600: "#6d4c41", 700: "#5d4037", 800: "#4e342e", 900: "#3e2723", A100: "#d7ccc8", A200: "#bcaaa4", A400: "#8d6e63", A700: "#5d4037" }, grey: { 50: "#fafafa", 100: "#f5f5f5", 200: "#eeeeee", 300: "#e0e0e0", 400: "#bdbdbd", 500: "#9e9e9e", 600: "#757575", 700: "#616161", 800: "#424242", 900: "#212121", A100: "#ffffff", A200: "#000000", A400: "#303030", A700: "#616161" }, "blue-grey": { 50: "#eceff1", 100: "#cfd8dc", 200: "#b0bec5", 300: "#90a4ae", 400: "#78909c", 500: "#607d8b", 600: "#546e7a", 700: "#455a64", 800: "#37474f", 900: "#263238", A100: "#cfd8dc", A200: "#b0bec5", A400: "#78909c", A700: "#455a64" }, black: { 50: "#000000", 100: "#000000", 200: "#000000", 300: "#000000", 400: "#000000", 500: "#000000", 600: "#000000", 700: "#000000", 800: "#000000", 900: "#000000", A100: "#000000", A200: "#000000", A400: "#000000", A700: "#000000" } }, a = new Array, s = ["blue", "green", "red", "amber", "blue-grey", "purple", "light-green", "indigo", "pink", "yellow", "light-blue", "orange", "deep-purple", "lime", "teal", "brown", "cyan", "deep-orange", "grey", "black"], l = ["500", "A700", "600", "700", "800", "900", "300", "400", "A200", "A400"], c = 0, u = Object.keys(o); c < u.length; c++)for (var d = u[c], p = o[d], m = 0, f = Object.keys(p); m < f.length; m++) { var h = f[m]; if (l.indexOf(h) > -1) { var g = r(p[h]), y = g.isDark(), b = { value: g.toHexString(), group: d, label: h, isDark: y }; a.push(b) } } a.sort(function (e, t) { var n = l.indexOf(e.label) - l.indexOf(t.label); 0 === n && (n = s.indexOf(e.group) - s.indexOf(t.group)); return n }) }, "7qoW": function (e, t, n) { "use strict"; n.d(t, "a", function () { return p }), n.d(t, "b", function () { return m }); var i = n("fXoL"), r = n("XiUz"), o = n("kmnG"), a = n("d3UM"), s = n("3Pt+"), l = n("ofXK"), c = n("FKr1"), u = n("sYmb"); function d(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-option", 3), i["\u0275\u0275text"](1), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit; i["\u0275\u0275property"]("value", n.id.id), i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"](" ", n.title, " ") } } var p = new i.InjectionToken("DashboardSelectPanelData"), m = function () { function e(e) { this.data = e, this.dashboards$ = this.data.dashboards$, this.dashboardId = this.data.dashboardId } return e.prototype.dashboardSelected = function (e) { this.data.onDashboardSelected(e) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](p)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-dashboard-select-panel"]], decls: 8, vars: 7, consts: [["fxLayout", "column", 1, "mat-content", "mat-padding"], ["matInput", "", 3, "ngModel", "ngModelChange"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"]], template: function (e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "div", 0), i["\u0275\u0275elementStart"](1, "mat-form-field"), i["\u0275\u0275elementStart"](2, "mat-label"), i["\u0275\u0275text"](3), i["\u0275\u0275pipe"](4, "translate"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](5, "mat-select", 1), i["\u0275\u0275listener"]("ngModelChange", function (e) { return t.dashboardId = e })("ngModelChange", function () { return t.dashboardSelected(t.dashboardId) }), i["\u0275\u0275template"](6, d, 2, 2, "mat-option", 2), i["\u0275\u0275pipe"](7, "async"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275advance"](3), i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4, 3, "dashboard.select-dashboard")), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngModel", t.dashboardId), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngForOf", i["\u0275\u0275pipeBind1"](7, 5, t.dashboards$))) }, directives: [r.f, o.MatFormField, o.MatLabel, a.MatSelect, s.NgControlStatus, s.NgModel, l.NgForOf, c.MatOption], pipes: [u.TranslatePipe, l.AsyncPipe], styles: ["[_nghost-%COMP%]{min-width:300px;max-width:320px;max-height:150px;overflow-x:hidden;overflow-y:auto;background:#fff;border-radius:4px;box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12)}@media (min-height:350px){[_nghost-%COMP%]{max-height:250px}}[_nghost-%COMP%]   .mat-content[_ngcontent-%COMP%]{background-color:#fff}[_nghost-%COMP%]     mat-form-field .mat-form-field-infix{width:100%}[_nghost-%COMP%]     mat-form-field .mat-form-field-infix mat-select .mat-select-value{max-width:100%}"] }), e }(); 0, void 0 }, "7zTf": function (e, t, n) { "use strict"; var i, r, o; n.d(t, "c", function () { return i }), n.d(t, "a", function () { return r }), n.d(t, "b", function () { return o }), n.d(t, "f", function () { return a }), n.d(t, "d", function () { return s }), n.d(t, "e", function () { return l }), function (e) { e.DASHBOARD = "DASHBOARD", e.ASSET = "ASSET", e.DEVICE = "DEVICE", e.DEVICE_PROFILE = "DEVICE_PROFILE", e.ENTITY_VIEW = "ENTITY_VIEW", e.ALARM = "ALARM", e.RULE_CHAIN = "RULE_CHAIN", e.RULE_CHAIN_METADATA = "RULE_CHAIN_METADATA", e.EDGE = "EDGE", e.USER = "USER", e.CUSTOMER = "CUSTOMER", e.RELATION = "RELATION", e.TENANT = "TENANT", e.WIDGETS_BUNDLE = "WIDGETS_BUNDLE", e.WIDGET_TYPE = "WIDGET_TYPE", e.ADMIN_SETTINGS = "ADMIN_SETTINGS" }(i || (i = {})), function (e) { e.ADDED = "ADDED", e.DELETED = "DELETED", e.UPDATED = "UPDATED", e.POST_ATTRIBUTES = "POST_ATTRIBUTES", e.ATTRIBUTES_UPDATED = "ATTRIBUTES_UPDATED", e.ATTRIBUTES_DELETED = "ATTRIBUTES_DELETED", e.TIMESERIES_UPDATED = "TIMESERIES_UPDATED", e.CREDENTIALS_UPDATED = "CREDENTIALS_UPDATED", e.ASSIGNED_TO_CUSTOMER = "ASSIGNED_TO_CUSTOMER", e.UNASSIGNED_FROM_CUSTOMER = "UNASSIGNED_FROM_CUSTOMER", e.RELATION_ADD_OR_UPDATE = "RELATION_ADD_OR_UPDATE", e.RELATION_DELETED = "RELATION_DELETED", e.RPC_CALL = "RPC_CALL", e.ALARM_ACK = "ALARM_ACK", e.ALARM_CLEAR = "ALARM_CLEAR", e.ASSIGNED_TO_EDGE = "ASSIGNED_TO_EDGE", e.UNASSIGNED_FROM_EDGE = "UNASSIGNED_FROM_EDGE", e.CREDENTIALS_REQUEST = "CREDENTIALS_REQUEST", e.ENTITY_MERGE_REQUEST = "ENTITY_MERGE_REQUEST" }(r || (r = {})), function (e) { e.DEPLOYED = "DEPLOYED", e.PENDING = "PENDING" }(o || (o = {})); var a = new Map([[i.DASHBOARD, "edge-event.type-dashboard"], [i.ASSET, "edge-event.type-asset"], [i.DEVICE, "edge-event.type-device"], [i.DEVICE_PROFILE, "edge-event.type-device-profile"], [i.ENTITY_VIEW, "edge-event.type-entity-view"], [i.ALARM, "edge-event.type-alarm"], [i.RULE_CHAIN, "edge-event.type-rule-chain"], [i.RULE_CHAIN_METADATA, "edge-event.type-rule-chain-metadata"], [i.EDGE, "edge-event.type-edge"], [i.USER, "edge-event.type-user"], [i.CUSTOMER, "edge-event.type-customer"], [i.RELATION, "edge-event.type-relation"], [i.TENANT, "edge-event.type-tenant"], [i.WIDGETS_BUNDLE, "edge-event.type-widgets-bundle"], [i.WIDGET_TYPE, "edge-event.type-widgets-type"], [i.ADMIN_SETTINGS, "edge-event.type-admin-settings"]]), s = new Map([[r.ADDED, "edge-event.action-type-added"], [r.DELETED, "edge-event.action-type-deleted"], [r.UPDATED, "edge-event.action-type-updated"], [r.POST_ATTRIBUTES, "edge-event.action-type-post-attributes"], [r.ATTRIBUTES_UPDATED, "edge-event.action-type-attributes-updated"], [r.ATTRIBUTES_DELETED, "edge-event.action-type-attributes-deleted"], [r.TIMESERIES_UPDATED, "edge-event.action-type-timeseries-updated"], [r.CREDENTIALS_UPDATED, "edge-event.action-type-credentials-updated"], [r.ASSIGNED_TO_CUSTOMER, "edge-event.action-type-assigned-to-customer"], [r.UNASSIGNED_FROM_CUSTOMER, "edge-event.action-type-unassigned-from-customer"], [r.RELATION_ADD_OR_UPDATE, "edge-event.action-type-relation-add-or-update"], [r.RELATION_DELETED, "edge-event.action-type-relation-deleted"], [r.RPC_CALL, "edge-event.action-type-rpc-call"], [r.ALARM_ACK, "edge-event.action-type-alarm-ack"], [r.ALARM_CLEAR, "edge-event.action-type-alarm-clear"], [r.ASSIGNED_TO_EDGE, "edge-event.action-type-assigned-to-edge"], [r.UNASSIGNED_FROM_EDGE, "edge-event.action-type-unassigned-from-edge"], [r.CREDENTIALS_REQUEST, "edge-event.action-type-credentials-request"], [r.ENTITY_MERGE_REQUEST, "edge-event.action-type-entity-merge-request"]]), l = new Map([[o.DEPLOYED, "#000000"], [o.PENDING, "#9e9e9e"]]) }, "89S7": function (e, t, n) { "use strict"; n.d(t, "a", function () { return m }); var i = n("fXoL"), r = n("3Pt+"), o = n("U3y+"), a = n("21Fy"), s = n("8LU1"), l = n("oKkZ"), c = n("l7P3"), u = n("sYmb"); function d(e, t) { if (1 & e && i["\u0275\u0275element"](0, "tb-entity-type-select", 3), 2 & e) { var n = i["\u0275\u0275nextContext"](); i["\u0275\u0275property"]("showLabel", !0)("required", n.required)("useAliasEntityTypes", n.useAliasEntityTypes)("allowedEntityTypes", n.allowedEntityTypes) } } function p(e, t) { if (1 & e && i["\u0275\u0275element"](0, "tb-entity-autocomplete", 4), 2 & e) { var n = i["\u0275\u0275nextContext"](); i["\u0275\u0275property"]("required", n.required)("entityType", n.modelValue.entityType) } } var m = function () { function e(e, t, n, i) { this.store = e, this.entityService = t, this.translate = n, this.fb = i, this.modelValue = { entityType: null, id: null }, this.AliasEntityType = o.a, this.defaultEntityType = null, this.propagateChange = function (e) { }; var r = this.entityService.prepareAllowedEntityTypesList(this.allowedEntityTypes, this.useAliasEntityTypes); 1 === r.length ? (this.displayEntityTypeSelect = !1, this.defaultEntityType = r[0]) : this.displayEntityTypeSelect = !0, this.entitySelectFormGroup = this.fb.group({ entityType: [this.defaultEntityType], entityId: [null] }) } return Object.defineProperty(e.prototype, "required", { get: function () { return this.requiredValue }, set: function (e) { this.requiredValue = Object(s.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.ngOnInit = function () { var e = this; this.entitySelectFormGroup.get("entityType").valueChanges.subscribe(function (t) { e.updateView(t, e.modelValue.id) }), this.entitySelectFormGroup.get("entityId").valueChanges.subscribe(function (t) { var n = t ? "string" == typeof t ? t : t.id : null; e.updateView(e.modelValue.entityType, n) }) }, e.prototype.ngAfterViewInit = function () { }, e.prototype.setDisabledState = function (e) { this.disabled = e, this.disabled ? this.entitySelectFormGroup.disable() : this.entitySelectFormGroup.enable() }, e.prototype.writeValue = function (e) { null != e ? (e.id === l.a && (e.id = null), this.modelValue = e, this.entitySelectFormGroup.get("entityType").patchValue(e.entityType, { emitEvent: !0 }), this.entitySelectFormGroup.get("entityId").patchValue(e, { emitEvent: !0 })) : (this.modelValue = { entityType: this.defaultEntityType, id: null }, this.entitySelectFormGroup.get("entityType").patchValue(this.defaultEntityType, { emitEvent: !0 }), this.entitySelectFormGroup.get("entityId").patchValue(null, { emitEvent: !0 })) }, e.prototype.updateView = function (e, t) { this.modelValue.entityType === e && this.modelValue.id === t || (this.modelValue = { entityType: e, id: this.modelValue.entityType !== e ? null : t }, this.modelValue.entityType === o.a.CURRENT_TENANT || this.modelValue.entityType === o.a.CURRENT_USER || this.modelValue.entityType === o.a.CURRENT_USER_OWNER ? this.modelValue.id = l.a : this.modelValue.entityType !== o.a.CURRENT_CUSTOMER || this.modelValue.id || (this.modelValue.id = l.a), this.modelValue.entityType && this.modelValue.id ? this.propagateChange(this.modelValue) : this.propagateChange(null)) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](c.Store), i["\u0275\u0275directiveInject"](a.a), i["\u0275\u0275directiveInject"](u.TranslateService), i["\u0275\u0275directiveInject"](r.FormBuilder)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-entity-select"]], inputs: { allowedEntityTypes: "allowedEntityTypes", useAliasEntityTypes: "useAliasEntityTypes", required: "required", disabled: "disabled" }, features: [i["\u0275\u0275ProvidersFeature"]([{ provide: r.NG_VALUE_ACCESSOR, useExisting: Object(i.forwardRef)(function () { return e }), multi: !0 }])], decls: 3, vars: 3, consts: [["fxLayout", "row", 1, "tb-entity-select", 3, "formGroup"], ["style", "min-width: 100px; padding-right: 8px;", "formControlName", "entityType", 3, "showLabel", "required", "useAliasEntityTypes", "allowedEntityTypes", 4, "ngIf"], ["fxFlex", "", "formControlName", "entityId", 3, "required", "entityType", 4, "ngIf"], ["formControlName", "entityType", 2, "min-width", "100px", "padding-right", "8px", 3, "showLabel", "required", "useAliasEntityTypes", "allowedEntityTypes"], ["fxFlex", "", "formControlName", "entityId", 3, "required", "entityType"]], template: function (e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "div", 0), i["\u0275\u0275template"](1, d, 1, 4, "tb-entity-type-select", 1), i["\u0275\u0275template"](2, p, 1, 2, "tb-entity-autocomplete", 2), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275property"]("formGroup", t.entitySelectFormGroup), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngIf", t.displayEntityTypeSelect), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngIf", t.modelValue.entityType && t.modelValue.entityType !== t.AliasEntityType.CURRENT_TENANT && t.modelValue.entityType !== t.AliasEntityType.CURRENT_USER && t.modelValue.entityType !== t.AliasEntityType.CURRENT_USER_OWNER)) }, styles: [""] }), e }(); 0, void 0 }, "8Mhd": function (e, t, n) { "use strict"; n.d(t, "a", function () { return r }); var i = n("U3y+"), r = function (e) { this.entityType = i.b.CUSTOMER, this.id = e } }, "8RXW": function (e, t, n) { "use strict"; n.d(t, "a", function () { return E }); var i = n("mrSG"), r = n("fXoL"), o = n("RxGS"), a = n("R0Ic"), s = [Object(a.trigger)("fabToggler", [Object(a.state)("inactive", Object(a.style)({ transform: "rotate(0deg)" })), Object(a.state)("active", Object(a.style)({ transform: "rotate(225deg)" })), Object(a.transition)("* <=> *", Object(a.animate)("200ms cubic-bezier(0.4, 0.0, 0.2, 1)"))]), Object(a.trigger)("speedDialStagger", [Object(a.transition)("* => *", [Object(a.query)(":enter", Object(a.style)({ opacity: 0 }), { optional: !0 }), Object(a.query)(":enter", Object(a.stagger)("40ms", [Object(a.animate)("200ms cubic-bezier(0.4, 0.0, 0.2, 1)", Object(a.keyframes)([Object(a.style)({ opacity: 0, transform: "translateY(10px)" }), Object(a.style)({ opacity: 1, transform: "translateY(0)" })]))]), { optional: !0 }), Object(a.query)(":leave", Object(a.animate)("200ms cubic-bezier(0.4, 0.0, 0.2, 1)", Object(a.keyframes)([Object(a.style)({ opacity: 1 }), Object(a.style)({ opacity: 0 })])), { optional: !0 })])])], l = n("8LU1"), c = n("l7P3"), u = n("XiUz"), d = n("ofXK"), p = n("znSr"), m = n("bTqV"), f = n("Qu3c"), h = n("NFeN"), g = n("sYmb"); function y(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "button", 4), r["\u0275\u0275listener"]("click", function (e) { return t.$implicit.onAction(e) }), r["\u0275\u0275pipe"](1, "translate"), r["\u0275\u0275elementStart"](2, "mat-icon"), r["\u0275\u0275text"](3), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit; r["\u0275\u0275propertyInterpolate"]("matTooltip", r["\u0275\u0275pipeBind1"](1, 2, n.name)), r["\u0275\u0275advance"](3), r["\u0275\u0275textInterpolate"](n.icon) } } var b = function (e) { return { "relative-buttons": e } }, v = function (e) { return { value: e } }, E = function (e) { function t(t) { var n = e.call(this, t) || this; return n.store = t, n.buttons = [], n.fabTogglerState = "inactive", n.closeTimeout = null, n } return Object(i.d)(t, e), Object.defineProperty(t.prototype, "relative", { get: function () { return this.relativeValue }, set: function (e) { this.relativeValue = Object(l.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), t.prototype.onFocusOut = function (e) { var t = this; this.closeTimeout || (this.closeTimeout = setTimeout(function () { t.hideItems() }, 100)) }, t.prototype.onFocusIn = function (e) { this.closeTimeout && (clearTimeout(this.closeTimeout), this.closeTimeout = null) }, t.prototype.showItems = function () { this.fabTogglerState = "active", this.buttons = this.footerFabButtons.buttons }, t.prototype.hideItems = function () { this.fabTogglerState = "inactive", this.buttons = [] }, t.prototype.onToggleFab = function () { this.buttons.length ? this.hideItems() : this.showItems() }, t.\u0275fac = function (e) { return new (e || t)(r["\u0275\u0275directiveInject"](c.Store)) }, t.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: t, selectors: [["tb-footer-fab-buttons"]], hostBindings: function (e, t) { 1 & e && r["\u0275\u0275listener"]("focusout", function (e) { return t.onFocusOut(e) })("focusin", function (e) { return t.onFocusIn(e) }) }, inputs: { footerFabButtons: "footerFabButtons", relative: "relative" }, features: [r["\u0275\u0275InheritDefinitionFeature"]], decls: 9, vars: 15, consts: [["fxLayout", "row", 1, "layout-wrap", "tb-footer-fab-buttons", 3, "ngClass"], [1, "fab-container"], ["mat-fab", "", "color", "accent", "matTooltipPosition", "above", 1, "fab-toggler", "tb-btn-footer", 3, "disabled", "matTooltip", "click"], ["mat-fab", "", "color", "accent", "matTooltipPosition", "above", 3, "matTooltip", "click", 4, "ngFor", "ngForOf"], ["mat-fab", "", "color", "accent", "matTooltipPosition", "above", 3, "matTooltip", "click"]], template: function (e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "section", 0), r["\u0275\u0275elementStart"](1, "div", 1), r["\u0275\u0275elementStart"](2, "button", 2), r["\u0275\u0275listener"]("click", function () { return t.onToggleFab() }), r["\u0275\u0275pipe"](3, "async"), r["\u0275\u0275pipe"](4, "translate"), r["\u0275\u0275elementStart"](5, "mat-icon"), r["\u0275\u0275text"](6), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](7, "div"), r["\u0275\u0275template"](8, y, 4, 4, "button", 3), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]()), 2 & e && (r["\u0275\u0275property"]("ngClass", r["\u0275\u0275pureFunction1"](11, b, t.relative)), r["\u0275\u0275advance"](2), r["\u0275\u0275propertyInterpolate"]("matTooltip", r["\u0275\u0275pipeBind1"](4, 9, t.footerFabButtons.fabTogglerName)), r["\u0275\u0275property"]("disabled", r["\u0275\u0275pipeBind1"](3, 7, t.isLoading$)), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("@fabToggler", r["\u0275\u0275pureFunction1"](13, v, t.fabTogglerState)), r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate"](t.footerFabButtons.fabTogglerIcon), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("@speedDialStagger", t.buttons.length), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngForOf", t.buttons)) }, directives: [u.f, d.NgClass, p.b, m.MatButton, f.MatTooltip, h.MatIcon, d.NgForOf], pipes: [d.AsyncPipe, g.TranslatePipe], styles: ["[_nghost-%COMP%]   section.tb-footer-fab-buttons[_ngcontent-%COMP%]:not(.relative-buttons){position:fixed;right:20px;bottom:20px;z-index:30;pointer-events:none}[_nghost-%COMP%]   section.tb-footer-fab-buttons[_ngcontent-%COMP%]   .fab-container[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;align-items:center}[_nghost-%COMP%]   section.tb-footer-fab-buttons[_ngcontent-%COMP%]   .fab-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;align-items:center}[_nghost-%COMP%]   section.tb-footer-fab-buttons[_ngcontent-%COMP%]   .fab-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:17px}[_nghost-%COMP%]   section.tb-footer-fab-buttons[_ngcontent-%COMP%]   .tb-btn-footer[_ngcontent-%COMP%]{position:relative!important;display:inline-block!important;-webkit-animation:tbMoveFromBottomFade .3s ease both;animation:tbMoveFromBottomFade .3s ease both}[_nghost-%COMP%]   section.tb-footer-fab-buttons[_ngcontent-%COMP%]   .tb-btn-footer.fab-toggler[_ngcontent-%COMP%]{margin-top:0}[_nghost-%COMP%]   section.tb-footer-fab-buttons[_ngcontent-%COMP%]   .tb-btn-footer.tb-hide[_ngcontent-%COMP%]{-webkit-animation:tbMoveToBottomFade .3s ease both;animation:tbMoveToBottomFade .3s ease both}"], data: { animation: s } }), t }(o.a); 0, void 0 }, "8km5": function (e, t, n) { "use strict"; n.d(t, "d", function () { return a }), n.d(t, "c", function () { return s }), n.d(t, "e", function () { return l }), n.d(t, "b", function () { return c }), n.d(t, "a", function () { return i }); var i, r = n("+5dr"), o = n("3Zdl"), a = [o.b.FILTER, o.b.ENRICHMENT, o.b.TRANSFORMATION, o.b.ACTION, o.b.EXTERNAL], s = { type: r.c.RULE_CHAIN, name: "rule chain", clazz: "tb.internal.RuleChain", configurationDescriptor: { nodeDefinition: { description: "", details: "Forwards incoming messages to specified Rule Chain", inEnabled: !0, outEnabled: !1, relationTypes: [], customRelations: !1, defaultConfiguration: {} } } }, l = { type: r.c.UNKNOWN, name: "unknown", clazz: "tb.internal.Unknown", configurationDescriptor: { nodeDefinition: { description: "", details: "", inEnabled: !0, outEnabled: !0, relationTypes: [], customRelations: !1, defaultConfiguration: {} } } }, c = { type: r.c.INPUT, name: "Input", clazz: "tb.internal.Input" }; !function (e) { e.CORE = "CORE", e.EDGE = "EDGE" }(i || (i = {})) }, "8lD5": function (e, t, n) { "use strict"; n.d(t, "a", function () { return y }); var i = n("fXoL"), r = n("3Pt+"), o = n("U3y+"), a = n("21Fy"), s = n("8LU1"), l = n("l7P3"), c = n("sYmb"), u = n("kmnG"), d = n("ofXK"), p = n("d3UM"), m = n("FKr1"); function f(e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "mat-label"), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2, 1, "entity.type"))) } function h(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-option", 4), i["\u0275\u0275text"](1), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit, r = i["\u0275\u0275nextContext"](); i["\u0275\u0275property"]("value", n), i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"](" ", r.displayEntityTypeFn(n), " ") } } function g(e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "mat-error"), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"](" ", i["\u0275\u0275pipeBind1"](2, 1, "entity.type-required"), " ")) } var y = function () { function e(e, t, n, i) { this.store = e, this.entityService = t, this.translate = n, this.fb = i, this.propagateChange = function (e) { }, this.entityTypeFormGroup = this.fb.group({ entityType: [null] }) } return Object.defineProperty(e.prototype, "showLabel", { get: function () { return this.showLabelValue }, set: function (e) { this.showLabelValue = Object(s.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "required", { get: function () { return this.requiredValue }, set: function (e) { this.requiredValue = Object(s.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.ngOnInit = function () { var e = this; this.entityTypes = this.entityService.prepareAllowedEntityTypesList(this.allowedEntityTypes, this.useAliasEntityTypes), this.entityTypeFormGroup.get("entityType").valueChanges.subscribe(function (t) { var n; n = t && "" !== t ? t : null, e.updateView(n) }) }, e.prototype.ngAfterViewInit = function () { }, e.prototype.setDisabledState = function (e) { this.disabled = e, this.disabled ? this.entityTypeFormGroup.disable() : this.entityTypeFormGroup.enable() }, e.prototype.writeValue = function (e) { null != e ? (this.modelValue = e, this.entityTypeFormGroup.get("entityType").patchValue(e, { emitEvent: !0 })) : (this.modelValue = null, this.entityTypeFormGroup.get("entityType").patchValue(null, { emitEvent: !0 })) }, e.prototype.updateView = function (e) { this.modelValue !== e && (this.modelValue = e, this.propagateChange(this.modelValue)) }, e.prototype.displayEntityTypeFn = function (e) { return e ? this.translate.instant(o.d.get(e).type) : "" }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](l.Store), i["\u0275\u0275directiveInject"](a.a), i["\u0275\u0275directiveInject"](c.TranslateService), i["\u0275\u0275directiveInject"](r.FormBuilder)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-entity-type-select"]], inputs: { allowedEntityTypes: "allowedEntityTypes", useAliasEntityTypes: "useAliasEntityTypes", showLabel: "showLabel", required: "required", disabled: "disabled" }, features: [i["\u0275\u0275ProvidersFeature"]([{ provide: r.NG_VALUE_ACCESSOR, useExisting: Object(i.forwardRef)(function () { return e }), multi: !0 }])], decls: 5, vars: 5, consts: [[3, "formGroup"], [4, "ngIf"], ["matInput", "", "formControlName", "entityType", 1, "tb-entity-type-select", 3, "required"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"]], template: function (e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "mat-form-field", 0), i["\u0275\u0275template"](1, f, 3, 3, "mat-label", 1), i["\u0275\u0275elementStart"](2, "mat-select", 2), i["\u0275\u0275template"](3, h, 2, 2, "mat-option", 3), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](4, g, 3, 3, "mat-error", 1), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275property"]("formGroup", t.entityTypeFormGroup), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngIf", t.showLabel), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("required", t.required), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngForOf", t.entityTypes), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngIf", t.entityTypeFormGroup.get("entityType").hasError("required"))) }, directives: [u.MatFormField, r.NgControlStatusGroup, r.FormGroupDirective, d.NgIf, p.MatSelect, r.NgControlStatus, r.FormControlName, r.RequiredValidator, d.NgForOf, u.MatLabel, m.MatOption, u.MatError], pipes: [c.TranslatePipe], styles: ["[_nghost-%COMP%]     .mat-form-field-infix{width:100%}[_nghost-%COMP%]     .mat-select-value{max-width:200px;min-width:100px}"] }), e }(); 0, void 0 }, "8m5z": function (e, t, n) { "use strict"; n.d(t, "a", function () { return c }); var i = n("mrSG"), r = n("fXoL"), o = n("rDax"), a = n("+rOU"), s = n("HnHJ"), l = n("jhN1"), c = function () { function e(e, t, n, i, o) { this.elementRef = e, this.renderer = t, this.sanitizer = n, this.viewContainerRef = i, this.overlay = o, this.fullscreenValue = !1, this.fullscreenChanged = new r.EventEmitter } return e.prototype.ngOnChanges = function (e) { for (var t = !1, n = 0, i = Object.keys(e); n < i.length; n++) { var r = i[n], o = e[r]; o.firstChange || o.currentValue === o.previousValue || "fullscreen" === r && (t = !0) } t && (this.fullscreen ? this.enterFullscreen() : this.exitFullscreen()) }, e.prototype.ngOnDestroy = function () { this.fullscreen && this.exitFullscreen() }, e.prototype.enterFullscreen = function () { var e = this.fullscreenElement || this.elementRef.nativeElement; this.parentElement = e.parentElement, this.parentElement.removeChild(e), e.classList.add("tb-fullscreen"); var t = this.overlay.position(), n = new o.OverlayConfig({ hasBackdrop: !1, panelClass: "tb-fullscreen-parent" }); if (n.minWidth = "100%", n.minHeight = "100%", n.positionStrategy = t.global().top("0%").left("0%").right("0%").bottom("0%"), this.overlayRef = this.overlay.create(n), this.overlayRef.attach(new u), this.fullscreenBackgroundStyle) for (var i = 0, r = Object.keys(this.fullscreenBackgroundStyle); i < r.length; i++) { var a = r[i]; this.setStyle(this.overlayRef.overlayElement, a, this.fullscreenBackgroundStyle[a]) } this.fullscreenBackgroundImage && this.setStyle(this.overlayRef.overlayElement, "backgroundImage", this.fullscreenBackgroundImage), this.overlayRef.overlayElement.appendChild(e), this.fullscreenChanged.emit(!0) }, e.prototype.setStyle = function (e, t, n) { var i = t.split("."), o = i[0], a = i[1], s = this.sanitizer.sanitize(r.SecurityContext.STYLE, n); null != s && (s = s.toString()), null != (s = null != s && a ? "" + s + a : s) ? this.renderer.setStyle(this.overlayRef.overlayElement, o, s) : this.renderer.removeStyle(this.overlayRef.overlayElement, o) }, e.prototype.exitFullscreen = function () { var e = this.fullscreenElement || this.elementRef.nativeElement; this.parentElement && (this.overlayRef.overlayElement.removeChild(e), this.parentElement.appendChild(e), this.parentElement = null), e.classList.remove("tb-fullscreen"), this.elementRef && this.elementRef.nativeElement.classList.remove("tb-fullscreen"), this.overlayRef && this.overlayRef.dispose(), this.fullscreenChanged.emit(!1) }, e.\u0275fac = function (t) { return new (t || e)(r["\u0275\u0275directiveInject"](r.ElementRef), r["\u0275\u0275directiveInject"](r.Renderer2), r["\u0275\u0275directiveInject"](l.DomSanitizer), r["\u0275\u0275directiveInject"](r.ViewContainerRef), r["\u0275\u0275directiveInject"](o.Overlay)) }, e.\u0275dir = r["\u0275\u0275defineDirective"]({ type: e, selectors: [["", "tb-fullscreen", ""]], inputs: { fullscreen: "fullscreen", fullscreenElement: "fullscreenElement", fullscreenBackgroundStyle: "fullscreenBackgroundStyle", fullscreenBackgroundImage: "fullscreenBackgroundImage" }, outputs: { fullscreenChanged: "fullscreenChanged" }, features: [r["\u0275\u0275NgOnChangesFeature"]] }), e }(); 0, void 0; var u = function (e) { function t() { return e.call(this, s.a) || this } return Object(i.d)(t, e), t }(a.ComponentPortal) }, "91Tk": function (e, t, n) { "use strict"; n.d(t, "a", function () { return m }); var i = n("mrSG"), r = n("fXoL"), o = n("3Pt+"), a = n("21Fy"), s = n("8LU1"), l = n("l7P3"), c = n("sYmb"); function u(e, t) { if (1 & e && r["\u0275\u0275element"](0, "tb-entity-type-select", 3), 2 & e) { var n = r["\u0275\u0275nextContext"](); r["\u0275\u0275property"]("showLabel", !0)("required", n.required)("useAliasEntityTypes", n.useAliasEntityTypes)("allowedEntityTypes", n.allowedEntityTypes) } } var d = function (e) { return { "tb-not-empty": e } }; function p(e, t) { if (1 & e && r["\u0275\u0275element"](0, "tb-entity-list", 4), 2 & e) { var n = r["\u0275\u0275nextContext"](); r["\u0275\u0275property"]("ngClass", r["\u0275\u0275pureFunction1"](3, d, (null == n.modelValue.ids ? null : n.modelValue.ids.length) > 0))("required", n.required)("entityType", n.modelValue.entityType) } } var m = function () { function e(e, t, n, i) { this.store = e, this.entityService = t, this.translate = n, this.fb = i, this.modelValue = { entityType: null, ids: [] }, this.defaultEntityType = null, this.propagateChange = function (e) { }; var r = this.entityService.prepareAllowedEntityTypesList(this.allowedEntityTypes, this.useAliasEntityTypes); 1 === r.length ? (this.displayEntityTypeSelect = !1, this.defaultEntityType = r[0]) : this.displayEntityTypeSelect = !0, this.entityListSelectFormGroup = this.fb.group({ entityType: [this.defaultEntityType], entityIds: [[]] }) } return Object.defineProperty(e.prototype, "required", { get: function () { return this.requiredValue }, set: function (e) { this.requiredValue = Object(s.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.ngOnInit = function () { var e = this; this.entityListSelectFormGroup.get("entityType").valueChanges.subscribe(function (t) { e.updateView(t, e.modelValue.ids) }), this.entityListSelectFormGroup.get("entityIds").valueChanges.subscribe(function (t) { e.updateView(e.modelValue.entityType, t) }) }, e.prototype.ngAfterViewInit = function () { }, e.prototype.setDisabledState = function (e) { this.disabled = e, this.disabled ? this.entityListSelectFormGroup.disable() : this.entityListSelectFormGroup.enable() }, e.prototype.writeValue = function (e) { if (null != e && e.length > 0) { var t = e[0]; this.modelValue = { entityType: t.entityType, ids: e.map(function (e) { return e.id }) } } else this.modelValue = { entityType: this.defaultEntityType, ids: [] }; this.entityListSelectFormGroup.get("entityType").patchValue(this.modelValue.entityType, { emitEvent: !0 }), this.entityListSelectFormGroup.get("entityIds").patchValue(Object(i.h)(this.modelValue.ids), { emitEvent: !0 }) }, e.prototype.updateView = function (e, t) { this.modelValue.entityType === e && this.compareIds(this.modelValue.ids, t) || (this.modelValue = { entityType: e, ids: this.modelValue.entityType === e && t ? Object(i.h)(t) : [] }, this.propagateChange(this.toEntityIds(this.modelValue))) }, e.prototype.compareIds = function (e, t) { return null !== e && null !== t ? JSON.stringify(e) === JSON.stringify(t) : e === t }, e.prototype.toEntityIds = function (e) { if (null !== e && e.entityType && e.ids && e.ids.length > 0) { var t = e.entityType; return e.ids.map(function (e) { return { entityType: t, id: e } }) } return null }, e.\u0275fac = function (t) { return new (t || e)(r["\u0275\u0275directiveInject"](l.Store), r["\u0275\u0275directiveInject"](a.a), r["\u0275\u0275directiveInject"](c.TranslateService), r["\u0275\u0275directiveInject"](o.FormBuilder)) }, e.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-entity-list-select"]], inputs: { allowedEntityTypes: "allowedEntityTypes", useAliasEntityTypes: "useAliasEntityTypes", required: "required", disabled: "disabled" }, features: [r["\u0275\u0275ProvidersFeature"]([{ provide: o.NG_VALUE_ACCESSOR, useExisting: Object(r.forwardRef)(function () { return e }), multi: !0 }])], decls: 3, vars: 3, consts: [["fxLayout", "row", 1, "tb-entity-list-select", 3, "formGroup"], ["style", "min-width: 100px; padding-right: 8px;", "formControlName", "entityType", 3, "showLabel", "required", "useAliasEntityTypes", "allowedEntityTypes", 4, "ngIf"], ["fxFlex", "", "formControlName", "entityIds", 3, "ngClass", "required", "entityType", 4, "ngIf"], ["formControlName", "entityType", 2, "min-width", "100px", "padding-right", "8px", 3, "showLabel", "required", "useAliasEntityTypes", "allowedEntityTypes"], ["fxFlex", "", "formControlName", "entityIds", 3, "ngClass", "required", "entityType"]], template: function (e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "div", 0), r["\u0275\u0275template"](1, u, 1, 4, "tb-entity-type-select", 1), r["\u0275\u0275template"](2, p, 1, 5, "tb-entity-list", 2), r["\u0275\u0275elementEnd"]()), 2 & e && (r["\u0275\u0275property"]("formGroup", t.entityListSelectFormGroup), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", t.displayEntityTypeSelect), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", t.modelValue.entityType)) }, styles: ["[_nghost-%COMP%]     tb-entity-list.tb-not-empty .mat-form-field-flex{padding-top:0}"] }), e }(); 0, void 0 }, "9D3k": function (e, t, n) { "use strict"; n.d(t, "a", function () { return l }); var i = n("mrSG"), r = n("fXoL"), o = n("Y8nr"), a = n("//Q6"), s = n("tk/3"), l = function () { function e(e) { this.http = e } return e.prototype.getUsers = function (e, t) { return this.http.get("/api/users" + e.toQuery(), Object(o.b)(t)) }, e.prototype.getTenantAdmins = function (e, t, n) { return this.http.get("/api/tenant/" + e + "/users" + t.toQuery(), Object(o.b)(n)) }, e.prototype.getCustomerUsers = function (e, t, n) { return this.http.get("/api/customer/" + e + "/users" + t.toQuery(), Object(o.b)(n)) }, e.prototype.getUser = function (e, t) { return this.http.get("/api/user/" + e, Object(o.b)(t)) }, e.prototype.saveUser = function (e, t, n) { void 0 === t && (t = !1); var i = "/api/user"; return i += "?sendActivationMail=" + t, this.http.post(i, e, Object(o.b)(n)) }, e.prototype.deleteUser = function (e, t) { return this.http.delete("/api/user/" + e, Object(o.b)(t)) }, e.prototype.getActivationLink = function (e, t) { return this.http.get("/api/user/" + e + "/activationLink", Object(i.a)({ responseType: "text" }, Object(o.b)(t))) }, e.prototype.sendActivationEmail = function (e, t) { var n = encodeURIComponent(e); return this.http.post("/api/user/sendActivationMail?email=" + n, null, Object(o.b)(t)) }, e.prototype.setUserCredentialsEnabled = function (e, t, n) { var i = "/api/user/" + e + "/userCredentialsEnabled"; return Object(a.n)(t) && (i += "?userCredentialsEnabled=" + t), this.http.post(i, null, Object(o.b)(n)) }, e.\u0275fac = function (t) { return new (t || e)(r["\u0275\u0275inject"](s.HttpClient)) }, e.\u0275prov = r["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, "9DSm": function (e, t, n) { "use strict"; n.d(t, "a", function () { return o }); var i = n("fXoL"), r = { bytes: 0, KB: 1, MB: 1, GB: 1, TB: 2, PB: 2 }, o = function () { function e() { this.units = ["bytes", "KB", "MB", "GB", "TB", "PB"] } return e.prototype.transform = function (e, t) { if (void 0 === e && (e = 0), void 0 === t && (t = r), isNaN(parseFloat(String(e))) || !isFinite(e)) return "?"; for (var n = 0; e >= 1024;)e /= 1024, n++; var i = this.units[n]; return "number" == typeof t ? e.toFixed(+t) + " " + i : e.toFixed(t[i]) + " " + i }, e.\u0275fac = function (t) { return new (t || e) }, e.\u0275pipe = i["\u0275\u0275definePipe"]({ name: "fileSize", type: e, pure: !0 }), e }(); 0, void 0 }, "9n8L": function (e, t, n) { "use strict"; n.d(t, "a", function () { return l }); var i = n("fXoL"), r = n("Y8nr"), o = n("LRne"), a = n("lJxs"), s = n("tk/3"), l = function () { function e(e) { this.http = e, this.componentsByTypeByRuleChainType = new Map, this.componentsByClazz = new Map } return e.prototype.getComponentDescriptorsByType = function (e, t, n) { var i = this; this.componentsByTypeByRuleChainType.get(t) || this.componentsByTypeByRuleChainType.set(t, new Map); var s = this.componentsByTypeByRuleChainType.get(t).get(e); return s ? Object(o.a)(s) : this.http.get("/api/components/" + e + "&ruleChainType=" + t, Object(r.b)(n)).pipe(Object(a.a)(function (n) { return i.componentsByTypeByRuleChainType.get(t).set(e, n), n.forEach(function (e) { i.componentsByClazz.set(e.clazz, e) }), n })) }, e.prototype.getComponentDescriptorsByTypes = function (e, t, n) { var i = this; this.componentsByTypeByRuleChainType.get(t) || this.componentsByTypeByRuleChainType.set(t, new Map); for (var s = [], l = e.length - 1; l >= 0; l--) { var c = e[l], u = this.componentsByTypeByRuleChainType.get(t).get(c); u && (s = s.concat(u), e.splice(l, 1)) } return e.length ? this.http.get("/api/components?componentTypes=" + e.join(",") + "&ruleChainType=" + t, Object(r.b)(n)).pipe(Object(a.a)(function (e) { return e.forEach(function (e) { var n = i.componentsByTypeByRuleChainType.get(t).get(e.type); n || (n = new Array, i.componentsByTypeByRuleChainType.get(t).set(e.type, n)), n.push(e), i.componentsByClazz.set(e.clazz, e) }), s = s.concat(e) })) : Object(o.a)(s) }, e.prototype.getComponentDescriptorByClazz = function (e, t) { var n = this, i = this.componentsByClazz.get(e); return i ? Object(o.a)(i) : this.http.get("/api/component/" + e, Object(r.b)(t)).pipe(Object(a.a)(function (t) { return n.componentsByClazz.set(e, t), t })) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275inject"](s.HttpClient)) }, e.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, AytR: function (e, t, n) { "use strict"; n.d(t, "a", function () { return i }); var i = { appTitle: "ThingsBoard", production: !0, integration_service: "http://" + window.location.host.replace(window.location.port, "8888"), tbVersion: "3.3.1", supportedLangs: ["cs_CZ", "de_DE", "el_GR", "en_US", "vi_VN", "en_US_bk", "es_ES", "fa_IR", "fr_FR", "it_IT", "ja_JA", "ka_GE", "ko_KR", "lv_LV", "pt_BR", "ro_RO", "ru_RU", "sl_SI", "tr_TR", "uk_UA", "zh_CN", "zh_TW"], defaultLang: "en_US" } }, B8ns: function (e, t, n) { "use strict"; (function (e) { n.d(t, "a", function () { return u }); var i = n("fXoL"), r = n("8LU1"), o = n("Zss7"), a = n("ofXK"), s = n("znSr"), l = function (e, t) { return { width: e, height: t } }, c = o, u = function () { function t(e) { this.elementRef = e } return Object.defineProperty(t.prototype, "enabled", { get: function () { return this.enabledValue }, set: function (e) { this.enabledValue = Object(r.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), t.prototype.ngOnInit = function () { this.offOpacity = this.offOpacity || .4, this.glowColor = c(this.colorOn).lighten().toHexString() }, t.prototype.ngAfterViewInit = function () { this.update() }, t.prototype.ngOnChanges = function (e) { for (var t = 0, n = Object.keys(e); t < n.length; t++) { var i = n[t], r = e[i]; r.firstChange || r.currentValue === r.previousValue || ("enabled" === i && this.circleElement ? this.draw() : "size" === i && this.update()) } }, t.prototype.update = function () { var t = this; this.size = this.size || 50, this.canvasSize = this.size, this.radius = this.canvasSize / 4, this.glowSize = this.radius / 5, this.paper && this.paper.remove(), n.e(55).then(n.t.bind(null, "RS8Z", 7)).then(function (n) { t.paper = n.default(e("#canvas_container", t.elementRef.nativeElement)[0], t.canvasSize, t.canvasSize); var i = t.canvasSize / 2; t.circleElement = t.paper.circle(i, i, t.radius), t.draw() }) }, t.prototype.draw = function () { this.enabled ? (this.circleElement.attr("fill", this.colorOn), this.circleElement.attr("stroke", this.colorOn), this.circleElement.attr("opacity", 1), this.circleElement.theGlow && this.circleElement.theGlow.remove(), this.circleElement.theGlow = this.circleElement.glow({ color: this.glowColor, width: this.radius + this.glowSize, opacity: .8, fill: !0 })) : (this.circleElement.theGlow && this.circleElement.theGlow.remove(), this.circleElement.attr("fill", this.colorOff), this.circleElement.attr("stroke", this.colorOff), this.circleElement.attr("opacity", this.offOpacity)) }, t.\u0275fac = function (e) { return new (e || t)(i["\u0275\u0275directiveInject"](i.ElementRef)) }, t.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: t, selectors: [["tb-led-light"]], inputs: { size: "size", colorOn: "colorOn", colorOff: "colorOff", offOpacity: "offOpacity", enabled: "enabled" }, features: [i["\u0275\u0275NgOnChangesFeature"]], decls: 1, vars: 4, consts: [["id", "canvas_container", 3, "ngStyle"]], template: function (e, t) { 1 & e && i["\u0275\u0275element"](0, "div", 0), 2 & e && i["\u0275\u0275property"]("ngStyle", i["\u0275\u0275pureFunction2"](1, l, t.size + "px", t.size + "px")) }, directives: [a.NgStyle, s.e], encapsulation: 2 }), t }(); 0, void 0 }).call(this, n("xexB")) }, Bjlt: function (e, t, n) { "use strict"; n.d(t, "a", function () { return s }); var i = n("fXoL"), r = n("Y8nr"), o = n("AytR"), a = n("tk/3"), s = function () { function e(e) { this.http = e } return e.prototype.saveRelation = function (e, t) { return this.http.post("/api/relation", e, Object(r.b)(t)) }, e.prototype.deleteRelation = function (e, t, n, i) { return this.http.delete("/api/relation?fromId=" + e.id + "&fromType=" + e.entityType + "&relationType=" + t + "&toId=" + n.id + "&toType=" + n.entityType, Object(r.b)(i)) }, e.prototype.deleteRelations = function (e, t) { return this.http.delete("/api/relations?entityId=" + e.id + "&entityType=" + e.entityType, Object(r.b)(t)) }, e.prototype.getRelation = function (e, t, n, i) { return this.http.get(o.a.integration_service + "/wrapperApis/relation?fromId=" + e.id + "&fromType=" + e.entityType + "&relationType=" + t + "&toId=" + n.id + "&toType=" + n.entityType, Object(r.b)(i)) }, e.prototype.findByFrom = function (e, t) { return this.http.get(o.a.integration_service + "/wrapperApis/relations?fromId=" + e.id + "&fromType=" + e.entityType, Object(r.b)(t)) }, e.prototype.findInfoByFrom = function (e, t) { return this.http.get(o.a.integration_service + "/wrapperApis/relations/info?fromId=" + e.id + "&fromType=" + e.entityType, Object(r.b)(t)) }, e.prototype.findByFromAndType = function (e, t, n) { return this.http.get(o.a.integration_service + "/wrapperApis/relations?fromId=" + e.id + "&fromType=" + e.entityType + "&relationType=" + t, Object(r.b)(n)) }, e.prototype.findByTo = function (e, t) { return this.http.get(o.a.integration_service + "/wrapperApis/relations?toId=" + e.id + "&toType=" + e.entityType, Object(r.b)(t)) }, e.prototype.findInfoByTo = function (e, t) { return this.http.get(o.a.integration_service + "/wrapperApis/relations/info?toId=" + e.id + "&toType=" + e.entityType, Object(r.b)(t)) }, e.prototype.findByToAndType = function (e, t, n) { return this.http.get(o.a.integration_service + "/wrapperApis/relations?toId=" + e.id + "&toType=" + e.entityType + "&relationType=" + t, Object(r.b)(n)) }, e.prototype.findByQuery = function (e, t) { return this.http.post("/api/relations", e, Object(r.b)(t)) }, e.prototype.findInfoByQuery = function (e, t) { return this.http.post("/api/relations/info", e, Object(r.b)(t)) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275inject"](a.HttpClient)) }, e.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, BnVf: function (e, t, n) { "use strict"; var i; n.d(t, "b", function () { return i }), n.d(t, "a", function () { return r }), function (e) { e.CHANGE_LANGUAGE = "[Settings] Change Language" }(i || (i = {})); var r = function (e) { this.payload = e, this.type = i.CHANGE_LANGUAGE } }, BsGH: function (e, t, n) { "use strict"; n.d(t, "a", function () { return p }); var i = n("fXoL"), r = n("Y8nr"), o = n("LRne"), a = n("cp0P"), s = n("3Tyt"), l = n("//Q6"), c = n("aX2P"), u = n("AytR"), d = n("tk/3"), p = function () { function e(e) { this.http = e } return e.prototype.getEntityAttributes = function (e, t, n, i) { var o = u.a.integration_service + "/wrapperApis/plugins/telemetry/" + e.entityType + "/" + e.id + "/values/attributes/" + t; return n && n.length && (o += "?keys=" + n.join(",")), this.http.get(o, Object(r.b)(i)) }, e.prototype.deleteEntityAttributes = function (e, t, n, i) { var o = n.map(function (e) { return encodeURI(e.key) }).join(","); return this.http.delete(u.a.integration_service + "/wrapperApis/plugins/telemetry/" + e.entityType + "/" + e.id + "/" + t + "?keys=" + o, Object(r.b)(i)) }, e.prototype.deleteEntityTimeseries = function (e, t, n, i, o, a) { void 0 === n && (n = !1); var s = t.map(function (e) { return encodeURI(e.key) }).join(","), c = "/api/plugins/telemetry/" + e.entityType + "/" + e.id + "/timeseries/delete?keys=" + s + "&deleteAllDataForKeys=" + n; return Object(l.o)(i) && (c += "&startTs=" + i), Object(l.o)(o) && (c += "&endTs=" + o), this.http.delete(c, Object(r.b)(a)) }, e.prototype.saveEntityAttributes = function (e, t, n, i) { var s, c, d = {}, p = []; return n.forEach(function (e) { Object(l.o)(e.value) ? d[e.key] = e.value : p.push(e) }), s = p.length ? this.deleteEntityAttributes(e, t, p, i) : Object(o.a)(null), c = Object.keys(d).length ? this.http.post(u.a.integration_service + "/wrapperApis/plugins/telemetry/" + e.entityType + "/" + e.id + "/" + t, d, Object(r.b)(i)) : Object(o.a)(null), Object(a.a)([c, s]) }, e.prototype.saveEntityTimeseries = function (e, t, n, i) { var s, c, u = {}, d = []; return n.forEach(function (e) { Object(l.o)(e.value) ? u[e.key] = e.value : d.push(e) }), s = d.length ? this.deleteEntityTimeseries(e, d, !0, null, null, i) : Object(o.a)(null), c = Object.keys(u).length ? this.http.post("/api/plugins/telemetry/" + e.entityType + "/" + e.id + "/timeseries/" + t, u, Object(r.b)(i)) : Object(o.a)(null), Object(a.a)([c, s]) }, e.prototype.getEntityTimeseries = function (e, t, n, i, o, a, u, d, p, m) { void 0 === o && (o = 100), void 0 === a && (a = c.a.NONE), void 0 === d && (d = s.i.DESC), void 0 === p && (p = !1); var f = "/api/plugins/telemetry/" + e.entityType + "/" + e.id + "/values/timeseries?keys=" + t.join(",") + "&startTs=" + n + "&endTs=" + i; return Object(l.o)(o) && (f += "&limit=" + o), Object(l.o)(a) && (f += "&agg=" + a), Object(l.o)(u) && (f += "&interval=" + u), Object(l.o)(d) && (f += "&orderBy=" + d), Object(l.o)(p) && (f += "&useStrictDataTypes=" + p), this.http.get(f, Object(r.b)(m)) }, e.prototype.getEntityTimeseriesLatest = function (e, t, n, i) { void 0 === n && (n = !1); var o = "/api/plugins/telemetry/" + e.entityType + "/" + e.id + "/values/timeseries?useStrictDataTypes=" + n; return Object(l.o)(t) && t.length && (o += "&keys=" + t.join(",")), this.http.get(o, Object(r.b)(i)) }, e.prototype.getAttributesByEntityType = function (e) { return this.http.get("/attributes?entityType=" + e) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275inject"](d.HttpClient)) }, e.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, "C/rb": function (e, t, n) { "use strict"; n.d(t, "c", function () { return a }), n.d(t, "e", function () { return s }), n.d(t, "f", function () { return l }), n.d(t, "d", function () { return c }), n.d(t, "g", function () { return u }), n.d(t, "a", function () { return d }), n.d(t, "b", function () { return p }); var i = n("l7P3"), r = n("IzEk"), o = Object(i.createFeatureSelector)("auth"), a = Object(i.createSelector)(o, function (e) { return e }), s = Object(i.createSelector)(o, function (e) { return e.isAuthenticated }), l = Object(i.createSelector)(o, function (e) { return e.isUserLoaded }), c = Object(i.createSelector)(o, function (e) { return e.authUser }), u = Object(i.createSelector)(o, function (e) { return e.userDetails }); Object(i.createSelector)(o, function (e) { return e.userTokenAccessEnabled }); function d(e) { var t; return e.pipe(Object(i.select)(a), Object(r.a)(1)).subscribe(function (e) { return t = e }), t } function p(e) { var t; return e.pipe(Object(i.select)(c), Object(r.a)(1)).subscribe(function (e) { return t = e }), t } }, C4fA: function (e, t, n) { "use strict"; n.d(t, "a", function () { return b }); var i = n("mrSG"), r = n("fXoL"), o = n("Y8nr"), a = n("LRne"), s = n("cp0P"), l = n("8km5"), c = n("9n8L"), u = n("OCOE"), d = n("5+tZ"), p = n("lJxs"), m = n("JIr8"), f = n("U3y+"), h = n("//Q6"), g = n("tk/3"), y = n("sYmb"), b = function () { function e(e, t, n, i) { this.http = e, this.componentDescriptorService = t, this.resourcesService = n, this.translate = i, this.ruleNodeComponentsMap = new Map, this.ruleNodeConfigFactories = {} } return e.prototype.getRuleChains = function (e, t, n) { return void 0 === t && (t = l.a.CORE), this.http.get("/api/ruleChains" + e.toQuery() + "&type=" + t, Object(o.b)(n)) }, e.prototype.getRuleChain = function (e, t) { return this.http.get("/api/ruleChain/" + e, Object(o.b)(t)) }, e.prototype.createDefaultRuleChain = function (e, t) { return this.http.post("/api/ruleChain/device/default", { name: e }, Object(o.b)(t)) }, e.prototype.saveRuleChain = function (e, t) { return this.http.post("/api/ruleChain", e, Object(o.b)(t)) }, e.prototype.deleteRuleChain = function (e, t) { return this.http.delete("/api/ruleChain/" + e, Object(o.b)(t)) }, e.prototype.setRootRuleChain = function (e, t) { return this.http.post("/api/ruleChain/" + e + "/root", null, Object(o.b)(t)) }, e.prototype.getRuleChainMetadata = function (e, t) { return this.http.get("/api/ruleChain/" + e + "/metadata", Object(o.b)(t)) }, e.prototype.getResolvedRuleChainMetadata = function (e, t) { var n = this; return this.getRuleChainMetadata(e, t).pipe(Object(d.b)(function (e) { return n.resolveRuleChainMetadata(e) })) }, e.prototype.saveRuleChainMetadata = function (e, t) { return this.http.post("/api/ruleChain/metadata", e, Object(o.b)(t)) }, e.prototype.saveAndGetResolvedRuleChainMetadata = function (e, t) { var n = this; return this.saveRuleChainMetadata(e, t).pipe(Object(d.b)(function (e) { return n.resolveRuleChainMetadata(e) })) }, e.prototype.resolveRuleChainMetadata = function (e) { return this.resolveTargetRuleChains(e.ruleChainConnections).pipe(Object(p.a)(function (t) { return Object(i.a)(Object(i.a)({}, e), { targetRuleChainsMap: t }) })) }, e.prototype.getRuleNodeComponents = function (e, t, n) { var i = this; return this.ruleNodeComponentsMap.get(t) ? Object(a.a)(this.ruleNodeComponentsMap.get(t)) : this.loadRuleNodeComponents(t, n).pipe(Object(d.b)(function (n) { return i.resolveRuleNodeComponentsUiResources(n, e).pipe(Object(p.a)(function (e) { return i.ruleNodeComponentsMap.set(t, e), i.ruleNodeComponentsMap.get(t).push(l.c), i.ruleNodeComponentsMap.get(t).sort(function (e, t) { var n = e.type.toString().localeCompare(t.type.toString()); return 0 === n && (n = e.name.localeCompare(t.name)), n }), i.ruleNodeComponentsMap.get(t) })) })) }, e.prototype.getRuleNodeConfigFactory = function (e) { return this.ruleNodeConfigFactories[e] }, e.prototype.getRuleNodeComponentByClazz = function (e, t) { void 0 === e && (e = l.a.CORE); var n = this.ruleNodeComponentsMap.get(e).filter(function (e) { return e.clazz === t }); if (n && n.length) return n[0]; var i = Object(h.e)(l.e); return i.clazz = t, i.configurationDescriptor.nodeDefinition.details = "Unknown Rule Node class: " + t, i }, e.prototype.getRuleNodeSupportedLinks = function (e) { var t = e.configurationDescriptor.nodeDefinition.relationTypes, n = {}; return t.forEach(function (e) { n[e] = { name: e, value: e } }), n }, e.prototype.ruleNodeAllowCustomLinks = function (e) { return e.configurationDescriptor.nodeDefinition.customRelations }, e.prototype.getLatestRuleNodeDebugInput = function (e, t) { return this.http.get("/api/ruleNode/" + e + "/debugIn", Object(o.b)(t)) }, e.prototype.testScript = function (e, t) { return this.http.post("/api/ruleChain/testScript", e, Object(o.b)(t)) }, e.prototype.resolveTargetRuleChains = function (e) { var t = this; if (e && e.length) { var n = []; return e.forEach(function (e) { n.push(t.resolveRuleChain(e.targetRuleChainId.id)) }), Object(s.a)(n).pipe(Object(p.a)(function (e) { var t = {}; return e.forEach(function (e) { t[e.id.id] = e }), t })) } return Object(a.a)({}) }, e.prototype.loadRuleNodeComponents = function (e, t) { return this.componentDescriptorService.getComponentDescriptorsByTypes(l.d, e, t).pipe(Object(p.a)(function (e) { var t = []; return e.forEach(function (e) { t.push(e) }), t })) }, e.prototype.resolveRuleNodeComponentsUiResources = function (e, t) { var n = this, i = []; return e.forEach(function (e) { i.push(n.resolveRuleNodeComponentUiResources(e, t)) }), Object(s.a)(i).pipe(Object(m.a)(function (t) { return Object(a.a)(e) })) }, e.prototype.resolveRuleNodeComponentUiResources = function (e, t) { var n = this, i = e.configurationDescriptor.nodeDefinition, r = i.uiResources; if (r && r.length) { var o = r.filter(function (e) { return !e.endsWith(".js") }), l = r.find(function (e) { return e.endsWith(".js") }), c = []; return o && o.length && o.forEach(function (e) { c.push(n.resourcesService.loadResource(e)) }), l && c.push(this.resourcesService.loadFactories(l, t).pipe(Object(p.a)(function (t) { if (i.configDirective && i.configDirective.length) { var r = Object(h.L)(i.configDirective, "-"), o = t.find(function (e) { return e.selector === r }); o ? n.ruleNodeConfigFactories[i.configDirective] = o : e.configurationDescriptor.nodeDefinition.uiResourceLoadError = n.translate.instant("rulenode.directive-is-not-loaded", { directiveName: i.configDirective }) } return Object(a.a)(e) }))), Object(s.a)(c).pipe(Object(p.a)(function (t) { return e }), Object(m.a)(function () { return e.configurationDescriptor.nodeDefinition.uiResourceLoadError = n.translate.instant("rulenode.ui-resources-load-error"), Object(a.a)(e) })) } return Object(a.a)(e) }, e.prototype.resolveRuleChain = function (e) { return this.getRuleChain(e, { ignoreErrors: !0 }).pipe(Object(p.a)(function (e) { return e }), Object(m.a)(function (t) { var n = { id: { entityType: f.b.RULE_CHAIN, id: e } }; return Object(a.a)(n) })) }, e.prototype.getEdgeRuleChains = function (e, t, n) { return this.http.get("/api/edge/" + e + "/ruleChains" + t.toQuery(), Object(o.b)(n)) }, e.prototype.assignRuleChainToEdge = function (e, t, n) { return this.http.post("/api/edge/" + e + "/ruleChain/" + t, null, Object(o.b)(n)) }, e.prototype.unassignRuleChainFromEdge = function (e, t, n) { return this.http.delete("/api/edge/" + e + "/ruleChain/" + t, Object(o.b)(n)) }, e.prototype.setEdgeTemplateRootRuleChain = function (e, t) { return this.http.post("/api/ruleChain/" + e + "/edgeTemplateRoot", Object(o.b)(t)) }, e.prototype.setAutoAssignToEdgeRuleChain = function (e, t) { return this.http.post("/api/ruleChain/" + e + "/autoAssignToEdge", Object(o.b)(t)) }, e.prototype.unsetAutoAssignToEdgeRuleChain = function (e, t) { return this.http.delete("/api/ruleChain/" + e + "/autoAssignToEdge", Object(o.b)(t)) }, e.prototype.getAutoAssignToEdgeRuleChains = function (e) { return this.http.get("/api/ruleChain/autoAssignToEdgeRuleChains", Object(o.b)(e)) }, e.prototype.setEdgeRootRuleChain = function (e, t, n) { return this.http.post("/api/edge/" + e + "/" + t + "/root", Object(o.b)(n)) }, e.\u0275fac = function (t) { return new (t || e)(r["\u0275\u0275inject"](g.HttpClient), r["\u0275\u0275inject"](c.a), r["\u0275\u0275inject"](u.a), r["\u0275\u0275inject"](y.TranslateService)) }, e.\u0275prov = r["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, C60G: function (e, t, n) { "use strict"; n.d(t, "a", function () { return r }); var i = n("mrSG"), r = function (e) { function t(t, n) { var i = e.call(this, { fromObject: n }) || this; return i.interceptorConfig = t, i } return Object(i.d)(t, e), t }(n("tk/3").HttpParams) }, DaoB: function (e, t, n) { "use strict"; n.d(t, "a", function () { return c }); var i = n("fXoL"), r = n("Y8nr"), o = n("XNiG"), a = n("jtHE"), s = n("Vurf"), l = n("tk/3"), c = function () { function e(e) { this.http = e, this._listners = new o.b } return e.prototype.getTenantDeviceInfos = function (e, t, n) { void 0 === t && (t = ""); return console.log("query"), this.http.get("/api/tenant/deviceInfos" + e.toQuery() + "&type=" + t, Object(r.b)(n)) }, e.prototype.getTenantDeviceInfosByDeviceProfileId = function (e, t, n) { void 0 === t && (t = ""), console.log("pageLink: ", e); return console.log("/api/tenant/deviceInfos?pageSize=10&page=0&deviceProfileId=" + t), this.http.get("/api/tenant/deviceInfos" + e.toQuery() + "&deviceProfileId=" + t, Object(r.b)(n)) }, e.prototype.getCustomerDeviceInfos = function (e, t, n, i) { return void 0 === n && (n = ""), this.http.get("/api/customer/" + e + "/deviceInfos" + t.toQuery() + "&type=" + n, Object(r.b)(i)) }, e.prototype.getCustomerDeviceInfosByDeviceProfileId = function (e, t, n, i) { return void 0 === n && (n = ""), this.http.get("/api/customer/" + e + "/deviceInfos" + t.toQuery() + "&deviceProfileId=" + n, Object(r.b)(i)) }, e.prototype.getDevice = function (e, t) { return this.http.get("/api/device/" + e, Object(r.b)(t)) }, e.prototype.getDevices = function (e, t) { return this.http.get("/api/devices?deviceIds=" + e.join(","), Object(r.b)(t)) }, e.prototype.getDeviceInfo = function (e, t) { return this.http.get("/api/device/info/" + e, Object(r.b)(t)) }, e.prototype.saveDevice = function (e, t) { return this.http.post("/api/device", e, Object(r.b)(t)) }, e.prototype.deleteDevice = function (e, t) { return this.http.delete("/api/device/" + e, Object(r.b)(t)) }, e.prototype.getDeviceTypes = function (e) { return this.http.get("/api/device/types", Object(r.b)(e)) }, e.prototype.getDeviceCredentials = function (e, t, n) { void 0 === t && (t = !1); var i = "/api/device/" + e + "/credentials"; if (t) { var o = new a.a, l = new XMLHttpRequest; l.open("GET", i, !1), l.setRequestHeader("Accept", "application/json, text/plain, */*"); var c = s.a.getJwtToken(); if (c && l.setRequestHeader("X-Authorization", "Bearer " + c), l.send(null), 200 === l.status) { var u = JSON.parse(l.responseText); o.next(u) } else o.error(null); return o.asObservable() } return this.http.get(i, Object(r.b)(n)) }, e.prototype.saveDeviceCredentials = function (e, t) { return this.http.post("/api/device/credentials", e, Object(r.b)(t)) }, e.prototype.makeDevicePublic = function (e, t) { return this.http.post("/api/customer/public/device/" + e, null, Object(r.b)(t)) }, e.prototype.assignDeviceToCustomer = function (e, t, n) { return this.http.post("/api/customer/" + e + "/device/" + t, null, Object(r.b)(n)) }, e.prototype.unassignDeviceFromCustomer = function (e, t) { return this.http.delete("/api/customer/device/" + e, Object(r.b)(t)) }, e.prototype.sendOneWayRpcCommand = function (e, t, n) { return this.http.post("/api/rpc/oneway/" + e, t, Object(r.b)(n)) }, e.prototype.sendTwoWayRpcCommand = function (e, t, n) { return this.http.post("/api/rpc/twoway/" + e, t, Object(r.b)(n)) }, e.prototype.getPersistedRpc = function (e, t, n) { return void 0 === t && (t = !1), this.http.get("/api/rpc/persistent/" + e, Object(r.b)(n)) }, e.prototype.findByQuery = function (e, t) { return this.http.post("/api/devices", e, Object(r.b)(t)) }, e.prototype.findByName = function (e, t) { return this.http.get("/api/tenant/devices?deviceName=" + e, Object(r.b)(t)) }, e.prototype.claimDevice = function (e, t, n) { return this.http.post("/api/customer/device/" + e + "/claim", t, Object(r.b)(n)) }, e.prototype.unclaimDevice = function (e, t) { return this.http.delete("/api/customer/device/" + e + "/claim", Object(r.b)(t)) }, e.prototype.assignDeviceToEdge = function (e, t, n) { return this.http.post("/api/edge/" + e + "/device/" + t, Object(r.b)(n)) }, e.prototype.unassignDeviceFromEdge = function (e, t, n) { return this.http.delete("/api/edge/" + e + "/device/" + t, Object(r.b)(n)) }, e.prototype.getEdgeDevices = function (e, t, n, i) { return void 0 === n && (n = ""), this.http.get("/api/edge/" + e + "/devices" + t.toQuery() + "&type=" + n, Object(r.b)(i)) }, e.prototype.listen = function () { return this._listners.asObservable() }, e.prototype.filter = function (e) { this._listners.next(e) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275inject"](l.HttpClient)) }, e.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, Dnot: function (e, t, n) { "use strict"; n.d(t, "a", function () { return h }); var i = n("fXoL"), r = n("Y8nr"), o = n("LRne"), a = n("cp0P"), s = n("2OQP"), l = n("lJxs"), c = n("5+tZ"), u = n("JIr8"), d = n("//Q6"), p = n("S+vS"), m = n("tk/3"), f = n("sYmb"), h = function () { function e(e, t, n) { this.http = e, this.translate = t, this.dialogService = n } return e.prototype.getOtaPackages = function (e, t) { return this.http.get("/api/otaPackages" + e.toQuery(), Object(r.b)(t)) }, e.prototype.getOtaPackagesInfoByDeviceProfileId = function (e, t, n, i) { var o = "/api/otaPackages/" + t + "/" + n + e.toQuery(); return this.http.get(o, Object(r.b)(i)) }, e.prototype.getOtaPackage = function (e, t) { return this.http.get("/api/otaPackages/" + e, Object(r.b)(t)) }, e.prototype.getOtaPackageInfo = function (e, t) { return this.http.get("/api/otaPackage/info/" + e, Object(r.b)(t)) }, e.prototype.downloadOtaPackage = function (e) { return this.http.get("/api/otaPackage/" + e + "/download", { responseType: "arraybuffer", observe: "response" }).pipe(Object(l.a)(function (e) { var t = e.headers, n = t.get("x-filename"), i = t.get("content-type"), r = document.createElement("a"); try { var o = new Blob([e.body], { type: i }), a = URL.createObjectURL(o); r.setAttribute("href", a), r.setAttribute("download", n); var s = new MouseEvent("click", { view: window, bubbles: !0, cancelable: !1 }); return r.dispatchEvent(s), null } catch (l) { throw l } })) }, e.prototype.saveOtaPackage = function (e, t) { var n = this; if (!e.file) return this.saveOtaPackageInfo(e, t); var i = Object(d.e)(e); return delete i.file, delete i.checksum, delete i.checksumAlgorithm, this.saveOtaPackageInfo(i, t).pipe(Object(c.b)(function (t) { return n.uploadOtaPackageFile(t.id.id, e.file, e.checksumAlgorithm, e.checksum).pipe(Object(u.a)(function () { return n.deleteOtaPackage(t.id.id) })) })) }, e.prototype.saveOtaPackageInfo = function (e, t) { return this.http.post("/api/otaPackage", e, Object(r.b)(t)) }, e.prototype.uploadOtaPackageFile = function (e, t, n, i, o) { o || (o = {}); var a = new FormData; a.append("file", t); var s = "/api/otaPackage/" + e + "?checksumAlgorithm=" + n; return i && (s += "&checksum=" + i), this.http.post(s, a, Object(r.c)(o.ignoreLoading, o.ignoreErrors, o.resendRequest)) }, e.prototype.deleteOtaPackage = function (e, t) { return this.http.delete("/api/otaPackage/" + e, Object(r.b)(t)) }, e.prototype.countUpdateDeviceAfterChangePackage = function (e, t, n) { return this.http.get("/api/devices/count/" + e + "/" + t.id, Object(r.b)(n)) }, e.prototype.confirmDialogUpdatePackage = function (e, t) { var n, i, r, l, u, d, p = this, m = []; return (null === (n = null == t ? void 0 : t.id) || void 0 === n ? void 0 : n.id) && (null === (i = t.firmwareId) || void 0 === i ? void 0 : i.id) !== (null === (r = e.firmwareId) || void 0 === r ? void 0 : r.id) ? m.push(this.countUpdateDeviceAfterChangePackage(s.d.FIRMWARE, e.id)) : m.push(Object(o.a)(0)), (null === (l = null == t ? void 0 : t.id) || void 0 === l ? void 0 : l.id) && (null === (u = t.softwareId) || void 0 === u ? void 0 : u.id) !== (null === (d = e.softwareId) || void 0 === d ? void 0 : d.id) ? m.push(this.countUpdateDeviceAfterChangePackage(s.d.SOFTWARE, e.id)) : m.push(Object(o.a)(0)), Object(a.a)(m).pipe(Object(c.b)(function (e) { var t = e[0], n = e[1], i = ""; return t > 0 && (i += p.translate.instant("ota-update.change-firmware", { count: t })), n > 0 && (i += i.length ? " " : "", i += p.translate.instant("ota-update.change-software", { count: n })), "" !== i ? p.dialogService.confirm("", i, null, p.translate.instant("common.proceed")) : Object(o.a)(!0) })) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275inject"](m.HttpClient), i["\u0275\u0275inject"](f.TranslateService), i["\u0275\u0275inject"](p.a)) }, e.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, Duvn: function (e, t, n) { "use strict"; function i() { return { data: [], totalPages: 0, totalElements: 0, hasNext: !1 } } n.d(t, "a", function () { return i }) }, E9wx: function (e, t, n) { "use strict"; n.d(t, "a", function () { return j }); var i = n("mrSG"), r = n("fXoL"), o = n("3Pt+"), a = n("8LU1"), s = n("xKAQ"), l = n("he9t"), c = n("nhHW"), u = n("//Q6"), d = n("HR/i"), p = n("jCow"), m = n("Uj2l"), f = n("l7P3"), h = n("8m5z"), g = n("XiUz"), y = n("ofXK"), b = n("znSr"), v = n("Qu3c"), E = n("bTqV"), T = n("NFeN"), S = n("rezs"), C = n("sYmb"), O = ["jsonEditor"]; function w(e, t) { if (1 & e) { var n = r["\u0275\u0275getCurrentView"](); r["\u0275\u0275elementStart"](0, "button", 12), r["\u0275\u0275listener"]("click", function () { return r["\u0275\u0275restoreView"](n), r["\u0275\u0275nextContext"]().beautifyJSON() }), r["\u0275\u0275text"](1), r["\u0275\u0275pipe"](2, "translate"), r["\u0275\u0275elementEnd"]() } 2 & e && (r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](2, 1, "js-func.tidy"), " ")) } function I(e, t) { if (1 & e) { var n = r["\u0275\u0275getCurrentView"](); r["\u0275\u0275elementStart"](0, "button", 12), r["\u0275\u0275listener"]("click", function () { return r["\u0275\u0275restoreView"](n), r["\u0275\u0275nextContext"]().minifyJSON() }), r["\u0275\u0275text"](1), r["\u0275\u0275pipe"](2, "translate"), r["\u0275\u0275elementEnd"]() } 2 & e && (r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](2, 1, "js-func.mini"), " ")) } var x = function (e) { return { "fill-height": e } }, M = function (e) { return { "tb-error": e } }, j = function () { function e(e, t, n) { this.elementRef = e, this.store = t, this.raf = n, this.ignoreChange = !1, this.toastTargetId = "jsonContentEditor-" + Object(u.k)(), this.fullscreen = !1, this.errorShowed = !1, this.propagateChange = null } return Object.defineProperty(e.prototype, "readonly", { get: function () { return this.readonlyValue }, set: function (e) { this.readonlyValue = Object(a.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "validateContent", { get: function () { return this.validateContentValue }, set: function (e) { this.validateContentValue = Object(a.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "validateOnChange", { get: function () { return this.validateOnChangeValue }, set: function (e) { this.validateOnChangeValue = Object(a.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), e.prototype.ngOnInit = function () { var e = this, t = this.jsonEditorElmRef.nativeElement, n = "text"; this.contentType && (n = l.i.get(this.contentType).code); var r = { mode: "ace/mode/" + n, showGutter: !0, showPrintMargin: !1, readOnly: this.disabled || this.readonly }; r = Object(i.a)(Object(i.a)({}, r), { enableSnippets: !0, enableBasicAutocompletion: !0, enableLiveAutocompletion: !0 }), Object(p.b)().subscribe(function (n) { e.jsonEditor = n.edit(t, r), e.jsonEditor.session.setUseWrapMode(!0), e.jsonEditor.setValue(e.contentBody ? e.contentBody : "", -1), e.jsonEditor.setReadOnly(e.disabled || e.readonly), e.jsonEditor.on("change", function () { e.ignoreChange || (e.cleanupJsonErrors(), e.updateView()) }), e.jsonEditor.on("blur", function () { e.contentValid = !e.validateContent || e.doValidate(!0) }), e.editorResize$ = new d.a(function () { e.onAceEditorResize() }), e.editorResize$.observe(t) }) }, e.prototype.ngOnDestroy = function () { this.editorResize$ && this.editorResize$.disconnect() }, e.prototype.onAceEditorResize = function () { var e = this; this.editorsResizeCaf && (this.editorsResizeCaf(), this.editorsResizeCaf = null), this.editorsResizeCaf = this.raf.raf(function () { e.jsonEditor.resize(), e.jsonEditor.renderer.updateFull() }) }, e.prototype.ngOnChanges = function (e) { for (var t = 0, n = Object.keys(e); t < n.length; t++) { var i = n[t], r = e[i]; if (!r.firstChange && r.currentValue !== r.previousValue && "contentType" === i && this.jsonEditor) { var o = "text"; this.contentType && (o = l.i.get(this.contentType).code), this.jsonEditor.session.setMode("ace/mode/" + o) } } }, e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.setDisabledState = function (e) { this.disabled = e, this.jsonEditor && this.jsonEditor.setReadOnly(this.disabled || this.readonly) }, e.prototype.validate = function (e) { return this.contentValid ? null : { contentBody: { valid: !1 } } }, e.prototype.validateOnSubmit = function () { this.disabled || this.readonly || (this.cleanupJsonErrors(), this.contentValid = !0, this.propagateChange(this.contentBody), this.contentValid = this.doValidate(!0), this.propagateChange(this.contentBody)) }, e.prototype.doValidate = function (e) { void 0 === e && (e = !1); try { return this.validateContent && this.contentType === l.b.JSON && JSON.parse(this.contentBody), !0 } catch (n) { if (e) { var t = "Error:"; n.name && (t += " " + n.name + ":"), n.message && (t += " " + n.message), this.store.dispatch(new s.b({ message: t, type: "error", target: this.toastTargetId, verticalPosition: "bottom", horizontalPosition: "left" })), this.errorShowed = !0 } return !1 } }, e.prototype.cleanupJsonErrors = function () { this.errorShowed && (this.store.dispatch(new s.a({ target: this.toastTargetId })), this.errorShowed = !1) }, e.prototype.writeValue = function (e) { this.contentBody = e, this.contentValid = !0, this.jsonEditor && (this.ignoreChange = !0, this.jsonEditor.setValue(this.contentBody ? this.contentBody : "", -1), this.ignoreChange = !1) }, e.prototype.updateView = function () { var e = this.jsonEditor.getValue(); this.contentBody !== e && (this.contentBody = e, this.contentValid = !this.validateOnChange || this.doValidate(), this.propagateChange(this.contentBody)) }, e.prototype.beautifyJSON = function () { var e = this; Object(m.c)(this.contentBody, { indent_size: 4, wrap_line_length: 60 }).subscribe(function (t) { e.jsonEditor.setValue(t || "", -1), e.updateView() }) }, e.prototype.minifyJSON = function () { var e = JSON.stringify(this.contentBody); this.jsonEditor.setValue(e || "", -1), this.updateView() }, e.prototype.onFullscreen = function () { var e = this; this.jsonEditor && setTimeout(function () { e.jsonEditor.resize() }, 0) }, e.\u0275fac = function (t) { return new (t || e)(r["\u0275\u0275directiveInject"](r.ElementRef), r["\u0275\u0275directiveInject"](f.Store), r["\u0275\u0275directiveInject"](c.a)) }, e.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-json-content"]], viewQuery: function (e, t) { if (1 & e && r["\u0275\u0275viewQuery"](O, 3), 2 & e) { var n; r["\u0275\u0275queryRefresh"](n = r["\u0275\u0275loadQuery"]()) && (t.jsonEditorElmRef = n.first) } }, inputs: { label: "label", contentType: "contentType", disabled: "disabled", fillHeight: "fillHeight", editorStyle: "editorStyle", readonly: "readonly", validateContent: "validateContent", validateOnChange: "validateOnChange" }, features: [r["\u0275\u0275ProvidersFeature"]([{ provide: o.NG_VALUE_ACCESSOR, useExisting: Object(r.forwardRef)(function () { return e }), multi: !0 }, { provide: o.NG_VALIDATORS, useExisting: Object(r.forwardRef)(function () { return e }), multi: !0 }]), r["\u0275\u0275NgOnChangesFeature"]], decls: 16, vars: 19, consts: [["tb-fullscreen", "", "fxLayout", "column", 2, "background", "#fff", 3, "ngClass", "fullscreen", "fullscreenChanged"], ["fxLayout", "row", "fxLayoutAlign", "start center", 1, "tb-json-content-toolbar", 2, "height", "40px"], [1, "tb-title", "no-padding", 3, "ngClass"], ["fxFlex", ""], ["type", "button", "mat-button", "", "class", "tidy", 3, "click", 4, "ngIf"], [2, "width", "initial"], ["matTooltipPosition", "above", 2, "border-radius", "50%", 3, "matTooltip", "click"], ["type", "button", "mat-button", "", "mat-icon-button", "", 1, "tb-mat-32"], [1, "material-icons"], ["id", "tb-json-panel", "tb-toast", "", "fxLayout", "column", 1, "tb-json-content-panel", 3, "toastTarget"], ["id", "tb-json-input", 3, "ngStyle", "ngClass"], ["jsonEditor", ""], ["type", "button", "mat-button", "", 1, "tidy", 3, "click"]], template: function (e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "div", 0), r["\u0275\u0275listener"]("fullscreenChanged", function () { return t.onFullscreen() }), r["\u0275\u0275elementStart"](1, "div", 1), r["\u0275\u0275elementStart"](2, "label", 2), r["\u0275\u0275text"](3), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](4, "span", 3), r["\u0275\u0275template"](5, w, 3, 3, "button", 4), r["\u0275\u0275template"](6, I, 3, 3, "button", 4), r["\u0275\u0275elementStart"](7, "fieldset", 5), r["\u0275\u0275elementStart"](8, "div", 6), r["\u0275\u0275listener"]("click", function () { return t.fullscreen = !t.fullscreen }), r["\u0275\u0275pipe"](9, "translate"), r["\u0275\u0275elementStart"](10, "button", 7), r["\u0275\u0275elementStart"](11, "mat-icon", 8), r["\u0275\u0275text"](12), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](13, "div", 9), r["\u0275\u0275element"](14, "div", 10, 11), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]()), 2 & e && (r["\u0275\u0275property"]("ngClass", r["\u0275\u0275pureFunction1"](13, x, t.fillHeight))("fullscreen", t.fullscreen), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngClass", r["\u0275\u0275pureFunction1"](15, M, !t.contentValid)), r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate"](t.label), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngIf", !t.readonly && !t.disabled), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", !t.readonly && !t.disabled), r["\u0275\u0275advance"](2), r["\u0275\u0275propertyInterpolate"]("matTooltip", r["\u0275\u0275pipeBind1"](9, 11, t.fullscreen ? "fullscreen.exit" : "fullscreen.expand")), r["\u0275\u0275advance"](4), r["\u0275\u0275textInterpolate"](t.fullscreen ? "fullscreen_exit" : "fullscreen"), r["\u0275\u0275advance"](1), r["\u0275\u0275propertyInterpolate"]("toastTarget", t.toastTargetId), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngStyle", t.editorStyle)("ngClass", r["\u0275\u0275pureFunction1"](17, x, t.fillHeight))) }, directives: [h.a, g.f, y.NgClass, b.b, g.e, g.b, y.NgIf, v.MatTooltip, E.MatButton, T.MatIcon, S.b, y.NgStyle, b.e], pipes: [C.TranslatePipe], styles: ["[_nghost-%COMP%]{position:relative}[_nghost-%COMP%]   .fill-height[_ngcontent-%COMP%]{height:100%}.tb-json-content-toolbar[_ngcontent-%COMP%]   button.mat-button[_ngcontent-%COMP%], .tb-json-content-toolbar[_ngcontent-%COMP%]   button.mat-icon-button[_ngcontent-%COMP%], .tb-json-content-toolbar[_ngcontent-%COMP%]   button.mat-icon-button.tb-mat-32[_ngcontent-%COMP%]{align-items:center;vertical-align:middle;min-width:32px;min-height:15px;padding:4px;margin:0;font-size:.8rem;line-height:15px;color:#7b7b7b;background:hsla(0,0%,86%,.35)}.tb-json-content-toolbar[_ngcontent-%COMP%]   button.mat-button[_ngcontent-%COMP%]:not(:last-child), .tb-json-content-toolbar[_ngcontent-%COMP%]   button.mat-icon-button.tb-mat-32[_ngcontent-%COMP%]:not(:last-child), .tb-json-content-toolbar[_ngcontent-%COMP%]   button.mat-icon-button[_ngcontent-%COMP%]:not(:last-child){margin-right:4px}.tb-json-content-panel[_ngcontent-%COMP%]{height:100%;margin-left:15px;border:1px solid silver}.tb-json-content-panel[_ngcontent-%COMP%]   #tb-json-input[_ngcontent-%COMP%]{width:100%;min-width:200px;height:100%}.tb-json-content-panel[_ngcontent-%COMP%]   #tb-json-input[_ngcontent-%COMP%]:not(.fill-height){min-height:200px}"] }), e }(); 0, void 0 }, EP1h: function (e, t, n) { "use strict"; n.d(t, "a", function () { return r }); var i = n("fXoL"), r = function () { function e() { } return e.loadInitialState = function () { return Object.keys(localStorage).reduce(function (e, t) { if (t.includes("TB-")) { var n = t.replace("TB-", "").toLowerCase().split(".").map(function (e) { return e.split("-").map(function (e, t) { return 0 === t ? e : e.charAt(0).toUpperCase() + e.slice(1) }).join("") }), i = e; n.forEach(function (e, r) { if (r === n.length - 1) return i[e] = JSON.parse(localStorage.getItem(t)), void 0; i[e] = i[e] || {}, i = i[e] }) } return e }, {}) }, e.prototype.setItem = function (e, t) { localStorage.setItem("TB-" + e, JSON.stringify(t)) }, e.prototype.getItem = function (e) { return JSON.parse(localStorage.getItem("TB-" + e)) }, e.prototype.removeItem = function (e) { localStorage.removeItem("TB-" + e) }, e.prototype.testLocalStorage = function () { var e; if (this.setItem("testKey", "testValue"), e = this.getItem("testKey"), this.removeItem("testKey"), "testValue" !== e) throw new Error("localStorage did not return expected value") }, e.\u0275fac = function (t) { return new (t || e) }, e.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, EbnC: function (e, t, n) { "use strict"; n.d(t, "a", function () { return o }); var i = n("fXoL"), r = n("wtyh"), o = function () { function e(e) { this.window = e } return e.prototype.transform = function (e) { if (e) { var t = e.split("-"), n = /Mac OS X/.test(this.window.navigator.userAgent), i = !n || t.length > 2 ? "+" : "", r = { M: n ? "\u2318" : "Ctrl", A: n ? "Option" : "Alt", S: "Shift" }; return t.map(function (e, n) { return n === t.length - 1 ? e : r[e] }).join(i) } }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](r.b)) }, e.\u0275pipe = i["\u0275\u0275definePipe"]({ name: "keyboardShortcut", type: e, pure: !0 }), e }(); 0, void 0 }, EdYI: function (e, t, n) { "use strict"; n.d(t, "a", function () { return N }); var i = n("mrSG"), r = n("fXoL"), o = n("3Pt+"), a = n("vkgz"), s = n("pLZG"), l = n("lJxs"), c = n("5+tZ"), u = n("w1tV"), d = (n("U3y+"), n("21Fy")), p = n("8LU1"), m = n("l7P3"), f = n("sYmb"), h = n("kmnG"), g = n("A5z7"), y = n("ofXK"), b = n("qFsG"), v = n("/1cH"), E = n("NFeN"), T = n("FKr1"), S = n("d5eY"), C = ["entityInput"], O = ["entityAutocomplete"], w = ["chipList"]; function I(e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "mat-icon", 13), r["\u0275\u0275text"](1, "close"), r["\u0275\u0275elementEnd"]()) } function x(e, t) { if (1 & e) { var n = r["\u0275\u0275getCurrentView"](); r["\u0275\u0275elementStart"](0, "mat-chip", 11), r["\u0275\u0275listener"]("removed", function () { r["\u0275\u0275restoreView"](n); var e = t.$implicit; return r["\u0275\u0275nextContext"]().remove(e) }), r["\u0275\u0275text"](1), r["\u0275\u0275template"](2, I, 2, 0, "mat-icon", 12), r["\u0275\u0275elementEnd"]() } if (2 & e) { var i = t.$implicit, o = r["\u0275\u0275nextContext"](); r["\u0275\u0275property"]("selectable", !o.disabled)("removable", !o.disabled), r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate1"](" ", i.name, " "), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", !o.disabled) } } function M(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "mat-option", 14), r["\u0275\u0275element"](1, "span", 15), r["\u0275\u0275pipe"](2, "highlight"), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit, i = r["\u0275\u0275nextContext"](); r["\u0275\u0275property"]("value", n), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("innerHTML", r["\u0275\u0275pipeBind2"](2, 2, n.name, i.searchText), r["\u0275\u0275sanitizeHtml"]) } } var j = function (e) { return { entity: e } }; function A(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "mat-option", 14), r["\u0275\u0275elementStart"](1, "span"), r["\u0275\u0275text"](2), r["\u0275\u0275pipe"](3, "async"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = r["\u0275\u0275nextContext"](); r["\u0275\u0275property"]("value", null), r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](3, 2, n.translate.get("entity.no-entities-matching", r["\u0275\u0275pureFunction1"](4, j, n.searchText))), " ") } } function R(e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "mat-error"), r["\u0275\u0275text"](1), r["\u0275\u0275pipe"](2, "translate"), r["\u0275\u0275elementEnd"]()), 2 & e && (r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](2, 1, "entity.entity-list-empty"), " ")) } var N = function () { function e(e, t, n, i) { this.store = e, this.translate = t, this.entityService = n, this.fb = i, this.entities = [], this.searchText = "", this.dirty = !1, this.propagateChange = function (e) { }, this.entityListFormGroup = this.fb.group({ entities: [this.entities, this.required ? [o.Validators.required] : []], entity: [null] }) } return Object.defineProperty(e.prototype, "required", { get: function () { return this.requiredValue }, set: function (e) { var t = Object(p.coerceBooleanProperty)(e); this.requiredValue !== t && (this.requiredValue = t, this.updateValidators()) }, enumerable: !1, configurable: !0 }), e.prototype.updateValidators = function () { this.entityListFormGroup.get("entities").setValidators(this.required ? [o.Validators.required] : []), this.entityListFormGroup.get("entities").updateValueAndValidity() }, e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.ngOnInit = function () { var e = this; this.filteredEntities = this.entityListFormGroup.get("entity").valueChanges.pipe(Object(a.a)(function (t) { t && "string" != typeof t ? e.add(t) : null === t && e.clear(e.entityInput.nativeElement.value) }), Object(s.a)(function (e) { return "string" == typeof e }), Object(l.a)(function (e) { return e ? "string" == typeof e ? e : e.name : "" }), Object(c.b)(function (t) { return e.fetchEntities(t) }), Object(u.a)()) }, e.prototype.ngOnChanges = function (e) { for (var t = 0, n = Object.keys(e); t < n.length; t++) { var i = n[t], r = e[i]; r.firstChange || r.currentValue === r.previousValue || "entityType" === i && this.reset() } }, e.prototype.ngAfterViewInit = function () { }, e.prototype.setDisabledState = function (e) { this.disabled = e, e ? this.entityListFormGroup.disable({ emitEvent: !1 }) : this.entityListFormGroup.enable({ emitEvent: !1 }) }, e.prototype.writeValue = function (e) { var t = this; this.searchText = "", null != e && e.length > 0 ? (this.modelValue = Object(i.h)(e), this.entityService.getEntities(this.entityType, e).subscribe(function (e) { t.entities = e, t.entityListFormGroup.get("entities").setValue(t.entities) })) : (this.entities = [], this.entityListFormGroup.get("entities").setValue(this.entities), this.modelValue = null), this.dirty = !0 }, e.prototype.reset = function () { this.entities = [], this.entityListFormGroup.get("entities").setValue(this.entities), this.modelValue = null, this.entityInput && (this.entityInput.nativeElement.value = ""), this.entityListFormGroup.get("entity").patchValue("", { emitEvent: !1 }), this.propagateChange(this.modelValue), this.dirty = !0 }, e.prototype.add = function (e) { this.modelValue && -1 !== this.modelValue.indexOf(e.id.id) || (this.modelValue || (this.modelValue = []), this.modelValue.push(e.id.id), this.entities.push(e), this.entityListFormGroup.get("entities").setValue(this.entities)), this.propagateChange(this.modelValue), this.clear() }, e.prototype.remove = function (e) { var t = this.entities.indexOf(e); t >= 0 && (this.entities.splice(t, 1), this.entityListFormGroup.get("entities").setValue(this.entities), t = this.modelValue.indexOf(e.id.id), this.modelValue.splice(t, 1), this.modelValue.length || (this.modelValue = null), this.propagateChange(this.modelValue), this.clear()) }, e.prototype.displayEntityFn = function (e) { return e ? e.name : void 0 }, e.prototype.fetchEntities = function (e) { return this.searchText = e, this.entityService.getEntitiesByNameFilter(this.entityType, e, 50, this.subType ? this.subType : "", { ignoreLoading: !0 }).pipe(Object(l.a)(function (e) { return e || [] })) }, e.prototype.onFocus = function () { this.dirty && (this.entityListFormGroup.get("entity").updateValueAndValidity({ onlySelf: !0, emitEvent: !0 }), this.dirty = !1) }, e.prototype.clear = function (e) { var t = this; void 0 === e && (e = ""), this.entityInput.nativeElement.value = e, this.entityListFormGroup.get("entity").patchValue(e, { emitEvent: !0 }), setTimeout(function () { t.entityInput.nativeElement.blur(), t.entityInput.nativeElement.focus() }, 0) }, e.\u0275fac = function (t) { return new (t || e)(r["\u0275\u0275directiveInject"](m.Store), r["\u0275\u0275directiveInject"](f.TranslateService), r["\u0275\u0275directiveInject"](d.a), r["\u0275\u0275directiveInject"](o.FormBuilder)) }, e.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-entity-list"]], viewQuery: function (e, t) { if (1 & e && (r["\u0275\u0275viewQuery"](C, 1), r["\u0275\u0275viewQuery"](O, 1), r["\u0275\u0275viewQuery"](w, 3)), 2 & e) { var n = void 0; r["\u0275\u0275queryRefresh"](n = r["\u0275\u0275loadQuery"]()) && (t.entityInput = n.first), r["\u0275\u0275queryRefresh"](n = r["\u0275\u0275loadQuery"]()) && (t.matAutocomplete = n.first), r["\u0275\u0275queryRefresh"](n = r["\u0275\u0275loadQuery"]()) && (t.chipList = n.first) } }, inputs: { entityType: "entityType", subType: "subType", required: "required", disabled: "disabled" }, features: [r["\u0275\u0275ProvidersFeature"]([{ provide: o.NG_VALUE_ACCESSOR, useExisting: Object(r.forwardRef)(function () { return e }), multi: !0 }]), r["\u0275\u0275NgOnChangesFeature"]], decls: 15, vars: 16, consts: [["appearance", "standard", 1, "mat-block", 3, "formGroup"], ["formControlName", "entities"], ["chipList", ""], [3, "selectable", "removable", "removed", 4, "ngFor", "ngForOf"], ["matInput", "", "type", "text", "formControlName", "entity", "matAutocompleteOrigin", "", 2, "max-width", "200px", 3, "placeholder", "matAutocompleteConnectedTo", "matAutocomplete", "matChipInputFor", "focusin"], ["entityInput", "", "origin", "matAutocompleteOrigin"], [1, "tb-autocomplete", 3, "displayWith"], ["entityAutocomplete", "matAutocomplete"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value", 4, "ngIf"], [4, "ngIf"], [3, "selectable", "removable", "removed"], ["matChipRemove", "", 4, "ngIf"], ["matChipRemove", ""], [3, "value"], [3, "innerHTML"]], template: function (e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "mat-form-field", 0), r["\u0275\u0275elementStart"](1, "mat-chip-list", 1, 2), r["\u0275\u0275template"](3, x, 3, 4, "mat-chip", 3), r["\u0275\u0275elementStart"](4, "input", 4, 5), r["\u0275\u0275listener"]("focusin", function () { return t.onFocus() }), r["\u0275\u0275pipe"](7, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](8, "mat-autocomplete", 6, 7), r["\u0275\u0275template"](10, M, 3, 5, "mat-option", 8), r["\u0275\u0275pipe"](11, "async"), r["\u0275\u0275template"](12, A, 4, 6, "mat-option", 9), r["\u0275\u0275pipe"](13, "async"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275template"](14, R, 3, 3, "mat-error", 10), r["\u0275\u0275elementEnd"]()), 2 & e) { var n, i = r["\u0275\u0275reference"](2), o = r["\u0275\u0275reference"](6), a = r["\u0275\u0275reference"](9); r["\u0275\u0275property"]("formGroup", t.entityListFormGroup), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("ngForOf", t.entities), r["\u0275\u0275advance"](1), r["\u0275\u0275propertyInterpolate"]("placeholder", t.disabled ? "" : r["\u0275\u0275pipeBind1"](7, 10, "entity.entity-list")), r["\u0275\u0275property"]("matAutocompleteConnectedTo", o)("matAutocomplete", a)("matChipInputFor", i), r["\u0275\u0275advance"](4), r["\u0275\u0275property"]("displayWith", t.displayEntityFn), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngForOf", r["\u0275\u0275pipeBind1"](11, 12, t.filteredEntities)), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngIf", !(null != (n = r["\u0275\u0275pipeBind1"](13, 14, t.filteredEntities)) && n.length)), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngIf", t.entityListFormGroup.get("entities").hasError("required")) } }, directives: [h.MatFormField, o.NgControlStatusGroup, o.FormGroupDirective, g.MatChipList, o.NgControlStatus, o.FormControlName, y.NgForOf, b.MatInput, o.DefaultValueAccessor, v.MatAutocompleteTrigger, g.MatChipInput, v.MatAutocompleteOrigin, v.MatAutocomplete, y.NgIf, g.MatChip, E.MatIcon, g.MatChipRemove, T.MatOption, h.MatError], pipes: [f.TranslatePipe, y.AsyncPipe, S.a], styles: ["[_nghost-%COMP%]     .mat-form-field .mat-form-field-infix{border-top:none}"] }), e }(); 0, void 0 }, H3So: function (e, t, n) { "use strict"; n.d(t, "a", function () { return x }); var i = n("mrSG"), r = n("fXoL"), o = n("3Pt+"), a = n("8LU1"), s = n("xKAQ"), l = n("nhHW"), c = n("//Q6"), u = n("HR/i"), d = n("jCow"), p = n("l7P3"), m = n("8m5z"), f = n("XiUz"), h = n("ofXK"), g = n("znSr"), y = n("bTqV"), b = n("Qu3c"), v = n("NFeN"), E = n("rezs"), T = n("sYmb"), S = ["jsonEditor"]; function C(e, t) { if (1 & e) { var n = r["\u0275\u0275getCurrentView"](); r["\u0275\u0275elementStart"](0, "button", 10), r["\u0275\u0275listener"]("click", function () { return r["\u0275\u0275restoreView"](n), r["\u0275\u0275nextContext"]().beautifyJSON() }), r["\u0275\u0275text"](1), r["\u0275\u0275pipe"](2, "translate"), r["\u0275\u0275elementEnd"]() } 2 & e && (r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](2, 1, "js-func.tidy"), " ")) } function O(e, t) { if (1 & e) { var n = r["\u0275\u0275getCurrentView"](); r["\u0275\u0275elementStart"](0, "button", 10), r["\u0275\u0275listener"]("click", function () { return r["\u0275\u0275restoreView"](n), r["\u0275\u0275nextContext"]().minifyJSON() }), r["\u0275\u0275text"](1), r["\u0275\u0275pipe"](2, "translate"), r["\u0275\u0275elementEnd"]() } 2 & e && (r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](2, 1, "js-func.mini"), " ")) } var w = function (e) { return { "fill-height": e } }, I = function (e, t, n) { return { "tb-required": e, "tb-readonly": t, "tb-error": n } }, x = function () { function e(e, t, n) { this.elementRef = e, this.store = t, this.raf = n, this.toastTargetId = "jsonObjectEditor-" + Object(c.k)(), this.fullscreen = !1, this.errorShowed = !1, this.ignoreChange = !1, this.propagateChange = null } return Object.defineProperty(e.prototype, "required", { get: function () { return this.requiredValue }, set: function (e) { this.requiredValue = Object(a.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "readonly", { get: function () { return this.readonlyValue }, set: function (e) { this.readonlyValue = Object(a.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), e.prototype.ngOnInit = function () { var e = this, t = this.jsonEditorElmRef.nativeElement, n = { mode: "ace/mode/json", showGutter: !0, showPrintMargin: !1, readOnly: this.disabled || this.readonly }; n = Object(i.a)(Object(i.a)({}, n), { enableSnippets: !0, enableBasicAutocompletion: !0, enableLiveAutocompletion: !0 }), Object(d.b)().subscribe(function (i) { e.jsonEditor = i.edit(t, n), e.jsonEditor.session.setUseWrapMode(!1), e.jsonEditor.setValue(e.contentValue ? e.contentValue : "", -1), e.jsonEditor.setReadOnly(e.disabled || e.readonly), e.jsonEditor.on("change", function () { e.ignoreChange || (e.cleanupJsonErrors(), e.updateView()) }), e.editorResize$ = new u.a(function () { e.onAceEditorResize() }), e.editorResize$.observe(t) }) }, e.prototype.ngOnDestroy = function () { this.editorResize$ && this.editorResize$.disconnect() }, e.prototype.onAceEditorResize = function () { var e = this; this.editorsResizeCaf && (this.editorsResizeCaf(), this.editorsResizeCaf = null), this.editorsResizeCaf = this.raf.raf(function () { e.jsonEditor.resize(), e.jsonEditor.renderer.updateFull() }) }, e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.setDisabledState = function (e) { this.disabled = e, this.jsonEditor && this.jsonEditor.setReadOnly(this.disabled || this.readonly) }, e.prototype.validate = function (e) { return this.objectValid ? null : { jsonParseError: { valid: !1 } } }, e.prototype.validateOnSubmit = function () { this.disabled || this.readonly || (this.cleanupJsonErrors(), this.objectValid || (this.store.dispatch(new s.b({ message: this.validationError, type: "error", target: this.toastTargetId, verticalPosition: "bottom", horizontalPosition: "left" })), this.errorShowed = !0)) }, e.prototype.cleanupJsonErrors = function () { this.errorShowed && (this.store.dispatch(new s.a({ target: this.toastTargetId })), this.errorShowed = !1) }, e.prototype.beautifyJSON = function () { if (this.jsonEditor && this.objectValid) { var e = JSON.stringify(this.modelValue, null, 2); this.jsonEditor.setValue(e || "", -1), this.updateView() } }, e.prototype.minifyJSON = function () { if (this.jsonEditor && this.objectValid) { var e = JSON.stringify(this.modelValue); this.jsonEditor.setValue(e || "", -1), this.updateView() } }, e.prototype.writeValue = function (e) { var t = this; this.modelValue = e, this.contentValue = "", this.objectValid = !1; try { Object(c.o)(this.modelValue) ? (this.contentValue = JSON.stringify(this.modelValue, Object(c.B)(this.sort) ? void 0 : function (e, n) { return t.sort(e, n) }, 2), this.objectValid = !0) : (this.objectValid = !this.required, this.validationError = "Json object is required.") } catch (n) { } this.jsonEditor && (this.ignoreChange = !0, this.jsonEditor.setValue(this.contentValue ? this.contentValue : "", -1), this.ignoreChange = !1) }, e.prototype.updateView = function () { var e = this.jsonEditor.getValue(); if (this.contentValue !== e) { this.contentValue = e; var t = null; if (this.objectValid = !1, this.contentValue && this.contentValue.length > 0) try { if (t = JSON.parse(this.contentValue), !Object(c.t)(t)) throw new TypeError("Value is not a valid JSON"); this.objectValid = !0, this.validationError = "" } catch (i) { var n = "Error:"; i.name && (n += " " + i.name + ":"), i.message && (n += " " + i.message), this.validationError = n } else this.objectValid = !this.required, this.validationError = this.required ? "Json object is required." : ""; this.modelValue = t, this.propagateChange(t) } }, e.prototype.onFullscreen = function () { var e = this; this.jsonEditor && setTimeout(function () { e.jsonEditor.resize() }, 0) }, e.\u0275fac = function (t) { return new (t || e)(r["\u0275\u0275directiveInject"](r.ElementRef), r["\u0275\u0275directiveInject"](p.Store), r["\u0275\u0275directiveInject"](l.a)) }, e.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-json-object-edit"]], viewQuery: function (e, t) { if (1 & e && r["\u0275\u0275viewQuery"](S, 3), 2 & e) { var n; r["\u0275\u0275queryRefresh"](n = r["\u0275\u0275loadQuery"]()) && (t.jsonEditorElmRef = n.first) } }, inputs: { label: "label", disabled: "disabled", fillHeight: "fillHeight", editorStyle: "editorStyle", sort: "sort", required: "required", readonly: "readonly" }, features: [r["\u0275\u0275ProvidersFeature"]([{ provide: o.NG_VALUE_ACCESSOR, useExisting: Object(r.forwardRef)(function () { return e }), multi: !0 }, { provide: o.NG_VALIDATORS, useExisting: Object(r.forwardRef)(function () { return e }), multi: !0 }])], decls: 14, vars: 21, consts: [["tb-fullscreen", "", "fxLayout", "column", 2, "background", "#fff", 3, "ngClass", "fullscreen", "fullscreenChanged"], ["fxLayout", "row", "fxLayoutAlign", "start center", 1, "tb-json-object-toolbar"], [1, "tb-title", "no-padding", 3, "ngClass"], ["fxFlex", ""], ["type", "button", "mat-button", "", "class", "tidy", 3, "click", 4, "ngIf"], ["mat-button", "", "mat-icon-button", "", "matTooltipPosition", "above", 3, "matTooltip", "click"], [1, "material-icons"], ["id", "tb-json-panel", "tb-toast", "", "fxLayout", "column", 1, "tb-json-object-panel", 3, "toastTarget"], ["id", "tb-json-input", 3, "ngStyle", "ngClass"], ["jsonEditor", ""], ["type", "button", "mat-button", "", 1, "tidy", 3, "click"]], template: function (e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "div", 0), r["\u0275\u0275listener"]("fullscreenChanged", function () { return t.onFullscreen() }), r["\u0275\u0275elementStart"](1, "div", 1), r["\u0275\u0275elementStart"](2, "label", 2), r["\u0275\u0275text"](3), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](4, "span", 3), r["\u0275\u0275template"](5, C, 3, 3, "button", 4), r["\u0275\u0275template"](6, O, 3, 3, "button", 4), r["\u0275\u0275elementStart"](7, "button", 5), r["\u0275\u0275listener"]("click", function () { return t.fullscreen = !t.fullscreen }), r["\u0275\u0275pipe"](8, "translate"), r["\u0275\u0275elementStart"](9, "mat-icon", 6), r["\u0275\u0275text"](10), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](11, "div", 7), r["\u0275\u0275element"](12, "div", 8, 9), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]()), 2 & e && (r["\u0275\u0275property"]("ngClass", r["\u0275\u0275pureFunction1"](13, w, t.fillHeight))("fullscreen", t.fullscreen), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngClass", r["\u0275\u0275pureFunction3"](15, I, t.required, t.readonly, !t.objectValid)), r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate"](t.label), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngIf", !t.readonly && !t.disabled), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", !t.readonly && !t.disabled), r["\u0275\u0275advance"](1), r["\u0275\u0275propertyInterpolate"]("matTooltip", r["\u0275\u0275pipeBind1"](8, 11, t.fullscreen ? "fullscreen.exit" : "fullscreen.expand")), r["\u0275\u0275advance"](3), r["\u0275\u0275textInterpolate"](t.fullscreen ? "fullscreen_exit" : "fullscreen"), r["\u0275\u0275advance"](1), r["\u0275\u0275propertyInterpolate"]("toastTarget", t.toastTargetId), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngStyle", t.editorStyle)("ngClass", r["\u0275\u0275pureFunction1"](19, w, t.fillHeight))) }, directives: [m.a, f.f, h.NgClass, g.b, f.e, f.b, h.NgIf, y.MatButton, b.MatTooltip, v.MatIcon, E.b, h.NgStyle, g.e], pipes: [T.TranslatePipe], styles: ["[_nghost-%COMP%]{position:relative}[_nghost-%COMP%]   .fill-height[_ngcontent-%COMP%]{height:100%}.tb-json-object-toolbar[_ngcontent-%COMP%]   button.mat-button[_ngcontent-%COMP%], .tb-json-object-toolbar[_ngcontent-%COMP%]   button.mat-icon-button[_ngcontent-%COMP%], .tb-json-object-toolbar[_ngcontent-%COMP%]   button.mat-icon-button.tb-mat-32[_ngcontent-%COMP%]{align-items:center;vertical-align:middle;min-width:32px;min-height:15px;padding:4px;margin:0;font-size:.8rem;line-height:15px;color:#7b7b7b;background:hsla(0,0%,86%,.35)}.tb-json-object-toolbar[_ngcontent-%COMP%]   button.mat-button[_ngcontent-%COMP%]:not(:last-child), .tb-json-object-toolbar[_ngcontent-%COMP%]   button.mat-icon-button.tb-mat-32[_ngcontent-%COMP%]:not(:last-child), .tb-json-object-toolbar[_ngcontent-%COMP%]   button.mat-icon-button[_ngcontent-%COMP%]:not(:last-child){margin-right:4px}.tb-json-object-panel[_ngcontent-%COMP%]{height:100%;margin-left:15px;border:1px solid silver}.tb-json-object-panel[_ngcontent-%COMP%]   #tb-json-input[_ngcontent-%COMP%]{width:100%;min-width:200px;height:100%}.tb-json-object-panel[_ngcontent-%COMP%]   #tb-json-input[_ngcontent-%COMP%]:not(.fill-height){min-height:200px}"] }), e }(); 0, void 0 }, HKgb: function (e, t, n) { "use strict"; n.d(t, "a", function () { return O }); var i = n("mrSG"), r = n("fXoL"), o = n("2Vo4"), a = n("tyNb"), s = n("pLZG"), l = n("/uUt"), c = n("lJxs"), u = n("//Q6"), d = n("sYmb"), p = n("XiUz"), m = n("ofXK"), f = n("znSr"), h = n("NFeN"); function g(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "h1", 3), r["\u0275\u0275text"](1), r["\u0275\u0275pipe"](2, "translate"), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit; r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate1"](" ", n.ignoreTranslate ? n.labelFunction ? n.labelFunction() : n.label : r["\u0275\u0275pipeBind1"](2, 1, n.label), " ") } } function y(e, t) { if (1 & e && r["\u0275\u0275element"](0, "mat-icon", 11), 2 & e) { var n = r["\u0275\u0275nextContext"](2).$implicit; r["\u0275\u0275property"]("svgIcon", n.icon) } } function b(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "mat-icon", 12), r["\u0275\u0275text"](1), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = r["\u0275\u0275nextContext"](2).$implicit; r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate1"](" ", n.icon, " ") } } function v(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "a", 8), r["\u0275\u0275template"](1, y, 1, 1, "mat-icon", 9), r["\u0275\u0275template"](2, b, 2, 1, "mat-icon", 10), r["\u0275\u0275text"](3), r["\u0275\u0275pipe"](4, "translate"), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = r["\u0275\u0275nextContext"]().$implicit; r["\u0275\u0275property"]("routerLink", n.link)("queryParams", n.queryParams), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", n.isMdiIcon), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", !n.isMdiIcon), r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate1"](" ", n.ignoreTranslate ? n.labelFunction ? n.labelFunction() : n.label : r["\u0275\u0275pipeBind1"](4, 5, n.label), " ") } } function E(e, t) { if (1 & e && r["\u0275\u0275element"](0, "mat-icon", 11), 2 & e) { var n = r["\u0275\u0275nextContext"](2).$implicit; r["\u0275\u0275property"]("svgIcon", n.icon) } } function T(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "mat-icon", 12), r["\u0275\u0275text"](1), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = r["\u0275\u0275nextContext"](2).$implicit; r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate1"](" ", n.icon, " ") } } function S(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "span"), r["\u0275\u0275template"](1, E, 1, 1, "mat-icon", 9), r["\u0275\u0275template"](2, T, 2, 1, "mat-icon", 10), r["\u0275\u0275text"](3), r["\u0275\u0275pipe"](4, "translate"), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = r["\u0275\u0275nextContext"]().$implicit; r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", n.isMdiIcon), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", !n.isMdiIcon), r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate1"](" ", n.ignoreTranslate ? n.labelFunction ? n.labelFunction() : n.label : r["\u0275\u0275pipeBind1"](4, 3, n.label), " ") } } function C(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "span", 4), r["\u0275\u0275template"](1, v, 5, 7, "a", 5), r["\u0275\u0275template"](2, S, 5, 5, "span", 6), r["\u0275\u0275elementStart"](3, "span", 7), r["\u0275\u0275text"](4, " > "), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.last; r["\u0275\u0275property"]("ngSwitch", n), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngSwitchCase", !1), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngSwitchCase", !0), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("fxHide", n) } } var O = function () { function e(e, t, n) { var i = this; this.router = e, this.activatedRoute = t, this.translate = n, this.breadcrumbs$ = new o.a(this.buildBreadCrumbs(this.activatedRoute.snapshot)), this.routerEventsSubscription = this.router.events.pipe(Object(s.a)(function (e) { return e instanceof a.NavigationEnd }), Object(l.a)(), Object(c.a)(function () { return i.buildBreadCrumbs(i.activatedRoute.snapshot) })).subscribe(function (e) { return i.breadcrumbs$.next(e) }), this.lastBreadcrumb$ = this.breadcrumbs$.pipe(Object(c.a)(function (e) { return e[e.length - 1] })) } return Object.defineProperty(e.prototype, "activeComponent", { set: function (e) { this.activeComponentValue = e }, enumerable: !1, configurable: !0 }), e.prototype.ngOnInit = function () { }, e.prototype.ngOnDestroy = function () { this.routerEventsSubscription && this.routerEventsSubscription.unsubscribe() }, e.prototype.lastChild = function (e) { for (var t = e; null !== t.firstChild;)t = t.firstChild; return t }, e.prototype.buildBreadCrumbs = function (e, t, n) { var r = this; void 0 === t && (t = []), n || (n = this.lastChild(e)); var o = t; if (e.routeConfig && e.routeConfig.data) { var a = e.routeConfig.data.breadcrumb; if (a && !a.skip) { var s = void 0, l = void 0, c = void 0; a.labelFunction ? (l = function () { return a.labelFunction(e, r.translate, r.activeComponentValue, n.data) }, c = !0) : (s = a.label || "home.home", c = !1); var d = a.icon || "home", p = d.startsWith("mdi:"), m = [e.pathFromRoot.map(function (e) { return e.url.map(function (e) { return e.toString() }).join("/") }).join("/")], f = { id: Object(u.k)(), label: s, labelFunction: l, ignoreTranslate: c, icon: d, isMdiIcon: p, link: m, queryParams: null }; o = Object(i.h)(t, [f]) } } return e.firstChild ? this.buildBreadCrumbs(e.firstChild, o, n) : o }, e.prototype.trackByBreadcrumbs = function (e, t) { return t.id }, e.\u0275fac = function (t) { return new (t || e)(r["\u0275\u0275directiveInject"](a.Router), r["\u0275\u0275directiveInject"](a.ActivatedRoute), r["\u0275\u0275directiveInject"](d.TranslateService)) }, e.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-breadcrumb"]], inputs: { activeComponent: "activeComponent" }, decls: 5, vars: 7, consts: [["fxFlex", "", "fxLayout", "row", 1, "tb-breadcrumb"], ["fxFlex", "", "fxHide.gt-sm", "", 4, "ngIf"], ["fxHide.lt-md", "", "fxLayout", "row", 3, "ngSwitch", 4, "ngFor", "ngForOf", "ngForTrackBy"], ["fxFlex", "", "fxHide.gt-sm", ""], ["fxHide.lt-md", "", "fxLayout", "row", 3, "ngSwitch"], [3, "routerLink", "queryParams", 4, "ngSwitchCase"], [4, "ngSwitchCase"], [1, "divider", 3, "fxHide"], [3, "routerLink", "queryParams"], [3, "svgIcon", 4, "ngIf"], ["class", "material-icons", 4, "ngIf"], [3, "svgIcon"], [1, "material-icons"]], template: function (e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "div", 0), r["\u0275\u0275template"](1, g, 3, 3, "h1", 1), r["\u0275\u0275pipe"](2, "async"), r["\u0275\u0275template"](3, C, 5, 4, "span", 2), r["\u0275\u0275pipe"](4, "async"), r["\u0275\u0275elementEnd"]()), 2 & e && (r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", r["\u0275\u0275pipeBind1"](2, 3, t.lastBreadcrumb$)), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngForOf", r["\u0275\u0275pipeBind1"](4, 5, t.breadcrumbs$))("ngForTrackBy", t.trackByBreadcrumbs)) }, directives: [p.b, p.f, m.NgIf, m.NgForOf, f.d, m.NgSwitch, m.NgSwitchCase, a.RouterLinkWithHref, h.MatIcon], pipes: [m.AsyncPipe, d.TranslatePipe], styles: ["[_nghost-%COMP%]{min-width:0}[_nghost-%COMP%]   .tb-breadcrumb[_ngcontent-%COMP%]{font-size:18px;font-weight:400;overflow:hidden}[_nghost-%COMP%]   .tb-breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-breadcrumb[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-breadcrumb[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(.divider){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[_nghost-%COMP%]   .tb-breadcrumb[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;font-weight:400}[_nghost-%COMP%]   .tb-breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border:none;opacity:.75;transition:opacity .35s;color:inherit;text-decoration:none;outline:none}[_nghost-%COMP%]   .tb-breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   .tb-breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none!important;border:none;opacity:1}[_nghost-%COMP%]   .tb-breadcrumb[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{padding:0 20px}"], changeDetection: 0 }), e }(); 0, void 0 }, HeHW: function (e, t, n) { "use strict"; n.d(t, "a", function () { return m }); var i = n("mrSG"), r = n("fXoL"), o = n("gmuX"), a = n("0IaG"), s = n("l7P3"), l = n("tyNb"), c = n("3Pt+"), u = n("sYmb"); function d(e, t) { 1 & e && r["\u0275\u0275element"](0, "mat-progress-bar", 13) } function p(e, t) { 1 & e && r["\u0275\u0275element"](0, "div", 14) } var m = function (e) { function t(t, n, i, r, o, a) { var s = e.call(this, t, n, r) || this; return s.store = t, s.router = n, s.data = i, s.dialogRef = r, s.fb = o, s.translate = a, s.submitted = !1, s } return Object(i.d)(t, e), t.prototype.ngOnInit = function () { this.title = this.data.title ? this.data.title : this.translate.instant("details.edit-json"), this.jsonFormGroup = this.fb.group({ json: [this.data.jsonValue, []] }) }, t.prototype.cancel = function () { this.dialogRef.close(void 0) }, t.prototype.add = function () { this.dialogRef.close(this.jsonFormGroup.get("json").value) }, t.\u0275fac = function (e) { return new (e || t)(r["\u0275\u0275directiveInject"](s.Store), r["\u0275\u0275directiveInject"](l.Router), r["\u0275\u0275directiveInject"](a.MAT_DIALOG_DATA), r["\u0275\u0275directiveInject"](a.MatDialogRef), r["\u0275\u0275directiveInject"](c.FormBuilder), r["\u0275\u0275directiveInject"](u.TranslateService)) }, t.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: t, selectors: [["tb-object-edit-dialog"]], features: [r["\u0275\u0275InheritDefinitionFeature"]], decls: 27, vars: 28, consts: [[2, "min-width", "400px", 3, "formGroup", "ngSubmit"], ["fxLayout", "row", "color", "accent"], ["fxFlex", ""], ["mat-button", "", "mat-icon-button", "", "type", "button", 3, "click"], [1, "material-icons"], ["color", "warn", "mode", "indeterminate", 4, "ngIf"], ["style", "height: 4px;", 4, "ngIf"], ["mat-dialog-content", ""], [3, "disabled"], ["formControlName", "json", "validateContent", "true", 3, "label", "required", "fillHeight"], ["mat-dialog-actions", "", "fxLayout", "row", "fxLayoutAlign", "end center"], ["mat-button", "", "color", "accent", "type", "button", "cdkFocusInitial", "", 3, "disabled", "click"], ["mat-button", "", "mat-raised-button", "", "color", "accent", "type", "submit", 3, "disabled"], ["color", "warn", "mode", "indeterminate"], [2, "height", "4px"]], template: function (e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "form", 0), r["\u0275\u0275listener"]("ngSubmit", function () { return t.add() }), r["\u0275\u0275elementStart"](1, "mat-toolbar", 1), r["\u0275\u0275elementStart"](2, "h2"), r["\u0275\u0275text"](3), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](4, "span", 2), r["\u0275\u0275elementStart"](5, "button", 3), r["\u0275\u0275listener"]("click", function () { return t.cancel() }), r["\u0275\u0275elementStart"](6, "mat-icon", 4), r["\u0275\u0275text"](7, "close"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275template"](8, d, 1, 0, "mat-progress-bar", 5), r["\u0275\u0275pipe"](9, "async"), r["\u0275\u0275template"](10, p, 1, 0, "div", 6), r["\u0275\u0275pipe"](11, "async"), r["\u0275\u0275elementStart"](12, "div", 7), r["\u0275\u0275elementStart"](13, "fieldset", 8), r["\u0275\u0275pipe"](14, "async"), r["\u0275\u0275element"](15, "tb-json-object-edit", 9), r["\u0275\u0275pipe"](16, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](17, "div", 10), r["\u0275\u0275element"](18, "span", 2), r["\u0275\u0275elementStart"](19, "button", 11), r["\u0275\u0275listener"]("click", function () { return t.cancel() }), r["\u0275\u0275pipe"](20, "async"), r["\u0275\u0275text"](21), r["\u0275\u0275pipe"](22, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](23, "button", 12), r["\u0275\u0275pipe"](24, "async"), r["\u0275\u0275text"](25), r["\u0275\u0275pipe"](26, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]()), 2 & e && (r["\u0275\u0275property"]("formGroup", t.jsonFormGroup), r["\u0275\u0275advance"](3), r["\u0275\u0275textInterpolate"](t.title), r["\u0275\u0275advance"](5), r["\u0275\u0275property"]("ngIf", r["\u0275\u0275pipeBind1"](9, 12, t.isLoading$)), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngIf", !r["\u0275\u0275pipeBind1"](11, 14, t.isLoading$)), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("disabled", r["\u0275\u0275pipeBind1"](14, 16, t.isLoading$)), r["\u0275\u0275advance"](2), r["\u0275\u0275propertyInterpolate"]("label", r["\u0275\u0275pipeBind1"](16, 18, "value.json-value")), r["\u0275\u0275property"]("required", !0)("fillHeight", !1), r["\u0275\u0275advance"](4), r["\u0275\u0275property"]("disabled", r["\u0275\u0275pipeBind1"](20, 20, t.isLoading$)), r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](22, 22, "action.cancel"), " "), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("disabled", r["\u0275\u0275pipeBind1"](24, 24, t.isLoading$) || t.jsonFormGroup.invalid || !t.jsonFormGroup.dirty), r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](26, 26, "action.save"), " ")) }, encapsulation: 2 }), t }(o.a); 0, void 0 }, HnHJ: function (e, t, n) { "use strict"; n.d(t, "a", function () { return o }); var i = n("fXoL"); function r(e, t) { } var o = function () { function e(e) { this.viewContainerRef = e } return e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](i.ViewContainerRef)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-anchor"]], decls: 1, vars: 0, template: function (e, t) { 1 & e && i["\u0275\u0275template"](0, r, 0, 0, "ng-template") }, encapsulation: 2 }), e }(); 0, void 0 }, IVsW: function (e, t, n) { "use strict"; n.d(t, "a", function () { return I }); var i = n("fXoL"), r = n("3Pt+"), o = n("LRne"), a = n("vkgz"), s = n("lJxs"), l = n("5+tZ"), c = n("gM18"), u = n("8LU1"), d = n("7JTo"), p = n("l7P3"), m = n("sYmb"), f = n("kmnG"), h = n("qFsG"), g = n("/1cH"), y = n("ofXK"), b = n("bTqV"), v = n("NFeN"), E = n("FKr1"), T = n("d5eY"), S = ["relationTypeInput"]; function C(e, t) { if (1 & e) { var n = i["\u0275\u0275getCurrentView"](); i["\u0275\u0275elementStart"](0, "button", 8), i["\u0275\u0275listener"]("click", function () { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().clear() }), i["\u0275\u0275elementStart"](1, "mat-icon", 9), i["\u0275\u0275text"](2, "close"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]() } } function O(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-option", 10), i["\u0275\u0275element"](1, "span", 11), i["\u0275\u0275pipe"](2, "highlight"), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit, r = i["\u0275\u0275nextContext"](); i["\u0275\u0275property"]("value", n), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("innerHTML", i["\u0275\u0275pipeBind2"](2, 2, n, r.searchText), i["\u0275\u0275sanitizeHtml"]) } } function w(e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "mat-error"), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"](" ", i["\u0275\u0275pipeBind1"](2, 1, "relation.relation-type-required"), " ")) } var I = function () { function e(e, t, n, i) { this.store = e, this.broadcast = t, this.translate = n, this.fb = i, this.searchText = "", this.dirty = !1, this.propagateChange = function (e) { }, this.relationTypeFormGroup = this.fb.group({ relationType: [null, this.required ? [r.Validators.required] : []] }) } return Object.defineProperty(e.prototype, "required", { get: function () { return this.requiredValue }, set: function (e) { this.requiredValue = Object(u.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.ngOnInit = function () { var e = this; this.filteredRelationTypes = this.relationTypeFormGroup.get("relationType").valueChanges.pipe(Object(a.a)(function (t) { e.updateView(t) }), Object(s.a)(function (e) { return e || "" }), Object(l.b)(function (t) { return e.fetchRelationTypes(t) })) }, e.prototype.ngAfterViewInit = function () { }, e.prototype.ngOnDestroy = function () { }, e.prototype.setDisabledState = function (e) { this.disabled = e, this.disabled ? this.relationTypeFormGroup.disable({ emitEvent: !1 }) : this.relationTypeFormGroup.enable({ emitEvent: !1 }) }, e.prototype.writeValue = function (e) { this.searchText = "", this.modelValue = e, this.relationTypeFormGroup.get("relationType").patchValue(e, { emitEvent: !1 }), this.dirty = !0 }, e.prototype.onFocus = function () { this.dirty && (this.relationTypeFormGroup.get("relationType").updateValueAndValidity({ onlySelf: !0, emitEvent: !0 }), this.dirty = !1) }, e.prototype.updateView = function (e) { this.modelValue !== e && (this.modelValue = e, this.propagateChange(this.modelValue)) }, e.prototype.displayRelationTypeFn = function (e) { return e || void 0 }, e.prototype.fetchRelationTypes = function (e, t) { return void 0 === t && (t = !1), this.searchText = e, Object(o.a)(d.e).pipe(Object(s.a)(function (n) { return n.filter(function (n) { return t ? !!e && n === e : !e || n.toUpperCase().startsWith(e.toUpperCase()) }) })) }, e.prototype.clear = function () { var e = this; this.relationTypeFormGroup.get("relationType").patchValue(null, { emitEvent: !0 }), setTimeout(function () { e.relationTypeInput.nativeElement.blur(), e.relationTypeInput.nativeElement.focus() }, 0) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](p.Store), i["\u0275\u0275directiveInject"](c.a), i["\u0275\u0275directiveInject"](m.TranslateService), i["\u0275\u0275directiveInject"](r.FormBuilder)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-relation-type-autocomplete"]], viewQuery: function (e, t) { if (1 & e && i["\u0275\u0275viewQuery"](S, 3), 2 & e) { var n; i["\u0275\u0275queryRefresh"](n = i["\u0275\u0275loadQuery"]()) && (t.relationTypeInput = n.first) } }, inputs: { required: "required", disabled: "disabled" }, features: [i["\u0275\u0275ProvidersFeature"]([{ provide: r.NG_VALUE_ACCESSOR, useExisting: Object(i.forwardRef)(function () { return e }), multi: !0 }])], decls: 11, vars: 14, consts: [[1, "mat-block", 3, "formGroup"], ["matInput", "", "type", "text", "formControlName", "relationType", 3, "placeholder", "required", "matAutocomplete", "focusin"], ["relationTypeInput", ""], ["type", "button", "matSuffix", "", "mat-icon-button", "", "aria-label", "Clear", 3, "click", 4, "ngIf"], [1, "tb-autocomplete", 3, "displayWith"], ["relationTypeAutocomplete", "matAutocomplete"], [3, "value", 4, "ngFor", "ngForOf"], [4, "ngIf"], ["type", "button", "matSuffix", "", "mat-icon-button", "", "aria-label", "Clear", 3, "click"], [1, "material-icons"], [3, "value"], [3, "innerHTML"]], template: function (e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-form-field", 0), i["\u0275\u0275elementStart"](1, "input", 1, 2), i["\u0275\u0275listener"]("focusin", function () { return t.onFocus() }), i["\u0275\u0275pipe"](3, "translate"), i["\u0275\u0275pipe"](4, "translate"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](5, C, 3, 0, "button", 3), i["\u0275\u0275elementStart"](6, "mat-autocomplete", 4, 5), i["\u0275\u0275template"](8, O, 3, 5, "mat-option", 6), i["\u0275\u0275pipe"](9, "async"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](10, w, 3, 3, "mat-error", 7), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275reference"](7); i["\u0275\u0275property"]("formGroup", t.relationTypeFormGroup), i["\u0275\u0275advance"](1), i["\u0275\u0275propertyInterpolate"]("placeholder", t.required ? i["\u0275\u0275pipeBind1"](3, 8, "relation.relation-type") : t.modelValue ? " " : i["\u0275\u0275pipeBind1"](4, 10, "relation.any-relation-type")), i["\u0275\u0275property"]("required", t.required)("matAutocomplete", n), i["\u0275\u0275advance"](4), i["\u0275\u0275property"]("ngIf", t.relationTypeFormGroup.get("relationType").value && !t.disabled), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("displayWith", t.displayRelationTypeFn), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngForOf", i["\u0275\u0275pipeBind1"](9, 12, t.filteredRelationTypes)), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngIf", t.relationTypeFormGroup.get("relationType").hasError("required")) } }, directives: [f.MatFormField, r.NgControlStatusGroup, r.FormGroupDirective, h.MatInput, r.DefaultValueAccessor, g.MatAutocompleteTrigger, r.NgControlStatus, r.FormControlName, r.RequiredValidator, y.NgIf, g.MatAutocomplete, y.NgForOf, b.MatButton, f.MatSuffix, v.MatIcon, E.MatOption, f.MatError], pipes: [m.TranslatePipe, y.AsyncPipe, T.a], encapsulation: 2 }), e }(); 0, void 0 }, IaQH: function (e, t, n) { "use strict"; n.d(t, "a", function () { return a }); var i = n("fXoL"), r = n("Y8nr"), o = n("tk/3"), a = function () { function e(e) { this.http = e } return e.prototype.getTenantQueuesByServiceType = function (e, t) { return this.http.get("/api/tenant/queues?serviceType=" + e, Object(r.b)(t)) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275inject"](o.HttpClient)) }, e.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, JIJk: function (e, t, n) { "use strict"; n.d(t, "h", function () { return i }), n.d(t, "j", function () { return r }), n.d(t, "r", function () { return o }), n.d(t, "f", function () { return a }), n.d(t, "i", function () { return s }), n.d(t, "H", function () { return p }), n.d(t, "G", function () { return m }), n.d(t, "L", function () { return f }), n.d(t, "I", function () { return h }), n.d(t, "K", function () { return g }), n.d(t, "P", function () { return y }), n.d(t, "E", function () { return b }), n.d(t, "B", function () { return v }), n.d(t, "C", function () { return E }), n.d(t, "D", function () { return T }), n.d(t, "t", function () { return S }), n.d(t, "J", function () { return C }), n.d(t, "p", function () { return d }), n.d(t, "q", function () { return w }), n.d(t, "v", function () { return I }), n.d(t, "u", function () { return x }), n.d(t, "w", function () { return M }), n.d(t, "x", function () { return j }), n.d(t, "a", function () { return O }), n.d(t, "b", function () { return R }), n.d(t, "c", function () { return A }), n.d(t, "d", function () { return k }), n.d(t, "s", function () { return _ }), n.d(t, "F", function () { return L }), n.d(t, "m", function () { return N }), n.d(t, "k", function () { return P }), n.d(t, "l", function () { return V }), n.d(t, "n", function () { return D }), n.d(t, "o", function () { return B }), n.d(t, "g", function () { return U }), n.d(t, "y", function () { return q }), n.d(t, "z", function () { return z }), n.d(t, "e", function () { return G }), n.d(t, "A", function () { return H }), n.d(t, "N", function () { return W }), n.d(t, "O", function () { return Q }), n.d(t, "Q", function () { return Y }), n.d(t, "M", function () { return X }); var i, r, o, a, s, l = n("mrSG"), c = n("wd/R"), u = n("gGt+"); !function (e) { e.DEFAULT = "DEFAULT", e.SNMP = "SNMP" }(i || (i = {})), function (e) { e.DEFAULT = "DEFAULT", e.MQTT = "MQTT", e.COAP = "COAP", e.LWM2M = "LWM2M", e.SNMP = "SNMP" }(r || (r = {})), function (e) { e.JSON = "JSON", e.PROTOBUF = "PROTOBUF" }(o || (o = {})), function (e) { e.DEFAULT = "DEFAULT", e.EFENTO = "EFENTO" }(a || (a = {})), function (e) { e.DISABLED = "DISABLED", e.ALLOW_CREATE_NEW_DEVICES = "ALLOW_CREATE_NEW_DEVICES", e.CHECK_PRE_PROVISIONED_DEVICES = "CHECK_PRE_PROVISIONED_DEVICES" }(s || (s = {})); var d, p = new Map([[i.DEFAULT, "device-profile.type-default"]]), m = new Map([[i.DEFAULT, { hasProfileConfiguration: !1, hasDeviceConfiguration: !1 }], [i.SNMP, { hasProfileConfiguration: !0, hasDeviceConfiguration: !0 }]]), f = new Map([[r.DEFAULT, "device-profile.transport-type-default"], [r.MQTT, "device-profile.transport-type-mqtt"], [r.COAP, "device-profile.transport-type-coap"], [r.LWM2M, "device-profile.transport-type-lwm2m"], [r.SNMP, "device-profile.transport-type-snmp"]]), h = new Map([[s.DISABLED, "device-profile.provision-strategy-disabled"], [s.ALLOW_CREATE_NEW_DEVICES, "device-profile.provision-strategy-created-new"], [s.CHECK_PRE_PROVISIONED_DEVICES, "device-profile.provision-strategy-check-pre-provisioned"]]), g = new Map([[r.DEFAULT, "device-profile.transport-type-default-hint"], [r.MQTT, "device-profile.transport-type-mqtt-hint"], [r.COAP, "device-profile.transport-type-coap-hint"], [r.LWM2M, "device-profile.transport-type-lwm2m-hint"], [r.SNMP, "device-profile.transport-type-snmp-hint"]]), y = new Map([[o.JSON, "device-profile.transport-device-payload-type-json"], [o.PROTOBUF, "device-profile.transport-device-payload-type-proto"]]), b = 'syntax ="proto3";\npackage telemetry;\n\nmessage SensorDataReading {\n\n  optional double temperature = 1;\n  optional double humidity = 2;\n  InnerObject innerObject = 3;\n\n  message InnerObject {\n    optional string key1 = 1;\n    optional bool key2 = 2;\n    optional double key3 = 3;\n    optional int32 key4 = 4;\n    optional string key5 = 5;\n  }\n}\n', v = 'syntax ="proto3";\npackage attributes;\n\nmessage SensorConfiguration {\n  optional string firmwareVersion = 1;\n  optional string serialNumber = 2;\n}', E = 'syntax ="proto3";\npackage rpc;\n\nmessage RpcRequestMsg {\n  optional string method = 1;\n  optional int32 requestId = 2;\n  optional string params = 3;\n}', T = 'syntax ="proto3";\npackage rpc;\n\nmessage RpcResponseMsg {\n  optional string payload = 1;\n}', S = new Map([[a.DEFAULT, "device-profile.coap-device-type-default"], [a.EFENTO, "device-profile.coap-device-type-efento"]]), C = new Map([[r.DEFAULT, { hasProfileConfiguration: !1, hasDeviceConfiguration: !1 }], [r.MQTT, { hasProfileConfiguration: !0, hasDeviceConfiguration: !1 }], [r.LWM2M, { hasProfileConfiguration: !0, hasDeviceConfiguration: !0 }], [r.COAP, { hasProfileConfiguration: !0, hasDeviceConfiguration: !0 }], [r.SNMP, { hasProfileConfiguration: !0, hasDeviceConfiguration: !0 }]]); !function (e) { e.TELEMETRY_QUERYING = "TELEMETRY_QUERYING", e.CLIENT_ATTRIBUTES_QUERYING = "CLIENT_ATTRIBUTES_QUERYING", e.SHARED_ATTRIBUTES_SETTING = "SHARED_ATTRIBUTES_SETTING", e.TO_DEVICE_RPC_REQUEST = "TO_DEVICE_RPC_REQUEST" }(d || (d = {})); var O, w = new Map([[d.TELEMETRY_QUERYING, " Telemetry"], [d.CLIENT_ATTRIBUTES_QUERYING, "Client attributes"], [d.SHARED_ATTRIBUTES_SETTING, "Shared attributes"], [d.TO_DEVICE_RPC_REQUEST, "RPC request"]]); function I(e) { var t = null; if (e) switch (e) { case i.DEFAULT: t = Object(l.a)(Object(l.a)({}, {}), { type: i.DEFAULT }) }return t } function x(e) { var t = null; if (e) switch (e) { case i.DEFAULT: t = Object(l.a)(Object(l.a)({}, {}), { type: i.DEFAULT }) }return t } function M(e) { var t = null; if (e) switch (e) { case r.DEFAULT: t = Object(l.a)(Object(l.a)({}, {}), { type: r.DEFAULT }); break; case r.MQTT: var n = { deviceTelemetryTopic: "v1/devices/me/telemetry", deviceAttributesTopic: "v1/devices/me/attributes", transportPayloadTypeConfiguration: { transportPayloadType: o.JSON } }; t = Object(l.a)(Object(l.a)({}, n), { type: r.MQTT }); break; case r.COAP: var i = { coapDeviceTypeConfiguration: { coapDeviceType: a.DEFAULT, transportPayloadTypeConfiguration: { transportPayloadType: o.JSON } }, clientSettings: { powerMode: u.y.DRX } }; t = Object(l.a)(Object(l.a)({}, i), { type: r.COAP }); break; case r.LWM2M: var s = { observeAttr: Object(u.G)(), bootstrap: { servers: Object(u.D)(), bootstrapServer: Object(u.C)(), lwm2mServer: Object(u.E)() }, clientLwM2mSettings: Object(u.F)() }; t = Object(l.a)(Object(l.a)({}, s), { type: r.LWM2M }); break; case r.SNMP: t = Object(l.a)(Object(l.a)({}, { timeoutMs: 500, retries: 0, communicationConfigs: null }), { type: r.SNMP }) }return t } function j(e) { var t = null; if (e) switch (e) { case r.DEFAULT: t = Object(l.a)(Object(l.a)({}, {}), { type: r.DEFAULT }); break; case r.MQTT: t = Object(l.a)(Object(l.a)({}, {}), { type: r.MQTT }); break; case r.COAP: t = Object(l.a)(Object(l.a)({}, { powerMode: null }), { type: r.COAP }); break; case r.LWM2M: t = Object(l.a)(Object(l.a)({}, { powerMode: null }), { type: r.LWM2M }); break; case r.SNMP: var n = { host: "localhost", port: 161, protocolVersion: N.V2C, community: "public" }; t = Object(l.a)(Object(l.a)({}, n), { type: r.SNMP }) }return t } !function (e) { e.SIMPLE = "SIMPLE", e.DURATION = "DURATION", e.REPEATING = "REPEATING" }(O || (O = {})); var A, R = new Map([[O.SIMPLE, "device-profile.condition-type-simple"], [O.DURATION, "device-profile.condition-type-duration"], [O.REPEATING, "device-profile.condition-type-repeating"]]); !function (e) { e.ANY_TIME = "ANY_TIME", e.SPECIFIC_TIME = "SPECIFIC_TIME", e.CUSTOM = "CUSTOM" }(A || (A = {})); var N, P, k = new Map([[A.ANY_TIME, "device-profile.schedule-any-time"], [A.SPECIFIC_TIME, "device-profile.schedule-specific-time"], [A.CUSTOM, "device-profile.schedule-custom"]]); function _(e) { return F(e.value) ? null : { alarmRule: !0 } } function F(e) { return !!(e && e.condition && e.condition.condition && e.condition.condition.length) } function L(e) { var t = e.value; if (t && t.id && t.alarmType && t.createRules) { var n = Object.keys(t.createRules); if (n.length) { for (var i = !0, r = 0, o = n; r < o.length; r++) { var a = o[r]; if (!F(t.createRules[a])) { i = !1; break } } if (i && t.clearRule && !F(t.clearRule) && (i = !1), i) return null } } return { deviceProfileAlarm: !0 } } !function (e) { e.V1 = "V1", e.V2C = "V2C", e.V3 = "V3" }(N || (N = {})), function (e) { e.SHA_1 = "SHA_1", e.SHA_224 = "SHA_224", e.SHA_256 = "SHA_256", e.SHA_384 = "SHA_384", e.SHA_512 = "SHA_512", e.MD5 = "MD%" }(P || (P = {})); var D, V = new Map([[P.SHA_1, "SHA-1"], [P.SHA_224, "SHA-224"], [P.SHA_256, "SHA-256"], [P.SHA_384, "SHA-384"], [P.SHA_512, "SHA-512"], [P.MD5, "MD5"]]); !function (e) { e.DES = "DES", e.AES_128 = "AES_128", e.AES_192 = "AES_192", e.AES_256 = "AES_256" }(D || (D = {})); var U, B = new Map([[D.DES, "DES"], [D.AES_128, "AES-128"], [D.AES_192, "AES-192"], [D.AES_256, "AES-256"]]); !function (e) { e.ACCESS_TOKEN = "ACCESS_TOKEN", e.X509_CERTIFICATE = "X509_CERTIFICATE", e.MQTT_BASIC = "MQTT_BASIC", e.LWM2M_CREDENTIALS = "LWM2M_CREDENTIALS" }(U || (U = {})); var G, q = new Map([[U.ACCESS_TOKEN, "Access token"], [U.X509_CERTIFICATE, "X.509"], [U.MQTT_BASIC, "MQTT Basic"], [U.LWM2M_CREDENTIALS, "LwM2M Credentials"]]), z = new Map([[r.DEFAULT, [U.ACCESS_TOKEN, U.X509_CERTIFICATE, U.MQTT_BASIC]], [r.MQTT, [U.ACCESS_TOKEN, U.X509_CERTIFICATE, U.MQTT_BASIC]], [r.COAP, [U.ACCESS_TOKEN, U.X509_CERTIFICATE]], [r.LWM2M, [U.LWM2M_CREDENTIALS]], [r.SNMP, [U.ACCESS_TOKEN]]]); !function (e) { e.SUCCESS = "SUCCESS", e.FAILURE = "FAILURE", e.CLAIMED = "CLAIMED" }(G || (G = {})); var H = new Array("device-profile.schedule-day.monday", "device-profile.schedule-day.tuesday", "device-profile.schedule-day.wednesday", "device-profile.schedule-day.thursday", "device-profile.schedule-day.friday", "device-profile.schedule-day.saturday", "device-profile.schedule-day.sunday"); function W(e) { switch (e) { case 0: return "device-profile.schedule-day.monday"; case 1: return this.translate.instant("device-profile.schedule-day.tuesday"); case 2: return this.translate.instant("device-profile.schedule-day.wednesday"); case 3: return this.translate.instant("device-profile.schedule-day.thursday"); case 4: return this.translate.instant("device-profile.schedule-day.friday"); case 5: return this.translate.instant("device-profile.schedule-day.saturday"); case 6: return this.translate.instant("device-profile.schedule-day.sunday") } } function Q(e) { return "number" == typeof e || null === e ? 0 : c.utc([1970, 0, 1, e.getHours(), e.getMinutes(), e.getSeconds(), 0]).valueOf() } function Y(e) { return void 0 === e && (e = 0), new Date(e + 60 * new Date(e).getTimezoneOffset() * 1e3) } function K(e) { return c("number" == typeof e || null === e ? [1970, 0, 1, 0, 0, 0, 0] : [1970, 0, 1, e.getHours(), e.getMinutes(), 0, 0]) } function X(e, t) { var n = K(e), i = K(t); return n < i ? '<span><span class="nowrap">' + n.format("hh:mm A") + '</span> \u2013 <span class="nowrap">' + i.format("hh:mm A") + "</span></span>" : 0 === n.valueOf() && 0 === i.valueOf() || n.isSame(c([1970, 0])) && i.isSame(c([1970, 0])) ? '<span><span class="nowrap">12:00 AM</span> \u2013 <span class="nowrap">12:00 PM</span></span>' : '<span><span class="nowrap">12:00 AM</span> \u2013 <span class="nowrap">' + i.format("hh:mm A") + '</span> and <span class="nowrap">' + n.format("hh:mm A") + '</span> \u2013 <span class="nowrap">12:00 PM</span></span>' } }, KEZ6: function (e, t, n) { "use strict"; n.d(t, "a", function () { return S }); var i = n("fXoL"), r = n("3Pt+"), o = n("lJxs"), a = n("vkgz"), s = n("w1tV"), l = n("8LU1"), c = n("5xOD"), u = n("//Q6"), d = n("oKkZ"), p = n("C/rb"), m = n("l7P3"), f = n("kmnG"), h = n("d3UM"), g = n("ofXK"), y = n("sYmb"), b = n("FKr1"); function v(e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "span", 5), i["\u0275\u0275text"](1, "widgets-bundle.system"), i["\u0275\u0275elementEnd"]()) } function E(e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "span", 5), i["\u0275\u0275text"](1, "widgets-bundle.system"), i["\u0275\u0275elementEnd"]()) } function T(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-option", 6), i["\u0275\u0275elementStart"](1, "div", 2), i["\u0275\u0275elementStart"](2, "span"), i["\u0275\u0275text"](3), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](4, E, 2, 0, "span", 3), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit, r = i["\u0275\u0275nextContext"](); i["\u0275\u0275property"]("value", n), i["\u0275\u0275advance"](3), i["\u0275\u0275textInterpolate"](n.title), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngIf", r.isSystem(n)) } } var S = function () { function e(e, t) { this.store = e, this.widgetService = t, this.propagateChange = function (e) { } } return Object.defineProperty(e.prototype, "required", { get: function () { return this.requiredValue }, set: function (e) { this.requiredValue = Object(l.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.ngOnInit = function () { var e = this; this.widgetsBundles$ = this.getWidgetsBundles().pipe(Object(o.a)(function (t) { return Object(p.a)(e.store).edgesSupportEnabled || (t = t.filter(function (e) { return "edge_widgets" !== e.alias })), t }), Object(a.a)(function (t) { e.widgetsBundles = t, e.selectFirstBundle && t.length > 0 && (e.widgetsBundle !== t[0] ? (e.widgetsBundle = t[0], e.updateView()) : Object(u.n)(e.selectBundleAlias) && e.selectWidgetsBundleByAlias(e.selectBundleAlias)) }), Object(s.a)()) }, e.prototype.ngOnChanges = function (e) { for (var t = 0, n = Object.keys(e); t < n.length; t++) { var i = n[t], r = e[i]; r.firstChange || r.currentValue === r.previousValue || "selectBundleAlias" === i && this.selectWidgetsBundleByAlias(this.selectBundleAlias) } }, e.prototype.setDisabledState = function (e) { this.disabled = e }, e.prototype.writeValue = function (e) { this.widgetsBundle = e }, e.prototype.widgetsBundleChanged = function () { this.updateView() }, e.prototype.isSystem = function (e) { return e && e.tenantId.id === d.a }, e.prototype.selectWidgetsBundleByAlias = function (e) { if (this.widgetsBundles && e) { var t = this.widgetsBundles.find(function (t) { return t.alias === e }); t && this.widgetsBundle !== t && (this.widgetsBundle = t, this.updateView()) } else this.widgetsBundle && (this.widgetsBundle = null, this.updateView()) }, e.prototype.updateView = function () { this.propagateChange(this.widgetsBundle) }, e.prototype.getWidgetsBundles = function () { var e; return this.bundlesScope ? "system" === this.bundlesScope ? e = this.widgetService.getSystemWidgetsBundles() : "tenant" === this.bundlesScope && (e = this.widgetService.getTenantWidgetsBundles()) : e = this.widgetService.getAllWidgetsBundles(), e }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](m.Store), i["\u0275\u0275directiveInject"](c.a)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-widgets-bundle-select"]], inputs: { bundlesScope: "bundlesScope", selectFirstBundle: "selectFirstBundle", selectBundleAlias: "selectBundleAlias", required: "required", disabled: "disabled" }, features: [i["\u0275\u0275ProvidersFeature"]([{ provide: r.NG_VALUE_ACCESSOR, useExisting: Object(i.forwardRef)(function () { return e }), multi: !0 }]), i["\u0275\u0275NgOnChangesFeature"]], decls: 11, vars: 11, consts: [["floatLabel", "always", "hideRequiredMarker", "", 1, "mat-block"], ["matInput", "", "panelClass", "tb-widgets-bundle-select", 3, "required", "disabled", "ngModel", "placeholder", "ngModelChange"], [1, "tb-bundle-item"], ["translate", "", "class", "tb-bundle-system", 4, "ngIf"], [3, "value", 4, "ngFor", "ngForOf"], ["translate", "", 1, "tb-bundle-system"], [3, "value"]], template: function (e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "mat-form-field", 0), i["\u0275\u0275element"](1, "mat-label"), i["\u0275\u0275elementStart"](2, "mat-select", 1), i["\u0275\u0275listener"]("ngModelChange", function (e) { return t.widgetsBundle = e })("ngModelChange", function () { return t.widgetsBundleChanged() }), i["\u0275\u0275pipe"](3, "translate"), i["\u0275\u0275elementStart"](4, "mat-select-trigger"), i["\u0275\u0275elementStart"](5, "div", 2), i["\u0275\u0275elementStart"](6, "span"), i["\u0275\u0275text"](7), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](8, v, 2, 0, "span", 3), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](9, T, 5, 3, "mat-option", 4), i["\u0275\u0275pipe"](10, "async"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275advance"](2), i["\u0275\u0275propertyInterpolate"]("placeholder", i["\u0275\u0275pipeBind1"](3, 7, "widget.select-widgets-bundle")), i["\u0275\u0275property"]("required", t.required)("disabled", t.disabled)("ngModel", t.widgetsBundle), i["\u0275\u0275advance"](5), i["\u0275\u0275textInterpolate"](null == t.widgetsBundle ? null : t.widgetsBundle.title), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngIf", t.isSystem(t.widgetsBundle)), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngForOf", i["\u0275\u0275pipeBind1"](10, 9, t.widgetsBundles$))) }, directives: [f.MatFormField, f.MatLabel, h.MatSelect, r.RequiredValidator, r.NgControlStatus, r.NgModel, h.MatSelectTrigger, g.NgIf, g.NgForOf, y.TranslateDirective, b.MatOption], pipes: [y.TranslatePipe, g.AsyncPipe], styles: ["tb-widgets-bundle-select mat-select{margin:0}tb-widgets-bundle-select .tb-bundle-item{height:26px;line-height:26px}.tb-widgets-bundle-select .tb-bundle-item{height:48px;line-height:48px}.tb-widgets-bundle-select .mat-select-value-text,tb-widgets-bundle-select .mat-select-value-text{display:block;width:100%}.tb-widgets-bundle-select .tb-bundle-item,tb-widgets-bundle-select .tb-bundle-item{display:inline-block;width:100%}.tb-widgets-bundle-select .tb-bundle-item span,tb-widgets-bundle-select .tb-bundle-item span{display:inline-block;vertical-align:middle}.tb-widgets-bundle-select .tb-bundle-item .tb-bundle-system,tb-widgets-bundle-select .tb-bundle-item .tb-bundle-system{float:right;font-size:.8rem;opacity:.8}.tb-widgets-bundle-select mat-option,tb-widgets-bundle-select mat-option{height:auto!important;white-space:normal!important}mat-toolbar tb-widgets-bundle-select .mat-form-field-wrapper{padding-bottom:0!important}mat-toolbar tb-widgets-bundle-select .mat-form-field-wrapper .mat-form-field-infix{background:hsla(0,0%,100%,.2);padding:5px 20px!important;border:none}mat-toolbar tb-widgets-bundle-select .mat-form-field-wrapper .mat-form-field-infix mat-select .mat-select-value-text{font-size:1.2rem;color:#fff}mat-toolbar tb-widgets-bundle-select .mat-form-field-wrapper .mat-form-field-infix mat-select .mat-select-value-text span:first-child:after{color:#fff}mat-toolbar tb-widgets-bundle-select .mat-form-field-wrapper .mat-form-field-infix mat-select .mat-select-value{vertical-align:middle;min-height:30px;height:30px;padding:2px 2px 1px}mat-toolbar tb-widgets-bundle-select .mat-form-field-wrapper .mat-form-field-infix mat-select .mat-select-value .mat-select-placeholder{color:#fff;opacity:.8;line-height:26px}mat-toolbar tb-widgets-bundle-select .mat-form-field-wrapper .mat-form-field-infix .mat-select.mat-select-invalid .mat-select-arrow{color:#fff!important}@media screen and (max-width:599px){mat-toolbar tb-widgets-bundle-select .mat-form-field-wrapper .mat-form-field-infix{width:auto}}mat-toolbar tb-widgets-bundle-select .mat-form-field-wrapper .mat-form-field-underline{display:none}"], encapsulation: 2 }), e }(); 0, void 0 }, KMMH: function (e, t, n) { "use strict"; n.d(t, "a", function () { return r }); var i = n("U3y+"), r = function (e) { this.entityType = i.b.TENANT, this.id = e } }, Ki3a: function (e, t, n) { "use strict"; n.d(t, "a", function () { return r }); var i = n("fXoL"), r = function () { function e() { } return e.prototype.transform = function (e, t) { return e ? e.replace(/ /g, "") : "" }, e.\u0275fac = function (t) { return new (t || e) }, e.\u0275pipe = i["\u0275\u0275definePipe"]({ name: "nospace", type: e, pure: !0 }), e }(); 0, void 0 }, MBk6: function (e, t, n) { "use strict"; var i; n.d(t, "a", function () { return i }), n.d(t, "b", function () { return r }), function (e) { e.singleEntity = "singleEntity", e.entityList = "entityList", e.entityName = "entityName", e.entityType = "entityType", e.stateEntity = "stateEntity", e.assetType = "assetType", e.deviceType = "deviceType", e.edgeType = "edgeType", e.entityViewType = "entityViewType", e.apiUsageState = "apiUsageState", e.relationsQuery = "relationsQuery", e.assetSearchQuery = "assetSearchQuery", e.deviceSearchQuery = "deviceSearchQuery", e.edgeSearchQuery = "edgeSearchQuery", e.entityViewSearchQuery = "entityViewSearchQuery" }(i || (i = {})); var r = new Map([[i.singleEntity, "alias.filter-type-single-entity"], [i.entityList, "alias.filter-type-entity-list"], [i.entityName, "alias.filter-type-entity-name"], [i.entityType, "alias.filter-type-entity-type"], [i.stateEntity, "alias.filter-type-state-entity"], [i.assetType, "alias.filter-type-asset-type"], [i.deviceType, "alias.filter-type-device-type"], [i.edgeType, "alias.filter-type-edge-type"], [i.entityViewType, "alias.filter-type-entity-view-type"], [i.apiUsageState, "alias.filter-type-apiUsageState"], [i.relationsQuery, "alias.filter-type-relations-query"], [i.assetSearchQuery, "alias.filter-type-asset-search-query"], [i.deviceSearchQuery, "alias.filter-type-device-search-query"], [i.edgeSearchQuery, "alias.filter-type-edge-search-query"], [i.entityViewSearchQuery, "alias.filter-type-entity-view-search-query"]]) }, NOb7: function (e, t, n) { "use strict"; (function (e) { n.d(t, "a", function () { return a }); var i = n("fXoL"), r = n("8LU1"), o = n("//Q6"), a = function () { function t(e, t) { this.elementRef = e, this.ngZone = t } return Object.defineProperty(t.prototype, "enableSearch", { get: function () { return this.enableSearchValue }, set: function (e) { this.enableSearchValue = Object(r.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), t.prototype.ngOnInit = function () { this.initTree() }, t.prototype.initTree = function () { var t = this, i = { core: { worker: !1, multiple: !1, check_callback: !0, themes: { name: "proton", responsive: !0 }, data: function (e, n) { var i = function (e) { var t = []; e && e.forEach(function (e) { t.push(Object(o.e)(e, ["data"])) }), n(t) }; t.ngZone.runOutsideAngular(function () { t.loadNodes(e, i) }) }, error: function () { console.error("Unexpected jstree error!") } }, plugins: [] }; this.enableSearch && (i.plugins.push("search"), i.search = { ajax: !1, fuzzy: !1, close_opened_onclear: !0, case_sensitive: !1, show_only_matches: !0, show_only_matches_children: !1, search_leaves_only: !1, search_callback: this.searchCallback }), n.e(53).then(n.t.bind(null, "bI4t", 7)).then(function () { t.treeElement = e(".tb-nav-tree-container", t.elementRef.nativeElement).jstree(i), t.treeElement.on("changed.jstree", function (e, n) { var i = n.instance.get_selected(!0)[0]; t.onNodeSelected && t.ngZone.run(function () { return t.onNodeSelected(i, e) }) }), t.treeElement.on("model.jstree", function (e, n) { t.onNodesInserted && t.ngZone.run(function () { return t.onNodesInserted(n.nodes, n.parent) }) }), t.editCallbacks && (t.editCallbacks.selectNode = function (e) { var n = t.treeElement.jstree("get_node", e); n && (t.treeElement.jstree("deselect_all", !0), t.treeElement.jstree("select_node", n)) }, t.editCallbacks.deselectAll = function () { t.treeElement.jstree("deselect_all") }, t.editCallbacks.getNode = function (e) { return t.treeElement.jstree("get_node", e) }, t.editCallbacks.getParentNodeId = function (e) { var n = t.treeElement.jstree("get_node", e); if (n) return t.treeElement.jstree("get_parent", n) }, t.editCallbacks.openNode = function (e, n) { var i = t.treeElement.jstree("get_node", e); i && t.treeElement.jstree("open_node", i, n) }, t.editCallbacks.nodeIsOpen = function (e) { var n = t.treeElement.jstree("get_node", e); return !n || t.treeElement.jstree("is_open", n) }, t.editCallbacks.nodeIsLoaded = function (e) { var n = t.treeElement.jstree("get_node", e); return !n || t.treeElement.jstree("is_loaded", n) }, t.editCallbacks.refreshNode = function (e) { if ("#" === e) t.treeElement.jstree("refresh"), t.treeElement.jstree("redraw"); else { var n = t.treeElement.jstree("get_node", e); if (n) { var i = t.treeElement.jstree("is_open", n); t.treeElement.jstree("refresh_node", n), t.treeElement.jstree("redraw"), n.children && i && t.treeElement.jstree("open_node", n) } } }, t.editCallbacks.updateNode = function (e, n) { var i = t.treeElement.jstree("get_node", e); i && t.treeElement.jstree("rename_node", i, n) }, t.editCallbacks.createNode = function (e, n, i) { var r = t.treeElement.jstree("get_node", e); r && t.treeElement.jstree("create_node", r, n, i) }, t.editCallbacks.deleteNode = function (e) { var n = t.treeElement.jstree("get_node", e); n && t.treeElement.jstree("delete_node", n) }, t.editCallbacks.disableNode = function (e) { var n = t.treeElement.jstree("get_node", e); n && t.treeElement.jstree("disable_node", n) }, t.editCallbacks.enableNode = function (e) { var n = t.treeElement.jstree("get_node", e); n && t.treeElement.jstree("enable_node", n) }, t.editCallbacks.setNodeHasChildren = function (e, n) { var i = t.treeElement.jstree("get_node", e); i && (!i.children || Array.isArray(i.children) && !i.children.length) && (i.children = n, i.state.loaded = !n, i.state.opened = !1, t.treeElement.jstree("_node_changed", i.id), t.treeElement.jstree("redraw")) }, t.editCallbacks.search = function (e) { t.treeElement.jstree("search", e) }, t.editCallbacks.clearSearch = function () { t.treeElement.jstree("clear_search") }) }) }, t.\u0275fac = function (e) { return new (e || t)(i["\u0275\u0275directiveInject"](i.ElementRef), i["\u0275\u0275directiveInject"](i.NgZone)) }, t.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: t, selectors: [["tb-nav-tree"]], inputs: { enableSearch: "enableSearch", loadNodes: "loadNodes", searchCallback: "searchCallback", onNodeSelected: "onNodeSelected", onNodesInserted: "onNodesInserted", editCallbacks: "editCallbacks" }, decls: 1, vars: 0, consts: [[1, "tb-nav-tree-container"]], template: function (e, t) { 1 & e && i["\u0275\u0275element"](0, "div", 0) }, styles: ['.tb-nav-tree-container{padding:15px;font-family:Roboto,Helvetica Neue,sans-serif}.tb-nav-tree-container.jstree-proton-large .jstree-icon,.tb-nav-tree-container.jstree-proton-large .jstree-node,.tb-nav-tree-container.jstree-proton-small .jstree-icon,.tb-nav-tree-container.jstree-proton-small .jstree-node,.tb-nav-tree-container.jstree-proton .jstree-icon,.tb-nav-tree-container.jstree-proton .jstree-node{background-image:url(tb32px.b235808cfdb0a995153a.png)}.tb-nav-tree-container.jstree-proton-large .jstree-last,.tb-nav-tree-container.jstree-proton-small .jstree-last,.tb-nav-tree-container.jstree-proton .jstree-last{background:transparent}.tb-nav-tree-container.jstree-proton-large .jstree-themeicon-custom,.tb-nav-tree-container.jstree-proton-small .jstree-themeicon-custom,.tb-nav-tree-container.jstree-proton .jstree-themeicon-custom{background-image:none}.tb-nav-tree-container.jstree-proton .jstree-themeicon-custom.material-icons{font-size:18px}.tb-nav-tree-container.jstree-proton .jstree-anchor{font-size:16px}.tb-nav-tree-container.jstree-proton .jstree-file{background:url(tb32px.b235808cfdb0a995153a.png) -101px -69px no-repeat}.tb-nav-tree-container.jstree-proton .jstree-folder{background:url(tb32px.b235808cfdb0a995153a.png) -261px -5px no-repeat}.tb-nav-tree-container.jstree-proton-small .jstree-anchor,.tb-nav-tree-container.jstree-proton-small .jstree-themeicon-custom.material-icons{font-size:14px}.tb-nav-tree-container.jstree-proton-small .jstree-file{background:url(tb32px.b235808cfdb0a995153a.png) -103px -71px no-repeat}.tb-nav-tree-container.jstree-proton-small .jstree-folder{background:url(tb32px.b235808cfdb0a995153a.png) -263px -7px no-repeat}.tb-nav-tree-container.jstree-proton-large .jstree-themeicon-custom.material-icons{font-size:24px}.tb-nav-tree-container.jstree-proton-large .jstree-anchor{font-size:20px}.tb-nav-tree-container.jstree-proton-large .jstree-file{background:url(tb32px.b235808cfdb0a995153a.png) -96px -64px no-repeat}.tb-nav-tree-container.jstree-proton-large .jstree-folder{background:url(tb32px.b235808cfdb0a995153a.png) -256px 0 no-repeat}.tb-nav-tree-container a{border-bottom:none}.tb-nav-tree-container a i.jstree-themeicon-custom.tb-user-group:before{content:"account_circle"}.tb-nav-tree-container a i.jstree-themeicon-custom.tb-customer-group:before{content:"supervisor_account"}.tb-nav-tree-container a i.jstree-themeicon-custom.tb-asset-group:before{content:"domain"}.tb-nav-tree-container a i.jstree-themeicon-custom.tb-device-group:before{content:"devices_other"}.tb-nav-tree-container a i.jstree-themeicon-custom.tb-entity-view-group:before{content:"view_quilt"}.tb-nav-tree-container a i.jstree-themeicon-custom.tb-dashboard-group:before{content:"dashboard"}.tb-nav-tree-container a i.jstree-themeicon-custom.tb-customer:before{content:"supervisor_account"}#jstree-dnd.jstree-proton-large .jstree-er,#jstree-dnd.jstree-proton-large .jstree-ok,#jstree-dnd.jstree-proton-small .jstree-er,#jstree-dnd.jstree-proton-small .jstree-ok,#jstree-dnd.jstree-proton .jstree-er,#jstree-dnd.jstree-proton .jstree-ok{background-image:url(tb32px.b235808cfdb0a995153a.png)}@media (max-width:768px){.tb-nav-tree-container.jstree-proton-responsive .jstree-checkbox,.tb-nav-tree-container.jstree-proton-responsive .jstree-icon,.tb-nav-tree-container.jstree-proton-responsive .jstree-node,.tb-nav-tree-container.jstree-proton-responsive .jstree-node>.jstree-ocl,.tb-nav-tree-container.jstree-proton-responsive .jstree-themeicon{background-image:url(tb40px.4a7b4107b62ef059ba65.png);background-size:120px 240px}.tb-nav-tree-container.jstree-proton-responsive .jstree-container-ul{overflow:visible}.tb-nav-tree-container.jstree-proton-responsive .jstree-themeicon-custom{background-color:transparent;background-image:none;background-position:0 0}.tb-nav-tree-container.jstree-proton-responsive .jstree-themeicon-custom.material-icons{margin:0;font-size:24px}.tb-nav-tree-container.jstree-proton-responsive .jstree-leaf>.jstree-ocl,.tb-nav-tree-container.jstree-proton-responsive .jstree-node{background:0 0}.tb-nav-tree-container.jstree-proton-responsive .jstree-node{min-width:40px;min-height:40px;margin-left:40px;line-height:40px;white-space:nowrap;background-repeat:repeat-y;background-position:-80px 0}.tb-nav-tree-container.jstree-proton-responsive .jstree-last{background:0 0}.tb-nav-tree-container.jstree-proton-responsive .jstree-anchor{height:40px;font-size:1.1em;font-weight:700;line-height:40px;text-shadow:1px 1px #fff}.tb-nav-tree-container.jstree-proton-responsive .jstree-icon,.tb-nav-tree-container.jstree-proton-responsive .jstree-icon:empty{width:40px;height:40px;line-height:40px}.tb-nav-tree-container.jstree-proton-responsive>.jstree-container-ul>.jstree-node{margin-right:0;margin-left:0}.tb-nav-tree-container.jstree-proton-responsive .jstree-checkbox,.tb-nav-tree-container.jstree-proton-responsive .jstree-ocl,.tb-nav-tree-container.jstree-proton-responsive .jstree-themeicon{background-size:120px 240px}.tb-nav-tree-container.jstree-proton-responsive .jstree-leaf>.jstree-ocl{background-position:-40px -120px}.tb-nav-tree-container.jstree-proton-responsive .jstree-last>.jstree-ocl{background-position:-40px -160px}.tb-nav-tree-container.jstree-proton-responsive .jstree-open>.jstree-ocl{background-position:0 0!important}.tb-nav-tree-container.jstree-proton-responsive .jstree-closed>.jstree-ocl{background-position:0 -40px!important}.tb-nav-tree-container.jstree-proton-responsive .jstree-themeicon{background-position:-40px -40px}.tb-nav-tree-container.jstree-proton-responsive .jstree-file{background:url(tb40px.4a7b4107b62ef059ba65.png) 0 -160px no-repeat;background-size:120px 240px}.tb-nav-tree-container.jstree-proton-responsive .jstree-folder{background:url(tb40px.4a7b4107b62ef059ba65.png) -40px -40px no-repeat;background-size:120px 240px}.tb-nav-tree-container.jstree-proton-responsive .jstree-checkbox,.tb-nav-tree-container.jstree-proton-responsive .jstree-checkbox:hover{background-position:-40px -80px}.tb-nav-tree-container.jstree-proton-responsive.jstree-checkbox-selection .jstree-clicked>.jstree-checkbox,.tb-nav-tree-container.jstree-proton-responsive.jstree-checkbox-selection .jstree-clicked>.jstree-checkbox:hover,.tb-nav-tree-container.jstree-proton-responsive .jstree-checked>.jstree-checkbox,.tb-nav-tree-container.jstree-proton-responsive .jstree-checked>.jstree-checkbox:hover{background-position:0 -80px}.tb-nav-tree-container.jstree-proton-responsive .jstree-anchor>.jstree-undetermined,.tb-nav-tree-container.jstree-proton-responsive .jstree-anchor>.jstree-undetermined:hover{background-position:0 -120px}.tb-nav-tree-container.jstree-proton-responsive .jstree-striped{background:0 0}.tb-nav-tree-container.jstree-proton-responsive .jstree-wholerow{height:40px;background:#ebebeb;border-top:1px solid hsla(0,0%,100%,.7);border-bottom:1px solid rgba(64,64,64,.2)}.tb-nav-tree-container.jstree-proton-responsive .jstree-wholerow-hovered{background:#e7f4f9}.tb-nav-tree-container.jstree-proton-responsive .jstree-wholerow-clicked{background:#beebff}.tb-nav-tree-container.jstree-proton-responsive .jstree-children .jstree-last>.jstree-wholerow{box-shadow:inset 0 -6px 3px -5px #666}.tb-nav-tree-container.jstree-proton-responsive .jstree-children .jstree-open>.jstree-wholerow{border-top:0;box-shadow:inset 0 6px 3px -5px #666}.tb-nav-tree-container.jstree-proton-responsive .jstree-children .jstree-open+.jstree-open{box-shadow:none}.tb-nav-tree-container.jstree-proton-responsive.jstree-rtl .jstree-node{margin-right:40px;margin-left:0}.tb-nav-tree-container.jstree-proton-responsive.jstree-rtl .jstree-container-ul>.jstree-node{margin-right:0}.tb-nav-tree-container.jstree-proton-responsive.jstree-rtl .jstree-closed>.jstree-ocl{background-position:-40px 0!important}#jstree-dnd.jstree-dnd-responsive .jstree-er,#jstree-dnd.jstree-dnd-responsive .jstree-ok{background-image:url(tb40px.4a7b4107b62ef059ba65.png);background-size:120px 240px}#jstree-dnd.jstree-dnd-responsive .jstree-ok{background-position:0 -200px}#jstree-dnd.jstree-dnd-responsive .jstree-er{background-position:-40px -200px}}.tb-nav-tree .mat-button.tb-active{font-weight:500;background-color:hsla(0,0%,100%,.15)}.tb-nav-tree,.tb-nav-tree ul{margin-top:0;list-style:none}.tb-nav-tree:first-child,.tb-nav-tree ul:first-child{padding:0}.tb-nav-tree li .mat-button,.tb-nav-tree ul li .mat-button{width:100%;max-height:40px;padding:0 16px;margin:0;overflow:hidden;line-height:40px;color:inherit;text-align:left;text-decoration:none;text-overflow:ellipsis;text-transform:none;text-rendering:optimizeLegibility;white-space:nowrap;cursor:pointer;border-radius:0}.tb-nav-tree li .mat-button span,.tb-nav-tree ul li .mat-button span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}'], encapsulation: 2 }), t }(); 0, void 0 }).call(this, n("xexB")) }, NXKV: function (e, t, n) { "use strict"; n.d(t, "a", function () { return l }); var i = n("fXoL"), r = n("pLZG"), o = n("AytR"), a = n("sYmb"), s = n("jhN1"), l = function () { function e(e, t) { this.translate = e, this.title = t } return e.prototype.setTitle = function (e, t) { for (var n = this, i = e; i.children.length;)i = i.children[0]; var a = i.data.title, s = t || this.translate; a ? s.get(a).pipe(Object(r.a)(function (e) { return e !== a })).subscribe(function (e) { return n.title.setTitle(o.a.appTitle + " | " + e) }) : this.title.setTitle(o.a.appTitle) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275inject"](a.TranslateService), i["\u0275\u0275inject"](s.Title)) }, e.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, Nyw1: function (e, t, n) { "use strict"; n.d(t, "b", function () { return a }), n.d(t, "a", function () { return s }); var i = n("l7P3"), r = n("IzEk"), o = Object(i.createFeatureSelector)("load"), a = (Object(i.createSelector)(o, function (e) { return e }), Object(i.createSelector)(o, function (e) { return e.isLoading })); function s(e) { var t; return e.pipe(Object(i.select)(a), Object(r.a)(1)).subscribe(function (e) { return t = e }), t } }, OCOE: function (e, t, n) { "use strict"; n.d(t, "a", function () { return c }); var i = n("fXoL"), r = n("ofXK"), o = n("z6cu"), a = n("jtHE"), s = n("cp0P"), l = n("tk/3"), c = function () { function e(e, t, n, i) { this.document = e, this.compiler = t, this.http = n, this.injector = i, this.loadedResources = {}, this.loadedModules = {}, this.loadedFactories = {}, this.anchor = this.document.getElementsByTagName("head")[0] || this.document.getElementsByTagName("body")[0] } return e.prototype.loadResource = function (e) { if (this.loadedResources[e]) return this.loadedResources[e].asObservable(); var t, n = /[./](css|less|html|htm|js)?(([?#]).*)?$/.exec(e); return null !== n && (t = n[1]), t ? "css" !== t && "js" !== t ? Object(o.a)(new Error("Unsupported file type: " + t)) : this.loadResourceByType(t, e) : Object(o.a)(new Error("Unable to detect file type from url: " + e)) }, e.prototype.loadFactories = function (e, t) { var i = this; if (this.loadedFactories[e]) return this.loadedFactories[e].asObservable(); var r = new a.a; if (this.loadedFactories[e] = r, t) for (var o = 0, l = Object.keys(t); o < l.length; o++) { var c = l[o]; SystemJS.set(c, t[c]) } return SystemJS.import(e).then(function (t) { var r = i.extractNgModules(t); r.length ? Promise.all([n.e(2), n.e(5)]).then(n.bind(null, "1uSB")).then(function () { for (var t = [], n = 0, o = r; n < o.length; n++) { var a = o[n]; t.push(i.compiler.compileModuleAndAllComponentsAsync(a)) } Object(s.a)(t).subscribe(function (t) { try { for (var n = [], r = 0, o = t; r < o.length; r++) { var a = o[r]; a.ngModuleFactory.create(i.injector), n.push.apply(n, a.componentFactories) } i.loadedFactories[e].next(n), i.loadedFactories[e].complete() } catch (s) { i.loadedFactories[e].error(new Error("Unable to init module from url: " + e)), delete i.loadedFactories[e] } }, function (t) { i.loadedFactories[e].error(new Error("Unable to compile module from url: " + e)), delete i.loadedFactories[e] }) }) : (i.loadedFactories[e].error(new Error("Module '" + e + "' doesn't have default export!")), delete i.loadedFactories[e]) }, function (t) { i.loadedFactories[e].error(new Error("Unable to load module from url: " + e)), delete i.loadedFactories[e] }), r.asObservable() }, e.prototype.loadModules = function (e, t) { var i = this; if (this.loadedModules[e]) return this.loadedModules[e].asObservable(); var r = new a.a; if (this.loadedModules[e] = r, t) for (var o = 0, l = Object.keys(t); o < l.length; o++) { var c = l[o]; SystemJS.set(c, t[c]) } return SystemJS.import(e).then(function (t) { try { var r; try { r = i.extractNgModules(t) } catch (o) { console.error(o) } r && r.length ? Promise.all([n.e(2), n.e(5)]).then(n.bind(null, "1uSB")).then(function () { for (var t = [], n = 0, a = r; n < a.length; n++) { var l = a[n]; t.push(i.compiler.compileModuleAndAllComponentsAsync(l)) } Object(s.a)(t).subscribe(function (t) { try { for (var n = 0, a = t; n < a.length; n++) { a[n].ngModuleFactory.create(i.injector) } i.loadedModules[e].next(r), i.loadedModules[e].complete() } catch (o) { i.loadedModules[e].error(new Error("Unable to init module from url: " + e)), delete i.loadedModules[e] } }, function (t) { i.loadedModules[e].error(new Error("Unable to compile module from url: " + e)), delete i.loadedModules[e] }) }) : (i.loadedModules[e].error(new Error("Module '" + e + "' doesn't have default export or not NgModule!")), delete i.loadedModules[e]) } catch (o) { i.loadedModules[e].error(new Error("Unable to load module from url: " + e)), delete i.loadedModules[e] } }, function (t) { i.loadedModules[e].error(new Error("Unable to load module from url: " + e)), delete i.loadedModules[e], console.error("Unable to load module from url: " + e, t) }), r.asObservable() }, e.prototype.extractNgModules = function (e, t) { void 0 === t && (t = []); try { for (var n = [e], i = 0; n.length && i < 10;) { for (var r = [], o = 0, a = n; o < a.length; o++) { var s = a[o]; if (s && "\u0275mod" in s) t.push(s); else for (var l = 0, c = Object.keys(s); l < c.length; l++) { var u = c[l]; this.isPrimitive(s[u]) || r.push(s[u]) } } n = r, i++ } } catch (d) { console.log("Could not load NgModule", d) } return t }, e.prototype.isPrimitive = function (e) { return e !== Object(e) }, e.prototype.loadResourceByType = function (e, t) { var n, i = this, r = new a.a; this.loadedResources[t] = r; var o = !1; switch (e) { case "js": (n = this.document.createElement("script")).type = "text/javascript", n.async = !0, n.src = t; break; case "css": (n = this.document.createElement("link")).type = "text/css", n.rel = "stylesheet", n.href = t }return n.onload = n.onreadystatechange = function (e) { n.readyState && !/^c|loade/.test(n.readyState) || o || (n.onload = n.onreadystatechange = null, o = !0, i.loadedResources[t].next(), i.loadedResources[t].complete()) }, n.onerror = function () { i.loadedResources[t].error(new Error("Unable to load " + t)), delete i.loadedResources[t] }, this.anchor.appendChild(n), r.asObservable() }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275inject"](r.DOCUMENT), i["\u0275\u0275inject"](i.Compiler), i["\u0275\u0275inject"](l.HttpClient), i["\u0275\u0275inject"](i.Injector)) }, e.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, OiFK: function (e, t, n) { "use strict"; n.d(t, "a", function () { return I }); for (var i = n("fXoL"), r = n("wtyh"), o = n("//Q6"), a = n("he9t"), s = n("0lYY"), l = n("U3y+"), c = n("3Tyt"), u = n("UZbx"), d = n("7dgu"), p = n("gnU6"), m = n.n(p), f = n("u6cx"), h = n("LRne"), g = n("jtHE"), y = n("sYmb"), b = new RegExp("{" + a.k + ":[^{}]+}", "g"), v = { Sin: "return Math.round(1000*Math.sin(time/5000));", Cos: "return Math.round(1000*Math.cos(time/5000));", Random: "var value = prevValue + Math.random() * 100 - 50;\nvar multiplier = Math.pow(10, 2 || 0);\nvar value = Math.round(value * multiplier) / multiplier;\nif (value < -1000) {\n\tvalue = -1000;\n} else if (value > 1000) {\n\tvalue = 1000;\n}\nreturn value;" }, E = [], T = 0, S = Object.keys(v); T < S.length; T++) { var C = S[T]; E.push(C) } var O = [u.e.createdTime.keyName, u.e.originator.keyName, u.e.type.keyName, u.e.severity.keyName, u.e.status.keyName], w = ["more_horiz", "more_vert", "open_in_new", "visibility", "play_arrow", "arrow_back", "arrow_downward", "arrow_forward", "arrow_upwards", "close", "refresh", "menu", "show_chart", "multiline_chart", "pie_chart", "insert_chart", "people", "person", "domain", "devices_other", "now_widgets", "dashboards", "map", "pin_drop", "my_location", "extension", "search", "settings", "notifications", "notifications_active", "info", "info_outline", "warning", "list", "file_download", "import_export", "share", "add", "edit", "done"], I = function () { function e(e, t, n) { this.window = e, this.zone = t, this.translate = n, this.iframeMode = !1, this.widgetEditMode = !1, this.editWidgetInfo = null, this.defaultDataKey = { name: "f(x)", type: c.h.function, label: "Sin", color: this.getMaterialColor(0), funcBody: this.getPredefinedFunctionBody("Sin"), settings: {}, _hash: Math.random() }, this.defaultDatasource = { type: s.a.function, name: s.a.function, dataKeys: [Object(o.e)(this.defaultDataKey)] }, this.defaultAlarmDataKeys = [], this.materialIcons = []; var i = null; try { i = e.frameElement } catch (a) { } if (i) { this.iframeMode = !0; var r = i.getAttribute("data-widget"); r && r.length && (this.editWidgetInfo = JSON.parse(r), this.widgetEditMode = !0) } } return e.prototype.getPredefinedFunctionsList = function () { return E }, e.prototype.getPredefinedFunctionBody = function (e) { return v[e] }, e.prototype.getDefaultDatasource = function (e) { var t = Object(o.e)(this.defaultDatasource); return Object(o.n)(e) && (t.dataKeys[0].settings = this.generateObjectFromJsonSchema(e)), t }, e.prototype.initDefaultAlarmDataKeys = function () { for (var e = 0; e < O.length; e++) { var t = O[e], n = { name: t, type: c.h.alarm, label: this.translate.instant(u.e[t].name), color: this.getMaterialColor(e), settings: {}, _hash: Math.random() }; this.defaultAlarmDataKeys.push(n) } }, e.prototype.getDefaultAlarmDataKeys = function () { return this.defaultAlarmDataKeys.length || this.initDefaultAlarmDataKeys(), Object(o.e)(this.defaultAlarmDataKeys) }, e.prototype.generateObjectFromJsonSchema = function (e) { var t = m()(e); return Object(o.g)(t), t }, e.prototype.processWidgetException = function (e) { var t = this.parseException(e, -6); if (this.widgetEditMode) { var n = { type: "widgetException", data: t }; this.window.parent.postMessage(JSON.stringify(n), "*") } return t }, e.prototype.parseException = function (e, t) { var n = {}; if (e) if ("string" == typeof e) n.message = e; else if (e instanceof String) n.message = e.toString(); else if (e.name ? n.name = e.name : n.name = "UnknownError", e.message && (n.message = e.message), e.lineNumber) n.lineNumber = e.lineNumber, e.columnNumber && (n.columnNumber = e.columnNumber); else if (e.stack) { var i = /(.*<anonymous>):(\d*)(:)?(\d*)?/g.exec(e.stack); null != i && i.length >= 3 && (Object(o.B)(t) && (t = -2), n.lineNumber = Number(i[2]) + t, i.length >= 5 && (n.columnNumber = Number(i[4]))) } return n }, e.prototype.customTranslation = function (e, t) { if (e && Object(o.A)(e)) { if (e.includes("{" + a.k)) { for (var n = e.match(b), i = e, r = 0, s = n; r < s.length; r++) { var l = s[r], c = l.substring(6, l.length - 1); i = i.replace(l, this.doTranslate(c, l)) } return i } return this.doTranslate(e, t, a.j) } return e }, e.prototype.doTranslate = function (e, t, n) { var i; i = n ? n + e : e; var r = this.translate.instant(i); return r !== i ? r + "" : t }, e.prototype.guid = function () { return Object(o.k)() }, e.prototype.validateDatasources = function (e) { return e.forEach(function (e) { "device" === e.type && (e.type = s.a.entity, e.entityType = l.b.DEVICE, e.deviceId ? e.entityId = e.deviceId : e.deviceAliasId && (e.entityAliasId = e.deviceAliasId), e.deviceName && (e.entityName = e.deviceName)), e.type === s.a.entity && e.entityId && (e.name = e.entityName), e.dataKeys || (e.dataKeys = []) }), e }, e.prototype.getMaterialIcons = function () { var e = this; if (this.materialIcons.length) return Object(h.a)(this.materialIcons); var t = new g.a; return this.zone.runOutsideAngular(function () { f.a.split("\n").filter(function (e) { return e && e.length }).forEach(function (t) { var n = t.split(" "); n && 2 === n.length && e.materialIcons.push(n[0]) }), t.next(e.materialIcons) }), t.asObservable() }, e.prototype.getCommonMaterialIcons = function () { return w }, e.prototype.getMaterialColor = function (e) { var t = e % d.b.length; return d.b[t].value }, e.prototype.createKey = function (e, t, n) { var i; if (void 0 === n && (n = -1), t === c.h.alarm && !e.label) { var r = u.e[e.name]; r && (i = this.translate.instant(r.name)) } i || (i = e.label || e.name); var a = { name: e.name, type: t, label: i, funcBody: e.funcBody, settings: {}, _hash: Math.random() }; return e.units && (a.units = e.units), Object(o.n)(e.decimals) && (a.decimals = e.decimals), e.color ? a.color = e.color : n > -1 && (a.color = this.getMaterialColor(n)), e.postFuncBody && e.postFuncBody.length && (a.usePostProcessing = !0, a.postFuncBody = e.postFuncBody), a }, e.prototype.createLabelFromDatasource = function (e, t) { return Object(o.d)(e, t) }, e.prototype.generateColors = function (e) { var t = this, n = 0; e.forEach(function (e) { e.dataKeys.forEach(function (e) { e.color || (e.color = t.getMaterialColor(n)), n++ }) }) }, e.prototype.currentPerfTime = function () { return this.window.performance && this.window.performance.now ? this.window.performance.now() : Date.now() }, e.prototype.getQueryParam = function (e) { var t = this.window.location.href; e = e.replace(/[\[\]]/g, "\\$&"); var n = new RegExp("[?&]" + e + "(=([^&#]*)|&|#|$)").exec(t); return n ? n[2] ? decodeURIComponent(n[2].replace(/\+/g, " ")) : "" : null }, e.prototype.removeQueryParams = function (e) { for (var t = this.window.location.search, n = 0, i = e; n < i.length; n++) { var r = i[n]; t = this.updateUrlQueryString(t, r, null) } var a = [Object(o.c)(), this.window.location.pathname].join(""); this.window.history.replaceState({}, "", a + t) }, e.prototype.updateQueryParam = function (e, t) { var n = [Object(o.c)(), this.window.location.pathname].join(""), i = this.window.location.search, r = this.updateUrlQueryString(i, e, t); this.window.history.replaceState({}, "", n + r) }, e.prototype.updateUrlQueryString = function (e, t, n) { var i = "", r = ""; if (null !== n && (i = t + "=" + n), e) { var o = new RegExp("([?&])" + t + "[^&]*"); null !== e.match(o) ? (i && (i = "$1" + i), (r = e.replace(o, i)).startsWith("&") && (r = "?" + r.substring(1))) : i && (r = e + "&" + i) } else i && (r = "?" + i); return r }, e.prototype.baseUrl = function () { return Object(o.c)() }, e.prototype.deepClone = function (e, t) { return Object(o.e)(e, t) }, e.prototype.isUndefined = function (e) { return Object(o.B)(e) }, e.prototype.isDefined = function (e) { return Object(o.n)(e) }, e.prototype.defaultValue = function (e, t) { return Object(o.o)(e) ? e : t }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275inject"](r.b), i["\u0275\u0275inject"](i.NgZone), i["\u0275\u0275inject"](y.TranslateService)) }, e.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, PCNd: function (e, t, n) { "use strict"; n.d(t, "a", function () { return pn }); var i = n("fXoL"), r = n("ofXK"), o = function () { function e() { this.year = (new Date).getFullYear() } return e.\u0275fac = function (t) { return new (t || e) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-footer"]], decls: 3, vars: 1, consts: [[1, "footer-text"]], template: function (e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "section", 0), i["\u0275\u0275elementStart"](1, "small"), i["\u0275\u0275text"](2), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275advance"](2), i["\u0275\u0275textInterpolate1"]("Copyright \xa9 ", t.year, " The ThingsBoard Authors")) }, styles: [".footer-text[_ngcontent-%COMP%]{position:absolute;width:100%;bottom:20px;margin:0;left:0;line-height:20px;text-align:center}.footer-text[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:14px;color:#98a6ad}"] }), e }(); 0, void 0; var a = n("1wU7"), s = n("rezs"), l = n("HKgb"), c = n("3TNn"), u = n("/Vd+"), d = n("68fv"), p = n.n(d), m = n("/1cH"), f = n("bTqV"), h = n("Wp6s"), g = n("bSwM"), y = n("A5z7"), b = n("iadO"), v = n("0IaG"), E = n("f0Cb"), T = n("7EHt"), S = n("zkoq"), C = n("NFeN"), O = n("qFsG"), w = n("STbY"), I = n("M9IT"), x = n("bv9b"), M = n("Xa2L"), j = n("QibW"), A = n("d3UM"), R = n("XhcP"), N = n("1jcm"), P = n("5RNC"), k = n("dNgK"), _ = n("Dh3D"), F = n("xHqg"), L = n("+0xr"), D = n("wZkO"), V = n("/t3+"), U = n("Qu3c"), B = n("MutI"), G = n("xoCY"), q = n("YhS8"), z = n("Ljk9"), H = n("YUcS"), W = n("3Pt+"), Q = n("tyNb"), Y = n("iQdX"), K = n("yl57"), X = n("R9Cn"), J = n("joFe"), $ = n("efJA"), Z = n("Ki3a"), ee = n("sYmb"), te = n("Ww7o"), ne = n("kRCp"), ie = n("HnHJ"), re = n("z36O"), oe = n("k81w"), ae = n("rDax"), se = n("j+T/"), le = n("k9IB"), ce = n("8LU1"), ue = n("XiUz"), de = n("znSr"), pe = n("kmnG"), me = n("FKr1"); function fe(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-option", 18), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit; i["\u0275\u0275property"]("value", n.value), i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"](" ", i["\u0275\u0275pipeBind2"](2, 2, n.name, n.translateParams), " ") } } var he = function () { function e(e) { this.timeService = e, this.isEditValue = !1, this.hideFlagValue = !1, this.hideFlagChange = new i.EventEmitter, this.days = 0, this.hours = 0, this.mins = 1, this.secs = 0, this.intervalMs = 0, this.advanced = !1, this.rendered = !1, this.propagateChange = function (e) { } } return Object.defineProperty(e.prototype, "min", { set: function (e) { void 0 !== e && e !== this.minValue && (this.minValue = e, this.maxValue = Math.max(this.maxValue, this.minValue), this.updateView()) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "max", { set: function (e) { void 0 !== e && e !== this.maxValue && (this.maxValue = e, this.minValue = Math.min(this.minValue, this.maxValue), this.updateView()) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "isEdit", { get: function () { return this.isEditValue }, set: function (e) { this.isEditValue = Object(ce.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "hideFlag", { get: function () { return this.hideFlagValue }, set: function (e) { this.hideFlagValue = e }, enumerable: !1, configurable: !0 }), e.prototype.ngOnInit = function () { this.boundInterval() }, e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.setDisabledState = function (e) { this.disabled = e }, e.prototype.writeValue = function (e) { if (this.modelValue = e, this.rendered = !0, void 0 !== this.modelValue) { var t = this.timeService.boundMinInterval(this.minValue), n = this.timeService.boundMaxInterval(this.maxValue); this.modelValue >= t && this.modelValue <= n ? (this.advanced = !this.timeService.matchesExistingInterval(this.minValue, this.maxValue, this.modelValue), this.setIntervalMs(this.modelValue)) : this.boundInterval() } }, e.prototype.setIntervalMs = function (e) { this.advanced || (this.intervalMs = e); var t = Math.floor(e / 1e3); this.days = Math.floor(t / 86400), this.hours = Math.floor(t % 86400 / 3600), this.mins = Math.floor(t % 86400 % 3600 / 60), this.secs = t % 60 }, e.prototype.boundInterval = function () { var e = this.timeService.boundMinInterval(this.minValue), t = this.timeService.boundMaxInterval(this.maxValue); if (this.intervals = this.timeService.getIntervals(this.minValue, this.maxValue), this.rendered) { var n = this.modelValue; n < e ? n = e : n > t && (n = t), this.advanced || (n = this.timeService.boundToPredefinedInterval(e, t, n)), n !== this.modelValue && (this.setIntervalMs(n), this.updateView()) } }, e.prototype.updateView = function () { if (this.rendered) { var e, t = null; this.advanced ? e = this.calculateIntervalMs() : (e = this.intervalMs) && !isNaN(e) || (e = this.calculateIntervalMs()), !isNaN(e) && e > 0 && (t = e), this.modelValue = t, this.propagateChange(this.modelValue), this.boundInterval() } }, e.prototype.calculateIntervalMs = function () { return 1e3 * (86400 * this.days + 3600 * this.hours + 60 * this.mins + this.secs) }, e.prototype.onIntervalMsChange = function () { this.updateView() }, e.prototype.onAdvancedChange = function () { if (this.advanced) { var e = this.intervalMs; e && !isNaN(e) || (e = this.calculateIntervalMs()), this.setIntervalMs(e) } else this.intervalMs = this.calculateIntervalMs(); this.updateView() }, e.prototype.onHideFlagChange = function () { this.hideFlagChange.emit(this.hideFlagValue) }, e.prototype.onTimeInputChange = function (e) { var t = this; switch (e) { case "secs": setTimeout(function () { return t.onSecsChange() }, 0); break; case "mins": setTimeout(function () { return t.onMinsChange() }, 0); break; case "hours": setTimeout(function () { return t.onHoursChange() }, 0); break; case "days": setTimeout(function () { return t.onDaysChange() }, 0) } }, e.prototype.onSecsChange = function () { void 0 !== this.secs && (this.secs < 0 ? this.days + this.hours + this.mins > 0 ? (this.secs = this.secs + 60, this.mins--, this.onMinsChange()) : this.secs = 0 : this.secs >= 60 && (this.secs = this.secs - 60, this.mins++, this.onMinsChange()), this.updateView()) }, e.prototype.onMinsChange = function () { void 0 !== this.mins && (this.mins < 0 ? this.days + this.hours > 0 ? (this.mins = this.mins + 60, this.hours--, this.onHoursChange()) : this.mins = 0 : this.mins >= 60 && (this.mins = this.mins - 60, this.hours++, this.onHoursChange()), this.updateView()) }, e.prototype.onHoursChange = function () { void 0 !== this.hours && (this.hours < 0 ? this.days > 0 ? (this.hours = this.hours + 24, this.days--, this.onDaysChange()) : this.hours = 0 : this.hours >= 24 && (this.hours = this.hours - 24, this.days++, this.onDaysChange()), this.updateView()) }, e.prototype.onDaysChange = function () { void 0 !== this.days && (this.days < 0 && (this.days = 0), this.updateView()) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](le.a)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-timeinterval"]], inputs: { min: "min", max: "max", predefinedName: "predefinedName", isEdit: "isEdit", hideFlag: "hideFlag", disabled: "disabled" }, outputs: { hideFlagChange: "hideFlagChange" }, features: [i["\u0275\u0275ProvidersFeature"]([{ provide: W.NG_VALUE_ACCESSOR, useExisting: Object(i.forwardRef)(function () { return e }), multi: !0 }])], decls: 35, vars: 20, consts: [["fxLayout", "row"], ["fxLayout", "column", 3, "fxShow"], ["translate", "", 1, "tb-small", "hide-label"], [3, "ngModel", "ngModelChange"], ["fxLayout", "column", "fxFlex", "", 1, "interval-section", 3, "fxShow"], ["translate", "", 1, "tb-small", "interval-label"], ["fxLayout", "row wrap", "fxLayoutAlign", "start start", "fxFlex", "", "fxLayoutGap", "6px"], [1, "number-input"], ["translate", ""], ["matInput", "", "type", "number", "step", "1", "min", "0", 3, "disabled", "ngModel", "ngModelChange"], ["matInput", "", "type", "number", "step", "1", 3, "disabled", "ngModel", "ngModelChange"], ["fxLayout", "row", "fxFlex", "", 1, "interval-section", 3, "fxShow"], ["fxFlex", ""], [2, "min-width", "150px", 3, "disabled", "ngModel", "ngModelChange"], [3, "value", 4, "ngFor", "ngForOf"], ["fxLayout", "column", "fxLayoutAlign", "center center", 3, "fxShow"], ["translate", "", 1, "tb-small", "advanced-label"], [1, "advanced-switch", 3, "disabled", "ngModel", "ngModelChange"], [3, "value"]], template: function (e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "section", 0), i["\u0275\u0275elementStart"](1, "section", 1), i["\u0275\u0275elementStart"](2, "label", 2), i["\u0275\u0275text"](3, "timewindow.hide"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](4, "mat-checkbox", 3), i["\u0275\u0275listener"]("ngModelChange", function (e) { return t.hideFlag = e })("ngModelChange", function () { return t.onHideFlagChange() }), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](5, "section", 4), i["\u0275\u0275elementStart"](6, "label", 5), i["\u0275\u0275text"](7), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](8, "section", 6), i["\u0275\u0275elementStart"](9, "mat-form-field", 7), i["\u0275\u0275elementStart"](10, "mat-label", 8), i["\u0275\u0275text"](11, "timeinterval.days"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](12, "input", 9), i["\u0275\u0275listener"]("ngModelChange", function (e) { return t.days = e })("ngModelChange", function () { return t.onTimeInputChange("days") }), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](13, "mat-form-field", 7), i["\u0275\u0275elementStart"](14, "mat-label", 8), i["\u0275\u0275text"](15, "timeinterval.hours"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](16, "input", 10), i["\u0275\u0275listener"]("ngModelChange", function (e) { return t.hours = e })("ngModelChange", function () { return t.onTimeInputChange("hours") }), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](17, "mat-form-field", 7), i["\u0275\u0275elementStart"](18, "mat-label", 8), i["\u0275\u0275text"](19, "timeinterval.minutes"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](20, "input", 10), i["\u0275\u0275listener"]("ngModelChange", function (e) { return t.mins = e })("ngModelChange", function () { return t.onTimeInputChange("mins") }), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](21, "mat-form-field", 7), i["\u0275\u0275elementStart"](22, "mat-label", 8), i["\u0275\u0275text"](23, "timeinterval.seconds"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](24, "input", 10), i["\u0275\u0275listener"]("ngModelChange", function (e) { return t.secs = e })("ngModelChange", function () { return t.onTimeInputChange("secs") }), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](25, "section", 11), i["\u0275\u0275elementStart"](26, "mat-form-field", 12), i["\u0275\u0275elementStart"](27, "mat-label", 8), i["\u0275\u0275text"](28), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](29, "mat-select", 13), i["\u0275\u0275listener"]("ngModelChange", function (e) { return t.intervalMs = e })("ngModelChange", function () { return t.onIntervalMsChange() }), i["\u0275\u0275template"](30, fe, 3, 5, "mat-option", 14), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](31, "section", 15), i["\u0275\u0275elementStart"](32, "label", 16), i["\u0275\u0275text"](33, "timeinterval.advanced"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](34, "mat-slide-toggle", 17), i["\u0275\u0275listener"]("ngModelChange", function (e) { return t.advanced = e })("ngModelChange", function () { return t.onAdvancedChange() }), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("fxShow", t.isEdit), i["\u0275\u0275advance"](3), i["\u0275\u0275property"]("ngModel", t.hideFlag), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("fxShow", t.advanced && (t.isEdit || !t.hideFlag)), i["\u0275\u0275advance"](2), i["\u0275\u0275textInterpolate"](t.predefinedName), i["\u0275\u0275advance"](5), i["\u0275\u0275property"]("disabled", t.hideFlag || t.disabled)("ngModel", t.days), i["\u0275\u0275advance"](4), i["\u0275\u0275property"]("disabled", t.hideFlag || t.disabled)("ngModel", t.hours), i["\u0275\u0275advance"](4), i["\u0275\u0275property"]("disabled", t.hideFlag || t.disabled)("ngModel", t.mins), i["\u0275\u0275advance"](4), i["\u0275\u0275property"]("disabled", t.hideFlag || t.disabled)("ngModel", t.secs), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("fxShow", !t.advanced && (t.isEdit || !t.hideFlag)), i["\u0275\u0275advance"](3), i["\u0275\u0275textInterpolate"](t.predefinedName), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("disabled", t.hideFlag || t.disabled)("ngModel", t.intervalMs), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngForOf", t.intervals), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("fxShow", t.isEdit || !t.hideFlag), i["\u0275\u0275advance"](3), i["\u0275\u0275property"]("disabled", t.hideFlag || t.disabled)("ngModel", t.advanced)) }, directives: [ue.f, de.d, ee.TranslateDirective, g.MatCheckbox, W.NgControlStatus, W.NgModel, ue.b, ue.e, ue.g, pe.MatFormField, pe.MatLabel, O.MatInput, W.NumberValueAccessor, W.DefaultValueAccessor, A.MatSelect, r.NgForOf, N.MatSlideToggle, me.MatOption], pipes: [ee.TranslatePipe], styles: ["[_nghost-%COMP%]{min-width:355px}[_nghost-%COMP%]   .advanced-switch[_ngcontent-%COMP%]{margin-bottom:16px}[_nghost-%COMP%]   .advanced-label[_ngcontent-%COMP%]{margin:5px 0}[_nghost-%COMP%]   .hide-label[_ngcontent-%COMP%]{margin-bottom:5px;margin-right:5px}[_nghost-%COMP%]   .interval-section[_ngcontent-%COMP%]{min-height:66px}[_nghost-%COMP%]   .interval-section[_ngcontent-%COMP%]   .interval-label[_ngcontent-%COMP%]{margin-bottom:7px;margin-top:-1px}@media screen and (max-width:599px){[_nghost-%COMP%]{min-width:0;width:100%}}[_nghost-%COMP%]     .number-input .mat-form-field-infix{width:70px}"] }), e }(); 0, void 0; var ge = function () { function e() { this.changePending = !1, this.propagateChange = null } return e.prototype.ngOnInit = function () { }, e.prototype.registerOnChange = function (e) { this.propagateChange = e, this.changePending && this.propagateChange && (this.changePending = !1, this.propagateChange(this.modelValue)) }, e.prototype.registerOnTouched = function (e) { }, e.prototype.setDisabledState = function (e) { this.disabled = e }, e.prototype.writeValue = function (e) { if (this.modelValue = e, this.modelValue) this.startDate = new Date(this.modelValue.startTimeMs), this.endDate = new Date(this.modelValue.endTimeMs); else { var t = new Date; this.startDate = new Date(t.getFullYear(), t.getMonth(), t.getDate() - 1, t.getHours(), t.getMinutes(), t.getSeconds(), t.getMilliseconds()), this.endDate = t, this.updateView() } this.updateMinMaxDates() }, e.prototype.updateView = function () { var e = null; this.startDate && this.endDate && (e = { startTimeMs: this.startDate.getTime(), endTimeMs: this.endDate.getTime() }), this.modelValue = e, this.propagateChange ? this.propagateChange(this.modelValue) : this.changePending = !0 }, e.prototype.updateMinMaxDates = function () { this.maxStartDate = new Date(this.endDate.getTime() - 1e3), this.minEndDate = new Date(this.startDate.getTime() + 1e3), this.maxEndDate = new Date }, e.prototype.onStartDateChange = function () { this.startDate && (this.startDate.getTime() > this.maxStartDate.getTime() && (this.startDate = new Date(this.maxStartDate.getTime())), this.updateMinMaxDates()), this.updateView() }, e.prototype.onEndDateChange = function () { this.endDate && (this.endDate.getTime() < this.minEndDate.getTime() ? this.endDate = new Date(this.minEndDate.getTime()) : this.endDate.getTime() > this.maxEndDate.getTime() && (this.endDate = new Date(this.maxEndDate.getTime())), this.updateMinMaxDates()), this.updateView() }, e.\u0275fac = function (t) { return new (t || e) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-datetime-period"]], inputs: { disabled: "disabled" }, features: [i["\u0275\u0275ProvidersFeature"]([{ provide: W.NG_VALUE_ACCESSOR, useExisting: Object(i.forwardRef)(function () { return e }), multi: !0 }])], decls: 31, vars: 16, consts: [["fxLayout", "column", "fxLayoutAlign", "start stretch"], ["fxLayout", "row", "fxLayoutAlign", "start start", "fxLayoutGap", "16px", "fxLayout.xs", "column", "fxLayoutAlign.xs", "start stretch", "fxLayoutGap.xs", "0"], ["translate", ""], ["matPrefix", "", 3, "for"], ["type", "date", "openOnFocus", "true"], ["startDatePicker", ""], ["matInput", "", 3, "disabled", "ngModel", "matDatetimepicker", "ngModelChange"], ["type", "time", "openOnFocus", "true"], ["startTimePicker", ""], ["endDatePicker", ""], ["endTimePicker", ""]], template: function (e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "section", 0), i["\u0275\u0275elementStart"](1, "section", 1), i["\u0275\u0275elementStart"](2, "mat-form-field"), i["\u0275\u0275elementStart"](3, "mat-placeholder", 2), i["\u0275\u0275text"](4, "datetime.date-from"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275element"](5, "mat-datetimepicker-toggle", 3), i["\u0275\u0275element"](6, "mat-datetimepicker", 4, 5), i["\u0275\u0275elementStart"](8, "input", 6), i["\u0275\u0275listener"]("ngModelChange", function (e) { return t.startDate = e })("ngModelChange", function () { return t.onStartDateChange() }), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](9, "mat-form-field"), i["\u0275\u0275elementStart"](10, "mat-placeholder", 2), i["\u0275\u0275text"](11, "datetime.time-from"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275element"](12, "mat-datetimepicker-toggle", 3), i["\u0275\u0275element"](13, "mat-datetimepicker", 7, 8), i["\u0275\u0275elementStart"](15, "input", 6), i["\u0275\u0275listener"]("ngModelChange", function (e) { return t.startDate = e })("ngModelChange", function () { return t.onStartDateChange() }), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](16, "section", 1), i["\u0275\u0275elementStart"](17, "mat-form-field"), i["\u0275\u0275elementStart"](18, "mat-placeholder", 2), i["\u0275\u0275text"](19, "datetime.date-to"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275element"](20, "mat-datetimepicker-toggle", 3), i["\u0275\u0275element"](21, "mat-datetimepicker", 4, 9), i["\u0275\u0275elementStart"](23, "input", 6), i["\u0275\u0275listener"]("ngModelChange", function (e) { return t.endDate = e })("ngModelChange", function () { return t.onEndDateChange() }), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](24, "mat-form-field"), i["\u0275\u0275elementStart"](25, "mat-placeholder", 2), i["\u0275\u0275text"](26, "datetime.time-to"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275element"](27, "mat-datetimepicker-toggle", 3), i["\u0275\u0275element"](28, "mat-datetimepicker", 7, 10), i["\u0275\u0275elementStart"](30, "input", 6), i["\u0275\u0275listener"]("ngModelChange", function (e) { return t.endDate = e })("ngModelChange", function () { return t.onEndDateChange() }), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275reference"](7), r = i["\u0275\u0275reference"](14), o = i["\u0275\u0275reference"](22), a = i["\u0275\u0275reference"](29); i["\u0275\u0275advance"](5), i["\u0275\u0275property"]("for", n), i["\u0275\u0275advance"](3), i["\u0275\u0275property"]("disabled", t.disabled)("ngModel", t.startDate)("matDatetimepicker", n), i["\u0275\u0275advance"](4), i["\u0275\u0275property"]("for", r), i["\u0275\u0275advance"](3), i["\u0275\u0275property"]("disabled", t.disabled)("ngModel", t.startDate)("matDatetimepicker", r), i["\u0275\u0275advance"](5), i["\u0275\u0275property"]("for", o), i["\u0275\u0275advance"](3), i["\u0275\u0275property"]("disabled", t.disabled)("ngModel", t.endDate)("matDatetimepicker", o), i["\u0275\u0275advance"](4), i["\u0275\u0275property"]("for", a), i["\u0275\u0275advance"](3), i["\u0275\u0275property"]("disabled", t.disabled)("ngModel", t.endDate)("matDatetimepicker", a) } }, directives: [ue.f, ue.e, ue.g, pe.MatFormField, pe.MatPlaceholder, ee.TranslateDirective, G.d, pe.MatPrefix, G.a, O.MatInput, W.DefaultValueAccessor, G.b, W.NgControlStatus, W.NgModel], styles: ["[_nghost-%COMP%]     .mat-form-field-wrapper{padding-bottom:8px}[_nghost-%COMP%]     .mat-form-field-underline{bottom:8px}[_nghost-%COMP%]     .mat-form-field-infix{width:150px}@media screen and (max-width:599px){[_nghost-%COMP%]     .mat-form-field-infix{width:100%}}"] }), e }(); 0, void 0; var ye = n("fjw6"), be = n("Dvla"), ve = n("4t+N"), Ee = n("lR5k"), Te = n("8m5z"), Se = n("d5eY"), Ce = n("XMqU"), Oe = n("6XAR"), we = n("4bh6"), Ie = n("TSBb"), xe = n("EdYI"), Me = n("8lD5"), je = n("89S7"), Ae = n("gl+N"), Re = n("rhBB"), Ne = n("5yRj"), Pe = n("IVsW"), ke = n("91Tk"), _e = n("H3So"), Fe = n("8RXW"), Le = n("sjz8"), De = n("Rf0i"), Ve = n("7qoW"), Ue = n("uxh+"), Be = n("KEZ6"), Ge = n("EbnC"), qe = n("0Miz"), ze = n("wU4P"), He = n("16lU"), We = n("T4sd"), Qe = n("WKhm"), Ye = n("VYz+"), Ke = n("2+wj"), Xe = n("nii4"), Je = n("yAAm"), $e = n("RQSP"), Ze = n("oXES"), et = n("jXr5"), tt = n("ikDa"), nt = n("SReA"), it = n("jy/V"), rt = n("0HhY"), ot = n("XGqO"), at = n("nfcV"), st = n("LRne"), lt = n("vkgz"), ct = n("JX91"), ut = n("lJxs"), dt = n("5+tZ"), pt = n("+5dr"), mt = n("//Q6"), ft = n("l7P3"), ht = ["messageTypeInput"]; function gt(e, t) { if (1 & e) { var n = i["\u0275\u0275getCurrentView"](); i["\u0275\u0275elementStart"](0, "button", 8), i["\u0275\u0275listener"]("click", function () { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().clear() }), i["\u0275\u0275elementStart"](1, "mat-icon", 9), i["\u0275\u0275text"](2, "close"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]() } } function yt(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-option", 10), i["\u0275\u0275element"](1, "span", 11), i["\u0275\u0275pipe"](2, "highlight"), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit, r = i["\u0275\u0275nextContext"](); i["\u0275\u0275property"]("value", n), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("innerHTML", i["\u0275\u0275pipeBind2"](2, 2, r.displayMessageTypeFn(n), r.searchText), i["\u0275\u0275sanitizeHtml"]) } } function bt(e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "mat-error"), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"](" ", i["\u0275\u0275pipeBind1"](2, 1, "rulenode.message-type-required"), " ")) } var vt = function () { function e(e, t, n) { this.store = e, this.translate = t, this.fb = n, this.searchText = "", this.dirty = !1, this.propagateChange = function (e) { }, this.messageTypeFormGroup = this.fb.group({ messageType: [null] }) } return Object.defineProperty(e.prototype, "required", { get: function () { return this.requiredValue }, set: function (e) { this.requiredValue = Object(ce.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.ngOnInit = function () { var e = this; this.filteredMessageTypes = this.messageTypeFormGroup.get("messageType").valueChanges.pipe(Object(lt.a)(function (t) { e.updateView(t) }), Object(ct.a)(""), Object(ut.a)(function (e) { return e || "" }), Object(dt.b)(function (t) { return e.fetchMessageTypes(t) })) }, e.prototype.ngAfterViewInit = function () { }, e.prototype.ngOnDestroy = function () { }, e.prototype.setDisabledState = function (e) { this.disabled = e, this.disabled ? this.messageTypeFormGroup.disable({ emitEvent: !1 }) : this.messageTypeFormGroup.enable({ emitEvent: !1 }) }, e.prototype.writeValue = function (e) { this.searchText = "", this.modelValue = e; var t = null; e && (t = Object(mt.H)(pt.a).includes(e) ? pt.a[e] : e), this.messageTypeFormGroup.get("messageType").patchValue(t, { emitEvent: !1 }), this.dirty = !0 }, e.prototype.onFocus = function () { this.dirty && (this.messageTypeFormGroup.get("messageType").updateValueAndValidity({ onlySelf: !0, emitEvent: !0 }), this.dirty = !1) }, e.prototype.updateView = function (e) { var t = null; e && (t = Object(mt.H)(pt.a).includes(e) ? pt.a[e] : e), this.modelValue !== t && (this.modelValue = t, this.propagateChange(this.modelValue)) }, e.prototype.displayMessageTypeFn = function (e) { if (e) return Object(mt.H)(pt.a).includes(e) ? pt.e.get(pt.a[e]) : e }, e.prototype.fetchMessageTypes = function (e) { this.searchText = e; var t = []; return pt.e.forEach(function (n, i) { n.toUpperCase().includes(e.toUpperCase()) && t.push(i) }), t.length ? Object(st.a)(t) : Object(st.a)([e]) }, e.prototype.clear = function () { var e = this; this.messageTypeFormGroup.get("messageType").patchValue(null, { emitEvent: !0 }), setTimeout(function () { e.messageTypeInput.nativeElement.blur(), e.messageTypeInput.nativeElement.focus() }, 0) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](ft.Store), i["\u0275\u0275directiveInject"](ee.TranslateService), i["\u0275\u0275directiveInject"](W.FormBuilder)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-message-type-autocomplete"]], viewQuery: function (e, t) { if (1 & e && i["\u0275\u0275viewQuery"](ht, 3), 2 & e) { var n; i["\u0275\u0275queryRefresh"](n = i["\u0275\u0275loadQuery"]()) && (t.messageTypeInput = n.first) } }, inputs: { required: "required", disabled: "disabled" }, features: [i["\u0275\u0275ProvidersFeature"]([{ provide: W.NG_VALUE_ACCESSOR, useExisting: Object(i.forwardRef)(function () { return e }), multi: !0 }])], decls: 13, vars: 15, consts: [[1, "mat-block", 3, "formGroup"], ["matInput", "", "type", "text", "formControlName", "messageType", 3, "placeholder", "required", "matAutocomplete", "focusin"], ["messageTypeInput", ""], ["type", "button", "matSuffix", "", "mat-button", "", "mat-icon-button", "", "aria-label", "Clear", 3, "click", 4, "ngIf"], [1, "tb-autocomplete", 3, "displayWith"], ["messageTypeAutocomplete", "matAutocomplete"], [3, "value", 4, "ngFor", "ngForOf"], [4, "ngIf"], ["type", "button", "matSuffix", "", "mat-button", "", "mat-icon-button", "", "aria-label", "Clear", 3, "click"], [1, "material-icons"], [3, "value"], [3, "innerHTML"]], template: function (e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-form-field", 0), i["\u0275\u0275elementStart"](1, "mat-label"), i["\u0275\u0275text"](2), i["\u0275\u0275pipe"](3, "translate"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](4, "input", 1, 2), i["\u0275\u0275listener"]("focusin", function () { return t.onFocus() }), i["\u0275\u0275pipe"](6, "translate"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](7, gt, 3, 0, "button", 3), i["\u0275\u0275elementStart"](8, "mat-autocomplete", 4, 5), i["\u0275\u0275template"](10, yt, 3, 5, "mat-option", 6), i["\u0275\u0275pipe"](11, "async"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](12, bt, 3, 3, "mat-error", 7), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275reference"](9); i["\u0275\u0275property"]("formGroup", t.messageTypeFormGroup), i["\u0275\u0275advance"](2), i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3, 9, "rulenode.message-type")), i["\u0275\u0275advance"](2), i["\u0275\u0275propertyInterpolate"]("placeholder", i["\u0275\u0275pipeBind1"](6, 11, "rulenode.select-message-type")), i["\u0275\u0275property"]("required", t.required)("matAutocomplete", n), i["\u0275\u0275advance"](3), i["\u0275\u0275property"]("ngIf", t.messageTypeFormGroup.get("messageType").value && !t.disabled), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("displayWith", t.displayMessageTypeFn), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngForOf", i["\u0275\u0275pipeBind1"](11, 13, t.filteredMessageTypes)), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngIf", t.messageTypeFormGroup.get("messageType").hasError("required")) } }, directives: [pe.MatFormField, W.NgControlStatusGroup, W.FormGroupDirective, pe.MatLabel, O.MatInput, W.DefaultValueAccessor, m.MatAutocompleteTrigger, W.NgControlStatus, W.FormControlName, W.RequiredValidator, r.NgIf, m.MatAutocomplete, r.NgForOf, f.MatButton, pe.MatSuffix, C.MatIcon, me.MatOption, pe.MatError], pipes: [ee.TranslatePipe, r.AsyncPipe, Se.a], encapsulation: 2 }), e }(); 0, void 0; var Et = n("E9wx"), Tt = n("mrSG"), St = n("RxGS"); function Ct(e, t) { if (1 & e) { var n = i["\u0275\u0275getCurrentView"](); i["\u0275\u0275elementStart"](0, "div", 6), i["\u0275\u0275elementStart"](1, "mat-form-field", 7), i["\u0275\u0275element"](2, "mat-label"), i["\u0275\u0275element"](3, "input", 8), i["\u0275\u0275pipe"](4, "translate"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](5, "mat-form-field", 7), i["\u0275\u0275element"](6, "mat-label"), i["\u0275\u0275element"](7, "input", 8), i["\u0275\u0275pipe"](8, "translate"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](9, "button", 9), i["\u0275\u0275listener"]("click", function () { i["\u0275\u0275restoreView"](n); var e = t.index; return i["\u0275\u0275nextContext"]().removeKeyVal(e) }), i["\u0275\u0275pipe"](10, "async"), i["\u0275\u0275pipe"](11, "translate"), i["\u0275\u0275elementStart"](12, "mat-icon"), i["\u0275\u0275text"](13, "close"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]() } if (2 & e) { var r = t.$implicit, o = i["\u0275\u0275nextContext"](); i["\u0275\u0275advance"](3), i["\u0275\u0275propertyInterpolate"]("placeholder", i["\u0275\u0275pipeBind1"](4, 7, o.keyPlaceholderText ? o.keyPlaceholderText : "key-val.key")), i["\u0275\u0275property"]("formControl", r.get("key")), i["\u0275\u0275advance"](4), i["\u0275\u0275propertyInterpolate"]("placeholder", i["\u0275\u0275pipeBind1"](8, 9, o.valuePlaceholderText ? o.valuePlaceholderText : "key-val.value")), i["\u0275\u0275property"]("formControl", r.get("value")), i["\u0275\u0275advance"](2), i["\u0275\u0275propertyInterpolate"]("matTooltip", i["\u0275\u0275pipeBind1"](11, 13, "key-val.remove-entry")), i["\u0275\u0275property"]("fxShow", !o.disabled)("disabled", i["\u0275\u0275pipeBind1"](10, 11, o.isLoading$)) } } var Ot = function (e) { return { disabled: e } }, wt = function (e) { function t(t, n) { var i = e.call(this, t) || this; return i.store = t, i.fb = n, i.propagateChange = null, i.valueChangeSubscription = null, i } return Object(Tt.d)(t, e), t.prototype.ngOnInit = function () { this.kvListFormGroup = this.fb.group({}), this.kvListFormGroup.addControl("keyVals", this.fb.array([])) }, t.prototype.keyValsFormArray = function () { return this.kvListFormGroup.get("keyVals") }, t.prototype.registerOnChange = function (e) { this.propagateChange = e }, t.prototype.registerOnTouched = function (e) { }, t.prototype.setDisabledState = function (e) { this.disabled = e, this.disabled ? this.kvListFormGroup.disable({ emitEvent: !1 }) : this.kvListFormGroup.enable({ emitEvent: !1 }) }, t.prototype.writeValue = function (e) { var t = this; this.valueChangeSubscription && this.valueChangeSubscription.unsubscribe(); var n = []; if (e) for (var i = 0, r = Object.keys(e); i < r.length; i++) { var o = r[i]; Object.prototype.hasOwnProperty.call(e, o) && n.push(this.fb.group({ key: [o, [W.Validators.required]], value: [e[o], [W.Validators.required]] })) } this.kvListFormGroup.setControl("keyVals", this.fb.array(n)), this.valueChangeSubscription = this.kvListFormGroup.valueChanges.subscribe(function () { t.updateModel() }), this.disabled ? this.kvListFormGroup.disable({ emitEvent: !1 }) : this.kvListFormGroup.enable({ emitEvent: !1 }) }, t.prototype.removeKeyVal = function (e) { this.kvListFormGroup.get("keyVals").removeAt(e) }, t.prototype.addKeyVal = function () { this.kvListFormGroup.get("keyVals").push(this.fb.group({ key: ["", [W.Validators.required]], value: ["", [W.Validators.required]] })) }, t.prototype.validate = function (e) { for (var t = !0, n = 0, i = this.kvListFormGroup.get("keyVals").value; n < i.length; n++) { var r = i[n]; if (!r.key || !r.value) { t = !1; break } } return t ? null : { keyVals: { valid: !1 } } }, t.prototype.updateModel = function () { var e = this.kvListFormGroup.get("keyVals").value, t = {}; e.forEach(function (e) { t[e.key] = e.value }), this.propagateChange(t) }, t.\u0275fac = function (e) { return new (e || t)(i["\u0275\u0275directiveInject"](ft.Store), i["\u0275\u0275directiveInject"](W.FormBuilder)) }, t.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: t, selectors: [["tb-key-val-map"]], inputs: { disabled: "disabled", titleText: "titleText", keyPlaceholderText: "keyPlaceholderText", valuePlaceholderText: "valuePlaceholderText", noDataText: "noDataText" }, features: [i["\u0275\u0275ProvidersFeature"]([{ provide: W.NG_VALUE_ACCESSOR, useExisting: Object(i.forwardRef)(function () { return t }), multi: !0 }, { provide: W.NG_VALIDATORS, useExisting: Object(i.forwardRef)(function () { return t }), multi: !0 }]), i["\u0275\u0275InheritDefinitionFeature"]], decls: 12, vars: 18, consts: [["fxLayout", "column", 1, "tb-kv-map", 3, "formGroup"], ["translate", "", 1, "tb-title", "no-padding"], ["fxLayout", "row", "fxLayoutAlign", "start center", "fxLayoutGap", "8px", "style", "max-height: 40px;", "formArrayName", "keyVals", 4, "ngFor", "ngForOf"], ["fxLayoutAlign", "center center", "translate", "", 1, "no-data-found", 3, "fxShow", "ngClass"], [2, "margin-top", "8px"], ["mat-button", "", "mat-raised-button", "", "color", "accent", "type", "button", "matTooltipPosition", "above", 3, "fxShow", "disabled", "matTooltip", "click"], ["fxLayout", "row", "fxLayoutAlign", "start center", "fxLayoutGap", "8px", "formArrayName", "keyVals", 2, "max-height", "40px"], ["fxFlex", "", "floatLabel", "always", "hideRequiredMarker", "", 1, "mat-block", 2, "max-height", "40px"], ["matInput", "", "required", "", 3, "formControl", "placeholder"], ["mat-button", "", "mat-icon-button", "", "color", "accent", "type", "button", "matTooltipPosition", "above", 3, "fxShow", "disabled", "matTooltip", "click"]], template: function (e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "section", 0), i["\u0275\u0275elementStart"](1, "label", 1), i["\u0275\u0275text"](2), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](3, Ct, 14, 15, "div", 2), i["\u0275\u0275elementStart"](4, "span", 3), i["\u0275\u0275text"](5), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](6, "div", 4), i["\u0275\u0275elementStart"](7, "button", 5), i["\u0275\u0275listener"]("click", function () { return t.addKeyVal() }), i["\u0275\u0275pipe"](8, "async"), i["\u0275\u0275pipe"](9, "translate"), i["\u0275\u0275text"](10), i["\u0275\u0275pipe"](11, "translate"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275property"]("formGroup", t.kvListFormGroup), i["\u0275\u0275advance"](2), i["\u0275\u0275textInterpolate"](t.titleText), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngForOf", t.keyValsFormArray().controls), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("fxShow", !t.keyValsFormArray().length)("ngClass", i["\u0275\u0275pureFunction1"](16, Ot, t.disabled)), i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate"](t.noDataText ? t.noDataText : "key-val.no-data"), i["\u0275\u0275advance"](2), i["\u0275\u0275propertyInterpolate"]("matTooltip", i["\u0275\u0275pipeBind1"](9, 12, "key-val.add-entry")), i["\u0275\u0275property"]("fxShow", !t.disabled)("disabled", i["\u0275\u0275pipeBind1"](8, 10, t.isLoading$)), i["\u0275\u0275advance"](3), i["\u0275\u0275textInterpolate1"](" ", i["\u0275\u0275pipeBind1"](11, 14, "action.add"), " ")) }, directives: [ue.f, W.NgControlStatusGroup, W.FormGroupDirective, ee.TranslateDirective, r.NgForOf, ue.e, de.d, r.NgClass, de.b, f.MatButton, U.MatTooltip, ue.g, W.FormArrayName, pe.MatFormField, ue.b, pe.MatLabel, O.MatInput, W.DefaultValueAccessor, W.RequiredValidator, W.NgControlStatus, W.FormControlDirective, C.MatIcon], pipes: [r.AsyncPipe, ee.TranslatePipe], styles: ["[_nghost-%COMP%]   .tb-kv-map[_ngcontent-%COMP%]   span.no-data-found[_ngcontent-%COMP%]{position:relative;display:flex;height:40px}[_nghost-%COMP%]   .tb-kv-map[_ngcontent-%COMP%]   span.no-data-found.disabled[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}[_nghost-%COMP%]     .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     .mat-form-field-infix{border-top:0}[_nghost-%COMP%]     .mat-form-field-underline{bottom:0}"] }), t }(St.a); 0, void 0; var It = n("WEPN"), xt = n("49Ji"), Mt = n("NOb7"), jt = n("B8ns"), At = n("ZI//"), Rt = n("HeHW"), Nt = n("dUlv"), Pt = n("4Th+"), kt = n("+C6U"), _t = n("5U8l"), Ft = n("hwpn"), Lt = n("pd1A"), Dt = n("9DSm"), Vt = n("bdDX"), Ut = n("uKK+"), Bt = n("aX2P"); function Gt(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-option", 5), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit, r = i["\u0275\u0275nextContext"](); i["\u0275\u0275property"]("value", n), i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"](" ", i["\u0275\u0275pipeBind1"](2, 2, r.timeIntervalTranslationMap.get(n)), " ") } } var qt = function () { function e() { this.allIntervals = Object.values(Bt.f), this.timeIntervalTranslationMap = Bt.g, this.rendered = !1, this.onlyCurrentInterval = !1, this.propagateChange = function (e) { } } return Object.defineProperty(e.prototype, "intervals", { get: function () { return this.onlyCurrentInterval ? this.allIntervals.filter(function (e) { return e.startsWith("CURRENT_") }) : this.allIntervals }, enumerable: !1, configurable: !0 }), e.prototype.ngOnInit = function () { }, e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.setDisabledState = function (e) { this.disabled = e }, e.prototype.writeValue = function (e) { this.modelValue = e }, e.prototype.onIntervalChange = function () { this.propagateChange(this.modelValue) }, e.\u0275fac = function (t) { return new (t || e) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-quick-time-interval"]], inputs: { disabled: "disabled", onlyCurrentInterval: "onlyCurrentInterval" }, features: [i["\u0275\u0275ProvidersFeature"]([{ provide: W.NG_VALUE_ACCESSOR, useExisting: Object(i.forwardRef)(function () { return e }), multi: !0 }])], decls: 6, vars: 3, consts: [["fxLayout", "row", "fxFlex", "", 1, "interval-section"], ["fxFlex", ""], ["translate", ""], [3, "disabled", "ngModel", "ngModelChange"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"]], template: function (e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "section", 0), i["\u0275\u0275elementStart"](1, "mat-form-field", 1), i["\u0275\u0275elementStart"](2, "mat-label", 2), i["\u0275\u0275text"](3, "timewindow.interval"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](4, "mat-select", 3), i["\u0275\u0275listener"]("ngModelChange", function (e) { return t.modelValue = e })("ngModelChange", function () { return t.onIntervalChange() }), i["\u0275\u0275template"](5, Gt, 3, 4, "mat-option", 4), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275advance"](4), i["\u0275\u0275property"]("disabled", t.disabled)("ngModel", t.modelValue), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngForOf", t.intervals)) }, directives: [ue.f, ue.b, pe.MatFormField, pe.MatLabel, ee.TranslateDirective, A.MatSelect, W.NgControlStatus, W.NgModel, r.NgForOf, me.MatOption], pipes: [ee.TranslatePipe], encapsulation: 2 }), e }(); 0, void 0; var zt = n("qPGf"), Ht = n("j8W/"), Wt = n("40Wt"), Qt = n("RIkE"), Yt = n("XNiG"), Kt = n("VRyK"), Xt = n("Kj3r"), Jt = n("eIep"), $t = n("w1tV"), Zt = n("JIr8"), en = n("U3y+"), tn = n("21Fy"), nn = n("C/rb"), rn = n("zp9Z"), on = ["entityInput"]; function an(e, t) { if (1 & e) { var n = i["\u0275\u0275getCurrentView"](); i["\u0275\u0275elementStart"](0, "button", 9), i["\u0275\u0275listener"]("click", function () { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().clear() }), i["\u0275\u0275elementStart"](1, "mat-icon", 10), i["\u0275\u0275text"](2, "close"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]() } } function sn(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-option", 11), i["\u0275\u0275element"](1, "span", 12), i["\u0275\u0275pipe"](2, "highlight"), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit, r = i["\u0275\u0275nextContext"](); i["\u0275\u0275property"]("value", n), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("innerHTML", i["\u0275\u0275pipeBind2"](2, 2, n.name, r.searchText), i["\u0275\u0275sanitizeHtml"]) } } var ln = function (e) { return { entity: e } }; function cn(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-option", 11), i["\u0275\u0275elementStart"](1, "span"), i["\u0275\u0275text"](2), i["\u0275\u0275pipe"](3, "async"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275nextContext"](); i["\u0275\u0275property"]("value", null), i["\u0275\u0275advance"](2), i["\u0275\u0275textInterpolate1"](" ", i["\u0275\u0275pipeBind1"](3, 2, n.translate.get(n.noEntitiesMatchingText, i["\u0275\u0275pureFunction1"](4, ln, n.searchText))), " ") } } function un(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-error"), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275nextContext"](); i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"](" ", i["\u0275\u0275pipeBind1"](2, 1, n.entityRequiredText), " ") } } var dn = function () { function e(e, t, n, r) { this.store = e, this.translate = t, this.entityService = n, this.fb = r, this.entityChanged = new i.EventEmitter, this.searchText = "", this.dirty = !1, this.refresh$ = new Yt.b, this.propagateChange = function (e) { }, this.selectEntityFormGroup = this.fb.group({ entity: [null] }) } return Object.defineProperty(e.prototype, "entityType", { set: function (e) { this.entityTypeValue !== e && (this.entityTypeValue = e, this.load(), this.reset(), this.refresh$.next([]), this.dirty = !0) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "entitySubtype", { set: function (e) { if (this.entitySubtypeValue !== e) { this.entitySubtypeValue = e; var t = this.getCurrentEntity(); t && t.type !== this.entitySubtypeValue && (this.reset(), this.refresh$.next([]), this.dirty = !0), this.selectEntityFormGroup.get("entity").updateValueAndValidity() } }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "required", { get: function () { return this.requiredValue }, set: function (e) { this.requiredValue = Object(ce.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.ngOnInit = function () { var e = this; this.filteredEntities = Object(Kt.a)(this.refresh$.asObservable(), this.selectEntityFormGroup.get("entity").valueChanges.pipe(Object(Xt.a)(150), Object(lt.a)(function (t) { var n; n = "string" != typeof t && t ? t.id.id : null, e.updateView(n, t), null === t && e.clear() }), Object(ut.a)(function (e) { return e ? "string" == typeof e ? e : e.name : "" }), Object(Jt.a)(function (t) { return e.fetchEntities(t) }), Object($t.a)())) }, e.prototype.ngAfterViewInit = function () { }, e.prototype.load = function () { if (this.entityTypeValue) switch (this.entityTypeValue) { case en.b.ASSET: this.entityText = "asset.asset", this.noEntitiesMatchingText = "asset.no-assets-matching", this.entityRequiredText = "asset.asset-required"; break; case en.b.DEVICE: this.entityText = "device.device", this.noEntitiesMatchingText = "device.no-devices-matching", this.entityRequiredText = "device.device-required"; break; case en.b.EDGE: this.entityText = "edge.edge", this.noEntitiesMatchingText = "edge.no-edges-matching", this.entityRequiredText = "edge.edge-required"; break; case en.b.ENTITY_VIEW: this.entityText = "entity-view.entity-view", this.noEntitiesMatchingText = "entity-view.no-entity-views-matching", this.entityRequiredText = "entity-view.entity-view-required"; break; case en.b.RULE_CHAIN: this.entityText = "rulechain.rulechain", this.noEntitiesMatchingText = "rulechain.no-rulechains-matching", this.entityRequiredText = "rulechain.rulechain-required"; break; case en.b.TENANT: case en.a.CURRENT_TENANT: this.entityText = "tenant.tenant", this.noEntitiesMatchingText = "tenant.no-tenants-matching", this.entityRequiredText = "tenant.tenant-required"; break; case en.b.CUSTOMER: this.entityText = "customer.customer", this.noEntitiesMatchingText = "customer.no-customers-matching", this.entityRequiredText = "customer.customer-required"; break; case en.b.USER: case en.a.CURRENT_USER: this.entityText = "user.user", this.noEntitiesMatchingText = "user.no-users-matching", this.entityRequiredText = "user.user-required"; break; case en.b.DASHBOARD: this.entityText = "dashboard.dashboard", this.noEntitiesMatchingText = "dashboard.no-dashboards-matching", this.entityRequiredText = "dashboard.dashboard-required"; break; case en.b.ALARM: this.entityText = "alarm.alarm", this.noEntitiesMatchingText = "alarm.no-alarms-matching", this.entityRequiredText = "alarm.alarm-required"; break; case en.a.CURRENT_CUSTOMER: this.entityText = "customer.default-customer", this.noEntitiesMatchingText = "customer.no-customers-matching", this.entityRequiredText = "customer.default-customer-required"; break; case en.a.CURRENT_USER_OWNER: Object(nn.b)(this.store).authority === rn.a.TENANT_ADMIN ? (this.entityText = "tenant.tenant", this.noEntitiesMatchingText = "tenant.no-tenants-matching", this.entityRequiredText = "tenant.tenant-required") : (this.entityText = "customer.customer", this.noEntitiesMatchingText = "customer.no-customers-matching", this.entityRequiredText = "customer.customer-required") }this.labelText && this.labelText.length && (this.entityText = this.labelText), this.requiredText && this.requiredText.length && (this.entityRequiredText = this.requiredText); var e = this.getCurrentEntity(); if (e) { var t = e.id.entityType; this.entityTypeValue && t !== this.entityTypeValue && this.reset() } }, e.prototype.getCurrentEntity = function () { var e = this.selectEntityFormGroup.get("entity").value; return e && "string" != typeof e ? e : null }, e.prototype.setDisabledState = function (e) { this.disabled = e, this.disabled ? this.selectEntityFormGroup.disable({ emitEvent: !1 }) : this.selectEntityFormGroup.enable({ emitEvent: !1 }) }, e.prototype.writeValue = function (e) { return Object(Tt.b)(this, void 0, void 0, function () { var t, n, i; return Object(Tt.e)(this, function (r) { switch (r.label) { case 0: if (this.searchText = "", null === e || !("string" == typeof e || e.entityType && e.id)) return [3, 5]; t = void 0, n = void 0, "string" == typeof e ? (t = this.checkEntityType(this.entityTypeValue), n = e) : (t = this.checkEntityType(e.entityType), n = e.id), i = null, r.label = 1; case 1: return r.trys.push([1, 3, , 4]), [4, this.entityService.getEntity(t, n, { ignoreLoading: !0, ignoreErrors: !0 }).toPromise()]; case 2: return i = r.sent(), [3, 4]; case 3: return r.sent(), this.propagateChange(null), [3, 4]; case 4: return this.modelValue = null !== i ? i.id.id : null, this.selectEntityFormGroup.get("entity").patchValue(null !== i ? i : "", { emitEvent: !1 }), this.entityChanged.emit(i), [3, 6]; case 5: this.modelValue = null, this.selectEntityFormGroup.get("entity").patchValue("", { emitEvent: !1 }), r.label = 6; case 6: return this.dirty = !0, [2] } }) }) }, e.prototype.onFocus = function () { this.dirty && (this.selectEntityFormGroup.get("entity").updateValueAndValidity({ onlySelf: !0, emitEvent: !0 }), this.dirty = !1) }, e.prototype.reset = function () { this.selectEntityFormGroup.get("entity").patchValue("", { emitEvent: !1 }) }, e.prototype.updateView = function (e, t) { Object(mt.r)(this.modelValue, e) || (this.modelValue = e, this.propagateChange(this.modelValue), this.entityChanged.emit(t)) }, e.prototype.displayEntityFn = function (e) { return e ? e.name : void 0 }, e.prototype.fetchEntities = function (e) { var t = this; this.searchText = e; var n = this.checkEntityType(this.entityTypeValue); return this.entityService.getEntitiesByNameFilter(n, e, 50, this.entitySubtypeValue, { ignoreLoading: !0 }).pipe(Object(Zt.a)(function () { return Object(st.a)(null) }), Object(ut.a)(function (e) { if (e) { if (t.excludeEntityIds && t.excludeEntityIds.length) { var n = []; return e.forEach(function (e) { -1 === t.excludeEntityIds.indexOf(e.id.id) && n.push(e) }), n } return e } return [] })) }, e.prototype.clear = function () { var e = this; this.selectEntityFormGroup.get("entity").patchValue("", { emitEvent: !0 }), setTimeout(function () { e.entityInput.nativeElement.blur(), e.entityInput.nativeElement.focus() }, 0) }, e.prototype.checkEntityType = function (e) { return e === en.a.CURRENT_CUSTOMER ? en.b.CUSTOMER : e === en.a.CURRENT_TENANT ? en.b.TENANT : e === en.a.CURRENT_USER ? en.b.USER : e === en.a.CURRENT_USER_OWNER ? Object(nn.b)(this.store).authority === rn.a.TENANT_ADMIN ? en.b.TENANT : en.b.CUSTOMER : e }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](ft.Store), i["\u0275\u0275directiveInject"](ee.TranslateService), i["\u0275\u0275directiveInject"](tn.a), i["\u0275\u0275directiveInject"](W.FormBuilder)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-entity-autocomplete-error"]], viewQuery: function (e, t) { if (1 & e && i["\u0275\u0275viewQuery"](on, 3), 2 & e) { var n; i["\u0275\u0275queryRefresh"](n = i["\u0275\u0275loadQuery"]()) && (t.entityInput = n.first) } }, inputs: { entityType: "entityType", entitySubtype: "entitySubtype", excludeEntityIds: "excludeEntityIds", labelText: "labelText", requiredText: "requiredText", required: "required", disabled: "disabled" }, outputs: { entityChanged: "entityChanged" }, features: [i["\u0275\u0275ProvidersFeature"]([{ provide: W.NG_VALUE_ACCESSOR, useExisting: Object(i.forwardRef)(function () { return e }), multi: !0 }])], decls: 12, vars: 15, consts: [[1, "mat-block", 3, "formGroup"], ["matInput", "", "type", "text", "formControlName", "entity", 3, "placeholder", "required", "matAutocomplete", "focusin"], ["entityInput", ""], ["type", "button", "matSuffix", "", "mat-button", "", "mat-icon-button", "", "aria-label", "Clear", 3, "click", 4, "ngIf"], [1, "tb-autocomplete", 3, "displayWith"], ["entityAutocomplete", "matAutocomplete"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value", 4, "ngIf"], [4, "ngIf"], ["type", "button", "matSuffix", "", "mat-button", "", "mat-icon-button", "", "aria-label", "Clear", 3, "click"], [1, "material-icons"], [3, "value"], [3, "innerHTML"]], template: function (e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-form-field", 0), i["\u0275\u0275elementStart"](1, "input", 1, 2), i["\u0275\u0275listener"]("focusin", function () { return t.onFocus() }), i["\u0275\u0275pipe"](3, "translate"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](4, an, 3, 0, "button", 3), i["\u0275\u0275elementStart"](5, "mat-autocomplete", 4, 5), i["\u0275\u0275template"](7, sn, 3, 5, "mat-option", 6), i["\u0275\u0275pipe"](8, "async"), i["\u0275\u0275template"](9, cn, 4, 6, "mat-option", 7), i["\u0275\u0275pipe"](10, "async"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](11, un, 3, 3, "mat-error", 8), i["\u0275\u0275elementEnd"]()), 2 & e) { var n, r = i["\u0275\u0275reference"](6); i["\u0275\u0275property"]("formGroup", t.selectEntityFormGroup), i["\u0275\u0275advance"](1), i["\u0275\u0275propertyInterpolate"]("placeholder", i["\u0275\u0275pipeBind1"](3, 9, t.entityText)), i["\u0275\u0275property"]("required", t.required)("matAutocomplete", r), i["\u0275\u0275advance"](3), i["\u0275\u0275property"]("ngIf", t.selectEntityFormGroup.get("entity").value && !t.disabled), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("displayWith", t.displayEntityFn), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngForOf", i["\u0275\u0275pipeBind1"](8, 11, t.filteredEntities)), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngIf", !(null != (n = i["\u0275\u0275pipeBind1"](10, 13, t.filteredEntities)) && n.length)), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngIf", t.selectEntityFormGroup.get("entity").hasError("required")) } }, directives: [pe.MatFormField, W.NgControlStatusGroup, W.FormGroupDirective, O.MatInput, W.DefaultValueAccessor, m.MatAutocompleteTrigger, W.NgControlStatus, W.FormControlName, W.RequiredValidator, r.NgIf, m.MatAutocomplete, r.NgForOf, f.MatButton, pe.MatSuffix, C.MatIcon, me.MatOption, pe.MatError], pipes: [ee.TranslatePipe, r.AsyncPipe, Se.a], styles: ["[_nghost-%COMP%]     .mat-form-field-infix{width:auto;min-width:100px}"] }), e }(); 0, void 0; var pn = function () { function e() { } return e.\u0275fac = function (t) { return new (t || e) }, e.\u0275mod = i["\u0275\u0275defineNgModule"]({ type: e }), e.\u0275inj = i["\u0275\u0275defineInjector"]({ providers: [r.DatePipe, re.a, ye.a, Se.a, We.a, Qe.a, Dt.a, { provide: c.d, useValue: p.a }, { provide: me.MAT_DATE_LOCALE, useValue: "en-GB" }], imports: [[r.CommonModule, Q.RouterModule, ee.TranslateModule, f.MatButtonModule, g.MatCheckboxModule, C.MatIconModule, h.MatCardModule, x.MatProgressBarModule, O.MatInputModule, k.MatSnackBarModule, R.MatSidenavModule, V.MatToolbarModule, w.MatMenuModule, S.MatGridListModule, v.MatDialogModule, A.MatSelectModule, U.MatTooltipModule, L.MatTableModule, I.MatPaginatorModule, _.MatSortModule, M.MatProgressSpinnerModule, E.MatDividerModule, D.MatTabsModule, j.MatRadioModule, N.MatSlideToggleModule, b.MatDatepickerModule, G.e, G.c, q.b.forRoot(), P.MatSliderModule, T.MatExpansionModule, F.MatStepperModule, m.MatAutocompleteModule, y.MatChipsModule, B.MatListModule, z.d, be.b, H.FlexLayoutModule.withConfig({ addFlexToParent: !1 }), W.FormsModule, W.ReactiveFormsModule, ae.OverlayModule, Y.b, K.b, X.b, J.c, kt.d, c.e, u.g, Ee.b.forRoot({ sanitize: i.SecurityContext.NONE, markedOptions: { provide: Ee.c, useFactory: Qt.a } })], f.MatButtonModule, g.MatCheckboxModule, C.MatIconModule, h.MatCardModule, x.MatProgressBarModule, O.MatInputModule, k.MatSnackBarModule, R.MatSidenavModule, V.MatToolbarModule, w.MatMenuModule, S.MatGridListModule, v.MatDialogModule, A.MatSelectModule, U.MatTooltipModule, L.MatTableModule, I.MatPaginatorModule, _.MatSortModule, M.MatProgressSpinnerModule, E.MatDividerModule, D.MatTabsModule, j.MatRadioModule, N.MatSlideToggleModule, b.MatDatepickerModule, G.e, G.c, q.b, P.MatSliderModule, T.MatExpansionModule, F.MatStepperModule, m.MatAutocompleteModule, y.MatChipsModule, B.MatListModule, z.d, be.b, H.FlexLayoutModule, W.FormsModule, W.ReactiveFormsModule, ae.OverlayModule, Y.b, K.b, X.b, J.c, kt.d, u.g, Ee.b, ee.TranslateModule] }), e }(); void (("undefined" == typeof ngJitMode || ngJitMode) && i["\u0275\u0275setNgModuleScope"](pn, { declarations: [o, a.a, Fe.a, s.b, Te.a, Le.a, Ke.a, xt.a, ie.a, ne.a, te.a, s.a, qe.a, It.a, l.a, $.a, oe.a, se.b, he, qt, Ue.a, Ve.b, ge, Ae.a, Lt.a, ve.a, Ce.a, Oe.a, we.a, He.a, Ie.a, xe.a, Me.a, je.a, Re.a, ke.a, ze.a, _t.a, Pe.a, Ne.a, _e.a, Et.a, Je.a, De.c, De.a, De.b, Be.a, Ze.a, et.a, tt.a, Ye.a, nt.a, Xe.a, it.a, at.a, $e.a, rt.a, ot.a, vt, wt, Mt.a, jt.a, Z.a, re.a, ye.a, Se.a, We.a, Qe.a, Dt.a, Ut.a, Ge.a, At.a, Rt.a, Nt.a, Pt.a, Ft.a, zt.a, Vt.a, Ht.a, Wt.a, dn], imports: [r.CommonModule, Q.RouterModule, ee.TranslateModule, f.MatButtonModule, g.MatCheckboxModule, C.MatIconModule, h.MatCardModule, x.MatProgressBarModule, O.MatInputModule, k.MatSnackBarModule, R.MatSidenavModule, V.MatToolbarModule, w.MatMenuModule, S.MatGridListModule, v.MatDialogModule, A.MatSelectModule, U.MatTooltipModule, L.MatTableModule, I.MatPaginatorModule, _.MatSortModule, M.MatProgressSpinnerModule, E.MatDividerModule, D.MatTabsModule, j.MatRadioModule, N.MatSlideToggleModule, b.MatDatepickerModule, G.e, G.c, q.b, P.MatSliderModule, T.MatExpansionModule, F.MatStepperModule, m.MatAutocompleteModule, y.MatChipsModule, B.MatListModule, z.d, be.b, H.FlexLayoutModule, W.FormsModule, W.ReactiveFormsModule, ae.OverlayModule, Y.b, K.b, X.b, J.c, kt.d, c.e, u.g, Ee.b], exports: [o, a.a, Fe.a, s.b, Te.a, Le.a, Ke.a, xt.a, ie.a, ne.a, te.a, qe.a, It.a, l.a, $.a, oe.a, se.b, he, qt, Ue.a, ge, Ae.a, Lt.a, Ce.a, Oe.a, we.a, He.a, Ie.a, xe.a, Me.a, je.a, Re.a, ke.a, ze.a, _t.a, Pe.a, Ne.a, _e.a, Et.a, Je.a, De.c, De.a, De.b, Be.a, ve.a, f.MatButtonModule, g.MatCheckboxModule, C.MatIconModule, h.MatCardModule, x.MatProgressBarModule, O.MatInputModule, k.MatSnackBarModule, R.MatSidenavModule, V.MatToolbarModule, w.MatMenuModule, S.MatGridListModule, v.MatDialogModule, A.MatSelectModule, U.MatTooltipModule, L.MatTableModule, I.MatPaginatorModule, _.MatSortModule, M.MatProgressSpinnerModule, E.MatDividerModule, D.MatTabsModule, j.MatRadioModule, N.MatSlideToggleModule, b.MatDatepickerModule, G.e, G.c, q.b, P.MatSliderModule, T.MatExpansionModule, F.MatStepperModule, m.MatAutocompleteModule, y.MatChipsModule, B.MatListModule, z.d, be.b, H.FlexLayoutModule, W.FormsModule, W.ReactiveFormsModule, ae.OverlayModule, Y.b, K.b, X.b, J.c, kt.d, u.g, Ee.b, Ze.a, et.a, tt.a, Ye.a, nt.a, Xe.a, it.a, at.a, $e.a, rt.a, ot.a, vt, wt, Mt.a, jt.a, Z.a, re.a, ye.a, Se.a, We.a, Qe.a, Ge.a, Dt.a, Ut.a, ee.TranslateModule, Rt.a, Nt.a, Pt.a, Ft.a, zt.a, Vt.a, Ht.a, Wt.a] })), 0, i["\u0275\u0275setComponentScope"](se.b, [W["\u0275angular_packages_forms_forms_ba"], W.NgControlStatusGroup, W.FormGroupDirective, ue.f, D.MatTabGroup, r.NgClass, de.b, D.MatTab, r.NgIf, ee.TranslateDirective, g.MatCheckbox, W.NgControlStatus, W.NgModel, ue.b, de.d, W.FormGroupName, j.MatRadioGroup, W.FormControlName, j.MatRadioButton, he, W.RequiredValidator, qt, ge, pe.MatFormField, pe.MatLabel, A.MatSelect, r.NgForOf, me.MatOption, ue.e, P.MatSlider, O.MatInput, W.DefaultValueAccessor, W.NumberValueAccessor, Lt.a, f.MatButton], [r.AsyncPipe, ee.TranslatePipe]), i["\u0275\u0275setComponentScope"](je.a, [ue.f, W.NgControlStatusGroup, W.FormGroupDirective, r.NgIf, Me.a, W.NgControlStatus, W.FormControlName, W.RequiredValidator, Ie.a, ue.b], []), i["\u0275\u0275setComponentScope"](ke.a, [ue.f, W.NgControlStatusGroup, W.FormGroupDirective, r.NgIf, Me.a, W.NgControlStatus, W.FormControlName, W.RequiredValidator, xe.a, ue.b, r.NgClass, de.b], []), i["\u0275\u0275setComponentScope"](at.a, [W["\u0275angular_packages_forms_forms_ba"], W.NgControlStatusGroup, W.FormGroupDirective, V.MatToolbar, ue.f, ue.b, f.MatButton, C.MatIcon, v.MatDialogContent, ee.TranslateDirective, W.FormGroupName, vt, W.NgControlStatus, W.FormControlName, W.RequiredValidator, Et.a, s.b, wt, Je.a, v.MatDialogActions], [ee.TranslatePipe, r.AsyncPipe]), i["\u0275\u0275setComponentScope"](Rt.a, [W["\u0275angular_packages_forms_forms_ba"], W.NgControlStatusGroup, W.FormGroupDirective, V.MatToolbar, ue.f, ue.b, f.MatButton, C.MatIcon, r.NgIf, x.MatProgressBar, v.MatDialogContent, _e.a, W.NgControlStatus, W.FormControlName, W.RequiredValidator, v.MatDialogActions, ue.e], [r.AsyncPipe, ee.TranslatePipe]) }, PGJw: function (e, t, n) { "use strict"; var i; n.d(t, "b", function () { return i }), n.d(t, "f", function () { return s }), n.d(t, "c", function () { return r }), n.d(t, "e", function () { return o }), n.d(t, "d", function () { return a }), n.d(t, "g", function () { return c }), n.d(t, "a", function () { return l }), function (e) { e.HTTP = "HTTP", e.HTTPS = "HTTPS", e.MIXED = "MIXED" }(i || (i = {})); var r, o, a, s = new Map([[i.HTTP, "admin.oauth2.domain-schema-http"], [i.HTTPS, "admin.oauth2.domain-schema-https"], [i.MIXED, "admin.oauth2.domain-schema-mixed"]]); !function (e) { e.BASIC = "BASIC", e.CUSTOM = "CUSTOM", e.GITHUB = "GITHUB", e.APPLE = "APPLE" }(r || (r = {})), function (e) { e.DOMAIN = "DOMAIN", e.EMAIL = "EMAIL", e.CUSTOM = "CUSTOM" }(o || (o = {})), function (e) { e.WEB = "WEB", e.ANDROID = "ANDROID", e.IOS = "IOS" }(a || (a = {})); var l, c = new Map([[a.WEB, "admin.oauth2.platform-web"], [a.ANDROID, "admin.oauth2.platform-android"], [a.IOS, "admin.oauth2.platform-ios"]]); !function (e) { e.BASIC = "BASIC", e.POST = "POST" }(l || (l = {})) }, RIkE: function (e, t, n) { "use strict"; (function (e) { n.d(t, "a", function () { return r }); var i = n("DlQD"); function r() { var e = new i.Renderer, t = new i.Renderer, n = 1; return e.code = function (e, i, r) { if (e.endsWith("{:copy-code}")) { e = e.substring(0, e.length - "{:copy-code}".length); var a = t.code(e, i, r); return o(++n, a, e) } return t.code(e, i, r) }, e.tablecell = function (e, i) { return e.endsWith("{:copy-code}") && (e = e.substring(0, e.length - "{:copy-code}".length), e = o(++n, e, e)), t.tablecell(e, i) }, { renderer: e, headerIds: !0, gfm: !0, breaks: !1, pedantic: !1, smartLists: !0, smartypants: !1 } } function o(e, t, n) { return '<div class="code-wrapper">' + t + '<span id="copyCodeId' + e + '" style="display: none;">' + n + '</span><button id="copyCodeBtn' + e + '" onClick="markdownCopyCode(' + e + ')" class="clipboard-btn"><img src="https://clipboardjs.com/assets/images/clippy.svg" alt="Copy to clipboard"></button></div>' } window.markdownCopyCode = function (t) { var i = e("#copyCodeId" + t).text(); navigator.clipboard.writeText(i).then(function () { n.e(12).then(n.t.bind(null, "N1Jl", 7)).then(function () { var n = e("#copyCodeBtn" + t); n.hasClass("tooltipstered") || n.tooltipster({ content: "Copied!", theme: "tooltipster-shadow", delay: 0, trigger: "custom", triggerClose: { click: !0, tap: !0, scroll: !0, mouseleave: !0 }, side: "bottom", distance: 12, trackOrigin: !0 }), n.tooltipster("instance").open() }) }) } }).call(this, n("xexB")) }, RQSP: function (e, t, n) { "use strict"; n.d(t, "a", function () { return v }); var i = n("fXoL"), r = n("3Pt+"), o = n("8LU1"), a = n("//Q6"), s = n("Dn1P"), l = n.n(s), c = n("Zss7"), u = n("S+vS"), d = n("Wa9K"), p = n("Cfvw"), m = n("cp0P"), f = n("sYmb"), h = n("l7P3"), g = n("8m5z"), y = ["reactRoot"], b = c, v = function () { function e(e, t, n, i, r) { this.elementRef = e, this.translate = t, this.dialogs = n, this.store = i, this.cd = r, this.formProps = { isFullscreen: !1, option: { formDefaults: { startEmpty: !0 } }, onModelChange: this.onModelChange.bind(this), onColorClick: this.onColorClick.bind(this), onIconClick: this.onIconClick.bind(this), onToggleFullscreen: this.onToggleFullscreen.bind(this) }, this.isModelValid = !0, this.isFullscreen = !1, this.propagateChange = null, this.propagateChangePending = !1, this.writingValue = !1, this.updateViewPending = !1 } return Object.defineProperty(e.prototype, "readonly", { get: function () { return this.readonlyValue }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "required", { set: function (e) { this.readonlyValue = Object(o.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), e.prototype.ngOnInit = function () { }, e.prototype.ngOnDestroy = function () { this.destroyReactSchemaForm() }, e.prototype.registerOnChange = function (e) { var t = this; this.propagateChange = e, this.propagateChangePending && (this.propagateChangePending = !1, setTimeout(function () { t.propagateChange(t.data) }, 0)) }, e.prototype.registerOnTouched = function (e) { }, e.prototype.setDisabledState = function (e) { }, e.prototype.validate = function (e) { return this.isModelValid ? null : { modelValid: !1 } }, e.prototype.writeValue = function (e) { this.writingValue = !0, this.data = e, this.schema = this.data && this.data.schema ? Object(a.e)(this.data.schema) : { type: "object" }, this.schema.strict = !0, this.form = this.data && this.data.form ? Object(a.e)(this.data.form) : ["*"], this.groupInfoes = this.data && this.data.groupInfoes ? Object(a.e)(this.data.groupInfoes) : [], this.model = this.data && this.data.model || {}, this.model = l.a.sanitize(this.schema, this.model).data, this.updateAndRender(), this.isModelValid = this.validateModel(), this.writingValue = !1, this.isModelValid && !this.updateViewPending || this.updateView() }, e.prototype.updateView = function () { if (this.writingValue) this.updateViewPending = !0; else if (this.updateViewPending = !1, this.data) if (this.data.model = this.model, this.propagateChange) try { this.propagateChange(this.data) } catch (e) { this.propagateChangePending = !0 } else this.propagateChangePending = !0 }, e.prototype.ngOnChanges = function (e) { for (var t = 0, n = Object.keys(e); t < n.length; t++) { var i = n[t], r = e[i]; r.firstChange || r.currentValue === r.previousValue || "readonly" === i && this.updateAndRender() } }, e.prototype.onModelChange = function (e, t, n) { void 0 === n && (n = !1), Object(a.A)(t) && "" === t && (t = void 0), (d.a.updateValue(e, this.model, t) || n) && (this.isModelValid = this.validateModel(), this.updateView()) }, e.prototype.onColorClick = function (e, t, n) { this.dialogs.colorPicker(b(t).toRgbString()).subscribe(function (e) { n && n(b(e).toRgb()) }) }, e.prototype.onIconClick = function (e, t, n) { this.dialogs.materialIconPicker(t).subscribe(function (e) { e && n && n(e) }) }, e.prototype.onToggleFullscreen = function (e, t) { this.targetFullscreenElement = e, this.isFullscreen = !this.isFullscreen, this.fullscreenFinishFn = t, this.cd.markForCheck() }, e.prototype.onFullscreenChanged = function (e) { this.formProps.isFullscreen = e, this.renderReactSchemaForm(!1), this.fullscreenFinishFn && (this.fullscreenFinishFn(), this.fullscreenFinishFn = null) }, e.prototype.updateAndRender = function () { this.formProps.option.formDefaults.readonly = this.readonly, this.formProps.schema = this.schema, this.formProps.form = this.form, this.formProps.groupInfoes = this.groupInfoes, this.formProps.model = this.model, this.renderReactSchemaForm() }, e.prototype.renderReactSchemaForm = function (e) { var t = this; void 0 === e && (e = !0), e && this.destroyReactSchemaForm(); var i = []; i.push(Object(p.a)(n.e(24).then(n.t.bind(null, "q1tI", 7)))), i.push(Object(p.a)(n.e(3).then(n.t.bind(null, "i8i4", 7)))), i.push(Object(p.a)(Promise.all([n.e(3), n.e(2), n.e(19)]).then(n.bind(null, "VCAq")))), Object(m.a)(i).subscribe(function (e) { var n = e[0], i = e[1], r = e[2].default; i.render(n.createElement(r, t.formProps), t.reactRootElmRef.nativeElement) }) }, e.prototype.destroyReactSchemaForm = function () { var e = this; n.e(3).then(n.t.bind(null, "i8i4", 7)).then(function (t) { t.unmountComponentAtNode(e.reactRootElmRef.nativeElement) }) }, e.prototype.validateModel = function () { return !this.schema || !this.model || d.a.validateBySchema(this.schema, this.model).valid }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](i.ElementRef), i["\u0275\u0275directiveInject"](f.TranslateService), i["\u0275\u0275directiveInject"](u.a), i["\u0275\u0275directiveInject"](h.Store), i["\u0275\u0275directiveInject"](i.ChangeDetectorRef)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-json-form"]], viewQuery: function (e, t) { if (1 & e && i["\u0275\u0275viewQuery"](y, 3), 2 & e) { var n; i["\u0275\u0275queryRefresh"](n = i["\u0275\u0275loadQuery"]()) && (t.reactRootElmRef = n.first) } }, inputs: { required: "required" }, features: [i["\u0275\u0275ProvidersFeature"]([{ provide: r.NG_VALUE_ACCESSOR, useExisting: Object(i.forwardRef)(function () { return e }), multi: !0 }, { provide: r.NG_VALIDATORS, useExisting: Object(i.forwardRef)(function () { return e }), multi: !0 }]), i["\u0275\u0275NgOnChangesFeature"]], decls: 3, vars: 2, consts: [["tb-fullscreen", "", 1, "tb-json-form", 2, "background", "#fff", 3, "fullscreenElement", "fullscreen", "fullscreenChanged"], ["reactRoot", ""]], template: function (e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "div", 0), i["\u0275\u0275listener"]("fullscreenChanged", function (e) { return t.onFullscreenChanged(e) }), i["\u0275\u0275element"](1, "div", null, 1), i["\u0275\u0275elementEnd"]()), 2 & e && i["\u0275\u0275property"]("fullscreenElement", t.targetFullscreenElement)("fullscreen", t.isFullscreen) }, directives: [g.a], styles: [".tb-json-form{padding:12px;padding-bottom:14px!important;overflow:auto}"], encapsulation: 2 }), e }(); 0, void 0 }, Rf0i: function (e, t, n) { "use strict"; (function (e) { n.d(t, "c", function () { return d }), n.d(t, "a", function () { return p }), n.d(t, "b", function () { return m }); var i = n("mrSG"), r = n("fXoL"), o = n("wtyh"), a = n("FKr1"), s = n("HR/i"), l = ["*"], c = function (e) { this._elementRef = e }, u = Object(a.mixinColor)(c), d = function () { function e(e) { this.el = e } return e.\u0275fac = function (t) { return new (t || e)(r["\u0275\u0275directiveInject"](r.ElementRef)) }, e.\u0275dir = r["\u0275\u0275defineDirective"]({ type: e, selectors: [["mat-fab-trigger"]] }), e }(); 0, void 0; var p = function () { function t(e) { this.el = e } return t.prototype.ngOnInit = function () { e(this.el.nativeElement).children().wrap('<div class="mat-fab-action-item">') }, t.\u0275fac = function (e) { return new (e || t)(r["\u0275\u0275directiveInject"](r.ElementRef)) }, t.\u0275dir = r["\u0275\u0275defineDirective"]({ type: t, selectors: [["mat-fab-actions"]] }), t }(); 0, void 0; var m = function (t) { function n(e, n) { var i = t.call(this, e) || this; return i.el = e, i.window = n, i } return Object(i.d)(n, t), n.prototype.ngOnInit = function () { var t = this, n = e(this.el.nativeElement); n.addClass("mat-fab-toolbar"), n.find("mat-fab-trigger").find("button").prepend('<div class="mat-fab-toolbar-background"></div>'), n.addClass("mat-" + this.direction), this.fabToolbarResize$ = new s.a(function () { t.onFabToolbarResize() }), this.fabToolbarResize$.observe(this.el.nativeElement) }, n.prototype.ngOnDestroy = function () { this.fabToolbarResize$.disconnect() }, n.prototype.ngAfterViewInit = function () { this.triggerOpenClose(!0) }, n.prototype.ngOnChanges = function (e) { for (var t = 0, n = Object.keys(e); t < n.length; t++) { var i = n[t], r = e[i]; r.firstChange || r.currentValue === r.previousValue || "isOpen" === i && this.triggerOpenClose() } }, n.prototype.onFabToolbarResize = function () { this.isOpen && this.triggerOpenClose(!0) }, n.prototype.triggerOpenClose = function (t) { var n = this.el.nativeElement, i = e(this.el.nativeElement); t ? i.removeClass("mat-animation") : i.addClass("mat-animation"); var r = n.querySelector(".mat-fab-toolbar-background"), o = n.querySelector("mat-fab-trigger button"), a = n.querySelector("mat-toolbar"), s = n.querySelector("mat-fab-trigger button mat-icon"), l = i.find("mat-fab-actions").children(); if (o && r) { var c = n.offsetWidth, u = c / o.offsetWidth * 2; r.style.borderRadius = c + "px", this.isOpen ? (i.addClass("mat-is-open"), a.style.pointerEvents = "inherit", r.style.width = o.offsetWidth + "px", r.style.height = o.offsetHeight + "px", r.style.transform = "scale(" + u + ")", r.style.transitionDelay = "0ms", s && (s.style.transitionDelay = t ? "0ms" : ".3s"), l.each(function (e, n) { n.style.transitionDelay = t ? "0ms" : 25 * (l.length - e) + "ms" })) : (i.removeClass("mat-is-open"), a.style.pointerEvents = "none", r.style.transform = "scale(1)", r.style.top = "0", i.hasClass("mat-right") && (r.style.left = "0", r.style.right = null), i.hasClass("mat-left") && (r.style.right = "0", r.style.left = null), r.style.transitionDelay = t ? "0ms" : "200ms", l.each(function (e, n) { n.style.transitionDelay = (t ? 0 : 200) + 25 * e + "ms" })) } }, n.\u0275fac = function (e) { return new (e || n)(r["\u0275\u0275directiveInject"](r.ElementRef), r["\u0275\u0275directiveInject"](o.b)) }, n.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: n, selectors: [["mat-fab-toolbar"]], inputs: { color: "color", isOpen: "isOpen", direction: "direction" }, features: [r["\u0275\u0275InheritDefinitionFeature"], r["\u0275\u0275NgOnChangesFeature"]], ngContentSelectors: l, decls: 3, vars: 0, consts: [[1, "mat-fab-toolbar-wrapper"], [1, "mat-fab-toolbar-content"]], template: function (e, t) { 1 & e && (r["\u0275\u0275projectionDef"](), r["\u0275\u0275elementStart"](0, "div", 0), r["\u0275\u0275elementStart"](1, "div", 1), r["\u0275\u0275projection"](2), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]()) }, styles: ["mat-fab-toolbar{display:block}mat-fab-toolbar.mat-fab-bottom-right{top:auto;right:20px;bottom:20px;left:auto;position:absolute}mat-fab-toolbar.mat-fab-bottom-left{top:auto;right:auto;bottom:20px;left:20px;position:absolute}mat-fab-toolbar.mat-fab-top-right{top:20px;right:20px;bottom:auto;left:auto;position:absolute}mat-fab-toolbar.mat-fab-top-left{top:20px;right:auto;bottom:auto;left:20px;position:absolute}mat-fab-toolbar .mat-fab-toolbar-wrapper{display:block;position:relative;overflow:hidden;height:68px}mat-fab-toolbar mat-fab-trigger{position:absolute;z-index:20}mat-fab-toolbar mat-fab-trigger button{overflow:visible!important;opacity:.5}mat-fab-toolbar mat-fab-trigger .mat-fab-toolbar-background{display:block;position:absolute;z-index:21;opacity:1}mat-fab-toolbar mat-fab-trigger mat-icon{position:relative;z-index:22;opacity:1}mat-fab-toolbar.mat-left mat-fab-trigger{right:0}[dir=rtl] mat-fab-toolbar.mat-left mat-fab-trigger{right:auto;left:0}mat-fab-toolbar.mat-left .mat-toolbar-tools{flex-direction:row-reverse}mat-fab-toolbar.mat-left .mat-toolbar-tools>.mat-button:first-child{margin-right:.6rem}[dir=rtl] mat-fab-toolbar.mat-left .mat-toolbar-tools>.mat-button:first-child{margin-right:auto;margin-left:.6rem}mat-fab-toolbar.mat-left .mat-toolbar-tools>.mat-button:first-child{margin-left:-.8rem}[dir=rtl] mat-fab-toolbar.mat-left .mat-toolbar-tools>.mat-button:first-child{margin-left:auto;margin-right:-.8rem}mat-fab-toolbar.mat-left .mat-toolbar-tools>.mat-button:last-child{margin-right:8px}[dir=rtl] mat-fab-toolbar.mat-left .mat-toolbar-tools>.mat-button:last-child{margin-right:auto;margin-left:8px}mat-fab-toolbar.mat-right mat-fab-trigger{left:0}[dir=rtl] mat-fab-toolbar.mat-right mat-fab-trigger{left:auto;right:0}mat-fab-toolbar.mat-right .mat-toolbar-tools{flex-direction:row}mat-fab-toolbar mat-toolbar{padding:0!important;background-color:transparent!important;pointer-events:none;position:relative;z-index:23}mat-fab-toolbar mat-toolbar .mat-toolbar-tools{padding:0 20px!important;margin-top:3px}mat-fab-toolbar mat-toolbar .mat-fab-action-item{opacity:0;transform:scale(0)}mat-fab-toolbar.mat-is-open mat-fab-trigger>button{box-shadow:none;opacity:1}mat-fab-toolbar.mat-is-open mat-fab-trigger>button mat-icon{opacity:0}mat-fab-toolbar.mat-is-open .mat-fab-action-item{opacity:1;transform:scale(1)}mat-fab-toolbar.mat-animation mat-fab-trigger button{transition:opacity .3s cubic-bezier(.55,0,.55,.2) .2s}mat-fab-toolbar.mat-animation mat-fab-trigger .mat-fab-toolbar-background{transition:all .3s cubic-bezier(.55,0,.55,.2)}mat-fab-toolbar.mat-animation mat-fab-trigger mat-icon{transition:all .2s ease-in}mat-fab-toolbar.mat-animation mat-toolbar .mat-fab-action-item{transition:all .3s cubic-bezier(.55,0,.55,.2);transition-duration:.15s}mat-fab-toolbar.mat-animation.mat-is-open mat-fab-trigger>button{transition:opacity .3s cubic-bezier(.55,0,.55,.2)}"], encapsulation: 2 }), n }(u); 0, void 0 }).call(this, n("xexB")) }, RxGS: function (e, t, n) { "use strict"; n.d(t, "a", function () { return l }); var i = n("fXoL"), r = n("l7P3"), o = n("Nyw1"), a = n("3E0/"), s = n("w1tV"), l = function () { function e(e) { this.store = e, this.disabledOnLoadFormControls = [], this.isLoading$ = this.store.pipe(Object(a.a)(0), Object(r.select)(o.b), Object(s.a)()) } return e.prototype.registerDisableOnLoadFormControl = function (e) { var t = this; this.disabledOnLoadFormControls.push(e), this.loadingSubscription || (this.loadingSubscription = this.isLoading$.subscribe(function (e) { for (var n = 0, i = t.disabledOnLoadFormControls; n < i.length; n++) { var r = i[n]; e ? r.disable({ emitEvent: !1 }) : r.enable({ emitEvent: !1 }) } })) }, e.prototype.ngOnDestroy = function () { this.loadingSubscription && this.loadingSubscription.unsubscribe() }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](r.Store)) }, e.\u0275dir = i["\u0275\u0275defineDirective"]({ type: e }), e }(); 0, void 0 }, "S+vS": function (e, t, n) { "use strict"; n.d(t, "a", function () { return p }); var i = n("fXoL"), r = n("Vurf"), o = n("VYz+"), a = n("SReA"), s = n("oXES"), l = n("jXr5"), c = n("ikDa"), u = n("sYmb"), d = n("0IaG"), p = function () { function e(e, t, n) { this.translate = e, this.authService = t, this.dialog = n } return e.prototype.confirm = function (e, t, n, i, r) { void 0 === n && (n = null), void 0 === i && (i = null), void 0 === r && (r = !1); var o = { disableClose: !0, data: { title: e, message: t, cancel: n || this.translate.instant("action.cancel"), ok: i || this.translate.instant("action.ok") } }; return r && (o.panelClass = ["tb-fullscreen-dialog"]), this.dialog.open(s.a, o).afterClosed() }, e.prototype.alert = function (e, t, n, i) { void 0 === n && (n = null), void 0 === i && (i = !1); var r = { disableClose: !0, data: { title: e, message: t, ok: n || this.translate.instant("action.ok") } }; return i && (r.panelClass = ["tb-fullscreen-dialog"]), this.dialog.open(l.a, r).afterClosed() }, e.prototype.colorPicker = function (e) { return this.dialog.open(o.a, { disableClose: !0, panelClass: ["tb-dialog", "tb-fullscreen-dialog"], data: { color: e } }).afterClosed() }, e.prototype.materialIconPicker = function (e) { return this.dialog.open(a.a, { disableClose: !0, panelClass: ["tb-dialog", "tb-fullscreen-dialog"], data: { icon: e } }).afterClosed() }, e.prototype.permissionDenied = function () { this.alert(this.translate.instant("access.permission-denied"), this.translate.instant("access.permission-denied-text"), this.translate.instant("action.close")) }, e.prototype.forbidden = function () { var e = this, t = this.confirm(this.translate.instant("access.access-forbidden"), this.translate.instant("access.access-forbidden-text"), this.translate.instant("action.cancel"), this.translate.instant("action.sign-in"), !0); return t.subscribe(function (t) { t && e.authService.logout() }), t }, e.prototype.todo = function () { return this.dialog.open(c.a, { disableClose: !0, panelClass: ["tb-fullscreen-dialog"] }).afterClosed() }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275inject"](u.TranslateService), i["\u0275\u0275inject"](r.a), i["\u0275\u0275inject"](d.MatDialog)) }, e.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, SReA: function (e, t, n) { "use strict"; n.d(t, "a", function () { return L }); var i = n("mrSG"), r = n("fXoL"), o = n("0IaG"), a = n("gmuX"), s = n("OiFK"), l = n("3Pt+"), c = n("LRne"), u = n("VRyK"), d = n("lJxs"), p = n("JX91"), m = n("5+tZ"), f = n("3E0/"), h = n("w1tV"), g = n("CqXF"), y = n("vkgz"), b = n("l7P3"), v = n("tyNb"), E = n("/t3+"), T = n("XiUz"), S = n("1jcm"), C = n("sYmb"), O = n("bTqV"), w = n("NFeN"), I = n("ofXK"), x = n("bv9b"), M = n("Xa2L"), j = n("Qu3c"), A = ["iconButtons"]; function R(e, t) { 1 & e && r["\u0275\u0275element"](0, "mat-progress-bar", 17) } function N(e, t) { 1 & e && r["\u0275\u0275element"](0, "div", 18) } function P(e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "div", 19), r["\u0275\u0275element"](1, "mat-spinner", 20), r["\u0275\u0275elementEnd"]()) } function k(e, t) { if (1 & e) { var n = r["\u0275\u0275getCurrentView"](); r["\u0275\u0275elementStart"](0, "button", 24), r["\u0275\u0275listener"]("click", function () { r["\u0275\u0275restoreView"](n); var e = r["\u0275\u0275nextContext"]().$implicit; return r["\u0275\u0275nextContext"]().selectIcon(e) }), r["\u0275\u0275elementStart"](1, "mat-icon"), r["\u0275\u0275text"](2), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]() } if (2 & e) { var i = r["\u0275\u0275nextContext"]().$implicit; r["\u0275\u0275propertyInterpolate"]("matTooltip", i), r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate"](i) } } function _(e, t) { if (1 & e) { var n = r["\u0275\u0275getCurrentView"](); r["\u0275\u0275elementStart"](0, "button", 25), r["\u0275\u0275listener"]("click", function () { r["\u0275\u0275restoreView"](n); var e = r["\u0275\u0275nextContext"]().$implicit; return r["\u0275\u0275nextContext"]().selectIcon(e) }), r["\u0275\u0275elementStart"](1, "mat-icon"), r["\u0275\u0275text"](2), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]() } if (2 & e) { var i = r["\u0275\u0275nextContext"]().$implicit; r["\u0275\u0275propertyInterpolate"]("matTooltip", i), r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate"](i) } } function F(e, t) { if (1 & e && (r["\u0275\u0275elementContainerStart"](0, null, 21), r["\u0275\u0275template"](2, k, 3, 2, "button", 22), r["\u0275\u0275template"](3, _, 3, 2, "button", 23), r["\u0275\u0275elementContainerEnd"]()), 2 & e) { var n = t.$implicit, i = r["\u0275\u0275nextContext"](); r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngIf", n === i.selectedIcon), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", n !== i.selectedIcon) } } var L = function (e) { function t(t, n, i, r, o) { var a = e.call(this, t, n, o) || this; return a.store = t, a.router = n, a.data = i, a.utils = r, a.dialogRef = o, a.selectedIcon = i.icon, a.showAllControl = new l.FormControl(!1), a } return Object(i.d)(t, e), t.prototype.ngOnInit = function () { var e = this; this.icons$ = this.showAllControl.valueChanges.pipe(Object(d.a)(function (e) { return { firstTime: !1, showAll: e } }), Object(p.a)({ firstTime: !0, showAll: !1 }), Object(m.b)(function (t) { if (t.showAll) return e.utils.getMaterialIcons().pipe(Object(f.a)(100)); var n = Object(c.a)(e.utils.getCommonMaterialIcons()); return t.firstTime ? n : n.pipe(Object(f.a)(50)) }), Object(h.a)()) }, t.prototype.ngAfterViewInit = function () { var e = this; this.loadingIcons$ = Object(u.a)(this.showAllControl.valueChanges.pipe(Object(g.a)(!0)), this.iconButtons.changes.pipe(Object(f.a)(100), Object(g.a)(!1))).pipe(Object(y.a)(function (t) { t ? e.showAllControl.disable({ emitEvent: !1 }) : e.showAllControl.enable({ emitEvent: !1 }) }), Object(h.a)()) }, t.prototype.selectIcon = function (e) { this.dialogRef.close(e) }, t.prototype.cancel = function () { this.dialogRef.close(null) }, t.\u0275fac = function (e) { return new (e || t)(r["\u0275\u0275directiveInject"](b.Store), r["\u0275\u0275directiveInject"](v.Router), r["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA), r["\u0275\u0275directiveInject"](s.a), r["\u0275\u0275directiveInject"](o.MatDialogRef)) }, t.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: t, selectors: [["tb-material-icons-dialog"]], viewQuery: function (e, t) { if (1 & e && r["\u0275\u0275viewQuery"](A, 1), 2 & e) { var n; r["\u0275\u0275queryRefresh"](n = r["\u0275\u0275loadQuery"]()) && (t.iconButtons = n) } }, features: [r["\u0275\u0275ProvidersFeature"]([]), r["\u0275\u0275InheritDefinitionFeature"]], decls: 31, vars: 25, consts: [[1, "tb-material-icons-dialog", 2, "min-width", "600px"], ["fxLayout", "row", "color", "accent"], ["fxFlex", ""], ["fxLayout", "row", "fxLayoutAlign", "start center", "fxLayoutGap", "8px"], [3, "formControl"], ["translate", ""], ["mat-button", "", "mat-icon-button", "", "type", "button", 3, "click"], [1, "material-icons"], ["color", "warn", "mode", "indeterminate", 4, "ngIf"], ["style", "height: 4px;", 4, "ngIf"], ["class", "tb-absolute-fill tb-icons-load", "fxLayout", "column", "fxLayoutAlign", "center center", 4, "ngIf"], ["mat-dialog-content", ""], ["fxLayout", "column", 1, "mat-content", "mat-padding"], [3, "disabled"], ["ngFor", "", 3, "ngForOf"], ["mat-dialog-actions", "", "fxLayout", "row"], ["mat-button", "", "type", "button", 3, "disabled", "click"], ["color", "warn", "mode", "indeterminate"], [2, "height", "4px"], ["fxLayout", "column", "fxLayoutAlign", "center center", 1, "tb-absolute-fill", "tb-icons-load"], ["color", "accent", "mode", "indeterminate", "diameter", "40"], ["iconButtons", ""], ["class", "tb-select-icon-button", "mat-button", "", "mat-icon-button", "", "mat-raised-button", "", "color", "accent", "matTooltipPosition", "above", "type", "button", 3, "matTooltip", "click", 4, "ngIf"], ["class", "tb-select-icon-button", "mat-button", "", "mat-icon-button", "", "matTooltipPosition", "above", "type", "button", 3, "matTooltip", "click", 4, "ngIf"], ["mat-button", "", "mat-icon-button", "", "mat-raised-button", "", "color", "accent", "matTooltipPosition", "above", "type", "button", 1, "tb-select-icon-button", 3, "matTooltip", "click"], ["mat-button", "", "mat-icon-button", "", "matTooltipPosition", "above", "type", "button", 1, "tb-select-icon-button", 3, "matTooltip", "click"]], template: function (e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "form", 0), r["\u0275\u0275elementStart"](1, "mat-toolbar", 1), r["\u0275\u0275elementStart"](2, "h2"), r["\u0275\u0275text"](3), r["\u0275\u0275pipe"](4, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](5, "span", 2), r["\u0275\u0275elementStart"](6, "section", 3), r["\u0275\u0275element"](7, "mat-slide-toggle", 4), r["\u0275\u0275elementStart"](8, "label", 5), r["\u0275\u0275text"](9, "icon.show-all"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](10, "button", 6), r["\u0275\u0275listener"]("click", function () { return t.cancel() }), r["\u0275\u0275elementStart"](11, "mat-icon", 7), r["\u0275\u0275text"](12, "close"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275template"](13, R, 1, 0, "mat-progress-bar", 8), r["\u0275\u0275pipe"](14, "async"), r["\u0275\u0275template"](15, N, 1, 0, "div", 9), r["\u0275\u0275pipe"](16, "async"), r["\u0275\u0275template"](17, P, 2, 0, "div", 10), r["\u0275\u0275pipe"](18, "async"), r["\u0275\u0275elementStart"](19, "div", 11), r["\u0275\u0275elementStart"](20, "div", 12), r["\u0275\u0275elementStart"](21, "fieldset", 13), r["\u0275\u0275pipe"](22, "async"), r["\u0275\u0275template"](23, F, 4, 2, "ng-template", 14), r["\u0275\u0275pipe"](24, "async"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](25, "div", 15), r["\u0275\u0275element"](26, "span", 2), r["\u0275\u0275elementStart"](27, "button", 16), r["\u0275\u0275listener"]("click", function () { return t.cancel() }), r["\u0275\u0275pipe"](28, "async"), r["\u0275\u0275text"](29), r["\u0275\u0275pipe"](30, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]()), 2 & e && (r["\u0275\u0275advance"](3), r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](4, 9, "icon.select-icon")), r["\u0275\u0275advance"](4), r["\u0275\u0275property"]("formControl", t.showAllControl), r["\u0275\u0275advance"](6), r["\u0275\u0275property"]("ngIf", r["\u0275\u0275pipeBind1"](14, 11, t.isLoading$)), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngIf", !r["\u0275\u0275pipeBind1"](16, 13, t.isLoading$)), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngIf", r["\u0275\u0275pipeBind1"](18, 15, t.loadingIcons$)), r["\u0275\u0275advance"](4), r["\u0275\u0275property"]("disabled", r["\u0275\u0275pipeBind1"](22, 17, t.isLoading$)), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngForOf", r["\u0275\u0275pipeBind1"](24, 19, t.icons$)), r["\u0275\u0275advance"](4), r["\u0275\u0275property"]("disabled", r["\u0275\u0275pipeBind1"](28, 21, t.isLoading$)), r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](30, 23, "action.cancel"), " ")) }, directives: [l["\u0275angular_packages_forms_forms_ba"], l.NgControlStatusGroup, l.NgForm, E.MatToolbar, T.f, T.b, T.e, T.g, S.MatSlideToggle, l.NgControlStatus, l.FormControlDirective, C.TranslateDirective, O.MatButton, w.MatIcon, I.NgIf, o.MatDialogContent, I.NgForOf, o.MatDialogActions, x.MatProgressBar, M.MatSpinner, j.MatTooltip], pipes: [C.TranslatePipe, I.AsyncPipe], styles: ["[_nghost-%COMP%]   .tb-material-icons-dialog[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .tb-icons-load[_ngcontent-%COMP%]{top:64px;z-index:3;background:hsla(0,0%,100%,.75)}[_nghost-%COMP%]     .tb-material-icons-dialog button.mat-icon-button.tb-select-icon-button{width:56px;height:56px;padding:16px;margin:10px;border:1px solid orange;border-radius:0;line-height:0}"] }), t }(a.a); 0, void 0 }, Sy1n: function (e, t, n) { "use strict"; (function (e) { n.d(t, "a", function () { return b }); n("yLV6"); var i = n("fXoL"), r = n("AytR"), o = n("l7P3"), a = n("EP1h"), s = n("itXk"), l = n("C/rb"), c = n("lJxs"), u = n("/uUt"), d = n("pLZG"), p = n("zP0r"), m = n("Vurf"), f = n("sYmb"), h = n("NFeN"), g = n("jhN1"), y = n("tyNb"), b = function () { function t(e, t, n, i, o, a) { this.store = e, this.storageService = t, this.translate = n, this.matIconRegistry = i, this.domSanitizer = o, this.authService = a, console.log("ThingsBoard Version: " + r.a.tbVersion), this.matIconRegistry.addSvgIconSetInNamespace("mdi", this.domSanitizer.bypassSecurityTrustResourceUrl("./assets/mdi.svg")), this.matIconRegistry.addSvgIconLiteral("google-logo", this.domSanitizer.bypassSecurityTrustHtml('<svg viewBox="0 0 48 48"><path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"/><path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"/><path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"/><path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"/><path fill="none" d="M0 0h48v48H0z"/></svg>')), this.matIconRegistry.addSvgIconLiteral("github-logo", this.domSanitizer.bypassSecurityTrustHtml('<svg viewBox="0 0 32.7 32.7"><path d="M16.3 0C7.3 0 0 7.3 0 16.3c0 7.2 4.7 13.3 11.1 15.5.8.1 1.1-.4 1.1-.8v-2.8c-4.5 1-5.5-2.2-5.5-2.2-.7-1.9-1.8-2.4-1.8-2.4-1.5-1 .1-1 .1-1 1.6.1 2.5 1.7 2.5 1.7 1.5 2.5 3.8 1.8 4.7 1.4.1-1.1.6-1.8 1-2.2-3.6-.4-7.4-1.8-7.4-8.1 0-1.8.6-3.2 1.7-4.4-.2-.4-.7-2.1.2-4.3 0 0 1.4-.4 4.5 1.7 1.3-.4 2.7-.5 4.1-.5s2.8.2 4.1.5c3.1-2.1 4.5-1.7 4.5-1.7.9 2.2.3 3.9.2 4.3 1 1.1 1.7 2.6 1.7 4.4 0 6.3-3.8 7.6-7.4 8 .6.5 1.1 1.5 1.1 3v4.5c0 .4.3.9 1.1.8 6.5-2.2 11.1-8.3 11.1-15.5C32.6 7.3 25.3 0 16.3 0z" fill="#211c19"/></svg>')), this.matIconRegistry.addSvgIconLiteral("facebook-logo", this.domSanitizer.bypassSecurityTrustHtml('<svg viewBox="0 0 263 263"><path d="M263 131.5C263 58.9 204.1 0 131.5 0S0 58.9 0 131.5c0 65.6 48.1 120 110.9 129.9v-91.9H77.5v-38h33.4v-29c0-33 19.6-51.2 49.7-51.2 14.4 0 29.4 2.6 29.4 2.6v32.4h-16.5c-16.3 0-21.4 10.1-21.4 20.5v24.7h36.4l-5.8 38h-30.6v91.9c62.8-9.9 110.9-64.3 110.9-129.9z" fill="#1877f2"/><path d="M182.7 169.5l5.8-38H152v-24.7c0-10.4 5.1-20.5 21.4-20.5H190V53.9s-15-2.6-29.4-2.6c-30 0-49.7 18.2-49.7 51.2v29H77.5v38h33.4v91.9c6.7 1.1 13.6 1.6 20.5 1.6s13.9-.5 20.5-1.6v-91.9h30.8z" fill="#fff"/></svg>')), this.matIconRegistry.addSvgIconLiteral("apple-logo", this.domSanitizer.bypassSecurityTrustHtml('<svg viewBox="0 0 256 315"><path d="M213.803394,167.030943 C214.2452,214.609646 255.542482,230.442639 256,230.644727 C255.650812,231.761357 249.401383,253.208293 234.24263,275.361446 C221.138555,294.513969 207.538253,313.596333 186.113759,313.991545 C165.062051,314.379442 158.292752,301.507828 134.22469,301.507828 C110.163898,301.507828 102.642899,313.596301 82.7151126,314.379442 C62.0350407,315.16201 46.2873831,293.668525 33.0744079,274.586162 C6.07529317,235.552544 -14.5576169,164.286328 13.147166,116.18047 C26.9103111,92.2909053 51.5060917,77.1630356 78.2026125,76.7751096 C98.5099145,76.3877456 117.677594,90.4371851 130.091705,90.4371851 C142.497945,90.4371851 165.790755,73.5415029 190.277627,76.0228474 C200.528668,76.4495055 229.303509,80.1636878 247.780625,107.209389 C246.291825,108.132333 213.44635,127.253405 213.803394,167.030988 M174.239142,50.1987033 C185.218331,36.9088319 192.607958,18.4081019 190.591988,0 C174.766312,0.636050225 155.629514,10.5457909 144.278109,23.8283506 C134.10507,35.5906758 125.195775,54.4170275 127.599657,72.4607932 C145.239231,73.8255433 163.259413,63.4970262 174.239142,50.1987249" fill="#000000"></path></svg>')), this.storageService.testLocalStorage(), this.setupTranslate(), this.setupAuth() } return t.prototype.setupTranslate = function () { r.a.production || console.log("Supported Langs: " + r.a.supportedLangs), this.translate.addLangs(r.a.supportedLangs), r.a.production || console.log("Default Lang: " + r.a.defaultLang), this.translate.setDefaultLang(r.a.defaultLang) }, t.prototype.setupAuth = function () { var e = this; Object(s.b)([this.store.pipe(Object(o.select)(l.e)), this.store.pipe(Object(o.select)(l.f))]).pipe(Object(c.a)(function (e) { return { isAuthenticated: e[0], isUserLoaded: e[1] } }), Object(u.a)(), Object(d.a)(function (e) { return e.isUserLoaded }), Object(p.a)(1)).subscribe(function (t) { e.authService.gotoDefaultPlace(t.isAuthenticated) }), this.authService.reloadUser() }, t.prototype.ngOnInit = function () { }, t.prototype.onActivateComponent = function (t) { var n = e("div#tb-loading-spinner"); n.length && n.remove() }, t.\u0275fac = function (e) { return new (e || t)(i["\u0275\u0275directiveInject"](o.Store), i["\u0275\u0275directiveInject"](a.a), i["\u0275\u0275directiveInject"](f.TranslateService), i["\u0275\u0275directiveInject"](h.MatIconRegistry), i["\u0275\u0275directiveInject"](g.DomSanitizer), i["\u0275\u0275directiveInject"](m.a)) }, t.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: t, selectors: [["tb-root"]], decls: 1, vars: 0, consts: [[3, "activate"]], template: function (e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "router-outlet", 0), i["\u0275\u0275listener"]("activate", function (e) { return t.onActivateComponent(e) }), i["\u0275\u0275elementEnd"]()) }, directives: [y.RouterOutlet], styles: [""] }), t }(); 0, void 0 }).call(this, n("xexB")) }, T4sd: function (e, t, n) { "use strict"; n.d(t, "a", function () { return o }); var i = n("fXoL"), r = n("//Q6"), o = function () { function e() { } return e.prototype.transform = function (e, t, n, i) { if (!e) return ""; if (Object(r.A)(n) && (n = parseInt(n, 10)), !n) return e; if (e.length <= n) return e; if (e = e.substr(0, n), t) { var o = e.lastIndexOf(" "); -1 !== o && ("." !== e.charAt(o - 1) && "," !== e.charAt(o - 1) || (o -= 1), e = e.substr(0, o)) } return e + (i || " \u2026") }, e.\u0275fac = function (t) { return new (t || e) }, e.\u0275pipe = i["\u0275\u0275definePipe"]({ name: "truncate", type: e, pure: !0 }), e }(); 0, void 0 }, T9Vw: function (e, t, n) { "use strict"; n.d(t, "a", function () { return m }); var i = n("mrSG"), r = n("fXoL"), o = n("wtyh"), a = n("//Q6"), s = n("Cfvw"), l = n("LRne"), c = n("JIr8"), u = n("vkgz"), d = n("Vurf"), p = n("tyNb"), m = function () { function e(e, t, n) { this.window = e, this.router = t, this.authService = n, this.onWindowMessageListener = this.onWindowMessage.bind(this); var i = this.window; this.mobileChannel = i.flutter_inappwebview, this.mobileApp = Object(a.n)(this.mobileChannel), this.mobileApp && e.addEventListener("message", this.onWindowMessageListener) } return e.prototype.isMobileApp = function () { return this.mobileApp }, e.prototype.handleDashboardStateName = function (e) { this.mobileApp && this.mobileChannel.callHandler("tbMobileDashboardStateNameHandler", e) }, e.prototype.onDashboardLoaded = function (e, t) { this.mobileApp && this.mobileChannel.callHandler("tbMobileDashboardLoadedHandler", e, t) }, e.prototype.onDashboardRightLayoutChanged = function (e) { this.mobileApp && this.mobileChannel.callHandler("tbMobileDashboardLayoutHandler", e) }, e.prototype.registerToggleLayoutFunction = function (e) { this.toggleLayoutFunction = e }, e.prototype.unregisterToggleLayoutFunction = function () { this.toggleLayoutFunction = null }, e.prototype.handleWidgetMobileAction = function (e) { for (var t, n = [], r = 1; r < arguments.length; r++)n[r - 1] = arguments[r]; return this.mobileApp ? Object(s.a)((t = this.mobileChannel).callHandler.apply(t, Object(i.h)(["tbMobileHandler", e], n))).pipe(Object(c.a)(function (t) { return Object(l.a)({ hasError: !0, error: (null == t ? void 0 : t.message) ? t.message : "Failed to execute mobile action " + e }) })) : Object(l.a)(null) }, e.prototype.handleMobileNavigation = function (e, t) { this.mobileApp && this.mobileChannel.callHandler("tbMobileNavigationHandler", e, t) }, e.prototype.onWindowMessage = function (e) { if (e.data) { var t = void 0; try { t = JSON.parse(e.data) } catch (r) { } if (t && t.type) switch (t.type) { case "openDashboardMessage": var n = t.data; this.openDashboard(n); break; case "reloadUserMessage": var i = t.data; this.reloadUser(i); break; case "toggleDashboardLayout": this.toggleLayoutFunction && this.toggleLayoutFunction() } } }, e.prototype.openDashboard = function (e) { var t = this; e && e.dashboardId && (this.reloadUserObservable ? this.reloadUserObservable.subscribe(function (n) { n && t.doDashboardNavigation(e) }) : this.doDashboardNavigation(e)) }, e.prototype.doDashboardNavigation = function (e) { var t = "/dashboard/" + e.dashboardId, n = []; e.state && n.push("state=" + e.state), e.embedded && n.push("embedded=true"), e.hideToolbar && n.push("hideToolbar=true"), this.lastDashboardId === e.dashboardId && n.push("reload=" + (new Date).getTime()), n.length && (t += "?" + n.join("&")), this.lastDashboardId = e.dashboardId, this.router.navigateByUrl(t, { replaceUrl: !0 }) }, e.prototype.reloadUser = function (e) { var t = this; e && e.accessToken && e.refreshToken && (this.reloadUserObservable = this.authService.setUserFromJwtToken(e.accessToken, e.refreshToken, !0).pipe(Object(u.a)(function () { t.reloadUserObservable = null }))) }, e.\u0275fac = function (t) { return new (t || e)(r["\u0275\u0275inject"](o.b), r["\u0275\u0275inject"](p.Router), r["\u0275\u0275inject"](d.a)) }, e.\u0275prov = r["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, TSBb: function (e, t, n) { "use strict"; n.d(t, "a", function () { return L }); var i = n("mrSG"), r = n("fXoL"), o = n("3Pt+"), a = n("XNiG"), s = n("VRyK"), l = n("LRne"), c = n("Kj3r"), u = n("vkgz"), d = n("lJxs"), p = n("eIep"), m = n("w1tV"), f = n("JIr8"), h = n("U3y+"), g = n("21Fy"), y = n("8LU1"), b = n("C/rb"), v = n("zp9Z"), E = n("//Q6"), T = n("l7P3"), S = n("sYmb"), C = n("kmnG"), O = n("qFsG"), w = n("/1cH"), I = n("ofXK"), x = n("bTqV"), M = n("NFeN"), j = n("FKr1"), A = n("d5eY"), R = ["entityInput"]; function N(e, t) { if (1 & e) { var n = r["\u0275\u0275getCurrentView"](); r["\u0275\u0275elementStart"](0, "button", 9), r["\u0275\u0275listener"]("click", function () { return r["\u0275\u0275restoreView"](n), r["\u0275\u0275nextContext"]().clear() }), r["\u0275\u0275elementStart"](1, "mat-icon", 10), r["\u0275\u0275text"](2, "close"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]() } } function P(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "mat-option", 11), r["\u0275\u0275element"](1, "span", 12), r["\u0275\u0275pipe"](2, "highlight"), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit, i = r["\u0275\u0275nextContext"](); r["\u0275\u0275property"]("value", n), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("innerHTML", r["\u0275\u0275pipeBind2"](2, 2, n.name, i.searchText), r["\u0275\u0275sanitizeHtml"]) } } var k = function (e) { return { entity: e } }; function _(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "mat-option", 11), r["\u0275\u0275elementStart"](1, "span"), r["\u0275\u0275text"](2), r["\u0275\u0275pipe"](3, "async"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = r["\u0275\u0275nextContext"](); r["\u0275\u0275property"]("value", null), r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](3, 2, n.translate.get(n.noEntitiesMatchingText, r["\u0275\u0275pureFunction1"](4, k, n.searchText))), " ") } } function F(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "mat-error"), r["\u0275\u0275text"](1), r["\u0275\u0275pipe"](2, "translate"), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = r["\u0275\u0275nextContext"](); r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](2, 1, n.entityRequiredText), " ") } } var L = function () { function e(e, t, n, i) { this.store = e, this.translate = t, this.entityService = n, this.fb = i, this.entityChanged = new r.EventEmitter, this.searchText = "", this.dirty = !1, this.refresh$ = new a.b, this.propagateChange = function (e) { }, this.selectEntityFormGroup = this.fb.group({ entity: [null] }) } return Object.defineProperty(e.prototype, "entityType", { set: function (e) { this.entityTypeValue !== e && (this.entityTypeValue = e, this.load(), this.reset(), this.refresh$.next([]), this.dirty = !0) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "entitySubtype", { set: function (e) { if (this.entitySubtypeValue !== e) { this.entitySubtypeValue = e; var t = this.getCurrentEntity(); t && t.type !== this.entitySubtypeValue && (this.reset(), this.refresh$.next([]), this.dirty = !0), this.selectEntityFormGroup.get("entity").updateValueAndValidity() } }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "required", { get: function () { return this.requiredValue }, set: function (e) { this.requiredValue = Object(y.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.ngOnInit = function () { var e = this; this.filteredEntities = Object(s.a)(this.refresh$.asObservable(), this.selectEntityFormGroup.get("entity").valueChanges.pipe(Object(c.a)(150), Object(u.a)(function (t) { var n; n = "string" != typeof t && t ? t.id.id : null, e.updateView(n, t), null === t && e.clear() }), Object(d.a)(function (e) { return e ? "string" == typeof e ? e : e.name : "" }), Object(p.a)(function (t) { return e.fetchEntities(t) }), Object(m.a)())) }, e.prototype.ngAfterViewInit = function () { }, e.prototype.load = function () { if (this.entityTypeValue) switch (this.entityTypeValue) { case h.b.ASSET: this.entityText = "asset.asset", this.noEntitiesMatchingText = "asset.no-assets-matching", this.entityRequiredText = "asset.asset-required"; break; case h.b.DEVICE: this.entityText = "device.device", this.noEntitiesMatchingText = "device.no-devices-matching", this.entityRequiredText = "device.device-required"; break; case h.b.EDGE: this.entityText = "edge.edge", this.noEntitiesMatchingText = "edge.no-edges-matching", this.entityRequiredText = "edge.edge-required"; break; case h.b.ENTITY_VIEW: this.entityText = "entity-view.entity-view", this.noEntitiesMatchingText = "entity-view.no-entity-views-matching", this.entityRequiredText = "entity-view.entity-view-required"; break; case h.b.RULE_CHAIN: this.entityText = "rulechain.rulechain", this.noEntitiesMatchingText = "rulechain.no-rulechains-matching", this.entityRequiredText = "rulechain.rulechain-required"; break; case h.b.TENANT: case h.a.CURRENT_TENANT: this.entityText = "tenant.tenant", this.noEntitiesMatchingText = "tenant.no-tenants-matching", this.entityRequiredText = "tenant.tenant-required"; break; case h.b.CUSTOMER: this.entityText = "customer.customer", this.noEntitiesMatchingText = "customer.no-customers-matching", this.entityRequiredText = "customer.customer-required"; break; case h.b.USER: case h.a.CURRENT_USER: this.entityText = "user.user", this.noEntitiesMatchingText = "user.no-users-matching", this.entityRequiredText = "user.user-required"; break; case h.b.DASHBOARD: this.entityText = "dashboard.dashboard", this.noEntitiesMatchingText = "dashboard.no-dashboards-matching", this.entityRequiredText = "dashboard.dashboard-required"; break; case h.b.ALARM: this.entityText = "alarm.alarm", this.noEntitiesMatchingText = "alarm.no-alarms-matching", this.entityRequiredText = "alarm.alarm-required"; break; case h.a.CURRENT_CUSTOMER: this.entityText = "customer.default-customer", this.noEntitiesMatchingText = "customer.no-customers-matching", this.entityRequiredText = "customer.default-customer-required"; break; case h.a.CURRENT_USER_OWNER: Object(b.b)(this.store).authority === v.a.TENANT_ADMIN ? (this.entityText = "tenant.tenant", this.noEntitiesMatchingText = "tenant.no-tenants-matching", this.entityRequiredText = "tenant.tenant-required") : (this.entityText = "customer.customer", this.noEntitiesMatchingText = "customer.no-customers-matching", this.entityRequiredText = "customer.customer-required") }this.labelText && this.labelText.length && (this.entityText = this.labelText), this.requiredText && this.requiredText.length && (this.entityRequiredText = this.requiredText); var e = this.getCurrentEntity(); if (e) { var t = e.id.entityType; this.entityTypeValue && t !== this.entityTypeValue && this.reset() } }, e.prototype.getCurrentEntity = function () { var e = this.selectEntityFormGroup.get("entity").value; return e && "string" != typeof e ? e : null }, e.prototype.setDisabledState = function (e) { this.disabled = e, this.disabled ? this.selectEntityFormGroup.disable({ emitEvent: !1 }) : this.selectEntityFormGroup.enable({ emitEvent: !1 }) }, e.prototype.writeValue = function (e) { return Object(i.b)(this, void 0, void 0, function () { var t, n, r; return Object(i.e)(this, function (i) { switch (i.label) { case 0: if (this.searchText = "", null === e || !("string" == typeof e || e.entityType && e.id)) return [3, 5]; t = void 0, n = void 0, "string" == typeof e ? (t = this.checkEntityType(this.entityTypeValue), n = e) : (t = this.checkEntityType(e.entityType), n = e.id), r = null, i.label = 1; case 1: return i.trys.push([1, 3, , 4]), [4, this.entityService.getEntity(t, n, { ignoreLoading: !0, ignoreErrors: !0 }).toPromise()]; case 2: return r = i.sent(), [3, 4]; case 3: return i.sent(), this.propagateChange(null), [3, 4]; case 4: return this.modelValue = null !== r ? r.id.id : null, this.selectEntityFormGroup.get("entity").patchValue(null !== r ? r : "", { emitEvent: !1 }), this.entityChanged.emit(r), [3, 6]; case 5: this.modelValue = null, this.selectEntityFormGroup.get("entity").patchValue("", { emitEvent: !1 }), i.label = 6; case 6: return this.dirty = !0, [2] } }) }) }, e.prototype.onFocus = function () { this.dirty && (this.selectEntityFormGroup.get("entity").updateValueAndValidity({ onlySelf: !0, emitEvent: !0 }), this.dirty = !1) }, e.prototype.reset = function () { this.selectEntityFormGroup.get("entity").patchValue("", { emitEvent: !1 }) }, e.prototype.updateView = function (e, t) { Object(E.r)(this.modelValue, e) || (this.modelValue = e, this.propagateChange(this.modelValue), this.entityChanged.emit(t)) }, e.prototype.displayEntityFn = function (e) { return e ? e.name : void 0 }, e.prototype.fetchEntities = function (e) { var t = this; this.searchText = e; var n = this.checkEntityType(this.entityTypeValue); return this.entityService.getEntitiesByNameFilter(n, e, 50, this.entitySubtypeValue, { ignoreLoading: !0 }).pipe(Object(f.a)(function () { return Object(l.a)(null) }), Object(d.a)(function (e) { if (e) { if (t.excludeEntityIds && t.excludeEntityIds.length) { var n = []; return e.forEach(function (e) { -1 === t.excludeEntityIds.indexOf(e.id.id) && n.push(e) }), n } return e } return [] })) }, e.prototype.clear = function () { var e = this; this.selectEntityFormGroup.get("entity").patchValue("", { emitEvent: !0 }), setTimeout(function () { e.entityInput.nativeElement.blur(), e.entityInput.nativeElement.focus() }, 0) }, e.prototype.checkEntityType = function (e) { return e === h.a.CURRENT_CUSTOMER ? h.b.CUSTOMER : e === h.a.CURRENT_TENANT ? h.b.TENANT : e === h.a.CURRENT_USER ? h.b.USER : e === h.a.CURRENT_USER_OWNER ? Object(b.b)(this.store).authority === v.a.TENANT_ADMIN ? h.b.TENANT : h.b.CUSTOMER : e }, e.\u0275fac = function (t) { return new (t || e)(r["\u0275\u0275directiveInject"](T.Store), r["\u0275\u0275directiveInject"](S.TranslateService), r["\u0275\u0275directiveInject"](g.a), r["\u0275\u0275directiveInject"](o.FormBuilder)) }, e.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-entity-autocomplete"]], viewQuery: function (e, t) { if (1 & e && r["\u0275\u0275viewQuery"](R, 3), 2 & e) { var n; r["\u0275\u0275queryRefresh"](n = r["\u0275\u0275loadQuery"]()) && (t.entityInput = n.first) } }, inputs: { entityType: "entityType", entitySubtype: "entitySubtype", excludeEntityIds: "excludeEntityIds", labelText: "labelText", requiredText: "requiredText", required: "required", disabled: "disabled" }, outputs: { entityChanged: "entityChanged" }, features: [r["\u0275\u0275ProvidersFeature"]([{ provide: o.NG_VALUE_ACCESSOR, useExisting: Object(r.forwardRef)(function () { return e }), multi: !0 }])], decls: 12, vars: 15, consts: [[1, "mat-block", 3, "formGroup"], ["matInput", "", "type", "text", "formControlName", "entity", 3, "placeholder", "required", "matAutocomplete", "focusin"], ["entityInput", ""], ["type", "button", "matSuffix", "", "mat-button", "", "mat-icon-button", "", "aria-label", "Clear", 3, "click", 4, "ngIf"], [1, "tb-autocomplete", 3, "displayWith"], ["entityAutocomplete", "matAutocomplete"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value", 4, "ngIf"], [4, "ngIf"], ["type", "button", "matSuffix", "", "mat-button", "", "mat-icon-button", "", "aria-label", "Clear", 3, "click"], [1, "material-icons"], [3, "value"], [3, "innerHTML"]], template: function (e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "mat-form-field", 0), r["\u0275\u0275elementStart"](1, "input", 1, 2), r["\u0275\u0275listener"]("focusin", function () { return t.onFocus() }), r["\u0275\u0275pipe"](3, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275template"](4, N, 3, 0, "button", 3), r["\u0275\u0275elementStart"](5, "mat-autocomplete", 4, 5), r["\u0275\u0275template"](7, P, 3, 5, "mat-option", 6), r["\u0275\u0275pipe"](8, "async"), r["\u0275\u0275template"](9, _, 4, 6, "mat-option", 7), r["\u0275\u0275pipe"](10, "async"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275template"](11, F, 3, 3, "mat-error", 8), r["\u0275\u0275elementEnd"]()), 2 & e) { var n, i = r["\u0275\u0275reference"](6); r["\u0275\u0275property"]("formGroup", t.selectEntityFormGroup), r["\u0275\u0275advance"](1), r["\u0275\u0275propertyInterpolate"]("placeholder", r["\u0275\u0275pipeBind1"](3, 9, t.entityText)), r["\u0275\u0275property"]("required", t.required)("matAutocomplete", i), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("ngIf", t.selectEntityFormGroup.get("entity").value && !t.disabled), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("displayWith", t.displayEntityFn), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngForOf", r["\u0275\u0275pipeBind1"](8, 11, t.filteredEntities)), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngIf", !(null != (n = r["\u0275\u0275pipeBind1"](10, 13, t.filteredEntities)) && n.length)), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngIf", t.selectEntityFormGroup.get("entity").hasError("required")) } }, directives: [C.MatFormField, o.NgControlStatusGroup, o.FormGroupDirective, O.MatInput, o.DefaultValueAccessor, w.MatAutocompleteTrigger, o.NgControlStatus, o.FormControlName, o.RequiredValidator, I.NgIf, w.MatAutocomplete, I.NgForOf, x.MatButton, C.MatSuffix, M.MatIcon, j.MatOption, C.MatError], pipes: [S.TranslatePipe, I.AsyncPipe, A.a], styles: ["[_nghost-%COMP%]     .mat-form-field-infix{width:auto;min-width:100px}"] }), e }(); 0, void 0 }, "U3y+": function (e, t, n) { "use strict"; var i, r; n.d(t, "b", function () { return i }), n.d(t, "a", function () { return r }), n.d(t, "d", function () { return o }), n.d(t, "c", function () { return a }), function (e) { e.TENANT = "TENANT", e.TENANT_PROFILE = "TENANT_PROFILE", e.CUSTOMER = "CUSTOMER", e.USER = "USER", e.DASHBOARD = "DASHBOARD", e.ASSET = "ASSET", e.DEVICE = "DEVICE", e.DEVICE_PROFILE = "DEVICE_PROFILE", e.ALARM = "ALARM", e.RULE_CHAIN = "RULE_CHAIN", e.RULE_NODE = "RULE_NODE", e.EDGE = "EDGE", e.ENTITY_VIEW = "ENTITY_VIEW", e.WIDGETS_BUNDLE = "WIDGETS_BUNDLE", e.WIDGET_TYPE = "WIDGET_TYPE", e.API_USAGE_STATE = "API_USAGE_STATE", e.TB_RESOURCE = "TB_RESOURCE", e.OTA_PACKAGE = "OTA_PACKAGE", e.RPC = "RPC" }(i || (i = {})), function (e) { e.CURRENT_CUSTOMER = "CURRENT_CUSTOMER", e.CURRENT_TENANT = "CURRENT_TENANT", e.CURRENT_USER = "CURRENT_USER", e.CURRENT_USER_OWNER = "CURRENT_USER_OWNER" }(r || (r = {})); var o = new Map([[i.TENANT, { type: "entity.type-tenant", typePlural: "entity.type-tenants", list: "entity.list-of-tenants", nameStartsWith: "entity.tenant-name-starts-with", details: "tenant.tenant-details", add: "tenant.add", noEntities: "tenant.no-tenants-text", search: "tenant.search", selectedEntities: "tenant.selected-tenants" }], [i.TENANT_PROFILE, { type: "entity.type-tenant-profile", typePlural: "entity.type-tenant-profiles", list: "entity.list-of-tenant-profiles", nameStartsWith: "entity.tenant-profile-name-starts-with", details: "tenant-profile.tenant-profile-details", add: "tenant-profile.add", noEntities: "tenant-profile.no-tenant-profiles-text", search: "tenant-profile.search", selectedEntities: "tenant-profile.selected-tenant-profiles" }], [i.CUSTOMER, { type: "entity.type-customer", typePlural: "entity.type-customers", list: "entity.list-of-customers", nameStartsWith: "entity.customer-name-starts-with", details: "customer.customer-details", add: "customer.add", noEntities: "customer.no-customers-text", search: "customer.search", selectedEntities: "customer.selected-customers" }], [i.USER, { type: "entity.type-user", typePlural: "entity.type-users", list: "entity.list-of-users", nameStartsWith: "entity.user-name-starts-with", details: "user.user-details", add: "user.add", noEntities: "user.no-users-text", search: "user.search", selectedEntities: "user.selected-users" }], [i.DEVICE, { type: "entity.type-device", typePlural: "entity.type-devices", list: "entity.list-of-devices", nameStartsWith: "entity.device-name-starts-with", details: "device.device-details", add: "device.add", noEntities: "device.no-devices-text", search: "device.search", selectedEntities: "device.selected-devices" }], [i.DEVICE_PROFILE, { type: "entity.type-device-profile", typePlural: "entity.type-device-profiles", list: "entity.list-of-device-profiles", nameStartsWith: "entity.device-profile-name-starts-with", details: "device-profile.device-profile-details", add: "device-profile.add", noEntities: "device-profile.no-device-profiles-text", search: "device-profile.search", selectedEntities: "device-profile.selected-device-profiles" }], [i.ASSET, { type: "entity.type-asset", typePlural: "entity.type-assets", list: "entity.list-of-assets", nameStartsWith: "entity.asset-name-starts-with", details: "asset.asset-details", add: "asset.add", noEntities: "asset.no-assets-text", search: "asset.search", selectedEntities: "asset.selected-assets" }], [i.EDGE, { type: "entity.type-edge", typePlural: "entity.type-edges", list: "entity.list-of-edges", nameStartsWith: "entity.edge-name-starts-with", details: "edge.edge-details", add: "edge.add", noEntities: "edge.no-edges-text", search: "edge.search", selectedEntities: "edge.selected-edges" }], [i.ENTITY_VIEW, { type: "entity.type-entity-view", typePlural: "entity.type-entity-views", list: "entity.list-of-entity-views", nameStartsWith: "entity.entity-view-name-starts-with", details: "entity-view.entity-view-details", add: "entity-view.add", noEntities: "entity-view.no-entity-views-text", search: "entity-view.search", selectedEntities: "entity-view.selected-entity-views" }], [i.RULE_CHAIN, { type: "entity.type-rulechain", typePlural: "entity.type-rulechains", list: "entity.list-of-rulechains", nameStartsWith: "entity.rulechain-name-starts-with", details: "rulechain.rulechain-details", add: "rulechain.add", noEntities: "rulechain.no-rulechains-text", search: "rulechain.search", selectedEntities: "rulechain.selected-rulechains" }], [i.RULE_NODE, { type: "entity.type-rulenode", typePlural: "entity.type-rulenodes", list: "entity.list-of-rulenodes", nameStartsWith: "entity.rulenode-name-starts-with" }], [i.DASHBOARD, { type: "entity.type-dashboard", typePlural: "entity.type-dashboards", list: "entity.list-of-dashboards", nameStartsWith: "entity.dashboard-name-starts-with", details: "dashboard.dashboard-details", add: "dashboard.add", noEntities: "dashboard.no-dashboards-text", search: "dashboard.search", selectedEntities: "dashboard.selected-dashboards" }], [i.ALARM, { type: "entity.type-alarm", typePlural: "entity.type-alarms", list: "entity.list-of-alarms", nameStartsWith: "entity.alarm-name-starts-with", details: "dashboard.dashboard-details", noEntities: "alarm.no-alarms-prompt", search: "alarm.search", selectedEntities: "alarm.selected-alarms" }], [i.API_USAGE_STATE, { type: "entity.type-api-usage-state" }], [i.WIDGETS_BUNDLE, { details: "widgets-bundle.widgets-bundle-details", add: "widgets-bundle.add", noEntities: "widgets-bundle.no-widgets-bundles-text", search: "widgets-bundle.search", selectedEntities: "widgets-bundle.selected-widgets-bundles" }], [r.CURRENT_CUSTOMER, { type: "entity.type-current-customer", list: "entity.type-current-customer" }], [r.CURRENT_TENANT, { type: "entity.type-current-tenant", list: "entity.type-current-tenant" }], [r.CURRENT_USER, { type: "entity.type-current-user", list: "entity.type-current-user" }], [r.CURRENT_USER_OWNER, { type: "entity.type-current-user-owner", list: "entity.type-current-user-owner" }], [i.TB_RESOURCE, { type: "entity.type-tb-resource", details: "resource.resource-library-details", add: "resource.add", noEntities: "resource.no-resource-text", search: "resource.search", selectedEntities: "resource.selected-resources" }], [i.OTA_PACKAGE, { type: "entity.type-ota-package", details: "ota-update.ota-update-details", add: "ota-update.add", noEntities: "ota-update.no-packages-text", search: "ota-update.search", selectedEntities: "ota-update.selected-package" }]]), a = new Map([[i.TENANT, { helpLinkId: "tenants" }], [i.TENANT_PROFILE, { helpLinkId: "tenantProfiles" }], [i.CUSTOMER, { helpLinkId: "customers" }], [i.USER, { helpLinkId: "users" }], [i.DEVICE, { helpLinkId: "devices" }], [i.DEVICE_PROFILE, { helpLinkId: "deviceProfiles" }], [i.ASSET, { helpLinkId: "assets" }], [i.EDGE, { helpLinkId: "edges" }], [i.ENTITY_VIEW, { helpLinkId: "entityViews" }], [i.RULE_CHAIN, { helpLinkId: "rulechains" }], [i.DASHBOARD, { helpLinkId: "dashboards" }], [i.WIDGETS_BUNDLE, { helpLinkId: "widgetsBundles" }], [i.TB_RESOURCE, { helpLinkId: "resources" }], [i.OTA_PACKAGE, { helpLinkId: "otaUpdates" }]]) }, UZbx: function (e, t, n) { "use strict"; n.d(t, "c", function () { return i }), n.d(t, "d", function () { return r }), n.d(t, "b", function () { return o }), n.d(t, "h", function () { return d }), n.d(t, "i", function () { return p }), n.d(t, "f", function () { return m }), n.d(t, "g", function () { return f }), n.d(t, "j", function () { return h }), n.d(t, "e", function () { return g }), n.d(t, "a", function () { return y }); var i, r, o, a = n("KMMH"), s = n("WZ6u"), l = n("oKkZ"), c = n("U3y+"), u = n("8Mhd"); !function (e) { e.CRITICAL = "CRITICAL", e.MAJOR = "MAJOR", e.MINOR = "MINOR", e.WARNING = "WARNING", e.INDETERMINATE = "INDETERMINATE" }(i || (i = {})), function (e) { e.ACTIVE_UNACK = "ACTIVE_UNACK", e.ACTIVE_ACK = "ACTIVE_ACK", e.CLEARED_UNACK = "CLEARED_UNACK", e.CLEARED_ACK = "CLEARED_ACK" }(r || (r = {})), function (e) { e.ANY = "ANY", e.ACTIVE = "ACTIVE", e.CLEARED = "CLEARED", e.ACK = "ACK", e.UNACK = "UNACK" }(o || (o = {})); var d = new Map([[i.CRITICAL, "alarm.severity-critical"], [i.MAJOR, "alarm.severity-major"], [i.MINOR, "alarm.severity-minor"], [i.WARNING, "alarm.severity-warning"], [i.INDETERMINATE, "alarm.severity-indeterminate"]]), p = new Map([[r.ACTIVE_UNACK, "alarm.display-status.ACTIVE_UNACK"], [r.ACTIVE_ACK, "alarm.display-status.ACTIVE_ACK"], [r.CLEARED_UNACK, "alarm.display-status.CLEARED_UNACK"], [r.CLEARED_ACK, "alarm.display-status.CLEARED_ACK"]]), m = new Map([[o.ANY, "alarm.search-status.ANY"], [o.ACTIVE, "alarm.search-status.ACTIVE"], [o.CLEARED, "alarm.search-status.CLEARED"], [o.ACK, "alarm.search-status.ACK"], [o.UNACK, "alarm.search-status.UNACK"]]), f = new Map([[i.CRITICAL, "red"], [i.MAJOR, "orange"], [i.MINOR, "#ffca3d"], [i.WARNING, "#abab00"], [i.INDETERMINATE, "green"]]), h = { id: new s.a(l.a), tenantId: new a.a(l.a), customerId: new u.a(l.a), createdTime: (new Date).getTime(), startTs: (new Date).getTime(), endTs: 0, ackTs: 0, clearTs: 0, originatorName: "Simulated", originator: { entityType: c.b.DEVICE, id: "1" }, type: "TEMPERATURE", severity: i.MAJOR, status: r.ACTIVE_UNACK, details: { message: "Temperature is high!" }, propagate: !1 }, g = { createdTime: { keyName: "createdTime", value: "createdTime", name: "alarm.created-time", time: !0 }, startTime: { keyName: "startTime", value: "startTs", name: "alarm.start-time", time: !0 }, endTime: { keyName: "endTime", value: "endTs", name: "alarm.end-time", time: !0 }, ackTime: { keyName: "ackTime", value: "ackTs", name: "alarm.ack-time", time: !0 }, clearTime: { keyName: "clearTime", value: "clearTs", name: "alarm.clear-time", time: !0 }, originator: { keyName: "originator", value: "originatorName", name: "alarm.originator" }, originatorType: { keyName: "originatorType", value: "originator.entityType", name: "alarm.originator-type" }, type: { keyName: "type", value: "type", name: "alarm.type" }, severity: { keyName: "severity", value: "severity", name: "alarm.severity" }, status: { keyName: "status", value: "status", name: "alarm.status" } }, y = function () { function e(e, t, n, i, r) { this.affectedEntityId = e, this.pageLink = t, this.searchStatus = n, this.status = i, this.fetchOriginator = r } return e.prototype.toQuery = function () { var e = "/" + this.affectedEntityId.entityType + "/" + this.affectedEntityId.id; return e += this.pageLink.toQuery(), this.searchStatus ? e += "&searchStatus=" + this.searchStatus : this.status && (e += "&status=" + this.status), void 0 !== this.fetchOriginator && null !== this.fetchOriginator && (e += "&fetchOriginator=" + this.fetchOriginator), e }, e }() }, Uj2l: function (e, t, n) { "use strict"; n.d(t, "c", function () { return u }), n.d(t, "a", function () { return d }), n.d(t, "b", function () { return p }); var i, r, o, a = n("LRne"), s = n("Cfvw"), l = n("vkgz"), c = n("lJxs"); function u(e, t) { return (i ? Object(a.a)(i) : Object(s.a)(n.e(11).then(n.t.bind(null, "6UM0", 7))).pipe(Object(l.a)(function (e) { i = e }))).pipe(Object(c.a)(function (n) { return n.js_beautify(e, t) })) } function d(e, t) { return (o ? Object(a.a)(o) : Object(s.a)(n.e(10).then(n.t.bind(null, "TXwP", 7))).pipe(Object(l.a)(function (e) { o = e }))).pipe(Object(c.a)(function (n) { return n.css_beautify(e, t) })) } function p(e, t) { return (r ? Object(a.a)(r) : Object(s.a)(Promise.all([n.e(11), n.e(10), n.e(52)]).then(n.t.bind(null, "psGv", 7))).pipe(Object(l.a)(function (e) { r = e }))).pipe(Object(c.a)(function (n) { return n.html_beautify(e, t) })) } }, "VYz+": function (e, t, n) { "use strict"; n.d(t, "a", function () { return g }); var i = n("mrSG"), r = n("fXoL"), o = n("FKr1"), a = n("0IaG"), s = n("3Pt+"), l = n("gmuX"), c = n("l7P3"), u = n("tyNb"), d = n("XiUz"), p = n("R9Cn"), m = n("bTqV"), f = n("ofXK"), h = n("sYmb"), g = function (e) { function t(t, n, i, r, o, a) { var s = e.call(this, t, n, o) || this; return s.store = t, s.router = n, s.data = i, s.errorStateMatcher = r, s.dialogRef = o, s.fb = a, s.submitted = !1, s } return Object(i.d)(t, e), t.prototype.ngOnInit = function () { this.colorPickerFormGroup = this.fb.group({ color: [this.data.color, [s.Validators.required]] }) }, t.prototype.isErrorState = function (e, t) { var n = this.errorStateMatcher.isErrorState(e, t), i = !!(e && e.invalid && this.submitted); return n || i }, t.prototype.onColorChange = function (e) { this.colorPickerFormGroup.get("color").setValue(e), this.colorPickerFormGroup.markAsDirty() }, t.prototype.cancel = function () { this.dialogRef.close(null) }, t.prototype.select = function () { this.submitted = !0; var e = this.colorPickerFormGroup.get("color").value; this.dialogRef.close(e) }, t.\u0275fac = function (e) { return new (e || t)(r["\u0275\u0275directiveInject"](c.Store), r["\u0275\u0275directiveInject"](u.Router), r["\u0275\u0275directiveInject"](a.MAT_DIALOG_DATA), r["\u0275\u0275directiveInject"](o.ErrorStateMatcher, 4), r["\u0275\u0275directiveInject"](a.MatDialogRef), r["\u0275\u0275directiveInject"](s.FormBuilder)) }, t.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: t, selectors: [["tb-color-picker-dialog"]], features: [r["\u0275\u0275ProvidersFeature"]([{ provide: o.ErrorStateMatcher, useExisting: t }]), r["\u0275\u0275InheritDefinitionFeature"]], decls: 13, vars: 18, consts: [[3, "formGroup", "ngSubmit"], ["mat-dialog-content", "", "fxLayout", "row", "fxLayoutAlign", "center"], [3, "cpToggle", "cpDialogDisplay", "colorPicker", "colorPickerChange"], ["mat-dialog-actions", "", "fxLayout", "row"], ["fxFlex", ""], ["mat-button", "", "type", "button", 3, "disabled", "click"], ["mat-button", "", "type", "submit", 3, "disabled"]], template: function (e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "form", 0), r["\u0275\u0275listener"]("ngSubmit", function () { return t.select() }), r["\u0275\u0275elementStart"](1, "div", 1), r["\u0275\u0275elementStart"](2, "span", 2), r["\u0275\u0275listener"]("colorPickerChange", function (e) { return t.onColorChange(e) }), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](3, "div", 3), r["\u0275\u0275element"](4, "span", 4), r["\u0275\u0275elementStart"](5, "button", 5), r["\u0275\u0275listener"]("click", function () { return t.cancel() }), r["\u0275\u0275pipe"](6, "async"), r["\u0275\u0275text"](7), r["\u0275\u0275pipe"](8, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](9, "button", 6), r["\u0275\u0275pipe"](10, "async"), r["\u0275\u0275text"](11), r["\u0275\u0275pipe"](12, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]()), 2 & e && (r["\u0275\u0275property"]("formGroup", t.colorPickerFormGroup), r["\u0275\u0275advance"](2), r["\u0275\u0275styleProp"]("background", t.colorPickerFormGroup.get("color").value), r["\u0275\u0275property"]("cpToggle", !0)("cpDialogDisplay", "inline")("colorPicker", t.colorPickerFormGroup.get("color").value), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("disabled", r["\u0275\u0275pipeBind1"](6, 10, t.isLoading$)), r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](8, 12, "action.cancel"), " "), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("disabled", r["\u0275\u0275pipeBind1"](10, 14, t.isLoading$) || t.colorPickerFormGroup.invalid || !t.colorPickerFormGroup.dirty), r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](12, 16, "action.select"), " ")) }, directives: [s["\u0275angular_packages_forms_forms_ba"], s.NgControlStatusGroup, s.FormGroupDirective, a.MatDialogContent, d.f, d.e, p.a, a.MatDialogActions, d.b, m.MatButton], pipes: [f.AsyncPipe, h.TranslatePipe], encapsulation: 2 }), t }(l.a); 0, void 0 }, Vurf: function (e, t, n) { "use strict"; n.d(t, "a", function () { return _ }); var i = n("mrSG"), r = n("fXoL"), o = n("Nm8O"), a = n("LRne"), s = n("z6cu"), l = n("jtHE"), c = n("cp0P"), u = n("vkgz"), d = n("JIr8"), p = n("5+tZ"), m = n("lJxs"), f = n("Y8nr"), h = n("9D3k"), g = n("sIb/"), y = n("C/rb"), b = n("zp9Z"), v = n("BnVf"), E = n("k9IB"), T = n("OiFK"), S = n("YnEf"), C = n("mbhL"), O = n("jKtI"), w = n("xKAQ"), I = n("jXr5"), x = n("PGJw"), M = n("//Q6"), j = n("AytR"), A = n("l7P3"), R = n("tk/3"), N = n("tyNb"), P = n("sYmb"), k = n("0IaG"), _ = function () { function e(e, t, n, i, r, a, s, l, c, u, d, p) { this.store = e, this.http = t, this.userService = n, this.timeService = i, this.router = r, this.route = a, this.zone = s, this.utils = l, this.dashboardService = c, this.adminService = u, this.translate = d, this.dialog = p, this.oauth2Clients = null, this.refreshTokenSubject = null, this.jwtHelper = new o.a } return e._storeGet = function (e) { return localStorage.getItem(e) }, e.isTokenValid = function (t) { var n = e._storeGet(t + "_expiration"); return n && Number(n) > (new Date).valueOf() + 2e3 }, e.isJwtTokenValid = function () { return e.isTokenValid("jwt_token") }, e.clearTokenData = function () { localStorage.removeItem("jwt_token"), localStorage.removeItem("jwt_token_expiration"), localStorage.removeItem("refresh_token"), localStorage.removeItem("refresh_token_expiration") }, e.getJwtToken = function () { return e._storeGet("jwt_token") }, e.prototype.getAdminToken = function () { return this.http.get(j.a.integration_service + "/publicApis/token", Object(f.a)()) }, e.prototype.reloadUser = function () { var e = this; this.loadUser(!0).subscribe(function (t) { e.notifyAuthenticated(t), e.notifyUserLoaded(!0) }, function () { e.notifyUnauthenticated(), e.notifyUserLoaded(!0) }) }, e.prototype.login = function (e) { var t = this; return this.http.post("/api/auth/login", e, Object(f.a)()).pipe(Object(u.a)(function (e) { t.setUserFromJwtToken(e.token, e.refreshToken, !0) })) }, e.prototype.publicLogin = function (e) { var t = { publicId: e }; return this.http.post("/api/auth/login/public", t, Object(f.a)()) }, e.prototype.sendResetPasswordLink = function (e) { return this.http.post("/api/noauth/resetPasswordByEmail", { email: e }, Object(f.a)()) }, e.prototype.activate = function (e, t, n) { var i = this; return this.http.post("/api/noauth/activate?sendActivationMail=" + n, { activateToken: e, password: t }, Object(f.a)()).pipe(Object(u.a)(function (e) { i.setUserFromJwtToken(e.token, e.refreshToken, !0) })) }, e.prototype.resetPassword = function (e, t) { var n = this; return this.http.post("/api/noauth/resetPassword", { resetToken: e, password: t }, Object(f.a)()).pipe(Object(u.a)(function (e) { n.setUserFromJwtToken(e.token, e.refreshToken, !0) })) }, e.prototype.changePassword = function (e, t) { var n = this; return this.http.post("/api/auth/changePassword", { currentPassword: e, newPassword: t }, Object(f.a)()).pipe(Object(u.a)(function (e) { n.setUserFromJwtToken(e.token, e.refreshToken, !1) })) }, e.prototype.activateByEmailCode = function (e) { return this.http.post("/api/noauth/activateByEmailCode?emailCode=" + e, null, Object(f.a)()) }, e.prototype.resendEmailActivation = function (e) { var t = encodeURIComponent(e); return this.http.post("/api/noauth/resendEmailActivation?email=" + t, null, Object(f.a)()) }, e.prototype.loginAsUser = function (e) { var t = this; return this.http.get("/api/user/" + e + "/token", Object(f.a)()).pipe(Object(u.a)(function (e) { t.setUserFromJwtToken(e.token, e.refreshToken, !0) })) }, e.prototype.logout = function (e) { var t = this; void 0 === e && (e = !1), e && (this.redirectUrl = this.router.url), this.http.post("/api/auth/logout", null, Object(f.a)(!0, !0)).subscribe(function () { t.clearJwtToken() }, function () { t.clearJwtToken() }) }, e.prototype.notifyUserLoaded = function (e) { this.store.dispatch(new g.b({ isUserLoaded: e })) }, e.prototype.gotoDefaultPlace = function (e) { var t = this; if (!Object(M.v)()) { var n = Object(y.a)(this.store), i = this.defaultUrl(e, n); this.zone.run(function () { t.router.navigateByUrl(i) }) } }, e.prototype.loadOAuth2Clients = function () { var e = this, t = "/api/noauth/oauth2Clients?platform=" + x.d.WEB; return this.http.post(t, null, Object(f.a)()).pipe(Object(d.a)(function (e) { return Object(a.a)([]) }), Object(u.a)(function (t) { e.oauth2Clients = t })) }, e.prototype.forceDefaultPlace = function (e, t, n) { return !(!e || !e.authUser || e.authUser.authority !== b.a.TENANT_ADMIN && e.authUser.authority !== b.a.CUSTOMER_USER || !(this.userHasDefaultDashboard(e) && e.forceFullscreen || e.authUser.isPublic)) && ("profile" === t ? !this.userHasProfile(e.authUser) : !(t.startsWith("dashboard.") || t.startsWith("dashboards.") && e.allowedDashboardIds.indexOf(n.dashboardId) > -1)) }, e.prototype.defaultUrl = function (e, t, n, i) { var r = this, o = null; if (e) { if (!n || "login" === n || this.forceDefaultPlace(t, n, i)) { if (this.redirectUrl) { var a = this.redirectUrl; this.redirectUrl = null, o = this.router.parseUrl(a) } else o = this.router.parseUrl("home"); if (t.authUser.authority === b.a.TENANT_ADMIN || t.authUser.authority === b.a.CUSTOMER_USER) if (this.userHasDefaultDashboard(t)) { var s = t.userDetails.additionalInfo.defaultDashboardId; o = t.forceFullscreen ? this.router.parseUrl("dashboard/" + s) : this.router.parseUrl("dashboards/" + s) } else t.authUser.isPublic && (o = this.router.parseUrl("dashboard/" + t.lastPublicDashboardId)); else t.authUser.authority === b.a.SYS_ADMIN && this.adminService.checkUpdates().subscribe(function (e) { e && e.updateAvailable && r.store.dispatch(new w.b({ message: e.message, type: "info", verticalPosition: "bottom", horizontalPosition: "right" })) }) } } else o = this.router.parseUrl("login"); return o }, e.prototype.loadUser = function (e) { var t = this; if (Object(y.b)(this.store)) return Object(a.a)({}); var n = this.utils.getQueryParam("publicId"), i = this.utils.getQueryParam("accessToken"), r = this.utils.getQueryParam("refreshToken"), o = this.utils.getQueryParam("username"), l = this.utils.getQueryParam("password"), c = this.utils.getQueryParam("loginError"); if (n) return this.publicLogin(n).pipe(Object(p.b)(function (e) { return t.updateAndValidateTokens(e.token, e.refreshToken, !1), t.procceedJwtTokenValidate() }), Object(d.a)(function (e) { throw t.utils.updateQueryParam("publicId", null), Error() })); if (i) { var u = ["accessToken"]; r && u.push("refreshToken"), this.utils.removeQueryParams(u); try { this.updateAndValidateToken(i, "jwt_token", !1), r ? this.updateAndValidateToken(r, "refresh_token", !1) : (localStorage.removeItem("refresh_token"), localStorage.removeItem("refresh_token_expiration")) } catch (h) { return Object(s.a)(h) } return this.procceedJwtTokenValidate() } if (o && l) { this.utils.updateQueryParam("username", null), this.utils.updateQueryParam("password", null); var m = { username: o, password: l }; return this.http.post("/api/auth/login", m, Object(f.a)()).pipe(Object(p.b)(function (e) { return t.updateAndValidateTokens(e.token, e.refreshToken, !1), t.procceedJwtTokenValidate() })) } return c ? (this.showLoginErrorDialog(c), this.utils.updateQueryParam("loginError", null), Object(s.a)(Error())) : this.procceedJwtTokenValidate(e) }, e.prototype.showLoginErrorDialog = function (e) { var t = this; this.translate.get(["login.error", "action.close"]).subscribe(function (n) { var i = { disableClose: !0, data: { title: n["login.error"], message: e, ok: n["action.close"] } }; t.dialog.open(I.a, i) }) }, e.prototype.procceedJwtTokenValidate = function (t) { var n = this, r = new l.a; return this.validateJwtToken(t).subscribe(function () { var t = {}, o = e._storeGet("jwt_token"); t.authUser = n.jwtHelper.decodeToken(o), t.authUser && t.authUser.scopes && t.authUser.scopes.length ? t.authUser.authority = b.a[t.authUser.scopes[0]] : t.authUser && (t.authUser.authority = b.a.ANONYMOUS), t.authUser.isPublic && (t.forceFullscreen = !0), t.authUser.isPublic ? n.loadSystemParams(t).subscribe(function (e) { t = Object(i.a)(Object(i.a)({}, t), e), r.next(t), r.complete() }, function (e) { r.error(e) }) : t.authUser.userId ? n.userService.getUser(t.authUser.userId).subscribe(function (e) { t.userDetails = e, t.forceFullscreen = !1, n.userForceFullscreen(t) && (t.forceFullscreen = !0), n.loadSystemParams(t).subscribe(function (e) { var o; o = (t = Object(i.a)(Object(i.a)({}, t), e)).userDetails.additionalInfo && t.userDetails.additionalInfo.lang ? t.userDetails.additionalInfo.lang : null, n.notifyUserLang(o), r.next(t), r.complete() }, function (e) { r.error(e), n.logout() }) }, function (e) { r.error(e), n.logout() }) : r.error(null) }, function (e) { r.error(e) }), r }, e.prototype.loadIsUserTokenAccessEnabled = function (e) { return e.authority === b.a.SYS_ADMIN || e.authority === b.a.TENANT_ADMIN ? this.http.get("/api/user/tokenAccessEnabled", Object(f.a)()) : Object(a.a)(!1) }, e.prototype.loadIsEdgesSupportEnabled = function () { return this.http.get("/api/edges/enabled", Object(f.a)()) }, e.prototype.loadSystemParams = function (e) { var t = [this.loadIsUserTokenAccessEnabled(e.authUser), this.fetchAllowedDashboardIds(e), this.loadIsEdgesSupportEnabled(), this.timeService.loadMaxDatapointsLimit()]; return Object(c.a)(t).pipe(Object(m.a)(function (e) { return { userTokenAccessEnabled: e[0], allowedDashboardIds: e[1], edgesSupportEnabled: e[2] } }, Object(d.a)(function (e) { return Object(a.a)({}) }))) }, e.prototype.refreshJwtToken = function (t) { var n = this; void 0 === t && (t = !0); var i = this.refreshTokenSubject; if (null === this.refreshTokenSubject) { this.refreshTokenSubject = new l.a(1), i = this.refreshTokenSubject; var r = e._storeGet("refresh_token"), o = e.isTokenValid("refresh_token"); if (this.setUserFromJwtToken(null, null, !1), o) { var a = { refreshToken: r }; this.http.post("/api/auth/token", a, Object(f.a)()).subscribe(function (e) { t ? n.setUserFromJwtToken(e.token, e.refreshToken, !1) : n.updateAndValidateTokens(e.token, e.refreshToken, !0), n.refreshTokenSubject.next(e), n.refreshTokenSubject.complete(), n.refreshTokenSubject = null }, function () { n.clearJwtToken(), n.refreshTokenSubject.error(new Error(n.translate.instant("access.refresh-token-failed"))), n.refreshTokenSubject = null }) } else this.translate.get("access.refresh-token-expired").subscribe(function (e) { n.refreshTokenSubject.error(new Error(e)), n.refreshTokenSubject = null }) } return i }, e.prototype.validateJwtToken = function (t) { var n = new l.a; return e.isTokenValid("jwt_token") ? (n.next(), n.complete()) : t ? this.refreshJwtToken(!t).subscribe(function () { n.next(), n.complete() }, function (e) { n.error(e) }) : (this.clearJwtToken(), n.error(null)), n }, e.prototype.refreshTokenPending = function () { return null !== this.refreshTokenSubject }, e.prototype.setUserFromJwtToken = function (t, n, i) { var r = this, o = new l.a; return t ? (this.updateAndValidateTokens(t, n, !0), i ? (this.notifyUserLoaded(!1), this.loadUser(!1).subscribe(function (e) { r.notifyUserLoaded(!0), r.notifyAuthenticated(e), o.next(!0), o.complete() }, function () { r.notifyUserLoaded(!0), r.notifyUnauthenticated(), o.next(!1), o.complete() })) : this.loadUser(!1).subscribe(function () { o.next(!0), o.complete() }, function () { o.next(!1), o.complete() })) : (e.clearTokenData(), i && this.notifyUnauthenticated(), o.next(!1), o.complete()), o }, e.prototype.updateAndValidateTokens = function (e, t, n) { this.updateAndValidateToken(e, "jwt_token", n), this.updateAndValidateToken(t, "refresh_token", n) }, e.prototype.parsePublicId = function () { var t = e.getJwtToken(); if (t) { var n = this.jwtHelper.decodeToken(t); if (n && n.isPublic) return n.sub } return null }, e.prototype.notifyUnauthenticated = function () { this.store.dispatch(new g.c) }, e.prototype.notifyAuthenticated = function (e) { this.store.dispatch(new g.a(e)) }, e.prototype.notifyUserLang = function (e) { this.store.dispatch(new v.a({ userLang: e })) }, e.prototype.updateAndValidateToken = function (e, t, n) { var i = !1, r = this.jwtHelper.decodeToken(e), o = r.iat, a = r.exp; if (o && a) { var s = a - o; if (s > 0) { var l = (new Date).valueOf() + 1e3 * s; localStorage.setItem(t, e), localStorage.setItem(t + "_expiration", "" + l), i = !0 } } !i && n && this.notifyUnauthenticated() }, e.prototype.clearJwtToken = function () { this.setUserFromJwtToken(null, null, !0) }, e.prototype.userForceFullscreen = function (e) { return e.authUser && e.authUser.isPublic || e.userDetails && e.userDetails.additionalInfo && e.userDetails.additionalInfo.defaultDashboardFullscreen && !0 === e.userDetails.additionalInfo.defaultDashboardFullscreen }, e.prototype.userHasProfile = function (e) { return e && !e.isPublic }, e.prototype.userHasDefaultDashboard = function (e) { return !!(e && e.userDetails && e.userDetails.additionalInfo && e.userDetails.additionalInfo.defaultDashboardId) }, e.prototype.fetchAllowedDashboardIds = function (e) { if (!e.forceFullscreen || e.authUser.authority !== b.a.TENANT_ADMIN && e.authUser.authority !== b.a.CUSTOMER_USER) return Object(a.a)([]); var t = new C.b(100); return (e.authUser.authority === b.a.TENANT_ADMIN ? this.dashboardService.getTenantDashboards(t) : this.dashboardService.getCustomerDashboards(e.authUser.customerId, t)).pipe(Object(m.a)(function (e) { return e.data.map(function (e) { return e.id.id }) })) }, e.\u0275fac = function (t) { return new (t || e)(r["\u0275\u0275inject"](A.Store), r["\u0275\u0275inject"](R.HttpClient), r["\u0275\u0275inject"](h.a), r["\u0275\u0275inject"](E.a), r["\u0275\u0275inject"](N.Router), r["\u0275\u0275inject"](N.ActivatedRoute), r["\u0275\u0275inject"](r.NgZone), r["\u0275\u0275inject"](T.a), r["\u0275\u0275inject"](S.a), r["\u0275\u0275inject"](O.a), r["\u0275\u0275inject"](P.TranslateService), r["\u0275\u0275inject"](k.MatDialog)) }, e.\u0275prov = r["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, Vz2p: function (e, t, n) { "use strict"; n.d(t, "c", function () { return D }), n.d(t, "b", function () { return V }), n.d(t, "a", function () { return U }); var i = n("PXG5"), r = n("AytR"), o = n("mrSG"), a = n("l7P3"), s = n("EP1h"); var l = n("m8m0"), c = { isLoading: !1 }; var u = n("sIb/"), d = { authUser: null, userDetails: null, userTokenAccessEnabled: !1, forceFullscreen: !1, allowedDashboardIds: [], edgesSupportEnabled: !1 }, p = Object(o.a)({ isAuthenticated: !1, isUserLoaded: !1, lastPublicDashboardId: null }, d); var m = n("BnVf"), f = { userLang: null }; var h = n("tyNb"), g = n("fXoL"), y = n("9jGm"), b = n("VRyK"), v = n("zp1y"), E = n("vkgz"), T = n("lJxs"), S = n("/uUt"), C = n("pLZG"), O = Object(a.createFeatureSelector)("settings"), w = Object(a.createSelector)(O, function (e) { return e }), I = (Object(a.createSelector)(w, function (e) { return e.userLang }), n("NXKV")), x = n("wd/R"); function M(e, t) { var n = t; r.a.production || console.log("User lang: " + n), n || (n = e.getBrowserCultureLang(), r.a.production || console.log("Fallback to browser lang: " + n)); var i = function (e) { var t = (e || "").split("-").join("_"); if (t.length) { if (r.a.supportedLangs.indexOf(t) > -1) return t; var n, i = t.split("_"); n = 2 === i.length ? i[0] : t; var o = r.a.supportedLangs.filter(function (e) { return e.split("_")[0] === n }); if (o.length) return o[0] } return r.a.defaultLang }(n); r.a.production || console.log("Detected supported lang: " + i), e.use(i), x.locale([i]) } var j = n("Vurf"), A = n("OiFK"), R = n("C/rb"), N = n("sYmb"), P = function () { function e(e, t, n, i, r, o, s, l) { var c = this; this.actions$ = e, this.store = t, this.authService = n, this.utils = i, this.router = r, this.localStorageService = o, this.titleService = s, this.translate = l, this.persistSettings = this.actions$.pipe(Object(y.e)(m.b.CHANGE_LANGUAGE), Object(v.a)(this.store.pipe(Object(a.select)(O))), Object(E.a)(function (e) { e[0]; var t = e[1]; return c.localStorageService.setItem("SETTINGS", t) })), this.setTranslateServiceLanguage = this.store.pipe(Object(a.select)(O), Object(T.a)(function (e) { return e.userLang }), Object(S.a)(), Object(E.a)(function (e) { return M(c.translate, e) })), this.setTitle = Object(b.a)(this.actions$.pipe(Object(y.e)(m.b.CHANGE_LANGUAGE)), this.router.events.pipe(Object(C.a)(function (e) { return e instanceof h.ActivationEnd }))).pipe(Object(E.a)(function () { c.titleService.setTitle(c.router.routerState.snapshot.root, c.translate) })), this.setPublicId = Object(b.a)(this.router.events.pipe(Object(C.a)(function (e) { return e instanceof h.ActivationEnd }))).pipe(Object(E.a)(function (e) { var t = Object(R.b)(c.store), n = e.snapshot; t && t.isPublic && n.url && n.url.length && "dashboard" === n.url[0].path && (c.utils.updateQueryParam("publicId", t.sub), c.store.dispatch(new u.d({ lastPublicDashboardId: n.params.dashboardId }))) })) } return e.\u0275fac = function (t) { return new (t || e)(g["\u0275\u0275inject"](y.a), g["\u0275\u0275inject"](a.Store), g["\u0275\u0275inject"](j.a), g["\u0275\u0275inject"](A.a), g["\u0275\u0275inject"](h.Router), g["\u0275\u0275inject"](s.a), g["\u0275\u0275inject"](I.a), g["\u0275\u0275inject"](N.TranslateService)) }, e.\u0275prov = g["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac }), Object(o.c)([Object(y.b)({ dispatch: !1 }), Object(o.f)("design:type", Object)], e.prototype, "persistSettings", void 0), Object(o.c)([Object(y.b)({ dispatch: !1 }), Object(o.f)("design:type", Object)], e.prototype, "setTranslateServiceLanguage", void 0), Object(o.c)([Object(y.b)({ dispatch: !1 }), Object(o.f)("design:type", Object)], e.prototype, "setTitle", void 0), Object(o.c)([Object(y.b)({ dispatch: !1 }), Object(o.f)("design:type", Object)], e.prototype, "setPublicId", void 0), e }(); 0, void 0; var k = n("xKAQ"), _ = { notification: null, hideNotification: null }; var F = n("Y4+Y"), L = function () { function e(e, t) { var n = this; this.actions$ = e, this.notificationService = t, this.dispatchNotification = this.actions$.pipe(Object(y.e)(k.c.SHOW_NOTIFICATION), Object(T.a)(function (e) { var t = e.notification; n.notificationService.dispatchNotification(t) })), this.hideNotification = this.actions$.pipe(Object(y.e)(k.c.HIDE_NOTIFICATION), Object(T.a)(function (e) { var t = e.hideNotification; n.notificationService.hideNotification(t) })) } return e.\u0275fac = function (t) { return new (t || e)(g["\u0275\u0275inject"](y.a), g["\u0275\u0275inject"](F.a)) }, e.\u0275prov = g["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac }), Object(o.c)([Object(y.b)({ dispatch: !1 }), Object(o.f)("design:type", Object)], e.prototype, "dispatchNotification", void 0), Object(o.c)([Object(y.b)({ dispatch: !1 }), Object(o.f)("design:type", Object)], e.prototype, "hideNotification", void 0), e }(); 0, void 0; var D = { load: function (e, t) { switch (void 0 === e && (e = c), t.type) { case l.c.START_LOAD: return Object(o.a)(Object(o.a)({}, e), { isLoading: !0 }); case l.c.FINISH_LOAD: return Object(o.a)(Object(o.a)({}, e), { isLoading: !1 }); default: return e } }, auth: function (e, t) { switch (void 0 === e && (e = p), t.type) { case u.f.AUTHENTICATED: return Object(o.a)(Object(o.a)(Object(o.a)({}, e), { isAuthenticated: !0 }), t.payload); case u.f.UNAUTHENTICATED: return Object(o.a)(Object(o.a)(Object(o.a)({}, e), { isAuthenticated: !1 }), d); case u.f.LOAD_USER: return Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)({}, e), t.payload), { isAuthenticated: !!t.payload.isUserLoaded && e.isAuthenticated }), t.payload.isUserLoaded ? {} : d); case u.f.UPDATE_USER_DETAILS: case u.f.UPDATE_LAST_PUBLIC_DASHBOARD_ID: return Object(o.a)(Object(o.a)({}, e), t.payload); default: return e } }, settings: function (e, t) { switch (void 0 === e && (e = f), t.type) { case m.b.CHANGE_LANGUAGE: return Object(o.a)(Object(o.a)({}, e), t.payload); default: return e } }, notification: function (e, t) { switch (void 0 === e && (e = _), t.type) { case k.c.SHOW_NOTIFICATION: return Object(o.a)(Object(o.a)({}, e), { notification: t.notification }); case k.c.HIDE_NOTIFICATION: return Object(o.a)(Object(o.a)({}, e), { hideNotification: t.hideNotification }); default: return e } } }, V = [function (e) { return function (t, n) { var i = e(t, n); return [a.INIT.toString(), a.UPDATE.toString()].includes(n.type) ? Object(o.a)(Object(o.a)({}, i), s.a.loadInitialState()) : i } }]; r.a.production || (V.unshift(i.a), V.unshift(function (e) { return function (t, n) { var i = e(t, n); return console.log("[DEBUG] action: " + n.type, { payload: n.payload, oldState: t, newState: i }), i } })); var U = [P, L] }, WEPN: function (e, t, n) { "use strict"; n.d(t, "a", function () { return d }); var i = n("fXoL"), r = n("yl57"), o = n("ofXK"), a = n("znSr"); function s(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "span", 9), i["\u0275\u0275text"](1), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit; i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate"](n) } } function l(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "tr"), i["\u0275\u0275elementStart"](1, "td", 6), i["\u0275\u0275template"](2, s, 2, 1, "span", 7), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](3, "td", 8), i["\u0275\u0275text"](4), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit; i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngForOf", n.formatted), i["\u0275\u0275advance"](2), i["\u0275\u0275textInterpolate"](n.description) } } function c(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "table"), i["\u0275\u0275elementStart"](1, "tbody"), i["\u0275\u0275template"](2, l, 5, 2, "tr", 5), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275nextContext"](); i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngForOf", n.hotkeysList) } } var u = function (e) { return { in: e } }, d = function () { function e(e, t) { var n = this; this.elementRef = e, this.hotkeysService = t, this.helpVisible = !1, this.title = "Keyboard Shortcuts:", this.mousetrap = new Mousetrap(this.elementRef.nativeElement), this.mousetrap.bind("?", function (e, t) { n.toggleCheatSheet() }) } return e.prototype.ngOnInit = function () { this.hotkeys && (this.hotkeysList = this.hotkeys.filter(function (e) { return e.description })) }, e.prototype.setHotKeys = function (e) { this.hotkeysList = e.filter(function (e) { return e.description }) }, e.prototype.toggleCheatSheet = function () { this.helpVisible = !this.helpVisible }, e.prototype.ngOnDestroy = function () { this.mousetrap.unbind("?") }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](i.ElementRef), i["\u0275\u0275directiveInject"](r.d)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-hotkeys-cheatsheet"]], inputs: { title: "title", hotkeys: "hotkeys" }, decls: 7, vars: 5, consts: [["tabindex", "-1", 1, "tb-hotkeys-container", "fade", 2, "display", "none", 3, "ngClass"], [1, "tb-hotkeys"], [1, "tb-hotkeys-title"], [4, "ngIf"], [1, "tb-hotkeys-close", 3, "click"], [4, "ngFor", "ngForOf"], [1, "tb-hotkeys-keys"], ["class", "tb-hotkeys-key", 4, "ngFor", "ngForOf"], [1, "tb-hotkeys-text"], [1, "tb-hotkeys-key"]], template: function (e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "div", 0), i["\u0275\u0275elementStart"](1, "div", 1), i["\u0275\u0275elementStart"](2, "h4", 2), i["\u0275\u0275text"](3), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](4, c, 3, 1, "table", 3), i["\u0275\u0275elementStart"](5, "div", 4), i["\u0275\u0275listener"]("click", function () { return t.toggleCheatSheet() }), i["\u0275\u0275text"](6, "\xd7"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275property"]("ngClass", i["\u0275\u0275pureFunction1"](3, u, t.helpVisible)), i["\u0275\u0275advance"](3), i["\u0275\u0275textInterpolate"](t.title), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngIf", t.helpVisible)) }, directives: [o.NgClass, a.b, o.NgIf, o.NgForOf], styles: [".tb-hotkeys-container[_ngcontent-%COMP%] {\n  display: table !important;\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  color: #333;\n  font-size: 1em;\n  background-color: rgba(255,255,255,0.9);\n  outline: 0;\n}\n.tb-hotkeys-container.fade[_ngcontent-%COMP%] {\n  z-index: -1024;\n  visibility: hidden;\n  opacity: 0;\n  -webkit-transition: opacity 0.15s linear;\n  -moz-transition: opacity 0.15s linear;\n  -o-transition: opacity 0.15s linear;\n  transition: opacity 0.15s linear;\n}\n.tb-hotkeys-container.fade.in[_ngcontent-%COMP%] {\n  z-index: 10002;\n  visibility: visible;\n  opacity: 1;\n}\n.tb-hotkeys-title[_ngcontent-%COMP%] {\n  font-weight: bold;\n  text-align: center;\n  font-size: 1.2em;\n}\n.tb-hotkeys[_ngcontent-%COMP%] {\n  width: 100%;\n  height: 100%;\n  display: table-cell;\n  vertical-align: middle;\n}\n.tb-hotkeys[_ngcontent-%COMP%]   table[_ngcontent-%COMP%] {\n  margin: auto;\n  color: #333;\n}\n.tb-content[_ngcontent-%COMP%] {\n  display: table-cell;\n  vertical-align: middle;\n}\n.tb-hotkeys-keys[_ngcontent-%COMP%] {\n  padding: 5px;\n  text-align: right;\n}\n.tb-hotkeys-key[_ngcontent-%COMP%] {\n  display: inline-block;\n  color: #fff;\n  background-color: #333;\n  border: 1px solid #333;\n  border-radius: 5px;\n  text-align: center;\n  margin-right: 5px;\n  box-shadow: inset 0 1px 0 #666, 0 1px 0 #bbb;\n  padding: 5px 9px;\n  font-size: 1em;\n}\n.tb-hotkeys-text[_ngcontent-%COMP%] {\n  padding-left: 10px;\n  font-size: 1em;\n}\n.tb-hotkeys-close[_ngcontent-%COMP%] {\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  font-size: 2em;\n  font-weight: bold;\n  padding: 5px 10px;\n  border: 1px solid #ddd;\n  border-radius: 5px;\n  min-height: 45px;\n  min-width: 45px;\n  text-align: center;\n}\n.tb-hotkeys-close[_ngcontent-%COMP%]:hover {\n  background-color: #fff;\n  cursor: pointer;\n}\n@media all and (max-width: 500px) {\n  .tb-hotkeys[_ngcontent-%COMP%] {\n    font-size: 0.8em;\n  }\n}\n@media all and (min-width: 750px) {\n  .tb-hotkeys[_ngcontent-%COMP%] {\n    font-size: 1.2em;\n  }\n}"] }), e }(); 0, void 0 }, WKhm: function (e, t, n) { "use strict"; n.d(t, "a", function () { return o }); var i = n("fXoL"), r = n("//Q6"), o = function () { function e() { } return e.prototype.transform = function (e) { return Object(r.z)(e) ? JSON.stringify(e) : Object(r.x)(e) ? e.toString() : e }, e.\u0275fac = function (t) { return new (t || e) }, e.\u0275pipe = i["\u0275\u0275definePipe"]({ name: "tbJson", type: e, pure: !0 }), e }(); 0, void 0 }, WNjs: function (e, t, n) { "use strict"; n.d(t, "a", function () { return a }); var i = n("fXoL"), r = n("Y8nr"), o = n("tk/3"), a = function () { function e(e) { this.http = e } return e.prototype.getTenants = function (e, t) { return this.http.get("/api/tenants" + e.toQuery(), Object(r.b)(t)) }, e.prototype.getTenantInfos = function (e, t) { return this.http.get("/api/tenantInfos" + e.toQuery(), Object(r.b)(t)) }, e.prototype.getTenant = function (e, t) { return this.http.get("/api/tenant/" + e, Object(r.b)(t)) }, e.prototype.getTenantInfo = function (e, t) { return this.http.get("/api/tenant/info/" + e, Object(r.b)(t)) }, e.prototype.saveTenant = function (e, t) { return this.http.post("/api/tenant", e, Object(r.b)(t)) }, e.prototype.deleteTenant = function (e, t) { return this.http.delete("/api/tenant/" + e, Object(r.b)(t)) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275inject"](o.HttpClient)) }, e.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, WZ6u: function (e, t, n) { "use strict"; n.d(t, "a", function () { return r }); var i = n("U3y+"), r = function (e) { this.entityType = i.b.ALARM, this.id = e } }, Wa9K: function (e, t, n) { "use strict"; var i = n("jlK2"), r = n("mhvu"), o = n.n(r), a = n("LvDl"), s = n.n(a), l = n("//Q6"); function c(e) { if (Array.isArray(e) && 2 === e.length) { if ("null" === e[0]) return e[1]; if ("null" === e[1]) return e[0] } return e } var u = function (e) { var t = []; return e.forEach(function (e) { t.push({ name: e, value: e }) }), t }, d = function (e, t) { if (!s.a.isArray(e)) { var n = []; if (t) t.forEach(function (t) { n.push({ name: e[t], value: t }) }); else for (var i = 0, r = Object.keys(e); i < r.length; i++) { var o = r[i]; e.hasOwnProperty(o) && n.push({ name: o, value: e[o] }) } return n } return e }, p = function (e, t, n) { var i = (n = n || {}).global && n.global.formDefaults ? s.a.cloneDeep(n.global.formDefaults) : {}; return n.global && !0 === n.global.supressPropertyTitles ? i.title = t.title : i.title = t.title || e, t.description && (i.description = t.description), !0 !== n.required && !0 !== t.required || (i.required = !0), t.maxLength && (i.maxlength = t.maxLength), t.minLength && (i.minlength = t.minLength), (t.readOnly || t.readonly) && (i.readonly = !0), t.minimum && (i.minimum = t.minimum + (t.exclusiveMinimum ? 1 : 0)), t.maximum && (i.maximum = t.maximum - (t.exclusiveMaximum ? 1 : 0)), t.validationMessage && (i.validationMessage = t.validationMessage), t.enumNames && (i.titleMap = d(t.enumNames, t.enum)), i.schema = t, i.ngModelOptions = i.ngModelOptions || {}, i }, m = { string: [function (e, t, n) { if ("string" === c(t.type) && t.enum) { var i = p(e, t, n); return i.key = n.path, i.type = "select", i.titleMap || (i.titleMap = u(t.enum)), n.lookup[o.a.stringify(n.path)] = i, i } }, function (e, t, n) { if ("string" === c(t.type) && !t.enum) { var i = p(e, t, n); return i.key = n.path, i.type = "text", n.lookup[o.a.stringify(n.path)] = i, i } }], object: [function (e, t, n) { if ("object" === c(t.type)) { var i = p(e, t, n); i.type = "fieldset", i.items = [], n.lookup[o.a.stringify(n.path)] = i; for (var r = 0, a = Object.keys(t.properties); r < a.length; r++) { var s = a[r]; if (t.properties.hasOwnProperty(s)) { var l = n.path.slice(); if (l.push(s), !0 !== n.ignore[o.a.stringify(l)]) { var u = t.required && -1 !== t.required.indexOf(s), d = f(s, t.properties[s], { path: l, required: u || !1, lookup: n.lookup, ignore: n.ignore, global: n.global }); d && i.items.push(d) } } } return i } }], number: [function (e, t, n) { if ("number" === c(t.type)) { var i = p(e, t, n); return i.key = n.path, i.type = "number", n.lookup[o.a.stringify(n.path)] = i, i } }], integer: [function (e, t, n) { if ("integer" === c(t.type)) { var i = p(e, t, n); return i.key = n.path, i.type = "number", n.lookup[o.a.stringify(n.path)] = i, i } }], boolean: [function (e, t, n) { if ("boolean" === c(t.type)) { var i = p(e, t, n); return i.key = n.path, i.type = "checkbox", n.lookup[o.a.stringify(n.path)] = i, i } }], array: [function (e, t, n) { if ("array" === c(t.type) && t.items && t.items.enum) { var i = p(e, t, n); return i.key = n.path, i.type = "checkboxes", i.titleMap || (i.titleMap = u(t.items.enum)), n.lookup[o.a.stringify(n.path)] = i, i } }, function (e, t, n) { if ("array" === c(t.type)) { var i = p(e, t, n); if (i.type = "array", i.key = n.path, n.lookup[o.a.stringify(n.path)] = i, void 0 !== t.items) { var r = t.required && -1 !== t.required.indexOf(n.path[n.path.length - 1]), a = n.path.slice(); a.push(""); var s = f(e, t.items, { path: a, required: r || !1, lookup: n.lookup, ignore: n.ignore, global: n.global }); i.items = s ? [s] : t.items } return i } }], date: [function (e, t, n) { if ("date" === c(t.type)) { var i = p(e, t, n); return i.key = n.path, i.type = "date", n.lookup[o.a.stringify(n.path)] = i, i } }] }; function f(e, t, n) { var i = m[c(t.type)]; if (i) for (var r = void 0, o = 0, a = i; o < a.length; o++) { if (r = (0, a[o])(e, t, n)) return r.schema["x-schema-form"] && s.a.isObject(r.schema["x-schema-form"]) && (r = s.a.extend(r, r.schema["x-schema-form"])), r } } function h(e, t, n) { var i = !1; return e && (Object(l.B)(n) ? Object(l.n)(e[t]) && (delete e[t], i = !0) : (i = !Object(l.r)(e[t], n), e[t] = n)), i } var g = { validateBySchema: function (e, t) { return i.validateResult(t, e) }, validate: function (e, t) { if (!e) return { valid: !0 }; var n = e.schema; if (!n) return { valid: !0 }; "" === t && (t = void 0), "number" === e.type && null === t && (t = void 0), "number" === e.type && isNaN(parseFloat(t)) && (t = void 0); var r = { type: "object", properties: {} }, o = e.key[e.key.length - 1]; r.properties[o] = n, e.required && (r.required = [o]); var a = {}; void 0 !== t && (a[o] = t); var s = i.validateResult(a, r); return null == s || s.valid || null == e.validationMessage || void 0 === t || (s.error.message = e.validationMessage), s }, merge: function e(t, n, i, r, a) { n = n || ["*"], r = r || {}, a = a || t.readonly || t.readOnly; var l = function (e, t, n) { var i = [], r = {}; if (t = t || {}, n = n || {}, "object" !== c(e.type)) throw new Error('Not implemented. Only type "object" allowed at root level of schema.'); for (var o = 0, a = Object.keys(e.properties); o < a.length; o++) { var s = a[o]; if (e.properties.hasOwnProperty(s) && !0 !== t[s]) { var l = e.required && -1 !== e.required.indexOf(s), u = f(s, e.properties[s], { path: [s], lookup: r, ignore: t, required: l, global: n }); u && i.push(u) } } return { form: i, lookup: r } }(t, i, r), u = n.indexOf("*"); -1 !== u && (n = n.slice(0, u).concat(l.form).concat(n.slice(u + 1))); var p = l.lookup; return n.map(function (n) { if ("string" == typeof n && (n = { key: n }), n.key && "string" == typeof n.key && (n.key = o.a.parse(n.key)), n.titleMap && (n.titleMap = d(n.titleMap)), n.itemForm) { n.items = []; var l = o.a.stringify(n.key); p[l].items.forEach(function (e) { var t = s.a.cloneDeep(n.itemForm); t.key = e.key, n.items.push(t) }) } if (n.key) { var c = o.a.stringify(n.key); if (p[c]) for (var u = p[c], m = 0, f = Object.keys(u); m < f.length; m++) { var h = f[m]; u.hasOwnProperty(h) && void 0 === n[h] && (n[h] = u[h]) } } return !0 === a && (n.readonly = !0), n.items && n.items.length > 0 && (n.items = e(t, n.items, i, r, n.readonly)), n.tabs && n.tabs.forEach(function (o) { o.items = e(t, o.items, i, r, n.readonly) }), "checkbox" === n.type && s.a.isUndefined(n.schema.default) && (n.schema.default = !1), n }) }, updateValue: function (e, t, n) { var i = /^\d+$/; if (t || (t = this), !t) return !1; var r = Object(l.A)(e) ? o.a.parse(e) : e; if (1 === r.length) return h(t, r[0], n); Object(l.B)(t[r[0]]) && (t[r[0]] = r.length > 2 && i.test(r[1]) ? [] : {}); for (var a = t[r[0]], s = 1; s < r.length; s++) { if ("" === r[s]) return !1; if (s === r.length - 1) return h(a, r[s], n); var c = a[r[s]]; (Object(l.B)(c) || null === c) && (c = i.test(r[s + 1]) ? [] : {}, a[r[s]] = c), a = c } return a }, selectOrSet: function (e, t, n) { var i = /^\d+$/; t || (t = this); var r = "string" == typeof e ? o.a.parse(e) : e; if (void 0 !== n && 1 === r.length) return t[r[0]] = n, t; void 0 !== n && void 0 === t[r[0]] && (t[r[0]] = r.length > 2 && i.test(r[1]) ? [] : {}); for (var a = t[r[0]], s = 1; s < r.length; s++) { if ("" === r[s]) return; if (void 0 !== n) { if (s === r.length - 1) return a[r[s]] = n, n; var l = a[r[s]]; null == l && (l = i.test(r[s + 1]) ? [] : {}, a[r[s]] = l), a = l } else a && (a = a[r[s]]) } return a }, traverseSchema: function (e, t, n, i) { i = void 0 === i || i; var r = function (e, t, n) { if (t(e, n), e.properties) for (var o = 0, a = Object.keys(e.properties); o < a.length; o++) { var s = a[o]; if (e.properties.hasOwnProperty(s)) { var l = n.slice(); l.push(s), r(e.properties[s], t, l) } } if (!i && e.items) { var c = n.slice(); c.push(""), r(e.items, t, c) } }; r(e, t, (n = n || []) || []) }, traverseForm: function e(t, n) { n(t), t.items && t.items.forEach(function (t) { e(t, n) }), t.tabs && t.tabs.forEach(function (t) { t.items.forEach(function (t) { e(t, n) }) }) } }; t.a = g }, Ww7o: function (e, t, n) { "use strict"; n.d(t, "a", function () { return s }); var i = n("fXoL"), r = n("3Pt+"), o = n("bSwM"), a = ["*"], s = function () { function e() { this.trueValue = !0, this.falseValue = !1, this.valueChange = new i.EventEmitter, this.propagateChange = function (e) { } } return e.prototype.onHostChange = function (e) { this.propagateChange(e.checked ? this.trueValue : this.falseValue) }, e.prototype.modelChange = function (e) { e ? (this.innerValue = !0, this.valueChange.emit(this.trueValue)) : (this.innerValue = !1, this.valueChange.emit(this.falseValue)) }, e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.setDisabledState = function (e) { this.disabled = e }, e.prototype.writeValue = function (e) { e === this.trueValue ? this.innerValue = !0 : this.innerValue = !1 }, e.\u0275fac = function (t) { return new (t || e) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-checkbox"]], inputs: { disabled: "disabled", trueValue: "trueValue", falseValue: "falseValue" }, outputs: { valueChange: "valueChange" }, features: [i["\u0275\u0275ProvidersFeature"]([{ provide: r.NG_VALUE_ACCESSOR, useExisting: Object(i.forwardRef)(function () { return e }), multi: !0 }])], ngContentSelectors: a, decls: 2, vars: 3, consts: [[3, "ngModel", "checked", "disabled", "ngModelChange", "change"]], template: function (e, t) { 1 & e && (i["\u0275\u0275projectionDef"](), i["\u0275\u0275elementStart"](0, "mat-checkbox", 0), i["\u0275\u0275listener"]("ngModelChange", function (e) { return t.innerValue = e })("ngModelChange", function (e) { return t.modelChange(e) })("change", function (e) { return t.onHostChange(e) }), i["\u0275\u0275projection"](1), i["\u0275\u0275elementEnd"]()), 2 & e && i["\u0275\u0275property"]("ngModel", t.innerValue)("checked", t.innerValue)("disabled", t.disabled) }, directives: [o.MatCheckbox, r.NgControlStatus, r.NgModel], encapsulation: 2 }), e }(); 0, void 0 }, XGqO: function (e, t, n) { "use strict"; n.d(t, "a", function () { return O }); var i = n("mrSG"), r = n("fXoL"), o = n("RxGS"), a = n("3Pt+"), s = n("8LU1"), l = n("OiFK"), c = n("l7P3"), u = n("sYmb"), d = n("3TNn"), p = n("bTqV"), m = n("Qu3c"), f = n("NFeN"), h = n("ofXK"), g = n("0Miz"), y = ["flow"], b = ["flowInput"]; function v(e, t) { if (1 & e && (r["\u0275\u0275element"](0, "tb-error", 14), r["\u0275\u0275pipe"](1, "translate")), 2 & e) { var n = r["\u0275\u0275nextContext"](); r["\u0275\u0275propertyInterpolate"]("error", r["\u0275\u0275pipeBind1"](1, 1, n.noFileText)) } } function E(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "div", 15), r["\u0275\u0275text"](1), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = r["\u0275\u0275nextContext"](); r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate"](n.noFileText) } } function T(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "div"), r["\u0275\u0275text"](1), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = r["\u0275\u0275nextContext"](); r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate"](n.fileName) } } var S = function () { return { allowDuplicateUploads: !0 } }, C = function (e) { return { accept: e } }, O = function (e) { function t(t, n, i) { var o = e.call(this, t) || this; return o.store = t, o.utils = n, o.translate = i, o.accept = "*/*", o.noFileText = "import.no-file", o.inputId = o.utils.guid(), o.readAsBinary = !1, o.workFromFileObj = !1, o.multipleFileValue = !1, o.fileNameChanged = new r.EventEmitter, o.propagateChange = null, o } return Object(i.d)(t, e), Object.defineProperty(t.prototype, "required", { get: function () { return this.requiredValue }, set: function (e) { var t = Object(s.coerceBooleanProperty)(e); this.requiredValue !== t && (this.requiredValue = t) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "requiredAsError", { get: function () { return this.requiredAsErrorValue }, set: function (e) { var t = Object(s.coerceBooleanProperty)(e); this.requiredAsErrorValue !== t && (this.requiredAsErrorValue = t) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "multipleFile", { get: function () { return this.multipleFileValue }, set: function (e) { var t; this.multipleFileValue = e, (null === (t = this.flow) || void 0 === t ? void 0 : t.flowJs) && this.updateMultipleFileMode(this.multipleFile) }, enumerable: !1, configurable: !0 }), t.prototype.ngAfterViewInit = function () { var e = this; this.autoUploadSubscription = this.flow.events$.subscribe(function (t) { if ("filesAdded" === t.type) { var n = []; t.event[0].forEach(function (t) { e.filterFile(t) && n.push(e.readerAsFile(t)) }), n.length && Promise.all(n).then(function (t) { 1 === (t = t.filter(function (e) { return null != e.fileContent || null != e.files })).length ? (e.fileContent = t[0].fileContent, e.fileName = t[0].fileName, e.files = t[0].files, e.updateModel()) : t.length > 1 && (e.fileContent = t.map(function (e) { return e.fileContent }), e.fileName = t.map(function (e) { return e.fileName }), e.files = t.map(function (e) { return e.files }), e.updateModel()) }) } }), this.multipleFile || this.updateMultipleFileMode(this.multipleFile) }, t.prototype.readerAsFile = function (e) { var t = this; return new Promise(function (n) { var i = new FileReader; i.onload = function () { var r = null, o = null, a = null; "string" == typeof i.result && (o = i.result) && o.length > 0 && (t.workFromFileObj ? (a = e.file, r = e.name) : (t.contentConvertFunction && (o = t.contentConvertFunction(o)), o && (r = e.name))), n({ fileContent: o, fileName: r, files: a }) }, i.onerror = function () { n({ fileContent: null, fileName: null, files: null }) }, t.readAsBinary ? i.readAsBinaryString(e.file) : i.readAsText(e.file) }) }, t.prototype.filterFile = function (e) { return !this.allowedExtensions || this.allowedExtensions.split(",").indexOf(e.getExtension()) > -1 }, t.prototype.ngOnDestroy = function () { this.autoUploadSubscription && this.autoUploadSubscription.unsubscribe() }, t.prototype.registerOnChange = function (e) { this.propagateChange = e }, t.prototype.registerOnTouched = function (e) { }, t.prototype.setDisabledState = function (e) { this.disabled = e }, t.prototype.writeValue = function (e) { var t = null; this.workFromFileObj && e instanceof File && (t = Array.isArray(e) ? e.map(function (e) { return e.name }) : e.name), this.fileName = this.existingFileName || t }, t.prototype.ngOnChanges = function (e) { for (var t = 0, n = Object.keys(e); t < n.length; t++) { var i = n[t], r = e[i]; r.currentValue !== r.previousValue && "existingFileName" === i && (this.fileName = this.existingFileName || null) } }, t.prototype.updateModel = function () { this.workFromFileObj ? this.propagateChange(this.files) : (this.propagateChange(this.fileContent), this.fileNameChanged.emit(this.fileName)) }, t.prototype.clearFile = function () { this.fileName = null, this.fileContent = null, this.files = null, this.updateModel() }, t.prototype.updateMultipleFileMode = function (e) { this.flow.flowJs.opts.singleFile = !e, e || this.flowInput.nativeElement.removeAttribute("multiple") }, t.\u0275fac = function (e) { return new (e || t)(r["\u0275\u0275directiveInject"](c.Store), r["\u0275\u0275directiveInject"](l.a), r["\u0275\u0275directiveInject"](u.TranslateService)) }, t.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: t, selectors: [["tb-file-input"]], viewQuery: function (e, t) { if (1 & e && (r["\u0275\u0275viewQuery"](y, 3), r["\u0275\u0275viewQuery"](b, 3)), 2 & e) { var n = void 0; r["\u0275\u0275queryRefresh"](n = r["\u0275\u0275loadQuery"]()) && (t.flow = n.first), r["\u0275\u0275queryRefresh"](n = r["\u0275\u0275loadQuery"]()) && (t.flowInput = n.first) } }, inputs: { label: "label", accept: "accept", noFileText: "noFileText", inputId: "inputId", allowedExtensions: "allowedExtensions", dropLabel: "dropLabel", contentConvertFunction: "contentConvertFunction", required: "required", requiredAsError: "requiredAsError", disabled: "disabled", existingFileName: "existingFileName", readAsBinary: "readAsBinary", workFromFileObj: "workFromFileObj", multipleFile: "multipleFile" }, outputs: { fileNameChanged: "fileNameChanged" }, features: [r["\u0275\u0275ProvidersFeature"]([{ provide: a.NG_VALUE_ACCESSOR, useExisting: Object(r.forwardRef)(function () { return t }), multi: !0 }]), r["\u0275\u0275InheritDefinitionFeature"], r["\u0275\u0275NgOnChangesFeature"]], decls: 20, vars: 17, consts: [[1, "tb-container"], [1, "tb-title"], [3, "flowConfig"], ["flow", "flow"], [1, "tb-file-select-container"], [1, "tb-file-clear-container"], ["mat-button", "", "mat-icon-button", "", "color", "accent", "type", "button", "matTooltipPosition", "above", 1, "tb-file-clear-btn", 3, "matTooltip", "click"], ["flowDrop", "", 1, "drop-area", "tb-flow-drop", 3, "flow"], [3, "for"], ["flowButton", "", "type", "file", 1, "file-input", 3, "flow", "flowAttributes", "id"], ["flowInput", ""], [3, "error", 4, "ngIf"], ["translate", "", 4, "ngIf"], [4, "ngIf"], [3, "error"], ["translate", ""]], template: function (e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "div", 0), r["\u0275\u0275elementStart"](1, "label", 1), r["\u0275\u0275text"](2), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementContainerStart"](3, 2, 3), r["\u0275\u0275elementStart"](5, "div", 4), r["\u0275\u0275elementStart"](6, "div", 5), r["\u0275\u0275elementStart"](7, "button", 6), r["\u0275\u0275listener"]("click", function () { return t.clearFile() }), r["\u0275\u0275pipe"](8, "translate"), r["\u0275\u0275elementStart"](9, "mat-icon"), r["\u0275\u0275text"](10, "close"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](11, "div", 7), r["\u0275\u0275elementStart"](12, "label", 8), r["\u0275\u0275text"](13), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](14, "input", 9, 10), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementContainerEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](16, "div"), r["\u0275\u0275template"](17, v, 2, 3, "tb-error", 11), r["\u0275\u0275template"](18, E, 2, 1, "div", 12), r["\u0275\u0275template"](19, T, 2, 1, "div", 13), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = r["\u0275\u0275reference"](4); r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate"](t.label), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("flowConfig", r["\u0275\u0275pureFunction0"](14, S)), r["\u0275\u0275advance"](4), r["\u0275\u0275propertyInterpolate"]("matTooltip", r["\u0275\u0275pipeBind1"](8, 12, "action.remove")), r["\u0275\u0275advance"](4), r["\u0275\u0275property"]("flow", n.flowJs), r["\u0275\u0275advance"](1), r["\u0275\u0275propertyInterpolate"]("for", t.inputId), r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate"](t.dropLabel), r["\u0275\u0275advance"](1), r["\u0275\u0275propertyInterpolate"]("id", t.inputId), r["\u0275\u0275property"]("flow", n.flowJs)("flowAttributes", r["\u0275\u0275pureFunction1"](15, C, t.accept)), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("ngIf", !t.fileName && t.required && t.requiredAsError), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", !t.fileName && !t.requiredAsError), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", t.fileName) } }, directives: [d.c, p.MatButton, m.MatTooltip, f.MatIcon, d.b, d.a, h.NgIf, g.a, u.TranslateDirective], pipes: [u.TranslatePipe], styles: ["[_nghost-%COMP%]   .tb-container[_ngcontent-%COMP%]{margin-top:0}[_nghost-%COMP%]   .tb-container[_ngcontent-%COMP%]   label.tb-title[_ngcontent-%COMP%]{display:block;padding-bottom:8px}[_nghost-%COMP%]   .tb-file-select-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100px}[_nghost-%COMP%]   .tb-file-preview[_ngcontent-%COMP%]{width:auto;max-width:100px;height:auto;max-height:100px}[_nghost-%COMP%]   .tb-file-clear-container[_ngcontent-%COMP%]{position:relative;float:right;width:48px;height:100px}[_nghost-%COMP%]   .tb-file-clear-btn[_ngcontent-%COMP%]{position:absolute!important;top:50%;transform:translateY(-50%)!important}[_nghost-%COMP%]   .file-input[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .tb-flow-drop[_ngcontent-%COMP%]{position:relative;height:100px;overflow:hidden;border:2px dashed}[_nghost-%COMP%]   .tb-flow-drop[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;width:100%;height:100%;font-size:16px;text-align:center}@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-flow-drop[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:24px}}"] }), t }(o.a); 0, void 0 }, XMqU: function (e, t, n) { "use strict"; n.d(t, "a", function () { return L }); var i = n("fXoL"), r = n("3Pt+"), o = n("LRne"), a = n("mbhL"), s = n("4r/P"), l = n("Kj3r"), c = n("vkgz"), u = n("JX91"), d = n("lJxs"), p = n("/uUt"), m = n("eIep"), f = n("JIr8"), h = n("Duvn"), g = n("YnEf"), y = n("C/rb"), b = n("zp9Z"), v = n("8LU1"), E = n("l7P3"), T = n("sYmb"), S = n("kmnG"), C = n("qFsG"), O = n("/1cH"), w = n("ofXK"), I = n("bTqV"), x = n("NFeN"), M = n("FKr1"), j = n("d5eY"), A = ["dashboardInput"]; function R(e, t) { if (1 & e) { var n = i["\u0275\u0275getCurrentView"](); i["\u0275\u0275elementStart"](0, "button", 8), i["\u0275\u0275listener"]("click", function () { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().clear() }), i["\u0275\u0275elementStart"](1, "mat-icon", 9), i["\u0275\u0275text"](2, "close"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]() } } function N(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-option", 10), i["\u0275\u0275element"](1, "span", 11), i["\u0275\u0275pipe"](2, "highlight"), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit, r = i["\u0275\u0275nextContext"](); i["\u0275\u0275property"]("value", n), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("innerHTML", i["\u0275\u0275pipeBind2"](2, 2, n.title, r.searchText), i["\u0275\u0275sanitizeHtml"]) } } var P = function (e) { return { entity: e } }; function k(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-option", 10), i["\u0275\u0275elementStart"](1, "span"), i["\u0275\u0275text"](2), i["\u0275\u0275pipe"](3, "async"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275nextContext"](); i["\u0275\u0275property"]("value", null), i["\u0275\u0275advance"](2), i["\u0275\u0275textInterpolate1"](" ", i["\u0275\u0275pipeBind1"](3, 2, n.translate.get("dashboard.no-dashboards-matching", i["\u0275\u0275pureFunction1"](4, P, n.searchText))), " ") } } var _ = [[["", "tb-error", ""]], [["", "tb-hint", ""]]], F = ["[tb-error]", "[tb-hint]"], L = function () { function e(e, t, n, i) { this.store = e, this.translate = t, this.dashboardService = n, this.fb = i, this.useIdValue = !0, this.selectFirstDashboard = !1, this.floatLabel = "auto", this.searchText = "", this.propagateChange = function (e) { }, this.selectDashboardFormGroup = this.fb.group({ dashboard: [null] }) } return Object.defineProperty(e.prototype, "required", { get: function () { return this.requiredValue }, set: function (e) { this.requiredValue = Object(v.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.ngOnInit = function () { var e = this; this.filteredDashboards = this.selectDashboardFormGroup.get("dashboard").valueChanges.pipe(Object(l.a)(150), Object(c.a)(function (t) { var n; n = "string" != typeof t && t ? e.useIdValue ? t.id.id : t : null, e.updateView(n) }), Object(u.a)(""), Object(d.a)(function (e) { return e ? "string" == typeof e ? e : e.name : "" }), Object(p.a)(), Object(m.a)(function (t) { return e.fetchDashboards(t) })) }, e.prototype.ngAfterViewInit = function () { }, e.prototype.selectFirstDashboardIfNeeded = function () { var e = this; this.selectFirstDashboard && !this.modelValue && this.getDashboards(new a.b(1)).subscribe(function (t) { if (t.data.length) { var n = t.data[0]; e.modelValue = e.useIdValue ? n.id.id : n, e.selectDashboardFormGroup.get("dashboard").patchValue(n, { emitEvent: !1 }), e.propagateChange(e.modelValue) } }) }, e.prototype.setDisabledState = function (e) { this.disabled = e, this.disabled ? this.selectDashboardFormGroup.disable({ emitEvent: !1 }) : this.selectDashboardFormGroup.enable({ emitEvent: !1 }) }, e.prototype.writeValue = function (e) { var t = this; this.searchText = "", null != e ? "string" == typeof e ? this.dashboardService.getDashboardInfo(e).subscribe(function (e) { t.modelValue = t.useIdValue ? e.id.id : e, t.selectDashboardFormGroup.get("dashboard").patchValue(e, { emitEvent: !0 }) }) : (this.modelValue = this.useIdValue ? e.id.id : e, this.selectDashboardFormGroup.get("dashboard").patchValue(e, { emitEvent: !0 })) : (this.modelValue = null, this.selectDashboardFormGroup.get("dashboard").patchValue(null, { emitEvent: !0 }), this.selectFirstDashboardIfNeeded()) }, e.prototype.updateView = function (e) { this.modelValue !== e && (this.modelValue = e, this.propagateChange(this.modelValue)) }, e.prototype.displayDashboardFn = function (e) { return e ? e.title : void 0 }, e.prototype.fetchDashboards = function (e) { this.searchText = e; var t = new a.b(10, 0, e, { property: "title", direction: s.a.ASC }); return this.getDashboards(t).pipe(Object(f.a)(function () { return Object(o.a)(Object(h.a)()) }), Object(d.a)(function (e) { return e.data })) }, e.prototype.getDashboards = function (e) { var t = Object(y.b)(this.store); return "customer" === this.dashboardsScope || t.authority === b.a.CUSTOMER_USER ? this.customerId ? this.dashboardService.getCustomerDashboards(this.customerId, e, { ignoreLoading: !0 }) : Object(o.a)(Object(h.a)()) : t.authority === b.a.SYS_ADMIN ? this.tenantId ? this.dashboardService.getTenantDashboardsByTenantId(this.tenantId, e, { ignoreLoading: !0 }) : Object(o.a)(Object(h.a)()) : this.dashboardService.getTenantDashboards(e, { ignoreLoading: !0 }) }, e.prototype.clear = function () { var e = this; this.selectDashboardFormGroup.get("dashboard").patchValue(null, { emitEvent: !0 }), setTimeout(function () { e.dashboardInput.nativeElement.blur(), e.dashboardInput.nativeElement.focus() }, 0) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](E.Store), i["\u0275\u0275directiveInject"](T.TranslateService), i["\u0275\u0275directiveInject"](g.a), i["\u0275\u0275directiveInject"](r.FormBuilder)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-dashboard-autocomplete"]], viewQuery: function (e, t) { if (1 & e && i["\u0275\u0275viewQuery"](A, 3), 2 & e) { var n; i["\u0275\u0275queryRefresh"](n = i["\u0275\u0275loadQuery"]()) && (t.dashboardInput = n.first) } }, inputs: { useIdValue: "useIdValue", selectFirstDashboard: "selectFirstDashboard", placeholder: "placeholder", dashboardsScope: "dashboardsScope", tenantId: "tenantId", customerId: "customerId", floatLabel: "floatLabel", required: "required", disabled: "disabled" }, features: [i["\u0275\u0275ProvidersFeature"]([{ provide: r.NG_VALUE_ACCESSOR, useExisting: Object(i.forwardRef)(function () { return e }), multi: !0 }])], ngContentSelectors: F, decls: 15, vars: 15, consts: [[1, "mat-block", 3, "formGroup", "floatLabel"], ["matInput", "", "type", "text", "formControlName", "dashboard", 3, "placeholder", "required", "matAutocomplete"], ["dashboardInput", ""], ["type", "button", "matSuffix", "", "mat-button", "", "mat-icon-button", "", "aria-label", "Clear", 3, "click", 4, "ngIf"], [1, "tb-autocomplete", 3, "displayWith"], ["dashboardAutocomplete", "matAutocomplete"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value", 4, "ngIf"], ["type", "button", "matSuffix", "", "mat-button", "", "mat-icon-button", "", "aria-label", "Clear", 3, "click"], [1, "material-icons"], [3, "value"], [3, "innerHTML"]], template: function (e, t) { if (1 & e && (i["\u0275\u0275projectionDef"](_), i["\u0275\u0275elementStart"](0, "mat-form-field", 0), i["\u0275\u0275element"](1, "input", 1, 2), i["\u0275\u0275pipe"](3, "translate"), i["\u0275\u0275template"](4, R, 3, 0, "button", 3), i["\u0275\u0275elementStart"](5, "mat-autocomplete", 4, 5), i["\u0275\u0275template"](7, N, 3, 5, "mat-option", 6), i["\u0275\u0275pipe"](8, "async"), i["\u0275\u0275template"](9, k, 4, 6, "mat-option", 7), i["\u0275\u0275pipe"](10, "async"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](11, "mat-error"), i["\u0275\u0275projection"](12), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](13, "mat-hint"), i["\u0275\u0275projection"](14, 1), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e) { var n, r = i["\u0275\u0275reference"](6); i["\u0275\u0275property"]("formGroup", t.selectDashboardFormGroup)("floatLabel", t.floatLabel), i["\u0275\u0275advance"](1), i["\u0275\u0275propertyInterpolate"]("placeholder", t.placeholder || i["\u0275\u0275pipeBind1"](3, 9, "dashboard.dashboard")), i["\u0275\u0275property"]("required", t.required)("matAutocomplete", r), i["\u0275\u0275advance"](3), i["\u0275\u0275property"]("ngIf", t.selectDashboardFormGroup.get("dashboard").value && !t.disabled), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("displayWith", t.displayDashboardFn), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngForOf", i["\u0275\u0275pipeBind1"](8, 11, t.filteredDashboards)), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngIf", !(null != (n = i["\u0275\u0275pipeBind1"](10, 13, t.filteredDashboards)) && n.length)) } }, directives: [S.MatFormField, r.NgControlStatusGroup, r.FormGroupDirective, C.MatInput, r.DefaultValueAccessor, O.MatAutocompleteTrigger, r.NgControlStatus, r.FormControlName, r.RequiredValidator, w.NgIf, O.MatAutocomplete, w.NgForOf, S.MatError, S.MatHint, I.MatButton, S.MatSuffix, x.MatIcon, M.MatOption], pipes: [T.TranslatePipe, w.AsyncPipe, j.a], encapsulation: 2 }), e }(); 0, void 0 }, "Y4+Y": function (e, t, n) { "use strict"; n.d(t, "a", function () { return o }); var i = n("fXoL"), r = n("XNiG"), o = function () { function e() { this.notificationSubject = new r.b, this.hideNotificationSubject = new r.b } return e.prototype.dispatchNotification = function (e) { this.notificationSubject.next(e) }, e.prototype.hideNotification = function (e) { this.hideNotificationSubject.next(e) }, e.prototype.getNotification = function () { return this.notificationSubject.asObservable() }, e.prototype.getHideNotification = function () { return this.hideNotificationSubject.asObservable() }, e.\u0275fac = function (t) { return new (t || e) }, e.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, Y8nr: function (e, t, n) { "use strict"; n.d(t, "b", function () { return a }), n.d(t, "a", function () { return s }), n.d(t, "c", function () { return l }); var i = n("C60G"), r = n("tk/3"), o = n("iQEk"); function a(e) { return e || (e = {}), s(e.ignoreLoading, e.ignoreErrors, e.resendRequest) } function s(e, t, n) { return void 0 === e && (e = !1), void 0 === t && (t = !1), void 0 === n && (n = !1), { headers: new r.HttpHeaders({ "Content-Type": "application/json" }), params: new i.a(new o.a(e, t, n)) } } function l(e, t, n) { return void 0 === e && (e = !1), void 0 === t && (t = !1), void 0 === n && (n = !1), { params: new i.a(new o.a(e, t, n)) } } }, YnEf: function (e, t, n) { "use strict"; n.d(t, "a", function () { return m }); var i = n("fXoL"), r = n("Y8nr"), o = n("wtyh"), a = n("tyNb"), s = n("pLZG"), l = n("lJxs"), c = n("05l1"), u = n("x+ZX"), d = n("AytR"), p = n("tk/3"), m = function () { function e(e, t, n) { var i = this; this.http = e, this.router = t, this.window = n, this.currentUrl = this.router.url.split("?")[0], this.router.events.pipe(Object(s.a)(function (e) { return e instanceof a.NavigationEnd })).subscribe(function () { var e = i.router.url.split("?")[0]; i.currentUrl !== e && (i.stDiffObservable = null, i.currentUrl = e) }) } return e.prototype.getTenantDashboards = function (e, t) { return this.http.get("/api/tenant/dashboards" + e.toQuery(), Object(r.b)(t)) }, e.prototype.getTenantDashboardsByTenantId = function (e, t, n) { return this.http.get("/api/tenant/" + e + "/dashboards" + t.toQuery(), Object(r.b)(n)) }, e.prototype.getCustomerDashboards = function (e, t, n) { return this.http.get("/api/customer/" + e + "/dashboards" + t.toQuery(), Object(r.b)(n)) }, e.prototype.getDashboard = function (e, t) { return this.http.get(d.a.integration_service + "/wrapperApis/dashboard/" + e, Object(r.b)(t)) }, e.prototype.getDashboardInfo = function (e, t) { return this.http.get("/api/dashboard/info/" + e, Object(r.b)(t)) }, e.prototype.saveDashboard = function (e, t) { return this.http.post("/api/dashboard", e, Object(r.b)(t)) }, e.prototype.deleteDashboard = function (e, t) { return this.http.delete("/api/dashboard/" + e, Object(r.b)(t)) }, e.prototype.assignDashboardToCustomer = function (e, t, n) { return this.http.post("/api/customer/" + e + "/dashboard/" + t, null, Object(r.b)(n)) }, e.prototype.unassignDashboardFromCustomer = function (e, t, n) { return this.http.delete("/api/customer/" + e + "/dashboard/" + t, Object(r.b)(n)) }, e.prototype.makeDashboardPublic = function (e, t) { return this.http.post("/api/customer/public/dashboard/" + e, null, Object(r.b)(t)) }, e.prototype.makeDashboardPrivate = function (e, t) { return this.http.delete("/api/customer/public/dashboard/" + e, Object(r.b)(t)) }, e.prototype.updateDashboardCustomers = function (e, t, n) { return this.http.post("/api/dashboard/" + e + "/customers", t, Object(r.b)(n)) }, e.prototype.addDashboardCustomers = function (e, t, n) { return this.http.post("/api/dashboard/" + e + "/customers/add", t, Object(r.b)(n)) }, e.prototype.removeDashboardCustomers = function (e, t, n) { return this.http.post("/api/dashboard/" + e + "/customers/remove", t, Object(r.b)(n)) }, e.prototype.getHomeDashboard = function (e, t) { return this.http.get(d.a.integration_service + "/publicApis/role?user=" + e, Object(r.b)(t)) }, e.prototype.getTenantHomeDashboardInfo = function (e) { return this.http.get("/api/tenant/dashboard/home/info", Object(r.b)(e)) }, e.prototype.setTenantHomeDashboardInfo = function (e, t) { return this.http.post("/api/tenant/dashboard/home/info", e, Object(r.b)(t)) }, e.prototype.getPublicDashboardLink = function (e) { if (e && e.assignedCustomers && e.assignedCustomers.length > 0) { var t = e.assignedCustomers.filter(function (e) { return e.public }); if (t.length > 0) { var n = t[0].customerId.id, i = this.window.location.protocol + "//" + this.window.location.hostname, r = this.window.location.port; return r && r.length > 0 && "80" !== r && "443" !== r && (i += ":" + r), i += "/dashboard/" + e.id.id + "?publicId=" + n } } return null }, e.prototype.getServerTimeDiff = function () { if (!this.stDiffObservable) { var e = Date.now(); this.stDiffObservable = this.http.get("/api/dashboard/serverTime", Object(r.a)(!0)).pipe(Object(l.a)(function (t) { var n = Date.now(); return Math.ceil(t - (e + n) / 2) }), Object(c.a)(1), Object(u.a)()) } return this.stDiffObservable }, e.prototype.getEdgeDashboards = function (e, t, n, i) { return void 0 === n && (n = ""), this.http.get("/api/edge/" + e + "/dashboards" + t.toQuery() + "&type=" + n, Object(r.b)(i)) }, e.prototype.assignDashboardToEdge = function (e, t, n) { return this.http.post("/api/edge/" + e + "/dashboard/" + t, null, Object(r.b)(n)) }, e.prototype.unassignDashboardFromEdge = function (e, t, n) { return this.http.delete("/api/edge/" + e + "/dashboard/" + t, Object(r.b)(n)) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275inject"](p.HttpClient), i["\u0275\u0275inject"](a.Router), i["\u0275\u0275inject"](o.b)) }, e.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, "ZI//": function (e, t, n) { "use strict"; n.d(t, "a", function () { return a }); var i = n("fXoL"), r = n("3Pt+"), o = n("FKr1"), a = function () { function e(e, t, n) { this.render = e, this.element = t, this.errorStateMatcher = n, this.propagateChange = null } return e.prototype.input = function (e) { try { this.data = JSON.parse(e), this.parseError = !1 } catch (t) { this.parseError = !0 } this.propagateChange(this.data) }, e.prototype.isErrorState = function (e, t) { var n = this.errorStateMatcher.isErrorState(e, t), i = !!(e && e.invalid && this.parseError); return n || i }, e.prototype.validate = function (e) { return this.parseError ? { invalidJSON: { valid: !1 } } : null }, e.prototype.writeValue = function (e) { e && (this.data = e, this.parseError = !1, this.render.setProperty(this.element.nativeElement, "value", JSON.stringify(e))) }, e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](i.Renderer2), i["\u0275\u0275directiveInject"](i.ElementRef), i["\u0275\u0275directiveInject"](o.ErrorStateMatcher, 4)) }, e.\u0275dir = i["\u0275\u0275defineDirective"]({ type: e, selectors: [["", "tb-json-to-string", ""]], hostBindings: function (e, t) { 1 & e && i["\u0275\u0275listener"]("input", function (e) { return t.input(e.target.value) }) }, features: [i["\u0275\u0275ProvidersFeature"]([{ provide: r.NG_VALUE_ACCESSOR, useExisting: Object(i.forwardRef)(function () { return e }), multi: !0 }, { provide: r.NG_VALIDATORS, useExisting: Object(i.forwardRef)(function () { return e }), multi: !0 }, { provide: o.ErrorStateMatcher, useExisting: e }])] }), e }(); 0, void 0 }, aX2P: function (e, t, n) { "use strict"; n.d(t, "i", function () { return d }), n.d(t, "e", function () { return p }), n.d(t, "c", function () { return m }), n.d(t, "b", function () { return f }), n.d(t, "m", function () { return h }), n.d(t, "n", function () { return g }), n.d(t, "l", function () { return i }), n.d(t, "h", function () { return r }), n.d(t, "d", function () { return o }), n.d(t, "a", function () { return a }), n.d(t, "o", function () { return b }), n.d(t, "f", function () { return y }), n.d(t, "g", function () { return v }), n.d(t, "I", function () { return E }), n.d(t, "z", function () { return T }), n.d(t, "J", function () { return C }), n.d(t, "O", function () { return O }), n.d(t, "N", function () { return w }), n.d(t, "u", function () { return I }), n.d(t, "K", function () { return x }), n.d(t, "w", function () { return M }), n.d(t, "s", function () { return j }), n.d(t, "t", function () { return A }), n.d(t, "r", function () { return R }), n.d(t, "L", function () { return N }), n.d(t, "q", function () { return P }), n.d(t, "p", function () { return k }), n.d(t, "x", function () { return _ }), n.d(t, "v", function () { return F }), n.d(t, "y", function () { return V }), n.d(t, "j", function () { return L }), n.d(t, "k", function () { return D }), n.d(t, "M", function () { return U }), n.d(t, "H", function () { return q }), n.d(t, "G", function () { return z }), n.d(t, "D", function () { return H }), n.d(t, "C", function () { return W }), n.d(t, "A", function () { return Q }), n.d(t, "E", function () { return Y }), n.d(t, "F", function () { return K }), n.d(t, "B", function () { return X }); var i, r, o, a, s = n("//Q6"), l = n("wd/R"), c = n("f0Wu"), u = l, d = 1e3, p = 60 * d, m = 60 * p, f = 24 * m, h = 7 * f, g = 365 * f; !function (e) { e[e.REALTIME = 0] = "REALTIME", e[e.HISTORY = 1] = "HISTORY" }(i || (i = {})), function (e) { e[e.LAST_INTERVAL = 0] = "LAST_INTERVAL", e[e.INTERVAL = 1] = "INTERVAL" }(r || (r = {})), function (e) { e[e.LAST_INTERVAL = 0] = "LAST_INTERVAL", e[e.FIXED = 1] = "FIXED", e[e.INTERVAL = 2] = "INTERVAL" }(o || (o = {})), function (e) { e.MIN = "MIN", e.MAX = "MAX", e.AVG = "AVG", e.SUM = "SUM", e.COUNT = "COUNT", e.NONE = "NONE" }(a || (a = {})); var y, b = new Map([[a.MIN, "aggregation.min"], [a.MAX, "aggregation.max"], [a.AVG, "aggregation.avg"], [a.SUM, "aggregation.sum"], [a.COUNT, "aggregation.count"], [a.NONE, "aggregation.none"]]); !function (e) { e.YESTERDAY = "YESTERDAY", e.DAY_BEFORE_YESTERDAY = "DAY_BEFORE_YESTERDAY", e.THIS_DAY_LAST_WEEK = "THIS_DAY_LAST_WEEK", e.PREVIOUS_WEEK = "PREVIOUS_WEEK", e.PREVIOUS_WEEK_ISO = "PREVIOUS_WEEK_ISO", e.PREVIOUS_MONTH = "PREVIOUS_MONTH", e.PREVIOUS_YEAR = "PREVIOUS_YEAR", e.CURRENT_HOUR = "CURRENT_HOUR", e.CURRENT_DAY = "CURRENT_DAY", e.CURRENT_DAY_SO_FAR = "CURRENT_DAY_SO_FAR", e.CURRENT_WEEK = "CURRENT_WEEK", e.CURRENT_WEEK_ISO = "CURRENT_WEEK_ISO", e.CURRENT_WEEK_SO_FAR = "CURRENT_WEEK_SO_FAR", e.CURRENT_WEEK_ISO_SO_FAR = "CURRENT_WEEK_ISO_SO_FAR", e.CURRENT_MONTH = "CURRENT_MONTH", e.CURRENT_MONTH_SO_FAR = "CURRENT_MONTH_SO_FAR", e.CURRENT_YEAR = "CURRENT_YEAR", e.CURRENT_YEAR_SO_FAR = "CURRENT_YEAR_SO_FAR" }(y || (y = {})); var v = new Map([[y.YESTERDAY, "timeinterval.predefined.yesterday"], [y.DAY_BEFORE_YESTERDAY, "timeinterval.predefined.day-before-yesterday"], [y.THIS_DAY_LAST_WEEK, "timeinterval.predefined.this-day-last-week"], [y.PREVIOUS_WEEK, "timeinterval.predefined.previous-week"], [y.PREVIOUS_WEEK_ISO, "timeinterval.predefined.previous-week-iso"], [y.PREVIOUS_MONTH, "timeinterval.predefined.previous-month"], [y.PREVIOUS_YEAR, "timeinterval.predefined.previous-year"], [y.CURRENT_HOUR, "timeinterval.predefined.current-hour"], [y.CURRENT_DAY, "timeinterval.predefined.current-day"], [y.CURRENT_DAY_SO_FAR, "timeinterval.predefined.current-day-so-far"], [y.CURRENT_WEEK, "timeinterval.predefined.current-week"], [y.CURRENT_WEEK_ISO, "timeinterval.predefined.current-week-iso"], [y.CURRENT_WEEK_SO_FAR, "timeinterval.predefined.current-week-so-far"], [y.CURRENT_WEEK_ISO_SO_FAR, "timeinterval.predefined.current-week-iso-so-far"], [y.CURRENT_MONTH, "timeinterval.predefined.current-month"], [y.CURRENT_MONTH_SO_FAR, "timeinterval.predefined.current-month-so-far"], [y.CURRENT_YEAR, "timeinterval.predefined.current-year"], [y.CURRENT_YEAR_SO_FAR, "timeinterval.predefined.current-year-so-far"]]); function E(e) { return { selectedTab: i.HISTORY, history: { historyType: o.LAST_INTERVAL, timewindowMs: e } } } function T(e) { var t = u().valueOf(); return { displayValue: "", hideInterval: !1, hideAggregation: !1, hideAggInterval: !1, hideTimezone: !1, selectedTab: i.REALTIME, realtime: { realtimeType: r.LAST_INTERVAL, interval: d, timewindowMs: p, quickInterval: y.CURRENT_DAY }, history: { historyType: o.LAST_INTERVAL, interval: d, timewindowMs: p, fixedTimewindow: { startTimeMs: t - f, endTimeMs: t }, quickInterval: y.CURRENT_DAY }, aggregation: { type: a.AVG, limit: Math.floor(e.getMaxDatapointsLimit() / 2) } } } function S(e) { return Object(s.B)(e.selectedTab) ? Object(s.n)(e.realtime) ? i.REALTIME : i.HISTORY : e.selectedTab } function C(e, t) { var n = T(t); return e && (n.hideInterval = e.hideInterval, n.hideAggregation = e.hideAggregation, n.hideAggInterval = e.hideAggInterval, n.hideTimezone = e.hideTimezone, n.selectedTab = S(e), n.selectedTab === i.REALTIME ? (Object(s.n)(e.realtime.interval) && (n.realtime.interval = e.realtime.interval), Object(s.B)(e.realtime.realtimeType) ? Object(s.n)(e.realtime.quickInterval) ? n.realtime.realtimeType = r.INTERVAL : n.realtime.realtimeType = r.LAST_INTERVAL : n.realtime.realtimeType = e.realtime.realtimeType, n.realtime.realtimeType === r.INTERVAL ? n.realtime.quickInterval = e.realtime.quickInterval : n.realtime.timewindowMs = e.realtime.timewindowMs) : (Object(s.n)(e.history.interval) && (n.history.interval = e.history.interval), Object(s.B)(e.history.historyType) ? Object(s.n)(e.history.timewindowMs) ? n.history.historyType = o.LAST_INTERVAL : Object(s.n)(e.history.quickInterval) ? n.history.historyType = o.INTERVAL : n.history.historyType = o.FIXED : n.history.historyType = e.history.historyType, n.history.historyType === o.LAST_INTERVAL ? n.history.timewindowMs = e.history.timewindowMs : n.history.historyType === o.INTERVAL ? n.history.quickInterval = e.history.quickInterval : (n.history.fixedTimewindow.startTimeMs = e.history.fixedTimewindow.startTimeMs, n.history.fixedTimewindow.endTimeMs = e.history.fixedTimewindow.endTimeMs)), e.aggregation && (e.aggregation.type && (n.aggregation.type = e.aggregation.type), n.aggregation.limit = e.aggregation.limit || Math.floor(t.getMaxDatapointsLimit() / 2)), n.timezone = e.timezone), n } function O(e, t, n, r, l) { var c, u; return r = e.history ? Object(s.n)(r) ? r : e.history.interval : e.realtime ? e.realtime.interval : 0, e.aggregation ? (c = e.aggregation.type || a.AVG, u = e.aggregation.limit || l.getMaxDatapointsLimit()) : (c = a.AVG, u = l.getMaxDatapointsLimit()), { hideInterval: e.hideInterval || !1, hideAggregation: e.hideAggregation || !1, hideAggInterval: e.hideAggInterval || !1, hideTimezone: e.hideTimezone || !1, selectedTab: i.HISTORY, history: { historyType: o.FIXED, fixedTimewindow: { startTimeMs: t, endTimeMs: n }, interval: l.boundIntervalToTimewindow(n - t, r, a.AVG) }, aggregation: { type: c, limit: u }, timezone: e.timezone } } function w(e, t) { return !(!e || !t) && S(e) !== S(t) } function I(e) { if (e) { var t = K(e), n = u().utcOffset(); return 60 * (t.utcOffset() - n) * 1e3 } return 0 } function x(e) { return S(e) === i.HISTORY } function M(e, t, n, l) { var c, u = { fixedWindow: null, realtimeWindowMs: null, aggregation: { interval: d, limit: l.getMaxDatapointsLimit(), type: a.AVG }, timezone: e.timezone, tsOffset: I(e.timezone) }; if (n && (u.aggregation.type = a.NONE, u.aggregation.stateData = !0), Object(s.n)(e.aggregation) && !n && (u.aggregation = { type: e.aggregation.type || a.AVG, limit: e.aggregation.limit || l.getMaxDatapointsLimit() }), S(e) === i.REALTIME) { var p = e.realtime.realtimeType; if (Object(s.B)(p) && (p = Object(s.n)(e.realtime.quickInterval) ? r.INTERVAL : r.LAST_INTERVAL), p === r.INTERVAL) { u.realtimeWindowMs = function (e, t) { var n; switch (e) { case y.CURRENT_HOUR: return m; case y.CURRENT_DAY: case y.CURRENT_DAY_SO_FAR: return f; case y.CURRENT_WEEK: case y.CURRENT_WEEK_ISO: case y.CURRENT_WEEK_SO_FAR: case y.CURRENT_WEEK_ISO_SO_FAR: return h; case y.CURRENT_MONTH: case y.CURRENT_MONTH_SO_FAR: return (n = Q(t)).endOf("month").diff(n.clone().startOf("month")); case y.CURRENT_YEAR: case y.CURRENT_YEAR_SO_FAR: return (n = Q(t)).endOf("year").diff(n.clone().startOf("year")) } }(e.realtime.quickInterval, e.timezone), u.quickInterval = e.realtime.quickInterval; var g = Q(e.timezone); u.startTs = A(e.realtime.quickInterval, g).valueOf() } else { u.realtimeWindowMs = e.realtime.timewindowMs; g = Q(e.timezone); u.startTs = g.valueOf() + t - u.realtimeWindowMs } if (u.aggregation.interval = l.boundIntervalToTimewindow(u.realtimeWindowMs, e.realtime.interval, u.aggregation.type), c = u.realtimeWindowMs, p !== r.INTERVAL) { var b = u.startTs % u.aggregation.interval; b && (u.startTs -= b, c += u.aggregation.interval) } } else { var v = e.history.historyType; if (Object(s.B)(v) && (v = Object(s.n)(e.history.timewindowMs) ? o.LAST_INTERVAL : Object(s.n)(e.history.quickInterval) ? o.INTERVAL : o.FIXED), v === o.LAST_INTERVAL) { var E = (g = Q(e.timezone)).valueOf(); u.fixedWindow = { startTimeMs: E - e.history.timewindowMs, endTimeMs: E }, c = e.history.timewindowMs } else if (v === o.INTERVAL) { var T = j(e.history.quickInterval, e.timezone); u.fixedWindow = { startTimeMs: T[0], endTimeMs: T[1] }, c = u.fixedWindow.endTimeMs - u.fixedWindow.startTimeMs, u.quickInterval = e.history.quickInterval } else u.fixedWindow = { startTimeMs: e.history.fixedTimewindow.startTimeMs - u.tsOffset, endTimeMs: e.history.fixedTimewindow.endTimeMs - u.tsOffset }, c = u.fixedWindow.endTimeMs - u.fixedWindow.startTimeMs; u.startTs = u.fixedWindow.startTimeMs, u.aggregation.interval = l.boundIntervalToTimewindow(c, e.history.interval, u.aggregation.type) } var C = u.aggregation; return C.timeWindow = c, C.type !== a.NONE && (C.limit = Math.ceil(c / u.aggregation.interval)), u } function j(e, t) { var n = [0, 0], i = A(e, Q(t)); n[0] = i.valueOf(); var r = R(e, i, t); return n[1] = r.valueOf(), n } function A(e, t) { switch (e) { case y.YESTERDAY: return t.subtract(1, "days"), t.startOf("day"); case y.DAY_BEFORE_YESTERDAY: return t.subtract(2, "days"), t.startOf("day"); case y.THIS_DAY_LAST_WEEK: return t.subtract(1, "weeks"), t.startOf("day"); case y.PREVIOUS_WEEK: return t.subtract(1, "weeks"), t.startOf("week"); case y.PREVIOUS_WEEK_ISO: return t.subtract(1, "weeks"), t.startOf("isoWeek"); case y.PREVIOUS_MONTH: return t.subtract(1, "months"), t.startOf("month"); case y.PREVIOUS_YEAR: return t.subtract(1, "years"), t.startOf("year"); case y.CURRENT_HOUR: return t.startOf("hour"); case y.CURRENT_DAY: case y.CURRENT_DAY_SO_FAR: return t.startOf("day"); case y.CURRENT_WEEK: case y.CURRENT_WEEK_SO_FAR: return t.startOf("week"); case y.CURRENT_WEEK_ISO: case y.CURRENT_WEEK_ISO_SO_FAR: return t.startOf("isoWeek"); case y.CURRENT_MONTH: case y.CURRENT_MONTH_SO_FAR: return t.startOf("month"); case y.CURRENT_YEAR: case y.CURRENT_YEAR_SO_FAR: return t.startOf("year") } } function R(e, t, n) { switch (e) { case y.YESTERDAY: case y.DAY_BEFORE_YESTERDAY: case y.THIS_DAY_LAST_WEEK: case y.CURRENT_DAY: return t.add(1, "day").valueOf(); case y.PREVIOUS_WEEK: case y.PREVIOUS_WEEK_ISO: case y.CURRENT_WEEK: case y.CURRENT_WEEK_ISO: return t.add(1, "week").valueOf(); case y.PREVIOUS_MONTH: case y.CURRENT_MONTH: return t.add(1, "month").valueOf(); case y.PREVIOUS_YEAR: case y.CURRENT_YEAR: return t.add(1, "year").valueOf(); case y.CURRENT_HOUR: return t.add(1, "hour").valueOf(); case y.CURRENT_DAY_SO_FAR: case y.CURRENT_WEEK_SO_FAR: case y.CURRENT_WEEK_ISO_SO_FAR: case y.CURRENT_MONTH_SO_FAR: case y.CURRENT_YEAR_SO_FAR: return Q(n).valueOf() } } function N(e) { switch (e) { case y.CURRENT_HOUR: return m; case y.YESTERDAY: case y.DAY_BEFORE_YESTERDAY: case y.THIS_DAY_LAST_WEEK: case y.CURRENT_DAY: case y.CURRENT_DAY_SO_FAR: return f; case y.PREVIOUS_WEEK: case y.PREVIOUS_WEEK_ISO: case y.CURRENT_WEEK: case y.CURRENT_WEEK_ISO: case y.CURRENT_WEEK_SO_FAR: case y.CURRENT_WEEK_ISO_SO_FAR: return h; case y.PREVIOUS_MONTH: case y.CURRENT_MONTH: case y.CURRENT_MONTH_SO_FAR: return 30 * f; case y.PREVIOUS_YEAR: case y.CURRENT_YEAR: case y.CURRENT_YEAR_SO_FAR: return g } } function P(e, t) { switch (e) { case y.YESTERDAY: case y.DAY_BEFORE_YESTERDAY: case y.CURRENT_DAY: case y.CURRENT_DAY_SO_FAR: return t.subtract(1, "days"), t.startOf("day"); case y.THIS_DAY_LAST_WEEK: return t.subtract(1, "weeks"), t.startOf("day"); case y.PREVIOUS_WEEK: case y.CURRENT_WEEK: case y.CURRENT_WEEK_SO_FAR: return t.subtract(1, "weeks"), t.startOf("week"); case y.PREVIOUS_WEEK_ISO: case y.CURRENT_WEEK_ISO: case y.CURRENT_WEEK_ISO_SO_FAR: return t.subtract(1, "weeks"), t.startOf("isoWeek"); case y.PREVIOUS_MONTH: case y.CURRENT_MONTH: case y.CURRENT_MONTH_SO_FAR: return t.subtract(1, "months"), t.startOf("month"); case y.PREVIOUS_YEAR: case y.CURRENT_YEAR: case y.CURRENT_YEAR_SO_FAR: return t.subtract(1, "years"), t.startOf("year"); case y.CURRENT_HOUR: return t.subtract(1, "hour"), t.startOf("hour") } } function k(e, t, n) { switch (e) { case y.CURRENT_DAY_SO_FAR: return n.subtract(1, "days").valueOf(); case y.CURRENT_WEEK_SO_FAR: case y.CURRENT_WEEK_ISO_SO_FAR: return n.subtract(1, "week").valueOf(); case y.CURRENT_MONTH_SO_FAR: return n.subtract(1, "month").valueOf(); case y.CURRENT_YEAR_SO_FAR: return n.subtract(1, "year").valueOf(); default: return R(e, t) } } function _(e, t, n) { var i = { fixedWindow: null, realtimeWindowMs: null, aggregation: e.aggregation, tsOffset: e.tsOffset }; if (e.fixedWindow) { var r = void 0, o = void 0; if ("previousInterval" === t) if (e.quickInterval) { var a = u(e.fixedWindow.startTimeMs), l = u(e.fixedWindow.endTimeMs); e.timezone && (a.tz(e.timezone), l.tz(e.timezone)); var c = P(e.quickInterval, a); r = c.valueOf(), o = k(e.quickInterval, c, l) } else { var d = e.fixedWindow.endTimeMs - e.fixedWindow.startTimeMs; r = (o = e.fixedWindow.startTimeMs) - d } else if ("customInterval" === t) if (Object(s.y)(n) && isFinite(n) && n > 0) { d = e.fixedWindow.endTimeMs - e.fixedWindow.startTimeMs; r = (o = e.fixedWindow.endTimeMs - Math.round(n)) - d } else o = e.fixedWindow.endTimeMs, r = e.fixedWindow.startTimeMs; else { d = e.fixedWindow.endTimeMs - e.fixedWindow.startTimeMs; r = (o = u(e.fixedWindow.endTimeMs).subtract(1, t).valueOf()) - d } i.startTs = r, i.fixedWindow = { startTimeMs: i.startTs, endTimeMs: o } } return i } function F(e) { var t = {}; return t.hideInterval = e.hideInterval || !1, t.hideAggregation = e.hideAggregation || !1, t.hideAggInterval = e.hideAggInterval || !1, t.hideTimezone = e.hideTimezone || !1, Object(s.n)(e.selectedTab) && (t.selectedTab = e.selectedTab, e.selectedTab === i.REALTIME ? t.realtime = Object(s.e)(e.realtime) : e.selectedTab === i.HISTORY && (t.history = Object(s.e)(e.history))), t.aggregation = Object(s.e)(e.aggregation), t.timezone = e.timezone, t } var L, D, V = new Array({ name: "timeinterval.seconds-interval", translateParams: { seconds: 1 }, value: d }, { name: "timeinterval.seconds-interval", translateParams: { seconds: 5 }, value: 5 * d }, { name: "timeinterval.seconds-interval", translateParams: { seconds: 10 }, value: 10 * d }, { name: "timeinterval.seconds-interval", translateParams: { seconds: 15 }, value: 15 * d }, { name: "timeinterval.seconds-interval", translateParams: { seconds: 30 }, value: 30 * d }, { name: "timeinterval.minutes-interval", translateParams: { minutes: 1 }, value: p }, { name: "timeinterval.minutes-interval", translateParams: { minutes: 2 }, value: 2 * p }, { name: "timeinterval.minutes-interval", translateParams: { minutes: 5 }, value: 5 * p }, { name: "timeinterval.minutes-interval", translateParams: { minutes: 10 }, value: 10 * p }, { name: "timeinterval.minutes-interval", translateParams: { minutes: 15 }, value: 15 * p }, { name: "timeinterval.minutes-interval", translateParams: { minutes: 30 }, value: 30 * p }, { name: "timeinterval.hours-interval", translateParams: { hours: 1 }, value: m }, { name: "timeinterval.hours-interval", translateParams: { hours: 2 }, value: 2 * m }, { name: "timeinterval.hours-interval", translateParams: { hours: 5 }, value: 5 * m }, { name: "timeinterval.hours-interval", translateParams: { hours: 10 }, value: 10 * m }, { name: "timeinterval.hours-interval", translateParams: { hours: 12 }, value: 12 * m }, { name: "timeinterval.days-interval", translateParams: { days: 1 }, value: f }, { name: "timeinterval.days-interval", translateParams: { days: 7 }, value: 7 * f }, { name: "timeinterval.days-interval", translateParams: { days: 30 }, value: 30 * f }); !function (e) { e.SECONDS = "SECONDS", e.MINUTES = "MINUTES", e.HOURS = "HOURS", e.DAYS = "DAYS" }(L || (L = {})), function (e) { e.MILLISECONDS = "MILLISECONDS" }(D || (D = {})); var U = new Map([[D.MILLISECONDS, "timeunit.milliseconds"], [L.SECONDS, "timeunit.seconds"], [L.MINUTES, "timeunit.minutes"], [L.HOURS, "timeunit.hours"], [L.DAYS, "timeunit.days"]]), B = null, G = null; function q() { return B || (B = c.tz.names().map(function (e) { var t = c.tz(e); return { id: e, name: e.replace(/_/g, " "), offset: "UTC" + t.format("Z"), nOffset: t.utcOffset(), abbr: t.zoneAbbr() } })), B } function z(e, t, n) { var i = q(), r = e ? i.find(function (t) { return t.id === e }) : null; if (!r) if (n) { var o = W(); r = i.find(function (e) { return e.id === o }) } else t && (r = i.find(function (e) { return e.id === t })); return r } function H() { return z(W()) } function W() { return G || (G = c.tz.guess()), G } function Q(e) { return e ? u().tz(e) : u() } function Y(e, t) { return t ? u(e).tz(t) : u(e) } function K(e) { return u.tz(e) } function X(e, t) { return Q(t).subtract(1, e) } }, bdDX: function (e, t, n) { "use strict"; n.d(t, "a", function () { return m }); var i = n("fXoL"), r = n("3Pt+"), o = n("XiUz"), a = n("ofXK"), s = n("znSr"), l = n("NFeN"), c = n("bTqV"), u = ["searchInput"]; function d(e, t) { if (1 & e) { var n = i["\u0275\u0275getCurrentView"](); i["\u0275\u0275elementStart"](0, "button", 3), i["\u0275\u0275listener"]("click", function (e) { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().clear(e) }), i["\u0275\u0275elementStart"](1, "mat-icon", 4), i["\u0275\u0275text"](2, "close"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]() } } var p = function (e) { return { focus: e } }, m = function () { function e() { this.focus = !1, this.propagateChange = function (e) { } } return e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.writeValue = function (e) { this.searchText = e }, e.prototype.updateSearchText = function () { this.updateView() }, e.prototype.updateView = function () { this.propagateChange(this.searchText) }, e.prototype.clear = function (e) { e.preventDefault(), e.stopPropagation(), this.searchText = "", this.updateView() }, e.prototype.toggleFocus = function () { this.focus = !this.focus }, e.\u0275fac = function (t) { return new (t || e) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-widgets-bundle-search"]], viewQuery: function (e, t) { if (1 & e && i["\u0275\u0275viewQuery"](u, 1), 2 & e) { var n; i["\u0275\u0275queryRefresh"](n = i["\u0275\u0275loadQuery"]()) && (t.searchInput = n.first) } }, inputs: { placeholder: "placeholder" }, features: [i["\u0275\u0275ProvidersFeature"]([{ provide: r.NG_VALUE_ACCESSOR, useExisting: Object(i.forwardRef)(function () { return e }), multi: !0 }])], decls: 5, vars: 6, consts: [["fxLayoutAlign", "start center", "fxLayoutGap", "16px", 1, "input-wrapper", 3, "ngClass"], ["type", "text", 3, "ngModel", "placeholder", "ngModelChange", "focus", "blur"], ["mat-button", "", "type", "button", "mat-icon-button", "", 3, "click", 4, "ngIf"], ["mat-button", "", "type", "button", "mat-icon-button", "", 3, "click"], [1, "close"]], template: function (e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "div", 0), i["\u0275\u0275elementStart"](1, "mat-icon"), i["\u0275\u0275text"](2, "search"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](3, "input", 1), i["\u0275\u0275listener"]("ngModelChange", function (e) { return t.searchText = e })("ngModelChange", function () { return t.updateSearchText() })("focus", function () { return t.toggleFocus() })("blur", function () { return t.toggleFocus() }), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](4, d, 3, 0, "button", 2), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275property"]("ngClass", i["\u0275\u0275pureFunction1"](4, p, t.focus)), i["\u0275\u0275advance"](3), i["\u0275\u0275property"]("ngModel", t.searchText)("placeholder", t.placeholder), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngIf", t.searchText)) }, directives: [o.e, o.g, a.NgClass, s.b, l.MatIcon, r.DefaultValueAccessor, r.NgControlStatus, r.NgModel, a.NgIf, c.MatButton], styles: [".input-wrapper{background:hsla(0,0%,100%,.2);border-radius:8px;color:hsla(0,0%,100%,.84);padding:5px 8px 5px 16px;height:46px}.input-wrapper input{width:100%;height:100%;padding:0;font-size:20px;outline:none;border:none;background-color:transparent;color:#fff}.input-wrapper input::-moz-placeholder{color:#fff;opacity:.6;line-height:26px}.input-wrapper input:-ms-input-placeholder{color:#fff;opacity:.6;line-height:26px}.input-wrapper input::placeholder{color:#fff;opacity:.6;line-height:26px}.input-wrapper.focus{background:#fff;color:rgba(0,0,0,.54)}.input-wrapper.focus input{color:#000;opacity:.6}.input-wrapper.focus .close{color:#000!important;opacity:.54}"], encapsulation: 2 }), e }(); 0, void 0 }, d5eY: function (e, t, n) { "use strict"; n.d(t, "a", function () { return r }); var i = n("fXoL"), r = function () { function e() { } return e.prototype.transform = function (e, t) { var n = t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&"), i = new RegExp("^" + n, "i"); return t ? e.replace(i, function (e) { return "<b>" + e + "</b>" }) : e }, e.\u0275fac = function (t) { return new (t || e) }, e.\u0275pipe = i["\u0275\u0275definePipe"]({ name: "highlight", type: e, pure: !0 }), e }(); 0, void 0 }, dUlv: function (e, t, n) { "use strict"; n.d(t, "a", function () { return S }); var i = n("fXoL"), r = n("l5mm"), o = n("pLZG"), a = n("XiUz"), s = n("bTqV"), l = n("NFeN"), c = n("ofXK"), u = n("znSr"), d = n("5RNC"), p = n("3Pt+"), m = n("d3UM"), f = n("FKr1"), h = n("sYmb"); function g(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "span"), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "date"), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275nextContext"](); i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind2"](2, 1, n.currentTime, "medium")) } } function y(e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "span"), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2, 1, "widget.no-data-found"))) } var b = function (e) { return { color: e } }; function v(e, t) { if (1 & e) { var n = i["\u0275\u0275getCurrentView"](); i["\u0275\u0275elementStart"](0, "button", 15), i["\u0275\u0275listener"]("click", function () { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().play() }), i["\u0275\u0275elementStart"](1, "mat-icon", 3), i["\u0275\u0275text"](2, " play_circle_outline "), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]() } if (2 & e) { var r = i["\u0275\u0275nextContext"](); i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngStyle", i["\u0275\u0275pureFunction1"](1, b, r.settings.buttonColor)) } } function E(e, t) { if (1 & e) { var n = i["\u0275\u0275getCurrentView"](); i["\u0275\u0275elementStart"](0, "button", 16), i["\u0275\u0275listener"]("click", function () { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().pause() }), i["\u0275\u0275elementStart"](1, "mat-icon", 3), i["\u0275\u0275text"](2, " pause_circle_outline "), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]() } if (2 & e) { var r = i["\u0275\u0275nextContext"](); i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngStyle", i["\u0275\u0275pureFunction1"](1, b, r.settings.buttonColor)) } } function T(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-option", 17), i["\u0275\u0275text"](1), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit; i["\u0275\u0275property"]("value", n), i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"]("", n, " ") } } var S = function () { function e(e) { this.cd = e, this.step = 1e3, this.anchors = [], this.useAnchors = !1, this.timeUpdated = new i.EventEmitter, this.minTimeIndex = 0, this.maxTimeIndex = 0, this.speed = 1, this.index = 0, this.playing = !1, this.speeds = [1, 5, 10, 25], this.currentTime = null } return e.prototype.ngOnChanges = function () { this.maxTimeIndex = Math.ceil((this.maxTime - this.minTime) / this.step), this.currentTime = this.minTime === 1 / 0 ? null : this.minTime }, e.prototype.play = function () { var e = this; this.playing = !0, this.interval || (this.interval = Object(r.a)(1e3 / this.speed).pipe(Object(o.a)(function () { return e.playing })).subscribe(function () { e.index++, e.currentTime = e.minTime + e.index * e.step, e.index <= e.maxTimeIndex ? (e.cd.detectChanges(), e.timeUpdated.emit(e.currentTime)) : (e.playing = !1, e.interval.complete(), e.cd.detectChanges()) }, function (e) { console.error(e) }, function () { e.interval = null })) }, e.prototype.reInit = function () { this.interval && this.interval.complete(), this.playing && this.play() }, e.prototype.pause = function () { this.playing = !1, this.currentTime = this.minTime + this.index * this.step, this.cd.detectChanges(), this.timeUpdated.emit(this.currentTime) }, e.prototype.moveNext = function () { if (this.index < this.maxTimeIndex) if (this.useAnchors) { var e = this.findIndex(this.currentTime, this.anchors) + 1; this.index = Math.floor((this.anchors[e] - this.minTime) / this.step) } else this.index++; this.pause() }, e.prototype.movePrev = function () { if (this.index > this.minTimeIndex) if (this.useAnchors) { var e = this.findIndex(this.currentTime, this.anchors) - 1; this.index = Math.floor((this.anchors[e] - this.minTime) / this.step) } else this.index--; this.pause() }, e.prototype.findIndex = function (e, t) { for (var n = 0; t[n] < e;)n++; return n }, e.prototype.moveStart = function () { this.index = this.minTimeIndex, this.pause() }, e.prototype.moveEnd = function () { this.index = this.maxTimeIndex, this.pause() }, e.prototype.changeIndex = function (e) { this.index = e, this.currentTime = this.minTime + e * this.step, this.timeUpdated.emit(this.currentTime) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](i.ChangeDetectorRef)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-history-selector"]], inputs: { settings: "settings", minTime: "minTime", maxTime: "maxTime", step: "step", anchors: "anchors", useAnchors: "useAnchors" }, outputs: { timeUpdated: "timeUpdated" }, features: [i["\u0275\u0275NgOnChangesFeature"]], decls: 23, vars: 21, consts: [[1, "trip-animation-control-panel"], ["fxFlex", "", "fxLayout", "row", "fxFlexAlign", "center"], ["mat-icon-button", "", "aria-label", "Start", 1, "mat-icon-button", 3, "click"], [1, "material-icons", 3, "ngStyle"], ["mat-icon-button", "", "aria-label", "Previous", 1, "mat-icon-button", 3, "click"], ["fxLayout", "column", "fxFlex", "100"], [3, "ngModel", "min", "max", "ngModelChange", "input"], [1, "panel-timer"], [4, "ngIf"], ["mat-icon-button", "", "aria-label", "Next", 1, "mat-icon-button", 3, "click"], ["mat-icon-button", "", "aria-label", "End", 1, "mat-icon-button", 3, "click"], ["mat-icon-button", "", "class", "mat-icon-button", "aria-label", "Play", 3, "click", 4, "ngIf"], ["mat-icon-button", "", "class", "mat-icon-button", "aria-label", "Stop", 3, "click", 4, "ngIf"], ["aria-label", "Speed selector", 1, "speed-select", 3, "ngModel", "ngModelChange", "selectionChange"], [3, "value", 4, "ngFor", "ngForOf"], ["mat-icon-button", "", "aria-label", "Play", 1, "mat-icon-button", 3, "click"], ["mat-icon-button", "", "aria-label", "Stop", 1, "mat-icon-button", 3, "click"], [3, "value"]], template: function (e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "div", 0), i["\u0275\u0275elementStart"](1, "div", 1), i["\u0275\u0275elementStart"](2, "button", 2), i["\u0275\u0275listener"]("click", function () { return t.moveStart() }), i["\u0275\u0275elementStart"](3, "mat-icon", 3), i["\u0275\u0275text"](4, "fast_rewind"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](5, "button", 4), i["\u0275\u0275listener"]("click", function () { return t.movePrev() }), i["\u0275\u0275elementStart"](6, "mat-icon", 3), i["\u0275\u0275text"](7, "skip_previous"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](8, "div", 5), i["\u0275\u0275elementStart"](9, "mat-slider", 6), i["\u0275\u0275listener"]("ngModelChange", function (e) { return t.index = e })("input", function (e) { return t.changeIndex(e.value) }), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](10, "div", 7), i["\u0275\u0275template"](11, g, 3, 4, "span", 8), i["\u0275\u0275template"](12, y, 3, 3, "span", 8), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](13, "button", 9), i["\u0275\u0275listener"]("click", function () { return t.moveNext() }), i["\u0275\u0275elementStart"](14, "mat-icon", 3), i["\u0275\u0275text"](15, "skip_next"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](16, "button", 10), i["\u0275\u0275listener"]("click", function () { return t.moveEnd() }), i["\u0275\u0275elementStart"](17, "mat-icon", 3), i["\u0275\u0275text"](18, "fast_forward"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](19, v, 3, 3, "button", 11), i["\u0275\u0275template"](20, E, 3, 3, "button", 12), i["\u0275\u0275elementStart"](21, "mat-select", 13), i["\u0275\u0275listener"]("ngModelChange", function (e) { return t.speed = e })("selectionChange", function () { return t.reInit() }), i["\u0275\u0275template"](22, T, 2, 2, "mat-option", 14), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275advance"](3), i["\u0275\u0275property"]("ngStyle", i["\u0275\u0275pureFunction1"](13, b, t.settings.buttonColor)), i["\u0275\u0275advance"](3), i["\u0275\u0275property"]("ngStyle", i["\u0275\u0275pureFunction1"](15, b, t.settings.buttonColor)), i["\u0275\u0275advance"](3), i["\u0275\u0275property"]("ngModel", t.index)("min", t.minTimeIndex)("max", t.maxTimeIndex), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngIf", t.currentTime), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngIf", !t.currentTime), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngStyle", i["\u0275\u0275pureFunction1"](17, b, t.settings.buttonColor)), i["\u0275\u0275advance"](3), i["\u0275\u0275property"]("ngStyle", i["\u0275\u0275pureFunction1"](19, b, t.settings.buttonColor)), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngIf", !t.playing), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngIf", t.playing), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngModel", t.speed), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngForOf", t.speeds)) }, directives: [a.b, a.f, a.a, s.MatButton, l.MatIcon, c.NgStyle, u.e, d.MatSlider, p.NgControlStatus, p.NgModel, c.NgIf, m.MatSelect, c.NgForOf, f.MatOption], pipes: [c.DatePipe, h.TranslatePipe], styles: [".trip-animation-label-container[_ngcontent-%COMP%]{height:24px}.trip-animation-container[_ngcontent-%COMP%]{position:relative;z-index:1;flex:1;width:100%}.trip-animation-container[_ngcontent-%COMP%]   #trip-animation-map[_ngcontent-%COMP%]{z-index:1;width:100%;height:100%}.trip-animation-container[_ngcontent-%COMP%]   #trip-animation-map[_ngcontent-%COMP%]   .pointsLayerMarkerIcon[_ngcontent-%COMP%]{border-radius:50%}.trip-animation-container[_ngcontent-%COMP%]   .trip-animation-info-panel[_ngcontent-%COMP%]{position:absolute;top:0;right:0;z-index:2;pointer-events:none}.trip-animation-container[_ngcontent-%COMP%]   .trip-animation-info-panel[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]{top:0;left:0;width:32px;min-width:32px;height:32px;min-height:32px;padding:0 0 2px;margin:2px;line-height:24px}.trip-animation-container[_ngcontent-%COMP%]   .trip-animation-info-panel[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:24px;height:24px}.trip-animation-container[_ngcontent-%COMP%]   .trip-animation-info-panel[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:inherit;height:inherit}.trip-animation-container[_ngcontent-%COMP%]   .trip-animation-tooltip[_ngcontent-%COMP%]{position:absolute;top:38px;right:0;z-index:2;padding:10px;background-color:#fff;transition:.3s ease-in-out}.trip-animation-container[_ngcontent-%COMP%]   .trip-animation-tooltip-hidden[_ngcontent-%COMP%]{transform:translateX(110%)}.trip-animation-control-panel[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;width:100%;padding-bottom:16px;padding-left:10px}.trip-animation-control-panel[_ngcontent-%COMP%]   mat-slider-container[_ngcontent-%COMP%]   mat-slider[_ngcontent-%COMP%]{min-width:80px}.trip-animation-control-panel[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{width:44px;min-width:44px;height:48px;min-height:48px;margin:0;line-height:28px}.trip-animation-control-panel[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:24px;height:24px;font-size:24px}.trip-animation-control-panel[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:inherit;height:inherit}.trip-animation-control-panel[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%]{margin:0}.trip-animation-control-panel[_ngcontent-%COMP%]   .panel-timer[_ngcontent-%COMP%]{max-width:none;margin-top:-20px;font-size:12px;font-weight:500;text-align:center}.speed-select[_ngcontent-%COMP%]{width:70px;margin-left:10px;margin-top:10px}"] }), e }(); 0, void 0 }, efJA: function (e, t, n) { "use strict"; n.d(t, "a", function () { return T }); var i = n("fXoL"), r = n("zp9Z"), o = n("l7P3"), a = n("C/rb"), s = n("lJxs"), l = n("Vurf"), c = n("tyNb"), u = n("XiUz"), d = n("ofXK"), p = n("bTqV"), m = n("STbY"), f = n("NFeN"), h = n("znSr"), g = n("sYmb"); function y(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "span", 12), i["\u0275\u0275text"](1), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit; i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate"](n) } } function b(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "span", 13), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit; i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2, 1, n)) } } function v(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "div", 7), i["\u0275\u0275elementStart"](1, "mat-icon", 8), i["\u0275\u0275text"](2, "account_circle"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](3, "div", 9), i["\u0275\u0275template"](4, y, 2, 1, "span", 10), i["\u0275\u0275pipe"](5, "async"), i["\u0275\u0275template"](6, b, 3, 3, "span", 11), i["\u0275\u0275pipe"](7, "async"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275nextContext"](); i["\u0275\u0275advance"](4), i["\u0275\u0275property"]("ngIf", i["\u0275\u0275pipeBind1"](5, 2, n.userDisplayName$)), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngIf", i["\u0275\u0275pipeBind1"](7, 4, n.authorityName$)) } } function E(e, t) { if (1 & e) { var n = i["\u0275\u0275getCurrentView"](); i["\u0275\u0275elementStart"](0, "div", 14), i["\u0275\u0275elementStart"](1, "button", 15), i["\u0275\u0275listener"]("click", function () { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().openProfile() }), i["\u0275\u0275elementStart"](2, "mat-icon", 3), i["\u0275\u0275text"](3, "account_circle"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](4, "span", 16), i["\u0275\u0275text"](5, "home.profile"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](6, "button", 15), i["\u0275\u0275listener"]("click", function () { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().logout() }), i["\u0275\u0275elementStart"](7, "mat-icon", 3), i["\u0275\u0275text"](8, "exit_to_app"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](9, "span", 16), i["\u0275\u0275text"](10, "home.logout"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]() } } var T = function () { function e(e, t, n) { var i = this; this.store = e, this.router = t, this.authService = n, this.authorities = r.a, this.authority$ = this.store.pipe(Object(o.select)(a.d), Object(s.a)(function (e) { return e ? e.authority : r.a.ANONYMOUS })), this.authorityName$ = this.store.pipe(Object(o.select)(a.g), Object(s.a)(function (e) { return i.getAuthorityName(e) })), this.userDisplayName$ = this.store.pipe(Object(o.select)(a.g), Object(s.a)(function (e) { return i.getUserDisplayName(e) })) } return e.prototype.ngOnInit = function () { }, e.prototype.ngOnDestroy = function () { }, e.prototype.getAuthorityName = function (e) { var t = null; if (e) switch (e.authority) { case r.a.SYS_ADMIN: t = "user.sys-admin"; break; case r.a.TENANT_ADMIN: t = "user.tenant-admin"; break; case r.a.CUSTOMER_USER: t = "user.customer" }return t }, e.prototype.getUserDisplayName = function (e) { var t = ""; return e && (e.firstName && e.firstName.length > 0 || e.lastName && e.lastName.length > 0 ? (e.firstName && (t += e.firstName), e.lastName && (t.length > 0 && (t += " "), t += e.lastName)) : t = e.email), t }, e.prototype.openProfile = function () { this.router.navigate(["profile"]) }, e.prototype.logout = function () { localStorage.removeItem("user"), this.authService.logout() }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](o.Store), i["\u0275\u0275directiveInject"](c.Router), i["\u0275\u0275directiveInject"](l.a)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-user-menu"]], inputs: { displayUserInfo: "displayUserInfo" }, decls: 9, vars: 5, consts: [["fxLayout", "row"], ["fxHide.lt-lg", "", "class", "tb-user-info", "fxLayout", "row", 4, "ngIf"], ["mat-button", "", "mat-icon-button", "", 3, "matMenuTriggerFor"], [1, "material-icons"], ["xPosition", "before"], ["userMenu", "matMenu"], ["class", "tb-user-menu-items", 4, "ngIf"], ["fxHide.lt-lg", "", "fxLayout", "row", 1, "tb-user-info"], [1, "material-icons", "tb-mini-avatar"], ["fxLayout", "column", "fxLayoutAlign", "center"], ["class", "tb-user-display-name", 4, "ngIf"], ["class", "tb-user-authority", 4, "ngIf"], [1, "tb-user-display-name"], [1, "tb-user-authority"], [1, "tb-user-menu-items"], ["mat-menu-item", "", 3, "click"], ["translate", ""]], template: function (e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "section", 0), i["\u0275\u0275template"](1, v, 8, 6, "div", 1), i["\u0275\u0275elementStart"](2, "button", 2), i["\u0275\u0275elementStart"](3, "mat-icon", 3), i["\u0275\u0275text"](4, "more_vert"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](5, "mat-menu", 4, 5), i["\u0275\u0275template"](7, E, 11, 0, "div", 6), i["\u0275\u0275pipe"](8, "async"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275reference"](6); i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngIf", t.displayUserInfo), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("matMenuTriggerFor", n), i["\u0275\u0275advance"](5), i["\u0275\u0275property"]("ngIf", i["\u0275\u0275pipeBind1"](8, 3, t.authority$)) } }, directives: [u.f, d.NgIf, p.MatButton, m.MatMenuTrigger, f.MatIcon, m.MatMenu, h.d, u.e, m.MatMenuItem, g.TranslateDirective], pipes: [d.AsyncPipe, g.TranslatePipe], styles: ["[_nghost-%COMP%]   div.tb-user-info[_ngcontent-%COMP%]{line-height:1.5}[_nghost-%COMP%]   div.tb-user-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-transform:none}[_nghost-%COMP%]   div.tb-user-info[_ngcontent-%COMP%]   span.tb-user-display-name[_ngcontent-%COMP%]{font-size:.8rem;font-weight:300;letter-spacing:.008em}[_nghost-%COMP%]   div.tb-user-info[_ngcontent-%COMP%]   span.tb-user-authority[_ngcontent-%COMP%]{font-size:.8rem;font-weight:300;letter-spacing:.005em;opacity:.8}[_nghost-%COMP%]   mat-icon.tb-mini-avatar[_ngcontent-%COMP%]{width:36px;height:36px;margin:auto 8px;font-size:36px;cursor:default}.tb-user-menu-items[_ngcontent-%COMP%]{min-width:256px}"], changeDetection: 0 }), e }(); 0, void 0 }, fjw6: function (e, t, n) { "use strict"; n.d(t, "a", function () { return r }); var i = n("fXoL"), r = function () { function e() { } return e.prototype.transform = function (e) { var t = Object.keys(e); return t.slice(t.length / 2) }, e.\u0275fac = function (t) { return new (t || e) }, e.\u0275pipe = i["\u0275\u0275definePipe"]({ name: "enumToArray", type: e, pure: !0 }), e }(); 0, void 0 }, "g+M/": function (e, t, n) { "use strict"; n.d(t, "a", function () { return f }); var i = n("fXoL"), r = n("Y8nr"), o = n("LRne"), a = n("z6cu"), s = n("//Q6"), l = n("gGt+"), c = n("Dnot"), u = n("vkgz"), d = n("lJxs"), p = n("5+tZ"), m = n("tk/3"), f = function () { function e(e, t) { this.http = e, this.otaPackageService = t, this.lwm2mBootstrapSecurityInfoInMemoryCache = new Map } return e.prototype.getDeviceProfiles = function (e, t) { return this.http.get("/api/deviceProfiles" + e.toQuery(), Object(r.b)(t)) }, e.prototype.getDeviceProfile = function (e, t) { return this.http.get("/api/deviceProfile/" + e, Object(r.b)(t)) }, e.prototype.getLwm2mObjects = function (e, t, n, i) { var o = "/api/resource/lwm2m/?sortProperty=" + e.property + "&sortOrder=" + e.direction; return Object(s.o)(t) && t.length > 0 && (o += "&objectIds=" + t), Object(s.o)(n) && !Object(s.q)(n) && (o += "&searchText=" + n), this.http.get(o, Object(r.b)(i)) }, e.prototype.getLwm2mBootstrapSecurityInfo = function (e, t) { var n = this, i = this.lwm2mBootstrapSecurityInfoInMemoryCache.get(e); return i ? Object(o.a)(i) : this.http.get("/api/lwm2m/deviceProfile/bootstrap/" + e, Object(r.b)(t)).pipe(Object(u.a)(function (t) { return n.lwm2mBootstrapSecurityInfoInMemoryCache.set(e, t) })) }, e.prototype.getLwm2mBootstrapSecurityInfoBySecurityType = function (e, t, n) { return void 0 === t && (t = l.H.NO_SEC), this.getLwm2mBootstrapSecurityInfo(e, n).pipe(Object(d.a)(function (e) { var n = Object(s.e)(e); switch (t) { case l.H.PSK: n.port = n.securityPort, n.host = n.securityHost, n.serverPublicKey = ""; break; case l.H.RPK: case l.H.X509: n.port = n.securityPort, n.host = n.securityHost; break; case l.H.NO_SEC: n.serverPublicKey = "" }return n })) }, e.prototype.getLwm2mObjectsPage = function (e, t) { return this.http.get("/api/resource/lwm2m/page" + e.toQuery(), Object(r.b)(t)) }, e.prototype.saveDeviceProfileAndConfirmOtaChange = function (e, t, n) { var i = this; return this.otaPackageService.confirmDialogUpdatePackage(t, e).pipe(Object(p.b)(function (e) { return e ? i.saveDeviceProfile(t, n) : Object(a.a)("Canceled saving device profiles") })) }, e.prototype.saveDeviceProfile = function (e, t) { return this.http.post("/api/deviceProfile", e, Object(r.b)(t)) }, e.prototype.deleteDeviceProfile = function (e, t) { return this.http.delete("/api/deviceProfile/" + e, Object(r.b)(t)) }, e.prototype.setDefaultDeviceProfile = function (e, t) { return this.http.post("/api/deviceProfile/" + e + "/default", Object(r.b)(t)) }, e.prototype.getDefaultDeviceProfileInfo = function (e) { return this.http.get("/api/deviceProfileInfo/default", Object(r.b)(e)) }, e.prototype.getDeviceProfileInfo = function (e, t) { return this.http.get("/api/deviceProfileInfo/" + e, Object(r.b)(t)) }, e.prototype.getDeviceProfileInfos = function (e, t, n) { var i = "/api/deviceProfileInfos" + e.toQuery(); return Object(s.o)(t) && (i += "&transportType=" + t), this.http.get(i, Object(r.b)(n)) }, e.prototype.getDeviceProfileDevicesAttributesKeys = function (e, t) { var n = "/api/deviceProfile/devices/keys/attributes"; return Object(s.o)(e) && (n += "?deviceProfileId=" + e), this.http.get(n, Object(r.b)(t)) }, e.prototype.getDeviceProfileDevicesTimeseriesKeys = function (e, t) { var n = "/api/deviceProfile/devices/keys/timeseries"; return Object(s.o)(e) && (n += "?deviceProfileId=" + e), this.http.get(n, Object(r.b)(t)) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275inject"](m.HttpClient), i["\u0275\u0275inject"](c.a)) }, e.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, "gGt+": function (e, t, n) { "use strict"; n.d(t, "x", function () { return o }), n.d(t, "r", function () { return a }), n.d(t, "A", function () { return s }), n.d(t, "w", function () { return l }), n.d(t, "a", function () { return c }), n.d(t, "B", function () { return u }), n.d(t, "u", function () { return d }), n.d(t, "i", function () { return p }), n.d(t, "o", function () { return m }), n.d(t, "n", function () { return f }), n.d(t, "j", function () { return h }), n.d(t, "k", function () { return g }), n.d(t, "l", function () { return y }), n.d(t, "f", function () { return b }), n.d(t, "v", function () { return v }), n.d(t, "t", function () { return E }), n.d(t, "s", function () { return T }), n.d(t, "h", function () { return S }), n.d(t, "q", function () { return C }), n.d(t, "p", function () { return O }), n.d(t, "g", function () { return w }), n.d(t, "m", function () { return I }), n.d(t, "d", function () { return i }), n.d(t, "e", function () { return M }), n.d(t, "b", function () { return x }), n.d(t, "c", function () { return A }), n.d(t, "H", function () { return j }), n.d(t, "I", function () { return N }), n.d(t, "y", function () { return R }), n.d(t, "z", function () { return P }), n.d(t, "D", function () { return k }), n.d(t, "C", function () { return _ }), n.d(t, "E", function () { return F }), n.d(t, "G", function () { return L }), n.d(t, "F", function () { return D }), n.d(t, "J", function () { return V }); var i, r = n("3Pt+"), o = 50, a = "instances", s = "resources", l = "observe", c = "attribute", u = "telemetry", d = "keyName", p = 123, m = 5685, f = 5687, h = 300, g = 1, y = !0, b = "UQ", v = /^[-+]?[0-9A-Fa-f]+\.?[0-9A-Fa-f]*?$/, E = 0, T = 65535, S = "coap://localhost:" + m, C = "coap://localhost:" + m, O = 1e4, w = 81e3, I = 1e4; !function (e) { e.U = "U", e.UQ = "UQ", e.T = "T", e.TQ = "TQ", e.S = "S", e.SQ = "SQ", e.US = "US", e.TS = "TS", e.UQS = "UQS", e.TQS = "TQS" }(i || (i = {})); var x, M = new Map([[i.U, "device-profile.lwm2m.binding-type.u"], [i.UQ, "device-profile.lwm2m.binding-type.uq"], [i.US, "device-profile.lwm2m.binding-type.us"], [i.UQS, "device-profile.lwm2m.binding-type.uqs"], [i.T, "device-profile.lwm2m.binding-type.t"], [i.TQ, "device-profile.lwm2m.binding-type.tq"], [i.TS, "device-profile.lwm2m.binding-type.ts"], [i.TQS, "device-profile.lwm2m.binding-type.tqs"], [i.S, "device-profile.lwm2m.binding-type.s"], [i.SQ, "device-profile.lwm2m.binding-type.sq"]]); !function (e) { e.pmin = "pmin", e.pmax = "pmax", e.gt = "gt", e.lt = "lt", e.st = "st" }(x || (x = {})); var j, A = new Map([[x.pmin, "device-profile.lwm2m.attributes-name.min-period"], [x.pmax, "device-profile.lwm2m.attributes-name.max-period"], [x.gt, "device-profile.lwm2m.attributes-name.greater-than"], [x.lt, "device-profile.lwm2m.attributes-name.less-than"], [x.st, "device-profile.lwm2m.attributes-name.step"]]); !function (e) { e.PSK = "PSK", e.RPK = "RPK", e.X509 = "X509", e.NO_SEC = "NO_SEC" }(j || (j = {})); var R, N = new Map([[j.PSK, "Pre-Shared Key"], [j.RPK, "Raw Public Key"], [j.X509, "X.509 Certificate"], [j.NO_SEC, "No Security"]]); !function (e) { e.PSM = "PSM", e.DRX = "DRX", e.E_DRX = "E_DRX" }(R || (R = {})); var P = new Map([[R.PSM, "device-profile.power-saving-mode-type.psm"], [R.DRX, "device-profile.power-saving-mode-type.drx"], [R.E_DRX, "device-profile.power-saving-mode-type.edrx"]]); function k() { return { shortId: p, lifetime: h, defaultMinPeriod: g, notifIfDisabled: y, binding: b } } function _() { return { bootstrapServerAccountTimeout: 0, clientHoldOffTime: 1, host: "localhost", port: f, securityMode: j.NO_SEC, serverId: 111, serverPublicKey: "" } } function F() { var e = _(); return e.port = m, e.serverId = p, e } function L() { return { observe: [], attribute: [], telemetry: [], keyName: {}, attributeLwm2m: {} } } function D() { return { clientOnlyObserveAfterConnect: 1, fwUpdateStrategy: 1, swUpdateStrategy: 1, powerMode: R.DRX, compositeOperationsSupport: !1 } } function V(e) { var t = [r.Validators.required]; switch (e) { case x.pmin: case x.pmax: t.push(r.Validators.min(0), r.Validators.pattern("[0-9]*")) }return t } }, gM18: function (e, t, n) { "use strict"; n.d(t, "a", function () { return a }); var i = n("fXoL"), r = n("XNiG"), o = n("pLZG"), a = function () { function e() { this.broadcastSubject = new r.b } return e.prototype.broadcast = function (e) { for (var t = [], n = 1; n < arguments.length; n++)t[n - 1] = arguments[n]; var i = { name: e, args: t }; this.broadcastSubject.next(i) }, e.prototype.on = function (e, t) { return this.broadcastSubject.asObservable().pipe(Object(o.a)(function (t) { return t.name === e })).subscribe(function (e) { var n = { name: e.name }; t(n, e.args) }) }, e.\u0275fac = function (t) { return new (t || e) }, e.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, gaqQ: function (e, t, n) { "use strict"; n.d(t, "a", function () { return i }); var i = function () { function e(e) { this.editorCompletions = e, this.identifierRegexps = [/[a-zA-Z_0-9\$\-\u00A2-\u2000\u2070-\uFFFF.]/] } return e.prototype.getCompletions = function (e, t, n, i, r) { var o = this.prepareCompletions(i); o && r(null, o) }, e.prototype.resolvePath = function (e) { if (!e || !e.length) return []; var t = e.split("."); t.length ? t.pop() : t = []; for (var n = this.editorCompletions, i = 0, r = t; i < r.length; i++) { var o = r[i]; if (!n[o]) return null; if (!(n = n[o].children)) return null } return t }, e.prototype.prepareCompletions = function (e) { var t = this.resolvePath(e); return null !== t ? this.toAceCompletionsList(this.editorCompletions, t) : [] }, e.prototype.toAceCompletionsList = function (e, t) { var n = [], i = e, r = ""; if (t.length) { r = t.join(".") + "."; for (var o = 0, a = t; o < a.length; o++) { i = i[a[o]].children } } for (var s = 0, l = Object.keys(i); s < l.length; s++) { var c = l[s]; n.push(this.toAceCompletion(c, i[c], r)) } return n }, e.prototype.toAceCompletion = function (e, t, n) { return { isTbEditorAceCompletion: !0, snippet: n + e, name: e, caption: n + e, score: 1e5, value: n + e, meta: t.meta, type: t.type, description: t.description, args: t.args, return: t.return } }, e.prototype.getDocTooltip = function (e) { if (e && e.isTbEditorAceCompletion) return { docHTML: this.createDocHTML(e) } }, e.prototype.createDocHTML = function (e) { var t = "<b>" + e.name + "</b>"; if ("function" === e.meta) { if (t += "(", e.args) { for (var n = [], i = 0, r = e.args; i < r.length; i++) { var o = "" + (d = r[i]).name; d.optional && (o += "?"), d.type && (o += ": " + d.type), n.push(o) } t += n.join(", ") } t += "): ", e.return ? t += e.return.type : t += "void" } else t += ": " + (e.type ? e.type : e.meta); var a = '<div class="tb-ace-doc-tooltip"><code class="title">' + t + "</code>"; if (e.description && (a += "<hr><div>" + e.description + "</div>"), e.args || e.return) { var s = '<div class="tb-function-info">'; if (e.args) { s += '<div class="tb-api-title">Parameters</div>'; for (var l = '<table class="tb-api-table"><tbody>', c = (n = [], 0), u = e.args; c < u.length; c++) { var d; o = '<tr><td class="arg-name"><code>' + (d = u[c]).name; d.optional && (o += " (optional)"), o += "</code></td><td>", d.type && (o += "<code>" + d.type + "</code>"), o += '</td><td class="arg-description">', d.description && (o += "" + d.description), o += "</td></tr>", n.push(o) } s += l += n.join("") + "</tbody></table>" } if (e.return) { var p = '<div class="tb-api-title">Returns</div>'; p += '<div class="tb-function-return"><code>' + e.return.type + "</code>", e.return.description && (p += ": " + e.return.description), s += p += "</div>" } a += s += "</div>" } return a += "</div>" }, e }() }, "gl+N": function (e, t, n) { "use strict"; n.d(t, "a", function () { return g }); var i = n("fXoL"), r = n("3Pt+"), o = n("8LU1"), a = n("XiUz"), s = n("kmnG"), l = n("ofXK"), c = n("znSr"), u = n("xoCY"), d = n("qFsG"), p = n("sYmb"); function m(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-placeholder"), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275nextContext"](); i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2, 1, n.dateText)) } } function f(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-placeholder"), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275nextContext"](); i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2, 1, n.timeText)) } } var h = function (e) { return { "no-label": e } }, g = function () { function e() { this.showLabel = !0, this.propagateChange = function (e) { } } return Object.defineProperty(e.prototype, "required", { get: function () { return this.requiredValue }, set: function (e) { this.requiredValue = Object(o.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "minDate", { set: function (e) { this.minDateValue = e ? new Date(e) : null }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "maxDate", { set: function (e) { this.maxDateValue = e ? new Date(e) : null }, enumerable: !1, configurable: !0 }), e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.setDisabledState = function (e) { this.disabled = e }, e.prototype.ngOnInit = function () { }, e.prototype.writeValue = function (e) { this.modelValue = e, this.modelValue ? this.date = new Date(this.modelValue) : this.date = null }, e.prototype.updateView = function (e) { this.modelValue !== e && (this.modelValue = e, this.propagateChange(this.modelValue)) }, e.prototype.onDateChange = function () { var e = this.date ? this.date.getTime() : null; this.updateView(e) }, e.\u0275fac = function (t) { return new (t || e) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-datetime"]], inputs: { required: "required", disabled: "disabled", dateText: "dateText", timeText: "timeText", showLabel: "showLabel", minDate: "minDate", maxDate: "maxDate" }, features: [i["\u0275\u0275ProvidersFeature"]([{ provide: r.NG_VALUE_ACCESSOR, useExisting: Object(i.forwardRef)(function () { return e }), multi: !0 }])], decls: 13, vars: 26, consts: [["fxLayout", "row", "fxLayoutAlign", "start start", "fxLayoutGap", "16px"], [3, "floatLabel", "hideRequiredMarker", "ngClass"], [4, "ngIf"], ["matPrefix", "", 3, "for"], ["type", "date", "openOnFocus", "true"], ["datePicker", ""], ["matInput", "", 3, "min", "max", "disabled", "required", "ngModel", "matDatetimepicker", "ngModelChange"], ["type", "time", "openOnFocus", "true"], ["timePicker", ""]], template: function (e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "section", 0), i["\u0275\u0275elementStart"](1, "mat-form-field", 1), i["\u0275\u0275template"](2, m, 3, 3, "mat-placeholder", 2), i["\u0275\u0275element"](3, "mat-datetimepicker-toggle", 3), i["\u0275\u0275element"](4, "mat-datetimepicker", 4, 5), i["\u0275\u0275elementStart"](6, "input", 6), i["\u0275\u0275listener"]("ngModelChange", function (e) { return t.date = e })("ngModelChange", function () { return t.onDateChange() }), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](7, "mat-form-field", 1), i["\u0275\u0275template"](8, f, 3, 3, "mat-placeholder", 2), i["\u0275\u0275element"](9, "mat-datetimepicker-toggle", 3), i["\u0275\u0275element"](10, "mat-datetimepicker", 7, 8), i["\u0275\u0275elementStart"](12, "input", 6), i["\u0275\u0275listener"]("ngModelChange", function (e) { return t.date = e })("ngModelChange", function () { return t.onDateChange() }), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275reference"](5), r = i["\u0275\u0275reference"](11); i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("floatLabel", t.showLabel ? "auto" : "always")("hideRequiredMarker", !t.showLabel)("ngClass", i["\u0275\u0275pureFunction1"](22, h, !t.showLabel)), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngIf", t.showLabel), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("for", n), i["\u0275\u0275advance"](3), i["\u0275\u0275property"]("min", t.minDateValue)("max", t.maxDateValue)("disabled", t.disabled)("required", t.required)("ngModel", t.date)("matDatetimepicker", n), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("floatLabel", t.showLabel ? "auto" : "always")("hideRequiredMarker", !t.showLabel)("ngClass", i["\u0275\u0275pureFunction1"](24, h, !t.showLabel)), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngIf", t.showLabel), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("for", r), i["\u0275\u0275advance"](3), i["\u0275\u0275property"]("min", t.minDateValue)("max", t.maxDateValue)("disabled", t.disabled)("required", t.required)("ngModel", t.date)("matDatetimepicker", r) } }, directives: [a.f, a.e, a.g, s.MatFormField, l.NgClass, c.b, l.NgIf, u.d, s.MatPrefix, u.a, d.MatInput, r.DefaultValueAccessor, u.b, r.RequiredValidator, r.NgControlStatus, r.NgModel, s.MatPlaceholder], pipes: [p.TranslatePipe], styles: ["[_nghost-%COMP%]     .mat-form-field-wrapper{padding-bottom:8px}[_nghost-%COMP%]     .mat-form-field-underline{bottom:8px}[_nghost-%COMP%]     .mat-form-field-infix{width:auto;min-width:100px}[_nghost-%COMP%]     mat-form-field.no-label .mat-form-field-infix{border-top-width:.2em}"] }), e }(); 0, void 0 }, gmuX: function (e, t, n) { "use strict"; n.d(t, "a", function () { return u }); var i = n("mrSG"), r = n("fXoL"), o = n("RxGS"), a = n("tyNb"), s = n("pLZG"), l = n("l7P3"), c = n("0IaG"), u = function (e) { function t(t, n, i) { var r = e.call(this, t) || this; return r.store = t, r.router = n, r.dialogRef = i, r.routerSubscription = r.router.events.pipe(Object(s.a)(function (e) { return e instanceof a.NavigationStart }), Object(s.a)(function () { return !!r.dialogRef })).subscribe(function () { r.dialogRef.close() }), r } return Object(i.d)(t, e), t.prototype.ngOnDestroy = function () { e.prototype.ngOnDestroy.call(this), this.routerSubscription && this.routerSubscription.unsubscribe() }, t.\u0275fac = function (e) { return new (e || t)(r["\u0275\u0275directiveInject"](l.Store), r["\u0275\u0275directiveInject"](a.Router), r["\u0275\u0275directiveInject"](c.MatDialogRef)) }, t.\u0275dir = r["\u0275\u0275defineDirective"]({ type: t, features: [r["\u0275\u0275InheritDefinitionFeature"]] }), t }(o.a); 0, void 0 }, he9t: function (e, t, n) { "use strict"; n.d(t, "a", function () { return s }), n.d(t, "g", function () { return l }), n.d(t, "e", function () { return u }), n.d(t, "h", function () { return i }), n.d(t, "c", function () { return r }), n.d(t, "d", function () { return p }), n.d(t, "m", function () { return m }), n.d(t, "b", function () { return d }), n.d(t, "i", function () { return f }), n.d(t, "j", function () { return h }), n.d(t, "k", function () { return g }), n.d(t, "f", function () { return y }), n.d(t, "l", function () { return v }); var i, r, o = n("fXoL"), a = n("AytR"), s = { serverErrorCode: { general: 2, authentication: 10, jwtTokenExpired: 11, tenantTrialExpired: 12, credentialsExpired: 15, permissionDenied: 20, invalidArguments: 30, badRequestParams: 31, itemNotFound: 32, tooManyRequests: 33, tooManyUpdates: 34 }, entryPoints: { login: "/api/auth/login", tokenRefresh: "/api/auth/token", nonTokenBased: "/api/noauth" } }, l = { xs: "screen and (max-width: 599px)", sm: "screen and (min-width: 600px) and (max-width: 959px)", md: "screen and (min-width: 960px) and (max-width: 1279px)", lg: "screen and (min-width: 1280px) and (max-width: 1919px)", xl: "screen and (min-width: 1920px) and (max-width: 5000px)", "lt-sm": "screen and (max-width: 599px)", "lt-md": "screen and (max-width: 959px)", "lt-lg": "screen and (max-width: 1279px)", "lt-xl": "screen and (max-width: 1919px)", "gt-xs": "screen and (min-width: 600px)", "gt-sm": "screen and (min-width: 960px)", "gt-md": "screen and (min-width: 1280px)", "gt-lg": "screen and (min-width: 1920px)", "gt-xl": "screen and (min-width: 5001px)" }, c = "https://thingsboard.io", u = { linksMap: { outgoingMailSettings: c + "/docs/user-guide/ui/mail-settings", smsProviderSettings: c + "/docs/user-guide/ui/sms-provider-settings", securitySettings: c + "/docs/user-guide/ui/security-settings", oauth2Settings: c + "/docs/user-guide/oauth-2-support/", ruleEngine: c + "/docs/user-guide/rule-engine-2-0/overview/", ruleNodeCheckRelation: c + "/docs/user-guide/rule-engine-2-0/filter-nodes/#check-relation-filter-node", ruleNodeCheckExistenceFields: c + "/docs/user-guide/rule-engine-2-0/filter-nodes/#check-existence-fields-node", ruleNodeGpsGeofencingFilter: c + "/docs/user-guide/rule-engine-2-0/filter-nodes/#gps-geofencing-filter-node", ruleNodeJsFilter: c + "/docs/user-guide/rule-engine-2-0/filter-nodes/#script-filter-node", ruleNodeJsSwitch: c + "/docs/user-guide/rule-engine-2-0/filter-nodes/#switch-node", ruleNodeMessageTypeFilter: c + "/docs/user-guide/rule-engine-2-0/filter-nodes/#message-type-filter-node", ruleNodeMessageTypeSwitch: c + "/docs/user-guide/rule-engine-2-0/filter-nodes/#message-type-switch-node", ruleNodeOriginatorTypeFilter: c + "/docs/user-guide/rule-engine-2-0/filter-nodes/#originator-type-filter-node", ruleNodeOriginatorTypeSwitch: c + "/docs/user-guide/rule-engine-2-0/filter-nodes/#originator-type-switch-node", ruleNodeOriginatorAttributes: c + "/docs/user-guide/rule-engine-2-0/enrichment-nodes/#originator-attributes", ruleNodeOriginatorFields: c + "/docs/user-guide/rule-engine-2-0/enrichment-nodes/#originator-fields", ruleNodeOriginatorTelemetry: c + "/docs/user-guide/rule-engine-2-0/enrichment-nodes/#originator-telemetry", ruleNodeCustomerAttributes: c + "/docs/user-guide/rule-engine-2-0/enrichment-nodes/#customer-attributes", ruleNodeCustomerDetails: c + "/docs/user-guide/rule-engine-2-0/enrichment-nodes/#customer-details", ruleNodeDeviceAttributes: c + "/docs/user-guide/rule-engine-2-0/enrichment-nodes/#device-attributes", ruleNodeRelatedAttributes: c + "/docs/user-guide/rule-engine-2-0/enrichment-nodes/#related-attributes", ruleNodeTenantAttributes: c + "/docs/user-guide/rule-engine-2-0/enrichment-nodes/#tenant-attributes", ruleNodeTenantDetails: c + "/docs/user-guide/rule-engine-2-0/enrichment-nodes/#tenant-details", ruleNodeChangeOriginator: c + "/docs/user-guide/rule-engine-2-0/transformation-nodes/#change-originator", ruleNodeTransformMsg: c + "/docs/user-guide/rule-engine-2-0/transformation-nodes/#script-transformation-node", ruleNodeMsgToEmail: c + "/docs/user-guide/rule-engine-2-0/transformation-nodes/#to-email-node", ruleNodeAssignToCustomer: c + "/docs/user-guide/rule-engine-2-0/transformation-nodes/#assign-to-customer-node", ruleNodeUnassignFromCustomer: c + "/docs/user-guide/rule-engine-2-0/transformation-nodes/#unassign-from-customer-node", ruleNodeClearAlarm: c + "/docs/user-guide/rule-engine-2-0/action-nodes/#clear-alarm-node", ruleNodeCreateAlarm: c + "/docs/user-guide/rule-engine-2-0/action-nodes/#create-alarm-node", ruleNodeCreateRelation: c + "/docs/user-guide/rule-engine-2-0/action-nodes/#create-relation-node", ruleNodeDeleteRelation: c + "/docs/user-guide/rule-engine-2-0/action-nodes/#delete-relation-node", ruleNodeMsgDelay: c + "/docs/user-guide/rule-engine-2-0/action-nodes/#delay-node", ruleNodeMsgGenerator: c + "/docs/user-guide/rule-engine-2-0/action-nodes/#generator-node", ruleNodeGpsGeofencingEvents: c + "/docs/user-guide/rule-engine-2-0/action-nodes/#gps-geofencing-events-node", ruleNodeLog: c + "/docs/user-guide/rule-engine-2-0/action-nodes/#log-node", ruleNodeRpcCallReply: c + "/docs/user-guide/rule-engine-2-0/action-nodes/#rpc-call-reply-node", ruleNodeRpcCallRequest: c + "/docs/user-guide/rule-engine-2-0/action-nodes/#rpc-call-request-node", ruleNodeSaveAttributes: c + "/docs/user-guide/rule-engine-2-0/action-nodes/#save-attributes-node", ruleNodeSaveTimeseries: c + "/docs/user-guide/rule-engine-2-0/action-nodes/#save-timeseries-node", ruleNodeSaveToCustomTable: c + "/docs/user-guide/rule-engine-2-0/action-nodes/#save-to-custom-table", ruleNodeRuleChain: c + "/docs/user-guide/ui/rule-chains/", ruleNodeAwsSns: c + "/docs/user-guide/rule-engine-2-0/external-nodes/#aws-sns-node", ruleNodeAwsSqs: c + "/docs/user-guide/rule-engine-2-0/external-nodes/#aws-sqs-node", ruleNodeKafka: c + "/docs/user-guide/rule-engine-2-0/external-nodes/#kafka-node", ruleNodeMqtt: c + "/docs/user-guide/rule-engine-2-0/external-nodes/#mqtt-node", ruleNodeAzureIotHub: c + "/docs/user-guide/rule-engine-2-0/external-nodes/#azure-iot-hub-node", ruleNodeRabbitMq: c + "/docs/user-guide/rule-engine-2-0/external-nodes/#rabbitmq-node", ruleNodeRestApiCall: c + "/docs/user-guide/rule-engine-2-0/external-nodes/#rest-api-call-node", ruleNodeSendEmail: c + "/docs/user-guide/rule-engine-2-0/external-nodes/#send-email-node", ruleNodeSendSms: c + "/docs/user-guide/rule-engine-2-0/external-nodes/#send-sms-node", tenants: c + "/docs/user-guide/ui/tenants", tenantProfiles: c + "/docs/user-guide/ui/tenant-profiles", customers: c + "/docs/user-guide/ui/customers", users: c + "/docs/user-guide/ui/users", devices: c + "/docs/user-guide/ui/devices", deviceProfiles: c + "/docs/user-guide/ui/device-profiles", edges: c + "/docs/user-guide/ui/edges", assets: c + "/docs/user-guide/ui/assets", entityViews: c + "/docs/user-guide/ui/entity-views", entitiesImport: c + "/docs/user-guide/bulk-provisioning", rulechains: c + "/docs/user-guide/ui/rule-chains", resources: c + "/docs/user-guide/ui/resources", dashboards: c + "/docs/user-guide/ui/dashboards", otaUpdates: c + "/docs/user-guide/ui/ota-updates", widgetsBundles: c + "/docs/user-guide/ui/widget-library#bundles", widgetsConfig: c + "/docs/user-guide/ui/dashboards#widget-configuration", widgetsConfigTimeseries: c + "/docs/user-guide/ui/dashboards#timeseries", widgetsConfigLatest: c + "/docs/user-guide/ui/dashboards#latest", widgetsConfigRpc: c + "/docs/user-guide/ui/dashboards#rpc", widgetsConfigAlarm: c + "/docs/user-guide/ui/dashboards#alarm", widgetsConfigStatic: c + "/docs/user-guide/ui/dashboards#static", ruleNodePushToCloud: c + "/docs/user-guide/rule-engine-2-0/action-nodes/#push-to-cloud", ruleNodePushToEdge: c + "/docs/user-guide/rule-engine-2-0/action-nodes/#push-to-edge" } }; !function (e) { e.STRING = "STRING", e.INTEGER = "INTEGER", e.DOUBLE = "DOUBLE", e.BOOLEAN = "BOOLEAN", e.JSON = "JSON" }(i || (i = {})), function (e) { e.STRING = "STRING", e.LONG = "LONG", e.BOOLEAN = "BOOLEAN", e.DOUBLE = "DOUBLE", e.JSON = "JSON" }(r || (r = {})); var d, p = new Map([[r.STRING, "value.string"], [r.LONG, "value.integer"], [r.BOOLEAN, "value.boolean"], [r.DOUBLE, "value.double"], [r.JSON, "value.json"]]), m = new Map([[i.STRING, { name: "value.string", icon: "mdi:format-text" }], [i.INTEGER, { name: "value.integer", icon: "mdi:numeric" }], [i.DOUBLE, { name: "value.double", icon: "mdi:numeric" }], [i.BOOLEAN, { name: "value.boolean", icon: "mdi:checkbox-marked-outline" }], [i.JSON, { name: "value.json", icon: "mdi:json" }]]); !function (e) { e.JSON = "JSON", e.TEXT = "TEXT", e.BINARY = "BINARY" }(d || (d = {})); var f = new Map([[d.JSON, { name: "content-type.json", code: "json" }], [d.TEXT, { name: "content-type.text", code: "text" }], [d.BINARY, { name: "content-type.binary", code: "text" }]]), h = "custom.", g = "i18n", y = new o.InjectionToken("ModulesMap"), b = a.a.integration_service, v = { product: b + "/api/product", groupProduct: b + "/api/group-product", stage: b + "/api/stage", error: b + "/api/error" } }, hwpn: function (e, t, n) { "use strict"; n.d(t, "a", function () { return g }); var i = n("fXoL"), r = n("kIhZ"), o = n("3Pt+"), a = n("kmnG"), s = n("sYmb"), l = n("d3UM"), c = n("ofXK"), u = n("XiUz"), d = n("qFsG"), p = n("FKr1"); function m(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-option", 14), i["\u0275\u0275text"](1), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit; i["\u0275\u0275property"]("value", n), i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"](" ", n, " ") } } function f(e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "mat-error"), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"](" ", i["\u0275\u0275pipeBind1"](2, 1, "contact.postal-code-invalid"), " ")) } function h(e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "mat-error"), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"](" ", i["\u0275\u0275pipeBind1"](2, 1, "user.invalid-email-format"), " ")) } var g = function () { function e() { this.countries = r.a } return e.\u0275fac = function (t) { return new (t || e) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-contact"]], inputs: { parentForm: "parentForm", isEdit: "isEdit" }, decls: 37, vars: 4, consts: [[3, "formGroup"], [1, "mat-block"], ["translate", ""], ["formControlName", "country"], [3, "value", 4, "ngFor", "ngForOf"], ["fxLayout.gt-sm", "row", "fxLayoutGap.gt-sm", "10px"], ["matInput", "", "formControlName", "city"], ["matInput", "", "formControlName", "state"], ["matInput", "", "formControlName", "zip"], [4, "ngIf"], ["matInput", "", "formControlName", "address"], ["matInput", "", "formControlName", "address2"], ["matInput", "", "formControlName", "phone"], ["matInput", "", "formControlName", "email"], [3, "value"]], template: function (e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "section", 0), i["\u0275\u0275elementStart"](1, "mat-form-field", 1), i["\u0275\u0275elementStart"](2, "mat-label", 2), i["\u0275\u0275text"](3, "contact.country"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](4, "mat-select", 3), i["\u0275\u0275template"](5, m, 2, 2, "mat-option", 4), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](6, "div", 5), i["\u0275\u0275elementStart"](7, "mat-form-field", 1), i["\u0275\u0275elementStart"](8, "mat-label", 2), i["\u0275\u0275text"](9, "contact.city"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275element"](10, "input", 6), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](11, "mat-form-field", 1), i["\u0275\u0275elementStart"](12, "mat-label", 2), i["\u0275\u0275text"](13, "contact.state"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275element"](14, "input", 7), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](15, "mat-form-field", 1), i["\u0275\u0275elementStart"](16, "mat-label", 2), i["\u0275\u0275text"](17, "contact.postal-code"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275element"](18, "input", 8), i["\u0275\u0275template"](19, f, 3, 3, "mat-error", 9), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](20, "mat-form-field", 1), i["\u0275\u0275elementStart"](21, "mat-label", 2), i["\u0275\u0275text"](22, "contact.address"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275element"](23, "input", 10), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](24, "mat-form-field", 1), i["\u0275\u0275elementStart"](25, "mat-label", 2), i["\u0275\u0275text"](26, "contact.address2"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275element"](27, "input", 11), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](28, "mat-form-field", 1), i["\u0275\u0275elementStart"](29, "mat-label", 2), i["\u0275\u0275text"](30, "contact.phone"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275element"](31, "input", 12), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](32, "mat-form-field", 1), i["\u0275\u0275elementStart"](33, "mat-label", 2), i["\u0275\u0275text"](34, "contact.email"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275element"](35, "input", 13), i["\u0275\u0275template"](36, h, 3, 3, "mat-error", 9), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275property"]("formGroup", t.parentForm), i["\u0275\u0275advance"](5), i["\u0275\u0275property"]("ngForOf", t.countries), i["\u0275\u0275advance"](14), i["\u0275\u0275property"]("ngIf", t.parentForm.get("zip").hasError("pattern")), i["\u0275\u0275advance"](17), i["\u0275\u0275property"]("ngIf", t.parentForm.get("email").hasError("email"))) }, directives: [o.NgControlStatusGroup, o.FormGroupDirective, a.MatFormField, a.MatLabel, s.TranslateDirective, l.MatSelect, o.NgControlStatus, o.FormControlName, c.NgForOf, u.f, u.g, d.MatInput, o.DefaultValueAccessor, c.NgIf, p.MatOption, a.MatError], pipes: [s.TranslatePipe], encapsulation: 2 }), e }(); 0, void 0 }, iQEk: function (e, t, n) { "use strict"; n.d(t, "a", function () { return i }); var i = function (e, t, n) { void 0 === e && (e = !1), void 0 === t && (t = !1), void 0 === n && (n = !1), this.ignoreLoading = e, this.ignoreErrors = t, this.resendRequest = n } }, ikDa: function (e, t, n) { "use strict"; n.d(t, "a", function () { return s }); var i = n("fXoL"), r = n("0IaG"), o = n("XiUz"), a = n("bTqV"), s = function () { function e(e) { this.dialogRef = e } return e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](r.MatDialogRef)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-todo-dialog"]], decls: 8, vars: 1, consts: [["mat-dialog-title", ""], ["mat-dialog-content", ""], ["mat-dialog-actions", "", "fxLayout", "row", "fxLayoutAlign", "end center"], ["mat-button", "", "color", "accent", "cdkFocusInitial", "", 3, "mat-dialog-close"]], template: function (e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "h2", 0), i["\u0275\u0275text"](1, "Coming soon!"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](2, "div", 1), i["\u0275\u0275elementStart"](3, "h1"), i["\u0275\u0275text"](4, "COMING SOON!"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](5, "div", 2), i["\u0275\u0275elementStart"](6, "button", 3), i["\u0275\u0275text"](7, "Ok"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275advance"](6), i["\u0275\u0275property"]("mat-dialog-close", !0)) }, directives: [r.MatDialogTitle, r.MatDialogContent, r.MatDialogActions, o.f, o.e, a.MatButton, r.MatDialogClose], styles: ["[_nghost-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]{padding:0 24px 24px}[_nghost-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:500px}"] }), e }(); 0, void 0 }, "j+T/": function (e, t, n) { "use strict"; n.d(t, "a", function () { return E }), n.d(t, "b", function () { return T }); var i = n("mrSG"), r = n("fXoL"), o = n("aX2P"), a = n("RxGS"), s = n("3Pt+"), l = n("k9IB"), c = n("rDax"), u = n("l7P3"), d = function () { return { standalone: !0 } }; function p(e, t) { if (1 & e) { var n = r["\u0275\u0275getCurrentView"](); r["\u0275\u0275elementStart"](0, "section", 27), r["\u0275\u0275elementStart"](1, "label", 28), r["\u0275\u0275text"](2, "timewindow.hide"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](3, "mat-checkbox", 29), r["\u0275\u0275listener"]("ngModelChange", function (e) { return r["\u0275\u0275restoreView"](n), r["\u0275\u0275nextContext"]().timewindow.hideInterval = e })("ngModelChange", function () { return r["\u0275\u0275restoreView"](n), r["\u0275\u0275nextContext"]().onHideIntervalChanged() }), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]() } if (2 & e) { var i = r["\u0275\u0275nextContext"](); r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("ngModelOptions", r["\u0275\u0275pureFunction0"](2, d))("ngModel", i.timewindow.hideInterval) } } function m(e, t) { if (1 & e) { var n = r["\u0275\u0275getCurrentView"](); r["\u0275\u0275elementStart"](0, "section", 27), r["\u0275\u0275elementStart"](1, "label", 28), r["\u0275\u0275text"](2, "timewindow.hide"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](3, "mat-checkbox", 29), r["\u0275\u0275listener"]("ngModelChange", function (e) { return r["\u0275\u0275restoreView"](n), r["\u0275\u0275nextContext"]().timewindow.hideInterval = e })("ngModelChange", function () { return r["\u0275\u0275restoreView"](n), r["\u0275\u0275nextContext"]().onHideIntervalChanged() }), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]() } if (2 & e) { var i = r["\u0275\u0275nextContext"](); r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("ngModelOptions", r["\u0275\u0275pureFunction0"](2, d))("ngModel", i.timewindow.hideInterval) } } function f(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "mat-option", 41), r["\u0275\u0275text"](1), r["\u0275\u0275pipe"](2, "translate"), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit, i = r["\u0275\u0275nextContext"](2); r["\u0275\u0275property"]("value", n), r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](2, 2, i.aggregationTypesTranslations.get(i.aggregationTypes[n])), " ") } } function h(e, t) { if (1 & e) { var n = r["\u0275\u0275getCurrentView"](); r["\u0275\u0275elementStart"](0, "div", 30), r["\u0275\u0275elementStart"](1, "section", 5), r["\u0275\u0275elementStart"](2, "section", 31), r["\u0275\u0275elementStart"](3, "label", 28), r["\u0275\u0275text"](4, "timewindow.hide"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](5, "mat-checkbox", 29), r["\u0275\u0275listener"]("ngModelChange", function (e) { return r["\u0275\u0275restoreView"](n), r["\u0275\u0275nextContext"]().timewindow.hideAggregation = e })("ngModelChange", function () { return r["\u0275\u0275restoreView"](n), r["\u0275\u0275nextContext"]().onHideAggregationChanged() }), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](6, "section", 32), r["\u0275\u0275elementStart"](7, "mat-form-field"), r["\u0275\u0275elementStart"](8, "mat-label", 12), r["\u0275\u0275text"](9, "aggregation.function"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](10, "mat-select", 33), r["\u0275\u0275template"](11, f, 3, 4, "mat-option", 34), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](12, "section", 35), r["\u0275\u0275elementStart"](13, "section", 31), r["\u0275\u0275elementStart"](14, "label", 28), r["\u0275\u0275text"](15, "timewindow.hide"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](16, "mat-checkbox", 29), r["\u0275\u0275listener"]("ngModelChange", function (e) { return r["\u0275\u0275restoreView"](n), r["\u0275\u0275nextContext"]().timewindow.hideAggInterval = e })("ngModelChange", function () { return r["\u0275\u0275restoreView"](n), r["\u0275\u0275nextContext"]().onHideAggIntervalChanged() }), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](17, "section", 7), r["\u0275\u0275elementStart"](18, "div", 36), r["\u0275\u0275elementStart"](19, "label", 12), r["\u0275\u0275text"](20, "aggregation.limit"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](21, "div", 37), r["\u0275\u0275element"](22, "mat-slider", 38), r["\u0275\u0275elementStart"](23, "mat-form-field", 39), r["\u0275\u0275element"](24, "input", 40), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]() } if (2 & e) { var i = r["\u0275\u0275nextContext"](); r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("fxShow", i.isEdit), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("ngModelOptions", r["\u0275\u0275pureFunction0"](16, d))("ngModel", i.timewindow.hideAggregation), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("fxShow", i.isEdit || !i.timewindow.hideAggregation), r["\u0275\u0275advance"](5), r["\u0275\u0275property"]("ngForOf", i.aggregations), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("fxShow", i.timewindowForm.get("aggregation.type").value === i.aggregationTypes.NONE), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("fxShow", i.isEdit), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("ngModelOptions", r["\u0275\u0275pureFunction0"](17, d))("ngModel", i.timewindow.hideAggInterval), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("fxShow", i.isEdit || !i.timewindow.hideAggInterval), r["\u0275\u0275advance"](5), r["\u0275\u0275propertyInterpolate"]("min", i.minDatapointsLimit()), r["\u0275\u0275propertyInterpolate"]("max", i.maxDatapointsLimit()), r["\u0275\u0275property"]("value", i.timewindowForm.get("aggregation.limit").value), r["\u0275\u0275advance"](2), r["\u0275\u0275propertyInterpolate"]("min", i.minDatapointsLimit()), r["\u0275\u0275propertyInterpolate"]("max", i.maxDatapointsLimit()), r["\u0275\u0275property"]("value", i.timewindowForm.get("aggregation.limit").value) } } function g(e, t) { if (1 & e) { var n = r["\u0275\u0275getCurrentView"](); r["\u0275\u0275elementStart"](0, "div", 42), r["\u0275\u0275elementStart"](1, "tb-timeinterval", 43), r["\u0275\u0275listener"]("hideFlagChange", function (e) { return r["\u0275\u0275restoreView"](n), r["\u0275\u0275nextContext"]().timewindow.hideAggInterval = e })("hideFlagChange", function () { return r["\u0275\u0275restoreView"](n), r["\u0275\u0275nextContext"]().onHideAggIntervalChanged() }), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]() } if (2 & e) { var i = r["\u0275\u0275nextContext"](); r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("isEdit", i.isEdit)("hideFlag", i.timewindow.hideAggInterval)("min", i.minRealtimeAggInterval())("max", i.maxRealtimeAggInterval()) } } function y(e, t) { if (1 & e) { var n = r["\u0275\u0275getCurrentView"](); r["\u0275\u0275elementStart"](0, "div", 44), r["\u0275\u0275elementStart"](1, "tb-timeinterval", 43), r["\u0275\u0275listener"]("hideFlagChange", function (e) { return r["\u0275\u0275restoreView"](n), r["\u0275\u0275nextContext"]().timewindow.hideAggInterval = e })("hideFlagChange", function () { return r["\u0275\u0275restoreView"](n), r["\u0275\u0275nextContext"]().onHideAggIntervalChanged() }), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]() } if (2 & e) { var i = r["\u0275\u0275nextContext"](); r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("isEdit", i.isEdit)("hideFlag", i.timewindow.hideAggInterval)("min", i.minHistoryAggInterval())("max", i.maxHistoryAggInterval()) } } function b(e, t) { if (1 & e) { var n = r["\u0275\u0275getCurrentView"](); r["\u0275\u0275elementStart"](0, "div", 45), r["\u0275\u0275elementStart"](1, "section", 31), r["\u0275\u0275elementStart"](2, "label", 28), r["\u0275\u0275text"](3, "timewindow.hide"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](4, "mat-checkbox", 29), r["\u0275\u0275listener"]("ngModelChange", function (e) { return r["\u0275\u0275restoreView"](n), r["\u0275\u0275nextContext"]().timewindow.hideTimezone = e })("ngModelChange", function () { return r["\u0275\u0275restoreView"](n), r["\u0275\u0275nextContext"]().onHideTimezoneChanged() }), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](5, "tb-timezone-select", 46), r["\u0275\u0275elementEnd"]() } if (2 & e) { var i = r["\u0275\u0275nextContext"](); r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("fxShow", i.isEdit), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("ngModelOptions", r["\u0275\u0275pureFunction0"](4, d))("ngModel", i.timewindow.hideTimezone), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("fxShow", i.isEdit || !i.timewindow.hideTimezone) } } var v = function (e) { return { "tb-headless": e } }, E = new r.InjectionToken("TimewindowPanelData"), T = function (e) { function t(t, n, i, r, a, s) { var l = e.call(this, i) || this; return l.data = t, l.overlayRef = n, l.store = i, l.fb = r, l.timeService = a, l.viewContainerRef = s, l.historyOnly = !1, l.aggregation = !1, l.timezone = !1, l.isEdit = !1, l.historyTypes = o.d, l.realtimeTypes = o.h, l.timewindowTypes = o.l, l.aggregationTypes = o.a, l.aggregations = Object.keys(o.a), l.aggregationTypesTranslations = o.o, l.historyOnly = t.historyOnly, l.timewindow = t.timewindow, l.aggregation = t.aggregation, l.timezone = t.timezone, l.isEdit = t.isEdit, l } return Object(i.d)(t, e), t.prototype.ngOnInit = function () { var e = this.timewindow.hideInterval || !1, t = this.timewindow.hideAggregation || !1, n = this.timewindow.hideAggInterval || !1, i = this.timewindow.hideTimezone || !1; this.timewindowForm = this.fb.group({ realtime: this.fb.group({ realtimeType: this.fb.control({ value: this.timewindow.realtime && void 0 !== this.timewindow.realtime.realtimeType ? this.timewindow.realtime.realtimeType : o.h.LAST_INTERVAL, disabled: e }), timewindowMs: [this.timewindow.realtime && void 0 !== this.timewindow.realtime.timewindowMs ? this.timewindow.realtime.timewindowMs : null], interval: [this.timewindow.realtime && void 0 !== this.timewindow.realtime.interval ? this.timewindow.realtime.interval : null], quickInterval: this.fb.control({ value: this.timewindow.realtime && void 0 !== this.timewindow.realtime.quickInterval ? this.timewindow.realtime.quickInterval : null, disabled: e }) }), history: this.fb.group({ historyType: this.fb.control({ value: this.timewindow.history && void 0 !== this.timewindow.history.historyType ? this.timewindow.history.historyType : o.d.LAST_INTERVAL, disabled: e }), timewindowMs: this.fb.control({ value: this.timewindow.history && void 0 !== this.timewindow.history.timewindowMs ? this.timewindow.history.timewindowMs : null, disabled: e }), interval: [this.timewindow.history && void 0 !== this.timewindow.history.interval ? this.timewindow.history.interval : null], fixedTimewindow: this.fb.control({ value: this.timewindow.history && void 0 !== this.timewindow.history.fixedTimewindow ? this.timewindow.history.fixedTimewindow : null, disabled: e }), quickInterval: this.fb.control({ value: this.timewindow.history && void 0 !== this.timewindow.history.quickInterval ? this.timewindow.history.quickInterval : null, disabled: e }) }), aggregation: this.fb.group({ type: this.fb.control({ value: this.timewindow.aggregation && void 0 !== this.timewindow.aggregation.type ? this.timewindow.aggregation.type : null, disabled: t }), limit: this.fb.control({ value: this.timewindow.aggregation && void 0 !== this.timewindow.aggregation.limit ? this.timewindow.aggregation.limit : null, disabled: n }, [s.Validators.min(this.minDatapointsLimit()), s.Validators.max(this.maxDatapointsLimit())]) }), timezone: this.fb.control({ value: "undefined" !== this.timewindow.timezone ? this.timewindow.timezone : null, disabled: i }) }) }, t.prototype.update = function () { var e = this.timewindowForm.getRawValue(); this.timewindow.realtime = { realtimeType: e.realtime.realtimeType, timewindowMs: e.realtime.timewindowMs, quickInterval: e.realtime.quickInterval, interval: e.realtime.interval }, this.timewindow.history = { historyType: e.history.historyType, timewindowMs: e.history.timewindowMs, interval: e.history.interval, fixedTimewindow: e.history.fixedTimewindow, quickInterval: e.history.quickInterval }, this.aggregation && (this.timewindow.aggregation = { type: e.aggregation.type, limit: e.aggregation.limit }), this.timezone && (this.timewindow.timezone = e.timezone), this.result = this.timewindow, this.overlayRef.dispose() }, t.prototype.cancel = function () { this.overlayRef.dispose() }, t.prototype.minDatapointsLimit = function () { return this.timeService.getMinDatapointsLimit() }, t.prototype.maxDatapointsLimit = function () { return this.timeService.getMaxDatapointsLimit() }, t.prototype.minRealtimeAggInterval = function () { return this.timeService.minIntervalLimit(this.currentRealtimeTimewindow()) }, t.prototype.maxRealtimeAggInterval = function () { return this.timeService.maxIntervalLimit(this.currentRealtimeTimewindow()) }, t.prototype.currentRealtimeTimewindow = function () { var e = this.timewindowForm.getRawValue(); switch (e.realtime.realtimeType) { case o.h.LAST_INTERVAL: return e.realtime.timewindowMs; case o.h.INTERVAL: return Object(o.L)(e.realtime.quickInterval); default: return o.b } }, t.prototype.minHistoryAggInterval = function () { return this.timeService.minIntervalLimit(this.currentHistoryTimewindow()) }, t.prototype.maxHistoryAggInterval = function () { return this.timeService.maxIntervalLimit(this.currentHistoryTimewindow()) }, t.prototype.currentHistoryTimewindow = function () { var e = this.timewindowForm.getRawValue(); return e.history.historyType === o.d.LAST_INTERVAL ? e.history.timewindowMs : e.history.historyType === o.d.INTERVAL ? Object(o.L)(e.history.quickInterval) : e.history.fixedTimewindow ? e.history.fixedTimewindow.endTimeMs - e.history.fixedTimewindow.startTimeMs : o.b }, t.prototype.onHideIntervalChanged = function () { this.timewindow.hideInterval ? (this.timewindowForm.get("history.historyType").disable({ emitEvent: !1 }), this.timewindowForm.get("history.timewindowMs").disable({ emitEvent: !1 }), this.timewindowForm.get("history.fixedTimewindow").disable({ emitEvent: !1 }), this.timewindowForm.get("history.quickInterval").disable({ emitEvent: !1 }), this.timewindowForm.get("realtime.realtimeType").disable({ emitEvent: !1 }), this.timewindowForm.get("realtime.timewindowMs").disable({ emitEvent: !1 }), this.timewindowForm.get("realtime.quickInterval").disable({ emitEvent: !1 })) : (this.timewindowForm.get("history.historyType").enable({ emitEvent: !1 }), this.timewindowForm.get("history.timewindowMs").enable({ emitEvent: !1 }), this.timewindowForm.get("history.fixedTimewindow").enable({ emitEvent: !1 }), this.timewindowForm.get("history.quickInterval").enable({ emitEvent: !1 }), this.timewindowForm.get("realtime.realtimeType").enable({ emitEvent: !1 }), this.timewindowForm.get("realtime.timewindowMs").enable({ emitEvent: !1 }), this.timewindowForm.get("realtime.quickInterval").enable({ emitEvent: !1 })), this.timewindowForm.markAsDirty() }, t.prototype.onHideAggregationChanged = function () { this.timewindow.hideAggregation ? this.timewindowForm.get("aggregation.type").disable({ emitEvent: !1 }) : this.timewindowForm.get("aggregation.type").enable({ emitEvent: !1 }), this.timewindowForm.markAsDirty() }, t.prototype.onHideAggIntervalChanged = function () { this.timewindow.hideAggInterval ? this.timewindowForm.get("aggregation.limit").disable({ emitEvent: !1 }) : this.timewindowForm.get("aggregation.limit").enable({ emitEvent: !1 }), this.timewindowForm.markAsDirty() }, t.prototype.onHideTimezoneChanged = function () { this.timewindow.hideTimezone ? this.timewindowForm.get("timezone").disable({ emitEvent: !1 }) : this.timewindowForm.get("timezone").enable({ emitEvent: !1 }), this.timewindowForm.markAsDirty() }, t.\u0275fac = function (e) { return new (e || t)(r["\u0275\u0275directiveInject"](E), r["\u0275\u0275directiveInject"](c.OverlayRef), r["\u0275\u0275directiveInject"](u.Store), r["\u0275\u0275directiveInject"](s.FormBuilder), r["\u0275\u0275directiveInject"](l.a), r["\u0275\u0275directiveInject"](r.ViewContainerRef)) }, t.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: t, selectors: [["tb-timewindow-panel"]], features: [r["\u0275\u0275InheritDefinitionFeature"]], decls: 57, vars: 49, consts: [[3, "formGroup", "ngSubmit"], [3, "disabled"], ["fxLayout", "column", 1, "mat-content"], ["dynamicHeight", "", 3, "ngClass", "selectedIndex", "selectedIndexChange"], [3, "label"], ["fxLayout", "row"], ["fxLayout", "column", "style", "padding-top: 8px; padding-left: 16px;", 4, "ngIf"], ["fxLayout", "column", "fxFlex", "", 3, "fxShow"], ["formGroupName", "realtime", 1, "mat-content", "mat-padding", 2, "padding-top", "8px"], ["formControlName", "realtimeType"], ["color", "accent", 3, "value"], ["fxLayout", "column"], ["translate", ""], ["formControlName", "timewindowMs", "predefinedName", "timewindow.last", 2, "padding-top", "8px", 3, "fxShow", "required"], ["formControlName", "quickInterval", "onlyCurrentInterval", "true", 2, "padding-top", "8px", 3, "fxShow", "required"], ["formGroupName", "history", 1, "mat-content", "mat-padding", 2, "padding-top", "8px"], ["formControlName", "historyType"], ["formControlName", "timewindowMs", "predefinedName", "timewindow.last", 1, "history-time-input", 2, "padding-top", "8px", 3, "fxShow", "required"], ["formControlName", "fixedTimewindow", 1, "history-time-input", 2, "padding-top", "8px", 3, "fxShow", "required"], ["formControlName", "quickInterval", 1, "history-time-input", 2, "padding-top", "8px", 3, "fxShow", "required"], ["formGroupName", "aggregation", "class", "mat-content mat-padding", "fxLayout", "column", 4, "ngIf"], ["formGroupName", "realtime", "class", "mat-content mat-padding", "fxLayout", "column", 4, "ngIf"], ["formGroupName", "history", "class", "mat-content mat-padding", "fxLayout", "column", 4, "ngIf"], ["class", "mat-content mat-padding", "fxLayout", "row", 4, "ngIf"], ["fxLayout", "row", "fxLayoutAlign", "end center", 1, "tb-panel-actions"], ["type", "button", "mat-button", "", 3, "disabled", "click"], ["type", "submit", "mat-raised-button", "", "color", "accent", 3, "disabled"], ["fxLayout", "column", 2, "padding-top", "8px", "padding-left", "16px"], ["translate", "", 1, "tb-small", "hide-label"], [3, "ngModelOptions", "ngModel", "ngModelChange"], ["formGroupName", "aggregation", "fxLayout", "column", 1, "mat-content", "mat-padding"], ["fxLayout", "column", 3, "fxShow"], ["fxFlex", "", "fxLayout", "column", 3, "fxShow"], ["formControlName", "type", 2, "min-width", "150px"], [3, "value", 4, "ngFor", "ngForOf"], ["fxLayout", "row", 3, "fxShow"], ["fxLayout", "row", "fxLayoutAlign", "start center", "fxLayout.xs", "column", "fxLayoutAlign.xs", "stretch", 1, "limit-slider-container"], ["fxLayout", "row", "fxLayoutAlign", "start center", "fxFlex", ""], ["fxFlex", "", "formControlName", "limit", "thumbLabel", "", 3, "value", "min", "max"], [1, "limit-slider-value"], ["matInput", "", "formControlName", "limit", "type", "number", "step", "1", 3, "value", "min", "max"], [3, "value"], ["formGroupName", "realtime", "fxLayout", "column", 1, "mat-content", "mat-padding"], ["formControlName", "interval", "predefinedName", "aggregation.group-interval", 3, "isEdit", "hideFlag", "min", "max", "hideFlagChange"], ["formGroupName", "history", "fxLayout", "column", 1, "mat-content", "mat-padding"], ["fxLayout", "row", 1, "mat-content", "mat-padding"], ["fxFlex", "", "localBrowserTimezonePlaceholderOnEmpty", "true", "formControlName", "timezone", 3, "fxShow"]], template: function (e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "form", 0), r["\u0275\u0275listener"]("ngSubmit", function () { return t.update() }), r["\u0275\u0275elementStart"](1, "fieldset", 1), r["\u0275\u0275pipe"](2, "async"), r["\u0275\u0275elementStart"](3, "div", 2), r["\u0275\u0275elementStart"](4, "mat-tab-group", 3), r["\u0275\u0275listener"]("selectedIndexChange", function () { return t.timewindowForm.markAsDirty() })("selectedIndexChange", function (e) { return t.timewindow.selectedTab = e }), r["\u0275\u0275elementStart"](5, "mat-tab", 4), r["\u0275\u0275pipe"](6, "translate"), r["\u0275\u0275elementStart"](7, "section", 5), r["\u0275\u0275template"](8, p, 4, 3, "section", 6), r["\u0275\u0275elementStart"](9, "section", 7), r["\u0275\u0275elementStart"](10, "div", 8), r["\u0275\u0275elementStart"](11, "mat-radio-group", 9), r["\u0275\u0275elementStart"](12, "mat-radio-button", 10), r["\u0275\u0275elementStart"](13, "section", 11), r["\u0275\u0275elementStart"](14, "span", 12), r["\u0275\u0275text"](15, "timewindow.last"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](16, "tb-timeinterval", 13), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](17, "mat-radio-button", 10), r["\u0275\u0275elementStart"](18, "section", 11), r["\u0275\u0275elementStart"](19, "span", 12), r["\u0275\u0275text"](20, "timewindow.interval"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](21, "tb-quick-time-interval", 14), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](22, "mat-tab", 4), r["\u0275\u0275pipe"](23, "translate"), r["\u0275\u0275elementStart"](24, "section", 5), r["\u0275\u0275template"](25, m, 4, 3, "section", 6), r["\u0275\u0275elementStart"](26, "section", 7), r["\u0275\u0275elementStart"](27, "div", 15), r["\u0275\u0275elementStart"](28, "mat-radio-group", 16), r["\u0275\u0275elementStart"](29, "mat-radio-button", 10), r["\u0275\u0275elementStart"](30, "section", 11), r["\u0275\u0275elementStart"](31, "span", 12), r["\u0275\u0275text"](32, "timewindow.last"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](33, "tb-timeinterval", 17), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](34, "mat-radio-button", 10), r["\u0275\u0275elementStart"](35, "section", 11), r["\u0275\u0275elementStart"](36, "span", 12), r["\u0275\u0275text"](37, "timewindow.time-period"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](38, "tb-datetime-period", 18), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](39, "mat-radio-button", 10), r["\u0275\u0275elementStart"](40, "section", 11), r["\u0275\u0275elementStart"](41, "span", 12), r["\u0275\u0275text"](42, "timewindow.interval"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](43, "tb-quick-time-interval", 19), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275template"](44, h, 25, 18, "div", 20), r["\u0275\u0275template"](45, g, 2, 4, "div", 21), r["\u0275\u0275template"](46, y, 2, 4, "div", 22), r["\u0275\u0275template"](47, b, 6, 5, "div", 23), r["\u0275\u0275elementStart"](48, "div", 24), r["\u0275\u0275elementStart"](49, "button", 25), r["\u0275\u0275listener"]("click", function () { return t.cancel() }), r["\u0275\u0275pipe"](50, "async"), r["\u0275\u0275text"](51), r["\u0275\u0275pipe"](52, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](53, "button", 26), r["\u0275\u0275pipe"](54, "async"), r["\u0275\u0275text"](55), r["\u0275\u0275pipe"](56, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]()), 2 & e && (r["\u0275\u0275property"]("formGroup", t.timewindowForm), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("disabled", r["\u0275\u0275pipeBind1"](2, 33, t.isLoading$)), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("ngClass", r["\u0275\u0275pureFunction1"](47, v, t.historyOnly))("selectedIndex", t.timewindow.selectedTab), r["\u0275\u0275advance"](1), r["\u0275\u0275propertyInterpolate"]("label", r["\u0275\u0275pipeBind1"](6, 35, "timewindow.realtime")), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("ngIf", t.isEdit), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("fxShow", t.isEdit || !t.timewindow.hideInterval), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("value", t.realtimeTypes.LAST_INTERVAL), r["\u0275\u0275advance"](4), r["\u0275\u0275property"]("fxShow", t.timewindowForm.get("realtime.realtimeType").value === t.realtimeTypes.LAST_INTERVAL)("required", t.timewindow.selectedTab === t.timewindowTypes.REALTIME && t.timewindowForm.get("realtime.realtimeType").value === t.realtimeTypes.LAST_INTERVAL), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("value", t.realtimeTypes.INTERVAL), r["\u0275\u0275advance"](4), r["\u0275\u0275property"]("fxShow", t.timewindowForm.get("realtime.realtimeType").value === t.realtimeTypes.INTERVAL)("required", t.timewindow.selectedTab === t.timewindowTypes.REALTIME && t.timewindowForm.get("realtime.realtimeType").value === t.realtimeTypes.INTERVAL), r["\u0275\u0275advance"](1), r["\u0275\u0275propertyInterpolate"]("label", r["\u0275\u0275pipeBind1"](23, 37, "timewindow.history")), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("ngIf", t.isEdit), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("fxShow", t.isEdit || !t.timewindow.hideInterval), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("value", t.historyTypes.LAST_INTERVAL), r["\u0275\u0275advance"](4), r["\u0275\u0275property"]("fxShow", t.timewindowForm.get("history.historyType").value === t.historyTypes.LAST_INTERVAL)("required", t.timewindow.selectedTab === t.timewindowTypes.HISTORY && t.timewindowForm.get("history.historyType").value === t.historyTypes.LAST_INTERVAL), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("value", t.historyTypes.FIXED), r["\u0275\u0275advance"](4), r["\u0275\u0275property"]("fxShow", t.timewindowForm.get("history.historyType").value === t.historyTypes.FIXED)("required", t.timewindow.selectedTab === t.timewindowTypes.HISTORY && t.timewindowForm.get("history.historyType").value === t.historyTypes.FIXED), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("value", t.historyTypes.INTERVAL), r["\u0275\u0275advance"](4), r["\u0275\u0275property"]("fxShow", t.timewindowForm.get("history.historyType").value === t.historyTypes.INTERVAL)("required", t.timewindow.selectedTab === t.timewindowTypes.HISTORY && t.timewindowForm.get("history.historyType").value === t.historyTypes.INTERVAL), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", t.aggregation), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", t.aggregation && t.timewindowForm.get("aggregation.type").value !== t.aggregationTypes.NONE && t.timewindow.selectedTab === t.timewindowTypes.REALTIME), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", t.aggregation && t.timewindowForm.get("aggregation.type").value !== t.aggregationTypes.NONE && t.timewindow.selectedTab === t.timewindowTypes.HISTORY), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", t.timezone), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("disabled", r["\u0275\u0275pipeBind1"](50, 39, t.isLoading$)), r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](52, 41, "action.cancel"), " "), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("disabled", r["\u0275\u0275pipeBind1"](54, 43, t.isLoading$) || t.timewindowForm.invalid || !t.timewindowForm.dirty), r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](56, 45, "action.update"), " ")) }, styles: ["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%], [_nghost-%COMP%]   form[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .mat-content[_ngcontent-%COMP%]{overflow:hidden;background-color:#fff}[_nghost-%COMP%]   .mat-padding[_ngcontent-%COMP%]{padding:0 16px}[_nghost-%COMP%]   .hide-label[_ngcontent-%COMP%]{margin-bottom:5px;margin-right:5px}[_nghost-%COMP%]   tb-timeinterval[ng-reflect-fx-show=true][_ngcontent-%COMP%]{margin-bottom:-16px}[_nghost-%COMP%]   .limit-slider-container[_ngcontent-%COMP%]   .limit-slider-value[_ngcontent-%COMP%]{margin-left:16px;min-width:25px;max-width:80px}[_nghost-%COMP%]   .limit-slider-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{text-align:center}@media screen and (min-width:960px){[_nghost-%COMP%]   .history-time-input[_ngcontent-%COMP%]{min-width:364px}[_nghost-%COMP%]   .limit-slider-container[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{margin-right:16px;width:-webkit-min-content;width:-moz-min-content;width:min-content;max-width:40%}}[_nghost-%COMP%]     mat-radio-button{display:block;margin-bottom:16px}[_nghost-%COMP%]     mat-radio-button .mat-radio-label{width:100%;align-items:start}[_nghost-%COMP%]     mat-radio-button .mat-radio-label .mat-radio-label-content{width:100%}[_nghost-%COMP%]     .mat-slider-horizontal .mat-slider-thumb-label{width:38px;height:38px;top:-46px;right:-19px}"] }), t }(a.a); 0, void 0 }, j37L: function (e, t, n) { "use strict"; n.d(t, "a", function () { return a }); var i = n("fXoL"), r = n("Y8nr"), o = n("tk/3"), a = function () { function e(e) { this.http = e } return e.prototype.getTenantEntityViewInfos = function (e, t, n) { return void 0 === t && (t = ""), this.http.get("/api/tenant/entityViewInfos" + e.toQuery() + "&type=" + t, Object(r.b)(n)) }, e.prototype.getCustomerEntityViewInfos = function (e, t, n, i) { return void 0 === n && (n = ""), this.http.get("/api/customer/" + e + "/entityViewInfos" + t.toQuery() + "&type=" + n, Object(r.b)(i)) }, e.prototype.getEntityView = function (e, t) { return this.http.get("/api/entityView/" + e, Object(r.b)(t)) }, e.prototype.getEntityViewInfo = function (e, t) { return this.http.get("/api/entityView/info/" + e, Object(r.b)(t)) }, e.prototype.saveEntityView = function (e, t) { return this.http.post("/api/entityView", e, Object(r.b)(t)) }, e.prototype.deleteEntityView = function (e, t) { return this.http.delete("/api/entityView/" + e, Object(r.b)(t)) }, e.prototype.getEntityViewTypes = function (e) { return this.http.get("/api/entityView/types", Object(r.b)(e)) }, e.prototype.makeEntityViewPublic = function (e, t) { return this.http.post("/api/customer/public/entityView/" + e, null, Object(r.b)(t)) }, e.prototype.assignEntityViewToCustomer = function (e, t, n) { return this.http.post("/api/customer/" + e + "/entityView/" + t, null, Object(r.b)(n)) }, e.prototype.unassignEntityViewFromCustomer = function (e, t) { return this.http.delete("/api/customer/entityView/" + e, Object(r.b)(t)) }, e.prototype.findByQuery = function (e, t) { return this.http.post("/api/entityViews", e, Object(r.b)(t)) }, e.prototype.assignEntityViewToEdge = function (e, t, n) { return this.http.post("/api/edge/" + e + "/entityView/" + t, null, Object(r.b)(n)) }, e.prototype.unassignEntityViewFromEdge = function (e, t, n) { return this.http.delete("/api/edge/" + e + "/entityView/" + t, Object(r.b)(n)) }, e.prototype.getEdgeEntityViews = function (e, t, n, i) { return void 0 === n && (n = ""), this.http.get("/api/edge/" + e + "/entityViews" + t.toQuery() + "&type=" + n, Object(r.b)(i)) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275inject"](o.HttpClient)) }, e.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, "j8W/": function (e, t, n) { "use strict"; n.d(t, "a", function () { return m }); var i = n("fXoL"), r = n("Dvla"), o = n("sYmb"), a = n("bTqV"), s = n("Qu3c"), l = n("ofXK"), c = n("NFeN"), u = n("znSr"); function d(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-icon", 3), i["\u0275\u0275text"](1), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275nextContext"](); i["\u0275\u0275property"]("svgIcon", n.mdiIcon)("ngStyle", n.style), i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"](" ", n.icon, " ") } } function p(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-icon", 4), i["\u0275\u0275text"](1, "done"), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275nextContext"](); i["\u0275\u0275property"]("ngStyle", n.style) } } var m = function () { function e(e, t, n) { this.clipboardService = e, this.translate = t, this.cd = n, this.copied = !1, this.disabled = !1, this.style = {}, this.successCopied = new i.EventEmitter } return e.prototype.copy = function (e) { var t = this; e.stopPropagation(), this.timer && clearTimeout(this.timer), this.clipboardService.copy(this.copyText), this.successCopied.emit(this.copyText), this.copied = !0, this.timer = setTimeout(function () { t.copied = !1, t.cd.detectChanges() }, 1500) }, Object.defineProperty(e.prototype, "matTooltipText", { get: function () { return this.copied ? this.translate.instant("ota-update.copied") : this.tooltipText }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "matTooltipPosition", { get: function () { return this.copied ? "below" : this.tooltipPosition }, enumerable: !1, configurable: !0 }), e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](r.c), i["\u0275\u0275directiveInject"](o.TranslateService), i["\u0275\u0275directiveInject"](i.ChangeDetectorRef)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-copy-button"]], inputs: { copyText: "copyText", disabled: "disabled", mdiIcon: "mdiIcon", icon: "icon", tooltipText: "tooltipText", tooltipPosition: "tooltipPosition", style: "style", color: "color" }, outputs: { successCopied: "successCopied" }, decls: 4, vars: 6, consts: [["mat-icon-button", "", "type", "button", 3, "color", "disabled", "matTooltip", "matTooltipPosition", "click"], [3, "svgIcon", "ngStyle", 4, "ngIf", "ngIfElse"], ["copiedTemplate", ""], [3, "svgIcon", "ngStyle"], [1, "copied", 3, "ngStyle"]], template: function (e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "button", 0), i["\u0275\u0275listener"]("click", function (e) { return t.copy(e) }), i["\u0275\u0275template"](1, d, 2, 3, "mat-icon", 1), i["\u0275\u0275template"](2, p, 2, 1, "ng-template", null, 2, i["\u0275\u0275templateRefExtractor"]), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275reference"](3); i["\u0275\u0275property"]("color", t.color)("disabled", t.disabled)("matTooltip", t.matTooltipText)("matTooltipPosition", t.matTooltipPosition), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngIf", !t.copied)("ngIfElse", n) } }, directives: [a.MatButton, s.MatTooltip, l.NgIf, c.MatIcon, l.NgStyle, u.e], styles: ["[_nghost-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{height:32px;width:32px;line-height:32px}[_nghost-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]   .mat-icon.copied[_ngcontent-%COMP%]{color:#00c851!important}[_nghost-%COMP%]:hover   .mat-icon[_ngcontent-%COMP%]{color:#28567e!important}"] }), e }(); 0, void 0 }, jCow: function (e, t, n) { "use strict"; n.d(t, "c", function () { return d }), n.d(t, "b", function () { return p }), n.d(t, "a", function () { return m }); var i, r = n("LRne"), o = n("Cfvw"), a = n("cp0P"), s = n("vkgz"), l = n("5+tZ"), c = n("lJxs"), u = !1; function d() { if (u) return Object(r.a)(null); var e = []; return e.push(Object(o.a)(n.e(26).then(n.t.bind(null, "2nlJ", 7)))), e.push(Object(o.a)(n.e(27).then(n.t.bind(null, "dnnr", 7)))), e.push(Object(o.a)(n.e(30).then(n.t.bind(null, "tAGt", 7)))), e.push(Object(o.a)(n.e(28).then(n.t.bind(null, "k1/B", 7)))), e.push(Object(o.a)(n.e(32).then(n.t.bind(null, "VeWa", 7)))), e.push(Object(o.a)(n.e(31).then(n.t.bind(null, "kiLR", 7)))), e.push(Object(o.a)(n.e(34).then(n.t.bind(null, "YJMw", 7)))), e.push(Object(o.a)(n.e(33).then(n.t.bind(null, "VVRk", 7)))), e.push(Object(o.a)(n.e(29).then(n.t.bind(null, "s6ZR", 7)))), e.push(Object(o.a)(n.e(37).then(n.t.bind(null, "U9cf", 7)))), e.push(Object(o.a)(n.e(35).then(n.t.bind(null, "9eQV", 7)))), e.push(Object(o.a)(n.e(39).then(n.t.bind(null, "wNra", 7)))), e.push(Object(o.a)(n.e(38).then(n.t.bind(null, "7E8U", 7)))), e.push(Object(o.a)(n.e(41).then(n.t.bind(null, "h4f5", 7)))), e.push(Object(o.a)(n.e(40).then(n.t.bind(null, "T1/B", 7)))), e.push(Object(o.a)(n.e(36).then(n.t.bind(null, "UgiY", 7)))), e.push(Object(o.a)(n.e(42).then(n.t.bind(null, "umNf", 7)))), Object(a.a)(e).pipe(Object(s.a)(function () { u = !0 })) } function p() { return i ? Object(r.a)(i) : Object(o.a)(n.e(9).then(n.t.bind(null, "bU/s", 7))).pipe(Object(l.b)(function (e) { return d().pipe(Object(c.a)(function () { return e })) }), Object(s.a)(function (e) { i = e })) } var m = function () { function e(e, t, n, i) { this.start = { row: e, column: t }, this.end = { row: n, column: i } } return e.fromPoints = function (t, n) { return new e(t.row, t.column, n.row, n.column) }, e.prototype.clipRows = function (t, n) { var i, r; return this.end.row > n ? i = { row: n + 1, column: 0 } : this.end.row < t && (i = { row: t, column: 0 }), this.start.row > n ? r = { row: n + 1, column: 0 } : this.start.row < t && (r = { row: t, column: 0 }), e.fromPoints(r || this.start, i || this.end) }, e.prototype.clone = function () { return e.fromPoints(this.start, this.end) }, e.prototype.collapseRows = function () { return 0 === this.end.column ? new e(this.start.row, 0, Math.max(this.start.row, this.end.row - 1), 0) : new e(this.start.row, 0, this.end.row, 0) }, e.prototype.compare = function (e, t) { return this.isMultiLine() || e !== this.start.row ? e < this.start.row ? -1 : e > this.end.row ? 1 : this.start.row === e ? t >= this.start.column ? 0 : -1 : this.end.row === e ? t <= this.end.column ? 0 : 1 : 0 : t < this.start.column ? -1 : t > this.end.column ? 1 : 0 }, e.prototype.compareEnd = function (e, t) { return this.end.row === e && this.end.column === t ? 1 : this.compare(e, t) }, e.prototype.compareInside = function (e, t) { return this.end.row === e && this.end.column === t ? 1 : this.start.row === e && this.start.column === t ? -1 : this.compare(e, t) }, e.prototype.comparePoint = function (e) { return this.compare(e.row, e.column) }, e.prototype.compareRange = function (e) { var t, n = e.end, i = e.start; return 1 === (t = this.compare(n.row, n.column)) ? 1 === (t = this.compare(i.row, i.column)) ? 2 : 0 === t ? 1 : 0 : -1 === t ? -2 : -1 === (t = this.compare(i.row, i.column)) ? -1 : 1 === t ? 42 : 0 }, e.prototype.compareStart = function (e, t) { return this.start.row === e && this.start.column === t ? -1 : this.compare(e, t) }, e.prototype.contains = function (e, t) { return 0 === this.compare(e, t) }, e.prototype.containsRange = function (e) { return 0 === this.comparePoint(e.start) && 0 === this.comparePoint(e.end) }, e.prototype.extend = function (t, n) { var i, r, o = this.compare(t, n); return 0 === o ? this : (-1 === o ? r = { row: t, column: n } : i = { row: t, column: n }, e.fromPoints(r || this.start, i || this.end)) }, e.prototype.inside = function (e, t) { return 0 === this.compare(e, t) && (!this.isEnd(e, t) && !this.isStart(e, t)) }, e.prototype.insideEnd = function (e, t) { return 0 === this.compare(e, t) && !this.isStart(e, t) }, e.prototype.insideStart = function (e, t) { return 0 === this.compare(e, t) && !this.isEnd(e, t) }, e.prototype.intersects = function (e) { var t = this.compareRange(e); return -1 === t || 0 === t || 1 === t }, e.prototype.isEmpty = function () { return this.start.row === this.end.row && this.start.column === this.end.column }, e.prototype.isEnd = function (e, t) { return this.end.row === e && this.end.column === t }, e.prototype.isEqual = function (e) { return this.start.row === e.start.row && this.end.row === e.end.row && this.start.column === e.start.column && this.end.column === e.end.column }, e.prototype.isMultiLine = function () { return this.start.row !== this.end.row }, e.prototype.isStart = function (e, t) { return this.start.row === e && this.start.column === t }, e.prototype.moveBy = function (e, t) { this.start.row += e, this.start.column += t, this.end.row += e, this.end.column += t }, e.prototype.setEnd = function (e, t) { "object" == typeof e ? (this.end.column = e.column, this.end.row = e.row) : (this.end.row = e, this.end.column = t) }, e.prototype.setStart = function (e, t) { "object" == typeof e ? (this.start.column = e.column, this.start.row = e.row) : (this.start.row = e, this.start.column = t) }, e.prototype.toScreenRange = function (t) { var n = t.documentToScreenPosition(this.start), i = t.documentToScreenPosition(this.end); return new e(n.row, n.column, i.row, i.column) }, e }() }, jKtI: function (e, t, n) { "use strict"; n.d(t, "a", function () { return a }); var i = n("fXoL"), r = n("Y8nr"), o = n("tk/3"), a = function () { function e(e) { this.http = e } return e.prototype.getAdminSettings = function (e, t) { return this.http.get("/api/admin/settings/" + e, Object(r.b)(t)) }, e.prototype.saveAdminSettings = function (e, t) { return this.http.post("/api/admin/settings", e, Object(r.b)(t)) }, e.prototype.sendTestMail = function (e, t) { return this.http.post("/api/admin/settings/testMail", e, Object(r.b)(t)) }, e.prototype.sendTestSms = function (e, t) { return this.http.post("/api/admin/settings/testSms", e, Object(r.b)(t)) }, e.prototype.getSecuritySettings = function (e) { return this.http.get("/api/admin/securitySettings", Object(r.b)(e)) }, e.prototype.saveSecuritySettings = function (e, t) { return this.http.post("/api/admin/securitySettings", e, Object(r.b)(t)) }, e.prototype.checkUpdates = function (e) { return this.http.get("/api/admin/updates", Object(r.b)(e)) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275inject"](o.HttpClient)) }, e.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, jXr5: function (e, t, n) { "use strict"; n.d(t, "a", function () { return s }); var i = n("fXoL"), r = n("0IaG"), o = n("XiUz"), a = n("bTqV"), s = function () { function e(e, t) { this.dialogRef = e, this.data = t } return e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](r.MatDialogRef), i["\u0275\u0275directiveInject"](r.MAT_DIALOG_DATA)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-alert-dialog"]], decls: 6, vars: 4, consts: [["mat-dialog-title", ""], ["mat-dialog-content", "", 3, "innerHTML"], ["mat-dialog-actions", "", "fxLayoutAlign", "end center"], ["mat-button", "", "color", "accent", "cdkFocusInitial", "", 3, "mat-dialog-close"]], template: function (e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "h2", 0), i["\u0275\u0275text"](1), i["\u0275\u0275elementEnd"](), i["\u0275\u0275element"](2, "div", 1), i["\u0275\u0275elementStart"](3, "div", 2), i["\u0275\u0275elementStart"](4, "button", 3), i["\u0275\u0275text"](5), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate"](t.data.title), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("innerHTML", t.data.message, i["\u0275\u0275sanitizeHtml"]), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("mat-dialog-close", !0), i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate"](t.data.ok)) }, directives: [r.MatDialogTitle, r.MatDialogContent, r.MatDialogActions, o.e, a.MatButton, r.MatDialogClose], styles: ["[_nghost-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]{padding:0 24px 24px}"] }), e }(); 0, void 0 }, "jy/V": function (e, t, n) { "use strict"; n.d(t, "a", function () { return f }); var i = n("mrSG"), r = n("fXoL"), o = n("RxGS"), a = n("3Pt+"), s = n("S+vS"), l = n("l7P3"), c = n("XiUz"), u = n("NFeN"), d = n("kmnG"), p = n("sYmb"), m = n("qFsG"), f = function (e) { function t(t, n, i) { var r = e.call(this, t) || this; return r.store = t, r.dialogs = n, r.fb = i, r.propagateChange = null, r } return Object(i.d)(t, e), t.prototype.ngOnInit = function () { var e = this; this.materialIconFormGroup = this.fb.group({ icon: [null, []] }), this.materialIconFormGroup.valueChanges.subscribe(function () { e.updateModel() }) }, t.prototype.registerOnChange = function (e) { this.propagateChange = e }, t.prototype.registerOnTouched = function (e) { }, t.prototype.setDisabledState = function (e) { this.disabled = e, e ? this.materialIconFormGroup.disable({ emitEvent: !1 }) : this.materialIconFormGroup.enable({ emitEvent: !1 }) }, t.prototype.writeValue = function (e) { this.modelValue = e, this.materialIconFormGroup.patchValue({ icon: this.modelValue }, { emitEvent: !1 }) }, t.prototype.updateModel = function () { var e = this.materialIconFormGroup.get("icon").value; this.modelValue !== e && (this.modelValue = e, this.propagateChange(this.modelValue)) }, t.prototype.openIconDialog = function () { var e = this; this.dialogs.materialIconPicker(this.materialIconFormGroup.get("icon").value).subscribe(function (t) { t && e.materialIconFormGroup.patchValue({ icon: t }, { emitEvent: !0 }) }) }, t.\u0275fac = function (e) { return new (e || t)(r["\u0275\u0275directiveInject"](l.Store), r["\u0275\u0275directiveInject"](s.a), r["\u0275\u0275directiveInject"](a.FormBuilder)) }, t.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: t, selectors: [["tb-material-icon-select"]], inputs: { disabled: "disabled" }, features: [r["\u0275\u0275ProvidersFeature"]([{ provide: a.NG_VALUE_ACCESSOR, useExisting: Object(r.forwardRef)(function () { return t }), multi: !0 }]), r["\u0275\u0275InheritDefinitionFeature"]], decls: 7, vars: 2, consts: [["fxLayout", "row", 3, "formGroup"], [3, "click"], ["fxFlex", ""], ["translate", ""], ["matInput", "", "formControlName", "icon", 3, "mousedown"]], template: function (e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "div", 0), r["\u0275\u0275elementStart"](1, "mat-icon", 1), r["\u0275\u0275listener"]("click", function () { return t.openIconDialog() }), r["\u0275\u0275text"](2), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](3, "mat-form-field", 2), r["\u0275\u0275elementStart"](4, "mat-label", 3), r["\u0275\u0275text"](5, "icon.icon"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](6, "input", 4), r["\u0275\u0275listener"]("mousedown", function () { return t.openIconDialog() }), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]()), 2 & e && (r["\u0275\u0275property"]("formGroup", t.materialIconFormGroup), r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate"](t.materialIconFormGroup.get("icon").value)) }, directives: [c.f, a.NgControlStatusGroup, a.FormGroupDirective, u.MatIcon, d.MatFormField, c.b, d.MatLabel, p.TranslateDirective, m.MatInput, a.DefaultValueAccessor, a.NgControlStatus, a.FormControlName], styles: ["[_nghost-%COMP%]   .mat-icon[_ngcontent-%COMP%]{padding:4px;margin:8px 4px 4px;cursor:pointer;border:1px solid rgba(0,0,0,.27)}[_nghost-%COMP%]     .mat-form-field-infix{width:146px}"] }), t }(o.a); 0, void 0 }, k81w: function (e, t, n) { "use strict"; n.d(t, "a", function () { return M }); var i = n("fXoL"), r = n("3Pt+"), o = n("z36O"), a = n("aX2P"), s = n("ofXK"), l = n("rDax"), c = n("j+T/"), u = n("+rOU"), d = n("he9t"), p = n("wtyh"), m = n("k9IB"), f = n("//Q6"), h = n("8LU1"), g = n("sYmb"), y = n("0MNC"), b = n("bTqV"), v = n("NFeN"), E = n("XiUz"), T = n("znSr"), S = n("Qu3c"), C = ["timewindowPanelOrigin"]; function O(e, t) { if (1 & e) { var n = i["\u0275\u0275getCurrentView"](); i["\u0275\u0275elementStart"](0, "button", 2, 3), i["\u0275\u0275listener"]("click", function () { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().openEditMode() }), i["\u0275\u0275elementStart"](2, "mat-icon", 4), i["\u0275\u0275text"](3, "query_builder"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](4, "span"), i["\u0275\u0275text"](5), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]() } if (2 & e) { var r = i["\u0275\u0275nextContext"](); i["\u0275\u0275property"]("disabled", r.timewindowDisabled), i["\u0275\u0275advance"](5), i["\u0275\u0275textInterpolate"](null == r.innerValue ? null : r.innerValue.displayValue) } } function w(e, t) { if (1 & e) { var n = i["\u0275\u0275getCurrentView"](); i["\u0275\u0275elementStart"](0, "button", 10), i["\u0275\u0275listener"]("click", function () { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"](2).openEditMode() }), i["\u0275\u0275pipe"](1, "translate"), i["\u0275\u0275elementStart"](2, "mat-icon", 4), i["\u0275\u0275text"](3, "query_builder"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]() } if (2 & e) { var r = i["\u0275\u0275nextContext"](2); i["\u0275\u0275propertyInterpolate"]("matTooltip", i["\u0275\u0275pipeBind1"](1, 3, "timewindow.edit")), i["\u0275\u0275property"]("disabled", r.timewindowDisabled)("matTooltipPosition", r.tooltipPosition) } } function I(e, t) { if (1 & e) { var n = i["\u0275\u0275getCurrentView"](); i["\u0275\u0275elementStart"](0, "button", 10), i["\u0275\u0275listener"]("click", function () { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"](2).openEditMode() }), i["\u0275\u0275pipe"](1, "translate"), i["\u0275\u0275elementStart"](2, "mat-icon", 4), i["\u0275\u0275text"](3, "query_builder"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]() } if (2 & e) { var r = i["\u0275\u0275nextContext"](2); i["\u0275\u0275propertyInterpolate"]("matTooltip", i["\u0275\u0275pipeBind1"](1, 3, "timewindow.edit")), i["\u0275\u0275property"]("disabled", r.timewindowDisabled)("matTooltipPosition", r.tooltipPosition) } } function x(e, t) { if (1 & e) { var n = i["\u0275\u0275getCurrentView"](); i["\u0275\u0275elementStart"](0, "section", 5, 3), i["\u0275\u0275template"](2, w, 4, 5, "button", 6), i["\u0275\u0275elementStart"](3, "span", 7), i["\u0275\u0275listener"]("click", function () { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().openEditMode() }), i["\u0275\u0275pipe"](4, "translate"), i["\u0275\u0275text"](5), i["\u0275\u0275elementStart"](6, "span", 8), i["\u0275\u0275text"](7, "| "), i["\u0275\u0275elementStart"](8, "span", 9), i["\u0275\u0275text"](9), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](10, I, 4, 5, "button", 6), i["\u0275\u0275elementEnd"]() } if (2 & e) { var r = i["\u0275\u0275nextContext"](); i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngIf", "left" === r.direction), i["\u0275\u0275advance"](1), i["\u0275\u0275propertyInterpolate"]("matTooltip", i["\u0275\u0275pipeBind1"](4, 8, "timewindow.edit")), i["\u0275\u0275property"]("fxHide", r.hideLabel())("matTooltipPosition", r.tooltipPosition), i["\u0275\u0275advance"](2), i["\u0275\u0275textInterpolate1"](" ", null == r.innerValue ? null : r.innerValue.displayValue, " "), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("fxShow", "" !== (null == r.innerValue ? null : r.innerValue.displayTimezoneAbbr)), i["\u0275\u0275advance"](3), i["\u0275\u0275textInterpolate"](r.innerValue.displayTimezoneAbbr), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngIf", "right" === r.direction) } } var M = function () { function e(e, t, n, i, r, o, a, s, l, c) { this.translate = e, this.timeService = t, this.millisecondsToTimeStringPipe = n, this.datePipe = i, this.overlay = r, this.cd = o, this.viewContainerRef = a, this.breakpointObserver = s, this.document = l, this.window = c, this.historyOnlyValue = !1, this.aggregationValue = !1, this.timezoneValue = !1, this.isToolbarValue = !1, this.asButtonValue = !1, this.isEditValue = !1, this.direction = "left", this.tooltipPosition = "above", this.propagateChange = function (e) { } } return Object.defineProperty(e.prototype, "historyOnly", { get: function () { return this.historyOnlyValue }, set: function (e) { this.historyOnlyValue = Object(h.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "aggregation", { get: function () { return this.aggregationValue }, set: function (e) { this.aggregationValue = Object(h.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "timezone", { get: function () { return this.timezoneValue }, set: function (e) { this.timezoneValue = Object(h.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "isToolbar", { get: function () { return this.isToolbarValue }, set: function (e) { this.isToolbarValue = Object(h.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "asButton", { get: function () { return this.asButtonValue }, set: function (e) { this.asButtonValue = Object(h.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "isEdit", { get: function () { return this.isEditValue }, set: function (e) { this.isEditValue = Object(h.coerceBooleanProperty)(e), this.timewindowDisabled = this.isTimewindowDisabled() }, enumerable: !1, configurable: !0 }), e.prototype.ngOnInit = function () { }, e.prototype.ngOnDestroy = function () { }, e.prototype.openEditMode = function () { var e = this; if (!this.timewindowDisabled) { var t = this.breakpointObserver.isMatched(d.g["gt-xs"]), n = this.overlay.position(), i = new l.OverlayConfig({ panelClass: "tb-timewindow-panel", backdropClass: "cdk-overlay-transparent-backdrop", hasBackdrop: t }); if (t) { i.minWidth = "417px", i.maxHeight = "550px"; var r = this.timewindowPanelOrigin.elementRef.nativeElement.getBoundingClientRect(), o = this.window.pageYOffset || this.document.documentElement.scrollTop || this.document.body.scrollTop || 0, a = this.window.pageXOffset || this.document.documentElement.scrollLeft || this.document.body.scrollLeft || 0, s = r.bottom - o, p = r.left - a, m = void 0, h = void 0, g = void 0, y = void 0; s + 375 > this.document.documentElement.clientHeight ? (h = "top", y = "bottom") : (h = "bottom", y = "top"), p + 417 > this.document.documentElement.clientWidth ? (m = "end", g = "end") : (m = "start", g = "start"); var b = { originX: m, originY: h, overlayX: g, overlayY: y }; i.positionStrategy = n.flexibleConnectedTo(this.timewindowPanelOrigin.elementRef).withPositions([b]) } else i.minWidth = "100%", i.minHeight = "100%", i.positionStrategy = n.global().top("0%").left("0%").right("0%").bottom("0%"); var v = this.overlay.create(i); v.backdropClick().subscribe(function () { v.dispose() }); var E = this._createTimewindowPanelInjector(v, { timewindow: Object(f.e)(this.innerValue), historyOnly: this.historyOnly, aggregation: this.aggregation, timezone: this.timezone, isEdit: this.isEdit }), T = v.attach(new u.ComponentPortal(c.b, this.viewContainerRef, E)); T.onDestroy(function () { T.instance.result && (e.innerValue = T.instance.result, e.timewindowDisabled = e.isTimewindowDisabled(), e.updateDisplayValue(), e.notifyChanged()) }) } }, e.prototype._createTimewindowPanelInjector = function (e, t) { var n = [{ provide: c.a, useValue: t }, { provide: l.OverlayRef, useValue: e }]; return i.Injector.create({ parent: this.viewContainerRef.injector, providers: n }) }, e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.setDisabledState = function (e) { this.disabled = e, this.timewindowDisabled = this.isTimewindowDisabled() }, e.prototype.writeValue = function (e) { this.innerValue = Object(a.J)(e, this.timeService), this.timewindowDisabled = this.isTimewindowDisabled(), this.updateDisplayValue() }, e.prototype.notifyChanged = function () { this.propagateChange(Object(a.v)(this.innerValue)) }, e.prototype.updateDisplayValue = function () { if (this.innerValue.selectedTab !== a.l.REALTIME || this.historyOnly) if (this.innerValue.displayValue = this.historyOnly ? "" : this.translate.instant("timewindow.history") + " - ", this.innerValue.history.historyType === a.d.LAST_INTERVAL) this.innerValue.displayValue += this.translate.instant("timewindow.last-prefix") + " " + this.millisecondsToTimeStringPipe.transform(this.innerValue.history.timewindowMs); else if (this.innerValue.history.historyType === a.d.INTERVAL) this.innerValue.displayValue += this.translate.instant(a.g.get(this.innerValue.history.quickInterval)); else { var e = this.datePipe.transform(this.innerValue.history.fixedTimewindow.startTimeMs, "yyyy-MM-dd HH:mm:ss"), t = this.datePipe.transform(this.innerValue.history.fixedTimewindow.endTimeMs, "yyyy-MM-dd HH:mm:ss"); this.innerValue.displayValue += this.translate.instant("timewindow.period", { startTime: e, endTime: t }) } else this.innerValue.displayValue = this.translate.instant("timewindow.realtime") + " - ", this.innerValue.realtime.realtimeType === a.h.INTERVAL ? this.innerValue.displayValue += this.translate.instant(a.g.get(this.innerValue.realtime.quickInterval)) : this.innerValue.displayValue += this.translate.instant("timewindow.last-prefix") + " " + this.millisecondsToTimeStringPipe.transform(this.innerValue.realtime.timewindowMs); Object(f.o)(this.innerValue.timezone) && "" !== this.innerValue.timezone ? (this.innerValue.displayValue += " ", this.innerValue.displayTimezoneAbbr = Object(a.G)(this.innerValue.timezone).abbr) : this.innerValue.displayTimezoneAbbr = "", this.cd.detectChanges() }, e.prototype.hideLabel = function () { return this.isToolbar && !this.breakpointObserver.isMatched(d.g["gt-md"]) }, e.prototype.isTimewindowDisabled = function () { return this.disabled || !this.isEdit && (!this.innerValue || this.innerValue.hideInterval && (!this.aggregation || this.innerValue.hideAggregation && this.innerValue.hideAggInterval)) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](g.TranslateService), i["\u0275\u0275directiveInject"](m.a), i["\u0275\u0275directiveInject"](o.a), i["\u0275\u0275directiveInject"](s.DatePipe), i["\u0275\u0275directiveInject"](l.Overlay), i["\u0275\u0275directiveInject"](i.ChangeDetectorRef), i["\u0275\u0275directiveInject"](i.ViewContainerRef), i["\u0275\u0275directiveInject"](y.BreakpointObserver), i["\u0275\u0275directiveInject"](s.DOCUMENT), i["\u0275\u0275directiveInject"](p.b)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-timewindow"]], viewQuery: function (e, t) { if (1 & e && i["\u0275\u0275viewQuery"](C, 1), 2 & e) { var n; i["\u0275\u0275queryRefresh"](n = i["\u0275\u0275loadQuery"]()) && (t.timewindowPanelOrigin = n.first) } }, inputs: { historyOnly: "historyOnly", aggregation: "aggregation", timezone: "timezone", isToolbar: "isToolbar", asButton: "asButton", isEdit: "isEdit", direction: "direction", tooltipPosition: "tooltipPosition", disabled: "disabled" }, features: [i["\u0275\u0275ProvidersFeature"]([{ provide: r.NG_VALUE_ACCESSOR, useExisting: Object(i.forwardRef)(function () { return e }), multi: !0 }])], decls: 2, vars: 2, consts: [["cdkOverlayOrigin", "", "type", "button", "mat-raised-button", "", "color", "accent", 3, "disabled", "click", 4, "ngIf"], ["cdkOverlayOrigin", "", "class", "tb-timewindow", "fxLayout", "row", "fxLayoutAlign", "start center", 4, "ngIf"], ["cdkOverlayOrigin", "", "type", "button", "mat-raised-button", "", "color", "accent", 3, "disabled", "click"], ["timewindowPanelOrigin", "cdkOverlayOrigin"], [1, "material-icons"], ["cdkOverlayOrigin", "", "fxLayout", "row", "fxLayoutAlign", "start center", 1, "tb-timewindow"], ["mat-icon-button", "", "class", "tb-mat-32", "type", "button", 3, "disabled", "matTooltip", "matTooltipPosition", "click", 4, "ngIf"], [3, "fxHide", "matTooltip", "matTooltipPosition", "click"], [3, "fxShow"], [1, "timezone-abbr"], ["mat-icon-button", "", "type", "button", 1, "tb-mat-32", 3, "disabled", "matTooltip", "matTooltipPosition", "click"]], template: function (e, t) { 1 & e && (i["\u0275\u0275template"](0, O, 6, 2, "button", 0), i["\u0275\u0275template"](1, x, 11, 10, "section", 1)), 2 & e && (i["\u0275\u0275property"]("ngIf", t.asButton), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngIf", !t.asButton)) }, directives: [s.NgIf, b.MatButton, l.CdkOverlayOrigin, v.MatIcon, E.f, E.e, T.d, S.MatTooltip], pipes: [g.TranslatePipe], styles: ["[_nghost-%COMP%]{min-width:52px;margin:8px 0}[_nghost-%COMP%]   section.tb-timewindow[_ngcontent-%COMP%]{min-height:32px;padding:0 6px}[_nghost-%COMP%]   section.tb-timewindow[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;pointer-events:all;cursor:pointer}[_nghost-%COMP%]   section.tb-timewindow[_ngcontent-%COMP%]   .timezone-abbr[_ngcontent-%COMP%]{font-weight:500}"] }), e }(); 0, void 0 }, k9IB: function (e, t, n) { "use strict"; n.d(t, "a", function () { return d }); var i = n("fXoL"), r = n("aX2P"), o = n("Y8nr"), a = n("lJxs"), s = n("//Q6"), l = n("tk/3"), c = r.i, u = 7300 * r.b, d = function () { function e(e) { this.http = e, this.maxDatapointsLimit = 500 } return e.prototype.loadMaxDatapointsLimit = function () { var e = this; return this.http.get("/api/dashboard/maxDatapointsLimit", Object(o.a)(!0)).pipe(Object(a.a)(function (t) { return e.maxDatapointsLimit = t, (!e.maxDatapointsLimit || e.maxDatapointsLimit <= 7) && (e.maxDatapointsLimit = 8), e.maxDatapointsLimit })) }, e.prototype.matchesExistingInterval = function (e, t, n) { return this.getIntervals(e, t).findIndex(function (e) { return e.value === n }) > -1 }, e.prototype.getIntervals = function (e, t) { return e = this.boundMinInterval(e), t = this.boundMaxInterval(t), r.y.filter(function (n) { return n.value >= e && n.value <= t }) }, e.prototype.boundMinInterval = function (e) { return Object(s.n)(e) && (e = 1e3 * Math.ceil(e / 1e3)), this.toBound(e, c, u, c) }, e.prototype.boundMaxInterval = function (e) { return Object(s.n)(e) && (e = 1e3 * Math.floor(e / 1e3)), this.toBound(e, c, u, u) }, e.prototype.boundToPredefinedInterval = function (e, t, n) { var i = this.getIntervals(e, t), r = u, o = n || e; if (!i.length) return o; var a = i[0]; return i.forEach(function (e) { var t = Math.abs(e.value - o); t < r && (a = e, r = t) }), a.value }, e.prototype.boundIntervalToTimewindow = function (e, t, n) { if (n === r.a.NONE) return r.i; var i = this.minIntervalLimit(e), o = this.maxIntervalLimit(e); return t ? this.toBound(t, i, o, t) : this.boundToPredefinedInterval(i, o, this.avgInterval(e)) }, e.prototype.getMaxDatapointsLimit = function () { return this.maxDatapointsLimit }, e.prototype.getMinDatapointsLimit = function () { return 7 }, e.prototype.avgInterval = function (e) { var t = e / 200; return this.boundMinInterval(t) }, e.prototype.minIntervalLimit = function (e) { var t = e / 500; return this.boundMinInterval(t) }, e.prototype.maxIntervalLimit = function (e) { var t = e / 7; return this.boundMaxInterval(t) }, e.prototype.defaultTimewindow = function () { return Object(r.z)(this) }, e.prototype.toBound = function (e, t, n, i) { return Object(s.n)(e) ? (e = Math.max(e, t), e = Math.min(e, n)) : i }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275inject"](l.HttpClient)) }, e.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, kIhZ: function (e, t, n) { "use strict"; n.d(t, "a", function () { return i }), n.d(t, "b", function () { return r }); var i = ["Afghanistan", "\xc5land Islands", "Albania", "Algeria", "American Samoa", "Andorra", "Angola", "Anguilla", "Antarctica", "Antigua and Barbuda", "Argentina", "Armenia", "Aruba", "Australia", "Austria", "Azerbaijan", "Bahamas", "Bahrain", "Bangladesh", "Barbados", "Belarus", "Belgium", "Belize", "Benin", "Bermuda", "Bhutan", "Bolivia", "Bonaire, Sint Eustatius and Saba", "Bosnia and Herzegovina", "Botswana", "Bouvet Island", "Brazil", "British Indian Ocean Territory", "Brunei Darussalam", "Bulgaria", "Burkina Faso", "Burundi", "Cambodia", "Cameroon", "Canada", "Cape Verde", "Cayman Islands", "Central African Republic", "Chad", "Chile", "China", "Christmas Island", "Cocos (Keeling) Islands", "Colombia", "Comoros", "Congo", "Congo, The Democratic Republic of the", "Cook Islands", "Costa Rica", "C\xf4te d'Ivoire", "Croatia", "Cuba", "Cura\xe7ao", "Cyprus", "Czech Republic", "Denmark", "Djibouti", "Dominica", "Dominican Republic", "Ecuador", "Egypt", "El Salvador", "Equatorial Guinea", "Eritrea", "Estonia", "Ethiopia", "Falkland Islands (Malvinas)", "Faroe Islands", "Fiji", "Finland", "France", "French Guiana", "French Polynesia", "French Southern Territories", "Gabon", "Gambia", "Georgia", "Germany", "Ghana", "Gibraltar", "Greece", "Greenland", "Grenada", "Guadeloupe", "Guam", "Guatemala", "Guernsey", "Guinea", "Guinea-Bissau", "Guyana", "Haiti", "Heard Island and McDonald Islands", "Holy See (Vatican City State)", "Honduras", "Hong Kong", "Hungary", "Iceland", "India", "Indonesia", "Iran, Islamic Republic of", "Iraq", "Ireland", "Isle of Man", "Israel", "Italy", "Jamaica", "Japan", "Jersey", "Jordan", "Kazakhstan", "Kenya", "Kiribati", "Korea, Democratic People's Republic of", "Korea, Republic of", "Kuwait", "Kyrgyzstan", "Lao People's Democratic Republic", "Latvia", "Lebanon", "Lesotho", "Liberia", "Libya", "Liechtenstein", "Lithuania", "Luxembourg", "Macao", "Macedonia, Republic Of", "Madagascar", "Malawi", "Malaysia", "Maldives", "Mali", "Malta", "Marshall Islands", "Martinique", "Mauritania", "Mauritius", "Mayotte", "Mexico", "Micronesia, Federated States of", "Moldova, Republic of", "Monaco", "Mongolia", "Montenegro", "Montserrat", "Morocco", "Mozambique", "Myanmar", "Namibia", "Nauru", "Nepal", "Netherlands", "New Caledonia", "New Zealand", "Nicaragua", "Niger", "Nigeria", "Niue", "Norfolk Island", "Northern Mariana Islands", "Norway", "Oman", "Pakistan", "Palau", "Palestinian Territory, Occupied", "Panama", "Papua New Guinea", "Paraguay", "Peru", "Philippines", "Pitcairn", "Poland", "Portugal", "Puerto Rico", "Qatar", "Reunion", "Romania", "Russian Federation", "Rwanda", "Saint Barth\xe9lemy", "Saint Helena, Ascension and Tristan da Cunha", "Saint Kitts and Nevis", "Saint Lucia", "Saint Martin (French Part)", "Saint Pierre and Miquelon", "Saint Vincent and the Grenadines", "Samoa", "San Marino", "Sao Tome and Principe", "Saudi Arabia", "Senegal", "Serbia", "Seychelles", "Sierra Leone", "Singapore", "Sint Maarten (Dutch Part)", "Slovakia", "Slovenia", "Solomon Islands", "Somalia", "South Africa", "South Georgia and the South Sandwich Islands", "South Sudan", "Spain", "Sri Lanka", "Sudan", "Suriname", "Svalbard and Jan Mayen", "Swaziland", "Sweden", "Switzerland", "Syrian Arab Republic", "Taiwan", "Tajikistan", "Tanzania, United Republic of", "Thailand", "Timor-Leste", "Togo", "Tokelau", "Tonga", "Trinidad and Tobago", "Tunisia", "Turkey", "Turkmenistan", "Turks and Caicos Islands", "Tuvalu", "Uganda", "Ukraine", "United Arab Emirates", "United Kingdom", "United States", "United States Minor Outlying Islands", "Uruguay", "Uzbekistan", "Vanuatu", "Venezuela", "Viet Nam", "Virgin Islands, British", "Virgin Islands, U.S.", "Wallis and Futuna", "Western Sahara", "Yemen", "Zambia", "Zimbabwe"], r = { "United States": "(\\d{5}([\\-]\\d{4})?)", Australia: "[0-9]{4}", Austria: "[0-9]{4}", Belgium: "[0-9]{4}", Brazil: "[0-9]{5}[\\-]?[0-9]{3}", Canada: "^(?!.*[DFIOQU])[A-VXY][0-9][A-Z][ -]?[0-9][A-Z][0-9]$", Denmark: "[0-9]{3,4}", "Faroe Islands": "[0-9]{3,4}", Netherlands: "[1-9][0-9]{3}\\s?[a-zA-Z]{2}", Germany: "[0-9]{5}", Hungary: "[0-9]{4}", Italy: "[0-9]{5}", Japan: "\\d{3}-\\d{4}", Luxembourg: "(L\\s*(-|\u2014|\u2013))\\s*?[\\d]{4}", Poland: "[0-9]{2}\\-[0-9]{3}", Spain: "((0[1-9]|5[0-2])|[1-4][0-9])[0-9]{3}", Sweden: "\\d{3}\\s?\\d{2}", "United Kingdom": "[A-Za-z]{1,2}[0-9Rr][0-9A-Za-z]? [0-9][ABD-HJLNP-UW-Zabd-hjlnp-uw-z]{2}" } }, kRCp: function (e, t, n) { "use strict"; n.d(t, "a", function () { return u }); var i = n("fXoL"), r = n("he9t"), o = n("bTqV"), a = n("Qu3c"), s = n("NFeN"), l = n("sYmb"), c = ["tb-help", ""], u = function () { function e() { } return e.prototype.gotoHelpPage = function () { var e = r.e.linksMap[this.helpLinkId]; !e && this.helpLinkId && (this.helpLinkId.startsWith("http://") || this.helpLinkId.startsWith("https://")) && (e = this.helpLinkId), e && window.open(e, "_blank") }, e.\u0275fac = function (t) { return new (t || e) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["", "tb-help", ""]], inputs: { helpLinkId: ["tb-help", "helpLinkId"] }, attrs: c, decls: 4, vars: 3, consts: [["color", "accent", "mat-button", "", "mat-icon-button", "", "type", "button", "matTooltipPosition", "above", 3, "matTooltip", "click"], [1, "material-icons"]], template: function (e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "button", 0), i["\u0275\u0275listener"]("click", function () { return t.gotoHelpPage() }), i["\u0275\u0275pipe"](1, "translate"), i["\u0275\u0275elementStart"](2, "mat-icon", 1), i["\u0275\u0275text"](3, "help"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e && i["\u0275\u0275propertyInterpolate"]("matTooltip", i["\u0275\u0275pipeBind1"](1, 1, "help.goto-help-page")) }, directives: [o.MatButton, a.MatTooltip, s.MatIcon], pipes: [l.TranslatePipe], encapsulation: 2 }), e }(); 0, void 0 }, ktVl: function (e, t, n) { "use strict"; n.d(t, "a", function () { return a }); var i = n("fXoL"), r = n("Y8nr"), o = n("tk/3"), a = function () { function e(e) { this.http = e } return e.prototype.getCustomers = function (e, t) { return this.http.get("/api/customers" + e.toQuery(), Object(r.b)(t)) }, e.prototype.getCustomer = function (e, t) { return this.http.get("/api/customer/" + e, Object(r.b)(t)) }, e.prototype.saveCustomer = function (e, t) { return this.http.post("/api/customer", e, Object(r.b)(t)) }, e.prototype.deleteCustomer = function (e, t) { return this.http.delete("/api/customer/" + e, Object(r.b)(t)) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275inject"](o.HttpClient)) }, e.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, m8m0: function (e, t, n) { "use strict"; var i; n.d(t, "c", function () { return i }), n.d(t, "b", function () { return r }), n.d(t, "a", function () { return o }), function (e) { e.START_LOAD = "[Load] Start", e.FINISH_LOAD = "[Load] Finish" }(i || (i = {})); var r = function () { this.type = i.START_LOAD }, o = function () { this.type = i.FINISH_LOAD } }, mbhL: function (e, t, n) { "use strict"; n.d(t, "a", function () { return s }), n.d(t, "d", function () { return l }), n.d(t, "e", function () { return u }), n.d(t, "b", function () { return d }), n.d(t, "c", function () { return p }); var i = n("mrSG"), r = n("4r/P"), o = n("Duvn"), a = n("//Q6"), s = 2147483647; function l(e) { return function (t, n) { return c(t, n, e) } } var c = function (e, t, n) { if (null === t || !t.length) return !0; var i = ("" + t).toLowerCase(); if (n && n.length) { if (Object.prototype.hasOwnProperty.call(e, n) && null !== (s = e[n]) && s !== Object(s) && -1 !== ("" + s).toLowerCase().indexOf(i)) return !0 } else for (var r = 0, o = Object.keys(e); r < o.length; r++) { var s; if (null !== (s = e[o[r]])) if (s !== Object(s)) { if (-1 !== ("" + s).toLowerCase().indexOf(i)) return !0 } else if (Object(a.z)(s) && c(s, t)) return !0 } return !1 }; function u(e, t, n, i) { var r = Object(a.j)(e, n), o = Object(a.j)(t, n), s = 0; if (r !== o) { var l = typeof r, c = typeof o; "number" === l && "number" === c ? s = r - o : "string" === l && "string" === c ? s = r.localeCompare(o) : ("boolean" === l && "boolean" === c || l !== c) && (r && !o ? s = 1 : !r && o && (s = -1)) } return i ? s : -1 * s } var d = function () { function e(e, t, n, i) { void 0 === t && (t = 0), void 0 === n && (n = null), void 0 === i && (i = null), this.textSearch = n, this.pageSize = e, this.page = t, this.sortOrder = i } return e.prototype.nextPageLink = function () { return new e(this.pageSize, this.page + 1, this.textSearch, this.sortOrder) }, e.prototype.toQuery = function () { var e = "?pageSize=" + this.pageSize + "&page=" + this.page; this.textSearch && this.textSearch.length && (e += "&textSearch=" + encodeURIComponent(this.textSearch)); return this.sortOrder && (e += "&sortProperty=" + this.sortOrder.property + "&sortOrder=" + this.sortOrder.direction), e }, e.prototype.sort = function (e, t) { return this.sortOrder ? u(e, t, this.sortOrder.property, this.sortOrder.direction === r.a.ASC) : 0 }, e.prototype.filterData = function (e, t) { var n = this; void 0 === t && (t = l()); var a = Object(o.a)(); if (a.data = Object(i.h)(e), this.textSearch && this.textSearch.length && (a.data = a.data.filter(function (e) { return t(e, n.textSearch) })), a.totalElements = a.data.length, a.totalPages = this.pageSize === Number.POSITIVE_INFINITY ? 1 : Math.ceil(a.totalElements / this.pageSize), this.sortOrder) { var s = this.sortOrder.property, c = this.sortOrder.direction === r.a.ASC; a.data = a.data.sort(function (e, t) { return u(e, t, s, c) }) } if (this.pageSize !== Number.POSITIVE_INFINITY) { var d = this.pageSize * this.page; a.data = a.data.slice(d, d + this.pageSize), a.hasNext = a.totalElements > d + a.data.length } return a }, e.prototype.sortDirection = function () { return this.sortOrder ? (this.sortOrder.direction + "").toLowerCase() : "" }, e }(), p = function (e) { function t(t, n, i, r, o, a) { void 0 === n && (n = 0), void 0 === i && (i = null), void 0 === r && (r = null), void 0 === o && (o = null), void 0 === a && (a = null); var s = e.call(this, t, n, i, r) || this; return s.startTime = o, s.endTime = a, s } return Object(i.d)(t, e), t.prototype.nextPageLink = function () { return new t(this.pageSize, this.page + 1, this.textSearch, this.sortOrder, this.startTime, this.endTime) }, t.prototype.toQuery = function () { var t = e.prototype.toQuery.call(this); return this.startTime && (t += "&startTime=" + this.startTime), this.endTime && (t += "&endTime=" + this.endTime), t }, t }(d) }, nfcV: function (e, t, n) { "use strict"; n.d(t, "a", function () { return I }); var i = n("mrSG"), r = n("fXoL"), o = n("FKr1"), a = n("0IaG"), s = n("3Pt+"), l = n("5yfJ"), c = n("LRne"), u = n("gmuX"), d = n("he9t"), p = (n("E9wx"), n("C4fA")), m = n("5+tZ"), f = n("xKAQ"), h = n("Uj2l"), g = n("l7P3"), y = n("tyNb"), b = ["payloadContent"], v = ["topPanel"], E = ["topLeftPanel"], T = ["topRightPanel"], S = ["bottomPanel"], C = ["bottomLeftPanel"], O = ["bottomRightPanel"], w = function (e, t, n) { return [e, t, n] }, I = function (e) { function t(t, n, i, r, o, a, s) { var l = e.call(this, t, n, o) || this; return l.store = t, l.router = n, l.data = i, l.errorStateMatcher = r, l.dialogRef = o, l.fb = a, l.ruleChainService = s, l.width = "100%", l.height = "100%", l.submitted = !1, l.contentTypes = d.b, l.functionTitle = l.data.functionTitle, l } return Object(i.d)(t, e), t.prototype.ngOnInit = function () { var e = this; this.nodeScriptTestFormGroup = this.fb.group({ payload: this.fb.group({ msgType: [this.data.msgType, [s.Validators.required]], msg: [null, []] }), metadata: [this.data.metadata, [s.Validators.required]], script: [this.data.script, []], output: ["", []] }), Object(h.c)(JSON.stringify(this.data.msg), { indent_size: 4 }).subscribe(function (t) { e.nodeScriptTestFormGroup.get("payload").get("msg").patchValue(t, { emitEvent: !1 }) }) }, t.prototype.ngAfterViewInit = function () { this.initSplitLayout(this.topPanelElmRef.first.nativeElement, this.topLeftPanelElmRef.first.nativeElement, this.topRightPanelElmRef.first.nativeElement, this.bottomPanelElmRef.first.nativeElement, this.bottomLeftPanelElmRef.first.nativeElement, this.bottomRightPanelElmRef.first.nativeElement) }, t.prototype.initSplitLayout = function (e, t, n, i, r, o) { Split([e, i], { sizes: [35, 65], gutterSize: 8, cursor: "row-resize", direction: "vertical" }), Split([t, n], { sizes: [50, 50], gutterSize: 8, cursor: "col-resize" }), Split([r, o], { sizes: [50, 50], gutterSize: 8, cursor: "col-resize" }) }, t.prototype.isErrorState = function (e, t) { var n = this.errorStateMatcher.isErrorState(e, t), i = !!(e && e.invalid && this.submitted); return n || i }, t.prototype.cancel = function () { this.dialogRef.close(null) }, t.prototype.test = function () { var e = this; this.testNodeScript().subscribe(function (t) { Object(h.c)(t, { indent_size: 4 }).subscribe(function (t) { e.nodeScriptTestFormGroup.get("output").setValue(t) }) }) }, t.prototype.testNodeScript = function () { var e = this; if (this.checkInputParamErrors()) { var t = { argNames: this.data.argNames, scriptType: this.data.scriptType, msgType: this.nodeScriptTestFormGroup.get("payload.msgType").value, msg: this.nodeScriptTestFormGroup.get("payload.msg").value, metadata: this.nodeScriptTestFormGroup.get("metadata").value, script: this.nodeScriptTestFormGroup.get("script").value }; return this.ruleChainService.testScript(t).pipe(Object(m.b)(function (t) { return t.error ? (e.store.dispatch(new f.b({ message: t.error, type: "error" })), l.a) : Object(c.a)(t.output) })) } return l.a }, t.prototype.checkInputParamErrors = function () { return this.payloadContent.validateOnSubmit(), !!this.nodeScriptTestFormGroup.get("payload").valid }, t.prototype.save = function () { var e = this; this.submitted = !0, this.testNodeScript().subscribe(function () { e.nodeScriptTestFormGroup.get("script").markAsPristine(), e.dialogRef.close(e.nodeScriptTestFormGroup.get("script").value) }) }, t.\u0275fac = function (e) { return new (e || t)(r["\u0275\u0275directiveInject"](g.Store), r["\u0275\u0275directiveInject"](y.Router), r["\u0275\u0275directiveInject"](a.MAT_DIALOG_DATA), r["\u0275\u0275directiveInject"](o.ErrorStateMatcher, 4), r["\u0275\u0275directiveInject"](a.MatDialogRef), r["\u0275\u0275directiveInject"](s.FormBuilder), r["\u0275\u0275directiveInject"](p.a)) }, t.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: t, selectors: [["tb-node-script-test-dialog"]], viewQuery: function (e, t) { if (1 & e && (r["\u0275\u0275viewQuery"](b, 3), r["\u0275\u0275viewQuery"](v, 1), r["\u0275\u0275viewQuery"](E, 1), r["\u0275\u0275viewQuery"](T, 1), r["\u0275\u0275viewQuery"](S, 1), r["\u0275\u0275viewQuery"](C, 1), r["\u0275\u0275viewQuery"](O, 1)), 2 & e) { var n = void 0; r["\u0275\u0275queryRefresh"](n = r["\u0275\u0275loadQuery"]()) && (t.payloadContent = n.first), r["\u0275\u0275queryRefresh"](n = r["\u0275\u0275loadQuery"]()) && (t.topPanelElmRef = n), r["\u0275\u0275queryRefresh"](n = r["\u0275\u0275loadQuery"]()) && (t.topLeftPanelElmRef = n), r["\u0275\u0275queryRefresh"](n = r["\u0275\u0275loadQuery"]()) && (t.topRightPanelElmRef = n), r["\u0275\u0275queryRefresh"](n = r["\u0275\u0275loadQuery"]()) && (t.bottomPanelElmRef = n), r["\u0275\u0275queryRefresh"](n = r["\u0275\u0275loadQuery"]()) && (t.bottomLeftPanelElmRef = n), r["\u0275\u0275queryRefresh"](n = r["\u0275\u0275loadQuery"]()) && (t.bottomRightPanelElmRef = n) } }, hostVars: 4, hostBindings: function (e, t) { 2 & e && r["\u0275\u0275styleProp"]("width", t.width)("height", t.height) }, features: [r["\u0275\u0275ProvidersFeature"]([{ provide: o.ErrorStateMatcher, useExisting: t }]), r["\u0275\u0275InheritDefinitionFeature"]], decls: 63, vars: 41, consts: [[1, "tb-node-script-test-dialog", 3, "formGroup", "ngSubmit"], ["fxLayout", "row", "color", "accent"], ["fxFlex", ""], ["mat-button", "", "mat-icon-button", "", "type", "button", 3, "click"], [1, "material-icons"], ["mat-dialog-content", "", "fxFlex", "", 2, "position", "relative"], [1, "tb-absolute-fill"], [1, "tb-split", "tb-split-vertical"], ["topPanel", ""], [1, "tb-split", "tb-content"], ["topLeftPanel", ""], [1, "tb-resize-container"], [1, "tb-editor-area-title-panel"], ["translate", ""], ["formGroupName", "payload", "fxLayout", "column", 2, "height", "100%"], ["fxLayout", "row"], ["formControlName", "msgType", "required", "", 2, "margin-bottom", "0", "min-width", "300px"], ["fxFlex", "", "formControlName", "msg", "validateContent", "", 3, "label", "contentType", "fillHeight"], ["payloadContent", ""], ["topRightPanel", ""], ["tb-toast", "", "toastTarget", "metadataPanel", 1, "tb-resize-container"], ["formControlName", "metadata", "titleText", "rulenode.metadata"], ["bottomPanel", ""], ["bottomLeftPanel", ""], [1, "tb-editor-area-title-panel", "tb-js-function"], ["formControlName", "script", "resultType", "object", 3, "functionName", "functionArgs", "validationArgs", "fillHeight"], ["bottomRightPanel", ""], ["fxFlex", "", "formControlName", "output", "validateContent", "false", "readonly", "true", 3, "label", "contentType", "fillHeight"], ["mat-dialog-actions", "", "fxLayout", "row"], ["mat-button", "", "mat-raised-button", "", "color", "accent", "type", "button", 3, "disabled", "click"], ["mat-button", "", "color", "accent", "type", "button", "cdkFocusInitial", "", 3, "disabled", "click"], ["mat-button", "", "mat-raised-button", "", "color", "accent", "type", "submit", 3, "disabled"]], template: function (e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "form", 0), r["\u0275\u0275listener"]("ngSubmit", function () { return t.save() }), r["\u0275\u0275elementStart"](1, "mat-toolbar", 1), r["\u0275\u0275elementStart"](2, "h2"), r["\u0275\u0275text"](3), r["\u0275\u0275pipe"](4, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](5, "span", 2), r["\u0275\u0275elementStart"](6, "button", 3), r["\u0275\u0275listener"]("click", function () { return t.cancel() }), r["\u0275\u0275elementStart"](7, "mat-icon", 4), r["\u0275\u0275text"](8, "close"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](9, "div", 5), r["\u0275\u0275elementStart"](10, "div", 6), r["\u0275\u0275elementStart"](11, "div", 7, 8), r["\u0275\u0275elementStart"](13, "div", 9, 10), r["\u0275\u0275elementStart"](15, "div", 11), r["\u0275\u0275elementStart"](16, "div", 12), r["\u0275\u0275elementStart"](17, "label", 13), r["\u0275\u0275text"](18, "rulenode.message"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](19, "div", 14), r["\u0275\u0275elementStart"](20, "div", 15), r["\u0275\u0275element"](21, "tb-message-type-autocomplete", 16), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](22, "tb-json-content", 17, 18), r["\u0275\u0275pipe"](24, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](25, "div", 9, 19), r["\u0275\u0275elementStart"](27, "div", 20), r["\u0275\u0275elementStart"](28, "div", 12), r["\u0275\u0275elementStart"](29, "label", 13), r["\u0275\u0275text"](30, "rulenode.metadata"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](31, "tb-key-val-map", 21), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](32, "div", 7, 22), r["\u0275\u0275elementStart"](34, "div", 9, 23), r["\u0275\u0275elementStart"](36, "div", 11), r["\u0275\u0275elementStart"](37, "div", 24), r["\u0275\u0275elementStart"](38, "label"), r["\u0275\u0275text"](39), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](40, "tb-js-func", 25), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](41, "div", 9, 26), r["\u0275\u0275elementStart"](43, "div", 11), r["\u0275\u0275elementStart"](44, "div", 12), r["\u0275\u0275elementStart"](45, "label", 13), r["\u0275\u0275text"](46, "rulenode.output"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](47, "tb-json-content", 27), r["\u0275\u0275pipe"](48, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](49, "div", 28), r["\u0275\u0275elementStart"](50, "button", 29), r["\u0275\u0275listener"]("click", function () { return t.test() }), r["\u0275\u0275pipe"](51, "async"), r["\u0275\u0275text"](52), r["\u0275\u0275pipe"](53, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](54, "span", 2), r["\u0275\u0275elementStart"](55, "button", 30), r["\u0275\u0275listener"]("click", function () { return t.cancel() }), r["\u0275\u0275pipe"](56, "async"), r["\u0275\u0275text"](57), r["\u0275\u0275pipe"](58, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](59, "button", 31), r["\u0275\u0275pipe"](60, "async"), r["\u0275\u0275text"](61), r["\u0275\u0275pipe"](62, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]()), 2 & e && (r["\u0275\u0275property"]("formGroup", t.nodeScriptTestFormGroup), r["\u0275\u0275advance"](3), r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](4, 19, "rulenode.test-script-function")), r["\u0275\u0275advance"](19), r["\u0275\u0275propertyInterpolate"]("label", r["\u0275\u0275pipeBind1"](24, 21, "rulenode.message")), r["\u0275\u0275property"]("contentType", t.contentTypes.JSON)("fillHeight", !0), r["\u0275\u0275advance"](17), r["\u0275\u0275textInterpolate"](t.functionTitle), r["\u0275\u0275advance"](1), r["\u0275\u0275propertyInterpolate"]("functionName", t.data.functionName), r["\u0275\u0275property"]("functionArgs", t.data.argNames)("validationArgs", r["\u0275\u0275pureFunction3"](37, w, t.data.msg, t.data.metadata, t.data.msgType))("fillHeight", !0), r["\u0275\u0275advance"](7), r["\u0275\u0275propertyInterpolate"]("label", r["\u0275\u0275pipeBind1"](48, 23, "rulenode.output")), r["\u0275\u0275property"]("contentType", t.contentTypes.JSON)("fillHeight", !0), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("disabled", r["\u0275\u0275pipeBind1"](51, 25, t.isLoading$) || t.nodeScriptTestFormGroup.invalid), r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](53, 27, "rulenode.test"), " "), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("disabled", r["\u0275\u0275pipeBind1"](56, 29, t.isLoading$)), r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](58, 31, "action.cancel"), " "), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("disabled", r["\u0275\u0275pipeBind1"](60, 33, t.isLoading$) || t.nodeScriptTestFormGroup.get("script").invalid || !t.nodeScriptTestFormGroup.get("script").dirty), r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](62, 35, "action.save"), " ")) }, styles: [".tb-node-script-test-dialog{width:100%;height:100%}.tb-node-script-test-dialog .tb-split{box-sizing:border-box;overflow-x:hidden;overflow-y:auto}.tb-node-script-test-dialog .ace_editor{font-size:14px!important}.tb-node-script-test-dialog .tb-content{padding-top:5px;padding-left:5px;border:1px solid silver}.tb-node-script-test-dialog .gutter{background-color:#eee;background-repeat:no-repeat;background-position:50%}.tb-node-script-test-dialog .gutter.gutter-horizontal{cursor:col-resize;background-image:url(vertical.5e6d1df402c3bc10ecc6.png)}.tb-node-script-test-dialog .gutter.gutter-vertical{cursor:row-resize;background-image:url(horizontal.98604ef1a5065a065f35.png)}.tb-node-script-test-dialog .gutter.gutter-horizontal,.tb-node-script-test-dialog .tb-split.tb-split-horizontal{float:left;height:100%}.tb-node-script-test-dialog .tb-split.tb-split-vertical{display:flex}.tb-node-script-test-dialog .tb-split.tb-split-vertical .tb-split.tb-content{height:100%}.tb-node-script-test-dialog div.tb-editor-area-title-panel{position:absolute;top:13px;right:40px;z-index:5;font-size:.8rem;font-weight:500}.tb-node-script-test-dialog div.tb-editor-area-title-panel.tb-js-function{right:80px}.tb-node-script-test-dialog div.tb-editor-area-title-panel label{padding:4px;color:#00acc1;background:hsla(0,0%,86%,.35);border-radius:5px}.tb-node-script-test-dialog div.tb-editor-area-title-panel .mat-button{min-width:32px;min-height:15px;padding:4px;margin:0;font-size:.8rem;line-height:15px;color:#7b7b7b;background:hsla(0,0%,86%,.35)}.tb-node-script-test-dialog .tb-resize-container{position:relative;width:100%;height:100%;overflow-y:auto}.tb-node-script-test-dialog .tb-resize-container .ace_editor{height:100%}"], encapsulation: 2 }), t }(u.a); 0, void 0 }, nhHW: function (e, t, n) { "use strict"; n.d(t, "a", function () { return o }); var i = n("fXoL"), r = n("wtyh"), o = function () { function e(e, t) { this.window = e, this.ngZone = t; var n = e.requestAnimationFrame || e.webkitRequestAnimationFrame, i = e.cancelAnimationFrame || e.webkitCancelAnimationFrame || e.webkitCancelRequestAnimationFrame; this.rafSupported = !!n, this.rafSupported ? this.rafFunction = function (e) { var t = n(e); return function () { i(t) } } : this.rafFunction = function (e) { var t = setTimeout(e, 16.66); return function () { clearTimeout(t) } } } return e.prototype.raf = function (e, t) { var n = this; return void 0 === t && (t = !1), t ? this.rafFunction(e) : this.ngZone.runOutsideAngular(function () { return n.rafFunction(e) }) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275inject"](r.b), i["\u0275\u0275inject"](i.NgZone)) }, e.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, nii4: function (e, t, n) { "use strict"; n.d(t, "a", function () { return S }); var i = n("mrSG"), r = n("fXoL"), o = n("RxGS"), a = n("3Pt+"), s = n("8LU1"), l = n("S+vS"), c = n("l7P3"), u = n("sYmb"), d = n("kmnG"), p = n("ofXK"), m = n("znSr"), f = n("qFsG"), h = n("NFeN"), g = n("bTqV"); function y(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "mat-icon"), r["\u0275\u0275text"](1), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = r["\u0275\u0275nextContext"](); r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate"](n.icon) } } function b(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "span"), r["\u0275\u0275text"](1), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = r["\u0275\u0275nextContext"](); r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate"](n.label) } } function v(e, t) { if (1 & e) { var n = r["\u0275\u0275getCurrentView"](); r["\u0275\u0275elementStart"](0, "button", 6), r["\u0275\u0275listener"]("click", function () { return r["\u0275\u0275restoreView"](n), r["\u0275\u0275nextContext"]().clear() }), r["\u0275\u0275elementStart"](1, "mat-icon", 7), r["\u0275\u0275text"](2, "close"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]() } } function E(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "mat-error"), r["\u0275\u0275text"](1), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = r["\u0275\u0275nextContext"](); r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate1"](" ", n.requiredText, " ") } } var T = function (e) { return { background: e } }, S = function (e) { function t(t, n, i, r) { var o = e.call(this, t) || this; return o.store = t, o.dialogs = n, o.translate = i, o.fb = r, o.propagateChange = null, o } return Object(i.d)(t, e), Object.defineProperty(t.prototype, "colorClearButton", { get: function () { return this.colorClearButtonValue }, set: function (e) { var t = Object(s.coerceBooleanProperty)(e); this.colorClearButtonValue !== t && (this.colorClearButtonValue = t) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "openOnInput", { get: function () { return this.openOnInputValue }, set: function (e) { var t = Object(s.coerceBooleanProperty)(e); this.openOnInputValue !== t && (this.openOnInputValue = t) }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "required", { get: function () { return this.requiredValue }, set: function (e) { var t = Object(s.coerceBooleanProperty)(e); this.requiredValue !== t && (this.requiredValue = t, this.updateValidators()) }, enumerable: !1, configurable: !0 }), t.prototype.ngOnInit = function () { var e = this; this.colorFormGroup = this.fb.group({ color: [null, this.required ? [a.Validators.required] : []] }), this.colorFormGroup.valueChanges.subscribe(function () { e.updateModel() }) }, t.prototype.updateValidators = function () { this.colorFormGroup && (this.colorFormGroup.get("color").setValidators(this.required ? [a.Validators.required] : []), this.colorFormGroup.get("color").updateValueAndValidity()) }, t.prototype.registerOnChange = function (e) { this.propagateChange = e }, t.prototype.registerOnTouched = function (e) { }, t.prototype.setDisabledState = function (e) { this.disabled = e, e ? this.colorFormGroup.disable({ emitEvent: !1 }) : this.colorFormGroup.enable({ emitEvent: !1 }) }, t.prototype.writeValue = function (e) { this.modelValue = e, this.colorFormGroup.patchValue({ color: this.modelValue }, { emitEvent: !1 }) }, t.prototype.updateModel = function () { var e = this.colorFormGroup.get("color").value; this.modelValue !== e && (this.modelValue = e, this.propagateChange(this.modelValue)) }, t.prototype.showColorPicker = function () { var e = this; this.dialogs.colorPicker(this.colorFormGroup.get("color").value).subscribe(function (t) { t && e.colorFormGroup.patchValue({ color: t }, { emitEvent: !0 }) }) }, t.prototype.clear = function () { this.colorFormGroup.get("color").patchValue(null, { emitEvent: !0 }) }, t.\u0275fac = function (e) { return new (e || t)(r["\u0275\u0275directiveInject"](c.Store), r["\u0275\u0275directiveInject"](l.a), r["\u0275\u0275directiveInject"](u.TranslateService), r["\u0275\u0275directiveInject"](a.FormBuilder)) }, t.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: t, selectors: [["tb-color-input"]], inputs: { icon: "icon", label: "label", requiredText: "requiredText", colorClearButton: "colorClearButton", openOnInput: "openOnInput", required: "required", disabled: "disabled" }, features: [r["\u0275\u0275ProvidersFeature"]([{ provide: a.NG_VALUE_ACCESSOR, useExisting: Object(r.forwardRef)(function () { return t }), multi: !0 }]), r["\u0275\u0275InheritDefinitionFeature"]], decls: 9, vars: 9, consts: [[3, "formGroup"], [4, "ngIf"], ["matPrefix", "", 1, "tb-color-preview", 2, "margin-right", "5px", 3, "click"], [1, "tb-color-result", 3, "ngStyle"], ["matInput", "", "formControlName", "color", 3, "required", "mousedown"], ["type", "button", "matSuffix", "", "mat-button", "", "mat-icon-button", "", "aria-label", "Clear", 3, "click", 4, "ngIf"], ["type", "button", "matSuffix", "", "mat-button", "", "mat-icon-button", "", "aria-label", "Clear", 3, "click"], [1, "material-icons"]], template: function (e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "mat-form-field", 0), r["\u0275\u0275elementStart"](1, "mat-label"), r["\u0275\u0275template"](2, y, 2, 1, "mat-icon", 1), r["\u0275\u0275template"](3, b, 2, 1, "span", 1), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](4, "div", 2), r["\u0275\u0275listener"]("click", function () { return !t.disabled && t.showColorPicker() }), r["\u0275\u0275element"](5, "div", 3), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](6, "input", 4), r["\u0275\u0275listener"]("mousedown", function () { return t.openOnInput && t.showColorPicker() }), r["\u0275\u0275elementEnd"](), r["\u0275\u0275template"](7, v, 3, 0, "button", 5), r["\u0275\u0275template"](8, E, 2, 1, "mat-error", 1), r["\u0275\u0275elementEnd"]()), 2 & e && (r["\u0275\u0275property"]("formGroup", t.colorFormGroup), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngIf", t.icon), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", t.label), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngStyle", r["\u0275\u0275pureFunction1"](7, T, t.colorFormGroup.get("color").value)), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("required", t.required), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", t.colorClearButton), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", t.colorFormGroup.get("color").hasError("required"))) }, directives: [d.MatFormField, a.NgControlStatusGroup, a.FormGroupDirective, d.MatLabel, p.NgIf, d.MatPrefix, p.NgStyle, m.e, f.MatInput, a.DefaultValueAccessor, a.NgControlStatus, a.FormControlName, a.RequiredValidator, h.MatIcon, g.MatButton, d.MatSuffix, d.MatError], styles: ["[_nghost-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .mat-form-field-infix{width:150px}"] }), t }(o.a); 0, void 0 }, oKkZ: function (e, t, n) { "use strict"; n.d(t, "a", function () { return i }); var i = "13814000-1dd2-11b2-8080-808080808080" }, oXES: function (e, t, n) { "use strict"; n.d(t, "a", function () { return s }); var i = n("fXoL"), r = n("0IaG"), o = n("XiUz"), a = n("bTqV"), s = function () { function e(e, t) { this.dialogRef = e, this.data = t } return e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](r.MatDialogRef), i["\u0275\u0275directiveInject"](r.MAT_DIALOG_DATA)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-confirm-dialog"]], decls: 8, vars: 6, consts: [["mat-dialog-title", ""], ["mat-dialog-content", "", 3, "innerHTML"], ["mat-dialog-actions", "", "fxLayoutAlign", "end center"], ["mat-button", "", "color", "accent", 3, "mat-dialog-close"], ["mat-button", "", "color", "accent", "cdkFocusInitial", "", 3, "mat-dialog-close"]], template: function (e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "h2", 0), i["\u0275\u0275text"](1), i["\u0275\u0275elementEnd"](), i["\u0275\u0275element"](2, "div", 1), i["\u0275\u0275elementStart"](3, "div", 2), i["\u0275\u0275elementStart"](4, "button", 3), i["\u0275\u0275text"](5), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](6, "button", 4), i["\u0275\u0275text"](7), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate"](t.data.title), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("innerHTML", t.data.message, i["\u0275\u0275sanitizeHtml"]), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("mat-dialog-close", !1), i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate"](t.data.cancel), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("mat-dialog-close", !0), i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate"](t.data.ok)) }, directives: [r.MatDialogTitle, r.MatDialogContent, r.MatDialogActions, o.e, a.MatButton, r.MatDialogClose], styles: ["[_nghost-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]{padding:0 24px 24px}"] }), e }(); 0, void 0 }, pKmL: function (e, t, n) { "use strict"; n.d(t, "b", function () { return z }), n.d(t, "a", function () { return H }); var i = n("fXoL"), r = n("ofXK"), o = n("tk/3"), a = n("l7P3"), s = n("9jGm"), l = n("agSv"), c = n("Vurf"), u = n("he9t"), d = n("C60G"), p = n("nYR2"), m = n("JIr8"), f = n("3E0/"), h = n("5+tZ"), g = n("eIep"), y = n("z6cu"), b = n("LRne"), v = n("iQEk"), E = n("m8m0"), T = n("xKAQ"), S = n("S+vS"), C = n("sYmb"), O = {}, w = function () { function e(e, t, n, i) { this.store = e, this.dialogService = t, this.translate = n, this.authService = i, this.AUTH_SCHEME = "Bearer ", this.AUTH_HEADER_NAME = "X-Authorization", this.internalUrlPrefixes = ["/api/auth/token", "/api/rpc"], this.activeRequests = 0 } return e.prototype.intercept = function (e, t) { var n = this; if (e.url.startsWith("/api/")) { var i = this.getInterceptorConfig(e); this.updateLoadingState(i, !0); return (this.isTokenBasedAuthEntryPoint(e.url) ? c.a.getJwtToken() || this.authService.refreshTokenPending() ? c.a.isJwtTokenValid() ? this.jwtIntercept(e, t) : this.handleResponseError(e, t, new o.HttpErrorResponse({ error: { refreshTokenPending: !0 } })) : this.handleResponseError(e, t, new o.HttpErrorResponse({ error: { message: "Unauthorized!" }, status: 401 })) : this.handleRequest(e, t)).pipe(Object(p.a)(function () { e.url.startsWith("/api/") && n.updateLoadingState(i, !1) })) } return t.handle(e) }, e.prototype.jwtIntercept = function (e, t) { var n = this.updateAuthorizationHeader(e); return n ? this.handleRequest(n, t) : Object(y.a)(new Error("Could not get JWT token from store.")) }, e.prototype.handleRequest = function (e, t) { var n = this; return t.handle(e).pipe(Object(m.a)(function (i) { var r = i; return n.handleResponseError(e, t, r) })) }, e.prototype.handleResponseError = function (e, t, n) { var i = this.getInterceptorConfig(e), r = !1, o = i.ignoreErrors, a = i.resendRequest, s = n.error ? n.error.errorCode : null; if (n.error && n.error.refreshTokenPending || 401 === n.status) { if (n.error && n.error.refreshTokenPending || s && s === u.a.serverErrorCode.jwtTokenExpired) return this.refreshTokenAndRetry(e, t); s !== u.a.serverErrorCode.credentialsExpired && (r = !0) } else if (429 === n.status) { if (a) return this.retryRequest(e, t) } else 403 === n.status ? o || this.dialogService.forbidden() : 0 === n.status || -1 === n.status ? this.showError("Unable to connect") : e.url.startsWith("/api/rpc") || e.url.startsWith("/api/plugins/rpc") || (404 === n.status ? o || this.showError(e.method + ": " + e.url + "<br/>" + n.status + ": " + n.statusText) : r = !0); if (r && !o) { var l = null; if ("text" === e.responseType) try { l = n.error ? JSON.parse(n.error) : null } catch (c) { } else l = n.error; l && !l.message ? this.showError(this.prepareMessageFromData(l)) : l && l.message ? this.showError(l.message, l.timeout ? l.timeout : 0) : this.showError("Unhandled error code " + (l ? l.status : "'Unknown'")) } return Object(y.a)(n) }, e.prototype.prepareMessageFromData = function (e) { if ("object" != typeof e || e.constructor !== ArrayBuffer) return e; var t = String.fromCharCode.apply(null, new Uint8Array(e)); try { var n = JSON.parse(t); return n.message ? n.message : t } catch (i) { return t } }, e.prototype.retryRequest = function (e, t) { var n = this, i = 1e3 + 3e3 * Math.random(); return Object(b.a)(null).pipe(Object(f.a)(i), Object(h.b)(function () { return n.jwtIntercept(e, t) })) }, e.prototype.refreshTokenAndRetry = function (e, t) { var n = this; return this.authService.refreshJwtToken().pipe(Object(g.a)(function () { return n.jwtIntercept(e, t) }), Object(m.a)(function (i) { n.authService.logout(!0); var r = i ? i.message : "Unauthorized!"; return n.handleResponseError(e, t, new o.HttpErrorResponse({ error: { message: r, timeout: 200 }, status: 401 })) })) }, e.prototype.updateAuthorizationHeader = function (e) { var t = c.a.getJwtToken(); return t ? e = e.clone({ setHeaders: (O = {}, O[this.AUTH_HEADER_NAME] = "" + this.AUTH_SCHEME + t, O) }) : null }, e.prototype.isInternalUrlPrefix = function (e) { for (var t in this.internalUrlPrefixes) if (e.startsWith(this.internalUrlPrefixes[t])) return !0; return !1 }, e.prototype.isTokenBasedAuthEntryPoint = function (e) { return e.startsWith("/api/") && !e.startsWith(u.a.entryPoints.login) && !e.startsWith(u.a.entryPoints.tokenRefresh) && !e.startsWith(u.a.entryPoints.nonTokenBased) }, e.prototype.updateLoadingState = function (e, t) { e.ignoreLoading || (t ? this.activeRequests++ : this.activeRequests--, 1 === this.activeRequests && t ? this.store.dispatch(new E.b) : 0 === this.activeRequests && this.store.dispatch(new E.a)) }, e.prototype.getInterceptorConfig = function (e) { var t; return t = e.params && e.params instanceof d.a ? e.params.interceptorConfig : new v.a(!1, !1), this.isInternalUrlPrefix(e.url) && (t.ignoreLoading = !0), t }, e.prototype.showError = function (e, t) { var n = this; void 0 === t && (t = 0), setTimeout(function () { n.store.dispatch(new T.b({ message: e, type: "error" })) }, t) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275inject"](a.Store), i["\u0275\u0275inject"](S.a), i["\u0275\u0275inject"](C.TranslateService), i["\u0275\u0275inject"](c.a)) }, e.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac }), e }(); 0, void 0; var I = n("Vz2p"), x = n("AytR"), M = n("mqiu"), j = function () { function e() { } return e.prototype.handle = function (e) { e.key && !e.key.startsWith(u.j) && console.warn("Translation for " + e.key + " doesn't exist") }, e }(), A = n("bTqV"), R = n("0IaG"), N = n("dNgK"), P = n("YUcS"), k = n("mrSG"), _ = n("djKD"), F = n("5V+5"), L = n.n(F), D = function (e) { function t(t) { return e.call(this, t) || this } return Object(k.d)(t, e), t.prototype.compile = function (e, t) { return this.defaultCompile(e, t) }, t.prototype.compileTranslations = function (e, t) { return this.defaultCompile(e, t) }, t.prototype.defaultCompile = function (t, n) { if ("object" != typeof t) return this.checkIsPlural(t) ? e.prototype.compile.call(this, t, n) : t; for (var i = {}, r = 0, o = Object.keys(t); r < o.length; r++) { var a = o[r]; i[a] = this.defaultCompile(t[a], n) } return i }, t.prototype.checkIsPlural = function (e) { var t; try { t = L.a.parse(e.replace(/\{\{/g, "{").replace(/\}\}/g, "}"), { cardinal: [], ordinal: [] }) } catch (n) { return console.warn("Failed to parse source: " + e), console.error(n), !1 } return t.filter(function (e) { return "string" != typeof e && "plural" === e.type }).length > 0 }, t.\u0275fac = function (e) { return new (e || t)(i["\u0275\u0275inject"](_.a, 8)) }, t.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: t, factory: t.\u0275fac, providedIn: "root" }), t }(_.b); 0, void 0; var V = n("wtyh"), U = n("yl57"), B = n("//Q6"), G = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.templateMatcher = /{{\s?([^{}\s]*)\s?}}/g, t } return Object(k.d)(t, e), t.prototype.interpolate = function (e, t) { var n; return "string" == typeof e ? n = this.interpolateString(e, t) : "function" == typeof e ? "string" == typeof (n = this.interpolateFunction(e, t)) && (n = this.interpolateString(n, t)) : n = e, n }, t.prototype.getValue = function (e, t) { var n = "string" == typeof t ? t.split(".") : [t]; t = ""; do { t += n.shift(), !Object(B.o)(e) || !Object(B.o)(e[t]) || "object" != typeof e[t] && n.length ? n.length ? t += "." : e = void 0 : (e = e[t], t = "") } while (n.length); return e }, t.prototype.interpolateFunction = function (e, t) { return e(t) }, t.prototype.interpolateString = function (e, t) { var n = this; return t ? e.replace(this.templateMatcher, function (e, i) { var r = n.getValue(t, i); return Object(B.o)(r) ? r : e }) : e }, t.\u0275fac = function (e) { return q(e || t) }, t.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: t, factory: t.\u0275fac, providedIn: "root" }), t }(C.TranslateParser), q = i["\u0275\u0275getInheritedFactory"](G); function z(e) { return new M.a(e, "./assets/locale/locale.constant-", ".json") } 0, void 0; var H = function () { function e() { } return e.\u0275fac = function (t) { return new (t || e) }, e.\u0275mod = i["\u0275\u0275defineNgModule"]({ type: e }), e.\u0275inj = i["\u0275\u0275defineInjector"]({ providers: [{ provide: o.HTTP_INTERCEPTORS, useClass: w, multi: !0 }, V.c], imports: [[r.CommonModule, o.HttpClientModule, P.FlexLayoutModule.withConfig({ addFlexToParent: !1 }), R.MatDialogModule, A.MatButtonModule, N.MatSnackBarModule, C.TranslateModule.forRoot({ loader: { provide: C.TranslateLoader, useFactory: z, deps: [o.HttpClient] }, missingTranslationHandler: { provide: C.MissingTranslationHandler, useClass: j }, compiler: { provide: C.TranslateCompiler, useClass: D }, parser: { provide: C.TranslateParser, useClass: G } }), U.b.forRoot(), a.StoreModule.forRoot(I.c, { metaReducers: I.b, runtimeChecks: { strictStateImmutability: !0, strictActionImmutability: !0, strictStateSerializability: !0, strictActionSerializability: !0 } }), s.c.forRoot(I.a), x.a.production ? [] : l.a.instrument({ name: x.a.appTitle })]] }), e }(); void (("undefined" == typeof ngJitMode || ngJitMode) && i["\u0275\u0275setNgModuleScope"](H, { imports: [r.CommonModule, o.HttpClientModule, P.FlexLayoutModule, R.MatDialogModule, A.MatButtonModule, N.MatSnackBarModule, C.TranslateModule, U.b, a.StoreRootModule, s.d] })), 0 }, pd1A: function (e, t, n) { "use strict"; n.d(t, "a", function () { return A }); var i = n("fXoL"), r = n("3Pt+"), o = n("LRne"), a = n("vkgz"), s = n("lJxs"), l = n("5+tZ"), c = n("w1tV"), u = n("8LU1"), d = n("/1cH"), p = n("aX2P"), m = n("//Q6"), f = n("l7P3"), h = n("sYmb"), g = n("kmnG"), y = n("XiUz"), b = n("qFsG"), v = n("ofXK"), E = n("bTqV"), T = n("NFeN"), S = n("FKr1"), C = n("d5eY"), O = ["timezoneInput"]; function w(e, t) { if (1 & e) { var n = i["\u0275\u0275getCurrentView"](); i["\u0275\u0275elementStart"](0, "button", 10), i["\u0275\u0275listener"]("mousedown", function () { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().ignoreClosePanel = !0 })("click", function () { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().clear() }), i["\u0275\u0275elementStart"](1, "mat-icon", 11), i["\u0275\u0275text"](2, "close"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]() } } function I(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-option", 12), i["\u0275\u0275element"](1, "span", 13), i["\u0275\u0275pipe"](2, "highlight"), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit, r = i["\u0275\u0275nextContext"](); i["\u0275\u0275property"]("value", n), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("innerHTML", i["\u0275\u0275pipeBind2"](2, 2, r.displayTimezoneFn(n), r.searchText), i["\u0275\u0275sanitizeHtml"]) } } var x = function (e) { return { timezone: e } }; function M(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-option", 12), i["\u0275\u0275elementStart"](1, "span"), i["\u0275\u0275text"](2), i["\u0275\u0275pipe"](3, "async"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275nextContext"](); i["\u0275\u0275property"]("value", null), i["\u0275\u0275advance"](2), i["\u0275\u0275textInterpolate1"](" ", i["\u0275\u0275pipeBind1"](3, 2, n.translate.get("timezone.no-timezones-matching", i["\u0275\u0275pureFunction1"](4, x, n.searchText))), " ") } } function j(e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "mat-error"), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"](" ", i["\u0275\u0275pipeBind1"](2, 1, "timezone.timezone-required"), " ")) } var A = function () { function e(e, t, n, i) { this.store = e, this.translate = t, this.ngZone = n, this.fb = i, this.defaultTimezoneId = null, this.searchText = "", this.ignoreClosePanel = !1, this.dirty = !1, this.propagateChange = function (e) { }, this.selectTimezoneFormGroup = this.fb.group({ timezone: [null] }) } return Object.defineProperty(e.prototype, "defaultTimezone", { set: function (e) { this.defaultTimezoneId !== e && (this.defaultTimezoneId = e) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "required", { get: function () { return this.requiredValue }, set: function (e) { this.requiredValue = Object(u.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "userTimezoneByDefault", { get: function () { return this.userTimezoneByDefaultValue }, set: function (e) { this.userTimezoneByDefaultValue = Object(u.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "localBrowserTimezonePlaceholderOnEmpty", { get: function () { return this.localBrowserTimezonePlaceholderOnEmptyValue }, set: function (e) { this.localBrowserTimezonePlaceholderOnEmptyValue = Object(u.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.ngOnInit = function () { var e = this; this.filteredTimezones = this.selectTimezoneFormGroup.get("timezone").valueChanges.pipe(Object(a.a)(function (t) { var n; n = "string" != typeof t && t ? t.id : null, e.updateView(n), null === t && e.clear() }), Object(s.a)(function (e) { return e ? "string" == typeof e ? e : e.name : "" }), Object(l.b)(function (t) { return e.fetchTimezones(t) }), Object(c.a)()) }, e.prototype.ngAfterViewInit = function () { }, e.prototype.setDisabledState = function (e) { this.disabled = e, this.disabled ? this.selectTimezoneFormGroup.disable({ emitEvent: !1 }) : this.selectTimezoneFormGroup.enable({ emitEvent: !1 }) }, e.prototype.writeValue = function (e) { var t = this; this.searchText = ""; var n = Object(p.G)(e, this.defaultTimezoneId, this.userTimezoneByDefaultValue); null !== n ? (this.selectTimezoneFormGroup.get("timezone").patchValue(n, { emitEvent: !1 }), n.id !== e ? setTimeout(function () { t.updateView(n.id) }, 0) : this.modelValue = e) : (this.modelValue = null, this.localBrowserTimezonePlaceholderOnEmptyValue ? this.selectTimezoneFormGroup.get("timezone").patchValue(this.getLocalBrowserTimezoneInfoPlaceholder(), { emitEvent: !1 }) : this.selectTimezoneFormGroup.get("timezone").patchValue("", { emitEvent: !1 })), this.dirty = !0 }, e.prototype.onFocus = function () { this.dirty && (this.selectTimezoneFormGroup.get("timezone").updateValueAndValidity({ onlySelf: !0, emitEvent: !0 }), this.dirty = !1) }, e.prototype.onPanelClosed = function () { var e = this; if (this.ignoreClosePanel) this.ignoreClosePanel = !1; else if (!this.modelValue) if (this.defaultTimezoneId || this.userTimezoneByDefaultValue) { var t = Object(p.G)(this.defaultTimezoneId, this.defaultTimezoneId, this.userTimezoneByDefaultValue); null !== t && this.ngZone.run(function () { e.selectTimezoneFormGroup.get("timezone").reset(t, { emitEvent: !0 }) }) } else this.localBrowserTimezonePlaceholderOnEmptyValue && this.ngZone.run(function () { e.selectTimezoneFormGroup.get("timezone").reset(e.getLocalBrowserTimezoneInfoPlaceholder(), { emitEvent: !0 }) }) }, e.prototype.updateView = function (e) { this.modelValue !== e && (this.modelValue = e, this.propagateChange(this.modelValue)) }, e.prototype.displayTimezoneFn = function (e) { return e ? e.name + " (" + e.offset + ")" : void 0 }, e.prototype.fetchTimezones = function (e) { return this.searchText = e, e && e.length ? Object(o.a)(this.loadTimezones().filter(function (t) { return t.name.toLowerCase().includes(e.toLowerCase()) })) : Object(o.a)(this.loadTimezones()) }, e.prototype.clear = function () { var e = this; this.selectTimezoneFormGroup.get("timezone").patchValue("", { emitEvent: !0 }), setTimeout(function () { e.timezoneInputTrigger.openPanel() }, 0) }, e.prototype.loadTimezones = function () { var e; return this.timezones || (this.timezones = [], this.localBrowserTimezonePlaceholderOnEmptyValue && this.timezones.push(this.getLocalBrowserTimezoneInfoPlaceholder()), (e = this.timezones).push.apply(e, Object(p.H)())), this.timezones }, e.prototype.getLocalBrowserTimezoneInfoPlaceholder = function () { return this.localBrowserTimezoneInfoPlaceholder || (this.localBrowserTimezoneInfoPlaceholder = Object(m.e)(Object(p.D)()), this.localBrowserTimezoneInfoPlaceholder.id = null, this.localBrowserTimezoneInfoPlaceholder.name = this.translate.instant("timezone.browser-time")), this.localBrowserTimezoneInfoPlaceholder }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](f.Store), i["\u0275\u0275directiveInject"](h.TranslateService), i["\u0275\u0275directiveInject"](i.NgZone), i["\u0275\u0275directiveInject"](r.FormBuilder)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-timezone-select"]], viewQuery: function (e, t) { if (1 & e && i["\u0275\u0275viewQuery"](O, 3, d.MatAutocompleteTrigger), 2 & e) { var n; i["\u0275\u0275queryRefresh"](n = i["\u0275\u0275loadQuery"]()) && (t.timezoneInputTrigger = n.first) } }, inputs: { defaultTimezone: "defaultTimezone", required: "required", userTimezoneByDefault: "userTimezoneByDefault", localBrowserTimezonePlaceholderOnEmpty: "localBrowserTimezonePlaceholderOnEmpty", disabled: "disabled" }, features: [i["\u0275\u0275ProvidersFeature"]([{ provide: r.NG_VALUE_ACCESSOR, useExisting: Object(i.forwardRef)(function () { return e }), multi: !0 }])], decls: 14, vars: 15, consts: [["fxFlex", "", 1, "mat-block", 3, "formGroup"], ["translate", ""], ["matInput", "", "type", "text", "formControlName", "timezone", 3, "placeholder", "required", "matAutocomplete", "focusin"], ["timezoneInput", ""], ["type", "button", "style", "margin-right: 1px", "matSuffix", "", "mat-button", "", "mat-icon-button", "", "aria-label", "Clear", 3, "mousedown", "click", 4, "ngIf"], [1, "tb-autocomplete", 3, "displayWith", "closed", "optionSelected"], ["timezoneAutocomplete", "matAutocomplete"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value", 4, "ngIf"], [4, "ngIf"], ["type", "button", "matSuffix", "", "mat-button", "", "mat-icon-button", "", "aria-label", "Clear", 2, "margin-right", "1px", 3, "mousedown", "click"], [1, "material-icons"], [3, "value"], [3, "innerHTML"]], template: function (e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-form-field", 0), i["\u0275\u0275elementStart"](1, "mat-label", 1), i["\u0275\u0275text"](2, "timezone.timezone"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](3, "input", 2, 3), i["\u0275\u0275listener"]("focusin", function () { return t.onFocus() }), i["\u0275\u0275pipe"](5, "translate"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](6, w, 3, 0, "button", 4), i["\u0275\u0275elementStart"](7, "mat-autocomplete", 5, 6), i["\u0275\u0275listener"]("closed", function () { return t.onPanelClosed() })("optionSelected", function () { return t.ignoreClosePanel = !0 }), i["\u0275\u0275template"](9, I, 3, 5, "mat-option", 7), i["\u0275\u0275pipe"](10, "async"), i["\u0275\u0275template"](11, M, 4, 6, "mat-option", 8), i["\u0275\u0275pipe"](12, "async"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](13, j, 3, 3, "mat-error", 9), i["\u0275\u0275elementEnd"]()), 2 & e) { var n, r = i["\u0275\u0275reference"](8); i["\u0275\u0275property"]("formGroup", t.selectTimezoneFormGroup), i["\u0275\u0275advance"](3), i["\u0275\u0275propertyInterpolate"]("placeholder", i["\u0275\u0275pipeBind1"](5, 9, "timezone.select-timezone")), i["\u0275\u0275property"]("required", t.required)("matAutocomplete", r), i["\u0275\u0275advance"](3), i["\u0275\u0275property"]("ngIf", t.selectTimezoneFormGroup.get("timezone").value && !t.disabled), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("displayWith", t.displayTimezoneFn), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngForOf", i["\u0275\u0275pipeBind1"](10, 11, t.filteredTimezones)), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngIf", !(null != (n = i["\u0275\u0275pipeBind1"](12, 13, t.filteredTimezones)) && n.length)), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngIf", t.selectTimezoneFormGroup.get("timezone").hasError("required")) } }, directives: [g.MatFormField, y.b, r.NgControlStatusGroup, r.FormGroupDirective, g.MatLabel, h.TranslateDirective, b.MatInput, r.DefaultValueAccessor, d.MatAutocompleteTrigger, r.NgControlStatus, r.FormControlName, r.RequiredValidator, v.NgIf, d.MatAutocomplete, v.NgForOf, E.MatButton, g.MatSuffix, T.MatIcon, S.MatOption, g.MatError], pipes: [h.TranslatePipe, v.AsyncPipe, C.a], encapsulation: 2 }), e }(); 0, void 0 }, qPGf: function (e, t, n) { "use strict"; n.d(t, "a", function () { return B }); var i = n("fXoL"), r = n("3Pt+"), o = n("LRne"), a = n("Kj3r"), s = n("vkgz"), l = n("lJxs"), c = n("/uUt"), u = n("eIep"), d = n("w1tV"), p = n("JIr8"), m = n("8LU1"), f = n("U3y+"), h = n("21Fy"), g = n("T4sd"), y = n("2OQP"), b = n("Dnot"), v = n("mbhL"), E = n("4r/P"), T = n("Duvn"), S = n("l7P3"), C = n("sYmb"), O = n("kmnG"), w = n("qFsG"), I = n("/1cH"), x = n("ofXK"), M = n("bTqV"), j = n("NFeN"), A = n("FKr1"), R = n("d5eY"), N = ["packageInput"]; function P(e, t) { if (1 & e) { var n = i["\u0275\u0275getCurrentView"](); i["\u0275\u0275elementStart"](0, "button", 9), i["\u0275\u0275listener"]("click", function () { return i["\u0275\u0275restoreView"](n), i["\u0275\u0275nextContext"]().clear() }), i["\u0275\u0275elementStart"](1, "mat-icon", 10), i["\u0275\u0275text"](2, "close"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]() } } function k(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-option", 11), i["\u0275\u0275element"](1, "span", 12), i["\u0275\u0275pipe"](2, "highlight"), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit, r = i["\u0275\u0275nextContext"](); i["\u0275\u0275property"]("value", n), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("innerHTML", i["\u0275\u0275pipeBind2"](2, 2, r.packageTitleText(n), r.searchText), i["\u0275\u0275sanitizeHtml"]) } } function _(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "div"), i["\u0275\u0275elementStart"](1, "span"), i["\u0275\u0275text"](2), i["\u0275\u0275pipe"](3, "translate"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275nextContext"](2); i["\u0275\u0275advance"](2), i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3, 1, n.notFoundPackage)) } } var F = function (e) { return { entity: e } }; function L(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "span"), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "async"), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275nextContext"](2); i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"](" ", i["\u0275\u0275pipeBind1"](2, 1, n.translate.get(n.notMatchingPackage, i["\u0275\u0275pureFunction1"](3, F, n.truncate.transform(n.searchText, !0, 6, "...")))), " ") } } function D(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-option", 13), i["\u0275\u0275elementStart"](1, "div", 14), i["\u0275\u0275listener"]("click", function (e) { return e.stopPropagation() }), i["\u0275\u0275template"](2, _, 4, 3, "div", 15), i["\u0275\u0275template"](3, L, 3, 5, "ng-template", null, 16, i["\u0275\u0275templateRefExtractor"]), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275reference"](4), r = i["\u0275\u0275nextContext"](); i["\u0275\u0275property"]("value", null), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngIf", !r.textIsNotEmpty(r.searchText))("ngIfElse", n) } } function V(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-error"), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275nextContext"](); i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"](" ", i["\u0275\u0275pipeBind1"](2, 1, n.requiredErrorText), " ") } } function U(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-hint"), i["\u0275\u0275text"](1), i["\u0275\u0275pipe"](2, "translate"), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = i["\u0275\u0275nextContext"](); i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2, 1, n.hintText)) } } var B = function () { function e(e, t, n, i, r, o) { this.store = e, this.translate = t, this.truncate = n, this.entityService = i, this.otaPackageService = r, this.fb = o, this.type = y.d.FIRMWARE, this.useFullEntityId = !1, this.searchText = "", this.dirty = !1, this.propagateChange = function (e) { }, this.otaPackageFormGroup = this.fb.group({ packageId: [null] }) } return Object.defineProperty(e.prototype, "required", { get: function () { return this.requiredValue }, set: function (e) { this.requiredValue = Object(m.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.ngOnInit = function () { var e = this; this.filteredPackages = this.otaPackageFormGroup.get("packageId").valueChanges.pipe(Object(a.a)(150), Object(s.a)(function (t) { var n; n = "string" != typeof t && t ? e.useFullEntityId ? t.id : t.id.id : null, e.updateView(n), null === t && e.clear() }), Object(l.a)(function (e) { return e ? "string" == typeof e ? e : e.title : "" }), Object(c.a)(), Object(u.a)(function (t) { return e.fetchPackages(t) }), Object(d.a)()) }, e.prototype.ngAfterViewInit = function () { }, e.prototype.getCurrentEntity = function () { var e = this.otaPackageFormGroup.get("packageId").value; return e && "string" != typeof e ? e : null }, e.prototype.setDisabledState = function (e) { this.disabled = e, this.disabled ? this.otaPackageFormGroup.disable({ emitEvent: !1 }) : this.otaPackageFormGroup.enable({ emitEvent: !1 }) }, e.prototype.textIsNotEmpty = function (e) { return e && e.length > 0 }, e.prototype.writeValue = function (e) { var t = this; if (this.searchText = "", null != e && "" !== e) { var n = ""; "string" == typeof e ? n = e : e.entityType && e.id && (n = e.id), "" !== n ? this.entityService.getEntity(f.b.OTA_PACKAGE, n, { ignoreLoading: !0, ignoreErrors: !0 }).subscribe(function (e) { t.modelValue = t.useFullEntityId ? e.id : e.id.id, t.otaPackageFormGroup.get("packageId").patchValue(e, { emitEvent: !1 }) }, function () { t.modelValue = null, t.otaPackageFormGroup.get("packageId").patchValue("", { emitEvent: !1 }), null !== e && t.propagateChange(t.modelValue) }) : (this.modelValue = null, this.otaPackageFormGroup.get("packageId").patchValue("", { emitEvent: !1 }), this.propagateChange(null)) } else this.modelValue = null, this.otaPackageFormGroup.get("packageId").patchValue("", { emitEvent: !1 }); this.dirty = !0 }, e.prototype.onFocus = function () { this.dirty && (this.otaPackageFormGroup.get("packageId").updateValueAndValidity({ onlySelf: !0, emitEvent: !0 }), this.dirty = !1) }, e.prototype.reset = function () { this.otaPackageFormGroup.get("packageId").patchValue("", { emitEvent: !1 }) }, e.prototype.updateView = function (e) { this.modelValue !== e && (this.modelValue = e, this.propagateChange(this.modelValue)) }, e.prototype.displayPackageFn = function (e) { return e ? e.title + " (" + e.version + ")" : void 0 }, e.prototype.fetchPackages = function (e) { this.searchText = e; var t = new v.b(50, 0, e, { property: "title", direction: E.a.ASC }); return this.otaPackageService.getOtaPackagesInfoByDeviceProfileId(t, this.deviceProfileId, this.type, { ignoreLoading: !0 }).pipe(Object(p.a)(function () { return Object(o.a)(Object(T.a)()) }), Object(l.a)(function (e) { return e && e.data.length ? e.data : null })) }, e.prototype.clear = function () { var e = this; this.otaPackageFormGroup.get("packageId").patchValue("", { emitEvent: !1 }), setTimeout(function () { e.packageInput.nativeElement.blur(), e.packageInput.nativeElement.focus() }, 0) }, Object.defineProperty(e.prototype, "placeholderText", { get: function () { return this.labelText || y.c.get(this.type).label }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "requiredErrorText", { get: function () { return this.requiredText || y.c.get(this.type).required }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "notFoundPackage", { get: function () { return y.c.get(this.type).noFound }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "notMatchingPackage", { get: function () { return y.c.get(this.type).noMatching }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "hintText", { get: function () { return y.c.get(this.type).hint }, enumerable: !1, configurable: !0 }), e.prototype.packageTitleText = function (e) { return e.title + " (" + e.version + ")" }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](S.Store), i["\u0275\u0275directiveInject"](C.TranslateService), i["\u0275\u0275directiveInject"](g.a), i["\u0275\u0275directiveInject"](h.a), i["\u0275\u0275directiveInject"](b.a), i["\u0275\u0275directiveInject"](r.FormBuilder)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-ota-package-autocomplete"]], viewQuery: function (e, t) { if (1 & e && i["\u0275\u0275viewQuery"](N, 3), 2 & e) { var n; i["\u0275\u0275queryRefresh"](n = i["\u0275\u0275loadQuery"]()) && (t.packageInput = n.first) } }, inputs: { type: "type", deviceProfileId: "deviceProfileId", labelText: "labelText", requiredText: "requiredText", useFullEntityId: "useFullEntityId", required: "required", disabled: "disabled" }, features: [i["\u0275\u0275ProvidersFeature"]([{ provide: r.NG_VALUE_ACCESSOR, useExisting: Object(i.forwardRef)(function () { return e }), multi: !0 }])], decls: 13, vars: 17, consts: [[1, "mat-block", 3, "formGroup"], ["matInput", "", "type", "text", "formControlName", "packageId", 3, "placeholder", "required", "matAutocomplete", "matAutocompleteDisabled", "focusin"], ["packageInput", ""], ["type", "button", "matSuffix", "", "mat-button", "", "mat-icon-button", "", "aria-label", "Clear", 3, "click", 4, "ngIf"], [1, "tb-autocomplete", 3, "displayWith"], ["packageAutocomplete", "matAutocomplete"], [3, "value", 4, "ngFor", "ngForOf"], ["class", "tb-not-found", 3, "value", 4, "ngIf"], [4, "ngIf"], ["type", "button", "matSuffix", "", "mat-button", "", "mat-icon-button", "", "aria-label", "Clear", 3, "click"], [1, "material-icons"], [3, "value"], [3, "innerHTML"], [1, "tb-not-found", 3, "value"], [1, "tb-not-found-content", 3, "click"], [4, "ngIf", "ngIfElse"], ["searchNotEmpty", ""]], template: function (e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-form-field", 0), i["\u0275\u0275elementStart"](1, "input", 1, 2), i["\u0275\u0275listener"]("focusin", function () { return t.onFocus() }), i["\u0275\u0275pipe"](3, "translate"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](4, P, 3, 0, "button", 3), i["\u0275\u0275elementStart"](5, "mat-autocomplete", 4, 5), i["\u0275\u0275template"](7, k, 3, 5, "mat-option", 6), i["\u0275\u0275pipe"](8, "async"), i["\u0275\u0275template"](9, D, 5, 3, "mat-option", 7), i["\u0275\u0275pipe"](10, "async"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275template"](11, V, 3, 3, "mat-error", 8), i["\u0275\u0275template"](12, U, 3, 3, "mat-hint", 8), i["\u0275\u0275elementEnd"]()), 2 & e) { var n, r = i["\u0275\u0275reference"](6); i["\u0275\u0275property"]("formGroup", t.otaPackageFormGroup), i["\u0275\u0275advance"](1), i["\u0275\u0275propertyInterpolate"]("placeholder", i["\u0275\u0275pipeBind1"](3, 11, t.placeholderText)), i["\u0275\u0275property"]("required", t.required)("matAutocomplete", r)("matAutocompleteDisabled", t.disabled), i["\u0275\u0275advance"](3), i["\u0275\u0275property"]("ngIf", t.otaPackageFormGroup.get("packageId").value && !t.disabled), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("displayWith", t.displayPackageFn), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngForOf", i["\u0275\u0275pipeBind1"](8, 13, t.filteredPackages)), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngIf", !(null != (n = i["\u0275\u0275pipeBind1"](10, 15, t.filteredPackages)) && n.length)), i["\u0275\u0275advance"](2), i["\u0275\u0275property"]("ngIf", t.otaPackageFormGroup.get("packageId").hasError("required")), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngIf", !t.disabled) } }, directives: [O.MatFormField, r.NgControlStatusGroup, r.FormGroupDirective, w.MatInput, r.DefaultValueAccessor, I.MatAutocompleteTrigger, r.NgControlStatus, r.FormControlName, r.RequiredValidator, x.NgIf, I.MatAutocomplete, x.NgForOf, M.MatButton, O.MatSuffix, j.MatIcon, A.MatOption, O.MatError, O.MatHint], pipes: [C.TranslatePipe, x.AsyncPipe, R.a], encapsulation: 2 }), e }(); 0, void 0 }, rezs: function (e, t, n) { "use strict"; (function (e) { n.d(t, "b", function () { return b }), n.d(t, "a", function () { return E }); var i = n("fXoL"), r = n("dNgK"), o = n("Y4+Y"), a = n("he9t"), s = n("R0Ic"), l = n("//Q6"), c = n("0MNC"), u = n("XiUz"), d = n("ofXK"), p = n("znSr"), m = n("bTqV"), f = n("sYmb"), h = ["actionButton"], g = function (e, t) { return { value: e, params: t } }, y = function (e, t, n, i) { return { "error-toast": e, "warn-toast": t, "success-toast": n, "info-toast": i } }, b = function () { function e(e, t, n, i, r, o, a, s) { this.elementRef = e, this.viewContainerRef = t, this.notificationService = n, this.componentFactoryResolver = i, this.snackBar = r, this.ngZone = o, this.breakpointObserver = a, this.cd = s, this.toastTarget = "root", this.notificationSubscription = null, this.hideNotificationSubscription = null, this.snackBarRef = null, this.currentMessage = null, this.dismissTimeout = null } return e.prototype.ngAfterViewInit = function () { var e = this; this.notificationSubscription = this.notificationService.getNotification().subscribe(function (t) { if (e.shouldDisplayMessage(t)) { e.currentMessage = t; var n = e.breakpointObserver.isMatched(a.g["gt-sm"]); n && "root" !== e.toastTarget ? e.showToastPanel(t) : e.showSnackBar(t, n) } }), this.hideNotificationSubscription = this.notificationService.getHideNotification().subscribe(function (t) { if (t) { var n = t.target || "root"; e.toastTarget === n && e.ngZone.run(function () { e.snackBarRef && e.snackBarRef.dismiss(), e.toastComponentRef && e.toastComponentRef.instance.actionButton._elementRef.nativeElement.click() }) } }) }, e.prototype.showToastPanel = function (e) { var t = this; this.ngZone.run(function () { t.snackBarRef && t.snackBarRef.dismiss(), t.toastComponentRef && (t.viewContainerRef.detach(0), t.toastComponentRef.destroy()); var n = ["tb-toast-panel", "toast-panel"]; e.panelClass && ("string" == typeof e.panelClass ? n.push(e.panelClass) : e.panelClass.length && (n = n.concat(e.panelClass))); var o = e.horizontalPosition || "left", a = e.verticalPosition || "top"; "start" === o || "left" === o ? n.push("left") : "end" === o || "right" === o ? n.push("right") : n.push("h-center"), "top" === a ? n.push("top") : n.push("bottom"); var s = t.componentFactoryResolver.resolveComponentFactory(E), l = { notification: e, panelClass: n, destroyToastComponent: function () { t.viewContainerRef.detach(0), t.toastComponentRef.destroy() } }, c = [{ provide: r.MAT_SNACK_BAR_DATA, useValue: l }], u = i.Injector.create({ parent: t.viewContainerRef.injector, providers: c }); t.toastComponentRef = t.viewContainerRef.createComponent(s, 0, u), t.cd.detectChanges(), e.duration && e.duration > 0 && (null !== t.dismissTimeout && (clearTimeout(t.dismissTimeout), t.dismissTimeout = null), t.dismissTimeout = setTimeout(function () { t.toastComponentRef && t.toastComponentRef.instance.actionButton._elementRef.nativeElement.click(), t.dismissTimeout = null }, e.duration + 500)), t.toastComponentRef.onDestroy(function () { null !== t.dismissTimeout && (clearTimeout(t.dismissTimeout), t.dismissTimeout = null), t.toastComponentRef = null, t.currentMessage = null }) }) }, e.prototype.showSnackBar = function (e, t) { var n = this; this.ngZone.run(function () { n.snackBarRef && n.snackBarRef.dismiss(); var i = { notification: e, parent: n.elementRef, panelClass: [], destroyToastComponent: function () { } }, r = { horizontalPosition: e.horizontalPosition || "left", verticalPosition: t ? e.verticalPosition || "top" : "bottom", viewContainerRef: n.viewContainerRef, duration: e.duration, panelClass: e.panelClass, data: i }; n.snackBarRef = n.snackBar.openFromComponent(E, r), e.duration && e.duration > 0 && e.forceDismiss && (null !== n.dismissTimeout && (clearTimeout(n.dismissTimeout), n.dismissTimeout = null), n.dismissTimeout = setTimeout(function () { n.snackBarRef && n.snackBarRef.instance.actionButton._elementRef.nativeElement.click(), n.dismissTimeout = null }, e.duration)), n.snackBarRef.afterDismissed().subscribe(function () { null !== n.dismissTimeout && (clearTimeout(n.dismissTimeout), n.dismissTimeout = null), n.snackBarRef = null, n.currentMessage = null }) }) }, e.prototype.shouldDisplayMessage = function (e) { if (e && e.message) { var t = e.target || "root"; if (this.toastTarget === t && (!this.currentMessage || this.currentMessage.message !== e.message || this.currentMessage.type !== e.type)) return !0 } return !1 }, e.prototype.ngOnDestroy = function () { this.toastComponentRef && (this.viewContainerRef.detach(0), this.toastComponentRef.destroy()), this.notificationSubscription && this.notificationSubscription.unsubscribe(), this.hideNotificationSubscription && this.hideNotificationSubscription.unsubscribe() }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](i.ElementRef), i["\u0275\u0275directiveInject"](i.ViewContainerRef), i["\u0275\u0275directiveInject"](o.a), i["\u0275\u0275directiveInject"](i.ComponentFactoryResolver), i["\u0275\u0275directiveInject"](r.MatSnackBar), i["\u0275\u0275directiveInject"](i.NgZone), i["\u0275\u0275directiveInject"](c.BreakpointObserver), i["\u0275\u0275directiveInject"](i.ChangeDetectorRef)) }, e.\u0275dir = i["\u0275\u0275defineDirective"]({ type: e, selectors: [["", "tb-toast", ""]], inputs: { toastTarget: "toastTarget" } }), e }(); 0, void 0; var v = { showHideToast: Object(s.trigger)("showHideAnimation", [Object(s.state)("in", Object(s.style)({ transform: "scale(1)", opacity: 1 })), Object(s.transition)("void => opened", [Object(s.style)({ transform: "scale(0)", opacity: 0 }), Object(s.animate)("{{ open }}ms")]), Object(s.transition)("opened => closing", Object(s.animate)("{{ close }}ms", Object(s.style)({ transform: "scale(0)", opacity: 0 })))]) }, E = function () { function t(e, t, n) { this.data = e, this.elementRef = t, this.snackBarRef = n, this.parentScrollSubscription = null, this.animationParams = { open: 100, close: 100 }, this.animationState = this.snackBarRef ? "default" : "opened", this.notification = e.notification } return Object.defineProperty(t.prototype, "panelClass", { get: function () { return this.data.panelClass }, enumerable: !1, configurable: !0 }), t.prototype.ngAfterViewInit = function () { var t = this; this.snackBarRef && (this.parentEl = this.data.parent.nativeElement, this.snackBarContainerEl = e(this.elementRef.nativeElement).closest("snack-bar-container")[0], this.snackBarContainerEl.style.position = "absolute", this.updateContainerRect(), this.updatePosition(this.snackBarRef.containerInstance.snackBarConfig), this.parentScrollSubscription = Object(l.I)(this.parentEl).subscribe(function () { t.updateContainerRect() })) }, t.prototype.updatePosition = function (e) { var t = "rtl" === e.direction, n = "left" === e.horizontalPosition || "start" === e.horizontalPosition && !t || "end" === e.horizontalPosition && t, i = !n && "center" !== e.horizontalPosition; this.snackBarContainerEl.style.justifyContent = n ? "flex-start" : i ? "flex-end" : "center", "top" === e.verticalPosition ? this.snackBarContainerEl.style.alignItems = "flex-start" : this.snackBarContainerEl.style.alignItems = "flex-end" }, t.prototype.updateContainerRect = function () { var e = this.parentEl.getBoundingClientRect(); this.snackBarContainerEl.style.top = e.top + "px", this.snackBarContainerEl.style.left = e.left + "px", this.snackBarContainerEl.style.width = e.width + "px", this.snackBarContainerEl.style.height = e.height + "px" }, t.prototype.ngOnDestroy = function () { this.parentScrollSubscription && this.parentScrollSubscription.unsubscribe() }, t.prototype.action = function (e) { e.stopPropagation(), this.snackBarRef ? this.snackBarRef.dismissWithAction() : this.animationState = "closing" }, t.prototype.onHideFinished = function (e) { var t = "closing" === e.toState, n = "closing" === this.animationState; t && n && this.data.destroyToastComponent() }, t.\u0275fac = function (e) { return new (e || t)(i["\u0275\u0275directiveInject"](r.MAT_SNACK_BAR_DATA), i["\u0275\u0275directiveInject"](i.ElementRef), i["\u0275\u0275directiveInject"](r.MatSnackBarRef, 8)) }, t.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: t, selectors: [["tb-snack-bar-component"]], viewQuery: function (e, t) { if (1 & e && i["\u0275\u0275viewQuery"](h, 3), 2 & e) { var n; i["\u0275\u0275queryRefresh"](n = i["\u0275\u0275loadQuery"]()) && (t.actionButton = n.first) } }, hostVars: 2, hostBindings: function (e, t) { 2 & e && i["\u0275\u0275classMap"](t.panelClass) }, decls: 6, vars: 14, consts: [["fxLayout", "row", "fxLayoutAlign", "start center", 1, "tb-toast", 3, "ngClass"], [1, "toast-text", 3, "innerHTML"], ["type", "button", "mat-button", "", 3, "click"], ["actionButton", ""]], template: function (e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "div", 0), i["\u0275\u0275listener"]("@showHideAnimation.done", function (e) { return t.onHideFinished(e) }), i["\u0275\u0275element"](1, "div", 1), i["\u0275\u0275elementStart"](2, "button", 2, 3), i["\u0275\u0275listener"]("click", function (e) { return t.action(e) }), i["\u0275\u0275text"](4), i["\u0275\u0275pipe"](5, "translate"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275property"]("@showHideAnimation", i["\u0275\u0275pureFunction2"](6, g, t.animationState, t.animationParams))("ngClass", i["\u0275\u0275pureFunction4"](9, y, "error" === t.notification.type, "warn" === t.notification.type, "success" === t.notification.type, "info" === t.notification.type)), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("innerHTML", t.notification.message, i["\u0275\u0275sanitizeHtml"]), i["\u0275\u0275advance"](3), i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](5, 4, "action.close"))) }, directives: [u.f, u.e, d.NgClass, p.b, m.MatButton], pipes: [f.TranslatePipe], styles: ["[_nghost-%COMP%]{display:inline-block;pointer-events:all}.toast-panel[_nghost-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;z-index:1000;display:flex}.toast-panel.left[_nghost-%COMP%]{justify-content:flex-start}.toast-panel.right[_nghost-%COMP%]{justify-content:flex-end}.toast-panel.top[_nghost-%COMP%]{align-items:flex-start}.toast-panel.bottom[_nghost-%COMP%]{align-items:flex-end}.toast-panel.h-center[_nghost-%COMP%]{justify-content:center}.toast-panel.v-center[_nghost-%COMP%]{align-items:center}[_nghost-%COMP%]   .tb-toast[_ngcontent-%COMP%]{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12);color:#fff;font-size:18px;border-radius:4px;padding:0 18px;margin:8px}[_nghost-%COMP%]   .tb-toast[_ngcontent-%COMP%]   .toast-text[_ngcontent-%COMP%]{padding:0 6px;width:100%}[_nghost-%COMP%]   .tb-toast[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:6px 0 6px 12px}[_nghost-%COMP%]   .tb-toast.info-toast[_ngcontent-%COMP%]{background:#323232}[_nghost-%COMP%]   .tb-toast.warn-toast[_ngcontent-%COMP%]{background:#dc6d1b}[_nghost-%COMP%]   .tb-toast.error-toast[_ngcontent-%COMP%]{background:maroon}[_nghost-%COMP%]   .tb-toast.success-toast[_ngcontent-%COMP%]{background:green}"], data: { animation: [v.showHideToast] } }), t }(); 0, void 0 }).call(this, n("xexB")) }, rhBB: function (e, t, n) { "use strict"; n.d(t, "a", function () { return A }); var i = n("mrSG"), r = n("FtGj"), o = n("fXoL"), a = n("3Pt+"), s = n("LRne"), l = n("lJxs"), c = n("5+tZ"), u = n("w1tV"), d = n("21Fy"), p = n("8LU1"), m = (n("3Tyt"), n("//Q6")), f = n("l7P3"), h = n("sYmb"), g = n("kmnG"), y = n("A5z7"), b = n("ofXK"), v = n("qFsG"), E = n("/1cH"), T = n("NFeN"), S = n("FKr1"), C = n("d5eY"), O = ["keyInput"], w = ["keyAutocomplete"], I = ["chipList"]; function x(e, t) { 1 & e && (o["\u0275\u0275elementStart"](0, "mat-icon", 10), o["\u0275\u0275text"](1, "close"), o["\u0275\u0275elementEnd"]()) } function M(e, t) { if (1 & e) { var n = o["\u0275\u0275getCurrentView"](); o["\u0275\u0275elementStart"](0, "mat-chip", 8), o["\u0275\u0275listener"]("removed", function () { o["\u0275\u0275restoreView"](n); var e = t.$implicit; return o["\u0275\u0275nextContext"]().remove(e) }), o["\u0275\u0275text"](1), o["\u0275\u0275template"](2, x, 2, 0, "mat-icon", 9), o["\u0275\u0275elementEnd"]() } if (2 & e) { var i = t.$implicit, r = o["\u0275\u0275nextContext"](); o["\u0275\u0275property"]("selectable", !r.disabled)("removable", !r.disabled), o["\u0275\u0275advance"](1), o["\u0275\u0275textInterpolate1"](" ", i, " "), o["\u0275\u0275advance"](1), o["\u0275\u0275property"]("ngIf", !r.disabled) } } function j(e, t) { if (1 & e && (o["\u0275\u0275elementStart"](0, "mat-option", 11), o["\u0275\u0275element"](1, "span", 12), o["\u0275\u0275pipe"](2, "highlight"), o["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit, i = o["\u0275\u0275nextContext"](); o["\u0275\u0275property"]("value", n), o["\u0275\u0275advance"](1), o["\u0275\u0275property"]("innerHTML", o["\u0275\u0275pipeBind2"](2, 2, n, i.searchText), o["\u0275\u0275sanitizeHtml"]) } } var A = function () { function e(e, t, n, i) { this.store = e, this.translate = t, this.entityService = n, this.fb = i, this.separatorKeysCodes = [r.ENTER, r.COMMA, r.SEMICOLON], this.searchText = "", this.dirty = !1, this.propagateChange = function (e) { }, this.keysListFormGroup = this.fb.group({ key: [null] }) } return Object.defineProperty(e.prototype, "entityId", { set: function (e) { Object(m.r)(this.entityIdValue, e) || (this.entityIdValue = e, this.dirty = !0) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "required", { get: function () { return this.requiredValue }, set: function (e) { this.requiredValue = Object(p.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.ngOnInit = function () { var e = this; this.filteredKeys = this.keysListFormGroup.get("key").valueChanges.pipe(Object(l.a)(function (e) { return e || "" }), Object(c.b)(function (t) { return e.fetchKeys(t) }), Object(u.a)()) }, e.prototype.ngAfterViewInit = function () { }, e.prototype.setDisabledState = function (e) { this.disabled = e, this.disabled ? this.keysListFormGroup.disable({ emitEvent: !1 }) : this.keysListFormGroup.enable({ emitEvent: !1 }) }, e.prototype.writeValue = function (e) { this.searchText = "", this.modelValue = null != e ? Object(i.h)(e) : [] }, e.prototype.onFocus = function () { this.dirty && (this.keysListFormGroup.get("key").updateValueAndValidity({ onlySelf: !0, emitEvent: !0 }), this.dirty = !1) }, e.prototype.addKey = function (e) { this.modelValue && -1 !== this.modelValue.indexOf(e) || (this.modelValue || (this.modelValue = []), this.modelValue.push(e), this.required && (this.chipList.errorState = !1)), this.propagateChange(this.modelValue) }, e.prototype.add = function (e) { if (!this.matAutocomplete.isOpen) { var t = (e.value || "").trim(); t && this.addKey(t), this.clear("", document.activeElement === this.keyInput.nativeElement) } }, e.prototype.remove = function (e) { var t = this.modelValue.indexOf(e); t >= 0 && (this.modelValue.splice(t, 1), this.modelValue.length || this.required && (this.chipList.errorState = !0), this.propagateChange(this.modelValue.length ? this.modelValue : null)) }, e.prototype.selected = function (e) { this.addKey(e.option.viewValue), this.clear("") }, e.prototype.displayKeyFn = function (e) { return e || void 0 }, e.prototype.fetchKeys = function (e) { return this.searchText = e, this.entityIdValue ? this.entityService.getEntityKeys(this.entityIdValue, e, this.dataKeyType, { ignoreLoading: !0 }).pipe(Object(l.a)(function (e) { return e || [] })) : Object(s.a)([]) }, e.prototype.clear = function (e, t) { var n = this; void 0 === e && (e = ""), void 0 === t && (t = !0), this.keyInput.nativeElement.value = e, this.keysListFormGroup.get("key").patchValue(null, { emitEvent: t }), t && setTimeout(function () { n.keyInput.nativeElement.blur(), n.keyInput.nativeElement.focus() }, 0) }, e.\u0275fac = function (t) { return new (t || e)(o["\u0275\u0275directiveInject"](f.Store), o["\u0275\u0275directiveInject"](h.TranslateService), o["\u0275\u0275directiveInject"](d.a), o["\u0275\u0275directiveInject"](a.FormBuilder)) }, e.\u0275cmp = o["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-entity-keys-list"]], viewQuery: function (e, t) { if (1 & e && (o["\u0275\u0275viewQuery"](O, 1), o["\u0275\u0275viewQuery"](w, 1), o["\u0275\u0275viewQuery"](I, 1)), 2 & e) { var n = void 0; o["\u0275\u0275queryRefresh"](n = o["\u0275\u0275loadQuery"]()) && (t.keyInput = n.first), o["\u0275\u0275queryRefresh"](n = o["\u0275\u0275loadQuery"]()) && (t.matAutocomplete = n.first), o["\u0275\u0275queryRefresh"](n = o["\u0275\u0275loadQuery"]()) && (t.chipList = n.first) } }, inputs: { entityId: "entityId", keysText: "keysText", dataKeyType: "dataKeyType", required: "required", disabled: "disabled" }, features: [o["\u0275\u0275ProvidersFeature"]([{ provide: a.NG_VALUE_ACCESSOR, useExisting: Object(o.forwardRef)(function () { return e }), multi: !0 }])], decls: 12, vars: 13, consts: [["appearance", "standard", 1, "mat-block", 3, "formGroup"], ["chipList", ""], [3, "selectable", "removable", "removed", 4, "ngFor", "ngForOf"], ["matInput", "", "type", "text", "formControlName", "key", "matAutocompleteOrigin", "", "matChipInputAddOnBlur", "", 2, "max-width", "200px", 3, "placeholder", "matAutocompleteConnectedTo", "matAutocomplete", "matChipInputFor", "matChipInputSeparatorKeyCodes", "focusin", "matChipInputTokenEnd"], ["keyInput", "", "origin", "matAutocompleteOrigin"], [1, "tb-autocomplete", 3, "displayWith", "optionSelected"], ["keyAutocomplete", "matAutocomplete"], [3, "value", 4, "ngFor", "ngForOf"], [3, "selectable", "removable", "removed"], ["matChipRemove", "", 4, "ngIf"], ["matChipRemove", ""], [3, "value"], [3, "innerHTML"]], template: function (e, t) { if (1 & e && (o["\u0275\u0275elementStart"](0, "mat-form-field", 0), o["\u0275\u0275elementStart"](1, "mat-chip-list", null, 1), o["\u0275\u0275template"](3, M, 3, 4, "mat-chip", 2), o["\u0275\u0275elementStart"](4, "input", 3, 4), o["\u0275\u0275listener"]("focusin", function () { return t.onFocus() })("matChipInputTokenEnd", function (e) { return t.add(e) }), o["\u0275\u0275pipe"](7, "translate"), o["\u0275\u0275elementEnd"](), o["\u0275\u0275elementEnd"](), o["\u0275\u0275elementStart"](8, "mat-autocomplete", 5, 6), o["\u0275\u0275listener"]("optionSelected", function (e) { return t.selected(e) }), o["\u0275\u0275template"](10, j, 3, 5, "mat-option", 7), o["\u0275\u0275pipe"](11, "async"), o["\u0275\u0275elementEnd"](), o["\u0275\u0275elementEnd"]()), 2 & e) { var n = o["\u0275\u0275reference"](2), i = o["\u0275\u0275reference"](6), r = o["\u0275\u0275reference"](9); o["\u0275\u0275property"]("formGroup", t.keysListFormGroup), o["\u0275\u0275advance"](3), o["\u0275\u0275property"]("ngForOf", t.modelValue), o["\u0275\u0275advance"](1), o["\u0275\u0275propertyInterpolate"]("placeholder", t.disabled ? "" : o["\u0275\u0275pipeBind1"](7, 9, t.keysText)), o["\u0275\u0275property"]("matAutocompleteConnectedTo", i)("matAutocomplete", r)("matChipInputFor", n)("matChipInputSeparatorKeyCodes", t.separatorKeysCodes), o["\u0275\u0275advance"](4), o["\u0275\u0275property"]("displayWith", t.displayKeyFn), o["\u0275\u0275advance"](2), o["\u0275\u0275property"]("ngForOf", o["\u0275\u0275pipeBind1"](11, 11, t.filteredKeys)) } }, directives: [g.MatFormField, a.NgControlStatusGroup, a.FormGroupDirective, y.MatChipList, b.NgForOf, v.MatInput, a.DefaultValueAccessor, E.MatAutocompleteTrigger, y.MatChipInput, a.NgControlStatus, a.FormControlName, E.MatAutocompleteOrigin, E.MatAutocomplete, y.MatChip, b.NgIf, T.MatIcon, y.MatChipRemove, S.MatOption], pipes: [h.TranslatePipe, b.AsyncPipe, C.a], styles: ["[_nghost-%COMP%]     .mat-form-field-flex{padding-top:0}[_nghost-%COMP%]     .mat-form-field-flex .mat-form-field-infix{border-top:0}"] }), e }(); 0, void 0 }, "sIb/": function (e, t, n) { "use strict"; var i; n.d(t, "f", function () { return i }), n.d(t, "a", function () { return r }), n.d(t, "c", function () { return o }), n.d(t, "b", function () { return a }), n.d(t, "e", function () { return s }), n.d(t, "d", function () { return l }), function (e) { e.AUTHENTICATED = "[Auth] Authenticated", e.UNAUTHENTICATED = "[Auth] Unauthenticated", e.LOAD_USER = "[Auth] Load User", e.UPDATE_USER_DETAILS = "[Auth] Update User Details", e.UPDATE_LAST_PUBLIC_DASHBOARD_ID = "[Auth] Update Last Public Dashboard Id" }(i || (i = {})); var r = function (e) { this.payload = e, this.type = i.AUTHENTICATED }, o = function () { this.type = i.UNAUTHENTICATED }, a = function (e) { this.payload = e, this.type = i.LOAD_USER }, s = function (e) { this.payload = e, this.type = i.UPDATE_USER_DETAILS }, l = function (e) { this.payload = e, this.type = i.UPDATE_LAST_PUBLIC_DASHBOARD_ID } }, sjz8: function (e, t, n) { "use strict"; (function (e) { n.d(t, "a", function () { return o }); var i = n("fXoL"), r = n("Xa2L"), o = function () { function t(e, t, n) { this.elementRef = e, this.componentFactoryResolver = t, this.viewContainerRef = n, this.showProgressValue = !1, this.createCircularProgress() } return Object.defineProperty(t.prototype, "showProgress", { set: function (t) { if (this.showProgressValue !== t) { var n = this.elementRef.nativeElement; if (this.showProgressValue = t, this.spinnerRef.instance._elementRef.nativeElement.style.display = t ? "block" : "none", t) { if (this.cssWidth = e(n).prop("style").width, !this.cssWidth) { e(n).css("width", ""); var i = e(n).prop("offsetWidth"); e(n).css("width", i + "px") } this.children = e(n).children(), e(n).empty(), e(n).append(e(this.spinnerRef.instance._elementRef.nativeElement)) } else e(n).empty(), e(n).append(this.children), this.cssWidth ? e(n).css("width", this.cssWidth) : e(n).css("width", "") } }, enumerable: !1, configurable: !0 }), t.prototype.createCircularProgress = function () { this.elementRef.nativeElement.style.position = "relative"; var e = this.componentFactoryResolver.resolveComponentFactory(r.MatSpinner); this.spinnerRef = this.viewContainerRef.createComponent(e, 0), this.spinnerRef.instance.mode = "indeterminate", this.spinnerRef.instance.diameter = 20; var t = this.spinnerRef.instance._elementRef.nativeElement; t.style.margin = "auto", t.style.position = "absolute", t.style.left = "0", t.style.right = "0", t.style.top = "0", t.style.bottom = "0", t.style.display = "none" }, t.\u0275fac = function (e) { return new (e || t)(i["\u0275\u0275directiveInject"](i.ElementRef), i["\u0275\u0275directiveInject"](i.ComponentFactoryResolver), i["\u0275\u0275directiveInject"](i.ViewContainerRef)) }, t.\u0275dir = i["\u0275\u0275defineDirective"]({ type: t, selectors: [["", "tb-circular-progress", ""]], inputs: { showProgress: ["tb-circular-progress", "showProgress"] } }), t }(); 0, void 0 }).call(this, n("xexB")) }, "uKK+": function (e, t, n) { "use strict"; n.d(t, "a", function () { return r }); var i = n("fXoL"), r = function () { function e() { } return e.prototype.transform = function (e) { return e.filter(function (e) { return e.selectable }) }, e.\u0275fac = function (t) { return new (t || e) }, e.\u0275pipe = i["\u0275\u0275definePipe"]({ name: "selectableColumns", type: e, pure: !0 }), e }(); 0, void 0 }, "uxh+": function (e, t, n) { "use strict"; n.d(t, "a", function () { return R }); var i = n("fXoL"), r = n("3Pt+"), o = n("LRne"), a = n("mbhL"), s = n("lJxs"), l = n("w1tV"), c = n("Duvn"), u = n("YnEf"), d = n("C/rb"), p = n("zp9Z"), m = n("8LU1"), f = n("rDax"), h = n("ofXK"), g = n("wtyh"), y = n("+rOU"), b = n("7qoW"), v = n("oKkZ"), E = n("l7P3"), T = n("0MNC"), S = n("d3UM"), C = n("znSr"), O = n("bTqV"), w = n("Qu3c"), I = n("NFeN"), x = n("FKr1"), M = n("sYmb"), j = ["dashboardSelectPanelOrigin"]; function A(e, t) { if (1 & e && (i["\u0275\u0275elementStart"](0, "mat-option", 5), i["\u0275\u0275text"](1), i["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit; i["\u0275\u0275property"]("value", n.id.id), i["\u0275\u0275advance"](1), i["\u0275\u0275textInterpolate1"](" ", n.title, " ") } } var R = function () { function e(e, t, n, i, r, o, a) { this.store = e, this.dashboardService = t, this.overlay = n, this.breakpointObserver = i, this.viewContainerRef = r, this.document = o, this.window = a, this.tooltipPosition = "above", this.propagateChange = function (e) { } } return Object.defineProperty(e.prototype, "required", { get: function () { return this.requiredValue }, set: function (e) { this.requiredValue = Object(m.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.ngOnInit = function () { var e = new a.b(100); this.dashboards$ = this.getDashboards(e).pipe(Object(s.a)(function (e) { return e.data }), Object(l.a)()) }, e.prototype.setDisabledState = function (e) { this.disabled = e }, e.prototype.writeValue = function (e) { this.dashboardId = e }, e.prototype.dashboardIdChanged = function () { this.updateView() }, e.prototype.openDashboardSelectPanel = function () { var e = this; if (!this.disabled) { var t, n, i, r, o = this.breakpointObserver.isMatched("min-height: 350px") ? 250 : 150, a = this.overlay.position(), s = new f.OverlayConfig({ panelClass: "tb-dashboard-select-panel", backdropClass: "cdk-overlay-transparent-backdrop", hasBackdrop: !0 }), l = this.dashboardSelectPanelOrigin.elementRef.nativeElement.getBoundingClientRect(), c = this.window.pageYOffset || this.document.documentElement.scrollTop || this.document.body.scrollTop || 0, u = this.window.pageXOffset || this.document.documentElement.scrollLeft || this.document.body.scrollLeft || 0, d = l.bottom - c, p = l.left - u; d + o > this.document.documentElement.clientHeight ? (n = "top", r = "bottom") : (n = "bottom", r = "top"), p + 300 > this.document.documentElement.clientWidth ? (t = "end", i = "end") : (t = "start", i = "start"); var m = { originX: t, originY: n, overlayX: i, overlayY: r }; s.positionStrategy = a.flexibleConnectedTo(this.dashboardSelectPanelOrigin.elementRef).withPositions([m]); var h = this.overlay.create(s); h.backdropClick().subscribe(function () { h.dispose() }); var g = this._createDashboardSelectPanelInjector(h, { dashboards$: this.dashboards$, dashboardId: this.dashboardId, onDashboardSelected: function (t) { h.dispose(), e.dashboardId = t, e.updateView() } }); h.attach(new y.ComponentPortal(b.b, this.viewContainerRef, g)) } }, e.prototype._createDashboardSelectPanelInjector = function (e, t) { var n = [{ provide: b.a, useValue: t }, { provide: f.OverlayRef, useValue: e }]; return i.Injector.create({ parent: this.viewContainerRef.injector, providers: n }) }, e.prototype.updateView = function () { this.propagateChange(this.dashboardId) }, e.prototype.getDashboards = function (e) { var t = Object(d.b)(this.store); return "customer" === this.dashboardsScope || t.authority === p.a.CUSTOMER_USER ? this.customerId && this.customerId !== v.a ? this.dashboardService.getCustomerDashboards(this.customerId, e, { ignoreLoading: !0 }) : Object(o.a)(Object(c.a)()) : this.dashboardService.getTenantDashboards(e, { ignoreLoading: !0 }) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](E.Store), i["\u0275\u0275directiveInject"](u.a), i["\u0275\u0275directiveInject"](f.Overlay), i["\u0275\u0275directiveInject"](T.BreakpointObserver), i["\u0275\u0275directiveInject"](i.ViewContainerRef), i["\u0275\u0275directiveInject"](h.DOCUMENT), i["\u0275\u0275directiveInject"](g.b)) }, e.\u0275cmp = i["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-dashboard-select"]], viewQuery: function (e, t) { if (1 & e && i["\u0275\u0275viewQuery"](j, 1), 2 & e) { var n; i["\u0275\u0275queryRefresh"](n = i["\u0275\u0275loadQuery"]()) && (t.dashboardSelectPanelOrigin = n.first) } }, inputs: { dashboardsScope: "dashboardsScope", customerId: "customerId", tooltipPosition: "tooltipPosition", required: "required", disabled: "disabled" }, features: [i["\u0275\u0275ProvidersFeature"]([{ provide: r.NG_VALUE_ACCESSOR, useExisting: Object(i.forwardRef)(function () { return e }), multi: !0 }])], decls: 9, vars: 10, consts: [["fxHide.lt-lg", "", 3, "required", "disabled", "ngModel", "ngModelChange"], [3, "value", 4, "ngFor", "ngForOf"], ["fxHide.gt-md", "", 1, "tb-dashboard-select"], ["mat-button", "", "mat-icon-button", "", "cdkOverlayOrigin", "", 3, "matTooltip", "matTooltipPosition", "click"], ["dashboardSelectPanelOrigin", "cdkOverlayOrigin"], [3, "value"]], template: function (e, t) { 1 & e && (i["\u0275\u0275elementStart"](0, "mat-select", 0), i["\u0275\u0275listener"]("ngModelChange", function (e) { return t.dashboardId = e })("ngModelChange", function () { return t.dashboardIdChanged() }), i["\u0275\u0275template"](1, A, 2, 2, "mat-option", 1), i["\u0275\u0275pipe"](2, "async"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementStart"](3, "section", 2), i["\u0275\u0275elementStart"](4, "button", 3, 4), i["\u0275\u0275listener"]("click", function () { return t.openDashboardSelectPanel() }), i["\u0275\u0275pipe"](6, "translate"), i["\u0275\u0275elementStart"](7, "mat-icon"), i["\u0275\u0275text"](8, "dashboards"), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"](), i["\u0275\u0275elementEnd"]()), 2 & e && (i["\u0275\u0275property"]("required", t.required)("disabled", t.disabled)("ngModel", t.dashboardId), i["\u0275\u0275advance"](1), i["\u0275\u0275property"]("ngForOf", i["\u0275\u0275pipeBind1"](2, 6, t.dashboards$)), i["\u0275\u0275advance"](3), i["\u0275\u0275propertyInterpolate"]("matTooltip", i["\u0275\u0275pipeBind1"](6, 8, "dashboard.select-dashboard")), i["\u0275\u0275property"]("matTooltipPosition", t.tooltipPosition)) }, directives: [S.MatSelect, C.d, r.RequiredValidator, r.NgControlStatus, r.NgModel, h.NgForOf, O.MatButton, f.CdkOverlayOrigin, w.MatTooltip, I.MatIcon, x.MatOption], pipes: [h.AsyncPipe, M.TranslatePipe], styles: ["[_nghost-%COMP%]{width:-webkit-min-content;width:-moz-min-content;width:min-content;min-width:52px}[_nghost-%COMP%]   mat-select[_ngcontent-%COMP%]{max-width:300px;pointer-events:all}[_nghost-%COMP%]   .tb-dashboard-select[_ngcontent-%COMP%]{min-height:32px}[_nghost-%COMP%]   .tb-dashboard-select[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{pointer-events:all;cursor:pointer}[_nghost-%COMP%]     mat-select .mat-select-value{max-width:282px}"] }), e }(); 0, void 0 }, wU4P: function (e, t, n) { "use strict"; n.d(t, "a", function () { return k }); var i = n("mrSG"), r = n("fXoL"), o = n("3Pt+"), a = n("LRne"), s = n("vkgz"), l = n("pLZG"), c = n("lJxs"), u = n("5+tZ"), d = n("w1tV"), p = n("U3y+"), m = n("21Fy"), f = n("8LU1"), h = n("l7P3"), g = n("sYmb"), y = n("kmnG"), b = n("A5z7"), v = n("ofXK"), E = n("qFsG"), T = n("/1cH"), S = n("NFeN"), C = n("FKr1"), O = n("d5eY"), w = ["entityTypeInput"], I = ["entityTypeAutocomplete"], x = ["chipList"]; function M(e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "mat-icon", 13), r["\u0275\u0275text"](1, "close"), r["\u0275\u0275elementEnd"]()) } function j(e, t) { if (1 & e) { var n = r["\u0275\u0275getCurrentView"](); r["\u0275\u0275elementStart"](0, "mat-chip", 11), r["\u0275\u0275listener"]("removed", function () { r["\u0275\u0275restoreView"](n); var e = t.$implicit; return r["\u0275\u0275nextContext"]().remove(e) }), r["\u0275\u0275text"](1), r["\u0275\u0275template"](2, M, 2, 0, "mat-icon", 12), r["\u0275\u0275elementEnd"]() } if (2 & e) { var i = t.$implicit, o = r["\u0275\u0275nextContext"](); r["\u0275\u0275property"]("selectable", !o.disabled)("removable", !o.disabled), r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate1"](" ", i.name, " "), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", !o.disabled) } } function A(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "mat-option", 14), r["\u0275\u0275element"](1, "span", 15), r["\u0275\u0275pipe"](2, "highlight"), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit, i = r["\u0275\u0275nextContext"](); r["\u0275\u0275property"]("value", n), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("innerHTML", r["\u0275\u0275pipeBind2"](2, 2, n.name, i.searchText), r["\u0275\u0275sanitizeHtml"]) } } var R = function (e) { return { entityType: e } }; function N(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "mat-option", 14), r["\u0275\u0275elementStart"](1, "span"), r["\u0275\u0275text"](2), r["\u0275\u0275pipe"](3, "async"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = r["\u0275\u0275nextContext"](); r["\u0275\u0275property"]("value", null), r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](3, 2, n.translate.get("entity.no-entity-types-matching", r["\u0275\u0275pureFunction1"](4, R, n.searchText))), " ") } } function P(e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "mat-error"), r["\u0275\u0275text"](1), r["\u0275\u0275pipe"](2, "translate"), r["\u0275\u0275elementEnd"]()), 2 & e && (r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](2, 1, "entity.entity-type-list-empty"), " ")) } var k = function () { function e(e, t, n, i) { this.store = e, this.translate = t, this.entityService = n, this.fb = i, this.allEntityTypeList = [], this.entityTypeList = [], this.searchText = "", this.dirty = !1, this.propagateChange = function (e) { }, this.entityTypeListFormGroup = this.fb.group({ entityTypeList: [this.entityTypeList, this.required ? [o.Validators.required] : []], entityType: [null] }) } return Object.defineProperty(e.prototype, "required", { get: function () { return this.requiredValue }, set: function (e) { var t = Object(f.coerceBooleanProperty)(e); this.requiredValue !== t && (this.requiredValue = t, this.updateValidators()) }, enumerable: !1, configurable: !0 }), e.prototype.updateValidators = function () { this.entityTypeListFormGroup.get("entityTypeList").setValidators(this.required ? [o.Validators.required] : []), this.entityTypeListFormGroup.get("entityTypeList").updateValueAndValidity() }, e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.ngOnInit = function () { var e, t = this; this.placeholder = this.required ? this.translate.instant("entity.enter-entity-type") : this.translate.instant("entity.any-entity"), this.secondaryPlaceholder = "+" + this.translate.instant("entity.entity-type"), this.ignoreAuthorityFilter && this.allowedEntityTypes && this.allowedEntityTypes.length ? (e = [], this.allowedEntityTypes.forEach(function (t) { e.push(t) })) : e = this.entityService.prepareAllowedEntityTypesList(this.allowedEntityTypes), e.forEach(function (e) { t.allEntityTypeList.push({ name: t.translate.instant(p.d.get(e).type), value: e }) }), this.filteredEntityTypeList = this.entityTypeListFormGroup.get("entityType").valueChanges.pipe(Object(s.a)(function (e) { e && "string" != typeof e ? t.add(e) : null === e && t.clear(t.entityTypeInput.nativeElement.value) }), Object(l.a)(function (e) { return "string" == typeof e }), Object(c.a)(function (e) { return e ? "string" == typeof e ? e : e.name : "" }), Object(u.b)(function (e) { return t.fetchEntityTypes(e) }), Object(d.a)()) }, e.prototype.ngAfterViewInit = function () { }, e.prototype.setDisabledState = function (e) { this.disabled = e, e ? this.entityTypeListFormGroup.disable({ emitEvent: !1 }) : this.entityTypeListFormGroup.enable({ emitEvent: !1 }) }, e.prototype.writeValue = function (e) { var t = this; this.searchText = "", null != e && e.length > 0 ? (this.modelValue = Object(i.h)(e), this.entityTypeList = [], e.forEach(function (e) { t.entityTypeList.push({ name: p.d.has(e) ? t.translate.instant(p.d.get(e).type) : "Unknown", value: e }) }), this.entityTypeListFormGroup.get("entityTypeList").setValue(this.entityTypeList)) : (this.entityTypeList = [], this.entityTypeListFormGroup.get("entityTypeList").setValue(this.entityTypeList), this.modelValue = null), this.dirty = !0 }, e.prototype.add = function (e) { this.modelValue && -1 !== this.modelValue.indexOf(e.value) || (this.modelValue || (this.modelValue = []), this.modelValue.push(e.value), this.entityTypeList.push(e), this.entityTypeListFormGroup.get("entityTypeList").setValue(this.entityTypeList)), this.propagateChange(this.modelValue), this.clear() }, e.prototype.remove = function (e) { var t = this.entityTypeList.indexOf(e); t >= 0 && (this.entityTypeList.splice(t, 1), this.entityTypeListFormGroup.get("entityTypeList").setValue(this.entityTypeList), this.modelValue.splice(t, 1), this.modelValue.length || (this.modelValue = null), this.propagateChange(this.modelValue), this.clear()) }, e.prototype.displayEntityTypeFn = function (e) { return e ? e.name : void 0 }, e.prototype.fetchEntityTypes = function (e) { this.searchText = e; var t = this.allEntityTypeList; return e && e.length && (t = this.allEntityTypeList.filter(function (t) { return t.name.toLowerCase().includes(e.toLowerCase()) })), Object(a.a)(t) }, e.prototype.onFocus = function () { this.dirty && (this.entityTypeListFormGroup.get("entityType").updateValueAndValidity({ onlySelf: !0, emitEvent: !0 }), this.dirty = !1) }, e.prototype.clear = function (e) { var t = this; void 0 === e && (e = ""), this.entityTypeInput.nativeElement.value = e, this.entityTypeListFormGroup.get("entityType").patchValue(e, { emitEvent: !0 }), setTimeout(function () { t.entityTypeInput.nativeElement.blur(), t.entityTypeInput.nativeElement.focus() }, 0) }, e.\u0275fac = function (t) { return new (t || e)(r["\u0275\u0275directiveInject"](h.Store), r["\u0275\u0275directiveInject"](g.TranslateService), r["\u0275\u0275directiveInject"](m.a), r["\u0275\u0275directiveInject"](o.FormBuilder)) }, e.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-entity-type-list"]], viewQuery: function (e, t) { if (1 & e && (r["\u0275\u0275viewQuery"](w, 1), r["\u0275\u0275viewQuery"](I, 1), r["\u0275\u0275viewQuery"](x, 3)), 2 & e) { var n = void 0; r["\u0275\u0275queryRefresh"](n = r["\u0275\u0275loadQuery"]()) && (t.entityTypeInput = n.first), r["\u0275\u0275queryRefresh"](n = r["\u0275\u0275loadQuery"]()) && (t.entityTypeAutocomplete = n.first), r["\u0275\u0275queryRefresh"](n = r["\u0275\u0275loadQuery"]()) && (t.chipList = n.first) } }, inputs: { required: "required", disabled: "disabled", allowedEntityTypes: "allowedEntityTypes", ignoreAuthorityFilter: "ignoreAuthorityFilter" }, features: [r["\u0275\u0275ProvidersFeature"]([{ provide: o.NG_VALUE_ACCESSOR, useExisting: Object(r.forwardRef)(function () { return e }), multi: !0 }])], decls: 14, vars: 14, consts: [["appearance", "standard", 1, "mat-block", 3, "formGroup"], ["formControlName", "entityTypeList"], ["chipList", ""], [3, "selectable", "removable", "removed", 4, "ngFor", "ngForOf"], ["matInput", "", "type", "text", "formControlName", "entityType", "matAutocompleteOrigin", "", 2, "max-width", "200px", 3, "placeholder", "matAutocompleteConnectedTo", "matAutocomplete", "matChipInputFor", "focusin"], ["entityTypeInput", "", "origin", "matAutocompleteOrigin"], [1, "tb-autocomplete", 3, "displayWith"], ["entityTypeAutocomplete", "matAutocomplete"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value", 4, "ngIf"], [4, "ngIf"], [3, "selectable", "removable", "removed"], ["matChipRemove", "", 4, "ngIf"], ["matChipRemove", ""], [3, "value"], [3, "innerHTML"]], template: function (e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "mat-form-field", 0), r["\u0275\u0275elementStart"](1, "mat-chip-list", 1, 2), r["\u0275\u0275template"](3, j, 3, 4, "mat-chip", 3), r["\u0275\u0275elementStart"](4, "input", 4, 5), r["\u0275\u0275listener"]("focusin", function () { return t.onFocus() }), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](7, "mat-autocomplete", 6, 7), r["\u0275\u0275template"](9, A, 3, 5, "mat-option", 8), r["\u0275\u0275pipe"](10, "async"), r["\u0275\u0275template"](11, N, 4, 6, "mat-option", 9), r["\u0275\u0275pipe"](12, "async"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275template"](13, P, 3, 3, "mat-error", 10), r["\u0275\u0275elementEnd"]()), 2 & e) { var n, i = r["\u0275\u0275reference"](2), o = r["\u0275\u0275reference"](6), a = r["\u0275\u0275reference"](8); r["\u0275\u0275property"]("formGroup", t.entityTypeListFormGroup), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("ngForOf", t.entityTypeList), r["\u0275\u0275advance"](1), r["\u0275\u0275propertyInterpolate"]("placeholder", t.disabled ? "" : t.entityTypeList && t.entityTypeList.length ? t.secondaryPlaceholder : t.placeholder), r["\u0275\u0275property"]("matAutocompleteConnectedTo", o)("matAutocomplete", a)("matChipInputFor", i), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("displayWith", t.displayEntityTypeFn), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngForOf", r["\u0275\u0275pipeBind1"](10, 10, t.filteredEntityTypeList)), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngIf", !(null != (n = r["\u0275\u0275pipeBind1"](12, 12, t.filteredEntityTypeList)) && n.length)), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngIf", t.entityTypeListFormGroup.get("entityTypeList").hasError("required")) } }, directives: [y.MatFormField, o.NgControlStatusGroup, o.FormGroupDirective, b.MatChipList, o.NgControlStatus, o.FormControlName, v.NgForOf, E.MatInput, o.DefaultValueAccessor, T.MatAutocompleteTrigger, b.MatChipInput, T.MatAutocompleteOrigin, T.MatAutocomplete, v.NgIf, b.MatChip, S.MatIcon, b.MatChipRemove, C.MatOption, y.MatError], pipes: [v.AsyncPipe, O.a, g.TranslatePipe], encapsulation: 2 }), e }(); 0, void 0 }, wtyh: function (e, t, n) { "use strict"; n.d(t, "b", function () { return a }), n.d(t, "d", function () { return s }), n.d(t, "a", function () { return l }), n.d(t, "f", function () { return c }), n.d(t, "e", function () { return u }), n.d(t, "g", function () { return d }), n.d(t, "c", function () { return p }); var i = n("mrSG"), r = n("ofXK"), o = n("fXoL"), a = new o.InjectionToken("WindowToken"), s = function () { function e() { } return Object.defineProperty(e.prototype, "nativeWindow", { get: function () { throw new Error("Not implemented.") }, enumerable: !1, configurable: !0 }), e }(), l = function (e) { function t() { return e.call(this) || this } return Object(i.d)(t, e), Object.defineProperty(t.prototype, "nativeWindow", { get: function () { return window }, enumerable: !1, configurable: !0 }), t.\u0275fac = function (e) { return new (e || t) }, t.\u0275prov = o["\u0275\u0275defineInjectable"]({ token: t, factory: t.\u0275fac }), t }(s); function c(e, t) { return Object(r.isPlatformBrowser)(t) ? e.nativeWindow : new Object } 0, void 0; var u = { provide: s, useClass: l }, d = { provide: a, useFactory: c, deps: [s, o.PLATFORM_ID] }, p = [u, d] }, xKAQ: function (e, t, n) { "use strict"; var i; n.d(t, "c", function () { return i }), n.d(t, "b", function () { return r }), n.d(t, "a", function () { return o }), function (e) { e.SHOW_NOTIFICATION = "[Notification] Show", e.HIDE_NOTIFICATION = "[Notification] Hide" }(i || (i = {})); var r = function (e) { this.notification = e, this.type = i.SHOW_NOTIFICATION }, o = function (e) { this.hideNotification = e, this.type = i.HIDE_NOTIFICATION } }, xw5a: function (e, t, n) { "use strict"; n.d(t, "d", function () { return i }), n.d(t, "v", function () { return c }), n.d(t, "u", function () { return u }), n.d(t, "o", function () { return d }), n.d(t, "n", function () { return p }), n.d(t, "e", function () { return l }), n.d(t, "w", function () { return h }), n.d(t, "l", function () { return y }), n.d(t, "m", function () { return b }), n.d(t, "B", function () { return v }), n.d(t, "f", function () { return m }), n.d(t, "h", function () { return f }), n.d(t, "J", function () { return T }), n.d(t, "g", function () { return E }), n.d(t, "H", function () { return C }), n.d(t, "a", function () { return S }), n.d(t, "i", function () { return w }), n.d(t, "b", function () { return O }), n.d(t, "j", function () { return x }), n.d(t, "q", function () { return j }), n.d(t, "C", function () { return A }), n.d(t, "G", function () { return R }), n.d(t, "E", function () { return N }), n.d(t, "F", function () { return P }), n.d(t, "y", function () { return k }), n.d(t, "D", function () { return L }), n.d(t, "z", function () { return D }), n.d(t, "A", function () { return V }), n.d(t, "c", function () { return M }), n.d(t, "r", function () { return U }), n.d(t, "k", function () { return B }), n.d(t, "I", function () { return G }), n.d(t, "p", function () { return q }), n.d(t, "x", function () { return z }), n.d(t, "t", function () { return H }), n.d(t, "s", function () { return W }), n.d(t, "K", function () { return Q }); var i, r = n("MBk6"), o = n("3Tyt"), a = n("0lYY"), s = n("//Q6"); !function (e) { e.ATTRIBUTE = "ATTRIBUTE", e.CLIENT_ATTRIBUTE = "CLIENT_ATTRIBUTE", e.SHARED_ATTRIBUTE = "SHARED_ATTRIBUTE", e.SERVER_ATTRIBUTE = "SERVER_ATTRIBUTE", e.TIME_SERIES = "TIME_SERIES", e.ENTITY_FIELD = "ENTITY_FIELD", e.ALARM_FIELD = "ALARM_FIELD", e.CONSTANT = "CONSTANT", e.COUNT = "COUNT" }(i || (i = {})); var l, c = new Map([[i.ATTRIBUTE, "filter.key-type.attribute"], [i.TIME_SERIES, "filter.key-type.timeseries"], [i.ENTITY_FIELD, "filter.key-type.entity-field"], [i.CONSTANT, "filter.key-type.constant"]]); function u(e) { switch (e) { case i.ATTRIBUTE: case i.CLIENT_ATTRIBUTE: case i.SHARED_ATTRIBUTE: case i.SERVER_ATTRIBUTE: return o.h.attribute; case i.TIME_SERIES: return o.h.timeseries; case i.ENTITY_FIELD: return o.h.entityField; case i.ALARM_FIELD: return o.h.alarm; case i.COUNT: return o.h.count } } function d(e) { switch (e) { case o.h.timeseries: return i.TIME_SERIES; case o.h.attribute: return i.ATTRIBUTE; case o.h.function: return i.ENTITY_FIELD; case o.h.alarm: return i.ALARM_FIELD; case o.h.entityField: return i.ENTITY_FIELD; case o.h.count: return i.COUNT } } function p(e) { return { key: e.name, type: d(e.type) } } !function (e) { e.STRING = "STRING", e.NUMERIC = "NUMERIC", e.BOOLEAN = "BOOLEAN", e.DATE_TIME = "DATE_TIME" }(l || (l = {})); var m, f, h = new Map([[l.STRING, { name: "filter.value-type.string", icon: "mdi:format-text" }], [l.NUMERIC, { name: "filter.value-type.numeric", icon: "mdi:numeric" }], [l.BOOLEAN, { name: "filter.value-type.boolean", icon: "mdi:checkbox-marked-outline" }], [l.DATE_TIME, { name: "filter.value-type.date-time", icon: "mdi:calendar-clock" }]]); function g(e) { switch (e) { case l.STRING: return m.STRING; case l.NUMERIC: case l.DATE_TIME: return m.NUMERIC; case l.BOOLEAN: return m.BOOLEAN } } function y(e, t) { return { keyFilterPredicate: function (e, t) { var n = { type: t ? m.COMPLEX : g(e) }; switch (n.type) { case m.STRING: n.operation = f.STARTS_WITH, n.value = { defaultValue: "" }, n.ignoreCase = !1; break; case m.NUMERIC: n.operation = E.EQUAL, n.value = { defaultValue: e === l.DATE_TIME ? Date.now() : 0 }; break; case m.BOOLEAN: n.operation = S.EQUAL, n.value = { defaultValue: !1 }; break; case m.COMPLEX: n.operation = O.AND, n.predicates = [] }return n }(e, t), userInfo: { editable: !0, label: "", autogeneratedLabel: !0, order: 0 } } } function b() { return { editable: !0, label: "", autogeneratedLabel: !0, order: 0 } } function v(e) { var t = [I.CURRENT_TENANT, I.CURRENT_CUSTOMER]; return e ? t.push(I.CURRENT_USER) : t.push(I.CURRENT_DEVICE), t } !function (e) { e.STRING = "STRING", e.NUMERIC = "NUMERIC", e.BOOLEAN = "BOOLEAN", e.COMPLEX = "COMPLEX" }(m || (m = {})), function (e) { e.EQUAL = "EQUAL", e.NOT_EQUAL = "NOT_EQUAL", e.STARTS_WITH = "STARTS_WITH", e.ENDS_WITH = "ENDS_WITH", e.CONTAINS = "CONTAINS", e.NOT_CONTAINS = "NOT_CONTAINS" }(f || (f = {})); var E, T = new Map([[f.EQUAL, "filter.operation.equal"], [f.NOT_EQUAL, "filter.operation.not-equal"], [f.STARTS_WITH, "filter.operation.starts-with"], [f.ENDS_WITH, "filter.operation.ends-with"], [f.CONTAINS, "filter.operation.contains"], [f.NOT_CONTAINS, "filter.operation.not-contains"]]); !function (e) { e.EQUAL = "EQUAL", e.NOT_EQUAL = "NOT_EQUAL", e.GREATER = "GREATER", e.LESS = "LESS", e.GREATER_OR_EQUAL = "GREATER_OR_EQUAL", e.LESS_OR_EQUAL = "LESS_OR_EQUAL" }(E || (E = {})); var S, C = new Map([[E.EQUAL, "filter.operation.equal"], [E.NOT_EQUAL, "filter.operation.not-equal"], [E.GREATER, "filter.operation.greater"], [E.LESS, "filter.operation.less"], [E.GREATER_OR_EQUAL, "filter.operation.greater-or-equal"], [E.LESS_OR_EQUAL, "filter.operation.less-or-equal"]]); !function (e) { e.EQUAL = "EQUAL", e.NOT_EQUAL = "NOT_EQUAL" }(S || (S = {})); var O, w = new Map([[S.EQUAL, "filter.operation.equal"], [S.NOT_EQUAL, "filter.operation.not-equal"]]); !function (e) { e.AND = "AND", e.OR = "OR" }(O || (O = {})); var I, x = new Map([[O.AND, "filter.operation.and"], [O.OR, "filter.operation.or"]]); !function (e) { e.CURRENT_TENANT = "CURRENT_TENANT", e.CURRENT_CUSTOMER = "CURRENT_CUSTOMER", e.CURRENT_USER = "CURRENT_USER", e.CURRENT_DEVICE = "CURRENT_DEVICE" }(I || (I = {})); var M, j = new Map([[I.CURRENT_TENANT, "filter.current-tenant"], [I.CURRENT_CUSTOMER, "filter.current-customer"], [I.CURRENT_USER, "filter.current-user"], [I.CURRENT_DEVICE, "filter.current-device"]]), A = [I.CURRENT_CUSTOMER, I.CURRENT_DEVICE]; function R(e, t, n) { var i, r = n.map(function (i) { return function (e, t, n, i) { var r = n.predicate; return function e(t, n, i, r, o) { if (r.type === m.COMPLEX) { var a = r, s = a.operation, c = a.predicates.map(function (r) { return e(t, n, i, r, s) }); if (c.length > 1) { var u = t.instant(x.get(s)), d = c.join(' <span class="tb-filter-complex-operation">' + u + "</span> "); return s === O.OR && o && O.OR !== o && (d = '<span class="tb-filter-bracket"><span class="tb-left-bracket">(</span>' + d + '<span class="tb-right-bracket">)</span></span>'), d } return c[0] } return function (e, t, n, i) { var r, o, a = n.key.key, s = i.value, c = !!s.dynamicValue && !!s.dynamicValue.sourceType; c && (o = '<span class="tb-filter-dynamic-value"><span class="tb-filter-dynamic-source">' + e.instant(j.get(s.dynamicValue.sourceType)) + "</span>", o += '.<span class="tb-filter-value">' + s.dynamicValue.sourceAttribute + "</span></span>"); switch (i.type) { case m.STRING: r = e.instant(T.get(i.operation)), i.ignoreCase && (r += " " + e.instant("filter.ignore-case")), c || (o = "'" + i.value.defaultValue + "'"); break; case m.NUMERIC: r = e.instant(C.get(i.operation)), c || (o = n.valueType === l.DATE_TIME ? t.transform(i.value.defaultValue, "yyyy-MM-dd HH:mm") : i.value.defaultValue + ""); break; case m.BOOLEAN: r = e.instant(w.get(i.operation)), c || (o = e.instant(i.value.defaultValue ? "value.true" : "value.false")) }c || (o = '<span class="tb-filter-value">' + o + "</span>"); return '<span class="tb-filter-predicate"><span class="tb-filter-entity-key">' + a + '</span> <span class="tb-filter-simple-operation">' + r + "</span> " + o + "</span>" }(t, n, i, r) }(e, t, n, r, i) }(e, t, i, n.length > 1 ? O.AND : void 0) }); if (r.length > 1) { var o = e.instant("filter.operation.and"); i = r.join(' <span class="tb-filter-complex-operation">' + o + "</span> ") } else i = r[0]; return i } function N(e) { if (!e) return []; for (var t = [], n = 0, i = e; n < i.length; n++)for (var r = i[n], o = r.key, a = 0, s = r.predicates; a < s.length; a++) { var l = s[a], c = { key: o, valueType: r.valueType, value: r.value, predicate: _(l) }; t.push(c) } return t } function P(e) { var t = [], n = {}; if (e) for (var i = 0, r = e; i < r.length; i++) { var o = r[i], a = o.key, s = a.key + a.type + o.valueType, l = n[s]; l || (l = { key: a, valueType: o.valueType, value: o.value, predicates: [] }, n[s] = l, t.push(l)), o.predicate && l.predicates.push(F(o.predicate)) } return t } function k(e) { for (var t = [], n = 0, i = e.keyFilters; n < i.length; n++)for (var r = i[n], o = r.key, a = 0, s = r.predicates; a < s.length; a++) { var l = s[a], c = { key: o, valueType: r.valueType, value: r.value, predicate: _(l) }; t.push(c) } return t } function _(e) { var t = e.keyFilterPredicate; if (t.type === m.COMPLEX) { var n = t, i = n.predicates.map(function (e) { return _(e) }); t = { type: m.COMPLEX, operation: n.operation, predicates: i } } return t } function F(e) { var t = { keyFilterPredicate: null, userInfo: null }; if (e.type === m.COMPLEX) { var n = e, i = n.predicates.map(function (e) { return F(e) }); t.keyFilterPredicate = { predicates: i, operation: n.operation, type: m.COMPLEX } } else t.keyFilterPredicate = e; return t } function L(e) { return !!e.editable && e.keyFilters.some(function (e) { return e.predicates.some(function (e) { return function e(t) { return t.keyFilterPredicate.type === m.COMPLEX ? t.keyFilterPredicate.predicates.some(function (t) { return e(t) }) : t.userInfo.editable }(e) }) }) } function D(e, t) { var n = e.keyFilters.map(function (e) { return function (e, t) { var n = e.predicates.map(function (n) { return function e(t, n, i, r) { if (i.keyFilterPredicate.type === m.COMPLEX) { var o = i.keyFilterPredicate.predicates.map(function (i) { return e(t, n, i, r) }); return [].concat.apply([], o) } if (i.userInfo.editable) { var a = { info: i, label: i.userInfo.label, valueType: n }; return i.userInfo.autogeneratedLabel && (a.label = V(t.key, n, i.keyFilterPredicate.operation, r)), [a] } return [] }(e.key, e.valueType, n, t) }); return [].concat.apply([], n) }(e, t) }), i = [].concat.apply([], n); return i = i.sort(function (e, t) { return (Object(s.n)(e.info.userInfo.order) ? e.info.userInfo.order : 0) - (Object(s.n)(t.info.userInfo.order) ? t.info.userInfo.order : 0) }) } function V(e, t, n, i) { var r, o = e; switch (t) { case l.STRING: r = T.get(n); break; case l.NUMERIC: case l.DATE_TIME: r = C.get(n); break; case l.BOOLEAN: r = w.get(n) }return o += " " + i.instant(r) } function U(e) { return e.sortOrder ? (e.sortOrder.direction + "").toLowerCase() : "" } function B(e) { return { pageSize: e, page: 0, sortOrder: { key: { type: i.ENTITY_FIELD, key: "createdTime" }, direction: M.DESC } } } !function (e) { e.ASC = "ASC", e.DESC = "DESC" }(M || (M = {})); var G = B(1), q = B(1024); function z(e, t) { var n = e.data.map(function (e) { return e.entityId.id }), i = t.data.map(function (e) { return e.entityId.id }); return !Object(s.r)(n, i) } var H = [{ type: i.ENTITY_FIELD, key: "name" }, { type: i.ENTITY_FIELD, key: "label" }, { type: i.ENTITY_FIELD, key: "additionalInfo" }]; function W(e) { var t = { id: e.entityId.id, entityType: e.entityId.entityType }; if (e.latest && e.latest[i.ENTITY_FIELD]) { var n = e.latest[i.ENTITY_FIELD]; if (n.name ? t.name = n.name.value : t.name = "", n.label ? t.label = n.label.value : t.label = "", t.entityDescription = "", n.additionalInfo) { var r = n.additionalInfo.value; if (r && r.length) try { var o = JSON.parse(r); o && o.description && (t.entityDescription = o.description) } catch (a) { } } } return t } function Q(e, t, n) { void 0 === n && (n = !1), e.entity = { id: { entityType: t.entityType, id: t.id } }, e.entityId = t.id, e.entityType = t.entityType, e.type !== a.a.entity && e.type !== a.a.entityCount || (e.type === a.a.entity && (e.entityName = t.name, e.entityLabel = t.label, e.name = t.name, e.entityDescription = t.entityDescription, e.entity.label = t.label, e.entity.name = t.name), n && (e.entityFilter = { type: r.a.singleEntity, singleEntity: { id: t.id, entityType: t.entityType } })) } }, y7gY: function (e, t, n) { "use strict"; n.d(t, "a", function () { return a }); var i = n("fXoL"), r = n("Y8nr"), o = n("tk/3"), a = function () { function e(e) { this.http = e } return e.prototype.getEdges = function (e, t) { return this.http.get("/api/edges?edgeIds=" + e.join(","), Object(r.b)(t)) }, e.prototype.getEdge = function (e, t) { return this.http.get("/api/edge/" + e, Object(r.b)(t)) }, e.prototype.getEdgeInfo = function (e, t) { return this.http.get("/api/edge/info/" + e, Object(r.b)(t)) }, e.prototype.saveEdge = function (e, t) { return this.http.post("/api/edge", e, Object(r.b)(t)) }, e.prototype.deleteEdge = function (e, t) { return this.http.delete("/api/edge/" + e, Object(r.b)(t)) }, e.prototype.getEdgeTypes = function (e) { return this.http.get("/api/edge/types", Object(r.b)(e)) }, e.prototype.getCustomerEdgeInfos = function (e, t, n, i) { return void 0 === n && (n = ""), this.http.get("/api/customer/" + e + "/edgeInfos" + t.toQuery() + "&type=" + n, Object(r.b)(i)) }, e.prototype.assignEdgeToCustomer = function (e, t, n) { return this.http.post("/api/customer/" + e + "/edge/" + t, Object(r.b)(n)) }, e.prototype.unassignEdgeFromCustomer = function (e, t) { return this.http.delete("/api/customer/edge/" + e, Object(r.b)(t)) }, e.prototype.makeEdgePublic = function (e, t) { return this.http.post("/api/customer/public/edge/" + e, null, Object(r.b)(t)) }, e.prototype.getTenantEdgeInfos = function (e, t, n) { return void 0 === t && (t = ""), this.http.get("/api/tenant/edgeInfos" + e.toQuery() + "&type=" + t, Object(r.b)(n)) }, e.prototype.findByQuery = function (e, t) { return this.http.post("/api/edges", e, Object(r.b)(t)) }, e.prototype.getEdgeEvents = function (e, t, n) { return this.http.get("/api/edge/" + e.id + "/events" + t.toQuery(), Object(r.b)(n)) }, e.prototype.syncEdge = function (e, t) { return this.http.post("/api/edge/sync/" + e, e, Object(r.b)(t)) }, e.prototype.findMissingToRelatedRuleChains = function (e, t) { return this.http.get("/api/edge/missingToRelatedRuleChains/" + e, Object(r.b)(t)) }, e.prototype.findByName = function (e, t) { return this.http.get("/api/tenant/edges?edgeName=" + e, Object(r.b)(t)) }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275inject"](o.HttpClient)) }, e.\u0275prov = i["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0 }, yAAm: function (e, t, n) { "use strict"; n.d(t, "a", function () { return M }); var i = n("mrSG"), r = n("fXoL"), o = n("3Pt+"), a = n("jCow"), s = n("8LU1"), l = n("xKAQ"), c = n("OiFK"), u = n("//Q6"), d = n("nhHW"), p = n("HR/i"), m = (n("gaqQ"), n("Uj2l")), f = n("sYmb"), h = n("l7P3"), g = n("8m5z"), y = n("XiUz"), b = n("ofXK"), v = n("znSr"), E = n("Qu3c"), T = n("bTqV"), S = n("NFeN"), C = n("rezs"), O = ["javascriptEditor"]; function w(e, t) { if (1 & e) { var n = r["\u0275\u0275getCurrentView"](); r["\u0275\u0275elementStart"](0, "button", 13), r["\u0275\u0275listener"]("click", function () { return r["\u0275\u0275restoreView"](n), r["\u0275\u0275nextContext"]().beautifyJs() }), r["\u0275\u0275text"](1), r["\u0275\u0275pipe"](2, "translate"), r["\u0275\u0275elementEnd"]() } 2 & e && (r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](2, 1, "js-func.tidy"), " ")) } var I = function (e, t) { return { "tb-disabled": e, "fill-height": t } }, x = function (e) { return { "fill-height": e } }, M = function () { function e(e, t, n, i, r) { this.elementRef = e, this.utils = t, this.translate = n, this.store = i, this.raf = r, this.ignoreChange = !1, this.toastTargetId = "jsFuncEditor-" + Object(u.k)(), this.functionArgsString = "", this.fullscreen = !1, this.functionValid = !0, this.errorShowed = !1, this.errorMarkers = [], this.errorAnnotationId = -1, this.propagateChange = null } return Object.defineProperty(e.prototype, "noValidate", { get: function () { return this.noValidateValue }, set: function (e) { this.noValidateValue = Object(s.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "required", { get: function () { return this.requiredValue }, set: function (e) { this.requiredValue = Object(s.coerceBooleanProperty)(e) }, enumerable: !1, configurable: !0 }), e.prototype.ngOnInit = function () { var e = this; this.resultType && 0 !== this.resultType.length || (this.resultType = "nocheck"), this.functionArgs && this.functionArgs.forEach(function (t) { e.functionArgsString.length > 0 && (e.functionArgsString += ", "), e.functionArgsString += t }); var t = this.javascriptEditorElmRef.nativeElement, n = { mode: "ace/mode/javascript", showGutter: !0, showPrintMargin: !0, readOnly: this.disabled }; n = Object(i.a)(Object(i.a)({}, n), { enableSnippets: !0, enableBasicAutocompletion: !0, enableLiveAutocompletion: !0 }), Object(a.b)().subscribe(function (r) { e.jsEditor = r.edit(t, n), e.jsEditor.session.setUseWrapMode(!0), e.jsEditor.setValue(e.modelValue ? e.modelValue : "", -1), e.jsEditor.setReadOnly(e.disabled), e.jsEditor.on("change", function () { e.ignoreChange || (e.cleanupJsErrors(), e.updateView()) }), e.editorCompleter && (e.jsEditor.completers = Object(i.h)([e.editorCompleter], e.jsEditor.completers || [])), e.editorResize$ = new p.a(function () { e.onAceEditorResize() }), e.editorResize$.observe(t) }) }, e.prototype.ngOnDestroy = function () { this.editorResize$ && this.editorResize$.disconnect() }, e.prototype.onAceEditorResize = function () { var e = this; this.editorsResizeCaf && (this.editorsResizeCaf(), this.editorsResizeCaf = null), this.editorsResizeCaf = this.raf.raf(function () { e.jsEditor.resize(), e.jsEditor.renderer.updateFull() }) }, e.prototype.registerOnChange = function (e) { this.propagateChange = e }, e.prototype.registerOnTouched = function (e) { }, e.prototype.setDisabledState = function (e) { this.disabled = e, this.jsEditor && this.jsEditor.setReadOnly(this.disabled) }, e.prototype.validate = function (e) { return this.functionValid ? null : { jsFunc: { valid: !1 } } }, e.prototype.beautifyJs = function () { var e = this; Object(m.c)(this.modelValue, { indent_size: 4, wrap_line_length: 60 }).subscribe(function (t) { e.jsEditor.setValue(t || "", -1), e.updateView() }) }, e.prototype.validateOnSubmit = function () { this.disabled || (this.cleanupJsErrors(), this.functionValid = this.validateJsFunc(), this.functionValid || (this.propagateChange(this.modelValue), this.store.dispatch(new l.b({ message: this.validationError, type: "error", target: this.toastTargetId, verticalPosition: "bottom", horizontalPosition: "left" })), this.errorShowed = !0)) }, e.prototype.validateJsFunc = function () { try { var e = new Function(this.functionArgsString, this.modelValue); if (this.noValidate) return !0; if (this.validationArgs) { for (var t = void 0, n = void 0, i = 0, r = this.validationArgs; i < r.length; i++) { var o = r[i]; try { t = e.apply(this, o), n = null; break } catch (h) { n = h } } if (n) throw n; if ("nocheck" !== this.resultType) if ("any" === this.resultType) { if (Object(u.B)(t)) return this.validationError = this.translate.instant("js-func.no-return-error"), !1 } else if (typeof t !== this.resultType) return this.validationError = this.translate.instant("js-func.return-type-mismatch", { type: this.resultType }), !1; return !0 } return !0 } catch (h) { var s = this.utils.parseException(h), l = "Error:"; if (s.name && (l += " " + s.name + ":"), s.message && (l += " " + s.message), s.lineNumber && (l += "<br>Line " + s.lineNumber, s.columnNumber && (l += " column " + s.columnNumber), l += " of script."), this.validationError = l, s.lineNumber) { var c = s.lineNumber - 1, d = 0; s.columnNumber && (d = s.columnNumber); var p = this.jsEditor.session.addMarker(new a.a(c, 0, c, 1 / 0), "ace_active-line", "screenLine"); this.errorMarkers.push(p); var m = this.jsEditor.session.getAnnotations(), f = { row: c, column: d, text: s.message, type: "error" }; this.errorAnnotationId = m.push(f) - 1, this.jsEditor.session.setAnnotations(m) } return !1 } }, e.prototype.cleanupJsErrors = function () { var e = this; if (this.errorShowed && (this.store.dispatch(new l.a({ target: this.toastTargetId })), this.errorShowed = !1), this.errorMarkers.forEach(function (t) { e.jsEditor.session.removeMarker(t) }), this.errorMarkers.length = 0, this.errorAnnotationId > -1) { var t = this.jsEditor.session.getAnnotations(); t.splice(this.errorAnnotationId, 1), this.jsEditor.session.setAnnotations(t), this.errorAnnotationId = -1 } }, e.prototype.writeValue = function (e) { this.modelValue = e, this.jsEditor && (this.ignoreChange = !0, this.jsEditor.setValue(this.modelValue ? this.modelValue : "", -1), this.ignoreChange = !1) }, e.prototype.updateView = function () { var e = this.jsEditor.getValue(); this.modelValue !== e && (this.modelValue = e, this.functionValid = !0, this.propagateChange(this.modelValue)) }, e.\u0275fac = function (t) { return new (t || e)(r["\u0275\u0275directiveInject"](r.ElementRef), r["\u0275\u0275directiveInject"](c.a), r["\u0275\u0275directiveInject"](f.TranslateService), r["\u0275\u0275directiveInject"](h.Store), r["\u0275\u0275directiveInject"](d.a)) }, e.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-js-func"]], viewQuery: function (e, t) { if (1 & e && r["\u0275\u0275viewQuery"](O, 3), 2 & e) { var n; r["\u0275\u0275queryRefresh"](n = r["\u0275\u0275loadQuery"]()) && (t.javascriptEditorElmRef = n.first) } }, inputs: { functionName: "functionName", functionArgs: "functionArgs", validationArgs: "validationArgs", resultType: "resultType", disabled: "disabled", fillHeight: "fillHeight", editorCompleter: "editorCompleter", noValidate: "noValidate", required: "required" }, features: [r["\u0275\u0275ProvidersFeature"]([{ provide: o.NG_VALUE_ACCESSOR, useExisting: Object(r.forwardRef)(function () { return e }), multi: !0 }, { provide: o.NG_VALIDATORS, useExisting: Object(r.forwardRef)(function () { return e }), multi: !0 }])], decls: 18, vars: 15, consts: [["tb-fullscreen", "", "fxLayout", "column", 1, "tb-js-func", 2, "background", "#fff", 3, "ngClass", "fullscreen"], ["fxLayout", "row", "fxLayoutAlign", "start center", 1, "tb-js-func-toolbar", 2, "height", "40px"], [1, "tb-title", "no-padding"], ["fxFlex", ""], ["type", "button", "mat-button", "", "class", "tidy", 3, "click", 4, "ngIf"], [2, "width", "initial"], ["matTooltipPosition", "above", 2, "border-radius", "50%", 3, "matTooltip", "click"], ["type", "button", "mat-button", "", "mat-icon-button", "", 1, "tb-mat-32"], [1, "material-icons"], ["id", "tb-javascript-panel", "fxLayout", "column", "tb-toast", "", 1, "tb-js-func-panel", 3, "toastTarget"], ["id", "tb-javascript-input", 3, "ngClass"], ["javascriptEditor", ""], ["fxLayout", "row", "fxLayoutAlign", "start center", 2, "height", "40px"], ["type", "button", "mat-button", "", 1, "tidy", 3, "click"]], template: function (e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "div", 0), r["\u0275\u0275elementStart"](1, "div", 1), r["\u0275\u0275elementStart"](2, "label", 2), r["\u0275\u0275text"](3), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](4, "span", 3), r["\u0275\u0275template"](5, w, 3, 3, "button", 4), r["\u0275\u0275elementStart"](6, "fieldset", 5), r["\u0275\u0275elementStart"](7, "div", 6), r["\u0275\u0275listener"]("click", function () { return t.fullscreen = !t.fullscreen }), r["\u0275\u0275pipe"](8, "translate"), r["\u0275\u0275elementStart"](9, "button", 7), r["\u0275\u0275elementStart"](10, "mat-icon", 8), r["\u0275\u0275text"](11), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](12, "div", 9), r["\u0275\u0275element"](13, "div", 10, 11), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](15, "div", 12), r["\u0275\u0275elementStart"](16, "label", 2), r["\u0275\u0275text"](17, "}"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]()), 2 & e && (r["\u0275\u0275property"]("ngClass", r["\u0275\u0275pureFunction2"](10, I, t.disabled, t.fillHeight))("fullscreen", t.fullscreen), r["\u0275\u0275advance"](3), r["\u0275\u0275textInterpolate"]("function " + (t.functionName ? t.functionName : "") + "(" + t.functionArgsString + ") {"), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngIf", !t.disabled), r["\u0275\u0275advance"](2), r["\u0275\u0275propertyInterpolate"]("matTooltip", r["\u0275\u0275pipeBind1"](8, 8, t.fullscreen ? "fullscreen.exit" : "fullscreen.expand")), r["\u0275\u0275advance"](4), r["\u0275\u0275textInterpolate"](t.fullscreen ? "fullscreen_exit" : "fullscreen"), r["\u0275\u0275advance"](1), r["\u0275\u0275propertyInterpolate"]("toastTarget", t.toastTargetId), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngClass", r["\u0275\u0275pureFunction1"](13, x, t.fillHeight))) }, directives: [g.a, y.f, b.NgClass, v.b, y.e, y.b, b.NgIf, E.MatTooltip, T.MatButton, S.MatIcon, C.b], pipes: [f.TranslatePipe], styles: [".tb-js-func{position:relative}.tb-js-func.tb-disabled{color:rgba(0,0,0,.38)}.tb-js-func.fill-height{height:100%}.tb-js-func .tb-js-func-panel{height:calc(100% - 80px);margin-left:15px;border:1px solid silver}.tb-js-func .tb-js-func-panel #tb-javascript-input{width:100%;min-width:200px;height:100%}.tb-js-func .tb-js-func-panel #tb-javascript-input:not(.fill-height){min-height:200px}.tb-js-func .tb-js-func-toolbar button.mat-button,.tb-js-func .tb-js-func-toolbar button.mat-icon-button,.tb-js-func .tb-js-func-toolbar button.mat-icon-button.tb-mat-32{align-items:center;vertical-align:middle;min-width:32px;min-height:15px;padding:4px;margin:0;font-size:.8rem;line-height:15px;color:#7b7b7b;background:hsla(0,0%,86%,.35)}.tb-js-func .tb-js-func-toolbar button.mat-button:not(:last-child),.tb-js-func .tb-js-func-toolbar button.mat-icon-button.tb-mat-32:not(:last-child),.tb-js-func .tb-js-func-toolbar button.mat-icon-button:not(:last-child){margin-right:4px}"], encapsulation: 2 }), e }(); 0, void 0 }, z36O: function (e, t, n) { "use strict"; n.d(t, "a", function () { return o }); var i = n("fXoL"), r = n("sYmb"), o = function () { function e(e) { this.translate = e } return e.prototype.transform = function (e, t) { var n = Math.floor(e / 1e3), i = Math.floor(n / 86400), r = Math.floor(n % 86400 / 3600), o = Math.floor(n % 86400 % 3600 / 60); n %= 60; var a = ""; return i > 0 && (a += this.translate.instant("timewindow.days", { days: i })), r > 0 && (0 === a.length && 1 === r && (r = 0), a += this.translate.instant("timewindow.hours", { hours: r })), o > 0 && (0 === a.length && 1 === o && (o = 0), a += this.translate.instant("timewindow.minutes", { minutes: o })), n > 0 && (0 === a.length && 1 === n && (n = 0), a += this.translate.instant("timewindow.seconds", { seconds: n })), a }, e.\u0275fac = function (t) { return new (t || e)(i["\u0275\u0275directiveInject"](r.TranslateService)) }, e.\u0275pipe = i["\u0275\u0275definePipe"]({ name: "milliSecondsToTimeString", type: e, pure: !0 }), e }(); 0, void 0 }, zUnb: function (e, t, n) { "use strict"; n.r(t); var i = n("jhN1"), r = n("fXoL"), o = n("R1ws"), a = n("tyNb"), s = [{ path: "", redirectTo: "home", pathMatch: "full", data: { breadcrumb: { skip: !0 } } }], l = function () { function e() { } return e.\u0275fac = function (t) { return new (t || e) }, e.\u0275mod = r["\u0275\u0275defineNgModule"]({ type: e }), e.\u0275inj = r["\u0275\u0275defineInjector"]({ imports: [[a.RouterModule.forRoot(s)], a.RouterModule] }), e }(); void (("undefined" == typeof ngJitMode || ngJitMode) && r["\u0275\u0275setNgModuleScope"](l, { imports: [a.RouterModule], exports: [a.RouterModule] })), 0; var c = n("pKmL"), u = n("ofXK"), d = n("mrSG"), p = n("Vurf"), m = n("RxGS"), f = n("he9t"), h = n("l7P3"), g = n("3Pt+"), y = n("XiUz"), b = n("Wp6s"), v = n("1wU7"), E = n("rezs"), T = n("kmnG"), S = n("sYmb"), C = n("qFsG"), O = n("NFeN"), w = n("40Wt"), I = n("bTqV"), x = n("bv9b"), M = n("f0Cb"); function j(e, t) { 1 & e && r["\u0275\u0275element"](0, "mat-progress-bar", 21) } function A(e, t) { 1 & e && r["\u0275\u0275element"](0, "span", 22) } var R = function (e) { return { name: e } }; function N(e, t) { if (1 & e && (r["\u0275\u0275elementContainerStart"](0), r["\u0275\u0275elementStart"](1, "a", 28), r["\u0275\u0275element"](2, "mat-icon", 29), r["\u0275\u0275text"](3), r["\u0275\u0275pipe"](4, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementContainerEnd"]()), 2 & e) { var n = t.$implicit; r["\u0275\u0275advance"](1), r["\u0275\u0275propertyInterpolate"]("href", n.url, r["\u0275\u0275sanitizeUrl"]), r["\u0275\u0275advance"](1), r["\u0275\u0275propertyInterpolate"]("svgIcon", n.icon), r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind2"](4, 3, "login.login-with", r["\u0275\u0275pureFunction1"](6, R, n.name)), " ") } } function P(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "div", 23), r["\u0275\u0275template"](1, N, 5, 8, "ng-container", 24), r["\u0275\u0275elementStart"](2, "div", 25), r["\u0275\u0275elementStart"](3, "div", 26), r["\u0275\u0275element"](4, "mat-divider"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](5, "div", 27), r["\u0275\u0275text"](6), r["\u0275\u0275pipe"](7, "uppercase"), r["\u0275\u0275pipe"](8, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](9, "div", 26), r["\u0275\u0275element"](10, "mat-divider"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = r["\u0275\u0275nextContext"](); r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngForOf", n.oauth2Clients), r["\u0275\u0275advance"](5), r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](7, 2, r["\u0275\u0275pipeBind1"](8, 4, "login.or"))) } } function k(e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "mat-error"), r["\u0275\u0275text"](1), r["\u0275\u0275pipe"](2, "translate"), r["\u0275\u0275elementEnd"]()), 2 & e && (r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](2, 1, "user.invalid-email-format"), " ")) } var _ = function (e) { function t(t, n, i, r) { var o = e.call(this, t) || this; return o.store = t, o.authService = n, o.fb = i, o.router = r, o.loginFormGroup = o.fb.group({ username: "", password: "" }), o.oauth2Clients = null, o } return Object(d.d)(t, e), t.prototype.ngOnInit = function () { this.oauth2Clients = this.authService.oauth2Clients }, t.prototype.login = function () { var e = this; this.loginFormGroup.valid ? this.authService.login(this.loginFormGroup.value).subscribe(function () { }, function (t) { t && t.error && t.error.errorCode && t.error.errorCode === f.a.serverErrorCode.credentialsExpired && e.router.navigateByUrl("login/resetExpiredPassword?resetToken=" + t.error.resetToken) }) : Object.keys(this.loginFormGroup.controls).forEach(function (t) { e.loginFormGroup.get(t).markAsTouched({ onlySelf: !0 }) }) }, t.\u0275fac = function (e) { return new (e || t)(r["\u0275\u0275directiveInject"](h.Store), r["\u0275\u0275directiveInject"](p.a), r["\u0275\u0275directiveInject"](g.FormBuilder), r["\u0275\u0275directiveInject"](a.Router)) }, t.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: t, selectors: [["tb-login"]], features: [r["\u0275\u0275InheritDefinitionFeature"]], decls: 38, vars: 21, consts: [["fxFlex", "", "fxLayoutAlign", "center center", 1, "tb-login-content", "mat-app-background"], [2, "max-height", "80vh", "overflow-y", "auto", "background", "#fff4f4 !important", "color", "rgb(0, 0, 0)"], [1, "tb-login-form", 3, "formGroup", "ngSubmit"], ["fxLayout", "column", 3, "disabled"], ["fxLayout", "column", "fxLayoutAlign", "start center", 2, "padding", "15px 0"], [1, "login-logo"], ["color", "warn", "mode", "indeterminate", 4, "ngIf"], ["style", "height: 4px;", 4, "ngIf"], ["tb-toast", "", "fxLayout", "column", 1, "layout-padding"], [2, "height", "50px"], ["class", "oauth-container tb-default", "fxLayout", "column", "fxLayoutGap", "16px", 4, "ngIf"], ["translate", ""], ["id", "username-input", "matInput", "", "type", "email", "autofocus", "", "formControlName", "username", "email", "", "required", ""], ["matPrefix", ""], [4, "ngIf"], ["id", "password-input", "matInput", "", "type", "password", "formControlName", "password"], ["matSuffix", ""], ["fxLayoutAlign", "end center", 1, "forgot-password"], ["mat-button", "", "type", "button", "routerLink", "/login/resetPasswordRequest", 1, "tb-reset-password"], ["fxLayout", "column", 1, "tb-action-button"], ["mat-raised-button", "", "color", "accent", "type", "submit", 3, "disabled"], ["color", "warn", "mode", "indeterminate"], [2, "height", "4px"], ["fxLayout", "column", "fxLayoutGap", "16px", 1, "oauth-container", "tb-default"], [4, "ngFor", "ngForOf"], [1, "container-divider"], [1, "line"], [1, "text", "mat-typography"], ["mat-raised-button", "", 1, "login-with-button", 3, "href"], [1, "icon", 3, "svgIcon"]], template: function (e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "div", 0), r["\u0275\u0275elementStart"](1, "mat-card", 1), r["\u0275\u0275elementStart"](2, "mat-card-content"), r["\u0275\u0275elementStart"](3, "form", 2), r["\u0275\u0275listener"]("ngSubmit", function () { return t.login() }), r["\u0275\u0275elementStart"](4, "fieldset", 3), r["\u0275\u0275pipe"](5, "async"), r["\u0275\u0275elementStart"](6, "div", 4), r["\u0275\u0275element"](7, "tb-logo", 5), r["\u0275\u0275elementEnd"](), r["\u0275\u0275template"](8, j, 1, 0, "mat-progress-bar", 6), r["\u0275\u0275pipe"](9, "async"), r["\u0275\u0275template"](10, A, 1, 0, "span", 7), r["\u0275\u0275pipe"](11, "async"), r["\u0275\u0275elementStart"](12, "div", 8), r["\u0275\u0275element"](13, "span", 9), r["\u0275\u0275template"](14, P, 11, 6, "div", 10), r["\u0275\u0275elementStart"](15, "mat-form-field"), r["\u0275\u0275elementStart"](16, "mat-label", 11), r["\u0275\u0275text"](17, "login.username"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](18, "input", 12), r["\u0275\u0275elementStart"](19, "mat-icon", 13), r["\u0275\u0275text"](20, "email"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275template"](21, k, 3, 3, "mat-error", 14), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](22, "mat-form-field"), r["\u0275\u0275elementStart"](23, "mat-label", 11), r["\u0275\u0275text"](24, "common.password"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](25, "input", 15), r["\u0275\u0275element"](26, "tb-toggle-password", 16), r["\u0275\u0275elementStart"](27, "mat-icon", 13), r["\u0275\u0275text"](28, "lock"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](29, "div", 17), r["\u0275\u0275elementStart"](30, "button", 18), r["\u0275\u0275text"](31), r["\u0275\u0275pipe"](32, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](33, "div", 19), r["\u0275\u0275elementStart"](34, "button", 20), r["\u0275\u0275pipe"](35, "async"), r["\u0275\u0275text"](36), r["\u0275\u0275pipe"](37, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]()), 2 & e && (r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("formGroup", t.loginFormGroup), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("disabled", r["\u0275\u0275pipeBind1"](5, 9, t.isLoading$)), r["\u0275\u0275advance"](4), r["\u0275\u0275property"]("ngIf", r["\u0275\u0275pipeBind1"](9, 11, t.isLoading$)), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngIf", !r["\u0275\u0275pipeBind1"](11, 13, t.isLoading$)), r["\u0275\u0275advance"](4), r["\u0275\u0275property"]("ngIf", null == t.oauth2Clients ? null : t.oauth2Clients.length), r["\u0275\u0275advance"](7), r["\u0275\u0275property"]("ngIf", t.loginFormGroup.get("username").invalid), r["\u0275\u0275advance"](10), r["\u0275\u0275textInterpolate1"]("", r["\u0275\u0275pipeBind1"](32, 15, "login.forgot-password"), " "), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("disabled", r["\u0275\u0275pipeBind1"](35, 17, t.isLoading$)), r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](37, 19, "login.login"))) }, directives: [y.b, y.e, b.MatCard, b.MatCardContent, g["\u0275angular_packages_forms_forms_ba"], g.NgControlStatusGroup, g.FormGroupDirective, y.f, v.a, u.NgIf, E.b, T.MatFormField, T.MatLabel, S.TranslateDirective, C.MatInput, g.DefaultValueAccessor, g.NgControlStatus, g.FormControlName, g.EmailValidator, g.RequiredValidator, O.MatIcon, T.MatPrefix, w.a, T.MatSuffix, I.MatButton, a.RouterLink, x.MatProgressBar, y.g, u.NgForOf, M.MatDivider, I.MatAnchor, T.MatError], pipes: [u.AsyncPipe, S.TranslatePipe, u.UpperCasePipe], styles: ['[_nghost-%COMP%]{display:flex;flex:1 1 0}[_nghost-%COMP%]   .tb-login-content[_ngcontent-%COMP%]{margin-top:36px;margin-bottom:76px;background-color:#fff;background-image:url(rangdong_background.d921f91f24cda9e30ac8.jpg);height:100%;background-position:50%;background-repeat:no-repeat;background-size:cover}@media screen and (min-width:600px){[_nghost-%COMP%]   .tb-login-content[_ngcontent-%COMP%]   .tb-login-form[_ngcontent-%COMP%]{width:550px!important}}[_nghost-%COMP%]   .tb-login-content[_ngcontent-%COMP%]   .tb-login-form[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{padding:0 .5em 1em}[_nghost-%COMP%]   .tb-login-content[_ngcontent-%COMP%]   .tb-login-form[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]   .tb-reset-password[_ngcontent-%COMP%]{padding:0 6px}[_nghost-%COMP%]   .tb-login-content[_ngcontent-%COMP%]   .tb-login-form[_ngcontent-%COMP%]   .tb-action-button[_ngcontent-%COMP%]{padding:20px 0 16px}[_nghost-%COMP%]   .tb-login-content[_ngcontent-%COMP%]   .oauth-container[_ngcontent-%COMP%]{padding:0}[_nghost-%COMP%]   .tb-login-content[_ngcontent-%COMP%]   .oauth-container[_ngcontent-%COMP%]   .container-divider[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;width:100%}[_nghost-%COMP%]   .tb-login-content[_ngcontent-%COMP%]   .oauth-container[_ngcontent-%COMP%]   .container-divider[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .tb-login-content[_ngcontent-%COMP%]   .oauth-container[_ngcontent-%COMP%]   .container-divider[_ngcontent-%COMP%]   .mat-divider-horizontal[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .tb-login-content[_ngcontent-%COMP%]   .oauth-container[_ngcontent-%COMP%]   .container-divider[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{padding-right:10px;padding-left:10px}[_nghost-%COMP%]   .tb-login-content[_ngcontent-%COMP%]   .oauth-container[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{width:20px;min-width:20px}[_nghost-%COMP%]   .tb-login-content[_ngcontent-%COMP%]   .oauth-container[_ngcontent-%COMP%]   a.login-with-button[_ngcontent-%COMP%]{color:rgba(0,0,0,.87)}[_nghost-%COMP%]   .tb-login-content[_ngcontent-%COMP%]   .oauth-container[_ngcontent-%COMP%]   a.login-with-button[_ngcontent-%COMP%]:hover{border-bottom:0}[_nghost-%COMP%]   .tb-login-content[_ngcontent-%COMP%]   .oauth-container[_ngcontent-%COMP%]   a.login-with-button[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{height:20px;width:20px;vertical-align:sub}[_nghost-%COMP%]   .tb-login-content[_ngcontent-%COMP%]   .oauth-container[_ngcontent-%COMP%]   .centered[_ngcontent-%COMP%]     .mat-button-wrapper{display:flex;justify-content:center;align-items:center}[_nghost-%COMP%]   .tb-login-content[_ngcontent-%COMP%]   .bg[_ngcontent-%COMP%]{background-image:url("https://mdbootstrap.com/img/Photos/Horizontal/Nature/full%20page/img(20).jpg");height:100%;background-position:50%;background-repeat:no-repeat;background-size:cover}'] }), t }(m.a); 0, void 0; var F = n("C/rb"), L = n("32Ea"), D = n("IzEk"), V = n("5+tZ"), U = n("lJxs"), B = n("JIr8"), G = n("LRne"), q = n("cp0P"), z = n("7o/Q"); var H = function () { function e(e) { this.zone = e } return e.prototype.call = function (e, t) { return t._subscribe(new W(e, this.zone)) }, e }(), W = function (e) { function t(t, n) { var i = e.call(this, t) || this; return i.zone = n, i } return Object(d.d)(t, e), t.prototype._next = function (e) { var t = this; this.zone.run(function () { return t.destination.next(e) }) }, t }(z.a), Q = n("zp9Z"), Y = n("S+vS"), K = n("OiFK"), X = n("//Q6"), J = n("T9Vw"), $ = function () { function e(e, t, n, i, r, o, a, s) { this.store = e, this.router = t, this.authService = n, this.dialogService = i, this.utils = r, this.translate = o, this.mobileService = a, this.zone = s } return e.prototype.getAuthState = function () { return this.store.pipe(Object(h.select)(F.c), Object(L.a)(function (e) { return !e || !e.isUserLoaded }), Object(D.a)(1), (e = this.zone, function (t) { return t.lift(new H(e)) })); var e }, e.prototype.canActivate = function (e, t) { var n = this; return this.getAuthState().pipe(Object(V.b)(function (e) { var i = t.url, r = t.root, o = []; for (r.url && o.push.apply(o, r.url.map(function (e) { return e.path })); r.children.length;)(r = r.children[0]).url && o.push.apply(o, r.url.map(function (e) { return e.path })); var a = o.join("."), s = n.utils.getQueryParam("publicId"), l = r.data || {}, c = r.params || {}, u = "public" === l.module; if (e.isAuthenticated) { if (e.authUser.isPublic && n.authService.parsePublicId() !== s) return s && s.length > 0 ? (n.authService.setUserFromJwtToken(null, null, !1), n.authService.reloadUser()) : n.authService.logout(), Object(G.a)(!1); if (n.mobileService.isMobileApp() && !a.startsWith("dashboard.")) return n.mobileService.handleMobileNavigation(a, c), Object(G.a)(!1); var d = n.authService.defaultUrl(!0, e, a, c); if (d) return Object(G.a)(d); var p = Q.a[e.authUser.authority]; if (l.auth && -1 === l.auth.indexOf(p)) return n.dialogService.forbidden(), Object(G.a)(!1); if (l.redirectTo) { var m = void 0; return m = Object(X.z)(l.redirectTo) ? l.redirectTo[p] : l.redirectTo, Object(G.a)(n.router.parseUrl(m)) } return Object(G.a)(!0) } return s && s.length > 0 ? (n.authService.setUserFromJwtToken(null, null, !1), n.authService.reloadUser(), Object(G.a)(!1)) : u ? "login" === a ? Object(q.a)([n.authService.loadOAuth2Clients()]).pipe(Object(U.a)(function () { return !0 })) : Object(G.a)(!0) : (n.authService.redirectUrl = i, Object(G.a)(n.authService.defaultUrl(!1))) }), Object(B.a)(function (e) { return console.error(e), Object(G.a)(!1) })) }, e.prototype.canActivateChild = function (e, t) { return this.canActivate(e, t) }, e.\u0275fac = function (t) { return new (t || e)(r["\u0275\u0275inject"](h.Store), r["\u0275\u0275inject"](a.Router), r["\u0275\u0275inject"](p.a), r["\u0275\u0275inject"](Y.a), r["\u0275\u0275inject"](K.a), r["\u0275\u0275inject"](S.TranslateService), r["\u0275\u0275inject"](J.a), r["\u0275\u0275inject"](r.NgZone)) }, e.\u0275prov = r["\u0275\u0275defineInjectable"]({ token: e, factory: e.\u0275fac, providedIn: "root" }), e }(); 0, void 0; var Z = n("xKAQ"); function ee(e, t) { 1 & e && r["\u0275\u0275element"](0, "mat-progress-bar", 18) } function te(e, t) { 1 & e && r["\u0275\u0275element"](0, "span", 19) } function ne(e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "mat-error"), r["\u0275\u0275text"](1), r["\u0275\u0275pipe"](2, "translate"), r["\u0275\u0275elementEnd"]()), 2 & e && (r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](2, 1, "user.invalid-email-format"), " ")) } var ie = function (e) { function t(t, n, i, r) { var o = e.call(this, t) || this; return o.store = t, o.authService = n, o.translate = i, o.fb = r, o.clicked = !1, o.requestPasswordRequest = o.fb.group({ email: ["", [g.Validators.email, g.Validators.required]] }, { updateOn: "submit" }), o } return Object(d.d)(t, e), t.prototype.ngOnInit = function () { }, t.prototype.disableInputs = function () { this.requestPasswordRequest.disable(), this.clicked = !0 }, t.prototype.sendResetPasswordLink = function () { var e = this; this.requestPasswordRequest.valid && (this.disableInputs(), this.authService.sendResetPasswordLink(this.requestPasswordRequest.get("email").value).subscribe(function () { e.store.dispatch(new Z.b({ message: e.translate.instant("login.password-link-sent-message"), type: "success" })) })) }, t.\u0275fac = function (e) { return new (e || t)(r["\u0275\u0275directiveInject"](h.Store), r["\u0275\u0275directiveInject"](p.a), r["\u0275\u0275directiveInject"](S.TranslateService), r["\u0275\u0275directiveInject"](g.FormBuilder)) }, t.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: t, selectors: [["tb-reset-password-request"]], features: [r["\u0275\u0275InheritDefinitionFeature"]], decls: 31, vars: 23, consts: [["fxLayout", "row", "fxLayoutAlign", "center center", 1, "tb-request-password-reset-content", "mat-app-background", "tb-dark", 2, "width", "100%"], ["fxFlex", "initial", 1, "tb-request-password-reset-card"], [1, "layout-padding"], ["translate", "", 1, "mat-headline"], ["color", "warn", "mode", "indeterminate", 4, "ngIf"], ["style", "height: 4px;", 4, "ngIf"], [3, "formGroup", "ngSubmit"], [3, "disabled"], ["tb-toast", "", "fxLayout", "column", 1, "layout-padding"], [2, "height", "50px"], ["hideRequiredMarker", "", 1, "mat-block"], ["translate", ""], ["matInput", "", "type", "email", "autofocus", "", "formControlName", "email", "email", "", "required", ""], ["matPrefix", "", 1, "material-icons"], [4, "ngIf"], ["fxLayout", "column", "fxLayout.gt-xs", "row", "fxLayoutGap", "16px", "fxLayoutAlign", "start center", "fxLayoutAlign.gt-xs", "center start"], ["mat-raised-button", "", "color", "accent", "type", "submit", 3, "disabled"], ["mat-raised-button", "", "color", "accent", "type", "button", "routerLink", "/login", 3, "disabled"], ["color", "warn", "mode", "indeterminate"], [2, "height", "4px"]], template: function (e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "div", 0), r["\u0275\u0275elementStart"](1, "mat-card", 1), r["\u0275\u0275elementStart"](2, "mat-card-title", 2), r["\u0275\u0275elementStart"](3, "span", 3), r["\u0275\u0275text"](4, "login.request-password-reset"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275template"](5, ee, 1, 0, "mat-progress-bar", 4), r["\u0275\u0275pipe"](6, "async"), r["\u0275\u0275template"](7, te, 1, 0, "span", 5), r["\u0275\u0275pipe"](8, "async"), r["\u0275\u0275elementStart"](9, "mat-card-content"), r["\u0275\u0275elementStart"](10, "form", 6), r["\u0275\u0275listener"]("ngSubmit", function () { return t.sendResetPasswordLink() }), r["\u0275\u0275elementStart"](11, "fieldset", 7), r["\u0275\u0275pipe"](12, "async"), r["\u0275\u0275elementStart"](13, "div", 8), r["\u0275\u0275element"](14, "span", 9), r["\u0275\u0275elementStart"](15, "mat-form-field", 10), r["\u0275\u0275elementStart"](16, "mat-label", 11), r["\u0275\u0275text"](17, "login.email"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](18, "input", 12), r["\u0275\u0275elementStart"](19, "mat-icon", 13), r["\u0275\u0275text"](20, "email"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275template"](21, ne, 3, 3, "mat-error", 14), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](22, "div", 15), r["\u0275\u0275elementStart"](23, "button", 16), r["\u0275\u0275pipe"](24, "async"), r["\u0275\u0275text"](25), r["\u0275\u0275pipe"](26, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](27, "button", 17), r["\u0275\u0275pipe"](28, "async"), r["\u0275\u0275text"](29), r["\u0275\u0275pipe"](30, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]()), 2 & e && (r["\u0275\u0275advance"](5), r["\u0275\u0275property"]("ngIf", r["\u0275\u0275pipeBind1"](6, 9, t.isLoading$)), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngIf", !r["\u0275\u0275pipeBind1"](8, 11, t.isLoading$)), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("formGroup", t.requestPasswordRequest), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("disabled", r["\u0275\u0275pipeBind1"](12, 13, t.isLoading$)), r["\u0275\u0275advance"](10), r["\u0275\u0275property"]("ngIf", t.requestPasswordRequest.get("email").invalid), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("disabled", r["\u0275\u0275pipeBind1"](24, 15, t.isLoading$) || t.clicked), r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](26, 17, "login.request-password-reset"), " "), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("disabled", r["\u0275\u0275pipeBind1"](28, 19, t.isLoading$)), r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](30, 21, "action.cancel"), " ")) }, directives: [y.f, y.e, b.MatCard, y.b, b.MatCardTitle, S.TranslateDirective, u.NgIf, b.MatCardContent, g["\u0275angular_packages_forms_forms_ba"], g.NgControlStatusGroup, g.FormGroupDirective, E.b, T.MatFormField, T.MatLabel, C.MatInput, g.DefaultValueAccessor, g.NgControlStatus, g.FormControlName, g.EmailValidator, g.RequiredValidator, O.MatIcon, T.MatPrefix, y.g, I.MatButton, a.RouterLink, x.MatProgressBar, T.MatError], pipes: [u.AsyncPipe, S.TranslatePipe], styles: ["[_nghost-%COMP%]{display:flex;flex:1 1 0}[_nghost-%COMP%]   .tb-request-password-reset-content[_ngcontent-%COMP%]{background-color:#eee}@media screen and (min-width:600px){[_nghost-%COMP%]   .tb-request-password-reset-content[_ngcontent-%COMP%]   .tb-request-password-reset-card[_ngcontent-%COMP%]{width:450px!important}}"] }), t }(m.a); function re(e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "mat-card-subtitle", 2), r["\u0275\u0275elementStart"](1, "div", 20), r["\u0275\u0275text"](2, "login.expired-password-reset-message"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]()) } function oe(e, t) { 1 & e && r["\u0275\u0275element"](0, "mat-progress-bar", 21) } function ae(e, t) { 1 & e && r["\u0275\u0275element"](0, "span", 22) } 0, void 0; var se = function (e) { function t(t, n, i, r, o) { var a = e.call(this, t) || this; return a.store = t, a.route = n, a.authService = i, a.translate = r, a.fb = o, a.resetToken = "", a.resetPassword = a.fb.group({ newPassword: [""], newPassword2: [""] }), a } return Object(d.d)(t, e), t.prototype.ngOnInit = function () { var e = this; this.isExpiredPassword = this.route.snapshot.data.expiredPassword, this.sub = this.route.queryParams.subscribe(function (t) { e.resetToken = t.resetToken || "" }) }, t.prototype.ngOnDestroy = function () { e.prototype.ngOnDestroy.call(this), this.sub.unsubscribe() }, t.prototype.onResetPassword = function () { this.resetPassword.get("newPassword").value !== this.resetPassword.get("newPassword2").value ? this.store.dispatch(new Z.b({ message: this.translate.instant("login.passwords-mismatch-error"), type: "error" })) : this.authService.resetPassword(this.resetToken, this.resetPassword.get("newPassword").value).subscribe() }, t.\u0275fac = function (e) { return new (e || t)(r["\u0275\u0275directiveInject"](h.Store), r["\u0275\u0275directiveInject"](a.ActivatedRoute), r["\u0275\u0275directiveInject"](p.a), r["\u0275\u0275directiveInject"](S.TranslateService), r["\u0275\u0275directiveInject"](g.FormBuilder)) }, t.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: t, selectors: [["tb-reset-password"]], features: [r["\u0275\u0275InheritDefinitionFeature"]], decls: 39, vars: 23, consts: [["fxLayout", "row", "fxLayoutAlign", "center center", 1, "tb-reset-password-content", "mat-app-background", "tb-dark", 2, "width", "100%"], ["fxFlex", "initial", 1, "tb-reset-password-card"], [1, "layout-padding", "tb-card-title"], ["translate", "", 1, "mat-headline", "tb-card-title"], ["class", "layout-padding tb-card-title", 4, "ngIf"], ["color", "warn", "mode", "indeterminate", 4, "ngIf"], ["style", "height: 4px;", 4, "ngIf"], [3, "formGroup", "ngSubmit"], [3, "disabled"], ["tb-toast", "", "fxLayout", "column", 1, "layout-padding"], [2, "height", "50px"], [1, "mat-block"], ["translate", ""], ["matInput", "", "type", "password", "autofocus", "", "formControlName", "newPassword"], ["matPrefix", "", 1, "material-icons"], ["matSuffix", ""], ["matInput", "", "type", "password", "formControlName", "newPassword2"], ["fxLayout", "column", "fxLayout.gt-sm", "row", "fxLayoutGap", "16px", "fxLayoutAlign", "start center", "fxLayoutAlign.gt-sm", "center start"], ["mat-raised-button", "", "color", "accent", "type", "submit", 3, "disabled"], ["mat-raised-button", "", "color", "accent", "type", "button", "routerLink", "/login", 3, "disabled"], ["translate", "", 1, "tb-card-title"], ["color", "warn", "mode", "indeterminate"], [2, "height", "4px"]], template: function (e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "div", 0), r["\u0275\u0275elementStart"](1, "mat-card", 1), r["\u0275\u0275elementStart"](2, "mat-card-title", 2), r["\u0275\u0275elementStart"](3, "span", 3), r["\u0275\u0275text"](4, "login.password-reset"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275template"](5, re, 3, 0, "mat-card-subtitle", 4), r["\u0275\u0275template"](6, oe, 1, 0, "mat-progress-bar", 5), r["\u0275\u0275pipe"](7, "async"), r["\u0275\u0275template"](8, ae, 1, 0, "span", 6), r["\u0275\u0275pipe"](9, "async"), r["\u0275\u0275elementStart"](10, "mat-card-content"), r["\u0275\u0275elementStart"](11, "form", 7), r["\u0275\u0275listener"]("ngSubmit", function () { return t.onResetPassword() }), r["\u0275\u0275elementStart"](12, "fieldset", 8), r["\u0275\u0275pipe"](13, "async"), r["\u0275\u0275elementStart"](14, "div", 9), r["\u0275\u0275element"](15, "span", 10), r["\u0275\u0275elementStart"](16, "mat-form-field", 11), r["\u0275\u0275elementStart"](17, "mat-label", 12), r["\u0275\u0275text"](18, "login.new-password"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](19, "input", 13), r["\u0275\u0275elementStart"](20, "mat-icon", 14), r["\u0275\u0275text"](21, "lock"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](22, "tb-toggle-password", 15), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](23, "mat-form-field", 11), r["\u0275\u0275elementStart"](24, "mat-label", 12), r["\u0275\u0275text"](25, "login.new-password-again"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](26, "input", 16), r["\u0275\u0275elementStart"](27, "mat-icon", 14), r["\u0275\u0275text"](28, "lock"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](29, "tb-toggle-password", 15), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](30, "div", 17), r["\u0275\u0275elementStart"](31, "button", 18), r["\u0275\u0275pipe"](32, "async"), r["\u0275\u0275text"](33), r["\u0275\u0275pipe"](34, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](35, "button", 19), r["\u0275\u0275pipe"](36, "async"), r["\u0275\u0275text"](37), r["\u0275\u0275pipe"](38, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]()), 2 & e && (r["\u0275\u0275advance"](5), r["\u0275\u0275property"]("ngIf", t.isExpiredPassword), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", r["\u0275\u0275pipeBind1"](7, 9, t.isLoading$)), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngIf", !r["\u0275\u0275pipeBind1"](9, 11, t.isLoading$)), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("formGroup", t.resetPassword), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("disabled", r["\u0275\u0275pipeBind1"](13, 13, t.isLoading$)), r["\u0275\u0275advance"](19), r["\u0275\u0275property"]("disabled", r["\u0275\u0275pipeBind1"](32, 15, t.isLoading$)), r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](34, 17, "login.reset-password"), " "), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("disabled", r["\u0275\u0275pipeBind1"](36, 19, t.isLoading$)), r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](38, 21, "action.cancel"), " ")) }, directives: [y.f, y.e, b.MatCard, y.b, b.MatCardTitle, S.TranslateDirective, u.NgIf, b.MatCardContent, g["\u0275angular_packages_forms_forms_ba"], g.NgControlStatusGroup, g.FormGroupDirective, E.b, T.MatFormField, T.MatLabel, C.MatInput, g.DefaultValueAccessor, g.NgControlStatus, g.FormControlName, O.MatIcon, T.MatPrefix, w.a, T.MatSuffix, y.g, I.MatButton, a.RouterLink, b.MatCardSubtitle, x.MatProgressBar], pipes: [u.AsyncPipe, S.TranslatePipe], styles: ["[_nghost-%COMP%]{display:flex;flex:1 1 0}[_nghost-%COMP%]   .tb-reset-password-content[_ngcontent-%COMP%]{background-color:#eee}@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-reset-password-content[_ngcontent-%COMP%]   .tb-reset-password-card[_ngcontent-%COMP%]{width:450px!important}}[_nghost-%COMP%]   .tb-reset-password-content[_ngcontent-%COMP%]   .tb-card-title[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}"] }), t }(m.a); function le(e, t) { 1 & e && r["\u0275\u0275element"](0, "mat-progress-bar", 19) } function ce(e, t) { 1 & e && r["\u0275\u0275element"](0, "span", 20) } 0, void 0; var ue = function (e) { function t(t, n, i, r, o) { var a = e.call(this, t) || this; return a.store = t, a.route = n, a.authService = i, a.translate = r, a.fb = o, a.activateToken = "", a.createPassword = a.fb.group({ password: [""], password2: [""] }), a } return Object(d.d)(t, e), t.prototype.ngOnInit = function () { var e = this; this.sub = this.route.queryParams.subscribe(function (t) { e.activateToken = t.activateToken || "" }) }, t.prototype.ngOnDestroy = function () { e.prototype.ngOnDestroy.call(this), this.sub.unsubscribe() }, t.prototype.onCreatePassword = function () { this.createPassword.get("password").value !== this.createPassword.get("password2").value ? this.store.dispatch(new Z.b({ message: this.translate.instant("login.passwords-mismatch-error"), type: "error" })) : this.authService.activate(this.activateToken, this.createPassword.get("password").value, !0).subscribe() }, t.\u0275fac = function (e) { return new (e || t)(r["\u0275\u0275directiveInject"](h.Store), r["\u0275\u0275directiveInject"](a.ActivatedRoute), r["\u0275\u0275directiveInject"](p.a), r["\u0275\u0275directiveInject"](S.TranslateService), r["\u0275\u0275directiveInject"](g.FormBuilder)) }, t.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: t, selectors: [["tb-create-password"]], features: [r["\u0275\u0275InheritDefinitionFeature"]], decls: 38, vars: 22, consts: [["fxLayout", "row", "fxLayoutAlign", "center center", 1, "tb-create-password-content", "mat-app-background", "tb-dark", 2, "width", "100%"], ["fxFlex", "initial", 1, "tb-create-password-card"], [1, "layout-padding"], ["translate", "", 1, "mat-headline"], ["color", "warn", "mode", "indeterminate", 4, "ngIf"], ["style", "height: 4px;", 4, "ngIf"], [3, "formGroup", "ngSubmit"], [3, "disabled"], ["tb-toast", "", "fxLayout", "column", 1, "layout-padding"], [2, "height", "50px"], [1, "mat-block"], ["translate", ""], ["matInput", "", "type", "password", "autofocus", "", "formControlName", "password"], ["matPrefix", "", 1, "material-icons"], ["matSuffix", ""], ["matInput", "", "type", "password", "formControlName", "password2"], ["fxLayout", "column", "fxLayout.gt-xs", "row", "fxLayoutGap", "16px", "fxLayoutAlign", "start center", "fxLayoutAlign.gt-xs", "center start"], ["mat-raised-button", "", "color", "accent", "type", "submit", 3, "disabled"], ["mat-raised-button", "", "color", "accent", "type", "button", "routerLink", "/login", 3, "disabled"], ["color", "warn", "mode", "indeterminate"], [2, "height", "4px"]], template: function (e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "div", 0), r["\u0275\u0275elementStart"](1, "mat-card", 1), r["\u0275\u0275elementStart"](2, "mat-card-title", 2), r["\u0275\u0275elementStart"](3, "span", 3), r["\u0275\u0275text"](4, "login.create-password"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275template"](5, le, 1, 0, "mat-progress-bar", 4), r["\u0275\u0275pipe"](6, "async"), r["\u0275\u0275template"](7, ce, 1, 0, "span", 5), r["\u0275\u0275pipe"](8, "async"), r["\u0275\u0275elementStart"](9, "mat-card-content"), r["\u0275\u0275elementStart"](10, "form", 6), r["\u0275\u0275listener"]("ngSubmit", function () { return t.onCreatePassword() }), r["\u0275\u0275elementStart"](11, "fieldset", 7), r["\u0275\u0275pipe"](12, "async"), r["\u0275\u0275elementStart"](13, "div", 8), r["\u0275\u0275element"](14, "span", 9), r["\u0275\u0275elementStart"](15, "mat-form-field", 10), r["\u0275\u0275elementStart"](16, "mat-label", 11), r["\u0275\u0275text"](17, "common.password"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](18, "input", 12), r["\u0275\u0275elementStart"](19, "mat-icon", 13), r["\u0275\u0275text"](20, "lock"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](21, "tb-toggle-password", 14), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](22, "mat-form-field", 10), r["\u0275\u0275elementStart"](23, "mat-label", 11), r["\u0275\u0275text"](24, "login.password-again"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](25, "input", 15), r["\u0275\u0275elementStart"](26, "mat-icon", 13), r["\u0275\u0275text"](27, "lock"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](28, "tb-toggle-password", 14), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](29, "div", 16), r["\u0275\u0275elementStart"](30, "button", 17), r["\u0275\u0275pipe"](31, "async"), r["\u0275\u0275text"](32), r["\u0275\u0275pipe"](33, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](34, "button", 18), r["\u0275\u0275pipe"](35, "async"), r["\u0275\u0275text"](36), r["\u0275\u0275pipe"](37, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]()), 2 & e && (r["\u0275\u0275advance"](5), r["\u0275\u0275property"]("ngIf", r["\u0275\u0275pipeBind1"](6, 8, t.isLoading$)), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngIf", !r["\u0275\u0275pipeBind1"](8, 10, t.isLoading$)), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("formGroup", t.createPassword), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("disabled", r["\u0275\u0275pipeBind1"](12, 12, t.isLoading$)), r["\u0275\u0275advance"](19), r["\u0275\u0275property"]("disabled", r["\u0275\u0275pipeBind1"](31, 14, t.isLoading$)), r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](33, 16, "login.create-password"), " "), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("disabled", r["\u0275\u0275pipeBind1"](35, 18, t.isLoading$)), r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate1"](" ", r["\u0275\u0275pipeBind1"](37, 20, "action.cancel"), " ")) }, directives: [y.f, y.e, b.MatCard, y.b, b.MatCardTitle, S.TranslateDirective, u.NgIf, b.MatCardContent, g["\u0275angular_packages_forms_forms_ba"], g.NgControlStatusGroup, g.FormGroupDirective, E.b, T.MatFormField, T.MatLabel, C.MatInput, g.DefaultValueAccessor, g.NgControlStatus, g.FormControlName, O.MatIcon, T.MatPrefix, w.a, T.MatSuffix, y.g, I.MatButton, a.RouterLink, x.MatProgressBar], pipes: [u.AsyncPipe, S.TranslatePipe], styles: ["[_nghost-%COMP%]{display:flex;flex:1 1 0}[_nghost-%COMP%]   .tb-create-password-content[_ngcontent-%COMP%]{background-color:#eee}@media screen and (min-width:600px){[_nghost-%COMP%]   .tb-create-password-content[_ngcontent-%COMP%]   .tb-create-password-card[_ngcontent-%COMP%]{width:450px!important}}"] }), t }(m.a); 0, void 0; var de = [{ path: "login", component: _, data: { title: "login.login", module: "public" }, canActivate: [$] }, { path: "login/resetPasswordRequest", component: ie, data: { title: "login.request-password-reset", module: "public" }, canActivate: [$] }, { path: "login/resetPassword", component: se, data: { title: "login.reset-password", module: "public" }, canActivate: [$] }, { path: "login/resetExpiredPassword", component: se, data: { title: "login.reset-password", module: "public", expiredPassword: !0 }, canActivate: [$] }, { path: "login/createPassword", component: ue, data: { title: "login.create-password", module: "public" }, canActivate: [$] }], pe = function () { function e() { } return e.\u0275fac = function (t) { return new (t || e) }, e.\u0275mod = r["\u0275\u0275defineNgModule"]({ type: e }), e.\u0275inj = r["\u0275\u0275defineInjector"]({ imports: [[a.RouterModule.forChild(de)], a.RouterModule] }), e }(); void (("undefined" == typeof ngJitMode || ngJitMode) && r["\u0275\u0275setNgModuleScope"](pe, { imports: [a.RouterModule], exports: [a.RouterModule] })), 0; var me = n("PCNd"), fe = function () { function e() { } return e.\u0275fac = function (t) { return new (t || e) }, e.\u0275mod = r["\u0275\u0275defineNgModule"]({ type: e }), e.\u0275inj = r["\u0275\u0275defineInjector"]({ imports: [[u.CommonModule, me.a, pe]] }), e }(); void (("undefined" == typeof ngJitMode || ngJitMode) && r["\u0275\u0275setNgModuleScope"](fe, { declarations: [_, ie, se, ue], imports: [u.CommonModule, me.a, pe] })), 0; var he = n("xgIS"), ge = n("Kj3r"), ye = n("/uUt"), be = n("vkgz"), ve = n("k7+O"), Ee = n("wtyh"); var Te = n("0MNC"), Se = n("XhcP"), Ce = n("/t3+"), Oe = n("/crD"); function we(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "mat-icon", 3), r["\u0275\u0275text"](1), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = r["\u0275\u0275nextContext"](); r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate"](n.section.icon) } } function Ie(e, t) { if (1 & e && r["\u0275\u0275element"](0, "mat-icon", 4), 2 & e) { var n = r["\u0275\u0275nextContext"](); r["\u0275\u0275property"]("svgIcon", n.section.icon) } } var xe = function (e) { return { exact: e } }, Me = function () { function e() { } return e.prototype.ngOnInit = function () { }, e.\u0275fac = function (t) { return new (t || e) }, e.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-menu-link"]], inputs: { section: "section" }, decls: 6, vars: 9, consts: [["mat-button", "", "routerLinkActive", "tb-active", 3, "routerLinkActiveOptions", "routerLink"], ["class", "material-icons", 4, "ngIf"], [3, "svgIcon", 4, "ngIf"], [1, "material-icons"], [3, "svgIcon"]], template: function (e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "a", 0), r["\u0275\u0275template"](1, we, 2, 1, "mat-icon", 1), r["\u0275\u0275template"](2, Ie, 1, 1, "mat-icon", 2), r["\u0275\u0275elementStart"](3, "span"), r["\u0275\u0275text"](4), r["\u0275\u0275pipe"](5, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]()), 2 & e && (r["\u0275\u0275propertyInterpolate"]("routerLink", t.section.path), r["\u0275\u0275property"]("routerLinkActiveOptions", r["\u0275\u0275pureFunction1"](7, xe, !t.section.notExact)), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", !t.section.isMdiIcon && null != t.section.icon), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", t.section.isMdiIcon && null != t.section.icon), r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](5, 5, t.section.name))) }, directives: [I.MatAnchor, a.RouterLinkWithHref, a.RouterLinkActive, u.NgIf, O.MatIcon], pipes: [S.TranslatePipe], styles: [""], changeDetection: 0 }), e }(); 0, void 0; var je = n("znSr"), Ae = n("Ki3a"); function Re(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "mat-icon", 6), r["\u0275\u0275text"](1), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = r["\u0275\u0275nextContext"](); r["\u0275\u0275advance"](1), r["\u0275\u0275textInterpolate"](n.section.icon) } } function Ne(e, t) { if (1 & e && r["\u0275\u0275element"](0, "mat-icon", 7), 2 & e) { var n = r["\u0275\u0275nextContext"](); r["\u0275\u0275property"]("svgIcon", n.section.icon) } } function Pe(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "li"), r["\u0275\u0275element"](1, "tb-menu-link", 8), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit; r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("section", n) } } var ke = function () { return { exact: !0 } }, _e = function (e) { return { "tb-toggled": e } }, Fe = function (e) { return { height: e } }, Le = function () { function e(e) { this.router = e } return e.prototype.ngOnInit = function () { }, e.prototype.sectionActive = function () { return this.router.isActive(this.section.path, !1) }, e.prototype.sectionHeight = function () { return this.router.isActive(this.section.path, !1) ? this.section.height : "0px" }, e.prototype.trackBySectionPages = function (e, t) { return t.id }, e.\u0275fac = function (t) { return new (t || e)(r["\u0275\u0275directiveInject"](a.Router)) }, e.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-menu-toggle"]], inputs: { section: "section" }, decls: 10, vars: 19, consts: [["mat-button", "", "routerLinkActive", "tb-active", 1, "tb-button-toggle", 3, "routerLinkActiveOptions", "routerLink"], ["class", "material-icons", 4, "ngIf"], [3, "svgIcon", 4, "ngIf"], [1, "pull-right", "fa", "fa-chevron-down", "tb-toggle-icon", 3, "ngClass"], [1, "tb-menu-toggle-list", 3, "id", "ngStyle"], [4, "ngFor", "ngForOf", "ngForTrackBy"], [1, "material-icons"], [3, "svgIcon"], [3, "section"]], template: function (e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "a", 0), r["\u0275\u0275template"](1, Re, 2, 1, "mat-icon", 1), r["\u0275\u0275template"](2, Ne, 1, 1, "mat-icon", 2), r["\u0275\u0275elementStart"](3, "span"), r["\u0275\u0275text"](4), r["\u0275\u0275pipe"](5, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](6, "span", 3), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](7, "ul", 4), r["\u0275\u0275pipe"](8, "nospace"), r["\u0275\u0275template"](9, Pe, 2, 1, "li", 5), r["\u0275\u0275elementEnd"]()), 2 & e && (r["\u0275\u0275propertyInterpolate"]("routerLink", t.section.path), r["\u0275\u0275property"]("routerLinkActiveOptions", r["\u0275\u0275pureFunction0"](14, ke)), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", !t.section.isMdiIcon && null != t.section.icon), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", t.section.isMdiIcon && null != t.section.icon), r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind1"](5, 10, t.section.name)), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngClass", r["\u0275\u0275pureFunction1"](15, _e, t.sectionActive())), r["\u0275\u0275advance"](1), r["\u0275\u0275propertyInterpolate1"]("id", "docs-menu-", r["\u0275\u0275pipeBind1"](8, 12, t.section.name), ""), r["\u0275\u0275property"]("ngStyle", r["\u0275\u0275pureFunction1"](17, Fe, t.sectionHeight())), r["\u0275\u0275advance"](2), r["\u0275\u0275property"]("ngForOf", t.section.pages)("ngForTrackBy", t.trackBySectionPages)) }, directives: [I.MatAnchor, a.RouterLinkWithHref, a.RouterLinkActive, u.NgIf, u.NgClass, je.b, u.NgStyle, je.e, u.NgForOf, O.MatIcon, Me], pipes: [S.TranslatePipe, Ae.a], styles: ["[_nghost-%COMP%]     .tb-button-toggle .tb-toggle-icon{display:inline-block;width:15px;margin:auto 0 auto auto;background-size:100% auto;transition:transform .3s ease-in-out}[_nghost-%COMP%]     .tb-button-toggle .tb-toggle-icon.tb-toggled{transform:rotate(180deg)}[_nghost-%COMP%]     .tb-menu-toggle-list{position:relative;z-index:1;overflow:hidden;transition:.75s cubic-bezier(.35,0,.25,1);transition-property:height}[_nghost-%COMP%]     .tb-menu-toggle-list a.mat-button{padding:0 16px 0 32px;font-weight:500;text-transform:none!important;text-rendering:optimizeLegibility}"], changeDetection: 0 }), e }(); function De(e, t) { if (1 & e && r["\u0275\u0275element"](0, "tb-menu-link", 4), 2 & e) { var n = r["\u0275\u0275nextContext"]().$implicit; r["\u0275\u0275property"]("section", n) } } function Ve(e, t) { if (1 & e && r["\u0275\u0275element"](0, "tb-menu-toggle", 4), 2 & e) { var n = r["\u0275\u0275nextContext"]().$implicit; r["\u0275\u0275property"]("section", n) } } function Ue(e, t) { if (1 & e && (r["\u0275\u0275elementStart"](0, "li", 2), r["\u0275\u0275template"](1, De, 1, 1, "tb-menu-link", 3), r["\u0275\u0275template"](2, Ve, 1, 1, "tb-menu-toggle", 3), r["\u0275\u0275elementEnd"]()), 2 & e) { var n = t.$implicit; r["\u0275\u0275property"]("ngSwitch", "link" === n.type), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngSwitchCase", !0), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngSwitchCase", !1) } } 0, void 0; var Be = function () { function e(e) { this.menuService = e, this.menuSections$ = this.menuService.menuSections() } return e.prototype.trackByMenuSection = function (e, t) { return t.id }, e.prototype.ngOnInit = function () { }, e.\u0275fac = function (t) { return new (t || e)(r["\u0275\u0275directiveInject"](Oe.a)) }, e.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: e, selectors: [["tb-side-menu"]], decls: 3, vars: 4, consts: [["fxFlex", "", "fxLayout", "column", "fxLayoutAlign", "start stretch", 1, "tb-side-menu"], [3, "ngSwitch", 4, "ngFor", "ngForOf", "ngForTrackBy"], [3, "ngSwitch"], [3, "section", 4, "ngSwitchCase"], [3, "section"]], template: function (e, t) { 1 & e && (r["\u0275\u0275elementStart"](0, "ul", 0), r["\u0275\u0275template"](1, Ue, 3, 3, "li", 1), r["\u0275\u0275pipe"](2, "async"), r["\u0275\u0275elementEnd"]()), 2 & e && (r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngForOf", r["\u0275\u0275pipeBind1"](2, 2, t.menuSections$))("ngForTrackBy", t.trackByMenuSection)) }, directives: [y.b, y.f, y.e, u.NgForOf, u.NgSwitch, u.NgSwitchCase, Me, Le], pipes: [u.AsyncPipe], styles: ["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]     .tb-side-menu, [_nghost-%COMP%]     .tb-side-menu ul{padding:0;margin-top:0;list-style:none}[_nghost-%COMP%]     .tb-side-menu>li{border-bottom:1px solid rgba(0,0,0,.12)}[_nghost-%COMP%]     a.mat-button{display:flex;overflow:hidden;line-height:40px;border-radius:0}[_nghost-%COMP%]     a.mat-button:hover{border-bottom:none;background-color:hsla(0,0%,100%,.08)}[_nghost-%COMP%]     a.mat-button:focus{border-bottom:none}[_nghost-%COMP%]     a.mat-button.tb-active{font-weight:500;background-color:hsla(0,0%,100%,.15)}[_nghost-%COMP%]     a.mat-button .mat-button-wrapper{width:100%;display:inline-flex;align-items:center}[_nghost-%COMP%]     a.mat-button .mat-button-wrapper mat-icon{margin-right:8px;margin-left:0}[_nghost-%COMP%]     a.mat-button .mat-button-wrapper span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[_nghost-%COMP%]     a.mat-button .mat-button-wrapper span.tb-toggle-icon{padding-top:12px;padding-bottom:12px}"], changeDetection: 0 }), e }(); 0, void 0; var Ge = n("HKgb"), qe = n("efJA"), ze = ["sidenav"], He = ["searchInput"]; function We(e, t) { if (1 & e) { var n = r["\u0275\u0275getCurrentView"](); r["\u0275\u0275elementStart"](0, "button", 24), r["\u0275\u0275listener"]("click", function () { return r["\u0275\u0275restoreView"](n), r["\u0275\u0275nextContext"]().toggleFullscreen() }), r["\u0275\u0275elementStart"](1, "mat-icon", 10), r["\u0275\u0275text"](2), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]() } if (2 & e) { var i = r["\u0275\u0275nextContext"](); r["\u0275\u0275property"]("fxShow", !i.displaySearchMode()), r["\u0275\u0275advance"](2), r["\u0275\u0275textInterpolate"](i.isFullscreen() ? "fullscreen_exit" : "fullscreen") } } function Qe(e, t) { 1 & e && r["\u0275\u0275element"](0, "mat-progress-bar", 25) } var Ye = function (e) { return { "tb-invisible": e } }, Ke = ve, Xe = function (e) { function t(t, n, i) { var r = e.call(this, t) || this; return r.store = t, r.window = n, r.breakpointObserver = i, r.authState = Object(F.a)(r.store), r.forceFullscreen = r.authState.forceFullscreen, r.sidenavMode = "side", r.sidenavOpened = !0, r.logo = "assets/rangdong_logo.jpg", r.fullscreenEnabled = Ke.isEnabled, r.searchEnabled = !1, r.showSearch = !1, r.searchText = "", r } return Object(d.d)(t, e), t.prototype.ngOnInit = function () { var e = this; this.authUser$ = this.store.pipe(Object(h.select)(F.d)), this.userDetails$ = this.store.pipe(Object(h.select)(F.g)), this.userDetailsString = this.userDetails$.pipe(Object(U.a)(function (e) { return JSON.stringify(e) })); var t = this.breakpointObserver.isMatched(f.g["gt-sm"]); this.sidenavMode = t ? "side" : "over", this.sidenavOpened = t, this.breakpointObserver.observe(f.g["gt-sm"]).subscribe(function (t) { t.matches ? (e.sidenavMode = "side", e.sidenavOpened = !0) : (e.sidenavMode = "over", e.sidenavOpened = !1) }) }, t.prototype.ngAfterViewInit = function () { var e = this; Object(he.a)(this.searchInputField.nativeElement, "keyup").pipe(Object(ge.a)(150), Object(ye.a)(), Object(be.a)(function () { e.searchTextUpdated() })).subscribe() }, t.prototype.sidenavClicked = function () { "over" === this.sidenavMode && this.sidenav.toggle() }, t.prototype.toggleFullscreen = function () { Ke.isEnabled && Ke.toggle() }, t.prototype.isFullscreen = function () { return Ke.isFullscreen }, t.prototype.goBack = function () { this.window.history.back() }, t.prototype.activeComponentChanged = function (e) { this.showSearch = !1, this.searchText = "", this.activeComponent = e, this.activeComponent && "onSearchTextUpdated" in this.activeComponent ? (this.searchEnabled = !0, this.searchableComponent = this.activeComponent) : (this.searchEnabled = !1, this.searchableComponent = null) }, t.prototype.displaySearchMode = function () { return this.searchEnabled && this.showSearch }, t.prototype.openSearch = function () { var e = this; this.searchEnabled && (this.showSearch = !0, setTimeout(function () { e.searchInputField.nativeElement.focus(), e.searchInputField.nativeElement.setSelectionRange(0, 0) }, 10)) }, t.prototype.closeSearch = function () { this.searchEnabled && (this.showSearch = !1, this.searchText.length && (this.searchText = "", this.searchTextUpdated())) }, t.prototype.searchTextUpdated = function () { this.searchableComponent && this.searchableComponent.onSearchTextUpdated(this.searchText) }, t.\u0275fac = function (e) { return new (e || t)(r["\u0275\u0275directiveInject"](h.Store), r["\u0275\u0275directiveInject"](Ee.b), r["\u0275\u0275directiveInject"](Te.BreakpointObserver)) }, t.\u0275cmp = r["\u0275\u0275defineComponent"]({ type: t, selectors: [["tb-home"]], viewQuery: function (e, t) { if (1 & e && (r["\u0275\u0275viewQuery"](ze, 1), r["\u0275\u0275viewQuery"](He, 1)), 2 & e) { var n = void 0; r["\u0275\u0275queryRefresh"](n = r["\u0275\u0275loadQuery"]()) && (t.sidenav = n.first), r["\u0275\u0275queryRefresh"](n = r["\u0275\u0275loadQuery"]()) && (t.searchInputField = n.first) } }, features: [r["\u0275\u0275InheritDefinitionFeature"]], decls: 38, vars: 27, consts: [[1, "tb-site-sidenav", "mat-elevation-z2", 3, "disableClose", "mode", "opened", "click"], ["sidenav", ""], [1, "tb-nav-header"], ["color", "accent", 1, "tb-nav-header-toolbar"], ["fxFlex", "auto", "fxLayout", "row"], [1, "tb-logo-title"], ["color", "accent", "fxFlex", "0%", "fxLayout", "column", "role", "navigation", 1, "tb-side-menu-toolbar"], ["fxLayout", "column", "role", "main", 2, "height", "100%"], ["fxLayout", "row", "color", "accent", 1, "mat-elevation-z1", "tb-accent-toolbar"], ["mat-icon-button", "", "id", "main", "fxHide.gt-sm", "", 3, "fxShow", "ngClass", "click"], [1, "material-icons"], ["mat-icon-button", "", 3, "fxShow", "ngClass", "click"], ["mat-icon-button", "", 3, "ngClass", "click"], ["fxFlex", "", 1, "mat-toolbar-tools", 3, "fxShow", "activeComponent"], ["fxFlex", "", "fxLayout", "row", 1, "tb-dark", 3, "fxShow"], ["fxFlex", "", "floatLabel", "always"], ["matInput", "", 3, "ngModel", "placeholder", "ngModelChange"], ["searchInput", ""], ["mat-icon-button", "", 3, "fxShow", "click"], ["mat-icon-button", "", "fxHide.lt-md", "", 3, "fxShow", "click", 4, "ngIf"], [3, "displayUserInfo"], ["color", "warn", "style", "z-index: 10; margin-bottom: -4px; width: 100%;", "mode", "indeterminate", 4, "ngIf"], ["fxFlex", "", "fxLayout", "column", "tb-toast", "", 1, "tb-main-content"], [3, "activate"], ["mat-icon-button", "", "fxHide.lt-md", "", 3, "fxShow", "click"], ["color", "warn", "mode", "indeterminate", 2, "z-index", "10", "margin-bottom", "-4px", "width", "100%"]], template: function (e, t) { if (1 & e) { var n = r["\u0275\u0275getCurrentView"](); r["\u0275\u0275elementStart"](0, "mat-sidenav-container"), r["\u0275\u0275elementStart"](1, "mat-sidenav", 0, 1), r["\u0275\u0275listener"]("click", function () { return t.sidenavClicked() }), r["\u0275\u0275elementStart"](3, "header", 2), r["\u0275\u0275elementStart"](4, "mat-toolbar", 3), r["\u0275\u0275elementStart"](5, "div", 4), r["\u0275\u0275elementStart"](6, "div", 5), r["\u0275\u0275text"](7, "R\u1ea1ng \u0110\xf4ng SCADA"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](8, "mat-toolbar", 6), r["\u0275\u0275element"](9, "tb-side-menu"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](10, "mat-sidenav-content"), r["\u0275\u0275elementStart"](11, "div", 7), r["\u0275\u0275elementStart"](12, "mat-toolbar", 8), r["\u0275\u0275elementStart"](13, "button", 9), r["\u0275\u0275listener"]("click", function () { return r["\u0275\u0275restoreView"](n), r["\u0275\u0275reference"](2).toggle() }), r["\u0275\u0275elementStart"](14, "mat-icon", 10), r["\u0275\u0275text"](15, "menu"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](16, "button", 11), r["\u0275\u0275listener"]("click", function () { return t.goBack() }), r["\u0275\u0275elementStart"](17, "mat-icon", 10), r["\u0275\u0275text"](18, "arrow_back"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](19, "button", 12), r["\u0275\u0275listener"]("click", function () { return t.closeSearch() }), r["\u0275\u0275elementStart"](20, "mat-icon", 10), r["\u0275\u0275text"](21, "arrow_back"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275element"](22, "tb-breadcrumb", 13), r["\u0275\u0275elementStart"](23, "div", 14), r["\u0275\u0275elementStart"](24, "mat-form-field", 15), r["\u0275\u0275element"](25, "mat-label"), r["\u0275\u0275elementStart"](26, "input", 16, 17), r["\u0275\u0275listener"]("ngModelChange", function (e) { return t.searchText = e }), r["\u0275\u0275pipe"](28, "translate"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementStart"](29, "button", 18), r["\u0275\u0275listener"]("click", function () { return t.openSearch() }), r["\u0275\u0275elementStart"](30, "mat-icon", 10), r["\u0275\u0275text"](31, "search"), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275template"](32, We, 3, 2, "button", 19), r["\u0275\u0275element"](33, "tb-user-menu", 20), r["\u0275\u0275elementEnd"](), r["\u0275\u0275template"](34, Qe, 1, 0, "mat-progress-bar", 21), r["\u0275\u0275pipe"](35, "async"), r["\u0275\u0275elementStart"](36, "div", 22), r["\u0275\u0275elementStart"](37, "router-outlet", 23), r["\u0275\u0275listener"]("activate", function (e) { return t.activeComponentChanged(e) }), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"](), r["\u0275\u0275elementEnd"]() } 2 & e && (r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("disableClose", t.sidenavOpened)("mode", t.sidenavMode)("opened", t.sidenavOpened && !t.forceFullscreen), r["\u0275\u0275advance"](12), r["\u0275\u0275property"]("fxShow", !t.forceFullscreen)("ngClass", r["\u0275\u0275pureFunction1"](21, Ye, t.displaySearchMode())), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("fxShow", t.forceFullscreen)("ngClass", r["\u0275\u0275pureFunction1"](23, Ye, t.displaySearchMode())), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("ngClass", r["\u0275\u0275pureFunction1"](25, Ye, !t.displaySearchMode())), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("fxShow", !t.displaySearchMode())("activeComponent", t.activeComponent), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("fxShow", t.displaySearchMode()), r["\u0275\u0275advance"](3), r["\u0275\u0275propertyInterpolate"]("placeholder", r["\u0275\u0275pipeBind1"](28, 17, "common.enter-search")), r["\u0275\u0275property"]("ngModel", t.searchText), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("fxShow", t.searchEnabled), r["\u0275\u0275advance"](3), r["\u0275\u0275property"]("ngIf", t.fullscreenEnabled), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("displayUserInfo", !t.displaySearchMode()), r["\u0275\u0275advance"](1), r["\u0275\u0275property"]("ngIf", r["\u0275\u0275pipeBind1"](35, 19, t.isLoading$))) }, directives: [Se.MatSidenavContainer, Se.MatSidenav, Ce.MatToolbar, y.b, y.f, Be, Se.MatSidenavContent, I.MatButton, je.d, u.NgClass, je.b, O.MatIcon, Ge.a, T.MatFormField, T.MatLabel, C.MatInput, g.DefaultValueAccessor, g.NgControlStatus, g.NgModel, u.NgIf, qe.a, E.b, a.RouterOutlet, x.MatProgressBar], pipes: [S.TranslatePipe, u.AsyncPipe], styles: ["[_nghost-%COMP%]{display:flex;width:100%;height:100%}[_nghost-%COMP%]   .tb-invisible[_ngcontent-%COMP%]{display:none!important}[_nghost-%COMP%]   mat-sidenav-container[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   mat-sidenav.tb-site-sidenav[_ngcontent-%COMP%]{width:250px}@media (max-width:456px){[_nghost-%COMP%]   mat-sidenav.tb-site-sidenav[_ngcontent-%COMP%]{width:calc(100% - 56px)}}[_nghost-%COMP%]   mat-sidenav.tb-site-sidenav[_ngcontent-%COMP%]   .tb-nav-header[_ngcontent-%COMP%]{z-index:2;flex-shrink:0;white-space:nowrap}[_nghost-%COMP%]   mat-sidenav.tb-site-sidenav[_ngcontent-%COMP%]   .tb-nav-header[_ngcontent-%COMP%]   .tb-nav-header-toolbar[_ngcontent-%COMP%]{min-height:64px;height:inherit;padding:0;z-index:2;flex-shrink:0;white-space:nowrap;border-bottom:1px solid rgba(0,0,0,.12)}[_nghost-%COMP%]   mat-sidenav.tb-site-sidenav[_ngcontent-%COMP%]   .tb-nav-header[_ngcontent-%COMP%]   .tb-nav-header-toolbar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:64px}[_nghost-%COMP%]   mat-sidenav.tb-site-sidenav[_ngcontent-%COMP%]   .tb-nav-header[_ngcontent-%COMP%]   .tb-nav-header-toolbar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .tb-logo-title[_ngcontent-%COMP%]{width:auto;max-width:100%;height:36px;max-height:100%;margin:auto}[_nghost-%COMP%]   mat-sidenav.tb-site-sidenav[_ngcontent-%COMP%]   .tb-side-menu-toolbar[_ngcontent-%COMP%]{overflow-y:auto;height:inherit;padding:0}[_nghost-%COMP%]   .tb-primary-toolbar[_ngcontent-%COMP%]{z-index:2}[_nghost-%COMP%]   .tb-primary-toolbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px!important;font-weight:400!important}[_nghost-%COMP%]   .tb-main-content[_ngcontent-%COMP%]{overflow:auto;position:relative}"] }), t }(m.a); 0, void 0; var Je = [{ path: "", component: Xe, data: { title: "home.home", breadcrumb: { skip: !0 } }, canActivate: [$], canActivateChild: [$], loadChildren: function () { return Promise.all([n.e(7), n.e(21)]).then(n.bind(null, "Jka9")).then(function (e) { return e.HomePagesModule }) } }], $e = function () { function e() { } return e.\u0275fac = function (t) { return new (t || e) }, e.\u0275mod = r["\u0275\u0275defineNgModule"]({ type: e }), e.\u0275inj = r["\u0275\u0275defineInjector"]({ imports: [[h.StoreModule, a.RouterModule.forChild(Je)], a.RouterModule] }), e }(); void (("undefined" == typeof ngJitMode || ngJitMode) && r["\u0275\u0275setNgModuleScope"]($e, { imports: [h.StoreModule, a.RouterModule], exports: [a.RouterModule] })), 0; var Ze = function () { function e() { } return e.\u0275fac = function (t) { return new (t || e) }, e.\u0275mod = r["\u0275\u0275defineNgModule"]({ type: e }), e.\u0275inj = r["\u0275\u0275defineInjector"]({ imports: [[u.CommonModule, me.a, $e]] }), e }(); void (("undefined" == typeof ngJitMode || ngJitMode) && r["\u0275\u0275setNgModuleScope"](Ze, { declarations: [Xe, Me, Le, Be], imports: [u.CommonModule, me.a, $e] })), 0; var et = n("Sy1n"), tt = [{ path: "", data: { title: "dashboard.dashboard", breadcrumb: { skip: !0 } }, canActivate: [$], canActivateChild: [$], loadChildren: function () { return Promise.all([n.e(7), n.e(56)]).then(n.bind(null, "taxM")).then(function (e) { return e.DashboardPagesModule }) } }], nt = function () { function e() { } return e.\u0275fac = function (t) { return new (t || e) }, e.\u0275mod = r["\u0275\u0275defineNgModule"]({ type: e }), e.\u0275inj = r["\u0275\u0275defineInjector"]({ imports: [[h.StoreModule, a.RouterModule.forChild(tt)], a.RouterModule] }), e }(); void (("undefined" == typeof ngJitMode || ngJitMode) && r["\u0275\u0275setNgModuleScope"](nt, { imports: [h.StoreModule, a.RouterModule], exports: [a.RouterModule] })), 0; var it = [{ path: "**", redirectTo: "home" }], rt = function () { function e() { } return e.\u0275fac = function (t) { return new (t || e) }, e.\u0275mod = r["\u0275\u0275defineNgModule"]({ type: e }), e.\u0275inj = r["\u0275\u0275defineInjector"]({ imports: [[a.RouterModule.forChild(it)], a.RouterModule] }), e }(); void (("undefined" == typeof ngJitMode || ngJitMode) && r["\u0275\u0275setNgModuleScope"](rt, { imports: [a.RouterModule], exports: [a.RouterModule] })), 0; var ot = function () { function e() { } return e.\u0275fac = function (t) { return new (t || e) }, e.\u0275mod = r["\u0275\u0275defineNgModule"]({ type: e, bootstrap: [et.a] }), e.\u0275inj = r["\u0275\u0275defineInjector"]({ providers: [], imports: [[i.BrowserModule, o.b, l, c.a, fe, Ze, nt, rt]] }), e }(); void (("undefined" == typeof ngJitMode || ngJitMode) && r["\u0275\u0275setNgModuleScope"](ot, { declarations: [et.a], imports: [i.BrowserModule, o.b, l, c.a, fe, Ze, nt, rt] })), 0, n("AytR").a.production && Object(r.enableProdMode)(), i.platformBrowser().bootstrapModule(ot).catch(function (e) { return console.error(e) }) }, zn8P: function (e, t) { function n(e) { return Promise.resolve().then(function () { var t = new Error("Cannot find module '" + e + "'"); throw t.code = "MODULE_NOT_FOUND", t }) } n.keys = function () { return [] }, n.resolve = n, e.exports = n, n.id = "zn8P" }, zp9Z: function (e, t, n) { "use strict"; var i; n.d(t, "a", function () { return i }), function (e) { e.SYS_ADMIN = "SYS_ADMIN", e.TENANT_ADMIN = "TENANT_ADMIN", e.CUSTOMER_USER = "CUSTOMER_USER", e.REFRESH_TOKEN = "REFRESH_TOKEN", e.ANONYMOUS = "ANONYMOUS" }(i || (i = {})) } }, [[0, 1, 18]]]);