(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"/KqI":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("mrSG"),r=n("gaqQ"),a=n("RLvv"),o=n("Lm6k"),l=Object(i.a)(Object(i.a)({self:{description:"Built-in variable <b>self</b> that is a reference to the widget instance",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/modules/home/models/widget-component.models.ts#L350">WidgetTypeInstance</a>',meta:"object",children:Object(i.a)({onInit:{description:"The first function which is called when widget is ready for initialization.<br>Should be used to prepare widget DOM, process widget settings and initial subscription information.",meta:"function"},onDataUpdated:{description:'Called when the new data is available from the widget subscription.<br>Latest data can be accessed from the <code>defaultSubscription</code> property of <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/modules/home/models/widget-component.models.ts#L83">widget context (<code>ctx</code>)</a>.',meta:"function"},onResize:{description:'Called when widget container is resized. Latest <code>width</code> and <code>height</code> can be obtained from <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/modules/home/models/widget-component.models.ts#L83">widget context (<code>ctx</code>)</a>.',meta:"function"},onEditModeChanged:{description:'Called when dashboard editing mode is changed. Latest mode is handled by <code>isEdit</code> property of <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/modules/home/models/widget-component.models.ts#L83">widget context (<code>ctx</code>)</a>.',meta:"function"},onMobileModeChanged:{description:'Called when dashboard view width crosses mobile breakpoint. Latest state is handled by <code>isMobile</code> property of <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/modules/home/models/widget-component.models.ts#L83">widget context (<code>ctx</code>)</a>.',meta:"function"},onDestroy:{description:"Called when widget element is destroyed. Should be used to cleanup all resources if necessary.",meta:"function"},getSettingsSchema:{description:'Optional function returning widget settings schema json as alternative to <b>Settings tab</b> of <a href="https://thingsboard.io/docs/user-guide/contribution/widgets-development/#settings-schema-section">Settings schema section</a>.',meta:"function",return:{description:"An widget settings schema json",type:"object"}},getDataKeySettingsSchema:{description:'Optional function returning particular data key settings schema json as alternative to <b>Data key settings schema</b> of <a href="https://thingsboard.io/docs/user-guide/contribution/widgets-development/#settings-schema-section">Settings schema section</a>.',meta:"function",return:{description:"A particular data key settings schema json",type:"object"}},typeParameters:{description:"Returns object describing widget datasource parameters.",meta:"function",return:{description:"An object describing widget datasource parameters.",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/widget.models.ts#L146">WidgetTypeParameters</a>'}},actionSources:{description:"Returns map describing available widget action sources used to define user actions.",meta:"function",return:{description:"A map of action sources by action source id.",type:'{[actionSourceId: string]: <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/widget.models.ts#L118">WidgetActionSource</a>}'}}},a.a)}},a.a),o.c),s=new r.a(l)},"3/ER":function(e,t,n){"use strict";(function(e){var i=n("Ju5/"),r="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=r&&"object"==typeof e&&e&&!e.nodeType&&e,o=a&&a.exports===r?i.a.Buffer:void 0,l=o?o.allocUnsafe:void 0;t.a=function(e,t){if(t)return e.slice();var n=e.length,i=l?l(n):new e.constructor(n);return e.copy(i),i}}).call(this,n("kIY7")(e))},"4t2C":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("fXoL"),r=n("3Pt+"),a=n("8LU1"),o=n("T4sd"),l=n("sYmb"),s=n("XiUz"),d=n("j22J"),c=function(){function e(e,t,n){var i=this;this.fb=e,this.truncate=t,this.translate=n,this.propagateChange=function(e){},this.ruleNodeLinkFormGroup=this.fb.group({labels:[[],r.Validators.required]}),this.ruleNodeLinkFormGroup.get("labels").valueChanges.subscribe(function(e){return i.updateModel(e)})}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(a.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allowCustom",{get:function(){return this.allowCustomValue},set:function(e){this.allowCustomValue=Object(a.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.ruleNodeLinkFormGroup.disable({emitEvent:!1}):this.ruleNodeLinkFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){this.modelValue=e;var t=this.modelValue&&this.modelValue.labels?this.modelValue.labels:[];this.ruleNodeLinkFormGroup.get("labels").patchValue(t,{emitEvent:!1})},e.prototype.updateModel=function(e){e&&e.length?(this.modelValue.labels=e,this.modelValue.label=e.join(" / "),this.propagateChange(this.modelValue)):this.propagateChange(this.required?null:this.modelValue)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](r.FormBuilder),i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](l.TranslateService))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-rule-node-link"]],inputs:{required:"required",disabled:"disabled",allowCustom:"allowCustom",allowedLabels:"allowedLabels"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:3,vars:3,consts:[["fxLayout","column",1,"mat-padding"],[3,"formGroup"],["required","","formControlName","labels",3,"allowedLabels","allowCustom"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"form",1),i["\u0275\u0275element"](2,"tb-link-labels",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("formGroup",t.ruleNodeLinkFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("allowedLabels",t.allowedLabels)("allowCustom",t.allowCustom))},directives:[s.f,r["\u0275angular_packages_forms_forms_ba"],r.NgControlStatusGroup,r.FormGroupDirective,d.a,r.RequiredValidator,r.NgControlStatus,r.FormControlName],encapsulation:2}),e}();0,void 0},Jka9:function(e,t,n){"use strict";n.r(t),n.d(t,"HomePagesModule",function(){return bh});var i=n("fXoL"),r=n("ofXK"),a=n("tyNb"),o=n("mrSG"),l=n("RxGS"),s=n("3Pt+"),d=n("c1Lj"),c=n("jKtI"),u=n("xKAQ"),p=n("//Q6"),m=n("XNiG"),f=n("1G5W"),h=n("l7P3"),g=n("sYmb"),b=n("Wp6s"),v=n("XiUz"),y=n("kRCp"),x=n("kmnG"),S=n("qFsG"),w=n("d3UM"),C=n("Ww7o"),E=n("bTqV"),I=n("bv9b"),T=n("FKr1"),M=n("40Wt"),D=n("bSwM");function k(e,t){1&e&&i["\u0275\u0275element"](0,"mat-progress-bar",33)}function A(e,t){1&e&&i["\u0275\u0275element"](0,"div",34)}function F(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.mail-from-required")," "))}function P(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",35),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.toUpperCase()," ")}}function _(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.smtp-host-required")," "))}function N(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.smtp-port-required")," "))}function L(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.smtp-port-invalid")," "))}function O(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.timeout-required")," "))}function B(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.timeout-invalid")," "))}function R(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",35),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n," ")}}function j(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-form-field",10),i["\u0275\u0275elementStart"](1,"mat-label",11),i["\u0275\u0275text"](2,"admin.tls-version"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"mat-select",36),i["\u0275\u0275template"](4,R,2,2,"mat-option",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngForOf",n.tlsVersions)}}function V(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.proxy-host-required")," "))}function z(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.proxy-port-required")," "))}function G(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.proxy-port-range")," "))}function W(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"div",37),i["\u0275\u0275elementStart"](2,"mat-form-field",17),i["\u0275\u0275elementStart"](3,"mat-label",11),i["\u0275\u0275text"](4,"admin.proxy-host"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](5,"input",38),i["\u0275\u0275template"](6,V,3,3,"mat-error",13),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"mat-form-field",19),i["\u0275\u0275elementStart"](8,"mat-label",11),i["\u0275\u0275text"](9,"admin.proxy-port"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](10,"input",39),i["\u0275\u0275template"](11,z,3,3,"mat-error",13),i["\u0275\u0275template"](12,G,3,3,"mat-error",13),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"mat-form-field",10),i["\u0275\u0275elementStart"](14,"mat-label",11),i["\u0275\u0275text"](15,"admin.proxy-user"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](16,"input",40),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"mat-form-field",10),i["\u0275\u0275elementStart"](18,"mat-label",11),i["\u0275\u0275text"](19,"admin.proxy-password"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](20,"input",41),i["\u0275\u0275element"](21,"tb-toggle-password",42),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",n.mailSettings.get("proxyHost").hasError("required")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",n.mailSettings.get("proxyPort").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.mailSettings.get("proxyPort").hasError("pattern")||n.mailSettings.get("proxyPort").hasError("min")||n.mailSettings.get("proxyPort").hasError("max"))}}function q(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-checkbox",43),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.change-password")," "))}function H(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-form-field",10),i["\u0275\u0275elementStart"](1,"mat-label",11),i["\u0275\u0275text"](2,"common.password"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](3,"input",44),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275element"](5,"tb-toggle-password",42),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](4,1,"common.enter-password")))}var U=function(e){function t(t,n,i,r,a){var o=e.call(this,t)||this;return o.store=t,o.router=n,o.adminService=i,o.translate=r,o.fb=a,o.smtpProtocols=["smtp","smtps"],o.showChangePassword=!1,o.tlsVersions=["TLSv1","TLSv1.1","TLSv1.2","TLSv1.3"],o.destroy$=new m.b,o}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this.buildMailServerSettingsForm(),this.adminService.getAdminSettings("mail").subscribe(function(t){e.adminSettings=t,e.adminSettings.jsonValue&&Object(p.A)(e.adminSettings.jsonValue.enableTls)&&(e.adminSettings.jsonValue.enableTls="true"===e.adminSettings.jsonValue.enableTls),e.showChangePassword=!Object(p.o)(e.adminSettings.jsonValue.showChangePassword)||e.adminSettings.jsonValue.showChangePassword,delete e.adminSettings.jsonValue.showChangePassword,e.mailSettings.reset(e.adminSettings.jsonValue),e.enableMailPassword(!e.showChangePassword),e.enableProxyChanged()})},t.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete(),e.prototype.ngOnDestroy.call(this)},t.prototype.buildMailServerSettingsForm=function(){var e=this;this.mailSettings=this.fb.group({mailFrom:["",[s.Validators.required]],smtpProtocol:["smtp"],smtpHost:["localhost",[s.Validators.required]],smtpPort:["25",[s.Validators.required,s.Validators.pattern(d.g),s.Validators.maxLength(5)]],timeout:["10000",[s.Validators.required,s.Validators.pattern(/^[0-9]{1,6}$/),s.Validators.maxLength(6)]],enableTls:[!1],tlsVersion:[],enableProxy:[!1,[]],proxyHost:["",[s.Validators.required]],proxyPort:["",[s.Validators.required,s.Validators.min(1),s.Validators.max(65535)]],proxyUser:[""],proxyPassword:[""],username:[""],changePassword:[!1],password:[""]}),this.registerDisableOnLoadFormControl(this.mailSettings.get("smtpProtocol")),this.registerDisableOnLoadFormControl(this.mailSettings.get("enableTls")),this.registerDisableOnLoadFormControl(this.mailSettings.get("enableProxy")),this.registerDisableOnLoadFormControl(this.mailSettings.get("changePassword")),this.mailSettings.get("enableProxy").valueChanges.pipe(Object(f.a)(this.destroy$)).subscribe(function(){e.enableProxyChanged()}),this.mailSettings.get("changePassword").valueChanges.pipe(Object(f.a)(this.destroy$)).subscribe(function(t){e.enableMailPassword(t)})},t.prototype.enableProxyChanged=function(){this.mailSettings.get("enableProxy").value?(this.mailSettings.get("proxyHost").enable(),this.mailSettings.get("proxyPort").enable()):(this.mailSettings.get("proxyHost").disable(),this.mailSettings.get("proxyPort").disable())},t.prototype.enableMailPassword=function(e){e?this.mailSettings.get("password").enable({emitEvent:!1}):this.mailSettings.get("password").disable({emitEvent:!1})},t.prototype.sendTestMail=function(){var e=this;this.adminSettings.jsonValue=Object(o.a)(Object(o.a)({},this.adminSettings.jsonValue),this.mailSettingsFormValue),this.adminService.sendTestMail(this.adminSettings).subscribe(function(){e.store.dispatch(new u.b({message:e.translate.instant("admin.test-mail-sent"),type:"success"}))})},t.prototype.save=function(){var e=this;this.adminSettings.jsonValue=Object(o.a)(Object(o.a)({},this.adminSettings.jsonValue),this.mailSettingsFormValue),this.adminService.saveAdminSettings(this.adminSettings).subscribe(function(t){e.adminSettings=t,e.showChangePassword=!0,e.mailSettings.reset(e.adminSettings.jsonValue)})},t.prototype.confirmForm=function(){return this.mailSettings},Object.defineProperty(t.prototype,"mailSettingsFormValue",{get:function(){var e=this.mailSettings.value;return delete e.changePassword,e},enumerable:!1,configurable:!0}),t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](a.Router),i["\u0275\u0275directiveInject"](c.a),i["\u0275\u0275directiveInject"](g.TranslateService),i["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-mail-server"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:74,vars:44,consts:[[1,"settings-card"],["fxLayout","row"],["translate","",1,"mat-headline"],["fxFlex",""],["tb-help","outgoingMailSettings"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],[2,"padding-top","16px"],[3,"formGroup","ngSubmit"],[3,"disabled"],[1,"mat-block"],["translate",""],["matInput","","formControlName","mailFrom","required",""],[4,"ngIf"],["formControlName","smtpProtocol"],[3,"value",4,"ngFor","ngForOf"],["fxLayout.gt-sm","row","fxLayoutGap.gt-sm","10px"],["fxFlex","100","fxFlex.gt-sm","60",1,"mat-block"],["matInput","","formControlName","smtpHost","placeholder","localhost","required",""],["fxFlex","100","fxFlex.gt-sm","40",1,"mat-block"],["matInput","","formControlName","smtpPort","placeholder","25","maxlength","5","required",""],["smtpPortInput",""],["align","end"],["matInput","","formControlName","timeout","placeholder","10000","maxlength","6","required",""],["timeoutInput",""],["formControlName","enableTls",2,"display","block","padding-bottom","16px"],["class","mat-block",4,"ngIf"],["formControlName","enableProxy",2,"display","block","padding-bottom","16px"],["matInput","","formControlName","username","autocomplete","new-username",3,"placeholder"],["formControlName","changePassword","style","padding-bottom: 16px;",4,"ngIf"],["fxLayout","row","fxLayoutAlign","end center","fxLayout.xs","column","fxLayoutAlign.xs","end","fxLayoutGap","16px"],["mat-raised-button","","type","button",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"],[3,"value"],["formControlName","tlsVersion"],["fxLayout.gt-sm","row","fxLayoutGap.gt-sm","8px"],["matInput","","required","","formControlName","proxyHost"],["matInput","","required","","formControlName","proxyPort","type","number","step","1","min","1","max","65535"],["matInput","","formControlName","proxyUser"],["matInput","","type","password","formControlName","proxyPassword","autocomplete","new-proxy-password"],["matSuffix",""],["formControlName","changePassword",2,"padding-bottom","16px"],["matInput","","formControlName","password","type","password","autocomplete","new-password",3,"placeholder"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mat-card",0),i["\u0275\u0275elementStart"](2,"mat-card-title"),i["\u0275\u0275elementStart"](3,"div",1),i["\u0275\u0275elementStart"](4,"span",2),i["\u0275\u0275text"](5,"admin.outgoing-mail-settings"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](6,"span",3),i["\u0275\u0275element"](7,"div",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,k,1,0,"mat-progress-bar",5),i["\u0275\u0275pipe"](9,"async"),i["\u0275\u0275template"](10,A,1,0,"div",6),i["\u0275\u0275pipe"](11,"async"),i["\u0275\u0275elementStart"](12,"mat-card-content",7),i["\u0275\u0275elementStart"](13,"form",8),i["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),i["\u0275\u0275elementStart"](14,"fieldset",9),i["\u0275\u0275pipe"](15,"async"),i["\u0275\u0275elementStart"](16,"mat-form-field",10),i["\u0275\u0275elementStart"](17,"mat-label",11),i["\u0275\u0275text"](18,"admin.mail-from"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](19,"input",12),i["\u0275\u0275template"](20,F,3,3,"mat-error",13),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](21,"mat-form-field",10),i["\u0275\u0275elementStart"](22,"mat-label",11),i["\u0275\u0275text"](23,"admin.smtp-protocol"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](24,"mat-select",14),i["\u0275\u0275template"](25,P,2,2,"mat-option",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](26,"div",16),i["\u0275\u0275elementStart"](27,"mat-form-field",17),i["\u0275\u0275elementStart"](28,"mat-label",11),i["\u0275\u0275text"](29,"admin.smtp-host"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](30,"input",18),i["\u0275\u0275template"](31,_,3,3,"mat-error",13),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](32,"mat-form-field",19),i["\u0275\u0275elementStart"](33,"mat-label",11),i["\u0275\u0275text"](34,"admin.smtp-port"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](35,"input",20,21),i["\u0275\u0275elementStart"](37,"mat-hint",22),i["\u0275\u0275text"](38),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](39,N,3,3,"mat-error",13),i["\u0275\u0275template"](40,L,3,3,"mat-error",13),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](41,"mat-form-field",10),i["\u0275\u0275elementStart"](42,"mat-label",11),i["\u0275\u0275text"](43,"admin.timeout-msec"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](44,"input",23,24),i["\u0275\u0275elementStart"](46,"mat-hint",22),i["\u0275\u0275text"](47),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](48,O,3,3,"mat-error",13),i["\u0275\u0275template"](49,B,3,3,"mat-error",13),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](50,"tb-checkbox",25),i["\u0275\u0275text"](51),i["\u0275\u0275pipe"](52,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](53,j,5,1,"mat-form-field",26),i["\u0275\u0275elementStart"](54,"tb-checkbox",27),i["\u0275\u0275text"](55),i["\u0275\u0275pipe"](56,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](57,W,22,3,"div",13),i["\u0275\u0275elementStart"](58,"mat-form-field",10),i["\u0275\u0275elementStart"](59,"mat-label",11),i["\u0275\u0275text"](60,"common.username"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](61,"input",28),i["\u0275\u0275pipe"](62,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](63,q,3,3,"mat-checkbox",29),i["\u0275\u0275template"](64,H,6,3,"mat-form-field",26),i["\u0275\u0275elementStart"](65,"div",30),i["\u0275\u0275elementStart"](66,"button",31),i["\u0275\u0275listener"]("click",function(){return t.sendTestMail()}),i["\u0275\u0275pipe"](67,"async"),i["\u0275\u0275text"](68),i["\u0275\u0275pipe"](69,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](70,"button",32),i["\u0275\u0275pipe"](71,"async"),i["\u0275\u0275text"](72),i["\u0275\u0275pipe"](73,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](36),r=i["\u0275\u0275reference"](45);i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](9,24,t.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](11,26,t.isLoading$)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.mailSettings),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](15,28,t.isLoading$)),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",t.mailSettings.get("mailFrom").hasError("required")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngForOf",t.smtpProtocols),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",t.mailSettings.get("smtpHost").hasError("required")),i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate1"]("",(null==n.value?null:n.value.length)||0,"/5"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.mailSettings.get("smtpPort").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.mailSettings.get("smtpPort").hasError("pattern")||t.mailSettings.get("smtpPort").hasError("maxlength")),i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate1"]("",(null==r.value?null:r.value.length)||0,"/6"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.mailSettings.get("timeout").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.mailSettings.get("timeout").hasError("pattern")||t.mailSettings.get("timeout").hasError("maxlength")),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](52,30,"admin.enable-tls")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.mailSettings.get("enableTls").value),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](56,32,"admin.enable-proxy")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.mailSettings.get("enableProxy").value),i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](62,34,"common.enter-username")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.showChangePassword),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.mailSettings.get("changePassword").value||!t.showChangePassword),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](67,36,t.isLoading$)||t.mailSettings.invalid),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](69,38,"admin.send-test-mail")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](71,40,t.isLoading$)||t.mailSettings.invalid||!t.mailSettings.dirty),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](73,42,"action.save")," ")}},directives:[b.MatCard,b.MatCardTitle,v.f,g.TranslateDirective,v.b,y.a,r.NgIf,b.MatCardContent,s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,x.MatFormField,x.MatLabel,S.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,s.RequiredValidator,w.MatSelect,r.NgForOf,v.g,s.MaxLengthValidator,x.MatHint,C.a,v.e,E.MatButton,I.MatProgressBar,x.MatError,T.MatOption,s.NumberValueAccessor,M.a,x.MatSuffix,D.MatCheckbox],pipes:[r.AsyncPipe,g.TranslatePipe],styles:["","[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{margin:8px}@media screen and (min-width:960px) and (max-width:1279px){[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{width:80%}}@media screen and (min-width:1280px){[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{width:60%}}"]}),t}(l.a);0,void 0;var $=n("C/rb"),K=n("IzEk"),Y=n("S+vS"),J=function(){function e(e,t,n){this.store=e,this.dialogService=t,this.translate=n}return e.prototype.canDeactivate=function(e,t,n){var i=null;if(this.store.pipe(Object(h.select)($.c),Object(K.a)(1)).subscribe(function(e){i=e}),i&&i.isAuthenticated){var r=!1;if(e.confirmForm){var a=e.confirmForm();a&&(r=a.dirty)}else Object(p.n)(e.isDirty)&&(r=e.isDirty);if(r)return this.dialogService.confirm(this.translate.instant("confirm-on-exit.title"),this.translate.instant("confirm-on-exit.html-message"))}return!0},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](h.Store),i["\u0275\u0275inject"](Y.a),i["\u0275\u0275inject"](g.TranslateService))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();0,void 0;var X=n("zp9Z");function Q(e,t){1&e&&i["\u0275\u0275element"](0,"mat-progress-bar",16)}function Z(e,t){1&e&&i["\u0275\u0275element"](0,"div",17)}function ee(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.base-url-required")," "))}var te=function(e){function t(t,n,i,r){var a=e.call(this,t)||this;return a.store=t,a.router=n,a.adminService=i,a.fb=r,a}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this.buildGeneralServerSettingsForm(),this.adminService.getAdminSettings("general").subscribe(function(t){e.adminSettings=t,e.generalSettings.reset(e.adminSettings.jsonValue)})},t.prototype.buildGeneralServerSettingsForm=function(){this.generalSettings=this.fb.group({baseUrl:["",[s.Validators.required]],prohibitDifferentUrl:["",[]]})},t.prototype.save=function(){var e=this;this.adminSettings.jsonValue=Object(o.a)(Object(o.a)({},this.adminSettings.jsonValue),this.generalSettings.value),this.adminService.saveAdminSettings(this.adminSettings).subscribe(function(t){e.adminSettings=t,e.generalSettings.reset(e.adminSettings.jsonValue)})},t.prototype.confirmForm=function(){return this.generalSettings},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](a.Router),i["\u0275\u0275directiveInject"](c.a),i["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-general-settings"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:29,vars:20,consts:[[1,"settings-card"],["fxLayout","row"],["translate","",1,"mat-headline"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],[2,"padding-top","16px"],[3,"formGroup","ngSubmit"],[3,"disabled"],[1,"mat-block"],["translate",""],["matInput","","formControlName","baseUrl","required",""],[4,"ngIf"],["formControlName","prohibitDifferentUrl",2,"display","block","padding-bottom","16px"],["translate","",1,"tb-hint"],["fxLayout","row","fxLayoutAlign","end center",1,"layout-wrap",2,"width","100%"],["mat-button","","mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mat-card",0),i["\u0275\u0275elementStart"](2,"mat-card-title"),i["\u0275\u0275elementStart"](3,"div",1),i["\u0275\u0275elementStart"](4,"span",2),i["\u0275\u0275text"](5,"admin.general-settings"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,Q,1,0,"mat-progress-bar",3),i["\u0275\u0275pipe"](7,"async"),i["\u0275\u0275template"](8,Z,1,0,"div",4),i["\u0275\u0275pipe"](9,"async"),i["\u0275\u0275elementStart"](10,"mat-card-content",5),i["\u0275\u0275elementStart"](11,"form",6),i["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),i["\u0275\u0275elementStart"](12,"fieldset",7),i["\u0275\u0275pipe"](13,"async"),i["\u0275\u0275elementStart"](14,"mat-form-field",8),i["\u0275\u0275elementStart"](15,"mat-label",9),i["\u0275\u0275text"](16,"admin.base-url"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](17,"input",10),i["\u0275\u0275template"](18,ee,3,3,"mat-error",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](19,"tb-checkbox",12),i["\u0275\u0275text"](20),i["\u0275\u0275pipe"](21,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"div",13),i["\u0275\u0275text"](23,"admin.prohibit-different-url-hint"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](24,"div",14),i["\u0275\u0275elementStart"](25,"button",15),i["\u0275\u0275pipe"](26,"async"),i["\u0275\u0275text"](27),i["\u0275\u0275pipe"](28,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](7,8,t.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](9,10,t.isLoading$)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.generalSettings),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](13,12,t.isLoading$)),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",t.generalSettings.get("baseUrl").hasError("required")),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](21,14,"admin.prohibit-different-url")," "),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](26,16,t.isLoading$)||t.generalSettings.invalid||!t.generalSettings.dirty),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](28,18,"action.save")," "))},directives:[b.MatCard,b.MatCardTitle,v.f,g.TranslateDirective,r.NgIf,b.MatCardContent,s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,x.MatFormField,x.MatLabel,S.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,s.RequiredValidator,C.a,v.e,E.MatButton,I.MatProgressBar,x.MatError],pipes:[r.AsyncPipe,g.TranslatePipe],styles:["","[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{margin:8px}@media screen and (min-width:960px) and (max-width:1279px){[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{width:80%}}@media screen and (min-width:1280px){[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{width:60%}}"]}),t}(l.a);0,void 0;var ne=n("7EHt");function ie(e,t){1&e&&i["\u0275\u0275element"](0,"mat-progress-bar",29)}function re(e,t){1&e&&i["\u0275\u0275element"](0,"div",30)}function ae(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.minimum-max-failed-login-attempts-range")," "))}function oe(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.minimum-password-length-required")," "))}function le(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.minimum-password-length-range")," "))}function se(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.minimum-password-length-range")," "))}function de(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.minimum-uppercase-letters-range")," "))}function ce(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.minimum-lowercase-letters-range")," "))}function ue(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.minimum-digits-range")," "))}function pe(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.minimum-special-characters-range")," "))}function me(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.password-expiration-period-days-range")," "))}function fe(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.password-reuse-frequency-days-range")," "))}var he=function(e){function t(t,n,i,r){var a=e.call(this,t)||this;return a.store=t,a.router=n,a.adminService=i,a.fb=r,a}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this.buildSecuritySettingsForm(),this.adminService.getSecuritySettings().subscribe(function(t){e.securitySettings=t,e.securitySettingsFormGroup.reset(e.securitySettings)})},t.prototype.buildSecuritySettingsForm=function(){this.securitySettingsFormGroup=this.fb.group({maxFailedLoginAttempts:[null,[s.Validators.min(0)]],userLockoutNotificationEmail:["",[]],passwordPolicy:this.fb.group({minimumLength:[null,[s.Validators.required,s.Validators.min(5),s.Validators.max(50)]],minimumUppercaseLetters:[null,s.Validators.min(0)],minimumLowercaseLetters:[null,s.Validators.min(0)],minimumDigits:[null,s.Validators.min(0)],minimumSpecialCharacters:[null,s.Validators.min(0)],passwordExpirationPeriodDays:[null,s.Validators.min(0)],passwordReuseFrequencyDays:[null,s.Validators.min(0)]})})},t.prototype.save=function(){var e=this;this.securitySettings=Object(o.a)(Object(o.a)({},this.securitySettings),this.securitySettingsFormGroup.value),this.adminService.saveSecuritySettings(this.securitySettings).subscribe(function(t){e.securitySettings=t,e.securitySettingsFormGroup.reset(e.securitySettings)})},t.prototype.confirmForm=function(){return this.securitySettingsFormGroup},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](a.Router),i["\u0275\u0275directiveInject"](c.a),i["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-security-settings"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:80,vars:28,consts:[[1,"settings-card"],["fxLayout","row"],["translate","",1,"mat-headline"],["fxFlex",""],["tb-help","securitySettings"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],[2,"padding-top","16px"],["autocomplete","off",3,"formGroup","ngSubmit"],[3,"disabled"],[1,"mat-accordion-container"],["multi","true"],[3,"expanded"],["translate","",1,"tb-panel-title"],[1,"mat-block"],["translate",""],["matInput","","type","number","formControlName","maxFailedLoginAttempts","step","1","min","0"],[4,"ngIf"],["matInput","","type","email","formControlName","userLockoutNotificationEmail"],["formGroupName","passwordPolicy"],["matInput","","type","number","formControlName","minimumLength","step","1","min","5","max","50","required",""],["matInput","","type","number","formControlName","minimumUppercaseLetters","step","1","min","0"],["matInput","","type","number","formControlName","minimumLowercaseLetters","step","1","min","0"],["matInput","","type","number","formControlName","minimumDigits","step","1","min","0"],["matInput","","type","number","formControlName","minimumSpecialCharacters","step","1","min","0"],["matInput","","type","number","formControlName","passwordExpirationPeriodDays","step","1","min","0"],["matInput","","type","number","formControlName","passwordReuseFrequencyDays","step","1","min","0"],["fxLayout","row","fxLayoutAlign","end center",1,"layout-wrap",2,"width","100%"],["mat-button","","mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mat-card",0),i["\u0275\u0275elementStart"](2,"mat-card-title"),i["\u0275\u0275elementStart"](3,"div",1),i["\u0275\u0275elementStart"](4,"span",2),i["\u0275\u0275text"](5,"admin.security-settings"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](6,"span",3),i["\u0275\u0275element"](7,"div",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,ie,1,0,"mat-progress-bar",5),i["\u0275\u0275pipe"](9,"async"),i["\u0275\u0275template"](10,re,1,0,"div",6),i["\u0275\u0275pipe"](11,"async"),i["\u0275\u0275elementStart"](12,"mat-card-content",7),i["\u0275\u0275elementStart"](13,"form",8),i["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),i["\u0275\u0275elementStart"](14,"fieldset",9),i["\u0275\u0275pipe"](15,"async"),i["\u0275\u0275elementStart"](16,"div",10),i["\u0275\u0275elementStart"](17,"mat-accordion",11),i["\u0275\u0275elementStart"](18,"mat-expansion-panel",12),i["\u0275\u0275elementStart"](19,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](20,"mat-panel-title"),i["\u0275\u0275elementStart"](21,"div",13),i["\u0275\u0275text"](22,"admin.general-policy"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](23,"mat-form-field",14),i["\u0275\u0275elementStart"](24,"mat-label",15),i["\u0275\u0275text"](25,"admin.max-failed-login-attempts"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](26,"input",16),i["\u0275\u0275template"](27,ae,3,3,"mat-error",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](28,"mat-form-field",14),i["\u0275\u0275elementStart"](29,"mat-label",15),i["\u0275\u0275text"](30,"admin.user-lockout-notification-email"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](31,"input",18),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](32,"mat-expansion-panel",12),i["\u0275\u0275elementStart"](33,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](34,"mat-panel-title"),i["\u0275\u0275elementStart"](35,"div",13),i["\u0275\u0275text"](36,"admin.password-policy"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](37,"section",19),i["\u0275\u0275elementStart"](38,"mat-form-field",14),i["\u0275\u0275elementStart"](39,"mat-label",15),i["\u0275\u0275text"](40,"admin.minimum-password-length"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](41,"input",20),i["\u0275\u0275template"](42,oe,3,3,"mat-error",17),i["\u0275\u0275template"](43,le,3,3,"mat-error",17),i["\u0275\u0275template"](44,se,3,3,"mat-error",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](45,"mat-form-field",14),i["\u0275\u0275elementStart"](46,"mat-label",15),i["\u0275\u0275text"](47,"admin.minimum-uppercase-letters"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](48,"input",21),i["\u0275\u0275template"](49,de,3,3,"mat-error",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](50,"mat-form-field",14),i["\u0275\u0275elementStart"](51,"mat-label",15),i["\u0275\u0275text"](52,"admin.minimum-lowercase-letters"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](53,"input",22),i["\u0275\u0275template"](54,ce,3,3,"mat-error",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](55,"mat-form-field",14),i["\u0275\u0275elementStart"](56,"mat-label",15),i["\u0275\u0275text"](57,"admin.minimum-digits"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](58,"input",23),i["\u0275\u0275template"](59,ue,3,3,"mat-error",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](60,"mat-form-field",14),i["\u0275\u0275elementStart"](61,"mat-label",15),i["\u0275\u0275text"](62,"admin.minimum-special-characters"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](63,"input",24),i["\u0275\u0275template"](64,pe,3,3,"mat-error",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](65,"mat-form-field",14),i["\u0275\u0275elementStart"](66,"mat-label",15),i["\u0275\u0275text"](67,"admin.password-expiration-period-days"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](68,"input",25),i["\u0275\u0275template"](69,me,3,3,"mat-error",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](70,"mat-form-field",14),i["\u0275\u0275elementStart"](71,"mat-label",15),i["\u0275\u0275text"](72,"admin.password-reuse-frequency-days"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](73,"input",26),i["\u0275\u0275template"](74,fe,3,3,"mat-error",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](75,"div",27),i["\u0275\u0275elementStart"](76,"button",28),i["\u0275\u0275pipe"](77,"async"),i["\u0275\u0275text"](78),i["\u0275\u0275pipe"](79,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](9,18,t.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](11,20,t.isLoading$)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.securitySettingsFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](15,22,t.isLoading$)),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("expanded",!0),i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("ngIf",t.securitySettingsFormGroup.get("maxFailedLoginAttempts").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("expanded",!0),i["\u0275\u0275advance"](10),i["\u0275\u0275property"]("ngIf",t.securitySettingsFormGroup.get("passwordPolicy.minimumLength").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.securitySettingsFormGroup.get("passwordPolicy.minimumLength").hasError("min")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.securitySettingsFormGroup.get("passwordPolicy.minimumLength").hasError("max")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.securitySettingsFormGroup.get("passwordPolicy.minimumUppercaseLetters").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.securitySettingsFormGroup.get("passwordPolicy.minimumLowercaseLetters").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.securitySettingsFormGroup.get("passwordPolicy.minimumDigits").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.securitySettingsFormGroup.get("passwordPolicy.minimumSpecialCharacters").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.securitySettingsFormGroup.get("passwordPolicy.passwordExpirationPeriodDays").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.securitySettingsFormGroup.get("passwordPolicy.passwordReuseFrequencyDays").hasError("min")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](77,24,t.isLoading$)||t.securitySettingsFormGroup.invalid||!t.securitySettingsFormGroup.dirty),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](79,26,"action.save")," "))},directives:[b.MatCard,b.MatCardTitle,v.f,g.TranslateDirective,v.b,y.a,r.NgIf,b.MatCardContent,s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,ne.MatAccordion,ne.MatExpansionPanel,ne.MatExpansionPanelHeader,ne.MatExpansionPanelTitle,x.MatFormField,x.MatLabel,S.MatInput,s.NumberValueAccessor,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,s.FormGroupName,s.RequiredValidator,v.e,E.MatButton,I.MatProgressBar,x.MatError],pipes:[r.AsyncPipe,g.TranslatePipe],styles:["[_nghost-%COMP%]   .mat-accordion-container[_ngcontent-%COMP%]{margin-bottom:16px}","[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{margin:8px}@media screen and (min-width:960px) and (max-width:1279px){[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{width:80%}}@media screen and (min-width:1280px){[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{width:60%}}"]}),t}(l.a);0,void 0;var ge=n("PGJw"),be=n("FtGj"),ve=n("wtyh"),ye=n("cp0P"),xe=n("wSoN"),Se=n("Qu3c"),we=n("NFeN"),Ce=n("wZkO"),Ee=n("j8W/"),Ie=n("znSr"),Te=n("A5z7"),Me=n("0Miz");function De(e,t){1&e&&i["\u0275\u0275element"](0,"mat-progress-bar",15)}function ke(e,t){1&e&&i["\u0275\u0275element"](0,"div",16)}function Ae(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",56),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"uppercase"),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=i["\u0275\u0275nextContext"](5);i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,i["\u0275\u0275pipeBind1"](3,4,r.domainSchemaTranslations.get(n)))," ")}}function Fe(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.error-verification-url")," "))}function Pe(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.domain-name-unique")," "))}function _e(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-form-field",48),i["\u0275\u0275element"](1,"mat-label"),i["\u0275\u0275element"](2,"input",51),i["\u0275\u0275element"](3,"tb-copy-button",52),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]().$implicit,r=i["\u0275\u0275nextContext"](4);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("value",r.redirectURIMixed(n)),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("tooltipText",i["\u0275\u0275pipeBind1"](4,3,"admin.oauth2.copy-redirect-uri")),i["\u0275\u0275property"]("copyText",r.redirectURIMixed(n))}}function Ne(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"section",39),i["\u0275\u0275elementStart"](1,"div",40),i["\u0275\u0275elementStart"](2,"div",41),i["\u0275\u0275elementStart"](3,"div",42),i["\u0275\u0275elementStart"](4,"div",43),i["\u0275\u0275elementStart"](5,"mat-form-field",44),i["\u0275\u0275elementStart"](6,"mat-label",45),i["\u0275\u0275text"](7,"admin.oauth2.protocol"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"mat-select",46),i["\u0275\u0275template"](9,Ae,4,6,"mat-option",47),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"mat-form-field",48),i["\u0275\u0275elementStart"](11,"mat-label",45),i["\u0275\u0275text"](12,"admin.domain-name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](13,"input",49),i["\u0275\u0275template"](14,Fe,3,3,"mat-error",34),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](15,Pe,3,3,"mat-error",34),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"div",50),i["\u0275\u0275elementStart"](17,"mat-form-field",48),i["\u0275\u0275elementStart"](18,"mat-label",45),i["\u0275\u0275text"](19,"admin.oauth2.redirect-uri-template"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](20,"input",51),i["\u0275\u0275element"](21,"tb-copy-button",52),i["\u0275\u0275pipe"](22,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](23,_e,5,5,"mat-form-field",53),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](24,"div",54),i["\u0275\u0275elementStart"](25,"button",55),i["\u0275\u0275listener"]("click",function(e){i["\u0275\u0275restoreView"](n);var r=t.index,a=i["\u0275\u0275nextContext"](2).$implicit;return i["\u0275\u0275nextContext"](2).removeDomainInfo(e,a,r)}),i["\u0275\u0275pipe"](26,"translate"),i["\u0275\u0275elementStart"](27,"mat-icon"),i["\u0275\u0275text"](28,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,a=t.index,o=i["\u0275\u0275nextContext"](2).$implicit,l=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("formGroupName",a),i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("ngForOf",l.protocols),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",r.get("name").hasError("pattern")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",r.hasError("unique")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("value",l.redirectURI(r)),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("tooltipText",i["\u0275\u0275pipeBind1"](22,10,"admin.oauth2.copy-redirect-uri")),i["\u0275\u0275property"]("copyText",l.redirectURI(r)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf","MIXED"===r.get("scheme").value),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](26,12,"admin.oauth2.delete-domain")),i["\u0275\u0275property"]("disabled",l.domainInfos(o).controls.length<2)}}function Le(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"span",57),i["\u0275\u0275text"](2,"admin.oauth2.no-mobile-apps"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}function Oe(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.mobile-package-unique")," "))}function Be(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.invalid-mobile-app-secret")," "))}function Re(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"section",58),i["\u0275\u0275elementStart"](1,"div",40),i["\u0275\u0275elementStart"](2,"div",41),i["\u0275\u0275elementStart"](3,"div",50),i["\u0275\u0275elementStart"](4,"mat-form-field",59),i["\u0275\u0275elementStart"](5,"mat-label",45),i["\u0275\u0275text"](6,"admin.oauth2.mobile-package"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](7,"input",60),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementStart"](9,"mat-hint",45),i["\u0275\u0275text"](10,"admin.oauth2.mobile-package-hint"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](11,Oe,3,3,"mat-error",34),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"div",61),i["\u0275\u0275elementStart"](13,"mat-form-field",48),i["\u0275\u0275elementStart"](14,"mat-label",45),i["\u0275\u0275text"](15,"admin.oauth2.mobile-app-secret"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](16,"textarea",62),i["\u0275\u0275element"](17,"tb-copy-button",52),i["\u0275\u0275pipe"](18,"translate"),i["\u0275\u0275template"](19,Be,3,3,"mat-error",34),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](20,"div",54),i["\u0275\u0275elementStart"](21,"button",63),i["\u0275\u0275listener"]("click",function(e){i["\u0275\u0275restoreView"](n);var r=t.index,a=i["\u0275\u0275nextContext"](2).$implicit;return i["\u0275\u0275nextContext"](2).removeMobileInfo(e,a,r)}),i["\u0275\u0275pipe"](22,"translate"),i["\u0275\u0275elementStart"](23,"mat-icon"),i["\u0275\u0275text"](24,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,a=t.index;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("formGroupName",a),i["\u0275\u0275advance"](6),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](8,7,"admin.oauth2.mobile-package-placeholder")),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",r.hasError("unique")),i["\u0275\u0275advance"](6),i["\u0275\u0275propertyInterpolate"]("tooltipText",i["\u0275\u0275pipeBind1"](18,9,"admin.oauth2.copy-mobile-app-secret")),i["\u0275\u0275property"]("copyText",r.get("appSecret").value),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",r.get("appSecret").invalid),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](22,11,"admin.oauth2.delete-mobile-app"))}}function je(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",56),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n," ")}}function Ve(e,t){if(1&e&&i["\u0275\u0275element"](0,"div",76),2&e){var n=i["\u0275\u0275nextContext"](2).$implicit,r=i["\u0275\u0275nextContext"](4);i["\u0275\u0275property"]("tb-help",r.getHelpLink(n))}}function ze(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",56),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=i["\u0275\u0275nextContext"](6);i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,r.platformTypeTranslations.get(n))," ")}}function Ge(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.client-id-required")," "))}function We(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.client-secret-required")," "))}function qe(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",100),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"](3).$implicit;return i["\u0275\u0275nextContext"](4).toggleEditMode(e,"accessTokenUri")}),i["\u0275\u0275elementStart"](1,"mat-icon",101),i["\u0275\u0275text"](2,"create"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function He(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.access-token-uri-required")," "))}function Ue(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.uri-pattern-error")," "))}function $e(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",100),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"](3).$implicit;return i["\u0275\u0275nextContext"](4).toggleEditMode(e,"authorizationUri")}),i["\u0275\u0275elementStart"](1,"mat-icon",101),i["\u0275\u0275text"](2,"create"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function Ke(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.authorization-uri-required")," "))}function Ye(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.uri-pattern-error")," "))}function Je(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",102),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"](3).$implicit;return i["\u0275\u0275nextContext"](4).toggleEditMode(e,"jwkSetUri")}),i["\u0275\u0275elementStart"](1,"mat-icon",101),i["\u0275\u0275text"](2,"create"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function Xe(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.uri-pattern-error")," "))}function Qe(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",100),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"](3).$implicit;return i["\u0275\u0275nextContext"](4).toggleEditMode(e,"userInfoUri")}),i["\u0275\u0275elementStart"](1,"mat-icon",101),i["\u0275\u0275text"](2,"create"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function Ze(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.uri-pattern-error")," "))}function et(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",56),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"uppercase"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,n)," ")}}function tt(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.login-button-label-required")," "))}function nt(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",66),i["\u0275\u0275elementStart"](1,"mat-form-field",59),i["\u0275\u0275elementStart"](2,"mat-label",45),i["\u0275\u0275text"](3,"admin.oauth2.login-button-label"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"input",103),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275template"](6,tt,3,3,"mat-error",34),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"mat-form-field",48),i["\u0275\u0275elementStart"](8,"mat-label",45),i["\u0275\u0275text"](9,"admin.oauth2.login-button-icon"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](10,"input",104),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](3).$implicit;i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](5,2,"admin.oauth2.login-button-label-placeholder")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",n.get("loginButtonLabel").hasError("required"))}}function it(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-chip",105),i["\u0275\u0275listener"]("removed",function(){i["\u0275\u0275restoreView"](n);var e=t.index,r=i["\u0275\u0275nextContext"](3).$implicit;return i["\u0275\u0275nextContext"](4).removeScope(e,r)}),i["\u0275\u0275text"](1),i["\u0275\u0275elementStart"](2,"mat-icon",106),i["\u0275\u0275text"](3,"cancel"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",r," ")}}function rt(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.scope-required")," "))}function at(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.user-name-attribute-name-required")," "))}function ot(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",56),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n," ")}}function lt(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.email-attribute-key-required")," "))}function st(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-form-field",117),i["\u0275\u0275elementStart"](1,"mat-label",45),i["\u0275\u0275text"](2,"admin.oauth2.email-attribute-key"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](3,"input",118),i["\u0275\u0275template"](4,lt,3,3,"mat-error",34),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](4).$implicit;i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",n.get("mapperConfig.basic.emailAttributeKey").hasError("required"))}}function dt(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",56),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n," ")}}function ct(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.tenant-name-pattern-required")," "))}function ut(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"section",107),i["\u0275\u0275template"](1,st,5,1,"mat-form-field",108),i["\u0275\u0275elementStart"](2,"div",66),i["\u0275\u0275elementStart"](3,"mat-form-field",48),i["\u0275\u0275elementStart"](4,"mat-label",45),i["\u0275\u0275text"](5,"admin.oauth2.first-name-attribute-key"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](6,"input",109),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"mat-form-field",48),i["\u0275\u0275elementStart"](8,"mat-label",45),i["\u0275\u0275text"](9,"admin.oauth2.last-name-attribute-key"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](10,"input",110),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"div",66),i["\u0275\u0275elementStart"](12,"mat-form-field",48),i["\u0275\u0275elementStart"](13,"mat-label",45),i["\u0275\u0275text"](14,"admin.oauth2.tenant-name-strategy"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"mat-select",111),i["\u0275\u0275template"](16,dt,2,2,"mat-option",47),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"mat-form-field",112),i["\u0275\u0275elementStart"](18,"mat-label",45),i["\u0275\u0275text"](19,"admin.oauth2.tenant-name-pattern"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](20,"input",113),i["\u0275\u0275template"](21,ct,3,3,"mat-error",34),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"mat-form-field",48),i["\u0275\u0275elementStart"](23,"mat-label",45),i["\u0275\u0275text"](24,"admin.oauth2.customer-name-pattern"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](25,"input",114),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](26,"div",66),i["\u0275\u0275elementStart"](27,"mat-form-field",48),i["\u0275\u0275elementStart"](28,"mat-label",45),i["\u0275\u0275text"](29,"admin.oauth2.default-dashboard-name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](30,"input",115),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](31,"mat-checkbox",116),i["\u0275\u0275text"](32),i["\u0275\u0275pipe"](33,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](3).$implicit,r=i["\u0275\u0275nextContext"](4);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.get("mapperConfig.type").value!==r.mapperConfigType.GITHUB),i["\u0275\u0275advance"](15),i["\u0275\u0275property"]("ngForOf",r.tenantNameStrategies),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow","CUSTOM"===n.get("mapperConfig.basic.tenantNameStrategy").value),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("required","CUSTOM"===n.get("mapperConfig.basic.tenantNameStrategy").value),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.get("mapperConfig.basic.tenantNamePattern").hasError("required")),i["\u0275\u0275advance"](11),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](33,6,"admin.oauth2.always-fullscreen")," ")}}function pt(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.url-required")," "))}function mt(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.url-pattern")," "))}function ft(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"section",119),i["\u0275\u0275elementStart"](1,"mat-form-field",117),i["\u0275\u0275elementStart"](2,"mat-label",45),i["\u0275\u0275text"](3,"admin.oauth2.url"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"input",120),i["\u0275\u0275template"](5,pt,3,3,"mat-error",34),i["\u0275\u0275template"](6,mt,3,3,"mat-error",34),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"div",66),i["\u0275\u0275elementStart"](8,"mat-form-field",48),i["\u0275\u0275elementStart"](9,"mat-label",45),i["\u0275\u0275text"](10,"common.username"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](11,"input",121),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"mat-form-field",48),i["\u0275\u0275elementStart"](13,"mat-label",45),i["\u0275\u0275text"](14,"common.password"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](15,"input",122),i["\u0275\u0275element"](16,"tb-toggle-password",123),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](3).$implicit;i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",n.get("mapperConfig.custom.url").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.get("mapperConfig.custom.url").hasError("pattern"))}}function ht(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-tab-group",27),i["\u0275\u0275elementStart"](1,"mat-tab",28),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementStart"](3,"div",77),i["\u0275\u0275elementStart"](4,"mat-form-field",48),i["\u0275\u0275elementStart"](5,"mat-label",45),i["\u0275\u0275text"](6,"admin.oauth2.access-token-uri"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](7,"input",78),i["\u0275\u0275template"](8,qe,3,0,"button",79),i["\u0275\u0275template"](9,He,3,3,"mat-error",34),i["\u0275\u0275template"](10,Ue,3,3,"mat-error",34),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"mat-form-field",48),i["\u0275\u0275elementStart"](12,"mat-label",45),i["\u0275\u0275text"](13,"admin.oauth2.authorization-uri"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](14,"input",80),i["\u0275\u0275template"](15,$e,3,0,"button",79),i["\u0275\u0275template"](16,Ke,3,3,"mat-error",34),i["\u0275\u0275template"](17,Ye,3,3,"mat-error",34),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](18,"div",66),i["\u0275\u0275elementStart"](19,"mat-form-field",81),i["\u0275\u0275elementStart"](20,"mat-label",45),i["\u0275\u0275text"](21,"admin.oauth2.jwk-set-uri"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](22,"input",82),i["\u0275\u0275template"](23,Je,3,0,"button",83),i["\u0275\u0275template"](24,Xe,3,3,"mat-error",34),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](25,"mat-form-field",48),i["\u0275\u0275elementStart"](26,"mat-label",45),i["\u0275\u0275text"](27,"admin.oauth2.user-info-uri"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](28,"input",84),i["\u0275\u0275template"](29,Qe,3,0,"button",79),i["\u0275\u0275template"](30,Ze,3,3,"mat-error",34),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](31,"mat-form-field",48),i["\u0275\u0275elementStart"](32,"mat-label",45),i["\u0275\u0275text"](33,"admin.oauth2.client-authentication-method"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](34,"mat-select",85),i["\u0275\u0275template"](35,et,3,4,"mat-option",47),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](36,nt,11,4,"div",86),i["\u0275\u0275elementStart"](37,"section",87),i["\u0275\u0275elementStart"](38,"div",88),i["\u0275\u0275elementStart"](39,"mat-checkbox",89),i["\u0275\u0275text"](40),i["\u0275\u0275pipe"](41,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](42,"mat-checkbox",90),i["\u0275\u0275text"](43),i["\u0275\u0275pipe"](44,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](45,"mat-form-field",48),i["\u0275\u0275elementStart"](46,"mat-label",45),i["\u0275\u0275text"](47,"admin.oauth2.scope"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](48,"mat-chip-list",null,91),i["\u0275\u0275template"](50,it,4,1,"mat-chip",92),i["\u0275\u0275elementStart"](51,"input",93),i["\u0275\u0275listener"]("matChipInputTokenEnd",function(e){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"](2).$implicit;return i["\u0275\u0275nextContext"](4).addScope(e,t)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](52,rt,3,3,"mat-error",34),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](53,"tb-error",94),i["\u0275\u0275pipe"](54,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](55,"mat-tab",28),i["\u0275\u0275pipe"](56,"translate"),i["\u0275\u0275elementStart"](57,"mat-form-field",95),i["\u0275\u0275elementStart"](58,"mat-label",45),i["\u0275\u0275text"](59,"admin.oauth2.user-name-attribute-name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](60,"input",96),i["\u0275\u0275template"](61,at,3,3,"mat-error",34),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](62,"section",87),i["\u0275\u0275elementStart"](63,"mat-form-field",48),i["\u0275\u0275elementStart"](64,"mat-label",45),i["\u0275\u0275text"](65,"admin.oauth2.type"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](66,"mat-select",97),i["\u0275\u0275template"](67,ot,2,2,"mat-option",47),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](68,ut,34,8,"section",98),i["\u0275\u0275template"](69,ft,17,2,"section",99),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275reference"](49),a=i["\u0275\u0275nextContext"](2).$implicit,o=i["\u0275\u0275nextContext"](4);i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,26,"admin.oauth2.general")),i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("ngIf",!o.isCustomProvider(a)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.get("accessTokenUri").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.get("accessTokenUri").hasError("pattern")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",!o.isCustomProvider(a)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.get("authorizationUri").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.get("authorizationUri").hasError("pattern")),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",!o.isCustomProvider(a)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.get("jwkSetUri").hasError("pattern")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",!o.isCustomProvider(a)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.get("userInfoUri").hasError("pattern")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngForOf",o.clientAuthenticationMethods),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",o.isCustomProvider(a)),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](41,28,"admin.oauth2.allow-user-creation")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](44,30,"admin.oauth2.activate-user")," "),i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("ngForOf",a.get("scope").value)("ngForTrackBy",o.trackByParams),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("matChipInputFor",r)("matChipInputSeparatorKeyCodes",o.separatorKeysCodes),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.get("scope").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("error",a.get("scope").hasError("required")?i["\u0275\u0275pipeBind1"](54,32,"admin.oauth2.scope-required"):""),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](56,34,"admin.oauth2.mapper")),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",a.get("userNameAttributeName").hasError("required")),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngForOf",o.mapperConfigTypes),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.get("mapperConfig.type").value!==o.mapperConfigType.CUSTOM),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.get("mapperConfig.type").value===o.mapperConfigType.CUSTOM)}}function gt(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"section",22),i["\u0275\u0275elementStart"](1,"div",66),i["\u0275\u0275elementStart"](2,"section",67),i["\u0275\u0275elementStart"](3,"mat-form-field",48),i["\u0275\u0275elementStart"](4,"mat-label",45),i["\u0275\u0275text"](5,"admin.oauth2.login-provider"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"mat-select",68),i["\u0275\u0275template"](7,je,2,2,"mat-option",47),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,Ve,1,1,"div",69),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"mat-form-field",70),i["\u0275\u0275elementStart"](10,"mat-label",45),i["\u0275\u0275text"](11,"admin.oauth2.allowed-platforms"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"mat-select",71),i["\u0275\u0275pipe"](13,"translate"),i["\u0275\u0275template"](14,ze,3,4,"mat-option",47),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"div",66),i["\u0275\u0275elementStart"](16,"mat-form-field",48),i["\u0275\u0275elementStart"](17,"mat-label",45),i["\u0275\u0275text"](18,"admin.oauth2.client-id"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](19,"input",72),i["\u0275\u0275template"](20,Ge,3,3,"mat-error",34),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](21,"mat-form-field",48),i["\u0275\u0275elementStart"](22,"mat-label",45),i["\u0275\u0275text"](23,"admin.oauth2.client-secret"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](24,"input",73),i["\u0275\u0275template"](25,We,3,3,"mat-error",34),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](26,"mat-expansion-panel",74),i["\u0275\u0275elementStart"](27,"mat-expansion-panel-header",75),i["\u0275\u0275elementStart"](28,"mat-panel-description",24),i["\u0275\u0275text"](29),i["\u0275\u0275pipe"](30,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](31,ht,70,36,"ng-template",26),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](),r=n.index,a=n.$implicit,o=i["\u0275\u0275nextContext"](4);i["\u0275\u0275property"]("formGroupName",r),i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("ngForOf",o.templateProvider),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!o.isCustomProvider(a)),i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](13,11,"admin.oauth2.all-platforms")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",o.platformTypes),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",a.get("clientId").hasError("required")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",a.get("clientSecret").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",o.isCustomProvider(a))("expanded",o.isCustomProvider(a)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxHide",o.isCustomProvider(a)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](30,13,"admin.oauth2.custom-setting")," ")}}function bt(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-expansion-panel",64),i["\u0275\u0275elementStart"](1,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](2,"mat-panel-title",23),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mat-panel-description",24),i["\u0275\u0275elementStart"](5,"button",65),i["\u0275\u0275listener"]("click",function(e){i["\u0275\u0275restoreView"](n);var r=t.index,a=i["\u0275\u0275nextContext"](2).$implicit;return i["\u0275\u0275nextContext"](2).deleteRegistration(e,a,r)}),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementStart"](7,"mat-icon"),i["\u0275\u0275text"](8,"delete"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](9,gt,32,15,"ng-template",26),i["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,a=i["\u0275\u0275nextContext"](2).$implicit,o=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",o.getProviderName(r)," "),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](6,3,"admin.oauth2.delete-provider")),i["\u0275\u0275property"]("disabled",o.clientRegistrations(a).controls.length<2)}}function vt(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-tab-group",27),i["\u0275\u0275elementStart"](1,"mat-tab",28),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementContainerStart"](3,29),i["\u0275\u0275element"](4,"div",7),i["\u0275\u0275template"](5,Ne,29,14,"section",30),i["\u0275\u0275elementStart"](6,"div",31),i["\u0275\u0275elementStart"](7,"button",32),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"](2).addDomainInfo(e)}),i["\u0275\u0275pipe"](8,"async"),i["\u0275\u0275text"](9),i["\u0275\u0275pipe"](10,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"mat-tab",28),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementContainerStart"](13,33),i["\u0275\u0275element"](14,"div",7),i["\u0275\u0275template"](15,Le,3,0,"div",34),i["\u0275\u0275template"](16,Re,25,13,"section",35),i["\u0275\u0275elementStart"](17,"div",31),i["\u0275\u0275elementStart"](18,"button",32),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"](2).addMobileInfo(e)}),i["\u0275\u0275pipe"](19,"async"),i["\u0275\u0275text"](20),i["\u0275\u0275pipe"](21,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"div",36),i["\u0275\u0275text"](23,"admin.oauth2.providers"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerStart"](24,37),i["\u0275\u0275elementStart"](25,"div",19),i["\u0275\u0275template"](26,bt,10,5,"mat-expansion-panel",38),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementStart"](27,"div",12),i["\u0275\u0275elementStart"](28,"button",32),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"](2).addRegistration(e)}),i["\u0275\u0275pipe"](29,"async"),i["\u0275\u0275text"](30),i["\u0275\u0275pipe"](31,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"]().$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,15,"admin.oauth2.domains")),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngForOf",a.domainInfos(r).controls)("ngForTrackBy",a.trackByParams),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](8,17,a.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](10,19,"admin.oauth2.add-domain")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](12,21,"admin.oauth2.mobile-apps")),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",0===a.mobileInfos(r).length),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",a.mobileInfos(r).controls)("ngForTrackBy",a.trackByParams),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](19,23,a.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](21,25,"admin.oauth2.add-mobile-app")," "),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngForOf",a.clientRegistrations(r).controls)("ngForTrackBy",a.trackByParams),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](29,27,a.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](31,29,"admin.oauth2.add-provider")," ")}}function yt(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"mat-expansion-panel",22),i["\u0275\u0275elementStart"](2,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](3,"mat-panel-title",23),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"mat-panel-description",24),i["\u0275\u0275elementStart"](6,"button",25),i["\u0275\u0275listener"]("click",function(e){i["\u0275\u0275restoreView"](n);var r=t.index;return i["\u0275\u0275nextContext"](2).deleteOAuth2ParamsInfo(e,r)}),i["\u0275\u0275pipe"](7,"translate"),i["\u0275\u0275elementStart"](8,"mat-icon"),i["\u0275\u0275text"](9,"delete"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](10,vt,32,31,"ng-template",26),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()}if(2&e){var r=t.$implicit,a=t.index,o=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("formGroupName",a),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",o.domainListTittle(r)," "),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](7,3,"action.delete"))}}function xt(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"section",17),i["\u0275\u0275elementContainerStart"](1,18),i["\u0275\u0275elementStart"](2,"div",19),i["\u0275\u0275elementStart"](3,"mat-accordion",20),i["\u0275\u0275template"](4,yt,11,5,"ng-container",21),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngForOf",n.oauth2ParamsInfos.controls)("ngForTrackBy",n.trackByParams)}}function St(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",124),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().addOAuth2ParamsInfo()}),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275elementStart"](2,"mat-icon"),i["\u0275\u0275text"](3,"add"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"span",45),i["\u0275\u0275text"](5,"action.add"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](1,1,r.isLoading$))}}var wt=function(e){function t(t,n,i,r,a,o,l){var s=e.call(this,t)||this;return s.store=t,s.route=n,s.oauth2Service=i,s.fb=r,s.dialogService=a,s.translate=o,s.window=l,s.URL_REGEXP=/^[A-Za-z][A-Za-z\d.+-]*:\/*(?:\w+(?::\w+)?@)?[^\s/]+(?::\d+)?(?:\/[\w#!:.,?+=&%@\-/]*)?$/,s.DOMAIN_AND_PORT_REGEXP=/^(?:\w+(?::\w+)?@)?[^\s/]+(?::\d+)?$/,s.subscriptions=[],s.templates=new Map,s.defaultProvider={additionalInfo:{providerName:"Custom"},clientAuthenticationMethod:ge.a.POST,userNameAttributeName:"email",mapperConfig:{allowUserCreation:!0,activateUser:!1,type:ge.c.BASIC,basic:{emailAttributeKey:"email",tenantNameStrategy:ge.e.DOMAIN,alwaysFullScreen:!1}}},s.separatorKeysCodes=[be.ENTER,be.COMMA],s.clientAuthenticationMethods=Object.keys(ge.a),s.mapperConfigType=ge.c,s.mapperConfigTypes=Object.keys(ge.c),s.tenantNameStrategies=Object.keys(ge.e),s.protocols=Object.values(ge.b),s.domainSchemaTranslations=ge.f,s.platformTypes=Object.values(ge.d),s.platformTypeTranslations=ge.g,s.templateProvider=["Custom"],s.loginProcessingUrl=s.route.snapshot.data.loginProcessingUrl,s}return Object(o.d)(t,e),Object.defineProperty(t.prototype,"oauth2ParamsInfos",{get:function(){return this.oauth2SettingsForm.get("oauth2ParamsInfos")},enumerable:!1,configurable:!0}),t.validateScope=function(e){var t=e.value;return t&&t.length?null:{required:!0}},t.prototype.ngOnInit=function(){var e=this;this.buildOAuth2SettingsForm(),Object(ye.a)([this.oauth2Service.getOAuth2Template(),this.oauth2Service.getOAuth2Settings()]).subscribe(function(t){var n=t[0],i=t[1];e.initTemplates(n),e.oauth2Info=i,e.initOAuth2Settings(e.oauth2Info)})},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.subscriptions.forEach(function(e){e.unsubscribe()})},t.prototype.initTemplates=function(e){var t,n=this;e.map(function(e){delete e.additionalInfo,n.templates.set(e.name,e)}),(t=this.templateProvider).push.apply(t,Array.from(this.templates.keys())),this.templateProvider.sort()},t.prototype.formBasicGroup=function(e){var t;t=(null==e?void 0:e.tenantNamePattern)?e.tenantNamePattern:{value:null,disabled:!0};var n=this.fb.group({emailAttributeKey:[(null==e?void 0:e.emailAttributeKey)?e.emailAttributeKey:"email",s.Validators.required],firstNameAttributeKey:[(null==e?void 0:e.firstNameAttributeKey)?e.firstNameAttributeKey:""],lastNameAttributeKey:[(null==e?void 0:e.lastNameAttributeKey)?e.lastNameAttributeKey:""],tenantNameStrategy:[(null==e?void 0:e.tenantNameStrategy)?e.tenantNameStrategy:ge.e.DOMAIN],tenantNamePattern:[t,s.Validators.required],customerNamePattern:[(null==e?void 0:e.customerNamePattern)?e.customerNamePattern:null],defaultDashboardName:[(null==e?void 0:e.defaultDashboardName)?e.defaultDashboardName:null],alwaysFullScreen:[!!Object(p.o)(null==e?void 0:e.alwaysFullScreen)&&e.alwaysFullScreen]});return this.subscriptions.push(n.get("tenantNameStrategy").valueChanges.subscribe(function(e){"CUSTOM"===e?n.get("tenantNamePattern").enable():n.get("tenantNamePattern").disable()})),n},t.prototype.formCustomGroup=function(e){return this.fb.group({url:[(null==e?void 0:e.url)?e.url:null,[s.Validators.required,s.Validators.pattern(this.URL_REGEXP)]],username:[(null==e?void 0:e.username)?e.username:null],password:[(null==e?void 0:e.password)?e.password:null]})},t.prototype.buildOAuth2SettingsForm=function(){this.oauth2SettingsForm=this.fb.group({oauth2ParamsInfos:this.fb.array([]),enabled:[!1]})},t.prototype.initOAuth2Settings=function(e){var t=this;e&&(this.oauth2SettingsForm.patchValue({enabled:e.enabled},{emitEvent:!1}),e.oauth2ParamsInfos.forEach(function(e){t.oauth2ParamsInfos.push(t.buildOAuth2ParamsInfoForm(e))}))},t.prototype.uniqueDomainValidator=function(e){var t;if(null===(t=e.parent)||void 0===t?void 0:t.value){var n=e.value.name,i=e.parent.getRawValue().filter(function(e){return e.name===n}).map(function(e){return e.scheme});if(i.length>1&&i.indexOf(ge.b.MIXED)>-1||new Set(i).size!==i.length)return{unique:!0}}return null},t.prototype.uniquePkgNameValidator=function(e){var t;if(null===(t=e.parent)||void 0===t?void 0:t.value){var n=e.value.pkgName;if(e.parent.getRawValue().filter(function(e){return e.pkgName===n}).length>1)return{unique:!0}}return null},t.prototype.domainListTittle=function(e){var t=e.get("domainInfos").value;if(t.length){var n=new Set;return t.forEach(function(e){n.add(e.name)}),Array.from(n).join(", ")}return this.translate.instant("admin.oauth2.new-domain")},t.prototype.buildOAuth2ParamsInfoForm=function(e){var t=this,n=this.fb.group({domainInfos:this.fb.array([],s.Validators.required),mobileInfos:this.fb.array([]),clientRegistrations:this.fb.array([],s.Validators.required)});return e?(e.domainInfos.forEach(function(e){t.domainInfos(n).push(t.buildDomainInfoForm(e))}),e.mobileInfos.forEach(function(e){t.mobileInfos(n).push(t.buildMobileInfoForm(e))}),e.clientRegistrations.forEach(function(e){t.clientRegistrations(n).push(t.buildRegistrationForm(e))})):(this.clientRegistrations(n).push(this.buildRegistrationForm()),this.domainInfos(n).push(this.buildDomainInfoForm())),n},t.prototype.buildDomainInfoForm=function(e){return this.fb.group({name:[e?e.name:this.window.location.hostname,[s.Validators.required,s.Validators.pattern(this.DOMAIN_AND_PORT_REGEXP)]],scheme:[(null==e?void 0:e.scheme)?e.scheme:ge.b.HTTPS,s.Validators.required]},{validators:this.uniqueDomainValidator})},t.prototype.buildMobileInfoForm=function(e){return this.fb.group({pkgName:[null==e?void 0:e.pkgName,[s.Validators.required]],appSecret:[null==e?void 0:e.appSecret,[s.Validators.required,s.Validators.minLength(16),s.Validators.maxLength(2048),s.Validators.pattern(/^[A-Za-z0-9]+$/)]]},{validators:this.uniquePkgNameValidator})},t.prototype.buildRegistrationForm=function(e){var n,i,r,a=this,o=null;Object(p.o)(null==e?void 0:e.additionalInfo)&&(o=e.additionalInfo,-1===this.templateProvider.indexOf(o.providerName)&&(o.providerName="Custom"));var l="Custom";this.templateProvider.indexOf("Google")&&(l="Google");var d=this.fb.group({additionalInfo:this.fb.group({providerName:[(null==o?void 0:o.providerName)?null==o?void 0:o.providerName:l,s.Validators.required]}),platforms:[(null==e?void 0:e.platforms)?e.platforms:[]],loginButtonLabel:[(null==e?void 0:e.loginButtonLabel)?e.loginButtonLabel:null,s.Validators.required],loginButtonIcon:[(null==e?void 0:e.loginButtonIcon)?e.loginButtonIcon:null],clientId:[(null==e?void 0:e.clientId)?e.clientId:"",s.Validators.required],clientSecret:[(null==e?void 0:e.clientSecret)?e.clientSecret:"",s.Validators.required],accessTokenUri:[(null==e?void 0:e.accessTokenUri)?e.accessTokenUri:"",[s.Validators.required,s.Validators.pattern(this.URL_REGEXP)]],authorizationUri:[(null==e?void 0:e.authorizationUri)?e.authorizationUri:"",[s.Validators.required,s.Validators.pattern(this.URL_REGEXP)]],scope:this.fb.array((null==e?void 0:e.scope)?e.scope:[],t.validateScope),jwkSetUri:[(null==e?void 0:e.jwkSetUri)?e.jwkSetUri:"",s.Validators.pattern(this.URL_REGEXP)],userInfoUri:[(null==e?void 0:e.userInfoUri)?e.userInfoUri:"",[s.Validators.pattern(this.URL_REGEXP)]],clientAuthenticationMethod:[(null==e?void 0:e.clientAuthenticationMethod)?e.clientAuthenticationMethod:ge.a.POST,s.Validators.required],userNameAttributeName:[(null==e?void 0:e.userNameAttributeName)?e.userNameAttributeName:"email",s.Validators.required],mapperConfig:this.fb.group({allowUserCreation:[!Object(p.o)(null===(n=null==e?void 0:e.mapperConfig)||void 0===n?void 0:n.allowUserCreation)||e.mapperConfig.allowUserCreation],activateUser:[!!Object(p.o)(null===(i=null==e?void 0:e.mapperConfig)||void 0===i?void 0:i.activateUser)&&e.mapperConfig.activateUser],type:[(null===(r=null==e?void 0:e.mapperConfig)||void 0===r?void 0:r.type)?e.mapperConfig.type:ge.c.BASIC,s.Validators.required]})});return e?this.changeMapperConfigType(d,e.mapperConfig.type,e.mapperConfig):(this.changeMapperConfigType(d,ge.c.BASIC),this.setProviderDefaultValue(l,d)),this.subscriptions.push(d.get("mapperConfig.type").valueChanges.subscribe(function(e){a.changeMapperConfigType(d,e)})),this.subscriptions.push(d.get("additionalInfo.providerName").valueChanges.subscribe(function(e){d.get("scope").clear(),a.setProviderDefaultValue(e,d)})),d},t.prototype.setProviderDefaultValue=function(e,t){var n=this;if("Custom"===e)t.reset(this.defaultProvider,{emitEvent:!1}),t.get("accessTokenUri").enable(),t.get("authorizationUri").enable(),t.get("jwkSetUri").enable(),t.get("userInfoUri").enable();else{var i=this.templates.get(e);i.clientId="",i.clientSecret="",i.scope.forEach(function(){t.get("scope").push(n.fb.control(""))}),t.get("accessTokenUri").disable(),t.get("authorizationUri").disable(),t.get("jwkSetUri").disable(),t.get("userInfoUri").disable(),t.patchValue(i)}},t.prototype.changeMapperConfigType=function(e,t,n){var i=e.get("mapperConfig");t===ge.c.CUSTOM?(i.removeControl("basic"),i.addControl("custom",this.formCustomGroup(null==n?void 0:n.custom))):(i.removeControl("custom"),i.get("basic")||i.addControl("basic",this.formBasicGroup(null==n?void 0:n.basic)),t===ge.c.GITHUB?(i.get("basic.emailAttributeKey").disable(),i.get("basic.emailAttributeKey").patchValue(null,{emitEvent:!1})):i.get("basic.emailAttributeKey").enable())},t.prototype.save=function(){var e=this,t=this.oauth2SettingsForm.getRawValue();this.oauth2Service.saveOAuth2Settings(t).subscribe(function(t){e.oauth2Info=t,e.oauth2SettingsForm.patchValue(e.oauth2SettingsForm,{emitEvent:!1}),e.oauth2SettingsForm.markAsUntouched(),e.oauth2SettingsForm.markAsPristine()})},t.prototype.confirmForm=function(){return this.oauth2SettingsForm},t.prototype.addScope=function(e,t){var n=e.input,i=e.value,r=t.get("scope");""!==i.trim()&&(r.push(this.fb.control(i.trim())),r.markAsDirty()),n&&(n.value="")},t.prototype.removeScope=function(e,t){var n=t.get("scope");n.removeAt(e),n.markAsTouched(),n.markAsDirty()},t.prototype.addOAuth2ParamsInfo=function(){this.oauth2ParamsInfos.push(this.buildOAuth2ParamsInfoForm())},t.prototype.deleteOAuth2ParamsInfo=function(e,t){var n=this;e&&(e.stopPropagation(),e.preventDefault());var i=this.domainListTittle(this.oauth2ParamsInfos.at(t));this.dialogService.confirm(this.translate.instant("admin.oauth2.delete-domain-title",{domainName:i||""}),this.translate.instant("admin.oauth2.delete-domain-text"),null,this.translate.instant("action.delete")).subscribe(function(e){e&&(n.oauth2ParamsInfos.removeAt(t),n.oauth2ParamsInfos.markAsTouched(),n.oauth2ParamsInfos.markAsDirty())})},t.prototype.clientRegistrations=function(e){return e.get("clientRegistrations")},t.prototype.domainInfos=function(e){return e.get("domainInfos")},t.prototype.mobileInfos=function(e){return e.get("mobileInfos")},t.prototype.addRegistration=function(e){this.clientRegistrations(e).push(this.buildRegistrationForm())},t.prototype.deleteRegistration=function(e,t,n){var i=this;e&&(e.stopPropagation(),e.preventDefault());var r=this.clientRegistrations(t).at(n).get("additionalInfo.providerName").value;this.dialogService.confirm(this.translate.instant("admin.oauth2.delete-registration-title",{name:r||""}),this.translate.instant("admin.oauth2.delete-registration-text"),null,this.translate.instant("action.delete")).subscribe(function(e){e&&(i.clientRegistrations(t).removeAt(n),i.clientRegistrations(t).markAsTouched(),i.clientRegistrations(t).markAsDirty())})},t.prototype.toggleEditMode=function(e,t){e.get(t).disabled?e.get(t).enable():e.get(t).disable()},t.prototype.getProviderName=function(e){return e.get("additionalInfo.providerName").value},t.prototype.isCustomProvider=function(e){return"Custom"===this.getProviderName(e)},t.prototype.getHelpLink=function(e){var t=e.get("additionalInfo.providerName").value;return null===t||"Custom"===t?"":this.templates.get(t).helpLink},t.prototype.addDomainInfo=function(e){this.domainInfos(e).push(this.buildDomainInfoForm({name:"",scheme:ge.b.HTTPS}))},t.prototype.removeDomainInfo=function(e,t,n){e&&(e.stopPropagation(),e.preventDefault()),this.domainInfos(t).removeAt(n),this.domainInfos(t).markAsTouched(),this.domainInfos(t).markAsDirty()},t.prototype.addMobileInfo=function(e){this.mobileInfos(e).push(this.buildMobileInfoForm({pkgName:"",appSecret:Object(p.K)(24)}))},t.prototype.removeMobileInfo=function(e,t,n){e&&(e.stopPropagation(),e.preventDefault()),this.mobileInfos(t).removeAt(n),this.mobileInfos(t).markAsTouched(),this.mobileInfos(t).markAsDirty()},t.prototype.redirectURI=function(e,t){var n=e.value;if(""!==n.name){return(Object(p.n)(t)?t.toLowerCase():n.scheme===ge.b.MIXED?ge.b.HTTPS.toLowerCase():n.scheme.toLowerCase())+"://"+n.name+this.loginProcessingUrl}return""},t.prototype.redirectURIMixed=function(e){return this.redirectURI(e,ge.b.HTTP)},t.prototype.trackByParams=function(e){return e},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](a.ActivatedRoute),i["\u0275\u0275directiveInject"](xe.a),i["\u0275\u0275directiveInject"](s.FormBuilder),i["\u0275\u0275directiveInject"](Y.a),i["\u0275\u0275directiveInject"](g.TranslateService),i["\u0275\u0275directiveInject"](ve.b))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-oauth2-settings"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:26,vars:21,consts:[[1,"settings-card"],["fxLayout","row"],["translate","",1,"mat-headline"],["fxFlex",""],["tb-help","oauth2Settings"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],[2,"padding-top","16px"],[3,"formGroup","ngSubmit"],[3,"disabled"],["formControlName","enabled"],["style","margin-top: 1em;",4,"ngIf"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","8px"],["type","button","mat-raised-button","","color","accent",3,"disabled","click",4,"ngIf"],["mat-button","","mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"],[2,"margin-top","1em"],["formArrayName","oauth2ParamsInfos"],[1,"container"],["multi",""],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"formGroupName"],["fxLayoutAlign","start center"],["fxLayoutAlign","end center"],["mat-icon-button","","type","button","matTooltipPosition","above",3,"matTooltip","click"],["matExpansionPanelContent",""],["dynamicHeight",""],[3,"label"],["formArrayName","domainInfos"],["class","domains-list",4,"ngFor","ngForOf","ngForTrackBy"],["fxLayout","row","fxLayoutAlign","end center",2,"margin-bottom","1.25em"],["mat-button","","mat-raised-button","","color","accent","type","button",3,"disabled","click"],["formArrayName","mobileInfos"],[4,"ngIf"],["class","apps-list",4,"ngFor","ngForOf","ngForTrackBy"],["translate","",1,"mat-h3"],["formArrayName","clientRegistrations"],["class","registration-card mat-elevation-z0",4,"ngFor","ngForOf","ngForTrackBy"],[1,"domains-list"],["fxLayout","row","fxLayoutGap","8px",3,"formGroupName"],["fxFlex","","fxLayout","row","fxLayout.xs","column","fxLayoutGap","8px"],["fxLayout","column","fxFlex.sm","60","fxFlex.gt-sm","50"],["fxLayout","row","fxLayout.xs","column","fxLayout.md","column","fxLayoutGap","8px","fxLayoutGap.md","0px"],["fxFlex","30","fxFlex.md","","fxFlex.xs","",1,"mat-block"],["translate",""],["formControlName","scheme"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","",1,"mat-block"],["matInput","","formControlName","name","required",""],["fxFlex","","fxLayout","column"],["matInput","","readonly","",3,"value"],["matSuffix","","color","accent","tooltipPosition","above","mdiIcon","mdi:clipboard-arrow-left",3,"copyText","tooltipText"],["fxFlex","","class","mat-block",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center start"],["type","button","mat-icon-button","","color","accent","matTooltipPosition","above",3,"disabled","matTooltip","click"],[3,"value"],["fxLayoutAlign","center center","translate","",1,"tb-prompt"],[1,"apps-list"],["fxFlex","","floatLabel","always",1,"mat-block"],["matInput","","formControlName","pkgName","required","",3,"placeholder"],["fxFlex","","fxLayout","row"],["matInput","","formControlName","appSecret","rows","1","required",""],["type","button","mat-icon-button","","color","accent","matTooltipPosition","above",3,"matTooltip","click"],[1,"registration-card","mat-elevation-z0"],["mat-icon-button","","type","button","matTooltipPosition","above",3,"disabled","matTooltip","click"],["fxLayout","row","fxLayout.xs","column","fxLayoutGap.gt-xs","8px"],["fxFlex","","formGroupName","additionalInfo","fxLayout","row"],["formControlName","providerName"],[3,"tb-help",4,"ngIf"],["floatLabel","always","fxFlex","",1,"mat-block"],["formControlName","platforms","multiple","",3,"placeholder"],["matInput","","formControlName","clientId","required",""],["matInput","","formControlName","clientSecret","required",""],[1,"mat-elevation-z0","custom-settings",3,"disabled","expanded"],[3,"fxHide"],[3,"tb-help"],["fxLayout","row","fxLayout.xs","column","fxLayoutGap.gt-xs","8px",2,"margin-top","16px"],["matInput","","formControlName","accessTokenUri","required",""],["mat-icon-button","","matSuffix","","type","button",3,"click",4,"ngIf"],["matInput","","formControlName","authorizationUri","required",""],["fxFlex","","appearance","legacy",1,"mat-block"],["matInput","","formControlName","jwkSetUri"],["mat-icon-button","","matSuffix","","type","button","aria-label","Clear",3,"click",4,"ngIf"],["matInput","","formControlName","userInfoUri"],["formControlName","clientAuthenticationMethod"],["fxLayout","row","fxLayout.xs","column","fxLayoutGap.gt-xs","8px",4,"ngIf"],["formGroupName","mapperConfig"],["fxLayout","column","fxLayoutGap","8px",2,"margin-bottom","8px"],["formControlName","allowUserCreation"],["formControlName","activateUser"],["scopeList",""],["removable","",3,"removed",4,"ngFor","ngForOf","ngForTrackBy"],["matChipInputAddOnBlur","",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],[2,"display","block","margin-top","-24px",3,"error"],[1,"mat-block",2,"margin-top","16px"],["matInput","","formControlName","userNameAttributeName","required",""],["formControlName","type"],["formGroupName","basic",4,"ngIf"],["formGroupName","custom",4,"ngIf"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"material-icons"],["mat-icon-button","","matSuffix","","type","button","aria-label","Clear",3,"click"],["matInput","","formControlName","loginButtonLabel","required","",3,"placeholder"],["matInput","","formControlName","loginButtonIcon"],["removable","",3,"removed"],["matChipRemove",""],["formGroupName","basic"],["class","mat-block",4,"ngIf"],["matInput","","formControlName","firstNameAttributeKey"],["matInput","","formControlName","lastNameAttributeKey"],["formControlName","tenantNameStrategy"],["fxFlex","",1,"mat-block",3,"fxShow"],["matInput","","formControlName","tenantNamePattern",3,"required"],["matInput","","formControlName","customerNamePattern"],["matInput","","formControlName","defaultDashboardName"],["fxFlex","","formControlName","alwaysFullScreen",1,"checkbox-row"],[1,"mat-block"],["matInput","","formControlName","emailAttributeKey","required",""],["formGroupName","custom"],["matInput","","formControlName","url","required",""],["matInput","","formControlName","username","autocomplete","new-username"],["matInput","","type","password","formControlName","password","autocomplete","new-password"],["matSuffix",""],["type","button","mat-raised-button","","color","accent",3,"disabled","click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mat-card",0),i["\u0275\u0275elementStart"](2,"mat-card-title"),i["\u0275\u0275elementStart"](3,"div",1),i["\u0275\u0275elementStart"](4,"span",2),i["\u0275\u0275text"](5,"admin.oauth2.oauth2"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](6,"span",3),i["\u0275\u0275element"](7,"div",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,De,1,0,"mat-progress-bar",5),i["\u0275\u0275pipe"](9,"async"),i["\u0275\u0275template"](10,ke,1,0,"div",6),i["\u0275\u0275pipe"](11,"async"),i["\u0275\u0275elementStart"](12,"mat-card-content",7),i["\u0275\u0275elementStart"](13,"form",8),i["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),i["\u0275\u0275elementStart"](14,"fieldset",9),i["\u0275\u0275pipe"](15,"async"),i["\u0275\u0275elementStart"](16,"mat-checkbox",10),i["\u0275\u0275text"](17),i["\u0275\u0275pipe"](18,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](19,xt,5,2,"section",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](20,"div",12),i["\u0275\u0275template"](21,St,6,3,"button",13),i["\u0275\u0275elementStart"](22,"button",14),i["\u0275\u0275pipe"](23,"async"),i["\u0275\u0275text"](24),i["\u0275\u0275pipe"](25,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](9,9,t.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](11,11,t.isLoading$)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.oauth2SettingsForm),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](15,13,t.isLoading$)),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](18,15,"admin.oauth2.enable")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.oauth2SettingsForm.get("enabled").value),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.oauth2SettingsForm.get("enabled").value),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](23,17,t.isLoading$)||t.oauth2SettingsForm.invalid||!t.oauth2SettingsForm.dirty),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](25,19,"action.save")," "))},directives:[b.MatCard,b.MatCardTitle,v.f,g.TranslateDirective,v.b,y.a,r.NgIf,b.MatCardContent,s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,D.MatCheckbox,s.NgControlStatus,s.FormControlName,v.e,v.g,E.MatButton,I.MatProgressBar,s.FormArrayName,ne.MatAccordion,r.NgForOf,ne.MatExpansionPanel,s.FormGroupName,ne.MatExpansionPanelHeader,ne.MatExpansionPanelTitle,ne.MatExpansionPanelDescription,Se.MatTooltip,we.MatIcon,ne.MatExpansionPanelContent,Ce.MatTabGroup,Ce.MatTab,x.MatFormField,x.MatLabel,w.MatSelect,S.MatInput,s.DefaultValueAccessor,s.RequiredValidator,Ee.a,x.MatSuffix,T.MatOption,x.MatError,x.MatHint,Ie.d,Te.MatChipList,Te.MatChipInput,Me.a,Te.MatChip,Te.MatChipRemove,M.a],pipes:[r.AsyncPipe,g.TranslatePipe,r.UpperCasePipe],styles:["[_nghost-%COMP%]   .checkbox-row[_ngcontent-%COMP%]{margin-top:1em}[_nghost-%COMP%]   .registration-card[_ngcontent-%COMP%]{margin-bottom:.5em;border:1px solid rgba(0,0,0,.2)}[_nghost-%COMP%]   .registration-card[_ngcontent-%COMP%]   .custom-settings[_ngcontent-%COMP%]{font-size:16px}[_nghost-%COMP%]   .registration-card[_ngcontent-%COMP%]   .custom-settings[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 2px}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{margin-bottom:1em}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .tb-highlight[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .tb-hint[_ngcontent-%COMP%]{padding-bottom:0}[_nghost-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{height:48px}[_nghost-%COMP%]     .registration-card .custom-settings .mat-expansion-panel-body{padding:0 2px 1em}[_nghost-%COMP%]     .registration-card .custom-settings .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:18px}[_nghost-%COMP%]     .apps-list, [_nghost-%COMP%]     .domains-list{margin-bottom:1.5em}[_nghost-%COMP%]     .apps-list .mat-form-field-suffix .mat-icon-button .mat-icon, [_nghost-%COMP%]     .domains-list .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:24px}","[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{margin:8px}@media screen and (min-width:960px) and (max-width:1279px){[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{width:80%}}@media screen and (min-width:1280px){[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{width:60%}}"]}),t}(l.a);0,void 0;var Ct=n("0IaG"),Et=n("gmuX"),It=n("/t3+"),Tt=n("rezs");function Mt(e,t){1&e&&i["\u0275\u0275element"](0,"mat-progress-bar",18)}function Dt(e,t){1&e&&i["\u0275\u0275element"](0,"div",19)}function kt(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.number-to-required")," "))}function At(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.phone-number-pattern")," "))}function Ft(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.sms-message-required")," "))}function Pt(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.sms-message-max-length")," "))}var _t=function(e){function t(t,n,i,r,a,o,l){var s=e.call(this,t,n,o)||this;return s.store=t,s.router=n,s.data=i,s.adminService=r,s.translate=a,s.dialogRef=o,s.fb=l,s.phoneNumberPattern=d.c,s.smsProviderConfiguration=s.data.smsProviderConfiguration,s}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){this.sendTestSmsFormGroup=this.fb.group({numberTo:[null,[s.Validators.required,s.Validators.pattern(d.c)]],message:[null,[s.Validators.required,s.Validators.maxLength(1600)]]})},t.prototype.close=function(){this.dialogRef.close()},t.prototype.sendTestSms=function(){var e=this,t={providerConfiguration:this.smsProviderConfiguration,numberTo:this.sendTestSmsFormGroup.value.numberTo,message:this.sendTestSmsFormGroup.value.message};this.adminService.sendTestSms(t).subscribe(function(){e.store.dispatch(new u.b({message:e.translate.instant("admin.test-sms-sent"),target:"sendTestSmsDialogContent",verticalPosition:"bottom",horizontalPosition:"left",type:"success"}))})},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](a.Router),i["\u0275\u0275directiveInject"](Ct.MAT_DIALOG_DATA),i["\u0275\u0275directiveInject"](c.a),i["\u0275\u0275directiveInject"](g.TranslateService),i["\u0275\u0275directiveInject"](Ct.MatDialogRef),i["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-send-test-sms-dialog"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:38,vars:31,consts:[[2,"min-width","500px","position","relative",3,"formGroup"],["color","accent"],["translate",""],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content","","tb-toast","","toastTarget","sendTestSmsDialogContent"],[3,"disabled"],[1,"mat-block"],["type","tel","required","","matInput","","formControlName","numberTo",3,"pattern"],[4,"ngIf"],[3,"innerHTML"],["required","","matInput","","rows","3","formControlName","message",3,"maxLength"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","button",3,"disabled","click"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"form",0),i["\u0275\u0275elementStart"](1,"mat-toolbar",1),i["\u0275\u0275elementStart"](2,"h2",2),i["\u0275\u0275text"](3,"admin.send-test-sms"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"span",3),i["\u0275\u0275elementStart"](5,"button",4),i["\u0275\u0275listener"]("click",function(){return t.close()}),i["\u0275\u0275elementStart"](6,"mat-icon",5),i["\u0275\u0275text"](7,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,Mt,1,0,"mat-progress-bar",6),i["\u0275\u0275pipe"](9,"async"),i["\u0275\u0275template"](10,Dt,1,0,"div",7),i["\u0275\u0275pipe"](11,"async"),i["\u0275\u0275elementStart"](12,"div",8),i["\u0275\u0275elementStart"](13,"fieldset",9),i["\u0275\u0275pipe"](14,"async"),i["\u0275\u0275elementStart"](15,"mat-form-field",10),i["\u0275\u0275elementStart"](16,"mat-label",2),i["\u0275\u0275text"](17,"admin.number-to"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](18,"input",11),i["\u0275\u0275template"](19,kt,3,3,"mat-error",12),i["\u0275\u0275template"](20,At,3,3,"mat-error",12),i["\u0275\u0275element"](21,"mat-hint",13),i["\u0275\u0275pipe"](22,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](23,"mat-form-field",10),i["\u0275\u0275elementStart"](24,"mat-label",2),i["\u0275\u0275text"](25,"admin.sms-message"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](26,"textarea",14),i["\u0275\u0275template"](27,Ft,3,3,"mat-error",12),i["\u0275\u0275template"](28,Pt,3,3,"mat-error",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](29,"div",15),i["\u0275\u0275elementStart"](30,"button",16),i["\u0275\u0275listener"]("click",function(){return t.close()}),i["\u0275\u0275pipe"](31,"async"),i["\u0275\u0275text"](32),i["\u0275\u0275pipe"](33,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](34,"button",17),i["\u0275\u0275listener"]("click",function(){return t.sendTestSms()}),i["\u0275\u0275pipe"](35,"async"),i["\u0275\u0275text"](36),i["\u0275\u0275pipe"](37,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.sendTestSmsFormGroup),i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](9,15,t.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](11,17,t.isLoading$)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](14,19,t.isLoading$)),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("pattern",t.phoneNumberPattern),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.sendTestSmsFormGroup.get("numberTo").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.sendTestSmsFormGroup.get("numberTo").hasError("pattern")),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("innerHTML",i["\u0275\u0275pipeBind1"](22,21,"admin.phone-number-hint"),i["\u0275\u0275sanitizeHtml"]),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("maxLength",1600),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.sendTestSmsFormGroup.get("message").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.sendTestSmsFormGroup.get("message").hasError("maxLength")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](31,23,t.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](33,25,"action.close")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](35,27,t.isLoading$)||t.sendTestSmsFormGroup.invalid),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](37,29,"admin.send-test-sms")," "))},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,It.MatToolbar,g.TranslateDirective,v.b,E.MatButton,we.MatIcon,r.NgIf,Ct.MatDialogContent,Tt.b,x.MatFormField,x.MatLabel,S.MatInput,s.DefaultValueAccessor,s.RequiredValidator,s.NgControlStatus,s.FormControlName,s.PatternValidator,x.MatHint,Ct.MatDialogActions,v.e,I.MatProgressBar,x.MatError],pipes:[r.AsyncPipe,g.TranslatePipe],encapsulation:2}),t}(Et.a);0,void 0;var Nt=n("PWf0");function Lt(e,t){1&e&&i["\u0275\u0275element"](0,"mat-progress-bar",14)}function Ot(e,t){1&e&&i["\u0275\u0275element"](0,"div",15)}var Bt=function(e){function t(t,n,i,r,a){var o=e.call(this,t)||this;return o.store=t,o.router=n,o.adminService=i,o.dialog=r,o.fb=a,o}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this.buildSmsProviderForm(),this.adminService.getAdminSettings("sms",{ignoreErrors:!0}).subscribe(function(t){e.adminSettings=t,e.smsProvider.reset({configuration:e.adminSettings.jsonValue})},function(){e.adminSettings={key:"sms",jsonValue:null},e.smsProvider.reset({configuration:e.adminSettings.jsonValue})})},t.prototype.buildSmsProviderForm=function(){this.smsProvider=this.fb.group({configuration:[null,[s.Validators.required]]}),this.registerDisableOnLoadFormControl(this.smsProvider.get("configuration"))},t.prototype.sendTestSms=function(){this.dialog.open(_t,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{smsProviderConfiguration:this.smsProvider.value.configuration}})},t.prototype.save=function(){var e=this;this.adminSettings.jsonValue=this.smsProvider.value.configuration,this.adminService.saveAdminSettings(this.adminSettings).subscribe(function(t){e.adminSettings=t,e.smsProvider.reset({configuration:e.adminSettings.jsonValue})})},t.prototype.confirmForm=function(){return this.smsProvider},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](a.Router),i["\u0275\u0275directiveInject"](c.a),i["\u0275\u0275directiveInject"](Ct.MatDialog),i["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-sms-provider"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:26,vars:22,consts:[[1,"settings-card"],["fxLayout","row"],["translate","",1,"mat-headline"],["fxFlex",""],["tb-help","smsProviderSettings"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],[2,"padding-top","16px"],[3,"formGroup","ngSubmit"],[3,"disabled"],["required","","formControlName","configuration"],["fxLayout","row","fxLayoutAlign","end center","fxLayout.xs","column","fxLayoutAlign.xs","end","fxLayoutGap","16px"],["mat-raised-button","","type","button",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mat-card",0),i["\u0275\u0275elementStart"](2,"mat-card-title"),i["\u0275\u0275elementStart"](3,"div",1),i["\u0275\u0275elementStart"](4,"span",2),i["\u0275\u0275text"](5,"admin.sms-provider-settings"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](6,"span",3),i["\u0275\u0275element"](7,"div",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,Lt,1,0,"mat-progress-bar",5),i["\u0275\u0275pipe"](9,"async"),i["\u0275\u0275template"](10,Ot,1,0,"div",6),i["\u0275\u0275pipe"](11,"async"),i["\u0275\u0275elementStart"](12,"mat-card-content",7),i["\u0275\u0275elementStart"](13,"form",8),i["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),i["\u0275\u0275elementStart"](14,"fieldset",9),i["\u0275\u0275pipe"](15,"async"),i["\u0275\u0275element"](16,"tb-sms-provider-configuration",10),i["\u0275\u0275elementStart"](17,"div",11),i["\u0275\u0275elementStart"](18,"button",12),i["\u0275\u0275listener"]("click",function(){return t.sendTestSms()}),i["\u0275\u0275pipe"](19,"async"),i["\u0275\u0275text"](20),i["\u0275\u0275pipe"](21,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"button",13),i["\u0275\u0275pipe"](23,"async"),i["\u0275\u0275text"](24),i["\u0275\u0275pipe"](25,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](9,8,t.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](11,10,t.isLoading$)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.smsProvider),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](15,12,t.isLoading$)),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](19,14,t.isLoading$)||t.smsProvider.invalid),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](21,16,"admin.send-test-sms")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](23,18,t.isLoading$)||t.smsProvider.invalid||!t.smsProvider.dirty),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](25,20,"action.save")," "))},directives:[b.MatCard,b.MatCardTitle,v.f,g.TranslateDirective,v.b,y.a,r.NgIf,b.MatCardContent,s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,Nt.a,s.RequiredValidator,s.NgControlStatus,s.FormControlName,v.e,v.g,E.MatButton,I.MatProgressBar],pipes:[r.AsyncPipe,g.TranslatePipe],styles:["","[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{margin:8px}@media screen and (min-width:960px) and (max-width:1279px){[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{width:80%}}@media screen and (min-width:1280px){[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{width:60%}}"]}),t}(l.a);0,void 0;var Rt=n("YnEf"),jt=n("YjEJ"),Vt=n("XMqU");function zt(e,t){1&e&&i["\u0275\u0275element"](0,"mat-progress-bar",14)}function Gt(e,t){1&e&&i["\u0275\u0275element"](0,"div",15)}var Wt=function(e){function t(t,n,i,r){var a=e.call(this,t)||this;return a.store=t,a.router=n,a.dashboardService=i,a.fb=r,a}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this.homeSettings=this.fb.group({dashboardId:[null],hideDashboardToolbar:[!0]}),this.dashboardService.getTenantHomeDashboardInfo().subscribe(function(t){e.setHomeDashboardInfo(t)})},t.prototype.save=function(){var e=this,t=this.homeSettings.get("dashboardId").value,n={dashboardId:t?new jt.a(t):null,hideDashboardToolbar:this.homeSettings.get("hideDashboardToolbar").value};this.dashboardService.setTenantHomeDashboardInfo(n).subscribe(function(){e.setHomeDashboardInfo(n)})},t.prototype.confirmForm=function(){return this.homeSettings},t.prototype.setHomeDashboardInfo=function(e){var t;this.homeSettings.reset({dashboardId:null===(t=null==e?void 0:e.dashboardId)||void 0===t?void 0:t.id,hideDashboardToolbar:!Object(p.o)(null==e?void 0:e.hideDashboardToolbar)||(null==e?void 0:e.hideDashboardToolbar)})},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](a.Router),i["\u0275\u0275directiveInject"](Rt.a),i["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-home-settings"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:26,vars:24,consts:[[1,"settings-card"],["fxLayout","row"],["translate","",1,"mat-headline"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],[2,"padding-top","16px"],[3,"formGroup","ngSubmit"],[3,"disabled"],["fxFlex","","fxLayout","column",1,"tb-default-dashboard"],["fxFlex","","fxLayout","column","fxLayout.gt-sm","row"],["fxFlex","","formControlName","dashboardId",3,"placeholder","dashboardsScope","selectFirstDashboard"],["fxFlex","","formControlName","hideDashboardToolbar"],["fxLayout","row","fxLayoutAlign","end center",1,"layout-wrap",2,"width","100%"],["mat-button","","mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mat-card",0),i["\u0275\u0275elementStart"](2,"mat-card-title"),i["\u0275\u0275elementStart"](3,"div",1),i["\u0275\u0275elementStart"](4,"span",2),i["\u0275\u0275text"](5,"admin.home-settings"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,zt,1,0,"mat-progress-bar",3),i["\u0275\u0275pipe"](7,"async"),i["\u0275\u0275template"](8,Gt,1,0,"div",4),i["\u0275\u0275pipe"](9,"async"),i["\u0275\u0275elementStart"](10,"mat-card-content",5),i["\u0275\u0275elementStart"](11,"form",6),i["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),i["\u0275\u0275elementStart"](12,"fieldset",7),i["\u0275\u0275pipe"](13,"async"),i["\u0275\u0275elementStart"](14,"section",8),i["\u0275\u0275elementStart"](15,"section",9),i["\u0275\u0275element"](16,"tb-dashboard-autocomplete",10),i["\u0275\u0275pipe"](17,"translate"),i["\u0275\u0275elementStart"](18,"mat-checkbox",11),i["\u0275\u0275text"](19),i["\u0275\u0275pipe"](20,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](21,"div",12),i["\u0275\u0275elementStart"](22,"button",13),i["\u0275\u0275pipe"](23,"async"),i["\u0275\u0275text"](24),i["\u0275\u0275pipe"](25,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](7,10,t.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](9,12,t.isLoading$)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.homeSettings),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](13,14,t.isLoading$)),i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](17,16,"dashboard.home-dashboard")),i["\u0275\u0275property"]("dashboardsScope","tenant")("selectFirstDashboard",!1),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](20,18,"dashboard.home-dashboard-hide-toolbar")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](23,20,t.isLoading$)||t.homeSettings.invalid||!t.homeSettings.dirty),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](25,22,"action.save")," "))},directives:[b.MatCard,b.MatCardTitle,v.f,g.TranslateDirective,r.NgIf,b.MatCardContent,s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,v.b,Vt.a,s.NgControlStatus,s.FormControlName,D.MatCheckbox,v.e,E.MatButton,I.MatProgressBar],pipes:[r.AsyncPipe,g.TranslatePipe],styles:["@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-default-dashboard[_ngcontent-%COMP%]   tb-dashboard-autocomplete[_ngcontent-%COMP%]{padding-right:12px}}@media screen and (max-width:959px){[_nghost-%COMP%]   .tb-default-dashboard[_ngcontent-%COMP%]   tb-dashboard-autocomplete[_ngcontent-%COMP%]{padding-bottom:12px}}@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-default-dashboard[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-top:16px}}","[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{margin:8px}@media screen and (min-width:960px) and (max-width:1279px){[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{width:80%}}@media screen and (min-width:1280px){[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{width:60%}}"]}),t}(l.a);0,void 0;var qt=n("UaJx"),Ht=n("qxrw"),Ut=n("afHT"),$t=n("U3y+"),Kt=n("oKkZ"),Yt=n("Y8nr"),Jt=n("LRne"),Xt=n("lJxs"),Qt=n("JIr8"),Zt=n("5+tZ"),en=n("tk/3"),tn=function(){function e(e){this.http=e}return e.prototype.getResources=function(e,t){return this.http.get("/api/resource"+e.toQuery(),Object(Yt.b)(t))},e.prototype.getResource=function(e,t){return this.http.get("/api/resource/"+e,Object(Yt.b)(t))},e.prototype.downloadResource=function(e){return this.http.get("/api/resource/"+e+"/download",{responseType:"arraybuffer",observe:"response"}).pipe(Object(Xt.a)(function(e){var t=e.headers,n=t.get("x-filename"),i=t.get("content-type"),r=document.createElement("a");try{var a=new Blob([e.body],{type:i}),o=URL.createObjectURL(a);r.setAttribute("href",o),r.setAttribute("download",n);var l=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});return r.dispatchEvent(l),null}catch(s){throw s}}))},e.prototype.saveResources=function(e,t){var n=this,i=100;i=e.length>i?i:e.length;for(var r=[],a=0;a<i;a++)r.push(this.saveResource(e[a],t).pipe(Object(Qt.a)(function(){return Object(Jt.a)({})})));return Object(ye.a)(r).pipe(Object(Zt.b)(function(r){return e.splice(0,i),e.length?n.saveResources(e,t):Object(Jt.a)(r)}))},e.prototype.saveResource=function(e,t){return this.http.post("/api/resource",e,Object(Yt.b)(t))},e.prototype.deleteResource=function(e,t){return this.http.delete("/api/resource/"+e,Object(Yt.b)(t))},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](en.HttpClient))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();0,void 0;var nn=n("G8Aa"),rn=n("JX91"),an=n("Zy1z"),on=n("Dvla"),ln=n("XGqO");function sn(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",15),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",r.resourceTypesTranslationMap.get(n)," ")}}function dn(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"resource.title-required")," "))}function cn(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-form-field",9),i["\u0275\u0275elementStart"](1,"mat-label",5),i["\u0275\u0275text"](2,"resource.title"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](3,"input",16),i["\u0275\u0275template"](4,dn,3,3,"mat-error",17),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",n.entityForm.get("title").hasError("required"))}}function un(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"tb-file-input",18),i["\u0275\u0275listener"]("fileNameChanged",function(e){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"]();return null==t.entityForm?null:t.entityForm.get("fileName").patchValue(e)}),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275elementEnd"]()}if(2&e){var r,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("dropLabel",i["\u0275\u0275pipeBind1"](1,7,"resource.drop-file")),i["\u0275\u0275property"]("readAsBinary",!0)("allowedExtensions",a.getAllowedExtensions())("contentConvertFunction",a.convertToBase64File)("accept",a.getAcceptType())("multipleFile",a.entityForm.get("resourceType").value===a.resourceType.LWM2M_MODEL)("existingFileName",null==(r=a.entityForm.get("fileName"))?null:r.value)}}function pn(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",19),i["\u0275\u0275elementStart"](1,"mat-form-field",20),i["\u0275\u0275elementStart"](2,"mat-label",5),i["\u0275\u0275text"](3,"resource.file-name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"input",21),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}var mn=function(e){function t(t,n,i,r,a,o){var l=e.call(this,t,a,i,r,o)||this;return l.store=t,l.translate=n,l.entityValue=i,l.entitiesTableConfigValue=r,l.fb=a,l.cd=o,l.resourceType=Ut.a,l.resourceTypes=Object.values(l.resourceType),l.resourceTypesTranslationMap=Ut.d,l.destroy$=new m.b,l}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.entityForm.get("resourceType").valueChanges.pipe(Object(rn.a)(Ut.a.LWM2M_MODEL),Object(an.a)(),Object(f.a)(this.destroy$)).subscribe(function(e){var n=e[0],i=e[1];n===t.resourceType.LWM2M_MODEL&&(t.entityForm.get("title").setValidators(s.Validators.required),t.entityForm.get("title").updateValueAndValidity({emitEvent:!1})),i===t.resourceType.LWM2M_MODEL&&(t.entityForm.get("title").clearValidators(),t.entityForm.get("title").updateValueAndValidity({emitEvent:!1})),t.entityForm.patchValue({data:null,fileName:null},{emitEvent:!1})})},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.destroy$.next(),this.destroy$.complete()},t.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},t.prototype.buildForm=function(e){var t=this.fb.group({title:[e?e.title:"",[]],resourceType:[{value:(null==e?void 0:e.resourceType)?e.resourceType:Ut.a.LWM2M_MODEL,disabled:!this.isAdd},[s.Validators.required]],fileName:[e?e.fileName:null,[s.Validators.required]]});return this.isAdd&&t.addControl("data",this.fb.control(null,s.Validators.required)),t},t.prototype.updateForm=function(e){this.isEdit&&(this.entityForm.get("resourceType").disable({emitEvent:!1}),this.entityForm.get("fileName").disable({emitEvent:!1})),this.entityForm.patchValue({resourceType:e.resourceType,fileName:e.fileName,title:e.title})},t.prototype.getAllowedExtensions=function(){try{return Ut.b.get(this.entityForm.get("resourceType").value)}catch(e){return""}},t.prototype.getAcceptType=function(){try{return Ut.c.get(this.entityForm.get("resourceType").value)}catch(e){return"*/*"}},t.prototype.convertToBase64File=function(e){return window.btoa(e)},t.prototype.onResourceIdCopied=function(){this.store.dispatch(new u.b({message:this.translate.instant("resource.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](g.TranslateService),i["\u0275\u0275directiveInject"]("entity"),i["\u0275\u0275directiveInject"]("entitiesTableConfig"),i["\u0275\u0275directiveInject"](s.FormBuilder),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-resources-library"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:26,vars:24,consts:[["fxLayout.xs","column",1,"tb-details-buttons"],["mat-raised-button","","color","accent","fxFlex.xs","",3,"disabled","fxShow","click"],["fxLayout","row","fxLayout.xs","column"],["mat-raised-button","","ngxClipboard","",3,"cbContent","fxShow","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"],["translate",""],["fxLayout","column",1,"mat-padding"],[3,"formGroup"],[3,"disabled"],[1,"mat-block"],["formControlName","resourceType","required",""],[3,"value",4,"ngFor","ngForOf"],["class","mat-block",4,"ngIf"],["formControlName","data","required","",3,"readAsBinary","allowedExtensions","contentConvertFunction","accept","multipleFile","dropLabel","existingFileName","fileNameChanged",4,"ngIf"],["fxLayout","row","fxLayoutGap.gt-md","8px","fxLayoutGap.sm","8px","fxLayout.xs","column","fxLayout.md","column",4,"ngIf"],[3,"value"],["matInput","","formControlName","title","required",""],[4,"ngIf"],["formControlName","data","required","",3,"readAsBinary","allowedExtensions","contentConvertFunction","accept","multipleFile","dropLabel","existingFileName","fileNameChanged"],["fxLayout","row","fxLayoutGap.gt-md","8px","fxLayoutGap.sm","8px","fxLayout.xs","column","fxLayout.md","column"],["fxFlex",""],["matInput","","formControlName","fileName","type","text"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"downloadResource")}),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"delete")}),i["\u0275\u0275pipe"](6,"async"),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"div",2),i["\u0275\u0275elementStart"](10,"button",3),i["\u0275\u0275listener"]("cbOnSuccess",function(){return t.onResourceIdCopied()}),i["\u0275\u0275element"](11,"mat-icon",4),i["\u0275\u0275elementStart"](12,"span",5),i["\u0275\u0275text"](13,"resource.copyId"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"div",6),i["\u0275\u0275elementStart"](15,"form",7),i["\u0275\u0275elementStart"](16,"fieldset",8),i["\u0275\u0275pipe"](17,"async"),i["\u0275\u0275elementStart"](18,"mat-form-field",9),i["\u0275\u0275elementStart"](19,"mat-label",5),i["\u0275\u0275text"](20,"resource.resource-type"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](21,"mat-select",10),i["\u0275\u0275template"](22,sn,2,2,"mat-option",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](23,cn,5,1,"mat-form-field",12),i["\u0275\u0275template"](24,un,2,9,"tb-file-input",13),i["\u0275\u0275template"](25,pn,5,0,"div",14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](2,14,t.isLoading$))("fxShow",!t.isEdit),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](4,16,"resource.download")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](6,18,t.isLoading$))("fxShow",!t.hideDelete()&&!t.isEdit),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](8,20,"resource.delete")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("cbContent",null==t.entity||null==t.entity.id?null:t.entity.id.id)("fxShow",!t.isEdit),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("formGroup",t.entityForm),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](17,22,t.isLoading$)||!t.isEdit),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngForOf",t.resourceTypes),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entityForm.get("resourceType").value!==t.resourceType.LWM2M_MODEL||!t.isAdd),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.isAdd),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.isAdd))},directives:[v.f,E.MatButton,v.b,Ie.d,on.a,we.MatIcon,g.TranslateDirective,s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,x.MatFormField,x.MatLabel,w.MatSelect,s.NgControlStatus,s.FormControlName,s.RequiredValidator,r.NgForOf,r.NgIf,T.MatOption,S.MatInput,s.DefaultValueAccessor,x.MatError,ln.a,v.g],pipes:[r.AsyncPipe,g.TranslatePipe],encapsulation:2}),t}(nn.a);0,void 0;var fn=function(){function e(e,t,n,i){var r=this;this.store=e,this.resourceService=t,this.translate=n,this.datePipe=i,this.config=new Ht.e,this.resourceTypesTranslationMap=Ut.d,this.config.entityType=$t.b.TB_RESOURCE,this.config.entityComponent=mn,this.config.entityTranslations=$t.d.get($t.b.TB_RESOURCE),this.config.entityResources=$t.c.get($t.b.TB_RESOURCE),this.config.entityTitle=function(e){return e?e.title:""},this.config.columns.push(new Ht.b("createdTime","common.created-time",this.datePipe,"150px"),new Ht.d("title","resource.title","60%"),new Ht.d("resourceType","resource.resource-type","40%",function(e){return r.resourceTypesTranslationMap.get(e.resourceType)}),new Ht.d("tenantId","resource.system","60px",function(e){return Object(Ht.f)(e.tenantId.id===Kt.a)})),this.config.cellActionDescriptors.push({name:this.translate.instant("resource.download"),icon:"file_download",isEnabled:function(){return!0},onAction:function(e,t){return r.downloadResource(e,t)}}),this.config.deleteEntityTitle=function(e){return r.translate.instant("resource.delete-resource-title",{resourceTitle:e.title})},this.config.deleteEntityContent=function(){return r.translate.instant("resource.delete-resource-text")},this.config.deleteEntitiesTitle=function(e){return r.translate.instant("resource.delete-resources-title",{count:e})},this.config.deleteEntitiesContent=function(){return r.translate.instant("resource.delete-resources-text")},this.config.entitiesFetchFunction=function(e){return r.resourceService.getResources(e)},this.config.loadEntity=function(e){return r.resourceService.getResource(e.id)},this.config.saveEntity=function(e){return r.saveResource(e)},this.config.deleteEntity=function(e){return r.resourceService.deleteResource(e.id)},this.config.onEntityAction=function(e){return r.onResourceAction(e)}}return e.prototype.saveResource=function(e){if(Array.isArray(e.data)){var t=[];return e.data.forEach(function(n,i){t.push({resourceType:e.resourceType,data:n,fileName:e.fileName[i],title:e.title})}),this.resourceService.saveResources(t,{resendRequest:!0}).pipe(Object(Xt.a)(function(e){return e[0]}))}return this.resourceService.saveResource(e)},e.prototype.resolve=function(){var e=this;this.config.tableTitle=this.translate.instant("resource.resources-library");var t=Object($.b)(this.store);return this.config.deleteEnabled=function(n){return e.isResourceEditable(n,t.authority)},this.config.entitySelectionEnabled=function(n){return e.isResourceEditable(n,t.authority)},this.config.detailsReadonly=function(n){return!e.isResourceEditable(n,t.authority)},this.config},e.prototype.downloadResource=function(e,t){e&&e.stopPropagation(),this.resourceService.downloadResource(t.id.id).subscribe()},e.prototype.onResourceAction=function(e){switch(e.action){case"downloadResource":return this.downloadResource(e.event,e.entity),!0}return!1},e.prototype.isResourceEditable=function(e,t){return t===X.a.TENANT_ADMIN?e&&e.tenantId&&e.tenantId.id!==Kt.a:t===X.a.SYS_ADMIN},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](h.Store),i["\u0275\u0275inject"](tn),i["\u0275\u0275inject"](g.TranslateService),i["\u0275\u0275inject"](r.DatePipe))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0;var hn=function(){function e(e){this.oauth2Service=e}return e.prototype.resolve=function(){return this.oauth2Service.getLoginProcessingUrl()},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](xe.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0;var gn=[{path:"settings",data:{auth:[X.a.SYS_ADMIN,X.a.TENANT_ADMIN],breadcrumb:{label:"admin.system-settings",icon:"settings"}},children:[{path:"",data:{auth:[X.a.SYS_ADMIN,X.a.TENANT_ADMIN],redirectTo:{SYS_ADMIN:"/settings/general",TENANT_ADMIN:"/settings/home"}}},{path:"general",component:te,canDeactivate:[J],data:{auth:[X.a.SYS_ADMIN],title:"admin.general-settings",breadcrumb:{label:"admin.general",icon:"settings_applications"}}},{path:"outgoing-mail",component:U,canDeactivate:[J],data:{auth:[X.a.SYS_ADMIN],title:"admin.outgoing-mail-settings",breadcrumb:{label:"admin.outgoing-mail",icon:"mail"}}},{path:"sms-provider",component:Bt,canDeactivate:[J],data:{auth:[X.a.SYS_ADMIN],title:"admin.sms-provider-settings",breadcrumb:{label:"admin.sms-provider",icon:"sms"}}},{path:"security-settings",component:he,canDeactivate:[J],data:{auth:[X.a.SYS_ADMIN],title:"admin.security-settings",breadcrumb:{label:"admin.security-settings",icon:"security"}}},{path:"oauth2",component:wt,canDeactivate:[J],data:{auth:[X.a.SYS_ADMIN],title:"admin.oauth2.oauth2",breadcrumb:{label:"admin.oauth2.oauth2",icon:"security"}},resolve:{loginProcessingUrl:hn}},{path:"home",component:Wt,canDeactivate:[J],data:{auth:[X.a.TENANT_ADMIN],title:"admin.home-settings",breadcrumb:{label:"admin.home-settings",icon:"settings_applications"}}},{path:"resources-library",component:qt.a,data:{auth:[X.a.TENANT_ADMIN,X.a.SYS_ADMIN],title:"resource.resources-library",breadcrumb:{label:"resource.resources-library",icon:"folder"}},resolve:{entitiesTableConfig:fn}}]}],bn=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[hn,fn],imports:[[a.RouterModule.forChild(gn)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](bn,{imports:[a.RouterModule],exports:[a.RouterModule]})),0;var vn=n("PCNd"),yn=n("G4cQ"),xn=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[r.CommonModule,vn.a,yn.a,bn]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](xn,{declarations:[te,U,Bt,_t,he,wt,Wt,mn],imports:[r.CommonModule,vn.a,yn.a,bn]})),0;var Sn=n("/crD"),wn=n("he9t"),Cn=n("0MNC"),En=n("Xbih"),In=n("zkoq");function Tn(e,t){if(1&e&&i["\u0275\u0275element"](0,"tb-dashboard-page",2),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("embedded",!0)("dashboard",n.homeDashboard)("hideToolbar",n.homeDashboard.hideDashboardToolbar)}}function Mn(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-icon",14),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n.icon)}}function Dn(e,t){if(1&e&&i["\u0275\u0275element"](0,"mat-icon",15),2&e){var n=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275property"]("svgIcon",n.icon)}}function kn(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-grid-tile"),i["\u0275\u0275elementStart"](1,"a",10),i["\u0275\u0275template"](2,Mn,2,1,"mat-icon",11),i["\u0275\u0275template"](3,Dn,1,1,"mat-icon",12),i["\u0275\u0275elementStart"](4,"span",13),i["\u0275\u0275text"](5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("routerLink",n.path),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!n.isMdiIcon),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.isMdiIcon),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](n.name)}}function An(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-grid-tile",5),i["\u0275\u0275elementStart"](1,"mat-card",6),i["\u0275\u0275elementStart"](2,"mat-card-title"),i["\u0275\u0275elementStart"](3,"span",7),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"mat-card-content"),i["\u0275\u0275elementStart"](6,"mat-grid-list",8),i["\u0275\u0275template"](7,kn,6,4,"mat-grid-tile",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("colspan",r.sectionColspan(n)),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](n.name),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("cols",n.places.length),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",n.places)}}function Fn(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-grid-list",3),i["\u0275\u0275template"](1,An,8,4,"mat-grid-tile",4),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("cols",n.cols),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](2,2,n.homeSections$))}}var Pn=function(){function e(e,t,n,i){this.menuService=e,this.breakpointObserver=t,this.cd=n,this.route=i,this.homeSections$=this.menuService.homeSections(),this.cols=2,this.homeDashboard=this.route.snapshot.data.homeDashboard}return e.prototype.ngOnInit=function(){var e=this;this.homeDashboard||(this.updateColumnCount(),this.breakpointObserver.observe([wn.g.lg,wn.g["gt-lg"]]).subscribe(function(t){return e.updateColumnCount()}))},e.prototype.updateColumnCount=function(){this.cols=2,this.breakpointObserver.isMatched(wn.g.lg)&&(this.cols=3),this.breakpointObserver.isMatched(wn.g["gt-lg"])&&(this.cols=4),this.cd.detectChanges()},e.prototype.sectionColspan=function(e){if(this.breakpointObserver.isMatched(wn.g["gt-sm"])){var t=this.cols;return e&&e.places&&e.places.length<=t&&(t=e.places.length),t}return 2},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](Sn.a),i["\u0275\u0275directiveInject"](Cn.BreakpointObserver),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](a.ActivatedRoute))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-home-links"]],decls:3,vars:2,consts:[[3,"embedded","dashboard","hideToolbar",4,"ngIf","ngIfElse"],["homeLinks",""],[3,"embedded","dashboard","hideToolbar"],["rowHeight","280px",1,"tb-home-links",3,"cols"],[3,"colspan",4,"ngFor","ngForOf"],[3,"colspan"],[2,"width","100%"],["translate","",1,"mat-headline"],["rowHeight","170px",3,"cols"],[4,"ngFor","ngForOf"],["mat-raised-button","","color","accent",1,"tb-card-button",3,"routerLink"],["class","material-icons tb-mat-96",4,"ngIf"],["class","tb-mat-96",3,"svgIcon",4,"ngIf"],["translate",""],[1,"material-icons","tb-mat-96"],[1,"tb-mat-96",3,"svgIcon"]],template:function(e,t){if(1&e&&(i["\u0275\u0275template"](0,Tn,1,3,"tb-dashboard-page",0),i["\u0275\u0275template"](1,Fn,3,4,"ng-template",null,1,i["\u0275\u0275templateRefExtractor"])),2&e){var n=i["\u0275\u0275reference"](2);i["\u0275\u0275property"]("ngIf",t.homeDashboard)("ngIfElse",n)}},directives:[r.NgIf,En.a,In.MatGridList,r.NgForOf,In.MatGridTile,b.MatCard,b.MatCardTitle,g.TranslateDirective,b.MatCardContent,E.MatAnchor,a.RouterLinkWithHref,we.MatIcon],pipes:[r.AsyncPipe],styles:["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]     .tb-home-links .mat-headline{font-size:20px}@media screen and (min-width:1600px){[_nghost-%COMP%]     .tb-home-links .mat-headline{font-size:24px}}[_nghost-%COMP%]     .tb-home-links mat-card{padding:0;margin:8px}[_nghost-%COMP%]     .tb-home-links mat-card mat-card-title{margin:0;padding:24px 16px 16px}[_nghost-%COMP%]     .tb-home-links mat-card mat-card-title+mat-card-content{padding-top:0}[_nghost-%COMP%]     .tb-home-links mat-card mat-card-content{padding:16px}[_nghost-%COMP%]     .tb-home-links .tb-card-button{width:100%;height:100%;max-width:240px}[_nghost-%COMP%]     .tb-home-links .tb-card-button:hover{border-bottom:none}[_nghost-%COMP%]     .tb-home-links .tb-card-button:focus{border-bottom:none}[_nghost-%COMP%]     .tb-home-links .tb-card-button .mat-button-wrapper{width:100%;height:100%;display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]     .tb-home-links .tb-card-button .mat-button-wrapper mat-icon{margin:auto}[_nghost-%COMP%]     .tb-home-links .tb-card-button .mat-button-wrapper span{height:18px;min-height:36px;max-height:36px;padding:0 0 20px;margin:auto;font-size:18px;font-weight:400;line-height:18px;white-space:normal}[_nghost-%COMP%]     .tb-home-links .tb-card-button.mat-raised-button.mat-primary .mat-ripple-element{opacity:.3;background-color:hsla(0,0%,100%,.3)}"],changeDetection:0}),e}();0,void 0;var _n=function(){function e(e,t){this.store=e,this.dashboardService=t}return e.prototype.resolve=function(){var e,t=null;if(this.store.pipe(Object(h.select)($.c),Object(K.a)(1)).subscribe(function(e){t=e}),t)return this.dashboardService.getHomeDashboard(null===(e=t.userDetails)||void 0===e?void 0:e.email)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](h.Store),i["\u0275\u0275inject"](Rt.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0;var Nn=[{path:"home",component:Pn,data:{auth:[X.a.SYS_ADMIN,X.a.TENANT_ADMIN,X.a.CUSTOMER_USER],title:"home.home",breadcrumb:{label:"home.home",icon:"home"}},resolve:{homeDashboard:_n}}],Ln=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[_n],imports:[[a.RouterModule.forChild(Nn)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](Ln,{imports:[a.RouterModule],exports:[a.RouterModule]})),0;var On=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[r.CommonModule,vn.a,yn.a,Ln]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](On,{declarations:[Pn],imports:[r.CommonModule,vn.a,yn.a,Ln]})),0;var Bn=n("9D3k"),Rn=n("sIb/"),jn=n("AytR"),Vn=n("BnVf"),zn=n("Vurf");function Gn(e,t){1&e&&i["\u0275\u0275element"](0,"mat-progress-bar",18)}function Wn(e,t){1&e&&i["\u0275\u0275element"](0,"div",19)}var qn=function(e){function t(t,n,i,r,a,o){var l=e.call(this,t,n,a)||this;return l.store=t,l.router=n,l.translate=i,l.authService=r,l.dialogRef=a,l.fb=o,l}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){this.buildChangePasswordForm()},t.prototype.buildChangePasswordForm=function(){this.changePassword=this.fb.group({currentPassword:[""],newPassword:[""],newPassword2:[""]})},t.prototype.onChangePassword=function(){var e=this;this.changePassword.get("newPassword").value!==this.changePassword.get("newPassword2").value?this.store.dispatch(new u.b({message:this.translate.instant("login.passwords-mismatch-error"),type:"error"})):this.authService.changePassword(this.changePassword.get("currentPassword").value,this.changePassword.get("newPassword").value).subscribe(function(){e.dialogRef.close(!0)})},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](a.Router),i["\u0275\u0275directiveInject"](g.TranslateService),i["\u0275\u0275directiveInject"](zn.a),i["\u0275\u0275directiveInject"](Ct.MatDialogRef),i["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-change-password-dialog"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:43,vars:21,consts:[[3,"formGroup","ngSubmit"],["fxLayout","row","color","accent"],["translate",""],["fxFlex",""],["mat-icon-button","","type","button",3,"mat-dialog-close"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[1,"mat-block"],["matInput","","type","password","formControlName","currentPassword"],["matPrefix","",1,"material-icons"],["matSuffix",""],["matInput","","type","password","formControlName","newPassword"],["matInput","","type","password","formControlName","newPassword2"],["mat-dialog-actions","","fxLayout","row","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","mat-dialog-close"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"form",0),i["\u0275\u0275listener"]("ngSubmit",function(){return t.onChangePassword()}),i["\u0275\u0275elementStart"](1,"mat-toolbar",1),i["\u0275\u0275elementStart"](2,"h2",2),i["\u0275\u0275text"](3,"profile.change-password"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"span",3),i["\u0275\u0275elementStart"](5,"button",4),i["\u0275\u0275elementStart"](6,"mat-icon",5),i["\u0275\u0275text"](7,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,Gn,1,0,"mat-progress-bar",6),i["\u0275\u0275pipe"](9,"async"),i["\u0275\u0275template"](10,Wn,1,0,"div",7),i["\u0275\u0275pipe"](11,"async"),i["\u0275\u0275elementStart"](12,"div",8),i["\u0275\u0275elementStart"](13,"mat-form-field",9),i["\u0275\u0275elementStart"](14,"mat-label",2),i["\u0275\u0275text"](15,"profile.current-password"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](16,"input",10),i["\u0275\u0275elementStart"](17,"mat-icon",11),i["\u0275\u0275text"](18,"lock"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](19,"tb-toggle-password",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](20,"mat-form-field",9),i["\u0275\u0275elementStart"](21,"mat-label",2),i["\u0275\u0275text"](22,"login.new-password"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](23,"input",13),i["\u0275\u0275elementStart"](24,"mat-icon",11),i["\u0275\u0275text"](25,"lock"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](26,"tb-toggle-password",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](27,"mat-form-field",9),i["\u0275\u0275elementStart"](28,"mat-label",2),i["\u0275\u0275text"](29,"login.new-password-again"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](30,"input",14),i["\u0275\u0275elementStart"](31,"mat-icon",11),i["\u0275\u0275text"](32,"lock"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](33,"tb-toggle-password",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](34,"div",15),i["\u0275\u0275elementStart"](35,"button",16),i["\u0275\u0275pipe"](36,"async"),i["\u0275\u0275text"](37),i["\u0275\u0275pipe"](38,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](39,"button",17),i["\u0275\u0275pipe"](40,"async"),i["\u0275\u0275text"](41),i["\u0275\u0275pipe"](42,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.changePassword),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("mat-dialog-close",!1),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](9,9,t.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](11,11,t.isLoading$)),i["\u0275\u0275advance"](25),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](36,13,t.isLoading$))("mat-dialog-close",!1),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](38,15,"action.cancel")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](40,17,t.isLoading$)||t.changePassword.invalid),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](42,19,"profile.change-password")," "))},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,It.MatToolbar,v.f,g.TranslateDirective,v.b,E.MatButton,Ct.MatDialogClose,we.MatIcon,r.NgIf,Ct.MatDialogContent,x.MatFormField,x.MatLabel,S.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,x.MatPrefix,M.a,x.MatSuffix,Ct.MatDialogActions,v.e,I.MatProgressBar],pipes:[r.AsyncPipe,g.TranslatePipe],styles:[""]}),t}(Et.a);function Hn(e,t){1&e&&i["\u0275\u0275element"](0,"mat-progress-bar",26)}function Un(e,t){1&e&&i["\u0275\u0275element"](0,"div",27)}function $n(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"user.email-required")," "))}function Kn(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"user.invalid-email-format")," "))}function Yn(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",28),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n?i["\u0275\u0275pipeBind1"](2,2,"language.locales."+n):""," ")}}function Jn(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"section",29),i["\u0275\u0275element"](1,"tb-dashboard-autocomplete",30),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementStart"](3,"mat-checkbox",31),i["\u0275\u0275text"](4),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](2,6,"dashboard.home-dashboard")),i["\u0275\u0275property"]("dashboardsScope",(null==n.user?null:n.user.authority)===n.authorities.TENANT_ADMIN?"tenant":"customer")("tenantId",null==n.user||null==n.user.tenantId?null:n.user.tenantId.id)("customerId",null==n.user||null==n.user.customerId?null:n.user.customerId.id)("selectFirstDashboard",!1),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](5,8,"dashboard.home-dashboard-hide-toolbar")," ")}}0,void 0;var Xn=function(e){function t(t,n,i,r,a,o,l,s){var d=e.call(this,t)||this;return d.store=t,d.route=n,d.userService=i,d.authService=r,d.translate=a,d.dialog=o,d.dialogService=l,d.fb=s,d.authorities=X.a,d.languageList=jn.a.supportedLangs,d.authUser=Object($.b)(d.store),d}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){this.buildProfileForm(),this.userLoaded(this.route.snapshot.data.user)},t.prototype.buildProfileForm=function(){this.profile=this.fb.group({email:["",[s.Validators.required,s.Validators.email]],firstName:[""],lastName:[""],language:[""],homeDashboardId:[null],homeDashboardHideToolbar:[!0]})},t.prototype.save=function(){var e=this;this.user=Object(o.a)(Object(o.a)({},this.user),this.profile.value),this.user.additionalInfo||(this.user.additionalInfo={}),this.user.additionalInfo.lang=this.profile.get("language").value,this.user.additionalInfo.homeDashboardId=this.profile.get("homeDashboardId").value,this.user.additionalInfo.homeDashboardHideToolbar=this.profile.get("homeDashboardHideToolbar").value,this.userService.saveUser(this.user).subscribe(function(t){e.userLoaded(t),e.store.dispatch(new Rn.e({userDetails:{additionalInfo:Object(o.a)({},t.additionalInfo),authority:t.authority,createdTime:t.createdTime,tenantId:t.tenantId,customerId:t.customerId,email:t.email,firstName:t.firstName,id:t.id,lastName:t.lastName}})),e.store.dispatch(new Vn.a({userLang:t.additionalInfo.lang}))})},t.prototype.changePassword=function(){this.dialog.open(qn,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"]})},t.prototype.userLoaded=function(e){var t,n;this.user=e,this.profile.reset(e);var i=!0;e.additionalInfo&&(e.additionalInfo.lang&&(t=e.additionalInfo.lang),n=e.additionalInfo.homeDashboardId,Object(p.o)(e.additionalInfo.homeDashboardHideToolbar)&&(i=e.additionalInfo.homeDashboardHideToolbar)),t||(t=this.translate.currentLang),this.profile.get("language").setValue(t),this.profile.get("homeDashboardId").setValue(n),this.profile.get("homeDashboardHideToolbar").setValue(i)},t.prototype.confirmForm=function(){return this.profile},t.prototype.isSysAdmin=function(){return this.authUser.authority===X.a.SYS_ADMIN},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](a.ActivatedRoute),i["\u0275\u0275directiveInject"](Bn.a),i["\u0275\u0275directiveInject"](zn.a),i["\u0275\u0275directiveInject"](g.TranslateService),i["\u0275\u0275directiveInject"](Ct.MatDialog),i["\u0275\u0275directiveInject"](Y.a),i["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-profile"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:55,vars:31,consts:[[1,"profile-card"],["fxLayout","row","fxLayout.xs","column","fxLayoutGap.xs","8px"],["fxFlex","","fxLayout","column"],["translate","",1,"mat-headline"],[1,"profile-email",2,"opacity","0.7"],["translate","",1,"mat-subheader"],[1,"profile-last-login-ts",2,"opacity","0.7"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],[2,"padding-top","16px"],[3,"formGroup","ngSubmit"],[3,"disabled"],[1,"mat-block"],["translate",""],["matInput","","formControlName","email","required",""],[4,"ngIf"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["formControlName","language"],[3,"value",4,"ngFor","ngForOf"],["class","tb-home-dashboard","fxFlex","","fxLayout","column","fxLayout.gt-sm","row",4,"ngIf"],["fxLayout","row",2,"padding-bottom","16px"],["mat-button","","mat-raised-button","","color","accent","type","button",3,"disabled","click"],["fxLayout","row",1,"layout-wrap"],["fxFlex",""],["mat-button","","mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"],[3,"value"],["fxFlex","","fxLayout","column","fxLayout.gt-sm","row",1,"tb-home-dashboard"],["fxFlex","","formControlName","homeDashboardId",3,"placeholder","dashboardsScope","tenantId","customerId","selectFirstDashboard"],["fxFlex","","formControlName","homeDashboardHideToolbar"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mat-card",0),i["\u0275\u0275elementStart"](2,"mat-card-title"),i["\u0275\u0275elementStart"](3,"div",1),i["\u0275\u0275elementStart"](4,"div",2),i["\u0275\u0275elementStart"](5,"span",3),i["\u0275\u0275text"](6,"profile.profile"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"span",4),i["\u0275\u0275text"](8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"div",2),i["\u0275\u0275elementStart"](10,"span",5),i["\u0275\u0275text"](11,"profile.last-login-time"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"span",6),i["\u0275\u0275text"](13),i["\u0275\u0275pipe"](14,"date"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](15,"mat-card-title"),i["\u0275\u0275template"](16,Hn,1,0,"mat-progress-bar",7),i["\u0275\u0275pipe"](17,"async"),i["\u0275\u0275template"](18,Un,1,0,"div",8),i["\u0275\u0275pipe"](19,"async"),i["\u0275\u0275elementStart"](20,"mat-card-content",9),i["\u0275\u0275elementStart"](21,"form",10),i["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),i["\u0275\u0275elementStart"](22,"fieldset",11),i["\u0275\u0275pipe"](23,"async"),i["\u0275\u0275elementStart"](24,"mat-form-field",12),i["\u0275\u0275elementStart"](25,"mat-label",13),i["\u0275\u0275text"](26,"user.email"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](27,"input",14),i["\u0275\u0275template"](28,$n,3,3,"mat-error",15),i["\u0275\u0275template"](29,Kn,3,3,"mat-error",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](30,"mat-form-field",12),i["\u0275\u0275elementStart"](31,"mat-label",13),i["\u0275\u0275text"](32,"user.first-name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](33,"input",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](34,"mat-form-field",12),i["\u0275\u0275elementStart"](35,"mat-label",13),i["\u0275\u0275text"](36,"user.last-name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](37,"input",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](38,"mat-form-field",12),i["\u0275\u0275elementStart"](39,"mat-label",13),i["\u0275\u0275text"](40,"language.language"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](41,"mat-select",18),i["\u0275\u0275template"](42,Yn,3,4,"mat-option",19),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](43,Jn,6,10,"section",20),i["\u0275\u0275elementStart"](44,"div",21),i["\u0275\u0275elementStart"](45,"button",22),i["\u0275\u0275listener"]("click",function(){return t.changePassword()}),i["\u0275\u0275pipe"](46,"async"),i["\u0275\u0275text"](47),i["\u0275\u0275pipe"](48,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](49,"div",23),i["\u0275\u0275element"](50,"span",24),i["\u0275\u0275elementStart"](51,"button",25),i["\u0275\u0275pipe"](52,"async"),i["\u0275\u0275text"](53),i["\u0275\u0275pipe"](54,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](8),i["\u0275\u0275textInterpolate"](t.profile?t.profile.get("email").value:""),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind2"](14,14,null==t.user||null==t.user.additionalInfo?null:t.user.additionalInfo.lastLoginTs,"yyyy-MM-dd HH:mm:ss")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](17,17,t.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](19,19,t.isLoading$)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.profile),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](23,21,t.isLoading$)),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",t.profile.get("email").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.profile.get("email").hasError("email")),i["\u0275\u0275advance"](13),i["\u0275\u0275property"]("ngForOf",t.languageList),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.isSysAdmin()),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](46,23,t.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](48,25,"profile.change-password")," "),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](52,27,t.isLoading$)||t.profile.invalid||!t.profile.dirty),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](54,29,"action.save")," "))},directives:[b.MatCard,b.MatCardTitle,v.f,v.g,v.b,g.TranslateDirective,r.NgIf,b.MatCardContent,s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,x.MatFormField,x.MatLabel,S.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,s.RequiredValidator,w.MatSelect,r.NgForOf,E.MatButton,I.MatProgressBar,x.MatError,T.MatOption,Vt.a,D.MatCheckbox],pipes:[r.DatePipe,r.AsyncPipe,g.TranslatePipe],styles:["[_nghost-%COMP%]   mat-card.profile-card[_ngcontent-%COMP%]{margin:8px}@media screen and (min-width:960px){[_nghost-%COMP%]   mat-card.profile-card[_ngcontent-%COMP%]{width:60%}}[_nghost-%COMP%]   mat-card.profile-card[_ngcontent-%COMP%]   .mat-headline[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   mat-card.profile-card[_ngcontent-%COMP%]   .profile-email[_ngcontent-%COMP%]{font-size:16px;font-weight:400}[_nghost-%COMP%]   mat-card.profile-card[_ngcontent-%COMP%]   .mat-subheader[_ngcontent-%COMP%]{line-height:24px;color:rgba(0,0,0,.54);font-size:14px;font-weight:400}[_nghost-%COMP%]   mat-card.profile-card[_ngcontent-%COMP%]   .profile-last-login-ts[_ngcontent-%COMP%]{font-size:16px;font-weight:400}@media screen and (min-width:960px){[_nghost-%COMP%]   mat-card.profile-card[_ngcontent-%COMP%]   .tb-home-dashboard[_ngcontent-%COMP%]   tb-dashboard-autocomplete[_ngcontent-%COMP%]{padding-right:12px}}@media screen and (max-width:959px){[_nghost-%COMP%]   mat-card.profile-card[_ngcontent-%COMP%]   .tb-home-dashboard[_ngcontent-%COMP%]   tb-dashboard-autocomplete[_ngcontent-%COMP%]{padding-bottom:12px}}@media screen and (min-width:960px){[_nghost-%COMP%]   mat-card.profile-card[_ngcontent-%COMP%]   .tb-home-dashboard[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-top:16px}}"]}),t}(l.a);0,void 0;var Qn=function(){function e(e,t){this.store=e,this.userService=t}return e.prototype.resolve=function(){var e=Object($.b)(this.store).userId;return this.userService.getUser(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](h.Store),i["\u0275\u0275inject"](Bn.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0;var Zn=[{path:"profile",component:Xn,canDeactivate:[J],data:{auth:[X.a.SYS_ADMIN,X.a.TENANT_ADMIN,X.a.CUSTOMER_USER],title:"profile.profile",breadcrumb:{label:"profile.profile",icon:"account_circle"}},resolve:{user:Qn}}],ei=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[Qn],imports:[[a.RouterModule.forChild(Zn)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](ei,{imports:[a.RouterModule],exports:[a.RouterModule]})),0;var ti=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[r.CommonModule,vn.a,ei]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](ti,{declarations:[Xn,qn],imports:[r.CommonModule,vn.a,ei]})),0;var ni=n("kIhZ"),ii=function(e){function t(t,n,i,r,a){var o=e.call(this,t,n,i,r,a)||this;return o.store=t,o.fb=n,o.entityValue=i,o.entitiesTableConfigValue=r,o.cd=a,o}return Object(o.d)(t,e),t.prototype.buildForm=function(e){var t=this.buildEntityForm(e);return t.addControl("country",this.fb.control(e?e.country:"",[])),t.addControl("city",this.fb.control(e?e.city:"",[])),t.addControl("state",this.fb.control(e?e.state:"",[])),t.addControl("zip",this.fb.control(e?e.zip:"",this.zipValidators(e?e.country:""))),t.addControl("address",this.fb.control(e?e.address:"",[])),t.addControl("address2",this.fb.control(e?e.address2:"",[])),t.addControl("phone",this.fb.control(e?e.phone:"",[])),t.addControl("email",this.fb.control(e?e.email:"",[s.Validators.email])),t},t.prototype.updateForm=function(e){this.updateEntityForm(e),this.entityForm.patchValue({country:e.country}),this.entityForm.patchValue({city:e.city}),this.entityForm.patchValue({state:e.state}),this.entityForm.get("zip").setValidators(this.zipValidators(e.country)),this.entityForm.patchValue({zip:e.zip}),this.entityForm.patchValue({address:e.address}),this.entityForm.patchValue({address2:e.address2}),this.entityForm.patchValue({phone:e.phone}),this.entityForm.patchValue({email:e.email})},t.prototype.ngAfterViewInit=function(){var e=this;this.entityForm.get("country").valueChanges.subscribe(function(t){e.entityForm.get("zip").setValidators(e.zipValidators(t)),e.entityForm.get("zip").updateValueAndValidity({onlySelf:!0}),e.entityForm.get("zip").markAsTouched({onlySelf:!0})})},t.prototype.zipValidators=function(e){var t=[];if(e&&ni.b[e]){var n=ni.b[e];t.push(s.Validators.pattern(n))}return t},t.\u0275fac=function(e){i["\u0275\u0275invalidFactory"]()},t.\u0275dir=i["\u0275\u0275defineDirective"]({type:t,features:[i["\u0275\u0275InheritDefinitionFeature"]]}),t}(nn.a);0,void 0;var ri=n("Vbuf"),ai=n("hwpn");function oi(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant.title-required")," "))}function li(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"section",17),i["\u0275\u0275elementStart"](1,"section",18),i["\u0275\u0275element"](2,"tb-dashboard-autocomplete",19),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementStart"](4,"mat-checkbox",20),i["\u0275\u0275text"](5),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](3,5,"dashboard.home-dashboard")),i["\u0275\u0275property"]("dashboardsScope","tenant")("tenantId",null==n.entity?null:n.entity.id.id)("selectFirstDashboard",!1),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](6,7,"dashboard.home-dashboard-hide-toolbar")," ")}}var si=function(e){function t(t,n,i,r,a,o){var l=e.call(this,t,a,i,r,o)||this;return l.store=t,l.translate=n,l.entityValue=i,l.entitiesTableConfigValue=r,l.fb=a,l.cd=o,l}return Object(o.d)(t,e),t.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},t.prototype.buildEntityForm=function(e){return this.fb.group({title:[e?e.title:"",[s.Validators.required]],tenantProfileId:[e?e.tenantProfileId:null,[s.Validators.required]],additionalInfo:this.fb.group({description:[e&&e.additionalInfo?e.additionalInfo.description:""],homeDashboardId:[e&&e.additionalInfo?e.additionalInfo.homeDashboardId:null],homeDashboardHideToolbar:[!(e&&e.additionalInfo&&Object(p.o)(e.additionalInfo.homeDashboardHideToolbar))||e.additionalInfo.homeDashboardHideToolbar]})})},t.prototype.updateEntityForm=function(e){this.entityForm.patchValue({title:e.title}),this.entityForm.patchValue({tenantProfileId:e.tenantProfileId}),this.entityForm.patchValue({additionalInfo:{description:e.additionalInfo?e.additionalInfo.description:""}}),this.entityForm.patchValue({additionalInfo:{homeDashboardId:e.additionalInfo?e.additionalInfo.homeDashboardId:null}}),this.entityForm.patchValue({additionalInfo:{homeDashboardHideToolbar:!e.additionalInfo||!Object(p.o)(e.additionalInfo.homeDashboardHideToolbar)||e.additionalInfo.homeDashboardHideToolbar}})},t.prototype.updateFormState=function(){this.entityForm&&(this.isEditValue?this.entityForm.enable({emitEvent:!1}):this.entityForm.disable({emitEvent:!1}))},t.prototype.onTenantIdCopied=function(e){this.store.dispatch(new u.b({message:this.translate.instant("tenant.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},t.prototype.onTenantProfileUpdated=function(){this.entitiesTableConfig.table.updateData(!1)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](g.TranslateService),i["\u0275\u0275directiveInject"]("entity"),i["\u0275\u0275directiveInject"]("entitiesTableConfig"),i["\u0275\u0275directiveInject"](s.FormBuilder),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-tenant"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:31,vars:25,consts:[["fxLayout.xs","column",1,"tb-details-buttons"],["mat-raised-button","","color","accent",3,"disabled","fxShow","click"],["fxLayout","row","fxLayout.xs","column"],["mat-raised-button","","ngxClipboard","",3,"cbContent","fxShow","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"],["translate",""],["fxLayout","column",1,"mat-padding"],[3,"formGroup"],[3,"disabled"],[1,"mat-block"],["matInput","","formControlName","title","required",""],[4,"ngIf"],["required","","formControlName","tenantProfileId",3,"selectDefaultProfile","tenantProfileUpdated"],["formGroupName","additionalInfo","fxLayout","column"],["matInput","","formControlName","description","rows","2"],["class","tb-default-dashboard","fxFlex","","fxLayout","column",4,"ngIf"],[3,"parentForm","isEdit"],["fxFlex","","fxLayout","column",1,"tb-default-dashboard"],["fxFlex","","fxLayout","column","fxLayout.gt-sm","row"],["fxFlex","","formControlName","homeDashboardId",3,"placeholder","dashboardsScope","tenantId","selectFirstDashboard"],["fxFlex","","formControlName","homeDashboardHideToolbar"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"manageTenantAdmins")}),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"delete")}),i["\u0275\u0275pipe"](6,"async"),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"div",2),i["\u0275\u0275elementStart"](10,"button",3),i["\u0275\u0275listener"]("cbOnSuccess",function(e){return t.onTenantIdCopied(e)}),i["\u0275\u0275element"](11,"mat-icon",4),i["\u0275\u0275elementStart"](12,"span",5),i["\u0275\u0275text"](13,"tenant.copyId"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"div",6),i["\u0275\u0275elementStart"](15,"form",7),i["\u0275\u0275elementStart"](16,"fieldset",8),i["\u0275\u0275pipe"](17,"async"),i["\u0275\u0275elementStart"](18,"mat-form-field",9),i["\u0275\u0275elementStart"](19,"mat-label",5),i["\u0275\u0275text"](20,"tenant.title"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](21,"input",10),i["\u0275\u0275template"](22,oi,3,3,"mat-error",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](23,"tb-tenant-profile-autocomplete",12),i["\u0275\u0275listener"]("tenantProfileUpdated",function(){return t.onTenantProfileUpdated()}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](24,"div",13),i["\u0275\u0275elementStart"](25,"mat-form-field",9),i["\u0275\u0275elementStart"](26,"mat-label",5),i["\u0275\u0275text"](27,"tenant.description"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](28,"textarea",14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](29,li,7,9,"section",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](30,"tb-contact",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](2,15,t.isLoading$))("fxShow",!t.isEdit),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](4,17,"tenant.manage-tenant-admins")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](6,19,t.isLoading$))("fxShow",!t.hideDelete()&&!t.isEdit),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](8,21,"tenant.delete")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("cbContent",null==t.entity||null==t.entity.id?null:t.entity.id.id)("fxShow",!t.isEdit),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("formGroup",t.entityForm),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](17,23,t.isLoading$)||!t.isEdit),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",t.entityForm.get("title").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("selectDefaultProfile",t.isAdd),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",null==t.entity?null:t.entity.id),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("parentForm",t.entityForm)("isEdit",t.isEdit))},directives:[v.f,E.MatButton,Ie.d,on.a,we.MatIcon,g.TranslateDirective,s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,x.MatFormField,x.MatLabel,S.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,s.RequiredValidator,r.NgIf,ri.a,s.FormGroupName,ai.a,x.MatError,v.b,Vt.a,D.MatCheckbox],pipes:[r.AsyncPipe,g.TranslatePipe],styles:["@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-default-dashboard[_ngcontent-%COMP%]   tb-dashboard-autocomplete[_ngcontent-%COMP%]{padding-right:12px}}@media screen and (max-width:959px){[_nghost-%COMP%]   .tb-default-dashboard[_ngcontent-%COMP%]   tb-dashboard-autocomplete[_ngcontent-%COMP%]{padding-bottom:12px}}@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-default-dashboard[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-top:16px}}"]}),t}(ii);0,void 0;var di=n("WNjs"),ci=n("AUWA"),ui=n("AAbs"),pi=n("eOYM"),mi=n("mXAo"),fi=n("enJx");function hi(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,2),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-attribute-table",3),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,5,"attribute.attributes")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("defaultAttributeScope",r.attributeScopes.SERVER_SCOPE)("active",n.isActive)("entityId",r.entity.id)("entityName",r.entity.name)}}function gi(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,4),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-attribute-table",5),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,5,"attribute.latest-telemetry")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("defaultAttributeScope",r.latestTelemetryTypes.LATEST_TELEMETRY)("active",n.isActive)("entityId",r.entity.id)("entityName",r.entity.name)}}function bi(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,6),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-alarm-table",7),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,3,"alarm.alarms")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("active",n.isActive)("entityId",r.entity.id)}}function vi(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,8),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-event-table",9),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,5,"tenant.events")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("defaultEventType",r.eventTypes.ERROR)("active",n.isActive)("tenantId",r.nullUid)("entityId",r.entity.id)}}function yi(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,10),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-relation-table",7),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,3,"relation.relations")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("active",n.isActive)("entityId",r.entity.id)}}var xi=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-tenant-tabs"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:5,consts:[[3,"label",4,"ngIf"],[3,"label"],["attributesTab","matTab"],[3,"defaultAttributeScope","active","entityId","entityName"],["telemetryTab","matTab"],["disableAttributeScopeSelection","",3,"defaultAttributeScope","active","entityId","entityName"],["alarmsTab","matTab"],[3,"active","entityId"],["eventsTab","matTab"],[3,"defaultEventType","active","tenantId","entityId"],["relationsTab","matTab"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,hi,4,7,"mat-tab",0),i["\u0275\u0275template"](1,gi,4,7,"mat-tab",0),i["\u0275\u0275template"](2,bi,4,5,"mat-tab",0),i["\u0275\u0275template"](3,vi,4,7,"mat-tab",0),i["\u0275\u0275template"](4,yi,4,5,"mat-tab",0)),2&e&&(i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity))},directives:[r.NgIf,Ce.MatTab,ui.a,pi.a,mi.a,fi.a],pipes:[g.TranslatePipe],encapsulation:2}),t}(ci.a);0,void 0;var Si=function(){function e(e,t,n,i){var r=this;this.tenantService=e,this.translate=t,this.datePipe=n,this.router=i,this.config=new Ht.e,this.config.entityType=$t.b.TENANT,this.config.entityComponent=si,this.config.entityTabsComponent=xi,this.config.entityTranslations=$t.d.get($t.b.TENANT),this.config.entityResources=$t.c.get($t.b.TENANT),this.config.columns.push(new Ht.b("createdTime","common.created-time",this.datePipe,"150px"),new Ht.d("title","tenant.title","20%"),new Ht.d("tenantProfileName","tenant-profile.tenant-profile","20%"),new Ht.d("email","contact.email","20%"),new Ht.d("country","contact.country","20%"),new Ht.d("city","contact.city","20%")),this.config.cellActionDescriptors.push({name:this.translate.instant("tenant.manage-tenant-admins"),icon:"account_circle",isEnabled:function(){return!0},onAction:function(e,t){return r.manageTenantAdmins(e,t)}}),this.config.deleteEntityTitle=function(e){return r.translate.instant("tenant.delete-tenant-title",{tenantTitle:e.title})},this.config.deleteEntityContent=function(){return r.translate.instant("tenant.delete-tenant-text")},this.config.deleteEntitiesTitle=function(e){return r.translate.instant("tenant.delete-tenants-title",{count:e})},this.config.deleteEntitiesContent=function(){return r.translate.instant("tenant.delete-tenants-text")},this.config.entitiesFetchFunction=function(e){return r.tenantService.getTenantInfos(e)},this.config.loadEntity=function(e){return r.tenantService.getTenantInfo(e.id)},this.config.saveEntity=function(e){return r.tenantService.saveTenant(e).pipe(Object(Zt.b)(function(e){return r.tenantService.getTenantInfo(e.id.id)}))},this.config.deleteEntity=function(e){return r.tenantService.deleteTenant(e.id)},this.config.onEntityAction=function(e){return r.onTenantAction(e)}}return e.prototype.resolve=function(){return this.config.tableTitle=this.translate.instant("tenant.tenants"),this.config},e.prototype.manageTenantAdmins=function(e,t){e&&e.stopPropagation(),this.router.navigateByUrl("tenants/"+t.id.id+"/users")},e.prototype.onTenantAction=function(e){switch(e.action){case"manageTenantAdmins":return this.manageTenantAdmins(e.event,e.entity),!0}return!1},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](di.a),i["\u0275\u0275inject"](g.TranslateService),i["\u0275\u0275inject"](r.DatePipe),i["\u0275\u0275inject"](a.Router))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();function wi(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",1),i["\u0275\u0275listener"]("click",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onEntityAction(e,"loginAsUser")}),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](1,3,r.isLoading$))("fxShow",!r.isEdit),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](3,5,(null==r.entity?null:r.entity.authority)===r.authority.TENANT_ADMIN?"user.login-as-tenant-admin":"user.login-as-customer-user")," ")}}function Ci(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"user.invalid-email-format")," "))}function Ei(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"user.email-required")," "))}function Ii(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"section",18),i["\u0275\u0275elementStart"](1,"section",19),i["\u0275\u0275element"](2,"tb-dashboard-autocomplete",20),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementStart"](4,"mat-checkbox",21),i["\u0275\u0275text"](5),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"section",19),i["\u0275\u0275element"](8,"tb-dashboard-autocomplete",22),i["\u0275\u0275pipe"](9,"translate"),i["\u0275\u0275elementStart"](10,"mat-checkbox",23),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](3,12,"user.default-dashboard")),i["\u0275\u0275property"]("dashboardsScope",(null==n.entity?null:n.entity.authority)===n.authority.TENANT_ADMIN?"tenant":"customer")("tenantId",null==n.entity||null==n.entity.tenantId?null:n.entity.tenantId.id)("customerId",null==n.entity||null==n.entity.customerId?null:n.entity.customerId.id)("selectFirstDashboard",!1),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](6,14,"user.always-fullscreen")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](9,16,"dashboard.home-dashboard")),i["\u0275\u0275property"]("dashboardsScope",(null==n.entity?null:n.entity.authority)===n.authority.TENANT_ADMIN?"tenant":"customer")("tenantId",null==n.entity||null==n.entity.tenantId?null:n.entity.tenantId.id)("customerId",null==n.entity||null==n.entity.customerId?null:n.entity.customerId.id)("selectFirstDashboard",!1),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](12,18,"dashboard.home-dashboard-hide-toolbar")," ")}}0,void 0;var Ti=function(e){function t(t,n,i,r,a,o){var l=e.call(this,t,r,n,i,a)||this;return l.store=t,l.entityValue=n,l.entitiesTableConfigValue=i,l.fb=r,l.cd=a,l.translate=o,l.authority=X.a,l.loginAsUserEnabled$=l.store.pipe(Object(h.select)($.c),Object(Xt.a)(function(e){return e.userTokenAccessEnabled})),l}return Object(o.d)(t,e),t.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},t.prototype.isUserCredentialsEnabled=function(){return!0===this.entity.additionalInfo.userCredentialsEnabled},t.prototype.isUserCredentialPresent=function(){return this.entity&&this.entity.additionalInfo&&Object(p.o)(this.entity.additionalInfo.userCredentialsEnabled)},t.prototype.buildForm=function(e){return this.fb.group({email:[e?e.email:"",[s.Validators.required,s.Validators.email]],firstName:[e?e.firstName:""],lastName:[e?e.lastName:""],additionalInfo:this.fb.group({description:[e&&e.additionalInfo?e.additionalInfo.description:""],defaultDashboardId:[e&&e.additionalInfo?e.additionalInfo.defaultDashboardId:null],defaultDashboardFullscreen:[!(!e||!e.additionalInfo)&&e.additionalInfo.defaultDashboardFullscreen],homeDashboardId:[e&&e.additionalInfo?e.additionalInfo.homeDashboardId:null],homeDashboardHideToolbar:[!(e&&e.additionalInfo&&Object(p.o)(e.additionalInfo.homeDashboardHideToolbar))||e.additionalInfo.homeDashboardHideToolbar]})})},t.prototype.updateForm=function(e){this.entityForm.patchValue({email:e.email}),this.entityForm.patchValue({firstName:e.firstName}),this.entityForm.patchValue({lastName:e.lastName}),this.entityForm.patchValue({additionalInfo:{description:e.additionalInfo?e.additionalInfo.description:""}}),this.entityForm.patchValue({additionalInfo:{defaultDashboardId:e.additionalInfo?e.additionalInfo.defaultDashboardId:null}}),this.entityForm.patchValue({additionalInfo:{defaultDashboardFullscreen:!!e.additionalInfo&&e.additionalInfo.defaultDashboardFullscreen}}),this.entityForm.patchValue({additionalInfo:{homeDashboardId:e.additionalInfo?e.additionalInfo.homeDashboardId:null}}),this.entityForm.patchValue({additionalInfo:{homeDashboardHideToolbar:!e.additionalInfo||!Object(p.o)(e.additionalInfo.homeDashboardHideToolbar)||e.additionalInfo.homeDashboardHideToolbar}})},t.prototype.onUserIdCopied=function(e){this.store.dispatch(new u.b({message:this.translate.instant("user.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"]("entity",8),i["\u0275\u0275directiveInject"]("entitiesTableConfig",8),i["\u0275\u0275directiveInject"](s.FormBuilder),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](g.TranslateService))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-user"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:53,vars:50,consts:[["fxLayout.xs","column",1,"tb-details-buttons"],["mat-raised-button","","color","accent",3,"disabled","fxShow","click"],["mat-raised-button","","color","accent",3,"disabled","fxShow","click",4,"ngIf"],["fxLayout","row","fxLayout.xs","column"],["mat-raised-button","","ngxClipboard","",3,"cbContent","disabled","fxShow","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"],["translate",""],["fxLayout","column",1,"mat-padding"],[3,"formGroup"],[3,"disabled"],[1,"mat-block"],["matInput","","formControlName","email","required",""],[4,"ngIf"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["formGroupName","additionalInfo","fxLayout","column"],["matInput","","formControlName","description","rows","2"],["class","tb-default-dashboard","fxFlex","","fxLayout","column",4,"ngIf"],["fxFlex","","fxLayout","column",1,"tb-default-dashboard"],["fxFlex","","fxLayout","column","fxLayout.gt-sm","row"],["fxFlex","","formControlName","defaultDashboardId",3,"placeholder","dashboardsScope","tenantId","customerId","selectFirstDashboard"],["fxFlex","","formControlName","defaultDashboardFullscreen"],["fxFlex","","formControlName","homeDashboardId",3,"placeholder","dashboardsScope","tenantId","customerId","selectFirstDashboard"],["fxFlex","","formControlName","homeDashboardHideToolbar"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"disableAccount")}),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"enableAccount")}),i["\u0275\u0275pipe"](6,"async"),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"displayActivationLink")}),i["\u0275\u0275pipe"](10,"async"),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"resendActivation")}),i["\u0275\u0275pipe"](14,"async"),i["\u0275\u0275text"](15),i["\u0275\u0275pipe"](16,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](17,wi,4,7,"button",2),i["\u0275\u0275pipe"](18,"async"),i["\u0275\u0275elementStart"](19,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"delete")}),i["\u0275\u0275pipe"](20,"async"),i["\u0275\u0275text"](21),i["\u0275\u0275pipe"](22,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](23,"div",3),i["\u0275\u0275elementStart"](24,"button",4),i["\u0275\u0275listener"]("cbOnSuccess",function(e){return t.onUserIdCopied(e)}),i["\u0275\u0275pipe"](25,"async"),i["\u0275\u0275element"](26,"mat-icon",5),i["\u0275\u0275elementStart"](27,"span",6),i["\u0275\u0275text"](28,"user.copyId"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](29,"div",7),i["\u0275\u0275elementStart"](30,"form",8),i["\u0275\u0275elementStart"](31,"fieldset",9),i["\u0275\u0275pipe"](32,"async"),i["\u0275\u0275elementStart"](33,"mat-form-field",10),i["\u0275\u0275elementStart"](34,"mat-label",6),i["\u0275\u0275text"](35,"user.email"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](36,"input",11),i["\u0275\u0275template"](37,Ci,3,3,"mat-error",12),i["\u0275\u0275template"](38,Ei,3,3,"mat-error",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](39,"mat-form-field",10),i["\u0275\u0275elementStart"](40,"mat-label",6),i["\u0275\u0275text"](41,"user.first-name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](42,"input",13),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](43,"mat-form-field",10),i["\u0275\u0275elementStart"](44,"mat-label",6),i["\u0275\u0275text"](45,"user.last-name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](46,"input",14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](47,"div",15),i["\u0275\u0275elementStart"](48,"mat-form-field",10),i["\u0275\u0275elementStart"](49,"mat-label",6),i["\u0275\u0275text"](50,"user.description"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](51,"textarea",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](52,Ii,13,20,"section",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](2,24,t.isLoading$))("fxShow",!t.isEdit&&t.isUserCredentialPresent()&&t.isUserCredentialsEnabled()),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](4,26,"user.disable-account")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](6,28,t.isLoading$))("fxShow",!t.isEdit&&t.isUserCredentialPresent()&&!t.isUserCredentialsEnabled()),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](8,30,"user.enable-account")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](10,32,t.isLoading$))("fxShow",!t.isEdit),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](12,34,"user.display-activation-link")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](14,36,t.isLoading$))("fxShow",!t.isEdit),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](16,38,"user.resend-activation")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](18,40,t.loginAsUserEnabled$)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](20,42,t.isLoading$))("fxShow",!t.hideDelete()&&!t.isEdit),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](22,44,"user.delete")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("cbContent",null==t.entity||null==t.entity.id?null:t.entity.id.id)("disabled",i["\u0275\u0275pipeBind1"](25,46,t.isLoading$))("fxShow",!t.isEdit),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("formGroup",t.entityForm),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](32,48,t.isLoading$)||!t.isEdit),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",t.entityForm.get("email").hasError("email")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entityForm.get("email").hasError("required")),i["\u0275\u0275advance"](14),i["\u0275\u0275property"]("ngIf",null==t.entity?null:t.entity.id))},directives:[v.f,E.MatButton,Ie.d,r.NgIf,on.a,we.MatIcon,g.TranslateDirective,s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,x.MatFormField,x.MatLabel,S.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,s.RequiredValidator,s.FormGroupName,x.MatError,v.b,Vt.a,D.MatCheckbox],pipes:[r.AsyncPipe,g.TranslatePipe],styles:["@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-default-dashboard[_ngcontent-%COMP%]   tb-dashboard-autocomplete[_ngcontent-%COMP%]{padding-right:12px}}@media screen and (max-width:959px){[_nghost-%COMP%]   .tb-default-dashboard[_ngcontent-%COMP%]   tb-dashboard-autocomplete[_ngcontent-%COMP%]{padding-bottom:12px}}@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-default-dashboard[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-top:16px}}"]}),t}(nn.a);0,void 0;var Mi=n("ktVl"),Di=n("vkgz"),ki=n("8Mhd"),Ai=n("KJJU");function Fi(e,t){1&e&&i["\u0275\u0275element"](0,"mat-progress-bar",17)}function Pi(e,t){1&e&&i["\u0275\u0275element"](0,"div",18)}var _i=function(e){return{activationLink:e}},Ni=function(e){function t(t,n,i,r,a){var o=e.call(this,t,n,r)||this;return o.store=t,o.router=n,o.data=i,o.dialogRef=r,o.translate=a,o.activationLink=o.data.activationLink,o}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){},t.prototype.close=function(){this.dialogRef.close()},t.prototype.onActivationLinkCopied=function(){this.store.dispatch(new u.b({message:this.translate.instant("user.activation-link-copied-message"),type:"success",target:"activationLinkDialogContent",duration:1200,verticalPosition:"bottom",horizontalPosition:"left"}))},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](a.Router),i["\u0275\u0275directiveInject"](Ct.MAT_DIALOG_DATA),i["\u0275\u0275directiveInject"](Ct.MatDialogRef),i["\u0275\u0275directiveInject"](g.TranslateService))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-activation-link-dialog"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:28,vars:23,consts:[[2,"min-width","400px","position","relative"],["color","accent"],["translate",""],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content","","tb-toast","","toastTarget","activationLinkDialogContent"],["fxLayout","column",1,"mat-content"],[3,"innerHTML"],["fxLayout","row","fxLayoutAlign","start center"],["fxFlex","",1,"tb-highlight"],["mat-icon-button","","color","accent","ngxClipboard","","matTooltipPosition","above",3,"cbContent","matTooltip","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"form",0),i["\u0275\u0275elementStart"](1,"mat-toolbar",1),i["\u0275\u0275elementStart"](2,"h2",2),i["\u0275\u0275text"](3,"user.activation-link"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"span",3),i["\u0275\u0275elementStart"](5,"button",4),i["\u0275\u0275listener"]("click",function(){return t.close()}),i["\u0275\u0275elementStart"](6,"mat-icon",5),i["\u0275\u0275text"](7,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,Fi,1,0,"mat-progress-bar",6),i["\u0275\u0275pipe"](9,"async"),i["\u0275\u0275template"](10,Pi,1,0,"div",7),i["\u0275\u0275pipe"](11,"async"),i["\u0275\u0275elementStart"](12,"div",8),i["\u0275\u0275elementStart"](13,"div",9),i["\u0275\u0275element"](14,"span",10),i["\u0275\u0275pipe"](15,"translate"),i["\u0275\u0275elementStart"](16,"div",11),i["\u0275\u0275elementStart"](17,"pre",12),i["\u0275\u0275elementStart"](18,"code"),i["\u0275\u0275text"](19),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](20,"button",13),i["\u0275\u0275listener"]("cbOnSuccess",function(){return t.onActivationLinkCopied()}),i["\u0275\u0275pipe"](21,"translate"),i["\u0275\u0275element"](22,"mat-icon",14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](23,"div",15),i["\u0275\u0275elementStart"](24,"button",16),i["\u0275\u0275listener"]("click",function(){return t.close()}),i["\u0275\u0275pipe"](25,"async"),i["\u0275\u0275text"](26),i["\u0275\u0275pipe"](27,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](9,8,t.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](11,10,t.isLoading$)),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind2"](15,12,"user.activation-link-text",i["\u0275\u0275pureFunction1"](21,_i,t.activationLink)),i["\u0275\u0275sanitizeHtml"]),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](t.activationLink),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("cbContent",t.activationLink),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](21,15,"user.copy-activation-link")),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](25,17,t.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](27,19,"action.ok")," "))},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.NgForm,It.MatToolbar,g.TranslateDirective,v.b,E.MatButton,we.MatIcon,r.NgIf,Ct.MatDialogContent,Tt.b,v.f,v.e,on.a,Se.MatTooltip,Ct.MatDialogActions,I.MatProgressBar],pipes:[r.AsyncPipe,g.TranslatePipe],encapsulation:2}),t}(Et.a);0,void 0;var Li=n("KMMH");function Oi(e,t){1&e&&i["\u0275\u0275element"](0,"mat-progress-bar",16)}function Bi(e,t){1&e&&i["\u0275\u0275element"](0,"div",17)}function Ri(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",18),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,r.activationMethodTranslations.get(r.activationMethodEnum[n]))," ")}}var ji=function(){return{standalone:!0}},Vi=function(e){function t(t,n,i,r,a,o){var l=e.call(this,t,n,r)||this;return l.store=t,l.router=n,l.data=i,l.dialogRef=r,l.userService=a,l.dialog=o,l.activationMethods=Object.keys(Ai.a),l.activationMethodEnum=Ai.a,l.activationMethodTranslations=Ai.b,l.activationMethod=Ai.a.DISPLAY_ACTIVATION_LINK,l}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){this.user={},this.userComponent.isEdit=!0,this.userComponent.entity=this.user,this.detailsForm=this.userComponent.entityForm},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.add=function(){var e=this;if(this.detailsForm.valid){this.user=Object(o.a)(Object(o.a)({},this.user),this.userComponent.entityForm.value),this.user.authority=this.data.authority,this.user.tenantId=new Li.a(this.data.tenantId),this.user.customerId=new ki.a(this.data.customerId);var t=this.activationMethod===Ai.a.SEND_ACTIVATION_MAIL;this.userService.saveUser(this.user,t).subscribe(function(t){e.activationMethod===Ai.a.DISPLAY_ACTIVATION_LINK?e.userService.getActivationLink(t.id.id).subscribe(function(n){e.displayActivationLink(n).subscribe(function(){e.dialogRef.close(t)})}):e.dialogRef.close(t)})}},t.prototype.displayActivationLink=function(e){return this.dialog.open(Ni,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{activationLink:e}}).afterClosed()},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](a.Router),i["\u0275\u0275directiveInject"](Ct.MAT_DIALOG_DATA),i["\u0275\u0275directiveInject"](Ct.MatDialogRef),i["\u0275\u0275directiveInject"](Bn.a),i["\u0275\u0275directiveInject"](Ct.MatDialog))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-add-user-dialog"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](Ti,3),2&e){var n;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.userComponent=n.first)}},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:29,vars:23,consts:[[2,"min-width","450px",3,"ngSubmit"],["color","accent"],["translate",""],["fxFlex",""],[3,"tb-help"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[1,"mat-block"],[3,"ngModelOptions","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"],[3,"value"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"form",0),i["\u0275\u0275listener"]("ngSubmit",function(){return t.add()}),i["\u0275\u0275elementStart"](1,"mat-toolbar",1),i["\u0275\u0275elementStart"](2,"h2",2),i["\u0275\u0275text"](3,"user.add"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"span",3),i["\u0275\u0275element"](5,"div",4),i["\u0275\u0275elementStart"](6,"button",5),i["\u0275\u0275listener"]("click",function(){return t.cancel()}),i["\u0275\u0275elementStart"](7,"mat-icon",6),i["\u0275\u0275text"](8,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](9,Oi,1,0,"mat-progress-bar",7),i["\u0275\u0275pipe"](10,"async"),i["\u0275\u0275template"](11,Bi,1,0,"div",8),i["\u0275\u0275pipe"](12,"async"),i["\u0275\u0275elementStart"](13,"div",9),i["\u0275\u0275element"](14,"tb-user"),i["\u0275\u0275elementStart"](15,"mat-form-field",10),i["\u0275\u0275elementStart"](16,"mat-label",2),i["\u0275\u0275text"](17,"user.activation-method"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](18,"mat-select",11),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.activationMethod=e}),i["\u0275\u0275template"](19,Ri,3,4,"mat-option",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](20,"div",13),i["\u0275\u0275elementStart"](21,"button",14),i["\u0275\u0275listener"]("click",function(){return t.cancel()}),i["\u0275\u0275pipe"](22,"async"),i["\u0275\u0275text"](23),i["\u0275\u0275pipe"](24,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](25,"button",15),i["\u0275\u0275pipe"](26,"async"),i["\u0275\u0275text"](27),i["\u0275\u0275pipe"](28,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("tb-help","user"),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](10,10,t.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](12,12,t.isLoading$)),i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("ngModelOptions",i["\u0275\u0275pureFunction0"](22,ji))("ngModel",t.activationMethod),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",t.activationMethods),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](22,14,t.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](24,16,"action.cancel")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](26,18,t.isLoading$)||t.detailsForm.invalid||!t.detailsForm.dirty),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](28,20,"action.add")," "))},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.NgForm,It.MatToolbar,g.TranslateDirective,v.b,y.a,E.MatButton,we.MatIcon,r.NgIf,Ct.MatDialogContent,Ti,x.MatFormField,x.MatLabel,w.MatSelect,s.NgControlStatus,s.NgModel,r.NgForOf,Ct.MatDialogActions,v.e,I.MatProgressBar,T.MatOption],pipes:[r.AsyncPipe,g.TranslatePipe],styles:["[_nghost-%COMP%]     .mat-padding{padding:0}"]}),t}(Et.a);0,void 0;var zi=n("igfJ");function Gi(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,2),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-attribute-table",3),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,5,"attribute.attributes")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("defaultAttributeScope",r.attributeScopes.SERVER_SCOPE)("active",n.isActive)("entityId",r.entity.id)("entityName",r.entity.name)}}function Wi(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,4),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-attribute-table",5),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,5,"attribute.latest-telemetry")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("defaultAttributeScope",r.latestTelemetryTypes.LATEST_TELEMETRY)("active",n.isActive)("entityId",r.entity.id)("entityName",r.entity.name)}}function qi(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,6),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-audit-log-table",7),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,4,"audit-log.audit-logs")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("active",n.isActive)("auditLogMode",r.auditLogModes.USER)("userId",r.entity.id)}}var Hi=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-user-tabs"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:3,consts:[[3,"label",4,"ngIf"],[3,"label"],["attributesTab","matTab"],[3,"defaultAttributeScope","active","entityId","entityName"],["telemetryTab","matTab"],["disableAttributeScopeSelection","",3,"defaultAttributeScope","active","entityId","entityName"],["auditLogsTab","matTab"],["detailsMode","true",3,"active","auditLogMode","userId"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,Gi,4,7,"mat-tab",0),i["\u0275\u0275template"](1,Wi,4,7,"mat-tab",0),i["\u0275\u0275template"](2,qi,4,6,"mat-tab",0)),2&e&&(i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity&&t.authUser.authority===t.authorities.TENANT_ADMIN))},directives:[r.NgIf,Ce.MatTab,ui.a,zi.a],pipes:[g.TranslatePipe],encapsulation:2}),t}(ci.a);0,void 0;var Ui=function(){function e(e,t,n,i,r,a,o,l){var s=this;this.store=e,this.userService=t,this.authService=n,this.tenantService=i,this.customerService=r,this.translate=a,this.datePipe=o,this.dialog=l,this.config=new Ht.e,this.config.entityType=$t.b.USER,this.config.entityComponent=Ti,this.config.entityTabsComponent=Hi,this.config.entityTranslations=$t.d.get($t.b.USER),this.config.entityResources=$t.c.get($t.b.USER),this.config.columns.push(new Ht.b("createdTime","common.created-time",this.datePipe,"150px"),new Ht.d("firstName","user.first-name","33%"),new Ht.d("lastName","user.last-name","33%"),new Ht.d("email","user.email","33%")),this.config.deleteEnabled=function(e){return e&&e.id&&e.id.id!==s.authUser.id.id},this.config.deleteEntityTitle=function(e){return s.translate.instant("user.delete-user-title",{userEmail:e.email})},this.config.deleteEntityContent=function(){return s.translate.instant("user.delete-user-text")},this.config.deleteEntitiesTitle=function(e){return s.translate.instant("user.delete-users-title",{count:e})},this.config.deleteEntitiesContent=function(){return s.translate.instant("user.delete-users-text")},this.config.loadEntity=function(e){return s.userService.getUser(e.id)},this.config.saveEntity=function(e){return s.saveUser(e)},this.config.deleteEntity=function(e){return s.userService.deleteUser(e.id)},this.config.onEntityAction=function(e){return s.onUserAction(e)},this.config.addEntity=function(){return s.addUser()}}return e.prototype.resolve=function(e){var t=this,n=e.params;return this.store.pipe(Object(h.select)($.c),Object(K.a)(1)).pipe(Object(Di.a)(function(e){t.authUser=e.userDetails,t.authority=n.tenantId?X.a.TENANT_ADMIN:X.a.CUSTOMER_USER,t.authority===X.a.TENANT_ADMIN?(t.tenantId=n.tenantId,t.customerId=Kt.a,t.config.entitiesFetchFunction=function(e){return t.userService.getTenantAdmins(t.tenantId,e)}):(t.tenantId=t.authUser.tenantId.id,t.customerId=n.customerId,t.config.entitiesFetchFunction=function(e){return t.userService.getCustomerUsers(t.customerId,e)}),t.updateActionCellDescriptors(e)}),Object(Zt.b)(function(){return t.authority===X.a.TENANT_ADMIN?t.tenantService.getTenant(t.tenantId):t.customerService.getCustomer(t.customerId)}),Object(Xt.a)(function(e){return t.authority===X.a.TENANT_ADMIN?t.config.tableTitle=e.title+": "+t.translate.instant("user.tenant-admins"):t.config.tableTitle=e.title+": "+t.translate.instant("user.customer-users"),t.config}))},e.prototype.updateActionCellDescriptors=function(e){var t=this;this.config.cellActionDescriptors.splice(0),e.userTokenAccessEnabled&&this.config.cellActionDescriptors.push({name:this.authority===X.a.TENANT_ADMIN?this.translate.instant("user.login-as-tenant-admin"):this.translate.instant("user.login-as-customer-user"),mdiIcon:"mdi:login",isEnabled:function(){return!0},onAction:function(e,n){return t.loginAsUser(e,n)}})},e.prototype.saveUser=function(e){return e.tenantId=new Li.a(this.tenantId),e.customerId=new ki.a(this.customerId),e.authority=this.authority,this.userService.saveUser(e)},e.prototype.addUser=function(){return this.dialog.open(Vi,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{tenantId:this.tenantId,customerId:this.customerId,authority:this.authority}}).afterClosed()},e.prototype.loginAsUser=function(e,t){e&&e.stopPropagation(),this.authService.loginAsUser(t.id.id).subscribe()},e.prototype.displayActivationLink=function(e,t){var n=this;e&&e.stopPropagation(),this.userService.getActivationLink(t.id.id).subscribe(function(e){n.dialog.open(Ni,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{activationLink:e}})})},e.prototype.resendActivation=function(e,t){var n=this;e&&e.stopPropagation(),this.userService.sendActivationEmail(t.email).subscribe(function(){n.store.dispatch(new u.b({message:n.translate.instant("user.activation-email-sent-message"),type:"success"}))})},e.prototype.setUserCredentialsEnabled=function(e,t,n){var i=this;e&&e.stopPropagation(),this.userService.setUserCredentialsEnabled(t.id.id,n).subscribe(function(){t.additionalInfo||(t.additionalInfo={}),t.additionalInfo.userCredentialsEnabled=n,i.store.dispatch(new u.b({message:i.translate.instant(n?"user.enable-account-message":"user.disable-account-message"),type:"success"}))})},e.prototype.onUserAction=function(e){switch(e.action){case"loginAsUser":return this.loginAsUser(e.event,e.entity),!0;case"displayActivationLink":return this.displayActivationLink(e.event,e.entity),!0;case"resendActivation":return this.resendActivation(e.event,e.entity),!0;case"disableAccount":return this.setUserCredentialsEnabled(e.event,e.entity,!1),!0;case"enableAccount":return this.setUserCredentialsEnabled(e.event,e.entity,!0),!0}return!1},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](h.Store),i["\u0275\u0275inject"](Bn.a),i["\u0275\u0275inject"](zn.a),i["\u0275\u0275inject"](di.a),i["\u0275\u0275inject"](Mi.a),i["\u0275\u0275inject"](g.TranslateService),i["\u0275\u0275inject"](r.DatePipe),i["\u0275\u0275inject"](Ct.MatDialog))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0;var $i=[{path:"tenants",data:{breadcrumb:{label:"tenant.tenants",icon:"supervisor_account"}},children:[{path:"",component:qt.a,data:{auth:[X.a.SYS_ADMIN],title:"tenant.tenants"},resolve:{entitiesTableConfig:Si}},{path:":tenantId/users",component:qt.a,data:{auth:[X.a.SYS_ADMIN],title:"user.tenant-admins",breadcrumb:{label:"user.tenant-admins",icon:"account_circle"}},resolve:{entitiesTableConfig:Ui}}]}],Ki=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[Si],imports:[[a.RouterModule.forChild($i)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](Ki,{imports:[a.RouterModule],exports:[a.RouterModule]})),0;var Yi=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[r.CommonModule,vn.a,yn.a,Ki]]}),e}();function Ji(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",1),i["\u0275\u0275listener"]("click",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onEntityAction(e,"manageEdges")}),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](1,3,r.isLoading$))("fxShow",!r.isEdit),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](3,5,"customer.manage-edges")," ")}}function Xi(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"customer.title-required")," "))}function Qi(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"section",17),i["\u0275\u0275elementStart"](1,"section",18),i["\u0275\u0275element"](2,"tb-dashboard-autocomplete",19),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementStart"](4,"mat-checkbox",20),i["\u0275\u0275text"](5),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](3,5,"dashboard.home-dashboard")),i["\u0275\u0275property"]("dashboardsScope","customer")("customerId",null==n.entity?null:n.entity.id.id)("selectFirstDashboard",!1),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](6,7,"dashboard.home-dashboard-hide-toolbar")," ")}}void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](Yi,{declarations:[si,xi],imports:[r.CommonModule,vn.a,yn.a,Ki]})),0;var Zi=function(e){function t(t,n,i,r,a,o){var l=e.call(this,t,a,i,r,o)||this;return l.store=t,l.translate=n,l.entityValue=i,l.entitiesTableConfigValue=r,l.fb=a,l.cd=o,l.isPublic=!1,l.authState=Object($.a)(l.store),l}return Object(o.d)(t,e),t.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},t.prototype.buildEntityForm=function(e){return this.fb.group({title:[e?e.title:"",[s.Validators.required]],additionalInfo:this.fb.group({description:[e&&e.additionalInfo?e.additionalInfo.description:""],homeDashboardId:[e&&e.additionalInfo?e.additionalInfo.homeDashboardId:null],homeDashboardHideToolbar:[!(e&&e.additionalInfo&&Object(p.o)(e.additionalInfo.homeDashboardHideToolbar))||e.additionalInfo.homeDashboardHideToolbar]})})},t.prototype.updateEntityForm=function(e){this.isPublic=e.additionalInfo&&e.additionalInfo.isPublic,this.entityForm.patchValue({title:e.title}),this.entityForm.patchValue({additionalInfo:{description:e.additionalInfo?e.additionalInfo.description:""}}),this.entityForm.patchValue({additionalInfo:{homeDashboardId:e.additionalInfo?e.additionalInfo.homeDashboardId:null}}),this.entityForm.patchValue({additionalInfo:{homeDashboardHideToolbar:!e.additionalInfo||!Object(p.o)(e.additionalInfo.homeDashboardHideToolbar)||e.additionalInfo.homeDashboardHideToolbar}})},t.prototype.onCustomerIdCopied=function(e){this.store.dispatch(new u.b({message:this.translate.instant("customer.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},t.prototype.edgesSupportEnabled=function(){return this.authState.edgesSupportEnabled},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](g.TranslateService),i["\u0275\u0275directiveInject"]("entity"),i["\u0275\u0275directiveInject"]("entitiesTableConfig"),i["\u0275\u0275directiveInject"](s.FormBuilder),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-customer"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:43,vars:47,consts:[["fxLayout.xs","column",1,"tb-details-buttons"],["mat-raised-button","","color","accent",3,"disabled","fxShow","click"],["mat-raised-button","","color","accent",3,"disabled","fxShow","click",4,"ngIf"],["fxLayout","row","fxLayout.xs","column"],["mat-raised-button","","ngxClipboard","",3,"cbContent","fxShow","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"],["translate",""],["fxLayout","column",1,"mat-padding"],[3,"formGroup"],[3,"fxShow","disabled"],[1,"mat-block"],["matInput","","formControlName","title","required",""],[4,"ngIf"],["formGroupName","additionalInfo","fxLayout","column"],["matInput","","formControlName","description","rows","2"],["class","tb-default-dashboard","fxFlex","","fxLayout","column",4,"ngIf"],[3,"parentForm","isEdit"],["fxFlex","","fxLayout","column",1,"tb-default-dashboard"],["fxFlex","","fxLayout","column","fxLayout.gt-sm","row"],["fxFlex","","formControlName","homeDashboardId",3,"placeholder","dashboardsScope","customerId","selectFirstDashboard"],["fxFlex","","formControlName","homeDashboardHideToolbar"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"manageUsers")}),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"manageAssets")}),i["\u0275\u0275pipe"](6,"async"),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"manageDevices")}),i["\u0275\u0275pipe"](10,"async"),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"manageDashboards")}),i["\u0275\u0275pipe"](14,"async"),i["\u0275\u0275text"](15),i["\u0275\u0275pipe"](16,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](17,Ji,4,7,"button",2),i["\u0275\u0275elementStart"](18,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"delete")}),i["\u0275\u0275pipe"](19,"async"),i["\u0275\u0275text"](20),i["\u0275\u0275pipe"](21,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"div",3),i["\u0275\u0275elementStart"](23,"button",4),i["\u0275\u0275listener"]("cbOnSuccess",function(e){return t.onCustomerIdCopied(e)}),i["\u0275\u0275element"](24,"mat-icon",5),i["\u0275\u0275elementStart"](25,"span",6),i["\u0275\u0275text"](26,"customer.copyId"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](27,"div",7),i["\u0275\u0275elementStart"](28,"form",8),i["\u0275\u0275elementStart"](29,"fieldset",9),i["\u0275\u0275pipe"](30,"async"),i["\u0275\u0275elementStart"](31,"mat-form-field",10),i["\u0275\u0275elementStart"](32,"mat-label",6),i["\u0275\u0275text"](33,"customer.title"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](34,"input",11),i["\u0275\u0275template"](35,Xi,3,3,"mat-error",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](36,"div",13),i["\u0275\u0275elementStart"](37,"mat-form-field",10),i["\u0275\u0275elementStart"](38,"mat-label",6),i["\u0275\u0275text"](39,"customer.description"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](40,"textarea",14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](41,Qi,7,9,"section",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](42,"tb-contact",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](2,25,t.isLoading$))("fxShow",!t.isEdit&&!t.isPublic),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](4,27,"customer.manage-users")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](6,29,t.isLoading$))("fxShow",!t.isEdit),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](8,31,"customer.manage-assets")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](10,33,t.isLoading$))("fxShow",!t.isEdit),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](12,35,"customer.manage-devices")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](14,37,t.isLoading$))("fxShow",!t.isEdit),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](16,39,"customer.manage-dashboards")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.edgesSupportEnabled()),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](19,41,t.isLoading$))("fxShow",!t.hideDelete()&&!t.isEdit&&!t.isPublic),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](21,43,"customer.delete")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("cbContent",null==t.entity||null==t.entity.id?null:t.entity.id.id)("fxShow",!t.isEdit),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("formGroup",t.entityForm),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow",!t.isPublic)("disabled",i["\u0275\u0275pipeBind1"](30,45,t.isLoading$)||!t.isEdit),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",t.entityForm.get("title").hasError("required")),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",null==t.entity?null:t.entity.id),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("parentForm",t.entityForm)("isEdit",t.isEdit))},directives:[v.f,E.MatButton,Ie.d,r.NgIf,on.a,we.MatIcon,g.TranslateDirective,s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,x.MatFormField,x.MatLabel,S.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,s.RequiredValidator,s.FormGroupName,ai.a,x.MatError,v.b,Vt.a,D.MatCheckbox],pipes:[r.AsyncPipe,g.TranslatePipe],styles:["@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-default-dashboard[_ngcontent-%COMP%]   tb-dashboard-autocomplete[_ngcontent-%COMP%]{padding-right:12px}}@media screen and (max-width:959px){[_nghost-%COMP%]   .tb-default-dashboard[_ngcontent-%COMP%]   tb-dashboard-autocomplete[_ngcontent-%COMP%]{padding-bottom:12px}}@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-default-dashboard[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-top:16px}}"]}),t}(ii);function er(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,2),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-attribute-table",3),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,5,"attribute.attributes")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("defaultAttributeScope",r.attributeScopes.SERVER_SCOPE)("active",n.isActive)("entityId",r.entity.id)("entityName",r.entity.name)}}function tr(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,4),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-attribute-table",5),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,5,"attribute.latest-telemetry")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("defaultAttributeScope",r.latestTelemetryTypes.LATEST_TELEMETRY)("active",n.isActive)("entityId",r.entity.id)("entityName",r.entity.name)}}function nr(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,6),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-alarm-table",7),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,3,"alarm.alarms")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("active",n.isActive)("entityId",r.entity.id)}}function ir(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,8),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-event-table",9),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,5,"customer.events")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("defaultEventType",r.eventTypes.ERROR)("active",n.isActive)("tenantId",r.entity.tenantId.id)("entityId",r.entity.id)}}function rr(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,10),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-relation-table",7),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,3,"relation.relations")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("active",n.isActive)("entityId",r.entity.id)}}function ar(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,11),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-audit-log-table",12),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,4,"audit-log.audit-logs")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("active",n.isActive)("auditLogMode",r.auditLogModes.CUSTOMER)("customerId",r.entity.id)}}0,void 0;var or=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-customer-tabs"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:6,vars:6,consts:[[3,"label",4,"ngIf"],[3,"label"],["attributesTab","matTab"],[3,"defaultAttributeScope","active","entityId","entityName"],["telemetryTab","matTab"],["disableAttributeScopeSelection","",3,"defaultAttributeScope","active","entityId","entityName"],["alarmsTab","matTab"],[3,"active","entityId"],["eventsTab","matTab"],[3,"defaultEventType","active","tenantId","entityId"],["relationsTab","matTab"],["auditLogsTab","matTab"],["detailsMode","true",3,"active","auditLogMode","customerId"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,er,4,7,"mat-tab",0),i["\u0275\u0275template"](1,tr,4,7,"mat-tab",0),i["\u0275\u0275template"](2,nr,4,5,"mat-tab",0),i["\u0275\u0275template"](3,ir,4,7,"mat-tab",0),i["\u0275\u0275template"](4,rr,4,5,"mat-tab",0),i["\u0275\u0275template"](5,ar,4,6,"mat-tab",0)),2&e&&(i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity&&t.authUser.authority===t.authorities.TENANT_ADMIN))},directives:[r.NgIf,Ce.MatTab,ui.a,pi.a,mi.a,fi.a,zi.a],pipes:[g.TranslatePipe],encapsulation:2}),t}(ci.a);0,void 0;var lr=function(){function e(e,t,n,i,r){var a=this;this.customerService=e,this.translate=t,this.datePipe=n,this.router=i,this.store=r,this.config=new Ht.e,this.config.entityType=$t.b.CUSTOMER,this.config.entityComponent=Zi,this.config.entityTabsComponent=or,this.config.entityTranslations=$t.d.get($t.b.CUSTOMER),this.config.entityResources=$t.c.get($t.b.CUSTOMER);var o=Object($.a)(this.store);this.config.columns.push(new Ht.b("createdTime","common.created-time",this.datePipe,"150px"),new Ht.d("title","customer.title","25%"),new Ht.d("email","contact.email","25%"),new Ht.d("country","contact.country","25%"),new Ht.d("city","contact.city","25%")),this.config.cellActionDescriptors.push({name:this.translate.instant("customer.manage-customer-users"),icon:"account_circle",isEnabled:function(e){return!e.additionalInfo||!e.additionalInfo.isPublic},onAction:function(e,t){return a.manageCustomerUsers(e,t)}},{name:this.translate.instant("customer.manage-customer-assets"),nameFunction:function(e){return e.additionalInfo&&e.additionalInfo.isPublic?a.translate.instant("customer.manage-public-assets"):a.translate.instant("customer.manage-customer-assets")},icon:"domain",isEnabled:function(e){return!0},onAction:function(e,t){return a.manageCustomerAssets(e,t)}},{name:this.translate.instant("customer.manage-customer-devices"),nameFunction:function(e){return e.additionalInfo&&e.additionalInfo.isPublic?a.translate.instant("customer.manage-public-devices"):a.translate.instant("customer.manage-customer-devices")},icon:"devices_other",isEnabled:function(e){return!0},onAction:function(e,t){return a.manageCustomerDevices(e,t)}},{name:this.translate.instant("customer.manage-customer-dashboards"),nameFunction:function(e){return e.additionalInfo&&e.additionalInfo.isPublic?a.translate.instant("customer.manage-public-dashboards"):a.translate.instant("customer.manage-customer-dashboards")},icon:"dashboard",isEnabled:function(e){return!0},onAction:function(e,t){return a.manageCustomerDashboards(e,t)}}),o.edgesSupportEnabled&&this.config.cellActionDescriptors.push({name:this.translate.instant("customer.manage-customer-edges"),nameFunction:function(e){return e.additionalInfo&&e.additionalInfo.isPublic?a.translate.instant("customer.manage-public-edges"):a.translate.instant("customer.manage-customer-edges")},icon:"router",isEnabled:function(e){return!0},onAction:function(e,t){return a.manageCustomerEdges(e,t)}}),this.config.deleteEntityTitle=function(e){return a.translate.instant("customer.delete-customer-title",{customerTitle:e.title})},this.config.deleteEntityContent=function(){return a.translate.instant("customer.delete-customer-text")},this.config.deleteEntitiesTitle=function(e){return a.translate.instant("customer.delete-customers-title",{count:e})},this.config.deleteEntitiesContent=function(){return a.translate.instant("customer.delete-customers-text")},this.config.entitiesFetchFunction=function(e){return a.customerService.getCustomers(e)},this.config.loadEntity=function(e){return a.customerService.getCustomer(e.id)},this.config.saveEntity=function(e){return a.customerService.saveCustomer(e)},this.config.deleteEntity=function(e){return a.customerService.deleteCustomer(e.id)},this.config.onEntityAction=function(e){return a.onCustomerAction(e)},this.config.deleteEnabled=function(e){return e&&(!e.additionalInfo||!e.additionalInfo.isPublic)},this.config.entitySelectionEnabled=function(e){return e&&(!e.additionalInfo||!e.additionalInfo.isPublic)},this.config.detailsReadonly=function(e){return e&&e.additionalInfo&&e.additionalInfo.isPublic}}return e.prototype.resolve=function(){return this.config.tableTitle=this.translate.instant("customer.customers"),this.config},e.prototype.manageCustomerUsers=function(e,t){e&&e.stopPropagation(),this.router.navigateByUrl("customers/"+t.id.id+"/users")},e.prototype.manageCustomerAssets=function(e,t){e&&e.stopPropagation(),this.router.navigateByUrl("customers/"+t.id.id+"/assets")},e.prototype.manageCustomerDevices=function(e,t){e&&e.stopPropagation(),this.router.navigateByUrl("customers/"+t.id.id+"/devices")},e.prototype.manageCustomerDashboards=function(e,t){e&&e.stopPropagation(),this.router.navigateByUrl("customers/"+t.id.id+"/dashboards")},e.prototype.manageCustomerEdges=function(e,t){e&&e.stopPropagation(),this.router.navigateByUrl("customers/"+t.id.id+"/edgeInstances")},e.prototype.onCustomerAction=function(e){switch(e.action){case"manageUsers":return this.manageCustomerUsers(e.event,e.entity),!0;case"manageAssets":return this.manageCustomerAssets(e.event,e.entity),!0;case"manageDevices":return this.manageCustomerDevices(e.event,e.entity),!0;case"manageDashboards":return this.manageCustomerDashboards(e.event,e.entity),!0;case"manageEdges":return this.manageCustomerEdges(e.event,e.entity),!0}return!1},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](Mi.a),i["\u0275\u0275inject"](g.TranslateService),i["\u0275\u0275inject"](r.DatePipe),i["\u0275\u0275inject"](a.Router),i["\u0275\u0275inject"](h.Store))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0;var sr=n("JIJk"),dr=n("2OQP"),cr=n("/uUt"),ur=n("9Q2s"),pr=n("p4Q/"),mr=n("qPGf"),fr=n("8LU1"),hr=function(){function e(e,t){this.store=e,this.fb=t,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(fr.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.defaultDeviceConfigurationFormGroup=this.fb.group({configuration:[null,s.Validators.required]}),this.defaultDeviceConfigurationFormGroup.valueChanges.subscribe(function(){e.updateModel()})},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.defaultDeviceConfigurationFormGroup.disable({emitEvent:!1}):this.defaultDeviceConfigurationFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){this.defaultDeviceConfigurationFormGroup.patchValue({configuration:e},{emitEvent:!1})},e.prototype.updateModel=function(){var e=null;this.defaultDeviceConfigurationFormGroup.valid&&((e=this.defaultDeviceConfigurationFormGroup.getRawValue().configuration).type=sr.h.DEFAULT),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-default-device-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:1,vars:1,consts:[[2,"padding-bottom","16px",3,"formGroup"]],template:function(e,t){1&e&&i["\u0275\u0275element"](0,"form",0),2&e&&i["\u0275\u0275property"]("formGroup",t.defaultDeviceConfigurationFormGroup)},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective],encapsulation:2}),e}();function gr(e,t){if(1&e&&i["\u0275\u0275element"](0,"tb-default-device-configuration",3),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("required",n.required)}}0,void 0;var br=function(){function e(e,t){this.store=e,this.fb=t,this.deviceProfileType=sr.h,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(fr.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.deviceConfigurationFormGroup=this.fb.group({configuration:[null,s.Validators.required]}),this.deviceConfigurationFormGroup.valueChanges.subscribe(function(){e.updateModel()})},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.deviceConfigurationFormGroup.disable({emitEvent:!1}):this.deviceConfigurationFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){this.type=null==e?void 0:e.type;var t=Object(p.e)(e);t&&delete t.type,this.deviceConfigurationFormGroup.patchValue({configuration:t},{emitEvent:!1})},e.prototype.updateModel=function(){var e=null;this.deviceConfigurationFormGroup.valid&&((e=this.deviceConfigurationFormGroup.getRawValue().configuration).type=this.type),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-device-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:3,vars:3,consts:[[3,"formGroup"],[3,"ngSwitch"],[3,"ngSwitchCase"],["formControlName","configuration",3,"required"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275template"](2,gr,1,1,"ng-template",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.deviceConfigurationFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitch",t.type),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",t.deviceProfileType.DEFAULT))},directives:[s.NgControlStatusGroup,s.FormGroupDirective,r.NgSwitch,r.NgSwitchCase,hr,s.NgControlStatus,s.FormControlName,s.RequiredValidator],encapsulation:2}),e}();0,void 0;var vr=function(){function e(e,t){this.store=e,this.fb=t,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(fr.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.defaultDeviceTransportConfigurationFormGroup=this.fb.group({configuration:[null,s.Validators.required]}),this.defaultDeviceTransportConfigurationFormGroup.valueChanges.subscribe(function(){e.updateModel()})},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.defaultDeviceTransportConfigurationFormGroup.disable({emitEvent:!1}):this.defaultDeviceTransportConfigurationFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){this.defaultDeviceTransportConfigurationFormGroup.patchValue({configuration:e},{emitEvent:!1})},e.prototype.updateModel=function(){var e=null;this.defaultDeviceTransportConfigurationFormGroup.valid&&((e=this.defaultDeviceTransportConfigurationFormGroup.getRawValue().configuration).type=sr.j.DEFAULT),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-default-device-transport-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:1,vars:1,consts:[[2,"padding-bottom","16px",3,"formGroup"]],template:function(e,t){1&e&&i["\u0275\u0275element"](0,"form",0),2&e&&i["\u0275\u0275property"]("formGroup",t.defaultDeviceTransportConfigurationFormGroup)},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective],encapsulation:2}),e}();0,void 0;var yr=function(){function e(e,t){this.store=e,this.fb=t,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(fr.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.mqttDeviceTransportConfigurationFormGroup=this.fb.group({configuration:[null,s.Validators.required]}),this.mqttDeviceTransportConfigurationFormGroup.valueChanges.subscribe(function(){e.updateModel()})},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.mqttDeviceTransportConfigurationFormGroup.disable({emitEvent:!1}):this.mqttDeviceTransportConfigurationFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){this.mqttDeviceTransportConfigurationFormGroup.patchValue({configuration:e},{emitEvent:!1})},e.prototype.updateModel=function(){var e=null;this.mqttDeviceTransportConfigurationFormGroup.valid&&((e=this.mqttDeviceTransportConfigurationFormGroup.getRawValue().configuration).type=sr.j.MQTT),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-mqtt-device-transport-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:1,vars:1,consts:[[2,"padding-bottom","16px",3,"formGroup"]],template:function(e,t){1&e&&i["\u0275\u0275element"](0,"form",0),2&e&&i["\u0275\u0275property"]("formGroup",t.mqttDeviceTransportConfigurationFormGroup)},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective],encapsulation:2}),e}();0,void 0;var xr=n("pNH3"),Sr=function(){function e(e,t){this.store=e,this.fb=t,this.destroy$=new m.b,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(fr.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.lwm2mDeviceTransportConfigurationFormGroup=this.fb.group({powerMode:[null],edrxCycle:[{disabled:!0,value:0},s.Validators.required],psmActivityTimer:[{disabled:!0,value:0},s.Validators.required],pagingTransmissionWindow:[{disabled:!0,value:0},s.Validators.required]}),this.lwm2mDeviceTransportConfigurationFormGroup.valueChanges.pipe(Object(f.a)(this.destroy$)).subscribe(function(){e.updateModel()})},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.lwm2mDeviceTransportConfigurationFormGroup.disable({emitEvent:!1}):(this.lwm2mDeviceTransportConfigurationFormGroup.enable({emitEvent:!1}),this.lwm2mDeviceTransportConfigurationFormGroup.get("powerMode").updateValueAndValidity({onlySelf:!0}))},e.prototype.writeValue=function(e){Object(p.o)(e)?this.lwm2mDeviceTransportConfigurationFormGroup.patchValue(e,{emitEvent:!1}):this.lwm2mDeviceTransportConfigurationFormGroup.get("powerMode").patchValue(null,{emitEvent:!1}),this.disabled||this.lwm2mDeviceTransportConfigurationFormGroup.get("powerMode").updateValueAndValidity({onlySelf:!0})},e.prototype.updateModel=function(){var e=null;this.lwm2mDeviceTransportConfigurationFormGroup.valid&&((e=this.lwm2mDeviceTransportConfigurationFormGroup.value).type=sr.j.LWM2M),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-lwm2m-device-transport-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:2,vars:3,consts:[[2,"padding-bottom","16px",3,"formGroup"],[3,"parentForm","isDeviceSetting"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"form",0),i["\u0275\u0275element"](1,"tb-power-mode-settings",1),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.lwm2mDeviceTransportConfigurationFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("parentForm",t.lwm2mDeviceTransportConfigurationFormGroup)("isDeviceSetting",!0))},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,xr.a],encapsulation:2}),e}();0,void 0;var wr=function(){function e(e,t){this.store=e,this.fb=t,this.destroy$=new m.b,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(fr.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.coapDeviceTransportForm=this.fb.group({powerMode:[null],edrxCycle:[{disabled:!0,value:0},s.Validators.required],psmActivityTimer:[{disabled:!0,value:0},s.Validators.required],pagingTransmissionWindow:[{disabled:!0,value:0},s.Validators.required]}),this.coapDeviceTransportForm.valueChanges.pipe(Object(f.a)(this.destroy$)).subscribe(function(){e.updateModel()})},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.coapDeviceTransportForm.disable({emitEvent:!1}):(this.coapDeviceTransportForm.enable({emitEvent:!1}),this.coapDeviceTransportForm.get("powerMode").updateValueAndValidity({onlySelf:!0}))},e.prototype.writeValue=function(e){Object(p.o)(e)?this.coapDeviceTransportForm.patchValue(e,{emitEvent:!1}):this.coapDeviceTransportForm.get("powerMode").patchValue(null,{emitEvent:!1}),this.disabled||this.coapDeviceTransportForm.get("powerMode").updateValueAndValidity({onlySelf:!0})},e.prototype.updateModel=function(){var e=null;this.coapDeviceTransportForm.valid&&((e=this.coapDeviceTransportForm.value).type=sr.j.COAP),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-coap-device-transport-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:2,vars:3,consts:[[2,"padding-bottom","16px",3,"formGroup"],[3,"parentForm","isDeviceSetting"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"form",0),i["\u0275\u0275element"](1,"tb-power-mode-settings",1),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.coapDeviceTransportForm),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("parentForm",t.coapDeviceTransportForm)("isDeviceSetting",!0))},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,xr.a],encapsulation:2}),e}();function Cr(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.snmp.host-required")," "))}function Er(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.snmp.port-required")," "))}function Ir(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.snmp.port-format")," "))}function Tr(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",10),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"lowercase"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,n)," ")}}function Mr(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.snmp.protocol-version-required")," "))}function Dr(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.snmp.community-required")," "))}function kr(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"section"),i["\u0275\u0275elementStart"](1,"mat-form-field",11),i["\u0275\u0275elementStart"](2,"mat-label",3),i["\u0275\u0275text"](3,"device-profile.snmp.community"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"input",12),i["\u0275\u0275template"](5,Dr,3,3,"mat-error",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",n.snmpDeviceTransportConfigurationFormGroup.get("community").hasError("required")||n.snmpDeviceTransportConfigurationFormGroup.get("community").hasError("pattern"))}}function Ar(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.snmp.user-name-required")," "))}function Fr(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.snmp.security-name-required")," "))}function Pr(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",10),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",r.snmpAuthenticationProtocolTranslation.get(n)," ")}}function _r(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.snmp.authentication-protocol-required")," "))}function Nr(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.snmp.authentication-passphrase-required")," "))}function Lr(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",10),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",r.snmpPrivacyProtocolTranslation.get(n)," ")}}function Or(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.snmp.privacy-protocol-required")," "))}function Br(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.snmp.privacy-passphrase-required")," "))}function Rr(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"section"),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"mat-form-field",2),i["\u0275\u0275elementStart"](3,"mat-label",3),i["\u0275\u0275text"](4,"device-profile.snmp.user-name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](5,"input",13),i["\u0275\u0275template"](6,Ar,3,3,"mat-error",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"mat-form-field",2),i["\u0275\u0275elementStart"](8,"mat-label",3),i["\u0275\u0275text"](9,"device-profile.snmp.security-name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](10,"input",14),i["\u0275\u0275template"](11,Fr,3,3,"mat-error",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"div",1),i["\u0275\u0275elementStart"](13,"mat-form-field",15),i["\u0275\u0275elementStart"](14,"mat-label",3),i["\u0275\u0275text"](15,"device-profile.snmp.authentication-protocol"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"mat-select",16),i["\u0275\u0275template"](17,Pr,2,2,"mat-option",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](18,_r,3,3,"mat-error",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](19,"mat-form-field",2),i["\u0275\u0275elementStart"](20,"mat-label",3),i["\u0275\u0275text"](21,"device-profile.snmp.authentication-passphrase"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](22,"input",17),i["\u0275\u0275template"](23,Nr,3,3,"mat-error",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](24,"div",1),i["\u0275\u0275elementStart"](25,"mat-form-field",15),i["\u0275\u0275elementStart"](26,"mat-label",3),i["\u0275\u0275text"](27,"device-profile.snmp.privacy-protocol"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](28,"mat-select",18),i["\u0275\u0275template"](29,Lr,2,2,"mat-option",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](30,Or,3,3,"mat-error",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](31,"mat-form-field",2),i["\u0275\u0275elementStart"](32,"mat-label",3),i["\u0275\u0275text"](33,"device-profile.snmp.privacy-passphrase"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](34,"input",19),i["\u0275\u0275template"](35,Br,3,3,"mat-error",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](36,"div",1),i["\u0275\u0275elementStart"](37,"mat-form-field",2),i["\u0275\u0275elementStart"](38,"mat-label",3),i["\u0275\u0275text"](39,"device-profile.snmp.context-name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](40,"input",20),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](41,"mat-form-field",2),i["\u0275\u0275elementStart"](42,"mat-label",3),i["\u0275\u0275text"](43,"device-profile.snmp.engine-id"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](44,"input",21),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",n.snmpDeviceTransportConfigurationFormGroup.get("username").hasError("required")||n.snmpDeviceTransportConfigurationFormGroup.get("username").hasError("pattern")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",n.snmpDeviceTransportConfigurationFormGroup.get("securityName").hasError("required")||n.snmpDeviceTransportConfigurationFormGroup.get("securityName").hasError("pattern")),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngForOf",n.snmpAuthenticationProtocols),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.snmpDeviceTransportConfigurationFormGroup.get("authenticationProtocol").hasError("required")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",n.snmpDeviceTransportConfigurationFormGroup.get("authenticationPassphrase").hasError("required")||n.snmpDeviceTransportConfigurationFormGroup.get("authenticationPassphrase").hasError("pattern")),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngForOf",n.snmpPrivacyProtocols),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.snmpDeviceTransportConfigurationFormGroup.get("privacyProtocol").hasError("required")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",n.snmpDeviceTransportConfigurationFormGroup.get("privacyPassphrase").hasError("required")||n.snmpDeviceTransportConfigurationFormGroup.get("privacyPassphrase").hasError("pattern"))}}0,void 0;var jr=function(){function e(e,t){this.store=e,this.fb=t,this.snmpDeviceProtocolVersions=Object.values(sr.m),this.snmpAuthenticationProtocols=Object.values(sr.k),this.snmpAuthenticationProtocolTranslation=sr.l,this.snmpPrivacyProtocols=Object.values(sr.n),this.snmpPrivacyProtocolTranslation=sr.o,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(fr.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.snmpDeviceTransportConfigurationFormGroup=this.fb.group({host:["",[s.Validators.required,s.Validators.pattern("(.|\\s)*\\S(.|\\s)*")]],port:[null,[s.Validators.required,s.Validators.min(0),s.Validators.pattern("[0-9]*")]],protocolVersion:[sr.m.V2C,s.Validators.required],community:["public",[s.Validators.required,s.Validators.pattern("(.|\\s)*\\S(.|\\s)*")]],username:["",[s.Validators.required,s.Validators.pattern("(.|\\s)*\\S(.|\\s)*")]],securityName:["public",[s.Validators.required,s.Validators.pattern("(.|\\s)*\\S(.|\\s)*")]],contextName:[null],authenticationProtocol:[sr.k.SHA_512,s.Validators.required],authenticationPassphrase:["",[s.Validators.required,s.Validators.pattern("(.|\\s)*\\S(.|\\s)*")]],privacyProtocol:[sr.n.DES,s.Validators.required],privacyPassphrase:["",[s.Validators.required,s.Validators.pattern("(.|\\s)*\\S(.|\\s)*")]],engineId:[""]}),this.snmpDeviceTransportConfigurationFormGroup.get("protocolVersion").valueChanges.subscribe(function(t){e.updateDisabledFormValue(t)}),this.snmpDeviceTransportConfigurationFormGroup.valueChanges.subscribe(function(){e.updateModel()})},e.prototype.validate=function(){return this.snmpDeviceTransportConfigurationFormGroup.valid?null:{snmpDeviceTransportConfiguration:!1}},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.snmpDeviceTransportConfigurationFormGroup.disable({emitEvent:!1}):this.snmpDeviceTransportConfigurationFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){Object(p.o)(e)&&(this.snmpDeviceTransportConfigurationFormGroup.patchValue(e,{emitEvent:!1}),this.snmpDeviceTransportConfigurationFormGroup.enabled&&this.updateDisabledFormValue(e.protocolVersion||sr.m.V2C))},e.prototype.isV3protocolVersion=function(){return this.snmpDeviceTransportConfigurationFormGroup.get("protocolVersion").value===sr.m.V3},e.prototype.updateDisabledFormValue=function(e){e===sr.m.V3?(this.snmpDeviceTransportConfigurationFormGroup.get("community").disable({emitEvent:!1}),this.snmpDeviceTransportConfigurationFormGroup.get("username").enable({emitEvent:!1}),this.snmpDeviceTransportConfigurationFormGroup.get("securityName").enable({emitEvent:!1}),this.snmpDeviceTransportConfigurationFormGroup.get("contextName").enable({emitEvent:!1}),this.snmpDeviceTransportConfigurationFormGroup.get("authenticationProtocol").enable({emitEvent:!1}),this.snmpDeviceTransportConfigurationFormGroup.get("authenticationPassphrase").enable({emitEvent:!1}),this.snmpDeviceTransportConfigurationFormGroup.get("privacyProtocol").enable({emitEvent:!1}),this.snmpDeviceTransportConfigurationFormGroup.get("privacyPassphrase").enable({emitEvent:!1}),this.snmpDeviceTransportConfigurationFormGroup.get("engineId").enable({emitEvent:!1})):(this.snmpDeviceTransportConfigurationFormGroup.get("community").enable({emitEvent:!1}),this.snmpDeviceTransportConfigurationFormGroup.get("username").disable({emitEvent:!1}),this.snmpDeviceTransportConfigurationFormGroup.get("securityName").disable({emitEvent:!1}),this.snmpDeviceTransportConfigurationFormGroup.get("contextName").disable({emitEvent:!1}),this.snmpDeviceTransportConfigurationFormGroup.get("authenticationProtocol").disable({emitEvent:!1}),this.snmpDeviceTransportConfigurationFormGroup.get("authenticationPassphrase").disable({emitEvent:!1}),this.snmpDeviceTransportConfigurationFormGroup.get("privacyProtocol").disable({emitEvent:!1}),this.snmpDeviceTransportConfigurationFormGroup.get("privacyPassphrase").disable({emitEvent:!1}),this.snmpDeviceTransportConfigurationFormGroup.get("engineId").disable({emitEvent:!1}))},e.prototype.updateModel=function(){var e=null;this.snmpDeviceTransportConfigurationFormGroup.valid&&((e=this.snmpDeviceTransportConfigurationFormGroup.value).type=sr.j.SNMP),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-snmp-device-transport-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:s.NG_VALIDATORS,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:21,vars:8,consts:[["fxLayoutGap","8px","fxLayout","column",2,"padding-bottom","16px",3,"formGroup"],["fxLayout","row","fxLayoutGap","8px","fxLayout.xs","column"],["fxFlex",""],["translate",""],["matInput","","formControlName","host","required",""],[4,"ngIf"],["matInput","","formControlName","port","type","number","min","0","required",""],["floatLabel","always","hideRequiredMarker","",1,"mat-block"],["formControlName","protocolVersion","required",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-block"],["matInput","","formControlName","community","required",""],["matInput","","formControlName","username","required",""],["matInput","","formControlName","securityName","required",""],["fxFlex","","floatLabel","always","hideRequiredMarker",""],["formControlName","authenticationProtocol","required",""],["matInput","","formControlName","authenticationPassphrase","required",""],["formControlName","privacyProtocol","required",""],["matInput","","formControlName","privacyPassphrase","required",""],["matInput","","formControlName","contextName"],["matInput","","formControlName","engineId"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"form",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"mat-form-field",2),i["\u0275\u0275elementStart"](3,"mat-label",3),i["\u0275\u0275text"](4,"device-profile.snmp.host"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](5,"input",4),i["\u0275\u0275template"](6,Cr,3,3,"mat-error",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"mat-form-field",2),i["\u0275\u0275elementStart"](8,"mat-label",3),i["\u0275\u0275text"](9,"device-profile.snmp.port"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](10,"input",6),i["\u0275\u0275template"](11,Er,3,3,"mat-error",5),i["\u0275\u0275template"](12,Ir,3,3,"mat-error",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"mat-form-field",7),i["\u0275\u0275elementStart"](14,"mat-label",3),i["\u0275\u0275text"](15,"device-profile.snmp.protocol-version"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"mat-select",8),i["\u0275\u0275template"](17,Tr,3,4,"mat-option",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](18,Mr,3,3,"mat-error",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](19,kr,6,1,"section",5),i["\u0275\u0275template"](20,Rr,45,8,"section",5),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.snmpDeviceTransportConfigurationFormGroup),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",t.snmpDeviceTransportConfigurationFormGroup.get("host").hasError("required")||t.snmpDeviceTransportConfigurationFormGroup.get("host").hasError("pattern")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.snmpDeviceTransportConfigurationFormGroup.get("port").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.snmpDeviceTransportConfigurationFormGroup.get("port").hasError("pattern")||t.snmpDeviceTransportConfigurationFormGroup.get("port").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngForOf",t.snmpDeviceProtocolVersions),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.snmpDeviceTransportConfigurationFormGroup.get("protocolVersion").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.isV3protocolVersion()),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.isV3protocolVersion()))},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,v.g,v.f,s.FormGroupDirective,x.MatFormField,v.b,x.MatLabel,g.TranslateDirective,S.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,s.RequiredValidator,r.NgIf,s.NumberValueAccessor,w.MatSelect,r.NgForOf,x.MatError,T.MatOption],pipes:[g.TranslatePipe,r.LowerCasePipe],encapsulation:2}),e}();function Vr(e,t){if(1&e&&i["\u0275\u0275element"](0,"tb-default-device-transport-configuration",3),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("required",n.required)}}function zr(e,t){if(1&e&&i["\u0275\u0275element"](0,"tb-mqtt-device-transport-configuration",3),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("required",n.required)}}function Gr(e,t){if(1&e&&i["\u0275\u0275element"](0,"tb-lwm2m-device-transport-configuration",3),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("required",n.required)}}function Wr(e,t){if(1&e&&i["\u0275\u0275element"](0,"tb-coap-device-transport-configuration",3),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("required",n.required)}}function qr(e,t){if(1&e&&i["\u0275\u0275element"](0,"tb-snmp-device-transport-configuration",3),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("required",n.required)}}0,void 0;var Hr=function(){function e(e,t){this.store=e,this.fb=t,this.deviceTransportType=sr.j,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(fr.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.deviceTransportConfigurationFormGroup=this.fb.group({configuration:[null,s.Validators.required]}),this.deviceTransportConfigurationFormGroup.valueChanges.subscribe(function(){e.updateModel()})},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.deviceTransportConfigurationFormGroup.disable({emitEvent:!1}):this.deviceTransportConfigurationFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){var t=this;this.transportType=null==e?void 0:e.type;var n=Object(p.e)(e);n&&delete n.type,setTimeout(function(){t.deviceTransportConfigurationFormGroup.patchValue({configuration:n},{emitEvent:!1})},0)},e.prototype.validate=function(){return this.deviceTransportConfigurationFormGroup.valid?null:{deviceTransportConfiguration:!1}},e.prototype.updateModel=function(){var e=null;this.deviceTransportConfigurationFormGroup.valid&&((e=this.deviceTransportConfigurationFormGroup.getRawValue().configuration).type=this.transportType),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-device-transport-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:s.NG_VALIDATORS,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:7,vars:7,consts:[[3,"formGroup"],[3,"ngSwitch"],[3,"ngSwitchCase"],["formControlName","configuration",3,"required"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275template"](2,Vr,1,1,"ng-template",2),i["\u0275\u0275template"](3,zr,1,1,"ng-template",2),i["\u0275\u0275template"](4,Gr,1,1,"ng-template",2),i["\u0275\u0275template"](5,Wr,1,1,"ng-template",2),i["\u0275\u0275template"](6,qr,1,1,"ng-template",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.deviceTransportConfigurationFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitch",t.transportType),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",t.deviceTransportType.DEFAULT),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",t.deviceTransportType.MQTT),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",t.deviceTransportType.LWM2M),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",t.deviceTransportType.COAP),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",t.deviceTransportType.SNMP))},directives:[s.NgControlStatusGroup,s.FormGroupDirective,r.NgSwitch,r.NgSwitchCase,vr,s.NgControlStatus,s.FormControlName,s.RequiredValidator,yr,Sr,wr,jr],encapsulation:2}),e}();function Ur(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-expansion-panel",3),i["\u0275\u0275elementStart"](1,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](2,"mat-panel-title"),i["\u0275\u0275elementStart"](3,"div",4),i["\u0275\u0275text"](4,"device.device-configuration"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](5,"tb-device-configuration",5),i["\u0275\u0275elementEnd"]()),2&e&&i["\u0275\u0275property"]("expanded",!0)}function $r(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-expansion-panel",3),i["\u0275\u0275elementStart"](1,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](2,"mat-panel-title"),i["\u0275\u0275elementStart"](3,"div",4),i["\u0275\u0275text"](4,"device.transport-configuration"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](5,"tb-device-transport-configuration",6),i["\u0275\u0275elementEnd"]()),2&e&&i["\u0275\u0275property"]("expanded",!0)}0,void 0;var Kr=function(){function e(e,t){this.store=e,this.fb=t,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(fr.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.deviceDataFormGroup=this.fb.group({configuration:[null,s.Validators.required],transportConfiguration:[null,s.Validators.required]}),this.deviceDataFormGroup.valueChanges.subscribe(function(){e.updateModel()})},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.deviceDataFormGroup.disable({emitEvent:!1}):this.deviceDataFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){var t,n,i=null===(t=null==e?void 0:e.configuration)||void 0===t?void 0:t.type;this.displayDeviceConfiguration=i&&sr.G.get(i).hasDeviceConfiguration;var r=null===(n=null==e?void 0:e.transportConfiguration)||void 0===n?void 0:n.type;this.displayTransportConfiguration=r&&sr.J.get(r).hasDeviceConfiguration,this.deviceDataFormGroup.patchValue({configuration:null==e?void 0:e.configuration},{emitEvent:!1}),this.deviceDataFormGroup.patchValue({transportConfiguration:null==e?void 0:e.transportConfiguration},{emitEvent:!1})},e.prototype.validate=function(){return this.deviceDataFormGroup.valid?null:{deviceDataForm:!1}},e.prototype.updateModel=function(){var e=null;this.deviceDataFormGroup.valid&&(e=this.deviceDataFormGroup.getRawValue()),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-device-data"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:s.NG_VALIDATORS,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:4,vars:3,consts:[[2,"padding-bottom","16px",3,"formGroup"],["multi","true"],[3,"expanded",4,"ngIf"],[3,"expanded"],["translate",""],["formControlName","configuration","required",""],["formControlName","transportConfiguration","required",""]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"mat-accordion",1),i["\u0275\u0275template"](2,Ur,6,1,"mat-expansion-panel",2),i["\u0275\u0275template"](3,$r,6,1,"mat-expansion-panel",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.deviceDataFormGroup),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.displayDeviceConfiguration),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.displayTransportConfiguration))},directives:[s.NgControlStatusGroup,s.FormGroupDirective,ne.MatAccordion,r.NgIf,ne.MatExpansionPanel,ne.MatExpansionPanelHeader,ne.MatExpansionPanelTitle,g.TranslateDirective,br,s.NgControlStatus,s.FormControlName,s.RequiredValidator,Hr],encapsulation:2}),e}();function Yr(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device.name-required")," "))}function Jr(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-checkbox",27),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device.overwrite-activity-time")," "))}0,void 0;var Xr=function(e){function t(t,n,i,r,a,o){var l=e.call(this,t,a,i,r,o)||this;return l.store=t,l.translate=n,l.entityValue=i,l.entitiesTableConfigValue=r,l.fb=a,l.cd=o,l.entityType=$t.b,l.otaUpdateType=dr.d,l}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){this.deviceScope=this.entitiesTableConfig.componentsData.deviceScope,this.deviceCredentials$=this.entitiesTableConfigValue.componentsData.deviceCredentials$,e.prototype.ngOnInit.call(this)},t.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},t.prototype.isAssignedToCustomer=function(e){return e&&e.customerId&&e.customerId.id!==Kt.a},t.prototype.buildForm=function(e){var t=this,n=this.fb.group({name:[e?e.name:"",[s.Validators.required]],deviceProfileId:[e?e.deviceProfileId:null,[s.Validators.required]],firmwareId:[e?e.firmwareId:null],softwareId:[e?e.softwareId:null],label:[e?e.label:""],deviceData:[e?e.deviceData:null,[s.Validators.required]],additionalInfo:this.fb.group({gateway:[!(!e||!e.additionalInfo)&&e.additionalInfo.gateway],overwriteActivityTime:[!(!e||!e.additionalInfo)&&e.additionalInfo.overwriteActivityTime],description:[e&&e.additionalInfo?e.additionalInfo.description:""]})});return n.get("deviceProfileId").valueChanges.pipe(Object(cr.a)(function(e,t){return(null==e?void 0:e.id)===(null==t?void 0:t.id)})).subscribe(function(e){e&&t.isEdit&&t.entityForm.patchValue({firmwareId:null,softwareId:null},{emitEvent:!1})}),n},t.prototype.updateForm=function(e){this.entityForm.patchValue({name:e.name,deviceProfileId:e.deviceProfileId,firmwareId:e.firmwareId,softwareId:e.softwareId,label:e.label,deviceData:e.deviceData,additionalInfo:{gateway:!!e.additionalInfo&&e.additionalInfo.gateway,overwriteActivityTime:!!e.additionalInfo&&e.additionalInfo.overwriteActivityTime,description:e.additionalInfo?e.additionalInfo.description:""}})},t.prototype.onDeviceIdCopied=function(e){this.store.dispatch(new u.b({message:this.translate.instant("device.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},t.prototype.onDeviceProfileUpdated=function(){this.entitiesTableConfig.table.updateData(!1)},t.prototype.onDeviceProfileChanged=function(e){if(e&&this.isEdit){var t=e.type,n=e.transportType,i=this.entityForm.getRawValue().deviceData;if(i){var r=!1;i.configuration.type!==t&&(i.configuration=Object(sr.u)(t),r=!0),i.transportConfiguration.type!==n&&(i.transportConfiguration=Object(sr.x)(n),r=!0),r&&(this.entityForm.patchValue({deviceData:i}),this.entityForm.markAsDirty())}else i={configuration:Object(sr.u)(t),transportConfiguration:Object(sr.x)(n)},this.entityForm.patchValue({deviceData:i}),this.entityForm.markAsDirty()}},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](g.TranslateService),i["\u0275\u0275directiveInject"]("entity"),i["\u0275\u0275directiveInject"]("entitiesTableConfig"),i["\u0275\u0275directiveInject"](s.FormBuilder),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-device"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:67,vars:75,consts:[["fxLayout.xs","column",1,"tb-details-buttons"],["mat-raised-button","","color","accent",3,"disabled","fxShow","click"],["mat-raised-button","","color","accent","fxFlex.xs","",3,"disabled","fxShow","click"],["fxLayout","row","fxLayout.xs","column"],["mat-raised-button","","ngxClipboard","",3,"cbContent","disabled","fxShow","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"],["translate",""],[3,"fxShow","disabled","credentials$","deviceId"],["fxLayout","column",1,"mat-padding"],[1,"mat-block",3,"fxShow"],["matInput","","disabled","",3,"ngModel"],[1,"tb-small",2,"padding-bottom","10px","padding-left","2px",3,"fxShow"],[3,"formGroup"],[3,"disabled"],[1,"mat-block"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["required","","formControlName","deviceProfileId",3,"selectDefaultProfile","deviceProfileUpdated","deviceProfileChanged"],["matInput","","formControlName","label"],["formControlName","firmwareId",3,"useFullEntityId","type","deviceProfileId"],["formControlName","softwareId",3,"useFullEntityId","type","deviceProfileId"],["formControlName","deviceData","required",""],["formGroupName","additionalInfo","fxLayout","column"],["fxLayout","row","fxLayout.xs","column",2,"padding-bottom","16px"],["fxFlex.gt-sm","30","fxFlex","","formControlName","gateway"],["fxFlex","","formControlName","overwriteActivityTime",4,"ngIf"],["matInput","","formControlName","description","rows","2"],["fxFlex","","formControlName","overwriteActivityTime"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"makePublic")}),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"assignToCustomer")}),i["\u0275\u0275pipe"](6,"async"),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"unassignFromCustomer")}),i["\u0275\u0275pipe"](10,"async"),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"manageCredentials")}),i["\u0275\u0275pipe"](14,"async"),i["\u0275\u0275text"](15),i["\u0275\u0275pipe"](16,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"unassignFromEdge")}),i["\u0275\u0275pipe"](18,"async"),i["\u0275\u0275text"](19),i["\u0275\u0275pipe"](20,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](21,"button",2),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"delete")}),i["\u0275\u0275pipe"](22,"async"),i["\u0275\u0275text"](23),i["\u0275\u0275pipe"](24,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](25,"div",3),i["\u0275\u0275elementStart"](26,"button",4),i["\u0275\u0275listener"]("cbOnSuccess",function(e){return t.onDeviceIdCopied(e)}),i["\u0275\u0275pipe"](27,"async"),i["\u0275\u0275element"](28,"mat-icon",5),i["\u0275\u0275elementStart"](29,"span",6),i["\u0275\u0275text"](30,"device.copyId"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](31,"tb-copy-device-credentials",7),i["\u0275\u0275pipe"](32,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](33,"div",8),i["\u0275\u0275elementStart"](34,"mat-form-field",9),i["\u0275\u0275elementStart"](35,"mat-label",6),i["\u0275\u0275text"](36,"device.assignedToCustomer"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](37,"input",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](38,"div",11),i["\u0275\u0275text"](39),i["\u0275\u0275pipe"](40,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](41,"form",12),i["\u0275\u0275elementStart"](42,"fieldset",13),i["\u0275\u0275pipe"](43,"async"),i["\u0275\u0275elementStart"](44,"mat-form-field",14),i["\u0275\u0275elementStart"](45,"mat-label",6),i["\u0275\u0275text"](46,"device.name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](47,"input",15),i["\u0275\u0275template"](48,Yr,3,3,"mat-error",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](49,"tb-device-profile-autocomplete",17),i["\u0275\u0275listener"]("deviceProfileUpdated",function(){return t.onDeviceProfileUpdated()})("deviceProfileChanged",function(e){return t.onDeviceProfileChanged(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](50,"mat-form-field",14),i["\u0275\u0275elementStart"](51,"mat-label",6),i["\u0275\u0275text"](52,"device.label"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](53,"input",18),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](54,"tb-ota-package-autocomplete",19),i["\u0275\u0275element"](55,"tb-ota-package-autocomplete",20),i["\u0275\u0275element"](56,"tb-device-data",21),i["\u0275\u0275elementStart"](57,"div",22),i["\u0275\u0275elementStart"](58,"div",23),i["\u0275\u0275elementStart"](59,"mat-checkbox",24),i["\u0275\u0275text"](60),i["\u0275\u0275pipe"](61,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](62,Jr,3,3,"mat-checkbox",25),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](63,"mat-form-field",14),i["\u0275\u0275elementStart"](64,"mat-label",6),i["\u0275\u0275text"](65,"device.description"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](66,"textarea",26),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](2,41,t.isLoading$))("fxShow",!(t.isEdit||"tenant"!==t.deviceScope||t.isAssignedToCustomer(t.entity)||null!=t.entity&&t.entity.customerIsPublic)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](4,43,"device.make-public")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](6,45,t.isLoading$))("fxShow",!t.isEdit&&"tenant"===t.deviceScope&&!t.isAssignedToCustomer(t.entity)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](8,47,"device.assign-to-customer")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](10,49,t.isLoading$))("fxShow",!t.isEdit&&("customer"===t.deviceScope||"tenant"===t.deviceScope)&&t.isAssignedToCustomer(t.entity)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](12,51,null!=t.entity&&t.entity.customerIsPublic?"device.make-private":"device.unassign-from-customer")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](14,53,t.isLoading$))("fxShow",!t.isEdit),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](16,55,"customer_user"===t.deviceScope||"edge_customer_user"===t.deviceScope?"device.view-credentials":"device.manage-credentials")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](18,57,t.isLoading$))("fxShow",!t.isEdit&&"edge"===t.deviceScope),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](20,59,"edge.unassign-from-edge")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](22,61,t.isLoading$))("fxShow",!t.hideDelete()&&!t.isEdit),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](24,63,"device.delete")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("cbContent",null==t.entity||null==t.entity.id?null:t.entity.id.id)("disabled",i["\u0275\u0275pipeBind1"](27,65,t.isLoading$))("fxShow",!t.isEdit),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("fxShow",!t.isEdit)("disabled",i["\u0275\u0275pipeBind1"](32,67,t.isLoading$))("credentials$",t.deviceCredentials$)("deviceId",null==t.entity?null:t.entity.id),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("fxShow",!t.isEdit&&t.isAssignedToCustomer(t.entity)&&!(null!=t.entity&&t.entity.customerIsPublic)&&"tenant"===t.deviceScope),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngModel",null==t.entity?null:t.entity.customerTitle),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow",!t.isEdit&&(null==t.entity?null:t.entity.customerIsPublic)&&("customer"===t.deviceScope||"tenant"===t.deviceScope)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](40,69,"device.device-public")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("formGroup",t.entityForm),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](43,71,t.isLoading$)||!t.isEdit),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",t.entityForm.get("name").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("selectDefaultProfile",t.isAdd),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("useFullEntityId",!0)("type",t.otaUpdateType.FIRMWARE)("deviceProfileId",null==t.entityForm.get("deviceProfileId").value?null:t.entityForm.get("deviceProfileId").value.id),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("useFullEntityId",!0)("type",t.otaUpdateType.SOFTWARE)("deviceProfileId",null==t.entityForm.get("deviceProfileId").value?null:t.entityForm.get("deviceProfileId").value.id),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](61,73,"device.is-gateway")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.entityForm.get("additionalInfo.gateway").value))},directives:[v.f,E.MatButton,Ie.d,v.b,on.a,we.MatIcon,g.TranslateDirective,ur.a,x.MatFormField,x.MatLabel,S.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.NgModel,s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,s.FormControlName,s.RequiredValidator,r.NgIf,pr.a,mr.a,Kr,s.FormGroupName,D.MatCheckbox,x.MatError],pipes:[r.AsyncPipe,g.TranslatePipe],styles:[""]}),t}(nn.a);0,void 0;var Qr=n("DaoB"),Zr=n("gM18"),ea=n("JTB5"),ta=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n.entityType=$t.b,n}return Object(o.d)(t,e),t.prototype.deviceProfileChanged=function(e){this.entitiesTableConfig.componentsData.deviceProfileId=e,this.entitiesTableConfig.table.resetSortAndFilter(!0)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-device-table-header"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:3,consts:[[3,"ngModel","displayAllOnEmpty","editProfileEnabled","ngModelChange"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"tb-device-profile-autocomplete",0),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.deviceProfileChanged(e)}),i["\u0275\u0275elementEnd"]()),2&e&&i["\u0275\u0275property"]("ngModel",t.entitiesTableConfig.componentsData.deviceProfileId)("displayAllOnEmpty",!0)("editProfileEnabled",!1)},directives:[pr.a,s.NgControlStatus,s.NgModel],styles:["[_nghost-%COMP%]{flex:1;display:flex;justify-content:flex-start;min-width:150px}[_nghost-%COMP%]     tb-device-profile-autocomplete{width:100%}[_nghost-%COMP%]     tb-device-profile-autocomplete mat-form-field{font-size:16px}[_nghost-%COMP%]     tb-device-profile-autocomplete mat-form-field .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     tb-device-profile-autocomplete mat-form-field .mat-form-field-underline{bottom:0}@media screen and (max-width:599px){[_nghost-%COMP%]     tb-device-profile-autocomplete mat-form-field{width:100%}[_nghost-%COMP%]     tb-device-profile-autocomplete mat-form-field .mat-form-field-infix{width:auto!important}}"]}),t}(ea.a);0,void 0;var na=n("g+M/"),ia=n("10n/"),ra=n("Xa2L");function aa(e,t){1&e&&i["\u0275\u0275element"](0,"mat-progress-bar",13)}function oa(e,t){1&e&&i["\u0275\u0275element"](0,"div",14)}function la(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"section"),i["\u0275\u0275elementStart"](1,"fieldset",15),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275element"](3,"tb-device-credentials",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](2,2,n.isLoading$)||n.isReadOnly),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("deviceTransportType",n.deviceTransportType)}}function sa(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",17),i["\u0275\u0275element"](1,"mat-spinner",18),i["\u0275\u0275elementStart"](2,"span",19),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](4,1,"device.loading-device-credentials")," "))}function da(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"button",20),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](1,2,n.isLoading$)||n.deviceCredentialsFormGroup.invalid||!n.deviceCredentialsFormGroup.dirty),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](3,4,"action.save")," ")}}var ca=function(e){function t(t,n,i,r,a,o,l,s){var d=e.call(this,t,n,l)||this;return d.store=t,d.router=n,d.data=i,d.deviceService=r,d.deviceProfileService=a,d.errorStateMatcher=o,d.dialogRef=l,d.fb=s,d.loadingCredentials=!0,d.submitted=!1,d.isReadOnly=i.isReadOnly,d}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){this.deviceCredentialsFormGroup=this.fb.group({credential:[null]}),this.isReadOnly&&this.deviceCredentialsFormGroup.disable({emitEvent:!1}),this.loadDeviceCredentials()},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.loadDeviceCredentials=function(){var e=this,t=[];t.push(this.deviceService.getDeviceCredentials(this.data.deviceId)),t.push(this.deviceProfileService.getDeviceProfileInfo(this.data.deviceProfileId)),Object(ye.a)(t).subscribe(function(t){var n=t[0],i=t[1];e.deviceTransportType=i.transportType,e.deviceCredentials=n,e.deviceCredentialsFormGroup.patchValue({credential:n},{emitEvent:!1}),e.loadingCredentials=!1})},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.save=function(){var e=this;this.submitted=!0;var t=this.deviceCredentialsFormGroup.value.credential;this.deviceCredentials=Object(o.a)(Object(o.a)({},this.deviceCredentials),t),this.deviceService.saveDeviceCredentials(this.deviceCredentials).subscribe(function(t){e.dialogRef.close(t)})},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](a.Router),i["\u0275\u0275directiveInject"](Ct.MAT_DIALOG_DATA),i["\u0275\u0275directiveInject"](Qr.a),i["\u0275\u0275directiveInject"](na.a),i["\u0275\u0275directiveInject"](T.ErrorStateMatcher,4),i["\u0275\u0275directiveInject"](Ct.MatDialogRef),i["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-device-credentials-dialog"]],features:[i["\u0275\u0275ProvidersFeature"]([{provide:T.ErrorStateMatcher,useExisting:t}]),i["\u0275\u0275InheritDefinitionFeature"]],decls:23,vars:19,consts:[[2,"min-width","350px",3,"formGroup","ngSubmit"],["color","accent"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[4,"ngIf","ngIfElse"],["loadCredentials",""],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled",4,"ngIf"],["color","warn","mode","indeterminate"],[2,"height","4px"],[3,"disabled"],["formControlName","credential",3,"deviceTransportType"],["fxLayout","column","fxLayoutAlign","center center"],["color","accent","diameter","65","strokeWidth","4",2,"margin-bottom","18px"],[1,"mat-subheading-2",2,"margin-bottom","0"],["mat-raised-button","","color","accent","type","submit",3,"disabled"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"form",0),i["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),i["\u0275\u0275elementStart"](1,"mat-toolbar",1),i["\u0275\u0275elementStart"](2,"h2"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](5,"span",2),i["\u0275\u0275elementStart"](6,"button",3),i["\u0275\u0275listener"]("click",function(){return t.cancel()}),i["\u0275\u0275elementStart"](7,"mat-icon",4),i["\u0275\u0275text"](8,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](9,aa,1,0,"mat-progress-bar",5),i["\u0275\u0275pipe"](10,"async"),i["\u0275\u0275template"](11,oa,1,0,"div",6),i["\u0275\u0275pipe"](12,"async"),i["\u0275\u0275elementStart"](13,"div",7),i["\u0275\u0275template"](14,la,4,4,"section",8),i["\u0275\u0275template"](15,sa,5,3,"ng-template",null,9,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"div",10),i["\u0275\u0275elementStart"](18,"button",11),i["\u0275\u0275listener"]("click",function(){return t.cancel()}),i["\u0275\u0275pipe"](19,"async"),i["\u0275\u0275text"](20),i["\u0275\u0275pipe"](21,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](22,da,4,6,"button",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](16);i["\u0275\u0275property"]("formGroup",t.deviceCredentialsFormGroup),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,9,"device.device-credentials")),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](10,11,t.isLoading$)&&!t.loadingCredentials),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](12,13,t.isLoading$)||t.loadingCredentials),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",!t.loadingCredentials)("ngIfElse",n),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](19,15,t.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](21,17,t.isReadOnly?"action.close":"action.cancel")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.isReadOnly)}},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,It.MatToolbar,v.b,E.MatButton,we.MatIcon,r.NgIf,Ct.MatDialogContent,Ct.MatDialogActions,v.e,I.MatProgressBar,ia.a,s.NgControlStatus,s.FormControlName,v.f,ra.MatSpinner],pipes:[g.TranslatePipe,r.AsyncPipe],encapsulation:2}),t}(Et.a);0,void 0;var ua=n("uPsX"),pa=n("tM37");function ma(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,2),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-attribute-table",3),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,5,"attribute.attributes")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("defaultAttributeScope",r.attributeScopes.CLIENT_SCOPE)("active",n.isActive)("entityId",r.entity.id)("entityName",r.entity.name)}}function fa(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,4),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-attribute-table",5),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,5,"attribute.latest-telemetry")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("defaultAttributeScope",r.latestTelemetryTypes.LATEST_TELEMETRY)("active",n.isActive)("entityId",r.entity.id)("entityName",r.entity.name)}}function ha(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,6),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-alarm-table",7),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,3,"alarm.alarms")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("active",n.isActive)("entityId",r.entity.id)}}function ga(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,8),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-event-table",9),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,5,"device.events")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("defaultEventType",r.eventTypes.ERROR)("active",n.isActive)("tenantId",r.entity.tenantId.id)("entityId",r.entity.id)}}function ba(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,10),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-relation-table",7),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,3,"relation.relations")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("active",n.isActive)("entityId",r.entity.id)}}function va(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,11),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-audit-log-table",12),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,4,"audit-log.audit-logs")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("active",n.isActive)("auditLogMode",r.auditLogModes.ENTITY)("entityId",r.entity.id)}}var ya=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-device-tabs"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:6,vars:6,consts:[[3,"label",4,"ngIf"],[3,"label"],["attributesTab","matTab"],[3,"defaultAttributeScope","active","entityId","entityName"],["telemetryTab","matTab"],["disableAttributeScopeSelection","",3,"defaultAttributeScope","active","entityId","entityName"],["alarmsTab","matTab"],[3,"active","entityId"],["eventsTab","matTab"],[3,"defaultEventType","active","tenantId","entityId"],["relationsTab","matTab"],["auditLogsTab","matTab"],["detailsMode","true",3,"active","auditLogMode","entityId"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,ma,4,7,"mat-tab",0),i["\u0275\u0275template"](1,fa,4,7,"mat-tab",0),i["\u0275\u0275template"](2,ha,4,5,"mat-tab",0),i["\u0275\u0275template"](3,ga,4,7,"mat-tab",0),i["\u0275\u0275template"](4,ba,4,5,"mat-tab",0),i["\u0275\u0275template"](5,va,4,6,"mat-tab",0)),2&e&&(i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity&&t.authUser.authority===t.authorities.TENANT_ADMIN))},directives:[r.NgIf,Ce.MatTab,ui.a,pi.a,mi.a,fi.a,zi.a],pipes:[g.TranslatePipe],encapsulation:2}),t}(ci.a);0,void 0;var xa=n("SZX/"),Sa=n("TRkj"),wa=n("y7gY"),Ca=n("LCzJ"),Ea=function(){function e(e,t,n,i,r,a,o,l,s,d,c){var u=this;this.store=e,this.broadcast=t,this.deviceService=n,this.customerService=i,this.dialogService=r,this.edgeService=a,this.homeDialogs=o,this.translate=l,this.datePipe=s,this.router=d,this.dialog=c,this.config=new Ht.e,this.config.entityType=$t.b.DEVICE,this.config.entityComponent=Xr,this.config.entityTabsComponent=ya,this.config.entityTranslations=$t.d.get($t.b.DEVICE),this.config.entityResources=$t.c.get($t.b.DEVICE),this.config.addDialogStyle={width:"600px"},this.config.deleteEntityTitle=function(e){return u.translate.instant("device.delete-device-title",{deviceName:e.name})},this.config.deleteEntityContent=function(){return u.translate.instant("device.delete-device-text")},this.config.deleteEntitiesTitle=function(e){return u.translate.instant("device.delete-devices-title",{count:e})},this.config.deleteEntitiesContent=function(){return u.translate.instant("device.delete-devices-text")},this.config.loadEntity=function(e){return u.deviceService.getDeviceInfo(e.id)},this.config.saveEntity=function(e){return u.deviceService.saveDevice(e).pipe(Object(Di.a)(function(){u.broadcast.broadcast("deviceSaved")}),Object(Zt.b)(function(e){return u.deviceService.getDeviceInfo(e.id.id)}))},this.config.onEntityAction=function(e){return u.onDeviceAction(e)},this.config.detailsReadonly=function(){return"customer_user"===u.config.componentsData.deviceScope||"edge_customer_user"===u.config.componentsData.deviceScope},this.config.headerComponent=ta}return e.prototype.resolve=function(e){var t=this,n=e.params;return this.config.componentsData={deviceScope:e.data.devicesType,deviceProfileId:null,deviceCredentials$:new m.b,edgeId:n.edgeId},this.customerId=n.customerId,this.config.componentsData.edgeId=n.edgeId,this.store.pipe(Object(h.select)($.d),Object(K.a)(1)).pipe(Object(Di.a)(function(n){n.authority===X.a.CUSTOMER_USER&&("edge"===e.data.devicesType?t.config.componentsData.deviceScope="edge_customer_user":t.config.componentsData.deviceScope="customer_user",t.customerId=n.customerId)}),Object(Zt.b)(function(){return t.customerId?t.customerService.getCustomer(t.customerId):Object(Jt.a)(null)}),Object(Xt.a)(function(e){return e?e.additionalInfo&&e.additionalInfo.isPublic?t.config.tableTitle=t.translate.instant("customer.public-devices"):t.config.tableTitle=e.title+": "+t.translate.instant("device.devices"):"edge"===t.config.componentsData.deviceScope?t.edgeService.getEdge(t.config.componentsData.edgeId).subscribe(function(e){return t.config.tableTitle=e.name+": "+t.translate.instant("device.devices")}):t.config.tableTitle=t.translate.instant("device.devices"),t.config.columns=t.configureColumns(t.config.componentsData.deviceScope),t.configureEntityFunctions(t.config.componentsData.deviceScope),t.config.cellActionDescriptors=t.configureCellActions(t.config.componentsData.deviceScope),t.config.groupActionDescriptors=t.configureGroupActions(t.config.componentsData.deviceScope),t.config.addActionDescriptors=t.configureAddActions(t.config.componentsData.deviceScope),t.config.addEnabled=!("customer_user"===t.config.componentsData.deviceScope||"edge_customer_user"===t.config.componentsData.deviceScope),t.config.entitiesDeleteEnabled="tenant"===t.config.componentsData.deviceScope,t.config.deleteEnabled=function(){return"tenant"===t.config.componentsData.deviceScope},t.config}))},e.prototype.configureColumns=function(e){var t=[new Ht.b("createdTime","common.created-time",this.datePipe,"150px"),new Ht.d("name","device.name","25%"),new Ht.d("deviceProfileName","device-profile.device-profile","25%"),new Ht.d("label","device.label","25%")];return"tenant"===e&&t.push(new Ht.d("customerTitle","customer.customer","25%"),new Ht.d("customerIsPublic","device.public","60px",function(e){return Object(Ht.f)(e.customerIsPublic)},function(){return{}},!1)),t.push(new Ht.d("gateway","device.is-gateway","60px",function(e){return Object(Ht.f)(e.additionalInfo&&e.additionalInfo.gateway)},function(){return{}},!1)),t},e.prototype.configureEntityFunctions=function(e){var t=this;"tenant"===e?(this.config.entitiesFetchFunction=function(e){return t.deviceService.getTenantDeviceInfosByDeviceProfileId(e,null!==t.config.componentsData.deviceProfileId?t.config.componentsData.deviceProfileId.id:"")},this.config.deleteEntity=function(e){return t.deviceService.deleteDevice(e.id)}):"edge"===e||"edge_customer_user"===e?this.config.entitiesFetchFunction=function(e){return t.deviceService.getEdgeDevices(t.config.componentsData.edgeId,e,t.config.componentsData.edgeType)}:(this.config.entitiesFetchFunction=function(e){return t.deviceService.getCustomerDeviceInfosByDeviceProfileId(t.customerId,e,null!==t.config.componentsData.deviceProfileId?t.config.componentsData.deviceProfileId.id:"")},this.config.deleteEntity=function(e){return t.deviceService.unassignDeviceFromCustomer(e.id)})},e.prototype.configureCellActions=function(e){var t=this,n=[];return"tenant"===e&&n.push({name:this.translate.instant("device.make-public"),icon:"share",isEnabled:function(e){return!e.customerId||e.customerId.id===Kt.a},onAction:function(e,n){return t.makePublic(e,n)}},{name:this.translate.instant("device.assign-to-customer"),icon:"assignment_ind",isEnabled:function(e){return!e.customerId||e.customerId.id===Kt.a},onAction:function(e,n){return t.assignToCustomer(e,[n.id])}},{name:this.translate.instant("device.unassign-from-customer"),icon:"assignment_return",isEnabled:function(e){return e.customerId&&e.customerId.id!==Kt.a&&!e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}},{name:this.translate.instant("device.make-private"),icon:"reply",isEnabled:function(e){return e.customerId&&e.customerId.id!==Kt.a&&e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}},{name:this.translate.instant("device.manage-credentials"),icon:"security",isEnabled:function(){return!0},onAction:function(e,n){return t.manageCredentials(e,n)}}),"customer"===e&&n.push({name:this.translate.instant("device.unassign-from-customer"),icon:"assignment_return",isEnabled:function(e){return e.customerId&&e.customerId.id!==Kt.a&&!e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}},{name:this.translate.instant("device.make-private"),icon:"reply",isEnabled:function(e){return e.customerId&&e.customerId.id!==Kt.a&&e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}},{name:this.translate.instant("device.manage-credentials"),icon:"security",isEnabled:function(){return!0},onAction:function(e,n){return t.manageCredentials(e,n)}}),"customer_user"!==e&&"edge_customer_user"!==e||n.push({name:this.translate.instant("device.view-credentials"),icon:"security",isEnabled:function(){return!0},onAction:function(e,n){return t.manageCredentials(e,n)}}),"edge"===e&&n.push({name:this.translate.instant("edge.unassign-from-edge"),icon:"assignment_return",isEnabled:function(e){return!0},onAction:function(e,n){return t.unassignFromEdge(e,n)}}),n},e.prototype.configureGroupActions=function(e){var t=this,n=[];return"tenant"===e&&n.push({name:this.translate.instant("device.assign-devices"),icon:"assignment_ind",isEnabled:!0,onAction:function(e,n){return t.assignToCustomer(e,n.map(function(e){return e.id}))}}),"customer"===e&&n.push({name:this.translate.instant("device.unassign-devices"),icon:"assignment_return",isEnabled:!0,onAction:function(e,n){return t.unassignDevicesFromCustomer(e,n)}}),"edge"===e&&n.push({name:this.translate.instant("device.unassign-devices-from-edge"),icon:"assignment_return",isEnabled:!0,onAction:function(e,n){return t.unassignDevicesFromEdge(e,n)}}),n},e.prototype.configureAddActions=function(e){var t=this,n=[];return"tenant"===e&&n.push({name:this.translate.instant("device.add-device-text"),icon:"insert_drive_file",isEnabled:function(){return!0},onAction:function(e){return t.deviceWizard(e)}},{name:this.translate.instant("device.import"),icon:"file_upload",isEnabled:function(){return!0},onAction:function(e){return t.importDevices(e)}}),"customer"===e&&n.push({name:this.translate.instant("device.assign-new-device"),icon:"add",isEnabled:function(){return!0},onAction:function(e){return t.addDevicesToCustomer(e)}}),"edge"===e&&n.push({name:this.translate.instant("device.assign-new-device"),icon:"add",isEnabled:function(){return!0},onAction:function(e){return t.addDevicesToEdge(e)}}),n},e.prototype.importDevices=function(e){var t=this;this.homeDialogs.importEntities($t.b.DEVICE).subscribe(function(e){e&&(t.broadcast.broadcast("deviceSaved"),t.config.table.updateData())})},e.prototype.deviceWizard=function(e){var t=this;this.dialog.open(Sa.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entitiesTableConfig:this.config.table.entitiesTableConfig}}).afterClosed().subscribe(function(e){e&&t.config.table.updateData()})},e.prototype.addDevicesToCustomer=function(e){var t=this;e&&e.stopPropagation(),this.dialog.open(pa.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{customerId:this.customerId,entityType:$t.b.DEVICE}}).afterClosed().subscribe(function(e){e&&t.config.table.updateData()})},e.prototype.makePublic=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("device.make-public-device-title",{deviceName:t.name}),this.translate.instant("device.make-public-device-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){e&&n.deviceService.makeDevicePublic(t.id.id).subscribe(function(){n.config.table.updateData()})})},e.prototype.assignToCustomer=function(e,t){var n=this;e&&e.stopPropagation(),this.dialog.open(ua.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entityIds:t,entityType:$t.b.DEVICE}}).afterClosed().subscribe(function(e){e&&n.config.table.updateData()})},e.prototype.unassignFromCustomer=function(e,t){var n,i,r=this;e&&e.stopPropagation(),t.customerIsPublic?(n=this.translate.instant("device.make-private-device-title",{deviceName:t.name}),i=this.translate.instant("device.make-private-device-text")):(n=this.translate.instant("device.unassign-device-title",{deviceName:t.name}),i=this.translate.instant("device.unassign-device-text")),this.dialogService.confirm(n,i,this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){e&&r.deviceService.unassignDeviceFromCustomer(t.id.id).subscribe(function(){r.config.table.updateData()})})},e.prototype.unassignDevicesFromCustomer=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("device.unassign-devices-title",{count:t.length}),this.translate.instant("device.unassign-devices-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){if(e){var i=[];t.forEach(function(e){i.push(n.deviceService.unassignDeviceFromCustomer(e.id.id))}),Object(ye.a)(i).subscribe(function(){n.config.table.updateData()})}})},e.prototype.manageCredentials=function(e,t){var n=this;e&&e.stopPropagation(),this.dialog.open(ca,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{deviceId:t.id.id,deviceProfileId:t.deviceProfileId.id,isReadOnly:"customer_user"===this.config.componentsData.deviceScope||"edge_customer_user"===this.config.componentsData.deviceScope}}).afterClosed().subscribe(function(e){Object(p.o)(e)&&n.config.componentsData.deviceCredentials$.next(e)})},e.prototype.onDeviceAction=function(e){switch(e.action){case"makePublic":return this.makePublic(e.event,e.entity),!0;case"assignToCustomer":return this.assignToCustomer(e.event,[e.entity.id]),!0;case"unassignFromCustomer":return this.unassignFromCustomer(e.event,e.entity),!0;case"unassignFromEdge":return this.unassignFromEdge(e.event,e.entity),!0;case"manageCredentials":return this.manageCredentials(e.event,e.entity),!0}return!1},e.prototype.addDevicesToEdge=function(e){var t=this;e&&e.stopPropagation(),this.dialog.open(Ca.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{edgeId:this.config.componentsData.edgeId,entityType:$t.b.DEVICE}}).afterClosed().subscribe(function(e){e&&t.config.table.updateData()})},e.prototype.unassignFromEdge=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("device.unassign-device-from-edge-title",{deviceName:t.name}),this.translate.instant("device.unassign-device-from-edge-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){e&&n.deviceService.unassignDeviceFromEdge(n.config.componentsData.edgeId,t.id.id).subscribe(function(){n.config.table.updateData()})})},e.prototype.unassignDevicesFromEdge=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("device.unassign-devices-from-edge-title",{count:t.length}),this.translate.instant("device.unassign-devices-from-edge-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){if(e){var i=[];t.forEach(function(e){i.push(n.deviceService.unassignDeviceFromEdge(n.config.componentsData.edgeId,e.id.id))}),Object(ye.a)(i).subscribe(function(){n.config.table.updateData()})}})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](h.Store),i["\u0275\u0275inject"](Zr.a),i["\u0275\u0275inject"](Qr.a),i["\u0275\u0275inject"](Mi.a),i["\u0275\u0275inject"](Y.a),i["\u0275\u0275inject"](wa.a),i["\u0275\u0275inject"](xa.a),i["\u0275\u0275inject"](g.TranslateService),i["\u0275\u0275inject"](r.DatePipe),i["\u0275\u0275inject"](a.Router),i["\u0275\u0275inject"](Ct.MatDialog))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0;var Ia=n("1y+p"),Ta=n("6XAR");function Ma(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"asset.name-required")," "))}var Da=function(e){function t(t,n,i,r,a,o){var l=e.call(this,t,a,i,r,o)||this;return l.store=t,l.translate=n,l.entityValue=i,l.entitiesTableConfigValue=r,l.fb=a,l.cd=o,l.entityType=$t.b,l}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){this.assetScope=this.entitiesTableConfig.componentsData.assetScope,e.prototype.ngOnInit.call(this)},t.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},t.prototype.isAssignedToCustomer=function(e){return e&&e.customerId&&e.customerId.id!==Kt.a},t.prototype.buildForm=function(e){return this.fb.group({name:[e?e.name:"",[s.Validators.required]],type:[e?e.type:null,[s.Validators.required]],label:[e?e.label:""],additionalInfo:this.fb.group({description:[e&&e.additionalInfo?e.additionalInfo.description:""]})})},t.prototype.updateForm=function(e){this.entityForm.patchValue({name:e.name}),this.entityForm.patchValue({type:e.type}),this.entityForm.patchValue({label:e.label}),this.entityForm.patchValue({additionalInfo:{description:e.additionalInfo?e.additionalInfo.description:""}})},t.prototype.onAssetIdCopied=function(e){this.store.dispatch(new u.b({message:this.translate.instant("asset.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](g.TranslateService),i["\u0275\u0275directiveInject"]("entity"),i["\u0275\u0275directiveInject"]("entitiesTableConfig"),i["\u0275\u0275directiveInject"](s.FormBuilder),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-asset"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:52,vars:50,consts:[["fxLayout.xs","column",1,"tb-details-buttons"],["mat-raised-button","","color","accent",3,"disabled","fxShow","click"],["fxLayout","row","fxLayout.xs","column"],["mat-raised-button","","ngxClipboard","",3,"cbContent","fxShow","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"],["translate",""],["fxLayout","column",1,"mat-padding"],[1,"mat-block",3,"fxShow"],["matInput","","disabled","",3,"ngModel"],[1,"tb-small",2,"padding-bottom","10px","padding-left","2px",3,"fxShow"],[3,"formGroup"],[3,"disabled"],[1,"mat-block"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["formControlName","type",3,"required","entityType"],["matInput","","formControlName","label"],["formGroupName","additionalInfo"],["matInput","","formControlName","description","rows","2"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"makePublic")}),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"assignToCustomer")}),i["\u0275\u0275pipe"](6,"async"),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"unassignFromCustomer")}),i["\u0275\u0275pipe"](10,"async"),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"unassignFromEdge")}),i["\u0275\u0275pipe"](14,"async"),i["\u0275\u0275text"](15),i["\u0275\u0275pipe"](16,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"delete")}),i["\u0275\u0275pipe"](18,"async"),i["\u0275\u0275text"](19),i["\u0275\u0275pipe"](20,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](21,"div",2),i["\u0275\u0275elementStart"](22,"button",3),i["\u0275\u0275listener"]("cbOnSuccess",function(e){return t.onAssetIdCopied(e)}),i["\u0275\u0275element"](23,"mat-icon",4),i["\u0275\u0275elementStart"](24,"span",5),i["\u0275\u0275text"](25,"asset.copyId"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](26,"div",6),i["\u0275\u0275elementStart"](27,"mat-form-field",7),i["\u0275\u0275elementStart"](28,"mat-label",5),i["\u0275\u0275text"](29,"asset.assignedToCustomer"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](30,"input",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](31,"div",9),i["\u0275\u0275text"](32),i["\u0275\u0275pipe"](33,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](34,"form",10),i["\u0275\u0275elementStart"](35,"fieldset",11),i["\u0275\u0275pipe"](36,"async"),i["\u0275\u0275elementStart"](37,"mat-form-field",12),i["\u0275\u0275elementStart"](38,"mat-label",5),i["\u0275\u0275text"](39,"asset.name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](40,"input",13),i["\u0275\u0275template"](41,Ma,3,3,"mat-error",14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](42,"tb-entity-subtype-autocomplete",15),i["\u0275\u0275elementStart"](43,"mat-form-field",12),i["\u0275\u0275elementStart"](44,"mat-label",5),i["\u0275\u0275text"](45,"asset.label"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](46,"input",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](47,"div",17),i["\u0275\u0275elementStart"](48,"mat-form-field",12),i["\u0275\u0275elementStart"](49,"mat-label",5),i["\u0275\u0275text"](50,"asset.description"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](51,"textarea",18),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](2,26,t.isLoading$))("fxShow",!(t.isEdit||"tenant"!==t.assetScope||t.isAssignedToCustomer(t.entity)||null!=t.entity&&t.entity.customerIsPublic)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](4,28,"asset.make-public")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](6,30,t.isLoading$))("fxShow",!t.isEdit&&"tenant"===t.assetScope&&!t.isAssignedToCustomer(t.entity)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](8,32,"asset.assign-to-customer")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](10,34,t.isLoading$))("fxShow",!t.isEdit&&("customer"===t.assetScope||"tenant"===t.assetScope)&&t.isAssignedToCustomer(t.entity)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](12,36,null!=t.entity&&t.entity.customerIsPublic?"asset.make-private":"asset.unassign-from-customer")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](14,38,t.isLoading$))("fxShow",!t.isEdit&&"edge"===t.assetScope),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](16,40,"edge.unassign-from-edge")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](18,42,t.isLoading$))("fxShow",!t.hideDelete()&&!t.isEdit),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](20,44,"asset.delete")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("cbContent",null==t.entity||null==t.entity.id?null:t.entity.id.id)("fxShow",!t.isEdit),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("fxShow",!t.isEdit&&t.isAssignedToCustomer(t.entity)&&!(null!=t.entity&&t.entity.customerIsPublic)&&"tenant"===t.assetScope),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngModel",null==t.entity?null:t.entity.customerTitle),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow",!t.isEdit&&(null==t.entity?null:t.entity.customerIsPublic)&&("customer"===t.assetScope||"tenant"===t.assetScope)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](33,46,"asset.asset-public")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("formGroup",t.entityForm),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](36,48,t.isLoading$)||!t.isEdit),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",t.entityForm.get("name").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("required",!0)("entityType",t.entityType.ASSET))},directives:[v.f,E.MatButton,Ie.d,on.a,we.MatIcon,g.TranslateDirective,x.MatFormField,x.MatLabel,S.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.NgModel,s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,s.FormControlName,s.RequiredValidator,r.NgIf,Ta.a,s.FormGroupName,x.MatError],pipes:[r.AsyncPipe,g.TranslatePipe],styles:[""]}),t}(nn.a);0,void 0;var ka=n("4bh6"),Aa=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n.entityType=$t.b,n}return Object(o.d)(t,e),t.prototype.assetTypeChanged=function(e){this.entitiesTableConfig.componentsData.assetType=e,this.entitiesTableConfig.table.resetSortAndFilter(!0)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-asset-table-header"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:3,consts:[[3,"showLabel","entityType","ngModel","ngModelChange"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"tb-entity-subtype-select",0),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.assetTypeChanged(e)}),i["\u0275\u0275elementEnd"]()),2&e&&i["\u0275\u0275property"]("showLabel",!0)("entityType",t.entityType.ASSET)("ngModel",t.entitiesTableConfig.componentsData.assetType)},directives:[ka.a,s.NgControlStatus,s.NgModel],styles:["[_nghost-%COMP%]{flex:1;display:flex;justify-content:flex-start;min-width:150px}[_nghost-%COMP%]     tb-entity-subtype-select{width:100%}[_nghost-%COMP%]     tb-entity-subtype-select mat-form-field{font-size:16px}[_nghost-%COMP%]     tb-entity-subtype-select mat-form-field .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     tb-entity-subtype-select mat-form-field .mat-form-field-underline{bottom:0}@media screen and (max-width:599px){[_nghost-%COMP%]     tb-entity-subtype-select mat-form-field{width:100%}[_nghost-%COMP%]     tb-entity-subtype-select mat-form-field .mat-form-field-infix{width:auto!important}}"]}),t}(ea.a);function Fa(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,2),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-attribute-table",3),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,5,"attribute.attributes")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("defaultAttributeScope",r.attributeScopes.SERVER_SCOPE)("active",n.isActive)("entityId",r.entity.id)("entityName",r.entity.name)}}function Pa(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,4),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-attribute-table",5),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,5,"attribute.latest-telemetry")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("defaultAttributeScope",r.latestTelemetryTypes.LATEST_TELEMETRY)("active",n.isActive)("entityId",r.entity.id)("entityName",r.entity.name)}}function _a(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,6),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-alarm-table",7),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,3,"alarm.alarms")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("active",n.isActive)("entityId",r.entity.id)}}function Na(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,8),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-event-table",9),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,5,"asset.events")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("defaultEventType",r.eventTypes.ERROR)("active",n.isActive)("tenantId",r.entity.tenantId.id)("entityId",r.entity.id)}}function La(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,10),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-relation-table",7),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,3,"relation.relations")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("active",n.isActive)("entityId",r.entity.id)}}function Oa(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,11),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-audit-log-table",12),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,4,"audit-log.audit-logs")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("active",n.isActive)("auditLogMode",r.auditLogModes.ENTITY)("entityId",r.entity.id)}}0,void 0;var Ba=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-asset-tabs"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:6,vars:6,consts:[[3,"label",4,"ngIf"],[3,"label"],["attributesTab","matTab"],[3,"defaultAttributeScope","active","entityId","entityName"],["telemetryTab","matTab"],["disableAttributeScopeSelection","",3,"defaultAttributeScope","active","entityId","entityName"],["alarmsTab","matTab"],[3,"active","entityId"],["eventsTab","matTab"],[3,"defaultEventType","active","tenantId","entityId"],["relationsTab","matTab"],["auditLogsTab","matTab"],["detailsMode","true",3,"active","auditLogMode","entityId"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,Fa,4,7,"mat-tab",0),i["\u0275\u0275template"](1,Pa,4,7,"mat-tab",0),i["\u0275\u0275template"](2,_a,4,5,"mat-tab",0),i["\u0275\u0275template"](3,Na,4,7,"mat-tab",0),i["\u0275\u0275template"](4,La,4,5,"mat-tab",0),i["\u0275\u0275template"](5,Oa,4,6,"mat-tab",0)),2&e&&(i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity&&t.authUser.authority===t.authorities.TENANT_ADMIN))},directives:[r.NgIf,Ce.MatTab,ui.a,pi.a,mi.a,fi.a,zi.a],pipes:[g.TranslatePipe],encapsulation:2}),t}(ci.a);0,void 0;var Ra=function(){function e(e,t,n,i,r,a,o,l,s,d,c){var u=this;this.store=e,this.broadcast=t,this.assetService=n,this.customerService=i,this.edgeService=r,this.dialogService=a,this.homeDialogs=o,this.translate=l,this.datePipe=s,this.router=d,this.dialog=c,this.config=new Ht.e,this.config.entityType=$t.b.ASSET,this.config.entityComponent=Da,this.config.entityTabsComponent=Ba,this.config.entityTranslations=$t.d.get($t.b.ASSET),this.config.entityResources=$t.c.get($t.b.ASSET),this.config.deleteEntityTitle=function(e){return u.translate.instant("asset.delete-asset-title",{assetName:e.name})},this.config.deleteEntityContent=function(){return u.translate.instant("asset.delete-asset-text")},this.config.deleteEntitiesTitle=function(e){return u.translate.instant("asset.delete-assets-title",{count:e})},this.config.deleteEntitiesContent=function(){return u.translate.instant("asset.delete-assets-text")},this.config.loadEntity=function(e){return u.assetService.getAssetInfo(e.id)},this.config.saveEntity=function(e){return u.assetService.saveAsset(e).pipe(Object(Di.a)(function(){u.broadcast.broadcast("assetSaved")}),Object(Zt.b)(function(e){return u.assetService.getAssetInfo(e.id.id)}))},this.config.onEntityAction=function(e){return u.onAssetAction(e)},this.config.detailsReadonly=function(){return"customer_user"===u.config.componentsData.assetScope||"edge_customer_user"===u.config.componentsData.assetScope},this.config.headerComponent=Aa}return e.prototype.resolve=function(e){var t=this,n=e.params;return this.config.componentsData={assetScope:e.data.assetsType,assetType:"",edgeId:n.edgeId},this.customerId=n.customerId,this.store.pipe(Object(h.select)($.d),Object(K.a)(1)).pipe(Object(Di.a)(function(n){n.authority===X.a.CUSTOMER_USER&&("edge"===e.data.assetsType?t.config.componentsData.assetScope="edge_customer_user":t.config.componentsData.assetScope="customer_user",t.customerId=n.customerId)}),Object(Zt.b)(function(){return t.customerId?t.customerService.getCustomer(t.customerId):Object(Jt.a)(null)}),Object(Xt.a)(function(e){return e?e.additionalInfo&&e.additionalInfo.isPublic?t.config.tableTitle=t.translate.instant("customer.public-assets"):t.config.tableTitle=e.title+": "+t.translate.instant("asset.assets"):"edge"===t.config.componentsData.assetScope?t.edgeService.getEdge(t.config.componentsData.edgeId).subscribe(function(e){return t.config.tableTitle=e.name+": "+t.translate.instant("asset.assets")}):t.config.tableTitle=t.translate.instant("asset.assets"),t.config.columns=t.configureColumns(t.config.componentsData.assetScope),t.configureEntityFunctions(t.config.componentsData.assetScope),t.config.cellActionDescriptors=t.configureCellActions(t.config.componentsData.assetScope),t.config.groupActionDescriptors=t.configureGroupActions(t.config.componentsData.assetScope),t.config.addActionDescriptors=t.configureAddActions(t.config.componentsData.assetScope),t.config.addEnabled=!("customer_user"===t.config.componentsData.assetScope||"edge_customer_user"===t.config.componentsData.assetScope),t.config.entitiesDeleteEnabled="tenant"===t.config.componentsData.assetScope,t.config.deleteEnabled=function(){return"tenant"===t.config.componentsData.assetScope},t.config}))},e.prototype.configureColumns=function(e){var t=[new Ht.b("createdTime","common.created-time",this.datePipe,"150px"),new Ht.d("name","asset.name","25%"),new Ht.d("type","asset.asset-type","25%"),new Ht.d("label","asset.label","25%")];return"tenant"===e&&t.push(new Ht.d("customerTitle","customer.customer","25%"),new Ht.d("customerIsPublic","asset.public","60px",function(e){return Object(Ht.f)(e.customerIsPublic)},function(){return{}},!1)),t},e.prototype.configureEntityFunctions=function(e){var t=this;"tenant"===e?(this.config.entitiesFetchFunction=function(e){return t.assetService.getTenantAssetInfos(e,t.config.componentsData.assetType)},this.config.deleteEntity=function(e){return t.assetService.deleteAsset(e.id)}):"edge"===e||"edge_customer_user"===e?this.config.entitiesFetchFunction=function(e){return t.assetService.getEdgeAssets(t.config.componentsData.edgeId,e,t.config.componentsData.assetType)}:(this.config.entitiesFetchFunction=function(e){return t.assetService.getCustomerAssetInfos(t.customerId,e,t.config.componentsData.assetType)},this.config.deleteEntity=function(e){return t.assetService.unassignAssetFromCustomer(e.id)})},e.prototype.configureCellActions=function(e){var t=this,n=[];return"tenant"===e&&n.push({name:this.translate.instant("asset.make-public"),icon:"share",isEnabled:function(e){return!e.customerId||e.customerId.id===Kt.a},onAction:function(e,n){return t.makePublic(e,n)}},{name:this.translate.instant("asset.assign-to-customer"),icon:"assignment_ind",isEnabled:function(e){return!e.customerId||e.customerId.id===Kt.a},onAction:function(e,n){return t.assignToCustomer(e,[n.id])}},{name:this.translate.instant("asset.unassign-from-customer"),icon:"assignment_return",isEnabled:function(e){return e.customerId&&e.customerId.id!==Kt.a&&!e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}},{name:this.translate.instant("asset.make-private"),icon:"reply",isEnabled:function(e){return e.customerId&&e.customerId.id!==Kt.a&&e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}}),"customer"===e&&n.push({name:this.translate.instant("asset.unassign-from-customer"),icon:"assignment_return",isEnabled:function(e){return e.customerId&&e.customerId.id!==Kt.a&&!e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}},{name:this.translate.instant("asset.make-private"),icon:"reply",isEnabled:function(e){return e.customerId&&e.customerId.id!==Kt.a&&e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}}),"edge"===e&&n.push({name:this.translate.instant("edge.unassign-from-edge"),icon:"assignment_return",isEnabled:function(e){return!0},onAction:function(e,n){return t.unassignFromEdge(e,n)}}),n},e.prototype.configureGroupActions=function(e){var t=this,n=[];return"tenant"===e&&n.push({name:this.translate.instant("asset.assign-assets"),icon:"assignment_ind",isEnabled:!0,onAction:function(e,n){return t.assignToCustomer(e,n.map(function(e){return e.id}))}}),"customer"===e&&n.push({name:this.translate.instant("asset.unassign-assets"),icon:"assignment_return",isEnabled:!0,onAction:function(e,n){return t.unassignAssetsFromCustomer(e,n)}}),"edge"===e&&n.push({name:this.translate.instant("asset.unassign-assets-from-edge"),icon:"assignment_return",isEnabled:!0,onAction:function(e,n){return t.unassignAssetsFromEdge(e,n)}}),n},e.prototype.configureAddActions=function(e){var t=this,n=[];return"tenant"===e&&n.push({name:this.translate.instant("asset.add-asset-text"),icon:"insert_drive_file",isEnabled:function(){return!0},onAction:function(e){return t.config.table.addEntity(e)}},{name:this.translate.instant("asset.import"),icon:"file_upload",isEnabled:function(){return!0},onAction:function(e){return t.importAssets(e)}}),"customer"===e&&n.push({name:this.translate.instant("asset.assign-new-asset"),icon:"add",isEnabled:function(){return!0},onAction:function(e){return t.addAssetsToCustomer(e)}}),"edge"===e&&n.push({name:this.translate.instant("asset.assign-new-asset"),icon:"add",isEnabled:function(){return!0},onAction:function(e){return t.addAssetsToEdge(e)}}),n},e.prototype.importAssets=function(e){var t=this;this.homeDialogs.importEntities($t.b.ASSET).subscribe(function(e){e&&(t.broadcast.broadcast("assetSaved"),t.config.table.updateData())})},e.prototype.addAssetsToCustomer=function(e){var t=this;e&&e.stopPropagation(),this.dialog.open(pa.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{customerId:this.customerId,entityType:$t.b.ASSET}}).afterClosed().subscribe(function(e){e&&t.config.table.updateData()})},e.prototype.makePublic=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("asset.make-public-asset-title",{assetName:t.name}),this.translate.instant("asset.make-public-asset-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){e&&n.assetService.makeAssetPublic(t.id.id).subscribe(function(){n.config.table.updateData()})})},e.prototype.assignToCustomer=function(e,t){var n=this;e&&e.stopPropagation(),this.dialog.open(ua.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entityIds:t,entityType:$t.b.ASSET}}).afterClosed().subscribe(function(e){e&&n.config.table.updateData()})},e.prototype.unassignFromCustomer=function(e,t){var n,i,r=this;e&&e.stopPropagation(),t.customerIsPublic?(n=this.translate.instant("asset.make-private-asset-title",{assetName:t.name}),i=this.translate.instant("asset.make-private-asset-text")):(n=this.translate.instant("asset.unassign-asset-title",{assetName:t.name}),i=this.translate.instant("asset.unassign-asset-text")),this.dialogService.confirm(n,i,this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){e&&r.assetService.unassignAssetFromCustomer(t.id.id).subscribe(function(){r.config.table.updateData()})})},e.prototype.unassignAssetsFromCustomer=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("asset.unassign-assets-title",{count:t.length}),this.translate.instant("asset.unassign-assets-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){if(e){var i=[];t.forEach(function(e){i.push(n.assetService.unassignAssetFromCustomer(e.id.id))}),Object(ye.a)(i).subscribe(function(){n.config.table.updateData()})}})},e.prototype.onAssetAction=function(e){switch(e.action){case"makePublic":return this.makePublic(e.event,e.entity),!0;case"assignToCustomer":return this.assignToCustomer(e.event,[e.entity.id]),!0;case"unassignFromCustomer":return this.unassignFromCustomer(e.event,e.entity),!0;case"unassignFromEdge":return this.unassignFromEdge(e.event,e.entity),!0}return!1},e.prototype.addAssetsToEdge=function(e){var t=this;e&&e.stopPropagation(),this.dialog.open(Ca.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{edgeId:this.config.componentsData.edgeId,entityType:$t.b.ASSET}}).afterClosed().subscribe(function(e){e&&t.config.table.updateData()})},e.prototype.unassignFromEdge=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("asset.unassign-asset-from-edge-title",{assetName:t.name}),this.translate.instant("asset.unassign-asset-from-edge-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){e&&n.assetService.unassignAssetFromEdge(n.config.componentsData.edgeId,t.id.id).subscribe(function(){n.config.table.updateData()})})},e.prototype.unassignAssetsFromEdge=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("asset.unassign-assets-from-edge-title",{count:t.length}),this.translate.instant("asset.unassign-assets-from-edge-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){if(e){var i=[];t.forEach(function(e){i.push(n.assetService.unassignAssetFromEdge(n.config.componentsData.edgeId,e.id.id))}),Object(ye.a)(i).subscribe(function(){n.config.table.updateData()})}})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](h.Store),i["\u0275\u0275inject"](Zr.a),i["\u0275\u0275inject"](Ia.a),i["\u0275\u0275inject"](Mi.a),i["\u0275\u0275inject"](wa.a),i["\u0275\u0275inject"](Y.a),i["\u0275\u0275inject"](xa.a),i["\u0275\u0275inject"](g.TranslateService),i["\u0275\u0275inject"](r.DatePipe),i["\u0275\u0275inject"](a.Router),i["\u0275\u0275inject"](Ct.MatDialog))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0;var ja=n("cX0b"),Va=n("ekQc");function za(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"edge.name-required")," "))}function Ga(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"edge.edge-license-key-required")," "))}function Wa(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"edge.cloud-endpoint-required")," "))}var qa=function(e){function t(t,n,i,r,a,o){var l=e.call(this,t,a,i,r,o)||this;return l.store=t,l.translate=n,l.entityValue=i,l.entitiesTableConfigValue=r,l.fb=a,l.cd=o,l.entityType=$t.b,l}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){this.edgeScope=this.entitiesTableConfig.componentsData.edgeScope,this.entityForm.patchValue({cloudEndpoint:window.location.origin}),e.prototype.ngOnInit.call(this)},t.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},t.prototype.isAssignedToCustomer=function(e){return e&&e.customerId&&e.customerId.id!==Kt.a},t.prototype.buildForm=function(e){var t=this.fb.group({name:[e?e.name:"",[s.Validators.required]],type:[(null==e?void 0:e.type)?e.type:"default",[s.Validators.required]],label:[e?e.label:""],cloudEndpoint:[null,[s.Validators.required]],edgeLicenseKey:["",[s.Validators.required]],routingKey:this.fb.control({value:e?e.routingKey:null,disabled:!0}),secret:this.fb.control({value:e?e.secret:null,disabled:!0}),additionalInfo:this.fb.group({description:[e&&e.additionalInfo?e.additionalInfo.description:""]})});return this.generateRoutingKeyAndSecret(e,t),t},t.prototype.updateForm=function(e){this.entityForm.patchValue({name:e.name,type:e.type,label:e.label,cloudEndpoint:e.cloudEndpoint?e.cloudEndpoint:window.location.origin,edgeLicenseKey:e.edgeLicenseKey,routingKey:e.routingKey,secret:e.secret,additionalInfo:{description:e.additionalInfo?e.additionalInfo.description:""}}),this.generateRoutingKeyAndSecret(e,this.entityForm)},t.prototype.updateFormState=function(){e.prototype.updateFormState.call(this),this.entityForm.get("routingKey").disable({emitEvent:!1}),this.entityForm.get("secret").disable({emitEvent:!1})},t.prototype.onEdgeIdCopied=function(e){this.store.dispatch(new u.b({message:this.translate.instant("edge.id-copied-message"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},t.prototype.onEdgeInfoCopied=function(e){var t="key"===e?"edge.edge-key-copied-message":"edge.edge-secret-copied-message";this.store.dispatch(new u.b({message:this.translate.instant(t),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},t.prototype.generateRoutingKeyAndSecret=function(e,t){e&&!e.id&&(t.get("routingKey").patchValue(Object(p.k)(),{emitEvent:!1}),t.get("secret").patchValue(Object(p.i)(20),{emitEvent:!1}))},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](g.TranslateService),i["\u0275\u0275directiveInject"]("entity"),i["\u0275\u0275directiveInject"]("entitiesTableConfig"),i["\u0275\u0275directiveInject"](s.FormBuilder),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-edge"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:116,vars:106,consts:[["fxLayout.xs","column",1,"tb-details-buttons"],["mat-raised-button","","color","accent",3,"disabled","fxShow","click"],["mat-raised-button","","color","accent","fxFlex.xs","",3,"disabled","fxShow","click"],["fxLayout","row","fxLayout.xs","column"],["mat-raised-button","","ngxClipboard","",3,"cbContent","fxShow","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"],["translate",""],["mat-raised-button","","ngxClipboard","",3,"disabled","fxShow","click"],["svgIcon","mdi:sync"],["fxLayout","column",1,"mat-padding"],[1,"mat-block",3,"fxShow"],["matInput","","disabled","",3,"ngModel"],[1,"tb-small",2,"padding-bottom","10px","padding-left","2px",3,"fxShow"],[3,"formGroup"],[3,"disabled"],[1,"mat-block"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["formControlName","type",3,"required","entityType"],[3,"fxShow"],[1,"tb-hint",3,"innerHTML"],["matInput","","formControlName","edgeLicenseKey","required",""],["translate","",1,"tb-hint"],["matInput","","formControlName","cloudEndpoint","required",""],["fxLayout","row",3,"fxShow"],["fxFlex","",1,"mat-block"],["matInput","","formControlName","routingKey"],["mat-button","","mat-icon-button","","type","button","ngxClipboard","",3,"cbContent","matTooltip","cbOnSuccess"],["matInput","","formControlName","secret"],["matInput","","formControlName","label"],["formGroupName","additionalInfo","fxLayout","column"],["matInput","","formControlName","description","rows","2"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"makePublic")}),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"assignToCustomer")}),i["\u0275\u0275pipe"](6,"async"),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"unassignFromCustomer")}),i["\u0275\u0275pipe"](10,"async"),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"button",2),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"delete")}),i["\u0275\u0275pipe"](14,"async"),i["\u0275\u0275text"](15),i["\u0275\u0275pipe"](16,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"div",3),i["\u0275\u0275elementStart"](18,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"openEdgeAssets")}),i["\u0275\u0275pipe"](19,"async"),i["\u0275\u0275text"](20),i["\u0275\u0275pipe"](21,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"openEdgeDevices")}),i["\u0275\u0275pipe"](23,"async"),i["\u0275\u0275text"](24),i["\u0275\u0275pipe"](25,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](26,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"openEdgeEntityViews")}),i["\u0275\u0275pipe"](27,"async"),i["\u0275\u0275text"](28),i["\u0275\u0275pipe"](29,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](30,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"openEdgeDashboards")}),i["\u0275\u0275pipe"](31,"async"),i["\u0275\u0275text"](32),i["\u0275\u0275pipe"](33,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](34,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"openEdgeRuleChains")}),i["\u0275\u0275pipe"](35,"async"),i["\u0275\u0275text"](36),i["\u0275\u0275pipe"](37,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](38,"div",3),i["\u0275\u0275elementStart"](39,"button",4),i["\u0275\u0275listener"]("cbOnSuccess",function(e){return t.onEdgeIdCopied(e)}),i["\u0275\u0275element"](40,"mat-icon",5),i["\u0275\u0275elementStart"](41,"span",6),i["\u0275\u0275text"](42,"edge.copy-id"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](43,"button",4),i["\u0275\u0275listener"]("cbOnSuccess",function(){return t.onEdgeInfoCopied("key")}),i["\u0275\u0275element"](44,"mat-icon",5),i["\u0275\u0275elementStart"](45,"span",6),i["\u0275\u0275text"](46,"edge.copy-edge-key"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](47,"button",4),i["\u0275\u0275listener"]("cbOnSuccess",function(){return t.onEdgeInfoCopied("secret")}),i["\u0275\u0275element"](48,"mat-icon",5),i["\u0275\u0275elementStart"](49,"span",6),i["\u0275\u0275text"](50,"edge.copy-edge-secret"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](51,"button",7),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"syncEdge")}),i["\u0275\u0275pipe"](52,"async"),i["\u0275\u0275element"](53,"mat-icon",8),i["\u0275\u0275elementStart"](54,"span",6),i["\u0275\u0275text"](55,"edge.sync"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](56,"div",9),i["\u0275\u0275elementStart"](57,"mat-form-field",10),i["\u0275\u0275elementStart"](58,"mat-label",6),i["\u0275\u0275text"](59,"edge.assignedToCustomer"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](60,"input",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](61,"div",12),i["\u0275\u0275text"](62),i["\u0275\u0275pipe"](63,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](64,"form",13),i["\u0275\u0275elementStart"](65,"fieldset",14),i["\u0275\u0275pipe"](66,"async"),i["\u0275\u0275elementStart"](67,"mat-form-field",15),i["\u0275\u0275elementStart"](68,"mat-label",6),i["\u0275\u0275text"](69,"edge.name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](70,"input",16),i["\u0275\u0275template"](71,za,3,3,"mat-error",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](72,"tb-entity-subtype-autocomplete",18),i["\u0275\u0275elementStart"](73,"div",19),i["\u0275\u0275element"](74,"div",20),i["\u0275\u0275pipe"](75,"translate"),i["\u0275\u0275elementStart"](76,"mat-form-field",15),i["\u0275\u0275elementStart"](77,"mat-label",6),i["\u0275\u0275text"](78,"edge.edge-license-key"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](79,"input",21),i["\u0275\u0275template"](80,Ga,3,3,"mat-error",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](81,"div",19),i["\u0275\u0275elementStart"](82,"div",22),i["\u0275\u0275text"](83,"edge.cloud-endpoint-hint"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](84,"mat-form-field",15),i["\u0275\u0275elementStart"](85,"mat-label",6),i["\u0275\u0275text"](86,"edge.cloud-endpoint"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](87,"input",23),i["\u0275\u0275template"](88,Wa,3,3,"mat-error",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](89,"div",24),i["\u0275\u0275elementStart"](90,"mat-form-field",25),i["\u0275\u0275elementStart"](91,"mat-label",6),i["\u0275\u0275text"](92,"edge.edge-key"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](93,"input",26),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](94,"button",27),i["\u0275\u0275listener"]("cbOnSuccess",function(){return t.onEdgeInfoCopied("key")}),i["\u0275\u0275pipe"](95,"translate"),i["\u0275\u0275element"](96,"mat-icon",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](97,"div",24),i["\u0275\u0275elementStart"](98,"mat-form-field",25),i["\u0275\u0275elementStart"](99,"mat-label",6),i["\u0275\u0275text"](100,"edge.edge-secret"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](101,"input",28),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](102,"button",27),i["\u0275\u0275listener"]("cbOnSuccess",function(){return t.onEdgeInfoCopied("secret")}),i["\u0275\u0275pipe"](103,"translate"),i["\u0275\u0275element"](104,"mat-icon",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](105,"fieldset",14),i["\u0275\u0275pipe"](106,"async"),i["\u0275\u0275elementStart"](107,"mat-form-field",15),i["\u0275\u0275elementStart"](108,"mat-label",6),i["\u0275\u0275text"](109,"edge.label"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](110,"input",29),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](111,"div",30),i["\u0275\u0275elementStart"](112,"mat-form-field",15),i["\u0275\u0275elementStart"](113,"mat-label",6),i["\u0275\u0275text"](114,"edge.description"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](115,"textarea",31),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](2,56,t.isLoading$))("fxShow",!(t.isEdit||"tenant"!==t.edgeScope||t.isAssignedToCustomer(t.entity)||null!=t.entity&&t.entity.customerIsPublic)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](4,58,"edge.make-public")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](6,60,t.isLoading$))("fxShow",!t.isEdit&&"tenant"===t.edgeScope&&!t.isAssignedToCustomer(t.entity)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](8,62,"edge.assign-to-customer")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](10,64,t.isLoading$))("fxShow",!t.isEdit&&("customer"===t.edgeScope||"tenant"===t.edgeScope)&&t.isAssignedToCustomer(t.entity)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](12,66,null!=t.entity&&t.entity.customerIsPublic?"edge.make-private":"edge.unassign-from-customer")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](14,68,t.isLoading$))("fxShow",!t.hideDelete()&&!t.isEdit),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](16,70,"edge.delete")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](19,72,t.isLoading$))("fxShow",!t.isEdit&&"customer"!==t.edgeScope),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](21,74,"edge.edge-assets")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](23,76,t.isLoading$))("fxShow",!t.isEdit&&"customer"!==t.edgeScope),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](25,78,"edge.edge-devices")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](27,80,t.isLoading$))("fxShow",!t.isEdit&&"customer"!==t.edgeScope),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](29,82,"edge.edge-entity-views")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](31,84,t.isLoading$))("fxShow",!t.isEdit&&"customer"!==t.edgeScope),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](33,86,"edge.edge-dashboards")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](35,88,t.isLoading$))("fxShow",!t.isEdit&&"tenant"===t.edgeScope),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](37,90,"edge.edge-rulechains")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("cbContent",null==t.entity||null==t.entity.id?null:t.entity.id.id)("fxShow",!t.isEdit),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("cbContent",null==t.entity?null:t.entity.routingKey)("fxShow",!t.isEdit&&"customer_user"!==t.edgeScope),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("cbContent",null==t.entity?null:t.entity.secret)("fxShow",!t.isEdit&&"customer_user"!==t.edgeScope),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](52,92,t.isLoading$))("fxShow",!t.isEdit&&"customer_user"!==t.edgeScope),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("fxShow",!t.isEdit&&t.isAssignedToCustomer(t.entity)&&!(null!=t.entity&&t.entity.customerIsPublic)&&"tenant"===t.edgeScope),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngModel",null==t.entity?null:t.entity.customerTitle),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow",!t.isEdit&&(null==t.entity?null:t.entity.customerIsPublic)&&"tenant"===t.edgeScope),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](63,94,"edge.edge-public")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("formGroup",t.entityForm),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](66,96,t.isLoading$)||!t.isEdit),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",t.entityForm.get("name").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("required",!0)("entityType",t.entityType.EDGE),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow","customer_user"!==t.edgeScope),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind1"](75,98,"edge.edge-license-key-hint"),i["\u0275\u0275sanitizeHtml"]),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",t.entityForm.get("edgeLicenseKey").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow","customer_user"!==t.edgeScope),i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("ngIf",t.entityForm.get("cloudEndpoint").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow","customer_user"!==t.edgeScope),i["\u0275\u0275advance"](5),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](95,100,"edge.copy-edge-key")),i["\u0275\u0275property"]("cbContent",null==t.entityForm?null:t.entityForm.get("routingKey").value),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("fxShow","customer_user"!==t.edgeScope),i["\u0275\u0275advance"](5),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](103,102,"edge.copy-edge-secret")),i["\u0275\u0275property"]("cbContent",null==t.entityForm?null:t.entityForm.get("secret").value),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](106,104,t.isLoading$)||!t.isEdit))},directives:[v.f,E.MatButton,Ie.d,v.b,on.a,we.MatIcon,g.TranslateDirective,x.MatFormField,x.MatLabel,S.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.NgModel,s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,s.FormControlName,s.RequiredValidator,r.NgIf,Ta.a,Se.MatTooltip,s.FormGroupName,x.MatError],pipes:[r.AsyncPipe,g.TranslatePipe],styles:[""]}),t}(nn.a);0,void 0;var Ha=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n.entityType=$t.b,n}return Object(o.d)(t,e),t.prototype.edgeTypeChanged=function(e){this.entitiesTableConfig.componentsData.edgeType=e,this.entitiesTableConfig.table.resetSortAndFilter(!0)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-edge-table-header"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:3,consts:[[3,"showLabel","entityType","ngModel","ngModelChange"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"tb-entity-subtype-select",0),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.edgeTypeChanged(e)}),i["\u0275\u0275elementEnd"]()),2&e&&i["\u0275\u0275property"]("showLabel",!0)("entityType",t.entityType.EDGE)("ngModel",t.entitiesTableConfig.componentsData.edgeType)},directives:[ka.a,s.NgControlStatus,s.NgModel],styles:["[_nghost-%COMP%]{flex:1;display:flex;justify-content:flex-start;min-width:150px}[_nghost-%COMP%]     tb-entity-subtype-select{width:100%}[_nghost-%COMP%]     tb-entity-subtype-select mat-form-field{font-size:16px}[_nghost-%COMP%]     tb-entity-subtype-select mat-form-field .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     tb-entity-subtype-select mat-form-field .mat-form-field-underline{bottom:0}@media screen and (max-width:599px){[_nghost-%COMP%]     tb-entity-subtype-select mat-form-field{width:100%}[_nghost-%COMP%]     tb-entity-subtype-select mat-form-field .mat-form-field-infix{width:auto!important}}"]}),t}(ea.a);0,void 0;var Ua=n("9J+n");function $a(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,2),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-attribute-table",3),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,5,"attribute.attributes")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("defaultAttributeScope",r.attributeScopes.SERVER_SCOPE)("active",n.isActive)("entityId",r.entity.id)("entityName",r.entity.name)}}function Ka(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,4),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-attribute-table",5),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,5,"attribute.latest-telemetry")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("defaultAttributeScope",r.latestTelemetryTypes.LATEST_TELEMETRY)("active",n.isActive)("entityId",r.entity.id)("entityName",r.entity.name)}}function Ya(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,6),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-alarm-table",7),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,3,"alarm.alarms")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("active",n.isActive)("entityId",r.entity.id)}}function Ja(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,8),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-event-table",9),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,5,"edge.events")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("defaultEventType",r.eventTypes.ERROR)("active",n.isActive)("tenantId",r.entity.tenantId.id)("entityId",r.entity.id)}}function Xa(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,10),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-edge-downlink-table",7),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,3,"edge.downlinks")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("active",n.isActive)("entityId",r.entity.id)}}function Qa(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,11),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-relation-table",7),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,3,"relation.relations")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("active",n.isActive)("entityId",r.entity.id)}}function Za(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,12),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-audit-log-table",13),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,4,"audit-log.audit-logs")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("active",n.isActive)("auditLogMode",r.auditLogModes.ENTITY)("entityId",r.entity.id)}}var eo=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-edge-tabs"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:7,vars:7,consts:[[3,"label",4,"ngIf"],[3,"label"],["attributesTab","matTab"],[3,"defaultAttributeScope","active","entityId","entityName"],["telemetryTab","matTab"],["disableAttributeScopeSelection","",3,"defaultAttributeScope","active","entityId","entityName"],["alarmsTab","matTab"],[3,"active","entityId"],["eventsTab","matTab"],[3,"defaultEventType","active","tenantId","entityId"],["downLinksTab","matTab"],["relationsTab","matTab"],["auditLogsTab","matTab"],["detailsMode","true",3,"active","auditLogMode","entityId"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,$a,4,7,"mat-tab",0),i["\u0275\u0275template"](1,Ka,4,7,"mat-tab",0),i["\u0275\u0275template"](2,Ya,4,5,"mat-tab",0),i["\u0275\u0275template"](3,Ja,4,7,"mat-tab",0),i["\u0275\u0275template"](4,Xa,4,5,"mat-tab",0),i["\u0275\u0275template"](5,Qa,4,5,"mat-tab",0),i["\u0275\u0275template"](6,Za,4,6,"mat-tab",0)),2&e&&(i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity&&t.authUser.authority===t.authorities.TENANT_ADMIN),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity&&t.authUser.authority===t.authorities.TENANT_ADMIN))},directives:[r.NgIf,Ce.MatTab,ui.a,pi.a,mi.a,Ua.a,fi.a,zi.a],pipes:[g.TranslatePipe],encapsulation:2}),t}(ci.a);0,void 0;var to=function(){function e(e,t,n,i,r,a,o,l,s,d){var c=this;this.store=e,this.broadcast=t,this.edgeService=n,this.customerService=i,this.dialogService=r,this.homeDialogs=a,this.translate=o,this.datePipe=l,this.router=s,this.dialog=d,this.config=new Ht.e,this.config.entityType=$t.b.EDGE,this.config.entityComponent=qa,this.config.entityTabsComponent=eo,this.config.entityTranslations=$t.d.get($t.b.EDGE),this.config.entityResources=$t.c.get($t.b.EDGE),this.config.deleteEntityTitle=function(e){return c.translate.instant("edge.delete-edge-title",{edgeName:e.name})},this.config.deleteEntityContent=function(){return c.translate.instant("edge.delete-edge-text")},this.config.deleteEntitiesTitle=function(e){return c.translate.instant("edge.delete-edges-title",{count:e})},this.config.deleteEntitiesContent=function(){return c.translate.instant("edge.delete-edges-text")},this.config.loadEntity=function(e){return c.edgeService.getEdgeInfo(e.id)},this.config.saveEntity=function(e){return c.edgeService.saveEdge(e).pipe(Object(Di.a)(function(){c.broadcast.broadcast("edgeSaved")}),Object(Zt.b)(function(e){return c.edgeService.getEdgeInfo(e.id.id)}))},this.config.onEntityAction=function(e){return c.onEdgeAction(e)},this.config.detailsReadonly=function(){return"customer_user"===c.config.componentsData.edgeScope},this.config.headerComponent=Ha}return e.prototype.resolve=function(e){var t=this,n=e.params;return this.config.componentsData={edgeScope:e.data.edgesType,edgeType:""},this.customerId=n.customerId,this.store.pipe(Object(h.select)($.d),Object(K.a)(1)).pipe(Object(Di.a)(function(e){e.authority===X.a.CUSTOMER_USER&&(t.config.componentsData.edgeScope="customer_user",t.customerId=e.customerId)}),Object(Zt.b)(function(){return t.customerId?t.customerService.getCustomer(t.customerId):Object(Jt.a)(null)}),Object(Xt.a)(function(e){return e?e.additionalInfo&&e.additionalInfo.isPublic?t.config.tableTitle=t.translate.instant("customer.public-edges"):t.config.tableTitle=e.title+": "+t.translate.instant("edge.edge-instances"):t.config.tableTitle=t.translate.instant("edge.edge-instances"),t.config.columns=t.configureColumns(t.config.componentsData.edgeScope),t.configureEntityFunctions(t.config.componentsData.edgeScope),t.config.cellActionDescriptors=t.configureCellActions(t.config.componentsData.edgeScope),t.config.groupActionDescriptors=t.configureGroupActions(t.config.componentsData.edgeScope),t.config.addActionDescriptors=t.configureAddActions(t.config.componentsData.edgeScope),t.config.addEnabled="customer_user"!==t.config.componentsData.edgeScope,t.config.entitiesDeleteEnabled="tenant"===t.config.componentsData.edgeScope,t.config.deleteEnabled=function(){return"tenant"===t.config.componentsData.edgeScope},t.config}))},e.prototype.configureColumns=function(e){var t=[new Ht.b("createdTime","common.created-time",this.datePipe,"150px"),new Ht.d("name","edge.name","25%"),new Ht.d("type","edge.edge-type","25%"),new Ht.d("label","edge.label","25%")];return"tenant"===e&&t.push(new Ht.d("customerTitle","customer.customer","25%"),new Ht.d("customerIsPublic","edge.public","60px",function(e){return Object(Ht.f)(e.customerIsPublic)},function(){return{}},!1)),t},e.prototype.configureEntityFunctions=function(e){var t=this;"tenant"===e&&(this.config.entitiesFetchFunction=function(e){return t.edgeService.getTenantEdgeInfos(e,t.config.componentsData.edgeType)},this.config.deleteEntity=function(e){return t.edgeService.deleteEdge(e.id)}),"customer"===e&&(this.config.entitiesFetchFunction=function(e){return t.edgeService.getCustomerEdgeInfos(t.customerId,e,t.config.componentsData.edgeType)},this.config.deleteEntity=function(e){return t.edgeService.unassignEdgeFromCustomer(e.id)}),"customer_user"===e&&(this.config.entitiesFetchFunction=function(e){return t.edgeService.getCustomerEdgeInfos(t.customerId,e,t.config.componentsData.edgeType)},this.config.deleteEntity=function(e){return t.edgeService.unassignEdgeFromCustomer(e.id)})},e.prototype.configureCellActions=function(e){var t=this,n=[];return"tenant"===e&&n.push({name:this.translate.instant("edge.make-public"),icon:"share",isEnabled:function(e){return!e.customerId||e.customerId.id===Kt.a},onAction:function(e,n){return t.makePublic(e,n)}},{name:this.translate.instant("edge.assign-to-customer"),icon:"assignment_ind",isEnabled:function(e){return!e.customerId||e.customerId.id===Kt.a},onAction:function(e,n){return t.assignToCustomer(e,[n.id])}},{name:this.translate.instant("edge.unassign-from-customer"),icon:"assignment_return",isEnabled:function(e){return e.customerId&&e.customerId.id!==Kt.a&&!e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}},{name:this.translate.instant("edge.make-private"),icon:"reply",isEnabled:function(e){return e.customerId&&e.customerId.id!==Kt.a&&e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}},{name:this.translate.instant("edge.edge-assets"),icon:"domain",isEnabled:function(e){return!0},onAction:function(e,n){return t.openEdgeEntitiesByType(e,n,$t.b.ASSET)}},{name:this.translate.instant("edge.edge-devices"),icon:"devices_other",isEnabled:function(e){return!0},onAction:function(e,n){return t.openEdgeEntitiesByType(e,n,$t.b.DEVICE)}},{name:this.translate.instant("edge.edge-entity-views"),icon:"view_quilt",isEnabled:function(e){return!0},onAction:function(e,n){return t.openEdgeEntitiesByType(e,n,$t.b.ENTITY_VIEW)}},{name:this.translate.instant("edge.edge-dashboards"),icon:"dashboard",isEnabled:function(e){return!0},onAction:function(e,n){return t.openEdgeEntitiesByType(e,n,$t.b.DASHBOARD)}},{name:this.translate.instant("edge.edge-rulechains"),icon:"settings_ethernet",isEnabled:function(e){return!0},onAction:function(e,n){return t.openEdgeEntitiesByType(e,n,$t.b.RULE_CHAIN)}}),"customer"===e&&n.push({name:this.translate.instant("edge.unassign-from-customer"),icon:"assignment_return",isEnabled:function(e){return e.customerId&&e.customerId.id!==Kt.a&&!e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}},{name:this.translate.instant("edge.make-private"),icon:"reply",isEnabled:function(e){return e.customerId&&e.customerId.id!==Kt.a&&e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}}),"customer_user"===e&&n.push({name:this.translate.instant("edge.edge-assets"),icon:"domain",isEnabled:function(e){return!0},onAction:function(e,n){return t.openEdgeEntitiesByType(e,n,$t.b.ASSET)}},{name:this.translate.instant("edge.edge-devices"),icon:"devices_other",isEnabled:function(e){return!0},onAction:function(e,n){return t.openEdgeEntitiesByType(e,n,$t.b.DEVICE)}},{name:this.translate.instant("edge.edge-entity-views"),icon:"view_quilt",isEnabled:function(e){return!0},onAction:function(e,n){return t.openEdgeEntitiesByType(e,n,$t.b.ENTITY_VIEW)}},{name:this.translate.instant("edge.edge-dashboards"),icon:"dashboard",isEnabled:function(e){return!0},onAction:function(e,n){return t.openEdgeEntitiesByType(e,n,$t.b.DASHBOARD)}}),n},e.prototype.configureGroupActions=function(e){var t=this,n=[];return"tenant"===e&&n.push({name:this.translate.instant("edge.assign-edge-to-customer-text"),icon:"assignment_ind",isEnabled:!0,onAction:function(e,n){return t.assignToCustomer(e,n.map(function(e){return e.id}))}}),"customer"===e&&n.push({name:this.translate.instant("edge.unassign-from-customer"),icon:"assignment_return",isEnabled:!0,onAction:function(e,n){return t.unassignEdgesFromCustomer(e,n)}}),n},e.prototype.configureAddActions=function(e){var t=this,n=[];return"tenant"===e&&n.push({name:this.translate.instant("edge.add-edge-text"),icon:"insert_drive_file",isEnabled:function(){return!0},onAction:function(e){return t.config.table.addEntity(e)}},{name:this.translate.instant("edge.import"),icon:"file_upload",isEnabled:function(){return!0},onAction:function(e){return t.importEdges(e)}}),"customer"===e&&n.push({name:this.translate.instant("edge.assign-new-edge"),icon:"add",isEnabled:function(){return!0},onAction:function(e){return t.addEdgesToCustomer(e)}}),n},e.prototype.importEdges=function(e){var t=this;this.homeDialogs.importEntities($t.b.EDGE).subscribe(function(e){e&&(t.broadcast.broadcast("edgeSaved"),t.config.table.updateData())})},e.prototype.addEdgesToCustomer=function(e){var t=this;e&&e.stopPropagation(),this.dialog.open(pa.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{customerId:this.customerId,entityType:$t.b.EDGE}}).afterClosed().subscribe(function(e){e&&t.config.table.updateData()})},e.prototype.makePublic=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("edge.make-public-edge-title",{edgeName:t.name}),this.translate.instant("edge.make-public-edge-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){e&&n.edgeService.makeEdgePublic(t.id.id).subscribe(function(){n.config.table.updateData()})})},e.prototype.openEdgeEntitiesByType=function(e,t,n){var i;switch(e&&e.stopPropagation(),n){case $t.b.DEVICE:i="devices";break;case $t.b.ASSET:case $t.b.EDGE:i="assets";break;case $t.b.ENTITY_VIEW:i="entityViews";break;case $t.b.DASHBOARD:i="dashboards";break;case $t.b.RULE_CHAIN:i="ruleChains"}this.router.navigateByUrl("edgeInstances/"+t.id.id+"/"+i)},e.prototype.assignToCustomer=function(e,t){var n=this;e&&e.stopPropagation(),this.dialog.open(ua.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entityIds:t,entityType:$t.b.EDGE}}).afterClosed().subscribe(function(e){e&&n.config.table.updateData()})},e.prototype.unassignFromCustomer=function(e,t){var n,i,r=this;e&&e.stopPropagation(),t.customerIsPublic?(n=this.translate.instant("edge.make-private-edge-title",{edgeName:t.name}),i=this.translate.instant("edge.make-private-edge-text")):(n=this.translate.instant("edge.unassign-edge-title",{edgeName:t.name}),i=this.translate.instant("edge.unassign-edge-text")),this.dialogService.confirm(n,i,this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){e&&r.edgeService.unassignEdgeFromCustomer(t.id.id).subscribe(function(){r.config.table.updateData()})})},e.prototype.unassignEdgesFromCustomer=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("edge.unassign-edges-title",{count:t.length}),this.translate.instant("edge.unassign-edges-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){if(e){var i=[];t.forEach(function(e){i.push(n.edgeService.unassignEdgeFromCustomer(e.id.id))}),Object(ye.a)(i).subscribe(function(){n.config.table.updateData()})}})},e.prototype.syncEdge=function(e,t){var n=this;e&&e.stopPropagation(),this.edgeService.syncEdge(t.id.id).subscribe(function(){n.store.dispatch(new u.b({message:n.translate.instant("edge.sync-process-started-successfully"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))})},e.prototype.onEdgeAction=function(e){switch(e.action){case"makePublic":return this.makePublic(e.event,e.entity),!0;case"assignToCustomer":return this.assignToCustomer(e.event,[e.entity.id]),!0;case"unassignFromCustomer":return this.unassignFromCustomer(e.event,e.entity),!0;case"openEdgeAssets":return this.openEdgeEntitiesByType(e.event,e.entity,$t.b.ASSET),!0;case"openEdgeDevices":return this.openEdgeEntitiesByType(e.event,e.entity,$t.b.DEVICE),!0;case"openEdgeEntityViews":return this.openEdgeEntitiesByType(e.event,e.entity,$t.b.ENTITY_VIEW),!0;case"openEdgeDashboards":return this.openEdgeEntitiesByType(e.event,e.entity,$t.b.DASHBOARD),!0;case"openEdgeRuleChains":return this.openEdgeEntitiesByType(e.event,e.entity,$t.b.RULE_CHAIN),!0;case"syncEdge":return this.syncEdge(e.event,e.entity),!0}},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](h.Store),i["\u0275\u0275inject"](Zr.a),i["\u0275\u0275inject"](wa.a),i["\u0275\u0275inject"](Mi.a),i["\u0275\u0275inject"](Y.a),i["\u0275\u0275inject"](xa.a),i["\u0275\u0275inject"](g.TranslateService),i["\u0275\u0275inject"](r.DatePipe),i["\u0275\u0275inject"](a.Router),i["\u0275\u0275inject"](Ct.MatDialog))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0;var no=[{path:"customers",data:{breadcrumb:{label:"customer.customers",icon:"supervisor_account"}},children:[{path:"",component:qt.a,data:{auth:[X.a.TENANT_ADMIN],title:"customer.customers"},resolve:{entitiesTableConfig:lr}},{path:":customerId/users",component:qt.a,data:{auth:[X.a.TENANT_ADMIN],title:"user.customer-users",breadcrumb:{label:"user.customer-users",icon:"account_circle"}},resolve:{entitiesTableConfig:Ui}},{path:":customerId/devices",component:qt.a,data:{auth:[X.a.TENANT_ADMIN],title:"customer.devices",devicesType:"customer",breadcrumb:{label:"customer.devices",icon:"devices_other"}},resolve:{entitiesTableConfig:Ea}},{path:":customerId/assets",component:qt.a,data:{auth:[X.a.TENANT_ADMIN],title:"customer.assets",assetsType:"customer",breadcrumb:{label:"customer.assets",icon:"domain"}},resolve:{entitiesTableConfig:Ra}},{path:":customerId/edgeInstances",component:qt.a,data:{auth:[X.a.TENANT_ADMIN],title:"customer.edges",edgesType:"customer",breadcrumb:{label:"customer.edges",icon:"router"}},resolve:{entitiesTableConfig:to}},{path:":customerId/dashboards",data:{breadcrumb:{label:"customer.dashboards",icon:"dashboard"}},children:[{path:"",component:qt.a,data:{auth:[X.a.TENANT_ADMIN],title:"customer.dashboards",dashboardsType:"customer"},resolve:{entitiesTableConfig:ja.a}},{path:":dashboardId",component:En.a,data:{breadcrumb:{labelFunction:Va.c,icon:"dashboard"},auth:[X.a.TENANT_ADMIN,X.a.CUSTOMER_USER],title:"customer.dashboard",widgetEditMode:!1},resolve:{dashboard:Va.a}}]}]}],io=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[lr],imports:[[a.RouterModule.forChild(no)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](io,{imports:[a.RouterModule],exports:[a.RouterModule]})),0;var ro=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[r.CommonModule,vn.a,yn.a,io]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](ro,{declarations:[Zi,or],imports:[r.CommonModule,vn.a,yn.a,io]})),0;var ao=[{path:"auditLogs",component:zi.a,data:{auth:[X.a.TENANT_ADMIN],title:"audit-log.audit-logs",breadcrumb:{label:"audit-log.audit-logs",icon:"track_changes"}}}],oo=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[a.RouterModule.forChild(ao)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](oo,{imports:[a.RouterModule],exports:[a.RouterModule]})),0;var lo=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[r.CommonModule,vn.a,oo]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](lo,{imports:[r.CommonModule,vn.a,oo]})),0;var so=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[Ui],imports:[[],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](so,{exports:[a.RouterModule]})),0;var co=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[r.CommonModule,vn.a,yn.a,so]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](co,{declarations:[Ti,Hi,Vi,Ni],imports:[r.CommonModule,vn.a,yn.a,so]})),0;var uo=[{path:"devices",component:qt.a,data:{auth:[X.a.TENANT_ADMIN,X.a.CUSTOMER_USER],title:"device.devices",devicesType:"tenant",breadcrumb:{label:"device.devices",icon:"devices_other"}},resolve:{entitiesTableConfig:Ea}}],po=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[Ea],imports:[[a.RouterModule.forChild(uo)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](po,{imports:[a.RouterModule],exports:[a.RouterModule]})),0;var mo=n("M0Qk"),fo=n("YPhb"),ho=n("QaJg"),go=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[r.CommonModule,vn.a,yn.a,mo.a,fo.a,ho.a,po]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](go,{declarations:[hr,br,vr,yr,wr,Sr,jr,Hr,Kr,Xr,ya,ta,ca],imports:[r.CommonModule,vn.a,yn.a,mo.a,fo.a,ho.a,po]})),0;var bo=[{path:"assets",component:qt.a,data:{auth:[X.a.TENANT_ADMIN,X.a.CUSTOMER_USER],title:"asset.assets",assetsType:"tenant",breadcrumb:{label:"asset.assets",icon:"domain"}},resolve:{entitiesTableConfig:Ra}}],vo=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[Ra],imports:[[a.RouterModule.forChild(bo)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](vo,{imports:[a.RouterModule],exports:[a.RouterModule]})),0;var yo=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[r.CommonModule,vn.a,yn.a,mo.a,vo]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](yo,{declarations:[Da,Ba,Aa],imports:[r.CommonModule,vn.a,yn.a,mo.a,vo]})),0;var xo=n("3Tyt"),So=n("89S7"),wo=n("rhBB"),Co=n("gl+N");function Eo(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"entity-view.name-required")," "))}var Io=function(e){function t(t,n,i,r,a,o){var l=e.call(this,t,a,i,r,o)||this;return l.store=t,l.translate=n,l.entityValue=i,l.entitiesTableConfigValue=r,l.fb=a,l.cd=o,l.entityType=$t.b,l.dataKeyType=xo.h,l.allowedEntityTypes=[$t.b.DEVICE,$t.b.ASSET],l}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){this.entityViewScope=this.entitiesTableConfig.componentsData.entityViewScope,e.prototype.ngOnInit.call(this),this.maxStartTimeMs=this.entityForm.get("endTimeMs").valueChanges,this.minEndTimeMs=this.entityForm.get("startTimeMs").valueChanges,this.selectedEntityId=this.entityForm.get("entityId").valueChanges},t.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},t.prototype.isAssignedToCustomer=function(e){return e&&e.customerId&&e.customerId.id!==Kt.a},t.prototype.buildForm=function(e){return this.fb.group({name:[e?e.name:"",[s.Validators.required]],type:[e?e.type:null,[s.Validators.required]],entityId:[e?e.entityId:null,[s.Validators.required]],startTimeMs:[e?e.startTimeMs:null],endTimeMs:[e?e.endTimeMs:null],keys:this.fb.group({attributes:this.fb.group({cs:[e&&e.keys&&e.keys.attributes?e.keys.attributes.cs:null],sh:[e&&e.keys&&e.keys.attributes?e.keys.attributes.sh:null],ss:[e&&e.keys&&e.keys.attributes?e.keys.attributes.ss:null]}),timeseries:[e&&e.keys&&e.keys.timeseries?e.keys.timeseries:null]}),additionalInfo:this.fb.group({description:[e&&e.additionalInfo?e.additionalInfo.description:""]})})},t.prototype.updateForm=function(e){this.entityForm.patchValue({name:e.name}),this.entityForm.patchValue({type:e.type}),this.entityForm.patchValue({entityId:e.entityId}),this.entityForm.patchValue({startTimeMs:e.startTimeMs}),this.entityForm.patchValue({endTimeMs:e.endTimeMs}),this.entityForm.patchValue({keys:{attributes:{cs:e.keys&&e.keys.attributes?e.keys.attributes.cs:null,sh:e.keys&&e.keys.attributes?e.keys.attributes.sh:null,ss:e.keys&&e.keys.attributes?e.keys.attributes.ss:null},timeseries:e.keys&&e.keys.timeseries?e.keys.timeseries:null}}),this.entityForm.patchValue({additionalInfo:{description:e.additionalInfo?e.additionalInfo.description:""}})},t.prototype.onEntityViewIdCopied=function(e){this.store.dispatch(new u.b({message:this.translate.instant("entity-view.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](g.TranslateService),i["\u0275\u0275directiveInject"]("entity"),i["\u0275\u0275directiveInject"]("entitiesTableConfig"),i["\u0275\u0275directiveInject"](s.FormBuilder),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-entity-view"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:88,vars:77,consts:[["fxLayout.xs","column",1,"tb-details-buttons"],["mat-raised-button","","color","accent",3,"disabled","fxShow","click"],["fxLayout","row","fxLayout.xs","column"],["mat-raised-button","","ngxClipboard","",3,"cbContent","fxShow","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"],["translate",""],["fxLayout","column",1,"mat-padding"],[1,"mat-block",3,"fxShow"],["matInput","","disabled","",3,"ngModel"],[1,"tb-small",2,"padding-bottom","10px","padding-left","2px",3,"fxShow"],[3,"formGroup"],[3,"disabled"],[1,"mat-block"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["formControlName","type",3,"required","entityType"],["fxLayout","column"],["translate","",1,"tb-title","no-padding"],["fxFlex","","formControlName","entityId",3,"required","allowedEntityTypes"],["formGroupName","keys",1,"mat-accordion-container"],[3,"multi"],["formGroupName","attributes",3,"expanded"],["translate","",1,"tb-panel-title"],["translate","",1,"tb-hint"],["formControlName","cs","keysText","entity-view.client-attributes-placeholder",3,"entityId","dataKeyType"],["formControlName","sh","keysText","entity-view.shared-attributes-placeholder",3,"entityId","dataKeyType"],["formControlName","ss","keysText","entity-view.server-attributes-placeholder",3,"entityId","dataKeyType"],[3,"expanded"],["formControlName","timeseries","keysText","entity-view.timeseries-placeholder",3,"entityId","dataKeyType"],["dateText","entity-view.start-date","timeText","entity-view.start-ts","formControlName","startTimeMs",3,"maxDate"],["dateText","entity-view.end-date","timeText","entity-view.end-ts","formControlName","endTimeMs",3,"minDate"],["formGroupName","additionalInfo"],["matInput","","formControlName","description","rows","2"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"makePublic")}),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"assignToCustomer")}),i["\u0275\u0275pipe"](6,"async"),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"unassignFromCustomer")}),i["\u0275\u0275pipe"](10,"async"),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"unassignFromEdge")}),i["\u0275\u0275pipe"](14,"async"),i["\u0275\u0275text"](15),i["\u0275\u0275pipe"](16,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"delete")}),i["\u0275\u0275pipe"](18,"async"),i["\u0275\u0275text"](19),i["\u0275\u0275pipe"](20,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](21,"div",2),i["\u0275\u0275elementStart"](22,"button",3),i["\u0275\u0275listener"]("cbOnSuccess",function(e){return t.onEntityViewIdCopied(e)}),i["\u0275\u0275element"](23,"mat-icon",4),i["\u0275\u0275elementStart"](24,"span",5),i["\u0275\u0275text"](25,"entity-view.copyId"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](26,"div",6),i["\u0275\u0275elementStart"](27,"mat-form-field",7),i["\u0275\u0275elementStart"](28,"mat-label",5),i["\u0275\u0275text"](29,"entity-view.assignedToCustomer"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](30,"input",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](31,"div",9),i["\u0275\u0275text"](32),i["\u0275\u0275pipe"](33,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](34,"form",10),i["\u0275\u0275elementStart"](35,"fieldset",11),i["\u0275\u0275pipe"](36,"async"),i["\u0275\u0275elementStart"](37,"mat-form-field",12),i["\u0275\u0275elementStart"](38,"mat-label",5),i["\u0275\u0275text"](39,"entity-view.name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](40,"input",13),i["\u0275\u0275template"](41,Eo,3,3,"mat-error",14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](42,"tb-entity-subtype-autocomplete",15),i["\u0275\u0275elementStart"](43,"section",16),i["\u0275\u0275elementStart"](44,"label",17),i["\u0275\u0275text"](45,"entity-view.target-entity"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](46,"tb-entity-select",18),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](47,"div",19),i["\u0275\u0275elementStart"](48,"mat-accordion",20),i["\u0275\u0275elementStart"](49,"mat-expansion-panel",21),i["\u0275\u0275elementStart"](50,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](51,"mat-panel-title"),i["\u0275\u0275elementStart"](52,"div",22),i["\u0275\u0275text"](53,"entity-view.attributes-propagation"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](54,"div",23),i["\u0275\u0275text"](55,"entity-view.attributes-propagation-hint"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](56,"label",17),i["\u0275\u0275text"](57,"entity-view.client-attributes"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](58,"tb-entity-keys-list",24),i["\u0275\u0275pipe"](59,"async"),i["\u0275\u0275elementStart"](60,"label",17),i["\u0275\u0275text"](61,"entity-view.shared-attributes"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](62,"tb-entity-keys-list",25),i["\u0275\u0275pipe"](63,"async"),i["\u0275\u0275elementStart"](64,"label",17),i["\u0275\u0275text"](65,"entity-view.server-attributes"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](66,"tb-entity-keys-list",26),i["\u0275\u0275pipe"](67,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](68,"mat-expansion-panel",27),i["\u0275\u0275elementStart"](69,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](70,"mat-panel-title"),i["\u0275\u0275elementStart"](71,"div",22),i["\u0275\u0275text"](72,"entity-view.timeseries-data"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](73,"div",23),i["\u0275\u0275text"](74,"entity-view.timeseries-data-hint"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](75,"label",17),i["\u0275\u0275text"](76,"entity-view.timeseries"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](77,"tb-entity-keys-list",28),i["\u0275\u0275pipe"](78,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](79,"tb-datetime",29),i["\u0275\u0275pipe"](80,"async"),i["\u0275\u0275element"](81,"tb-datetime",30),i["\u0275\u0275pipe"](82,"async"),i["\u0275\u0275elementStart"](83,"div",31),i["\u0275\u0275elementStart"](84,"mat-form-field",12),i["\u0275\u0275elementStart"](85,"mat-label",5),i["\u0275\u0275text"](86,"entity-view.description"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](87,"textarea",32),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](2,41,t.isLoading$))("fxShow",!(t.isEdit||"tenant"!==t.entityViewScope||t.isAssignedToCustomer(t.entity)||null!=t.entity&&t.entity.customerIsPublic)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](4,43,"entity-view.make-public")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](6,45,t.isLoading$))("fxShow",!t.isEdit&&"tenant"===t.entityViewScope&&!t.isAssignedToCustomer(t.entity)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](8,47,"entity-view.assign-to-customer")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](10,49,t.isLoading$))("fxShow",!t.isEdit&&("customer"===t.entityViewScope||"tenant"===t.entityViewScope)&&t.isAssignedToCustomer(t.entity)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](12,51,null!=t.entity&&t.entity.customerIsPublic?"entity-view.make-private":"entity-view.unassign-from-customer")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](14,53,t.isLoading$))("fxShow",!t.isEdit&&"edge"===t.entityViewScope),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](16,55,"edge.unassign-from-edge")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](18,57,t.isLoading$))("fxShow",!t.hideDelete()&&!t.isEdit),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](20,59,"entity-view.delete")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("cbContent",null==t.entity||null==t.entity.id?null:t.entity.id.id)("fxShow",!t.isEdit),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("fxShow",!t.isEdit&&t.isAssignedToCustomer(t.entity)&&!(null!=t.entity&&t.entity.customerIsPublic)&&"tenant"===t.entityViewScope),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngModel",null==t.entity?null:t.entity.customerTitle),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow",!t.isEdit&&(null==t.entity?null:t.entity.customerIsPublic)&&("customer"===t.entityViewScope||"tenant"===t.entityViewScope)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](33,61,"entity-view.entity-view-public")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("formGroup",t.entityForm),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](36,63,t.isLoading$)||!t.isEdit),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",t.entityForm.get("name").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("required",!0)("entityType",t.entityType.ENTITY_VIEW),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("required",!0)("allowedEntityTypes",t.allowedEntityTypes),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("multi",!0),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("expanded",!0),i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("entityId",i["\u0275\u0275pipeBind1"](59,65,t.selectedEntityId))("dataKeyType",t.dataKeyType.attribute),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("entityId",i["\u0275\u0275pipeBind1"](63,67,t.selectedEntityId))("dataKeyType",t.dataKeyType.attribute),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("entityId",i["\u0275\u0275pipeBind1"](67,69,t.selectedEntityId))("dataKeyType",t.dataKeyType.attribute),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("expanded",!0),i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("entityId",i["\u0275\u0275pipeBind1"](78,71,t.selectedEntityId))("dataKeyType",t.dataKeyType.timeseries),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("maxDate",i["\u0275\u0275pipeBind1"](80,73,t.maxStartTimeMs)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("minDate",i["\u0275\u0275pipeBind1"](82,75,t.minEndTimeMs)))},directives:[v.f,E.MatButton,Ie.d,on.a,we.MatIcon,g.TranslateDirective,x.MatFormField,x.MatLabel,S.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.NgModel,s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,s.FormControlName,s.RequiredValidator,r.NgIf,Ta.a,So.a,v.b,s.FormGroupName,ne.MatAccordion,ne.MatExpansionPanel,ne.MatExpansionPanelHeader,ne.MatExpansionPanelTitle,wo.a,Co.a,x.MatError],pipes:[r.AsyncPipe,g.TranslatePipe],styles:["[_nghost-%COMP%]   .mat-accordion-container[_ngcontent-%COMP%]{margin-bottom:16px}"]}),t}(nn.a);0,void 0;var To=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n.entityType=$t.b,n}return Object(o.d)(t,e),t.prototype.entityViewTypeChanged=function(e){this.entitiesTableConfig.componentsData.entityViewType=e,this.entitiesTableConfig.table.resetSortAndFilter(!0)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-entity-view-table-header"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:3,consts:[[3,"showLabel","entityType","ngModel","ngModelChange"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"tb-entity-subtype-select",0),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.entityViewTypeChanged(e)}),i["\u0275\u0275elementEnd"]()),2&e&&i["\u0275\u0275property"]("showLabel",!0)("entityType",t.entityType.ENTITY_VIEW)("ngModel",t.entitiesTableConfig.componentsData.entityViewType)},directives:[ka.a,s.NgControlStatus,s.NgModel],styles:["[_nghost-%COMP%]{flex:1;display:flex;justify-content:flex-start;min-width:150px}[_nghost-%COMP%]     tb-entity-subtype-select{width:100%}[_nghost-%COMP%]     tb-entity-subtype-select mat-form-field{font-size:16px}[_nghost-%COMP%]     tb-entity-subtype-select mat-form-field .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     tb-entity-subtype-select mat-form-field .mat-form-field-underline{bottom:0}@media screen and (max-width:599px){[_nghost-%COMP%]     tb-entity-subtype-select mat-form-field{width:100%}[_nghost-%COMP%]     tb-entity-subtype-select mat-form-field .mat-form-field-infix{width:auto!important}}"]}),t}(ea.a);0,void 0;var Mo=n("j37L");function Do(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,2),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-attribute-table",3),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,5,"attribute.attributes")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("defaultAttributeScope",r.attributeScopes.CLIENT_SCOPE)("active",n.isActive)("entityId",r.entity.id)("entityName",r.entity.name)}}function ko(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,4),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-attribute-table",5),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,5,"attribute.latest-telemetry")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("defaultAttributeScope",r.latestTelemetryTypes.LATEST_TELEMETRY)("active",n.isActive)("entityId",r.entity.id)("entityName",r.entity.name)}}function Ao(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,6),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-alarm-table",7),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,3,"alarm.alarms")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("active",n.isActive)("entityId",r.entity.id)}}function Fo(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,8),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-event-table",9),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,5,"entity-view.events")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("defaultEventType",r.eventTypes.ERROR)("active",n.isActive)("tenantId",r.entity.tenantId.id)("entityId",r.entity.id)}}function Po(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,10),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-relation-table",7),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,3,"relation.relations")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("active",n.isActive)("entityId",r.entity.id)}}function _o(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,11),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-audit-log-table",12),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,4,"audit-log.audit-logs")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("active",n.isActive)("auditLogMode",r.auditLogModes.ENTITY)("entityId",r.entity.id)}}var No=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-entity-view-tabs"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:6,vars:6,consts:[[3,"label",4,"ngIf"],[3,"label"],["attributesTab","matTab"],[3,"defaultAttributeScope","active","entityId","entityName"],["telemetryTab","matTab"],["disableAttributeScopeSelection","",3,"defaultAttributeScope","active","entityId","entityName"],["alarmsTab","matTab"],[3,"active","entityId"],["eventsTab","matTab"],[3,"defaultEventType","active","tenantId","entityId"],["relationsTab","matTab"],["auditLogsTab","matTab"],["detailsMode","true",3,"active","auditLogMode","entityId"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,Do,4,7,"mat-tab",0),i["\u0275\u0275template"](1,ko,4,7,"mat-tab",0),i["\u0275\u0275template"](2,Ao,4,5,"mat-tab",0),i["\u0275\u0275template"](3,Fo,4,7,"mat-tab",0),i["\u0275\u0275template"](4,Po,4,5,"mat-tab",0),i["\u0275\u0275template"](5,_o,4,6,"mat-tab",0)),2&e&&(i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity&&t.authUser.authority===t.authorities.TENANT_ADMIN))},directives:[r.NgIf,Ce.MatTab,ui.a,pi.a,mi.a,fi.a,zi.a],pipes:[g.TranslatePipe],encapsulation:2}),t}(ci.a);0,void 0;var Lo=function(){function e(e,t,n,i,r,a,o,l,s,d){var c=this;this.store=e,this.broadcast=t,this.entityViewService=n,this.customerService=i,this.edgeService=r,this.dialogService=a,this.translate=o,this.datePipe=l,this.router=s,this.dialog=d,this.config=new Ht.e,this.config.entityType=$t.b.ENTITY_VIEW,this.config.entityComponent=Io,this.config.entityTabsComponent=No,this.config.entityTranslations=$t.d.get($t.b.ENTITY_VIEW),this.config.entityResources=$t.c.get($t.b.ENTITY_VIEW),this.config.addDialogStyle={maxWidth:"800px"},this.config.deleteEntityTitle=function(e){return c.translate.instant("entity-view.delete-entity-view-title",{entityViewName:e.name})},this.config.deleteEntityContent=function(){return c.translate.instant("entity-view.delete-entity-view-text")},this.config.deleteEntitiesTitle=function(e){return c.translate.instant("entity-view.delete-entity-views-title",{count:e})},this.config.deleteEntitiesContent=function(){return c.translate.instant("entity-view.delete-entity-views-text")},this.config.loadEntity=function(e){return c.entityViewService.getEntityViewInfo(e.id)},this.config.saveEntity=function(e){return c.entityViewService.saveEntityView(e).pipe(Object(Di.a)(function(){c.broadcast.broadcast("entityViewSaved")}),Object(Zt.b)(function(e){return c.entityViewService.getEntityViewInfo(e.id.id)}))},this.config.onEntityAction=function(e){return c.onEntityViewAction(e)},this.config.detailsReadonly=function(){return"customer_user"===c.config.componentsData.entityViewScope||"edge_customer_user"===c.config.componentsData.entityViewScope},this.config.headerComponent=To}return e.prototype.resolve=function(e){var t=this,n=e.params;return this.config.componentsData={entityViewScope:e.data.entityViewsType,entityViewType:"",edgeId:n.edgeId},this.customerId=n.customerId,this.store.pipe(Object(h.select)($.d),Object(K.a)(1)).pipe(Object(Di.a)(function(n){n.authority===X.a.CUSTOMER_USER&&("edge"===e.data.entityViewsType?t.config.componentsData.entityViewScope="edge_customer_user":t.config.componentsData.entityViewScope="customer_user",t.customerId=n.customerId)}),Object(Zt.b)(function(){return t.customerId?t.customerService.getCustomer(t.customerId):Object(Jt.a)(null)}),Object(Xt.a)(function(e){return e?e.additionalInfo&&e.additionalInfo.isPublic?t.config.tableTitle=t.translate.instant("customer.public-entity-views"):t.config.tableTitle=e.title+": "+t.translate.instant("entity-view.entity-views"):"edge"===t.config.componentsData.entityViewScope?t.edgeService.getEdge(t.config.componentsData.edgeId).subscribe(function(e){return t.config.tableTitle=e.name+": "+t.translate.instant("entity-view.entity-views")}):t.config.tableTitle=t.translate.instant("entity-view.entity-views"),t.config.columns=t.configureColumns(t.config.componentsData.entityViewScope),t.configureEntityFunctions(t.config.componentsData.entityViewScope),t.config.cellActionDescriptors=t.configureCellActions(t.config.componentsData.entityViewScope),t.config.groupActionDescriptors=t.configureGroupActions(t.config.componentsData.entityViewScope),t.config.addActionDescriptors=t.configureAddActions(t.config.componentsData.entityViewScope),t.config.addEnabled=!("customer_user"===t.config.componentsData.entityViewScope||"edge_customer_user"===t.config.componentsData.entityViewScope),t.config.entitiesDeleteEnabled="tenant"===t.config.componentsData.entityViewScope,t.config.deleteEnabled=function(){return"tenant"===t.config.componentsData.entityViewScope},t.config}))},e.prototype.configureColumns=function(e){var t=[new Ht.b("createdTime","common.created-time",this.datePipe,"150px"),new Ht.d("name","entity-view.name","33%"),new Ht.d("type","entity-view.entity-view-type","33%")];return"tenant"===e&&t.push(new Ht.d("customerTitle","customer.customer","33%"),new Ht.d("customerIsPublic","entity-view.public","60px",function(e){return Object(Ht.f)(e.customerIsPublic)},function(){return{}},!1)),t},e.prototype.configureEntityFunctions=function(e){var t=this;"tenant"===e?(this.config.entitiesFetchFunction=function(e){return t.entityViewService.getTenantEntityViewInfos(e,t.config.componentsData.entityViewType)},this.config.deleteEntity=function(e){return t.entityViewService.deleteEntityView(e.id)}):"edge"===e||"edge_customer_user"===e?this.config.entitiesFetchFunction=function(e){return t.entityViewService.getEdgeEntityViews(t.config.componentsData.edgeId,e,t.config.componentsData.entityViewType)}:(this.config.entitiesFetchFunction=function(e){return t.entityViewService.getCustomerEntityViewInfos(t.customerId,e,t.config.componentsData.entityViewType)},this.config.deleteEntity=function(e){return t.entityViewService.unassignEntityViewFromCustomer(e.id)})},e.prototype.configureCellActions=function(e){var t=this,n=[];return"tenant"===e&&n.push({name:this.translate.instant("entity-view.make-public"),icon:"share",isEnabled:function(e){return!e.customerId||e.customerId.id===Kt.a},onAction:function(e,n){return t.makePublic(e,n)}},{name:this.translate.instant("entity-view.assign-to-customer"),icon:"assignment_ind",isEnabled:function(e){return!e.customerId||e.customerId.id===Kt.a},onAction:function(e,n){return t.assignToCustomer(e,[n.id])}},{name:this.translate.instant("entity-view.unassign-from-customer"),icon:"assignment_return",isEnabled:function(e){return e.customerId&&e.customerId.id!==Kt.a&&!e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}},{name:this.translate.instant("entity-view.make-private"),icon:"reply",isEnabled:function(e){return e.customerId&&e.customerId.id!==Kt.a&&e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}}),"customer"===e&&n.push({name:this.translate.instant("entity-view.unassign-from-customer"),icon:"assignment_return",isEnabled:function(e){return e.customerId&&e.customerId.id!==Kt.a&&!e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}},{name:this.translate.instant("entity-view.make-private"),icon:"reply",isEnabled:function(e){return e.customerId&&e.customerId.id!==Kt.a&&e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}}),"edge"===e&&n.push({name:this.translate.instant("edge.unassign-from-edge"),icon:"assignment_return",isEnabled:function(){return!0},onAction:function(e,n){return t.unassignFromEdge(e,n)}}),n},e.prototype.configureGroupActions=function(e){var t=this,n=[];return"tenant"===e&&n.push({name:this.translate.instant("entity-view.assign-entity-views"),icon:"assignment_ind",isEnabled:!0,onAction:function(e,n){return t.assignToCustomer(e,n.map(function(e){return e.id}))}}),"customer"===e&&n.push({name:this.translate.instant("entity-view.unassign-entity-views"),icon:"assignment_return",isEnabled:!0,onAction:function(e,n){return t.unassignEntityViewsFromCustomer(e,n)}}),"edge"===e&&n.push({name:this.translate.instant("entity-view.unassign-entity-views-from-edge"),icon:"assignment_return",isEnabled:!0,onAction:function(e,n){return t.unassignEntityViewsFromEdge(e,n)}}),n},e.prototype.configureAddActions=function(e){var t=this,n=[];return"customer"===e&&n.push({name:this.translate.instant("entity-view.assign-new-entity-view"),icon:"add",isEnabled:function(){return!0},onAction:function(e){return t.addEntityViewsToCustomer(e)}}),"edge"===e&&n.push({name:this.translate.instant("entity-view.assign-new-entity-view"),icon:"add",isEnabled:function(){return!0},onAction:function(e){return t.addEntityViewsToEdge(e)}}),n},e.prototype.addEntityViewsToCustomer=function(e){var t=this;e&&e.stopPropagation(),this.dialog.open(pa.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{customerId:this.customerId,entityType:$t.b.ENTITY_VIEW}}).afterClosed().subscribe(function(e){e&&t.config.table.updateData()})},e.prototype.makePublic=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("entity-view.make-public-entity-view-title",{entityViewName:t.name}),this.translate.instant("entity-view.make-public-entity-view-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){e&&n.entityViewService.makeEntityViewPublic(t.id.id).subscribe(function(){n.config.table.updateData()})})},e.prototype.assignToCustomer=function(e,t){var n=this;e&&e.stopPropagation(),this.dialog.open(ua.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entityIds:t,entityType:$t.b.ENTITY_VIEW}}).afterClosed().subscribe(function(e){e&&n.config.table.updateData()})},e.prototype.unassignFromCustomer=function(e,t){var n,i,r=this;e&&e.stopPropagation(),t.customerIsPublic?(n=this.translate.instant("entity-view.make-private-entity-view-title",{entityViewName:t.name}),i=this.translate.instant("entity-view.make-private-entity-view-text")):(n=this.translate.instant("entity-view.unassign-entity-view-title",{entityViewName:t.name}),i=this.translate.instant("entity-view.unassign-entity-view-text")),this.dialogService.confirm(n,i,this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){e&&r.entityViewService.unassignEntityViewFromCustomer(t.id.id).subscribe(function(){r.config.table.updateData()})})},e.prototype.unassignEntityViewsFromCustomer=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("entity-view.unassign-entity-views-title",{count:t.length}),this.translate.instant("entity-view.unassign-entity-views-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){if(e){var i=[];t.forEach(function(e){i.push(n.entityViewService.unassignEntityViewFromCustomer(e.id.id))}),Object(ye.a)(i).subscribe(function(){n.config.table.updateData()})}})},e.prototype.onEntityViewAction=function(e){switch(e.action){case"makePublic":return this.makePublic(e.event,e.entity),!0;case"assignToCustomer":return this.assignToCustomer(e.event,[e.entity.id]),!0;case"unassignFromCustomer":return this.unassignFromCustomer(e.event,e.entity),!0;case"unassignFromEdge":return this.unassignFromEdge(e.event,e.entity),!0}return!1},e.prototype.addEntityViewsToEdge=function(e){var t=this;e&&e.stopPropagation(),this.dialog.open(Ca.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{edgeId:this.config.componentsData.edgeId,entityType:$t.b.ENTITY_VIEW}}).afterClosed().subscribe(function(e){e&&t.config.table.updateData()})},e.prototype.unassignFromEdge=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("entity-view.unassign-entity-view-from-edge-title",{entityViewName:t.name}),this.translate.instant("entity-view.unassign-entity-view-from-edge-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){e&&n.entityViewService.unassignEntityViewFromEdge(n.config.componentsData.edgeId,t.id.id).subscribe(function(){n.config.table.updateData()})})},e.prototype.unassignEntityViewsFromEdge=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("entity-view.unassign-entity-views-from-edge-title",{count:t.length}),this.translate.instant("entity-view.unassign-entity-views-from-edge-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){if(e){var i=[];t.forEach(function(e){i.push(n.entityViewService.unassignEntityViewFromEdge(n.config.componentsData.edgeId,e.id.id))}),Object(ye.a)(i).subscribe(function(){n.config.table.updateData()})}})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](h.Store),i["\u0275\u0275inject"](Zr.a),i["\u0275\u0275inject"](Mo.a),i["\u0275\u0275inject"](Mi.a),i["\u0275\u0275inject"](wa.a),i["\u0275\u0275inject"](Y.a),i["\u0275\u0275inject"](g.TranslateService),i["\u0275\u0275inject"](r.DatePipe),i["\u0275\u0275inject"](a.Router),i["\u0275\u0275inject"](Ct.MatDialog))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0;var Oo=[{path:"entityViews",component:qt.a,data:{auth:[X.a.TENANT_ADMIN,X.a.CUSTOMER_USER],title:"entity-view.entity-views",entityViewsType:"tenant",breadcrumb:{label:"entity-view.entity-views",icon:"view_quilt"}},resolve:{entitiesTableConfig:Lo}}],Bo=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[Lo],imports:[[a.RouterModule.forChild(Oo)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](Bo,{imports:[a.RouterModule],exports:[a.RouterModule]})),0;var Ro=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[r.CommonModule,vn.a,yn.a,mo.a,Bo]]}),e}();function jo(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"rulechain.name-required")," "))}void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](Ro,{declarations:[Io,No,To],imports:[r.CommonModule,vn.a,yn.a,mo.a,Bo]})),0;var Vo=function(e){function t(t,n,i,r,a,o){var l=e.call(this,t,a,i,r,o)||this;return l.store=t,l.translate=n,l.entityValue=i,l.entitiesTableConfigValue=r,l.fb=a,l.cd=o,l}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){this.ruleChainScope=this.entitiesTableConfig.componentsData.ruleChainScope,e.prototype.ngOnInit.call(this)},t.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},t.prototype.buildForm=function(e){return this.fb.group({name:[e?e.name:"",[s.Validators.required]],debugMode:[!!e&&e.debugMode],additionalInfo:this.fb.group({description:[e&&e.additionalInfo?e.additionalInfo.description:""]})})},t.prototype.updateForm=function(e){this.entityForm.patchValue({name:e.name}),this.entityForm.patchValue({debugMode:e.debugMode}),this.entityForm.patchValue({additionalInfo:{description:e.additionalInfo?e.additionalInfo.description:""}})},t.prototype.onRuleChainIdCopied=function(e){this.store.dispatch(new u.b({message:this.translate.instant("rulechain.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},t.prototype.isEdgeRootRuleChain=function(){var e,t;return!(!this.entitiesTableConfig||!this.entityValue)&&(null===(t=null===(e=this.entitiesTableConfig.componentsData.edge)||void 0===e?void 0:e.rootRuleChainId)||void 0===t?void 0:t.id)==this.entityValue.id.id},t.prototype.isAutoAssignToEdgeRuleChain=function(){var e,t;return!(!this.entitiesTableConfig||!this.entityValue)&&(!this.entityValue.root&&(null===(t=null===(e=this.entitiesTableConfig.componentsData)||void 0===e?void 0:e.autoAssignToEdgeRuleChainIds)||void 0===t?void 0:t.includes(this.entityValue.id.id)))},t.prototype.isNotAutoAssignToEdgeRuleChain=function(){var e,t;return!(!this.entitiesTableConfig||!this.entityValue)&&(!this.entityValue.root&&!(null===(t=null===(e=this.entitiesTableConfig.componentsData)||void 0===e?void 0:e.autoAssignToEdgeRuleChainIds)||void 0===t?void 0:t.includes(this.entityValue.id.id)))},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](g.TranslateService),i["\u0275\u0275directiveInject"]("entity"),i["\u0275\u0275directiveInject"]("entitiesTableConfig"),i["\u0275\u0275directiveInject"](s.FormBuilder),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-rulechain"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:55,vars:66,consts:[[1,"tb-details-buttons"],["mat-raised-button","","color","accent",3,"disabled","fxShow","click"],["fxLayout","row"],["mat-raised-button","","ngxClipboard","",3,"cbContent","fxShow","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"],["translate",""],["fxLayout","column",1,"mat-padding"],[3,"formGroup"],[3,"disabled"],[1,"mat-block"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["fxFlex","","formControlName","debugMode",2,"padding-bottom","16px"],["formGroupName","additionalInfo"],["matInput","","formControlName","description","rows","2"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"open")}),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"export")}),i["\u0275\u0275pipe"](6,"async"),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"setRoot")}),i["\u0275\u0275pipe"](10,"async"),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"setEdgeTemplateRoot")}),i["\u0275\u0275pipe"](14,"async"),i["\u0275\u0275text"](15),i["\u0275\u0275pipe"](16,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"setAutoAssignToEdge")}),i["\u0275\u0275pipe"](18,"async"),i["\u0275\u0275text"](19),i["\u0275\u0275pipe"](20,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](21,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"unsetAutoAssignToEdge")}),i["\u0275\u0275pipe"](22,"async"),i["\u0275\u0275text"](23),i["\u0275\u0275pipe"](24,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](25,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"unassignFromEdge")}),i["\u0275\u0275pipe"](26,"async"),i["\u0275\u0275text"](27),i["\u0275\u0275pipe"](28,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](29,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"delete")}),i["\u0275\u0275pipe"](30,"async"),i["\u0275\u0275text"](31),i["\u0275\u0275pipe"](32,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](33,"div",2),i["\u0275\u0275elementStart"](34,"button",3),i["\u0275\u0275listener"]("cbOnSuccess",function(e){return t.onRuleChainIdCopied(e)}),i["\u0275\u0275element"](35,"mat-icon",4),i["\u0275\u0275elementStart"](36,"span",5),i["\u0275\u0275text"](37,"rulechain.copyId"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](38,"div",6),i["\u0275\u0275elementStart"](39,"form",7),i["\u0275\u0275elementStart"](40,"fieldset",8),i["\u0275\u0275pipe"](41,"async"),i["\u0275\u0275elementStart"](42,"mat-form-field",9),i["\u0275\u0275elementStart"](43,"mat-label",5),i["\u0275\u0275text"](44,"rulechain.name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](45,"input",10),i["\u0275\u0275template"](46,jo,3,3,"mat-error",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](47,"mat-checkbox",12),i["\u0275\u0275text"](48),i["\u0275\u0275pipe"](49,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](50,"div",13),i["\u0275\u0275elementStart"](51,"mat-form-field",9),i["\u0275\u0275elementStart"](52,"mat-label",5),i["\u0275\u0275text"](53,"rulechain.description"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](54,"textarea",14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](2,30,t.isLoading$))("fxShow",!t.isEdit),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](4,32,"rulechain.open-rulechain")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](6,34,t.isLoading$))("fxShow",!t.isEdit),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](8,36,"rulechain.export")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](10,38,t.isLoading$))("fxShow",!t.isEdit&&(!(null!=t.entity&&t.entity.root)&&"tenant"===t.ruleChainScope||!t.isEdgeRootRuleChain()&&"edge"===t.ruleChainScope)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](12,40,"rulechain.set-root")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](14,42,t.isLoading$))("fxShow",!(t.isEdit||null!=t.entity&&t.entity.root||"edges"!==t.ruleChainScope)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](16,44,"rulechain.set-edge-template-root-rulechain")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](18,46,t.isLoading$))("fxShow",!t.isEdit&&t.isNotAutoAssignToEdgeRuleChain()&&"edges"===t.ruleChainScope),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](20,48,"rulechain.set-auto-assign-to-edge")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](22,50,t.isLoading$))("fxShow",!t.isEdit&&t.isAutoAssignToEdgeRuleChain()&&"edges"===t.ruleChainScope),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](24,52,"rulechain.unset-auto-assign-to-edge")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](26,54,t.isLoading$))("fxShow",!t.isEdit&&!t.isEdgeRootRuleChain()&&"edge"===t.ruleChainScope),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](28,56,"edge.unassign-from-edge")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](30,58,t.isLoading$))("fxShow",!t.hideDelete()&&!t.isEdit&&"edge"!==t.ruleChainScope),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](32,60,"rulechain.delete")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("cbContent",null==t.entity||null==t.entity.id?null:t.entity.id.id)("fxShow",!t.isEdit),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("formGroup",t.entityForm),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](41,62,t.isLoading$)||!t.isEdit),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",t.entityForm.get("name").hasError("required")),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](49,64,"rulechain.debug-mode")," "))},directives:[E.MatButton,Ie.d,v.f,on.a,we.MatIcon,g.TranslateDirective,s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,x.MatFormField,x.MatLabel,S.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,s.RequiredValidator,r.NgIf,D.MatCheckbox,v.b,s.FormGroupName,x.MatError],pipes:[r.AsyncPipe,g.TranslatePipe],styles:[""]}),t}(nn.a);0,void 0;var zo=n("8km5"),Go=n("C4fA");function Wo(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,2),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-attribute-table",3),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,5,"attribute.attributes")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("defaultAttributeScope",r.attributeScopes.SERVER_SCOPE)("active",n.isActive)("entityId",r.entity.id)("entityName",r.entity.name)}}function qo(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,4),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-attribute-table",5),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,5,"attribute.latest-telemetry")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("defaultAttributeScope",r.latestTelemetryTypes.LATEST_TELEMETRY)("active",n.isActive)("entityId",r.entity.id)("entityName",r.entity.name)}}function Ho(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,6),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-alarm-table",7),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,3,"alarm.alarms")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("active",n.isActive)("entityId",r.entity.id)}}var Uo=function(e){return[e]};function $o(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,8),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-event-table",9),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,6,"rulechain.events")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("debugEventTypes",i["\u0275\u0275pureFunction1"](8,Uo,r.debugEventTypes.DEBUG_RULE_CHAIN))("defaultEventType",r.debugEventTypes.DEBUG_RULE_CHAIN)("active",n.isActive)("tenantId",r.entity.tenantId.id)("entityId",r.entity.id)}}function Ko(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,10),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-relation-table",7),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,3,"relation.relations")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("active",n.isActive)("entityId",r.entity.id)}}function Yo(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,11),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-audit-log-table",12),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,4,"audit-log.audit-logs")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("active",n.isActive)("auditLogMode",r.auditLogModes.ENTITY)("entityId",r.entity.id)}}var Jo=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-rulechain-tabs"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:6,vars:6,consts:[[3,"label",4,"ngIf"],[3,"label"],["attributesTab","matTab"],[3,"defaultAttributeScope","active","entityId","entityName"],["telemetryTab","matTab"],["disableAttributeScopeSelection","",3,"defaultAttributeScope","active","entityId","entityName"],["alarmsTab","matTab"],[3,"active","entityId"],["eventsTab","matTab"],[3,"debugEventTypes","defaultEventType","active","tenantId","entityId"],["relationsTab","matTab"],["auditLogsTab","matTab"],["detailsMode","true",3,"active","auditLogMode","entityId"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,Wo,4,7,"mat-tab",0),i["\u0275\u0275template"](1,qo,4,7,"mat-tab",0),i["\u0275\u0275template"](2,Ho,4,5,"mat-tab",0),i["\u0275\u0275template"](3,$o,4,10,"mat-tab",0),i["\u0275\u0275template"](4,Ko,4,5,"mat-tab",0),i["\u0275\u0275template"](5,Yo,4,6,"mat-tab",0)),2&e&&(i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity&&t.authUser.authority===t.authorities.TENANT_ADMIN))},directives:[r.NgIf,Ce.MatTab,ui.a,pi.a,mi.a,fi.a,zi.a],pipes:[g.TranslatePipe],encapsulation:2}),t}(ci.a);0,void 0;var Xo=n("9HAa"),Qo=n("FBAY"),Zo=function(){function e(e,t,n,i,r,a,o,l,s){var d=this;this.ruleChainService=e,this.dialogService=t,this.dialog=n,this.importExport=i,this.itembuffer=r,this.edgeService=a,this.translate=o,this.datePipe=l,this.router=s,this.config=new Ht.e,this.config.entityType=$t.b.RULE_CHAIN,this.config.entityComponent=Vo,this.config.entityTabsComponent=Jo,this.config.entityTranslations=$t.d.get($t.b.RULE_CHAIN),this.config.entityResources=$t.c.get($t.b.RULE_CHAIN),this.config.deleteEntityTitle=function(e){return d.translate.instant("rulechain.delete-rulechain-title",{ruleChainName:e.name})},this.config.deleteEntityContent=function(){return d.translate.instant("rulechain.delete-rulechain-text")},this.config.deleteEntitiesTitle=function(e){return d.translate.instant("rulechain.delete-rulechains-title",{count:e})},this.config.deleteEntitiesContent=function(){return d.translate.instant("rulechain.delete-rulechains-text")},this.config.loadEntity=function(e){return d.ruleChainService.getRuleChain(e.id)},this.config.saveEntity=function(e){return d.saveRuleChain(e)},this.config.deleteEntity=function(e){return d.ruleChainService.deleteRuleChain(e.id)},this.config.onEntityAction=function(e){return d.onRuleChainAction(e)}}return e.prototype.resolve=function(e){var t,n,i,r=this,a=null===(t=e.params)||void 0===t?void 0:t.edgeId,o=(null===(n=e.data)||void 0===n?void 0:n.ruleChainsType)?null===(i=e.data)||void 0===i?void 0:i.ruleChainsType:"tenant";return this.config.componentsData={ruleChainScope:o,edgeId:a},this.config.columns=this.configureEntityTableColumns(o),this.config.entitiesFetchFunction=this.configureEntityFunctions(o,a),this.config.groupActionDescriptors=this.configureGroupActions(o),this.config.addActionDescriptors=this.configureAddActions(o),this.config.cellActionDescriptors=this.configureCellActions(o),"tenant"===o||"edges"===o?(this.config.entitySelectionEnabled=function(e){return e&&!e.root},this.config.deleteEnabled=function(e){return e&&!e.root},this.config.entitiesDeleteEnabled=!0,this.config.tableTitle=this.configureTableTitle(o,null)):"edge"===o&&(this.config.entitySelectionEnabled=function(e){return r.config.componentsData.edge.rootRuleChainId.id!==e.id.id},this.edgeService.getEdge(a).subscribe(function(e){r.config.componentsData.edge=e,r.config.tableTitle=r.configureTableTitle(o,e)}),this.config.entitiesDeleteEnabled=!1),this.config},e.prototype.configureEntityTableColumns=function(e){var t=this,n=[];return n.push(new Ht.b("createdTime","common.created-time",this.datePipe,"150px"),new Ht.d("name","rulechain.name","100%")),"tenant"===e||"edge"===e?n.push(new Ht.d("root","rulechain.root","60px",function(n){return"edge"===e?Object(Ht.f)(t.config.componentsData.edge.rootRuleChainId.id===n.id.id):Object(Ht.f)(n.root)})):"edges"===e&&n.push(new Ht.d("root","rulechain.edge-template-root","60px",function(e){return Object(Ht.f)(e.root)}),new Ht.d("assignToEdge","rulechain.assign-to-edge","60px",function(e){return Object(Ht.f)(t.isAutoAssignToEdgeRuleChain(e))})),n},e.prototype.configureAddActions=function(e){var t=this,n=[];return"tenant"!==e&&"edges"!==e||n.push({name:this.translate.instant("rulechain.create-new-rulechain"),icon:"insert_drive_file",isEnabled:function(){return!0},onAction:function(e){return t.config.table.addEntity(e)}},{name:this.translate.instant("rulechain.import"),icon:"file_upload",isEnabled:function(){return!0},onAction:function(e){return t.importRuleChain(e)}}),"edge"===e&&n.push({name:this.translate.instant("rulechain.assign-new-rulechain"),icon:"add",isEnabled:function(){return!0},onAction:function(e){return t.addRuleChainsToEdge(e)}}),n},e.prototype.configureEntityFunctions=function(e,t){var n=this;return"tenant"===e?function(e){return n.fetchRuleChains(e)}:"edges"===e?function(e){return n.fetchEdgeRuleChains(e)}:"edge"===e?function(e){return n.ruleChainService.getEdgeRuleChains(t,e)}:void 0},e.prototype.configureTableTitle=function(e,t){return"tenant"===e?this.translate.instant("rulechain.rulechains"):"edges"===e?this.translate.instant("edge.rulechain-templates"):"edge"===e?this.config.tableTitle=t.name+": "+this.translate.instant("edge.rulechains"):void 0},e.prototype.configureGroupActions=function(e){var t=this,n=[];return"edge"===e&&n.push({name:this.translate.instant("rulechain.unassign-rulechains"),icon:"assignment_return",isEnabled:!0,onAction:function(e,n){return t.unassignRuleChainsFromEdge(e,n)}}),n},e.prototype.configureCellActions=function(e){var t=this,n=[];return n.push({name:this.translate.instant("rulechain.open-rulechain"),icon:"settings_ethernet",isEnabled:function(){return!0},onAction:function(e,n){return t.openRuleChain(e,n)}},{name:this.translate.instant("rulechain.export"),icon:"file_download",isEnabled:function(){return!0},onAction:function(e,n){return t.exportRuleChain(e,n)}}),"tenant"===e&&n.push({name:this.translate.instant("rulechain.set-root"),icon:"flag",isEnabled:function(e){return t.isNonRootRuleChain(e)},onAction:function(e,n){return t.setRootRuleChain(e,n)}}),"edges"===e&&n.push({name:this.translate.instant("rulechain.set-edge-template-root-rulechain"),icon:"flag",isEnabled:function(e){return t.isNonRootRuleChain(e)},onAction:function(e,n){return t.setEdgeTemplateRootRuleChain(e,n)}},{name:this.translate.instant("rulechain.set-auto-assign-to-edge"),icon:"bookmark_outline",isEnabled:function(e){return t.isNotAutoAssignToEdgeRuleChain(e)},onAction:function(e,n){return t.setAutoAssignToEdgeRuleChain(e,n)}},{name:this.translate.instant("rulechain.unset-auto-assign-to-edge"),icon:"bookmark",isEnabled:function(e){return t.isAutoAssignToEdgeRuleChain(e)},onAction:function(e,n){return t.unsetAutoAssignToEdgeRuleChain(e,n)}}),"edge"===e&&n.push({name:this.translate.instant("rulechain.set-root"),icon:"flag",isEnabled:function(e){return t.isNonRootRuleChain(e)},onAction:function(e,n){return t.setRootRuleChain(e,n)}},{name:this.translate.instant("edge.unassign-from-edge"),icon:"assignment_return",isEnabled:function(e){return e.id.id!==t.config.componentsData.edge.rootRuleChainId.id},onAction:function(e,n){return t.unassignFromEdge(e,n)}}),n},e.prototype.importRuleChain=function(e){var t=this;e&&e.stopPropagation();var n="tenant"===this.config.componentsData.ruleChainScope?zo.a.CORE:zo.a.EDGE;this.importExport.importRuleChain(n).subscribe(function(e){e&&(t.itembuffer.storeRuleChainImport(e),"edges"===t.config.componentsData.ruleChainScope?t.router.navigateByUrl("edgeManagement/ruleChains/ruleChain/import"):t.router.navigateByUrl("ruleChains/ruleChain/import"))})},e.prototype.openRuleChain=function(e,t){e&&e.stopPropagation(),"edges"===this.config.componentsData.ruleChainScope?this.router.navigateByUrl("edgeManagement/ruleChains/"+t.id.id):"edge"===this.config.componentsData.ruleChainScope?this.router.navigateByUrl("edgeInstances/"+this.config.componentsData.edgeId+"/ruleChains/"+t.id.id):this.router.navigateByUrl("ruleChains/"+t.id.id)},e.prototype.saveRuleChain=function(e){return Object(p.B)(e.type)&&("tenant"===this.config.componentsData.ruleChainScope?e.type=zo.a.CORE:"edges"===this.config.componentsData.ruleChainScope?e.type=zo.a.EDGE:e.type=zo.a.CORE),this.ruleChainService.saveRuleChain(e)},e.prototype.exportRuleChain=function(e,t){e&&e.stopPropagation(),this.importExport.exportRuleChain(t.id.id)},e.prototype.setRootRuleChain=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("rulechain.set-root-rulechain-title",{ruleChainName:t.name}),this.translate.instant("rulechain.set-root-rulechain-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){e&&("edge"===n.config.componentsData.ruleChainScope?n.ruleChainService.setEdgeRootRuleChain(n.config.componentsData.edgeId,t.id.id).subscribe(function(e){n.config.componentsData.edge=e,n.config.table.updateData()}):n.ruleChainService.setRootRuleChain(t.id.id).subscribe(function(){n.config.table.updateData()}))})},e.prototype.onRuleChainAction=function(e){switch(e.action){case"open":return this.openRuleChain(e.event,e.entity),!0;case"export":return this.exportRuleChain(e.event,e.entity),!0;case"setRoot":return this.setRootRuleChain(e.event,e.entity),!0;case"setEdgeTemplateRoot":return this.setEdgeTemplateRootRuleChain(e.event,e.entity),!0;case"unassignFromEdge":return this.unassignFromEdge(e.event,e.entity),!0;case"setAutoAssignToEdge":return this.setAutoAssignToEdgeRuleChain(e.event,e.entity),!0;case"unsetAutoAssignToEdge":return this.unsetAutoAssignToEdgeRuleChain(e.event,e.entity),!0}return!1},e.prototype.setEdgeTemplateRootRuleChain=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("rulechain.set-edge-template-root-rulechain-title",{ruleChainName:t.name}),this.translate.instant("rulechain.set-edge-template-root-rulechain-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){e&&n.ruleChainService.setEdgeTemplateRootRuleChain(t.id.id).subscribe(function(){n.config.table.updateData()})})},e.prototype.addRuleChainsToEdge=function(e){var t=this;e&&e.stopPropagation(),this.dialog.open(Ca.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{edgeId:this.config.componentsData.edgeId,entityType:$t.b.RULE_CHAIN}}).afterClosed().subscribe(function(e){e&&t.edgeService.findMissingToRelatedRuleChains(t.config.componentsData.edgeId).subscribe(function(e){if(e&&Object.keys(e).length>0){for(var n=new Array,i=0,r=Object.keys(e);i<r.length;i++){var a=r[i],o="- '"+a+"': '"+e[a].join("', ")+"'";n.push(o)}var l=t.translate.instant("edge.missing-related-rule-chains-text",{missingRuleChains:n.join("<br>")});t.dialogService.alert(t.translate.instant("edge.missing-related-rule-chains-title"),l,t.translate.instant("action.close"),!0).subscribe(function(){t.config.table.updateData()})}else t.config.table.updateData()})})},e.prototype.unassignFromEdge=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("rulechain.unassign-rulechain-title",{ruleChainName:t.name}),this.translate.instant("rulechain.unassign-rulechain-from-edge-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){e&&n.ruleChainService.unassignRuleChainFromEdge(n.config.componentsData.edgeId,t.id.id).subscribe(function(){n.config.table.updateData()})})},e.prototype.unassignRuleChainsFromEdge=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("rulechain.unassign-rulechains-from-edge-title",{count:t.length}),this.translate.instant("rulechain.unassign-rulechains-from-edge-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){if(e){var i=[];t.forEach(function(e){i.push(n.ruleChainService.unassignRuleChainFromEdge(n.config.componentsData.edgeId,e.id.id))}),Object(ye.a)(i).subscribe(function(){n.config.table.updateData()})}})},e.prototype.setAutoAssignToEdgeRuleChain=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("rulechain.set-auto-assign-to-edge-title",{ruleChainName:t.name}),this.translate.instant("rulechain.set-auto-assign-to-edge-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){e&&n.ruleChainService.setAutoAssignToEdgeRuleChain(t.id.id).subscribe(function(){n.config.table.updateData()})})},e.prototype.unsetAutoAssignToEdgeRuleChain=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("rulechain.unset-auto-assign-to-edge-title",{ruleChainName:t.name}),this.translate.instant("rulechain.unset-auto-assign-to-edge-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){e&&n.ruleChainService.unsetAutoAssignToEdgeRuleChain(t.id.id).subscribe(function(){n.config.table.updateData()})})},e.prototype.isNonRootRuleChain=function(e){return"edge"===this.config.componentsData.ruleChainScope?this.config.componentsData.edge.rootRuleChainId&&this.config.componentsData.edge.rootRuleChainId.id!==e.id.id:!e.root},e.prototype.isAutoAssignToEdgeRuleChain=function(e){return!e.root&&this.config.componentsData.autoAssignToEdgeRuleChainIds.includes(e.id.id)},e.prototype.isNotAutoAssignToEdgeRuleChain=function(e){return!e.root&&!this.config.componentsData.autoAssignToEdgeRuleChainIds.includes(e.id.id)},e.prototype.fetchRuleChains=function(e){return this.ruleChainService.getRuleChains(e,zo.a.CORE)},e.prototype.fetchEdgeRuleChains=function(e){var t=this;return this.ruleChainService.getAutoAssignToEdgeRuleChains().pipe(Object(Zt.b)(function(n){return t.config.componentsData.autoAssignToEdgeRuleChainIds=[],n.map(function(e){return t.config.componentsData.autoAssignToEdgeRuleChainIds.push(e.id.id)}),t.ruleChainService.getRuleChains(e,zo.a.EDGE)}))},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](Go.a),i["\u0275\u0275inject"](Y.a),i["\u0275\u0275inject"](Ct.MatDialog),i["\u0275\u0275inject"](Xo.a),i["\u0275\u0275inject"](Qo.a),i["\u0275\u0275inject"](wa.a),i["\u0275\u0275inject"](g.TranslateService),i["\u0275\u0275inject"](r.DatePipe),i["\u0275\u0275inject"](a.Router))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0;var el=n("Cfvw"),tl=n("m3bB"),nl=n("GL+W"),il=n("6C3e"),rl=function(){function e(e){this.ruleChainService=e}return e.prototype.resolve=function(e){var t=e.params.ruleChainId;return this.ruleChainService.getRuleChain(t)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](Go.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0;var al=function(){function e(e){this.ruleChainService=e}return e.prototype.resolve=function(e){var t=e.params.ruleChainId;return this.ruleChainService.getResolvedRuleChainMetadata(t)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](Go.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0;var ol=function(){function e(e,t){this.ruleChainService=e,this.modulesMap=t}return e.prototype.resolve=function(e){return this.ruleChainService.getRuleNodeComponents(this.modulesMap,e.data.ruleChainType)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](Go.a),i["\u0275\u0275inject"](il.MODULES_MAP,8))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0;var ll=function(){function e(){}return e.prototype.resolve=function(e){return Object(el.a)(n.e(12).then(n.t.bind(null,"N1Jl",7)))},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0;var sl=function(){function e(e,t){this.itembuffer=e,this.router=t}return e.prototype.canActivate=function(e,t){return!!this.itembuffer.hasRuleChainImport()||this.router.parseUrl("ruleChains")},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](nl.ItemBufferService),i["\u0275\u0275inject"](a.Router))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0;var dl=function(e,t,n){var i=n.ruleChain.name;return n.ruleChain.root&&(i+=" ("+t.instant("rulechain.root")+")"),i},cl=function(e,t,n){return t.instant("rulechain.import")+": "+n.ruleChain.name},ul=[{path:"ruleChains",data:{breadcrumb:{label:"rulechain.rulechains",icon:"settings_ethernet"}},children:[{path:"",component:qt.a,data:{auth:[X.a.TENANT_ADMIN],title:"rulechain.rulechains",ruleChainsType:"tenant"},resolve:{entitiesTableConfig:Zo}},{path:":ruleChainId",component:tl.c,canDeactivate:[J],data:{breadcrumb:{labelFunction:dl,icon:"settings_ethernet"},auth:[X.a.TENANT_ADMIN],title:"rulechain.rulechain",import:!1,ruleChainType:zo.a.CORE},resolve:{ruleChain:rl,ruleChainMetaData:al,ruleNodeComponents:ol,tooltipster:ll}},{path:"ruleChain/import",component:tl.c,canActivate:[sl],canDeactivate:[J],data:{breadcrumb:{labelFunction:cl,icon:"settings_ethernet"},auth:[X.a.TENANT_ADMIN],title:"rulechain.rulechain",import:!0,ruleChainType:zo.a.CORE},resolve:{ruleNodeComponents:ol,tooltipster:ll}}]}],pl=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[Zo,rl,al,ol,ll,sl],imports:[[a.RouterModule.forChild(ul)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](pl,{imports:[a.RouterModule],exports:[a.RouterModule]})),0;var ml=n("/Vd+"),fl=n("+5dr"),hl=n("jhN1");function gl(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-icon",10),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n.node.icon)}}function bl(e,t){if(1&e&&i["\u0275\u0275element"](0,"img",11),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("src",n.iconUrl,i["\u0275\u0275sanitizeUrl"])}}function vl(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span",12),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n.node.name)}}function yl(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",13),i["\u0275\u0275element"](1,"div",14),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("connector",n)("callbacks",r.callbacks),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("connector",n)("nodeRectInfo",r.nodeRectInfo)("mouseOverConnector",r.mouseOverConnector)("callbacks",r.callbacks)("modelservice",r.modelservice)}}function xl(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",13),i["\u0275\u0275element"](1,"div",14),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("connector",n)("callbacks",r.callbacks),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("connector",n)("nodeRectInfo",r.nodeRectInfo)("mouseOverConnector",r.mouseOverConnector)("callbacks",r.callbacks)("modelservice",r.modelservice)}}function Sl(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"section"),i["\u0275\u0275elementStart"](1,"div",15),i["\u0275\u0275listener"]("click",function(e){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"]();return t.userNodeCallbacks.nodeEdit(e,t.node)}),i["\u0275\u0275element"](2,"i",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",17),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"]();return e.modelservice.nodes.delete(e.node)}),i["\u0275\u0275text"](4," \xd7 "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function wl(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"section"),i["\u0275\u0275elementStart"](1,"div",18),i["\u0275\u0275listener"]("click",function(e){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"]();return t.openRuleChain(e,t.node)}),i["\u0275\u0275element"](2,"mat-icon",19),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}var Cl=function(e,t){return{"tb-rule-node-highlighted":e,"tb-rule-node-invalid":t}},El=function(e){function t(t,n){var i=e.call(this)||this;return i.sanitizer=t,i.router=n,i.RuleNodeType=fl.c,i}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.node.iconUrl&&(this.iconUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.node.iconUrl))},t.prototype.openRuleChain=function(e,t){e&&e.stopPropagation(),t.targetRuleChainId&&(t.ruleChainType===zo.a.EDGE?this.router.navigateByUrl("/edgeManagement/ruleChains/"+t.targetRuleChainId):this.router.navigateByUrl("/ruleChains/"+t.targetRuleChainId))},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](hl.DomSanitizer),i["\u0275\u0275directiveInject"](a.Router))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["rule-node"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:15,vars:21,consts:[[3,"dblclick","mousedown","mouseenter","mouseleave"],[1,"fc-node-overlay"],[3,"ngClass"],["fxFlex","15",4,"ngIf"],["fxFlex","15",3,"src",4,"ngIf"],["fxLayout","column","fxFlex","85","fxLayoutAlign","center"],[1,"tb-node-type"],["class","tb-node-title",4,"ngIf"],["fc-magnet","",3,"connector","callbacks",4,"ngFor","ngForOf"],[4,"ngIf"],["fxFlex","15"],["fxFlex","15",3,"src"],[1,"tb-node-title"],["fc-magnet","",3,"connector","callbacks"],["fc-connector","",3,"connector","nodeRectInfo","mouseOverConnector","callbacks","modelservice"],[1,"fc-nodeedit",3,"click"],["aria-hidden","true",1,"fa","fa-pencil"],[1,"fc-nodedelete",3,"click"],[1,"fc-nodeopen",3,"click"],["svgIcon","mdi:login",1,"material-icons"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275listener"]("dblclick",function(e){return t.userNodeCallbacks.doubleClick(e,t.node)})("mousedown",function(e){return t.userNodeCallbacks.mouseDown(e,t.node)})("mouseenter",function(e){return t.userNodeCallbacks.mouseEnter(e,t.node)})("mouseleave",function(e){return t.userNodeCallbacks.mouseLeave(e,t.node)}),i["\u0275\u0275element"](1,"div",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275template"](3,gl,2,1,"mat-icon",3),i["\u0275\u0275template"](4,bl,1,1,"img",4),i["\u0275\u0275elementStart"](5,"div",5),i["\u0275\u0275elementStart"](6,"span",6),i["\u0275\u0275text"](7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,vl,2,1,"span",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"div"),i["\u0275\u0275template"](10,yl,2,7,"div",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"div"),i["\u0275\u0275template"](12,xl,2,7,"div",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](13,Sl,5,0,"section",9),i["\u0275\u0275template"](14,wl,3,0,"section",9),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275classMapInterpolate1"]("tb-rule-node ",t.node.nodeClass,""),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction2"](18,Cl,t.node.highlighted,t.node.error)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.iconUrl),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.iconUrl),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](t.node.component.name),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.node.name),i["\u0275\u0275advance"](1),i["\u0275\u0275classMap"](t.flowchartConstants.leftConnectorClass),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",t.modelservice.nodes.getConnectorsByType(t.node,t.flowchartConstants.leftConnectorType)),i["\u0275\u0275advance"](1),i["\u0275\u0275classMap"](t.flowchartConstants.rightConnectorClass),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",t.modelservice.nodes.getConnectorsByType(t.node,t.flowchartConstants.rightConnectorType)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.modelservice.isEditable()&&!t.node.readonly),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.node.component.type===t.RuleNodeType.RULE_CHAIN&&t.modelservice.isEditable()))},directives:[r.NgClass,Ie.b,r.NgIf,v.f,v.b,v.e,r.NgForOf,we.MatIcon,ml.c,ml.b],styles:["[_nghost-%COMP%]   .fc-node-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;left:0;top:0;right:0;bottom:0;background-color:#000;border-radius:5px;opacity:0}[_nghost-%COMP%]   .fc-hover[_nghost-%COMP%]   .fc-node-overlay[_ngcontent-%COMP%], .fc-hover   [_nghost-%COMP%]   .fc-node-overlay[_ngcontent-%COMP%]{opacity:.25;transition:opacity .2s}[_nghost-%COMP%]   .fc-selected[_nghost-%COMP%]   .fc-node-overlay[_ngcontent-%COMP%], .fc-selected   [_nghost-%COMP%]   .fc-node-overlay[_ngcontent-%COMP%]{opacity:.25}[_nghost-%COMP%]   .fc-edit[_nghost-%COMP%]   .fc-nodedelete[_ngcontent-%COMP%], .fc-edit   [_nghost-%COMP%]   .fc-nodedelete[_ngcontent-%COMP%], [_nghost-%COMP%]   .fc-edit[_nghost-%COMP%]   .fc-nodeedit[_ngcontent-%COMP%], .fc-edit   [_nghost-%COMP%]   .fc-nodeedit[_ngcontent-%COMP%]{box-sizing:content-box;border:2px solid #fff;background:#f83e05;outline:none}[_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]{box-sizing:content-box;display:flex;flex-direction:row;min-width:150px;max-width:150px;height:32px;min-height:32px;max-height:32px;padding:5px 10px;font-size:12px;line-height:16px;color:#333;pointer-events:none;background-color:#f15b26;border:1px solid #777;border-radius:5px}[_nghost-%COMP%]   .tb-rule-node.tb-filter-type[_ngcontent-%COMP%]{background-color:#f1e861}[_nghost-%COMP%]   .tb-rule-node.tb-enrichment-type[_ngcontent-%COMP%]{background-color:#cdf14e}[_nghost-%COMP%]   .tb-rule-node.tb-transformation-type[_ngcontent-%COMP%]{background-color:#79cef1}[_nghost-%COMP%]   .tb-rule-node.tb-action-type[_ngcontent-%COMP%]{background-color:#f1928f}[_nghost-%COMP%]   .tb-rule-node.tb-external-type[_ngcontent-%COMP%]{background-color:#fbc766}[_nghost-%COMP%]   .tb-rule-node.tb-rule-chain-type[_ngcontent-%COMP%]{background-color:#d6c4f1}[_nghost-%COMP%]   .tb-rule-node.tb-unknown-type[_ngcontent-%COMP%]{background-color:#f16c29}[_nghost-%COMP%]   .tb-rule-node.tb-rule-node-highlighted[_ngcontent-%COMP%]:not(.tb-rule-node-invalid){box-shadow:0 0 10px 6px #51cbee}[_nghost-%COMP%]   .tb-rule-node.tb-rule-node-highlighted[_ngcontent-%COMP%]:not(.tb-rule-node-invalid)   .tb-node-title[_ngcontent-%COMP%]{font-weight:700;text-decoration:underline}[_nghost-%COMP%]   .tb-rule-node.tb-rule-node-invalid[_ngcontent-%COMP%]{box-shadow:0 0 10px 6px #ff5c50}[_nghost-%COMP%]   .tb-rule-node.tb-input-type[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#a3eaa9}[_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:auto;width:20px;min-width:20px;height:20px;min-height:20px;padding-right:4px;font-size:20px}[_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   .tb-node-title[_ngcontent-%COMP%]{font-weight:500}[_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   .tb-node-title[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   .tb-node-type[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   .fc-leftConnectors[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   .fc-rightConnectors[_ngcontent-%COMP%]{position:absolute;top:0;z-index:0;display:flex;flex-direction:column;height:100%}[_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   .fc-leftConnectors[_ngcontent-%COMP%]   .fc-magnet[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   .fc-rightConnectors[_ngcontent-%COMP%]   .fc-magnet[_ngcontent-%COMP%]{align-items:center}[_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   .fc-leftConnectors[_ngcontent-%COMP%]{left:-20px}[_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   .fc-rightConnectors[_ngcontent-%COMP%]{right:-20px}[_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   .fc-magnet[_ngcontent-%COMP%]{display:flex;flex-grow:1;justify-content:center;height:60px}[_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   .fc-connector[_ngcontent-%COMP%]{width:14px;height:14px;margin:10px;pointer-events:all;background-color:#ccc;border:1px solid #333;border-radius:5px}[_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   .fc-connector.fc-hover[_ngcontent-%COMP%]{background-color:#000}"]}),t}(ml.d);0,void 0;var Il=n("YCWy"),Tl=n("4t2C"),Ml=n("j22J"),Dl=n("vpxU"),kl=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[{provide:ml.a,useValue:{nodeComponentType:El}}],imports:[[r.CommonModule,vn.a,yn.a,pl]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](kl,{declarations:[Vo,Jo,tl.c,El,Il.a,Dl.a,Ml.a,Tl.a,tl.b,tl.a],imports:[r.CommonModule,vn.a,yn.a,pl]})),0;var Al=n("0HhY");function Fl(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"widgets-bundle.title-required")," "))}var Pl=function(e){function t(t,n,i,r,a){var o=e.call(this,t,r,n,i,a)||this;return o.store=t,o.entityValue=n,o.entitiesTableConfigValue=i,o.fb=r,o.cd=a,o}return Object(o.d)(t,e),t.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},t.prototype.buildForm=function(e){return this.fb.group({title:[e?e.title:"",[s.Validators.required]],image:[e?e.image:""],description:[e?e.description:"",s.Validators.maxLength(255)]})},t.prototype.updateForm=function(e){this.entityForm.patchValue({title:e.title,image:e.image,description:e.description})},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"]("entity"),i["\u0275\u0275directiveInject"]("entitiesTableConfig"),i["\u0275\u0275directiveInject"](s.FormBuilder),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-widgets-bundle"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:31,vars:30,consts:[["fxLayout.xs","column",1,"tb-details-buttons"],["mat-raised-button","","color","accent",3,"disabled","fxShow","click"],["fxLayout","column",1,"mat-padding"],[3,"formGroup"],[3,"disabled"],[1,"mat-block"],["translate",""],["matInput","","formControlName","title","required",""],[4,"ngIf"],["fxFlex","","maxSizeByte","524288","formControlName","image",3,"label"],["matInput","","formControlName","description","rows","2","maxlength","255"],["descriptionInput",""],["align","end"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"open")}),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"export")}),i["\u0275\u0275pipe"](6,"async"),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"delete")}),i["\u0275\u0275pipe"](10,"async"),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"div",2),i["\u0275\u0275elementStart"](14,"form",3),i["\u0275\u0275elementStart"](15,"fieldset",4),i["\u0275\u0275pipe"](16,"async"),i["\u0275\u0275elementStart"](17,"mat-form-field",5),i["\u0275\u0275elementStart"](18,"mat-label",6),i["\u0275\u0275text"](19,"widgets-bundle.title"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](20,"input",7),i["\u0275\u0275template"](21,Fl,3,3,"mat-error",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](22,"tb-image-input",9),i["\u0275\u0275pipe"](23,"translate"),i["\u0275\u0275elementStart"](24,"mat-form-field",5),i["\u0275\u0275elementStart"](25,"mat-label",6),i["\u0275\u0275text"](26,"widgets-bundle.description"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](27,"textarea",10,11),i["\u0275\u0275elementStart"](29,"mat-hint",12),i["\u0275\u0275text"](30),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](28);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](2,14,t.isLoading$))("fxShow",!t.isEdit),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](4,16,"widgets-bundle.open-widgets-bundle")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](6,18,t.isLoading$))("fxShow",!t.isEdit),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](8,20,"widgets-bundle.export")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](10,22,t.isLoading$))("fxShow",!t.hideDelete()&&!t.isEdit),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](12,24,"widgets-bundle.delete")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.entityForm),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](16,26,t.isLoading$)||!t.isEdit),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",t.entityForm.get("title").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](23,28,"widgets-bundle.image-preview")),i["\u0275\u0275advance"](8),i["\u0275\u0275textInterpolate1"]("",(null==n.value?null:n.value.length)||0,"/255")}},directives:[v.f,E.MatButton,Ie.d,s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,x.MatFormField,x.MatLabel,g.TranslateDirective,S.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,s.RequiredValidator,r.NgIf,Al.a,v.b,s.MaxLengthValidator,x.MatHint,x.MatError],pipes:[r.AsyncPipe,g.TranslatePipe],styles:[""]}),t}(nn.a);0,void 0;var _l=n("5xOD"),Nl=n("4r/P"),Ll=function(){function e(e,t,n,i,r,a,o){var l=this;this.store=e,this.dialogService=t,this.widgetsService=n,this.translate=i,this.importExport=r,this.datePipe=a,this.router=o,this.config=new Ht.e,this.config.entityType=$t.b.WIDGETS_BUNDLE,this.config.entityComponent=Pl,this.config.entityTranslations=$t.d.get($t.b.WIDGETS_BUNDLE),this.config.entityResources=$t.c.get($t.b.WIDGETS_BUNDLE),this.config.defaultSortOrder={property:"title",direction:Nl.a.ASC},this.config.entityTitle=function(e){return e?e.title:""},this.config.columns.push(new Ht.b("createdTime","common.created-time",this.datePipe,"150px"),new Ht.d("title","widgets-bundle.title","100%"),new Ht.d("tenantId","widgets-bundle.system","60px",function(e){return Object(Ht.f)(e.tenantId.id===Kt.a)})),this.config.addActionDescriptors.push({name:this.translate.instant("widgets-bundle.create-new-widgets-bundle"),icon:"insert_drive_file",isEnabled:function(){return!0},onAction:function(e){return l.config.table.addEntity(e)}},{name:this.translate.instant("widgets-bundle.import"),icon:"file_upload",isEnabled:function(){return!0},onAction:function(e){return l.importWidgetsBundle(e)}}),this.config.cellActionDescriptors.push({name:this.translate.instant("widgets-bundle.open-widgets-bundle"),icon:"now_widgets",isEnabled:function(){return!0},onAction:function(e,t){return l.openWidgetsBundle(e,t)}},{name:this.translate.instant("widgets-bundle.export"),icon:"file_download",isEnabled:function(){return!0},onAction:function(e,t){return l.exportWidgetsBundle(e,t)}}),this.config.deleteEntityTitle=function(e){return l.translate.instant("widgets-bundle.delete-widgets-bundle-title",{widgetsBundleTitle:e.title})},this.config.deleteEntityContent=function(){return l.translate.instant("widgets-bundle.delete-widgets-bundle-text")},this.config.deleteEntitiesTitle=function(e){return l.translate.instant("widgets-bundle.delete-widgets-bundles-title",{count:e})},this.config.deleteEntitiesContent=function(){return l.translate.instant("widgets-bundle.delete-widgets-bundles-text")},this.config.loadEntity=function(e){return l.widgetsService.getWidgetsBundle(e.id)},this.config.saveEntity=function(e){return l.widgetsService.saveWidgetsBundle(e)},this.config.deleteEntity=function(e){return l.widgetsService.deleteWidgetsBundle(e.id)},this.config.onEntityAction=function(e){return l.onWidgetsBundleAction(e)}}return e.prototype.resolve=function(){var e=this;this.config.tableTitle=this.translate.instant("widgets-bundle.widgets-bundles");var t=Object($.b)(this.store);this.config.deleteEnabled=function(n){return e.isWidgetsBundleEditable(n,t.authority)},this.config.entitySelectionEnabled=function(n){return e.isWidgetsBundleEditable(n,t.authority)},this.config.detailsReadonly=function(n){return!e.isWidgetsBundleEditable(n,t.authority)};Object($.a)(this.store);return this.config.entitiesFetchFunction=function(t){return e.widgetsService.getWidgetBundles(t)},this.config},e.prototype.isWidgetsBundleEditable=function(e,t){return t===X.a.TENANT_ADMIN?e&&e.tenantId&&e.tenantId.id!==Kt.a:t===X.a.SYS_ADMIN},e.prototype.importWidgetsBundle=function(e){var t=this;this.importExport.importWidgetsBundle().subscribe(function(e){e&&t.config.table.updateData()})},e.prototype.openWidgetsBundle=function(e,t){e&&e.stopPropagation(),this.router.navigateByUrl("widgets-bundles/"+t.id.id+"/widgetTypes")},e.prototype.exportWidgetsBundle=function(e,t){e&&e.stopPropagation(),this.importExport.exportWidgetsBundle(t.id.id)},e.prototype.onWidgetsBundleAction=function(e){switch(e.action){case"open":return this.openWidgetsBundle(e.event,e.entity),!0;case"export":return this.exportWidgetsBundle(e.event,e.entity),!0}return!1},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](h.Store),i["\u0275\u0275inject"](Y.a),i["\u0275\u0275inject"](_l.a),i["\u0275\u0275inject"](g.TranslateService),i["\u0275\u0275inject"](Xo.a),i["\u0275\u0275inject"](r.DatePipe),i["\u0275\u0275inject"](a.Router))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0;var Ol=n("Xk9D"),Bl=n("0lYY");function Rl(e,t){1&e&&i["\u0275\u0275element"](0,"mat-progress-bar",14)}function jl(e,t){1&e&&i["\u0275\u0275element"](0,"div",15)}function Vl(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-icon",19),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]().$implicit,r=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",r.widgetTypesDataMap.get(r.widgetTypes[n]).icon," ")}}function zl(e,t){if(1&e&&i["\u0275\u0275element"](0,"mat-icon",20),2&e){var n=i["\u0275\u0275nextContext"]().$implicit,r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("svgIcon",r.widgetTypesDataMap.get(r.widgetTypes[n]).icon)}}function Gl(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",16),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit,r=i["\u0275\u0275nextContext"]();return r.typeSelected(r.widgetTypes[e])}),i["\u0275\u0275template"](1,Vl,2,1,"mat-icon",17),i["\u0275\u0275template"](2,zl,1,1,"ng-template",null,18,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementStart"](4,"span",2),i["\u0275\u0275text"](5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,a=i["\u0275\u0275reference"](3),o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!o.widgetTypesDataMap.get(o.widgetTypes[r]).isMdiIcon)("ngIfElse",a),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](o.widgetTypesDataMap.get(o.widgetTypes[r]).name)}}var Wl=function(e){function t(t,n,i){var r=e.call(this,t,n,i)||this;return r.store=t,r.router=n,r.dialogRef=i,r.widgetTypes=Bl.m,r.allWidgetTypes=Object.keys(Bl.m),r.widgetTypesDataMap=Bl.n,r}return Object(o.d)(t,e),t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.typeSelected=function(e){this.dialogRef.close(e)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](a.Router),i["\u0275\u0275directiveInject"](Ct.MatDialogRef))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-select-widget-type-dialog"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:22,vars:16,consts:[[2,"width","800px"],["color","accent"],["translate",""],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["fxLayout","column","fxLayoutGap","16px","fxLayout.gt-sm","row","fxLayoutAlign","center center"],["class","tb-card-button","mat-raised-button","","color","accent","type","button",3,"click",4,"ngFor","ngForOf"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["color","warn","mode","indeterminate"],[2,"height","4px"],["mat-raised-button","","color","accent","type","button",1,"tb-card-button",3,"click"],["class","tb-mat-96",4,"ngIf","ngIfElse"],["mdiIconBlock",""],[1,"tb-mat-96"],[1,"tb-mat-96",3,"svgIcon"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"form",0),i["\u0275\u0275elementStart"](1,"mat-toolbar",1),i["\u0275\u0275elementStart"](2,"h2",2),i["\u0275\u0275text"](3,"widget.select-widget-type"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"span",3),i["\u0275\u0275elementStart"](5,"button",4),i["\u0275\u0275listener"]("click",function(){return t.cancel()}),i["\u0275\u0275elementStart"](6,"mat-icon",5),i["\u0275\u0275text"](7,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,Rl,1,0,"mat-progress-bar",6),i["\u0275\u0275pipe"](9,"async"),i["\u0275\u0275template"](10,jl,1,0,"div",7),i["\u0275\u0275pipe"](11,"async"),i["\u0275\u0275elementStart"](12,"div",8),i["\u0275\u0275elementStart"](13,"fieldset",9),i["\u0275\u0275pipe"](14,"async"),i["\u0275\u0275elementStart"](15,"div",10),i["\u0275\u0275template"](16,Gl,6,3,"button",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"div",12),i["\u0275\u0275elementStart"](18,"button",13),i["\u0275\u0275listener"]("click",function(){return t.cancel()}),i["\u0275\u0275pipe"](19,"async"),i["\u0275\u0275text"](20),i["\u0275\u0275pipe"](21,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](9,6,t.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](11,8,t.isLoading$)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](14,10,t.isLoading$)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",t.allWidgetTypes),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](19,12,t.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](21,14,"action.cancel")," "))},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.NgForm,It.MatToolbar,g.TranslateDirective,v.b,E.MatButton,we.MatIcon,r.NgIf,Ct.MatDialogContent,v.f,v.g,v.e,r.NgForOf,Ct.MatDialogActions,I.MatProgressBar],pipes:[r.AsyncPipe,g.TranslatePipe],styles:["[_nghost-%COMP%]     button.tb-card-button{width:100%;height:100%;max-width:240px}[_nghost-%COMP%]     button.tb-card-button .mat-button-wrapper{width:100%;height:100%;display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]     button.tb-card-button .mat-button-wrapper mat-icon{margin:auto}[_nghost-%COMP%]     button.tb-card-button .mat-button-wrapper span{height:18px;min-height:18px;max-height:18px;margin:0 0 20px;font-size:18px;font-weight:400;line-height:18px;white-space:normal}[_nghost-%COMP%]     button.tb-card-button.mat-raised-button.mat-primary .mat-ripple-element{opacity:.3;background-color:hsla(0,0%,100%,.3)}"]}),t}(Et.a);0,void 0;var ql=n("OiFK"),Hl=n("21Fy"),Ul=n("eeD6"),$l=n("8RXW"),Kl=["dashboard"];function Yl(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",6),i["\u0275\u0275listener"]("click",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().addWidgetType(e)}),i["\u0275\u0275elementStart"](1,"mat-icon",7),i["\u0275\u0275text"](2,"add"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](4,1,"widget.add-widget-type")," "))}function Jl(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span",8),i["\u0275\u0275text"](1,"widgets-bundle.empty"),i["\u0275\u0275elementEnd"]())}var Xl=function(e){function t(t,n,i,r,a,o,l,s,d,c){var u=e.call(this,t)||this;return u.store=t,u.route=n,u.router=i,u.widgetService=r,u.dialogService=a,u.importExport=o,u.dialog=l,u.translate=s,u.utils=d,u.entityService=c,u.footerFabButtons={fabTogglerName:"widget.add-widget-type",fabTogglerIcon:"add",buttons:[{name:"widget-type.create-new-widget-type",icon:"insert_drive_file",onAction:function(e){u.addWidgetType(e)}},{name:"widget-type.import",icon:"file_upload",onAction:function(e){u.importWidgetType(e)}}]},u.dashboardCallbacks={onEditWidget:u.openWidgetType.bind(u),onExportWidget:u.exportWidgetType.bind(u),onRemoveWidget:u.removeWidgetType.bind(u)},u.aliasController=new Ol.a(u.utils,u.entityService,u.translate,function(){return{getStateParams:function(){return{}}}},{},{}),u.authUser=Object($.b)(u.store),u.widgetsBundle=u.route.snapshot.data.widgetsBundle,u.widgetsData=u.route.snapshot.data.widgetsData,u.authUser.authority===X.a.TENANT_ADMIN?u.isReadOnly=!u.widgetsBundle||u.widgetsBundle.tenantId.id===Kt.a:u.isReadOnly=u.authUser.authority!==X.a.SYS_ADMIN,u}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){},t.prototype.addWidgetType=function(e){this.openWidgetType(e)},t.prototype.importWidgetType=function(e){var t=this;e&&e.stopPropagation(),this.importExport.importWidgetType(this.widgetsBundle.alias).subscribe(function(e){e&&t.reload()})},t.prototype.reload=function(){var e=this,t=this.widgetsBundle.alias,n=this.widgetsBundle.tenantId.id===Kt.a;this.widgetService.loadBundleLibraryWidgets(t,n).subscribe(function(t){e.widgetsData={widgets:t}})},t.prototype.openWidgetType=function(e,t){var n=this;e&&e.stopPropagation(),t?this.router.navigate([t.typeId.id],{relativeTo:this.route}):this.dialog.open(Wl,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"]}).afterClosed().subscribe(function(e){e&&n.router.navigate(["add",e],{relativeTo:n.route})})},t.prototype.exportWidgetType=function(e,t){e&&e.stopPropagation(),this.importExport.exportWidgetType(t.typeId.id)},t.prototype.removeWidgetType=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("widget.remove-widget-type-title",{widgetName:t.config.title}),this.translate.instant("widget.remove-widget-type-text"),this.translate.instant("action.no"),this.translate.instant("action.yes")).pipe(Object(Zt.b)(function(e){return e?n.widgetService.deleteWidgetType(t.bundleAlias,t.typeAlias,t.isSystemType):Object(Jt.a)(!1)}),Object(Xt.a)(function(e){return!1!==e&&(n.reload(),!0)})).subscribe()},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](a.ActivatedRoute),i["\u0275\u0275directiveInject"](a.Router),i["\u0275\u0275directiveInject"](_l.a),i["\u0275\u0275directiveInject"](Y.a),i["\u0275\u0275directiveInject"](Xo.a),i["\u0275\u0275directiveInject"](Ct.MatDialog),i["\u0275\u0275directiveInject"](g.TranslateService),i["\u0275\u0275directiveInject"](ql.a),i["\u0275\u0275directiveInject"](Hl.a))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-widget-library"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](Kl,3),2&e){var n;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.dashboard=n.first)}},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:7,vars:16,consts:[["fxLayoutAlign","center center",1,"tb-absolute-fill",2,"display","flex","z-index","1",3,"fxShow"],["mat-button","","class","tb-add-new-widget",3,"click",4,"ngIf"],["translate","","fxLayoutAlign","center center","style","display: flex;","class","mat-headline tb-absolute-fill",4,"ngIf"],[3,"aliasController","widgets","widgetLayouts","isEdit","isEditActionEnabled","isExportActionEnabled","isRemoveActionEnabled","disableWidgetInteraction","callbacks"],["dashboard",""],[3,"fxShow","footerFabButtons"],["mat-button","",1,"tb-add-new-widget",3,"click"],[1,"tb-mat-96"],["translate","","fxLayoutAlign","center center",1,"mat-headline","tb-absolute-fill",2,"display","flex"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"section",0),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275template"](2,Yl,5,3,"button",1),i["\u0275\u0275template"](3,Jl,2,0,"span",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"tb-dashboard",3,4),i["\u0275\u0275element"](6,"tb-footer-fab-buttons",5)),2&e&&(i["\u0275\u0275property"]("fxShow",!i["\u0275\u0275pipeBind1"](1,14,t.isLoading$)&&0===t.widgetsData.widgets.length),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.isReadOnly),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.isReadOnly),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("aliasController",t.aliasController)("widgets",t.widgetsData.widgets)("widgetLayouts",t.widgetsData.widgetLayouts)("isEdit",!1)("isEditActionEnabled",!0)("isExportActionEnabled",!0)("isRemoveActionEnabled",!t.isReadOnly)("disableWidgetInteraction",!0)("callbacks",t.dashboardCallbacks),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("fxShow",!t.isReadOnly)("footerFabButtons",t.footerFabButtons))},directives:[v.e,Ie.d,r.NgIf,Ul.a,$l.a,E.MatButton,we.MatIcon,g.TranslateDirective],pipes:[r.AsyncPipe,g.TranslatePipe],styles:["[_nghost-%COMP%]   button.tb-add-new-widget[_ngcontent-%COMP%]{padding-right:12px;font-size:24px;border-style:dashed;border-width:2px}"]}),t}(l.a);0,void 0;var Ql=n("fhZi"),Zl=n("0G7Z"),es=function(){function e(e){this.widgetsService=e}return e.prototype.resolve=function(e){var t=e.params.widgetsBundleId;return t||(t=e.parent.params.widgetsBundleId),this.widgetsService.getWidgetsBundle(t)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](_l.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0;var ts=function(){function e(e){this.widgetsService=e}return e.prototype.resolve=function(e){var t=e.parent.data.widgetsBundle,n=t.alias,i=t.tenantId.id===Kt.a;return this.widgetsService.loadBundleLibraryWidgets(n,i).pipe(Object(Xt.a)(function(e){return{widgets:e}}))},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](_l.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0;var ns=function(){function e(e){this.widgetsService=e}return e.prototype.resolve=function(e){var t=e.params.widgetTypeId;return this.widgetsService.getWidgetTypeById(t).pipe(Object(Xt.a)(function(e){return{widgetTypeDetails:e,widget:Object(Zl.d)(e)}}))},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](_l.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0;var is=function(){function e(e){this.widgetsService=e}return e.prototype.resolve=function(e){var t=e.params.widgetType;return t||(t=Bl.m.timeseries),this.widgetsService.getWidgetTemplate(t).pipe(Object(Xt.a)(function(e){return e.widgetName=null,{widgetTypeDetails:null,widget:e}}))},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](_l.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0;var rs=function(e,t,n){return n?n.widget.widgetName:""},as=[{path:"widgets-bundles",data:{breadcrumb:{label:"widgets-bundle.widgets-bundles",icon:"now_widgets"}},children:[{path:"",component:qt.a,data:{auth:[X.a.SYS_ADMIN,X.a.TENANT_ADMIN],title:"widgets-bundle.widgets-bundles"},resolve:{entitiesTableConfig:Ll}},{path:":widgetsBundleId/widgetTypes",data:{breadcrumb:{labelFunction:function(e,t){return e.data.widgetsBundle.title},icon:"now_widgets"}},resolve:{widgetsBundle:es},children:[{path:"",component:Xl,data:{auth:[X.a.SYS_ADMIN,X.a.TENANT_ADMIN],title:"widget.widget-library"},resolve:{widgetsData:ts}},{path:":widgetTypeId",component:Ql.a,canDeactivate:[J],data:{auth:[X.a.SYS_ADMIN,X.a.TENANT_ADMIN],title:"widget.editor",breadcrumb:{labelFunction:rs,icon:"insert_chart"}},resolve:{widgetEditorData:ns}},{path:"add/:widgetType",component:Ql.a,canDeactivate:[J],data:{auth:[X.a.SYS_ADMIN,X.a.TENANT_ADMIN],title:"widget.editor",breadcrumb:{labelFunction:rs,icon:"insert_chart"}},resolve:{widgetEditorData:is}}]}]}],os=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[Ll,es,ts,ns,is],imports:[[a.RouterModule.forChild(as)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](os,{imports:[a.RouterModule],exports:[a.RouterModule]})),0;var ls=n("iO13"),ss=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[r.CommonModule,vn.a,yn.a,os]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](ss,{declarations:[Pl,Xl,Ql.a,Wl,ls.a],imports:[r.CommonModule,vn.a,yn.a,os]})),0;var ds=n("p0+G"),cs=n("HUB6"),us=n("p/3Z"),ps=n("yOwA"),ms=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[r.CommonModule,vn.a,yn.a,mo.a,Va.b]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](ms,{declarations:[ds.a,ps.a,cs.a,us.a],imports:[r.CommonModule,vn.a,yn.a,mo.a,Va.b]})),0;var fs=n("vnPf"),hs=n("oook");function gs(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,2),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-attribute-table",3),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,5,"attribute.attributes")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("defaultAttributeScope",r.attributeScopes.SERVER_SCOPE)("active",n.isActive)("entityId",r.entity.id)("entityName",r.entity.name)}}function bs(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,4),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-attribute-table",5),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,5,"attribute.latest-telemetry")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("defaultAttributeScope",r.latestTelemetryTypes.LATEST_TELEMETRY)("active",n.isActive)("entityId",r.entity.id)("entityName",r.entity.name)}}function vs(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,6),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-alarm-table",7),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,3,"alarm.alarms")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("active",n.isActive)("entityId",r.entity.id)}}function ys(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,8),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-event-table",9),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,5,"tenant.events")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("defaultEventType",r.eventTypes.ERROR)("active",n.isActive)("tenantId",r.nullUid)("entityId",r.entity.id)}}var xs=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-tenant-profile-tabs"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:4,vars:4,consts:[[3,"label",4,"ngIf"],[3,"label"],["attributesTab","matTab"],[3,"defaultAttributeScope","active","entityId","entityName"],["telemetryTab","matTab"],["disableAttributeScopeSelection","",3,"defaultAttributeScope","active","entityId","entityName"],["alarmsTab","matTab"],[3,"active","entityId"],["eventsTab","matTab"],[3,"defaultEventType","active","tenantId","entityId"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,gs,4,7,"mat-tab",0),i["\u0275\u0275template"](1,bs,4,7,"mat-tab",0),i["\u0275\u0275template"](2,vs,4,5,"mat-tab",0),i["\u0275\u0275template"](3,ys,4,7,"mat-tab",0)),2&e&&(i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity))},directives:[r.NgIf,Ce.MatTab,ui.a,pi.a,mi.a],pipes:[g.TranslatePipe],encapsulation:2}),t}(ci.a);0,void 0;var Ss=function(){function e(e,t,n,i,r){var a=this;this.tenantProfileService=e,this.importExport=t,this.translate=n,this.datePipe=i,this.dialogService=r,this.config=new Ht.e,this.config.entityType=$t.b.TENANT_PROFILE,this.config.entityComponent=hs.a,this.config.entityTabsComponent=xs,this.config.entityTranslations=$t.d.get($t.b.TENANT_PROFILE),this.config.entityResources=$t.c.get($t.b.TENANT_PROFILE),this.config.columns.push(new Ht.b("createdTime","common.created-time",this.datePipe,"150px"),new Ht.d("name","tenant-profile.name","40%"),new Ht.d("description","tenant-profile.description","60%"),new Ht.d("isDefault","tenant-profile.default","60px",function(e){return Object(Ht.f)(e.default)})),this.config.cellActionDescriptors.push({name:this.translate.instant("tenant-profile.export"),icon:"file_download",isEnabled:function(){return!0},onAction:function(e,t){return a.exportTenantProfile(e,t)}},{name:this.translate.instant("tenant-profile.set-default"),icon:"flag",isEnabled:function(e){return!e.default},onAction:function(e,t){return a.setDefaultTenantProfile(e,t)}}),this.config.deleteEntityTitle=function(e){return a.translate.instant("tenant-profile.delete-tenant-profile-title",{tenantProfileName:e.name})},this.config.deleteEntityContent=function(){return a.translate.instant("tenant-profile.delete-tenant-profile-text")},this.config.deleteEntitiesTitle=function(e){return a.translate.instant("tenant-profile.delete-tenant-profiles-title",{count:e})},this.config.deleteEntitiesContent=function(){return a.translate.instant("tenant-profile.delete-tenant-profiles-text")},this.config.entitiesFetchFunction=function(e){return a.tenantProfileService.getTenantProfiles(e)},this.config.loadEntity=function(e){return a.tenantProfileService.getTenantProfile(e.id)},this.config.saveEntity=function(e){return a.tenantProfileService.saveTenantProfile(e)},this.config.deleteEntity=function(e){return a.tenantProfileService.deleteTenantProfile(e.id)},this.config.onEntityAction=function(e){return a.onTenantProfileAction(e)},this.config.deleteEnabled=function(e){return e&&!e.default},this.config.entitySelectionEnabled=function(e){return e&&!e.default},this.config.addActionDescriptors=this.configureAddActions()}return e.prototype.resolve=function(){return this.config.tableTitle=this.translate.instant("tenant-profile.tenant-profiles"),this.config},e.prototype.configureAddActions=function(){var e=this,t=[];return t.push({name:this.translate.instant("tenant-profile.create-tenant-profile"),icon:"insert_drive_file",isEnabled:function(){return!0},onAction:function(t){return e.config.table.addEntity(t)}},{name:this.translate.instant("tenant-profile.import"),icon:"file_upload",isEnabled:function(){return!0},onAction:function(t){return e.importTenantProfile(t)}}),t},e.prototype.setDefaultTenantProfile=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("tenant-profile.set-default-tenant-profile-title",{tenantProfileName:t.name}),this.translate.instant("tenant-profile.set-default-tenant-profile-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){e&&n.tenantProfileService.setDefaultTenantProfile(t.id.id).subscribe(function(){n.config.table.updateData()})})},e.prototype.importTenantProfile=function(e){var t=this;this.importExport.importTenantProfile().subscribe(function(e){e&&t.config.table.updateData()})},e.prototype.exportTenantProfile=function(e,t){e&&e.stopPropagation(),this.importExport.exportTenantProfile(t.id.id)},e.prototype.onTenantProfileAction=function(e){switch(e.action){case"setDefault":return this.setDefaultTenantProfile(e.event,e.entity),!0}return!1},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](fs.a),i["\u0275\u0275inject"](Xo.a),i["\u0275\u0275inject"](g.TranslateService),i["\u0275\u0275inject"](r.DatePipe),i["\u0275\u0275inject"](Y.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0;var ws=[{path:"tenantProfiles",data:{breadcrumb:{label:"tenant-profile.tenant-profiles",icon:"mdi:alpha-t-box"}},children:[{path:"",component:qt.a,data:{auth:[X.a.SYS_ADMIN],title:"tenant-profile.tenant-profiles"},resolve:{entitiesTableConfig:Ss}}]}],Cs=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[Ss],imports:[[a.RouterModule.forChild(ws)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](Cs,{imports:[a.RouterModule],exports:[a.RouterModule]})),0;var Es=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[r.CommonModule,vn.a,yn.a,Cs]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](Es,{declarations:[xs],imports:[r.CommonModule,vn.a,yn.a,Cs]})),0;var Is=n("F4h8"),Ts=n("8yrD"),Ms=n("em8L"),Ds=n("xkYi"),ks=n("TpGD");function As(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",12),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=i["\u0275\u0275nextContext"](3);i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,r.deviceTransportTypeTranslations.get(n))," ")}}function Fs(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-hint"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,n.deviceTransportTypeHints.get(n.detailsForm.get("transportType").value))," ")}}function Ps(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.transport-type-required")," "))}function _s(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",4),i["\u0275\u0275elementStart"](1,"mat-form-field",5),i["\u0275\u0275elementStart"](2,"mat-label",6),i["\u0275\u0275text"](3,"device-profile.transport-type"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mat-select",7),i["\u0275\u0275template"](5,As,3,4,"mat-option",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,Fs,3,3,"mat-hint",9),i["\u0275\u0275template"](7,Ps,3,3,"mat-error",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"div",10),i["\u0275\u0275element"](9,"tb-device-profile-transport-configuration",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("formGroup",n.detailsForm),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngForOf",n.deviceTransportTypes),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.detailsForm.get("transportType").value),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.detailsForm.get("transportType").hasError("required"))}}function Ns(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,2),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275template"](3,_s,10,4,"div",3),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1);i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,2,"device-profile.transport-configuration")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",n.isActive)}}function Ls(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",4),i["\u0275\u0275elementStart"](1,"div",10),i["\u0275\u0275element"](2,"tb-device-profile-alarms",14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("formGroup",n.detailsForm),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("deviceProfileId",n.entity.id)}}var Os=function(e){return{count:e}};function Bs(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,13),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275template"](3,Ls,3,2,"div",3),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind2"](2,2,"device-profile.alarm-rules-with-count",i["\u0275\u0275pureFunction1"](5,Os,null!=r.detailsForm.get("profileData.alarms").value&&r.detailsForm.get("profileData.alarms").value.length?r.detailsForm.get("profileData.alarms").value.length:0))),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",n.isActive)}}function Rs(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",4),i["\u0275\u0275elementStart"](1,"div",10),i["\u0275\u0275element"](2,"tb-device-profile-provision-configuration",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("formGroup",n.detailsForm)}}function js(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,15),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275template"](3,Rs,3,1,"div",3),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1);i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,2,"device-profile.device-provisioning")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",n.isActive)}}function Vs(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,17),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementStart"](3,"div",4),i["\u0275\u0275elementStart"](4,"div",10),i["\u0275\u0275element"](5,"tb-device-profile-configuration",18),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,2,"device-profile.profile-configuration")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",n.detailsForm)}}function zs(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",1,19),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-audit-log-table",20),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,4,"audit-log.audit-logs")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("active",n.isActive)("auditLogMode",r.auditLogModes.ENTITY)("entityId",r.entity.id)}}var Gs=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n.deviceTransportTypes=Object.values(sr.j),n.deviceTransportTypeTranslations=sr.L,n.deviceTransportTypeHints=sr.K,n}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-device-profile-tabs"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:5,consts:[[3,"label",4,"ngIf"],[3,"label"],["transportType","matTab"],["class","mat-padding",3,"formGroup",4,"ngIf"],[1,"mat-padding",3,"formGroup"],[1,"mat-block"],["translate",""],["formControlName","transportType","required",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["formGroupName","profileData"],["formControlName","transportConfiguration","required",""],[3,"value"],["alarmRules","matTab"],["formControlName","alarms",3,"deviceProfileId"],["deviceProvisioning","matTab"],["formControlName","provisionConfiguration"],["deviceProfile","matTab"],["formControlName","configuration","required",""],["auditLogsTab","matTab"],["detailsMode","true",3,"active","auditLogMode","entityId"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,Ns,4,4,"mat-tab",0),i["\u0275\u0275template"](1,Bs,4,7,"mat-tab",0),i["\u0275\u0275template"](2,js,4,4,"mat-tab",0),i["\u0275\u0275template"](3,Vs,6,4,"mat-tab",0),i["\u0275\u0275template"](4,zs,4,6,"mat-tab",0)),2&e&&(i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!1),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entity&&!t.isEdit))},directives:[r.NgIf,Ce.MatTab,s.NgControlStatusGroup,s.FormGroupDirective,x.MatFormField,x.MatLabel,g.TranslateDirective,w.MatSelect,s.NgControlStatus,s.FormControlName,s.RequiredValidator,r.NgForOf,s.FormGroupName,Ts.a,T.MatOption,x.MatHint,x.MatError,Ms.a,Ds.a,ks.a,zi.a],pipes:[g.TranslatePipe],encapsulation:2}),t}(ci.a);0,void 0;var Ws=n("ec17"),qs=n("eriv"),Hs=function(){function e(e,t,n,i,r,a){var o=this;this.deviceProfileService=e,this.importExport=t,this.translate=n,this.datePipe=i,this.dialogService=r,this.dialog=a,this.config=new Ht.e,this.config.entityType=$t.b.DEVICE_PROFILE,this.config.entityComponent=Ws.a,this.config.entityTabsComponent=Gs,this.config.entityTranslations=$t.d.get($t.b.DEVICE_PROFILE),this.config.entityResources=$t.c.get($t.b.DEVICE_PROFILE),this.config.hideDetailsTabsOnEdit=!1,this.config.addDialogStyle={width:"1000px"},this.config.columns.push(new Ht.b("createdTime","common.created-time",this.datePipe,"150px"),new Ht.d("name","device-profile.name","20%"),new Ht.d("type","device-profile.type","20%",function(e){return o.translate.instant(sr.H.get(e.type))}),new Ht.d("transportType","device-profile.transport-type","20%",function(e){return o.translate.instant(sr.L.get(e.transportType))}),new Ht.d("description","device-profile.description","40%"),new Ht.d("isDefault","device-profile.default","60px",function(e){return Object(Ht.f)(e.default)})),this.config.cellActionDescriptors.push({name:this.translate.instant("device-profile.export"),icon:"file_download",isEnabled:function(){return!0},onAction:function(e,t){return o.exportDeviceProfile(e,t)}},{name:this.translate.instant("device-profile.set-default"),icon:"flag",isEnabled:function(e){return!e.default},onAction:function(e,t){return o.setDefaultDeviceProfile(e,t)}}),this.config.deleteEntityTitle=function(e){return o.translate.instant("device-profile.delete-device-profile-title",{deviceProfileName:e.name})},this.config.deleteEntityContent=function(){return o.translate.instant("device-profile.delete-device-profile-text")},this.config.deleteEntitiesTitle=function(e){return o.translate.instant("device-profile.delete-device-profiles-title",{count:e})},this.config.deleteEntitiesContent=function(){return o.translate.instant("device-profile.delete-device-profiles-text")},this.config.entitiesFetchFunction=function(e){return o.deviceProfileService.getDeviceProfiles(e)},this.config.loadEntity=function(e){return o.deviceProfileService.getDeviceProfile(e.id)},this.config.saveEntity=function(e,t){return o.deviceProfileService.saveDeviceProfileAndConfirmOtaChange(t,e)},this.config.deleteEntity=function(e){return o.deviceProfileService.deleteDeviceProfile(e.id)},this.config.onEntityAction=function(e){return o.onDeviceProfileAction(e)},this.config.deleteEnabled=function(e){return e&&!e.default},this.config.entitySelectionEnabled=function(e){return e&&!e.default},this.config.addActionDescriptors=this.configureAddActions()}return e.prototype.resolve=function(){return this.config.tableTitle=this.translate.instant("device-profile.device-profiles"),this.config},e.prototype.configureAddActions=function(){var e=this,t=[];return t.push({name:this.translate.instant("device-profile.create-device-profile"),icon:"insert_drive_file",isEnabled:function(){return!0},onAction:function(){return e.addDeviceProfile()}},{name:this.translate.instant("device-profile.import"),icon:"file_upload",isEnabled:function(){return!0},onAction:function(t){return e.importDeviceProfile(t)}}),t},e.prototype.addDeviceProfile=function(){var e=this;this.dialog.open(qs.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{deviceProfileName:null,transportType:null}}).afterClosed().subscribe(function(t){t&&e.config.table.updateData()})},e.prototype.setDefaultDeviceProfile=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("device-profile.set-default-device-profile-title",{deviceProfileName:t.name}),this.translate.instant("device-profile.set-default-device-profile-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){e&&n.deviceProfileService.setDefaultDeviceProfile(t.id.id).subscribe(function(){n.config.table.updateData()})})},e.prototype.importDeviceProfile=function(e){var t=this;this.importExport.importDeviceProfile().subscribe(function(e){e&&t.config.table.updateData()})},e.prototype.exportDeviceProfile=function(e,t){e&&e.stopPropagation(),this.importExport.exportDeviceProfile(t.id.id)},e.prototype.onDeviceProfileAction=function(e){switch(e.action){case"setDefault":return this.setDefaultDeviceProfile(e.event,e.entity),!0;case"export":return this.exportDeviceProfile(e.event,e.entity),!0}return!1},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](na.a),i["\u0275\u0275inject"](Xo.a),i["\u0275\u0275inject"](g.TranslateService),i["\u0275\u0275inject"](r.DatePipe),i["\u0275\u0275inject"](Y.a),i["\u0275\u0275inject"](Ct.MatDialog))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0;var Us=[{path:"deviceProfiles",data:{breadcrumb:{label:"device-profile.device-profiles",icon:"mdi:alpha-d-box"}},children:[{path:"",component:qt.a,data:{auth:[X.a.TENANT_ADMIN],title:"device-profile.device-profiles"},resolve:{entitiesTableConfig:Hs}}]}],$s=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[Hs],imports:[[a.RouterModule.forChild(Us)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"]($s,{imports:[a.RouterModule],exports:[a.RouterModule]})),0;var Ks=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[r.CommonModule,vn.a,yn.a,$s]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](Ks,{declarations:[Gs],imports:[r.CommonModule,vn.a,yn.a,$s]})),0;var Ys=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){this.apiUsageDashboard=JSON.parse('{\r\n  "title": "Api Usage",\r\n  "image": null,\r\n  "configuration": {\r\n    "description": "",\r\n    "widgets": {\r\n      "fd6df872-2ddf-0921-3929-2e7f55062fad": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "cards",\r\n        "typeAlias": "html_value_card",\r\n        "type": "latest",\r\n        "title": "New widget",\r\n        "sizeX": 7.5,\r\n        "sizeY": 3,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "jsExecutionApiState",\r\n                  "type": "timeseries",\r\n                  "label": "apiState",\r\n                  "color": "#2196f3",\r\n                  "settings": {},\r\n                  "_hash": 0.8830669138660703,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "jsExecutionLimit",\r\n                  "type": "timeseries",\r\n                  "label": "limit",\r\n                  "color": "#4caf50",\r\n                  "settings": {},\r\n                  "_hash": 0.5463603803546802,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "jsExecutionCount",\r\n                  "type": "timeseries",\r\n                  "label": "count",\r\n                  "color": "#f44336",\r\n                  "settings": {},\r\n                  "_hash": 0.5564241862015964,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "jsExecutionApiState",\r\n                  "type": "timeseries",\r\n                  "label": "apiStateClass",\r\n                  "color": "#ffc107",\r\n                  "settings": {},\r\n                  "_hash": 0.8737107059960671,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return value ? value.toLowerCase() : \'\';"\r\n                },\r\n                {\r\n                  "name": "jsExecutionApiState",\r\n                  "type": "timeseries",\r\n                  "label": "cardId",\r\n                  "color": "#607d8b",\r\n                  "settings": {},\r\n                  "_hash": 0.051659774305067296,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return (Math.random()*100000).toFixed(0);"\r\n                },\r\n                {\r\n                  "name": "jsExecutionApiState",\r\n                  "type": "timeseries",\r\n                  "label": "title",\r\n                  "color": "#9c27b0",\r\n                  "settings": {},\r\n                  "_hash": 0.7673280949238444,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return \\"{i18n:api-usage.javascript}\\";"\r\n                },\r\n                {\r\n                  "name": "jsExecutionApiState",\r\n                  "type": "timeseries",\r\n                  "label": "unit",\r\n                  "color": "#8bc34a",\r\n                  "settings": {},\r\n                  "_hash": 0.7926918686567068,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return \\"{i18n:api-usage.executions}\\";"\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "realtime": {\r\n              "timewindowMs": 60000\r\n            }\r\n          },\r\n          "showTitle": false,\r\n          "backgroundColor": "#fff",\r\n          "color": "#666666",\r\n          "padding": "0",\r\n          "settings": {\r\n            "cardHtml": "<div class=\'card ${apiStateClass}\'>\\n    <img src=\\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\\" onload=\\"initializeCard_${cardId:0}(event);\\">\\n    <script type=\\"text/javascript\\">\\n        function initializeCard_${cardId:0}(e) {\\n            \\n            function toShortNumber(number) {\\n                var rounder = Math.pow(10, 1);\\n                var powers = [\\n                  {key: \'Q\', value: Math.pow(10, 15)},\\n                  {key: \'T\', value: Math.pow(10, 12)},\\n                  {key: \'B\', value: Math.pow(10, 9)},\\n                  {key: \'M\', value: Math.pow(10, 6)},\\n                  {key: \'K\', value: 1000}\\n                ];\\n                \\n                var key = \'\';\\n                \\n                for (var i = 0; i < powers.length; i++) {\\n                    var reduced = number / powers[i].value;\\n                    reduced = Math.round(reduced * rounder) / rounder;\\n                    if (reduced >= 1) {\\n                        number = reduced;\\n                        key = powers[i].key;\\n                        break;\\n                    }\\n                }\\n                return number + key;\\n            }\\n            \\n            var imgTag = e.target;\\n            var parentTag = imgTag.parentNode;\\n            var count = \\"${count:0}\\";\\n            var limit = \\"${limit:0}\\";\\n            count = count.length > 0 ? parseInt(count, 10) : 0;\\n            limit = limit.length > 0 ? parseInt(limit, 10) : 0;\\n            var percentElement = $(\'#api-usage-percent\', parentTag);\\n            var valueElement = $(\'#api-usage-value\', parentTag);\\n            var barElement = $(\'#api-usage-bar\', parentTag);\\n            if (Number.isFinite(limit) && limit > 0) {\\n                var percent = Math.min(100, ((count / limit) * 100));\\n                barElement.width(percent + \'%\');\\n                percent = percent.toFixed(2);\\n                percentElement.text(percent + \'%\');\\n                valueElement.text(toShortNumber(count) + \' / \' + toShortNumber(limit));\\n            } else {\\n                barElement.width(\'0%\');\\n                percentElement.text(\'\');\\n                valueElement.text(toShortNumber(count) + \' / \u221e\');\\n            }\\n        }\\n    <\/script>\\n    <div class=\'content\'>\\n        <div class=\'column\'>\\n            <div class=\'title-row\'>\\n                <div class=\'title\'>${title}</div>\\n                <div class=\'state\'>${apiState}</div>\\n            </div>    \\n            <div class=\'bar-container\'>\\n                <div class=\\"unit\\">${unit}</div>\\n                <div class=\'bar\'>\\n                    <div class=\\"bar-fill\\" id=\\"api-usage-bar\\"></div>\\n                </div>    \\n                <div class=\'bar-labels\'>\\n                    <div id=\\"api-usage-percent\\"></div>\\n                    <div style=\\"flex: 1;\\"></div>\\n                    <div id=\\"api-usage-value\\"></div>\\n                </div>\\n            </div>    \\n        </div>\\n    </div>\\n    <div role=\\"separator\\" class=\\"mat-divider mat-divider-horizontal\\" aria-orientation=\\"horizontal\\"></div>\\n    <div class=\'action-row\'>\\n        <button id=\\"javascript_functions_details\\" class=\\"mat-focus-indicator mat-button mat-button-base mat-primary\\">\\n            <span class=\\"mat-button-wrapper\\">{i18n:api-usage.view-details}</span>\\n            <span class=\\"mat-ripple mat-button-ripple\\"></span>\\n            <span class=\\"mat-button-focus-overlay\\"></span>\\n        </button>\\n    </div> \\n</div>",\r\n            "cardCss": ".card {\\n   width: 100%;\\n   height: 100%;\\n   box-sizing: border-box;\\n   display: flex;\\n   flex-direction: column;\\n}\\n\\n.card > img {\\n    height: 0;\\n}\\n\\n.card .content {\\n   flex: 1;    \\n   padding: 13px 13px 0;\\n   display: flex;\\n   box-sizing: border-box;\\n}\\n\\n.card .content .column {\\n   display: flex;\\n   flex-direction: column;    \\n   justify-content: space-around;\\n   flex: 1;\\n}\\n\\n.card .content .title-row {\\n    display: flex;\\n    flex-direction: row;\\n    padding-bottom: 10px;\\n}\\n\\n.card .title {\\n    flex: 1;\\n    font-size: 20px;\\n    font-weight: 400;\\n    color: #666666;\\n}\\n\\n.card .state {\\n    text-transform: uppercase;\\n    font-size: 20px;\\n    font-weight: bold;\\n}\\n\\n.card.enabled .state {\\n    color: #00B260;\\n}\\n\\n.card.warning .state {\\n    color: #FFAD6F;\\n}\\n\\n.card.disabled .state {\\n    color: #F73243;\\n}\\n\\n.card .bar-container {\\n    flex: 1;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n}\\n\\n.card .bar {\\n    flex: 1;\\n    max-height: 30px;\\n    margin-top: 3.5px;\\n    margin-bottom: 4px;\\n    background-color: #F0F0F0;\\n    border: 1px solid #DADCDB;\\n    border-radius: 2px;\\n    box-shadow: inset 0 1px 3px rgba(0, 0, 0, .2);\\n}\\n\\n.card.enabled .bar {\\n    border-color: #00B260;\\n    background-color: #F0FBF7;\\n}\\n\\n.card.warning .bar {\\n    border-color: #FFAD6F;\\n    background-color: #FFFAF6;\\n}\\n\\n.card.disabled .bar {\\n    border-color: #F73243;\\n    background-color: #FFF0F0;\\n}\\n\\n.card .bar .bar-fill {\\n    background-color: #F0F0F0;\\n    border-radius: 2px;\\n    height: 100%;\\n    width: 0%;\\n}\\n\\n.card.enabled .bar-fill {\\n    background-color: #00C46C;\\n}\\n\\n.card.warning .bar-fill {\\n    background-color: #FFD099;\\n}\\n\\n.card.disabled .bar-fill {\\n    background-color: #FF9494;\\n}\\n\\n.card .bar-labels {\\n    height: 20px;\\n    font-size: 16px;\\n    color: #666;\\n    display: flex;\\n    flex-direction: row;\\n}\\n\\n\\n.card .mat-button {\\n    text-transform: uppercase;\\n}\\n\\n.card .mat-button-wrapper {\\n    pointer-events: none;\\n}\\n\\n.card .action-row {\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: flex-end;\\n    padding: 8px 0;\\n}\\n\\n@media screen and (min-width: 960px) and (max-width: 1279px) {\\n  .card .title {\\n      font-size: 12px;\\n  }\\n  .card .state {\\n      font-size: 12px;\\n  }\\n  .card .unit {\\n      font-size: 8px;\\n  }\\n  .card .bar-labels {\\n      font-size: 8px;\\n  }\\n  .card .mat-button {\\n      font-size: 8px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}\\n\\n@media screen and (min-width: 1280px) and (max-width: 1599px) {\\n  .card .title {\\n      font-size: 14px;\\n  }\\n  .card .state {\\n      font-size: 14px;\\n  }\\n  .card .unit {\\n      font-size: 10px;\\n  }\\n  .card .bar-labels {\\n      font-size: 10px;\\n  }\\n  .card .mat-button {\\n      font-size: 10px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}\\n\\n@media screen and (min-width: 1600px) and (max-width: 1919px) {\\n  .card .title {\\n      font-size: 16px;\\n  }\\n  .card .state {\\n      font-size: 16px;\\n  }\\n  .card .unit {\\n      font-size: 12px;\\n  }\\n  .card .bar-labels {\\n      font-size: 12px;\\n  }\\n  .card .mat-button {\\n      font-size: 12px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}    \\n\\n\\n"\r\n          },\r\n          "title": "JavaScript functions",\r\n          "dropShadow": true,\r\n          "enableFullscreen": false,\r\n          "widgetStyle": {\r\n            "cursor": "default"\r\n          },\r\n          "titleStyle": {\r\n            "fontSize": "20px",\r\n            "fontWeight": 400\r\n          },\r\n          "useDashboardTimewindow": true,\r\n          "showLegend": false,\r\n          "actions": {\r\n            "elementClick": [\r\n              {\r\n                "name": "javascript_functions_details",\r\n                "icon": "insert_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "javascript_functions",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openRightLayout": false,\r\n                "id": "d4961bea-84de-e1af-e50f-666b98d34cd5"\r\n              }\r\n            ]\r\n          },\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": ""\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "fd6df872-2ddf-0921-3929-2e7f55062fad"\r\n      },\r\n      "7e235874-461b-e7c2-2fdd-d8762a020773": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "cards",\r\n        "typeAlias": "html_value_card",\r\n        "type": "latest",\r\n        "title": "New widget",\r\n        "sizeX": 7.5,\r\n        "sizeY": 3,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "dbApiState",\r\n                  "type": "timeseries",\r\n                  "label": "apiState",\r\n                  "color": "#2196f3",\r\n                  "settings": {},\r\n                  "_hash": 0.8830669138660703,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "storageDataPointsLimit",\r\n                  "type": "timeseries",\r\n                  "label": "limit",\r\n                  "color": "#4caf50",\r\n                  "settings": {},\r\n                  "_hash": 0.5463603803546802,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "storageDataPointsCount",\r\n                  "type": "timeseries",\r\n                  "label": "count",\r\n                  "color": "#f44336",\r\n                  "settings": {},\r\n                  "_hash": 0.5564241862015964,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "dbApiState",\r\n                  "type": "timeseries",\r\n                  "label": "apiStateClass",\r\n                  "color": "#ffc107",\r\n                  "settings": {},\r\n                  "_hash": 0.8737107059960671,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return value ? value.toLowerCase() : \'\';"\r\n                },\r\n                {\r\n                  "name": "dbApiState",\r\n                  "type": "timeseries",\r\n                  "label": "cardId",\r\n                  "color": "#607d8b",\r\n                  "settings": {},\r\n                  "_hash": 0.051659774305067296,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return (Math.random()*100000).toFixed(0);"\r\n                },\r\n                {\r\n                  "name": "dbApiState",\r\n                  "type": "timeseries",\r\n                  "label": "title",\r\n                  "color": "#9c27b0",\r\n                  "settings": {},\r\n                  "_hash": 0.6301889725474652,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return \\"{i18n:api-usage.telemetry}\\";"\r\n                },\r\n                {\r\n                  "name": "dbApiState",\r\n                  "type": "timeseries",\r\n                  "label": "unit",\r\n                  "color": "#8bc34a",\r\n                  "settings": {},\r\n                  "_hash": 0.0027742924142306613,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return \\"{i18n:api-usage.data-points-storage-days}\\";"\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "realtime": {\r\n              "timewindowMs": 60000\r\n            }\r\n          },\r\n          "showTitle": false,\r\n          "backgroundColor": "#fff",\r\n          "color": "#666666",\r\n          "padding": "0",\r\n          "settings": {\r\n            "cardHtml": "<div class=\'card ${apiStateClass}\'>\\n    <img src=\\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\\" onload=\\"initializeCard_${cardId:0}(event);\\">\\n    <script type=\\"text/javascript\\">\\n        function initializeCard_${cardId:0}(e) {\\n            \\n            function toShortNumber(number) {\\n                var rounder = Math.pow(10, 1);\\n                var powers = [\\n                  {key: \'Q\', value: Math.pow(10, 15)},\\n                  {key: \'T\', value: Math.pow(10, 12)},\\n                  {key: \'B\', value: Math.pow(10, 9)},\\n                  {key: \'M\', value: Math.pow(10, 6)},\\n                  {key: \'K\', value: 1000}\\n                ];\\n                \\n                var key = \'\';\\n                \\n                for (var i = 0; i < powers.length; i++) {\\n                    var reduced = number / powers[i].value;\\n                    reduced = Math.round(reduced * rounder) / rounder;\\n                    if (reduced >= 1) {\\n                        number = reduced;\\n                        key = powers[i].key;\\n                        break;\\n                    }\\n                }\\n                return number + key;\\n            }\\n            \\n            var imgTag = e.target;\\n            var parentTag = imgTag.parentNode;\\n            var count = \\"${count:0}\\";\\n            var limit = \\"${limit:0}\\";\\n            count = count.length > 0 ? parseInt(count, 10) : 0;\\n            limit = limit.length > 0 ? parseInt(limit, 10) : 0;\\n            var percentElement = $(\'#api-usage-percent\', parentTag);\\n            var valueElement = $(\'#api-usage-value\', parentTag);\\n            var barElement = $(\'#api-usage-bar\', parentTag);\\n            if (Number.isFinite(limit) && limit > 0) {\\n                var percent = Math.min(100, ((count / limit) * 100));\\n                barElement.width(percent + \'%\');\\n                percent = percent.toFixed(2);\\n                percentElement.text(percent + \'%\');\\n                valueElement.text(toShortNumber(count) + \' / \' + toShortNumber(limit));\\n            } else {\\n                barElement.width(\'0%\');\\n                percentElement.text(\'\');\\n                valueElement.text(toShortNumber(count) + \' / \u221e\');\\n            }\\n        }\\n    <\/script>\\n    <div class=\'content\'>\\n        <div class=\'column\'>\\n            <div class=\'title-row\'>\\n                <div class=\'title\'>${title}</div>\\n                <div class=\'state\'>${apiState}</div>\\n            </div>    \\n            <div class=\'bar-container\'>\\n                <div class=\\"unit\\">${unit}</div>\\n                <div class=\'bar\'>\\n                    <div class=\\"bar-fill\\" id=\\"api-usage-bar\\"></div>\\n                </div>    \\n                <div class=\'bar-labels\'>\\n                    <div id=\\"api-usage-percent\\"></div>\\n                    <div style=\\"flex: 1;\\"></div>\\n                    <div id=\\"api-usage-value\\"></div>\\n                </div>\\n            </div>    \\n        </div>\\n    </div>\\n    <div role=\\"separator\\" class=\\"mat-divider mat-divider-horizontal\\" aria-orientation=\\"horizontal\\"></div>\\n    <div class=\'action-row\'>\\n        <button id=\\"telemetry_persistence_details\\" class=\\"mat-focus-indicator mat-button mat-button-base mat-primary\\">\\n            <span class=\\"mat-button-wrapper\\">{i18n:api-usage.view-details}</span>\\n            <span class=\\"mat-ripple mat-button-ripple\\"></span>\\n            <span class=\\"mat-button-focus-overlay\\"></span>\\n        </button>\\n    </div> \\n</div>",\r\n            "cardCss": ".card {\\n   width: 100%;\\n   height: 100%;\\n   box-sizing: border-box;\\n   display: flex;\\n   flex-direction: column;\\n}\\n\\n.card > img {\\n    height: 0;\\n}\\n\\n.card .content {\\n   flex: 1;    \\n   padding: 13px 13px 0;\\n   display: flex;\\n   box-sizing: border-box;\\n}\\n\\n.card .content .column {\\n   display: flex;\\n   flex-direction: column;    \\n   justify-content: space-around;\\n   flex: 1;\\n}\\n\\n.card .content .title-row {\\n    display: flex;\\n    flex-direction: row;\\n    padding-bottom: 10px;\\n}\\n\\n.card .title {\\n    flex: 1;\\n    font-size: 20px;\\n    font-weight: 400;\\n    color: #666666;\\n}\\n\\n.card .state {\\n    text-transform: uppercase;\\n    font-size: 20px;\\n    font-weight: bold;\\n}\\n\\n.card.enabled .state {\\n    color: #00B260;\\n}\\n\\n.card.warning .state {\\n    color: #FFAD6F;\\n}\\n\\n.card.disabled .state {\\n    color: #F73243;\\n}\\n\\n.card .bar-container {\\n    flex: 1;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n}\\n\\n.card .bar {\\n    flex: 1;\\n    max-height: 30px;\\n    margin-top: 3.5px;\\n    margin-bottom: 4px;\\n    background-color: #F0F0F0;\\n    border: 1px solid #DADCDB;\\n    border-radius: 2px;\\n    box-shadow: inset 0 1px 3px rgba(0, 0, 0, .2);\\n}\\n\\n.card.enabled .bar {\\n    border-color: #00B260;\\n    background-color: #F0FBF7;\\n}\\n\\n.card.warning .bar {\\n    border-color: #FFAD6F;\\n    background-color: #FFFAF6;\\n}\\n\\n.card.disabled .bar {\\n    border-color: #F73243;\\n    background-color: #FFF0F0;\\n}\\n\\n.card .bar .bar-fill {\\n    background-color: #F0F0F0;\\n    border-radius: 2px;\\n    height: 100%;\\n    width: 0%;\\n}\\n\\n.card.enabled .bar-fill {\\n    background-color: #00C46C;\\n}\\n\\n.card.warning .bar-fill {\\n    background-color: #FFD099;\\n}\\n\\n.card.disabled .bar-fill {\\n    background-color: #FF9494;\\n}\\n\\n.card .bar-labels {\\n    height: 20px;\\n    font-size: 16px;\\n    color: #666;\\n    display: flex;\\n    flex-direction: row;\\n}\\n\\n\\n.card .mat-button {\\n    text-transform: uppercase;\\n}\\n\\n.card .mat-button-wrapper {\\n    pointer-events: none;\\n}\\n\\n.card .action-row {\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: flex-end;\\n    padding: 8px 0;\\n}\\n\\n@media screen and (min-width: 960px) and (max-width: 1279px) {\\n  .card .title {\\n      font-size: 12px;\\n  }\\n  .card .state {\\n      font-size: 12px;\\n  }\\n  .card .unit {\\n      font-size: 8px;\\n  }\\n  .card .bar-labels {\\n      font-size: 8px;\\n  }\\n  .card .mat-button {\\n      font-size: 8px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}\\n\\n@media screen and (min-width: 1280px) and (max-width: 1599px) {\\n  .card .title {\\n      font-size: 14px;\\n  }\\n  .card .state {\\n      font-size: 14px;\\n  }\\n  .card .unit {\\n      font-size: 10px;\\n  }\\n  .card .bar-labels {\\n      font-size: 10px;\\n  }\\n  .card .mat-button {\\n      font-size: 10px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}\\n\\n@media screen and (min-width: 1600px) and (max-width: 1919px) {\\n  .card .title {\\n      font-size: 16px;\\n  }\\n  .card .state {\\n      font-size: 16px;\\n  }\\n  .card .unit {\\n      font-size: 12px;\\n  }\\n  .card .bar-labels {\\n      font-size: 12px;\\n  }\\n  .card .mat-button {\\n      font-size: 12px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}    \\n\\n\\n"\r\n          },\r\n          "title": "Telemetry persistence",\r\n          "dropShadow": true,\r\n          "enableFullscreen": false,\r\n          "widgetStyle": {\r\n            "cursor": "default"\r\n          },\r\n          "titleStyle": {\r\n            "fontSize": "20px",\r\n            "fontWeight": 400\r\n          },\r\n          "useDashboardTimewindow": true,\r\n          "showLegend": false,\r\n          "actions": {\r\n            "elementClick": [\r\n              {\r\n                "name": "telemetry_persistence_details",\r\n                "icon": "insert_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "telemetry_persistence",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openRightLayout": false,\r\n                "id": "6248831c-5b3f-8879-8548-afcf43f10610"\r\n              }\r\n            ]\r\n          },\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": ""\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "7e235874-461b-e7c2-2fdd-d8762a020773"\r\n      },\r\n      "08545554-a0e8-05c7-66df-6000cfeff8a4": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "cards",\r\n        "typeAlias": "html_value_card",\r\n        "type": "latest",\r\n        "title": "New widget",\r\n        "sizeX": 7.5,\r\n        "sizeY": 3,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "ruleEngineApiState",\r\n                  "type": "timeseries",\r\n                  "label": "apiState",\r\n                  "color": "#2196f3",\r\n                  "settings": {},\r\n                  "_hash": 0.8830669138660703,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "ruleEngineExecutionLimit",\r\n                  "type": "timeseries",\r\n                  "label": "limit",\r\n                  "color": "#4caf50",\r\n                  "settings": {},\r\n                  "_hash": 0.5463603803546802,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "ruleEngineExecutionCount",\r\n                  "type": "timeseries",\r\n                  "label": "count",\r\n                  "color": "#f44336",\r\n                  "settings": {},\r\n                  "_hash": 0.5564241862015964,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "ruleEngineApiState",\r\n                  "type": "timeseries",\r\n                  "label": "apiStateClass",\r\n                  "color": "#ffc107",\r\n                  "settings": {},\r\n                  "_hash": 0.8737107059960671,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return value ? value.toLowerCase() : \'\';"\r\n                },\r\n                {\r\n                  "name": "ruleEngineApiState",\r\n                  "type": "timeseries",\r\n                  "label": "cardId",\r\n                  "color": "#607d8b",\r\n                  "settings": {},\r\n                  "_hash": 0.051659774305067296,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return (Math.random()*100000).toFixed(0);"\r\n                },\r\n                {\r\n                  "name": "ruleEngineApiState",\r\n                  "type": "timeseries",\r\n                  "label": "title",\r\n                  "color": "#9c27b0",\r\n                  "settings": {},\r\n                  "_hash": 0.3551317421302518,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return \\"{i18n:api-usage.rule-engine}\\";"\r\n                },\r\n                {\r\n                  "name": "ruleEngineApiState",\r\n                  "type": "timeseries",\r\n                  "label": "unit",\r\n                  "color": "#8bc34a",\r\n                  "settings": {},\r\n                  "_hash": 0.5100381746798048,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return \\"{i18n:api-usage.executions}\\";"\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "realtime": {\r\n              "timewindowMs": 60000\r\n            }\r\n          },\r\n          "showTitle": false,\r\n          "backgroundColor": "#fff",\r\n          "color": "#666666",\r\n          "padding": "0",\r\n          "settings": {\r\n            "cardCss": ".card {\\n   width: 100%;\\n   height: 100%;\\n   box-sizing: border-box;\\n   display: flex;\\n   flex-direction: column;\\n}\\n\\n.card > img {\\n    height: 0;\\n}\\n\\n.card .content {\\n   flex: 1;    \\n   padding: 13px 13px 0;\\n   display: flex;\\n   box-sizing: border-box;\\n}\\n\\n.card .content .column {\\n   display: flex;\\n   flex-direction: column;    \\n   justify-content: space-around;\\n   flex: 1;\\n}\\n\\n.card .content .title-row {\\n    display: flex;\\n    flex-direction: row;\\n    padding-bottom: 10px;\\n}\\n\\n.card .title {\\n    flex: 1;\\n    font-size: 20px;\\n    font-weight: 400;\\n    color: #666666;\\n}\\n\\n.card .state {\\n    text-transform: uppercase;\\n    font-size: 20px;\\n    font-weight: bold;\\n}\\n\\n.card.enabled .state {\\n    color: #00B260;\\n}\\n\\n.card.warning .state {\\n    color: #FFAD6F;\\n}\\n\\n.card.disabled .state {\\n    color: #F73243;\\n}\\n\\n.card .bar-container {\\n    flex: 1;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n}\\n\\n.card .bar {\\n    flex: 1;\\n    max-height: 30px;\\n    margin-top: 3.5px;\\n    margin-bottom: 4px;\\n    background-color: #F0F0F0;\\n    border: 1px solid #DADCDB;\\n    border-radius: 2px;\\n    box-shadow: inset 0 1px 3px rgba(0, 0, 0, .2);\\n}\\n\\n.card.enabled .bar {\\n    border-color: #00B260;\\n    background-color: #F0FBF7;\\n}\\n\\n.card.warning .bar {\\n    border-color: #FFAD6F;\\n    background-color: #FFFAF6;\\n}\\n\\n.card.disabled .bar {\\n    border-color: #F73243;\\n    background-color: #FFF0F0;\\n}\\n\\n.card .bar .bar-fill {\\n    background-color: #F0F0F0;\\n    border-radius: 2px;\\n    height: 100%;\\n    width: 0%;\\n}\\n\\n.card.enabled .bar-fill {\\n    background-color: #00C46C;\\n}\\n\\n.card.warning .bar-fill {\\n    background-color: #FFD099;\\n}\\n\\n.card.disabled .bar-fill {\\n    background-color: #FF9494;\\n}\\n\\n.card .bar-labels {\\n    height: 20px;\\n    font-size: 16px;\\n    color: #666;\\n    display: flex;\\n    flex-direction: row;\\n}\\n\\n\\n.card .mat-button {\\n    text-transform: uppercase;\\n}\\n\\n.card .mat-button-wrapper {\\n    pointer-events: none;\\n}\\n\\n.card .action-row {\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: flex-end;\\n    padding: 8px 0;\\n}\\n\\n@media screen and (min-width: 960px) and (max-width: 1279px) {\\n  .card .title {\\n      font-size: 12px;\\n  }\\n  .card .state {\\n      font-size: 12px;\\n  }\\n  .card .unit {\\n      font-size: 8px;\\n  }\\n  .card .bar-labels {\\n      font-size: 8px;\\n  }\\n  .card .mat-button {\\n      font-size: 8px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}\\n\\n@media screen and (min-width: 1280px) and (max-width: 1599px) {\\n  .card .title {\\n      font-size: 14px;\\n  }\\n  .card .state {\\n      font-size: 14px;\\n  }\\n  .card .unit {\\n      font-size: 10px;\\n  }\\n  .card .bar-labels {\\n      font-size: 10px;\\n  }\\n  .card .mat-button {\\n      font-size: 10px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}\\n\\n@media screen and (min-width: 1600px) and (max-width: 1919px) {\\n  .card .title {\\n      font-size: 16px;\\n  }\\n  .card .state {\\n      font-size: 16px;\\n  }\\n  .card .unit {\\n      font-size: 12px;\\n  }\\n  .card .bar-labels {\\n      font-size: 12px;\\n  }\\n  .card .mat-button {\\n      font-size: 12px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}    \\n\\n\\n",\r\n            "cardHtml": "<div class=\'card ${apiStateClass}\'>\\n    <img src=\\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\\" onload=\\"initializeCard_${cardId:0}(event);\\">\\n    <script type=\\"text/javascript\\">\\n        function initializeCard_${cardId:0}(e) {\\n            \\n            function toShortNumber(number) {\\n                var rounder = Math.pow(10, 1);\\n                var powers = [\\n                  {key: \'Q\', value: Math.pow(10, 15)},\\n                  {key: \'T\', value: Math.pow(10, 12)},\\n                  {key: \'B\', value: Math.pow(10, 9)},\\n                  {key: \'M\', value: Math.pow(10, 6)},\\n                  {key: \'K\', value: 1000}\\n                ];\\n                \\n                var key = \'\';\\n                \\n                for (var i = 0; i < powers.length; i++) {\\n                    var reduced = number / powers[i].value;\\n                    reduced = Math.round(reduced * rounder) / rounder;\\n                    if (reduced >= 1) {\\n                        number = reduced;\\n                        key = powers[i].key;\\n                        break;\\n                    }\\n                }\\n                return number + key;\\n            }\\n            \\n            var imgTag = e.target;\\n            var parentTag = imgTag.parentNode;\\n            var count = \\"${count:0}\\";\\n            var limit = \\"${limit:0}\\";\\n            count = count.length > 0 ? parseInt(count, 10) : 0;\\n            limit = limit.length > 0 ? parseInt(limit, 10) : 0;\\n            var percentElement = $(\'#api-usage-percent\', parentTag);\\n            var valueElement = $(\'#api-usage-value\', parentTag);\\n            var barElement = $(\'#api-usage-bar\', parentTag);\\n            if (Number.isFinite(limit) && limit > 0) {\\n                var percent = Math.min(100, ((count / limit) * 100));\\n                barElement.width(percent + \'%\');\\n                percent = percent.toFixed(2);\\n                percentElement.text(percent + \'%\');\\n                valueElement.text(toShortNumber(count) + \' / \' + toShortNumber(limit));\\n            } else {\\n                barElement.width(\'0%\');\\n                percentElement.text(\'\');\\n                valueElement.text(toShortNumber(count) + \' / \u221e\');\\n            }\\n        }\\n    <\/script>\\n    <div class=\'content\'>\\n        <div class=\'column\'>\\n            <div class=\'title-row\'>\\n                <div class=\'title\'>${title}</div>\\n                <div class=\'state\'>${apiState}</div>\\n            </div>    \\n            <div class=\'bar-container\'>\\n                <div class=\\"unit\\">${unit}</div>\\n                <div class=\'bar\'>\\n                    <div class=\\"bar-fill\\" id=\\"api-usage-bar\\"></div>\\n                </div>    \\n                <div class=\'bar-labels\'>\\n                    <div id=\\"api-usage-percent\\"></div>\\n                    <div style=\\"flex: 1;\\"></div>\\n                    <div id=\\"api-usage-value\\"></div>\\n                </div>\\n            </div>    \\n        </div>\\n    </div>\\n    <div role=\\"separator\\" class=\\"mat-divider mat-divider-horizontal\\" aria-orientation=\\"horizontal\\"></div>\\n    <div class=\'action-row\'>\\n        <button id=\\"rule_engine_statistics_details\\" class=\\"mat-focus-indicator mat-button mat-button-base mat-primary\\">\\n            <span class=\\"mat-button-wrapper\\">{i18n:api-usage.view-statistics}</span>\\n            <span class=\\"mat-ripple mat-button-ripple\\"></span>\\n            <span class=\\"mat-button-focus-overlay\\"></span>\\n        </button>\\n        <button id=\\"rule_engine_execution_details\\" class=\\"mat-focus-indicator mat-button mat-button-base mat-primary\\">\\n            <span class=\\"mat-button-wrapper\\">{i18n:api-usage.view-details}</span>\\n            <span class=\\"mat-ripple mat-button-ripple\\"></span>\\n            <span class=\\"mat-button-focus-overlay\\"></span>\\n        </button>\\n    </div> \\n</div>"\r\n          },\r\n          "title": "Rule Engine execution",\r\n          "dropShadow": true,\r\n          "enableFullscreen": false,\r\n          "widgetStyle": {\r\n            "cursor": "default"\r\n          },\r\n          "titleStyle": {\r\n            "fontSize": "20px",\r\n            "fontWeight": 400\r\n          },\r\n          "useDashboardTimewindow": true,\r\n          "showLegend": false,\r\n          "actions": {\r\n            "elementClick": [\r\n              {\r\n                "name": "rule_engine_execution_details",\r\n                "icon": "insert_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "rule_engine_execution",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openRightLayout": false,\r\n                "id": "3c30248f-0cd8-fb97-a917-bc1e09984a79"\r\n              },\r\n              {\r\n                "name": "rule_engine_statistics_details",\r\n                "icon": "show_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "rule_engine_statistics",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openRightLayout": false,\r\n                "id": "04e4565a-9e24-23df-f376-f2ec70a8165f"\r\n              }\r\n            ]\r\n          },\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": ""\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "08545554-a0e8-05c7-66df-6000cfeff8a4"\r\n      },\r\n      "a245c67e-53ec-d299-fa89-69fe2062ccb2": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "cards",\r\n        "typeAlias": "html_value_card",\r\n        "type": "latest",\r\n        "title": "New widget",\r\n        "sizeX": 7.5,\r\n        "sizeY": 3,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "transportApiState",\r\n                  "type": "timeseries",\r\n                  "label": "apiState",\r\n                  "color": "#2196f3",\r\n                  "settings": {},\r\n                  "_hash": 0.8830669138660703,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "transportMsgLimit",\r\n                  "type": "timeseries",\r\n                  "label": "limit",\r\n                  "color": "#4caf50",\r\n                  "settings": {},\r\n                  "_hash": 0.5463603803546802,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "transportMsgCount",\r\n                  "type": "timeseries",\r\n                  "label": "count",\r\n                  "color": "#f44336",\r\n                  "settings": {},\r\n                  "_hash": 0.5564241862015964,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "transportApiState",\r\n                  "type": "timeseries",\r\n                  "label": "apiStateClass",\r\n                  "color": "#ffc107",\r\n                  "settings": {},\r\n                  "_hash": 0.8737107059960671,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return value ? value.toLowerCase() : \'\';"\r\n                },\r\n                {\r\n                  "name": "transportApiState",\r\n                  "type": "timeseries",\r\n                  "label": "cardId",\r\n                  "color": "#607d8b",\r\n                  "settings": {},\r\n                  "_hash": 0.051659774305067296,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return (Math.random()*100000).toFixed(0);"\r\n                },\r\n                {\r\n                  "name": "transportDataPointsLimit",\r\n                  "type": "timeseries",\r\n                  "label": "pointsLimit",\r\n                  "color": "#9c27b0",\r\n                  "settings": {},\r\n                  "_hash": 0.22082255831864894,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "transportDataPointsCount",\r\n                  "type": "timeseries",\r\n                  "label": "pointsCount",\r\n                  "color": "#8bc34a",\r\n                  "settings": {},\r\n                  "_hash": 0.6340356364819146,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "transportApiState",\r\n                  "type": "timeseries",\r\n                  "label": "title",\r\n                  "color": "#3f51b5",\r\n                  "settings": {},\r\n                  "_hash": 0.6894070537030252,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return \\"{i18n:api-usage.transport}\\";"\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "realtime": {\r\n              "timewindowMs": 60000\r\n            }\r\n          },\r\n          "showTitle": false,\r\n          "backgroundColor": "#fff",\r\n          "color": "#666666",\r\n          "padding": "0",\r\n          "settings": {\r\n            "cardHtml": "<div class=\'card ${apiStateClass}\'>\\n    <img src=\\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\\" onload=\\"initializeCard_${cardId:0}(event);\\">\\n    <script type=\\"text/javascript\\">\\n        function initializeCard_${cardId:0}(e) {\\n            \\n            function toShortNumber(number) {\\n                var rounder = Math.pow(10, 1);\\n                var powers = [\\n                  {key: \'Q\', value: Math.pow(10, 15)},\\n                  {key: \'T\', value: Math.pow(10, 12)},\\n                  {key: \'B\', value: Math.pow(10, 9)},\\n                  {key: \'M\', value: Math.pow(10, 6)},\\n                  {key: \'K\', value: 1000}\\n                ];\\n                \\n                var key = \'\';\\n                \\n                for (var i = 0; i < powers.length; i++) {\\n                    var reduced = number / powers[i].value;\\n                    reduced = Math.round(reduced * rounder) / rounder;\\n                    if (reduced >= 1) {\\n                        number = reduced;\\n                        key = powers[i].key;\\n                        break;\\n                    }\\n                }\\n                return number + key;\\n            }\\n            \\n            var imgTag = e.target;\\n            var parentTag = imgTag.parentNode;\\n            var count = \\"${count:0}\\";\\n            var limit = \\"${limit:0}\\";\\n            count = count.length > 0 ? parseInt(count, 10) : 0;\\n            limit = limit.length > 0 ? parseInt(limit, 10) : 0;\\n            var percentElement = $(\'#api-usage-percent\', parentTag);\\n            var valueElement = $(\'#api-usage-value\', parentTag);\\n            var barElement = $(\'#api-usage-bar\', parentTag);\\n            if (Number.isFinite(limit) && limit > 0) {\\n                var percent = Math.min(100, ((count / limit) * 100));\\n                barElement.width(percent + \'%\');\\n                percent = percent.toFixed(2);\\n                percentElement.text(percent + \'%\');\\n                valueElement.text(toShortNumber(count) + \' / \' + toShortNumber(limit));\\n            } else {\\n                barElement.width(\'0%\');\\n                percentElement.text(\'\');\\n                valueElement.text(toShortNumber(count) + \' / \u221e\');\\n            }\\n            var pointsCount = \\"${pointsCount:0}\\";\\n            var pointsLimit = \\"${pointsLimit:0}\\";\\n            pointsCount = pointsCount.length > 0 ? parseInt(pointsCount, 10) : 0;\\n            pointsLimit = pointsLimit.length > 0 ? parseInt(pointsLimit, 10) : 0;\\n            var pointsPercentElement = $(\'#api-usage-percent2\', parentTag);\\n            var pointsValueElement = $(\'#api-usage-value2\', parentTag);\\n            var pointsBarElement = $(\'#api-usage-bar2\', parentTag);\\n            if (Number.isFinite(pointsLimit) && pointsLimit > 0) {\\n                var percent = Math.min(100, ((pointsCount / pointsLimit) * 100));\\n                pointsBarElement.width(percent + \'%\');\\n                percent = percent.toFixed(2);\\n                pointsPercentElement.text(percent + \'%\');\\n                pointsValueElement.text(toShortNumber(pointsCount) + \' / \' + toShortNumber(pointsLimit));\\n            } else {\\n                pointsBarElement.width(\'0%\');\\n                pointsPercentElement.text(\'\');\\n                pointsValueElement.text(toShortNumber(pointsCount) + \' / \u221e\');\\n            }\\n        }\\n    <\/script>\\n    <div class=\'content\'>\\n        <div class=\'column\'>\\n            <div class=\'title-row\'>\\n                <div class=\'title\'>\\n                    <span>${title}</span>\\n                </div>\\n                <div class=\'state\'>${apiState}</div>\\n            </div>\\n            <div class=\\"bars-row\\">\\n                <div class=\\"bar-column\\" style=\\"margin-right: 10px;\\">\\n                    <div class=\'bar-container\'>\\n                        <div class=\\"unit\\">{i18n:api-usage.messages}</div>\\n                        <div class=\'bar\'>\\n                            <div class=\\"bar-fill\\" id=\\"api-usage-bar\\"></div>\\n                        </div>\\n                        <div class=\'bar-labels\'>\\n                            <div id=\\"api-usage-percent\\"></div>\\n                            <div style=\\"flex: 1;\\"></div>\\n                            <div id=\\"api-usage-value\\"></div>\\n                        </div>\\n                    </div>    \\n                </div>\\n                <div class=\\"bar-column\\" style=\\"margin-left: 10px;\\">\\n                    <div class=\'bar-container\'>\\n                        <div class=\\"unit\\">{i18n:api-usage.data-points}</div>\\n                        <div class=\'bar\'>\\n                            <div class=\\"bar-fill\\" id=\\"api-usage-bar2\\"></div>\\n                        </div>    \\n                        <div class=\'bar-labels\'>\\n                            <div id=\\"api-usage-percent2\\"></div>\\n                            <div style=\\"flex: 1;\\"></div>\\n                            <div id=\\"api-usage-value2\\"></div>\\n                        </div>\\n                    </div>    \\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n    <div role=\\"separator\\" class=\\"mat-divider mat-divider-horizontal\\" aria-orientation=\\"horizontal\\"></div>\\n    <div class=\'action-row\'>\\n        <button id=\\"transport_details\\" class=\\"mat-focus-indicator mat-button mat-button-base mat-primary\\">\\n            <span class=\\"mat-button-wrapper\\">{i18n:api-usage.view-details}</span>\\n            <span class=\\"mat-ripple mat-button-ripple\\"></span>\\n            <span class=\\"mat-button-focus-overlay\\"></span>\\n        </button>\\n    </div>    \\n</div>",\r\n            "cardCss": ".card {\\n   width: 100%;\\n   height: 100%;\\n   box-sizing: border-box;\\n   display: flex;\\n   flex-direction: column;\\n}\\n\\n.card > img {\\n    height: 0;\\n}\\n\\n.card .content {\\n   flex: 1;    \\n   padding: 13px 13px 0;\\n   display: flex;\\n   box-sizing: border-box;\\n}\\n\\n.card .content .column {\\n   display: flex;\\n   flex-direction: column;    \\n   justify-content: space-around;\\n   flex: 1;\\n}\\n\\n.card .content .title-row {\\n    display: flex;\\n    flex-direction: row;\\n    padding-bottom: 10px;\\n}\\n\\n.card .title {\\n    flex: 1;\\n    font-size: 20px;\\n    font-weight: 400;\\n    color: #666666;\\n}\\n\\n.card .state {\\n    text-transform: uppercase;\\n    font-size: 20px;\\n    font-weight: bold;\\n}\\n\\n.card.enabled .state {\\n    color: #00B260;\\n}\\n\\n.card.warning .state {\\n    color: #FFAD6F;\\n}\\n\\n.card.disabled .state {\\n    color: #F73243;\\n}\\n\\n.card .bars-row {\\n    flex: 1;\\n    display: flex;\\n    flex-direction: row;\\n}\\n\\n.card .bar-column {\\n    flex: 1;\\n    display: flex;\\n    flex-direction: column;\\n}\\n\\n.card .bar-container {\\n    flex: 1;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n}\\n\\n.card .bar {\\n    flex: 1;\\n    max-height: 30px;\\n    margin-top: 3.5px;\\n    margin-bottom: 4px;\\n    background-color: #F0F0F0;\\n    border: 1px solid #DADCDB;\\n    border-radius: 2px;\\n    box-shadow: inset 0 1px 3px rgba(0, 0, 0, .2);\\n}\\n\\n.card.enabled .bar {\\n    border-color: #00B260;\\n    background-color: #F0FBF7;\\n}\\n\\n.card.warning .bar {\\n    border-color: #FFAD6F;\\n    background-color: #FFFAF6;\\n}\\n\\n.card.disabled .bar {\\n    border-color: #F73243;\\n    background-color: #FFF0F0;\\n}\\n\\n.card .bar .bar-fill {\\n    background-color: #F0F0F0;\\n    border-radius: 2px;\\n    height: 100%;\\n    width: 0%;\\n}\\n\\n.card.enabled .bar-fill {\\n    background-color: #00C46C;\\n}\\n\\n.card.warning .bar-fill {\\n    background-color: #FFD099;\\n}\\n\\n.card.disabled .bar-fill {\\n    background-color: #FF9494;\\n}\\n\\n.card .bar-labels {\\n    height: 20px;\\n    font-size: 16px;\\n    color: #666;\\n    display: flex;\\n    flex-direction: row;\\n}\\n\\n.card .mat-button {\\n    text-transform: uppercase;\\n}\\n\\n.card .mat-button-wrapper {\\n    pointer-events: none;\\n}\\n\\n.card .action-row {\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: flex-end;\\n    padding: 8px 0;\\n}\\n\\n\\n@media screen and (min-width: 960px) and (max-width: 1279px) {\\n  .card .title {\\n      font-size: 12px;\\n  }\\n  .card .state {\\n      font-size: 12px;\\n  }\\n  .card .unit {\\n      font-size: 8px;\\n  }\\n  .card .bar-labels {\\n      font-size: 6px;\\n  }\\n  .card .mat-button {\\n      font-size: 8px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}\\n\\n@media screen and (min-width: 1280px) and (max-width: 1599px) {\\n  .card .title {\\n      font-size: 14px;\\n  }\\n  .card .state {\\n      font-size: 14px;\\n  }\\n  .card .unit {\\n      font-size: 10px;\\n  }\\n  .card .bar-labels {\\n      font-size: 8px;\\n  }\\n  .card .mat-button {\\n      font-size: 10px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}\\n\\n@media screen and (min-width: 1600px) and (max-width: 1919px) {\\n  .card .title {\\n      font-size: 16px;\\n  }\\n  .card .state {\\n      font-size: 16px;\\n  }\\n  .card .unit {\\n      font-size: 12px;\\n  }\\n  .card .bar-labels {\\n      font-size: 12px;\\n  }\\n  .card .mat-button {\\n      font-size: 12px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}    \\n\\n"\r\n          },\r\n          "title": "Transport",\r\n          "dropShadow": true,\r\n          "enableFullscreen": false,\r\n          "widgetStyle": {\r\n            "cursor": "default"\r\n          },\r\n          "titleStyle": {\r\n            "fontSize": "20px",\r\n            "fontWeight": 400\r\n          },\r\n          "useDashboardTimewindow": true,\r\n          "showLegend": false,\r\n          "actions": {\r\n            "elementClick": [\r\n              {\r\n                "name": "transport_details",\r\n                "icon": "insert_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "transport",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openRightLayout": false,\r\n                "id": "46b7cefe-e1f2-67c1-4055-3a214520f869"\r\n              }\r\n            ]\r\n          },\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": ""\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "a245c67e-53ec-d299-fa89-69fe2062ccb2"\r\n      },\r\n      "a151ae60-0326-6116-d818-9070dda8e9c7": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "cards",\r\n        "typeAlias": "html_value_card",\r\n        "type": "latest",\r\n        "title": "New widget",\r\n        "sizeX": 7.5,\r\n        "sizeY": 3,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "alarmApiState",\r\n                  "type": "timeseries",\r\n                  "label": "apiState",\r\n                  "color": "#2196f3",\r\n                  "settings": {},\r\n                  "_hash": 0.8830669138660703,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "createdAlarmsLimit",\r\n                  "type": "timeseries",\r\n                  "label": "limit",\r\n                  "color": "#4caf50",\r\n                  "settings": {},\r\n                  "_hash": 0.5463603803546802,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "createdAlarmsCount",\r\n                  "type": "timeseries",\r\n                  "label": "count",\r\n                  "color": "#f44336",\r\n                  "settings": {},\r\n                  "_hash": 0.5564241862015964,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "alarmApiState",\r\n                  "type": "timeseries",\r\n                  "label": "apiStateClass",\r\n                  "color": "#ffc107",\r\n                  "settings": {},\r\n                  "_hash": 0.8737107059960671,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return value ? value.toLowerCase() : \'\';"\r\n                },\r\n                {\r\n                  "name": "alarmApiState",\r\n                  "type": "timeseries",\r\n                  "label": "cardId",\r\n                  "color": "#607d8b",\r\n                  "settings": {},\r\n                  "_hash": 0.051659774305067296,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return (Math.random()*100000).toFixed(0);"\r\n                },\r\n                {\r\n                  "name": "alarmApiState",\r\n                  "type": "timeseries",\r\n                  "label": "title",\r\n                  "color": "#9c27b0",\r\n                  "settings": {},\r\n                  "_hash": 0.43439375716502227,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return \\"{i18n:api-usage.alarm}\\";"\r\n                },\r\n                {\r\n                  "name": "alarmApiState",\r\n                  "type": "timeseries",\r\n                  "label": "unit",\r\n                  "color": "#8bc34a",\r\n                  "settings": {},\r\n                  "_hash": 0.9964061963495883,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return \\"{i18n:api-usage.alarms-created}\\";"\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "realtime": {\r\n              "timewindowMs": 60000\r\n            }\r\n          },\r\n          "showTitle": false,\r\n          "backgroundColor": "#fff",\r\n          "color": "#666666",\r\n          "padding": "0",\r\n          "settings": {\r\n            "cardHtml": "<div class=\'card ${apiStateClass}\'>\\n    <img src=\\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\\" onload=\\"initializeCard_${cardId:0}(event);\\">\\n    <script type=\\"text/javascript\\">\\n        function initializeCard_${cardId:0}(e) {\\n            \\n            function toShortNumber(number) {\\n                var rounder = Math.pow(10, 1);\\n                var powers = [\\n                  {key: \'Q\', value: Math.pow(10, 15)},\\n                  {key: \'T\', value: Math.pow(10, 12)},\\n                  {key: \'B\', value: Math.pow(10, 9)},\\n                  {key: \'M\', value: Math.pow(10, 6)},\\n                  {key: \'K\', value: 1000}\\n                ];\\n                \\n                var key = \'\';\\n                \\n                for (var i = 0; i < powers.length; i++) {\\n                    var reduced = number / powers[i].value;\\n                    reduced = Math.round(reduced * rounder) / rounder;\\n                    if (reduced >= 1) {\\n                        number = reduced;\\n                        key = powers[i].key;\\n                        break;\\n                    }\\n                }\\n                return number + key;\\n            }\\n            \\n            var imgTag = e.target;\\n            var parentTag = imgTag.parentNode;\\n            var count = \\"${count:0}\\";\\n            var limit = \\"${limit:0}\\";\\n            count = count.length > 0 ? parseInt(count, 10) : 0;\\n            limit = limit.length > 0 ? parseInt(limit, 10) : 0;\\n            var percentElement = $(\'#api-usage-percent\', parentTag);\\n            var valueElement = $(\'#api-usage-value\', parentTag);\\n            var barElement = $(\'#api-usage-bar\', parentTag);\\n            if (Number.isFinite(limit) && limit > 0) {\\n                var percent = Math.min(100, ((count / limit) * 100));\\n                barElement.width(percent + \'%\');\\n                percent = percent.toFixed(2);\\n                percentElement.text(percent + \'%\');\\n                valueElement.text(toShortNumber(count) + \' / \' + toShortNumber(limit));\\n            } else {\\n                barElement.width(\'0%\');\\n                percentElement.text(\'\');\\n                valueElement.text(toShortNumber(count) + \' / \u221e\');\\n            }\\n        }\\n    <\/script>\\n    <div class=\'content\'>\\n        <div class=\'column\'>\\n            <div class=\'title-row\'>\\n                <div class=\'title\'>${title}</div>\\n                <div class=\'state\'>${apiState}</div>\\n            </div>    \\n            <div class=\'bar-container\'>\\n                <div class=\\"unit\\">${unit}</div>\\n                <div class=\'bar\'>\\n                    <div class=\\"bar-fill\\" id=\\"api-usage-bar\\"></div>\\n                </div>    \\n                <div class=\'bar-labels\'>\\n                    <div id=\\"api-usage-percent\\"></div>\\n                    <div style=\\"flex: 1;\\"></div>\\n                    <div id=\\"api-usage-value\\"></div>\\n                </div>\\n            </div>    \\n        </div>\\n    </div>\\n    <div role=\\"separator\\" class=\\"mat-divider mat-divider-horizontal\\" aria-orientation=\\"horizontal\\"></div>\\n    <div class=\'action-row\'>\\n        <button id=\\"email_messages_details\\" class=\\"mat-focus-indicator mat-button mat-button-base mat-primary\\">\\n            <span class=\\"mat-button-wrapper\\">{i18n:api-usage.view-details}</span>\\n            <span class=\\"mat-ripple mat-button-ripple\\"></span>\\n            <span class=\\"mat-button-focus-overlay\\"></span>\\n        </button>\\n    </div> \\n</div>",\r\n            "cardCss": ".card {\\n   width: 100%;\\n   height: 100%;\\n   box-sizing: border-box;\\n   display: flex;\\n   flex-direction: column;\\n}\\n\\n.card > img {\\n    height: 0;\\n}\\n\\n.card .content {\\n   flex: 1;    \\n   padding: 13px 13px 0;\\n   display: flex;\\n   box-sizing: border-box;\\n}\\n\\n.card .content .column {\\n   display: flex;\\n   flex-direction: column;    \\n   justify-content: space-around;\\n   flex: 1;\\n}\\n\\n.card .content .title-row {\\n    display: flex;\\n    flex-direction: row;\\n    padding-bottom: 10px;\\n}\\n\\n.card .title {\\n    flex: 1;\\n    font-size: 20px;\\n    font-weight: 400;\\n    color: #666666;\\n}\\n\\n.card .state {\\n    text-transform: uppercase;\\n    font-size: 20px;\\n    font-weight: bold;\\n}\\n\\n.card.enabled .state {\\n    color: #00B260;\\n}\\n\\n.card.warning .state {\\n    color: #FFAD6F;\\n}\\n\\n.card.disabled .state {\\n    color: #F73243;\\n}\\n\\n.card .bar-container {\\n    flex: 1;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n}\\n\\n.card .bar {\\n    flex: 1;\\n    max-height: 30px;\\n    margin-top: 3.5px;\\n    margin-bottom: 4px;\\n    background-color: #F0F0F0;\\n    border: 1px solid #DADCDB;\\n    border-radius: 2px;\\n    box-shadow: inset 0 1px 3px rgba(0, 0, 0, .2);\\n}\\n\\n.card.enabled .bar {\\n    border-color: #00B260;\\n    background-color: #F0FBF7;\\n}\\n\\n.card.warning .bar {\\n    border-color: #FFAD6F;\\n    background-color: #FFFAF6;\\n}\\n\\n.card.disabled .bar {\\n    border-color: #F73243;\\n    background-color: #FFF0F0;\\n}\\n\\n.card .bar .bar-fill {\\n    background-color: #F0F0F0;\\n    border-radius: 2px;\\n    height: 100%;\\n    width: 0%;\\n}\\n\\n.card.enabled .bar-fill {\\n    background-color: #00C46C;\\n}\\n\\n.card.warning .bar-fill {\\n    background-color: #FFD099;\\n}\\n\\n.card.disabled .bar-fill {\\n    background-color: #FF9494;\\n}\\n\\n.card .bar-labels {\\n    height: 20px;\\n    font-size: 16px;\\n    color: #666;\\n    display: flex;\\n    flex-direction: row;\\n}\\n\\n\\n.card .mat-button {\\n    text-transform: uppercase;\\n}\\n\\n.card .mat-button-wrapper {\\n    pointer-events: none;\\n}\\n\\n.card .action-row {\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: flex-end;\\n    padding: 8px 0;\\n}\\n\\n@media screen and (min-width: 960px) and (max-width: 1279px) {\\n  .card .title {\\n      font-size: 12px;\\n  }\\n  .card .state {\\n      font-size: 12px;\\n  }\\n  .card .unit {\\n      font-size: 8px;\\n  }\\n  .card .bar-labels {\\n      font-size: 8px;\\n  }\\n  .card .mat-button {\\n      font-size: 8px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}\\n\\n@media screen and (min-width: 1280px) and (max-width: 1599px) {\\n  .card .title {\\n      font-size: 14px;\\n  }\\n  .card .state {\\n      font-size: 14px;\\n  }\\n  .card .unit {\\n      font-size: 10px;\\n  }\\n  .card .bar-labels {\\n      font-size: 10px;\\n  }\\n  .card .mat-button {\\n      font-size: 10px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}\\n\\n@media screen and (min-width: 1600px) and (max-width: 1919px) {\\n  .card .title {\\n      font-size: 16px;\\n  }\\n  .card .state {\\n      font-size: 16px;\\n  }\\n  .card .unit {\\n      font-size: 12px;\\n  }\\n  .card .bar-labels {\\n      font-size: 12px;\\n  }\\n  .card .mat-button {\\n      font-size: 12px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}    \\n\\n\\n"\r\n          },\r\n          "title": "Alarm created",\r\n          "dropShadow": true,\r\n          "enableFullscreen": false,\r\n          "widgetStyle": {\r\n            "cursor": "default"\r\n          },\r\n          "titleStyle": {\r\n            "fontSize": "20px",\r\n            "fontWeight": 400\r\n          },\r\n          "useDashboardTimewindow": true,\r\n          "showLegend": false,\r\n          "actions": {\r\n            "elementClick": [\r\n              {\r\n                "name": "email_messages_details",\r\n                "icon": "insert_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "alarms_created",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openInSeparateDialog": null,\r\n                "dialogTitle": null,\r\n                "dialogHideDashboardToolbar": true,\r\n                "dialogWidth": null,\r\n                "dialogHeight": null,\r\n                "openRightLayout": false,\r\n                "id": "946ba769-84ac-1507-6baa-94701de8967b"\r\n              }\r\n            ]\r\n          },\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": ""\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "a151ae60-0326-6116-d818-9070dda8e9c7"\r\n      },\r\n      "68e16e98-0420-f72c-4848-41dedffd3904": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "ruleEngineExecutionCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.rule-engine-executions}",\r\n                  "color": "#ab00ff",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 0,\r\n            "realtime": {\r\n              "timewindowMs": 86400000,\r\n              "interval": 3600000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;",\r\n              "min": 0,\r\n              "tickDecimals": 0\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 2400000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.rule-engine-hourly-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {\r\n            "headerButton": [\r\n              {\r\n                "name": "{i18n:api-usage.view-statistics}",\r\n                "icon": "show_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "rule_engine_statistics",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openRightLayout": false,\r\n                "id": "f9f08190-9ed9-d802-5b7a-c57ff84b5648"\r\n              },\r\n              {\r\n                "name": "{i18n:api-usage.view-details}",\r\n                "icon": "insert_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "rule_engine_execution",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openRightLayout": false,\r\n                "id": "1aec196b-44ba-ddf4-c4dc-c3f60c1eb6fc"\r\n              }\r\n            ]\r\n          },\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "68e16e98-0420-f72c-4848-41dedffd3904"\r\n      },\r\n      "2aa6b499-6e27-b315-6833-89c4d58485ce": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "transportMsgCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.transport-messages}",\r\n                  "color": "#2196f3",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "transportDataPointsCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.transport-data-points}",\r\n                  "color": "#4caf50",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.46849996721308895,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 0,\r\n            "realtime": {\r\n              "timewindowMs": 86400000,\r\n              "interval": 3600000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;",\r\n              "min": 0,\r\n              "tickDecimals": 0\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": true,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 2400000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            },\r\n            "tooltipCumulative": false\r\n          },\r\n          "title": "{i18n:api-usage.transport-hourly-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {\r\n            "headerButton": [\r\n              {\r\n                "name": "{i18n:api-usage.view-details}",\r\n                "icon": "insert_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "transport",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openRightLayout": false,\r\n                "id": "6ef12f6a-0266-25cf-6ca5-5dcb772252c6"\r\n              }\r\n            ]\r\n          },\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "2aa6b499-6e27-b315-6833-89c4d58485ce"\r\n      },\r\n      "d890cea3-fba0-6474-9a21-fa780230dc62": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "jsExecutionCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.javascript-executions}",\r\n                  "color": "#ff9900",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 0,\r\n            "realtime": {\r\n              "timewindowMs": 86400000,\r\n              "interval": 3600000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;",\r\n              "min": 0,\r\n              "tickDecimals": 0\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 2400000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.javascript-functions-hourly-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {\r\n            "headerButton": [\r\n              {\r\n                "name": "{i18n:api-usage.view-details}",\r\n                "icon": "insert_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "javascript_functions",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openRightLayout": false,\r\n                "id": "4687d3f6-8800-a3b6-26e5-0d33f3b828a9"\r\n              }\r\n            ]\r\n          },\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "d890cea3-fba0-6474-9a21-fa780230dc62"\r\n      },\r\n      "84b6cfa5-1449-e0f2-3560-f810d2dd7ead": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "storageDataPointsCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.data-points-storage-days}",\r\n                  "color": "#1039ee",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 0,\r\n            "realtime": {\r\n              "timewindowMs": 86400000,\r\n              "interval": 3600000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;",\r\n              "min": 0,\r\n              "tickDecimals": 0\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 2400000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.telemetry-persistence-hourly-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {\r\n            "headerButton": [\r\n              {\r\n                "name": "{i18n:api-usage.view-details}",\r\n                "icon": "insert_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "telemetry_persistence",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openRightLayout": false,\r\n                "id": "16707efb-e572-bd02-c219-55fc1b0f672a"\r\n              }\r\n            ]\r\n          },\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "84b6cfa5-1449-e0f2-3560-f810d2dd7ead"\r\n      },\r\n      "d296b566-a000-7402-ae9d-c815381c5435": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "createdAlarmsCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.alarms-created}",\r\n                  "color": "#d35a00",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "var size = radius * Math.sqrt(Math.PI) / 2;\\nctx.moveTo(x - size, y - size);\\nctx.lineTo(x + size, y + size);\\nctx.moveTo(x - size, y + size);\\nctx.lineTo(x + size, y - size);",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 0,\r\n            "realtime": {\r\n              "timewindowMs": 86400000,\r\n              "interval": 3600000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;",\r\n              "min": 0,\r\n              "tickDecimals": 0\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 2400000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.alarms-created-hourly-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {\r\n            "headerButton": [\r\n              {\r\n                "name": "{i18n:api-usage.view-details}",\r\n                "icon": "insert_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "alarms_created",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openInSeparateDialog": null,\r\n                "dialogTitle": null,\r\n                "dialogHideDashboardToolbar": true,\r\n                "dialogWidth": null,\r\n                "dialogHeight": null,\r\n                "openRightLayout": false,\r\n                "id": "371882f9-ea23-3abc-fca8-9449c5dfdd6b"\r\n              }\r\n            ]\r\n          },\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "d296b566-a000-7402-ae9d-c815381c5435"\r\n      },\r\n      "00a02464-9509-911b-3b5e-21fb37629822": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "emailCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.email-messages}",\r\n                  "color": "#4caf50",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "var size = radius * Math.sqrt(Math.PI) / 2;\\nctx.moveTo(x - size, y - size);\\nctx.lineTo(x + size, y + size);\\nctx.moveTo(x - size, y + size);\\nctx.lineTo(x + size, y - size);",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.1348755140779876,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "smsCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.sms-messages}",\r\n                  "color": "#f36021",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 0,\r\n            "realtime": {\r\n              "timewindowMs": 86400000,\r\n              "interval": 3600000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;",\r\n              "min": 0,\r\n              "tickDecimals": 0\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 2400000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.notifications-hourly-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {\r\n            "headerButton": [\r\n              {\r\n                "name": "{i18n:api-usage.view-details}",\r\n                "icon": "insert_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "notifications",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openInSeparateDialog": null,\r\n                "dialogTitle": null,\r\n                "dialogHideDashboardToolbar": true,\r\n                "dialogWidth": null,\r\n                "dialogHeight": null,\r\n                "openRightLayout": false,\r\n                "id": "49aefac0-ec5e-d6f3-f39c-8744759f4b19"\r\n              }\r\n            ]\r\n          },\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "00a02464-9509-911b-3b5e-21fb37629822"\r\n      },\r\n      "74199074-7873-6c6a-2a51-3fc614769f03": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "ruleEngineExecutionCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.rule-engine-executions}",\r\n                  "color": "#ab00ff",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 1,\r\n            "history": {\r\n              "historyType": 0,\r\n              "timewindowMs": 2592000000,\r\n              "interval": 86400000\r\n            },\r\n            "aggregation": {\r\n              "type": "SUM",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;",\r\n              "min": 0,\r\n              "tickDecimals": 0\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 1800000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.rule-engine-daily-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "74199074-7873-6c6a-2a51-3fc614769f03"\r\n      },\r\n      "00006bc3-8a8d-b55e-ed39-e318f1bcd090": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "ruleEngineExecutionCount",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.rule-engine-executions}",\r\n                  "color": "#ab00ff",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 1,\r\n            "history": {\r\n              "historyType": 0,\r\n              "timewindowMs": 31536000000,\r\n              "interval": 1000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;",\r\n              "min": 0,\r\n              "tickDecimals": 0\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 900000000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.rule-engine-monthly-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "00006bc3-8a8d-b55e-ed39-e318f1bcd090"\r\n      },\r\n      "5f5ca59c-e507-5301-5910-7ad8cd34df40": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "jsExecutionCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.javascript-executions}",\r\n                  "color": "#ff9900",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 1,\r\n            "history": {\r\n              "historyType": 0,\r\n              "timewindowMs": 2592000000,\r\n              "interval": 86400000\r\n            },\r\n            "aggregation": {\r\n              "type": "SUM",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "min": 0,\r\n              "tickDecimals": 0,\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;"\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 1800000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.javascript-functions-daily-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "5f5ca59c-e507-5301-5910-7ad8cd34df40"\r\n      },\r\n      "ada32ee9-44ed-48d1-c368-fd0c94b7607f": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "jsExecutionCount",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.javascript-executions}",\r\n                  "color": "#ff9900",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 1,\r\n            "history": {\r\n              "historyType": 0,\r\n              "timewindowMs": 31536000000,\r\n              "interval": 1000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "min": 0,\r\n              "tickDecimals": 0,\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;"\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 900000000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.javascript-functions-monthly-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "ada32ee9-44ed-48d1-c368-fd0c94b7607f"\r\n      },\r\n      "98bae68b-0f35-72f2-a428-9b06889f1554": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "transportMsgCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.transport-messages}",\r\n                  "color": "#2196f3",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "transportDataPointsCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.transport-data-points}",\r\n                  "color": "#4caf50",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.46849996721308895,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 1,\r\n            "history": {\r\n              "historyType": 0,\r\n              "timewindowMs": 2592000000,\r\n              "interval": 86400000\r\n            },\r\n            "aggregation": {\r\n              "type": "SUM",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;",\r\n              "min": 0,\r\n              "tickDecimals": 0\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": true,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 1800000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            },\r\n            "tooltipCumulative": false\r\n          },\r\n          "title": "{i18n:api-usage.transport-daily-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "98bae68b-0f35-72f2-a428-9b06889f1554"\r\n      },\r\n      "e61e5477-5a09-cc25-966b-f613d81da833": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "transportMsgCount",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.transport-messages}",\r\n                  "color": "#2196f3",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "transportDataPointsCount",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.transport-data-points}",\r\n                  "color": "#4caf50",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.46849996721308895,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 1,\r\n            "history": {\r\n              "historyType": 0,\r\n              "timewindowMs": 31536000000,\r\n              "interval": 2592000000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;",\r\n              "min": 0,\r\n              "tickDecimals": 0\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": true,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 900000000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            },\r\n            "tooltipCumulative": false\r\n          },\r\n          "title": "{i18n:api-usage.transport-monthly-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "e61e5477-5a09-cc25-966b-f613d81da833"\r\n      },\r\n      "85fe0738-5326-f069-ab3f-30594bde5fed": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "storageDataPointsCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.data-points-storage-days}",\r\n                  "color": "#1039ee",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 1,\r\n            "history": {\r\n              "historyType": 0,\r\n              "timewindowMs": 2592000000,\r\n              "interval": 86400000\r\n            },\r\n            "aggregation": {\r\n              "type": "SUM",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "min": 0,\r\n              "tickDecimals": 0,\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;"\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 1800000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.telemetry-persistence-daily-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "85fe0738-5326-f069-ab3f-30594bde5fed"\r\n      },\r\n      "eaeb381a-437e-f6e9-60c9-6bc8826fdd44": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "storageDataPointsCount",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.data-points-storage-days}",\r\n                  "color": "#1039ee",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 1,\r\n            "history": {\r\n              "historyType": 0,\r\n              "timewindowMs": 31536000000,\r\n              "interval": 1000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "min": 0,\r\n              "tickDecimals": 0,\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;"\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 900000000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.telemetry-persistence-monthly-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "eaeb381a-437e-f6e9-60c9-6bc8826fdd44"\r\n      },\r\n      "4b798823-b97d-9d6a-59dc-fcafd897fc23": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "createdAlarmsCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.alarms-created}",\r\n                  "color": "#d35a00",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "var size = radius * Math.sqrt(Math.PI) / 2;\\nctx.moveTo(x - size, y - size);\\nctx.lineTo(x + size, y + size);\\nctx.moveTo(x - size, y + size);\\nctx.lineTo(x + size, y - size);",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 1,\r\n            "history": {\r\n              "historyType": 0,\r\n              "timewindowMs": 2592000000,\r\n              "interval": 86400000\r\n            },\r\n            "aggregation": {\r\n              "type": "SUM",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "min": 0,\r\n              "tickDecimals": 0,\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;"\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 1800000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.alarms-created-daily-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "4b798823-b97d-9d6a-59dc-fcafd897fc23"\r\n      },\r\n      "6a981580-7490-19dd-f937-b64cbf67a982": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "createdAlarmsCount",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.alarms-created}",\r\n                  "color": "#d35a00",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "var size = radius * Math.sqrt(Math.PI) / 2;\\nctx.moveTo(x - size, y - size);\\nctx.lineTo(x + size, y + size);\\nctx.moveTo(x - size, y + size);\\nctx.lineTo(x + size, y - size);",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 1,\r\n            "history": {\r\n              "historyType": 0,\r\n              "timewindowMs": 31536000000,\r\n              "interval": 1000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "min": 0,\r\n              "tickDecimals": 0,\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;"\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 900000000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.alarms-created-monthly-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "6a981580-7490-19dd-f937-b64cbf67a982"\r\n      },\r\n      "7302df65-1b0c-579e-bbdb-145126ae3392": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "smsCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.sms-messages}",\r\n                  "color": "#f36021",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 1,\r\n            "history": {\r\n              "historyType": 0,\r\n              "timewindowMs": 2592000000,\r\n              "interval": 86400000\r\n            },\r\n            "aggregation": {\r\n              "type": "SUM",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "min": 0,\r\n              "tickDecimals": 0,\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;"\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 1800000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.sms-messages-daily-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "7302df65-1b0c-579e-bbdb-145126ae3392"\r\n      },\r\n      "fdb385e7-14fe-fc9f-ebdc-b400f26fc66b": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "smsCount",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.sms-messages}",\r\n                  "color": "#f36021",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 1,\r\n            "history": {\r\n              "historyType": 0,\r\n              "timewindowMs": 31536000000,\r\n              "interval": 1000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "min": 0,\r\n              "tickDecimals": 0,\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;"\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 900000000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.sms-messages-monthly-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "fdb385e7-14fe-fc9f-ebdc-b400f26fc66b"\r\n      },\r\n      "2408ad30-163e-8221-08e1-a82b638be564": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "basic_timeseries",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 12,\r\n        "sizeY": 7,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "dataKeys": [\r\n                {\r\n                  "name": "successfulMsgs",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.successful}",\r\n                  "color": "#4caf50",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": true,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.15490750967648736\r\n                },\r\n                {\r\n                  "name": "failedMsgs",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.permanent-failures}",\r\n                  "color": "#ef5350",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": true,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.4186621166514697\r\n                },\r\n                {\r\n                  "name": "tmpFailed",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.processing-failures}",\r\n                  "color": "#ffc107",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": true,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.49891007198715376\r\n                }\r\n              ],\r\n              "entityAliasId": "2e4c97b0-257a-a1b9-690c-141d9bf2ec6f"\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 0,\r\n            "realtime": {\r\n              "timewindowMs": 3600000,\r\n              "interval": 1000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 10000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "min": 0,\r\n              "tickDecimals": 0,\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;"\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "Queue Stats",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "mobileHeight": null,\r\n          "showTitleIcon": false,\r\n          "titleIcon": null,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "displayTimewindow": true,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "showMin": true,\r\n            "showMax": true,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "id": "2408ad30-163e-8221-08e1-a82b638be564"\r\n      },\r\n      "e43dcfe1-b970-6a11-ce0e-5769f3eb5e88": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "basic_timeseries",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 12,\r\n        "sizeY": 7,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "dataKeys": [\r\n                {\r\n                  "name": "timeoutMsgs",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.permanent-timeouts}",\r\n                  "color": "#4caf50",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": true,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.565222981550328\r\n                },\r\n                {\r\n                  "name": "tmpTimeout",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.processing-timeouts}",\r\n                  "color": "#9c27b0",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": true,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.2679547062508352\r\n                }\r\n              ],\r\n              "entityAliasId": "2e4c97b0-257a-a1b9-690c-141d9bf2ec6f"\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 0,\r\n            "realtime": {\r\n              "timewindowMs": 3600000,\r\n              "interval": 1000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 10000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "min": 0,\r\n              "tickDecimals": 0,\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;"\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "Processing Failures and Timeouts",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "mobileHeight": null,\r\n          "showTitleIcon": false,\r\n          "titleIcon": null,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "displayTimewindow": true,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "showMin": true,\r\n            "showMax": true,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "id": "e43dcfe1-b970-6a11-ce0e-5769f3eb5e88"\r\n      },\r\n      "a669cf86-e715-efa4-dd9a-b839abf499e9": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "cards",\r\n        "typeAlias": "timeseries_table",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 24,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "dataKeys": [\r\n                {\r\n                  "name": "ruleEngineException",\r\n                  "type": "timeseries",\r\n                  "label": "Rule Chain",\r\n                  "color": "#2196f3",\r\n                  "settings": {\r\n                    "useCellStyleFunction": false,\r\n                    "useCellContentFunction": true,\r\n                    "cellContentFunction": "return JSON.parse(value).ruleChainName;"\r\n                  },\r\n                  "_hash": 0.9954481282345906\r\n                },\r\n                {\r\n                  "name": "ruleEngineException",\r\n                  "type": "timeseries",\r\n                  "label": "Rule Node",\r\n                  "color": "#4caf50",\r\n                  "settings": {\r\n                    "useCellStyleFunction": false,\r\n                    "useCellContentFunction": true,\r\n                    "cellContentFunction": "return JSON.parse(value).ruleNodeName;"\r\n                  },\r\n                  "_hash": 0.18580357036589978\r\n                },\r\n                {\r\n                  "name": "ruleEngineException",\r\n                  "type": "timeseries",\r\n                  "label": "Latest Error",\r\n                  "color": "#f44336",\r\n                  "settings": {\r\n                    "useCellStyleFunction": false,\r\n                    "useCellContentFunction": true,\r\n                    "cellContentFunction": "return JSON.parse(value).message;"\r\n                  },\r\n                  "_hash": 0.7255162989552142\r\n                }\r\n              ],\r\n              "entityAliasId": "2e4c97b0-257a-a1b9-690c-141d9bf2ec6f"\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 0,\r\n            "realtime": {\r\n              "timewindowMs": 2592000000,\r\n              "interval": 1000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "rgb(255, 255, 255)",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "showTimestamp": true,\r\n            "displayPagination": true,\r\n            "defaultPageSize": 10\r\n          },\r\n          "title": "Exceptions",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": false,\r\n          "widgetStyle": {},\r\n          "actions": {},\r\n          "showTitleIcon": false,\r\n          "titleIcon": null,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "displayTimewindow": true\r\n        },\r\n        "id": "a669cf86-e715-efa4-dd9a-b839abf499e9"\r\n      },\r\n      "292eaded-4775-36f7-c896-98d57bdda936": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "cards",\r\n        "typeAlias": "html_value_card",\r\n        "type": "latest",\r\n        "title": "New widget",\r\n        "sizeX": 7.5,\r\n        "sizeY": 3,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "emailApiState",\r\n                  "type": "timeseries",\r\n                  "label": "apiState",\r\n                  "color": "#2196f3",\r\n                  "settings": {},\r\n                  "_hash": 0.8830669138660703,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "emailLimit",\r\n                  "type": "timeseries",\r\n                  "label": "limit",\r\n                  "color": "#4caf50",\r\n                  "settings": {},\r\n                  "_hash": 0.5463603803546802,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "emailCount",\r\n                  "type": "timeseries",\r\n                  "label": "count",\r\n                  "color": "#f44336",\r\n                  "settings": {},\r\n                  "_hash": 0.5564241862015964,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "transportApiState",\r\n                  "type": "timeseries",\r\n                  "label": "cardId",\r\n                  "color": "#607d8b",\r\n                  "settings": {},\r\n                  "_hash": 0.051659774305067296,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return (Math.random()*100000).toFixed(0);"\r\n                },\r\n                {\r\n                  "name": "smsApiState",\r\n                  "type": "timeseries",\r\n                  "label": "apiStatePoint",\r\n                  "color": "#e91e63",\r\n                  "settings": {},\r\n                  "_hash": 0.2969682764607864,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "smsLimit",\r\n                  "type": "timeseries",\r\n                  "label": "pointsLimit",\r\n                  "color": "#9c27b0",\r\n                  "settings": {},\r\n                  "_hash": 0.22082255831864894,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "smsCount",\r\n                  "type": "timeseries",\r\n                  "label": "pointsCount",\r\n                  "color": "#8bc34a",\r\n                  "settings": {},\r\n                  "_hash": 0.6340356364819146,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "transportApiState",\r\n                  "type": "timeseries",\r\n                  "label": "title",\r\n                  "color": "#3f51b5",\r\n                  "settings": {},\r\n                  "_hash": 0.6894070537030252,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return \\"{i18n:api-usage.notifications}\\";"\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "realtime": {\r\n              "timewindowMs": 60000\r\n            }\r\n          },\r\n          "showTitle": false,\r\n          "backgroundColor": "#fff",\r\n          "color": "#666666",\r\n          "padding": "0",\r\n          "settings": {\r\n            "cardCss": ".card {\\n   width: 100%;\\n   height: 100%;\\n   box-sizing: border-box;\\n   display: flex;\\n   flex-direction: column;\\n}\\n\\n.card > img {\\n    height: 0;\\n}\\n\\n.card .content {\\n   flex: 1;    \\n   padding: 13px 13px 0;\\n   display: flex;\\n   box-sizing: border-box;\\n}\\n\\n.card .content .column {\\n   display: flex;\\n   flex-direction: column;    \\n   justify-content: space-around;\\n   flex: 1;\\n}\\n\\n.card .content .title-row {\\n    display: flex;\\n    flex-direction: row;\\n    padding-bottom: 10px;\\n}\\n\\n.card .title {\\n    flex: 1;\\n    font-size: 20px;\\n    font-weight: 400;\\n    color: #666666;\\n}\\n\\n.card .state {\\n    text-transform: uppercase;\\n    font-size: 20px;\\n    font-weight: bold;\\n}\\n\\n.card.enabled .state {\\n    color: #00B260;\\n}\\n\\n.card.warning .state {\\n    color: #FFAD6F;\\n}\\n\\n.card.disabled .state {\\n    color: #F73243;\\n}\\n\\n.card .bars-row {\\n    flex: 1;\\n    display: flex;\\n    flex-direction: row;\\n}\\n\\n.card .bar-column {\\n    flex: 1;\\n    display: flex;\\n    flex-direction: column;\\n}\\n\\n.card .bar-container {\\n    flex: 1;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n}\\n\\n.card .bar {\\n    flex: 1;\\n    max-height: 30px;\\n    margin-top: 3.5px;\\n    margin-bottom: 4px;\\n    background-color: #F0F0F0;\\n    border: 1px solid #DADCDB;\\n    border-radius: 2px;\\n    box-shadow: inset 0 1px 3px rgba(0, 0, 0, .2);\\n}\\n\\n.card.enabled .bar {\\n    border-color: #00B260;\\n    background-color: #F0FBF7;\\n}\\n\\n.card.warning .bar {\\n    border-color: #FFAD6F;\\n    background-color: #FFFAF6;\\n}\\n\\n.card.disabled .bar {\\n    border-color: #F73243;\\n    background-color: #FFF0F0;\\n}\\n\\n.card .bar .bar-fill {\\n    background-color: #F0F0F0;\\n    border-radius: 2px;\\n    height: 100%;\\n    width: 0%;\\n}\\n\\n.card.enabled .bar-fill {\\n    background-color: #00C46C;\\n}\\n\\n.card.warning .bar-fill {\\n    background-color: #FFD099;\\n}\\n\\n.card.disabled .bar-fill {\\n    background-color: #FF9494;\\n}\\n\\n.card .bar-labels {\\n    height: 20px;\\n    font-size: 16px;\\n    color: #666;\\n    display: flex;\\n    flex-direction: row;\\n}\\n\\n.card .mat-button {\\n    text-transform: uppercase;\\n}\\n\\n.card .mat-button-wrapper {\\n    pointer-events: none;\\n}\\n\\n.card .action-row {\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: flex-end;\\n    padding: 8px 0;\\n}\\n\\n\\n@media screen and (min-width: 960px) and (max-width: 1279px) {\\n  .card .title {\\n      font-size: 12px;\\n  }\\n  .card .state {\\n      font-size: 12px;\\n  }\\n  .card .unit {\\n      font-size: 8px;\\n  }\\n  .card .bar-labels {\\n      font-size: 6px;\\n  }\\n  .card .mat-button {\\n      font-size: 8px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}\\n\\n@media screen and (min-width: 1280px) and (max-width: 1599px) {\\n  .card .title {\\n      font-size: 14px;\\n  }\\n  .card .state {\\n      font-size: 14px;\\n  }\\n  .card .unit {\\n      font-size: 10px;\\n  }\\n  .card .bar-labels {\\n      font-size: 8px;\\n  }\\n  .card .mat-button {\\n      font-size: 10px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}\\n\\n@media screen and (min-width: 1600px) and (max-width: 1919px) {\\n  .card .title {\\n      font-size: 16px;\\n  }\\n  .card .state {\\n      font-size: 16px;\\n  }\\n  .card .unit {\\n      font-size: 12px;\\n  }\\n  .card .bar-labels {\\n      font-size: 12px;\\n  }\\n  .card .mat-button {\\n      font-size: 12px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}    \\n\\n",\r\n            "cardHtml": "<div class=\'card\'>\\n    <img src=\\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\\" onload=\\"initializeCard_${cardId:0}(event);\\">\\n    <script type=\\"text/javascript\\">\\n        function initializeCard_${cardId:0}(e) {\\n\\n            function toShortNumber(number) {\\n                var rounder = Math.pow(10, 1);\\n                var powers = [\\n                    {key: \'Q\', value: Math.pow(10, 15)},\\n                    {key: \'T\', value: Math.pow(10, 12)},\\n                    {key: \'B\', value: Math.pow(10, 9)},\\n                    {key: \'M\', value: Math.pow(10, 6)},\\n                    {key: \'K\', value: 1000}\\n                ];\\n\\n                var key = \'\';\\n\\n                for (var i = 0; i < powers.length; i++) {\\n                    var reduced = number / powers[i].value;\\n                    reduced = Math.round(reduced * rounder) / rounder;\\n                    if (reduced >= 1) {\\n                        number = reduced;\\n                        key = powers[i].key;\\n                        break;\\n                    }\\n                }\\n                return number + key;\\n            }\\n\\n            var imgTag = e.target;\\n            var parentTag = imgTag.parentNode;\\n            var count = \\"${count:0}\\";\\n            var limit = \\"${limit:0}\\";\\n            count = count.length > 0 ? parseInt(count, 10) : 0;\\n            limit = limit.length > 0 ? parseInt(limit, 10) : 0;\\n            var percentElement = $(\'#api-usage-percent\', parentTag);\\n            var valueElement = $(\'#api-usage-value\', parentTag);\\n            var barElement = $(\'#api-usage-bar\', parentTag);\\n            if (Number.isFinite(limit) && limit > 0) {\\n                var percent = Math.min(100, ((count / limit) * 100));\\n                barElement.width(percent + \'%\');\\n                percent = percent.toFixed(2);\\n                percentElement.text(percent + \'%\');\\n                valueElement.text(toShortNumber(count) + \' / \' + toShortNumber(limit));\\n            } else {\\n                barElement.width(\'0%\');\\n                percentElement.text(\'\');\\n                valueElement.text(toShortNumber(count) + \' / \u221e\');\\n            }\\n            var pointsCount = \\"${pointsCount:0}\\";\\n            var pointsLimit = \\"${pointsLimit:0}\\";\\n            pointsCount = pointsCount.length > 0 ? parseInt(pointsCount, 10) : 0;\\n            pointsLimit = pointsLimit.length > 0 ? parseInt(pointsLimit, 10) : 0;\\n            var pointsPercentElement = $(\'#api-usage-percent2\', parentTag);\\n            var pointsValueElement = $(\'#api-usage-value2\', parentTag);\\n            var pointsBarElement = $(\'#api-usage-bar2\', parentTag);\\n            if (Number.isFinite(pointsLimit) && pointsLimit > 0) {\\n                var percent = Math.min(100, ((pointsCount / pointsLimit) * 100));\\n                pointsBarElement.width(percent + \'%\');\\n                percent = percent.toFixed(2);\\n                pointsPercentElement.text(percent + \'%\');\\n                pointsValueElement.text(toShortNumber(pointsCount) + \' / \' + toShortNumber(pointsLimit));\\n            } else {\\n                pointsBarElement.width(\'0%\');\\n                pointsPercentElement.text(\'\');\\n                pointsValueElement.text(toShortNumber(pointsCount) + \' / \u221e\');\\n            }\\n            var apiState = \\"${apiState}\\";\\n            var apiStatePoint = \\"${apiStatePoint}\\";\\n            var currentState;\\n            if (apiState === \'DISABLED\' || apiStatePoint === \'DISABLED\') {\\n                currentState = \'DISABLED\';\\n            } else if (apiState === \'WARNING\' || apiStatePoint === \'WARNING\') {\\n                currentState = \'WARNING\';\\n            } else {\\n                currentState = \'ENABLED\';\\n            }\\n            var stateTitle = $(\'#api-state\', parentTag);\\n            stateTitle.text(currentState);\\n            parentTag.classList.add(currentState.toLowerCase());\\n        }\\n    <\/script>\\n    <div class=\'content\'>\\n        <div class=\'column\'>\\n            <div class=\'title-row\'>\\n                <div class=\'title\'>\\n                    <span>${title}</span>\\n                </div>\\n                <div id=\\"api-state\\" class=\'state\'></div>\\n            </div>\\n            <div class=\\"bars-row\\">\\n                <div class=\\"bar-column\\" style=\\"margin-right: 10px;\\">\\n                    <div class=\'bar-container\'>\\n                        <div class=\\"unit\\">{i18n:api-usage.email}</div>\\n                        <div class=\'bar\'>\\n                            <div class=\\"bar-fill\\" id=\\"api-usage-bar\\"></div>\\n                        </div>\\n                        <div class=\'bar-labels\'>\\n                            <div id=\\"api-usage-percent\\"></div>\\n                            <div style=\\"flex: 1;\\"></div>\\n                            <div id=\\"api-usage-value\\"></div>\\n                        </div>\\n                    </div>\\n                </div>\\n                <div class=\\"bar-column\\" style=\\"margin-left: 10px;\\">\\n                    <div class=\'bar-container\'>\\n                        <div class=\\"unit\\">{i18n:api-usage.sms}</div>\\n                        <div class=\'bar\'>\\n                            <div class=\\"bar-fill\\" id=\\"api-usage-bar2\\"></div>\\n                        </div>\\n                        <div class=\'bar-labels\'>\\n                            <div id=\\"api-usage-percent2\\"></div>\\n                            <div style=\\"flex: 1;\\"></div>\\n                            <div id=\\"api-usage-value2\\"></div>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n    <div role=\\"separator\\" class=\\"mat-divider mat-divider-horizontal\\" aria-orientation=\\"horizontal\\"></div>\\n    <div class=\'action-row\'>\\n        <button id=\\"transport_details\\" class=\\"mat-focus-indicator mat-button mat-button-base mat-primary\\">\\n            <span class=\\"mat-button-wrapper\\">{i18n:api-usage.view-details}</span>\\n            <span class=\\"mat-ripple mat-button-ripple\\"></span>\\n            <span class=\\"mat-button-focus-overlay\\"></span>\\n        </button>\\n    </div>\\n</div>"\r\n          },\r\n          "title": "Notifications (Email/SMS)",\r\n          "dropShadow": true,\r\n          "enableFullscreen": false,\r\n          "widgetStyle": {\r\n            "cursor": "default"\r\n          },\r\n          "titleStyle": {\r\n            "fontSize": "20px",\r\n            "fontWeight": 400\r\n          },\r\n          "useDashboardTimewindow": true,\r\n          "showLegend": false,\r\n          "actions": {\r\n            "elementClick": [\r\n              {\r\n                "name": "transport_details",\r\n                "icon": "insert_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "notifications",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openInSeparateDialog": null,\r\n                "dialogTitle": null,\r\n                "dialogHideDashboardToolbar": true,\r\n                "dialogWidth": null,\r\n                "dialogHeight": null,\r\n                "openRightLayout": false,\r\n                "id": "46b7cefe-e1f2-67c1-4055-3a214520f869"\r\n              }\r\n            ]\r\n          },\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": ""\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "292eaded-4775-36f7-c896-98d57bdda936"\r\n      },\r\n      "b3571a36-2106-1122-7d58-0d38bbb0e9c8": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "emailCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.email-messages}",\r\n                  "color": "#d35a00",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 1,\r\n            "history": {\r\n              "historyType": 0,\r\n              "timewindowMs": 2592000000,\r\n              "interval": 86400000\r\n            },\r\n            "aggregation": {\r\n              "type": "SUM",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "min": 0,\r\n              "tickDecimals": 0,\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;"\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 1800000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.email-messages-daily-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "b3571a36-2106-1122-7d58-0d38bbb0e9c8"\r\n      },\r\n      "aa875b7f-e7c8-7529-1ae7-f456211b59cc": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "emailCount",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.email-messages}",\r\n                  "color": "#d35a00",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 1,\r\n            "history": {\r\n              "historyType": 0,\r\n              "timewindowMs": 31536000000,\r\n              "interval": 1000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "min": 0,\r\n              "tickDecimals": 0,\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;"\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 900000000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.email-messages-monthly-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "aa875b7f-e7c8-7529-1ae7-f456211b59cc"\r\n      }\r\n    },\r\n    "states": {\r\n      "default": {\r\n        "name": "{i18n:api-usage.api-usage}",\r\n        "root": true,\r\n        "layouts": {\r\n          "main": {\r\n            "widgets": {\r\n              "fd6df872-2ddf-0921-3929-2e7f55062fad": {\r\n                "sizeX": 4,\r\n                "sizeY": 2,\r\n                "row": 0,\r\n                "col": 8,\r\n                "mobileHeight": 3\r\n              },\r\n              "7e235874-461b-e7c2-2fdd-d8762a020773": {\r\n                "sizeX": 4,\r\n                "sizeY": 2,\r\n                "row": 0,\r\n                "col": 12,\r\n                "mobileHeight": 3\r\n              },\r\n              "08545554-a0e8-05c7-66df-6000cfeff8a4": {\r\n                "sizeX": 4,\r\n                "sizeY": 2,\r\n                "row": 0,\r\n                "col": 4,\r\n                "mobileHeight": 3\r\n              },\r\n              "a245c67e-53ec-d299-fa89-69fe2062ccb2": {\r\n                "sizeX": 4,\r\n                "sizeY": 2,\r\n                "row": 0,\r\n                "col": 0,\r\n                "mobileHeight": 3\r\n              },\r\n              "a151ae60-0326-6116-d818-9070dda8e9c7": {\r\n                "sizeX": 4,\r\n                "sizeY": 2,\r\n                "row": 0,\r\n                "col": 16,\r\n                "mobileHeight": 3\r\n              },\r\n              "292eaded-4775-36f7-c896-98d57bdda936": {\r\n                "sizeX": 4,\r\n                "sizeY": 2,\r\n                "row": 0,\r\n                "col": 20,\r\n                "mobileHeight": 3\r\n              },\r\n              "68e16e98-0420-f72c-4848-41dedffd3904": {\r\n                "sizeX": 8,\r\n                "sizeY": 4,\r\n                "row": 2,\r\n                "col": 8\r\n              },\r\n              "2aa6b499-6e27-b315-6833-89c4d58485ce": {\r\n                "sizeX": 8,\r\n                "sizeY": 4,\r\n                "row": 2,\r\n                "col": 0\r\n              },\r\n              "d890cea3-fba0-6474-9a21-fa780230dc62": {\r\n                "sizeX": 8,\r\n                "sizeY": 4,\r\n                "row": 2,\r\n                "col": 16\r\n              },\r\n              "84b6cfa5-1449-e0f2-3560-f810d2dd7ead": {\r\n                "sizeX": 8,\r\n                "sizeY": 4,\r\n                "row": 6,\r\n                "col": 0\r\n              },\r\n              "d296b566-a000-7402-ae9d-c815381c5435": {\r\n                "sizeX": 8,\r\n                "sizeY": 4,\r\n                "row": 6,\r\n                "col": 8\r\n              },\r\n              "00a02464-9509-911b-3b5e-21fb37629822": {\r\n                "sizeX": 8,\r\n                "sizeY": 4,\r\n                "row": 6,\r\n                "col": 16\r\n              }\r\n            },\r\n            "gridSettings": {\r\n              "backgroundColor": "#eeeeee",\r\n              "color": "rgba(0,0,0,0.870588)",\r\n              "columns": 24,\r\n              "margin": 5,\r\n              "backgroundSizeMode": "100%",\r\n              "autoFillHeight": true,\r\n              "backgroundImageUrl": null,\r\n              "mobileAutoFillHeight": false,\r\n              "mobileRowHeight": 70\r\n            }\r\n          }\r\n        }\r\n      },\r\n      "transport": {\r\n        "name": "{i18n:api-usage.transport}",\r\n        "root": false,\r\n        "layouts": {\r\n          "main": {\r\n            "widgets": {\r\n              "98bae68b-0f35-72f2-a428-9b06889f1554": {\r\n                "sizeX": 24,\r\n                "sizeY": 6,\r\n                "row": 0,\r\n                "col": 0\r\n              },\r\n              "e61e5477-5a09-cc25-966b-f613d81da833": {\r\n                "sizeX": 24,\r\n                "sizeY": 6,\r\n                "row": 6,\r\n                "col": 0\r\n              }\r\n            },\r\n            "gridSettings": {\r\n              "backgroundColor": "#eeeeee",\r\n              "color": "rgba(0,0,0,0.870588)",\r\n              "columns": 24,\r\n              "margin": 10,\r\n              "backgroundSizeMode": "100%",\r\n              "autoFillHeight": true,\r\n              "backgroundImageUrl": null,\r\n              "mobileAutoFillHeight": false,\r\n              "mobileRowHeight": 70\r\n            }\r\n          }\r\n        }\r\n      },\r\n      "rule_engine_execution": {\r\n        "name": "{i18n:api-usage.rule-engine-executions}",\r\n        "root": false,\r\n        "layouts": {\r\n          "main": {\r\n            "widgets": {\r\n              "74199074-7873-6c6a-2a51-3fc614769f03": {\r\n                "sizeX": 24,\r\n                "sizeY": 6,\r\n                "row": 0,\r\n                "col": 0\r\n              },\r\n              "00006bc3-8a8d-b55e-ed39-e318f1bcd090": {\r\n                "sizeX": 24,\r\n                "sizeY": 6,\r\n                "row": 6,\r\n                "col": 0\r\n              }\r\n            },\r\n            "gridSettings": {\r\n              "backgroundColor": "#eeeeee",\r\n              "color": "rgba(0,0,0,0.870588)",\r\n              "columns": 24,\r\n              "margin": 10,\r\n              "backgroundSizeMode": "100%",\r\n              "autoFillHeight": true,\r\n              "backgroundImageUrl": null,\r\n              "mobileAutoFillHeight": false,\r\n              "mobileRowHeight": 70\r\n            }\r\n          }\r\n        }\r\n      },\r\n      "javascript_functions": {\r\n        "name": "{i18n:api-usage.javascript-functions}",\r\n        "root": false,\r\n        "layouts": {\r\n          "main": {\r\n            "widgets": {\r\n              "5f5ca59c-e507-5301-5910-7ad8cd34df40": {\r\n                "sizeX": 24,\r\n                "sizeY": 6,\r\n                "row": 0,\r\n                "col": 0\r\n              },\r\n              "ada32ee9-44ed-48d1-c368-fd0c94b7607f": {\r\n                "sizeX": 24,\r\n                "sizeY": 6,\r\n                "row": 6,\r\n                "col": 0\r\n              }\r\n            },\r\n            "gridSettings": {\r\n              "backgroundColor": "#eeeeee",\r\n              "color": "rgba(0,0,0,0.870588)",\r\n              "columns": 24,\r\n              "margin": 10,\r\n              "backgroundSizeMode": "100%",\r\n              "autoFillHeight": true,\r\n              "backgroundImageUrl": null,\r\n              "mobileAutoFillHeight": false,\r\n              "mobileRowHeight": 70\r\n            }\r\n          }\r\n        }\r\n      },\r\n      "telemetry_persistence": {\r\n        "name": "{i18n:api-usage.telemetry-persistence}",\r\n        "root": false,\r\n        "layouts": {\r\n          "main": {\r\n            "widgets": {\r\n              "85fe0738-5326-f069-ab3f-30594bde5fed": {\r\n                "sizeX": 24,\r\n                "sizeY": 6,\r\n                "row": 0,\r\n                "col": 0\r\n              },\r\n              "eaeb381a-437e-f6e9-60c9-6bc8826fdd44": {\r\n                "sizeX": 24,\r\n                "sizeY": 6,\r\n                "row": 6,\r\n                "col": 0\r\n              }\r\n            },\r\n            "gridSettings": {\r\n              "backgroundColor": "#eeeeee",\r\n              "color": "rgba(0,0,0,0.870588)",\r\n              "columns": 24,\r\n              "margin": 10,\r\n              "backgroundSizeMode": "100%",\r\n              "autoFillHeight": true,\r\n              "backgroundImageUrl": null,\r\n              "mobileAutoFillHeight": false,\r\n              "mobileRowHeight": 70\r\n            }\r\n          }\r\n        }\r\n      },\r\n      "rule_engine_statistics": {\r\n        "name": "{i18n:api-usage.rule-engine-statistics}",\r\n        "root": false,\r\n        "layouts": {\r\n          "main": {\r\n            "widgets": {\r\n              "2408ad30-163e-8221-08e1-a82b638be564": {\r\n                "sizeX": 12,\r\n                "sizeY": 7,\r\n                "mobileHeight": null,\r\n                "row": 0,\r\n                "col": 0\r\n              },\r\n              "e43dcfe1-b970-6a11-ce0e-5769f3eb5e88": {\r\n                "sizeX": 12,\r\n                "sizeY": 7,\r\n                "mobileHeight": null,\r\n                "row": 0,\r\n                "col": 12\r\n              },\r\n              "a669cf86-e715-efa4-dd9a-b839abf499e9": {\r\n                "sizeX": 24,\r\n                "sizeY": 5,\r\n                "row": 7,\r\n                "col": 0\r\n              }\r\n            },\r\n            "gridSettings": {\r\n              "backgroundColor": "#eeeeee",\r\n              "color": "rgba(0,0,0,0.870588)",\r\n              "columns": 24,\r\n              "margin": 10,\r\n              "backgroundSizeMode": "100%",\r\n              "autoFillHeight": true,\r\n              "backgroundImageUrl": null,\r\n              "mobileAutoFillHeight": false,\r\n              "mobileRowHeight": 70\r\n            }\r\n          }\r\n        }\r\n      },\r\n      "notifications": {\r\n        "name": "{i18n:api-usage.notifications-email-sms}",\r\n        "root": false,\r\n        "layouts": {\r\n          "main": {\r\n            "widgets": {\r\n              "7302df65-1b0c-579e-bbdb-145126ae3392": {\r\n                "sizeX": 12,\r\n                "sizeY": 6,\r\n                "row": 0,\r\n                "col": 12\r\n              },\r\n              "fdb385e7-14fe-fc9f-ebdc-b400f26fc66b": {\r\n                "sizeX": 12,\r\n                "sizeY": 6,\r\n                "row": 6,\r\n                "col": 12\r\n              },\r\n              "b3571a36-2106-1122-7d58-0d38bbb0e9c8": {\r\n                "sizeX": 12,\r\n                "sizeY": 6,\r\n                "row": 0,\r\n                "col": 0\r\n              },\r\n              "aa875b7f-e7c8-7529-1ae7-f456211b59cc": {\r\n                "sizeX": 12,\r\n                "sizeY": 6,\r\n                "row": 6,\r\n                "col": 0\r\n              }\r\n            },\r\n            "gridSettings": {\r\n              "backgroundColor": "#eeeeee",\r\n              "color": "rgba(0,0,0,0.870588)",\r\n              "columns": 24,\r\n              "margin": 10,\r\n              "backgroundSizeMode": "100%",\r\n              "autoFillHeight": true,\r\n              "backgroundImageUrl": null,\r\n              "mobileAutoFillHeight": false,\r\n              "mobileRowHeight": 70\r\n            }\r\n          }\r\n        }\r\n      },\r\n      "alarms_created": {\r\n        "name": "{i18n:api-usage.alarms-created}",\r\n        "root": false,\r\n        "layouts": {\r\n          "main": {\r\n            "widgets": {\r\n              "4b798823-b97d-9d6a-59dc-fcafd897fc23": {\r\n                "sizeX": 24,\r\n                "sizeY": 6,\r\n                "row": 0,\r\n                "col": 0\r\n              },\r\n              "6a981580-7490-19dd-f937-b64cbf67a982": {\r\n                "sizeX": 24,\r\n                "sizeY": 6,\r\n                "row": 6,\r\n                "col": 0\r\n              }\r\n            },\r\n            "gridSettings": {\r\n              "backgroundColor": "#eeeeee",\r\n              "color": "rgba(0,0,0,0.870588)",\r\n              "columns": 24,\r\n              "margin": 10,\r\n              "backgroundSizeMode": "100%",\r\n              "autoFillHeight": true,\r\n              "backgroundImageUrl": null,\r\n              "mobileAutoFillHeight": false,\r\n              "mobileRowHeight": 70\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    "entityAliases": {\r\n      "40193437-33ac-3172-eefd-0b08eb849062": {\r\n        "id": "40193437-33ac-3172-eefd-0b08eb849062",\r\n        "alias": "Api usage state",\r\n        "filter": {\r\n          "type": "apiUsageState",\r\n          "resolveMultiple": false\r\n        }\r\n      },\r\n      "2e4c97b0-257a-a1b9-690c-141d9bf2ec6f": {\r\n        "id": "2e4c97b0-257a-a1b9-690c-141d9bf2ec6f",\r\n        "alias": "TbServiceQueues",\r\n        "filter": {\r\n          "type": "assetType",\r\n          "resolveMultiple": true,\r\n          "assetType": "TbServiceQueue",\r\n          "assetNameFilter": ""\r\n        }\r\n      }\r\n    },\r\n    "filters": {},\r\n    "timewindow": {\r\n      "hideInterval": false,\r\n      "hideAggregation": false,\r\n      "hideAggInterval": false,\r\n      "selectedTab": 0,\r\n      "realtime": {\r\n        "timewindowMs": 86400000,\r\n        "interval": 3600000\r\n      },\r\n      "aggregation": {\r\n        "type": "NONE",\r\n        "limit": 50000\r\n      }\r\n    },\r\n    "settings": {\r\n      "stateControllerId": "entity",\r\n      "showTitle": false,\r\n      "showDashboardsSelect": false,\r\n      "showEntitiesSelect": false,\r\n      "showDashboardTimewindow": false,\r\n      "showDashboardExport": false,\r\n      "toolbarAlwaysOpen": true,\r\n      "titleColor": "rgba(0,0,0,0.870588)",\r\n      "showFilters": false,\r\n      "showDashboardLogo": false\r\n    }\r\n  },\r\n  "name": "Api Usage"\r\n}\r\n')},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-api-usage"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:2,consts:[[3,"embedded","dashboard"]],template:function(e,t){1&e&&i["\u0275\u0275element"](0,"tb-dashboard-page",0),2&e&&i["\u0275\u0275property"]("embedded",!0)("dashboard",t.apiUsageDashboard)},directives:[En.a],styles:["[_nghost-%COMP%]{width:100%;height:100%}"]}),t}(l.a);0,void 0;var Js=[{path:"usage",component:Ys,data:{auth:[X.a.TENANT_ADMIN],title:"api-usage.api-usage",breadcrumb:{label:"api-usage.api-usage",icon:"insert_chart"}}}],Xs=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[a.RouterModule.forChild(Js)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](Xs,{imports:[a.RouterModule],exports:[a.RouterModule]})),0;var Qs=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[r.CommonModule,vn.a,yn.a,Xs]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](Qs,{declarations:[Ys],imports:[r.CommonModule,vn.a,yn.a,Xs]})),0;var Zs=[{path:"edgeInstances",data:{breadcrumb:{label:"edge.edge-instances",icon:"router"}},children:[{path:"",component:qt.a,data:{auth:[X.a.TENANT_ADMIN,X.a.CUSTOMER_USER],edgesType:"tenant"},resolve:{entitiesTableConfig:to}},{path:":edgeId/assets",component:qt.a,data:{auth:[X.a.TENANT_ADMIN,X.a.CUSTOMER_USER],assetsType:"edge",breadcrumb:{label:"edge.assets",icon:"domain"}},resolve:{entitiesTableConfig:Ra}},{path:":edgeId/devices",component:qt.a,data:{auth:[X.a.TENANT_ADMIN,X.a.CUSTOMER_USER],devicesType:"edge",breadcrumb:{label:"edge.devices",icon:"devices_other"}},resolve:{entitiesTableConfig:Ea}},{path:":edgeId/entityViews",component:qt.a,data:{auth:[X.a.TENANT_ADMIN,X.a.CUSTOMER_USER],entityViewsType:"edge",breadcrumb:{label:"edge.entity-views",icon:"view_quilt"}},resolve:{entitiesTableConfig:Lo}},{path:":edgeId/dashboards",data:{breadcrumb:{label:"edge.dashboards",icon:"dashboard"}},children:[{path:"",component:qt.a,data:{auth:[X.a.TENANT_ADMIN,X.a.CUSTOMER_USER],dashboardsType:"edge"},resolve:{entitiesTableConfig:ja.a}},{path:":dashboardId",component:En.a,data:{breadcrumb:{labelFunction:Va.c,icon:"dashboard"},auth:[X.a.TENANT_ADMIN,X.a.CUSTOMER_USER],title:"edge.dashboard",widgetEditMode:!1},resolve:{dashboard:Va.a}}]},{path:":edgeId/ruleChains",data:{breadcrumb:{label:"edge.edge-rulechains",icon:"settings_ethernet"}},children:[{path:"",component:qt.a,data:{auth:[X.a.TENANT_ADMIN],title:"edge.rulechains",ruleChainsType:"edge"},resolve:{entitiesTableConfig:Zo}},{path:":ruleChainId",component:tl.c,canDeactivate:[J],data:{breadcrumb:{labelFunction:dl,icon:"settings_ethernet"},auth:[X.a.TENANT_ADMIN],title:"rulechain.edge-rulechain",import:!1,ruleChainType:zo.a.EDGE},resolve:{ruleChain:rl,ruleChainMetaData:al,ruleNodeComponents:ol,tooltipster:ll}}]}]},{path:"edgeManagement",data:{breadcrumb:{label:"edge.management",icon:"settings_input_antenna"}},children:[{path:"",data:{auth:[X.a.TENANT_ADMIN,X.a.CUSTOMER_USER],redirectTo:"/edgeManagement/ruleChains"}},{path:"ruleChains",data:{breadcrumb:{label:"edge.rulechain-templates",icon:"settings_ethernet"}},children:[{path:"",component:qt.a,data:{auth:[X.a.TENANT_ADMIN],title:"edge.rulechain-templates",ruleChainsType:"edges"},resolve:{entitiesTableConfig:Zo}},{path:":ruleChainId",component:tl.c,canDeactivate:[J],data:{breadcrumb:{labelFunction:dl,icon:"settings_ethernet"},auth:[X.a.TENANT_ADMIN],title:"rulechain.edge-rulechain",import:!1,ruleChainType:zo.a.EDGE},resolve:{ruleChain:rl,ruleChainMetaData:al,ruleNodeComponents:ol,tooltipster:ll}},{path:"ruleChain/import",component:tl.c,canActivate:[sl],canDeactivate:[J],data:{breadcrumb:{labelFunction:cl,icon:"settings_ethernet"},auth:[X.a.TENANT_ADMIN],title:"rulechain.edge-rulechain",import:!0,ruleChainType:zo.a.EDGE},resolve:{ruleNodeComponents:ol,tooltipster:ll}}]}]}],ed=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[to],imports:[[a.RouterModule.forChild(Zs)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](ed,{imports:[a.RouterModule],exports:[a.RouterModule]})),0;var td=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[r.CommonModule,vn.a,mo.a,yn.a,ed]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](td,{declarations:[qa,Ha,eo],imports:[r.CommonModule,vn.a,mo.a,yn.a,ed]})),0;var nd=n("Dnot"),id=n("itXk"),rd=n("pLZG"),ad=n("QibW");function od(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"ota-update.title-required")," "))}function ld(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"ota-update.version-required")," "))}function sd(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-hint",5),i["\u0275\u0275text"](1,"ota-update.version-tag-hint"),i["\u0275\u0275elementEnd"]())}function dd(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",25),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,r.otaUpdateTypeTranslationMap.get(n))," ")}}function cd(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"section"),i["\u0275\u0275elementStart"](1,"div",26),i["\u0275\u0275text"](2,"ota-update.warning-after-save-no-edit"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"mat-radio-group",27),i["\u0275\u0275elementStart"](4,"mat-radio-button",25),i["\u0275\u0275text"](5),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"mat-radio-button",25),i["\u0275\u0275text"](8),i["\u0275\u0275pipe"](9,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("value",!1),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](6,4,"ota-update.upload-binary-file")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("value",!0),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](9,6,"ota-update.use-external-url")))}function ud(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"section"),i["\u0275\u0275element"](1,"tb-file-input",29),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementStart"](3,"mat-checkbox",30),i["\u0275\u0275text"](4),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("dropLabel",i["\u0275\u0275pipeBind1"](2,3,"ota-update.drop-file")),i["\u0275\u0275property"]("required",!n.entityForm.get("isURL").value),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](5,5,"ota-update.auto-generate-checksum")," ")}}function pd(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",25),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=i["\u0275\u0275nextContext"](3);i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",r.checksumAlgorithmTranslationMap.get(n)," ")}}function md(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-hint",5),i["\u0275\u0275text"](1,"ota-update.checksum-hint"),i["\u0275\u0275elementEnd"]())}function fd(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",31),i["\u0275\u0275elementStart"](1,"mat-form-field",32),i["\u0275\u0275elementStart"](2,"mat-label",5),i["\u0275\u0275text"](3,"ota-update.checksum-algorithm"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mat-select",33),i["\u0275\u0275template"](5,pd,2,2,"mat-option",21),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"mat-form-field",13),i["\u0275\u0275elementStart"](7,"mat-label",5),i["\u0275\u0275text"](8,"ota-update.checksum"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](9,"input",34),i["\u0275\u0275template"](10,md,2,0,"mat-hint",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngForOf",n.checksumAlgorithms),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",n.isAdd)}}function hd(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"section"),i["\u0275\u0275elementStart"](1,"div",35),i["\u0275\u0275elementStart"](2,"mat-form-field",32),i["\u0275\u0275elementStart"](3,"mat-label",5),i["\u0275\u0275text"](4,"ota-update.file-name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](5,"input",36),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"mat-form-field",13),i["\u0275\u0275elementStart"](7,"mat-label",5),i["\u0275\u0275text"](8,"ota-update.file-size-bytes"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](9,"input",37),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"mat-form-field",13),i["\u0275\u0275elementStart"](11,"mat-label",5),i["\u0275\u0275text"](12,"ota-update.content-type"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](13,"input",38),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}function gd(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"section"),i["\u0275\u0275template"](1,ud,6,7,"section",12),i["\u0275\u0275template"](2,fd,11,2,"div",28),i["\u0275\u0275template"](3,hd,14,0,"section",12),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.isAdd),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!(n.isAdd&&n.entityForm.get("generateChecksum").value)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!n.isAdd)}}function bd(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error",5),i["\u0275\u0275text"](1," ota-update.direct-url-required "),i["\u0275\u0275elementEnd"]())}function vd(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"section",39),i["\u0275\u0275elementStart"](1,"mat-form-field",19),i["\u0275\u0275elementStart"](2,"mat-label",5),i["\u0275\u0275text"](3,"ota-update.direct-url"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"input",40),i["\u0275\u0275template"](5,bd,2,0,"mat-error",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("required",n.entityForm.get("isURL").value),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.entityForm.get("url").hasError("required")||n.entityForm.get("url").hasError("pattern"))}}var yd=function(e){return{"padding-bottom":e}},xd=function(e){function t(t,n,i,r,a,o){var l=e.call(this,t,a,i,r,o)||this;return l.store=t,l.translate=n,l.entityValue=i,l.entitiesTableConfigValue=r,l.fb=a,l.cd=o,l.destroy$=new m.b,l.checksumAlgorithms=Object.values(dr.a),l.checksumAlgorithmTranslationMap=dr.b,l.packageTypes=Object.values(dr.d),l.otaUpdateTypeTranslationMap=dr.e,l}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.isAdd&&(this.entityForm.get("isURL").valueChanges.pipe(Object(f.a)(this.destroy$)).subscribe(function(e){!1===e?(t.entityForm.get("url").clearValidators(),t.entityForm.get("file").setValidators(s.Validators.required),t.entityForm.get("url").updateValueAndValidity({emitEvent:!1}),t.entityForm.get("file").updateValueAndValidity({emitEvent:!1})):(t.entityForm.get("file").clearValidators(),t.entityForm.get("url").setValidators([s.Validators.required,s.Validators.pattern("(.|\\s)*\\S(.|\\s)*")]),t.entityForm.get("file").updateValueAndValidity({emitEvent:!1}),t.entityForm.get("url").updateValueAndValidity({emitEvent:!1}))}),Object(id.b)([this.entityForm.get("title").valueChanges.pipe(Object(rn.a)("")),this.entityForm.get("version").valueChanges.pipe(Object(rn.a)(""))]).pipe(Object(rd.a)(function(){return t.entityForm.get("tag").pristine}),Object(f.a)(this.destroy$)).subscribe(function(e){var n=(e[0]+" "+e[1]).trim();t.entityForm.get("tag").patchValue(n)}))},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.destroy$.next(),this.destroy$.complete()},t.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},t.prototype.buildForm=function(e){var t=this.fb.group({title:[e?e.title:"",[s.Validators.required,s.Validators.maxLength(255)]],version:[e?e.version:"",[s.Validators.required,s.Validators.maxLength(255)]],tag:[e?e.tag:"",[s.Validators.maxLength(255)]],type:[(null==e?void 0:e.type)?e.type:dr.d.FIRMWARE,s.Validators.required],deviceProfileId:[e?e.deviceProfileId:null,s.Validators.required],checksumAlgorithm:[e&&e.checksumAlgorithm?e.checksumAlgorithm:dr.a.SHA256],checksum:[e?e.checksum:"",s.Validators.maxLength(1020)],url:[e?e.url:""],isURL:[!1],additionalInfo:this.fb.group({description:[e&&e.additionalInfo?e.additionalInfo.description:""]})});return this.isAdd?(t.addControl("file",this.fb.control(null,s.Validators.required)),t.addControl("generateChecksum",this.fb.control(!0))):(t.addControl("fileName",this.fb.control(null)),t.addControl("dataSize",this.fb.control(null)),t.addControl("contentType",this.fb.control(null))),t},t.prototype.updateForm=function(e){this.entityForm.patchValue({title:e.title,version:e.version,tag:e.tag,type:e.type,deviceProfileId:e.deviceProfileId,checksumAlgorithm:e.checksumAlgorithm,checksum:e.checksum,fileName:e.fileName,dataSize:e.dataSize,contentType:e.contentType,url:e.url,isURL:Object(p.w)(e.url),additionalInfo:{description:e.additionalInfo?e.additionalInfo.description:""}}),!this.isAdd&&this.entityForm.enabled&&(this.entityForm.disable({emitEvent:!1}),this.entityForm.get("additionalInfo").enable({emitEvent:!1}))},t.prototype.onPackageIdCopied=function(){this.store.dispatch(new u.b({message:this.translate.instant("ota-update.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},t.prototype.onPackageChecksumCopied=function(){this.store.dispatch(new u.b({message:this.translate.instant("ota-update.checksum-copied-message"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},t.prototype.onPackageDirectUrlCopied=function(){this.store.dispatch(new u.b({message:this.translate.instant("ota-update.checksum-copied-message"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},t.prototype.prepareFormValue=function(t){return t.isURL?delete t.file:delete t.url,delete t.generateChecksum,e.prototype.prepareFormValue.call(this,t)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](g.TranslateService),i["\u0275\u0275directiveInject"]("entity"),i["\u0275\u0275directiveInject"]("entitiesTableConfig"),i["\u0275\u0275directiveInject"](s.FormBuilder),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-ota-update"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:56,vars:41,consts:[["fxLayout.xs","column",1,"tb-details-buttons"],["mat-raised-button","","color","accent","fxFlex.xs","",3,"disabled","fxShow","click"],["fxLayout","row","fxLayout.xs","column"],["mat-raised-button","","ngxClipboard","",3,"cbContent","fxShow","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"],["translate",""],["fxLayout","column","fxLayoutGap","8px",1,"mat-padding"],[3,"formGroup"],["fxLayout","column",3,"disabled"],["fxLayout","row","fxLayoutGap.gt-xs","8px","fxLayout.xs","column"],["fxFlex","45",1,"mat-block"],["matInput","","formControlName","title","type","text","required","",3,"readonly"],[4,"ngIf"],["fxFlex","",1,"mat-block"],["matInput","","formControlName","version","type","text","required","",3,"readonly"],["fxFlex","",1,"mat-block",2,"margin-bottom","8px"],["matInput","","formControlName","tag","type","text",3,"readonly"],["translate","",4,"ngIf"],["formControlName","deviceProfileId","required","",3,"ngStyle","hint","editProfileEnabled","addNewProfile","selectDefaultProfile"],[1,"mat-block"],["formControlName","type","required",""],[3,"value",4,"ngFor","ngForOf"],["style","margin-top: 8px",4,"ngIf"],["formGroupName","additionalInfo"],["matInput","","formControlName","description","rows","2"],[3,"value"],["translate","",1,"mat-caption",2,"margin","-8px 0 8px"],["formControlName","isURL","fxLayoutGap","16px"],["fxLayout","row","fxLayoutGap.gt-xs","8px","fxLayoutGap.sm","8px","fxLayout.xs","column","fxLayout.md","column",4,"ngIf"],["formControlName","file","workFromFileObj","true",3,"required","dropLabel"],["formControlName","generateChecksum",2,"margin-top","16px"],["fxLayout","row","fxLayoutGap.gt-xs","8px","fxLayoutGap.sm","8px","fxLayout.xs","column","fxLayout.md","column"],["fxFlex","33",1,"mat-block"],["formControlName","checksumAlgorithm"],["matInput","","formControlName","checksum","type","text"],["fxLayout","row","fxLayoutGap.gt-md","8px","fxLayoutGap.sm","8px","fxLayout.xs","column","fxLayout.md","column"],["matInput","","formControlName","fileName","type","text"],["matInput","","formControlName","dataSize","type","text"],["matInput","","formControlName","contentType","type","text"],[2,"margin-top","8px"],["matInput","","formControlName","url","type","text",3,"required"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"uploadPackage")}),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"delete")}),i["\u0275\u0275pipe"](6,"async"),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"div",2),i["\u0275\u0275elementStart"](10,"button",3),i["\u0275\u0275listener"]("cbOnSuccess",function(){return t.onPackageIdCopied()}),i["\u0275\u0275element"](11,"mat-icon",4),i["\u0275\u0275elementStart"](12,"span",5),i["\u0275\u0275text"](13,"ota-update.copyId"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"button",3),i["\u0275\u0275listener"]("cbOnSuccess",function(){return t.onPackageChecksumCopied()}),i["\u0275\u0275element"](15,"mat-icon",4),i["\u0275\u0275elementStart"](16,"span",5),i["\u0275\u0275text"](17,"ota-update.copy-checksum"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](18,"button",3),i["\u0275\u0275listener"]("cbOnSuccess",function(){return t.onPackageDirectUrlCopied()}),i["\u0275\u0275element"](19,"mat-icon",4),i["\u0275\u0275elementStart"](20,"span",5),i["\u0275\u0275text"](21,"ota-update.copy-direct-url"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"div",6),i["\u0275\u0275elementStart"](23,"form",7),i["\u0275\u0275elementStart"](24,"fieldset",8),i["\u0275\u0275pipe"](25,"async"),i["\u0275\u0275elementStart"](26,"div",9),i["\u0275\u0275elementStart"](27,"mat-form-field",10),i["\u0275\u0275elementStart"](28,"mat-label",5),i["\u0275\u0275text"](29,"ota-update.title"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](30,"input",11),i["\u0275\u0275template"](31,od,3,3,"mat-error",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](32,"mat-form-field",13),i["\u0275\u0275elementStart"](33,"mat-label",5),i["\u0275\u0275text"](34,"ota-update.version"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](35,"input",14),i["\u0275\u0275template"](36,ld,3,3,"mat-error",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](37,"mat-form-field",15),i["\u0275\u0275elementStart"](38,"mat-label",5),i["\u0275\u0275text"](39,"ota-update.version-tag"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](40,"input",16),i["\u0275\u0275template"](41,sd,2,0,"mat-hint",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](42,"tb-device-profile-autocomplete",18),i["\u0275\u0275elementStart"](43,"mat-form-field",19),i["\u0275\u0275elementStart"](44,"mat-label",5),i["\u0275\u0275text"](45,"ota-update.package-type"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](46,"mat-select",20),i["\u0275\u0275template"](47,dd,3,4,"mat-option",21),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](48,cd,10,8,"section",12),i["\u0275\u0275template"](49,gd,4,3,"section",12),i["\u0275\u0275template"](50,vd,6,2,"section",22),i["\u0275\u0275elementStart"](51,"div",23),i["\u0275\u0275elementStart"](52,"mat-form-field",19),i["\u0275\u0275elementStart"](53,"mat-label",5),i["\u0275\u0275text"](54,"ota-update.description"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](55,"textarea",24),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](2,29,t.isLoading$)||!(null!=t.entity&&t.entity.hasData&&(null==t.entity||!t.entity.url)))("fxShow",!t.isEdit),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](4,31,"ota-update.download")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](6,33,t.isLoading$))("fxShow",!t.hideDelete()&&!t.isEdit),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](8,35,"ota-update.delete")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("cbContent",null==t.entity||null==t.entity.id?null:t.entity.id.id)("fxShow",!t.isEdit),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("cbContent",null==t.entity?null:t.entity.checksum)("fxShow",!t.isEdit&&(null==t.entity?null:t.entity.checksum)),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("cbContent",null==t.entity?null:t.entity.url)("fxShow",!t.isEdit&&(null==t.entity?null:t.entity.url)),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("formGroup",t.entityForm),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](25,37,t.isLoading$)||!t.isEdit),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("readonly",!t.isAdd),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entityForm.get("title").hasError("required")),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("readonly",!t.isAdd),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entityForm.get("version").hasError("required")),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("readonly",!t.isAdd),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.isAdd),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction1"](39,yd,t.isAdd?"16px":0))("hint","ota-update.chose-compatible-device-profile")("editProfileEnabled",!1)("addNewProfile",!1)("selectDefaultProfile",!0),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngForOf",t.packageTypes),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.isAdd),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.entityForm.get("isURL").value),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.entityForm.get("isURL").value))},directives:[v.f,E.MatButton,v.b,Ie.d,on.a,we.MatIcon,g.TranslateDirective,v.g,s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,x.MatFormField,x.MatLabel,S.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,s.RequiredValidator,r.NgIf,pr.a,r.NgStyle,Ie.e,w.MatSelect,r.NgForOf,s.FormGroupName,x.MatError,x.MatHint,T.MatOption,ad.MatRadioGroup,ad.MatRadioButton,ln.a,D.MatCheckbox],pipes:[r.AsyncPipe,g.TranslatePipe],encapsulation:2}),t}(nn.a);0,void 0;var Sd=n("9DSm"),wd=function(){function e(e,t,n,i,r){var a=this;this.translate=e,this.datePipe=t,this.store=n,this.otaPackageService=i,this.fileSize=r,this.config=new Ht.e,this.config.entityType=$t.b.OTA_PACKAGE,this.config.entityComponent=xd,this.config.entityTranslations=$t.d.get($t.b.OTA_PACKAGE),this.config.entityResources=$t.c.get($t.b.OTA_PACKAGE),this.config.entityTitle=function(e){return e?e.title:""},this.config.columns.push(new Ht.b("createdTime","common.created-time",this.datePipe,"150px"),new Ht.d("title","ota-update.title","15%"),new Ht.d("version","ota-update.version","15%"),new Ht.d("tag","ota-update.version-tag","15%"),new Ht.d("type","ota-update.package-type","15%",function(e){return a.translate.instant(dr.e.get(e.type))}),new Ht.d("url","ota-update.direct-url","20%",function(e){return e.url?e.url.length>20?e.url.slice(0,20)+"\u2026":e.url:""},function(){return{}},!0,function(){return{}},function(){},!1,{name:this.translate.instant("ota-update.copy-direct-url"),icon:"content_paste",style:{"font-size":"16px",color:"rgba(0,0,0,.87)"},isEnabled:function(e){return!!e.url},onAction:function(e,t){return t.url},type:Ht.a.COPY_BUTTON}),new Ht.d("fileName","ota-update.file-name","20%"),new Ht.d("dataSize","ota-update.file-size","70px",function(e){return e.dataSize?a.fileSize.transform(e.dataSize):""}),new Ht.d("checksum","ota-update.checksum","220px",function(e){return e.checksum?a.checksumText(e):""},function(){return{}},!0,function(){return{}},function(){},!1,{name:this.translate.instant("ota-update.copy-checksum"),icon:"content_paste",style:{"font-size":"16px",color:"rgba(0,0,0,.87)"},isEnabled:function(e){return!!e.checksum},onAction:function(e,t){return t.checksum},type:Ht.a.COPY_BUTTON})),this.config.cellActionDescriptors.push({name:this.translate.instant("ota-update.download"),icon:"file_download",isEnabled:function(e){return e.hasData&&!e.url},onAction:function(e,t){return a.exportPackage(e,t)}}),this.config.deleteEntityTitle=function(e){return a.translate.instant("ota-update.delete-ota-update-title",{title:e.title})},this.config.deleteEntityContent=function(){return a.translate.instant("ota-update.delete-ota-update-text")},this.config.deleteEntitiesTitle=function(e){return a.translate.instant("ota-update.delete-ota-updates-title",{count:e})},this.config.deleteEntitiesContent=function(){return a.translate.instant("ota-update.delete-ota-updates-text")},this.config.entitiesFetchFunction=function(e){return a.otaPackageService.getOtaPackages(e)},this.config.loadEntity=function(e){return a.otaPackageService.getOtaPackageInfo(e.id)},this.config.saveEntity=function(e){return a.otaPackageService.saveOtaPackage(e)},this.config.deleteEntity=function(e){return a.otaPackageService.deleteOtaPackage(e.id)},this.config.onEntityAction=function(e){return a.onPackageAction(e)}}return e.prototype.resolve=function(){return this.config.tableTitle=this.translate.instant("ota-update.packages-repository"),this.config},e.prototype.exportPackage=function(e,t){e&&e.stopPropagation(),t.url?window.open(t.url,"_blank"):this.otaPackageService.downloadOtaPackage(t.id.id).subscribe()},e.prototype.checksumText=function(e){var t=dr.b.get(e.checksumAlgorithm)+": "+e.checksum;return t.length>20&&(t=t.slice(0,20)+"\u2026"),t},e.prototype.onPackageAction=function(e){switch(e.action){case"uploadPackage":return this.exportPackage(e.event,e.entity),!0}return!1},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](g.TranslateService),i["\u0275\u0275inject"](r.DatePipe),i["\u0275\u0275inject"](h.Store),i["\u0275\u0275inject"](nd.a),i["\u0275\u0275inject"](Sd.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0;var Cd=[{path:"otaUpdates",component:qt.a,data:{auth:[X.a.TENANT_ADMIN],title:"ota-update.ota-updates",breadcrumb:{label:"ota-update.ota-updates",icon:"memory"}},resolve:{entitiesTableConfig:wd}}],Ed=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[wd],imports:[[a.RouterModule.forChild(Cd)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](Ed,{imports:[a.RouterModule],exports:[a.RouterModule]})),0;var Id=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[r.CommonModule,vn.a,yn.a,Ed]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](Id,{declarations:[xd],imports:[r.CommonModule,vn.a,yn.a,Ed]})),0;var Td=n("8vcG"),Md=n("MGFw"),Dd=n("WtWf"),kd=n("2Vo4");var Ad=function(){this.__data__=[],this.size=0};var Fd=function(e,t){return e===t||e!=e&&t!=t};var Pd=function(e,t){for(var n=e.length;n--;)if(Fd(e[n][0],t))return n;return-1},_d=Array.prototype.splice;var Nd=function(e){var t=this.__data__,n=Pd(t,e);return!(n<0)&&(n==t.length-1?t.pop():_d.call(t,n,1),--this.size,!0)};var Ld=function(e){var t=this.__data__,n=Pd(t,e);return n<0?void 0:t[n][1]};var Od=function(e){return Pd(this.__data__,e)>-1};var Bd=function(e,t){var n=this.__data__,i=Pd(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this};function Rd(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Rd.prototype.clear=Ad,Rd.prototype.delete=Nd,Rd.prototype.get=Ld,Rd.prototype.has=Od,Rd.prototype.set=Bd;var jd=Rd;var Vd=function(){this.__data__=new jd,this.size=0};var zd=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var Gd=function(e){return this.__data__.get(e)};var Wd=function(e){return this.__data__.has(e)},qd=n("Ju5/"),Hd=qd.a.Symbol,Ud=Object.prototype,$d=Ud.hasOwnProperty,Kd=Ud.toString,Yd=Hd?Hd.toStringTag:void 0;var Jd=function(e){var t=$d.call(e,Yd),n=e[Yd];try{e[Yd]=void 0;var i=!0}catch(a){}var r=Kd.call(e);return i&&(t?e[Yd]=n:delete e[Yd]),r},Xd=Object.prototype.toString;var Qd=function(e){return Xd.call(e)},Zd=Hd?Hd.toStringTag:void 0;var ec=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Zd&&Zd in Object(e)?Jd(e):Qd(e)};var tc=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var nc,ic=function(e){if(!tc(e))return!1;var t=ec(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},rc=qd.a["__core-js_shared__"],ac=(nc=/[^.]+$/.exec(rc&&rc.keys&&rc.keys.IE_PROTO||""))?"Symbol(src)_1."+nc:"";var oc=function(e){return!!ac&&ac in e},lc=Function.prototype.toString;var sc=function(e){if(null!=e){try{return lc.call(e)}catch(t){}try{return e+""}catch(t){}}return""},dc=/^\[object .+?Constructor\]$/,cc=Function.prototype,uc=Object.prototype,pc=cc.toString,mc=uc.hasOwnProperty,fc=RegExp("^"+pc.call(mc).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var hc=function(e){return!(!tc(e)||oc(e))&&(ic(e)?fc:dc).test(sc(e))};var gc=function(e,t){return null==e?void 0:e[t]};var bc=function(e,t){var n=gc(e,t);return hc(n)?n:void 0},vc=bc(qd.a,"Map"),yc=bc(Object,"create");var xc=function(){this.__data__=yc?yc(null):{},this.size=0};var Sc=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},wc=Object.prototype.hasOwnProperty;var Cc=function(e){var t=this.__data__;if(yc){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return wc.call(t,e)?t[e]:void 0},Ec=Object.prototype.hasOwnProperty;var Ic=function(e){var t=this.__data__;return yc?void 0!==t[e]:Ec.call(t,e)};var Tc=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=yc&&void 0===t?"__lodash_hash_undefined__":t,this};function Mc(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Mc.prototype.clear=xc,Mc.prototype.delete=Sc,Mc.prototype.get=Cc,Mc.prototype.has=Ic,Mc.prototype.set=Tc;var Dc=Mc;var kc=function(){this.size=0,this.__data__={hash:new Dc,map:new(vc||jd),string:new Dc}};var Ac=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Fc=function(e,t){var n=e.__data__;return Ac(t)?n["string"==typeof t?"string":"hash"]:n.map};var Pc=function(e){var t=Fc(this,e).delete(e);return this.size-=t?1:0,t};var _c=function(e){return Fc(this,e).get(e)};var Nc=function(e){return Fc(this,e).has(e)};var Lc=function(e,t){var n=Fc(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this};function Oc(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Oc.prototype.clear=kc,Oc.prototype.delete=Pc,Oc.prototype.get=_c,Oc.prototype.has=Nc,Oc.prototype.set=Lc;var Bc=Oc;var Rc=function(e,t){var n=this.__data__;if(n instanceof jd){var i=n.__data__;if(!vc||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Bc(i)}return n.set(e,t),this.size=n.size,this};function jc(e){var t=this.__data__=new jd(e);this.size=t.size}jc.prototype.clear=Vd,jc.prototype.delete=zd,jc.prototype.get=Gd,jc.prototype.has=Wd,jc.prototype.set=Rc;var Vc=jc;var zc=function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e},Gc=function(){try{var e=bc(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();var Wc=function(e,t,n){"__proto__"==t&&Gc?Gc(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},qc=Object.prototype.hasOwnProperty;var Hc=function(e,t,n){var i=e[t];qc.call(e,t)&&Fd(i,n)&&(void 0!==n||t in e)||Wc(e,t,n)};var Uc=function(e,t,n,i){var r=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var l=t[a],s=i?i(n[l],e[l],l,n,e):void 0;void 0===s&&(s=e[l]),r?Wc(n,l,s):Hc(n,l,s)}return n};var $c=function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i};var Kc=function(e){return null!=e&&"object"==typeof e};var Yc=function(e){return Kc(e)&&"[object Arguments]"==ec(e)},Jc=Object.prototype,Xc=Jc.hasOwnProperty,Qc=Jc.propertyIsEnumerable,Zc=Yc(function(){return arguments}())?Yc:function(e){return Kc(e)&&Xc.call(e,"callee")&&!Qc.call(e,"callee")},eu=Array.isArray,tu=n("WOAq"),nu=/^(?:0|[1-9]\d*)$/;var iu=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&nu.test(e))&&e>-1&&e%1==0&&e<t};var ru=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},au={};au["[object Float32Array]"]=au["[object Float64Array]"]=au["[object Int8Array]"]=au["[object Int16Array]"]=au["[object Int32Array]"]=au["[object Uint8Array]"]=au["[object Uint8ClampedArray]"]=au["[object Uint16Array]"]=au["[object Uint32Array]"]=!0,au["[object Arguments]"]=au["[object Array]"]=au["[object ArrayBuffer]"]=au["[object Boolean]"]=au["[object DataView]"]=au["[object Date]"]=au["[object Error]"]=au["[object Function]"]=au["[object Map]"]=au["[object Number]"]=au["[object Object]"]=au["[object RegExp]"]=au["[object Set]"]=au["[object String]"]=au["[object WeakMap]"]=!1;var ou=function(e){return Kc(e)&&ru(e.length)&&!!au[ec(e)]};var lu=function(e){return function(t){return e(t)}},su=n("xutz"),du=su.a&&su.a.isTypedArray,cu=du?lu(du):ou,uu=Object.prototype.hasOwnProperty;var pu=function(e,t){var n=eu(e),i=!n&&Zc(e),r=!n&&!i&&Object(tu.a)(e),a=!n&&!i&&!r&&cu(e),o=n||i||r||a,l=o?$c(e.length,String):[],s=l.length;for(var d in e)!t&&!uu.call(e,d)||o&&("length"==d||r&&("offset"==d||"parent"==d)||a&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||iu(d,s))||l.push(d);return l},mu=Object.prototype;var fu=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||mu)};var hu=function(e,t){return function(n){return e(t(n))}},gu=hu(Object.keys,Object),bu=Object.prototype.hasOwnProperty;var vu=function(e){if(!fu(e))return gu(e);var t=[];for(var n in Object(e))bu.call(e,n)&&"constructor"!=n&&t.push(n);return t};var yu=function(e){return null!=e&&ru(e.length)&&!ic(e)};var xu=function(e){return yu(e)?pu(e):vu(e)};var Su=function(e,t){return e&&Uc(t,xu(t),e)};var wu=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},Cu=Object.prototype.hasOwnProperty;var Eu=function(e){if(!tc(e))return wu(e);var t=fu(e),n=[];for(var i in e)("constructor"!=i||!t&&Cu.call(e,i))&&n.push(i);return n};var Iu=function(e){return yu(e)?pu(e,!0):Eu(e)};var Tu=function(e,t){return e&&Uc(t,Iu(t),e)},Mu=n("3/ER");var Du=function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t};var ku=function(e,t){for(var n=-1,i=null==e?0:e.length,r=0,a=[];++n<i;){var o=e[n];t(o,n,e)&&(a[r++]=o)}return a};var Au=function(){return[]},Fu=Object.prototype.propertyIsEnumerable,Pu=Object.getOwnPropertySymbols,_u=Pu?function(e){return null==e?[]:(e=Object(e),ku(Pu(e),function(t){return Fu.call(e,t)}))}:Au;var Nu=function(e,t){return Uc(e,_u(e),t)};var Lu=function(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e},Ou=hu(Object.getPrototypeOf,Object),Bu=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Lu(t,_u(e)),e=Ou(e);return t}:Au;var Ru=function(e,t){return Uc(e,Bu(e),t)};var ju=function(e,t,n){var i=t(e);return eu(e)?i:Lu(i,n(e))};var Vu=function(e){return ju(e,xu,_u)};var zu=function(e){return ju(e,Iu,Bu)},Gu=bc(qd.a,"DataView"),Wu=bc(qd.a,"Promise"),qu=bc(qd.a,"Set"),Hu=bc(qd.a,"WeakMap"),Uu=sc(Gu),$u=sc(vc),Ku=sc(Wu),Yu=sc(qu),Ju=sc(Hu),Xu=ec;(Gu&&"[object DataView]"!=Xu(new Gu(new ArrayBuffer(1)))||vc&&"[object Map]"!=Xu(new vc)||Wu&&"[object Promise]"!=Xu(Wu.resolve())||qu&&"[object Set]"!=Xu(new qu)||Hu&&"[object WeakMap]"!=Xu(new Hu))&&(Xu=function(e){var t=ec(e),n="[object Object]"==t?e.constructor:void 0,i=n?sc(n):"";if(i)switch(i){case Uu:return"[object DataView]";case $u:return"[object Map]";case Ku:return"[object Promise]";case Yu:return"[object Set]";case Ju:return"[object WeakMap]"}return t});var Qu=Xu,Zu=Object.prototype.hasOwnProperty;var ep=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Zu.call(e,"index")&&(n.index=e.index,n.input=e.input),n},tp=qd.a.Uint8Array;var np=function(e){var t=new e.constructor(e.byteLength);return new tp(t).set(new tp(e)),t};var ip=function(e,t){var n=t?np(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},rp=/\w*$/;var ap=function(e){var t=new e.constructor(e.source,rp.exec(e));return t.lastIndex=e.lastIndex,t},op=Hd?Hd.prototype:void 0,lp=op?op.valueOf:void 0;var sp=function(e){return lp?Object(lp.call(e)):{}};var dp=function(e,t){var n=t?np(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};var cp=function(e,t,n){var i=e.constructor;switch(t){case"[object ArrayBuffer]":return np(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return ip(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return dp(e,n);case"[object Map]":return new i;case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return ap(e);case"[object Set]":return new i;case"[object Symbol]":return sp(e)}},up=Object.create,pp=function(){function e(){}return function(t){if(!tc(t))return{};if(up)return up(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();var mp=function(e){return"function"!=typeof e.constructor||fu(e)?{}:pp(Ou(e))};var fp=function(e){return Kc(e)&&"[object Map]"==Qu(e)},hp=su.a&&su.a.isMap,gp=hp?lu(hp):fp;var bp=function(e){return Kc(e)&&"[object Set]"==Qu(e)},vp=su.a&&su.a.isSet,yp=vp?lu(vp):bp,xp={};xp["[object Arguments]"]=xp["[object Array]"]=xp["[object ArrayBuffer]"]=xp["[object DataView]"]=xp["[object Boolean]"]=xp["[object Date]"]=xp["[object Float32Array]"]=xp["[object Float64Array]"]=xp["[object Int8Array]"]=xp["[object Int16Array]"]=xp["[object Int32Array]"]=xp["[object Map]"]=xp["[object Number]"]=xp["[object Object]"]=xp["[object RegExp]"]=xp["[object Set]"]=xp["[object String]"]=xp["[object Symbol]"]=xp["[object Uint8Array]"]=xp["[object Uint8ClampedArray]"]=xp["[object Uint16Array]"]=xp["[object Uint32Array]"]=!0,xp["[object Error]"]=xp["[object Function]"]=xp["[object WeakMap]"]=!1;var Sp=function e(t,n,i,r,a,o){var l,s=1&n,d=2&n,c=4&n;if(i&&(l=a?i(t,r,a,o):i(t)),void 0!==l)return l;if(!tc(t))return t;var u=eu(t);if(u){if(l=ep(t),!s)return Du(t,l)}else{var p=Qu(t),m="[object Function]"==p||"[object GeneratorFunction]"==p;if(Object(tu.a)(t))return Object(Mu.a)(t,s);if("[object Object]"==p||"[object Arguments]"==p||m&&!a){if(l=d||m?{}:mp(t),!s)return d?Ru(t,Tu(l,t)):Nu(t,Su(l,t))}else{if(!xp[p])return a?t:{};l=cp(t,p,s)}}o||(o=new Vc);var f=o.get(t);if(f)return f;o.set(t,l),yp(t)?t.forEach(function(r){l.add(e(r,n,i,r,t,o))}):gp(t)&&t.forEach(function(r,a){l.set(a,e(r,n,i,a,t,o))});var h=u?void 0:(c?d?zu:Vu:d?Iu:xu)(t);return zc(h||t,function(r,a){h&&(r=t[a=r]),Hc(l,a,e(r,n,i,a,t,o))}),l};var wp=function(e){return Sp(e,5)},Cp=n("MO+k"),Ep=[[255,99,132],[54,162,235],[255,206,86],[231,233,237],[75,192,192],[151,187,205],[220,220,220],[247,70,74],[70,191,189],[253,180,92],[148,159,177],[77,83,96]];function Ip(e,t,n){if("pie"===e||"doughnut"===e)return Dp(Fp(n));if("polarArea"===e)return{backgroundColor:(i=Fp(n)).map(function(e){return Tp(e,.6)}),borderColor:i.map(function(e){return Tp(e,1)}),hoverBackgroundColor:i.map(function(e){return Tp(e,.8)}),hoverBorderColor:i.map(function(e){return Tp(e,1)})};var i;if("line"===e||"radar"===e)return function(e){return{backgroundColor:Tp(e,.4),borderColor:Tp(e,1),pointBackgroundColor:Tp(e,1),pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:Tp(e,.8)}}(Ap(t));if("bar"===e||"horizontalBar"===e)return function(e){return{backgroundColor:Tp(e,.6),borderColor:Tp(e,1),hoverBackgroundColor:Tp(e,.8),hoverBorderColor:Tp(e,1)}}(Ap(t));if("bubble"===e)return Dp(Fp(n));if("scatter"===e)return Dp(Fp(n));throw new Error("getColors - Unsupported chart type: "+e)}function Tp(e,t){return"rgba("+e.concat(t).join(",")+")"}function Mp(e,t){return Math.floor(Math.random()*(t-e+1))+e}function Dp(e){return{backgroundColor:e.map(function(e){return Tp(e,.6)}),borderColor:e.map(function(){return"#fff"}),pointBackgroundColor:e.map(function(e){return Tp(e,1)}),pointBorderColor:e.map(function(){return"#fff"}),pointHoverBackgroundColor:e.map(function(e){return Tp(e,1)}),pointHoverBorderColor:e.map(function(e){return Tp(e,1)})}}function kp(){return[Mp(0,255),Mp(0,255),Mp(0,255)]}function Ap(e){return Ep[e]||kp()}function Fp(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=Ep[n]||kp();return t}var Pp=function(){function e(){Object(Md.a)(this,e),this.pColorschemesOptions={},this.colorschemesOptions=new kd.a({})}return Object(Dd.a)(e,[{key:"setColorschemesOptions",value:function(e){this.pColorschemesOptions=e,this.colorschemesOptions.next(e)}},{key:"getColorschemesOptions",value:function(){return this.pColorschemesOptions}}]),e}();Pp.\u0275fac=function(e){return new(e||Pp)},Pp.ctorParameters=function(){return[]},Pp.\u0275prov=Object(i["\u0275\u0275defineInjectable"])({factory:function(){return new Pp},token:Pp,providedIn:"root"}),0;var _p={Default:0,Update:1,Refresh:2};_p[_p.Default]="Default",_p[_p.Update]="Update",_p[_p.Refresh]="Refresh";var Np=function(){function e(t,n){Object(Md.a)(this,e),this.element=t,this.themeService=n,this.options={},this.chartClick=new i.EventEmitter,this.chartHover=new i.EventEmitter,this.old={dataExists:!1,dataLength:0,datasetsExists:!1,datasetsLength:0,datasetsDataObjects:[],datasetsDataLengths:[],colorsExists:!1,colors:[],labelsExist:!1,labels:[],legendExists:!1,legend:{}},this.subs=[]}return Object(Dd.a)(e,[{key:"ngOnInit",value:function(){var e=this;this.ctx=this.element.nativeElement.getContext("2d"),this.refresh(),this.subs.push(this.themeService.colorschemesOptions.subscribe(function(t){return e.themeChanged(t)}))}},{key:"themeChanged",value:function(e){this.refresh()}},{key:"ngDoCheck",value:function(){var e=this;if(this.chart){var t=_p.Default,n=function(e){t=e>t?e:t};switch(!!this.data!==this.old.dataExists&&(this.propagateDataToDatasets(this.data),this.old.dataExists=!!this.data,n(_p.Update)),this.data&&this.data.length!==this.old.dataLength&&(this.old.dataLength=this.data&&this.data.length||0,n(_p.Update)),!!this.datasets!==this.old.datasetsExists&&(this.old.datasetsExists=!!this.datasets,n(_p.Update)),this.datasets&&this.datasets.length!==this.old.datasetsLength&&(this.old.datasetsLength=this.datasets&&this.datasets.length||0,n(_p.Update)),this.datasets&&this.datasets.filter(function(t,n){return t.data!==e.old.datasetsDataObjects[n]}).length&&(this.old.datasetsDataObjects=this.datasets.map(function(e){return e.data}),n(_p.Update)),this.datasets&&this.datasets.filter(function(t,n){return t.data.length!==e.old.datasetsDataLengths[n]}).length&&(this.old.datasetsDataLengths=this.datasets.map(function(e){return e.data.length}),n(_p.Update)),!!this.colors!==this.old.colorsExists&&(this.old.colorsExists=!!this.colors,this.updateColors(),n(_p.Update)),this.colors&&this.colors.filter(function(t,n){return!e.colorsEqual(t,e.old.colors[n])}).length&&(this.old.colors=this.colors.map(function(t){return e.copyColor(t)}),this.updateColors(),n(_p.Update)),!!this.labels!==this.old.labelsExist&&(this.old.labelsExist=!!this.labels,n(_p.Update)),this.labels&&this.labels.filter(function(t,n){return!e.labelsEqual(t,e.old.labels[n])}).length&&(this.old.labels=this.labels.map(function(t){return e.copyLabel(t)}),n(_p.Update)),!!this.options.legend!==this.old.legendExists&&(this.old.legendExists=!!this.options.legend,n(_p.Refresh)),this.options.legend&&this.options.legend.position!==this.old.legend.position&&(this.old.legend.position=this.options.legend.position,n(_p.Refresh)),t){case _p.Default:break;case _p.Update:this.update();break;case _p.Refresh:this.refresh()}}}},{key:"copyLabel",value:function(e){return Array.isArray(e)?Object(Td.a)(e):e}},{key:"labelsEqual",value:function(e,t){return Array.isArray(e)===Array.isArray(t)&&(Array.isArray(e)||e===t)&&(!Array.isArray(e)||e.length===t.length)&&(!Array.isArray(e)||0===e.filter(function(e,n){return e!==t[n]}).length)}},{key:"copyColor",value:function(e){return{backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderColor:e.borderColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,pointBorderColor:e.pointBorderColor,pointBackgroundColor:e.pointBackgroundColor,pointBorderWidth:e.pointBorderWidth,pointRadius:e.pointRadius,pointHoverRadius:e.pointHoverRadius,pointHitRadius:e.pointHitRadius,pointHoverBackgroundColor:e.pointHoverBackgroundColor,pointHoverBorderColor:e.pointHoverBorderColor,pointHoverBorderWidth:e.pointHoverBorderWidth,pointStyle:e.pointStyle,hoverBackgroundColor:e.hoverBackgroundColor,hoverBorderColor:e.hoverBorderColor,hoverBorderWidth:e.hoverBorderWidth}}},{key:"colorsEqual",value:function(e,t){return!e==!t&&(!e||e.backgroundColor===t.backgroundColor&&e.borderWidth===t.borderWidth&&e.borderColor===t.borderColor&&e.borderCapStyle===t.borderCapStyle&&e.borderDash===t.borderDash&&e.borderDashOffset===t.borderDashOffset&&e.borderJoinStyle===t.borderJoinStyle&&e.pointBorderColor===t.pointBorderColor&&e.pointBackgroundColor===t.pointBackgroundColor&&e.pointBorderWidth===t.pointBorderWidth&&e.pointRadius===t.pointRadius&&e.pointHoverRadius===t.pointHoverRadius&&e.pointHitRadius===t.pointHitRadius&&e.pointHoverBackgroundColor===t.pointHoverBackgroundColor&&e.pointHoverBorderColor===t.pointHoverBorderColor&&e.pointHoverBorderWidth===t.pointHoverBorderWidth&&e.pointStyle===t.pointStyle&&e.hoverBackgroundColor===t.hoverBackgroundColor&&e.hoverBorderColor===t.hoverBorderColor&&e.hoverBorderWidth===t.hoverBorderWidth)}},{key:"updateColors",value:function(){var e=this;this.datasets.forEach(function(t,n){e.colors&&e.colors[n]?Object.assign(t,e.colors[n]):Object.assign(t,Ip(e.chartType,n,t.data.length),Object.assign({},t))})}},{key:"ngOnChanges",value:function(e){var t=_p.Default,n=function(e){t=e>t?e:t};switch(e.hasOwnProperty("data")&&e.data.currentValue&&(this.propagateDataToDatasets(e.data.currentValue),n(_p.Update)),e.hasOwnProperty("datasets")&&e.datasets.currentValue&&(this.propagateDatasetsToData(e.datasets.currentValue),n(_p.Update)),e.hasOwnProperty("labels")&&(this.chart&&(this.chart.data.labels=e.labels.currentValue),n(_p.Update)),e.hasOwnProperty("legend")&&(this.chart&&(this.chart.config.options.legend.display=e.legend.currentValue,this.chart.generateLegend()),n(_p.Update)),e.hasOwnProperty("options")&&n(_p.Refresh),t){case _p.Update:this.update();break;case _p.Refresh:case _p.Default:this.refresh()}}},{key:"ngOnDestroy",value:function(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"update",value:function(e){if(this.chart)return this.chart.update(e)}},{key:"hideDataset",value:function(e,t){this.chart.getDatasetMeta(e).hidden=t,this.chart.update()}},{key:"isDatasetHidden",value:function(e){return this.chart.getDatasetMeta(e).hidden}},{key:"toBase64Image",value:function(){return this.chart.toBase64Image()}},{key:"getChartConfiguration",value:function(){var e=this,t=this.getDatasets(),n=Object.assign({},this.options);!1===this.legend&&(n.legend={display:!1}),n.hover=n.hover||{},n.hover.onHover||(n.hover.onHover=function(t,n){n&&!n.length||e.chartHover.emit({event:t,active:n})}),n.onClick||(n.onClick=function(t,n){e.chartClick.emit({event:t,active:n})});var i=this.smartMerge(n,this.themeService.getColorschemesOptions());return{type:this.chartType,data:{labels:this.labels||[],datasets:t},plugins:this.plugins,options:i}}},{key:"getChartBuilder",value:function(e){var t=this.getChartConfiguration();return new Cp.Chart(e,t)}},{key:"smartMerge",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;0===i&&(e=wp(e));var r=Object.keys(t);if(r.forEach(function(r){if(Array.isArray(t[r])){var a=e[r];a&&a.forEach(function(e){n.smartMerge(e,t[r][0],i+1)})}else"object"==typeof t[r]?(r in e||(e[r]={}),n.smartMerge(e[r],t[r],i+1)):e[r]=t[r]}),0===i)return e}},{key:"isMultiLineLabel",value:function(e){return Array.isArray(e)}},{key:"joinLabel",value:function(e){return e?this.isMultiLineLabel(e)?e.join(" "):e:null}},{key:"propagateDatasetsToData",value:function(e){this.data=this.datasets.map(function(e){return e.data}),this.chart&&(this.chart.data.datasets=e),this.updateColors()}},{key:"propagateDataToDatasets",value:function(e){var t=this;this.isMultiDataSet(e)?this.datasets&&e.length===this.datasets.length?this.datasets.forEach(function(t,n){t.data=e[n]}):(this.datasets=e.map(function(e,n){return{data:e,label:t.joinLabel(t.labels[n])||"Label ".concat(n)}}),this.chart&&(this.chart.data.datasets=this.datasets)):this.datasets?(this.datasets[0]||(this.datasets[0]={}),this.datasets[0].data=e,this.datasets.splice(1)):(this.datasets=[{data:e}],this.chart&&(this.chart.data.datasets=this.datasets)),this.updateColors()}},{key:"isMultiDataSet",value:function(e){return Array.isArray(e[0])}},{key:"getDatasets",value:function(){if(!this.datasets&&!this.data)throw new Error("ng-charts configuration error, data or datasets field are required to render chart ".concat(this.chartType));return this.datasets?(this.propagateDatasetsToData(this.datasets),this.datasets):this.data?(this.propagateDataToDatasets(this.data),this.datasets):void 0}},{key:"refresh",value:function(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.ctx&&(this.chart=this.getChartBuilder(this.ctx))}}],[{key:"registerPlugin",value:function(e){Cp.pluginService.register(e)}},{key:"unregisterPlugin",value:function(e){Cp.pluginService.unregister(e)}}]),e}();Np.\u0275fac=function(e){return new(e||Np)(i["\u0275\u0275directiveInject"](i.ElementRef),i["\u0275\u0275directiveInject"](Pp))},Np.\u0275dir=i["\u0275\u0275defineDirective"]({type:Np,selectors:[["canvas","baseChart",""]],inputs:{options:"options",data:"data",datasets:"datasets",labels:"labels",chartType:"chartType",colors:"colors",legend:"legend",plugins:"plugins"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[i["\u0275\u0275NgOnChangesFeature"]]}),Np.ctorParameters=function(){return[{type:i.ElementRef},{type:Pp}]},Np.propDecorators={data:[{type:i.Input}],datasets:[{type:i.Input}],labels:[{type:i.Input}],options:[{type:i.Input}],chartType:[{type:i.Input}],colors:[{type:i.Input}],legend:[{type:i.Input}],plugins:[{type:i.Input}],chartClick:[{type:i.Output}],chartHover:[{type:i.Output}]},0;var Lp=function e(){Object(Md.a)(this,e)};function Op(){if("undefined"==typeof Chart)return console.log("Chart not defined (guessing this is a universal build, and I don't know why this happens -- Aviad)"),void 0;var e=Chart.plugins.getAll().filter(function(e){return"legend"===e.id})[0];e._element.prototype.fit=function(){var e=this,n=e.options,i=n.labels,a=n.display,o=e.ctx,l=t.options._parseFont(i),s=l.size,d=e.legendHitBoxes=[],c=e.minSize,u=e.isHorizontal();u?(c.width=e.maxWidth,c.height=a?10:0):(c.width=a?10:0,c.height=e.maxHeight);var p=function(e){return e.map(function(e){return o.measureText(e).width}).reduce(function(e,t){return t>e?t:e},0)};if(a)if(o.font=l.string,u){var m=e.lineWidths=[0],f=e.lineHeights=[],h=0,g=0;o.textAlign="left",o.textBaseline="top",t.each(e.legendItems,function(e,n){var a,l;t.isArray(e.text)?(a=p(e.text),l=s*e.text.length+i.padding):(a=o.measureText(e.text).width,l=s+i.padding),a+=r(i,s)+s/2,m[m.length-1]+a+2*i.padding>c.width&&(f.push(h),h=0,m[m.length-(n>0?0:1)]=0,g++),e.lineOrColumnIndex=g,l>h&&(h=l),d[n]={left:0,top:0,width:a,height:l},m[m.length-1]+=a+i.padding}),f.push(h),c.height+=f.reduce(function(e,t){return e+t},0)}else{var b=i.padding,v=e.columnWidths=[],y=e.columnHeights=[],x=i.padding,S=0,w=0,C=0;t.each(e.legendItems,function(e,n){var a,l;t.isArray(e.text)?(a=p(e.text),l=s*e.text.length):(a=o.measureText(e.text).width,l=s),a+=r(i,s)+s/2,w+s+2*b>c.height&&(x+=S+i.padding,v.push(S),y.push(w),S=0,w=0,C++),e.lineOrColumnIndex=C,S=Math.max(S,a),w+=l+b,d[n]={left:0,top:0,width:a,height:l}}),x+=S,v.push(S),y.push(w),c.width+=x}e.width=c.width,e.height=c.height},e._element.prototype.draw=function(){var e=this,a=e.options,o=a.labels,l=n.global,s=l.defaultColor,d=l.elements.line,c=e.height,u=e.columnHeights,p=e.columnWidths,m=e.width,f=e.lineWidths,h=e.lineHeights;if(a.display){var g,b=e.ctx,v=i(o.fontColor,l.defaultFontColor),y=t.options._parseFont(o),x=y.size;b.textAlign="left",b.textBaseline="middle",b.lineWidth=.5,b.strokeStyle=v,b.fillStyle=v,b.font=y.string;var S=r(o,x),w=e.legendHitBoxes,C=function(e,n,i,r){var a=x/2,o=S+a+e,l=n+a;t.isArray(i.text)?t.each(i.text,function(e,t){var n=t*x;b.fillText(e,o,l+n)}):b.fillText(i.text,o,l),i.hidden&&(t.isArray(i.text)?function(e,t,n,i){b.beginPath(),b.lineWidth=2,b.moveTo(e,t),b.lineTo(e+n,t+i),b.moveTo(e,t+i),b.lineTo(e+n,t),b.stroke()}(o,l,r,(i.text.length-1)*(x-1)):function(e,t,n){b.beginPath(),b.lineWidth=2,b.moveTo(e,t),b.lineTo(e+n,t),b.stroke()}(o,l,r))},E=function(e,t){switch(a.align){case"start":return o.padding;case"end":return e-t;default:return(e-t+o.padding)/2}},I=e.isHorizontal();g=I?{x:e.left+E(m,f[0]),y:e.top+o.padding,line:0}:{x:e.left+o.padding,y:e.top+E(c,u[0]),line:0},t.each(e.legendItems,function(n,r){var l,v,y;n.lineOrColumnIndex>g.line&&(I?(g.y+=h[g.line],g.line=n.lineOrColumnIndex,g.x=e.left+E(m,f[g.line])):(g.x+=p[g.line]+o.padding,g.line=n.lineOrColumnIndex,g.y=e.top+E(c,u[g.line]))),t.isArray(n.text)?(l=n.text.map(function(e){return b.measureText(e).width}).reduce(function(e,t){return t>e?t:e},0),y=x/2*(n.text.length-1),v=x*n.text.length):(l=b.measureText(n.text).width,y=0,v=x);var T=S+x/2+l,M=g.x,D=g.y,k=I?Math.trunc((h[g.line]-w[r].height)/2):0;!function(e,n,r){if(!(isNaN(S)||S<=0)){b.save();var o=i(r.lineWidth,d.borderWidth);if(b.fillStyle=i(r.fillStyle,s),b.lineCap=i(r.lineCap,d.borderCapStyle),b.lineDashOffset=i(r.lineDashOffset,d.borderDashOffset),b.lineJoin=i(r.lineJoin,d.borderJoinStyle),b.lineWidth=o,b.strokeStyle=i(r.strokeStyle,s),b.setLineDash&&b.setLineDash(i(r.lineDash,d.borderDash)),a.labels&&a.labels.usePointStyle){var l=S*Math.SQRT2/2,c=e+S/2,u=n+x/2;t.canvas.drawPoint(b,r.pointStyle,l,c,u)}else 0!==o&&b.strokeRect(e,n,S,x),b.fillRect(e,n,S,x);b.restore()}}(M,D+y+k,n),w[r].left=M,w[r].top=D,C(M,D+k,n,l),I?g.x+=T+o.padding:g.y+=v+o.padding})}};var t=Chart.helpers,n=Chart.defaults,i=t.valueOrDefault;function r(e,t){return e.usePointStyle&&e.boxWidth>t?t:e.boxWidth}}Lp.\u0275fac=function(e){return new(e||Lp)},Lp.\u0275mod=i["\u0275\u0275defineNgModule"]({type:Lp}),Lp.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[]]}),("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](Lp,{declarations:[Np],exports:[Np]}),0;var Bp=n("0EQZ"),Rp=n("mbhL"),jp=n("dj4w");function Vp(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"tr"),i["\u0275\u0275elementStart"](1,"td"),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"td"),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"td"),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"td"),i["\u0275\u0275text"](8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](n.command),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](n.codeCommand),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](n.order),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](n.schedule)}}function zp(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"tr"),i["\u0275\u0275elementStart"](1,"td"),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"td"),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"td"),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"td"),i["\u0275\u0275text"](8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](n.inputQuantity),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](n.completeQuantity),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",n.errorProduct,"%"),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("",n.error,"%")}}function Gp(e,t){1&e&&i["\u0275\u0275element"](0,"button",46)}function Wp(e,t){1&e&&i["\u0275\u0275element"](0,"button",47)}function qp(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",3),i["\u0275\u0275template"](1,Gp,1,0,"button",44),i["\u0275\u0275template"](2,Wp,1,0,"button",45),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!n)}}var Hp=function(){function e(e,t,n,i,r,a,o){var l=this;this.telemetryWsService=e,this.zone=t,this.attributeService=n,this.translate=i,this.fb=r,this.route=a,this.deviceService=o,this.doughnutChartLabels=["K\u1ebf ho\u1ea1ch","Th\u1eddi gian"],this.scheduleWithTimeDoughnutChart=[[112.15,83.16]],this.doughnutChartType="doughnut",this.barChartOptions={responsive:!0},this.barChartLabels=["C\u01101","C\u01102","C\u01103","C\u01104","C\u01105","C\u01106"],this.barChartType="bar",this.barChartLegend=!0,this.barChartPlugins=[],this.errorOfHourBarChart=[{data:[.2,.3,.4,.5,.4,.2],label:"S\u1ed1 l\u1ed7i c\xf4ng \u0111o\u1ea1n theo gi\u1edd"}],this.pieChartOptions={responsive:!0},this.pieChartLabels=[["C\u01101"],["C\u01102"],"C\u01103","C\u01104"],this.errorOfPartPieData=[10,20,30,40],this.errorOfDetailPieData=[10,20,30,40],this.pieChartType="pie",this.pieChartLegend=!0,this.pieChartPlugins=[],this.attributeScope=xo.r,this.selection=new Bp.SelectionModel(!0,[]),this.mainData={name:"Dung",phone:"0917311594",age:32,nameDevice:"\u0110\xe8n LED Panel MQL 1046 2x2 CCT (Yankon-ENEREGETIC)",codeDevice:"0202002",commands:[{command:"399393",codeCommand:"858593dd",order:"Kh\xe1ch h\xe0ng Yankon",schechule:"2000"}],quantityErrors:[{inputQuantity:"1037",completeQuantity:"3233",errorProduct:20,error:30}],scheduleWithTime:[29,50],oee:"499429",time:Date.now(),status:[!0,!1,!0],timeStart:1634800745613,timeRunning:1634811780085,timeStop:1634870140942,averageProductivity:"100",speed:"2000",reliability:"oke",totalError:"199"},this.dashboardForm=this.fb.group({timeStart:[{value:"",disabled:!0}],timeRunning:[{value:"",disabled:!0}],timeStop:[{value:"",disabled:!0}],averageProductivity:[{value:"",disabled:!0}],speed:[{value:"",disabled:!0}],reliability:[{value:"",disabled:!0}],totalError:[{value:"",disabled:!0}]}),this.devices=[],this.dataSource=new jp.a(this.attributeService,this.telemetryWsService,this.zone,this.translate),this.dataSource.pageData$.subscribe(function(e){console.log("Device attributes: ",e),l.fetchData(e.data)}),function(){if("undefined"==typeof Chart)return console.log("Chart not defined (guessing this is a universal build, and I don't know why this happens -- Aviad)"),void 0;Chart.Tooltip.prototype.drawBody=function(n,i,r){var a,o=i.bodyFontSize,l=i.bodySpacing,s=i._bodyAlign,d=i.body,c=i.displayColors,u=i.labelColors,p=0,m=c?t(i,"left"):0;r.textAlign=s,r.textBaseline="top",r.font=e.fontString(o,i._bodyFontStyle,i._bodyFontFamily),n.x=t(i,s);var f=function(e){r.fillText(e,n.x+p,n.y),n.y+=o+l};r.fillStyle=i.bodyFontColor,e.each(i.beforeBody,f),p=c&&"right"!==s?"center"===s?o/2+1:o+2:0,e.each(d,function(t,l){a=i.labelTextColors[l],r.fillStyle=a,e.each(t.before,f),c&&(r.fillStyle=i.legendColorBackground,r.fillRect(m,n.y,o,o),r.lineWidth=1,r.strokeStyle=u[l].borderColor,r.strokeRect(m,n.y,o,o),r.fillStyle=u[l].backgroundColor,r.fillRect(m+1,n.y+1,o-2,o-2),r.fillStyle=a),e.each(t.lines,f),e.each(t.after,f)}),p=0,e.each(i.afterBody,f),n.y-=l};var e=Chart.helpers;function t(e,t){return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-e.xPadding:e.x+e.xPadding}}(),Op()}return e.prototype.ngOnInit=function(){var e=this;this.route.params.subscribe(function(t){console.log(t.id);var n=t.id,i={entityType:il.EntityType.ASSET,id:n};e.attributeService.getEntityAttributes(i,xo.d.SERVER_SCOPE,["deviceList"]).subscribe(function(t){e.devices=t[0].value,e.updateData(!0)})})},e.prototype.ngAfterViewInit=function(){this.updateData(!0)},e.prototype.fetchData=function(e){var t=this;e.forEach(function(e){switch(e.key){case"errorOfHour":t.errorOfHourBarChart[0].data=JSON.parse(e.value);break;case"errorOfPart":t.errorOfPartPieData=JSON.parse(e.value);break;case"errorOfDetail":t.errorOfDetailPieData=JSON.parse(e.value);break;case"scheduleWithTime":t.scheduleWithTimeDoughnutChart=JSON.parse(e.value);break;case"name":t.mainData.name=e.value;break;case"phone":t.mainData.phone=e.value;break;case"age":t.mainData.age=e.value;break;case"nameDevice":t.mainData.nameDevice=e.value;break;case"codeDevice":t.mainData.codeDevice=e.value;break;case"commands":t.commands=JSON.parse(e.value);break;case"quantityErrors":t.quantityErrors=JSON.parse(e.value);break;case"oee":t.mainData.oee=e.value;break;case"status":console.log("Status: ",e.value),t.status=JSON.parse(e.value);break;case"timeStart":t.dashboardForm.controls.timeStart.setValue(Object(r.formatDate)(e.value,"yyyy-MM-dd HH:mm:ss","en")),console.log("this.dashboardForm.value.timeStart: ",t.dashboardForm.value.timeStart);break;case"timeRunning":t.dashboardForm.controls.timeRunning.setValue(Object(r.formatDate)(e.value,"yyyy-MM-dd HH:mm:ss","en"));break;case"timeStop":t.dashboardForm.controls.timeStop.setValue(Object(r.formatDate)(e.value,"yyyy-MM-dd HH:mm:ss","en"));break;case"averageProductivity":t.dashboardForm.controls.averageProductivity.setValue(e.value);break;case"speed":t.dashboardForm.controls.speed.setValue(e.value);break;case"reliability":t.dashboardForm.controls.reliability.setValue(e.value);break;case"totalError":t.dashboardForm.controls.totalError.setValue(e.value)}})},e.prototype.updateData=function(e){var t=this;void 0===e&&(e=!1),this.pageLink=new Rp.b(50,0),this.devices.forEach(function(n){console.log("Device id",n.id),t.dataSource.loadAttributes(n.id,t.attributeScope.LATEST_TELEMETRY,t.pageLink,e)})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](nl.TelemetryWebsocketService),i["\u0275\u0275directiveInject"](i.NgZone),i["\u0275\u0275directiveInject"](nl.AttributeService),i["\u0275\u0275directiveInject"](g.TranslateService),i["\u0275\u0275directiveInject"](s.FormBuilder),i["\u0275\u0275directiveInject"](a.ActivatedRoute),i["\u0275\u0275directiveInject"](nl.DeviceService))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-device-dashboard"]],decls:163,vars:38,consts:[[1,"row","m-2"],[1,"col-3"],[1,"row"],[1,"col-4"],["src","/assets/dung.jpg","alt","logo",1,"img-fluid"],[1,"col-8"],["mat-icon-button","","color","primary","aria-label","view detail"],[1,"d-flex"],[1,"row","text-center"],[1,"col-6"],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon",1,"mat-success-button"],["mat-icon-button","","color","accent","aria-label","Example icon button with a vertical three dot icon"],["mat-icon-button","","color","warning","aria-label","Example icon button with a vertical three dot icon"],["mat-icon-button","","color","primary","aria-label","Example icon button with a vertical three dot icon"],[1,"text-center","mt-4"],[1,"chart-wrapper"],["baseChart","",3,"data","labels","chartType","options","plugins","legend"],[1,"text-center"],[1,"table","table-bordered","table-primary"],[1,"table-primary"],["colspan","2"],["colspan","2",1,"table-primary"],["rowspan","2"],[1,"table"],[4,"ngFor","ngForOf"],[1,"table-info"],["baseChart","",3,"data","labels","chartType"],["baseChart","",3,"datasets","labels","options","plugins","legend","chartType"],["src","/assets/rang-dong.jpeg","alt","rang dong",1,"img-fluid"],[1,"text-center","mt-2"],[1,"text-dan","ger"],["class","col-4",4,"ngFor","ngForOf"],[3,"formGroup"],["appearance","fill",1,"full-width-input","mt-2"],["matInput","","formControlName","timeStart"],["appearance","fill",1,"col-6"],["matInput","","formControlName","timeRunning","t",""],["matInput","","formControlName","timeStop"],["appearance","fill",1,"full-width-input"],["matInput","","formControlName","averageProductivity"],["matInput","","formControlName","speed"],["matInput","","formControlName","reliability"],["matInput","","formControlName","totalError"],["mat-raised-button","","color","success"],["color","success","mat-mini-fab","","aria-label","Example icon button with a plus one icon",4,"ngIf"],["color","accent","mat-mini-fab","","aria-label","Example icon button with a plus one icon",4,"ngIf"],["color","success","mat-mini-fab","","aria-label","Example icon button with a plus one icon"],["color","accent","mat-mini-fab","","aria-label","Example icon button with a plus one icon"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"div",0),i["\u0275\u0275elementStart"](2,"div",1),i["\u0275\u0275elementStart"](3,"div",2),i["\u0275\u0275elementStart"](4,"div",3),i["\u0275\u0275element"](5,"img",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",5),i["\u0275\u0275elementStart"](7,"div"),i["\u0275\u0275elementStart"](8,"button",6),i["\u0275\u0275elementStart"](9,"mat-icon"),i["\u0275\u0275text"](10,"assignment_ind"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"div",7),i["\u0275\u0275elementStart"](13,"button",6),i["\u0275\u0275elementStart"](14,"mat-icon"),i["\u0275\u0275text"](15,"phone"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"div",7),i["\u0275\u0275elementStart"](18,"button",6),i["\u0275\u0275elementStart"](19,"mat-icon"),i["\u0275\u0275text"](20,"person"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](21),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"div",8),i["\u0275\u0275elementStart"](23,"div",9),i["\u0275\u0275elementStart"](24,"button",10),i["\u0275\u0275elementStart"](25,"mat-icon"),i["\u0275\u0275text"](26,"play_arrow"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](27," Start "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](28,"div",9),i["\u0275\u0275elementStart"](29,"button",11),i["\u0275\u0275elementStart"](30,"mat-icon"),i["\u0275\u0275text"](31,"stop"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](32," Stop "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](33,"div",9),i["\u0275\u0275elementStart"](34,"button",12),i["\u0275\u0275elementStart"](35,"mat-icon"),i["\u0275\u0275text"](36,"replay"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](37," Reset "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](38,"div",9),i["\u0275\u0275elementStart"](39,"button",13),i["\u0275\u0275elementStart"](40,"mat-icon"),i["\u0275\u0275text"](41,"pause_circle_outline"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](42," Pause "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](43,"div",14),i["\u0275\u0275text"](44," T\u1ec9 l\u1ec7 l\u1ed7i theo c\xf4ng \u0111o\u1ea1n "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](45,"div",15),i["\u0275\u0275element"](46,"canvas",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](47,"div",14),i["\u0275\u0275text"](48," L\u1ed7i chi ti\u1ebft "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](49,"div",15),i["\u0275\u0275element"](50,"canvas",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](51,"div",9),i["\u0275\u0275elementStart"](52,"h2",17),i["\u0275\u0275text"](53,"D\xe2y truy\u1ec1n l\u1eafp r\xe1p s\u1ea3n ph\u1ea9m (#46)"),i["\u0275\u0275element"](54,"br"),i["\u0275\u0275text"](55,"Panel 01"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](56,"table",18),i["\u0275\u0275elementStart"](57,"tr",19),i["\u0275\u0275elementStart"](58,"th",19),i["\u0275\u0275text"](59,"T\xean s\u1ea3n ph\u1ea9m"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](60,"td",20),i["\u0275\u0275text"](61),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](62,"tr",19),i["\u0275\u0275elementStart"](63,"th",19),i["\u0275\u0275text"](64,"M\xe3 s\u1ea3n ph\u1ea9m"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](65,"td"),i["\u0275\u0275text"](66),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](67,"tr",19),i["\u0275\u0275elementStart"](68,"th",21),i["\u0275\u0275text"](69,"L\u01b0u \xfd khi s\u1ea3n xu\u1ea5t"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](70,"td",22),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](71,"table",23),i["\u0275\u0275elementStart"](72,"thead",19),i["\u0275\u0275elementStart"](73,"th"),i["\u0275\u0275text"](74,"S\u1ed1 l\u1ec7nh"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](75,"th"),i["\u0275\u0275text"](76,"S\u1ed1 l\xf4 "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](77,"th"),i["\u0275\u0275text"](78,"\u0110\u01a1n h\xe0ng"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](79,"th"),i["\u0275\u0275text"](80,"K\u1ebf ho\u1ea1ch"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](81,"tbody"),i["\u0275\u0275template"](82,Vp,9,4,"tr",24),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](83,"table",23),i["\u0275\u0275elementStart"](84,"thead",25),i["\u0275\u0275elementStart"](85,"th"),i["\u0275\u0275text"](86,"SL \u0111\u1ea7u v\xe0o"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](87,"th"),i["\u0275\u0275text"](88,"SL ho\xe0n th\xe0nh"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](89,"th"),i["\u0275\u0275text"](90,"T\u1ec9 l\u1ec7 l\u1ed7i V.T\u01b0"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](91,"th"),i["\u0275\u0275text"](92,"T\u1ec9 l\u1ec7 l\u1ed7i"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](93,"tbody"),i["\u0275\u0275template"](94,zp,9,4,"tr",24),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](95,"div",2),i["\u0275\u0275elementStart"](96,"div",9),i["\u0275\u0275elementStart"](97,"div",15),i["\u0275\u0275element"](98,"canvas",26),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](99,"div",9),i["\u0275\u0275elementStart"](100,"div",15),i["\u0275\u0275element"](101,"canvas",26),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](102,"div",15),i["\u0275\u0275element"](103,"canvas",27),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](104,"div",1),i["\u0275\u0275element"](105,"img",28),i["\u0275\u0275elementStart"](106,"div",29),i["\u0275\u0275text"](107),i["\u0275\u0275pipe"](108,"date"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](109,"div"),i["\u0275\u0275text"](110,"OEE: "),i["\u0275\u0275elementStart"](111,"span",30),i["\u0275\u0275text"](112),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](113,"div"),i["\u0275\u0275text"](114,"Tr\u1ea1ng th\xe1i:"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](115,"hr"),i["\u0275\u0275elementStart"](116,"div",8),i["\u0275\u0275template"](117,qp,3,2,"div",31),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](118,"form",32),i["\u0275\u0275elementStart"](119,"mat-form-field",33),i["\u0275\u0275elementStart"](120,"mat-label"),i["\u0275\u0275text"](121,"Th\u1eddi gian b\u1eaft \u0111\u1ea7u s\u1ea3n xu\u1ea5t"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](122,"input",34),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](123,"div",2),i["\u0275\u0275elementStart"](124,"mat-form-field",35),i["\u0275\u0275elementStart"](125,"mat-label"),i["\u0275\u0275text"](126,"Th\u1eddi gian ch\u1ea1y m\xe1y"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](127,"input",36),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](128,"mat-form-field",35),i["\u0275\u0275elementStart"](129,"mat-label"),i["\u0275\u0275text"](130,"D\u1eebng m\xe1y"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](131,"input",37),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](132,"mat-form-field",38),i["\u0275\u0275elementStart"](133,"mat-label"),i["\u0275\u0275text"](134,"N\u0103ng su\u1ea5t b\xecnh qu\xe2n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](135,"input",39),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](136,"mat-form-field",38),i["\u0275\u0275elementStart"](137,"mat-label"),i["\u0275\u0275text"](138,"T\u1ed1c \u0111\u1ed9 chuy\u1ec1n (b\u01b0\u1edbc/t\u1ed5ng gi\u1edd)"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](139,"input",40),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](140,"mat-form-field",38),i["\u0275\u0275elementStart"](141,"mat-label"),i["\u0275\u0275text"](142,"\u0110\u1ed9 tin c\u1eady"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](143,"input",41),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](144,"mat-form-field",38),i["\u0275\u0275elementStart"](145,"mat-label"),i["\u0275\u0275text"](146,"T\u1ed5ng l\u1ed7i"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](147,"input",42),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](148,"div"),i["\u0275\u0275text"](149,"L\u1ed7i v\u01b0\u1ee3t \u0111\u1ecbnh m\u1ee9c"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](150,"div",7),i["\u0275\u0275elementStart"](151,"button",43),i["\u0275\u0275text"](152,"1"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](153,"button",43),i["\u0275\u0275text"](154,"2"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](155,"button",43),i["\u0275\u0275text"](156,"3"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](157,"button",43),i["\u0275\u0275text"](158,"4"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](159,"button",43),i["\u0275\u0275text"](160,"5"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](161,"div"),i["\u0275\u0275text"](162,"Click here"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](11),i["\u0275\u0275textInterpolate1"](" ",t.mainData.name," "),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate1"](" ",t.mainData.phone," "),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate1"](" ",t.mainData.age," "),i["\u0275\u0275advance"](25),i["\u0275\u0275property"]("data",t.errorOfPartPieData)("labels",t.pieChartLabels)("chartType",t.pieChartType)("options",t.pieChartOptions)("plugins",t.pieChartPlugins)("legend",t.pieChartLegend),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("data",t.errorOfDetailPieData)("labels",t.pieChartLabels)("chartType",t.pieChartType)("options",t.pieChartOptions)("plugins",t.pieChartPlugins)("legend",t.pieChartLegend),i["\u0275\u0275advance"](11),i["\u0275\u0275textInterpolate"](t.mainData.nameDevice),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](t.mainData.codeDevice),i["\u0275\u0275advance"](16),i["\u0275\u0275property"]("ngForOf",t.commands),i["\u0275\u0275advance"](12),i["\u0275\u0275property"]("ngForOf",t.quantityErrors),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("data",t.scheduleWithTimeDoughnutChart)("labels",t.doughnutChartLabels)("chartType",t.doughnutChartType),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("data",t.scheduleWithTimeDoughnutChart)("labels",t.doughnutChartLabels)("chartType",t.doughnutChartType),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("datasets",t.errorOfHourBarChart)("labels",t.barChartLabels)("options",t.barChartOptions)("plugins",t.barChartPlugins)("legend",t.barChartLegend)("chartType",t.barChartType),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind2"](108,35,t.mainData.time,"dd/MM/yyyy")),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](t.mainData.oee),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngForOf",t.status),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("formGroup",t.dashboardForm))},directives:[E.MatButton,we.MatIcon,Np,r.NgForOf,s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,x.MatFormField,x.MatLabel,S.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,r.NgIf],pipes:[r.DatePipe],styles:[".tb-widget[_ngcontent-%COMP%]   .tb-widget-error[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:hsla(0,0%,100%,.5)}.tb-widget[_ngcontent-%COMP%]   .tb-widget-error[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:red}.tb-widget[_ngcontent-%COMP%]   .tb-widget-no-data[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:hsla(0,0%,100%,.75)}.tb-widget[_ngcontent-%COMP%]   .tb-widget-no-data[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000;text-align:center}.tb-widget[_ngcontent-%COMP%]   .tb-widget-loading[_ngcontent-%COMP%]{z-index:3;background:hsla(0,0%,100%,.15)}.tb-widget[_ngcontent-%COMP%]   .tb-widget-error-container[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background-color:#fff}.tb-widget[_ngcontent-%COMP%]   .tb-widget-error-msg[_ngcontent-%COMP%]{padding:5px;font-size:16px;color:red;word-wrap:break-word}.tb-widget[_ngcontent-%COMP%]   #widget-container[_ngcontent-%COMP%]{min-height:0;min-width:0}.tb-widget[_ngcontent-%COMP%]   #widget-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.tb-widget[_ngcontent-%COMP%]   #widget-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]::-moz-selection{background-color:transparent}.tb-widget[_ngcontent-%COMP%]   #widget-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]::-moz-selection, .tb-widget[_ngcontent-%COMP%]   #widget-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]::selection{background-color:transparent}.mat-success[_ngcontent-%COMP%]{background-color:green;color:#fff}.mat-success-button[_ngcontent-%COMP%]{color:green}.mat-warning[_ngcontent-%COMP%]{color:orange}.full-width-input[_ngcontent-%COMP%]{width:100%}"]}),e}();0,void 0;var Up=n("Bjlt"),$p=n("BsGH"),Kp=n("/1cH");function Yp(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-icon",30),i["\u0275\u0275text"](1,"cancel"),i["\u0275\u0275elementEnd"]())}function Jp(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-chip",28),i["\u0275\u0275listener"]("removed",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"]().remove(e,1)}),i["\u0275\u0275text"](1),i["\u0275\u0275template"](2,Yp,2,0,"mat-icon",29),i["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("selectable",a.selectable)("removable",a.removable),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",r," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.removable)}}function Xp(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",31),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275property"]("value",n.name),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function Qp(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-icon",30),i["\u0275\u0275text"](1,"cancel"),i["\u0275\u0275elementEnd"]())}function Zp(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-chip",28),i["\u0275\u0275listener"]("removed",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"]().remove(e,2)}),i["\u0275\u0275text"](1),i["\u0275\u0275template"](2,Qp,2,0,"mat-icon",29),i["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("selectable",a.selectable)("removable",a.removable),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",r," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.removable)}}function em(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",31),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275property"]("value",n.name),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function tm(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",32),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().add()}),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"action.add")))}function nm(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",32),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().update()}),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"action.update")))}var im=function(){function e(e,t,n,i,r,a){this.dialogRef=e,this.data=t,this.fb=n,this.deviceService=i,this.attributeService=r,this.assetService=a,this.deviceForm=this.fb.group({name:["edit"==this.data.type?this.data.element.element.name:""],codeMachine:["edit"==this.data.type?this.data.element.element.label:""],serial:["edit"==this.data.type?this.data.element.serial:""],entityType:["edit"==this.data.type?this.data.element.element.type:""],machineList:["edit"==this.data.type?this.data.element.machineList:""],plcList:["edit"==this.data.type?this.data.element.plcList:""]}),this.machines=this.data.element.machineList?this.data.element.machineList:[],this.plcs=this.data.element.plcList?this.data.element.plcList:[],this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.pageLink=new il.PageLink(50,0)}return e.prototype.ngOnInit=function(){this.getAllAssetByType("machine"),this.getAllAssetByType("plc")},e.prototype.cancel=function(){this.dialogRef.close()},e.prototype.getAllAssetByType=function(e){var t=this;this.assetService.getTenantAssetInfos(this.pageLink,e).subscribe(function(n){"machine"==e?t.machineAll=n.data:t.plcAll=n.data})},e.prototype.add=function(){var e=this;console.log(this.deviceForm);var t={name:this.deviceForm.value.name,type:this.deviceForm.value.entityType,label:this.deviceForm.value.codeMachine};this.deviceService.saveDevice(t).subscribe(function(t){console.log("Device: ",t);var n=[{key:"machineList",value:e.machines},{key:"plcList",value:e.plcs},{key:"serial",value:e.deviceForm.value.serial}];e.attributeService.saveEntityAttributes(t.id,xo.d.SERVER_SCOPE,n).subscribe(function(t){console.log("attribute: ",t),e.deviceService.filter("Add device"),e.dialogRef.close()})})},e.prototype.update=function(){var e=this,t=this.data.element.element;t.name=this.deviceForm.value.name,t.type=this.deviceForm.value.entityType,t.label=this.deviceForm.value.codeMachine,this.deviceService.saveDevice(t).subscribe(function(t){var n=[{key:"machineList",value:e.machines},{key:"plcList",value:e.plcs},{key:"serial",value:e.deviceForm.value.serial}];e.attributeService.saveEntityAttributes(t.id,xo.d.SERVER_SCOPE,n).subscribe(function(t){console.log("attribute: ",t),e.deviceService.filter("Update device"),e.dialogRef.close()})})},e.prototype.remove=function(e,t){var n;1==t?(n=this.machines.indexOf(e))>=0&&this.machines.splice(n,1):(n=this.plcs.indexOf(e))>=0&&this.plcs.splice(n,1)},e.prototype.selected=function(e,t){console.log(this.machines),1==t?this.machines.includes(e.option.viewValue)||this.machines.push(e.option.viewValue):this.plcs.includes(e.option.viewValue)||this.plcs.push(e.option.viewValue)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](Ct.MatDialogRef),i["\u0275\u0275directiveInject"](Ct.MAT_DIALOG_DATA),i["\u0275\u0275directiveInject"](s.FormBuilder),i["\u0275\u0275directiveInject"](Qr.a),i["\u0275\u0275directiveInject"]($p.a),i["\u0275\u0275directiveInject"](nl.AssetService))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-device-management-dialog"]],decls:44,vars:17,consts:[["color","accent"],["translate",""],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],[1,"example-form",3,"formGroup"],[1,"example-full-width"],["matInput","","placeholder","T\xean thi\u1ebft b\u1ecb","formControlName","name"],["matInput","","placeholder","M\xe3 thi\u1ebft b\u1ecb","formControlName","codeMachine"],["matInput","","placeholder","Serial","formControlName","serial"],["matInput","","placeholder","Entity type","formControlName","entityType"],["aria-label","machine selection","formControlName","machineList"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","Danh s\xe1ch machine","matAutocompleteOrigin","",3,"matAutocomplete","matAutocompleteConnectedTo","matChipInputFor"],["machineInput","","origin","matAutocompleteOrigin"],[1,"tb-autocomplete",3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["aria-label","Plc selection","formControlName","plcList"],["chipList1",""],["placeholder","Danh s\xe1ch plc","matAutocompleteOrigin","",3,"matAutocomplete","matAutocompleteConnectedTo","matChipInputFor"],["plcInput","","origin1","matAutocompleteOrigin"],["auto1","matAutocomplete"],["mat-dialog-actions","","fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","end"],["mat-button","",3,"click"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[3,"value"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mat-toolbar",0),i["\u0275\u0275elementStart"](2,"h2",1),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"span",2),i["\u0275\u0275elementStart"](5,"button",3),i["\u0275\u0275listener"]("click",function(){return t.cancel()}),i["\u0275\u0275elementStart"](6,"mat-icon",4),i["\u0275\u0275text"](7,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"div",5),i["\u0275\u0275elementStart"](9,"form",6),i["\u0275\u0275elementStart"](10,"mat-form-field",7),i["\u0275\u0275element"](11,"input",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"mat-form-field",7),i["\u0275\u0275element"](13,"input",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"mat-form-field",7),i["\u0275\u0275element"](15,"input",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"mat-form-field",7),i["\u0275\u0275element"](17,"input",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](18,"mat-form-field",7),i["\u0275\u0275elementStart"](19,"mat-chip-list",12,13),i["\u0275\u0275template"](21,Jp,3,4,"mat-chip",14),i["\u0275\u0275element"](22,"input",15,16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](25,"mat-autocomplete",17,18),i["\u0275\u0275listener"]("optionSelected",function(e){return t.selected(e,1)}),i["\u0275\u0275template"](27,Xp,2,2,"mat-option",19),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](28,"mat-form-field",7),i["\u0275\u0275elementStart"](29,"mat-chip-list",20,21),i["\u0275\u0275template"](31,Zp,3,4,"mat-chip",14),i["\u0275\u0275element"](32,"input",22,23),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](35,"mat-autocomplete",17,24),i["\u0275\u0275listener"]("optionSelected",function(e){return t.selected(e,2)}),i["\u0275\u0275template"](37,em,2,2,"mat-option",19),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](38,"div",25),i["\u0275\u0275elementStart"](39,"button",26),i["\u0275\u0275listener"]("click",function(){return t.cancel()}),i["\u0275\u0275text"](40),i["\u0275\u0275pipe"](41,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](42,tm,3,3,"button",27),i["\u0275\u0275template"](43,nm,3,3,"button",27),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](20),r=i["\u0275\u0275reference"](24),a=i["\u0275\u0275reference"](26),o=i["\u0275\u0275reference"](30),l=i["\u0275\u0275reference"](34),s=i["\u0275\u0275reference"](36);i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"]("add"==t.data.type?"Add device":t.data.element.element.name),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("formGroup",t.deviceForm),i["\u0275\u0275advance"](12),i["\u0275\u0275property"]("ngForOf",t.machines),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("matAutocomplete",a)("matAutocompleteConnectedTo",r)("matChipInputFor",n),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngForOf",t.machineAll),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngForOf",t.plcs),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("matAutocomplete",s)("matAutocompleteConnectedTo",l)("matChipInputFor",o),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngForOf",t.plcAll),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](41,15,"action.cancel")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf","add"==t.data.type),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","edit"==t.data.type)}},directives:[It.MatToolbar,g.TranslateDirective,v.b,E.MatButton,we.MatIcon,Ct.MatDialogContent,s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,x.MatFormField,S.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,Te.MatChipList,r.NgForOf,Kp.MatAutocompleteTrigger,Te.MatChipInput,Kp.MatAutocompleteOrigin,Kp.MatAutocomplete,Ct.MatDialogActions,v.f,v.g,v.e,r.NgIf,Te.MatChip,Te.MatChipRemove,T.MatOption],pipes:[g.TranslatePipe],styles:[""]}),e}();0,void 0;var rm=function(){function e(e,t,n,i){this.dialogRef=e,this.data=t,this.deviceService=n,this.attributeService=i}return e.prototype.ngOnInit=function(){},e.prototype.cancel=function(){this.dialogRef.close()},e.prototype.delete=function(){var e=this;console.log(this.data);var t=[];this.data.element.machineList.length>0&&t.push({key:"machineList",value:this.data.element.machineList}),this.data.element.plcList.length>0&&t.push({key:"plcList",value:this.data.element.plcList}),""!=this.data.element.serial&&t.push({key:"serial",value:this.data.element.serial}),t.length>0&&this.attributeService.deleteEntityAttributes(this.data.element.element.id,xo.d.SERVER_SCOPE,t).subscribe(function(t){e.deviceService.filter("Delete Device"),e.dialogRef.close()}),this.deviceService.deleteDevice(this.data.element.element.id.id).subscribe(function(t){e.deviceService.filter("Delete Device"),e.dialogRef.close()})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](Ct.MatDialogRef),i["\u0275\u0275directiveInject"](Ct.MAT_DIALOG_DATA),i["\u0275\u0275directiveInject"](nl.DeviceService),i["\u0275\u0275directiveInject"](nl.AttributeService))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-device-management-dialog-delete"]],decls:18,vars:7,consts:[["color","accent"],["translate",""],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],["mat-dialog-actions","","fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","end"],["mat-button","",3,"click"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mat-toolbar",0),i["\u0275\u0275elementStart"](2,"h2",1),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"span",2),i["\u0275\u0275elementStart"](5,"button",3),i["\u0275\u0275listener"]("click",function(){return t.cancel()}),i["\u0275\u0275elementStart"](6,"mat-icon",4),i["\u0275\u0275text"](7,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"div",5),i["\u0275\u0275elementStart"](9,"div"),i["\u0275\u0275text"](10,"Be careful, after the confirmation the asset and all related data will become unrecoverable."),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"div",6),i["\u0275\u0275elementStart"](12,"button",7),i["\u0275\u0275listener"]("click",function(){return t.cancel()}),i["\u0275\u0275text"](13),i["\u0275\u0275pipe"](14,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"button",8),i["\u0275\u0275listener"]("click",function(){return t.delete()}),i["\u0275\u0275text"](16),i["\u0275\u0275pipe"](17,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("Are you sure delete this device '",t.data.element.element.name,"'?"),i["\u0275\u0275advance"](10),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](14,3,"action.cancel")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](17,5,"action.delete")))},directives:[It.MatToolbar,g.TranslateDirective,v.b,E.MatButton,we.MatIcon,Ct.MatDialogContent,Ct.MatDialogActions,v.f,v.g,v.e],pipes:[g.TranslatePipe],styles:[""]}),e}();0,void 0;var am=n("M9IT"),om=n("+0xr");function lm(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th",21),i["\u0275\u0275text"](1,"T\xean thi\u1ebft b\u1ecb"),i["\u0275\u0275elementEnd"]())}function sm(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",22),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.element.name," ")}}function dm(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th",23),i["\u0275\u0275text"](1," M\xe3 thi\u1ebft b\u1ecb"),i["\u0275\u0275elementEnd"]())}function cm(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",22),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.element.label," ")}}function um(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th",23),i["\u0275\u0275text"](1,"Entity type"),i["\u0275\u0275elementEnd"]())}function pm(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",22),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.element.type," ")}}function mm(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th",23),i["\u0275\u0275text"](1," Serial"),i["\u0275\u0275elementEnd"]())}function fm(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",22),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.serial," ")}}function hm(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th",23),i["\u0275\u0275text"](1," Created time"),i["\u0275\u0275elementEnd"]())}function gm(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",22),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"date"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind2"](2,1,n.element.createdTime,"dd/MM/yyyy")," ")}}function bm(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th",23),i["\u0275\u0275text"](1," Danh s\xe1ch m\xe1y"),i["\u0275\u0275elementEnd"]())}var vm=function(){return["/device-dashboard"]};function ym(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"button",25),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](2,vm)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n)}}function xm(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",22),i["\u0275\u0275template"](1,ym,2,3,"button",24),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",n.machineList)}}function Sm(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th",23),i["\u0275\u0275text"](1," Danh s\xe1ch Plc"),i["\u0275\u0275elementEnd"]())}function wm(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"button",27),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](2,vm)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n)}}function Cm(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",22),i["\u0275\u0275template"](1,wm,2,3,"button",26),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",n.plcList)}}function Em(e,t){1&e&&i["\u0275\u0275element"](0,"th",23)}function Im(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"td",22),i["\u0275\u0275elementStart"](1,"button",28),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"](2).openDialog(e)}),i["\u0275\u0275elementStart"](2,"mat-icon"),i["\u0275\u0275text"](3,"edit"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function Tm(e,t){1&e&&i["\u0275\u0275element"](0,"th",23)}function Mm(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"td",22),i["\u0275\u0275elementStart"](1,"button",29),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"](2).openDeleteDialog(e)}),i["\u0275\u0275elementStart"](2,"mat-icon"),i["\u0275\u0275text"](3,"delete"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function Dm(e,t){1&e&&i["\u0275\u0275element"](0,"tr",30)}function km(e,t){1&e&&i["\u0275\u0275element"](0,"tr",31)}function Am(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"table",6),i["\u0275\u0275elementContainerStart"](1,7),i["\u0275\u0275template"](2,lm,2,0,"th",8),i["\u0275\u0275template"](3,sm,2,1,"td",9),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](4,10),i["\u0275\u0275template"](5,dm,2,0,"th",11),i["\u0275\u0275template"](6,cm,2,1,"td",9),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](7,12),i["\u0275\u0275template"](8,um,2,0,"th",11),i["\u0275\u0275template"](9,pm,2,1,"td",9),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](10,13),i["\u0275\u0275template"](11,mm,2,0,"th",11),i["\u0275\u0275template"](12,fm,2,1,"td",9),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](13,14),i["\u0275\u0275template"](14,hm,2,0,"th",11),i["\u0275\u0275template"](15,gm,3,4,"td",9),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](16,15),i["\u0275\u0275template"](17,bm,2,0,"th",11),i["\u0275\u0275template"](18,xm,2,1,"td",9),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](19,16),i["\u0275\u0275template"](20,Sm,2,0,"th",11),i["\u0275\u0275template"](21,Cm,2,1,"td",9),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](22,17),i["\u0275\u0275template"](23,Em,1,0,"th",11),i["\u0275\u0275template"](24,Im,4,0,"td",9),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](25,18),i["\u0275\u0275template"](26,Tm,1,0,"th",11),i["\u0275\u0275template"](27,Mm,4,0,"td",9),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275template"](28,Dm,1,0,"tr",19),i["\u0275\u0275template"](29,km,1,0,"tr",20),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("dataSource",n.dataSource),i["\u0275\u0275advance"](28),i["\u0275\u0275property"]("matHeaderRowDef",n.displayedColumns),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("matRowDefColumns",n.displayedColumns)}}var Fm=function(){return[5,10,20]},Pm=function(){function e(e,t,n,i){var r=this;this.deviceService=e,this.entityRelationService=t,this.dialog=n,this.attributeService=i,this.displayedColumns=["name","label","type","serial","listMachine","listPlc","time","edit","delete"],this.pageLink=new Rp.b(10,0),this.deviceService.listen().subscribe(function(e){console.log(e),r.getAttributes(),r.getDeviceInfosByPageLink()})}return e.prototype.ngAfterViewInit=function(){},e.prototype.ngOnInit=function(){this.getAttributes(),this.getDeviceInfosByPageLink()},e.prototype.findRelationByTo=function(e){var t=this;this.entityRelationService.findByTo(e).subscribe(function(e){return t.listMachine=e})},e.prototype.getDeviceInfosByPageLink=function(){var e=this;this.deviceService.getTenantDeviceInfosByDeviceProfileId(this.pageLink).subscribe(function(t){e.dataSource=t.data,e.totalElements=t.totalElements,e.addAttrbutesInDataSource()})},e.prototype.getAttributes=function(){var e=this;this.attributeService.getAttributesByEntityType("DEVICE").subscribe(function(t){e.attributes=t})},e.prototype.addAttrbutesInDataSource=function(){var e=this;console.log("Add: ",this.dataSource),this.dataSource.forEach(function(t,n){var i=e.attributes.filter(function(e){return e.entityId==t.id.id});e.dataSource[n]={element:t,serial:"",machineList:[],plcList:[]},console.log("attrbutes filter: ",i),i.forEach(function(t){console.log("attr: ",t.attributeKey),"machineList"==t.attributeKey&&(e.dataSource[n].machineList=JSON.parse(t.jsonV)),"serial"==t.attributeKey&&(console.log("AAA"),e.dataSource[n].serial=t.strV),"plcList"==t.attributeKey&&(e.dataSource[n].plcList=JSON.parse(t.jsonV))})}),console.log("dataSource: ",this.dataSource)},e.prototype.openDialog=function(e){console.log("Open dialog:",e),this.dialog.open(im,{panelClass:["tb-dialog","tb-fullscreen-dialog"],width:"600px",height:"550px",data:{element:e,type:-1==e?"add":"edit"}}).afterClosed().subscribe(function(e){console.log("The dialog was closed")})},e.prototype.openDeleteDialog=function(e){console.log("Open dialog"),this.dialog.open(rm,{panelClass:["tb-dialog","tb-fullscreen-dialog"],width:"600px",data:{element:e}}).afterClosed().subscribe(function(e){console.log("The dialog was closed")})},e.prototype.handlePage=function(e){console.log("Page size + page index: ",e.pageIndex+" "+e.pageSize),this.pageLink.page=e.pageIndex,this.pageLink.pageSize=e.pageSize,this.getDeviceInfosByPageLink()},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](Qr.a),i["\u0275\u0275directiveInject"](Up.a),i["\u0275\u0275directiveInject"](Ct.MatDialog),i["\u0275\u0275directiveInject"](nl.AttributeService))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-device-management"]],decls:17,vars:6,consts:[["fxFlex",""],["mat-icon-button","",3,"click"],["mat-icon-button",""],[1,"mat-elevation-z8"],["mat-table","",3,"dataSource",4,"ngIf"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions","pageIndex","pageSize","length","page"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["class","mat-body-2","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","label"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","type"],["matColumnDef","serial"],["matColumnDef","time"],["matColumnDef","listMachine"],["matColumnDef","listPlc"],["matColumnDef","edit"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"mat-body-2"],["mat-cell",""],["mat-header-cell",""],["class","badge bg-info text-dark m-1",3,"routerLink",4,"ngFor","ngForOf"],[1,"badge","bg-info","text-dark","m-1",3,"routerLink"],["class","badge bg-warning text-dark m-1",3,"routerLink",4,"ngFor","ngForOf"],[1,"badge","bg-warning","text-dark","m-1",3,"routerLink"],["mat-icon-button","","color","primary","aria-label","edit",3,"click"],["mat-icon-button","","color","primary","aria-label","view detail",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-toolbar"),i["\u0275\u0275elementStart"](1,"span"),i["\u0275\u0275text"](2,"Qu\u1ea3n l\xed thi\u1ebft b\u1ecb"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](3,"span",0),i["\u0275\u0275elementStart"](4,"button",1),i["\u0275\u0275listener"]("click",function(){return t.openDialog(-1)}),i["\u0275\u0275elementStart"](5,"mat-icon"),i["\u0275\u0275text"](6,"add"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"button",2),i["\u0275\u0275elementStart"](8,"mat-icon"),i["\u0275\u0275text"](9,"refresh"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"button",2),i["\u0275\u0275elementStart"](11,"mat-icon"),i["\u0275\u0275text"](12,"search"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"div",3),i["\u0275\u0275template"](14,Am,30,3,"table",4),i["\u0275\u0275elementStart"](15,"mat-paginator",5),i["\u0275\u0275listener"]("page",function(e){return t.handlePage(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](16,"div"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](14),i["\u0275\u0275property"]("ngIf",t.dataSource),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("pageSizeOptions",i["\u0275\u0275pureFunction0"](5,Fm))("pageIndex",t.pageLink.page)("pageSize",t.pageLink.pageSize)("length",t.totalElements))},directives:[It.MatToolbar,v.b,E.MatButton,we.MatIcon,r.NgIf,am.MatPaginator,om.MatTable,om.MatColumnDef,om.MatHeaderCellDef,om.MatCellDef,om.MatHeaderRowDef,om.MatRowDef,om.MatHeaderCell,om.MatCell,r.NgForOf,a.RouterLink,om.MatHeaderRow,om.MatRow],pipes:[r.DatePipe],styles:[""]}),e}();0,void 0;var _m=[{path:"device-management",component:Pm},{path:"device-dashboard/:id",component:Hp}],Nm=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[a.RouterModule.forChild(_m)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](Nm,{imports:[a.RouterModule],exports:[a.RouterModule]})),0;var Lm=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[r.CommonModule,vn.a,Nm,Ct.MatDialogModule,Lp]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](Lm,{declarations:[Pm,im,Hp,rm],imports:[r.CommonModule,vn.a,Nm,Ct.MatDialogModule,Lp]})),0;var Om=["deviceInput"];function Bm(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-icon",28),i["\u0275\u0275text"](1,"cancel"),i["\u0275\u0275elementEnd"]())}function Rm(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-chip",26),i["\u0275\u0275listener"]("removed",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"]().remove(e)}),i["\u0275\u0275text"](1),i["\u0275\u0275template"](2,Bm,2,0,"mat-icon",27),i["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("selectable",a.selectable)("removable",a.removable),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",r.name," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.removable)}}function jm(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",29),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function Vm(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",30),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().add()}),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"action.add")))}function zm(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",30),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().update()}),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"action.update")))}var Gm=function(){function e(e,t,n,i,r,a){this.fb=e,this.dialogRef=t,this.data=n,this.assetService=i,this.attributeService=r,this.deviceService=a,this.productionLineForm=this.fb.group({nameProductionLine:["edit"==this.data.type?this.data.element.element.name:""],codePo:["edit"==this.data.type?this.data.element.codePo:""],branch:["edit"==this.data.type?this.data.element.element.branch:""],productionLineMachine:["edit"==this.data.type?this.data.element.productionLineMachine:""],codeProduct:["edit"==this.data.type?this.data.element.codeProduct:""],nameProduct:["edit"==this.data.type?this.data.element.nameProduct:""],codeWo:["edit"==this.data.type?this.data.element.codeWo:""],deviceList:["edit"==this.data.type?this.data.element.deviceList:""]}),this.devices=[],this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.separatorKeysCodes=[be.ENTER,be.COMMA],this.devices=this.data.element.deviceList?this.data.element.deviceList:[]}return e.prototype.ngOnInit=function(){this.getAllDevice()},e.prototype.cancel=function(){this.dialogRef.close()},e.prototype.add=function(){var e=this,t={name:this.productionLineForm.value.nameProductionLine,type:"production lines",label:this.productionLineForm.value.branch},n=[{key:"productionLineMachine",value:this.productionLineForm.value.productionLineMachine},{key:"codePo",value:this.productionLineForm.value.codePo},{key:"codeProduct",value:this.productionLineForm.value.codeProduct},{key:"nameProduct",value:this.productionLineForm.value.nameProduct},{key:"codeWo",value:this.productionLineForm.value.codeWo},{key:"deviceList",value:this.devices}];console.log("Attributes: ",n),this.assetService.saveAsset(t).subscribe(function(t){console.log(t),e.attributeService.saveEntityAttributes(t.id,xo.d.SERVER_SCOPE,n).subscribe(function(t){console.log(t),e.deviceService.filter("Add production lines"),e.dialogRef.close()})})},e.prototype.getAllDevice=function(){var e=this;this.pageLink=new Rp.b(50,0),this.deviceService.getTenantDeviceInfosByDeviceProfileId(this.pageLink).subscribe(function(t){e.allDevices=t.data})},e.prototype.addDevice=function(e){},e.prototype.update=function(){var e=this,t=this.data.element.element;t.name=this.productionLineForm.value.nameProductionLine,t.type="production lines",t.label=this.productionLineForm.value.branch,this.assetService.saveAsset(t).subscribe(function(t){var n=[{key:"productionLineMachine",value:e.productionLineForm.value.productionLineMachine},{key:"codePo",value:e.productionLineForm.value.codePo},{key:"codeProduct",value:e.productionLineForm.value.codeProduct},{key:"nameProduct",value:e.productionLineForm.value.nameProduct},{key:"codeWo",value:e.productionLineForm.value.codeWo},{key:"deviceList",value:e.devices}];e.attributeService.saveEntityAttributes(t.id,xo.d.SERVER_SCOPE,n).subscribe(function(t){console.log("attribute: ",t),e.deviceService.filter("Update device"),e.dialogRef.close()})})},e.prototype.remove=function(e){var t=this.devices.indexOf(e);t>=0&&this.devices.splice(t,1)},e.prototype.selected=function(e){if(console.log("Device load: ",this.devices),console.log(e.option.viewValue),!this.devices.find(function(t){return t.name==e.option.viewValue})){var t=this.allDevices.find(function(t){return t.name==e.option.viewValue});this.devices.push(t)}},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.FormBuilder),i["\u0275\u0275directiveInject"](Ct.MatDialogRef),i["\u0275\u0275directiveInject"](Ct.MAT_DIALOG_DATA),i["\u0275\u0275directiveInject"](nl.AssetService),i["\u0275\u0275directiveInject"]($p.a),i["\u0275\u0275directiveInject"](Qr.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-production-lines-dialog"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](Om,1),2&e){var n;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.deviceInput=n.first)}},decls:40,vars:12,consts:[["color","accent"],["translate",""],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],[1,"example-form",3,"formGroup"],[1,"example-full-width"],["matInput","","placeholder","T\xean d\xe2y chuy\u1ec1n","formControlName","nameProductionLine"],["matInput","","placeholder","M\xe3 PO","formControlName","codePo"],["matInput","","placeholder","\u0110\u01a1n v\u1ecb s\u1ea3n xu\u1ea5t","formControlName","branch"],["matInput","","placeholder","D\xe2y chuy\u1ec1n m\xe1y","formControlName","productionLineMachine"],["matInput","","placeholder","M\xe3 h\xe0ng h\xf3a","formControlName","codeProduct"],["matInput","","placeholder","T\xean h\xe0ng h\xf3a","formControlName","nameProduct"],["matInput","","placeholder","M\xe3 WO","formControlName","codeWo"],["aria-label","Devices selection","formControlName","deviceList"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","Danh s\xe1ch thi\u1ebft b\u1ecb","matAutocompleteOrigin","",3,"matAutocomplete","matAutocompleteConnectedTo","matChipInputFor"],["deviceInput","","origin","matAutocompleteOrigin"],[1,"tb-autocomplete",3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","","fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","end"],["mat-button","",3,"click"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[3,"value"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mat-toolbar",0),i["\u0275\u0275elementStart"](2,"h2",1),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"span",2),i["\u0275\u0275elementStart"](5,"button",3),i["\u0275\u0275listener"]("click",function(){return t.cancel()}),i["\u0275\u0275elementStart"](6,"mat-icon",4),i["\u0275\u0275text"](7,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"div",5),i["\u0275\u0275elementStart"](9,"form",6),i["\u0275\u0275elementStart"](10,"mat-form-field",7),i["\u0275\u0275element"](11,"input",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"mat-form-field",7),i["\u0275\u0275element"](13,"input",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"mat-form-field",7),i["\u0275\u0275element"](15,"input",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"mat-form-field",7),i["\u0275\u0275element"](17,"input",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](18,"mat-form-field",7),i["\u0275\u0275element"](19,"input",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](20,"mat-form-field",7),i["\u0275\u0275element"](21,"input",13),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"mat-form-field",7),i["\u0275\u0275element"](23,"input",14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](24,"mat-form-field",7),i["\u0275\u0275elementStart"](25,"mat-chip-list",15,16),i["\u0275\u0275template"](27,Rm,3,4,"mat-chip",17),i["\u0275\u0275element"](28,"input",18,19),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](31,"mat-autocomplete",20,21),i["\u0275\u0275listener"]("optionSelected",function(e){return t.selected(e)}),i["\u0275\u0275template"](33,jm,2,2,"mat-option",22),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](34,"div",23),i["\u0275\u0275elementStart"](35,"button",24),i["\u0275\u0275listener"]("click",function(){return t.cancel()}),i["\u0275\u0275text"](36),i["\u0275\u0275pipe"](37,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](38,Vm,3,3,"button",25),i["\u0275\u0275template"](39,zm,3,3,"button",25),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](26),r=i["\u0275\u0275reference"](30),a=i["\u0275\u0275reference"](32);i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"]("add"==t.data.type?"Add production line":t.data.element.element.name),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("formGroup",t.productionLineForm),i["\u0275\u0275advance"](18),i["\u0275\u0275property"]("ngForOf",t.devices),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("matAutocomplete",a)("matAutocompleteConnectedTo",r)("matChipInputFor",n),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngForOf",t.allDevices),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](37,10,"action.cancel")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf","add"==t.data.type),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","edit"==t.data.type)}},directives:[It.MatToolbar,g.TranslateDirective,v.b,E.MatButton,we.MatIcon,Ct.MatDialogContent,s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,x.MatFormField,S.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,Te.MatChipList,r.NgForOf,Kp.MatAutocompleteTrigger,Te.MatChipInput,Kp.MatAutocompleteOrigin,Kp.MatAutocomplete,Ct.MatDialogActions,v.f,v.g,v.e,r.NgIf,Te.MatChip,Te.MatChipRemove,T.MatOption],pipes:[g.TranslatePipe],styles:[""]}),e}();0,void 0;var Wm=function(){function e(e,t,n,i,r){this.dialogRef=e,this.data=t,this.deviceService=n,this.attributeService=i,this.assetService=r}return e.prototype.ngOnInit=function(){},e.prototype.cancel=function(){this.dialogRef.close()},e.prototype.delete=function(){var e=this;console.log(this.data);var t=[];this.data.element.deviceList.length>0&&t.push({key:"deviceList",value:this.data.element.deviceList}),""!=this.data.element.productionLineMachine&&t.push({key:"productionLineMachine",value:this.data.element.productionLineMachine}),""!=this.data.element.codeProduct&&t.push({key:"codeProduct",value:this.data.element.codeProduct}),""!=this.data.element.nameProduct&&t.push({key:"nameProduct",value:this.data.element.nameProduct}),""!=this.data.element.codeWo&&t.push({key:"codeWo",value:this.data.element.codeWo}),""!=this.data.element.codePo&&t.push({key:"codePo",value:this.data.element.codePo}),t.length>0&&this.attributeService.deleteEntityAttributes(this.data.element.element.id,xo.d.SERVER_SCOPE,t).subscribe(function(t){e.deviceService.filter("Delete Attribute Production Line"),e.dialogRef.close()}),this.assetService.deleteAsset(this.data.element.element.id.id).subscribe(function(t){e.deviceService.filter("Delete Production Line"),e.dialogRef.close()})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](Ct.MatDialogRef),i["\u0275\u0275directiveInject"](Ct.MAT_DIALOG_DATA),i["\u0275\u0275directiveInject"](nl.DeviceService),i["\u0275\u0275directiveInject"](nl.AttributeService),i["\u0275\u0275directiveInject"](nl.AssetService))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-production-lines-dialog-delete"]],decls:18,vars:7,consts:[["color","accent"],["translate",""],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],["mat-dialog-actions","","fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","end"],["mat-button","",3,"click"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mat-toolbar",0),i["\u0275\u0275elementStart"](2,"h2",1),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"span",2),i["\u0275\u0275elementStart"](5,"button",3),i["\u0275\u0275listener"]("click",function(){return t.cancel()}),i["\u0275\u0275elementStart"](6,"mat-icon",4),i["\u0275\u0275text"](7,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"div",5),i["\u0275\u0275elementStart"](9,"div"),i["\u0275\u0275text"](10,"Be careful, after the confirmation the asset and all related data will become unrecoverable."),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"div",6),i["\u0275\u0275elementStart"](12,"button",7),i["\u0275\u0275listener"]("click",function(){return t.cancel()}),i["\u0275\u0275text"](13),i["\u0275\u0275pipe"](14,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"button",8),i["\u0275\u0275listener"]("click",function(){return t.delete()}),i["\u0275\u0275text"](16),i["\u0275\u0275pipe"](17,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"]("Are you sure delete this production lines '",t.data.element.element.name,"'?"),i["\u0275\u0275advance"](10),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](14,3,"action.cancel")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](17,5,"action.delete")))},directives:[It.MatToolbar,g.TranslateDirective,v.b,E.MatButton,we.MatIcon,Ct.MatDialogContent,Ct.MatDialogActions,v.f,v.g,v.e],pipes:[g.TranslatePipe],styles:[""]}),e}();function qm(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th",24),i["\u0275\u0275text"](1,"T\xean d\xe2y chuy\u1ec1n"),i["\u0275\u0275elementEnd"]())}function Hm(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",25),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.element.name," ")}}function Um(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th",26),i["\u0275\u0275text"](1,"M\xe3 Po"),i["\u0275\u0275elementEnd"]())}function $m(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",25),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.codePo," ")}}function Km(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th",26),i["\u0275\u0275text"](1,"\u0110\u01a1n v\u1ecb s\u1ea3n xu\u1ea5t"),i["\u0275\u0275elementEnd"]())}function Ym(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",25),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.element.branch," ")}}function Jm(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th",26),i["\u0275\u0275text"](1,"D\xe2y chuy\u1ec1n m\xe1y"),i["\u0275\u0275elementEnd"]())}function Xm(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",25),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.productionLineMachine," ")}}function Qm(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th",26),i["\u0275\u0275text"](1," Created time"),i["\u0275\u0275elementEnd"]())}function Zm(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",25),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"date"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind2"](2,1,n.element.createdTime,"dd/MM/yyyy")," ")}}function ef(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th",26),i["\u0275\u0275text"](1," Danh s\xe1ch thi\u1ebft b\u1ecb"),i["\u0275\u0275elementEnd"]())}0,void 0;var tf=function(){return["/device-dashboard"]};function nf(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"button",29),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275property"]("routerLink",i["\u0275\u0275pureFunction0"](2,tf)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n.name)}}function rf(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"td",27),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"](2).goToDashBoard(e)}),i["\u0275\u0275template"](1,nf,2,3,"button",28),i["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",r.deviceList)}}function af(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th",26),i["\u0275\u0275text"](1," M\xe3 h\xe0ng h\xf3a"),i["\u0275\u0275elementEnd"]())}function of(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",25),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.codeProduct," ")}}function lf(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th",26),i["\u0275\u0275text"](1,"T\xean h\xe0ng h\xf3a"),i["\u0275\u0275elementEnd"]())}function sf(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",25),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.nameProduct," ")}}function df(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th",26),i["\u0275\u0275text"](1,"M\xe3 WO"),i["\u0275\u0275elementEnd"]())}function cf(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",25),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n.codeWo)}}function uf(e,t){1&e&&i["\u0275\u0275element"](0,"th",26)}function pf(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"td",25),i["\u0275\u0275elementStart"](1,"button",30),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"](2).openDialog(e)}),i["\u0275\u0275elementStart"](2,"mat-icon"),i["\u0275\u0275text"](3,"edit"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function mf(e,t){1&e&&i["\u0275\u0275element"](0,"th",26)}function ff(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"td",25),i["\u0275\u0275elementStart"](1,"button",31),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"](2).openDeleteDialog(e)}),i["\u0275\u0275elementStart"](2,"mat-icon"),i["\u0275\u0275text"](3,"delete"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function hf(e,t){1&e&&i["\u0275\u0275element"](0,"tr",32)}function gf(e,t){1&e&&i["\u0275\u0275element"](0,"tr",33)}function bf(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"table",6),i["\u0275\u0275elementContainerStart"](1,7),i["\u0275\u0275template"](2,qm,2,0,"th",8),i["\u0275\u0275template"](3,Hm,2,1,"td",9),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](4,10),i["\u0275\u0275template"](5,Um,2,0,"th",11),i["\u0275\u0275template"](6,$m,2,1,"td",9),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](7,12),i["\u0275\u0275template"](8,Km,2,0,"th",11),i["\u0275\u0275template"](9,Ym,2,1,"td",9),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](10,13),i["\u0275\u0275template"](11,Jm,2,0,"th",11),i["\u0275\u0275template"](12,Xm,2,1,"td",9),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](13,14),i["\u0275\u0275template"](14,Qm,2,0,"th",11),i["\u0275\u0275template"](15,Zm,3,4,"td",9),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](16,15),i["\u0275\u0275template"](17,ef,2,0,"th",11),i["\u0275\u0275template"](18,rf,2,1,"td",16),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](19,17),i["\u0275\u0275template"](20,af,2,0,"th",11),i["\u0275\u0275template"](21,of,2,1,"td",9),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](22,18),i["\u0275\u0275template"](23,lf,2,0,"th",11),i["\u0275\u0275template"](24,sf,2,1,"td",9),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](25,19),i["\u0275\u0275template"](26,df,2,0,"th",11),i["\u0275\u0275template"](27,cf,2,1,"td",9),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](28,20),i["\u0275\u0275template"](29,uf,1,0,"th",11),i["\u0275\u0275template"](30,pf,4,0,"td",9),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](31,21),i["\u0275\u0275template"](32,mf,1,0,"th",11),i["\u0275\u0275template"](33,ff,4,0,"td",9),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275template"](34,hf,1,0,"tr",22),i["\u0275\u0275template"](35,gf,1,0,"tr",23),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("dataSource",n.dataSource),i["\u0275\u0275advance"](34),i["\u0275\u0275property"]("matHeaderRowDef",n.displayedColumns),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("matRowDefColumns",n.displayedColumns)}}var vf=function(){return[5,10,20]},yf=function(){function e(e,t,n,i,r){var a=this;this.dialog=e,this.assetService=t,this.attributeService=n,this.router=i,this.deviceService=r,this.displayedColumns=["nameProductionLine","codePo","branch","productionLineMachine","codeProduct","nameProduct","codeWo","deviceList","time","edit","delete"],this.pageLink=new il.PageLink(10,0),this.deviceService.listen().subscribe(function(e){console.log(e),a.getAttributes(),a.getAllAssets()})}return e.prototype.ngOnInit=function(){this.getAttributes(),this.getAllAssets()},e.prototype.openDialog=function(e){console.log("Open dialog:",e),this.dialog.open(Gm,{panelClass:["tb-dialog","tb-fullscreen-dialog"],width:"600px",height:"550px",data:{element:e,type:-1==e?"add":"edit"}}).afterClosed().subscribe(function(e){console.log("The dialog was closed")})},e.prototype.getAllAssets=function(){var e=this;this.assetService.getTenantAssetInfos(this.pageLink,"production lines").subscribe(function(t){console.log("Production lines: ",t),e.dataSource=t.data,e.totalElements=t.totalElements,e.addAttrbutesInDataSource()})},e.prototype.getAttributes=function(){var e=this;this.attributeService.getAttributesByEntityType("ASSET").subscribe(function(t){e.attributes=t,console.log("attribute assets: ",e.attributes)})},e.prototype.addAttrbutesInDataSource=function(){var e=this;console.log("Add: ",this.dataSource),this.dataSource.forEach(function(t,n){var i=e.attributes.filter(function(e){return e.entityId==t.id.id});e.dataSource[n]={element:t,codePo:"",productionLineMachine:"",codeProduct:"",nameProduct:"",codeWo:"",deviceList:[]},console.log("attrbutes filter: ",i),i.forEach(function(t){console.log("attr: ",t.attributeKey),"codePo"==t.attributeKey&&(e.dataSource[n].codePo=t.strV),"productionLineMachine"==t.attributeKey&&(e.dataSource[n].productionLineMachine=t.strV),"codeProduct"==t.attributeKey&&(e.dataSource[n].codeProduct=t.strV),"codeWo"==t.attributeKey&&(e.dataSource[n].codeWo=t.strV),"nameProduct"==t.attributeKey&&(e.dataSource[n].nameProduct=t.strV),"deviceList"==t.attributeKey&&(e.dataSource[n].deviceList=JSON.parse(t.jsonV))})}),console.log("dataSource: ",this.dataSource)},e.prototype.openDeleteDialog=function(e){console.log("Open dialog"),this.dialog.open(Wm,{panelClass:["tb-dialog","tb-fullscreen-dialog"],width:"600px",data:{element:e}}).afterClosed().subscribe(function(e){console.log("The dialog was closed")})},e.prototype.handlePage=function(e){console.log("Page size + page index: ",e.pageIndex+" "+e.pageSize),this.pageLink.page=e.pageIndex,this.pageLink.pageSize=e.pageSize,this.getAllAssets()},e.prototype.goToDashBoard=function(e){console.log("Row: ",e),this.router.navigate(["/device-dashboard",e.element.id.id])},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](Ct.MatDialog),i["\u0275\u0275directiveInject"](nl.AssetService),i["\u0275\u0275directiveInject"](nl.AttributeService),i["\u0275\u0275directiveInject"](a.Router),i["\u0275\u0275directiveInject"](nl.DeviceService))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-product-lines"]],decls:17,vars:6,consts:[["fxFlex",""],["mat-icon-button","",3,"click"],["mat-icon-button",""],[1,"mat-elevation-z8"],["mat-table","",3,"dataSource",4,"ngIf"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions","pageIndex","pageSize","length","page"],["mat-table","",3,"dataSource"],["matColumnDef","nameProductionLine"],["class","mat-body-2","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","codePo"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","branch"],["matColumnDef","productionLineMachine"],["matColumnDef","time"],["matColumnDef","deviceList"],["mat-cell","","style","cursor: pointer;",3,"click",4,"matCellDef"],["matColumnDef","codeProduct"],["matColumnDef","nameProduct"],["matColumnDef","codeWo"],["matColumnDef","edit"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"mat-body-2"],["mat-cell",""],["mat-header-cell",""],["mat-cell","",2,"cursor","pointer",3,"click"],["class","badge bg-info text-dark m-1",3,"routerLink",4,"ngFor","ngForOf"],[1,"badge","bg-info","text-dark","m-1",3,"routerLink"],["mat-icon-button","","color","primary","aria-label","edit",3,"click"],["mat-icon-button","","color","primary","aria-label","view detail",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-toolbar"),i["\u0275\u0275elementStart"](1,"span"),i["\u0275\u0275text"](2,"Danh s\xe1ch d\xe2y chuy\u1ec1n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](3,"span",0),i["\u0275\u0275elementStart"](4,"button",1),i["\u0275\u0275listener"]("click",function(){return t.openDialog(-1)}),i["\u0275\u0275elementStart"](5,"mat-icon"),i["\u0275\u0275text"](6,"add"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"button",2),i["\u0275\u0275elementStart"](8,"mat-icon"),i["\u0275\u0275text"](9,"refresh"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"button",2),i["\u0275\u0275elementStart"](11,"mat-icon"),i["\u0275\u0275text"](12,"search"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"div",3),i["\u0275\u0275template"](14,bf,36,3,"table",4),i["\u0275\u0275elementStart"](15,"mat-paginator",5),i["\u0275\u0275listener"]("page",function(e){return t.handlePage(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](16,"div"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](14),i["\u0275\u0275property"]("ngIf",t.dataSource),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("pageSizeOptions",i["\u0275\u0275pureFunction0"](5,vf))("pageIndex",t.pageLink.page)("pageSize",t.pageLink.pageSize)("length",t.totalElements))},directives:[It.MatToolbar,v.b,E.MatButton,we.MatIcon,r.NgIf,am.MatPaginator,om.MatTable,om.MatColumnDef,om.MatHeaderCellDef,om.MatCellDef,om.MatHeaderRowDef,om.MatRowDef,om.MatHeaderCell,om.MatCell,r.NgForOf,a.RouterLink,om.MatHeaderRow,om.MatRow],pipes:[r.DatePipe],styles:[""]}),e}();0,void 0;var xf=[{path:"production-line",component:yf}],Sf=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[a.RouterModule.forChild(xf)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](Sf,{imports:[a.RouterModule],exports:[a.RouterModule]})),0;var wf=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[r.CommonModule,vn.a,Ct.MatDialogModule,Lp,Sf]]}),e}();function Cf(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",13),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().add()}),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"action.add")))}function Ef(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",13),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().update()}),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"action.update")))}void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](wf,{declarations:[yf,Gm,Wm],imports:[r.CommonModule,vn.a,Ct.MatDialogModule,Lp,Sf]})),0;var If=function(){function e(e,t,n,i,r){this.dialogRef=e,this.data=t,this.fb=n,this.assetService=i,this.deviceService=r,this.assetForm=this.fb.group({name:[this.data.element.name],type:[this.data.name],label:[this.data.element.label]})}return e.prototype.ngOnInit=function(){},e.prototype.cancel=function(){this.dialogRef.close()},e.prototype.add=function(){var e=this;console.log("Data: ",this.data);var t={name:this.assetForm.value.name,type:this.data.name,label:this.assetForm.value.label};console.log("Asset: ",t),this.assetService.saveAsset(t).subscribe(function(t){e.deviceService.filter("Add Asset"),e.dialogRef.close()})},e.prototype.update=function(){var e=this;console.log(this.data);var t=this.data.element;t.label=this.assetForm.value.label,t.name=this.assetForm.value.name,this.assetService.saveAsset(t).subscribe(function(t){console.log(t),e.deviceService.filter("Update Asset"),e.dialogRef.close()})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](Ct.MatDialogRef),i["\u0275\u0275directiveInject"](Ct.MAT_DIALOG_DATA),i["\u0275\u0275directiveInject"](s.FormBuilder),i["\u0275\u0275directiveInject"](nl.AssetService),i["\u0275\u0275directiveInject"](nl.DeviceService))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-plc-machine-dialog"]],decls:20,vars:7,consts:[["color","accent"],["translate",""],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],[1,"example-form",3,"formGroup"],[1,"example-full-width"],["matInput","","placeholder","T\xean thi\u1ebft b\u1ecb","formControlName","name"],["matInput","","placeholder","Label","formControlName","label"],["mat-dialog-actions","","fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","end"],["mat-button","",3,"click"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mat-toolbar",0),i["\u0275\u0275elementStart"](2,"h2",1),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"span",2),i["\u0275\u0275elementStart"](5,"button",3),i["\u0275\u0275listener"]("click",function(){return t.cancel()}),i["\u0275\u0275elementStart"](6,"mat-icon",4),i["\u0275\u0275text"](7,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"div",5),i["\u0275\u0275elementStart"](9,"form",6),i["\u0275\u0275elementStart"](10,"mat-form-field",7),i["\u0275\u0275element"](11,"input",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"mat-form-field",7),i["\u0275\u0275element"](13,"input",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"div",10),i["\u0275\u0275elementStart"](15,"button",11),i["\u0275\u0275listener"]("click",function(){return t.cancel()}),i["\u0275\u0275text"](16),i["\u0275\u0275pipe"](17,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](18,Cf,3,3,"button",12),i["\u0275\u0275template"](19,Ef,3,3,"button",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](t.data.name),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("formGroup",t.assetForm),i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](17,5,"action.cancel")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf","add"==t.data.type),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","edit"==t.data.type))},directives:[It.MatToolbar,g.TranslateDirective,v.b,E.MatButton,we.MatIcon,Ct.MatDialogContent,s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,x.MatFormField,S.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,Ct.MatDialogActions,v.f,v.g,v.e,r.NgIf],pipes:[g.TranslatePipe],styles:[""]}),e}();0,void 0;var Tf=function(){function e(e,t,n,i){this.dialogRef=e,this.data=t,this.assetService=n,this.deviceService=i}return e.prototype.ngOnInit=function(){},e.prototype.cancel=function(){this.dialogRef.close()},e.prototype.delete=function(){var e=this;this.assetService.deleteAsset(this.data.element.id.id).subscribe(function(t){console.log(t),e.deviceService.filter("Delete Asset"),e.dialogRef.close()})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](Ct.MatDialogRef),i["\u0275\u0275directiveInject"](Ct.MAT_DIALOG_DATA),i["\u0275\u0275directiveInject"](nl.AssetService),i["\u0275\u0275directiveInject"](nl.DeviceService))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-plc-machine-dialog-delete"]],decls:18,vars:8,consts:[["color","accent"],["translate",""],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],["mat-dialog-actions","","fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","end"],["mat-button","",3,"click"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mat-toolbar",0),i["\u0275\u0275elementStart"](2,"h2",1),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"span",2),i["\u0275\u0275elementStart"](5,"button",3),i["\u0275\u0275listener"]("click",function(){return t.cancel()}),i["\u0275\u0275elementStart"](6,"mat-icon",4),i["\u0275\u0275text"](7,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"div",5),i["\u0275\u0275elementStart"](9,"div"),i["\u0275\u0275text"](10,"Be careful, after the confirmation the asset and all related data will become unrecoverable."),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"div",6),i["\u0275\u0275elementStart"](12,"button",7),i["\u0275\u0275listener"]("click",function(){return t.cancel()}),i["\u0275\u0275text"](13),i["\u0275\u0275pipe"](14,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"button",8),i["\u0275\u0275listener"]("click",function(){return t.delete()}),i["\u0275\u0275text"](16),i["\u0275\u0275pipe"](17,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate2"]("Are you sure delete this ",t.data.name," '",t.data.element.name,"'?"),i["\u0275\u0275advance"](10),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](14,4,"action.cancel")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](17,6,"action.delete")))},directives:[It.MatToolbar,g.TranslateDirective,v.b,E.MatButton,we.MatIcon,Ct.MatDialogContent,Ct.MatDialogActions,v.f,v.g,v.e],pipes:[g.TranslatePipe],styles:[""]}),e}();function Mf(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th",22),i["\u0275\u0275text"](1,"T\xean thi\u1ebft b\u1ecb"),i["\u0275\u0275elementEnd"]())}function Df(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",23),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function kf(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th",24),i["\u0275\u0275text"](1,"Label"),i["\u0275\u0275elementEnd"]())}function Af(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",23),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.label," ")}}function Ff(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th",24),i["\u0275\u0275text"](1,"Type"),i["\u0275\u0275elementEnd"]())}function Pf(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",23),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.type," ")}}function _f(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th",24),i["\u0275\u0275text"](1," Create Time"),i["\u0275\u0275elementEnd"]())}function Nf(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",23),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"date"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind2"](2,1,n.createdTime,"dd/MM/yyyy")," ")}}function Lf(e,t){1&e&&i["\u0275\u0275element"](0,"th",24)}function Of(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"td",23),i["\u0275\u0275elementStart"](1,"button",25),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"]().openDialog(e)}),i["\u0275\u0275elementStart"](2,"mat-icon"),i["\u0275\u0275text"](3,"edit"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function Bf(e,t){1&e&&i["\u0275\u0275element"](0,"th",24)}function Rf(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"td",23),i["\u0275\u0275elementStart"](1,"button",26),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"]().openDeleteDialog(e)}),i["\u0275\u0275elementStart"](2,"mat-icon"),i["\u0275\u0275text"](3,"delete"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function jf(e,t){1&e&&i["\u0275\u0275element"](0,"tr",27)}function Vf(e,t){1&e&&i["\u0275\u0275element"](0,"tr",28)}0,void 0;var zf=function(){return[5,10,20]},Gf=function(){function e(e,t,n,i){var r=this;this.fb=e,this.assetService=t,this.deviceService=n,this.dialog=i,this.displayedColumns=["name","label","type","createdTime","edit","delete"],this.pageLink=new il.PageLink(10,0),this.asset=this.fb.group({assetType:["plc"]}),this.deviceService.listen().subscribe(function(e){r.getAssetByAssetType()})}return e.prototype.ngOnInit=function(){this.getAssetByAssetType()},e.prototype.openDialog=function(e){console.log("Open dialog:",e);var t=this.dialog.open(If,{panelClass:["tb-dialog","tb-fullscreen-dialog"],width:"600px",height:"300px",data:{element:e,name:this.asset.value.assetType,type:-1==e?"add":"edit"}});console.log(t),t.afterClosed().subscribe(function(e){console.log("The dialog was closed")})},e.prototype.openDeleteDialog=function(e){this.dialog.open(Tf,{panelClass:["tb-dialog","tb-fullscreen-dialog"],width:"600px",height:"230px",data:{element:e,name:this.asset.value.assetType}})},e.prototype.onChangeAsset=function(e){this.asset.patchValue({assetType:e.value}),this.getAssetByAssetType()},e.prototype.handlePage=function(e){console.log("Page size + page index: ",e.pageIndex+" "+e.pageSize),this.pageLink.page=e.pageIndex,this.pageLink.pageSize=e.pageSize,this.getAssetByAssetType()},e.prototype.getAssetByAssetType=function(){var e=this;this.assetService.getTenantAssetInfos(this.pageLink,this.asset.value.assetType).subscribe(function(t){e.dataSource=t.data})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.FormBuilder),i["\u0275\u0275directiveInject"](nl.AssetService),i["\u0275\u0275directiveInject"](nl.DeviceService),i["\u0275\u0275directiveInject"](Ct.MatDialog))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-plc-machine"]],decls:43,vars:9,consts:[[1,"mr-2"],[1,"mat-block",3,"formGroup"],["formControlName","assetType",1,"tb-entity-subtype-select",3,"selectionChange"],["value","plc"],["value","machine"],["fxFlex",""],["mat-icon-button","",3,"click"],["mat-icon-button",""],[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["class","mat-body-2","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","label"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","type"],["matColumnDef","createdTime"],["matColumnDef","edit"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions","pageIndex","pageSize","length","page"],["mat-header-cell","",1,"mat-body-2"],["mat-cell",""],["mat-header-cell",""],["mat-icon-button","","color","primary","aria-label","edit",3,"click"],["mat-icon-button","","color","primary","aria-label","view detail",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-toolbar"),i["\u0275\u0275elementStart"](1,"span",0),i["\u0275\u0275text"](2,"Qu\u1ea3n l\xed thi\u1ebft b\u1ecb\xa0"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"mat-form-field",1),i["\u0275\u0275elementStart"](4,"mat-select",2),i["\u0275\u0275listener"]("selectionChange",function(e){return t.onChangeAsset(e)}),i["\u0275\u0275elementStart"](5,"mat-option",3),i["\u0275\u0275text"](6,"plc"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"mat-option",4),i["\u0275\u0275text"](8,"machine"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](9,"span",5),i["\u0275\u0275elementStart"](10,"button",6),i["\u0275\u0275listener"]("click",function(){return t.openDialog(-1)}),i["\u0275\u0275elementStart"](11,"mat-icon"),i["\u0275\u0275text"](12,"add"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"button",7),i["\u0275\u0275elementStart"](14,"mat-icon"),i["\u0275\u0275text"](15,"refresh"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"button",7),i["\u0275\u0275elementStart"](17,"mat-icon"),i["\u0275\u0275text"](18,"search"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](19,"div",8),i["\u0275\u0275elementStart"](20,"table",9),i["\u0275\u0275elementContainerStart"](21,10),i["\u0275\u0275template"](22,Mf,2,0,"th",11),i["\u0275\u0275template"](23,Df,2,1,"td",12),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](24,13),i["\u0275\u0275template"](25,kf,2,0,"th",14),i["\u0275\u0275template"](26,Af,2,1,"td",12),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](27,15),i["\u0275\u0275template"](28,Ff,2,0,"th",14),i["\u0275\u0275template"](29,Pf,2,1,"td",12),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](30,16),i["\u0275\u0275template"](31,_f,2,0,"th",14),i["\u0275\u0275template"](32,Nf,3,4,"td",12),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](33,17),i["\u0275\u0275template"](34,Lf,1,0,"th",14),i["\u0275\u0275template"](35,Of,4,0,"td",12),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](36,18),i["\u0275\u0275template"](37,Bf,1,0,"th",14),i["\u0275\u0275template"](38,Rf,4,0,"td",12),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275template"](39,jf,1,0,"tr",19),i["\u0275\u0275template"](40,Vf,1,0,"tr",20),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](41,"mat-paginator",21),i["\u0275\u0275listener"]("page",function(e){return t.handlePage(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](42,"div"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.asset),i["\u0275\u0275advance"](17),i["\u0275\u0275property"]("dataSource",t.dataSource),i["\u0275\u0275advance"](19),i["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("pageSizeOptions",i["\u0275\u0275pureFunction0"](8,zf))("pageIndex",t.pageLink.page)("pageSize",t.pageLink.pageSize)("length",t.totalElements))},directives:[It.MatToolbar,x.MatFormField,s.NgControlStatusGroup,s.FormGroupDirective,w.MatSelect,s.NgControlStatus,s.FormControlName,T.MatOption,v.b,E.MatButton,we.MatIcon,om.MatTable,om.MatColumnDef,om.MatHeaderCellDef,om.MatCellDef,om.MatHeaderRowDef,om.MatRowDef,am.MatPaginator,om.MatHeaderCell,om.MatCell,om.MatHeaderRow,om.MatRow],pipes:[r.DatePipe],styles:[""]}),e}();0,void 0;var Wf=[{path:"plc-machine",component:Gf}],qf=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[a.RouterModule.forChild(Wf)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](qf,{imports:[a.RouterModule],exports:[a.RouterModule]})),0;var Hf=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[r.CommonModule,vn.a,Ct.MatDialogModule,qf,Lp]]}),e}();function Uf(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",13),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().add()}),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"action.add")))}function $f(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",13),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().update()}),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"action.update")))}void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](Hf,{declarations:[Gf,If,Tf],imports:[r.CommonModule,vn.a,Ct.MatDialogModule,qf,Lp]})),0;var Kf=function(){function e(e,t,n,i,r){this.dialogRef=e,this.data=t,this.fb=n,this.assetService=i,this.deviceService=r,this.assetForm=this.fb.group({name:[this.data.element.name],type:[this.data.name],label:[this.data.element.label]})}return e.prototype.ngOnInit=function(){},e.prototype.cancel=function(){this.dialogRef.close()},e.prototype.add=function(){var e=this;console.log("Data: ",this.data);var t={name:this.assetForm.value.name,type:this.data.name,label:this.assetForm.value.label};console.log("Asset: ",t),this.assetService.saveAsset(t).subscribe(function(t){e.deviceService.filter("Add Asset"),e.dialogRef.close()})},e.prototype.update=function(){var e=this;console.log(this.data);var t=this.data.element;t.label=this.assetForm.value.label,t.name=this.assetForm.value.name,this.assetService.saveAsset(t).subscribe(function(t){console.log(t),e.deviceService.filter("Update Asset"),e.dialogRef.close()})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](Ct.MatDialogRef),i["\u0275\u0275directiveInject"](Ct.MAT_DIALOG_DATA),i["\u0275\u0275directiveInject"](s.FormBuilder),i["\u0275\u0275directiveInject"](nl.AssetService),i["\u0275\u0275directiveInject"](nl.DeviceService))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-product-dialog"]],decls:20,vars:7,consts:[["color","accent"],["translate",""],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],[1,"example-form",3,"formGroup"],[1,"example-full-width"],["matInput","","placeholder","T\xean thi\u1ebft b\u1ecb","formControlName","name"],["matInput","","placeholder","Label","formControlName","label"],["mat-dialog-actions","","fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","end"],["mat-button","",3,"click"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mat-toolbar",0),i["\u0275\u0275elementStart"](2,"h2",1),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"span",2),i["\u0275\u0275elementStart"](5,"button",3),i["\u0275\u0275listener"]("click",function(){return t.cancel()}),i["\u0275\u0275elementStart"](6,"mat-icon",4),i["\u0275\u0275text"](7,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"div",5),i["\u0275\u0275elementStart"](9,"form",6),i["\u0275\u0275elementStart"](10,"mat-form-field",7),i["\u0275\u0275element"](11,"input",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"mat-form-field",7),i["\u0275\u0275element"](13,"input",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"div",10),i["\u0275\u0275elementStart"](15,"button",11),i["\u0275\u0275listener"]("click",function(){return t.cancel()}),i["\u0275\u0275text"](16),i["\u0275\u0275pipe"](17,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](18,Uf,3,3,"button",12),i["\u0275\u0275template"](19,$f,3,3,"button",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](t.data.name),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("formGroup",t.assetForm),i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](17,5,"action.cancel")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf","add"==t.data.type),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","edit"==t.data.type))},directives:[It.MatToolbar,g.TranslateDirective,v.b,E.MatButton,we.MatIcon,Ct.MatDialogContent,s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,x.MatFormField,S.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,Ct.MatDialogActions,v.f,v.g,v.e,r.NgIf],pipes:[g.TranslatePipe],styles:[""]}),e}();0,void 0;var Yf=function(){function e(e,t,n,i){this.dialogRef=e,this.data=t,this.assetService=n,this.deviceService=i}return e.prototype.ngOnInit=function(){},e.prototype.cancel=function(){this.dialogRef.close()},e.prototype.delete=function(){var e=this;this.assetService.deleteAsset(this.data.element.id.id).subscribe(function(t){console.log(t),e.deviceService.filter("Delete Asset"),e.dialogRef.close()})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](Ct.MatDialogRef),i["\u0275\u0275directiveInject"](Ct.MAT_DIALOG_DATA),i["\u0275\u0275directiveInject"](nl.AssetService),i["\u0275\u0275directiveInject"](nl.DeviceService))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-product-dialog-delete"]],decls:18,vars:8,consts:[["color","accent"],["translate",""],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],["mat-dialog-actions","","fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","end"],["mat-button","",3,"click"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mat-toolbar",0),i["\u0275\u0275elementStart"](2,"h2",1),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"span",2),i["\u0275\u0275elementStart"](5,"button",3),i["\u0275\u0275listener"]("click",function(){return t.cancel()}),i["\u0275\u0275elementStart"](6,"mat-icon",4),i["\u0275\u0275text"](7,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"div",5),i["\u0275\u0275elementStart"](9,"div"),i["\u0275\u0275text"](10,"Be careful, after the confirmation the asset and all related data will become unrecoverable."),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"div",6),i["\u0275\u0275elementStart"](12,"button",7),i["\u0275\u0275listener"]("click",function(){return t.cancel()}),i["\u0275\u0275text"](13),i["\u0275\u0275pipe"](14,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"button",8),i["\u0275\u0275listener"]("click",function(){return t.delete()}),i["\u0275\u0275text"](16),i["\u0275\u0275pipe"](17,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate2"]("Are you sure delete this ",t.data.name," '",t.data.element.name,"'?"),i["\u0275\u0275advance"](10),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](14,4,"action.cancel")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](17,6,"action.delete")))},directives:[It.MatToolbar,g.TranslateDirective,v.b,E.MatButton,we.MatIcon,Ct.MatDialogContent,Ct.MatDialogActions,v.f,v.g,v.e],pipes:[g.TranslatePipe],styles:[""]}),e}();function Jf(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th",25),i["\u0275\u0275text"](1,"T\xean"),i["\u0275\u0275elementEnd"]())}function Xf(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",26),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function Qf(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th",27),i["\u0275\u0275text"](1,"M\xe3"),i["\u0275\u0275elementEnd"]())}function Zf(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",26),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.code," ")}}function eh(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th",27),i["\u0275\u0275text"](1,"M\xf4 t\u1ea3"),i["\u0275\u0275elementEnd"]())}function th(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",26),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.description," ")}}function nh(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th",27),i["\u0275\u0275text"](1,"Tr\u1ea1ng th\xe1i"),i["\u0275\u0275elementEnd"]())}function ih(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",26),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.status," ")}}function rh(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th",27),i["\u0275\u0275text"](1," Th\u1eddi gian t\u1ea1o"),i["\u0275\u0275elementEnd"]())}function ah(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",26),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"date"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind2"](2,1,n.createdTime,"dd/MM/yyyy")," ")}}function oh(e,t){1&e&&i["\u0275\u0275element"](0,"th",27)}function lh(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"td",26),i["\u0275\u0275elementStart"](1,"button",28),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"]().openDialog(e)}),i["\u0275\u0275elementStart"](2,"mat-icon"),i["\u0275\u0275text"](3,"edit"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function sh(e,t){1&e&&i["\u0275\u0275element"](0,"th",27)}function dh(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"td",26),i["\u0275\u0275elementStart"](1,"button",29),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"]().openDeleteDialog(e)}),i["\u0275\u0275elementStart"](2,"mat-icon"),i["\u0275\u0275text"](3,"delete"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function ch(e,t){1&e&&i["\u0275\u0275element"](0,"tr",30)}function uh(e,t){1&e&&i["\u0275\u0275element"](0,"tr",31)}0,void 0;var ph=function(){return[5,10,20]},mh=function(){function e(e,t,n,i){var r=this;this.fb=e,this.integrationService=t,this.deviceService=n,this.dialog=i,this.displayedColumns=["name","code","description","status","createdTime","edit","delete"],this.pageLink=new il.PageLink(10,0),this.asset=this.fb.group({assetType:["product"]}),this.deviceService.listen().subscribe(function(e){r.getAssetByAssetType()})}return e.prototype.ngOnInit=function(){this.getAssetByAssetType()},e.prototype.openDialog=function(e){console.log("Open dialog:",e,this.asset.value.assetType);var t=this.dialog.open(Kf,{panelClass:["tb-dialog","tb-fullscreen-dialog"],width:"600px",height:"300px",data:{element:e,name:this.asset.value.assetType,type:-1==e?"add":"edit"}});console.log(t),t.afterClosed().subscribe(function(e){console.log("The dialog was closed")})},e.prototype.openDeleteDialog=function(e){this.dialog.open(Yf,{panelClass:["tb-dialog","tb-fullscreen-dialog"],width:"600px",height:"230px",data:{element:e,name:this.asset.value.assetType}})},e.prototype.onChangeAsset=function(e){this.asset.patchValue({assetType:e.value}),this.getAssetByAssetType()},e.prototype.handlePage=function(e){console.log("Page size + page index: ",e.pageIndex+" "+e.pageSize),this.pageLink.page=e.pageIndex,this.pageLink.pageSize=e.pageSize,this.getAssetByAssetType()},e.prototype.getAssetByAssetType=function(){var e=this,t=this.asset.value.assetType;"group-product"==t?this.integrationService.getGroupProducts().subscribe(function(t){e.dataSource=t.rows}):"product"==t?this.integrationService.getProducts().subscribe(function(t){e.dataSource=t.rows}):"stage"==t?this.integrationService.getStages().subscribe(function(t){e.dataSource=t.rows}):"error"==t&&this.integrationService.getErrors().subscribe(function(t){e.dataSource=t.rows})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.FormBuilder),i["\u0275\u0275directiveInject"](nl.IntegrationService),i["\u0275\u0275directiveInject"](nl.DeviceService),i["\u0275\u0275directiveInject"](Ct.MatDialog))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-product"]],decls:50,vars:9,consts:[[1,"mr-2"],[1,"mat-block",3,"formGroup"],["formControlName","assetType",1,"tb-entity-subtype-select",3,"selectionChange"],["value","product"],["value","group-product"],["value","stage"],["value","error"],["fxFlex",""],["mat-icon-button","",3,"click"],["mat-icon-button",""],[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["class","mat-body-2","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","code"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","description"],["matColumnDef","status"],["matColumnDef","createdTime"],["matColumnDef","edit"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions","pageIndex","pageSize","length","page"],["mat-header-cell","",1,"mat-body-2"],["mat-cell",""],["mat-header-cell",""],["mat-icon-button","","color","primary","aria-label","edit",3,"click"],["mat-icon-button","","color","primary","aria-label","view detail",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-toolbar"),i["\u0275\u0275elementStart"](1,"span",0),i["\u0275\u0275text"](2,"Qu\u1ea3n l\xed\xa0"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"mat-form-field",1),i["\u0275\u0275elementStart"](4,"mat-select",2),i["\u0275\u0275listener"]("selectionChange",function(e){return t.onChangeAsset(e)}),i["\u0275\u0275elementStart"](5,"mat-option",3),i["\u0275\u0275text"](6,"S\u1ea3n ph\u1ea9m"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"mat-option",4),i["\u0275\u0275text"](8,"Nh\xf3m s\u1ea3n ph\u1ea9m"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"mat-option",5),i["\u0275\u0275text"](10,"C\xf4ng \u0111o\u1ea1n"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"mat-option",6),i["\u0275\u0275text"](12,"L\u1ed7i"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](13,"span",7),i["\u0275\u0275elementStart"](14,"button",8),i["\u0275\u0275listener"]("click",function(){return t.openDialog(-1)}),i["\u0275\u0275elementStart"](15,"mat-icon"),i["\u0275\u0275text"](16,"add"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"button",9),i["\u0275\u0275elementStart"](18,"mat-icon"),i["\u0275\u0275text"](19,"refresh"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](20,"button",9),i["\u0275\u0275elementStart"](21,"mat-icon"),i["\u0275\u0275text"](22,"search"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](23,"div",10),i["\u0275\u0275elementStart"](24,"table",11),i["\u0275\u0275elementContainerStart"](25,12),i["\u0275\u0275template"](26,Jf,2,0,"th",13),i["\u0275\u0275template"](27,Xf,2,1,"td",14),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](28,15),i["\u0275\u0275template"](29,Qf,2,0,"th",16),i["\u0275\u0275template"](30,Zf,2,1,"td",14),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](31,17),i["\u0275\u0275template"](32,eh,2,0,"th",16),i["\u0275\u0275template"](33,th,2,1,"td",14),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](34,18),i["\u0275\u0275template"](35,nh,2,0,"th",16),i["\u0275\u0275template"](36,ih,2,1,"td",14),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](37,19),i["\u0275\u0275template"](38,rh,2,0,"th",16),i["\u0275\u0275template"](39,ah,3,4,"td",14),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](40,20),i["\u0275\u0275template"](41,oh,1,0,"th",16),i["\u0275\u0275template"](42,lh,4,0,"td",14),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](43,21),i["\u0275\u0275template"](44,sh,1,0,"th",16),i["\u0275\u0275template"](45,dh,4,0,"td",14),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275template"](46,ch,1,0,"tr",22),i["\u0275\u0275template"](47,uh,1,0,"tr",23),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](48,"mat-paginator",24),i["\u0275\u0275listener"]("page",function(e){return t.handlePage(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](49,"div"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("formGroup",t.asset),i["\u0275\u0275advance"](21),i["\u0275\u0275property"]("dataSource",t.dataSource),i["\u0275\u0275advance"](22),i["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("pageSizeOptions",i["\u0275\u0275pureFunction0"](8,ph))("pageIndex",t.pageLink.page)("pageSize",t.pageLink.pageSize)("length",t.totalElements))},directives:[It.MatToolbar,x.MatFormField,s.NgControlStatusGroup,s.FormGroupDirective,w.MatSelect,s.NgControlStatus,s.FormControlName,T.MatOption,v.b,E.MatButton,we.MatIcon,om.MatTable,om.MatColumnDef,om.MatHeaderCellDef,om.MatCellDef,om.MatHeaderRowDef,om.MatRowDef,am.MatPaginator,om.MatHeaderCell,om.MatCell,om.MatHeaderRow,om.MatRow],pipes:[r.DatePipe],styles:[""]}),e}();0,void 0;var fh=[{path:"product",component:mh}],hh=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[a.RouterModule.forChild(fh)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](hh,{imports:[a.RouterModule],exports:[a.RouterModule]})),0;var gh=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[r.CommonModule,vn.a,Ct.MatDialogModule,hh,Lp]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](gh,{declarations:[mh,Kf,Yf],imports:[r.CommonModule,vn.a,Ct.MatDialogModule,hh,Lp]})),0;var bh=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[{provide:il.MODULES_MAP,useValue:Is.a}],imports:[[wf],xn,On,ti,Es,Yi,Ks,go,yo,td,Ro,ro,kl,ss,ms,lo,Qs,Id,co,Lm,Hf,gh]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](bh,{imports:[wf],exports:[xn,On,ti,Es,Yi,Ks,go,yo,td,Ro,ro,kl,ss,ms,lo,Qs,Id,co,Lm,Hf,gh]})),0},"Ju5/":function(e,t,n){"use strict";var i=n("XqMk"),r="object"==typeof self&&self&&self.Object===Object&&self,a=i.a||r||Function("return this")();t.a=a},L3Qv:function(e,t,n){"use strict";t.a=function(){return!1}},"MO+k":function(e,t,n){void(e.exports=function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},n=function(e,t){return e(t={exports:{}},t.exports),t.exports}(function(e){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[t[i]]=i);var r=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var a in r)if(r.hasOwnProperty(a)){if(!("channels"in r[a]))throw new Error("missing channels property: "+a);if(!("labels"in r[a]))throw new Error("missing channel labels property: "+a);if(r[a].labels.length!==r[a].channels)throw new Error("channel and label counts mismatch: "+a);var o=r[a].channels,l=r[a].labels;delete r[a].channels,delete r[a].labels,Object.defineProperty(r[a],"channels",{value:o}),Object.defineProperty(r[a],"labels",{value:l})}r.rgb.hsl=function(e){var t,n,i=e[0]/255,r=e[1]/255,a=e[2]/255,o=Math.min(i,r,a),l=Math.max(i,r,a),s=l-o;return l===o?t=0:i===l?t=(r-a)/s:r===l?t=2+(a-i)/s:a===l&&(t=4+(i-r)/s),(t=Math.min(60*t,360))<0&&(t+=360),n=(o+l)/2,[t,100*(l===o?0:n<=.5?s/(l+o):s/(2-l-o)),100*n]},r.rgb.hsv=function(e){var t,n,i,r,a,o=e[0]/255,l=e[1]/255,s=e[2]/255,d=Math.max(o,l,s),c=d-Math.min(o,l,s),u=function(e){return(d-e)/6/c+.5};return 0===c?r=a=0:(a=c/d,t=u(o),n=u(l),i=u(s),o===d?r=i-n:l===d?r=1/3+t-i:s===d&&(r=2/3+n-t),r<0?r+=1:r>1&&(r-=1)),[360*r,100*a,100*d]},r.rgb.hwb=function(e){var t=e[0],n=e[1],i=e[2];return[r.rgb.hsl(e)[0],1/255*Math.min(t,Math.min(n,i))*100,100*(i=1-1/255*Math.max(t,Math.max(n,i)))]},r.rgb.cmyk=function(e){var t,n=e[0]/255,i=e[1]/255,r=e[2]/255;return[100*((1-n-(t=Math.min(1-n,1-i,1-r)))/(1-t)||0),100*((1-i-t)/(1-t)||0),100*((1-r-t)/(1-t)||0),100*t]},r.rgb.keyword=function(e){var i=n[e];if(i)return i;var r,a,o,l=1/0;for(var s in t)if(t.hasOwnProperty(s)){var d=t[s],c=(a=e,o=d,Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)+Math.pow(a[2]-o[2],2));c<l&&(l=c,r=s)}return r},r.keyword.rgb=function(e){return t[e]},r.rgb.xyz=function(e){var t=e[0]/255,n=e[1]/255,i=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)),100*(.2126*t+.7152*n+.0722*i),100*(.0193*t+.1192*n+.9505*i)]},r.rgb.lab=function(e){var t=r.rgb.xyz(e),n=t[0],i=t[1],a=t[2];return i/=100,a/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(n-i),200*(i-(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116))]},r.hsl.rgb=function(e){var t,n,i,r,a,o=e[0]/360,l=e[1]/100,s=e[2]/100;if(0===l)return[a=255*s,a,a];t=2*s-(n=s<.5?s*(1+l):s+l-s*l),r=[0,0,0];for(var d=0;d<3;d++)(i=o+1/3*-(d-1))<0&&i++,i>1&&i--,a=6*i<1?t+6*(n-t)*i:2*i<1?n:3*i<2?t+(n-t)*(2/3-i)*6:t,r[d]=255*a;return r},r.hsl.hsv=function(e){var t=e[0],n=e[1]/100,i=e[2]/100,r=n,a=Math.max(i,.01);return n*=(i*=2)<=1?i:2-i,r*=a<=1?a:2-a,[t,100*(0===i?2*r/(a+r):2*n/(i+n)),(i+n)/2*100]},r.hsv.rgb=function(e){var t=e[0]/60,n=e[1]/100,i=e[2]/100,r=Math.floor(t)%6,a=t-Math.floor(t),o=255*i*(1-n),l=255*i*(1-n*a),s=255*i*(1-n*(1-a));switch(i*=255,r){case 0:return[i,s,o];case 1:return[l,i,o];case 2:return[o,i,s];case 3:return[o,l,i];case 4:return[s,o,i];case 5:return[i,o,l]}},r.hsv.hsl=function(e){var t,n,i,r=e[0],a=e[1]/100,o=e[2]/100,l=Math.max(o,.01);return i=(2-a)*o,n=a*l,[r,100*(n=(n/=(t=(2-a)*l)<=1?t:2-t)||0),100*(i/=2)]},r.hwb.rgb=function(e){var t,n,i,r,a,o,l,s=e[0]/360,d=e[1]/100,c=e[2]/100,u=d+c;switch(u>1&&(d/=u,c/=u),i=6*s-(t=Math.floor(6*s)),0!=(1&t)&&(i=1-i),r=d+i*((n=1-c)-d),t){default:case 6:case 0:a=n,o=r,l=d;break;case 1:a=r,o=n,l=d;break;case 2:a=d,o=n,l=r;break;case 3:a=d,o=r,l=n;break;case 4:a=r,o=d,l=n;break;case 5:a=n,o=d,l=r}return[255*a,255*o,255*l]},r.cmyk.rgb=function(e){var t=e[0]/100,n=e[1]/100,i=e[2]/100,r=e[3]/100;return[255*(1-Math.min(1,t*(1-r)+r)),255*(1-Math.min(1,n*(1-r)+r)),255*(1-Math.min(1,i*(1-r)+r))]},r.xyz.rgb=function(e){var t,n,i,r=e[0]/100,a=e[1]/100,o=e[2]/100;return n=-.9689*r+1.8758*a+.0415*o,i=.0557*r+-.204*a+1.057*o,t=(t=3.2406*r+-1.5372*a+-.4986*o)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:12.92*i,[255*(t=Math.min(Math.max(0,t),1)),255*(n=Math.min(Math.max(0,n),1)),255*(i=Math.min(Math.max(0,i),1))]},r.xyz.lab=function(e){var t=e[0],n=e[1],i=e[2];return n/=100,i/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(t-n),200*(n-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]},r.lab.xyz=function(e){var t,n,i,r=e[0];t=e[1]/500+(n=(r+16)/116),i=n-e[2]/200;var a=Math.pow(n,3),o=Math.pow(t,3),l=Math.pow(i,3);return n=a>.008856?a:(n-16/116)/7.787,t=o>.008856?o:(t-16/116)/7.787,i=l>.008856?l:(i-16/116)/7.787,[t*=95.047,n*=100,i*=108.883]},r.lab.lch=function(e){var t,n=e[0],i=e[1],r=e[2];return(t=360*Math.atan2(r,i)/2/Math.PI)<0&&(t+=360),[n,Math.sqrt(i*i+r*r),t]},r.lch.lab=function(e){var t,n=e[0],i=e[1];return t=e[2]/360*2*Math.PI,[n,i*Math.cos(t),i*Math.sin(t)]},r.rgb.ansi16=function(e){var t=e[0],n=e[1],i=e[2],a=1 in arguments?arguments[1]:r.rgb.hsv(e)[2];if(0===(a=Math.round(a/50)))return 30;var o=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return 2===a&&(o+=60),o},r.hsv.ansi16=function(e){return r.rgb.ansi16(r.hsv.rgb(e),e[2])},r.rgb.ansi256=function(e){var t=e[0],n=e[1],i=e[2];return t===n&&n===i?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(i/255*5)},r.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var n=.5*(1+~~(e>50));return[(1&t)*n*255,(t>>1&1)*n*255,(t>>2&1)*n*255]},r.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var n;return e-=16,[Math.floor(e/36)/5*255,Math.floor((n=e%36)/6)/5*255,n%6/5*255]},r.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},r.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var n=t[0];3===t[0].length&&(n=n.split("").map(function(e){return e+e}).join(""));var i=parseInt(n,16);return[i>>16&255,i>>8&255,255&i]},r.rgb.hcg=function(e){var t,n=e[0]/255,i=e[1]/255,r=e[2]/255,a=Math.max(Math.max(n,i),r),o=Math.min(Math.min(n,i),r),l=a-o;return t=l<=0?0:a===n?(i-r)/l%6:a===i?2+(r-n)/l:4+(n-i)/l+4,t/=6,[360*(t%=1),100*l,100*(l<1?o/(1-l):0)]},r.hsl.hcg=function(e){var t=e[1]/100,n=e[2]/100,i=1,r=0;return(i=n<.5?2*t*n:2*t*(1-n))<1&&(r=(n-.5*i)/(1-i)),[e[0],100*i,100*r]},r.hsv.hcg=function(e){var t=e[1]/100,n=e[2]/100,i=t*n,r=0;return i<1&&(r=(n-i)/(1-i)),[e[0],100*i,100*r]},r.hcg.rgb=function(e){var t=e[0]/360,n=e[1]/100,i=e[2]/100;if(0===n)return[255*i,255*i,255*i];var r,a=[0,0,0],o=t%1*6,l=o%1,s=1-l;switch(Math.floor(o)){case 0:a[0]=1,a[1]=l,a[2]=0;break;case 1:a[0]=s,a[1]=1,a[2]=0;break;case 2:a[0]=0,a[1]=1,a[2]=l;break;case 3:a[0]=0,a[1]=s,a[2]=1;break;case 4:a[0]=l,a[1]=0,a[2]=1;break;default:a[0]=1,a[1]=0,a[2]=s}return r=(1-n)*i,[255*(n*a[0]+r),255*(n*a[1]+r),255*(n*a[2]+r)]},r.hcg.hsv=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t),i=0;return n>0&&(i=t/n),[e[0],100*i,100*n]},r.hcg.hsl=function(e){var t=e[1]/100,n=e[2]/100*(1-t)+.5*t,i=0;return n>0&&n<.5?i=t/(2*n):n>=.5&&n<1&&(i=t/(2*(1-n))),[e[0],100*i,100*n]},r.hcg.hwb=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]},r.hwb.hcg=function(e){var t=e[1]/100,n=1-e[2]/100,i=n-t,r=0;return i<1&&(r=(n-i)/(1-i)),[e[0],100*i,100*r]},r.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},r.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},r.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},r.gray.hsl=r.gray.hsv=function(e){return[0,0,e[0]]},r.gray.hwb=function(e){return[0,100,e[0]]},r.gray.cmyk=function(e){return[0,0,0,e[0]]},r.gray.lab=function(e){return[e[0],0,0]},r.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n},r.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}});function i(e){var t=function(){for(var e={},t=Object.keys(n),i=t.length,r=0;r<i;r++)e[t[r]]={distance:-1,parent:null};return e}(),i=[e];for(t[e].distance=0;i.length;)for(var r=i.pop(),a=Object.keys(n[r]),o=a.length,l=0;l<o;l++){var s=a[l],d=t[s];-1===d.distance&&(d.distance=t[r].distance+1,d.parent=r,i.unshift(s))}return t}function r(e,t){return function(n){return t(e(n))}}function a(e,t){for(var i=[t[e].parent,e],a=n[t[e].parent][e],o=t[e].parent;t[o].parent;)i.unshift(t[o].parent),a=r(n[t[o].parent][o],a),o=t[o].parent;return a.conversion=i,a}n.rgb,n.hsl,n.hsv,n.hwb,n.cmyk,n.xyz,n.lab,n.lch,n.hex,n.keyword,n.ansi16,n.ansi256,n.hcg,n.apple,n.gray;var o={};Object.keys(n).forEach(function(e){o[e]={},Object.defineProperty(o[e],"channels",{value:n[e].channels}),Object.defineProperty(o[e],"labels",{value:n[e].labels});var t=function(e){for(var t=i(e),n={},r=Object.keys(t),o=r.length,l=0;l<o;l++){var s=r[l];null!==t[s].parent&&(n[s]=a(s,t))}return n}(e);Object.keys(t).forEach(function(n){var i=t[n];o[e][n]=function(e){var t=function(t){if(null==t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var n=e(t);if("object"==typeof n)for(var i=n.length,r=0;r<i;r++)n[r]=Math.round(n[r]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}(i),o[e][n].raw=function(e){var t=function(t){return null==t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(i)})});var l=o,s={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},d={getRgba:c,getHsla:u,getRgb:function(e){var t=c(e);return t&&t.slice(0,3)},getHsl:function(e){var t=u(e);return t&&t.slice(0,3)},getHwb:p,getAlpha:function(e){var t=c(e);return t||(t=u(e))||(t=p(e))?t[3]:void 0},hexString:function(e,t){return t=void 0!==t&&3===e.length?t:e[3],"#"+b(e[0])+b(e[1])+b(e[2])+(t>=0&&t<1?b(Math.round(255*t)):"")},rgbString:function(e,t){return t<1||e[3]&&e[3]<1?m(e,t):"rgb("+e[0]+", "+e[1]+", "+e[2]+")"},rgbaString:m,percentString:function(e,t){if(t<1||e[3]&&e[3]<1)return f(e,t);var n=Math.round(e[0]/255*100),i=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return"rgb("+n+"%, "+i+"%, "+r+"%)"},percentaString:f,hslString:function(e,t){return t<1||e[3]&&e[3]<1?h(e,t):"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)"},hslaString:h,hwbString:function(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+(void 0!==t&&1!==t?", "+t:"")+")"},keyword:function(e){return v[e.slice(0,3)]}};function c(e){if(e){var t=[0,0,0],n=1,i=e.match(/^#([a-fA-F0-9]{3,4})$/i),r="";if(i){r=(i=i[1])[3];for(var a=0;a<t.length;a++)t[a]=parseInt(i[a]+i[a],16);r&&(n=Math.round(parseInt(r+r,16)/255*100)/100)}else if(i=e.match(/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i)){for(r=i[2],i=i[1],a=0;a<t.length;a++)t[a]=parseInt(i.slice(2*a,2*a+2),16);r&&(n=Math.round(parseInt(r,16)/255*100)/100)}else if(i=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(a=0;a<t.length;a++)t[a]=parseInt(i[a+1]);n=parseFloat(i[4])}else if(i=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(a=0;a<t.length;a++)t[a]=Math.round(2.55*parseFloat(i[a+1]));n=parseFloat(i[4])}else if(i=e.match(/(\w+)/)){if("transparent"==i[1])return[0,0,0,0];if(!(t=s[i[1]]))return}for(a=0;a<t.length;a++)t[a]=g(t[a],0,255);return n=n||0==n?g(n,0,1):1,t[3]=n,t}}function u(e){if(e){var t=e.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var n=parseFloat(t[4]);return[g(parseInt(t[1]),0,360),g(parseFloat(t[2]),0,100),g(parseFloat(t[3]),0,100),g(isNaN(n)?1:n,0,1)]}}}function p(e){if(e){var t=e.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var n=parseFloat(t[4]);return[g(parseInt(t[1]),0,360),g(parseFloat(t[2]),0,100),g(parseFloat(t[3]),0,100),g(isNaN(n)?1:n,0,1)]}}}function m(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+t+")"}function f(e,t){return"rgba("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%, "+(t||e[3]||1)+")"}function h(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+t+")"}function g(e,t,n){return Math.min(Math.max(t,e),n)}function b(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}var v={};for(var y in s)v[s[y]]=y;var x=function e(t){return t instanceof e?t:this instanceof e?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},"string"==typeof t?(n=d.getRgba(t))?this.setValues("rgb",n):(n=d.getHsla(t))?this.setValues("hsl",n):(n=d.getHwb(t))&&this.setValues("hwb",n):"object"==typeof t&&(void 0!==(n=t).r||void 0!==n.red?this.setValues("rgb",n):void 0!==n.l||void 0!==n.lightness?this.setValues("hsl",n):void 0!==n.v||void 0!==n.value?this.setValues("hsv",n):void 0!==n.w||void 0!==n.whiteness?this.setValues("hwb",n):void 0===n.c&&void 0===n.cyan||this.setValues("cmyk",n)),void 0):new e(t);var n};x.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var e=this.values;return 1!==e.alpha?e.hwb.concat([e.alpha]):e.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var e=this.values;return e.rgb.concat([e.alpha])},hslaArray:function(){var e=this.values;return e.hsl.concat([e.alpha])},alpha:function(e){return void 0===e?this.values.alpha:(this.setValues("alpha",e),this)},red:function(e){return this.setChannel("rgb",0,e)},green:function(e){return this.setChannel("rgb",1,e)},blue:function(e){return this.setChannel("rgb",2,e)},hue:function(e){return e&&(e=(e%=360)<0?360+e:e),this.setChannel("hsl",0,e)},saturation:function(e){return this.setChannel("hsl",1,e)},lightness:function(e){return this.setChannel("hsl",2,e)},saturationv:function(e){return this.setChannel("hsv",1,e)},whiteness:function(e){return this.setChannel("hwb",1,e)},blackness:function(e){return this.setChannel("hwb",2,e)},value:function(e){return this.setChannel("hsv",2,e)},cyan:function(e){return this.setChannel("cmyk",0,e)},magenta:function(e){return this.setChannel("cmyk",1,e)},yellow:function(e){return this.setChannel("cmyk",2,e)},black:function(e){return this.setChannel("cmyk",3,e)},hexString:function(){return d.hexString(this.values.rgb)},rgbString:function(){return d.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return d.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return d.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return d.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return d.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return d.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return d.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var e=this.values.rgb;return e[0]<<16|e[1]<<8|e[2]},luminosity:function(){for(var e=this.values.rgb,t=[],n=0;n<e.length;n++){var i=e[n]/255;t[n]=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},dark:function(){var e=this.values.rgb;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var e=[],t=0;t<3;t++)e[t]=255-this.values.rgb[t];return this.setValues("rgb",e),this},lighten:function(e){var t=this.values.hsl;return t[2]+=t[2]*e,this.setValues("hsl",t),this},darken:function(e){var t=this.values.hsl;return t[2]-=t[2]*e,this.setValues("hsl",t),this},saturate:function(e){var t=this.values.hsl;return t[1]+=t[1]*e,this.setValues("hsl",t),this},desaturate:function(e){var t=this.values.hsl;return t[1]-=t[1]*e,this.setValues("hsl",t),this},whiten:function(e){var t=this.values.hwb;return t[1]+=t[1]*e,this.setValues("hwb",t),this},blacken:function(e){var t=this.values.hwb;return t[2]+=t[2]*e,this.setValues("hwb",t),this},greyscale:function(){var e=this.values.rgb,t=.3*e[0]+.59*e[1]+.11*e[2];return this.setValues("rgb",[t,t,t]),this},clearer:function(e){var t=this.values.alpha;return this.setValues("alpha",t-t*e),this},opaquer:function(e){var t=this.values.alpha;return this.setValues("alpha",t+t*e),this},rotate:function(e){var t=this.values.hsl,n=(t[0]+e)%360;return t[0]=n<0?360+n:n,this.setValues("hsl",t),this},mix:function(e,t){var n=e,i=void 0===t?.5:t,r=2*i-1,a=this.alpha()-n.alpha(),o=((r*a==-1?r:(r+a)/(1+r*a))+1)/2,l=1-o;return this.rgb(o*this.red()+l*n.red(),o*this.green()+l*n.green(),o*this.blue()+l*n.blue()).alpha(this.alpha()*i+n.alpha()*(1-i))},toJSON:function(){return this.rgb()},clone:function(){var e,t,n=new x,i=this.values,r=n.values;for(var a in i)i.hasOwnProperty(a)&&(e=i[a],"[object Array]"===(t={}.toString.call(e))?r[a]=e.slice(0):"[object Number]"===t?r[a]=e:console.error("unexpected color value:",e));return n}},x.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},x.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},x.prototype.getValues=function(e){for(var t=this.values,n={},i=0;i<e.length;i++)n[e.charAt(i)]=t[e][i];return 1!==t.alpha&&(n.a=t.alpha),n},x.prototype.setValues=function(e,t){var n,i,r=this.values,a=this.spaces,o=this.maxes,s=1;if(this.valid=!0,"alpha"===e)s=t;else if(t.length)r[e]=t.slice(0,e.length),s=t[e.length];else if(void 0!==t[e.charAt(0)]){for(n=0;n<e.length;n++)r[e][n]=t[e.charAt(n)];s=t.a}else if(void 0!==t[a[e][0]]){var d=a[e];for(n=0;n<e.length;n++)r[e][n]=t[d[n]];s=t.alpha}if(r.alpha=Math.max(0,Math.min(1,void 0===s?r.alpha:s)),"alpha"===e)return!1;for(n=0;n<e.length;n++)i=Math.max(0,Math.min(o[e][n],r[e][n])),r[e][n]=Math.round(i);for(var c in a)c!==e&&(r[c]=l[e][c](r[e]));return!0},x.prototype.setSpace=function(e,t){var n=t[0];return void 0===n?this.getValues(e):("number"==typeof n&&(n=Array.prototype.slice.call(t)),this.setValues(e,n),this)},x.prototype.setChannel=function(e,t,n){var i=this.values[e];return void 0===n?i[t]:(n===i[t]||(i[t]=n,this.setValues(e,i)),this)},"undefined"!=typeof window&&(window.Color=x);var S=x;function w(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}var C,E={noop:function(){},uid:(C=0,function(){return C++}),isNullOrUndef:function(e){return null==e},isArray:function(e){if(Array.isArray&&Array.isArray(e))return!0;var t=Object.prototype.toString.call(e);return"[object"===t.substr(0,7)&&"Array]"===t.substr(-6)},isObject:function(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)},isFinite:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return("number"==typeof e||e instanceof Number)&&isFinite(e)}),valueOrDefault:function(e,t){return void 0===e?t:e},valueAtIndexOrDefault:function(e,t,n){return E.valueOrDefault(E.isArray(e)?e[t]:e,n)},callback:function(e,t,n){if(e&&"function"==typeof e.call)return e.apply(n,t)},each:function(e,t,n,i){var r,a,o;if(E.isArray(e))if(a=e.length,i)for(r=a-1;r>=0;r--)t.call(n,e[r],r);else for(r=0;r<a;r++)t.call(n,e[r],r);else if(E.isObject(e))for(a=(o=Object.keys(e)).length,r=0;r<a;r++)t.call(n,e[o[r]],o[r])},arrayEquals:function(e,t){var n,i,r,a;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(r=e[n],a=t[n],r instanceof Array&&a instanceof Array){if(!E.arrayEquals(r,a))return!1}else if(r!==a)return!1;return!0},clone:function(e){if(E.isArray(e))return e.map(E.clone);if(E.isObject(e)){for(var t=Object.create(e),n=Object.keys(e),i=n.length,r=0;r<i;++r)t[n[r]]=E.clone(e[n[r]]);return t}return e},_merger:function(e,t,n,i){if(w(e)){var r=t[e],a=n[e];E.isObject(r)&&E.isObject(a)?E.merge(r,a,i):t[e]=E.clone(a)}},_mergerIf:function(e,t,n){if(w(e)){var i=t[e],r=n[e];E.isObject(i)&&E.isObject(r)?E.mergeIf(i,r):t.hasOwnProperty(e)||(t[e]=E.clone(r))}},merge:function(e,t,n){var i,r,a,o,l,s=E.isArray(t)?t:[t],d=s.length;if(!E.isObject(e))return e;for(i=(n=n||{}).merger||E._merger,r=0;r<d;++r)if(t=s[r],E.isObject(t))for(l=0,o=(a=Object.keys(t)).length;l<o;++l)i(a[l],e,t,n);return e},mergeIf:function(e,t){return E.merge(e,t,{merger:E._mergerIf})},extend:Object.assign||function(e){return E.merge(e,[].slice.call(arguments,1),{merger:function(e,t,n){t[e]=n[e]}})},inherits:function(e){var t=this,n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},i=function(){this.constructor=n};return i.prototype=t.prototype,n.prototype=new i,n.extend=E.inherits,e&&E.extend(n.prototype,e),n.__super__=t.prototype,n},_deprecated:function(e,t,n,i){void 0!==t&&console.warn(e+': "'+n+'" is deprecated. Please use "'+i+'" instead')}},I=E;E.callCallback=E.callback,E.indexOf=function(e,t,n){return Array.prototype.indexOf.call(e,t,n)},E.getValueOrDefault=E.valueOrDefault,E.getValueAtIndexOrDefault=E.valueAtIndexOrDefault;var T={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,n=0,i=1;return 0===e?0:1===e?1:(n||(n=.3),i<1?(i=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/i),-i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n))},easeOutElastic:function(e){var t=1.70158,n=0,i=1;return 0===e?0:1===e?1:(n||(n=.3),i<1?(i=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},easeInOutElastic:function(e){var t=1.70158,n=0,i=1;return 0===e?0:2==(e/=.5)?1:(n||(n=.45),i<1?(i=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/i),e<1?i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*-.5:i*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-T.easeOutBounce(1-e)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*T.easeInBounce(2*e):.5*T.easeOutBounce(2*e-1)+.5}},M={effects:T};I.easingEffects=T;var D=Math.PI,k=D/180,A=2*D,F=D/2,P=D/4,_=2*D/3,N={clear:function(e){e.ctx.clearRect(0,0,e.width,e.height)},roundedRect:function(e,t,n,i,r,a){if(a){var o=Math.min(a,r/2,i/2),l=t+o,s=n+o,d=t+i-o,c=n+r-o;e.moveTo(t,s),l<d&&s<c?(e.arc(l,s,o,-D,-F),e.arc(d,s,o,-F,0),e.arc(d,c,o,0,F),e.arc(l,c,o,F,D)):l<d?(e.moveTo(l,n),e.arc(d,s,o,-F,F),e.arc(l,s,o,F,D+F)):s<c?(e.arc(l,s,o,-D,0),e.arc(l,c,o,0,D)):e.arc(l,s,o,-D,D),e.closePath(),e.moveTo(t,n)}else e.rect(t,n,i,r)},drawPoint:function(e,t,n,i,r,a){var o,l,s,d,c,u=(a||0)*k;if(t&&"object"==typeof t&&("[object HTMLImageElement]"===(o=t.toString())||"[object HTMLCanvasElement]"===o))return e.save(),e.translate(i,r),e.rotate(u),e.drawImage(t,-t.width/2,-t.height/2,t.width,t.height),e.restore(),void 0;if(!(isNaN(n)||n<=0)){switch(e.beginPath(),t){default:e.arc(i,r,n,0,A),e.closePath();break;case"triangle":e.moveTo(i+Math.sin(u)*n,r-Math.cos(u)*n),u+=_,e.lineTo(i+Math.sin(u)*n,r-Math.cos(u)*n),u+=_,e.lineTo(i+Math.sin(u)*n,r-Math.cos(u)*n),e.closePath();break;case"rectRounded":d=n-(c=.516*n),l=Math.cos(u+P)*d,s=Math.sin(u+P)*d,e.arc(i-l,r-s,c,u-D,u-F),e.arc(i+s,r-l,c,u-F,u),e.arc(i+l,r+s,c,u,u+F),e.arc(i-s,r+l,c,u+F,u+D),e.closePath();break;case"rect":if(!a){d=Math.SQRT1_2*n,e.rect(i-d,r-d,2*d,2*d);break}u+=P;case"rectRot":l=Math.cos(u)*n,s=Math.sin(u)*n,e.moveTo(i-l,r-s),e.lineTo(i+s,r-l),e.lineTo(i+l,r+s),e.lineTo(i-s,r+l),e.closePath();break;case"crossRot":u+=P;case"cross":l=Math.cos(u)*n,s=Math.sin(u)*n,e.moveTo(i-l,r-s),e.lineTo(i+l,r+s),e.moveTo(i+s,r-l),e.lineTo(i-s,r+l);break;case"star":l=Math.cos(u)*n,s=Math.sin(u)*n,e.moveTo(i-l,r-s),e.lineTo(i+l,r+s),e.moveTo(i+s,r-l),e.lineTo(i-s,r+l),u+=P,l=Math.cos(u)*n,s=Math.sin(u)*n,e.moveTo(i-l,r-s),e.lineTo(i+l,r+s),e.moveTo(i+s,r-l),e.lineTo(i-s,r+l);break;case"line":l=Math.cos(u)*n,s=Math.sin(u)*n,e.moveTo(i-l,r-s),e.lineTo(i+l,r+s);break;case"dash":e.moveTo(i,r),e.lineTo(i+Math.cos(u)*n,r+Math.sin(u)*n)}e.fill(),e.stroke()}},_isPointInArea:function(e,t){return e.x>t.left-1e-6&&e.x<t.right+1e-6&&e.y>t.top-1e-6&&e.y<t.bottom+1e-6},clipArea:function(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()},unclipArea:function(e){e.restore()},lineTo:function(e,t,n,i){var r=n.steppedLine;if(r){if("middle"===r){var a=(t.x+n.x)/2;e.lineTo(a,i?n.y:t.y),e.lineTo(a,i?t.y:n.y)}else"after"===r&&!i||"after"!==r&&i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);return e.lineTo(n.x,n.y),void 0}if(!n.tension)return e.lineTo(n.x,n.y),void 0;e.bezierCurveTo(i?t.controlPointPreviousX:t.controlPointNextX,i?t.controlPointPreviousY:t.controlPointNextY,i?n.controlPointNextX:n.controlPointPreviousX,i?n.controlPointNextY:n.controlPointPreviousY,n.x,n.y)}},L=N;I.clear=N.clear,I.drawRoundedRectangle=function(e){e.beginPath(),N.roundedRect.apply(N,arguments)};var O={_set:function(e,t){return I.merge(this[e]||(this[e]={}),t)}};O._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var B=O,R=I.valueOrDefault,j={toLineHeight:function(e,t){var n=(""+e).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e},toPadding:function(e){var t,n,i,r;return I.isObject(e)?(t=+e.top||0,n=+e.right||0,i=+e.bottom||0,r=+e.left||0):t=n=i=r=+e||0,{top:t,right:n,bottom:i,left:r,height:t+i,width:r+n}},_parseFont:function(e){var t=B.global,n=R(e.fontSize,t.defaultFontSize),i={family:R(e.fontFamily,t.defaultFontFamily),lineHeight:I.options.toLineHeight(R(e.lineHeight,t.defaultLineHeight),n),size:n,style:R(e.fontStyle,t.defaultFontStyle),weight:null,string:""};return i.string=function(e){return!e||I.isNullOrUndef(e.size)||I.isNullOrUndef(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(i),i},resolve:function(e,t,n,i){var r,a,o,l=!0;for(r=0,a=e.length;r<a;++r)if(void 0!==(o=e[r])&&(void 0!==t&&"function"==typeof o&&(o=o(t),l=!1),void 0!==n&&I.isArray(o)&&(o=o[n],l=!1),void 0!==o))return i&&!l&&(i.cacheable=!1),o}},V={_factorize:function(e){var t,n=[],i=Math.sqrt(e);for(t=1;t<i;t++)e%t==0&&(n.push(t),n.push(e/t));return i===(0|i)&&n.push(i),n.sort(function(e,t){return e-t}).pop(),n},log10:Math.log10||function(e){var t=Math.log(e)*Math.LOG10E,n=Math.round(t);return e===Math.pow(10,n)?n:t}},z=V;I.log10=V.log10;var G=I,W=M,q=L,H=j,U=z,$={getRtlAdapter:function(e,t,n){return e?function(e,t){return{x:function(n){return e+e+t-n},setWidth:function(e){t=e},textAlign:function(e){return"center"===e?e:"right"===e?"left":"right"},xPlus:function(e,t){return e-t},leftForLtr:function(e,t){return e-t}}}(t,n):{x:function(e){return e},setWidth:function(e){},textAlign:function(e){return e},xPlus:function(e,t){return e+t},leftForLtr:function(e,t){return e}}},overrideTextDirection:function(e,t){var n,i;"ltr"!==t&&"rtl"!==t||(i=[(n=e.canvas.style).getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)},restoreTextDirection:function(e){var t=e.prevTextDirection;void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}};G.easing=W,G.canvas=q,G.options=H,G.math=U,G.rtl=$;var K=function(e){G.extend(this,e),this.initialize.apply(this,arguments)};G.extend(K.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var e=this;return e._view||(e._view=G.extend({},e._model)),e._start={},e},transition:function(e){var t=this,n=t._model,i=t._start,r=t._view;return n&&1!==e?(r||(r=t._view={}),i||(i=t._start={}),function(e,t,n,i){var r,a,o,l,s,d,c,u,p,m=Object.keys(n);for(r=0,a=m.length;r<a;++r)if(d=n[o=m[r]],t.hasOwnProperty(o)||(t[o]=d),(l=t[o])!==d&&"_"!==o[0]){if(e.hasOwnProperty(o)||(e[o]=l),(c=typeof d)==typeof(s=e[o]))if("string"===c){if((u=S(s)).valid&&(p=S(d)).valid){t[o]=p.mix(u,i).rgbString();continue}}else if(G.isFinite(s)&&G.isFinite(d)){t[o]=s+(d-s)*i;continue}t[o]=d}}(i,r,n,e),t):(t._view=G.extend({},n),t._start=null,t)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return G.isNumber(this._model.x)&&G.isNumber(this._model.y)}}),K.extend=G.inherits;var Y=K,J=Y.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),X=J;Object.defineProperty(J.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(J.prototype,"chartInstance",{get:function(){return this.chart},set:function(e){this.chart=e}}),B._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:G.noop,onComplete:G.noop}});var Q={animations:[],request:null,addAnimation:function(e,t,n,i){var r,a,o=this.animations;for(t.chart=e,t.startTime=Date.now(),t.duration=n,i||(e.animating=!0),r=0,a=o.length;r<a;++r)if(o[r].chart===e)return o[r]=t,void 0;o.push(t),1===o.length&&this.requestAnimationFrame()},cancelAnimation:function(e){var t=G.findIndex(this.animations,function(t){return t.chart===e});-1!==t&&(this.animations.splice(t,1),e.animating=!1)},requestAnimationFrame:function(){var e=this;null===e.request&&(e.request=G.requestAnimFrame.call(window,function(){e.request=null,e.startDigest()}))},startDigest:function(){this.advance(),this.animations.length>0&&this.requestAnimationFrame()},advance:function(){for(var e,t,n,i,r=this.animations,a=0;a<r.length;)t=(e=r[a]).chart,n=e.numSteps,i=Math.floor((Date.now()-e.startTime)/e.duration*n)+1,e.currentStep=Math.min(i,n),G.callback(e.render,[t,e],t),G.callback(e.onAnimationProgress,[e],t),e.currentStep>=n?(G.callback(e.onAnimationComplete,[e],t),t.animating=!1,r.splice(a,1)):++a}},Z=G.options.resolve,ee=["push","pop","shift","splice","unshift"];function te(e,t){var n=e._chartjs;if(n){var i=n.listeners,r=i.indexOf(t);-1!==r&&i.splice(r,1),i.length>0||(ee.forEach(function(t){delete e[t]}),delete e._chartjs)}}var ne=function(e,t){this.initialize(e,t)};G.extend(ne.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(e,t){var n=this;n.chart=e,n.index=t,n.linkScales(),n.addElements(),n._type=n.getMeta().type},updateIndex:function(e){this.index=e},linkScales:function(){var e=this.getMeta(),t=this.chart,n=t.scales,i=this.getDataset(),r=t.options.scales;null!==e.xAxisID&&e.xAxisID in n&&!i.xAxisID||(e.xAxisID=i.xAxisID||r.xAxes[0].id),null!==e.yAxisID&&e.yAxisID in n&&!i.yAxisID||(e.yAxisID=i.yAxisID||r.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(e){return this.chart.scales[e]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&te(this._data,this)},createMetaDataset:function(){var e=this.datasetElementType;return e&&new e({_chart:this.chart,_datasetIndex:this.index})},createMetaData:function(e){var t=this.dataElementType;return t&&new t({_chart:this.chart,_datasetIndex:this.index,_index:e})},addElements:function(){var e,t,n=this.getMeta(),i=this.getDataset().data||[],r=n.data;for(e=0,t=i.length;e<t;++e)r[e]=r[e]||this.createMetaData(e);n.dataset=n.dataset||this.createMetaDataset()},addElementAndReset:function(e){var t=this.createMetaData(e);this.getMeta().data.splice(e,0,t),this.updateElement(t,e,!0)},buildOrUpdateElements:function(){var e=this,t=e.getDataset(),n=t.data||(t.data=[]);e._data!==n&&(e._data&&te(e._data,e),n&&Object.isExtensible(n)&&function(e,t){if(e._chartjs)return e._chartjs.listeners.push(t),void 0;Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),ee.forEach(function(t){var n="onData"+t.charAt(0).toUpperCase()+t.slice(1),i=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:function(){var t=Array.prototype.slice.call(arguments),r=i.apply(this,t);return G.each(e._chartjs.listeners,function(e){"function"==typeof e[n]&&e[n].apply(e,t)}),r}})})}(n,e),e._data=n),e.resyncElements()},_configure:function(){this._config=G.merge(Object.create(null),[this.chart.options.datasets[this._type],this.getDataset()],{merger:function(e,t,n){"_meta"!==e&&"data"!==e&&G._merger(e,t,n)}})},_update:function(e){this._configure(),this._cachedDataOpts=null,this.update(e)},update:G.noop,transition:function(e){for(var t=this.getMeta(),n=t.data||[],i=n.length,r=0;r<i;++r)n[r].transition(e);t.dataset&&t.dataset.transition(e)},draw:function(){var e=this.getMeta(),t=e.data||[],n=t.length,i=0;for(e.dataset&&e.dataset.draw();i<n;++i)t[i].draw()},getStyle:function(e){var t,n=this.getMeta(),i=n.dataset;return this._configure(),i&&void 0===e?t=this._resolveDatasetElementOptions(i||{}):(e=e||0,t=this._resolveDataElementOptions(n.data[e]||{},e)),!1!==t.fill&&null!==t.fill||(t.backgroundColor=t.borderColor),t},_resolveDatasetElementOptions:function(e,t){var n,i,r,a,o=this,l=o.chart,s=o._config,d=e.custom||{},c=l.options.elements[o.datasetElementType.prototype._type]||{},u=o._datasetElementOptions,p={},m={chart:l,dataset:o.getDataset(),datasetIndex:o.index,hover:t};for(n=0,i=u.length;n<i;++n)r=u[n],a=t?"hover"+r.charAt(0).toUpperCase()+r.slice(1):r,p[r]=Z([d[a],s[a],c[a]],m);return p},_resolveDataElementOptions:function(e,t){var n=this,i=e&&e.custom,r=n._cachedDataOpts;if(r&&!i)return r;var a,o,l,s,d=n.chart,c=n._config,u=d.options.elements[n.dataElementType.prototype._type]||{},p=n._dataElementOptions,m={},f={chart:d,dataIndex:t,dataset:n.getDataset(),datasetIndex:n.index},h={cacheable:!i};if(i=i||{},G.isArray(p))for(o=0,l=p.length;o<l;++o)m[s=p[o]]=Z([i[s],c[s],u[s]],f,t,h);else for(o=0,l=(a=Object.keys(p)).length;o<l;++o)m[s=a[o]]=Z([i[s],c[p[s]],c[s],u[s]],f,t,h);return h.cacheable&&(n._cachedDataOpts=Object.freeze(m)),m},removeHoverStyle:function(e){G.merge(e._model,e.$previousStyle||{}),delete e.$previousStyle},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],n=e._index,i=e.custom||{},r=e._model,a=G.getHoverColor;e.$previousStyle={backgroundColor:r.backgroundColor,borderColor:r.borderColor,borderWidth:r.borderWidth},r.backgroundColor=Z([i.hoverBackgroundColor,t.hoverBackgroundColor,a(r.backgroundColor)],void 0,n),r.borderColor=Z([i.hoverBorderColor,t.hoverBorderColor,a(r.borderColor)],void 0,n),r.borderWidth=Z([i.hoverBorderWidth,t.hoverBorderWidth,r.borderWidth],void 0,n)},_removeDatasetHoverStyle:function(){var e=this.getMeta().dataset;e&&this.removeHoverStyle(e)},_setDatasetHoverStyle:function(){var e,t,n,i,r,a,o=this.getMeta().dataset,l={};if(o){for(a=o._model,r=this._resolveDatasetElementOptions(o,!0),e=0,t=(i=Object.keys(r)).length;e<t;++e)l[n=i[e]]=a[n],a[n]=r[n];o.$previousStyle=l}},resyncElements:function(){var e=this.getMeta(),t=this.getDataset().data,n=e.data.length,i=t.length;i<n?e.data.splice(i,n-i):i>n&&this.insertElements(n,i-n)},insertElements:function(e,t){for(var n=0;n<t;++n)this.addElementAndReset(e+n)},onDataPush:function(){var e=arguments.length;this.insertElements(this.getDataset().data.length-e,e)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(e,t){this.getMeta().data.splice(e,t),this.insertElements(e,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),ne.extend=G.inherits;var ie=ne,re=2*Math.PI;function ae(e,t){var n=t.startAngle,i=t.endAngle,r=t.pixelMargin,a=r/t.outerRadius,o=t.x,l=t.y;e.beginPath(),e.arc(o,l,t.outerRadius,n-a,i+a),t.innerRadius>r?(a=r/t.innerRadius,e.arc(o,l,t.innerRadius-r,i+a,n-a,!0)):e.arc(o,l,r,i+Math.PI/2,n-Math.PI/2),e.closePath(),e.clip()}function oe(e,t,n){var i="inner"===t.borderAlign;i?(e.lineWidth=2*t.borderWidth,e.lineJoin="round"):(e.lineWidth=t.borderWidth,e.lineJoin="bevel"),n.fullCircles&&function(e,t,n,i){var r,a=n.endAngle;for(i&&(n.endAngle=n.startAngle+re,ae(e,n),n.endAngle=a,n.endAngle===n.startAngle&&n.fullCircles&&(n.endAngle+=re,n.fullCircles--)),e.beginPath(),e.arc(n.x,n.y,n.innerRadius,n.startAngle+re,n.startAngle,!0),r=0;r<n.fullCircles;++r)e.stroke();for(e.beginPath(),e.arc(n.x,n.y,t.outerRadius,n.startAngle,n.startAngle+re),r=0;r<n.fullCircles;++r)e.stroke()}(e,t,n,i),i&&ae(e,n),e.beginPath(),e.arc(n.x,n.y,t.outerRadius,n.startAngle,n.endAngle),e.arc(n.x,n.y,n.innerRadius,n.endAngle,n.startAngle,!0),e.closePath(),e.stroke()}B._set("global",{elements:{arc:{backgroundColor:B.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var le=Y.extend({_type:"arc",inLabelRange:function(e){var t=this._view;return!!t&&Math.pow(e-t.x,2)<Math.pow(t.radius+t.hoverRadius,2)},inRange:function(e,t){var n=this._view;if(n){for(var i=G.getAngleFromPoint(n,{x:e,y:t}),r=i.angle,a=i.distance,o=n.startAngle,l=n.endAngle;l<o;)l+=re;for(;r>l;)r-=re;for(;r<o;)r+=re;var s=r>=o&&r<=l,d=a>=n.innerRadius&&a<=n.outerRadius;return s&&d}return!1},getCenterPoint:function(){var e=this._view,t=(e.startAngle+e.endAngle)/2,n=(e.innerRadius+e.outerRadius)/2;return{x:e.x+Math.cos(t)*n,y:e.y+Math.sin(t)*n}},getArea:function(){var e=this._view;return Math.PI*((e.endAngle-e.startAngle)/(2*Math.PI))*(Math.pow(e.outerRadius,2)-Math.pow(e.innerRadius,2))},tooltipPosition:function(){var e=this._view,t=e.startAngle+(e.endAngle-e.startAngle)/2,n=(e.outerRadius-e.innerRadius)/2+e.innerRadius;return{x:e.x+Math.cos(t)*n,y:e.y+Math.sin(t)*n}},draw:function(){var e,t=this._chart.ctx,n=this._view,i="inner"===n.borderAlign?.33:0,r={x:n.x,y:n.y,innerRadius:n.innerRadius,outerRadius:Math.max(n.outerRadius-i,0),pixelMargin:i,startAngle:n.startAngle,endAngle:n.endAngle,fullCircles:Math.floor(n.circumference/re)};if(t.save(),t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,r.fullCircles){for(r.endAngle=r.startAngle+re,t.beginPath(),t.arc(r.x,r.y,r.outerRadius,r.startAngle,r.endAngle),t.arc(r.x,r.y,r.innerRadius,r.endAngle,r.startAngle,!0),t.closePath(),e=0;e<r.fullCircles;++e)t.fill();r.endAngle=r.startAngle+n.circumference%re}t.beginPath(),t.arc(r.x,r.y,r.outerRadius,r.startAngle,r.endAngle),t.arc(r.x,r.y,r.innerRadius,r.endAngle,r.startAngle,!0),t.closePath(),t.fill(),n.borderWidth&&oe(t,n,r),t.restore()}}),se=G.valueOrDefault,de=B.global.defaultColor;B._set("global",{elements:{line:{tension:.4,backgroundColor:de,borderWidth:3,borderColor:de,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var ce=Y.extend({_type:"line",draw:function(){var e,t,n,i=this,r=i._view,a=i._chart.ctx,o=r.spanGaps,l=i._children.slice(),s=B.global,d=s.elements.line,c=-1,u=i._loop;if(l.length){if(i._loop){for(e=0;e<l.length;++e)if(t=G.previousItem(l,e),!l[e]._view.skip&&t._view.skip){l=l.slice(e).concat(l.slice(0,e)),u=o;break}u&&l.push(l[0])}for(a.save(),a.lineCap=r.borderCapStyle||d.borderCapStyle,a.setLineDash&&a.setLineDash(r.borderDash||d.borderDash),a.lineDashOffset=se(r.borderDashOffset,d.borderDashOffset),a.lineJoin=r.borderJoinStyle||d.borderJoinStyle,a.lineWidth=se(r.borderWidth,d.borderWidth),a.strokeStyle=r.borderColor||s.defaultColor,a.beginPath(),(n=l[0]._view).skip||(a.moveTo(n.x,n.y),c=0),e=1;e<l.length;++e)n=l[e]._view,t=-1===c?G.previousItem(l,e):l[c],n.skip||(c!==e-1&&!o||-1===c?a.moveTo(n.x,n.y):G.canvas.lineTo(a,t._view,n),c=e);u&&a.closePath(),a.stroke(),a.restore()}}}),ue=G.valueOrDefault,pe=B.global.defaultColor;function me(e){var t=this._view;return!!t&&Math.abs(e-t.x)<t.radius+t.hitRadius}B._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:pe,borderColor:pe,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var fe=Y.extend({_type:"point",inRange:function(e,t){var n=this._view;return!!n&&Math.pow(e-n.x,2)+Math.pow(t-n.y,2)<Math.pow(n.hitRadius+n.radius,2)},inLabelRange:me,inXRange:me,inYRange:function(e){var t=this._view;return!!t&&Math.abs(e-t.y)<t.radius+t.hitRadius},getCenterPoint:function(){var e=this._view;return{x:e.x,y:e.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y,padding:e.radius+e.borderWidth}},draw:function(e){var t=this._view,n=this._chart.ctx,i=t.pointStyle,r=t.rotation,a=t.radius,o=t.x,l=t.y,s=B.global,d=s.defaultColor;t.skip||(void 0===e||G.canvas._isPointInArea(t,e))&&(n.strokeStyle=t.borderColor||d,n.lineWidth=ue(t.borderWidth,s.elements.point.borderWidth),n.fillStyle=t.backgroundColor||d,G.canvas.drawPoint(n,i,a,o,l,r))}}),he=B.global.defaultColor;function ge(e){return e&&void 0!==e.width}function be(e){var t,n,i,r,a;return ge(e)?(a=e.width/2,t=e.x-a,n=e.x+a,i=Math.min(e.y,e.base),r=Math.max(e.y,e.base)):(a=e.height/2,t=Math.min(e.x,e.base),n=Math.max(e.x,e.base),i=e.y-a,r=e.y+a),{left:t,top:i,right:n,bottom:r}}function ve(e,t,n){return e===t?n:e===n?t:e}function ye(e,t,n){var i,r,a,o,l=e.borderWidth,s=function(e){var t=e.borderSkipped,n={};return t?(e.horizontal?e.base>e.x&&(t=ve(t,"left","right")):e.base<e.y&&(t=ve(t,"bottom","top")),n[t]=!0,n):n}(e);return G.isObject(l)?(i=+l.top||0,r=+l.right||0,a=+l.bottom||0,o=+l.left||0):i=r=a=o=+l||0,{t:s.top||i<0?0:i>n?n:i,r:s.right||r<0?0:r>t?t:r,b:s.bottom||a<0?0:a>n?n:a,l:s.left||o<0?0:o>t?t:o}}function xe(e,t,n){var i=null===t,r=null===n,a=!(!e||i&&r)&&be(e);return a&&(i||t>=a.left&&t<=a.right)&&(r||n>=a.top&&n<=a.bottom)}B._set("global",{elements:{rectangle:{backgroundColor:he,borderColor:he,borderSkipped:"bottom",borderWidth:0}}});var Se=Y.extend({_type:"rectangle",draw:function(){var e=this._chart.ctx,t=this._view,n=function(e){var t=be(e),n=t.right-t.left,i=t.bottom-t.top,r=ye(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b}}}(t),i=n.outer,r=n.inner;e.fillStyle=t.backgroundColor,e.fillRect(i.x,i.y,i.w,i.h),i.w===r.w&&i.h===r.h||(e.save(),e.beginPath(),e.rect(i.x,i.y,i.w,i.h),e.clip(),e.fillStyle=t.borderColor,e.rect(r.x,r.y,r.w,r.h),e.fill("evenodd"),e.restore())},height:function(){var e=this._view;return e.base-e.y},inRange:function(e,t){return xe(this._view,e,t)},inLabelRange:function(e,t){var n=this._view;return ge(n)?xe(n,e,null):xe(n,null,t)},inXRange:function(e){return xe(this._view,e,null)},inYRange:function(e){return xe(this._view,null,e)},getCenterPoint:function(){var e,t,n=this._view;return ge(n)?(e=n.x,t=(n.y+n.base)/2):(e=(n.x+n.base)/2,t=n.y),{x:e,y:t}},getArea:function(){var e=this._view;return ge(e)?e.width*Math.abs(e.y-e.base):e.height*Math.abs(e.x-e.base)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y}}}),we={},Ce=le,Ee=ce,Ie=fe,Te=Se;we.Arc=Ce,we.Line=Ee,we.Point=Ie,we.Rectangle=Te;var Me=G._deprecated,De=G.valueOrDefault;function ke(e,t,n){var i,r,a=n.barThickness,o=t.stackCount,l=t.pixels[e],s=G.isNullOrUndef(a)?function(e,t){var n,i,r,a,o=e._length;for(r=1,a=t.length;r<a;++r)o=Math.min(o,Math.abs(t[r]-t[r-1]));for(r=0,a=e.getTicks().length;r<a;++r)i=e.getPixelForTick(r),o=r>0?Math.min(o,Math.abs(i-n)):o,n=i;return o}(t.scale,t.pixels):-1;return G.isNullOrUndef(a)?(i=s*n.categoryPercentage,r=n.barPercentage):(i=a*o,r=1),{chunk:i/o,ratio:r,start:l-i/2}}B._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),B._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});var Ae=ie.extend({dataElementType:we.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var e,t,n=this;ie.prototype.initialize.apply(n,arguments),(e=n.getMeta()).stack=n.getDataset().stack,e.bar=!0,t=n._getIndexScale().options,Me("bar chart",t.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),Me("bar chart",t.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),Me("bar chart",t.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),Me("bar chart",n._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),Me("bar chart",t.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(e){var t,n,i=this.getMeta().data;for(this._ruler=this.getRuler(),t=0,n=i.length;t<n;++t)this.updateElement(i[t],t,e)},updateElement:function(e,t,n){var i=this,r=i.getMeta(),a=i.getDataset(),o=i._resolveDataElementOptions(e,t);e._xScale=i.getScaleForId(r.xAxisID),e._yScale=i.getScaleForId(r.yAxisID),e._datasetIndex=i.index,e._index=t,e._model={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderSkipped:o.borderSkipped,borderWidth:o.borderWidth,datasetLabel:a.label,label:i.chart.data.labels[t]},G.isArray(a.data[t])&&(e._model.borderSkipped=null),i._updateElementGeometry(e,t,n,o),e.pivot()},_updateElementGeometry:function(e,t,n,i){var r=this,a=e._model,o=r._getValueScale(),l=o.getBasePixel(),s=o.isHorizontal(),d=r._ruler||r.getRuler(),c=r.calculateBarValuePixels(r.index,t,i),u=r.calculateBarIndexPixels(r.index,t,d,i);a.horizontal=s,a.base=n?l:c.base,a.x=s?n?l:c.head:u.center,a.y=s?u.center:n?l:c.head,a.height=s?u.size:void 0,a.width=s?void 0:u.size},_getStacks:function(e){var t,n,i=this._getIndexScale(),r=i._getMatchingVisibleMetas(this._type),a=i.options.stacked,o=r.length,l=[];for(t=0;t<o&&(n=r[t],(!1===a||-1===l.indexOf(n.stack)||void 0===a&&void 0===n.stack)&&l.push(n.stack),n.index!==e);++t);return l},getStackCount:function(){return this._getStacks().length},getStackIndex:function(e,t){var n=this._getStacks(e),i=void 0!==t?n.indexOf(t):-1;return-1===i?n.length-1:i},getRuler:function(){var e,t,n=this._getIndexScale(),i=[];for(e=0,t=this.getMeta().data.length;e<t;++e)i.push(n.getPixelForValue(null,e,this.index));return{pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this.getStackCount(),scale:n}},calculateBarValuePixels:function(e,t,n){var i,r,a,o,l,s,d,c=this.chart,u=this._getValueScale(),p=u.isHorizontal(),m=c.data.datasets,f=u._getMatchingVisibleMetas(this._type),h=u._parseValue(m[e].data[t]),g=n.minBarLength,b=u.options.stacked,v=this.getMeta().stack,y=void 0===h.start?0:h.max>=0&&h.min>=0?h.min:h.max,x=void 0===h.start?h.end:h.max>=0&&h.min>=0?h.max-h.min:h.min-h.max,S=f.length;if(b||void 0===b&&void 0!==v)for(i=0;i<S&&(r=f[i]).index!==e;++i)r.stack===v&&(a=void 0===(d=u._parseValue(m[r.index].data[t])).start?d.end:d.min>=0&&d.max>=0?d.max:d.min,(h.min<0&&a<0||h.max>=0&&a>0)&&(y+=a));return o=u.getPixelForValue(y),s=(l=u.getPixelForValue(y+x))-o,void 0!==g&&Math.abs(s)<g&&(s=g,l=x>=0&&!p||x<0&&p?o-g:o+g),{size:s,base:o,head:l,center:l+s/2}},calculateBarIndexPixels:function(e,t,n,i){var r="flex"===i.barThickness?function(e,t,n){var i,r=t.pixels,a=r[e],o=e>0?r[e-1]:null,l=e<r.length-1?r[e+1]:null,s=n.categoryPercentage;return null===o&&(o=a-(null===l?t.end-t.start:l-a)),null===l&&(l=a+a-o),i=a-(a-Math.min(o,l))/2*s,{chunk:Math.abs(l-o)/2*s/t.stackCount,ratio:n.barPercentage,start:i}}(t,n,i):ke(t,n,i),a=this.getStackIndex(e,this.getMeta().stack),o=r.start+r.chunk*a+r.chunk/2,l=Math.min(De(i.maxBarThickness,1/0),r.chunk*r.ratio);return{base:o-l/2,head:o+l/2,center:o,size:l}},draw:function(){var e=this.chart,t=this._getValueScale(),n=this.getMeta().data,i=this.getDataset(),r=n.length,a=0;for(G.canvas.clipArea(e.ctx,e.chartArea);a<r;++a){var o=t._parseValue(i.data[a]);isNaN(o.min)||isNaN(o.max)||n[a].draw()}G.canvas.unclipArea(e.ctx)},_resolveDataElementOptions:function(){var e=this,t=G.extend({},ie.prototype._resolveDataElementOptions.apply(e,arguments)),n=e._getIndexScale().options,i=e._getValueScale().options;return t.barPercentage=De(n.barPercentage,t.barPercentage),t.barThickness=De(n.barThickness,t.barThickness),t.categoryPercentage=De(n.categoryPercentage,t.categoryPercentage),t.maxBarThickness=De(n.maxBarThickness,t.maxBarThickness),t.minBarLength=De(i.minBarLength,t.minBarLength),t}}),Fe=G.valueOrDefault,Pe=G.options.resolve;B._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(e,t){var n=t.datasets[e.datasetIndex].label||"",i=t.datasets[e.datasetIndex].data[e.index];return n+": ("+e.xLabel+", "+e.yLabel+", "+i.r+")"}}}});var _e=ie.extend({dataElementType:we.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(e){var t=this,n=t.getMeta().data;G.each(n,function(n,i){t.updateElement(n,i,e)})},updateElement:function(e,t,n){var i=this,r=i.getMeta(),a=e.custom||{},o=i.getScaleForId(r.xAxisID),l=i.getScaleForId(r.yAxisID),s=i._resolveDataElementOptions(e,t),d=i.getDataset().data[t],c=i.index,u=n?o.getPixelForDecimal(.5):o.getPixelForValue("object"==typeof d?d:NaN,t,c),p=n?l.getBasePixel():l.getPixelForValue(d,t,c);e._xScale=o,e._yScale=l,e._options=s,e._datasetIndex=c,e._index=t,e._model={backgroundColor:s.backgroundColor,borderColor:s.borderColor,borderWidth:s.borderWidth,hitRadius:s.hitRadius,pointStyle:s.pointStyle,rotation:s.rotation,radius:n?0:s.radius,skip:a.skip||isNaN(u)||isNaN(p),x:u,y:p},e.pivot()},setHoverStyle:function(e){var t=e._model,n=e._options,i=G.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=Fe(n.hoverBackgroundColor,i(n.backgroundColor)),t.borderColor=Fe(n.hoverBorderColor,i(n.borderColor)),t.borderWidth=Fe(n.hoverBorderWidth,n.borderWidth),t.radius=n.radius+n.hoverRadius},_resolveDataElementOptions:function(e,t){var n=this,i=n.chart,r=n.getDataset(),a=e.custom||{},o=r.data[t]||{},l=ie.prototype._resolveDataElementOptions.apply(n,arguments),s={chart:i,dataIndex:t,dataset:r,datasetIndex:n.index};return n._cachedDataOpts===l&&(l=G.extend({},l)),l.radius=Pe([a.radius,o.r,n._config.radius,i.options.elements.point.radius],s,t),l}}),Ne=G.valueOrDefault,Le=Math.PI,Oe=2*Le,Be=Le/2;B._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(e){var t,n,i,r=document.createElement("ul"),a=e.data,o=a.datasets,l=a.labels;if(r.setAttribute("class",e.id+"-legend"),o.length)for(t=0,n=o[0].data.length;t<n;++t)(i=r.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=o[0].backgroundColor[t],l[t]&&i.appendChild(document.createTextNode(l[t]));return r.outerHTML},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map(function(n,i){var r=e.getDatasetMeta(0),a=r.controller.getStyle(i);return{text:n,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,hidden:isNaN(t.datasets[0].data[i])||r.data[i].hidden,index:i}}):[]}},onClick:function(e,t){var n,i,r,a=t.index,o=this.chart;for(n=0,i=(o.data.datasets||[]).length;n<i;++n)(r=o.getDatasetMeta(n)).data[a]&&(r.data[a].hidden=!r.data[a].hidden);o.update()}},cutoutPercentage:50,rotation:-Be,circumference:Oe,tooltips:{callbacks:{title:function(){return""},label:function(e,t){var n=t.labels[e.index],i=": "+t.datasets[e.datasetIndex].data[e.index];return G.isArray(n)?(n=n.slice())[0]+=i:n+=i,n}}}});var Re=ie.extend({dataElementType:we.Arc,linkScales:G.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(e){for(var t=0,n=0;n<e;++n)this.chart.isDatasetVisible(n)&&++t;return t},update:function(e){var t,n,i,r,a=this,o=a.chart,l=o.chartArea,s=o.options,d=1,c=1,u=0,p=0,m=a.getMeta(),f=m.data,h=s.cutoutPercentage/100||0,g=s.circumference,b=a._getRingWeight(a.index);if(g<Oe){var v=s.rotation%Oe,y=(v+=v>=Le?-Oe:v<-Le?Oe:0)+g,x=Math.cos(v),S=Math.sin(v),w=Math.cos(y),C=Math.sin(y),E=v<=0&&y>=0||y>=Oe,I=v<=Be&&y>=Be||y>=Oe+Be,T=v<=-Be&&y>=-Be||y>=Le+Be,M=v===-Le||y>=Le?-1:Math.min(x,x*h,w,w*h),D=T?-1:Math.min(S,S*h,C,C*h),k=E?1:Math.max(x,x*h,w,w*h),A=I?1:Math.max(S,S*h,C,C*h);d=(k-M)/2,c=(A-D)/2,u=-(k+M)/2,p=-(A+D)/2}for(i=0,r=f.length;i<r;++i)f[i]._options=a._resolveDataElementOptions(f[i],i);for(o.borderWidth=a.getMaxBorderWidth(),t=(l.right-l.left-o.borderWidth)/d,n=(l.bottom-l.top-o.borderWidth)/c,o.outerRadius=Math.max(Math.min(t,n)/2,0),o.innerRadius=Math.max(o.outerRadius*h,0),o.radiusLength=(o.outerRadius-o.innerRadius)/(a._getVisibleDatasetWeightTotal()||1),o.offsetX=u*o.outerRadius,o.offsetY=p*o.outerRadius,m.total=a.calculateTotal(),a.outerRadius=o.outerRadius-o.radiusLength*a._getRingWeightOffset(a.index),a.innerRadius=Math.max(a.outerRadius-o.radiusLength*b,0),i=0,r=f.length;i<r;++i)a.updateElement(f[i],i,e)},updateElement:function(e,t,n){var i=this,r=i.chart,a=r.chartArea,o=r.options,l=o.animation,s=(a.left+a.right)/2,d=(a.top+a.bottom)/2,c=o.rotation,u=o.rotation,p=i.getDataset(),m=n&&l.animateRotate||e.hidden?0:i.calculateCircumference(p.data[t])*(o.circumference/Oe),f=n&&l.animateScale?0:i.innerRadius,h=n&&l.animateScale?0:i.outerRadius,g=e._options||{};G.extend(e,{_datasetIndex:i.index,_index:t,_model:{backgroundColor:g.backgroundColor,borderColor:g.borderColor,borderWidth:g.borderWidth,borderAlign:g.borderAlign,x:s+r.offsetX,y:d+r.offsetY,startAngle:c,endAngle:u,circumference:m,outerRadius:h,innerRadius:f,label:G.valueAtIndexOrDefault(p.label,t,r.data.labels[t])}});var b=e._model;n&&l.animateRotate||(b.startAngle=0===t?o.rotation:i.getMeta().data[t-1]._model.endAngle,b.endAngle=b.startAngle+b.circumference),e.pivot()},calculateTotal:function(){var e,t=this.getDataset(),n=this.getMeta(),i=0;return G.each(n.data,function(n,r){e=t.data[r],isNaN(e)||n.hidden||(i+=Math.abs(e))}),i},calculateCircumference:function(e){var t=this.getMeta().total;return t>0&&!isNaN(e)?Oe*(Math.abs(e)/t):0},getMaxBorderWidth:function(e){var t,n,i,r,a,o,l,s,d=0,c=this.chart;if(!e)for(t=0,n=c.data.datasets.length;t<n;++t)if(c.isDatasetVisible(t)){e=(i=c.getDatasetMeta(t)).data,t!==this.index&&(a=i.controller);break}if(!e)return 0;for(t=0,n=e.length;t<n;++t)r=e[t],a?(a._configure(),o=a._resolveDataElementOptions(r,t)):o=r._options,"inner"!==o.borderAlign&&(l=o.borderWidth,d=(s=o.hoverBorderWidth)>(d=l>d?l:d)?s:d);return d},setHoverStyle:function(e){var t=e._model,n=e._options,i=G.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=Ne(n.hoverBackgroundColor,i(n.backgroundColor)),t.borderColor=Ne(n.hoverBorderColor,i(n.borderColor)),t.borderWidth=Ne(n.hoverBorderWidth,n.borderWidth)},_getRingWeightOffset:function(e){for(var t=0,n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t},_getRingWeight:function(e){return Math.max(Ne(this.chart.data.datasets[e].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});B._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),B._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var je=Ae.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),Ve=G.valueOrDefault,ze=G.options.resolve,Ge=G.canvas._isPointInArea;function We(e,t){var n=e&&e.options.ticks||{},i=n.reverse,r=void 0===n.min?t:0,a=void 0===n.max?t:0;return{start:i?a:r,end:i?r:a}}function qe(e,t,n){var i=n/2,r=We(e,i),a=We(t,i);return{top:a.end,right:r.end,bottom:a.start,left:r.start}}function He(e){var t,n,i,r;return G.isObject(e)?(t=e.top,n=e.right,i=e.bottom,r=e.left):t=n=i=r=e,{top:t,right:n,bottom:i,left:r}}B._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var Ue=ie.extend({datasetElementType:we.Line,dataElementType:we.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(e){var t,n,i=this,r=i.getMeta(),a=r.dataset,o=r.data||[],l=i.chart.options,s=i._config,d=i._showLine=Ve(s.showLine,l.showLines);for(i._xScale=i.getScaleForId(r.xAxisID),i._yScale=i.getScaleForId(r.yAxisID),d&&(void 0!==s.tension&&void 0===s.lineTension&&(s.lineTension=s.tension),a._scale=i._yScale,a._datasetIndex=i.index,a._children=o,a._model=i._resolveDatasetElementOptions(a),a.pivot()),t=0,n=o.length;t<n;++t)i.updateElement(o[t],t,e);for(d&&0!==a._model.tension&&i.updateBezierControlPoints(),t=0,n=o.length;t<n;++t)o[t].pivot()},updateElement:function(e,t,n){var i,r,a=this,o=a.getMeta(),l=e.custom||{},s=a.getDataset(),d=a.index,c=s.data[t],u=a._xScale,p=a._yScale,m=o.dataset._model,f=a._resolveDataElementOptions(e,t);i=u.getPixelForValue("object"==typeof c?c:NaN,t,d),r=n?p.getBasePixel():a.calculatePointY(c,t,d),e._xScale=u,e._yScale=p,e._options=f,e._datasetIndex=d,e._index=t,e._model={x:i,y:r,skip:l.skip||isNaN(i)||isNaN(r),radius:f.radius,pointStyle:f.pointStyle,rotation:f.rotation,backgroundColor:f.backgroundColor,borderColor:f.borderColor,borderWidth:f.borderWidth,tension:Ve(l.tension,m?m.tension:0),steppedLine:!!m&&m.steppedLine,hitRadius:f.hitRadius}},_resolveDatasetElementOptions:function(e){var t=this,n=t._config,i=e.custom||{},r=t.chart.options,a=r.elements.line,o=ie.prototype._resolveDatasetElementOptions.apply(t,arguments);return o.spanGaps=Ve(n.spanGaps,r.spanGaps),o.tension=Ve(n.lineTension,a.tension),o.steppedLine=ze([i.steppedLine,n.steppedLine,a.stepped]),o.clip=He(Ve(n.clip,qe(t._xScale,t._yScale,o.borderWidth))),o},calculatePointY:function(e,t,n){var i,r,a,o,l,s,d,c=this.chart,u=this._yScale,p=0,m=0;if(u.options.stacked){for(l=+u.getRightValue(e),d=(s=c._getSortedVisibleDatasetMetas()).length,i=0;i<d&&(a=s[i]).index!==n;++i)r=c.data.datasets[a.index],"line"===a.type&&a.yAxisID===u.id&&((o=+u.getRightValue(r.data[t]))<0?m+=o||0:p+=o||0);return l<0?u.getPixelForValue(m+l):u.getPixelForValue(p+l)}return u.getPixelForValue(e)},updateBezierControlPoints:function(){var e,t,n,i,r=this.chart,a=this.getMeta(),o=a.dataset._model,l=r.chartArea,s=a.data||[];function d(e,t,n){return Math.max(Math.min(e,n),t)}if(o.spanGaps&&(s=s.filter(function(e){return!e._model.skip})),"monotone"===o.cubicInterpolationMode)G.splineCurveMonotone(s);else for(e=0,t=s.length;e<t;++e)n=s[e]._model,i=G.splineCurve(G.previousItem(s,e)._model,n,G.nextItem(s,e)._model,o.tension),n.controlPointPreviousX=i.previous.x,n.controlPointPreviousY=i.previous.y,n.controlPointNextX=i.next.x,n.controlPointNextY=i.next.y;if(r.options.elements.line.capBezierPoints)for(e=0,t=s.length;e<t;++e)n=s[e]._model,Ge(n,l)&&(e>0&&Ge(s[e-1]._model,l)&&(n.controlPointPreviousX=d(n.controlPointPreviousX,l.left,l.right),n.controlPointPreviousY=d(n.controlPointPreviousY,l.top,l.bottom)),e<s.length-1&&Ge(s[e+1]._model,l)&&(n.controlPointNextX=d(n.controlPointNextX,l.left,l.right),n.controlPointNextY=d(n.controlPointNextY,l.top,l.bottom)))},draw:function(){var e,t=this.chart,n=this.getMeta(),i=n.data||[],r=t.chartArea,a=t.canvas,o=0,l=i.length;for(this._showLine&&(e=n.dataset._model.clip,G.canvas.clipArea(t.ctx,{left:!1===e.left?0:r.left-e.left,right:!1===e.right?a.width:r.right+e.right,top:!1===e.top?0:r.top-e.top,bottom:!1===e.bottom?a.height:r.bottom+e.bottom}),n.dataset.draw(),G.canvas.unclipArea(t.ctx));o<l;++o)i[o].draw(r)},setHoverStyle:function(e){var t=e._model,n=e._options,i=G.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=Ve(n.hoverBackgroundColor,i(n.backgroundColor)),t.borderColor=Ve(n.hoverBorderColor,i(n.borderColor)),t.borderWidth=Ve(n.hoverBorderWidth,n.borderWidth),t.radius=Ve(n.hoverRadius,n.radius)}}),$e=G.options.resolve;B._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(e){var t,n,i,r=document.createElement("ul"),a=e.data,o=a.datasets,l=a.labels;if(r.setAttribute("class",e.id+"-legend"),o.length)for(t=0,n=o[0].data.length;t<n;++t)(i=r.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=o[0].backgroundColor[t],l[t]&&i.appendChild(document.createTextNode(l[t]));return r.outerHTML},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map(function(n,i){var r=e.getDatasetMeta(0),a=r.controller.getStyle(i);return{text:n,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,hidden:isNaN(t.datasets[0].data[i])||r.data[i].hidden,index:i}}):[]}},onClick:function(e,t){var n,i,r,a=t.index,o=this.chart;for(n=0,i=(o.data.datasets||[]).length;n<i;++n)(r=o.getDatasetMeta(n)).data[a].hidden=!r.data[a].hidden;o.update()}},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return t.labels[e.index]+": "+e.yLabel}}}});var Ke=ie.extend({dataElementType:we.Arc,linkScales:G.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(e){var t,n,i,r=this,a=r.getDataset(),o=r.getMeta(),l=r.chart.options.startAngle||0,s=r._starts=[],d=r._angles=[],c=o.data;for(r._updateRadius(),o.count=r.countVisibleElements(),t=0,n=a.data.length;t<n;t++)s[t]=l,i=r._computeAngle(t),d[t]=i,l+=i;for(t=0,n=c.length;t<n;++t)c[t]._options=r._resolveDataElementOptions(c[t],t),r.updateElement(c[t],t,e)},_updateRadius:function(){var e=this,t=e.chart,n=t.chartArea,i=t.options,r=Math.min(n.right-n.left,n.bottom-n.top);t.outerRadius=Math.max(r/2,0),t.innerRadius=Math.max(i.cutoutPercentage?t.outerRadius/100*i.cutoutPercentage:1,0),t.radiusLength=(t.outerRadius-t.innerRadius)/t.getVisibleDatasetCount(),e.outerRadius=t.outerRadius-t.radiusLength*e.index,e.innerRadius=e.outerRadius-t.radiusLength},updateElement:function(e,t,n){var i=this,r=i.chart,a=i.getDataset(),o=r.options,l=o.animation,s=r.scale,d=r.data.labels,c=s.xCenter,u=s.yCenter,p=o.startAngle,m=e.hidden?0:s.getDistanceFromCenterForValue(a.data[t]),f=i._starts[t],h=f+(e.hidden?0:i._angles[t]),g=l.animateScale?0:s.getDistanceFromCenterForValue(a.data[t]),b=e._options||{};G.extend(e,{_datasetIndex:i.index,_index:t,_scale:s,_model:{backgroundColor:b.backgroundColor,borderColor:b.borderColor,borderWidth:b.borderWidth,borderAlign:b.borderAlign,x:c,y:u,innerRadius:0,outerRadius:n?g:m,startAngle:n&&l.animateRotate?p:f,endAngle:n&&l.animateRotate?p:h,label:G.valueAtIndexOrDefault(d,t,d[t])}}),e.pivot()},countVisibleElements:function(){var e=this.getDataset(),t=this.getMeta(),n=0;return G.each(t.data,function(t,i){isNaN(e.data[i])||t.hidden||n++}),n},setHoverStyle:function(e){var t=e._model,n=e._options,i=G.getHoverColor,r=G.valueOrDefault;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=r(n.hoverBackgroundColor,i(n.backgroundColor)),t.borderColor=r(n.hoverBorderColor,i(n.borderColor)),t.borderWidth=r(n.hoverBorderWidth,n.borderWidth)},_computeAngle:function(e){var t=this,n=this.getMeta().count,i=t.getDataset(),r=t.getMeta();if(isNaN(i.data[e])||r.data[e].hidden)return 0;var a={chart:t.chart,dataIndex:e,dataset:i,datasetIndex:t.index};return $e([t.chart.options.elements.arc.angle,2*Math.PI/n],a,e)}});B._set("pie",G.clone(B.doughnut)),B._set("pie",{cutoutPercentage:0});var Ye=Re,Je=G.valueOrDefault;B._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var Xe=ie.extend({datasetElementType:we.Line,dataElementType:we.Point,linkScales:G.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(e){var t,n,i=this,r=i.getMeta(),a=r.dataset,o=r.data||[],l=i.chart.scale,s=i._config;for(void 0!==s.tension&&void 0===s.lineTension&&(s.lineTension=s.tension),a._scale=l,a._datasetIndex=i.index,a._children=o,a._loop=!0,a._model=i._resolveDatasetElementOptions(a),a.pivot(),t=0,n=o.length;t<n;++t)i.updateElement(o[t],t,e);for(i.updateBezierControlPoints(),t=0,n=o.length;t<n;++t)o[t].pivot()},updateElement:function(e,t,n){var i=this,r=e.custom||{},a=i.getDataset(),o=i.chart.scale,l=o.getPointPositionForValue(t,a.data[t]),s=i._resolveDataElementOptions(e,t),d=i.getMeta().dataset._model,c=n?o.xCenter:l.x,u=n?o.yCenter:l.y;e._scale=o,e._options=s,e._datasetIndex=i.index,e._index=t,e._model={x:c,y:u,skip:r.skip||isNaN(c)||isNaN(u),radius:s.radius,pointStyle:s.pointStyle,rotation:s.rotation,backgroundColor:s.backgroundColor,borderColor:s.borderColor,borderWidth:s.borderWidth,tension:Je(r.tension,d?d.tension:0),hitRadius:s.hitRadius}},_resolveDatasetElementOptions:function(){var e=this,t=e._config,n=e.chart.options,i=ie.prototype._resolveDatasetElementOptions.apply(e,arguments);return i.spanGaps=Je(t.spanGaps,n.spanGaps),i.tension=Je(t.lineTension,n.elements.line.tension),i},updateBezierControlPoints:function(){var e,t,n,i,r=this.getMeta(),a=this.chart.chartArea,o=r.data||[];function l(e,t,n){return Math.max(Math.min(e,n),t)}for(r.dataset._model.spanGaps&&(o=o.filter(function(e){return!e._model.skip})),e=0,t=o.length;e<t;++e)n=o[e]._model,i=G.splineCurve(G.previousItem(o,e,!0)._model,n,G.nextItem(o,e,!0)._model,n.tension),n.controlPointPreviousX=l(i.previous.x,a.left,a.right),n.controlPointPreviousY=l(i.previous.y,a.top,a.bottom),n.controlPointNextX=l(i.next.x,a.left,a.right),n.controlPointNextY=l(i.next.y,a.top,a.bottom)},setHoverStyle:function(e){var t=e._model,n=e._options,i=G.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=Je(n.hoverBackgroundColor,i(n.backgroundColor)),t.borderColor=Je(n.hoverBorderColor,i(n.borderColor)),t.borderWidth=Je(n.hoverBorderWidth,n.borderWidth),t.radius=Je(n.hoverRadius,n.radius)}});B._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(e){return"("+e.xLabel+", "+e.yLabel+")"}}}}),B._set("global",{datasets:{scatter:{showLine:!1}}});var Qe={bar:Ae,bubble:_e,doughnut:Re,horizontalBar:je,line:Ue,polarArea:Ke,pie:Ye,radar:Xe,scatter:Ue};function Ze(e,t){return e.native?{x:e.x,y:e.y}:G.getRelativePosition(e,t)}function et(e,t){var n,i,r,a,o,l,s=e._getSortedVisibleDatasetMetas();for(i=0,a=s.length;i<a;++i)for(r=0,o=(n=s[i].data).length;r<o;++r)(l=n[r])._view.skip||t(l)}function tt(e,t){var n=[];return et(e,function(e){e.inRange(t.x,t.y)&&n.push(e)}),n}function nt(e,t,n,i){var r=Number.POSITIVE_INFINITY,a=[];return et(e,function(e){if(!n||e.inRange(t.x,t.y)){var o=e.getCenterPoint(),l=i(t,o);l<r?(a=[e],r=l):l===r&&a.push(e)}}),a}function it(e){var t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,i){var r=t?Math.abs(e.x-i.x):0,a=n?Math.abs(e.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(a,2))}}function rt(e,t,n){var i=Ze(t,e);n.axis=n.axis||"x";var r=it(n.axis),a=n.intersect?tt(e,i):nt(e,i,!1,r),o=[];return a.length?(e._getSortedVisibleDatasetMetas().forEach(function(e){var t=e.data[a[0]._index];t&&!t._view.skip&&o.push(t)}),o):[]}var at={modes:{single:function(e,t){var n=Ze(t,e),i=[];return et(e,function(e){if(e.inRange(n.x,n.y))return i.push(e),i}),i.slice(0,1)},label:rt,index:rt,dataset:function(e,t,n){var i=Ze(t,e);n.axis=n.axis||"xy";var r=it(n.axis),a=n.intersect?tt(e,i):nt(e,i,!1,r);return a.length>0&&(a=e.getDatasetMeta(a[0]._datasetIndex).data),a},"x-axis":function(e,t){return rt(e,t,{intersect:!1})},point:function(e,t){return tt(e,Ze(t,e))},nearest:function(e,t,n){var i=Ze(t,e);n.axis=n.axis||"xy";var r=it(n.axis);return nt(e,i,n.intersect,r)},x:function(e,t,n){var i=Ze(t,e),r=[],a=!1;return et(e,function(e){e.inXRange(i.x)&&r.push(e),e.inRange(i.x,i.y)&&(a=!0)}),n.intersect&&!a&&(r=[]),r},y:function(e,t,n){var i=Ze(t,e),r=[],a=!1;return et(e,function(e){e.inYRange(i.y)&&r.push(e),e.inRange(i.x,i.y)&&(a=!0)}),n.intersect&&!a&&(r=[]),r}}},ot=G.extend;function lt(e,t){return G.where(e,function(e){return e.pos===t})}function st(e,t){return e.sort(function(e,n){var i=t?n:e,r=t?e:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function dt(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function ct(e,t,n){var i,r,a=n.box,o=e.maxPadding;if(n.size&&(e[n.pos]-=n.size),n.size=n.horizontal?a.height:a.width,e[n.pos]+=n.size,a.getPadding){var l=a.getPadding();o.top=Math.max(o.top,l.top),o.left=Math.max(o.left,l.left),o.bottom=Math.max(o.bottom,l.bottom),o.right=Math.max(o.right,l.right)}if(i=t.outerWidth-dt(o,e,"left","right"),r=t.outerHeight-dt(o,e,"top","bottom"),i!==e.w||r!==e.h){e.w=i,e.h=r;var s=n.horizontal?[i,e.w]:[r,e.h];return!(s[0]===s[1]||isNaN(s[0])&&isNaN(s[1]))}}function ut(e,t){var n=t.maxPadding;function i(e){var i={left:0,top:0,right:0,bottom:0};return e.forEach(function(e){i[e]=Math.max(t[e],n[e])}),i}return i(e?["left","right"]:["top","bottom"])}function pt(e,t,n){var i,r,a,o,l,s,d=[];for(i=0,r=e.length;i<r;++i)(o=(a=e[i]).box).update(a.width||t.w,a.height||t.h,ut(a.horizontal,t)),ct(t,n,a)&&(s=!0,d.length&&(l=!0)),o.fullWidth||d.push(a);return l&&pt(d,t,n)||s}function mt(e,t,n){var i,r,a,o,l=n.padding,s=t.x,d=t.y;for(i=0,r=e.length;i<r;++i)o=(a=e[i]).box,a.horizontal?(o.left=o.fullWidth?l.left:t.left,o.right=o.fullWidth?n.outerWidth-l.right:t.left+t.w,o.top=d,o.bottom=d+o.height,o.width=o.right-o.left,d=o.bottom):(o.left=s,o.right=s+o.width,o.top=t.top,o.bottom=t.top+t.h,o.height=o.bottom-o.top,s=o.right);t.x=s,t.y=d}B._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var ft,ht={defaults:{},addBox:function(e,t){e.boxes||(e.boxes=[]),t.fullWidth=t.fullWidth||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw:function(){t.draw.apply(t,arguments)}}]},e.boxes.push(t)},removeBox:function(e,t){var n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure:function(e,t,n){for(var i,r=["fullWidth","position","weight"],a=r.length,o=0;o<a;++o)i=r[o],n.hasOwnProperty(i)&&(t[i]=n[i])},update:function(e,t,n){if(e){var i=e.options.layout||{},r=G.options.toPadding(i.padding),a=t-r.width,o=n-r.height,l=function(e){var t=function(e){var t,n,i,r=[];for(t=0,n=(e||[]).length;t<n;++t)i=e[t],r.push({index:t,box:i,pos:i.position,horizontal:i.isHorizontal(),weight:i.weight});return r}(e),n=st(lt(t,"left"),!0),i=st(lt(t,"right")),r=st(lt(t,"top"),!0),a=st(lt(t,"bottom"));return{leftAndTop:n.concat(r),rightAndBottom:i.concat(a),chartArea:lt(t,"chartArea"),vertical:n.concat(i),horizontal:r.concat(a)}}(e.boxes),s=l.vertical,d=l.horizontal,c=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:a,vBoxMaxWidth:a/2/s.length,hBoxMaxHeight:o/2}),u=ot({maxPadding:ot({},r),w:a,h:o,x:r.left,y:r.top},r);!function(e,t){var n,i,r;for(n=0,i=e.length;n<i;++n)(r=e[n]).width=r.horizontal?r.box.fullWidth&&t.availableWidth:t.vBoxMaxWidth,r.height=r.horizontal&&t.hBoxMaxHeight}(s.concat(d),c),pt(s,u,c),pt(d,u,c)&&pt(s,u,c),function(e){var t=e.maxPadding;function n(n){var i=Math.max(t[n]-e[n],0);return e[n]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(u),mt(l.leftAndTop,u,c),u.x+=u.w,u.y+=u.h,mt(l.rightAndBottom,u,c),e.chartArea={left:u.left,top:u.top,right:u.left+u.w,bottom:u.top+u.h},G.each(l.chartArea,function(t){var n=t.box;ot(n,e.chartArea),n.update(u.w,u.h)})}}},gt=(ft=Object.freeze({__proto__:null,default:"/*\r\n * DOM element rendering detection\r\n * https://davidwalsh.name/detect-node-insertion\r\n */\r\n@keyframes chartjs-render-animation {\r\n\tfrom { opacity: 0.99; }\r\n\tto { opacity: 1; }\r\n}\r\n\r\n.chartjs-render-monitor {\r\n\tanimation: chartjs-render-animation 0.001s;\r\n}\r\n\r\n/*\r\n * DOM element resizing detection\r\n * https://github.com/marcj/css-element-queries\r\n */\r\n.chartjs-size-monitor,\r\n.chartjs-size-monitor-expand,\r\n.chartjs-size-monitor-shrink {\r\n\tposition: absolute;\r\n\tdirection: ltr;\r\n\tleft: 0;\r\n\ttop: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\toverflow: hidden;\r\n\tpointer-events: none;\r\n\tvisibility: hidden;\r\n\tz-index: -1;\r\n}\r\n\r\n.chartjs-size-monitor-expand > div {\r\n\tposition: absolute;\r\n\twidth: 1000000px;\r\n\theight: 1000000px;\r\n\tleft: 0;\r\n\ttop: 0;\r\n}\r\n\r\n.chartjs-size-monitor-shrink > div {\r\n\tposition: absolute;\r\n\twidth: 200%;\r\n\theight: 200%;\r\n\tleft: 0;\r\n\ttop: 0;\r\n}\r\n"}))&&ft.default||ft,bt=["animationstart","webkitAnimationStart"],vt={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function yt(e,t){var n=G.getStyle(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?Number(i[1]):void 0}var xt=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("e",null,t)}catch(n){}return e}()&&{passive:!0};function St(e,t,n){e.addEventListener(t,n,xt)}function wt(e,t,n){e.removeEventListener(t,n,xt)}function Ct(e,t,n,i,r){return{type:e,chart:t,native:r||null,x:void 0!==n?n:null,y:void 0!==i?i:null}}function Et(e){var t=document.createElement("div");return t.className=e||"",t}function It(e,t,n){var i,r,a,o,l=e.$chartjs||(e.$chartjs={}),s=l.resizer=function(e){var t=Et("chartjs-size-monitor"),n=Et("chartjs-size-monitor-expand"),i=Et("chartjs-size-monitor-shrink");n.appendChild(Et()),i.appendChild(Et()),t.appendChild(n),t.appendChild(i),t._reset=function(){n.scrollLeft=1e6,n.scrollTop=1e6,i.scrollLeft=1e6,i.scrollTop=1e6};var r=function(){t._reset(),e()};return St(n,"scroll",r.bind(n,"expand")),St(i,"scroll",r.bind(i,"shrink")),t}((i=function(){if(l.resizer){var i=n.options.maintainAspectRatio&&e.parentNode,r=i?i.clientWidth:0;t(Ct("resize",n)),i&&i.clientWidth<r&&n.canvas&&t(Ct("resize",n))}},a=!1,o=[],function(){o=Array.prototype.slice.call(arguments),r=r||this,a||(a=!0,G.requestAnimFrame.call(window,function(){a=!1,i.apply(r,o)}))}));!function(e,t){var n=e.$chartjs||(e.$chartjs={}),i=n.renderProxy=function(e){"chartjs-render-animation"===e.animationName&&t()};G.each(bt,function(t){St(e,t,i)}),n.reflow=!!e.offsetParent,e.classList.add("chartjs-render-monitor")}(e,function(){if(l.resizer){var t=e.parentNode;t&&t!==s.parentNode&&t.insertBefore(s,t.firstChild),s._reset()}})}function Tt(e){var t=e.$chartjs||{},n=t.resizer;delete t.resizer,function(e){var t=e.$chartjs||{},n=t.renderProxy;n&&(G.each(bt,function(t){wt(e,t,n)}),delete t.renderProxy),e.classList.remove("chartjs-render-monitor")}(e),n&&n.parentNode&&n.parentNode.removeChild(n)}var Mt={disableCSSInjection:!1,_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,_ensureLoaded:function(e){if(!this.disableCSSInjection){var t=e.getRootNode?e.getRootNode():document;!function(e,t){var n=e.$chartjs||(e.$chartjs={});if(!n.containsStyles){n.containsStyles=!0,t="/* Chart.js */\n"+t;var i=document.createElement("style");i.setAttribute("type","text/css"),i.appendChild(document.createTextNode(t)),e.appendChild(i)}}(t.host?t:document.head,gt)}},acquireContext:function(e,t){"string"==typeof e?e=document.getElementById(e):e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas);var n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(this._ensureLoaded(e),function(e,t){var n=e.style,i=e.getAttribute("height"),r=e.getAttribute("width");if(e.$chartjs={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",null===r||""===r){var a=yt(e,"width");void 0!==a&&(e.width=a)}if(null===i||""===i)if(""===e.style.height)e.height=e.width/(t.options.aspectRatio||2);else{var o=yt(e,"height");void 0!==a&&(e.height=o)}}(e,t),n):null},releaseContext:function(e){var t=e.canvas;if(t.$chartjs){var n=t.$chartjs.initial;["height","width"].forEach(function(e){var i=n[e];G.isNullOrUndef(i)?t.removeAttribute(e):t.setAttribute(e,i)}),G.each(n.style||{},function(e,n){t.style[n]=e}),t.width=t.width,delete t.$chartjs}},addEventListener:function(e,t,n){var i=e.canvas;if("resize"===t)return It(i,n,e),void 0;var r=n.$chartjs||(n.$chartjs={});St(i,t,(r.proxies||(r.proxies={}))[e.id+"_"+t]=function(t){n(function(e,t){var n=vt[e.type]||e.type,i=G.getRelativePosition(e,t);return Ct(n,t,i.x,i.y,e)}(t,e))})},removeEventListener:function(e,t,n){var i=e.canvas;if("resize"===t)return Tt(i),void 0;var r=((n.$chartjs||{}).proxies||{})[e.id+"_"+t];r&&wt(i,t,r)}};G.addEvent=St,G.removeEvent=wt;var Dt=Mt._enabled?Mt:{acquireContext:function(e){return e&&e.canvas&&(e=e.canvas),e&&e.getContext("2d")||null}},kt=G.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},Dt);B._set("global",{plugins:{}});var At={_plugins:[],_cacheId:0,register:function(e){var t=this._plugins;[].concat(e).forEach(function(e){-1===t.indexOf(e)&&t.push(e)}),this._cacheId++},unregister:function(e){var t=this._plugins;[].concat(e).forEach(function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(e,t,n){var i,r,a,o,l,s=this.descriptors(e),d=s.length;for(i=0;i<d;++i)if("function"==typeof(l=(a=(r=s[i]).plugin)[t])&&((o=[e].concat(n||[])).push(r.options),!1===l.apply(a,o)))return!1;return!0},descriptors:function(e){var t=e.$plugins||(e.$plugins={});if(t.id===this._cacheId)return t.descriptors;var n=[],i=[],r=e&&e.config||{},a=r.options&&r.options.plugins||{};return this._plugins.concat(r.plugins||[]).forEach(function(e){if(-1===n.indexOf(e)){var t=e.id,r=a[t];!1!==r&&(!0===r&&(r=G.clone(B.global.plugins[t])),n.push(e),i.push({plugin:e,options:r||{}}))}}),t.descriptors=i,t.id=this._cacheId,i},_invalidate:function(e){delete e.$plugins}},Ft={constructors:{},defaults:{},registerScaleType:function(e,t,n){this.constructors[e]=t,this.defaults[e]=G.clone(n)},getScaleConstructor:function(e){return this.constructors.hasOwnProperty(e)?this.constructors[e]:void 0},getScaleDefaults:function(e){return this.defaults.hasOwnProperty(e)?G.merge(Object.create(null),[B.scale,this.defaults[e]]):{}},updateScaleDefaults:function(e,t){this.defaults.hasOwnProperty(e)&&(this.defaults[e]=G.extend(this.defaults[e],t))},addScalesToLayout:function(e){G.each(e.scales,function(t){t.fullWidth=t.options.fullWidth,t.position=t.options.position,t.weight=t.options.weight,ht.addBox(e,t)})}},Pt=G.valueOrDefault,_t=G.rtl.getRtlAdapter;B._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:G.noop,title:function(e,t){var n="",i=t.labels,r=i?i.length:0;if(e.length>0){var a=e[0];a.label?n=a.label:a.xLabel?n=a.xLabel:r>0&&a.index<r&&(n=i[a.index])}return n},afterTitle:G.noop,beforeBody:G.noop,beforeLabel:G.noop,label:function(e,t){var n=t.datasets[e.datasetIndex].label||"";return n&&(n+=": "),G.isNullOrUndef(e.value)?n+=e.yLabel:n+=e.value,n},labelColor:function(e,t){var n=t.getDatasetMeta(e.datasetIndex).data[e.index]._view;return{borderColor:n.borderColor,backgroundColor:n.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:G.noop,afterBody:G.noop,beforeFooter:G.noop,footer:G.noop,afterFooter:G.noop}}});var Nt={average:function(e){if(!e.length)return!1;var t,n,i=0,r=0,a=0;for(t=0,n=e.length;t<n;++t){var o=e[t];if(o&&o.hasValue()){var l=o.tooltipPosition();i+=l.x,r+=l.y,++a}}return{x:i/a,y:r/a}},nearest:function(e,t){var n,i,r,a=t.x,o=t.y,l=Number.POSITIVE_INFINITY;for(n=0,i=e.length;n<i;++n){var s=e[n];if(s&&s.hasValue()){var d=s.getCenterPoint(),c=G.distanceBetweenPoints(t,d);c<l&&(l=c,r=s)}}if(r){var u=r.tooltipPosition();a=u.x,o=u.y}return{x:a,y:o}}};function Lt(e,t){return t&&(G.isArray(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Ot(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Bt(e){var t=B.global;return{xPadding:e.xPadding,yPadding:e.yPadding,xAlign:e.xAlign,yAlign:e.yAlign,rtl:e.rtl,textDirection:e.textDirection,bodyFontColor:e.bodyFontColor,_bodyFontFamily:Pt(e.bodyFontFamily,t.defaultFontFamily),_bodyFontStyle:Pt(e.bodyFontStyle,t.defaultFontStyle),_bodyAlign:e.bodyAlign,bodyFontSize:Pt(e.bodyFontSize,t.defaultFontSize),bodySpacing:e.bodySpacing,titleFontColor:e.titleFontColor,_titleFontFamily:Pt(e.titleFontFamily,t.defaultFontFamily),_titleFontStyle:Pt(e.titleFontStyle,t.defaultFontStyle),titleFontSize:Pt(e.titleFontSize,t.defaultFontSize),_titleAlign:e.titleAlign,titleSpacing:e.titleSpacing,titleMarginBottom:e.titleMarginBottom,footerFontColor:e.footerFontColor,_footerFontFamily:Pt(e.footerFontFamily,t.defaultFontFamily),_footerFontStyle:Pt(e.footerFontStyle,t.defaultFontStyle),footerFontSize:Pt(e.footerFontSize,t.defaultFontSize),_footerAlign:e.footerAlign,footerSpacing:e.footerSpacing,footerMarginTop:e.footerMarginTop,caretSize:e.caretSize,cornerRadius:e.cornerRadius,backgroundColor:e.backgroundColor,opacity:0,legendColorBackground:e.multiKeyBackground,displayColors:e.displayColors,borderColor:e.borderColor,borderWidth:e.borderWidth}}function Rt(e,t){return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-e.xPadding:e.x+e.xPadding}function jt(e){return Lt([],Ot(e))}var Vt=Y.extend({initialize:function(){this._model=Bt(this._options),this._lastActive=[]},getTitle:function(){var e=this,t=e._options,n=t.callbacks,i=n.beforeTitle.apply(e,arguments),r=n.title.apply(e,arguments),a=n.afterTitle.apply(e,arguments),o=[];return o=Lt(o,Ot(i)),o=Lt(o,Ot(r)),o=Lt(o,Ot(a))},getBeforeBody:function(){return jt(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(e,t){var n=this,i=n._options.callbacks,r=[];return G.each(e,function(e){var a={before:[],lines:[],after:[]};Lt(a.before,Ot(i.beforeLabel.call(n,e,t))),Lt(a.lines,i.label.call(n,e,t)),Lt(a.after,Ot(i.afterLabel.call(n,e,t))),r.push(a)}),r},getAfterBody:function(){return jt(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var e=this,t=e._options.callbacks,n=t.beforeFooter.apply(e,arguments),i=t.footer.apply(e,arguments),r=t.afterFooter.apply(e,arguments),a=[];return a=Lt(a,Ot(n)),a=Lt(a,Ot(i)),a=Lt(a,Ot(r))},update:function(e){var t,n,i,r,a,o,l,s,d,c,u=this,p=u._options,m=u._model,f=u._model=Bt(p),h=u._active,g=u._data,b={xAlign:m.xAlign,yAlign:m.yAlign},v={x:m.x,y:m.y},y={width:m.width,height:m.height},x={x:m.caretX,y:m.caretY};if(h.length){f.opacity=1;var S=[],w=[];x=Nt[p.position].call(u,h,u._eventPosition);var C=[];for(t=0,n=h.length;t<n;++t)C.push((i=h[t],r=void 0,a=void 0,o=void 0,l=void 0,s=void 0,d=void 0,c=void 0,r=i._xScale,a=i._yScale||i._scale,o=i._index,l=i._datasetIndex,s=i._chart.getDatasetMeta(l).controller,d=s._getIndexScale(),c=s._getValueScale(),{xLabel:r?r.getLabelForIndex(o,l):"",yLabel:a?a.getLabelForIndex(o,l):"",label:d?""+d.getLabelForIndex(o,l):"",value:c?""+c.getLabelForIndex(o,l):"",index:o,datasetIndex:l,x:i._model.x,y:i._model.y}));p.filter&&(C=C.filter(function(e){return p.filter(e,g)})),p.itemSort&&(C=C.sort(function(e,t){return p.itemSort(e,t,g)})),G.each(C,function(e){S.push(p.callbacks.labelColor.call(u,e,u._chart)),w.push(p.callbacks.labelTextColor.call(u,e,u._chart))}),f.title=u.getTitle(C,g),f.beforeBody=u.getBeforeBody(C,g),f.body=u.getBody(C,g),f.afterBody=u.getAfterBody(C,g),f.footer=u.getFooter(C,g),f.x=x.x,f.y=x.y,f.caretPadding=p.caretPadding,f.labelColors=S,f.labelTextColors=w,f.dataPoints=C,y=function(e,t){var n=e._chart.ctx,i=2*t.yPadding,r=0,a=t.body,o=a.reduce(function(e,t){return e+t.before.length+t.lines.length+t.after.length},0);o+=t.beforeBody.length+t.afterBody.length;var l=t.title.length,s=t.footer.length,d=t.titleFontSize,c=t.bodyFontSize,u=t.footerFontSize;i+=l*d,i+=l?(l-1)*t.titleSpacing:0,i+=l?t.titleMarginBottom:0,i+=o*c,i+=o?(o-1)*t.bodySpacing:0,i+=s?t.footerMarginTop:0,i+=s*u,i+=s?(s-1)*t.footerSpacing:0;var p=0,m=function(e){r=Math.max(r,n.measureText(e).width+p)};return n.font=G.fontString(d,t._titleFontStyle,t._titleFontFamily),G.each(t.title,m),n.font=G.fontString(c,t._bodyFontStyle,t._bodyFontFamily),G.each(t.beforeBody.concat(t.afterBody),m),p=t.displayColors?c+2:0,G.each(a,function(e){G.each(e.before,m),G.each(e.lines,m),G.each(e.after,m)}),p=0,n.font=G.fontString(u,t._footerFontStyle,t._footerFontFamily),G.each(t.footer,m),{width:r+=2*t.xPadding,height:i}}(this,f),v=function(e,t,n,i){var r=e.x,a=e.y,o=e.caretSize,l=e.caretPadding,s=e.cornerRadius,d=n.xAlign,c=n.yAlign,u=o+l,p=s+l;return"right"===d?r-=t.width:"center"===d&&((r-=t.width/2)+t.width>i.width&&(r=i.width-t.width),r<0&&(r=0)),"top"===c?a+=u:a-="bottom"===c?t.height+u:t.height/2,"center"===c?"left"===d?r+=u:"right"===d&&(r-=u):"left"===d?r-=p:"right"===d&&(r+=p),{x:r,y:a}}(f,y,b=function(e,t){var n,i,r,a,o,l=e._model,s=e._chart,d=e._chart.chartArea,c="center",u="center";l.y<t.height?u="top":l.y>s.height-t.height&&(u="bottom");var p=(d.left+d.right)/2,m=(d.top+d.bottom)/2;"center"===u?(n=function(e){return e<=p},i=function(e){return e>p}):(n=function(e){return e<=t.width/2},i=function(e){return e>=s.width-t.width/2}),r=function(e){return e+t.width+l.caretSize+l.caretPadding>s.width},a=function(e){return e-t.width-l.caretSize-l.caretPadding<0},o=function(e){return e<=m?"top":"bottom"},n(l.x)?(c="left",r(l.x)&&(c="center",u=o(l.y))):i(l.x)&&(c="right",a(l.x)&&(c="center",u=o(l.y)));var f=e._options;return{xAlign:f.xAlign?f.xAlign:c,yAlign:f.yAlign?f.yAlign:u}}(this,y),u._chart)}else f.opacity=0;return f.xAlign=b.xAlign,f.yAlign=b.yAlign,f.x=v.x,f.y=v.y,f.width=y.width,f.height=y.height,f.caretX=x.x,f.caretY=x.y,u._model=f,e&&p.custom&&p.custom.call(u,f),u},drawCaret:function(e,t){var n=this._chart.ctx,i=this._view,r=this.getCaretPosition(e,t,i);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)},getCaretPosition:function(e,t,n){var i,r,a,o,l,s,d=n.caretSize,c=n.cornerRadius,u=n.xAlign,p=n.yAlign,m=e.x,f=e.y,h=t.width,g=t.height;if("center"===p)l=f+g/2,"left"===u?(r=(i=m)-d,a=i,o=l+d,s=l-d):(r=(i=m+h)+d,a=i,o=l-d,s=l+d);else if("left"===u?(i=(r=m+c+d)-d,a=r+d):"right"===u?(i=(r=m+h-c-d)-d,a=r+d):(i=(r=n.caretX)-d,a=r+d),"top"===p)l=(o=f)-d,s=o;else{l=(o=f+g)+d,s=o;var b=a;a=i,i=b}return{x1:i,x2:r,x3:a,y1:o,y2:l,y3:s}},drawTitle:function(e,t,n){var i,r,a,o=t.title,l=o.length;if(l){var s=_t(t.rtl,t.x,t.width);for(e.x=Rt(t,t._titleAlign),n.textAlign=s.textAlign(t._titleAlign),n.textBaseline="middle",i=t.titleFontSize,r=t.titleSpacing,n.fillStyle=t.titleFontColor,n.font=G.fontString(i,t._titleFontStyle,t._titleFontFamily),a=0;a<l;++a)n.fillText(o[a],s.x(e.x),e.y+i/2),e.y+=i+r,a+1===l&&(e.y+=t.titleMarginBottom-r)}},drawBody:function(e,t,n){var i,r,a,o,l,s,d,c,u=t.bodyFontSize,p=t.bodySpacing,m=t._bodyAlign,f=t.body,h=t.displayColors,g=0,b=h?Rt(t,"left"):0,v=_t(t.rtl,t.x,t.width),y=function(t){n.fillText(t,v.x(e.x+g),e.y+u/2),e.y+=u+p},x=v.textAlign(m);for(n.textAlign=m,n.textBaseline="middle",n.font=G.fontString(u,t._bodyFontStyle,t._bodyFontFamily),e.x=Rt(t,x),n.fillStyle=t.bodyFontColor,G.each(t.beforeBody,y),g=h&&"right"!==x?"center"===m?u/2+1:u+2:0,l=0,d=f.length;l<d;++l){for(i=f[l],r=t.labelTextColors[l],a=t.labelColors[l],n.fillStyle=r,G.each(i.before,y),s=0,c=(o=i.lines).length;s<c;++s){if(h){var S=v.x(b);n.fillStyle=t.legendColorBackground,n.fillRect(v.leftForLtr(S,u),e.y,u,u),n.lineWidth=1,n.strokeStyle=a.borderColor,n.strokeRect(v.leftForLtr(S,u),e.y,u,u),n.fillStyle=a.backgroundColor,n.fillRect(v.leftForLtr(v.xPlus(S,1),u-2),e.y+1,u-2,u-2),n.fillStyle=r}y(o[s])}G.each(i.after,y)}g=0,G.each(t.afterBody,y),e.y-=p},drawFooter:function(e,t,n){var i,r,a=t.footer,o=a.length;if(o){var l=_t(t.rtl,t.x,t.width);for(e.x=Rt(t,t._footerAlign),e.y+=t.footerMarginTop,n.textAlign=l.textAlign(t._footerAlign),n.textBaseline="middle",i=t.footerFontSize,n.fillStyle=t.footerFontColor,n.font=G.fontString(i,t._footerFontStyle,t._footerFontFamily),r=0;r<o;++r)n.fillText(a[r],l.x(e.x),e.y+i/2),e.y+=i+t.footerSpacing}},drawBackground:function(e,t,n,i){n.fillStyle=t.backgroundColor,n.strokeStyle=t.borderColor,n.lineWidth=t.borderWidth;var r=t.xAlign,a=t.yAlign,o=e.x,l=e.y,s=i.width,d=i.height,c=t.cornerRadius;n.beginPath(),n.moveTo(o+c,l),"top"===a&&this.drawCaret(e,i),n.lineTo(o+s-c,l),n.quadraticCurveTo(o+s,l,o+s,l+c),"center"===a&&"right"===r&&this.drawCaret(e,i),n.lineTo(o+s,l+d-c),n.quadraticCurveTo(o+s,l+d,o+s-c,l+d),"bottom"===a&&this.drawCaret(e,i),n.lineTo(o+c,l+d),n.quadraticCurveTo(o,l+d,o,l+d-c),"center"===a&&"left"===r&&this.drawCaret(e,i),n.lineTo(o,l+c),n.quadraticCurveTo(o,l,o+c,l),n.closePath(),n.fill(),t.borderWidth>0&&n.stroke()},draw:function(){var e=this._chart.ctx,t=this._view;if(0!==t.opacity){var n={width:t.width,height:t.height},i={x:t.x,y:t.y},r=Math.abs(t.opacity<.001)?0:t.opacity,a=t.title.length||t.beforeBody.length||t.body.length||t.afterBody.length||t.footer.length;this._options.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,t,e,n),i.y+=t.yPadding,G.rtl.overrideTextDirection(e,t.textDirection),this.drawTitle(i,t,e),this.drawBody(i,t,e),this.drawFooter(i,t,e),G.rtl.restoreTextDirection(e,t.textDirection),e.restore())}},handleEvent:function(e){var t,n=this,i=n._options;return n._lastActive=n._lastActive||[],"mouseout"===e.type?n._active=[]:(n._active=n._chart.getElementsAtEventForMode(e,i.mode,i),i.reverse&&n._active.reverse()),(t=!G.arrayEquals(n._active,n._lastActive))&&(n._lastActive=n._active,(i.enabled||i.custom)&&(n._eventPosition={x:e.x,y:e.y},n.update(!0),n.pivot())),t}}),zt=Nt,Gt=Vt;Gt.positioners=zt;var Wt=G.valueOrDefault;function qt(){return G.merge(Object.create(null),[].slice.call(arguments),{merger:function(e,t,n,i){if("xAxes"===e||"yAxes"===e){var r,a,o,l=n[e].length;for(t[e]||(t[e]=[]),r=0;r<l;++r)o=n[e][r],a=Wt(o.type,"xAxes"===e?"category":"linear"),r>=t[e].length&&t[e].push({}),!t[e][r].type||o.type&&o.type!==t[e][r].type?G.merge(t[e][r],[Ft.getScaleDefaults(a),o]):G.merge(t[e][r],o)}else G._merger(e,t,n,i)}})}function Ht(){return G.merge(Object.create(null),[].slice.call(arguments),{merger:function(e,t,n,i){var r=t[e]||Object.create(null),a=n[e];"scales"===e?t[e]=qt(r,a):"scale"===e?t[e]=G.merge(r,[Ft.getScaleDefaults(a.type),a]):G._merger(e,t,n,i)}})}function Ut(e){var t=e.options;G.each(e.scales,function(t){ht.removeBox(e,t)}),t=Ht(B.global,B[e.config.type],t),e.options=e.config.options=t,e.ensureScalesHaveIDs(),e.buildOrUpdateScales(),e.tooltip._options=t.tooltips,e.tooltip.initialize()}function $t(e,t,n){var i,r=function(e){return e.id===i};do{i=t+n++}while(G.findIndex(e,r)>=0);return i}function Kt(e){return"top"===e||"bottom"===e}function Yt(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}B._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var Jt=function(e,t){return this.construct(e,t),this};G.extend(Jt.prototype,{construct:function(e,t){var n=this;t=function(e){var t=(e=e||Object.create(null)).data=e.data||{};return t.datasets=t.datasets||[],t.labels=t.labels||[],e.options=Ht(B.global,B[e.type],e.options||{}),e}(t);var i=kt.acquireContext(e,t),r=i&&i.canvas,a=r&&r.height,o=r&&r.width;if(n.id=G.uid(),n.ctx=i,n.canvas=r,n.config=t,n.width=o,n.height=a,n.aspectRatio=a?o/a:null,n.options=t.options,n._bufferedRender=!1,n._layers=[],n.chart=n,n.controller=n,Jt.instances[n.id]=n,Object.defineProperty(n,"data",{get:function(){return n.config.data},set:function(e){n.config.data=e}}),!i||!r)return console.error("Failed to create chart: can't acquire context from the given item"),void 0;n.initialize(),n.update()},initialize:function(){var e=this;return At.notify(e,"beforeInit"),G.retinaScale(e,e.options.devicePixelRatio),e.bindEvents(),e.options.responsive&&e.resize(!0),e.initToolTip(),At.notify(e,"afterInit"),e},clear:function(){return G.canvas.clear(this),this},stop:function(){return Q.cancelAnimation(this),this},resize:function(e){var t=this,n=t.options,i=t.canvas,r=n.maintainAspectRatio&&t.aspectRatio||null,a=Math.max(0,Math.floor(G.getMaximumWidth(i))),o=Math.max(0,Math.floor(r?a/r:G.getMaximumHeight(i)));if((t.width!==a||t.height!==o)&&(i.width=t.width=a,i.height=t.height=o,i.style.width=a+"px",i.style.height=o+"px",G.retinaScale(t,n.devicePixelRatio),!e)){var l={width:a,height:o};At.notify(t,"resize",[l]),n.onResize&&n.onResize(t,l),t.stop(),t.update({duration:n.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var e=this.options,t=e.scales||{},n=e.scale;G.each(t.xAxes,function(e,n){e.id||(e.id=$t(t.xAxes,"x-axis-",n))}),G.each(t.yAxes,function(e,n){e.id||(e.id=$t(t.yAxes,"y-axis-",n))}),n&&(n.id=n.id||"scale")},buildOrUpdateScales:function(){var e=this,t=e.options,n=e.scales||{},i=[],r=Object.keys(n).reduce(function(e,t){return e[t]=!1,e},{});t.scales&&(i=i.concat((t.scales.xAxes||[]).map(function(e){return{options:e,dtype:"category",dposition:"bottom"}}),(t.scales.yAxes||[]).map(function(e){return{options:e,dtype:"linear",dposition:"left"}}))),t.scale&&i.push({options:t.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),G.each(i,function(t){var i=t.options,a=i.id,o=Wt(i.type,t.dtype);Kt(i.position)!==Kt(t.dposition)&&(i.position=t.dposition),r[a]=!0;var l=null;if(a in n&&n[a].type===o)(l=n[a]).options=i,l.ctx=e.ctx,l.chart=e;else{var s=Ft.getScaleConstructor(o);if(!s)return;l=new s({id:a,type:o,options:i,ctx:e.ctx,chart:e}),n[l.id]=l}l.mergeTicksOptions(),t.isDefault&&(e.scale=l)}),G.each(r,function(e,t){e||delete n[t]}),e.scales=n,Ft.addScalesToLayout(this)},buildOrUpdateControllers:function(){var e,t,n=this,i=[],r=n.data.datasets;for(e=0,t=r.length;e<t;e++){var a=r[e],o=n.getDatasetMeta(e),l=a.type||n.config.type;if(o.type&&o.type!==l&&(n.destroyDatasetMeta(e),o=n.getDatasetMeta(e)),o.type=l,o.order=a.order||0,o.index=e,o.controller)o.controller.updateIndex(e),o.controller.linkScales();else{var s=Qe[o.type];if(void 0===s)throw new Error('"'+o.type+'" is not a chart type.');o.controller=new s(n,e),i.push(o.controller)}}return i},resetElements:function(){var e=this;G.each(e.data.datasets,function(t,n){e.getDatasetMeta(n).controller.reset()},e)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(e){var t,n,i=this;if(e&&"object"==typeof e||(e={duration:e,lazy:arguments[1]}),Ut(i),At._invalidate(i),!1!==At.notify(i,"beforeUpdate")){i.tooltip._data=i.data;var r=i.buildOrUpdateControllers();for(t=0,n=i.data.datasets.length;t<n;t++)i.getDatasetMeta(t).controller.buildOrUpdateElements();i.updateLayout(),i.options.animation&&i.options.animation.duration&&G.each(r,function(e){e.reset()}),i.updateDatasets(),i.tooltip.initialize(),i.lastActive=[],At.notify(i,"afterUpdate"),i._layers.sort(Yt("z","_idx")),i._bufferedRender?i._bufferedRequest={duration:e.duration,easing:e.easing,lazy:e.lazy}:i.render(e)}},updateLayout:function(){var e=this;!1!==At.notify(e,"beforeLayout")&&(ht.update(this,this.width,this.height),e._layers=[],G.each(e.boxes,function(t){t._configure&&t._configure(),e._layers.push.apply(e._layers,t._layers())},e),e._layers.forEach(function(e,t){e._idx=t}),At.notify(e,"afterScaleUpdate"),At.notify(e,"afterLayout"))},updateDatasets:function(){if(!1!==At.notify(this,"beforeDatasetsUpdate")){for(var e=0,t=this.data.datasets.length;e<t;++e)this.updateDataset(e);At.notify(this,"afterDatasetsUpdate")}},updateDataset:function(e){var t=this.getDatasetMeta(e),n={meta:t,index:e};!1!==At.notify(this,"beforeDatasetUpdate",[n])&&(t.controller._update(),At.notify(this,"afterDatasetUpdate",[n]))},render:function(e){var t=this;e&&"object"==typeof e||(e={duration:e,lazy:arguments[1]});var n=t.options.animation,i=Wt(e.duration,n&&n.duration),r=e.lazy;if(!1!==At.notify(t,"beforeRender")){var a=function(e){At.notify(t,"afterRender"),G.callback(n&&n.onComplete,[e],t)};if(n&&i){var o=new X({numSteps:i/16.66,easing:e.easing||n.easing,render:function(e,t){var n=G.easing.effects[t.easing],i=t.currentStep,r=i/t.numSteps;e.draw(n(r),r,i)},onAnimationProgress:n.onProgress,onAnimationComplete:a});Q.addAnimation(t,o,i,r)}else t.draw(),a(new X({numSteps:0,chart:t}));return t}},draw:function(e){var t,n,i=this;if(i.clear(),G.isNullOrUndef(e)&&(e=1),i.transition(e),!(i.width<=0||i.height<=0)&&!1!==At.notify(i,"beforeDraw",[e])){for(n=i._layers,t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(i.chartArea);for(i.drawDatasets(e);t<n.length;++t)n[t].draw(i.chartArea);i._drawTooltip(e),At.notify(i,"afterDraw",[e])}},transition:function(e){for(var t=0,n=(this.data.datasets||[]).length;t<n;++t)this.isDatasetVisible(t)&&this.getDatasetMeta(t).controller.transition(e);this.tooltip.transition(e)},_getSortedDatasetMetas:function(e){var t,n,i=[];for(t=0,n=(this.data.datasets||[]).length;t<n;++t)e&&!this.isDatasetVisible(t)||i.push(this.getDatasetMeta(t));return i.sort(Yt("order","index")),i},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(e){var t,n;if(!1!==At.notify(this,"beforeDatasetsDraw",[e])){for(n=(t=this._getSortedVisibleDatasetMetas()).length-1;n>=0;--n)this.drawDataset(t[n],e);At.notify(this,"afterDatasetsDraw",[e])}},drawDataset:function(e,t){var n={meta:e,index:e.index,easingValue:t};!1!==At.notify(this,"beforeDatasetDraw",[n])&&(e.controller.draw(t),At.notify(this,"afterDatasetDraw",[n]))},_drawTooltip:function(e){var t=this.tooltip,n={tooltip:t,easingValue:e};!1!==At.notify(this,"beforeTooltipDraw",[n])&&(t.draw(),At.notify(this,"afterTooltipDraw",[n]))},getElementAtEvent:function(e){return at.modes.single(this,e)},getElementsAtEvent:function(e){return at.modes.label(this,e,{intersect:!0})},getElementsAtXAxis:function(e){return at.modes["x-axis"](this,e,{intersect:!0})},getElementsAtEventForMode:function(e,t,n){var i=at.modes[t];return"function"==typeof i?i(this,e,n):[]},getDatasetAtEvent:function(e){return at.modes.dataset(this,e,{intersect:!0})},getDatasetMeta:function(e){var t=this.data.datasets[e];t._meta||(t._meta={});var n=t._meta[this.id];return n||(n=t._meta[this.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t.order||0,index:e}),n},getVisibleDatasetCount:function(){for(var e=0,t=0,n=this.data.datasets.length;t<n;++t)this.isDatasetVisible(t)&&e++;return e},isDatasetVisible:function(e){var t=this.getDatasetMeta(e);return"boolean"==typeof t.hidden?!t.hidden:!this.data.datasets[e].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(e){var t=this.id,n=this.data.datasets[e],i=n._meta&&n._meta[t];i&&(i.controller.destroy(),delete n._meta[t])},destroy:function(){var e,t,n=this,i=n.canvas;for(n.stop(),e=0,t=n.data.datasets.length;e<t;++e)n.destroyDatasetMeta(e);i&&(n.unbindEvents(),G.canvas.clear(n),kt.releaseContext(n.ctx),n.canvas=null,n.ctx=null),At.notify(n,"destroy"),delete Jt.instances[n.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var e=this;e.tooltip=new Gt({_chart:e,_chartInstance:e,_data:e.data,_options:e.options.tooltips},e)},bindEvents:function(){var e=this,t=e._listeners={},n=function(){e.eventHandler.apply(e,arguments)};G.each(e.options.events,function(i){kt.addEventListener(e,i,n),t[i]=n}),e.options.responsive&&(n=function(){e.resize()},kt.addEventListener(e,"resize",n),t.resize=n)},unbindEvents:function(){var e=this,t=e._listeners;t&&(delete e._listeners,G.each(t,function(t,n){kt.removeEventListener(e,n,t)}))},updateHoverStyle:function(e,t,n){var i,r,a,o=n?"set":"remove";for(r=0,a=e.length;r<a;++r)(i=e[r])&&this.getDatasetMeta(i._datasetIndex).controller[o+"HoverStyle"](i);"dataset"===t&&this.getDatasetMeta(e[0]._datasetIndex).controller["_"+o+"DatasetHoverStyle"]()},eventHandler:function(e){var t=this,n=t.tooltip;if(!1!==At.notify(t,"beforeEvent",[e])){t._bufferedRender=!0,t._bufferedRequest=null;var i=t.handleEvent(e);n&&(i=n._start?n.handleEvent(e):i|n.handleEvent(e)),At.notify(t,"afterEvent",[e]);var r=t._bufferedRequest;return r?t.render(r):i&&!t.animating&&(t.stop(),t.render({duration:t.options.hover.animationDuration,lazy:!0})),t._bufferedRender=!1,t._bufferedRequest=null,t}},handleEvent:function(e){var t,n=this,i=n.options||{},r=i.hover;return n.lastActive=n.lastActive||[],"mouseout"===e.type?n.active=[]:n.active=n.getElementsAtEventForMode(e,r.mode,r),G.callback(i.onHover||i.hover.onHover,[e.native,n.active],n),"mouseup"!==e.type&&"click"!==e.type||i.onClick&&i.onClick.call(n,e.native,n.active),n.lastActive.length&&n.updateHoverStyle(n.lastActive,r.mode,!1),n.active.length&&r.mode&&n.updateHoverStyle(n.active,r.mode,!0),t=!G.arrayEquals(n.active,n.lastActive),n.lastActive=n.active,t}}),Jt.instances={};var Xt=Jt;function Qt(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function Zt(e){this.options=e||{}}Jt.Controller=Jt,Jt.types={},G.configMerge=Ht,G.scaleMerge=qt,G.extend(Zt.prototype,{formats:Qt,parse:Qt,format:Qt,add:Qt,diff:Qt,startOf:Qt,endOf:Qt,_create:function(e){return e}}),Zt.override=function(e){G.extend(Zt.prototype,e)};var en={_date:Zt},tn={formatters:{values:function(e){return G.isArray(e)?e:""+e},linear:function(e,t,n){var i=n.length>3?n[2]-n[1]:n[1]-n[0];Math.abs(i)>1&&e!==Math.floor(e)&&(i=e-Math.floor(e));var r=G.log10(Math.abs(i)),a="";if(0!==e)if(Math.max(Math.abs(n[0]),Math.abs(n[n.length-1]))<1e-4){var o=G.log10(Math.abs(e)),l=Math.floor(o)-Math.floor(r);l=Math.max(Math.min(l,20),0),a=e.toExponential(l)}else{var s=-1*Math.floor(r);s=Math.max(Math.min(s,20),0),a=e.toFixed(s)}else a="0";return a},logarithmic:function(e,t,n){var i=e/Math.pow(10,Math.floor(G.log10(e)));return 0===e?"0":1===i||2===i||5===i||0===t||t===n.length-1?e.toExponential():""}}},nn=G.isArray,rn=G.isNullOrUndef,an=G.valueOrDefault,on=G.valueAtIndexOrDefault;function ln(e,t,n){var i,r=e.getTicks().length,a=Math.min(t,r-1),o=e.getPixelForTick(a),l=e._startPixel,s=e._endPixel;if(!(n&&(i=1===r?Math.max(o-l,s-o):0===t?(e.getPixelForTick(1)-o)/2:(o-e.getPixelForTick(a-1))/2,(o+=a<t?i:-i)<l-1e-6||o>s+1e-6)))return o}function sn(e,t,n,i){var r,a,o,l,s,d,c,u,p,m,f,h,g,b=n.length,v=[],y=[],x=[],S=0,w=0;for(r=0;r<b;++r){if(l=n[r].label,s=n[r].major?t.major:t.minor,e.font=d=s.string,c=i[d]=i[d]||{data:{},gc:[]},u=s.lineHeight,p=m=0,rn(l)||nn(l)){if(nn(l))for(a=0,o=l.length;a<o;++a)f=l[a],rn(f)||nn(f)||(p=G.measureText(e,c.data,c.gc,p,f),m+=u)}else p=G.measureText(e,c.data,c.gc,p,l),m=u;v.push(p),y.push(m),x.push(u/2),S=Math.max(p,S),w=Math.max(m,w)}function C(e){return{width:v[e]||0,height:y[e]||0,offset:x[e]||0}}return!function(e,t){G.each(e,function(e){var n,i=e.gc,r=i.length/2;if(r>t){for(n=0;n<r;++n)delete e.data[i[n]];i.splice(0,r)}})}(i,b),h=v.indexOf(S),g=y.indexOf(w),{first:C(0),last:C(b-1),widest:C(h),highest:C(g)}}function dn(e){return e.drawTicks?e.tickMarkLength:0}function cn(e){var t,n;return e.display?(t=G.options._parseFont(e),n=G.options.toPadding(e.padding),t.lineHeight+n.height):0}function un(e,t){return G.extend(G.options._parseFont({fontFamily:an(t.fontFamily,e.fontFamily),fontSize:an(t.fontSize,e.fontSize),fontStyle:an(t.fontStyle,e.fontStyle),lineHeight:an(t.lineHeight,e.lineHeight)}),{color:G.options.resolve([t.fontColor,e.fontColor,B.global.defaultFontColor])})}function pn(e){var t=un(e,e.minor);return{minor:t,major:e.major.enabled?un(e,e.major):t}}function mn(e){var t,n,i,r=[];for(n=0,i=e.length;n<i;++n)void 0!==(t=e[n])._index&&r.push(t);return r}function fn(e,t,n,i){var r,a,o,l,s=an(n,0),d=Math.min(an(i,e.length),e.length),c=0;for(t=Math.ceil(t),i&&(t=(r=i-n)/Math.floor(r/t)),l=s;l<0;)c++,l=Math.round(s+c*t);for(a=Math.max(s,0);a<d;a++)o=e[a],a===l?(o._index=a,c++,l=Math.round(s+c*t)):delete o.label}B._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:tn.formatters.values,minor:{},major:{}}});var hn=Y.extend({zeroLineIndex:0,getPadding:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){G.callback(this.options.beforeUpdate,[this])},update:function(e,t,n){var i,r,a,o,l,s=this,d=s.options.ticks,c=d.sampleSize;if(s.beforeUpdate(),s.maxWidth=e,s.maxHeight=t,s.margins=G.extend({left:0,right:0,top:0,bottom:0},n),s._ticks=null,s.ticks=null,s._labelSizes=null,s._maxLabelLines=0,s.longestLabelWidth=0,s.longestTextCache=s.longestTextCache||{},s._gridLineItems=null,s._labelItems=null,s.beforeSetDimensions(),s.setDimensions(),s.afterSetDimensions(),s.beforeDataLimits(),s.determineDataLimits(),s.afterDataLimits(),s.beforeBuildTicks(),o=s.buildTicks()||[],(!(o=s.afterBuildTicks(o)||o)||!o.length)&&s.ticks)for(o=[],i=0,r=s.ticks.length;i<r;++i)o.push({value:s.ticks[i],major:!1});return s._ticks=o,l=c<o.length,a=s._convertTicksToLabels(l?function(e,t){for(var n=[],i=e.length/t,r=0,a=e.length;r<a;r+=i)n.push(e[Math.floor(r)]);return n}(o,c):o),s._configure(),s.beforeCalculateTickRotation(),s.calculateTickRotation(),s.afterCalculateTickRotation(),s.beforeFit(),s.fit(),s.afterFit(),s._ticksToDraw=d.display&&(d.autoSkip||"auto"===d.source)?s._autoSkip(o):o,l&&(a=s._convertTicksToLabels(s._ticksToDraw)),s.ticks=a,s.afterUpdate(),s.minSize},_configure:function(){var e,t,n=this,i=n.options.ticks.reverse;n.isHorizontal()?(e=n.left,t=n.right):(e=n.top,t=n.bottom,i=!i),n._startPixel=e,n._endPixel=t,n._reversePixels=i,n._length=t-e},afterUpdate:function(){G.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){G.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0},afterSetDimensions:function(){G.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){G.callback(this.options.beforeDataLimits,[this])},determineDataLimits:G.noop,afterDataLimits:function(){G.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){G.callback(this.options.beforeBuildTicks,[this])},buildTicks:G.noop,afterBuildTicks:function(e){var t=this;return nn(e)&&e.length?G.callback(t.options.afterBuildTicks,[t,e]):(t.ticks=G.callback(t.options.afterBuildTicks,[t,t.ticks])||t.ticks,e)},beforeTickToLabelConversion:function(){G.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var e=this.options.ticks;this.ticks=this.ticks.map(e.userCallback||e.callback,this)},afterTickToLabelConversion:function(){G.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){G.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var e,t,n,i,r,a,o,l=this,s=l.options,d=s.ticks,c=l.getTicks().length,u=d.minRotation||0,p=d.maxRotation,m=u;if(!l._isVisible()||!d.display||u>=p||c<=1||!l.isHorizontal())return l.labelRotation=u,void 0;t=(e=l._getLabelSizes()).widest.width,n=e.highest.height-e.highest.offset,i=Math.min(l.maxWidth,l.chart.width-t),t+6>(r=s.offset?l.maxWidth/c:i/(c-1))&&(r=i/(c-(s.offset?.5:1)),a=l.maxHeight-dn(s.gridLines)-d.padding-cn(s.scaleLabel),o=Math.sqrt(t*t+n*n),m=G.toDegrees(Math.min(Math.asin(Math.min((e.highest.height+6)/r,1)),Math.asin(Math.min(a/o,1))-Math.asin(n/o))),m=Math.max(u,Math.min(p,m))),l.labelRotation=m},afterCalculateTickRotation:function(){G.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){G.callback(this.options.beforeFit,[this])},fit:function(){var e=this,t=e.minSize={width:0,height:0},n=e.chart,i=e.options,r=i.ticks,a=i.scaleLabel,o=i.gridLines,l=e._isVisible(),s="bottom"===i.position,d=e.isHorizontal();if(d?t.width=e.maxWidth:l&&(t.width=dn(o)+cn(a)),d?l&&(t.height=dn(o)+cn(a)):t.height=e.maxHeight,r.display&&l){var c=pn(r),u=e._getLabelSizes(),p=u.first,m=u.last,f=u.widest,h=u.highest,g=.4*c.minor.lineHeight,b=r.padding;if(d){var v=0!==e.labelRotation,y=G.toRadians(e.labelRotation),x=Math.cos(y),S=Math.sin(y),w=S*f.width+x*(h.height-(v?h.offset:0))+(v?0:g);t.height=Math.min(e.maxHeight,t.height+w+b);var C,E,I=e.getPixelForTick(0)-e.left,T=e.right-e.getPixelForTick(e.getTicks().length-1);v?(C=s?x*p.width+S*p.offset:S*(p.height-p.offset),E=s?S*(m.height-m.offset):x*m.width+S*m.offset):(C=p.width/2,E=m.width/2),e.paddingLeft=Math.max((C-I)*e.width/(e.width-I),0)+3,e.paddingRight=Math.max((E-T)*e.width/(e.width-T),0)+3}else{var M=r.mirror?0:f.width+b+g;t.width=Math.min(e.maxWidth,t.width+M),e.paddingTop=p.height/2,e.paddingBottom=m.height/2}}e.handleMargins(),d?(e.width=e._length=n.width-e.margins.left-e.margins.right,e.height=t.height):(e.width=t.width,e.height=e._length=n.height-e.margins.top-e.margins.bottom)},handleMargins:function(){var e=this;e.margins&&(e.margins.left=Math.max(e.paddingLeft,e.margins.left),e.margins.top=Math.max(e.paddingTop,e.margins.top),e.margins.right=Math.max(e.paddingRight,e.margins.right),e.margins.bottom=Math.max(e.paddingBottom,e.margins.bottom))},afterFit:function(){G.callback(this.options.afterFit,[this])},isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(e){if(rn(e))return NaN;if(("number"==typeof e||e instanceof Number)&&!isFinite(e))return NaN;if(e)if(this.isHorizontal()){if(void 0!==e.x)return this.getRightValue(e.x)}else if(void 0!==e.y)return this.getRightValue(e.y);return e},_convertTicksToLabels:function(e){var t,n,i,r=this;for(r.ticks=e.map(function(e){return e.value}),r.beforeTickToLabelConversion(),t=r.convertTicksToLabels(e)||r.ticks,r.afterTickToLabelConversion(),n=0,i=e.length;n<i;++n)e[n].label=t[n];return t},_getLabelSizes:function(){var e=this,t=e._labelSizes;return t||(e._labelSizes=t=sn(e.ctx,pn(e.options.ticks),e.getTicks(),e.longestTextCache),e.longestLabelWidth=t.widest.width),t},_parseValue:function(e){var t,n,i,r;return nn(e)?(t=+this.getRightValue(e[0]),n=+this.getRightValue(e[1]),i=Math.min(t,n),r=Math.max(t,n)):(t=void 0,n=e=+this.getRightValue(e),i=e,r=e),{min:i,max:r,start:t,end:n}},_getScaleLabel:function(e){var t=this._parseValue(e);return void 0!==t.start?"["+t.start+", "+t.end+"]":+this.getRightValue(e)},getLabelForIndex:G.noop,getPixelForValue:G.noop,getValueForPixel:G.noop,getPixelForTick:function(e){var t=this.options.offset,n=this._ticks.length,i=1/Math.max(n-(t?0:1),1);return e<0||e>n-1?null:this.getPixelForDecimal(e*i+(t?i/2:0))},getPixelForDecimal:function(e){return this._reversePixels&&(e=1-e),this._startPixel+e*this._length},getDecimalForPixel:function(e){var t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var e=this.min,t=this.max;return this.beginAtZero?0:e<0&&t<0?t:e>0&&t>0?e:0},_autoSkip:function(e){var t,n,i,r,a=this.options.ticks,o=this._length,l=a.maxTicksLimit||o/this._tickSize()+1,s=a.major.enabled?function(e){var t,n,i=[];for(t=0,n=e.length;t<n;t++)e[t].major&&i.push(t);return i}(e):[],d=s.length,c=s[0],u=s[d-1];if(d>l)return!function(e,t,n){var i,r,a=0,o=t[0];for(n=Math.ceil(n),i=0;i<e.length;i++)r=e[i],i===o?(r._index=i,o=t[++a*n]):delete r.label}(e,s,d/l),mn(e);if(i=function(e,t,n,i){var r,a,o,l,s=function(e){var t,n,i=e.length;if(i<2)return!1;for(n=e[0],t=1;t<i;++t)if(e[t]-e[t-1]!==n)return!1;return n}(e),d=(t.length-1)/i;if(!s)return Math.max(d,1);for(o=0,l=(r=G.math._factorize(s)).length-1;o<l;o++)if((a=r[o])>d)return a;return Math.max(d,1)}(s,e,0,l),d>0){for(t=0,n=d-1;t<n;t++)fn(e,i,s[t],s[t+1]);return r=d>1?(u-c)/(d-1):null,fn(e,i,G.isNullOrUndef(r)?0:c-r,c),fn(e,i,u,G.isNullOrUndef(r)?e.length:u+r),mn(e)}return fn(e,i),mn(e)},_tickSize:function(){var e=this.options.ticks,t=G.toRadians(this.labelRotation),n=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),r=this._getLabelSizes(),a=e.autoSkipPadding||0,o=r?r.widest.width+a:0,l=r?r.highest.height+a:0;return this.isHorizontal()?l*n>o*i?o/n:l/i:l*i<o*n?l/n:o/i},_isVisible:function(){var e,t,n,i=this.chart,r=this.options.display;if("auto"!==r)return!!r;for(e=0,t=i.data.datasets.length;e<t;++e)if(i.isDatasetVisible(e)&&((n=i.getDatasetMeta(e)).xAxisID===this.id||n.yAxisID===this.id))return!0;return!1},_computeGridLineItems:function(e){var t,n,i,r,a,o,l,s,d,c,u,p,m,f,h,g,b,v=this,y=v.chart,x=v.options,S=x.gridLines,w=x.position,C=S.offsetGridLines,E=v.isHorizontal(),I=v._ticksToDraw,T=I.length+(C?1:0),M=dn(S),D=[],k=S.drawBorder?on(S.lineWidth,0,0):0,A=k/2,F=G._alignPixel,P=function(e){return F(y,e,k)};for("top"===w?(t=P(v.bottom),l=v.bottom-M,d=t-A,u=P(e.top)+A,m=e.bottom):"bottom"===w?(t=P(v.top),u=e.top,m=P(e.bottom)-A,l=t+A,d=v.top+M):"left"===w?(t=P(v.right),o=v.right-M,s=t-A,c=P(e.left)+A,p=e.right):(t=P(v.left),c=e.left,p=P(e.right)-A,o=t+A,s=v.left+M),n=0;n<T;++n)i=I[n]||{},rn(i.label)&&n<I.length||(n===v.zeroLineIndex&&x.offset===C?(f=S.zeroLineWidth,h=S.zeroLineColor,g=S.zeroLineBorderDash||[],b=S.zeroLineBorderDashOffset||0):(f=on(S.lineWidth,n,1),h=on(S.color,n,"rgba(0,0,0,0.1)"),g=S.borderDash||[],b=S.borderDashOffset||0),void 0!==(r=ln(v,i._index||n,C))&&(a=F(y,r,f),E?o=s=c=p=a:l=d=u=m=a,D.push({tx1:o,ty1:l,tx2:s,ty2:d,x1:c,y1:u,x2:p,y2:m,width:f,color:h,borderDash:g,borderDashOffset:b})));return D.ticksLength=T,D.borderValue=t,D},_computeLabelItems:function(){var e,t,n,i,r,a,o,l,s,d,c,u,p=this,m=p.options,f=m.ticks,h=m.position,g=f.mirror,b=p.isHorizontal(),v=p._ticksToDraw,y=pn(f),x=f.padding,S=dn(m.gridLines),w=-G.toRadians(p.labelRotation),C=[];for("top"===h?(a=p.bottom-S-x,o=w?"left":"center"):"bottom"===h?(a=p.top+S+x,o=w?"right":"center"):"left"===h?(r=p.right-(g?0:S)-x,o=g?"left":"right"):(r=p.left+(g?0:S)+x,o=g?"right":"left"),e=0,t=v.length;e<t;++e)i=(n=v[e]).label,rn(i)||(l=p.getPixelForTick(n._index||e)+f.labelOffset,d=(s=n.major?y.major:y.minor).lineHeight,c=nn(i)?i.length:1,b?(r=l,u="top"===h?((w?1:.5)-c)*d:(w?0:.5)*d):(a=l,u=(1-c)*d/2),C.push({x:r,y:a,rotation:w,label:i,font:s,textOffset:u,textAlign:o}));return C},_drawGrid:function(e){var t=this,n=t.options.gridLines;if(n.display){var i,r,a,o,l,s=t.ctx,d=t.chart,c=G._alignPixel,u=n.drawBorder?on(n.lineWidth,0,0):0,p=t._gridLineItems||(t._gridLineItems=t._computeGridLineItems(e));for(a=0,o=p.length;a<o;++a)i=(l=p[a]).width,r=l.color,i&&r&&(s.save(),s.lineWidth=i,s.strokeStyle=r,s.setLineDash&&(s.setLineDash(l.borderDash),s.lineDashOffset=l.borderDashOffset),s.beginPath(),n.drawTicks&&(s.moveTo(l.tx1,l.ty1),s.lineTo(l.tx2,l.ty2)),n.drawOnChartArea&&(s.moveTo(l.x1,l.y1),s.lineTo(l.x2,l.y2)),s.stroke(),s.restore());if(u){var m,f,h,g,b=u,v=on(n.lineWidth,p.ticksLength-1,1),y=p.borderValue;t.isHorizontal()?(m=c(d,t.left,b)-b/2,f=c(d,t.right,v)+v/2,h=g=y):(h=c(d,t.top,b)-b/2,g=c(d,t.bottom,v)+v/2,m=f=y),s.lineWidth=u,s.strokeStyle=on(n.color,0),s.beginPath(),s.moveTo(m,h),s.lineTo(f,g),s.stroke()}}},_drawLabels:function(){var e=this;if(e.options.ticks.display){var t,n,i,r,a,o,l,s,d=e.ctx,c=e._labelItems||(e._labelItems=e._computeLabelItems());for(t=0,i=c.length;t<i;++t){if(o=(a=c[t]).font,d.save(),d.translate(a.x,a.y),d.rotate(a.rotation),d.font=o.string,d.fillStyle=o.color,d.textBaseline="middle",d.textAlign=a.textAlign,l=a.label,s=a.textOffset,nn(l))for(n=0,r=l.length;n<r;++n)d.fillText(""+l[n],0,s),s+=o.lineHeight;else d.fillText(l,0,s);d.restore()}}},_drawTitle:function(){var e=this,t=e.ctx,n=e.options,i=n.scaleLabel;if(i.display){var r,a,o=an(i.fontColor,B.global.defaultFontColor),l=G.options._parseFont(i),s=G.options.toPadding(i.padding),d=l.lineHeight/2,c=n.position,u=0;if(e.isHorizontal())r=e.left+e.width/2,a="bottom"===c?e.bottom-d-s.bottom:e.top+d+s.top;else{var p="left"===c;r=p?e.left+d+s.top:e.right-d-s.top,a=e.top+e.height/2,u=p?-.5*Math.PI:.5*Math.PI}t.save(),t.translate(r,a),t.rotate(u),t.textAlign="center",t.textBaseline="middle",t.fillStyle=o,t.font=l.string,t.fillText(i.labelString,0,0),t.restore()}},draw:function(e){this._isVisible()&&(this._drawGrid(e),this._drawTitle(),this._drawLabels())},_layers:function(){var e=this,t=e.options,n=t.ticks&&t.ticks.z||0,i=t.gridLines&&t.gridLines.z||0;return e._isVisible()&&n!==i&&e.draw===e._draw?[{z:i,draw:function(){e._drawGrid.apply(e,arguments),e._drawTitle.apply(e,arguments)}},{z:n,draw:function(){e._drawLabels.apply(e,arguments)}}]:[{z:n,draw:function(){e.draw.apply(e,arguments)}}]},_getMatchingVisibleMetas:function(e){var t=this,n=t.isHorizontal();return t.chart._getSortedVisibleDatasetMetas().filter(function(i){return(!e||i.type===e)&&(n?i.xAxisID===t.id:i.yAxisID===t.id)})}});hn.prototype._draw=hn.prototype.draw;var gn=hn,bn=G.isNullOrUndef,vn=gn.extend({determineDataLimits:function(){var e,t=this,n=t._getLabels(),i=t.options.ticks,r=i.min,a=i.max,o=0,l=n.length-1;void 0!==r&&(e=n.indexOf(r))>=0&&(o=e),void 0!==a&&(e=n.indexOf(a))>=0&&(l=e),t.minIndex=o,t.maxIndex=l,t.min=n[o],t.max=n[l]},buildTicks:function(){var e=this._getLabels(),t=this.minIndex,n=this.maxIndex;this.ticks=0===t&&n===e.length-1?e:e.slice(t,n+1)},getLabelForIndex:function(e,t){var n=this.chart;return n.getDatasetMeta(t).controller._getValueScaleId()===this.id?this.getRightValue(n.data.datasets[t].data[e]):this._getLabels()[e]},_configure:function(){var e=this,t=e.options.offset,n=e.ticks;gn.prototype._configure.call(e),e.isHorizontal()||(e._reversePixels=!e._reversePixels),n&&(e._startValue=e.minIndex-(t?.5:0),e._valueRange=Math.max(n.length-(t?0:1),1))},getPixelForValue:function(e,t,n){var i,r,a,o=this;return bn(t)||bn(n)||(e=o.chart.data.datasets[n].data[t]),bn(e)||(i=o.isHorizontal()?e.x:e.y),(void 0!==i||void 0!==e&&isNaN(t))&&(r=o._getLabels(),e=G.valueOrDefault(i,e),t=-1!==(a=r.indexOf(e))?a:t,isNaN(t)&&(t=e)),o.getPixelForDecimal((t-o._startValue)/o._valueRange)},getPixelForTick:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e],e+this.minIndex)},getValueForPixel:function(e){var t=Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange);return Math.min(Math.max(t,0),this.ticks.length-1)},getBasePixel:function(){return this.bottom}}),yn={position:"bottom"};vn._defaults=yn;var xn=G.noop,Sn=G.isNullOrUndef,wn=gn.extend({getRightValue:function(e){return"string"==typeof e?+e:gn.prototype.getRightValue.call(this,e)},handleTickRangeOptions:function(){var e=this,t=e.options.ticks;if(t.beginAtZero){var n=G.sign(e.min),i=G.sign(e.max);n<0&&i<0?e.max=0:n>0&&i>0&&(e.min=0)}var r=void 0!==t.min||void 0!==t.suggestedMin,a=void 0!==t.max||void 0!==t.suggestedMax;void 0!==t.min?e.min=t.min:void 0!==t.suggestedMin&&(null===e.min?e.min=t.suggestedMin:e.min=Math.min(e.min,t.suggestedMin)),void 0!==t.max?e.max=t.max:void 0!==t.suggestedMax&&(null===e.max?e.max=t.suggestedMax:e.max=Math.max(e.max,t.suggestedMax)),r!==a&&e.min>=e.max&&(r?e.max=e.min+1:e.min=e.max-1),e.min===e.max&&(e.max++,t.beginAtZero||e.min--)},getTickLimit:function(){var e,t=this.options.ticks,n=t.stepSize,i=t.maxTicksLimit;return n?e=Math.ceil(this.max/n)-Math.floor(this.min/n)+1:(e=this._computeTickLimit(),i=i||11),i&&(e=Math.min(i,e)),e},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:xn,buildTicks:function(){var e=this,t=e.options.ticks,n=e.getTickLimit(),i={maxTicks:n=Math.max(2,n),min:t.min,max:t.max,precision:t.precision,stepSize:G.valueOrDefault(t.fixedStepSize,t.stepSize)},r=e.ticks=function(e,t){var n,i,r,a,o=[],l=e.stepSize,s=l||1,d=e.maxTicks-1,c=e.min,u=e.max,p=e.precision,m=t.min,f=t.max,h=G.niceNum((f-m)/d/s)*s;if(h<1e-14&&Sn(c)&&Sn(u))return[m,f];(a=Math.ceil(f/h)-Math.floor(m/h))>d&&(h=G.niceNum(a*h/d/s)*s),l||Sn(p)?n=Math.pow(10,G._decimalPlaces(h)):(n=Math.pow(10,p),h=Math.ceil(h*n)/n),i=Math.floor(m/h)*h,r=Math.ceil(f/h)*h,l&&(!Sn(c)&&G.almostWhole(c/h,h/1e3)&&(i=c),!Sn(u)&&G.almostWhole(u/h,h/1e3)&&(r=u)),a=(r-i)/h,a=G.almostEquals(a,Math.round(a),h/1e3)?Math.round(a):Math.ceil(a),i=Math.round(i*n)/n,r=Math.round(r*n)/n,o.push(Sn(c)?i:c);for(var g=1;g<a;++g)o.push(Math.round((i+g*h)*n)/n);return o.push(Sn(u)?r:u),o}(i,e);e.handleDirectionalChanges(),e.max=G.max(r),e.min=G.min(r),t.reverse?(r.reverse(),e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max)},convertTicksToLabels:function(){var e=this;e.ticksAsNumbers=e.ticks.slice(),e.zeroLineIndex=e.ticks.indexOf(0),gn.prototype.convertTicksToLabels.call(e)},_configure:function(){var e,t=this,n=t.getTicks(),i=t.min,r=t.max;gn.prototype._configure.call(t),t.options.offset&&n.length&&(i-=e=(r-i)/Math.max(n.length-1,1)/2,r+=e),t._startValue=i,t._endValue=r,t._valueRange=r-i}}),Cn={position:"left",ticks:{callback:tn.formatters.linear}};function En(e,t,n,i){var r,a,o=e.options,l=function(e,t,n){var i=[n.type,void 0===t&&void 0===n.stack?n.index:"",n.stack].join(".");return void 0===e[i]&&(e[i]={pos:[],neg:[]}),e[i]}(t,o.stacked,n),s=l.pos,d=l.neg,c=i.length;for(r=0;r<c;++r)a=e._parseValue(i[r]),isNaN(a.min)||isNaN(a.max)||n.data[r].hidden||(s[r]=s[r]||0,d[r]=d[r]||0,o.relativePoints?s[r]=100:a.min<0||a.max<0?d[r]+=a.min:s[r]+=a.max)}function In(e,t,n){var i,r,a=n.length;for(i=0;i<a;++i)r=e._parseValue(n[i]),isNaN(r.min)||isNaN(r.max)||t.data[i].hidden||(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}var Tn=wn.extend({determineDataLimits:function(){var e,t,n,i,r=this,a=r.options,o=r.chart.data.datasets,l=r._getMatchingVisibleMetas(),s=a.stacked,d={},c=l.length;if(r.min=Number.POSITIVE_INFINITY,r.max=Number.NEGATIVE_INFINITY,void 0===s)for(e=0;!s&&e<c;++e)s=void 0!==(t=l[e]).stack;for(e=0;e<c;++e)n=o[(t=l[e]).index].data,s?En(r,d,t,n):In(r,t,n);G.each(d,function(e){i=e.pos.concat(e.neg),r.min=Math.min(r.min,G.min(i)),r.max=Math.max(r.max,G.max(i))}),r.min=G.isFinite(r.min)&&!isNaN(r.min)?r.min:0,r.max=G.isFinite(r.max)&&!isNaN(r.max)?r.max:1,r.handleTickRangeOptions()},_computeTickLimit:function(){var e;return this.isHorizontal()?Math.ceil(this.width/40):(e=G.options._parseFont(this.options.ticks),Math.ceil(this.height/e.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(e,t){return this._getScaleLabel(this.chart.data.datasets[t].data[e])},getPixelForValue:function(e){return this.getPixelForDecimal((+this.getRightValue(e)-this._startValue)/this._valueRange)},getValueForPixel:function(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange},getPixelForTick:function(e){var t=this.ticksAsNumbers;return e<0||e>t.length-1?null:this.getPixelForValue(t[e])}}),Mn=Cn;Tn._defaults=Mn;var Dn=G.valueOrDefault,kn=G.math.log10,An={position:"left",ticks:{callback:tn.formatters.logarithmic}};function Fn(e,t){return G.isFinite(e)&&e>=0?e:t}var Pn=gn.extend({determineDataLimits:function(){var e,t,n,i,r,a,o=this,l=o.options,s=o.chart,d=s.data.datasets,c=o.isHorizontal();function u(e){return c?e.xAxisID===o.id:e.yAxisID===o.id}o.min=Number.POSITIVE_INFINITY,o.max=Number.NEGATIVE_INFINITY,o.minNotZero=Number.POSITIVE_INFINITY;var p=l.stacked;if(void 0===p)for(e=0;e<d.length;e++)if(t=s.getDatasetMeta(e),s.isDatasetVisible(e)&&u(t)&&void 0!==t.stack){p=!0;break}if(l.stacked||p){var m={};for(e=0;e<d.length;e++){var f=[(t=s.getDatasetMeta(e)).type,void 0===l.stacked&&void 0===t.stack?e:"",t.stack].join(".");if(s.isDatasetVisible(e)&&u(t))for(void 0===m[f]&&(m[f]=[]),r=0,a=(i=d[e].data).length;r<a;r++){var h=m[f];n=o._parseValue(i[r]),isNaN(n.min)||isNaN(n.max)||t.data[r].hidden||n.min<0||n.max<0||(h[r]=h[r]||0,h[r]+=n.max)}}G.each(m,function(e){if(e.length>0){var t=G.min(e),n=G.max(e);o.min=Math.min(o.min,t),o.max=Math.max(o.max,n)}})}else for(e=0;e<d.length;e++)if(t=s.getDatasetMeta(e),s.isDatasetVisible(e)&&u(t))for(r=0,a=(i=d[e].data).length;r<a;r++)n=o._parseValue(i[r]),isNaN(n.min)||isNaN(n.max)||t.data[r].hidden||n.min<0||n.max<0||(o.min=Math.min(n.min,o.min),o.max=Math.max(n.max,o.max),0!==n.min&&(o.minNotZero=Math.min(n.min,o.minNotZero)));o.min=G.isFinite(o.min)?o.min:null,o.max=G.isFinite(o.max)?o.max:null,o.minNotZero=G.isFinite(o.minNotZero)?o.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var e=this,t=e.options.ticks;e.min=Fn(t.min,e.min),e.max=Fn(t.max,e.max),e.min===e.max&&(0!==e.min&&null!==e.min?(e.min=Math.pow(10,Math.floor(kn(e.min))-1),e.max=Math.pow(10,Math.floor(kn(e.max))+1)):(e.min=1,e.max=10)),null===e.min&&(e.min=Math.pow(10,Math.floor(kn(e.max))-1)),null===e.max&&(e.max=0!==e.min?Math.pow(10,Math.floor(kn(e.min))+1):10),null===e.minNotZero&&(e.min>0?e.minNotZero=e.min:e.max<1?e.minNotZero=Math.pow(10,Math.floor(kn(e.max))):e.minNotZero=1)},buildTicks:function(){var e=this,t=e.options.ticks,n=!e.isHorizontal(),i={min:Fn(t.min),max:Fn(t.max)},r=e.ticks=function(e,t){var n,i,r=[],a=Dn(e.min,Math.pow(10,Math.floor(kn(t.min)))),o=Math.floor(kn(t.max)),l=Math.ceil(t.max/Math.pow(10,o));0===a?(n=Math.floor(kn(t.minNotZero)),i=Math.floor(t.minNotZero/Math.pow(10,n)),r.push(a),a=i*Math.pow(10,n)):(n=Math.floor(kn(a)),i=Math.floor(a/Math.pow(10,n)));var s=n<0?Math.pow(10,Math.abs(n)):1;do{r.push(a),10==++i&&(i=1,s=++n>=0?1:s),a=Math.round(i*Math.pow(10,n)*s)/s}while(n<o||n===o&&i<l);var d=Dn(e.max,a);return r.push(d),r}(i,e);e.max=G.max(r),e.min=G.min(r),t.reverse?(n=!n,e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max),n&&r.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),gn.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(e,t){return this._getScaleLabel(this.chart.data.datasets[t].data[e])},getPixelForTick:function(e){var t=this.tickValues;return e<0||e>t.length-1?null:this.getPixelForValue(t[e])},_getFirstTickValue:function(e){var t=Math.floor(kn(e));return Math.floor(e/Math.pow(10,t))*Math.pow(10,t)},_configure:function(){var e=this,t=e.min,n=0;gn.prototype._configure.call(e),0===t&&(t=e._getFirstTickValue(e.minNotZero),n=Dn(e.options.ticks.fontSize,B.global.defaultFontSize)/e._length),e._startValue=kn(t),e._valueOffset=n,e._valueRange=(kn(e.max)-kn(t))/(1-n)},getPixelForValue:function(e){var t=this,n=0;return(e=+t.getRightValue(e))>t.min&&e>0&&(n=(kn(e)-t._startValue)/t._valueRange+t._valueOffset),t.getPixelForDecimal(n)},getValueForPixel:function(e){var t=this,n=t.getDecimalForPixel(e);return 0===n&&0===t.min?0:Math.pow(10,t._startValue+(n-t._valueOffset)*t._valueRange)}}),_n=An;Pn._defaults=_n;var Nn=G.valueOrDefault,Ln=G.valueAtIndexOrDefault,On=G.options.resolve,Bn={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:tn.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(e){return e}}};function Rn(e){var t=e.ticks;return t.display&&e.display?Nn(t.fontSize,B.global.defaultFontSize)+2*t.backdropPaddingY:0}function jn(e,t,n,i,r){return e===i||e===r?{start:t-n/2,end:t+n/2}:e<i||e>r?{start:t-n,end:t}:{start:t,end:t+n}}function Vn(e){return 0===e||180===e?"center":e<180?"left":"right"}function zn(e,t,n,i){var r,a,o=n.y+i/2;if(G.isArray(t))for(r=0,a=t.length;r<a;++r)e.fillText(t[r],n.x,o),o+=i;else e.fillText(t,n.x,o)}function Gn(e,t,n){90===e||270===e?n.y-=t.h/2:(e>270||e<90)&&(n.y-=t.h)}function Wn(e){return G.isNumber(e)?e:0}var qn=wn.extend({setDimensions:function(){var e=this;e.width=e.maxWidth,e.height=e.maxHeight,e.paddingTop=Rn(e.options)/2,e.xCenter=Math.floor(e.width/2),e.yCenter=Math.floor((e.height-e.paddingTop)/2),e.drawingArea=Math.min(e.height-e.paddingTop,e.width)/2},determineDataLimits:function(){var e=this,t=e.chart,n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;G.each(t.data.datasets,function(r,a){if(t.isDatasetVisible(a)){var o=t.getDatasetMeta(a);G.each(r.data,function(t,r){var a=+e.getRightValue(t);isNaN(a)||o.data[r].hidden||(n=Math.min(a,n),i=Math.max(a,i))})}}),e.min=n===Number.POSITIVE_INFINITY?0:n,e.max=i===Number.NEGATIVE_INFINITY?0:i,e.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/Rn(this.options))},convertTicksToLabels:function(){var e=this;wn.prototype.convertTicksToLabels.call(e),e.pointLabels=e.chart.data.labels.map(function(){var t=G.callback(e.options.pointLabels.callback,arguments,e);return t||0===t?t:""})},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},fit:function(){var e=this.options;e.display&&e.pointLabels.display?!function(e){var t,n,i,r=G.options._parseFont(e.options.pointLabels),a={l:0,r:e.width,t:0,b:e.height-e.paddingTop},o={};e.ctx.font=r.string,e._pointLabelSizes=[];var l,s,d,c=e.chart.data.labels.length;for(t=0;t<c;t++){i=e.getPointPosition(t,e.drawingArea+5),l=e.ctx,s=r.lineHeight,d=e.pointLabels[t],n=G.isArray(d)?{w:G.longestText(l,l.font,d),h:d.length*s}:{w:l.measureText(d).width,h:s},e._pointLabelSizes[t]=n;var u=e.getIndexAngle(t),p=G.toDegrees(u)%360,m=jn(p,i.x,n.w,0,180),f=jn(p,i.y,n.h,90,270);m.start<a.l&&(a.l=m.start,o.l=u),m.end>a.r&&(a.r=m.end,o.r=u),f.start<a.t&&(a.t=f.start,o.t=u),f.end>a.b&&(a.b=f.end,o.b=u)}e.setReductions(e.drawingArea,a,o)}(this):this.setCenterPoint(0,0,0,0)},setReductions:function(e,t,n){var i=this,r=t.l/Math.sin(n.l),a=Math.max(t.r-i.width,0)/Math.sin(n.r),o=-t.t/Math.cos(n.t),l=-Math.max(t.b-(i.height-i.paddingTop),0)/Math.cos(n.b);r=Wn(r),a=Wn(a),o=Wn(o),l=Wn(l),i.drawingArea=Math.min(Math.floor(e-(r+a)/2),Math.floor(e-(o+l)/2)),i.setCenterPoint(r,a,o,l)},setCenterPoint:function(e,t,n,i){var r=this,a=r.width-t-r.drawingArea,o=e+r.drawingArea,l=n+r.drawingArea,s=r.height-r.paddingTop-i-r.drawingArea;r.xCenter=Math.floor((o+a)/2+r.left),r.yCenter=Math.floor((l+s)/2+r.top+r.paddingTop)},getIndexAngle:function(e){var t=this.chart,n=(e*(360/t.data.labels.length)+((t.options||{}).startAngle||0))%360;return(n<0?n+360:n)*Math.PI*2/360},getDistanceFromCenterForValue:function(e){var t=this;if(G.isNullOrUndef(e))return NaN;var n=t.drawingArea/(t.max-t.min);return t.options.ticks.reverse?(t.max-e)*n:(e-t.min)*n},getPointPosition:function(e,t){var n=this.getIndexAngle(e)-Math.PI/2;return{x:Math.cos(n)*t+this.xCenter,y:Math.sin(n)*t+this.yCenter}},getPointPositionForValue:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))},getBasePosition:function(e){var t=this.min,n=this.max;return this.getPointPositionForValue(e||0,this.beginAtZero?0:t<0&&n<0?n:t>0&&n>0?t:0)},_drawGrid:function(){var e,t,n,i=this,r=i.ctx,a=i.options,o=a.gridLines,l=a.angleLines,s=Nn(l.lineWidth,o.lineWidth),d=Nn(l.color,o.color);if(a.pointLabels.display&&!function(e){var t=e.ctx,n=e.options,i=n.pointLabels,r=Rn(n),a=e.getDistanceFromCenterForValue(n.ticks.reverse?e.min:e.max),o=G.options._parseFont(i);t.save(),t.font=o.string,t.textBaseline="middle";for(var l=e.chart.data.labels.length-1;l>=0;l--){var s=0===l?r/2:0,d=e.getPointPosition(l,a+s+5),c=Ln(i.fontColor,l,B.global.defaultFontColor);t.fillStyle=c;var u=e.getIndexAngle(l),p=G.toDegrees(u);t.textAlign=Vn(p),Gn(p,e._pointLabelSizes[l],d),zn(t,e.pointLabels[l],d,o.lineHeight)}t.restore()}(i),o.display&&G.each(i.ticks,function(e,n){0!==n&&(t=i.getDistanceFromCenterForValue(i.ticksAsNumbers[n]),function(e,t,n,i){var r,a=e.ctx,o=t.circular,l=e.chart.data.labels.length,s=Ln(t.color,i-1),d=Ln(t.lineWidth,i-1);if((o||l)&&s&&d){if(a.save(),a.strokeStyle=s,a.lineWidth=d,a.setLineDash&&(a.setLineDash(t.borderDash||[]),a.lineDashOffset=t.borderDashOffset||0),a.beginPath(),o)a.arc(e.xCenter,e.yCenter,n,0,2*Math.PI);else{r=e.getPointPosition(0,n),a.moveTo(r.x,r.y);for(var c=1;c<l;c++)r=e.getPointPosition(c,n),a.lineTo(r.x,r.y)}a.closePath(),a.stroke(),a.restore()}}(i,o,t,n))}),l.display&&s&&d){for(r.save(),r.lineWidth=s,r.strokeStyle=d,r.setLineDash&&(r.setLineDash(On([l.borderDash,o.borderDash,[]])),r.lineDashOffset=On([l.borderDashOffset,o.borderDashOffset,0])),e=i.chart.data.labels.length-1;e>=0;e--)t=i.getDistanceFromCenterForValue(a.ticks.reverse?i.min:i.max),n=i.getPointPosition(e,t),r.beginPath(),r.moveTo(i.xCenter,i.yCenter),r.lineTo(n.x,n.y),r.stroke();r.restore()}},_drawLabels:function(){var e=this,t=e.ctx,n=e.options.ticks;if(n.display){var i,r,a=e.getIndexAngle(0),o=G.options._parseFont(n),l=Nn(n.fontColor,B.global.defaultFontColor);t.save(),t.font=o.string,t.translate(e.xCenter,e.yCenter),t.rotate(a),t.textAlign="center",t.textBaseline="middle",G.each(e.ticks,function(a,s){(0!==s||n.reverse)&&(i=e.getDistanceFromCenterForValue(e.ticksAsNumbers[s]),n.showLabelBackdrop&&(r=t.measureText(a).width,t.fillStyle=n.backdropColor,t.fillRect(-r/2-n.backdropPaddingX,-i-o.size/2-n.backdropPaddingY,r+2*n.backdropPaddingX,o.size+2*n.backdropPaddingY)),t.fillStyle=l,t.fillText(a,0,-i))}),t.restore()}},_drawTitle:G.noop}),Hn=Bn;qn._defaults=Hn;var Un=G._deprecated,$n=G.options.resolve,Kn=G.valueOrDefault,Yn=Number.MIN_SAFE_INTEGER||-9007199254740991,Jn=Number.MAX_SAFE_INTEGER||9007199254740991,Xn={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Qn=Object.keys(Xn);function Zn(e,t){return e-t}function ei(e){return G.valueOrDefault(e.time.min,e.ticks.min)}function ti(e){return G.valueOrDefault(e.time.max,e.ticks.max)}function ni(e,t,n,i){var r=function(e,t,n){for(var i,r,a,o=0,l=e.length-1;o>=0&&o<=l;){if(r=e[(i=o+l>>1)-1]||null,a=e[i],!r)return{lo:null,hi:a};if(a[t]<n)o=i+1;else{if(!(r[t]>n))return{lo:r,hi:a};l=i-1}}return{lo:a,hi:null}}(e,t,n),a=r.lo?r.hi?r.lo:e[e.length-2]:e[0],o=r.lo?r.hi?r.hi:e[e.length-1]:e[1],l=o[t]-a[t],s=l?(n-a[t])/l:0,d=(o[i]-a[i])*s;return a[i]+d}function ii(e,t){var n=e._adapter,i=e.options.time,r=i.parser,a=r||i.format,o=t;return"function"==typeof r&&(o=r(o)),G.isFinite(o)||(o="string"==typeof a?n.parse(o,a):n.parse(o)),null!==o?+o:(r||"function"!=typeof a||(o=a(t),G.isFinite(o)||(o=n.parse(o))),o)}function ri(e,t){if(G.isNullOrUndef(t))return null;var n=e.options.time,i=ii(e,e.getRightValue(t));return null===i||n.round&&(i=+e._adapter.startOf(i,n.round)),i}function ai(e,t,n,i){var r,a,o,l=Qn.length;for(r=Qn.indexOf(e);r<l-1;++r)if(o=(a=Xn[Qn[r]]).steps?a.steps:Jn,a.common&&Math.ceil((n-t)/(o*a.size))<=i)return Qn[r];return Qn[l-1]}function oi(e,t,n){var i,r,a=[],o={},l=t.length;for(i=0;i<l;++i)o[r=t[i]]=i,a.push({value:r,major:!1});return 0!==l&&n?function(e,t,n,i){var r,a,o=e._adapter,l=+o.startOf(t[0].value,i),s=t[t.length-1].value;for(r=l;r<=s;r=+o.add(r,1,i))(a=n[r])>=0&&(t[a].major=!0);return t}(e,a,o,n):a}var li=gn.extend({initialize:function(){this.mergeTicksOptions(),gn.prototype.initialize.call(this)},update:function(){var e=this,t=e.options,n=t.time||(t.time={}),i=e._adapter=new en._date(t.adapters.date);return Un("time scale",n.format,"time.format","time.parser"),Un("time scale",n.min,"time.min","ticks.min"),Un("time scale",n.max,"time.max","ticks.max"),G.mergeIf(n.displayFormats,i.formats()),gn.prototype.update.apply(e,arguments)},getRightValue:function(e){return e&&void 0!==e.t&&(e=e.t),gn.prototype.getRightValue.call(this,e)},determineDataLimits:function(){var e,t,n,i,r,a,o,l=this,s=l.chart,d=l._adapter,c=l.options,u=c.time.unit||"day",p=Jn,m=Yn,f=[],h=[],g=[],b=l._getLabels();for(e=0,n=b.length;e<n;++e)g.push(ri(l,b[e]));for(e=0,n=(s.data.datasets||[]).length;e<n;++e)if(s.isDatasetVisible(e))if(r=s.data.datasets[e].data,G.isObject(r[0]))for(h[e]=[],t=0,i=r.length;t<i;++t)a=ri(l,r[t]),f.push(a),h[e][t]=a;else h[e]=g.slice(0),o||(f=f.concat(g),o=!0);else h[e]=[];g.length&&(p=Math.min(p,g[0]),m=Math.max(m,g[g.length-1])),f.length&&(f=n>1?function(e){var t,n,i,r={},a=[];for(t=0,n=e.length;t<n;++t)r[i=e[t]]||(r[i]=!0,a.push(i));return a}(f).sort(Zn):f.sort(Zn),p=Math.min(p,f[0]),m=Math.max(m,f[f.length-1])),p=ri(l,ei(c))||p,m=ri(l,ti(c))||m,p=p===Jn?+d.startOf(Date.now(),u):p,m=m===Yn?+d.endOf(Date.now(),u)+1:m,l.min=Math.min(p,m),l.max=Math.max(p+1,m),l._table=[],l._timestamps={data:f,datasets:h,labels:g}},buildTicks:function(){var e,t,n,i=this,r=i.min,a=i.max,o=i.options,l=o.ticks,s=o.time,d=i._timestamps,c=[],u=i.getLabelCapacity(r),p=l.source,m=o.distribution;for(d="data"===p||"auto"===p&&"series"===m?d.data:"labels"===p?d.labels:function(e,t,n,i){var r,a=e._adapter,o=e.options,l=o.time,s=l.unit||ai(l.minUnit,t,n,i),d=$n([l.stepSize,l.unitStepSize,1]),c="week"===s&&l.isoWeekday,u=t,p=[];if(c&&(u=+a.startOf(u,"isoWeek",c)),u=+a.startOf(u,c?"day":s),a.diff(n,t,s)>1e5*d)throw t+" and "+n+" are too far apart with stepSize of "+d+" "+s;for(r=u;r<n;r=+a.add(r,d,s))p.push(r);return r!==n&&"ticks"!==o.bounds||p.push(r),p}(i,r,a,u),"ticks"===o.bounds&&d.length&&(r=d[0],a=d[d.length-1]),r=ri(i,ei(o))||r,a=ri(i,ti(o))||a,e=0,t=d.length;e<t;++e)(n=d[e])>=r&&n<=a&&c.push(n);return i.min=r,i.max=a,i._unit=s.unit||(l.autoSkip?ai(s.minUnit,i.min,i.max,u):function(e,t,n,i,r){var a,o;for(a=Qn.length-1;a>=Qn.indexOf(n);a--)if(o=Qn[a],Xn[o].common&&e._adapter.diff(r,i,o)>=t-1)return o;return Qn[n?Qn.indexOf(n):0]}(i,c.length,s.minUnit,i.min,i.max)),i._majorUnit=l.major.enabled&&"year"!==i._unit?function(e){for(var t=Qn.indexOf(e)+1,n=Qn.length;t<n;++t)if(Xn[Qn[t]].common)return Qn[t]}(i._unit):void 0,i._table=function(e,t,n,i){if("linear"===i||!e.length)return[{time:t,pos:0},{time:n,pos:1}];var r,a,o,l,s,d=[],c=[t];for(r=0,a=e.length;r<a;++r)(l=e[r])>t&&l<n&&c.push(l);for(c.push(n),r=0,a=c.length;r<a;++r)s=c[r+1],o=c[r-1],l=c[r],void 0!==o&&void 0!==s&&Math.round((s+o)/2)===l||d.push({time:l,pos:r/(a-1)});return d}(i._timestamps.data,r,a,m),i._offsets=function(e,t,n,i,r){var a,o,l=0,s=0;return r.offset&&t.length&&(a=ni(e,"time",t[0],"pos"),l=1===t.length?1-a:(ni(e,"time",t[1],"pos")-a)/2,o=ni(e,"time",t[t.length-1],"pos"),s=1===t.length?o:(o-ni(e,"time",t[t.length-2],"pos"))/2),{start:l,end:s,factor:1/(l+1+s)}}(i._table,c,0,0,o),l.reverse&&c.reverse(),oi(i,c,i._majorUnit)},getLabelForIndex:function(e,t){var n=this,i=n._adapter,r=n.chart.data,a=n.options.time,o=r.labels&&e<r.labels.length?r.labels[e]:"",l=r.datasets[t].data[e];return G.isObject(l)&&(o=n.getRightValue(l)),a.tooltipFormat?i.format(ii(n,o),a.tooltipFormat):"string"==typeof o?o:i.format(ii(n,o),a.displayFormats.datetime)},tickFormatFunction:function(e,t,n,i){var r=this._adapter,a=this.options,o=a.time.displayFormats,l=o[this._unit],s=this._majorUnit,d=o[s],c=n[t],u=a.ticks,p=s&&d&&c&&c.major,m=r.format(e,i||(p?d:l)),f=p?u.major:u.minor,h=$n([f.callback,f.userCallback,u.callback,u.userCallback]);return h?h(m,t,n):m},convertTicksToLabels:function(e){var t,n,i=[];for(t=0,n=e.length;t<n;++t)i.push(this.tickFormatFunction(e[t].value,t,e));return i},getPixelForOffset:function(e){var t=this._offsets,n=ni(this._table,"time",e,"pos");return this.getPixelForDecimal((t.start+n)*t.factor)},getPixelForValue:function(e,t,n){var i=null;if(void 0!==t&&void 0!==n&&(i=this._timestamps.datasets[n][t]),null===i&&(i=ri(this,e)),null!==i)return this.getPixelForOffset(i)},getPixelForTick:function(e){var t=this.getTicks();return e>=0&&e<t.length?this.getPixelForOffset(t[e].value):null},getValueForPixel:function(e){var t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end,i=ni(this._table,"pos",n,"time");return this._adapter._create(i)},_getLabelSize:function(e){var t=this.options.ticks,n=this.ctx.measureText(e).width,i=G.toRadians(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(i),a=Math.sin(i),o=Kn(t.fontSize,B.global.defaultFontSize);return{w:n*r+o*a,h:n*a+o*r}},getLabelWidth:function(e){return this._getLabelSize(e).w},getLabelCapacity:function(e){var t=this,n=t.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,a=t.tickFormatFunction(e,0,oi(t,[e],t._majorUnit),r),o=t._getLabelSize(a),l=Math.floor(t.isHorizontal()?t.width/o.w:t.height/o.h);return t.options.offset&&l--,l>0?l:1}}),si={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}};li._defaults=si;var di={category:vn,linear:Tn,logarithmic:Pn,radialLinear:qn,time:li},ci={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};en._date.override("function"==typeof e?{_id:"moment",formats:function(){return ci},parse:function(t,n){return"string"==typeof t&&"string"==typeof n?t=e(t,n):t instanceof e||(t=e(t)),t.isValid()?t.valueOf():null},format:function(t,n){return e(t).format(n)},add:function(t,n,i){return e(t).add(n,i).valueOf()},diff:function(t,n,i){return e(t).diff(e(n),i)},startOf:function(t,n,i){return t=e(t),"isoWeek"===n?t.isoWeekday(i).valueOf():t.startOf(n).valueOf()},endOf:function(t,n){return e(t).endOf(n).valueOf()},_create:function(t){return e(t)}}:{}),B._set("global",{plugins:{filler:{propagate:!0}}});var ui={dataset:function(e){var t=e.fill,n=e.chart,i=n.getDatasetMeta(t),r=i&&n.isDatasetVisible(t)&&i.dataset._children||[],a=r.length||0;return a?function(e,t){return t<a&&r[t]._view||null}:null},boundary:function(e){var t=e.boundary,n=t?t.x:null,i=t?t.y:null;return G.isArray(t)?function(e,n){return t[n]}:function(e){return{x:null===n?e.x:n,y:null===i?e.y:i}}}};function pi(e,t,n){var i,r=e._model||{},a=r.fill;if(void 0===a&&(a=!!r.backgroundColor),!1===a||null===a)return!1;if(!0===a)return"origin";if(i=parseFloat(a,10),isFinite(i)&&Math.floor(i)===i)return"-"!==a[0]&&"+"!==a[0]||(i=t+i),!(i===t||i<0||i>=n)&&i;switch(a){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return a;default:return!1}}function mi(e){return(e.el._scale||{}).getPointPositionForValue?function(e){var t,n,i,r,a,o=e.el._scale,l=o.options,s=o.chart.data.labels.length,d=e.fill,c=[];if(!s)return null;for(t=l.ticks.reverse?o.max:o.min,n=l.ticks.reverse?o.min:o.max,i=o.getPointPositionForValue(0,t),r=0;r<s;++r)a="start"===d||"end"===d?o.getPointPositionForValue(r,"start"===d?t:n):o.getBasePosition(r),l.gridLines.circular&&(a.cx=i.x,a.cy=i.y,a.angle=o.getIndexAngle(r)-Math.PI/2),c.push(a);return c}(e):function(e){var t,n=e.el._model||{},i=e.el._scale||{},r=e.fill,a=null;if(isFinite(r))return null;if("start"===r?a=void 0===n.scaleBottom?i.bottom:n.scaleBottom:"end"===r?a=void 0===n.scaleTop?i.top:n.scaleTop:void 0!==n.scaleZero?a=n.scaleZero:i.getBasePixel&&(a=i.getBasePixel()),null!=a){if(void 0!==a.x&&void 0!==a.y)return a;if(G.isFinite(a))return{x:(t=i.isHorizontal())?a:null,y:t?null:a}}return null}(e)}function fi(e,t,n){var i,r=e[t].fill,a=[t];if(!n)return r;for(;!1!==r&&-1===a.indexOf(r);){if(!isFinite(r))return r;if(!(i=e[r]))return!1;if(i.visible)return r;a.push(r),r=i.fill}return!1}function hi(e){var t=e.fill,n="dataset";return!1===t?null:(isFinite(t)||(n="boundary"),ui[n](e))}function gi(e){return e&&!e.skip}function bi(e,t,n,i,r){var a,o,l,s;if(i&&r){for(e.moveTo(t[0].x,t[0].y),a=1;a<i;++a)G.canvas.lineTo(e,t[a-1],t[a]);if(void 0===n[0].angle)for(e.lineTo(n[r-1].x,n[r-1].y),a=r-1;a>0;--a)G.canvas.lineTo(e,n[a],n[a-1],!0);else for(o=n[0].cx,l=n[0].cy,s=Math.sqrt(Math.pow(n[0].x-o,2)+Math.pow(n[0].y-l,2)),a=r-1;a>0;--a)e.arc(o,l,s,n[a].angle,n[a-1].angle,!0)}}function vi(e,t,n,i,r,a){var o,l,s,d,c,u,p,m,f=t.length,h=i.spanGaps,g=[],b=[],v=0,y=0;for(e.beginPath(),o=0,l=f;o<l;++o)c=n(d=t[s=o%f]._view,s,i),u=gi(d),p=gi(c),a&&void 0===m&&u&&(l=f+(m=o+1)),u&&p?(v=g.push(d),y=b.push(c)):v&&y&&(h?(u&&g.push(d),p&&b.push(c)):(bi(e,g,b,v,y),v=y=0,g=[],b=[]));bi(e,g,b,v,y),e.closePath(),e.fillStyle=r,e.fill()}var yi={id:"filler",afterDatasetsUpdate:function(e,t){var n,i,r,a,o=(e.data.datasets||[]).length,l=t.propagate,s=[];for(i=0;i<o;++i)a=null,(r=(n=e.getDatasetMeta(i)).dataset)&&r._model&&r instanceof we.Line&&(a={visible:e.isDatasetVisible(i),fill:pi(r,i,o),chart:e,el:r}),n.$filler=a,s.push(a);for(i=0;i<o;++i)(a=s[i])&&(a.fill=fi(s,i,l),a.boundary=mi(a),a.mapper=hi(a))},beforeDatasetsDraw:function(e){var t,n,i,r,a,o,l,s=e._getSortedVisibleDatasetMetas(),d=e.ctx;for(n=s.length-1;n>=0;--n)(t=s[n].$filler)&&t.visible&&(r=(i=t.el)._view,a=i._children||[],o=t.mapper,l=r.backgroundColor||B.global.defaultColor,o&&l&&a.length&&(G.canvas.clipArea(d,e.chartArea),vi(d,a,o,r,l,i._loop),G.canvas.unclipArea(d)))}},xi=G.rtl.getRtlAdapter,Si=G.noop,wi=G.valueOrDefault;function Ci(e,t){return e.usePointStyle&&e.boxWidth>t?t:e.boxWidth}B._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(e,t){var n=t.datasetIndex,i=this.chart,r=i.getDatasetMeta(n);r.hidden=null===r.hidden?!i.data.datasets[n].hidden:null,i.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(e){var t=e.data.datasets,n=e.options.legend||{},i=n.labels&&n.labels.usePointStyle;return e._getSortedDatasetMetas().map(function(n){var r=n.controller.getStyle(i?0:void 0);return{text:t[n.index].label,fillStyle:r.backgroundColor,hidden:!e.isDatasetVisible(n.index),lineCap:r.borderCapStyle,lineDash:r.borderDash,lineDashOffset:r.borderDashOffset,lineJoin:r.borderJoinStyle,lineWidth:r.borderWidth,strokeStyle:r.borderColor,pointStyle:r.pointStyle,rotation:r.rotation,datasetIndex:n.index}},this)}}},legendCallback:function(e){var t,n,i,r=document.createElement("ul"),a=e.data.datasets;for(r.setAttribute("class",e.id+"-legend"),t=0,n=a.length;t<n;t++)(i=r.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=a[t].backgroundColor,a[t].label&&i.appendChild(document.createTextNode(a[t].label));return r.outerHTML}});var Ei=Y.extend({initialize:function(e){G.extend(this,e),this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1},beforeUpdate:Si,update:function(e,t,n){var i=this;return i.beforeUpdate(),i.maxWidth=e,i.maxHeight=t,i.margins=n,i.beforeSetDimensions(),i.setDimensions(),i.afterSetDimensions(),i.beforeBuildLabels(),i.buildLabels(),i.afterBuildLabels(),i.beforeFit(),i.fit(),i.afterFit(),i.afterUpdate(),i.minSize},afterUpdate:Si,beforeSetDimensions:Si,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:Si,beforeBuildLabels:Si,buildLabels:function(){var e=this,t=e.options.labels||{},n=G.callback(t.generateLabels,[e.chart],e)||[];t.filter&&(n=n.filter(function(n){return t.filter(n,e.chart.data)})),e.options.reverse&&n.reverse(),e.legendItems=n},afterBuildLabels:Si,beforeFit:Si,fit:function(){var e=this,t=e.options,n=t.labels,i=t.display,r=e.ctx,a=G.options._parseFont(n),o=a.size,l=e.legendHitBoxes=[],s=e.minSize,d=e.isHorizontal();if(d?(s.width=e.maxWidth,s.height=i?10:0):(s.width=i?10:0,s.height=e.maxHeight),!i)return e.width=s.width=e.height=s.height=0,void 0;if(r.font=a.string,d){var c=e.lineWidths=[0],u=0;r.textAlign="left",r.textBaseline="middle",G.each(e.legendItems,function(e,t){var i=Ci(n,o)+o/2+r.measureText(e.text).width;(0===t||c[c.length-1]+i+2*n.padding>s.width)&&(u+=o+n.padding,c[c.length-(t>0?0:1)]=0),l[t]={left:0,top:0,width:i,height:o},c[c.length-1]+=i+n.padding}),s.height+=u}else{var p=n.padding,m=e.columnWidths=[],f=e.columnHeights=[],h=n.padding,g=0,b=0;G.each(e.legendItems,function(e,t){var i=Ci(n,o)+o/2+r.measureText(e.text).width;t>0&&b+o+2*p>s.height&&(h+=g+n.padding,m.push(g),f.push(b),g=0,b=0),g=Math.max(g,i),b+=o+p,l[t]={left:0,top:0,width:i,height:o}}),h+=g,m.push(g),f.push(b),s.width+=h}e.width=s.width,e.height=s.height},afterFit:Si,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var e=this,t=e.options,n=t.labels,i=B.global,r=i.defaultColor,a=i.elements.line,o=e.height,l=e.columnHeights,s=e.width,d=e.lineWidths;if(t.display){var c,u=xi(t.rtl,e.left,e.minSize.width),p=e.ctx,m=wi(n.fontColor,i.defaultFontColor),f=G.options._parseFont(n),h=f.size;p.textAlign=u.textAlign("left"),p.textBaseline="middle",p.lineWidth=.5,p.strokeStyle=m,p.fillStyle=m,p.font=f.string;var g=Ci(n,h),b=e.legendHitBoxes,v=function(e,i){switch(t.align){case"start":return n.padding;case"end":return e-i;default:return(e-i+n.padding)/2}},y=e.isHorizontal();c=y?{x:e.left+v(s,d[0]),y:e.top+n.padding,line:0}:{x:e.left+n.padding,y:e.top+v(o,l[0]),line:0},G.rtl.overrideTextDirection(e.ctx,t.textDirection);var x=h+n.padding;G.each(e.legendItems,function(t,i){var m=p.measureText(t.text).width,f=g+h/2+m,S=c.x,w=c.y;u.setWidth(e.minSize.width),y?i>0&&S+f+n.padding>e.left+e.minSize.width&&(w=c.y+=x,c.line++,S=c.x=e.left+v(s,d[c.line])):i>0&&w+x>e.top+e.minSize.height&&(S=c.x=S+e.columnWidths[c.line]+n.padding,c.line++,w=c.y=e.top+v(o,l[c.line]));var C=u.x(S);!function(e,t,i){if(!(isNaN(g)||g<=0)){p.save();var o=wi(i.lineWidth,a.borderWidth);if(p.fillStyle=wi(i.fillStyle,r),p.lineCap=wi(i.lineCap,a.borderCapStyle),p.lineDashOffset=wi(i.lineDashOffset,a.borderDashOffset),p.lineJoin=wi(i.lineJoin,a.borderJoinStyle),p.lineWidth=o,p.strokeStyle=wi(i.strokeStyle,r),p.setLineDash&&p.setLineDash(wi(i.lineDash,a.borderDash)),n&&n.usePointStyle){var l=g*Math.SQRT2/2,s=u.xPlus(e,g/2),d=t+h/2;G.canvas.drawPoint(p,i.pointStyle,l,s,d,i.rotation)}else p.fillRect(u.leftForLtr(e,g),t,g,h),0!==o&&p.strokeRect(u.leftForLtr(e,g),t,g,h);p.restore()}}(C,w,t),b[i].left=u.leftForLtr(C,b[i].width),b[i].top=w,function(e,t,n,i){var r=h/2,a=u.xPlus(e,g+r),o=t+r;p.fillText(n.text,a,o),n.hidden&&(p.beginPath(),p.lineWidth=2,p.moveTo(a,o),p.lineTo(u.xPlus(a,i),o),p.stroke())}(C,w,t,m),y?c.x+=f+n.padding:c.y+=x}),G.rtl.restoreTextDirection(e.ctx,t.textDirection)}},_getLegendItemAt:function(e,t){var n,i,r,a=this;if(e>=a.left&&e<=a.right&&t>=a.top&&t<=a.bottom)for(r=a.legendHitBoxes,n=0;n<r.length;++n)if(e>=(i=r[n]).left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height)return a.legendItems[n];return null},handleEvent:function(e){var t,n=this,i=n.options,r="mouseup"===e.type?"click":e.type;if("mousemove"===r){if(!i.onHover&&!i.onLeave)return}else{if("click"!==r)return;if(!i.onClick)return}t=n._getLegendItemAt(e.x,e.y),"click"===r?t&&i.onClick&&i.onClick.call(n,e.native,t):(i.onLeave&&t!==n._hoveredItem&&(n._hoveredItem&&i.onLeave.call(n,e.native,n._hoveredItem),n._hoveredItem=t),i.onHover&&t&&i.onHover.call(n,e.native,t))}});function Ii(e,t){var n=new Ei({ctx:e.ctx,options:t,chart:e});ht.configure(e,n,t),ht.addBox(e,n),e.legend=n}var Ti={id:"legend",_element:Ei,beforeInit:function(e){var t=e.options.legend;t&&Ii(e,t)},beforeUpdate:function(e){var t=e.options.legend,n=e.legend;t?(G.mergeIf(t,B.global.legend),n?(ht.configure(e,n,t),n.options=t):Ii(e,t)):n&&(ht.removeBox(e,n),delete e.legend)},afterEvent:function(e,t){var n=e.legend;n&&n.handleEvent(t)}},Mi=G.noop;B._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var Di=Y.extend({initialize:function(e){G.extend(this,e),this.legendHitBoxes=[]},beforeUpdate:Mi,update:function(e,t,n){var i=this;return i.beforeUpdate(),i.maxWidth=e,i.maxHeight=t,i.margins=n,i.beforeSetDimensions(),i.setDimensions(),i.afterSetDimensions(),i.beforeBuildLabels(),i.buildLabels(),i.afterBuildLabels(),i.beforeFit(),i.fit(),i.afterFit(),i.afterUpdate(),i.minSize},afterUpdate:Mi,beforeSetDimensions:Mi,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:Mi,beforeBuildLabels:Mi,buildLabels:Mi,afterBuildLabels:Mi,beforeFit:Mi,fit:function(){var e,t=this,n=t.options,i=t.minSize={},r=t.isHorizontal();if(!n.display)return t.width=i.width=t.height=i.height=0,void 0;e=(G.isArray(n.text)?n.text.length:1)*G.options._parseFont(n).lineHeight+2*n.padding,t.width=i.width=r?t.maxWidth:e,t.height=i.height=r?e:t.maxHeight},afterFit:Mi,isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},draw:function(){var e=this,t=e.ctx,n=e.options;if(n.display){var i,r,a,o=G.options._parseFont(n),l=o.lineHeight,s=l/2+n.padding,d=0,c=e.top,u=e.left,p=e.bottom,m=e.right;t.fillStyle=G.valueOrDefault(n.fontColor,B.global.defaultFontColor),t.font=o.string,e.isHorizontal()?(r=u+(m-u)/2,a=c+s,i=m-u):(r="left"===n.position?u+s:m-s,a=c+(p-c)/2,i=p-c,d=Math.PI*("left"===n.position?-.5:.5)),t.save(),t.translate(r,a),t.rotate(d),t.textAlign="center",t.textBaseline="middle";var f=n.text;if(G.isArray(f))for(var h=0,g=0;g<f.length;++g)t.fillText(f[g],0,h,i),h+=l;else t.fillText(f,0,0,i);t.restore()}}});function ki(e,t){var n=new Di({ctx:e.ctx,options:t,chart:e});ht.configure(e,n,t),ht.addBox(e,n),e.titleBlock=n}var Ai={},Fi=yi,Pi=Ti,_i={id:"title",_element:Di,beforeInit:function(e){var t=e.options.title;t&&ki(e,t)},beforeUpdate:function(e){var t=e.options.title,n=e.titleBlock;t?(G.mergeIf(t,B.global.title),n?(ht.configure(e,n,t),n.options=t):ki(e,t)):n&&(ht.removeBox(e,n),delete e.titleBlock)}};for(var Ni in Ai.filler=Fi,Ai.legend=Pi,Ai.title=_i,Xt.helpers=G,function(){function e(e,t,n){var i;return"string"==typeof e?(i=parseInt(e,10),-1!==e.indexOf("%")&&(i=i/100*t.parentNode[n])):i=e,i}function t(e){return null!=e&&"none"!==e}function n(n,i,r){var a=document.defaultView,o=G._getParentNode(n),l=a.getComputedStyle(n)[i],s=a.getComputedStyle(o)[i],d=t(l),c=t(s),u=Number.POSITIVE_INFINITY;return d||c?Math.min(d?e(l,n,r):u,c?e(s,o,r):u):"none"}G.where=function(e,t){if(G.isArray(e)&&Array.prototype.filter)return e.filter(t);var n=[];return G.each(e,function(e){t(e)&&n.push(e)}),n},G.findIndex=Array.prototype.findIndex?function(e,t,n){return e.findIndex(t,n)}:function(e,t,n){n=void 0===n?e:n;for(var i=0,r=e.length;i<r;++i)if(t.call(n,e[i],i,e))return i;return-1},G.findNextWhere=function(e,t,n){G.isNullOrUndef(n)&&(n=-1);for(var i=n+1;i<e.length;i++){var r=e[i];if(t(r))return r}},G.findPreviousWhere=function(e,t,n){G.isNullOrUndef(n)&&(n=e.length);for(var i=n-1;i>=0;i--){var r=e[i];if(t(r))return r}},G.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},G.almostEquals=function(e,t,n){return Math.abs(e-t)<n},G.almostWhole=function(e,t){var n=Math.round(e);return n-t<=e&&n+t>=e},G.max=function(e){return e.reduce(function(e,t){return isNaN(t)?e:Math.max(e,t)},Number.NEGATIVE_INFINITY)},G.min=function(e){return e.reduce(function(e,t){return isNaN(t)?e:Math.min(e,t)},Number.POSITIVE_INFINITY)},G.sign=Math.sign?function(e){return Math.sign(e)}:function(e){return 0==(e=+e)||isNaN(e)?e:e>0?1:-1},G.toRadians=function(e){return e*(Math.PI/180)},G.toDegrees=function(e){return e*(180/Math.PI)},G._decimalPlaces=function(e){if(G.isFinite(e)){for(var t=1,n=0;Math.round(e*t)/t!==e;)t*=10,n++;return n}},G.getAngleFromPoint=function(e,t){var n=t.x-e.x,i=t.y-e.y,r=Math.sqrt(n*n+i*i),a=Math.atan2(i,n);return a<-.5*Math.PI&&(a+=2*Math.PI),{angle:a,distance:r}},G.distanceBetweenPoints=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},G.aliasPixel=function(e){return e%2==0?0:.5},G._alignPixel=function(e,t,n){var i=e.currentDevicePixelRatio,r=n/2;return Math.round((t-r)*i)/i+r},G.splineCurve=function(e,t,n,i){var r=e.skip?t:e,a=t,o=n.skip?t:n,l=Math.sqrt(Math.pow(a.x-r.x,2)+Math.pow(a.y-r.y,2)),s=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2)),d=l/(l+s),c=s/(l+s),u=i*(d=isNaN(d)?0:d),p=i*(c=isNaN(c)?0:c);return{previous:{x:a.x-u*(o.x-r.x),y:a.y-u*(o.y-r.y)},next:{x:a.x+p*(o.x-r.x),y:a.y+p*(o.y-r.y)}}},G.EPSILON=Number.EPSILON||1e-14,G.splineCurveMonotone=function(e){var t,n,i,r,a,o,l,s,d,c=(e||[]).map(function(e){return{model:e._model,deltaK:0,mK:0}}),u=c.length;for(t=0;t<u;++t)if(!(i=c[t]).model.skip){if(n=t>0?c[t-1]:null,(r=t<u-1?c[t+1]:null)&&!r.model.skip){var p=r.model.x-i.model.x;i.deltaK=0!==p?(r.model.y-i.model.y)/p:0}!n||n.model.skip?i.mK=i.deltaK:!r||r.model.skip?i.mK=n.deltaK:this.sign(n.deltaK)!==this.sign(i.deltaK)?i.mK=0:i.mK=(n.deltaK+i.deltaK)/2}for(t=0;t<u-1;++t)i=c[t],r=c[t+1],i.model.skip||r.model.skip||(G.almostEquals(i.deltaK,0,this.EPSILON)?i.mK=r.mK=0:(a=i.mK/i.deltaK,o=r.mK/i.deltaK,(s=Math.pow(a,2)+Math.pow(o,2))<=9||(l=3/Math.sqrt(s),i.mK=a*l*i.deltaK,r.mK=o*l*i.deltaK)));for(t=0;t<u;++t)(i=c[t]).model.skip||(n=t>0?c[t-1]:null,r=t<u-1?c[t+1]:null,n&&!n.model.skip&&(d=(i.model.x-n.model.x)/3,i.model.controlPointPreviousX=i.model.x-d,i.model.controlPointPreviousY=i.model.y-d*i.mK),r&&!r.model.skip&&(d=(r.model.x-i.model.x)/3,i.model.controlPointNextX=i.model.x+d,i.model.controlPointNextY=i.model.y+d*i.mK))},G.nextItem=function(e,t,n){return n?t>=e.length-1?e[0]:e[t+1]:t>=e.length-1?e[e.length-1]:e[t+1]},G.previousItem=function(e,t,n){return n?t<=0?e[e.length-1]:e[t-1]:t<=0?e[0]:e[t-1]},G.niceNum=function(e,t){var n=Math.floor(G.log10(e)),i=e/Math.pow(10,n);return(t?i<1.5?1:i<3?2:i<7?5:10:i<=1?1:i<=2?2:i<=5?5:10)*Math.pow(10,n)},G.requestAnimFrame="undefined"==typeof window?function(e){e()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},G.getRelativePosition=function(e,t){var n,i,r=e.originalEvent||e,a=e.target||e.srcElement,o=a.getBoundingClientRect(),l=r.touches;l&&l.length>0?(n=l[0].clientX,i=l[0].clientY):(n=r.clientX,i=r.clientY);var s=parseFloat(G.getStyle(a,"padding-left")),d=parseFloat(G.getStyle(a,"padding-top")),c=parseFloat(G.getStyle(a,"padding-right")),u=parseFloat(G.getStyle(a,"padding-bottom")),p=o.right-o.left-s-c,m=o.bottom-o.top-d-u;return{x:n=Math.round((n-o.left-s)/p*a.width/t.currentDevicePixelRatio),y:i=Math.round((i-o.top-d)/m*a.height/t.currentDevicePixelRatio)}},G.getConstraintWidth=function(e){return n(e,"max-width","clientWidth")},G.getConstraintHeight=function(e){return n(e,"max-height","clientHeight")},G._calculatePadding=function(e,t,n){return(t=G.getStyle(e,t)).indexOf("%")>-1?n*parseInt(t,10)/100:parseInt(t,10)},G._getParentNode=function(e){var t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t},G.getMaximumWidth=function(e){var t=G._getParentNode(e);if(!t)return e.clientWidth;var n=t.clientWidth,i=n-G._calculatePadding(t,"padding-left",n)-G._calculatePadding(t,"padding-right",n),r=G.getConstraintWidth(e);return isNaN(r)?i:Math.min(i,r)},G.getMaximumHeight=function(e){var t=G._getParentNode(e);if(!t)return e.clientHeight;var n=t.clientHeight,i=n-G._calculatePadding(t,"padding-top",n)-G._calculatePadding(t,"padding-bottom",n),r=G.getConstraintHeight(e);return isNaN(r)?i:Math.min(i,r)},G.getStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,null).getPropertyValue(t)},G.retinaScale=function(e,t){var n=e.currentDevicePixelRatio=t||"undefined"!=typeof window&&window.devicePixelRatio||1;if(1!==n){var i=e.canvas,r=e.height,a=e.width;i.height=r*n,i.width=a*n,e.ctx.scale(n,n),i.style.height||i.style.width||(i.style.height=r+"px",i.style.width=a+"px")}},G.fontString=function(e,t,n){return t+" "+e+"px "+n},G.longestText=function(e,t,n,i){var r=(i=i||{}).data=i.data||{},a=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},a=i.garbageCollect=[],i.font=t),e.font=t;var o,l,s,d,c,u=0,p=n.length;for(o=0;o<p;o++)if(null!=(d=n[o])&&!0!==G.isArray(d))u=G.measureText(e,r,a,u,d);else if(G.isArray(d))for(l=0,s=d.length;l<s;l++)null==(c=d[l])||G.isArray(c)||(u=G.measureText(e,r,a,u,c));var m=a.length/2;if(m>n.length){for(o=0;o<m;o++)delete r[a[o]];a.splice(0,m)}return u},G.measureText=function(e,t,n,i,r){var a=t[r];return a||(a=t[r]=e.measureText(r).width,n.push(r)),a>i&&(i=a),i},G.numberOfLabelLines=function(e){var t=1;return G.each(e,function(e){G.isArray(e)&&e.length>t&&(t=e.length)}),t},G.color=S?function(e){return e instanceof CanvasGradient&&(e=B.global.defaultColor),S(e)}:function(e){return console.error("Color.js not found!"),e},G.getHoverColor=function(e){return e instanceof CanvasPattern||e instanceof CanvasGradient?e:G.color(e).saturate(.5).darken(.1).rgbString()}}(),Xt._adapters=en,Xt.Animation=X,Xt.animationService=Q,Xt.controllers=Qe,Xt.DatasetController=ie,Xt.defaults=B,Xt.Element=Y,Xt.elements=we,Xt.Interaction=at,Xt.layouts=ht,Xt.platform=kt,Xt.plugins=At,Xt.Scale=gn,Xt.scaleService=Ft,Xt.Ticks=tn,Xt.Tooltip=Gt,Xt.helpers.each(di,function(e,t){Xt.scaleService.registerScaleType(t,e,e._defaults)}),Ai)Ai.hasOwnProperty(Ni)&&Xt.plugins.register(Ai[Ni]);Xt.platform.initialize();var Li=Xt;return"undefined"!=typeof window&&(window.Chart=Xt),Xt.Chart=Xt,Xt.Legend=Ai.legend._element,Xt.Title=Ai.title._element,Xt.pluginService=Xt.plugins,Xt.PluginBase=Xt.Element.extend({}),Xt.canvasHelpers=Xt.helpers.canvas,Xt.layoutService=Xt.layouts,Xt.LinearScaleBase=wn,Xt.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],function(e){Xt[e]=function(t,n){return new Xt(t,Xt.helpers.merge(n||{},{type:e.charAt(0).toLowerCase()+e.slice(1)}))}}),Li}(function(){try{return n("wd/R")}catch(e){}}()))},WOAq:function(e,t,n){"use strict";(function(e){var i=n("Ju5/"),r=n("L3Qv"),a="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=a&&"object"==typeof e&&e&&!e.nodeType&&e,l=o&&o.exports===a?i.a.Buffer:void 0,s=(l?l.isBuffer:void 0)||r.a;t.a=s}).call(this,n("kIY7")(e))},XqMk:function(e,t,n){"use strict";var i="object"==typeof global&&global&&global.Object===Object&&global;t.a=i},YCWy:function(e,t,n){"use strict";n.d(t,"a",function(){return D});var i=n("mrSG"),r=n("fXoL"),a=n("RxGS"),o=n("3Pt+"),l=n("+5dr"),s=n("U3y+"),d=n("C4fA"),c=n("vpxU"),u=n("8km5"),p=n("l7P3"),m=n("tyNb"),f=n("ofXK"),h=n("bTqV"),g=n("XiUz"),b=n("kmnG"),v=n("sYmb"),y=n("qFsG"),x=n("bSwM"),S=n("TSBb"),w=["ruleNodeConfigComponent"];function C(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",4),r["\u0275\u0275elementStart"](1,"button",5),r["\u0275\u0275listener"]("click",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().openRuleChain(e)}),r["\u0275\u0275text"](2),r["\u0275\u0275pipe"](3,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}2&e&&(r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](3,1,"rulechain.open-rulechain")," "))}function E(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"rulenode.name-required")," "))}function I(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"section"),r["\u0275\u0275elementStart"](1,"section",6),r["\u0275\u0275elementStart"](2,"mat-form-field",7),r["\u0275\u0275elementStart"](3,"mat-label",8),r["\u0275\u0275text"](4,"rulenode.name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](5,"input",9),r["\u0275\u0275template"](6,E,3,3,"mat-error",3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"mat-checkbox",10),r["\u0275\u0275text"](8),r["\u0275\u0275pipe"](9,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](10,"tb-rule-node-config",11,12),r["\u0275\u0275elementStart"](12,"div",13),r["\u0275\u0275elementStart"](13,"mat-form-field",14),r["\u0275\u0275elementStart"](14,"mat-label",8),r["\u0275\u0275text"](15,"rulenode.description"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](16,"textarea",15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",n.ruleNodeFormGroup.get("name").hasError("required")||n.ruleNodeFormGroup.get("name").hasError("pattern")),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](9,4,"rulenode.debug-mode")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ruleNodeId",null==n.ruleNode.ruleNodeId?null:n.ruleNode.ruleNodeId.id)("nodeDefinition",n.ruleNode.component.configurationDescriptor.nodeDefinition)}}var T=function(e){return[e]};function M(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"section"),r["\u0275\u0275element"](1,"tb-entity-autocomplete",16),r["\u0275\u0275elementStart"](2,"div",13),r["\u0275\u0275elementStart"](3,"mat-form-field",14),r["\u0275\u0275elementStart"](4,"mat-label",8),r["\u0275\u0275text"](5,"rulenode.description"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](6,"textarea",15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("excludeEntityIds",r["\u0275\u0275pureFunction1"](3,T,n.ruleChainId))("entityType",n.entityType.RULE_CHAIN)("entitySubtype",n.ruleChainType)}}var D=function(e){function t(t,n,i,r){var a=e.call(this,t)||this;return a.store=t,a.fb=n,a.ruleChainService=i,a.router=r,a.isAdd=!1,a.ruleNodeType=l.c,a.entityType=s.b,a.ruleNodeFormGroup=a.fb.group({}),a}return Object(i.d)(t,e),t.prototype.buildForm=function(){var e=this;this.ruleNodeFormSubscription&&(this.ruleNodeFormSubscription.unsubscribe(),this.ruleNodeFormSubscription=null),this.ruleNode?(this.ruleNode.component.type!==l.c.RULE_CHAIN?this.ruleNodeFormGroup=this.fb.group({name:[this.ruleNode.name,[o.Validators.required,o.Validators.pattern("(.|\\s)*\\S(.|\\s)*")]],debugMode:[this.ruleNode.debugMode,[]],configuration:[this.ruleNode.configuration,[o.Validators.required]],additionalInfo:this.fb.group({description:[this.ruleNode.additionalInfo?this.ruleNode.additionalInfo.description:""]})}):this.ruleNodeFormGroup=this.fb.group({targetRuleChainId:[this.ruleNode.targetRuleChainId,[o.Validators.required]],additionalInfo:this.fb.group({description:[this.ruleNode.additionalInfo?this.ruleNode.additionalInfo.description:""]})}),this.ruleNodeFormSubscription=this.ruleNodeFormGroup.valueChanges.subscribe(function(){e.updateRuleNode()})):this.ruleNodeFormGroup=this.fb.group({})},t.prototype.updateRuleNode=function(){var e=this,t=this.ruleNodeFormGroup.value||{};if(this.ruleNode.component.type===l.c.RULE_CHAIN){var n=t.targetRuleChainId;this.ruleNode.targetRuleChainId!==n&&n?this.ruleChainService.getRuleChain(n).subscribe(function(n){e.ruleNode.name=n.name,Object.assign(e.ruleNode,t)}):Object.assign(this.ruleNode,t)}else t.name=t.name.trim(),Object.assign(this.ruleNode,t)},t.prototype.ngOnInit=function(){},t.prototype.ngOnChanges=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t],r=e[i];r.currentValue!==r.previousValue&&"ruleNode"===i&&this.buildForm()}},t.prototype.validate=function(){this.ruleNode.component.type!==l.c.RULE_CHAIN&&this.ruleNodeConfigComponent.validate()},t.prototype.openRuleChain=function(e){e&&e.stopPropagation(),this.ruleNode.targetRuleChainId&&(this.ruleChainType===u.a.EDGE?this.router.navigateByUrl("/edgeManagement/ruleChains/"+this.ruleNode.targetRuleChainId):this.router.navigateByUrl("/ruleChains/"+this.ruleNode.targetRuleChainId))},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](p.Store),r["\u0275\u0275directiveInject"](o.FormBuilder),r["\u0275\u0275directiveInject"](d.a),r["\u0275\u0275directiveInject"](m.Router))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-rule-node"]],viewQuery:function(e,t){if(1&e&&r["\u0275\u0275viewQuery"](w,1),2&e){var n;r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.ruleNodeConfigComponent=n.first)}},inputs:{ruleNode:"ruleNode",ruleChainId:"ruleChainId",ruleChainType:"ruleChainType",isEdit:"isEdit",isReadOnly:"isReadOnly",isAdd:"isAdd"},features:[r["\u0275\u0275InheritDefinitionFeature"],r["\u0275\u0275NgOnChangesFeature"]],decls:6,vars:7,consts:[["class","tb-details-buttons",4,"ngIf"],[1,"mat-padding",3,"formGroup"],[3,"disabled"],[4,"ngIf"],[1,"tb-details-buttons"],["mat-raised-button","","color","accent",3,"click"],["fxLayout","column","fxLayout.gt-sm","row"],["fxFlex","",1,"mat-block"],["translate",""],["matInput","","formControlName","name","required",""],["formControlName","debugMode"],["formControlName","configuration",3,"ruleNodeId","nodeDefinition"],["ruleNodeConfigComponent",""],["formGroupName","additionalInfo","fxLayout","column"],[1,"mat-block"],["matInput","","formControlName","description","rows","2"],["required","","formControlName","targetRuleChainId",3,"excludeEntityIds","entityType","entitySubtype"]],template:function(e,t){1&e&&(r["\u0275\u0275template"](0,C,4,3,"div",0),r["\u0275\u0275elementStart"](1,"form",1),r["\u0275\u0275elementStart"](2,"fieldset",2),r["\u0275\u0275pipe"](3,"async"),r["\u0275\u0275template"](4,I,17,6,"section",3),r["\u0275\u0275template"](5,M,7,5,"section",3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275property"]("ngIf",!t.isAdd&&t.ruleNode.component.type===t.ruleNodeType.RULE_CHAIN),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("formGroup",t.ruleNodeFormGroup),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](3,5,t.isLoading$)||!t.isEdit||t.isReadOnly),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.ruleNode.component.type!==t.ruleNodeType.RULE_CHAIN),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.ruleNode.component.type===t.ruleNodeType.RULE_CHAIN))},directives:[f.NgIf,o["\u0275angular_packages_forms_forms_ba"],o.NgControlStatusGroup,o.FormGroupDirective,h.MatButton,g.f,b.MatFormField,g.b,b.MatLabel,v.TranslateDirective,y.MatInput,o.DefaultValueAccessor,o.NgControlStatus,o.FormControlName,o.RequiredValidator,x.MatCheckbox,c.a,o.FormGroupName,b.MatError,S.a],pipes:[f.AsyncPipe,v.TranslatePipe],styles:["[_nghost-%COMP%]   form[_ngcontent-%COMP%]{overflow-x:hidden!important}"]}),t}(a.a);0,void 0},fhZi:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return he});var i=n("mrSG"),r=n("RxGS"),a=n("fXoL"),o=n("5xOD"),l=n("0G7Z"),s=n("0lYY"),d=n("//Q6"),c=n("C/rb"),u=n("zp9Z"),p=n("oKkZ"),m=n("yl57"),f=n("Nyw1"),h=n("jCow"),g=n("nhHW"),b=n("wtyh"),v=n("xKAQ"),y=n("iO13"),x=n("cp0P"),S=n("HR/i"),w=n("/KqI"),C=n("vkgz"),E=n("lJxs"),I=n("Uj2l"),T=n("l7P3"),M=n("tyNb"),D=n("sYmb"),k=n("0IaG"),A=n("XiUz"),F=n("8m5z"),P=n("49Ji"),_=n("WEPN"),N=n("/t3+"),L=n("kmnG"),O=n("qFsG"),B=n("3Pt+"),R=n("d3UM"),j=n("ofXK"),V=n("bTqV"),z=n("znSr"),G=n("Qu3c"),W=n("NFeN"),q=n("sjz8"),H=n("STbY"),U=n("wZkO"),$=n("0HhY"),K=n("rezs"),Y=n("FKr1"),J=n("bSwM"),X=n("Xa2L"),Q=["topPanel"],Z=["topLeftPanel"],ee=["topRightPanel"],te=["bottomPanel"],ne=["javascriptPanel"],ie=["framePanel"],re=["htmlInput"],ae=["cssInput"],oe=["settingsJsonInput"],le=["dataKeySettingsJsonInput"],se=["javascriptInput"],de=["widgetIFrame"];function ce(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",62),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.widgetTypesDataMap.get(i.widgetTypes[n]).name)," ")}}function ue(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",13),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().saveWidget()}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementStart"](3,"mat-icon"),a["\u0275\u0275text"](4,"save"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"span",10),a["\u0275\u0275text"](6,"action.save"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate1"]("matTooltip","",a["\u0275\u0275pipeBind1"](2,5,"widget.save")," (CTRL + S)"),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,3,i.isLoading$)||i.saveDisabled())("tb-circular-progress",i.saveWidgetPending)}}function pe(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",19),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().saveWidget()}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3,"save"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"span",10),a["\u0275\u0275text"](5,"action.save"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,1,i.isLoading$)||i.saveDisabled())}}function me(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",63),a["\u0275\u0275elementStart"](1,"mat-form-field",64),a["\u0275\u0275elementStart"](2,"input",65),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.$implicit.url=e})("ngModelChange",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().isDirty=!0}),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"mat-checkbox",66),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.$implicit.isModule=e})("ngModelChange",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().isDirty=!0}),a["\u0275\u0275text"](5),a["\u0275\u0275pipe"](6,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"button",67),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](n);var e=t.index;return a["\u0275\u0275nextContext"]().removeResource(e)}),a["\u0275\u0275pipe"](8,"async"),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementStart"](10,"mat-icon"),a["\u0275\u0275text"](11,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](3,6,"widget.resource-url")),a["\u0275\u0275property"]("ngModel",i.url),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngModel",i.isModule),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](6,8,"widget.resource-is-module")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](9,12,"widget.remove-resource")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](8,10,r.isLoading$))}}function fe(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",68),a["\u0275\u0275element"](1,"mat-spinner",69),a["\u0275\u0275elementEnd"]())}var he=function(t){function n(e,n,i,r,a,o,l,d){var u=t.call(this,e)||this;return u.store=e,u.window=n,u.route=i,u.router=r,u.widgetService=a,u.translate=o,u.raf=l,u.dialog=d,u.widgetTypes=s.m,u.allWidgetTypes=Object.keys(s.m),u.widgetTypesDataMap=s.n,u.isDirty=!1,u.fullscreen=!1,u.htmlFullscreen=!1,u.cssFullscreen=!1,u.jsonSettingsFullscreen=!1,u.jsonDataKeySettingsFullscreen=!1,u.javascriptFullscreen=!1,u.iFrameFullscreen=!1,u.aceEditors=[],u.editorsResizeCafs={},u.onWindowMessageListener=u.onWindowMessage.bind(u),u.iframeWidgetEditModeInited=!1,u.saveWidgetPending=!1,u.saveWidgetAsPending=!1,u.gotError=!1,u.errorMarkers=[],u.errorAnnotationId=-1,u.hotKeys=[],u.rxSubscriptions=new Array,u.authUser=Object(c.b)(e),u.rxSubscriptions.push(u.route.data.subscribe(function(e){u.init(e)})),u.initHotKeys(),u}return Object(i.d)(n,t),n.prototype.init=function(e){if(this.widgetsBundle=e.widgetsBundle,this.authUser.authority===u.a.TENANT_ADMIN?this.isReadOnly=!this.widgetsBundle||this.widgetsBundle.tenantId.id===p.a:this.isReadOnly=this.authUser.authority!==u.a.SYS_ADMIN,this.widgetTypeDetails=e.widgetEditorData.widgetTypeDetails,this.widget=e.widgetEditorData.widget,this.widgetTypeDetails){var t=JSON.parse(this.widget.defaultConfig);this.widget.defaultConfig=JSON.stringify(t)}this.origWidget=Object(d.e)(this.widget),this.widgetTypeDetails||(this.isDirty=!0)},n.prototype.ngOnInit=function(){this.initSplitLayout(),this.initAceEditors(),this.iframe=e(this.widgetIFrameElmRef.nativeElement),this.window.addEventListener("message",this.onWindowMessageListener),this.iframe.attr("data-widget",JSON.stringify(this.widget)),this.iframe.attr("src","/widget-editor")},n.prototype.ngOnDestroy=function(){this.window.removeEventListener("message",this.onWindowMessageListener),this.aceResize$.disconnect(),this.rxSubscriptions.forEach(function(e){e.unsubscribe()}),this.rxSubscriptions.length=0},n.prototype.initHotKeys=function(){var e=this;this.hotKeys.push(new m.a("ctrl+q",function(t){return Object(f.a)(e.store)||e.undoDisabled()||(t.preventDefault(),e.undoWidget()),!1},["INPUT","SELECT","TEXTAREA"],this.translate.instant("widget.undo"))),this.hotKeys.push(new m.a("ctrl+s",function(t){return Object(f.a)(e.store)||e.saveDisabled()||(t.preventDefault(),e.saveWidget()),!1},["INPUT","SELECT","TEXTAREA"],this.translate.instant("widget.save"))),this.hotKeys.push(new m.a("shift+ctrl+s",function(t){return Object(f.a)(e.store)||e.saveAsDisabled()||(t.preventDefault(),e.saveWidgetAs()),!1},["INPUT","SELECT","TEXTAREA"],this.translate.instant("widget.saveAs"))),this.hotKeys.push(new m.a("shift+ctrl+f",function(t){return t.preventDefault(),e.fullscreen=!e.fullscreen,!1},["INPUT","SELECT","TEXTAREA"],this.translate.instant("widget.toggle-fullscreen"))),this.hotKeys.push(new m.a("ctrl+enter",function(t){return t.preventDefault(),e.applyWidgetScript(),!1},["INPUT","SELECT","TEXTAREA"],this.translate.instant("widget.run")))},n.prototype.initSplitLayout=function(){Split([this.topPanelElmRef.nativeElement,this.bottomPanelElmRef.nativeElement],{sizes:[35,65],gutterSize:8,cursor:"row-resize",direction:"vertical"}),Split([this.topLeftPanelElmRef.nativeElement,this.topRightPanelElmRef.nativeElement],{sizes:[50,50],gutterSize:8,cursor:"col-resize"}),Split([this.javascriptPanelElmRef.nativeElement,this.framePanelElmRef.nativeElement],{sizes:[50,50],gutterSize:8,cursor:"col-resize"})},n.prototype.initAceEditors=function(){var e=this;this.aceResize$=new S.a(function(t){t.forEach(function(t){var n=e.aceEditors.find(function(e){return e.container===t.target});e.onAceEditorResize(n)})});var t=[];t.push(this.createAceEditor(this.htmlInputElmRef,"html").pipe(Object(C.a)(function(t){e.htmlEditor=t,e.htmlEditor.on("input",function(){var t=e.htmlEditor.getValue();e.widget.templateHtml!==t&&(e.widget.templateHtml=t,e.isDirty=!0)})}))),t.push(this.createAceEditor(this.cssInputElmRef,"css").pipe(Object(C.a)(function(t){e.cssEditor=t,e.cssEditor.on("input",function(){var t=e.cssEditor.getValue();e.widget.templateCss!==t&&(e.widget.templateCss=t,e.isDirty=!0)})}))),t.push(this.createAceEditor(this.settingsJsonInputElmRef,"json").pipe(Object(C.a)(function(t){e.jsonSettingsEditor=t,e.jsonSettingsEditor.on("input",function(){var t=e.jsonSettingsEditor.getValue();e.widget.settingsSchema!==t&&(e.widget.settingsSchema=t,e.isDirty=!0)})}))),t.push(this.createAceEditor(this.dataKeySettingsJsonInputElmRef,"json").pipe(Object(C.a)(function(t){e.dataKeyJsonSettingsEditor=t,e.dataKeyJsonSettingsEditor.on("input",function(){var t=e.dataKeyJsonSettingsEditor.getValue();e.widget.dataKeySettingsSchema!==t&&(e.widget.dataKeySettingsSchema=t,e.isDirty=!0)})}))),t.push(this.createAceEditor(this.javascriptInputElmRef,"javascript").pipe(Object(C.a)(function(t){e.jsEditor=t,e.jsEditor.on("input",function(){var t=e.jsEditor.getValue();e.widget.controllerScript!==t&&(e.widget.controllerScript=t,e.isDirty=!0)}),e.jsEditor.on("change",function(){e.cleanupJsErrors()}),e.jsEditor.completers=Object(i.h)([w.a],e.jsEditor.completers||[])}))),Object(x.a)(t).subscribe(function(){e.setAceEditorValues()})},n.prototype.setAceEditorValues=function(){this.htmlEditor.setValue(this.widget.templateHtml?this.widget.templateHtml:"",-1),this.cssEditor.setValue(this.widget.templateCss?this.widget.templateCss:"",-1),this.jsonSettingsEditor.setValue(this.widget.settingsSchema?this.widget.settingsSchema:"",-1),this.dataKeyJsonSettingsEditor.setValue(this.widget.dataKeySettingsSchema?this.widget.dataKeySettingsSchema:"",-1),this.jsEditor.setValue(this.widget.controllerScript?this.widget.controllerScript:"",-1)},n.prototype.createAceEditor=function(e,t){var n=this,r=e.nativeElement,a={mode:"ace/mode/"+t,showGutter:!0,showPrintMargin:!0};return a=Object(i.a)(Object(i.a)({},a),{enableSnippets:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0}),Object(h.b)().pipe(Object(E.a)(function(e){var t=e.edit(r,a);return t.session.setUseWrapMode(!0),n.aceEditors.push(t),n.aceResize$.observe(r),t}))},n.prototype.onAceEditorResize=function(e){this.editorsResizeCafs[e.id]&&(this.editorsResizeCafs[e.id](),delete this.editorsResizeCafs[e.id]),this.editorsResizeCafs[e.id]=this.raf.raf(function(){e.resize(),e.renderer.updateFull()})},n.prototype.onWindowMessage=function(e){var t;if(e.data)try{t=JSON.parse(e.data)}catch(n){}if(t)switch(t.type){case"widgetException":this.onWidgetException(t.data);break;case"widgetEditModeInited":this.onWidgetEditModeInited();break;case"widgetEditUpdated":this.onWidgetEditUpdated(t.data)}},n.prototype.onWidgetEditModeInited=function(){var e=this;this.iframeWidgetEditModeInited=!0,(this.saveWidgetPending||this.saveWidgetAsPending)&&(this.saveWidgetTimeout||(this.saveWidgetTimeout=setTimeout(function(){e.gotError?(e.store.dispatch(new v.b({message:e.translate.instant("widget.unable-to-save-widget-error"),type:"error"})),e.saveWidgetPending=!1,e.saveWidgetAsPending=!1):e.saveWidgetPending?e.commitSaveWidget():e.saveWidgetAsPending&&e.commitSaveWidgetAs(),e.saveWidgetTimeout=void 0},1500)))},n.prototype.onWidgetEditUpdated=function(e){this.widget.sizeX=e.sizeX/2,this.widget.sizeY=e.sizeY/2,this.widget.defaultConfig=JSON.stringify(e.config),this.iframe.attr("data-widget",JSON.stringify(this.widget)),this.isDirty=!0},n.prototype.onWidgetException=function(e){if(!this.gotError){this.gotError=!0;var t="Error:";if(e.name&&(t+=" "+e.name+":"),e.message&&(t+=" "+e.message),e.lineNumber&&(t+="<br>Line "+e.lineNumber,e.columnNumber&&(t+=" column "+e.columnNumber),t+=" of script."),this.saveWidgetPending||this.saveWidgetAsPending||this.store.dispatch(new v.b({message:t,type:"error",target:"javascriptPanel"})),e.lineNumber){var n=e.lineNumber-1,i=0;e.columnNumber&&(i=e.columnNumber);var r=this.jsEditor.session.addMarker(new h.a(n,0,n,1/0),"ace_active-line","screenLine");this.errorMarkers.push(r);var a=this.jsEditor.session.getAnnotations(),o={row:n,column:i,text:e.message,type:"error"};this.errorAnnotationId=a.push(o)-1,this.jsEditor.session.setAnnotations(a)}}},n.prototype.cleanupJsErrors=function(){var e=this;if(this.store.dispatch(new v.a({})),this.errorMarkers.forEach(function(t){e.jsEditor.session.removeMarker(t)}),this.errorMarkers.length=0,this.errorAnnotationId>-1){var t=this.jsEditor.session.getAnnotations();t.splice(this.errorAnnotationId,1),this.jsEditor.session.setAnnotations(t),this.errorAnnotationId=-1}},n.prototype.commitSaveWidget=function(){var e=this,t=this.widgetTypeDetails&&this.widgetTypeDetails.id?this.widgetTypeDetails.id:void 0,n=this.widgetTypeDetails&&this.widgetTypeDetails.createdTime?this.widgetTypeDetails.createdTime:void 0;this.widgetService.saveWidgetTypeDetails(this.widget,t,this.widgetsBundle.alias,n).subscribe(function(t){e.setWidgetTypeDetails(t),e.saveWidgetPending=!1,e.store.dispatch(new v.b({message:e.translate.instant("widget.widget-saved"),type:"success",duration:500}))},function(){e.saveWidgetPending=!1})},n.prototype.commitSaveWidgetAs=function(){var e=this;this.dialog.open(y.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"]}).afterClosed().subscribe(function(t){if(t){e.widget.widgetName=t.widgetName,e.widget.alias=void 0;var n=JSON.parse(e.widget.defaultConfig);n.title=e.widget.widgetName,e.widget.defaultConfig=JSON.stringify(n),e.isDirty=!1,e.widgetService.saveWidgetTypeDetails(e.widget,void 0,t.bundleAlias,void 0).subscribe(function(n){e.router.navigateByUrl("/widgets-bundles/"+t.bundleId+"/widgetTypes/"+n.id.id)})}e.saveWidgetAsPending=!1})},n.prototype.setWidgetTypeDetails=function(e){this.widgetTypeDetails=e,this.widget=Object(l.d)(this.widgetTypeDetails);var t=JSON.parse(this.widget.defaultConfig);this.widget.defaultConfig=JSON.stringify(t),this.origWidget=Object(d.e)(this.widget),this.isDirty=!1},n.prototype.applyWidgetScript=function(){this.cleanupJsErrors(),this.gotError=!1,this.iframeWidgetEditModeInited=!1;var e=JSON.parse(this.widget.defaultConfig);e.title=this.widget.widgetName,this.widget.defaultConfig=JSON.stringify(e),this.iframe.attr("data-widget",JSON.stringify(this.widget)),this.iframe[0].contentWindow.location.reload(!0)},n.prototype.undoWidget=function(){this.widget=Object(d.e)(this.origWidget),this.setAceEditorValues(),this.isDirty=!1,this.applyWidgetScript()},n.prototype.saveWidget=function(){this.widget.widgetName?(this.saveWidgetPending=!0,this.applyWidgetScript()):this.store.dispatch(new v.b({message:this.translate.instant("widget.missing-widget-title-error"),type:"error"}))},n.prototype.saveWidgetAs=function(){this.saveWidgetAsPending=!0,this.applyWidgetScript()},n.prototype.undoDisabled=function(){return!this.isDirty||!this.iframeWidgetEditModeInited||this.saveWidgetPending||this.saveWidgetAsPending},n.prototype.saveDisabled=function(){return this.isReadOnly||!this.isDirty||!this.iframeWidgetEditModeInited||this.saveWidgetPending||this.saveWidgetAsPending},n.prototype.saveAsDisabled=function(){return!this.iframeWidgetEditModeInited||this.saveWidgetPending||this.saveWidgetAsPending},n.prototype.beautifyCss=function(){var e=this;Object(I.a)(this.widget.templateCss,{indent_size:4}).subscribe(function(t){e.widget.templateCss!==t&&(e.isDirty=!0,e.widget.templateCss=t,e.cssEditor.setValue(e.widget.templateCss?e.widget.templateCss:"",-1))})},n.prototype.beautifyHtml=function(){var e=this;Object(I.b)(this.widget.templateHtml,{indent_size:4,wrap_line_length:60}).subscribe(function(t){e.widget.templateHtml!==t&&(e.isDirty=!0,e.widget.templateHtml=t,e.htmlEditor.setValue(e.widget.templateHtml?e.widget.templateHtml:"",-1))})},n.prototype.beautifyJson=function(){var e=this;Object(I.c)(this.widget.settingsSchema,{indent_size:4}).subscribe(function(t){e.widget.settingsSchema!==t&&(e.isDirty=!0,e.widget.settingsSchema=t,e.jsonSettingsEditor.setValue(e.widget.settingsSchema?e.widget.settingsSchema:"",-1))})},n.prototype.beautifyDataKeyJson=function(){var e=this;Object(I.c)(this.widget.dataKeySettingsSchema,{indent_size:4}).subscribe(function(t){e.widget.dataKeySettingsSchema!==t&&(e.isDirty=!0,e.widget.dataKeySettingsSchema=t,e.dataKeyJsonSettingsEditor.setValue(e.widget.dataKeySettingsSchema?e.widget.dataKeySettingsSchema:"",-1))})},n.prototype.beautifyJs=function(){var e=this;Object(I.c)(this.widget.controllerScript,{indent_size:4,wrap_line_length:60}).subscribe(function(t){e.widget.controllerScript!==t&&(e.isDirty=!0,e.widget.controllerScript=t,e.jsEditor.setValue(e.widget.controllerScript?e.widget.controllerScript:"",-1))})},n.prototype.removeResource=function(e){e>-1&&this.widget.resources.splice(e,1).length>0&&(this.isDirty=!0)},n.prototype.addResource=function(){this.widget.resources.push({url:""}),this.isDirty=!0},n.prototype.widetTypeChanged=function(){var e=JSON.parse(this.widget.defaultConfig);this.widget.type!==s.m.rpc&&this.widget.type!==s.m.alarm?(e.targetDeviceAliases&&delete e.targetDeviceAliases,e.alarmSource&&delete e.alarmSource,e.datasources||(e.datasources=[]),e.timewindow||(e.timewindow={realtime:{timewindowMs:6e4}})):this.widget.type===s.m.rpc?(e.datasources&&delete e.datasources,e.alarmSource&&delete e.alarmSource,e.timewindow&&delete e.timewindow,e.targetDeviceAliases||(e.targetDeviceAliases=[])):(e.datasources&&delete e.datasources,e.targetDeviceAliases&&delete e.targetDeviceAliases,e.alarmSource||(e.alarmSource={}),e.timewindow||(e.timewindow={realtime:{timewindowMs:864e5}})),this.widget.defaultConfig=JSON.stringify(e),this.isDirty=!0},n.\u0275fac=function(e){return new(e||n)(a["\u0275\u0275directiveInject"](T.Store),a["\u0275\u0275directiveInject"](b.b),a["\u0275\u0275directiveInject"](M.ActivatedRoute),a["\u0275\u0275directiveInject"](M.Router),a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](D.TranslateService),a["\u0275\u0275directiveInject"](g.a),a["\u0275\u0275directiveInject"](k.MatDialog))},n.\u0275cmp=a["\u0275\u0275defineComponent"]({type:n,selectors:[["tb-widget-editor"]],viewQuery:function(e,t){if(1&e&&(a["\u0275\u0275viewQuery"](Q,3),a["\u0275\u0275viewQuery"](Z,3),a["\u0275\u0275viewQuery"](ee,3),a["\u0275\u0275viewQuery"](te,3),a["\u0275\u0275viewQuery"](ne,3),a["\u0275\u0275viewQuery"](ie,3),a["\u0275\u0275viewQuery"](re,3),a["\u0275\u0275viewQuery"](ae,3),a["\u0275\u0275viewQuery"](oe,3),a["\u0275\u0275viewQuery"](le,3),a["\u0275\u0275viewQuery"](se,3),a["\u0275\u0275viewQuery"](de,3)),2&e){var n=void 0;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.topPanelElmRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.topLeftPanelElmRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.topRightPanelElmRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.bottomPanelElmRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.javascriptPanelElmRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.framePanelElmRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.htmlInputElmRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.cssInputElmRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.settingsJsonInputElmRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.dataKeySettingsJsonInputElmRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.javascriptInputElmRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.widgetIFrameElmRef=n.first)}},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:182,vars:126,consts:[["fxFlex","","fxLayout","column"],["fxFlex","","fxLayout","column","tb-fullscreen","","tb-hotkeys","",3,"fullscreen","hotkeys","cheatSheet"],["cheatSheetComponent",""],["fxLayoutGap","16px","fxLayoutGap.lt-xl","8px",1,"mat-elevation-z1","tb-edit-toolbar"],["floatLabel","always","hideRequiredMarker","",1,"tb-widget-title"],["matInput","","required","",3,"disabled","ngModel","placeholder","ngModelChange"],["matInput","",3,"disabled","placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex",""],["mat-button","","fxHide.lt-md","","matTooltipPosition","below",3,"disabled","matTooltip","click"],["translate",""],["mat-raised-button","","fxHide.lt-md","","matTooltipPosition","below",3,"disabled","matTooltip","click"],["mat-raised-button","","fxHide.lt-md","","matTooltipPosition","below",3,"disabled","tb-circular-progress","matTooltip","click",4,"ngIf"],["mat-raised-button","","fxHide.lt-md","","matTooltipPosition","below",3,"disabled","tb-circular-progress","matTooltip","click"],["mat-button","","fxHide.lt-lg","","matTooltipPosition","below",3,"matTooltip","click"],["mat-icon-button","","fxHide","","fxShow.md","","matTooltipPosition","below",3,"matTooltip","click"],["mat-icon-button","","fxHide.gt-sm","",3,"matMenuTriggerFor"],["xPosition","before"],["widgetEditMenu","matMenu"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",3,"disabled","click",4,"ngIf"],["fxFlex","",2,"position","relative"],[1,"tb-editor","tb-absolute-fill"],[1,"tb-split","tb-split-vertical"],["topPanel",""],[1,"tb-split","tb-content"],["topLeftPanel",""],["selectedIndex","1","dynamicHeight","true",2,"width","100%","height","100%"],[3,"label"],[1,"tb-resize-container",2,"background-color","#fff"],[1,"mat-padding"],["fxFlex","","fxLayout","row","style","max-height: 40px;","fxLayoutAlign","start center",4,"ngFor","ngForOf"],[2,"margin-top","6px"],["mat-raised-button","","color","accent","matTooltipPosition","above",3,"disabled","matTooltip","click"],["tb-fullscreen","",1,"tb-resize-container",3,"fullscreen"],[1,"tb-editor-area-title-panel"],["mat-button","",3,"click"],["mat-button","","mat-icon-button","","matTooltipPosition","above",1,"tb-mat-32",3,"matTooltip","click"],["htmlInput",""],["mat-icon-button","","matTooltipPosition","above",1,"tb-mat-32",3,"matTooltip","click"],["cssInput",""],["topRightPanel",""],["dynamicHeight","true",2,"width","100%","height","100%"],["settingsJsonInput",""],["dataKeySettingsJsonInput",""],["fxFlex","","maxSizeByte","524288",3,"label","ngModel","ngModelChange"],[1,"mat-block"],["matInput","","rows","2","maxlength","255",3,"ngModel","ngModelChange"],["descriptionInput",""],["align","end"],["bottomPanel",""],["tb-toast","","toastTarget","javascriptPanel",1,"tb-split","tb-content"],["javascriptPanel",""],["javascriptInput",""],[1,"tb-split","tb-content",2,"overflow-y","hidden","position","relative"],["framePanel",""],["class","mat-content tb-progress-cover","fxFlex","","fxLayout","column","fxLayoutAlign","center center",4,"ngIf"],["tb-fullscreen","",2,"width","100%","height","100%",3,"fullscreen"],["frameborder","0","height","100%","width","100%"],["widgetIFrame",""],[2,"position","absolute","top","10px","left","10px","bottom","initial"],["mat-icon-button","","matTooltipPosition","above",1,"tb-fullscreen-button-style",3,"matTooltip","click"],[3,"value"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",2,"max-height","40px"],["fxFlex","","floatLabel","never",1,"mat-block","resource-field",2,"margin","10px 0 0 0","max-height","40px"],["required","","matInput","",3,"ngModel","placeholder","ngModelChange"],[3,"ngModel","ngModelChange"],["mat-icon-button","","color","accent","matTooltipPosition","above",3,"disabled","matTooltip","click"],["fxFlex","","fxLayout","column","fxLayoutAlign","center center",1,"mat-content","tb-progress-cover"],["diameter","100","mode","indeterminate","color","warn"]],template:function(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275element"](2,"tb-hotkeys-cheatsheet",null,2),a["\u0275\u0275elementStart"](4,"mat-toolbar",3),a["\u0275\u0275elementStart"](5,"mat-form-field",4),a["\u0275\u0275element"](6,"mat-label"),a["\u0275\u0275elementStart"](7,"input",5),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.widget.widgetName=e})("ngModelChange",function(){return t.isDirty=!0}),a["\u0275\u0275pipe"](8,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"mat-form-field"),a["\u0275\u0275elementStart"](10,"mat-select",6),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.widget.type=e})("ngModelChange",function(){return t.widetTypeChanged()}),a["\u0275\u0275pipe"](11,"translate"),a["\u0275\u0275template"](12,ce,3,4,"mat-option",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](13,"span",8),a["\u0275\u0275elementStart"](14,"button",9),a["\u0275\u0275listener"]("click",function(){return t.applyWidgetScript()}),a["\u0275\u0275pipe"](15,"translate"),a["\u0275\u0275elementStart"](16,"mat-icon"),a["\u0275\u0275text"](17,"play_arrow"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"span",10),a["\u0275\u0275text"](19,"action.run"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](20,"button",11),a["\u0275\u0275listener"]("click",function(){return t.undoWidget()}),a["\u0275\u0275pipe"](21,"async"),a["\u0275\u0275pipe"](22,"translate"),a["\u0275\u0275elementStart"](23,"mat-icon"),a["\u0275\u0275text"](24,"undo"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](25,"span",10),a["\u0275\u0275text"](26,"action.undo"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](27,ue,7,7,"button",12),a["\u0275\u0275elementStart"](28,"button",13),a["\u0275\u0275listener"]("click",function(){return t.saveWidgetAs()}),a["\u0275\u0275pipe"](29,"async"),a["\u0275\u0275pipe"](30,"translate"),a["\u0275\u0275elementStart"](31,"mat-icon"),a["\u0275\u0275text"](32,"save"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](33,"span",10),a["\u0275\u0275text"](34,"action.saveAs"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](35,"button",14),a["\u0275\u0275listener"]("click",function(){return t.fullscreen=!t.fullscreen}),a["\u0275\u0275pipe"](36,"translate"),a["\u0275\u0275elementStart"](37,"mat-icon"),a["\u0275\u0275text"](38),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](39,"span",10),a["\u0275\u0275text"](40,"widget.toggle-fullscreen"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](41,"button",15),a["\u0275\u0275listener"]("click",function(){return t.fullscreen=!t.fullscreen}),a["\u0275\u0275pipe"](42,"translate"),a["\u0275\u0275elementStart"](43,"mat-icon"),a["\u0275\u0275text"](44),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](45,"button",16),a["\u0275\u0275elementStart"](46,"mat-icon"),a["\u0275\u0275text"](47,"more_vert"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](48,"mat-menu",17,18),a["\u0275\u0275elementStart"](50,"button",19),a["\u0275\u0275listener"]("click",function(){return t.applyWidgetScript()}),a["\u0275\u0275elementStart"](51,"mat-icon"),a["\u0275\u0275text"](52,"play_arrow"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](53,"span",10),a["\u0275\u0275text"](54,"action.run"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](55,"button",19),a["\u0275\u0275listener"]("click",function(){return t.undoWidget()}),a["\u0275\u0275pipe"](56,"async"),a["\u0275\u0275elementStart"](57,"mat-icon"),a["\u0275\u0275text"](58,"undo"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](59,"span",10),a["\u0275\u0275text"](60,"action.undo"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](61,pe,6,3,"button",20),a["\u0275\u0275elementStart"](62,"button",19),a["\u0275\u0275listener"]("click",function(){return t.saveWidgetAs()}),a["\u0275\u0275pipe"](63,"async"),a["\u0275\u0275elementStart"](64,"mat-icon"),a["\u0275\u0275text"](65,"save"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](66,"span",10),a["\u0275\u0275text"](67,"action.saveAs"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](68,"div",21),a["\u0275\u0275elementStart"](69,"div",22),a["\u0275\u0275elementStart"](70,"div",23,24),a["\u0275\u0275elementStart"](72,"div",25,26),a["\u0275\u0275elementStart"](74,"mat-tab-group",27),a["\u0275\u0275elementStart"](75,"mat-tab",28),a["\u0275\u0275pipe"](76,"translate"),a["\u0275\u0275elementStart"](77,"div",29),a["\u0275\u0275elementStart"](78,"div",30),a["\u0275\u0275template"](79,me,12,14,"div",31),a["\u0275\u0275elementStart"](80,"div",32),a["\u0275\u0275elementStart"](81,"button",33),a["\u0275\u0275listener"]("click",function(){return t.addResource()}),a["\u0275\u0275pipe"](82,"async"),a["\u0275\u0275pipe"](83,"translate"),a["\u0275\u0275elementStart"](84,"span",10),a["\u0275\u0275text"](85,"action.add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](86,"mat-tab",28),a["\u0275\u0275pipe"](87,"translate"),a["\u0275\u0275elementStart"](88,"div",34),a["\u0275\u0275elementStart"](89,"div",35),a["\u0275\u0275elementStart"](90,"button",36),a["\u0275\u0275listener"]("click",function(){return t.beautifyHtml()}),a["\u0275\u0275text"](91),a["\u0275\u0275pipe"](92,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](93,"button",37),a["\u0275\u0275listener"]("click",function(){return t.htmlFullscreen=!t.htmlFullscreen}),a["\u0275\u0275pipe"](94,"translate"),a["\u0275\u0275elementStart"](95,"mat-icon"),a["\u0275\u0275text"](96),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](97,"div",null,38),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](99,"mat-tab",28),a["\u0275\u0275pipe"](100,"translate"),a["\u0275\u0275elementStart"](101,"div",34),a["\u0275\u0275elementStart"](102,"div",35),a["\u0275\u0275elementStart"](103,"button",36),a["\u0275\u0275listener"]("click",function(){return t.beautifyCss()}),a["\u0275\u0275text"](104),a["\u0275\u0275pipe"](105,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](106,"button",39),a["\u0275\u0275listener"]("click",function(){return t.cssFullscreen=!t.cssFullscreen}),a["\u0275\u0275pipe"](107,"translate"),a["\u0275\u0275elementStart"](108,"mat-icon"),a["\u0275\u0275text"](109),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](110,"div",null,40),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](112,"div",25,41),a["\u0275\u0275elementStart"](114,"mat-tab-group",42),a["\u0275\u0275elementStart"](115,"mat-tab",28),a["\u0275\u0275pipe"](116,"translate"),a["\u0275\u0275elementStart"](117,"div",34),a["\u0275\u0275elementStart"](118,"div",35),a["\u0275\u0275elementStart"](119,"button",36),a["\u0275\u0275listener"]("click",function(){return t.beautifyJson()}),a["\u0275\u0275text"](120),a["\u0275\u0275pipe"](121,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](122,"button",39),a["\u0275\u0275listener"]("click",function(){return t.jsonSettingsFullscreen=!t.jsonSettingsFullscreen}),a["\u0275\u0275pipe"](123,"translate"),a["\u0275\u0275elementStart"](124,"mat-icon"),a["\u0275\u0275text"](125),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](126,"div",null,43),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](128,"mat-tab",28),a["\u0275\u0275pipe"](129,"translate"),a["\u0275\u0275elementStart"](130,"div",34),a["\u0275\u0275elementStart"](131,"div",35),a["\u0275\u0275elementStart"](132,"button",36),a["\u0275\u0275listener"]("click",function(){return t.beautifyDataKeyJson()}),a["\u0275\u0275text"](133),a["\u0275\u0275pipe"](134,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](135,"button",39),a["\u0275\u0275listener"]("click",function(){return t.jsonDataKeySettingsFullscreen=!t.jsonDataKeySettingsFullscreen}),a["\u0275\u0275pipe"](136,"translate"),a["\u0275\u0275elementStart"](137,"mat-icon"),a["\u0275\u0275text"](138),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](139,"div",null,44),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](141,"mat-tab",28),a["\u0275\u0275pipe"](142,"translate"),a["\u0275\u0275elementStart"](143,"div",29),a["\u0275\u0275elementStart"](144,"div",30),a["\u0275\u0275elementStart"](145,"tb-image-input",45),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.widget.image=e})("ngModelChange",function(){return t.isDirty=!0}),a["\u0275\u0275pipe"](146,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](147,"mat-form-field",46),a["\u0275\u0275elementStart"](148,"mat-label",10),a["\u0275\u0275text"](149,"widget.description"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](150,"textarea",47,48),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.widget.description=e})("ngModelChange",function(){return t.isDirty=!0}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](152,"mat-hint",49),a["\u0275\u0275text"](153),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](154,"div",23,50),a["\u0275\u0275elementStart"](156,"div",51,52),a["\u0275\u0275elementStart"](158,"div",34),a["\u0275\u0275elementStart"](159,"div",35),a["\u0275\u0275elementStart"](160,"label",10),a["\u0275\u0275text"](161,"widget.javascript"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](162,"button",36),a["\u0275\u0275listener"]("click",function(){return t.beautifyJs()}),a["\u0275\u0275text"](163),a["\u0275\u0275pipe"](164,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](165,"button",39),a["\u0275\u0275listener"]("click",function(){return t.javascriptFullscreen=!t.javascriptFullscreen}),a["\u0275\u0275pipe"](166,"translate"),a["\u0275\u0275elementStart"](167,"mat-icon"),a["\u0275\u0275text"](168),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](169,"div",null,53),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](171,"div",54,55),a["\u0275\u0275template"](173,fe,2,0,"div",56),a["\u0275\u0275elementStart"](174,"div",57),a["\u0275\u0275element"](175,"iframe",58,59),a["\u0275\u0275elementStart"](177,"div",60),a["\u0275\u0275elementStart"](178,"button",61),a["\u0275\u0275listener"]("click",function(){return t.iFrameFullscreen=!t.iFrameFullscreen}),a["\u0275\u0275pipe"](179,"translate"),a["\u0275\u0275elementStart"](180,"mat-icon"),a["\u0275\u0275text"](181),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275reference"](3),i=a["\u0275\u0275reference"](49),r=a["\u0275\u0275reference"](151);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fullscreen",t.fullscreen)("hotkeys",t.hotKeys)("cheatSheet",n),a["\u0275\u0275advance"](6),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](8,64,"widget.title")),a["\u0275\u0275property"]("disabled",t.isReadOnly)("ngModel",t.widget.widgetName),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](11,66,"widget.type")),a["\u0275\u0275property"]("disabled",t.isReadOnly)("ngModel",t.widget.type),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",t.allWidgetTypes),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate1"]("matTooltip","",a["\u0275\u0275pipeBind1"](15,68,"widget.run")," (CTRL + Return)"),a["\u0275\u0275property"]("disabled",!t.iframeWidgetEditModeInited),a["\u0275\u0275advance"](6),a["\u0275\u0275propertyInterpolate1"]("matTooltip","",a["\u0275\u0275pipeBind1"](22,72,"widget.undo")," (CTRL + Q)"),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](21,70,t.isLoading$)||t.undoDisabled()),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("ngIf",!t.isReadOnly),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate1"]("matTooltip","",a["\u0275\u0275pipeBind1"](30,76,"widget.saveAs")," (Shift + CTRL + S)"),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](29,74,t.isLoading$)||t.saveAsDisabled())("tb-circular-progress",t.saveWidgetAsPending),a["\u0275\u0275advance"](7),a["\u0275\u0275propertyInterpolate1"]("matTooltip","",a["\u0275\u0275pipeBind1"](36,78,"widget.toggle-fullscreen")," (Shift + CTRL + F)"),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.fullscreen?"fullscreen_exit":"fullscreen"),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate1"]("matTooltip","",a["\u0275\u0275pipeBind1"](42,80,"widget.toggle-fullscreen")," (Shift + CTRL + F)"),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.fullscreen?"fullscreen_exit":"fullscreen"),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("matMenuTriggerFor",i),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("disabled",!t.iframeWidgetEditModeInited),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](56,82,t.isLoading$)||t.undoDisabled()),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",!t.isReadOnly),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](63,84,t.isLoading$)||t.saveAsDisabled()),a["\u0275\u0275advance"](13),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](76,86,"widget.resources")),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngForOf",t.widget.resources),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](83,90,"widget.add-resource")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](82,88,t.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](87,92,"widget.html")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fullscreen",t.htmlFullscreen),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](92,94,"widget.tidy")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](94,96,t.htmlFullscreen?"fullscreen.exit":"fullscreen.expand")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.htmlFullscreen?"fullscreen_exit":"fullscreen"),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](100,98,"widget.css")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fullscreen",t.cssFullscreen),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](105,100,"widget.tidy")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](107,102,t.cssFullscreen?"fullscreen.exit":"fullscreen.expand")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.cssFullscreen?"fullscreen_exit":"fullscreen"),a["\u0275\u0275advance"](6),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](116,104,"widget.settings-schema")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fullscreen",t.jsonSettingsFullscreen),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](121,106,"widget.tidy")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](123,108,t.jsonSettingsFullscreen?"fullscreen.exit":"fullscreen.expand")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.jsonSettingsFullscreen?"fullscreen_exit":"fullscreen"),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](129,110,"widget.datakey-settings-schema")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fullscreen",t.jsonDataKeySettingsFullscreen),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](134,112,"widget.tidy")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](136,114,t.jsonDataKeySettingsFullscreen?"fullscreen.exit":"fullscreen.expand")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.jsonDataKeySettingsFullscreen?"fullscreen_exit":"fullscreen"),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](142,116,"widget.widget-settings")),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](146,118,"widget.image-preview")),a["\u0275\u0275property"]("ngModel",t.widget.image),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngModel",t.widget.description),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"]("",(null==r.value?null:r.value.length)||0,"/255"),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("fullscreen",t.javascriptFullscreen),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](164,120,"widget.tidy")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](166,122,t.javascriptFullscreen?"fullscreen.exit":"fullscreen.expand")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.javascriptFullscreen?"fullscreen_exit":"fullscreen"),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",!t.iframeWidgetEditModeInited),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fullscreen",t.iFrameFullscreen),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](179,124,t.iFrameFullscreen?"fullscreen.exit":"fullscreen.expand")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.iFrameFullscreen?"fullscreen_exit":"fullscreen")}},directives:[A.b,A.f,F.a,P.a,m.c,_.a,N.MatToolbar,A.g,L.MatFormField,L.MatLabel,O.MatInput,B.DefaultValueAccessor,B.RequiredValidator,B.NgControlStatus,B.NgModel,R.MatSelect,j.NgForOf,V.MatButton,z.d,G.MatTooltip,W.MatIcon,D.TranslateDirective,j.NgIf,q.a,H.MatMenuTrigger,H.MatMenu,H.MatMenuItem,U.MatTabGroup,U.MatTab,$.a,B.MaxLengthValidator,L.MatHint,K.b,Y.MatOption,A.e,J.MatCheckbox,X.MatSpinner],pipes:[D.TranslatePipe,j.AsyncPipe],styles:["tb-widget-editor{flex:1;display:flex;flex-direction:column}.tb-editor .tb-split{box-sizing:border-box;overflow-x:hidden;overflow-y:auto}.tb-editor mat-form-field.resource-field{max-height:40px;margin:10px 0 0}.tb-editor mat-form-field.resource-field .mat-form-field-wrapper{padding-bottom:0}.tb-editor mat-form-field.resource-field .mat-form-field-wrapper .mat-form-field-flex{max-height:40px}.tb-editor mat-form-field.resource-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix{border:0}.tb-editor mat-form-field.resource-field .mat-form-field-wrapper .mat-form-field-underline{bottom:0}.tb-editor .ace_editor{font-size:14px!important}.tb-editor .tb-content{border:1px solid silver}.tb-editor .gutter{background-color:transparent;background-repeat:no-repeat;background-position:50%}.tb-editor .gutter.gutter-horizontal{cursor:col-resize;background-image:url(vertical.5e6d1df402c3bc10ecc6.png)}.tb-editor .gutter.gutter-vertical{cursor:row-resize;background-image:url(horizontal.98604ef1a5065a065f35.png)}.tb-editor .gutter.gutter-horizontal,.tb-editor .tb-split.tb-split-horizontal{float:left;height:100%}.tb-editor .tb-split.tb-split-vertical{display:flex}.tb-editor .tb-split.tb-split-vertical .tb-split.tb-content{height:100%}.tb-editor .container{width:100%;height:100%}.tb-split-vertical mat-tab-group .mat-tab-body-wrapper{height:calc(100% - 49px)}.tb-split-vertical mat-tab-group .mat-tab-body-wrapper mat-tab-body,.tb-split-vertical mat-tab-group .mat-tab-body-wrapper mat-tab-body>div{height:100%}div.tb-editor-area-title-panel{position:absolute;top:5px;right:20px;z-index:5;font-size:.8rem;font-weight:500}div.tb-editor-area-title-panel label{padding:4px;color:#00acc1;background:hsla(0,0%,86%,.35);border-radius:5px}div.tb-editor-area-title-panel label:not(:last-child){margin-right:4px}div.tb-editor-area-title-panel button.mat-button,div.tb-editor-area-title-panel button.mat-icon-button,div.tb-editor-area-title-panel button.mat-icon-button.tb-mat-32{align-items:center;vertical-align:middle;min-width:32px;min-height:15px;padding:4px;margin:0;font-size:.8rem;line-height:15px;color:#7b7b7b;background:hsla(0,0%,86%,.35)}div.tb-editor-area-title-panel button.mat-button:not(:last-child),div.tb-editor-area-title-panel button.mat-icon-button.tb-mat-32:not(:last-child),div.tb-editor-area-title-panel button.mat-icon-button:not(:last-child){margin-right:4px}.tb-resize-container{position:relative;width:100%;height:100%;overflow-y:auto}.tb-resize-container .ace_editor{height:100%}mat-toolbar.tb-edit-toolbar{min-height:40px!important;max-height:40px!important}mat-toolbar.tb-edit-toolbar button.mat-button-base:not(.mat-icon-button){font-size:12px;line-height:28px;padding:0 8px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}mat-toolbar.tb-edit-toolbar button.mat-button-base:not(.mat-icon-button) mat-icon{height:20px;width:20px;font-size:20px}mat-toolbar.tb-edit-toolbar mat-form-field input,mat-toolbar.tb-edit-toolbar mat-form-field mat-select{font-size:1.1rem;font-weight:400;letter-spacing:.005em}mat-toolbar.tb-edit-toolbar mat-form-field div.mat-form-field-infix{padding-bottom:5px}mat-toolbar.tb-edit-toolbar mat-form-field.tb-widget-title{min-width:250px}@media screen and (max-width:1279px){mat-toolbar.tb-edit-toolbar mat-form-field.tb-widget-title{min-width:0}}"],encapsulation:2}),n}(r.a);0,void 0}).call(this,n("xexB"))},iO13:function(e,t,n){"use strict";n.d(t,"a",function(){return I});var i=n("mrSG"),r=n("fXoL"),a=n("3Pt+"),o=n("gmuX"),l=n("C/rb"),s=n("zp9Z"),d=n("l7P3"),c=n("tyNb"),u=n("0IaG"),p=n("/t3+"),m=n("sYmb"),f=n("XiUz"),h=n("bTqV"),g=n("NFeN"),b=n("ofXK"),v=n("kmnG"),y=n("qFsG"),x=n("KEZ6"),S=n("bv9b");function w(e,t){1&e&&r["\u0275\u0275element"](0,"mat-progress-bar",16)}function C(e,t){1&e&&r["\u0275\u0275element"](0,"div",17)}function E(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"widget.title-required")," "))}var I=function(e){function t(t,n,i,r){var a=e.call(this,t,n,i)||this;return a.store=t,a.router=n,a.dialogRef=i,a.fb=r,Object(l.b)(t).authority===s.a.TENANT_ADMIN?a.bundlesScope="tenant":a.bundlesScope="system",a}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){this.saveWidgetTypeAsFormGroup=this.fb.group({title:[null,[a.Validators.required]],widgetsBundle:[null,[a.Validators.required]]})},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.saveAs=function(){var e=this.saveWidgetTypeAsFormGroup.get("title").value,t=this.saveWidgetTypeAsFormGroup.get("widgetsBundle").value,n={widgetName:e,bundleId:t.id.id,bundleAlias:t.alias};this.dialogRef.close(n)},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](d.Store),r["\u0275\u0275directiveInject"](c.Router),r["\u0275\u0275directiveInject"](u.MatDialogRef),r["\u0275\u0275directiveInject"](a.FormBuilder))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-save-widget-type-as-dialog"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:31,vars:21,consts:[[3,"formGroup","ngSubmit"],["color","accent"],["translate",""],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[1,"mat-block"],["matInput","","formControlName","title","required",""],[4,"ngIf"],["fxFlex","","formControlName","widgetsBundle","required","",3,"bundlesScope"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"form",0),r["\u0275\u0275listener"]("ngSubmit",function(){return t.saveAs()}),r["\u0275\u0275elementStart"](1,"mat-toolbar",1),r["\u0275\u0275elementStart"](2,"h2",2),r["\u0275\u0275text"](3,"widget.save-widget-type-as"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](4,"span",3),r["\u0275\u0275elementStart"](5,"button",4),r["\u0275\u0275listener"]("click",function(){return t.cancel()}),r["\u0275\u0275elementStart"](6,"mat-icon",5),r["\u0275\u0275text"](7,"close"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](8,w,1,0,"mat-progress-bar",6),r["\u0275\u0275pipe"](9,"async"),r["\u0275\u0275template"](10,C,1,0,"div",7),r["\u0275\u0275pipe"](11,"async"),r["\u0275\u0275elementStart"](12,"div",8),r["\u0275\u0275elementStart"](13,"fieldset"),r["\u0275\u0275elementStart"](14,"span",2),r["\u0275\u0275text"](15,"widget.save-widget-type-as-text"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"mat-form-field",9),r["\u0275\u0275elementStart"](17,"mat-label",2),r["\u0275\u0275text"](18,"widget.title"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](19,"input",10),r["\u0275\u0275template"](20,E,3,3,"mat-error",11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](21,"tb-widgets-bundle-select",12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"div",13),r["\u0275\u0275elementStart"](23,"button",14),r["\u0275\u0275listener"]("click",function(){return t.cancel()}),r["\u0275\u0275pipe"](24,"async"),r["\u0275\u0275text"](25),r["\u0275\u0275pipe"](26,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](27,"button",15),r["\u0275\u0275pipe"](28,"async"),r["\u0275\u0275text"](29),r["\u0275\u0275pipe"](30,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275property"]("formGroup",t.saveWidgetTypeAsFormGroup),r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](9,9,t.isLoading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!r["\u0275\u0275pipeBind1"](11,11,t.isLoading$)),r["\u0275\u0275advance"](10),r["\u0275\u0275property"]("ngIf",t.saveWidgetTypeAsFormGroup.get("title").hasError("required")),r["\u0275\u0275advance"](1),r["\u0275\u0275propertyInterpolate"]("bundlesScope",t.bundlesScope),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](24,13,t.isLoading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](26,15,"action.cancel")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](28,17,t.isLoading$)||t.saveWidgetTypeAsFormGroup.invalid||!t.saveWidgetTypeAsFormGroup.dirty),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](30,19,"action.saveAs")," "))},directives:[a["\u0275angular_packages_forms_forms_ba"],a.NgControlStatusGroup,a.FormGroupDirective,p.MatToolbar,m.TranslateDirective,f.b,h.MatButton,g.MatIcon,b.NgIf,u.MatDialogContent,v.MatFormField,v.MatLabel,y.MatInput,a.DefaultValueAccessor,a.NgControlStatus,a.FormControlName,a.RequiredValidator,x.a,u.MatDialogActions,f.e,S.MatProgressBar,v.MatError],pipes:[b.AsyncPipe,m.TranslatePipe],encapsulation:2}),t}(o.a);0,void 0},j22J:function(e,t,n){"use strict";n.d(t,"a",function(){return N});var i=n("fXoL"),r=n("3Pt+"),a=n("LRne"),o=n("8LU1"),l=n("//Q6"),s=n("T4sd"),d=n("FtGj"),c=n("JX91"),u=n("lJxs"),p=n("5+tZ"),m=n("w1tV"),f=n("sYmb"),h=n("kmnG"),g=n("A5z7"),b=n("ofXK"),v=n("qFsG"),y=n("/1cH"),x=n("NFeN"),S=n("FKr1"),w=n("d5eY"),C=["chipList"],E=["labelAutocomplete"],I=["labelInput"];function T(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-icon",12),i["\u0275\u0275text"](1,"close"),i["\u0275\u0275elementEnd"]())}function M(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-chip",10),i["\u0275\u0275listener"]("removed",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"]().remove(e)}),i["\u0275\u0275text"](1),i["\u0275\u0275template"](2,T,2,0,"mat-icon",11),i["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("selectable",!a.disabled)("removable",!a.disabled),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",r.name," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!a.disabled)}}function D(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",13),i["\u0275\u0275element"](1,"span",14),i["\u0275\u0275pipe"](2,"highlight"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind2"](2,2,n.name,r.searchText),i["\u0275\u0275sanitizeHtml"])}}function k(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"span",1),i["\u0275\u0275text"](2,"rulenode.no-link-labels-found"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}var A=function(e){return{label:e}};function F(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,n.translate.get("rulenode.no-link-label-matching",i["\u0275\u0275pureFunction1"](3,A,n.truncate.transform(n.searchText,!0,6,"..."))))," ")}}function P(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275elementStart"](1,"a",20),i["\u0275\u0275listener"]("click",function(e){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"](2);return t.createLinkLabel(e,t.searchText)}),i["\u0275\u0275text"](2,"rulenode.create-new-link-label"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function _(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",15),i["\u0275\u0275elementStart"](1,"div",16),i["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),i["\u0275\u0275template"](2,k,3,0,"div",17),i["\u0275\u0275template"](3,F,3,5,"ng-template",null,18,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](5,P,3,0,"span",19),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](4),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",null),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!r.textIsNotEmpty(r.searchText))("ngIfElse",n),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",r.allowCustom)}}var N=function(){function e(e,t,n){this.fb=e,this.truncate=t,this.translate=n,this.labelsList=[],this.separatorKeysCodes=[],this.labels=[],this.searchText="",this.propagateChange=function(e){},this.linksFormGroup=this.fb.group({label:[null]})}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(o.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allowCustom",{get:function(){return this.allowCustomValue},set:function(e){this.allowCustomValue=Object(o.coerceBooleanProperty)(e),this.separatorKeysCodes=this.allowCustomValue?[d.ENTER,d.COMMA,d.SEMICOLON]:[]},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.filteredLabels=this.linksFormGroup.get("label").valueChanges.pipe(Object(c.a)(""),Object(u.a)(function(e){return e||""}),Object(p.b)(function(t){return e.fetchLabels(t)}),Object(m.a)())},e.prototype.ngOnChanges=function(e){for(var t=!1,n=0,i=Object.keys(e);n<i.length;n++){var r=i[n],a=e[r];a.currentValue!==a.previousValue&&["allowCustom","allowedLabels"].includes(r)&&(t=!0)}t&&this.linksFormGroup.get("label").patchValue("",{emitEvent:!0})},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.linksFormGroup.disable({emitEvent:!1}):this.linksFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){var t=this;this.searchText="",this.labelsList.length=0,this.labels.length=0,this.modelValue=e;for(var n=0,i=Object.keys(this.allowedLabels);n<i.length;n++){var r=i[n];this.labelsList.push({name:this.allowedLabels[r].name,value:this.allowedLabels[r].value})}e&&e.forEach(function(e){t.allowedLabels[e]?t.labels.push(Object(l.e)(t.allowedLabels[e])):t.labels.push({name:e,value:e})}),this.chipList&&this.required&&(this.chipList.errorState=!this.labels.length),this.linksFormGroup.get("label").patchValue("",{emitEvent:!0})},e.prototype.displayLabelFn=function(e){return e?e.name:void 0},e.prototype.textIsNotEmpty=function(e){return!!(e&&null!=e&&e.length>0)},e.prototype.createLinkLabel=function(e,t){e.preventDefault(),this.transformLinkLabel(t)},e.prototype.add=function(e){this.matAutocomplete.isOpen&&!this.allowCustom||this.transformLinkLabel(e.value)},e.prototype.fetchLabels=function(e){if(this.searchText=e,this.searchText&&this.searchText.length){var t=this.searchText.toUpperCase();return Object(a.a)(this.labelsList.filter(function(e){return e.name.toUpperCase().includes(t)}))}return Object(a.a)(this.labelsList)},e.prototype.transformLinkLabel=function(e){if((e||"").trim()){var t=null,n=e.trim(),i=this.labelsList.find(function(e){return e.name===n});i?t=Object(l.e)(i):this.allowCustom&&(t={name:n,value:n}),t&&this.addLabel(t)}this.clear("")},e.prototype.remove=function(e){var t=this.labels.indexOf(e);t>=0&&(this.labels.splice(t,1),this.labels.length||this.required&&(this.chipList.errorState=!0),this.updateModel())},e.prototype.selected=function(e){this.addLabel(e.option.value),this.clear("")},e.prototype.addLabel=function(e){-1===this.labels.findIndex(function(t){return t.value===e.value})&&(this.labels.push(e),this.required&&(this.chipList.errorState=!1),this.updateModel())},e.prototype.onFocus=function(){this.linksFormGroup.get("label").updateValueAndValidity({onlySelf:!0,emitEvent:!0})},e.prototype.clear=function(e){var t=this;void 0===e&&(e=""),this.labelInput.nativeElement.value=e,this.linksFormGroup.get("label").patchValue(null,{emitEvent:!0}),setTimeout(function(){t.labelInput.nativeElement.blur(),t.labelInput.nativeElement.focus()},0)},e.prototype.updateModel=function(){var e=this.labels.map(function(e){return e.value});this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](r.FormBuilder),i["\u0275\u0275directiveInject"](s.a),i["\u0275\u0275directiveInject"](f.TranslateService))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-link-labels"]],viewQuery:function(e,t){if(1&e&&(i["\u0275\u0275viewQuery"](C,1),i["\u0275\u0275viewQuery"](E,1),i["\u0275\u0275viewQuery"](I,1)),2&e){var n=void 0;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.chipList=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.matAutocomplete=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.labelInput=n.first)}},inputs:{required:"required",disabled:"disabled",allowCustom:"allowCustom",allowedLabels:"allowedLabels"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}]),i["\u0275\u0275NgOnChangesFeature"]],decls:16,vars:16,consts:[[2,"width","100%",3,"formGroup"],["translate",""],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","label","matAutocompleteOrigin","",2,"max-width","200px",3,"placeholder","matAutocompleteConnectedTo","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","focusin","matChipInputTokenEnd"],["labelInput","","origin","matAutocompleteOrigin"],[1,"tb-autocomplete",3,"displayWith","optionSelected"],["labelAutocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["class","tb-not-found",3,"value",4,"ngIf"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[3,"value"],[3,"innerHTML"],[1,"tb-not-found",3,"value"],[1,"tb-not-found-content",3,"click"],[4,"ngIf","ngIfElse"],["searchNotEmpty",""],[4,"ngIf"],["translate","",3,"click"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-form-field",0),i["\u0275\u0275elementStart"](1,"mat-label",1),i["\u0275\u0275text"](2,"rulenode.link-labels"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"mat-chip-list",null,2),i["\u0275\u0275template"](5,M,3,4,"mat-chip",3),i["\u0275\u0275elementStart"](6,"input",4,5),i["\u0275\u0275listener"]("focusin",function(){return t.onFocus()})("matChipInputTokenEnd",function(e){return t.add(e)}),i["\u0275\u0275pipe"](9,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"mat-autocomplete",6,7),i["\u0275\u0275listener"]("optionSelected",function(e){return t.selected(e)}),i["\u0275\u0275template"](12,D,3,5,"mat-option",8),i["\u0275\u0275pipe"](13,"async"),i["\u0275\u0275template"](14,_,6,4,"mat-option",9),i["\u0275\u0275pipe"](15,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n,r=i["\u0275\u0275reference"](4),a=i["\u0275\u0275reference"](8),o=i["\u0275\u0275reference"](11);i["\u0275\u0275property"]("formGroup",t.linksFormGroup),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngForOf",t.labels),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("placeholder",t.disabled?"":i["\u0275\u0275pipeBind1"](9,10,"rulenode.link-label")),i["\u0275\u0275property"]("matAutocompleteConnectedTo",a)("matAutocomplete",o)("matChipInputFor",r)("matChipInputSeparatorKeyCodes",t.separatorKeysCodes),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("displayWith",t.displayLabelFn),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](13,12,t.filteredLabels)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",0===(null==(n=i["\u0275\u0275pipeBind1"](15,14,t.filteredLabels))?null:n.length))}},directives:[h.MatFormField,r.NgControlStatusGroup,r.FormGroupDirective,h.MatLabel,f.TranslateDirective,g.MatChipList,b.NgForOf,v.MatInput,r.DefaultValueAccessor,y.MatAutocompleteTrigger,g.MatChipInput,r.NgControlStatus,r.FormControlName,y.MatAutocompleteOrigin,y.MatAutocomplete,b.NgIf,g.MatChip,x.MatIcon,g.MatChipRemove,S.MatOption],pipes:[f.TranslatePipe,b.AsyncPipe,w.a],encapsulation:2}),e}();0,void 0},kIY7:function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},m3bB:function(e,t,n){"use strict";(function(e){n.d(t,"c",function(){return Ce}),n.d(t,"b",function(){return Ee}),n.d(t,"a",function(){return Ie});var i=n("mrSG"),r=n("fXoL"),a=n("RxGS"),o=n("3Pt+"),l=n("FKr1"),s=n("0IaG"),d=n("7EHt"),c=n("S+vS"),u=n("Vurf"),p=n("8km5"),m=n("/Vd+"),f=n("+5dr"),h=n("C4fA"),g=n("5yfJ"),b=n("LRne"),v=n("xgIS"),y=n("vkgz"),x=n("5+tZ"),S=n("Kj3r"),w=n("/uUt"),C=n("//Q6"),E=n("YCWy"),I=n("4t2C"),T=n("gmuX"),M=n("FBAY"),D=n("yl57"),k=n("U3y+"),A=n("90vD"),F=n("l7P3"),P=n("tyNb"),_=n("sYmb"),N=n("XiUz"),L=n("8m5z"),O=n("49Ji"),B=n("WEPN"),R=n("znSr"),j=n("bTqV"),V=n("Qu3c"),z=n("NFeN"),G=n("XhcP"),W=n("/t3+"),q=n("kmnG"),H=n("qFsG"),U=n("ofXK"),$=n("STbY"),K=n("aYVl"),Y=n("kRCp"),J=n("wZkO"),X=n("mXAo"),Q=n("f0Cb"),Z=n("EbnC"),ee=n("bv9b"),te=["ruleNodeSearchInput"],ne=["ruleChainCanvas"],ie=["ruleChainMenuTrigger"],re=["tbRuleNode"],ae=["tbRuleNodeLink"],oe=["ruleNodeTypeExpansionPanels"];function le(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mat-expansion-panel",33,34),r["\u0275\u0275elementStart"](2,"mat-expansion-panel-header",35),r["\u0275\u0275listener"]("mouseenter",function(e){r["\u0275\u0275restoreView"](n);var i=t.$implicit;return r["\u0275\u0275nextContext"]().typeHeaderMouseEnter(e,i)})("mouseleave",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().destroyTooltips()}),r["\u0275\u0275elementStart"](3,"mat-panel-title"),r["\u0275\u0275elementStart"](4,"mat-icon"),r["\u0275\u0275text"](5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",36),r["\u0275\u0275text"](7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](8,"fc-canvas",37),r["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,a=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("expanded",!0),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate"](a.ruleNodeTypeDescriptorsMap.get(i).icon),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](a.ruleNodeTypeDescriptorsMap.get(i).name),r["\u0275\u0275advance"](1),r["\u0275\u0275propertyInterpolate1"]("id","tb-rulchain-",i,""),r["\u0275\u0275property"]("model",a.ruleNodeTypesModel[i].model)("selectedObjects",a.ruleNodeTypesModel[i].selectedObjects)("automaticResize",!1)("userCallbacks",a.nodeLibCallbacks)("nodeWidth",170)("nodeHeight",50)("dropTargetId","tb-rulchain-canvas")}}var se=function(e){return[e]};function de(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",42,51),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-event-table",52),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"](2);r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,6,"rulenode.events")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("debugEventTypes",r["\u0275\u0275pureFunction1"](8,se,i.debugEventTypes.DEBUG_RULE_NODE))("defaultEventType",i.debugEventTypes.DEBUG_RULE_NODE)("active",n.isActive)("tenantId",i.ruleChain.tenantId.id)("entityId",i.editingRuleNode.ruleNodeId)}}function ce(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tb-details-panel",38),r["\u0275\u0275listener"]("closeDetails",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().onEditRuleNodeClosed()})("toggleDetailsEditMode",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().onRevertRuleNodeEdit()})("applyDetails",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().saveRuleNode()}),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275elementStart"](2,"div",39),r["\u0275\u0275element"](3,"div",40),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"mat-tab-group",41),r["\u0275\u0275listener"]("selectedIndexChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().selectedRuleNodeTabIndex=e}),r["\u0275\u0275elementStart"](5,"mat-tab",42),r["\u0275\u0275pipe"](6,"translate"),r["\u0275\u0275element"](7,"tb-rule-node",43,44),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](9,de,4,10,"mat-tab",45),r["\u0275\u0275elementStart"](10,"mat-tab",42),r["\u0275\u0275pipe"](11,"translate"),r["\u0275\u0275elementStart"](12,"div",46),r["\u0275\u0275elementStart"](13,"div",47),r["\u0275\u0275elementStart"](14,"div",48),r["\u0275\u0275text"](15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"div"),r["\u0275\u0275text"](17,"\xa0"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"div",49),r["\u0275\u0275text"](19),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"div"),r["\u0275\u0275text"](21,"\xa0"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](22,"div",50),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275reference"](8),a=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("headerTitle",a.editingRuleNode.name),r["\u0275\u0275propertyInterpolate"]("headerSubtitle",r["\u0275\u0275pipeBind1"](1,18,a.ruleNodeTypeDescriptorsMap.get(a.editingRuleNode.component.type).name)+" - "+a.editingRuleNode.component.name),r["\u0275\u0275property"]("isReadOnly",a.selectedRuleNodeTabIndex>0)("isAlwaysEdit",!0)("theForm",i.ruleNodeFormGroup),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("tb-help",a.helpLinkIdForRuleNodeType()),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("selectedIndex",a.selectedRuleNodeTabIndex),r["\u0275\u0275advance"](1),r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](6,20,"rulenode.details")),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ruleNode",a.editingRuleNode)("ruleChainId",null==a.ruleChain.id?null:a.ruleChain.id.id)("ruleChainType",a.ruleChainType)("isEdit",!0)("isReadOnly",!1),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",a.editingRuleNode.ruleNodeId),r["\u0275\u0275advance"](1),r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](11,22,"rulenode.help")),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate"](a.editingRuleNode.component.name),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](a.editingRuleNode.component.configurationDescriptor.nodeDefinition.description),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("innerHtml",a.editingRuleNode.component.configurationDescriptor.nodeDefinition.details,r["\u0275\u0275sanitizeHtml"])}}function ue(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"tb-details-panel",38),r["\u0275\u0275listener"]("closeDetails",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().onEditRuleNodeLinkClosed()})("toggleDetailsEditMode",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().onRevertRuleNodeLinkEdit()})("applyDetails",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().saveRuleNodeLink()}),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275elementStart"](2,"div",39),r["\u0275\u0275element"](3,"div",40),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"tb-rule-node-link",53,54),r["\u0275\u0275listener"]("ngModelChange",function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().editingRuleNodeLink=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275reference"](5),a=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("headerTitle",a.editingRuleNodeLink.label),r["\u0275\u0275propertyInterpolate"]("headerSubtitle",r["\u0275\u0275pipeBind1"](1,9,"rulenode.link-details")),r["\u0275\u0275property"]("isReadOnly",!1)("isAlwaysEdit",!0)("theForm",i.ruleNodeLinkFormGroup),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("tb-help","ruleEngine"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngModel",a.editingRuleNodeLink)("allowedLabels",a.editingRuleNodeLinkLabels)("allowCustom",a.editingRuleNodeAllowCustomLabels)}}function pe(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-icon"),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]().contextInfo;r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](n.icon)}}function me(e,t){if(1&e&&r["\u0275\u0275element"](0,"img",62),2&e){var n=r["\u0275\u0275nextContext"]().contextInfo;r["\u0275\u0275property"]("src",n.iconUrl,r["\u0275\u0275sanitizeUrl"])}}function fe(e,t){1&e&&r["\u0275\u0275element"](0,"mat-divider")}function he(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"span",67),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"keyboardShortcut"),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](2).$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,n.shortcut),"")}}function ge(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-icon"),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](2).$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](n.icon)}}function be(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",64),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"]().$implicit,t=r["\u0275\u0275nextContext"](2);return e.action(t.contextMenuEvent)}),r["\u0275\u0275template"](1,he,3,3,"span",65),r["\u0275\u0275template"](2,ge,2,1,"mat-icon",56),r["\u0275\u0275elementStart"](3,"span",66),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]().$implicit;r["\u0275\u0275property"]("disabled",!i.enabled),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",i.shortcut),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",i.icon),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](i.value)}}function ve(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275template"](1,fe,1,0,"mat-divider",56),r["\u0275\u0275template"](2,be,5,4,"button",63),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.divider),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!n.divider)}}function ye(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",55),r["\u0275\u0275listener"]("mouseleave",function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().onRuleChainContextMenuMouseLeave()}),r["\u0275\u0275elementStart"](1,"div"),r["\u0275\u0275template"](2,pe,2,1,"mat-icon",56),r["\u0275\u0275template"](3,me,1,1,"img",57),r["\u0275\u0275elementStart"](4,"div",58),r["\u0275\u0275elementStart"](5,"div",59),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"div",60),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](9,ve,3,2,"div",61),r["\u0275\u0275elementEnd"]()}if(2&e){var i=t.contextInfo;r["\u0275\u0275advance"](1),r["\u0275\u0275classMapInterpolate1"]("tb-context-menu-header ",i.headerClass,""),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!i.iconUrl),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",i.iconUrl),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](i.title),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](i.subtitle),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",i.menuItems)}}var xe=function(e){return{"tb-hide":e}};function Se(e,t){1&e&&r["\u0275\u0275element"](0,"mat-progress-bar",14)}function we(e,t){1&e&&r["\u0275\u0275element"](0,"mat-progress-bar",15)}var Ce=function(t){function n(e,n,i,r,a,o,l,s,d,c){var u=t.call(this,e)||this;return u.store=e,u.route=n,u.router=i,u.ruleChainService=r,u.authService=a,u.translate=o,u.itembuffer=l,u.dialog=s,u.dialogService=d,u.fb=c,u.width="100%",u.height="100%",u.eventTypes=A.b,u.debugEventTypes=A.a,u.ruleChainMenuPosition={x:"0px",y:"0px"},u.ruleNodeTypeDescriptorsMap=f.f,u.ruleNodeTypesLibraryArray=f.g,u.isInvalid=!1,u.errorTooltips={},u.isFullscreen=!1,u.selectedRuleNodeTabIndex=0,u.editingRuleNode=null,u.isEditingRuleNode=!1,u.editingRuleNodeIndex=-1,u.editingRuleNodeAllowCustomLabels=!1,u.editingRuleNodeLink=null,u.isEditingRuleNodeLink=!1,u.editingRuleNodeLinkIndex=-1,u.hotKeys=[],u.enableHotKeys=!0,u.isLibraryOpen=!0,u.ruleNodeSearch="",u.ruleNodeTypeSearch="",u.ruleChainModel={nodes:[],edges:[]},u.selectedObjects=[],u.editCallbacks={edgeDoubleClick:function(e,t){u.openLinkDetails(t)},edgeEdit:function(e,t){u.openLinkDetails(t)},nodeCallbacks:{doubleClick:function(e,t){u.openNodeDetails(t)},nodeEdit:function(e,t){u.openNodeDetails(t)},mouseEnter:u.displayNodeDescriptionTooltip.bind(u),mouseLeave:u.destroyTooltips.bind(u),mouseDown:u.destroyTooltips.bind(u)},isValidEdge:function(e,t){return e.type===m.e.rightConnectorType&&t.type===m.e.leftConnectorType},createEdge:function(e,t){var n=u.ruleChainCanvas.modelService.nodes.getNodeByConnectorId(t.source);if(n.component.type===f.c.INPUT){if(u.ruleChainCanvas.modelService.nodes.getNodeByConnectorId(t.destination).component.type===f.c.RULE_CHAIN)return g.a;var i=u.ruleChainModel.edges.find(function(e){return e.source===u.inputConnectorId+""});return i&&u.ruleChainCanvas.modelService.edges.delete(i),Object(b.a)(t)}if(t.label)return t.labels||(t.labels=t.label.split(" / ")),Object(b.a)(t);var r=u.ruleChainService.getRuleNodeSupportedLinks(n.component),a=u.ruleChainService.ruleNodeAllowCustomLinks(n.component);return u.enableHotKeys=!1,u.addRuleNodeLink(t,r,a).pipe(Object(y.a)(function(){u.enableHotKeys=!0}),Object(x.b)(function(e){return e?Object(b.a)(e):g.a}))},dropNode:function(e,t){u.addRuleNode(t)}},u.ruleNodeTypesModel={},u.nodeLibCallbacks={nodeCallbacks:{mouseEnter:u.displayLibNodeDescriptionTooltip.bind(u),mouseLeave:u.destroyTooltips.bind(u),mouseDown:u.destroyTooltips.bind(u)}},u.flowchartConstants=m.e,u.rxSubscription=u.route.data.subscribe(function(){u.reset(),u.init()}),u}return Object(i.d)(n,t),Object.defineProperty(n.prototype,"isDirty",{get:function(){return this.isDirtyValue||this.isImport},enumerable:!1,configurable:!0}),n.prototype.ngOnInit=function(){},n.prototype.ngAfterViewInit=function(){var e=this;Object(v.a)(this.ruleNodeSearchInputField.nativeElement,"keyup").pipe(Object(S.a)(150),Object(w.a)(),Object(y.a)(function(){e.updateRuleChainLibrary()})).subscribe(),this.ruleChainCanvas.adjustCanvasSize(!0)},n.prototype.ngOnDestroy=function(){t.prototype.ngOnDestroy.call(this),this.rxSubscription.unsubscribe()},n.prototype.onSearchTextUpdated=function(e){this.ruleNodeSearch=e,this.updateRuleNodesHighlight()},n.prototype.init=function(){if(this.initHotKeys(),this.isImport=this.route.snapshot.data.import,this.ruleChainType=this.route.snapshot.data.ruleChainType,this.isImport){var e=this.itembuffer.getRuleChainImport();this.ruleChain=e.ruleChain,this.ruleChainMetaData=e.resolvedMetadata}else this.ruleChain=this.route.snapshot.data.ruleChain,this.ruleChainMetaData=this.route.snapshot.data.ruleChainMetaData;this.ruleNodeComponents=this.route.snapshot.data.ruleNodeComponents;for(var t=0,n=f.g;t<n.length;t++){var i=n[t];f.f.get(i).special||(this.ruleNodeTypesModel[i]={model:{nodes:[],edges:[]},selectedObjects:[]})}this.updateRuleChainLibrary(),this.createRuleChainModel()},n.prototype.reset=function(){this.selectedObjects=[],this.ruleChainModel.nodes=[],this.ruleChainModel.edges=[],this.ruleNodeTypesModel={},this.ruleChainCanvas&&this.ruleChainCanvas.adjustCanvasSize(!0),this.isEditingRuleNode=!1,this.isEditingRuleNodeLink=!1,this.updateRuleNodesHighlight()},n.prototype.initHotKeys=function(){var e=this;this.hotKeys.length||(this.hotKeys.push(new D.a("ctrl+a",function(t){return!e.enableHotKeys||(t.preventDefault(),e.ruleChainCanvas.modelService.selectAll(),!1)},["INPUT","SELECT","TEXTAREA"],this.translate.instant("rulenode.select-all-objects"))),this.hotKeys.push(new D.a("ctrl+c",function(t){return!e.enableHotKeys||(t.preventDefault(),e.copyRuleNodes(),!1)},["INPUT","SELECT","TEXTAREA"],this.translate.instant("rulenode.copy-selected"))),this.hotKeys.push(new D.a("ctrl+v",function(t){return!e.enableHotKeys||(t.preventDefault(),e.itembuffer.hasRuleNodes()&&e.pasteRuleNodes(),!1)},["INPUT","SELECT","TEXTAREA"],this.translate.instant("action.paste"))),this.hotKeys.push(new D.a("esc",function(t){return!e.enableHotKeys||(t.preventDefault(),t.stopPropagation(),e.ruleChainCanvas.modelService.deselectAll(),!1)},["INPUT","SELECT","TEXTAREA"],this.translate.instant("rulenode.deselect-all-objects"))),this.hotKeys.push(new D.a("ctrl+s",function(t){return!e.enableHotKeys||(t.preventDefault(),e.saveRuleChain(),!1)},["INPUT","SELECT","TEXTAREA"],this.translate.instant("action.apply"))),this.hotKeys.push(new D.a("ctrl+z",function(t){return!e.enableHotKeys||(t.preventDefault(),e.revertRuleChain(),!1)},["INPUT","SELECT","TEXTAREA"],this.translate.instant("action.decline-changes"))),this.hotKeys.push(new D.a("del",function(t){return!e.enableHotKeys||(t.preventDefault(),e.ruleChainCanvas.modelService.deleteSelected(),!1)},["INPUT","SELECT","TEXTAREA"],this.translate.instant("rulenode.delete-selected-objects"))))},n.prototype.updateRuleChainLibrary=function(){var e=this.ruleNodeTypeSearch.toUpperCase(),t=this.ruleNodeComponents.filter(function(t){return t.name.toUpperCase().includes(e)});this.loadRuleChainLibrary(t)},n.prototype.loadRuleChainLibrary=function(e){for(var t=this,n=0,i=Object.keys(this.ruleNodeTypesModel);n<i.length;n++){var r=i[n];this.ruleNodeTypesModel[r].model.nodes.length=0}if(e.forEach(function(e){var n=e.type,i=t.ruleNodeTypesModel[n].model,r=f.f.get(f.c[n]),a=r.icon,o=null;e.configurationDescriptor.nodeDefinition.icon&&(a=e.configurationDescriptor.nodeDefinition.icon),e.configurationDescriptor.nodeDefinition.iconUrl&&(o=e.configurationDescriptor.nodeDefinition.iconUrl);var l={id:"node-lib-"+n+"-"+i.nodes.length,component:e,name:"",nodeClass:r.nodeClass,icon:a,iconUrl:o,x:30,y:10+50*i.nodes.length,connectors:[]};e.configurationDescriptor.nodeDefinition.inEnabled&&l.connectors.push({type:m.e.leftConnectorType,id:2*i.nodes.length+""}),e.configurationDescriptor.nodeDefinition.outEnabled&&l.connectors.push({type:m.e.rightConnectorType,id:2*i.nodes.length+1+""}),i.nodes.push(l)}),this.expansionPanels)for(var a=function(e){var t=o.expansionPanels.find(function(t,n){return n===e});if(t){var n=f.g[e];o.ruleNodeTypesModel[n].model.nodes.length?t.open():t.close()}},o=this,l=0;l<f.g.length;l++)a(l)},n.prototype.createRuleChainModel=function(){var e=this;this.nextNodeID=1,this.nextConnectorID=1,this.selectedObjects=[],this.ruleChainModel.nodes=[],this.ruleChainModel.edges=[],this.inputConnectorId=this.nextConnectorID++,this.ruleChainModel.nodes.push({id:"rule-chain-node-"+this.nextNodeID++,component:p.b,name:"",nodeClass:f.f.get(f.c.INPUT).nodeClass,icon:f.f.get(f.c.INPUT).icon,readonly:!0,x:50,y:150,connectors:[{type:m.e.rightConnectorType,id:this.inputConnectorId+""}]});var t=[];if(this.ruleChainMetaData.nodes.forEach(function(n){var i=e.ruleChainService.getRuleNodeComponentByClazz(e.ruleChainType,n.type),r=f.f.get(i.type),a=r.icon,o=null;i.configurationDescriptor.nodeDefinition.icon&&(a=i.configurationDescriptor.nodeDefinition.icon),i.configurationDescriptor.nodeDefinition.iconUrl&&(o=i.configurationDescriptor.nodeDefinition.iconUrl);var l={id:"rule-chain-node-"+e.nextNodeID++,ruleNodeId:n.id,additionalInfo:n.additionalInfo,configuration:n.configuration,debugMode:n.debugMode,x:Math.round(n.additionalInfo.layoutX),y:Math.round(n.additionalInfo.layoutY),component:i,name:n.name,nodeClass:r.nodeClass,icon:a,iconUrl:o,connectors:[],ruleChainType:e.ruleChainType};i.configurationDescriptor.nodeDefinition.inEnabled&&l.connectors.push({type:m.e.leftConnectorType,id:e.nextConnectorID+++""}),i.configurationDescriptor.nodeDefinition.outEnabled&&l.connectors.push({type:m.e.rightConnectorType,id:e.nextConnectorID+++""}),t.push(l),e.ruleChainModel.nodes.push(l)}),this.ruleChainMetaData.firstNodeIndex>-1){var n=t[this.ruleChainMetaData.firstNodeIndex];if(n){var i=n.connectors.filter(function(e){return e.type===m.e.leftConnectorType});if(i&&i.length){var r={source:this.inputConnectorId+"",destination:i[0].id};this.ruleChainModel.edges.push(r)}}}if(this.ruleChainMetaData.connections){var a={};this.ruleChainMetaData.connections.forEach(function(n){var i=t[n.fromIndex],r=t[n.toIndex];if(i&&r){var o=i.connectors.filter(function(e){return e.type===m.e.rightConnectorType}),l=r.connectors.filter(function(e){return e.type===m.e.leftConnectorType});if(o&&o.length&&l&&l.length){var s=o[0].id,d=l[0].id,c=s+"_"+d,u=a[c];u?(u.label+=" / "+n.type,u.labels.push(n.type)):(u={source:s,destination:d,label:n.type,labels:[n.type]},a[c]=u,e.ruleChainModel.edges.push(u))}}})}if(this.ruleChainMetaData.ruleChainConnections){var o=this.ruleChainMetaData.targetRuleChainsMap,l={},s={};this.ruleChainMetaData.ruleChainConnections.forEach(function(n){var i=o[n.targetRuleChainId.id];if(n.additionalInfo&&n.additionalInfo.ruleChainNodeId){var r=l[n.additionalInfo.ruleChainNodeId];r||(r={id:"rule-chain-node-"+e.nextNodeID++,name:i.name?i.name:"Unresolved",targetRuleChainId:i.name?n.targetRuleChainId.id:null,error:i.name?void 0:e.translate.instant("rulenode.invalid-target-rulechain"),additionalInfo:n.additionalInfo,x:Math.round(n.additionalInfo.layoutX),y:Math.round(n.additionalInfo.layoutY),component:p.c,nodeClass:f.f.get(f.c.RULE_CHAIN).nodeClass,icon:f.f.get(f.c.RULE_CHAIN).icon,connectors:[{type:m.e.leftConnectorType,id:e.nextConnectorID+++""}],ruleChainType:e.ruleChainType},l[n.additionalInfo.ruleChainNodeId]=r,e.ruleChainModel.nodes.push(r));var a=t[n.fromIndex];if(a){var d=a.connectors.filter(function(e){return e.type===m.e.rightConnectorType});if(d&&d.length){var c=d[0].id,u=r.connectors[0].id,h=c+"_"+u,g=s[h];g?(g.label+=" / "+n.type,g.labels.push(n.type)):(g={source:c,destination:u,label:n.type,labels:[n.type]},s[h]=g,e.ruleChainModel.edges.push(g))}}}})}this.ruleChainCanvas&&this.ruleChainCanvas.adjustCanvasSize(!0),this.isDirtyValue=!1,this.updateRuleNodesHighlight(),this.validate()},n.prototype.openRuleChainContextMenu=function(e){if(this.ruleChainCanvas.modelService&&!e.ctrlKey&&!e.metaKey){var t=e.clientX,n=e.clientY,i=this.ruleChainCanvas.modelService.getItemInfoAtPoint(t,n),r=this.prepareContextMenu(i);r.menuItems&&r.menuItems.length>0&&(e.preventDefault(),e.stopPropagation(),this.contextMenuEvent=e,this.ruleChainMenuPosition.x=t+"px",this.ruleChainMenuPosition.y=n+"px",this.ruleChainMenuTrigger.menuData={contextInfo:r},this.ruleChainMenuTrigger.openMenu())}},n.prototype.onRuleChainContextMenuMouseLeave=function(){this.ruleChainMenuTrigger.closeMenu()},n.prototype.prepareContextMenu=function(e){return this.objectsSelected()||!e.node&&!e.edge?this.prepareRuleChainContextMenu():e.node?this.prepareRuleNodeContextMenu(e.node):e.edge?this.prepareEdgeContextMenu(e.edge):void 0},n.prototype.prepareRuleChainContextMenu=function(){var e=this,t={headerClass:"tb-rulechain-header",icon:"settings_ethernet",title:this.ruleChain.name,subtitle:this.translate.instant("rulechain.rulechain"),menuItems:[]};return this.ruleChainCanvas.modelService.nodes.getSelectedNodes().length&&t.menuItems.push({action:function(){e.copyRuleNodes()},enabled:!0,value:"rulenode.copy-selected",icon:"content_copy",shortcut:"M-C"}),t.menuItems.push({action:function(t){e.pasteRuleNodes(t)},enabled:this.itembuffer.hasRuleNodes(),value:"action.paste",icon:"content_paste",shortcut:"M-V"}),t.menuItems.push({divider:!0}),this.objectsSelected()?(t.menuItems.push({action:function(){e.ruleChainCanvas.modelService.deselectAll()},enabled:!0,value:"rulenode.deselect-all",icon:"tab_unselected",shortcut:"Esc"}),t.menuItems.push({action:function(){e.ruleChainCanvas.modelService.deleteSelected()},enabled:!0,value:"rulenode.delete-selected",icon:"clear",shortcut:"Del"})):t.menuItems.push({action:function(){e.ruleChainCanvas.modelService.selectAll()},enabled:!0,value:"rulenode.select-all",icon:"select_all",shortcut:"M-A"}),t.menuItems.push({divider:!0}),t.menuItems.push({action:function(){e.saveRuleChain()},enabled:!(this.isInvalid||!this.isDirty&&!this.isImport),value:"action.apply-changes",icon:"done",shortcut:"M-S"}),t.menuItems.push({action:function(){e.revertRuleChain()},enabled:this.isDirty,value:"action.decline-changes",icon:"close",shortcut:"M-Z"}),t},n.prototype.prepareRuleNodeContextMenu=function(e){var t=this,n={headerClass:e.nodeClass,icon:e.icon,iconUrl:e.iconUrl,title:e.name,subtitle:e.component.name,menuItems:[]};return e.readonly||(n.menuItems.push({action:function(){t.openNodeDetails(e)},enabled:!0,value:"rulenode.details",icon:"menu"}),n.menuItems.push({action:function(){t.copyNode(e)},enabled:!0,value:"action.copy",icon:"content_copy"}),n.menuItems.push({action:function(){t.ruleChainCanvas.modelService.nodes.delete(e)},enabled:!0,value:"action.delete",icon:"clear",shortcut:"M-X"})),n},n.prototype.prepareEdgeContextMenu=function(e){var t=this,n={headerClass:"tb-link-header",icon:"trending_flat",title:e.label,subtitle:this.translate.instant("rulenode.link"),menuItems:[]};return this.ruleChainCanvas.modelService.nodes.getNodeByConnectorId(e.source).component.type!==f.c.INPUT&&n.menuItems.push({action:function(){t.openLinkDetails(e)},enabled:!0,value:"rulenode.details",icon:"menu"}),n.menuItems.push({action:function(){t.ruleChainCanvas.modelService.edges.delete(e)},enabled:!0,value:"action.delete",icon:"clear",shortcut:"M-X"}),n},n.prototype.onModelChanged=function(){this.isDirtyValue=!0,this.validate()},n.prototype.helpLinkIdForRuleNodeType=function(){var e=null;return this.editingRuleNode&&(e=this.editingRuleNode.component),Object(f.d)(e)},n.prototype.openNodeDetails=function(e){var t=this;e.component.type!==f.c.INPUT&&(this.enableHotKeys=!1,this.updateErrorTooltips(!0),this.isEditingRuleNodeLink=!1,this.editingRuleNodeLink=null,this.isEditingRuleNode=!0,this.editingRuleNodeIndex=this.ruleChainModel.nodes.indexOf(e),this.editingRuleNode=Object(C.e)(e,["component"]),setTimeout(function(){t.ruleNodeComponent.ruleNodeFormGroup.markAsPristine()},0))},n.prototype.openLinkDetails=function(e){var t=this,n=this.ruleChainCanvas.modelService.nodes.getNodeByConnectorId(e.source);n.component.type!==f.c.INPUT&&(this.enableHotKeys=!1,this.updateErrorTooltips(!0),this.isEditingRuleNode=!1,this.editingRuleNode=null,this.editingRuleNodeLinkLabels=this.ruleChainService.getRuleNodeSupportedLinks(n.component),this.editingRuleNodeAllowCustomLabels=this.ruleChainService.ruleNodeAllowCustomLinks(n.component),this.isEditingRuleNodeLink=!0,this.editingRuleNodeLinkIndex=this.ruleChainModel.edges.indexOf(e),this.editingRuleNodeLink=Object(C.e)(e),setTimeout(function(){t.ruleNodeLinkComponent.ruleNodeLinkFormGroup.markAsPristine()},0))},n.prototype.copyNode=function(e){this.itembuffer.copyRuleNodes([e],[])},n.prototype.copyRuleNodes=function(){var e=this,t=this.ruleChainCanvas.modelService.nodes.getSelectedNodes(),n=this.ruleChainCanvas.modelService.edges.getSelectedEdges(),i=[];n.forEach(function(n){var r=e.ruleChainCanvas.modelService.nodes.getNodeByConnectorId(n.source),a=e.ruleChainCanvas.modelService.nodes.getNodeByConnectorId(n.destination),o=r.component.type===f.c.INPUT,l=t.indexOf(r),s=t.indexOf(a);if((o||l>-1)&&s>-1){var d={isInputSource:o,fromIndex:l,toIndex:s,label:n.label,labels:n.labels};i.push(d)}}),this.itembuffer.copyRuleNodes(t,i)},n.prototype.pasteRuleNodes=function(t){var n,i,r=this,a=e(this.ruleChainCanvas.modelService.canvasHtmlElement);if(t){var o=a.offset();n=Math.round(t.clientX-o.left),i=Math.round(t.clientY-o.top)}else{var l=a.parent(),s=l.scrollTop();n=l.scrollLeft()+l.width()/2,i=s+l.height()/2}var d=this.itembuffer.pasteRuleNodes(n,i);if(d){this.ruleChainCanvas.modelService.deselectAll();var c=[];d.nodes.forEach(function(e){e.id="rule-chain-node-"+r.nextNodeID++;var t=e.component;t.configurationDescriptor.nodeDefinition.inEnabled&&e.connectors.push({type:m.e.leftConnectorType,id:r.nextConnectorID+++""}),t.configurationDescriptor.nodeDefinition.outEnabled&&e.connectors.push({type:m.e.rightConnectorType,id:r.nextConnectorID+++""}),c.push(e),r.ruleChainModel.nodes.push(e),r.ruleChainCanvas.modelService.nodes.select(e)}),d.connections.forEach(function(e){var t=c[e.fromIndex],n=c[e.toIndex];if((e.isInputSource||t)&&n){var i=void 0,a=void 0;if(e.isInputSource){i=r.inputConnectorId+"";var o=r.ruleChainModel.edges.find(function(e){return e.source===r.inputConnectorId+""});o&&r.ruleChainCanvas.modelService.edges.delete(o)}else{var l=r.ruleChainCanvas.modelService.nodes.getConnectorsByType(t,m.e.rightConnectorType);l&&l.length&&(i=l[0].id)}var s=r.ruleChainCanvas.modelService.nodes.getConnectorsByType(n,m.e.leftConnectorType);if(s&&s.length&&(a=s[0].id),i&&a){var d={source:i,destination:a,label:e.label,labels:e.labels};r.ruleChainModel.edges.push(d),r.ruleChainCanvas.modelService.edges.select(d)}}}),this.updateRuleNodesHighlight(),this.validate(),this.onModelChanged()}},n.prototype.onDetailsDrawerClosed=function(){this.onEditRuleNodeClosed(),this.onEditRuleNodeLinkClosed(),this.enableHotKeys=!0,this.updateErrorTooltips(!1)},n.prototype.onEditRuleNodeClosed=function(){this.editingRuleNode=null,this.isEditingRuleNode=!1},n.prototype.onEditRuleNodeLinkClosed=function(){this.editingRuleNodeLink=null,this.isEditingRuleNodeLink=!1},n.prototype.onRevertRuleNodeEdit=function(){this.ruleNodeComponent.ruleNodeFormGroup.markAsPristine();var e=this.ruleChainModel.nodes[this.editingRuleNodeIndex];this.editingRuleNode=Object(C.e)(e,["component"])},n.prototype.onRevertRuleNodeLinkEdit=function(){this.ruleNodeLinkComponent.ruleNodeLinkFormGroup.markAsPristine();var e=this.ruleChainModel.edges[this.editingRuleNodeLinkIndex];this.editingRuleNodeLink=Object(C.e)(e)},n.prototype.saveRuleNode=function(){this.ruleNodeComponent.validate(),this.ruleNodeComponent.ruleNodeFormGroup.valid&&(this.ruleNodeComponent.ruleNodeFormGroup.markAsPristine(),this.editingRuleNode.error&&delete this.editingRuleNode.error,this.ruleChainModel.nodes[this.editingRuleNodeIndex]=this.editingRuleNode,this.editingRuleNode=Object(C.e)(this.editingRuleNode,["component"]),this.onModelChanged(),this.updateRuleNodesHighlight())},n.prototype.saveRuleNodeLink=function(){this.ruleNodeLinkComponent.ruleNodeLinkFormGroup.markAsPristine(),this.ruleChainModel.edges[this.editingRuleNodeLinkIndex]=this.editingRuleNodeLink,this.editingRuleNodeLink=Object(C.e)(this.editingRuleNodeLink),this.onModelChanged()},n.prototype.typeHeaderMouseEnter=function(e,t){var n=f.f.get(t);this.displayTooltip(e,'<div class="tb-rule-node-tooltip tb-lib-tooltip"><div id="tb-node-content" layout="column"><div class="tb-node-title">'+this.translate.instant(n.name)+'</div><div class="tb-node-details">'+this.translate.instant(n.details)+"</div></div></div>")},n.prototype.displayLibNodeDescriptionTooltip=function(e,t){this.displayTooltip(e,'<div class="tb-rule-node-tooltip tb-lib-tooltip"><div id="tb-node-content" layout="column"><div class="tb-node-title">'+t.component.name+'</div><div class="tb-node-description">'+t.component.configurationDescriptor.nodeDefinition.description+'</div><div class="tb-node-details">'+t.component.configurationDescriptor.nodeDefinition.details+"</div></div></div>")},n.prototype.displayNodeDescriptionTooltip=function(e,t){if(!this.errorTooltips[t.id]){var n,i=void 0,r=void 0;t.component.type===f.c.INPUT?(n=this.translate.instant(f.f.get(f.c.INPUT).name),i=this.translate.instant(f.f.get(f.c.INPUT).details)):(n=t.name,i=this.translate.instant(f.f.get(t.component.type).name)+" - "+t.component.name,t.additionalInfo&&(r=t.additionalInfo.description));var a='<div class="tb-rule-node-tooltip"><div id="tb-node-content" layout="column"><div class="tb-node-title">'+n+'</div><div class="tb-node-description">'+i+"</div>";r&&(a+='<div class="tb-node-details">'+r+"</div>"),a+="</div></div>",this.displayTooltip(e,a)}},n.prototype.destroyTooltips=function(){this.tooltipTimeout&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=null),e.tooltipster.instances().forEach(function(e){e.isErrorTooltip||e.destroy()})},n.prototype.updateRuleNodesHighlight=function(){for(var e=0,t=this.ruleChainModel.nodes;e<t.length;e++){t[e].highlighted=!1}if(this.ruleNodeSearch){var n=this.ruleNodeSearch.toUpperCase(),i=this.ruleChainModel.nodes.filter(function(e){return e.name.toUpperCase().includes(n)});if(i)for(var r=0,a=i;r<a.length;r++){a[r].highlighted=!0}}this.ruleChainCanvas&&this.ruleChainCanvas.modelService.detectChanges()},n.prototype.objectsSelected=function(){return this.ruleChainCanvas.modelService.nodes.getSelectedNodes().length>0||this.ruleChainCanvas.modelService.edges.getSelectedEdges().length>0},n.prototype.deleteSelected=function(){this.ruleChainCanvas.modelService.deleteSelected()},n.prototype.isDebugModeEnabled=function(){return void 0!==this.ruleChainModel.nodes.find(function(e){return e.debugMode})},n.prototype.resetDebugModeInAllNodes=function(){var e=!1;this.ruleChainModel.nodes.forEach(function(t){t.component.type!==f.c.INPUT&&t.component.type!==f.c.RULE_CHAIN&&(e=e||t.debugMode,t.debugMode=!1)}),e&&this.onModelChanged()},n.prototype.validate=function(){var e=this;setTimeout(function(){e.isInvalid=!1,e.ruleChainModel.nodes.forEach(function(t){t.error&&(e.isInvalid=!0),e.updateNodeErrorTooltip(t)})},0)},n.prototype.saveRuleChain=function(){var e=this;(this.isImport?this.ruleChainService.saveRuleChain(this.ruleChain):Object(b.a)(this.ruleChain)).subscribe(function(t){e.ruleChain=t;var n={ruleChainId:e.ruleChain.id,nodes:[],connections:[],ruleChainConnections:[]},i=[];e.ruleChainModel.nodes.forEach(function(e){if(e.component.type!==f.c.INPUT&&e.component.type!==f.c.RULE_CHAIN){var t={id:e.ruleNodeId,type:e.component.clazz,name:e.name,configuration:e.configuration,additionalInfo:e.additionalInfo?e.additionalInfo:{},debugMode:e.debugMode};t.additionalInfo.layoutX=Math.round(e.x),t.additionalInfo.layoutY=Math.round(e.y),n.nodes.push(t),i.push(e)}});var r=e.ruleChainModel.edges.find(function(t){return t.source===e.inputConnectorId+""});if(r){var a=e.ruleChainCanvas.modelService.nodes.getNodeByConnectorId(r.destination);n.firstNodeIndex=i.indexOf(a)}e.ruleChainModel.edges.forEach(function(t){var r=e.ruleChainCanvas.modelService.nodes.getNodeByConnectorId(t.source),a=e.ruleChainCanvas.modelService.nodes.getNodeByConnectorId(t.destination);if(r.component.type!==f.c.INPUT){var o=i.indexOf(r);if(a.component.type===f.c.RULE_CHAIN){var l={fromIndex:o,targetRuleChainId:{entityType:k.b.RULE_CHAIN,id:a.targetRuleChainId},additionalInfo:a.additionalInfo?a.additionalInfo:{}};l.additionalInfo.layoutX=Math.round(a.x),l.additionalInfo.layoutY=Math.round(a.y),l.additionalInfo.ruleChainNodeId=a.id,t.labels.forEach(function(e){var t=Object(C.e)(l);t.type=e,n.ruleChainConnections.push(t)})}else{var s={fromIndex:o,toIndex:i.indexOf(a)};t.labels.forEach(function(e){var t=Object(C.e)(s);t.type=e,n.connections.push(t)})}}}),e.ruleChainService.saveAndGetResolvedRuleChainMetadata(n).subscribe(function(t){e.ruleChainMetaData=t,e.isImport?(e.isDirtyValue=!1,e.isImport=!1,e.ruleChainType!==p.a.EDGE?e.router.navigateByUrl("ruleChains/"+e.ruleChain.id.id):e.router.navigateByUrl("edgeManagement/ruleChains/"+e.ruleChain.id.id)):e.createRuleChainModel()})})},n.prototype.revertRuleChain=function(){this.createRuleChainModel()},n.prototype.addRuleNode=function(e){var t=this;e.configuration=Object(C.e)(e.component.configurationDescriptor.nodeDefinition.defaultConfiguration);var n=this.ruleChain.id?this.ruleChain.id.id:null;this.enableHotKeys=!1;var i=this.ruleChainType;this.dialog.open(Ie,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{ruleNode:e,ruleChainId:n,ruleChainType:i}}).afterClosed().subscribe(function(e){e&&(e.id="rule-chain-node-"+t.nextNodeID++,e.connectors=[],e.component.configurationDescriptor.nodeDefinition.inEnabled&&e.connectors.push({id:t.nextConnectorID+++"",type:m.e.leftConnectorType}),e.component.configurationDescriptor.nodeDefinition.outEnabled&&e.connectors.push({id:t.nextConnectorID+++"",type:m.e.rightConnectorType}),t.ruleChainModel.nodes.push(e),t.onModelChanged(),t.updateRuleNodesHighlight()),t.enableHotKeys=!0})},n.prototype.addRuleNodeLink=function(e,t,n){return this.dialog.open(Ee,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{link:e,labels:t,allowCustomLabels:n}}).afterClosed()},n.prototype.updateNodeErrorTooltip=function(t){if(t.error){var n=e("#"+t.id),i=this.errorTooltips[t.id];if(!i||!n.hasClass("tooltipstered")){n.tooltipster({theme:"tooltipster-shadow",delay:0,animationDuration:0,trigger:"custom",triggerOpen:{click:!1,tap:!1},triggerClose:{click:!1,tap:!1,scroll:!1},side:"top",trackOrigin:!0});var r='<div class="tb-rule-node-error-tooltip"><div id="tooltip-content" layout="column"><div class="tb-node-details">'+t.error+"</div></div></div>",a=e(r);(i=n.tooltipster("instance")).isErrorTooltip=!0,i.content(a),this.errorTooltips[t.id]=i}setTimeout(function(){i.open()},0)}else{if(this.errorTooltips[t.id])this.errorTooltips[t.id].destroy(),delete this.errorTooltips[t.id]}},n.prototype.updateErrorTooltips=function(e){for(var t=0,n=Object.keys(this.errorTooltips);t<n.length;t++){var i=n[t],r=this.errorTooltips[i];e?r.close():r.open()}},n.prototype.displayTooltip=function(t,n){this.destroyTooltips(),this.tooltipTimeout=setTimeout(function(){var i=e(t.target);i.tooltipster({theme:"tooltipster-shadow",delay:100,trigger:"custom",triggerOpen:{click:!1,tap:!1},triggerClose:{click:!0,tap:!0,scroll:!0},side:"right",distance:12,trackOrigin:!0});var r=e(n),a=i.tooltipster("instance");a.content(r),a.open()},500)},n.\u0275fac=function(e){return new(e||n)(r["\u0275\u0275directiveInject"](F.Store),r["\u0275\u0275directiveInject"](P.ActivatedRoute),r["\u0275\u0275directiveInject"](P.Router),r["\u0275\u0275directiveInject"](h.a),r["\u0275\u0275directiveInject"](u.a),r["\u0275\u0275directiveInject"](_.TranslateService),r["\u0275\u0275directiveInject"](M.a),r["\u0275\u0275directiveInject"](s.MatDialog),r["\u0275\u0275directiveInject"](c.a),r["\u0275\u0275directiveInject"](o.FormBuilder))},n.\u0275cmp=r["\u0275\u0275defineComponent"]({type:n,selectors:[["tb-rulechain-page"]],viewQuery:function(e,t){if(1&e&&(r["\u0275\u0275viewQuery"](te,1),r["\u0275\u0275viewQuery"](ne,3),r["\u0275\u0275viewQuery"](ie,3),r["\u0275\u0275viewQuery"](re,1),r["\u0275\u0275viewQuery"](ae,1),r["\u0275\u0275viewQuery"](oe,1,d.MatExpansionPanel)),2&e){var n=void 0;r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.ruleNodeSearchInputField=n.first),r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.ruleChainCanvas=n.first),r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.ruleChainMenuTrigger=n.first),r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.ruleNodeComponent=n.first),r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.ruleNodeLinkComponent=n.first),r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.expansionPanels=n)}},hostVars:4,hostBindings:function(e,t){2&e&&r["\u0275\u0275styleProp"]("width",t.width)("height",t.height)},features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:70,vars:71,consts:[["fxFlex","","tb-fullscreen","","tb-hotkeys","","fxLayout","column",1,"tb-rulechain",3,"fullscreen","hotkeys","cheatSheet"],["cheatSheetComponent",""],["fxFlex","","fxLayout","column",1,"tb-rulechain-container"],["fxFlex","","fxLayout","row",1,"tb-rulechain-layout"],["fxLayout","row",1,"tb-header-buttons","tb-library-open",3,"fxShow"],["mat-button","","mat-icon-button","","color","accent","matTooltipPosition","above",1,"tb-btn-header","tb-btn-open-library","mat-fab",3,"matTooltip","click"],[2,"width","100%","height","100%"],["disableClose","true","mode","side","position","start","fxLayout","column",1,"tb-rulechain-library","mat-elevation-z4",3,"opened"],["color","accent",1,"tb-dark"],[1,"mat-toolbar-tools"],["mat-button","","mat-icon-button","","matTooltipPosition","above",1,"tb-small",3,"matTooltip"],["fxFlex","","floatLabel","always"],["matInput","",3,"ngModel","placeholder","ngModelChange"],["ruleNodeSearchInput",""],["mat-button","","mat-icon-button","","matTooltipPosition","above",1,"tb-small",3,"fxShow","matTooltip","click"],["mat-button","","mat-icon-button","","matTooltipPosition","above",1,"tb-small",3,"matTooltip","click"],[1,"tb-rulechain-library-panel-group"],["class","mat-elevation-z2",3,"expanded",4,"ngFor","ngForOf"],["mode","over","position","end",1,"tb-details-drawer",3,"opened","closed"],["fxFlex","",3,"headerTitle","headerSubtitle","isReadOnly","isAlwaysEdit","theForm","closeDetails","toggleDetailsEditMode","applyDetails",4,"ngIf"],[1,"tb-rulechain-graph-content"],["mat-button","","type","button","mat-icon-button","","matTooltipPosition","above",1,"tb-fullscreen-button",3,"matTooltip","click"],[1,"tb-absolute-fill","tb-rulechain-graph",3,"contextmenu"],[2,"visibility","hidden","position","fixed",3,"matMenuTriggerFor"],["ruleChainMenuTrigger","matMenuTrigger"],[1,"tb-rule-chain-context-menu",3,"overlapTrigger"],["ruleChainMenu","matMenu"],["matMenuContent",""],["id","tb-rulchain-canvas","fitModelSizeByDefault","false",3,"model","selectedObjects","edgeStyle","automaticResize","nodeWidth","nodeHeight","dragAnimation","userCallbacks","modelChanged"],["ruleChainCanvas",""],["fxLayout","row","fxLayoutAlign","start end",1,"layout-wrap","tb-footer-buttons"],["mat-fab","","color","accent","matTooltipPosition","above",1,"tb-btn-footer",3,"disabled","ngClass","matTooltip","click"],["mat-fab","","color","accent","matTooltipPosition","above",1,"tb-btn-footer",3,"disabled","matTooltip","click"],[1,"mat-elevation-z2",3,"expanded"],["ruleNodeTypeExpansionPanels",""],["expandedHeight","48px",3,"mouseenter","mouseleave"],["translate","",1,"tb-panel-title"],["fitModelSizeByDefault","",3,"id","model","selectedObjects","automaticResize","userCallbacks","nodeWidth","nodeHeight","dropTargetId"],["fxFlex","",3,"headerTitle","headerSubtitle","isReadOnly","isAlwaysEdit","theForm","closeDetails","toggleDetailsEditMode","applyDetails"],[1,"details-buttons"],[3,"tb-help"],["fxFlex","",1,"tb-absolute-fill","tb-rulenode-details",3,"selectedIndex","selectedIndexChange"],[3,"label"],[3,"ruleNode","ruleChainId","ruleChainType","isEdit","isReadOnly"],["tbRuleNode",""],[3,"label",4,"ngIf"],[1,"tb-rule-node-help"],["id","tb-node-content","fxLayout","column",1,"mat-padding"],[1,"tb-node-title"],[1,"tb-node-description"],[1,"tb-node-details",3,"innerHtml"],["eventsTab","matTab"],[3,"debugEventTypes","defaultEventType","active","tenantId","entityId"],["fxFlex","",3,"ngModel","allowedLabels","allowCustom","ngModelChange"],["tbRuleNodeLink",""],[1,"tb-rule-chain-context-menu-container",3,"mouseleave"],[4,"ngIf"],[3,"src",4,"ngIf"],["fxFlex",""],[1,"tb-context-menu-title"],[1,"tb-context-menu-subtitle"],[4,"ngFor","ngForOf"],[3,"src"],["mat-menu-item","",3,"disabled","click",4,"ngIf"],["mat-menu-item","",3,"disabled","click"],["class","tb-alt-text",4,"ngIf"],["translate",""],[1,"tb-alt-text"]],template:function(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275element"](1,"tb-hotkeys-cheatsheet",null,1),r["\u0275\u0275elementStart"](3,"section",2),r["\u0275\u0275elementStart"](4,"div",3),r["\u0275\u0275elementStart"](5,"section",4),r["\u0275\u0275elementStart"](6,"button",5),r["\u0275\u0275listener"]("click",function(){return t.isLibraryOpen=!0}),r["\u0275\u0275pipe"](7,"translate"),r["\u0275\u0275elementStart"](8,"mat-icon"),r["\u0275\u0275text"](9,"menu"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"mat-drawer-container",6),r["\u0275\u0275elementStart"](11,"mat-drawer",7),r["\u0275\u0275elementStart"](12,"mat-toolbar",8),r["\u0275\u0275elementStart"](13,"div",9),r["\u0275\u0275elementStart"](14,"button",10),r["\u0275\u0275pipe"](15,"translate"),r["\u0275\u0275elementStart"](16,"mat-icon"),r["\u0275\u0275text"](17,"search"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"mat-form-field",11),r["\u0275\u0275element"](19,"mat-label"),r["\u0275\u0275elementStart"](20,"input",12,13),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.ruleNodeTypeSearch=e}),r["\u0275\u0275pipe"](22,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](23,"button",14),r["\u0275\u0275listener"]("click",function(){return t.ruleNodeTypeSearch="",t.updateRuleChainLibrary()}),r["\u0275\u0275pipe"](24,"translate"),r["\u0275\u0275elementStart"](25,"mat-icon"),r["\u0275\u0275text"](26,"close"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](27,"button",15),r["\u0275\u0275listener"]("click",function(){return t.isLibraryOpen=!1}),r["\u0275\u0275pipe"](28,"translate"),r["\u0275\u0275elementStart"](29,"mat-icon"),r["\u0275\u0275text"](30,"chevron_left"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](31,"div",16),r["\u0275\u0275template"](32,le,9,11,"mat-expansion-panel",17),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](33,"mat-drawer",18),r["\u0275\u0275listener"]("closed",function(){return t.onDetailsDrawerClosed()}),r["\u0275\u0275template"](34,ce,23,24,"tb-details-panel",19),r["\u0275\u0275template"](35,ue,6,11,"tb-details-panel",19),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](36,"mat-drawer-content",20),r["\u0275\u0275elementStart"](37,"button",21),r["\u0275\u0275listener"]("click",function(){return t.isFullscreen=!t.isFullscreen}),r["\u0275\u0275pipe"](38,"translate"),r["\u0275\u0275elementStart"](39,"mat-icon"),r["\u0275\u0275text"](40),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](41,"div",22),r["\u0275\u0275listener"]("contextmenu",function(e){return t.openRuleChainContextMenu(e)}),r["\u0275\u0275element"](42,"div",23,24),r["\u0275\u0275elementStart"](44,"mat-menu",25,26),r["\u0275\u0275template"](46,ye,10,8,"ng-template",27),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](47,"fc-canvas",28,29),r["\u0275\u0275listener"]("modelChanged",function(){return t.onModelChanged()}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](49,"section",30),r["\u0275\u0275elementStart"](50,"button",31),r["\u0275\u0275listener"]("click",function(){return t.deleteSelected()}),r["\u0275\u0275pipe"](51,"async"),r["\u0275\u0275pipe"](52,"translate"),r["\u0275\u0275elementStart"](53,"mat-icon"),r["\u0275\u0275text"](54,"delete"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](55,"button",32),r["\u0275\u0275listener"]("click",function(){return t.resetDebugModeInAllNodes()}),r["\u0275\u0275pipe"](56,"async"),r["\u0275\u0275pipe"](57,"translate"),r["\u0275\u0275elementStart"](58,"mat-icon"),r["\u0275\u0275text"](59,"bug_report"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](60,"button",32),r["\u0275\u0275listener"]("click",function(){return t.saveRuleChain()}),r["\u0275\u0275pipe"](61,"async"),r["\u0275\u0275pipe"](62,"translate"),r["\u0275\u0275elementStart"](63,"mat-icon"),r["\u0275\u0275text"](64,"done"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](65,"button",32),r["\u0275\u0275listener"]("click",function(){return t.revertRuleChain()}),r["\u0275\u0275pipe"](66,"async"),r["\u0275\u0275pipe"](67,"translate"),r["\u0275\u0275elementStart"](68,"mat-icon"),r["\u0275\u0275text"](69,"close"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](2),i=r["\u0275\u0275reference"](45);r["\u0275\u0275property"]("fullscreen",t.isFullscreen)("hotkeys",t.hotKeys)("cheatSheet",n),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("fxShow",!t.isLibraryOpen),r["\u0275\u0275advance"](1),r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](7,41,"rulenode.open-node-library")),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("opened",t.isLibraryOpen),r["\u0275\u0275advance"](3),r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](15,43,"rulenode.search")),r["\u0275\u0275advance"](6),r["\u0275\u0275propertyInterpolate"]("placeholder",r["\u0275\u0275pipeBind1"](22,45,"rulenode.search")),r["\u0275\u0275property"]("ngModel",t.ruleNodeTypeSearch),r["\u0275\u0275advance"](3),r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](24,47,"action.clear-search")),r["\u0275\u0275property"]("fxShow",""!==t.ruleNodeTypeSearch),r["\u0275\u0275advance"](4),r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](28,49,"action.close")),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngForOf",t.ruleNodeTypesLibraryArray),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("opened",t.isEditingRuleNode||t.isEditingRuleNodeLink),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.editingRuleNode),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.editingRuleNodeLink),r["\u0275\u0275advance"](2),r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](38,51,t.isFullscreen?"fullscreen.exit":"fullscreen.expand")),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](t.isFullscreen?"fullscreen_exit":"fullscreen"),r["\u0275\u0275advance"](2),r["\u0275\u0275styleProp"]("left",t.ruleChainMenuPosition.x)("top",t.ruleChainMenuPosition.y),r["\u0275\u0275property"]("matMenuTriggerFor",i),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("overlapTrigger",!0),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("model",t.ruleChainModel)("selectedObjects",t.selectedObjects)("edgeStyle",t.flowchartConstants.curvedStyle)("automaticResize",!0)("nodeWidth",170)("nodeHeight",50)("dragAnimation",t.flowchartConstants.dragAnimationRepaint)("userCallbacks",t.editCallbacks),r["\u0275\u0275advance"](3),r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](52,55,"rulenode.delete-selected-objects")),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](51,53,t.isLoading$))("ngClass",r["\u0275\u0275pureFunction1"](69,xe,!t.objectsSelected())),r["\u0275\u0275advance"](5),r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](57,59,"rulenode.reset-debug-mode")),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](56,57,t.isLoading$)||!t.isDebugModeEnabled()),r["\u0275\u0275advance"](5),r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](62,63,"action.apply-changes")),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](61,61,t.isLoading$)||t.isInvalid||!t.isDirtyValue&&!t.isImport),r["\u0275\u0275advance"](5),r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](67,67,"action.decline-changes")),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](66,65,t.isLoading$)||!t.isDirtyValue)}},directives:[N.b,L.a,O.a,N.f,D.c,B.a,R.d,j.MatButton,V.MatTooltip,z.MatIcon,G.MatDrawerContainer,G.MatDrawer,W.MatToolbar,q.MatFormField,q.MatLabel,H.MatInput,o.DefaultValueAccessor,o.NgControlStatus,o.NgModel,U.NgForOf,U.NgIf,G.MatDrawerContent,$.MatMenuTrigger,$.MatMenu,$.MatMenuContent,m.f,N.e,U.NgClass,R.b,d.MatExpansionPanel,d.MatExpansionPanelHeader,d.MatExpansionPanelTitle,_.TranslateDirective,K.a,Y.a,J.MatTabGroup,J.MatTab,E.a,X.a,I.a,Q.MatDivider,$.MatMenuItem],pipes:[_.TranslatePipe,U.AsyncPipe,Z.a],styles:[".tb-rulechain{width:100%;height:100%}.tb-rulechain .mat-tab-group.tb-rulenode-details>.mat-tab-body-wrapper{position:absolute;top:49px;left:0;right:0;bottom:0}.tb-rulechain .mat-tab-group.tb-rulenode-details>.mat-tab-header .mat-tab-label{min-width:40px}.tb-rulechain button.mat-button.mat-icon-button.tb-fullscreen-button{position:absolute;top:10px;right:10px;background:#ccc;color:#666;opacity:.85;margin:0 6px;z-index:2}.tb-rulechain section.tb-header-buttons.tb-library-open{position:absolute;top:0;left:0;z-index:2;pointer-events:none}.tb-rulechain section.tb-header-buttons.tb-library-open .mat-fab .mat-button-wrapper{padding:0}.tb-rulechain section.tb-header-buttons.tb-library-open .mat-button.tb-btn-open-library{top:0;left:0;width:36px;height:36px;margin:4px 0 0 4px;line-height:36px;opacity:.5}.tb-rulechain .tb-rulechain-library{z-index:1;width:250px;min-width:250px}.tb-rulechain .tb-rulechain-library .mat-toolbar{height:48px;min-height:48px;padding:0}.tb-rulechain .tb-rulechain-library .mat-toolbar .mat-toolbar-tools{height:48px;padding:0 6px;font-size:14px}.tb-rulechain .tb-rulechain-library .mat-toolbar .mat-toolbar-tools .mat-form-field .mat-form-field-infix{width:auto}.tb-rulechain .tb-rulechain-library .mat-toolbar .mat-toolbar-tools .mat-button.mat-icon-button{margin:0}.tb-rulechain .tb-rulechain-library .mat-toolbar .mat-toolbar-tools .mat-button.mat-icon-button.tb-small{width:32px;height:32px;min-height:32px;padding:6px;line-height:20px}.tb-rulechain .tb-rulechain-library .mat-toolbar .mat-toolbar-tools .mat-button.mat-icon-button.tb-small mat-icon{width:20px;min-width:20px;height:20px;min-height:20px;font-size:20px;line-height:20px}.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group{overflow-x:hidden;overflow-y:auto}.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .mat-expansion-panel{border-radius:0}.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .mat-expansion-panel:last-child{margin-bottom:5px}.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .mat-expansion-panel .mat-expansion-panel-header{background:#e6e6e6}.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .mat-expansion-panel .mat-expansion-panel-header:hover{background:#dadada}.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .mat-expansion-panel .mat-expansion-panel-header .mat-expansion-panel-header-title{line-height:48px;height:48px;overflow:hidden}.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .mat-expansion-panel .mat-expansion-panel-header .mat-expansion-panel-header-title .mat-icon{min-width:24px;margin:auto 8px auto 0}.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .mat-expansion-panel .mat-expansion-panel-header .mat-expansion-panel-header-title .tb-panel-title{min-width:130px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .mat-expansion-panel.mat-expanded .mat-expansion-panel-header{border-bottom:1px solid;border-color:#909090}.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .mat-expansion-panel-body{padding:0}.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .fc-canvas{background:#f9f9f9}.tb-rulechain .mat-drawer-content.tb-rulechain-graph-content{overflow:hidden}.tb-rulechain .mat-drawer-content.tb-rulechain-graph-content .tb-rulechain-graph{z-index:0;overflow:auto}.tb-rulechain .fc-canvas .fc-node{border-radius:8px}.tb-rulechain .fc-canvas .fc-node.fc-selected:not(.fc-edit){margin:-3px;border:3px solid red}.tb-rulechain .fc-canvas .fc-edit .fc-nodedelete,.tb-rulechain .fc-canvas .fc-edit .fc-nodeedit{box-sizing:content-box;border:2px solid #fff;background:#f83e05;outline:none}.tb-rulechain .fc-canvas .fc-nodeopen{display:block;position:absolute;top:11px;right:-12px;border:1px solid #fff;border-radius:4px;line-height:18px;height:22px;width:22px;background:#886cb1;color:#fff;text-align:center;cursor:pointer;box-sizing:border-box}.tb-rulechain .fc-canvas .fc-nodeopen mat-icon{width:16px;min-width:16px;height:16px;min-height:16px;font-size:16px}.tb-rulechain .fc-canvas .fc-nodeopen:hover{background-color:#4e2d7e}.tb-rulechain .fc-canvas .fc-arrow-marker polygon{fill:grey;stroke:grey}.tb-rulechain .fc-canvas .fc-arrow-marker-selected polygon{fill:red;stroke:red}.tb-rulechain .fc-canvas .fc-edge{outline:none;stroke:grey}.tb-rulechain .fc-canvas .fc-edge.fc-selected{stroke:red}.tb-rulechain .fc-canvas .fc-edge.fc-hover{stroke:grey}.tb-rulechain .fc-canvas .edge-endpoint{fill:grey}.tb-rulechain .fc-canvas .fc-edge-label{opacity:1!important}.tb-rulechain .fc-canvas .fc-edge-label:focus{outline:0}.tb-rulechain .fc-canvas .fc-edge-label.fc-selected .fc-edge-label-text span{color:#fff!important;background-color:red!important;border:solid red!important}.tb-rulechain .fc-canvas .fc-edge-label .fc-edge-label-text{font-size:14px!important;font-weight:600!important}.tb-rulechain .fc-canvas .fc-edge-label .fc-edge-label-text span{background-color:#fff!important;color:#003a79!important;border:2px solid #003a79!important}.tb-rule-node-help,.tb-rule-node-tooltip{color:#333}.tb-rule-node-tooltip{max-width:300px;font-size:14px}.tb-rule-node-tooltip.tb-lib-tooltip{width:300px}.tb-rule-node-help{font-size:16px}.tb-rule-node-error-tooltip{font-size:16px;color:#ea0d0d}.tb-rule-node-error-tooltip #tb-node-content .tb-node-title,.tb-rule-node-help #tb-node-content .tb-node-title,.tb-rule-node-tooltip #tb-node-content .tb-node-title{font-weight:600}.tb-rule-node-error-tooltip #tb-node-content .tb-node-description,.tb-rule-node-help #tb-node-content .tb-node-description,.tb-rule-node-tooltip #tb-node-content .tb-node-description{font-style:italic;color:#555}.tb-rule-node-error-tooltip #tb-node-content .tb-node-details,.tb-rule-node-help #tb-node-content .tb-node-details,.tb-rule-node-tooltip #tb-node-content .tb-node-details{padding-top:10px;padding-bottom:10px}.tb-rule-node-error-tooltip #tb-node-content code,.tb-rule-node-help #tb-node-content code,.tb-rule-node-tooltip #tb-node-content code{padding:0 3px 2px;margin:1px;font-size:12px;color:#ad1625;white-space:nowrap;background-color:#f7f7f9;border:1px solid #e1e1e8;border-radius:2px}.tb-rule-chain-context-menu{min-width:256px;max-height:404px;border-radius:8px;margin-left:-20px}.tb-rule-chain-context-menu.mat-menu-below{margin-top:-60px}.tb-rule-chain-context-menu .mat-menu-content{padding:0;display:flex;flex-direction:column}.tb-rule-chain-context-menu .mat-menu-content .tb-rule-chain-context-menu-container{pointer-events:auto;padding:0 0 8px;display:flex;flex-direction:column;overflow-y:auto}.tb-rule-chain-context-menu .tb-context-menu-header{display:flex;box-sizing:content-box;flex-direction:row;height:36px;min-height:36px;padding:8px 5px 5px;font-size:14px}.tb-rule-chain-context-menu .tb-context-menu-header.tb-filter-type{background-color:#f1e861}.tb-rule-chain-context-menu .tb-context-menu-header.tb-enrichment-type{background-color:#cdf14e}.tb-rule-chain-context-menu .tb-context-menu-header.tb-transformation-type{background-color:#79cef1}.tb-rule-chain-context-menu .tb-context-menu-header.tb-action-type{background-color:#f1928f}.tb-rule-chain-context-menu .tb-context-menu-header.tb-external-type{background-color:#fbc766}.tb-rule-chain-context-menu .tb-context-menu-header.tb-rule-chain-type{background-color:#d6c4f1}.tb-rule-chain-context-menu .tb-context-menu-header.tb-unknown-type{background-color:#f16c29}.tb-rule-chain-context-menu .tb-context-menu-header.tb-link-header,.tb-rule-chain-context-menu .tb-context-menu-header.tb-rulechain-header{background-color:#aac7e4}.tb-rule-chain-context-menu .tb-context-menu-header .mat-icon{padding-right:10px;padding-left:2px;margin:auto}.tb-rule-chain-context-menu .tb-context-menu-header .tb-context-menu-title{font-weight:500}.tb-rule-chain-context-menu .tb-context-menu-header .tb-context-menu-subtitle{font-size:12px}"],encapsulation:2}),n}(a.a);0,void 0;var Ee=function(e){function t(t,n,i,r,a,l){var s=e.call(this,t,n,a)||this;return s.store=t,s.router=n,s.data=i,s.errorStateMatcher=r,s.dialogRef=a,s.fb=l,s.submitted=!1,s.link=s.data.link,s.labels=s.data.labels,s.allowCustomLabels=s.data.allowCustomLabels,s.ruleNodeLinkFormGroup=s.fb.group({link:[Object(C.e)(s.link),[o.Validators.required]]}),s}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.add=function(){this.submitted=!0;var e=this.ruleNodeLinkFormGroup.get("link").value;this.link=Object(i.a)(Object(i.a)({},this.link),e),this.dialogRef.close(this.link)},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](F.Store),r["\u0275\u0275directiveInject"](P.Router),r["\u0275\u0275directiveInject"](s.MAT_DIALOG_DATA),r["\u0275\u0275directiveInject"](l.ErrorStateMatcher,4),r["\u0275\u0275directiveInject"](s.MatDialogRef),r["\u0275\u0275directiveInject"](o.FormBuilder))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-add-rule-node-link-dialog"]],features:[r["\u0275\u0275ProvidersFeature"]([{provide:l.ErrorStateMatcher,useExisting:t}]),r["\u0275\u0275InheritDefinitionFeature"]],decls:24,vars:22,consts:[[2,"width","480px",3,"formGroup","ngSubmit"],["color","accent"],["translate",""],["fxFlex",""],[3,"tb-help"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["required","","formControlName","link",3,"allowedLabels","allowCustom"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"form",0),r["\u0275\u0275listener"]("ngSubmit",function(){return t.add()}),r["\u0275\u0275elementStart"](1,"mat-toolbar",1),r["\u0275\u0275elementStart"](2,"h2",2),r["\u0275\u0275text"](3,"rulenode.add-link"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](4,"span",3),r["\u0275\u0275element"](5,"div",4),r["\u0275\u0275elementStart"](6,"button",5),r["\u0275\u0275listener"]("click",function(){return t.cancel()}),r["\u0275\u0275elementStart"](7,"mat-icon",6),r["\u0275\u0275text"](8,"close"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](9,Se,1,0,"mat-progress-bar",7),r["\u0275\u0275pipe"](10,"async"),r["\u0275\u0275elementStart"](11,"div",8),r["\u0275\u0275elementStart"](12,"fieldset",9),r["\u0275\u0275pipe"](13,"async"),r["\u0275\u0275element"](14,"tb-rule-node-link",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"div",11),r["\u0275\u0275elementStart"](16,"button",12),r["\u0275\u0275listener"]("click",function(){return t.cancel()}),r["\u0275\u0275pipe"](17,"async"),r["\u0275\u0275text"](18),r["\u0275\u0275pipe"](19,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"button",13),r["\u0275\u0275pipe"](21,"async"),r["\u0275\u0275text"](22),r["\u0275\u0275pipe"](23,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275property"]("formGroup",t.ruleNodeLinkFormGroup),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("tb-help","ruleEngine"),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](10,10,t.isLoading$)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](13,12,t.isLoading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("allowedLabels",t.labels)("allowCustom",t.allowCustomLabels),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](17,14,t.isLoading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](19,16,"action.cancel")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](21,18,t.isLoading$)||t.ruleNodeLinkFormGroup.invalid||!t.ruleNodeLinkFormGroup.dirty),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](23,20,"action.add")," "))},directives:[o["\u0275angular_packages_forms_forms_ba"],o.NgControlStatusGroup,o.FormGroupDirective,W.MatToolbar,_.TranslateDirective,N.b,Y.a,j.MatButton,z.MatIcon,U.NgIf,s.MatDialogContent,I.a,o.RequiredValidator,o.NgControlStatus,o.FormControlName,s.MatDialogActions,N.e,ee.MatProgressBar],pipes:[U.AsyncPipe,_.TranslatePipe],styles:["[_nghost-%COMP%]     tb-rule-node-link form{overflow:hidden!important}"]}),t}(T.a);0,void 0;var Ie=function(e){function t(t,n,i,r,a){var o=e.call(this,t,n,a)||this;return o.store=t,o.router=n,o.data=i,o.errorStateMatcher=r,o.dialogRef=a,o.submitted=!1,o.ruleNode=o.data.ruleNode,o.ruleChainId=o.data.ruleChainId,o.ruleChainType=o.data.ruleChainType,o}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.helpLinkIdForRuleNodeType=function(){return Object(f.d)(this.ruleNode.component)},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.add=function(){this.submitted=!0,this.ruleNodeDetailsComponent.validate(),this.ruleNodeDetailsComponent.ruleNodeFormGroup.valid&&this.dialogRef.close(this.ruleNode)},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](F.Store),r["\u0275\u0275directiveInject"](P.Router),r["\u0275\u0275directiveInject"](s.MAT_DIALOG_DATA),r["\u0275\u0275directiveInject"](l.ErrorStateMatcher,4),r["\u0275\u0275directiveInject"](s.MatDialogRef))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-add-rule-node-dialog"]],viewQuery:function(e,t){if(1&e&&r["\u0275\u0275viewQuery"](re,3),2&e){var n;r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.ruleNodeDetailsComponent=n.first)}},features:[r["\u0275\u0275ProvidersFeature"]([{provide:l.ErrorStateMatcher,useExisting:t}]),r["\u0275\u0275InheritDefinitionFeature"]],decls:26,vars:26,consts:[[2,"min-width","650px",3,"ngSubmit"],["color","accent"],["translate",""],["fxFlex",""],[3,"tb-help"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],[3,"ruleNode","ruleChainId","ruleChainType","isEdit","isAdd","isReadOnly"],["tbRuleNode",""],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"]],template:function(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"form",0),r["\u0275\u0275listener"]("ngSubmit",function(){return t.add()}),r["\u0275\u0275elementStart"](1,"mat-toolbar",1),r["\u0275\u0275elementStart"](2,"h2",2),r["\u0275\u0275text"](3,"rulenode.add"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"span",3),r["\u0275\u0275text"](5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](6,"div",4),r["\u0275\u0275elementStart"](7,"button",5),r["\u0275\u0275listener"]("click",function(){return t.cancel()}),r["\u0275\u0275elementStart"](8,"mat-icon",6),r["\u0275\u0275text"](9,"close"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](10,we,1,0,"mat-progress-bar",7),r["\u0275\u0275pipe"](11,"async"),r["\u0275\u0275elementStart"](12,"div",8),r["\u0275\u0275elementStart"](13,"fieldset",9),r["\u0275\u0275pipe"](14,"async"),r["\u0275\u0275element"](15,"tb-rule-node",10,11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"div",12),r["\u0275\u0275elementStart"](18,"button",13),r["\u0275\u0275listener"]("click",function(){return t.cancel()}),r["\u0275\u0275pipe"](19,"async"),r["\u0275\u0275text"](20),r["\u0275\u0275pipe"](21,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"button",14),r["\u0275\u0275pipe"](23,"async"),r["\u0275\u0275text"](24),r["\u0275\u0275pipe"](25,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](16);r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate1"](": ",t.ruleNode.component.name,""),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("tb-help",t.helpLinkIdForRuleNodeType()),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](11,14,t.isLoading$)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](14,16,t.isLoading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ruleNode",t.ruleNode)("ruleChainId",t.ruleChainId)("ruleChainType",t.ruleChainType)("isEdit",!0)("isAdd",!0)("isReadOnly",!1),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](19,18,t.isLoading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](21,20,"action.cancel")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](23,22,t.isLoading$)||n.ruleNodeFormGroup.invalid||!n.ruleNodeFormGroup.dirty),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](25,24,"action.add")," ")}},directives:[o["\u0275angular_packages_forms_forms_ba"],o.NgControlStatusGroup,o.NgForm,W.MatToolbar,_.TranslateDirective,N.b,Y.a,j.MatButton,z.MatIcon,U.NgIf,s.MatDialogContent,E.a,s.MatDialogActions,N.e,ee.MatProgressBar],pipes:[U.AsyncPipe,_.TranslatePipe],encapsulation:2}),t}(T.a);0,void 0}).call(this,n("xexB"))},vpxU:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n("fXoL"),r=n("3Pt+"),a=n("C4fA"),o=n("8LU1"),l=n("H3So"),s=n("//Q6"),d=n("sYmb"),c=n("ofXK"),u=["definedConfigContent"],p=["jsonObjectEditComponent"];function m(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",4),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n.definedDirectiveError)}}function f(e,t){if(1&e&&(i["\u0275\u0275element"](0,"tb-json-object-edit",5,6),i["\u0275\u0275pipe"](2,"translate")),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("label",i["\u0275\u0275pipeBind1"](2,3,"rulenode.configuration"))("required",n.required)("fillHeight",!0)}}var h=function(){function e(e,t,n){this.translate=e,this.ruleChainService=t,this.fb=n,this.propagateChange=function(e){},this.ruleNodeConfigFormGroup=this.fb.group({configuration:[null,r.Validators.required]})}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(o.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nodeDefinition",{get:function(){return this.nodeDefinitionValue},set:function(e){this.nodeDefinitionValue!==e&&(this.nodeDefinitionValue=e,this.nodeDefinitionValue&&this.validateDefinedDirective())},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){},e.prototype.ngOnDestroy=function(){this.definedConfigComponentRef&&this.definedConfigComponentRef.destroy()},e.prototype.ngAfterViewInit=function(){},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.ruleNodeConfigFormGroup.disable({emitEvent:!1}):this.ruleNodeConfigFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){var t=this;this.configuration=Object(s.e)(e),this.changeSubscription&&(this.changeSubscription.unsubscribe(),this.changeSubscription=null),this.definedConfigComponent?(this.definedConfigComponent.configuration=this.configuration,this.changeSubscription=this.definedConfigComponent.configurationChanged.subscribe(function(e){t.updateModel(e)})):(this.ruleNodeConfigFormGroup.get("configuration").patchValue(this.configuration,{emitEvent:!1}),this.changeSubscription=this.ruleNodeConfigFormGroup.get("configuration").valueChanges.subscribe(function(e){t.updateModel(e)}))},e.prototype.useDefinedDirective=function(){return this.nodeDefinition&&this.nodeDefinition.configDirective&&this.nodeDefinition.configDirective.length&&!this.definedDirectiveError},e.prototype.updateModel=function(e){this.definedConfigComponent||this.ruleNodeConfigFormGroup.valid?this.propagateChange(e):this.propagateChange(this.required?null:e)},e.prototype.validateDefinedDirective=function(){var e=this;if(this.definedConfigComponentRef&&(this.definedConfigComponentRef.destroy(),this.definedConfigComponentRef=null),this.nodeDefinition.uiResourceLoadError&&this.nodeDefinition.uiResourceLoadError.length)this.definedDirectiveError=this.nodeDefinition.uiResourceLoadError;else if(this.nodeDefinition.configDirective&&this.nodeDefinition.configDirective.length){this.changeSubscription&&(this.changeSubscription.unsubscribe(),this.changeSubscription=null),this.definedConfigContainer.clear();var t=this.ruleChainService.getRuleNodeConfigFactory(this.nodeDefinition.configDirective);this.definedConfigComponentRef=this.definedConfigContainer.createComponent(t),this.definedConfigComponent=this.definedConfigComponentRef.instance,this.definedConfigComponent.ruleNodeId=this.ruleNodeId,this.definedConfigComponent.configuration=this.configuration,this.changeSubscription=this.definedConfigComponent.configurationChanged.subscribe(function(t){e.updateModel(t)})}},e.prototype.validate=function(){this.useDefinedDirective()&&this.definedConfigComponent.validate()},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](d.TranslateService),i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](r.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-rule-node-config"]],viewQuery:function(e,t){if(1&e&&(i["\u0275\u0275viewQuery"](u,3,i.ViewContainerRef),i["\u0275\u0275viewQuery"](p,1)),2&e){var n=void 0;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.definedConfigContainer=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.jsonObjectEditComponent=n.first)}},inputs:{required:"required",disabled:"disabled",ruleNodeId:"ruleNodeId",nodeDefinition:"nodeDefinition"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:5,vars:3,consts:[[3,"formGroup"],["definedConfigContent",""],["class","tb-rulenode-directive-error",4,"ngIf"],["class","tb-rule-node-configuration-json","formControlName","configuration",3,"label","required","fillHeight",4,"ngIf"],[1,"tb-rulenode-directive-error"],["formControlName","configuration",1,"tb-rule-node-configuration-json",3,"label","required","fillHeight"],["jsonObjectEditComponent",""]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementContainer"](1,null,1),i["\u0275\u0275template"](3,m,2,1,"div",2),i["\u0275\u0275template"](4,f,3,5,"tb-json-object-edit",3),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.ruleNodeConfigFormGroup),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",t.definedDirectiveError),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.useDefinedDirective()))},directives:[r.NgControlStatusGroup,r.FormGroupDirective,c.NgIf,l.a,r.NgControlStatus,r.FormControlName,r.RequiredValidator],pipes:[d.TranslatePipe],styles:["[_nghost-%COMP%]   tb-json-object-edit.tb-rule-node-configuration-json[_ngcontent-%COMP%]{display:block;height:300px}[_nghost-%COMP%]   .tb-rulenode-directive-error[_ngcontent-%COMP%]{font-size:13px;font-weight:400;color:#dd2c00}"]}),e}();0,void 0},xutz:function(e,t,n){"use strict";(function(e){var i=n("XqMk"),r="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=r&&"object"==typeof e&&e&&!e.nodeType&&e,o=a&&a.exports===r&&i.a.process,l=function(){try{var e=a&&a.require&&a.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(t){}}();t.a=l}).call(this,n("kIY7")(e))}}]);