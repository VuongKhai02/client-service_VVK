(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"+Xys":function(e,t,n){"use strict";n.d(t,"a",function(){return b});var i=n("mrSG"),a=n("fXoL"),r=n("3Pt+"),o=n("RxGS"),s=n("l7P3"),l=n("znSr"),c=n("XiUz"),d=n("sYmb"),u=n("ofXK"),p=n("bTqV"),m=n("Qu3c"),f=n("NFeN"),h=n("IVsW"),g=n("wU4P");function A(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",12),a["\u0275\u0275elementStart"](1,"div",13),a["\u0275\u0275element"](2,"tb-relation-type-autocomplete",14),a["\u0275\u0275element"](3,"tb-entity-type-list",15),a["\u0275\u0275elementStart"](4,"button",16),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](n);var e=t.index;return a["\u0275\u0275nextContext"]().removeFilter(e)}),a["\u0275\u0275pipe"](5,"async"),a["\u0275\u0275pipe"](6,"translate"),a["\u0275\u0275elementStart"](7,"mat-icon"),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("formControl",i.get("relationType")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("allowedEntityTypes",r.allowedEntityTypes)("formControl",i.get("entityTypes")),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](6,7,"relation.remove-relation-filter")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](5,5,r.isLoading$))}}var b=function(e){function t(t,n){var i=e.call(this,t)||this;return i.store=t,i.fb=n,i.propagateChange=null,i.valueChangeSubscription=null,i}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){this.relationFiltersFormGroup=this.fb.group({}),this.relationFiltersFormGroup.addControl("relationFilters",this.fb.array([]))},t.prototype.relationFiltersFormArray=function(){return this.relationFiltersFormGroup.get("relationFilters")},t.prototype.registerOnChange=function(e){this.propagateChange=e},t.prototype.registerOnTouched=function(e){},t.prototype.setDisabledState=function(e){this.disabled=e},t.prototype.writeValue=function(e){var t=this;this.valueChangeSubscription&&this.valueChangeSubscription.unsubscribe();var n=[];e&&e.length&&e.forEach(function(e){n.push(t.createRelationFilterFormGroup(e))}),this.relationFiltersFormGroup.setControl("relationFilters",this.fb.array(n)),this.valueChangeSubscription=this.relationFiltersFormGroup.valueChanges.subscribe(function(){t.updateModel()})},t.prototype.removeFilter=function(e){this.relationFiltersFormGroup.get("relationFilters").removeAt(e)},t.prototype.addFilter=function(){this.relationFiltersFormGroup.get("relationFilters").push(this.createRelationFilterFormGroup({relationType:null,entityTypes:[]}))},t.prototype.createRelationFilterFormGroup=function(e){return this.fb.group({relationType:[e?e.relationType:null],entityTypes:[e?e.entityTypes:[]]})},t.prototype.updateModel=function(){var e=this.relationFiltersFormGroup.get("relationFilters").value;this.propagateChange(e)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](s.Store),a["\u0275\u0275directiveInject"](r.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-relation-filters"]],inputs:{disabled:"disabled",allowedEntityTypes:"allowedEntityTypes"},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)(function(){return t}),multi:!0}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:23,vars:14,consts:[[1,"tb-relation-filters",3,"formGroup"],[1,"container"],[1,"header",3,"fxShow"],["fxLayout","row","fxLayoutAlign","start center"],["translate","",1,"cell",2,"width","200px","min-width","200px"],["fxFlex","","translate","",1,"cell"],[1,"cell",2,"width","40px","min-width","40px"],[1,"body",3,"fxShow"],["class","row","fxFlex","","fxLayout","row","fxLayoutAlign","start center","formArrayName","relationFilters",4,"ngFor","ngForOf"],[1,"any-filter",3,"fxShow"],["fxLayoutAlign","center center","translate","",1,"tb-prompt"],["mat-raised-button","","color","accent","type","button","matTooltipPosition","above",3,"disabled","matTooltip","click"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center","formArrayName","relationFilters",1,"row"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",1,"mat-elevation-z1"],[1,"cell",2,"width","200px","min-width","200px",3,"formControl"],["fxFlex","",1,"cell",3,"allowedEntityTypes","formControl"],["mat-icon-button","","color","accent","type","button","matTooltipPosition","above",2,"width","40px","min-width","40px",3,"disabled","matTooltip","click"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"div",2),a["\u0275\u0275elementStart"](3,"div",3),a["\u0275\u0275elementStart"](4,"span",4),a["\u0275\u0275text"](5,"relation.type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"span",5),a["\u0275\u0275text"](7,"entity.entity-types"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"span",6),a["\u0275\u0275text"](9,"\xa0"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"div",7),a["\u0275\u0275template"](11,A,9,9,"div",8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](12,"div",9),a["\u0275\u0275elementStart"](13,"span",10),a["\u0275\u0275text"](14,"relation.any-relation"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"div"),a["\u0275\u0275elementStart"](16,"button",11),a["\u0275\u0275listener"]("click",function(){return t.addFilter()}),a["\u0275\u0275pipe"](17,"async"),a["\u0275\u0275pipe"](18,"translate"),a["\u0275\u0275elementStart"](19,"mat-icon"),a["\u0275\u0275text"](20,"add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](21),a["\u0275\u0275pipe"](22,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.relationFiltersFormGroup),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",t.relationFiltersFormArray().length),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("fxShow",t.relationFiltersFormArray().length),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",t.relationFiltersFormArray().controls),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",!t.relationFiltersFormArray().length),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](18,10,"relation.add-relation-filter")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](17,8,t.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](22,12,"action.add")," "))},directives:[r.NgControlStatusGroup,r.FormGroupDirective,l.d,c.f,c.e,d.TranslateDirective,c.b,u.NgForOf,p.MatButton,m.MatTooltip,f.MatIcon,r.FormArrayName,h.a,r.NgControlStatus,r.FormControlDirective,g.a],pipes:[u.AsyncPipe,d.TranslatePipe],styles:["[_nghost-%COMP%]   .tb-relation-filters[_ngcontent-%COMP%]{max-width:calc(100vw - 48px);overflow:hidden}[_nghost-%COMP%]   .tb-relation-filters[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{width:100%;overflow:auto}[_nghost-%COMP%]   .tb-relation-filters[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{width:-webkit-max-content;width:-moz-max-content;width:max-content;padding:0 5px 5px}[_nghost-%COMP%]   .tb-relation-filters[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{padding-right:5px;padding-left:5px;font-size:12px;font-weight:700;color:rgba(0,0,0,.54);white-space:nowrap}[_nghost-%COMP%]   .tb-relation-filters[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{width:-webkit-max-content;width:-moz-max-content;width:max-content;padding:0 5px 20px}[_nghost-%COMP%]   .tb-relation-filters[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{padding-top:5px}[_nghost-%COMP%]   .tb-relation-filters[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{padding-right:5px;padding-left:5px}[_nghost-%COMP%]   .tb-relation-filters[_ngcontent-%COMP%]   .any-filter[_ngcontent-%COMP%]{margin:10px 0 20px}[_nghost-%COMP%]     .tb-relation-filters .cell .mat-form-field .mat-form-field-infix{border-top:none}[_nghost-%COMP%]     .tb-relation-filters .cell .mat-form-field.mat-form-field-appearance-standard .mat-form-field-flex{padding-top:0}"]}),t}(o.a);0,void 0},"/Bgp":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("U3y+"),a=function(e){this.entityType=i.b.USER,this.id=e}},"/U8w":function(e,t,n){"use strict";n.d(t,"a",function(){return U});var i=n("mrSG"),a=n("fXoL"),r=n("3Pt+"),o=n("8LU1"),s=n("0lYY"),l=n("gi3d"),c=n("yAAm"),d="// Function body to process image obtained as a result of mobile action (take photo, take image from gallery, etc.). \n// - imageUrl - image URL in base64 data format\n\nshowImageDialog('--TITLE--', imageUrl);\n//saveEntityImageAttribute('image', imageUrl);\n\nfunction showImageDialog(title, imageUrl) {\n    setTimeout(function() {\n        widgetContext.customDialog.customDialog(imageDialogTemplate, ImageDialogController, {imageUrl: imageUrl, title: title}).subscribe();\n    }, 100);\n}\n\nfunction saveEntityImageAttribute(attributeName, imageUrl) {\n    if (entityId) {\n        let attributes = [{\n            key: attributeName, value: imageUrl\n        }];\n        widgetContext.attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributes).subscribe(\n           function() {\n               widgetContext.showSuccessToast('Image attribute saved!');\n           },\n           function(error) {\n               widgetContext.dialogs.alert('Image attribute save failed', JSON.stringify(error));\n           }\n        );\n    }\n}\n\nvar\n  imageDialogTemplate =\n    '<div aria-label=\"Image\">' +\n    '<form #theForm=\"ngForm\">' +\n    '<mat-toolbar fxLayout=\"row\" color=\"accent\">' +\n    '<h2>{{title}}</h2>' +\n    '<span fxFlex></span>' +\n    '<button mat-icon-button (click)=\"close()\">' +\n    '<mat-icon>close</mat-icon>' +\n    '</button>' +\n    '</mat-toolbar>' +\n    '<div mat-dialog-content>' +\n    '<div class=\"mat-content mat-padding\">' +\n    '<div fxLayout=\"column\" fxFlex>' +\n    '<div style=\"padding-top: 20px;\">' +\n    '<img [src]=\"imageUrl\" style=\"height: 300px;\"/>' +\n    '</div>' +\n    '</div>' +\n    '</div>' +\n    '</div>' +\n    '<div mat-dialog-actions fxLayout=\"row\">' +\n    '<span fxFlex></span>' +\n    '<button mat-button (click)=\"close()\" style=\"margin-right:20px;\">Close</button>' +\n    '</div>' +\n    '</form>' +\n    '</div>';\n\nfunction ImageDialogController(instance) {\n  let vm = instance;\n  vm.title = vm.data.title;\n  vm.imageUrl = vm.data.imageUrl;\n  vm.close = function ()\n  {\n    vm.dialogRef.close(null);\n  }\n}\n",u="// Optional function body to process result of attempt to launch external mobile application (for ex. map application or phone call application). \n// - launched - boolean value indicating if the external application was successfully launched.\n\nshowLaunchStatusDialog('--TITLE--', launched);\n\nfunction showLaunchStatusDialog(title, status) {\n    setTimeout(function() {\n        widgetContext.dialogs.alert(title, status ? 'Successfully launched' : 'Failed to launch').subscribe();\n    }, 100);\n}\n",p="// Optional function body to handle empty result. \n// Usually this happens when user cancels the action (for ex. by pressing phone back button). \n\nshowEmptyResultDialog('--MESSAGE--');\n\nfunction showEmptyResultDialog(message) {\n    setTimeout(function() {\n        widgetContext.dialogs.alert('Empty result', message).subscribe();\n    }, 100);\n}\n",m="// Optional function body to handle error occurred while mobile action execution \n// - error - Error message\n\nshowErrorDialog('--TITLE--', error);\n\nfunction showErrorDialog(title, error) {\n    setTimeout(function() {\n        widgetContext.dialogs.alert(title, error).subscribe();\n    }, 100);\n}\n";function f(e){var t;switch(e){case s.e.takePictureFromGallery:t="Gallery picture";break;case s.e.takePhoto:t="Photo";break;case s.e.takeScreenshot:t="Screenshot"}return d.replace("--TITLE--",t)}function h(e){var t;switch(e){case s.e.mapLocation:t="Map location";break;case s.e.mapDirection:t="Map direction";break;case s.e.makePhoneCall:t="Phone call"}return u.replace("--TITLE--",t)}function g(e){var t="Mobile action was cancelled!";switch(e){case s.e.takePictureFromGallery:t="Take picture from gallery action was cancelled!";break;case s.e.takePhoto:t="Take photo action was cancelled!";break;case s.e.mapDirection:t="Open map directions was not invoked!";break;case s.e.mapLocation:t="Open location on map was not invoked!";break;case s.e.scanQrCode:t="Scan QR code action was canceled!";break;case s.e.makePhoneCall:t="Phone call was not invoked!";break;case s.e.getLocation:t="Get location action was canceled!";break;case s.e.takeScreenshot:t="Take screenshot action was cancelled!"}return p.replace("--MESSAGE--",t)}function A(e){var t="Mobile action failed";switch(e){case s.e.takePictureFromGallery:t="Failed to take picture from gallery";break;case s.e.takePhoto:t="Failed to take photo";break;case s.e.mapDirection:t="Failed to open map directions";break;case s.e.mapLocation:t="Failed to open map location";break;case s.e.scanQrCode:t="Failed to scan QR code";break;case s.e.makePhoneCall:t="Failed to make phone call";break;case s.e.getLocation:t="Failed to get phone location";break;case s.e.takeScreenshot:t="Failed to take screenshot"}return m.replace("--TITLE--",t)}var b=n("l7P3"),y=n("kmnG"),v=n("sYmb"),C=n("d3UM"),x=n("ofXK"),w=n("FKr1");function S(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",10),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.mobileActionTypeTranslations.get(i.mobileActionType[n]))," ")}}function E(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-action.mobile.action-type-required")," "))}var I=function(){return["$event","widgetContext","entityId","entityName","additionalParams","entityLabel"]};function O(e,t){if(1&e&&a["\u0275\u0275element"](0,"tb-js-func",11),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("functionArgs",a["\u0275\u0275pureFunction0"](2,I))("editorCompleter",n.customActionEditorCompleter)}}function T(e,t){if(1&e&&a["\u0275\u0275element"](0,"tb-js-func",12),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("functionArgs",a["\u0275\u0275pureFunction0"](2,I))("editorCompleter",n.customActionEditorCompleter)}}var F=function(){return["imageUrl","$event","widgetContext","entityId","entityName","additionalParams","entityLabel"]};function B(e,t){if(1&e&&a["\u0275\u0275element"](0,"tb-js-func",13),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("functionArgs",a["\u0275\u0275pureFunction0"](2,F))("editorCompleter",n.customActionEditorCompleter)}}var M=function(){return["code","format","$event","widgetContext","entityId","entityName","additionalParams","entityLabel"]};function P(e,t){if(1&e&&a["\u0275\u0275element"](0,"tb-js-func",14),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("functionArgs",a["\u0275\u0275pureFunction0"](2,M))("editorCompleter",n.customActionEditorCompleter)}}var D=function(){return["latitude","longitude","$event","widgetContext","entityId","entityName","additionalParams","entityLabel"]};function k(e,t){if(1&e&&a["\u0275\u0275element"](0,"tb-js-func",15),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("functionArgs",a["\u0275\u0275pureFunction0"](2,D))("editorCompleter",n.customActionEditorCompleter)}}var _=function(){return["launched","$event","widgetContext","entityId","entityName","additionalParams","entityLabel"]};function L(e,t){if(1&e&&a["\u0275\u0275element"](0,"tb-js-func",16),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("functionArgs",a["\u0275\u0275pureFunction0"](2,_))("editorCompleter",n.customActionEditorCompleter)}}function j(e,t){if(1&e&&a["\u0275\u0275element"](0,"tb-js-func",17),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("functionArgs",a["\u0275\u0275pureFunction0"](2,I))("editorCompleter",n.customActionEditorCompleter)}}var N=function(){return["error","$event","widgetContext","entityId","entityName","additionalParams","entityLabel"]};function R(e,t){if(1&e&&a["\u0275\u0275element"](0,"tb-js-func",18),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("functionArgs",a["\u0275\u0275pureFunction0"](2,N))("editorCompleter",n.customActionEditorCompleter)}}var U=function(){function e(e,t){this.store=e,this.fb=t,this.mobileActionTypes=Object.keys(s.e),this.mobileActionTypeTranslations=s.l,this.mobileActionType=s.e,this.customActionEditorCompleter=l.a,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(o.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.mobileActionFormGroup=this.fb.group({type:[null,r.Validators.required],handleEmptyResultFunction:[null],handleErrorFunction:[null]}),this.mobileActionFormGroup.get("type").valueChanges.subscribe(function(t){var n=e.mobileActionFormGroup.value;e.mobileActionTypeFormGroup&&(n=Object(i.a)(Object(i.a)({},n),e.mobileActionTypeFormGroup.value)),e.updateMobileActionType(t,n)}),this.mobileActionFormGroup.valueChanges.subscribe(function(){e.updateModel()})},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?(this.mobileActionFormGroup.disable({emitEvent:!1}),this.mobileActionTypeFormGroup&&this.mobileActionTypeFormGroup.disable({emitEvent:!1})):(this.mobileActionFormGroup.enable({emitEvent:!1}),this.mobileActionTypeFormGroup&&this.mobileActionTypeFormGroup.enable({emitEvent:!1}))},e.prototype.writeValue=function(e){this.mobileActionFormGroup.patchValue({type:null==e?void 0:e.type,handleEmptyResultFunction:null==e?void 0:e.handleEmptyResultFunction,handleErrorFunction:null==e?void 0:e.handleErrorFunction},{emitEvent:!1}),this.updateMobileActionType(null==e?void 0:e.type,e)},e.prototype.updateModel=function(){var e=null;this.mobileActionFormGroup.valid&&this.mobileActionTypeFormGroup.valid&&(e=Object(i.a)(Object(i.a)({},this.mobileActionFormGroup.getRawValue()),this.mobileActionTypeFormGroup.getRawValue())),this.propagateChange(e)},e.prototype.updateMobileActionType=function(e,t){var n=this,i=null==t?void 0:t.type,a=e||i,o=i!==e;if(o&&a){var l=null==t?void 0:t.handleEmptyResultFunction;g(a)!==l&&(l=g(e),this.mobileActionFormGroup.patchValue({handleEmptyResultFunction:l},{emitEvent:!1}));var c=null==t?void 0:t.handleErrorFunction;A(a)!==c&&(c=A(e),this.mobileActionFormGroup.patchValue({handleErrorFunction:c},{emitEvent:!1}))}if(this.mobileActionTypeFormGroup=this.fb.group({}),e)switch(e){case s.e.takePictureFromGallery:case s.e.takePhoto:case s.e.takeScreenshot:var d=null==t?void 0:t.processImageFunction;if(o)f(a)!==d&&(d=f(e));this.mobileActionTypeFormGroup.addControl("processImageFunction",this.fb.control(d,[]));break;case s.e.mapDirection:case s.e.mapLocation:var u=null==t?void 0:t.getLocationFunction,p=null==t?void 0:t.processLaunchResultFunction;if(o){var m="// Function body that should return location as array of two numbers (latitude, longitude) for further processing by mobile action.\n// Usually location can be obtained from entity attributes/telemetry. \n\nreturn getLocationFromEntityAttributes();\n//return [30, 30]; // TEST LOCATION\n\n\nfunction getLocationFromEntityAttributes() {\n    if (entityId) {\n        return widgetContext.attributeService.getEntityAttributes(entityId, 'SERVER_SCOPE', ['latitude', 'longitude']).pipe(widgetContext.rxjs.map(function(attributeData) {\n            var res = [0,0];\n            if (attributeData && attributeData.length === 2) {\n                res[0] = attributeData.filter(function (data) { return data.key === 'latitude'})[0].value;\n                res[1] = attributeData.filter(function (data) { return data.key === 'longitude'})[0].value;\n            }\n            return res;\n        }));\n    } else {\n        return [0,0];\n    }\n}\n";m!==u&&(u=m),h(a)!==p&&(p=h(e))}this.mobileActionTypeFormGroup.addControl("getLocationFunction",this.fb.control(u,[r.Validators.required])),this.mobileActionTypeFormGroup.addControl("processLaunchResultFunction",this.fb.control(p,[]));break;case s.e.scanQrCode:var b=null==t?void 0:t.processQrCodeFunction;if(o){var y="// Function body to process result of QR code scanning. \n// - code - scanned QR code\n// - format - scanned QR code format\n\nshowQrCodeDialog('QR Code', code, format);\n\nfunction showQrCodeDialog(title, code, format) {\n    setTimeout(function() {\n        widgetContext.dialogs.alert(title, 'Code: ['+code+']<br>Format: ' + format).subscribe();\n    }, 100);\n}\n";y!==b&&(b=y)}this.mobileActionTypeFormGroup.addControl("processQrCodeFunction",this.fb.control(b,[]));break;case s.e.makePhoneCall:var v=null==t?void 0:t.getPhoneNumberFunction;if(p=null==t?void 0:t.processLaunchResultFunction,o){var C="// Function body that should return phone number for further processing by mobile action.\n// Usually phone number can be obtained from entity attributes/telemetry. \n\nreturn getPhoneNumberFromEntityAttributes();\n//return 123456789; // TEST PHONE NUMBER\n\n\nfunction getPhoneNumberFromEntityAttributes() {\n    if (entityId) {\n        return widgetContext.attributeService.getEntityAttributes(entityId, 'SERVER_SCOPE', ['phone']).pipe(widgetContext.rxjs.map(function(attributeData) {\n            var res = 0;\n            if (attributeData && attributeData.length === 1) {\n                res = attributeData[0].value;\n            }\n            return res;\n        }));\n    } else {\n        return 0;\n    }\n}\n";C!==v&&(v=C),h(a)!==p&&(p=h(e))}this.mobileActionTypeFormGroup.addControl("getPhoneNumberFunction",this.fb.control(v,[r.Validators.required])),this.mobileActionTypeFormGroup.addControl("processLaunchResultFunction",this.fb.control(p,[]));break;case s.e.getLocation:var x=null==t?void 0:t.processLocationFunction;if(o){var w="// Function body to process current location of the phone. \n// - latitude - phone location latitude\n// - longitude - phone location longitude\n\nshowLocationDialog('Location', latitude, longitude);\n// saveEntityLocationAttributes('latitude', 'longitude', latitude, longitude);\n\nfunction showImageDialog(title, imageUrl) {\n    setTimeout(function() {\n        widgetContext.customDialog.customDialog(imageDialogTemplate, ImageDialogController, {imageUrl: imageUrl, title: title}).subscribe();\n    }, 100);\n}\n\nfunction saveEntityLocationAttributes(latitudeAttributeName, longitudeAttributeName, latitude, longitude) {\n    if (entityId) {\n        let attributes = [\n            { key: latitudeAttributeName, value: latitude },\n            { key: longitudeAttributeName, value: longitude }\n        ];\n        widgetContext.attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributes).subscribe(\n           function() {\n               widgetContext.showSuccessToast('Location attributes saved!');\n           },\n           function(error) {\n               widgetContext.dialogs.alert('Location attributes save failed', JSON.stringify(error));\n           }\n        );\n    }\n}\n\n\nfunction showLocationDialog(title, latitude, longitude) {\n    setTimeout(function() {\n        widgetContext.dialogs.alert(title, 'Latitude: '+latitude+'<br>Longitude: ' + longitude).subscribe();\n    }, 100);\n}";w!==x&&(x=w)}this.mobileActionTypeFormGroup.addControl("processLocationFunction",this.fb.control(x,[r.Validators.required]))}this.mobileActionTypeFormGroup.valueChanges.subscribe(function(){n.updateModel()})},e.prototype.validateOnSubmit=function(){for(var e=0,t=this.jsFuncComponents.toArray();e<t.length;e++){t[e].validateOnSubmit()}},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](b.Store),a["\u0275\u0275directiveInject"](r.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-mobile-action-editor"]],viewQuery:function(e,t){if(1&e&&a["\u0275\u0275viewQuery"](c.a,1),2&e){var n;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.jsFuncComponents=n)}},inputs:{required:"required",disabled:"disabled"},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)(function(){return e}),multi:!0}])],decls:16,vars:13,consts:[[3,"formGroup"],[1,"mat-block"],["translate",""],["required","","formControlName","type"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"formGroup","ngSwitch"],[3,"ngSwitchCase"],["formControlName","handleEmptyResultFunction","functionName","handleEmptyResult",3,"functionArgs","editorCompleter",4,"ngIf"],["formControlName","handleErrorFunction","functionName","handleError",3,"functionArgs","editorCompleter",4,"ngIf"],[3,"value"],["formControlName","getLocationFunction","functionName","getLocation",3,"functionArgs","editorCompleter"],["formControlName","getPhoneNumberFunction","functionName","getPhoneNumber",3,"functionArgs","editorCompleter"],["formControlName","processImageFunction","functionName","processImage",3,"functionArgs","editorCompleter"],["formControlName","processQrCodeFunction","functionName","processQrCode",3,"functionArgs","editorCompleter"],["formControlName","processLocationFunction","functionName","processLocation",3,"functionArgs","editorCompleter"],["formControlName","processLaunchResultFunction","functionName","processLaunchResult",3,"functionArgs","editorCompleter"],["formControlName","handleEmptyResultFunction","functionName","handleEmptyResult",3,"functionArgs","editorCompleter"],["formControlName","handleErrorFunction","functionName","handleError",3,"functionArgs","editorCompleter"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"mat-form-field",1),a["\u0275\u0275elementStart"](2,"mat-label",2),a["\u0275\u0275text"](3,"widget-action.mobile.action-type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"mat-select",3),a["\u0275\u0275template"](5,S,3,4,"mat-option",4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](6,E,3,3,"mat-error",5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"div",6),a["\u0275\u0275template"](8,O,1,3,"ng-template",7),a["\u0275\u0275template"](9,T,1,3,"ng-template",7),a["\u0275\u0275template"](10,B,1,3,"ng-template",7),a["\u0275\u0275template"](11,P,1,3,"ng-template",7),a["\u0275\u0275template"](12,k,1,3,"ng-template",7),a["\u0275\u0275template"](13,L,1,3,"ng-template",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](14,j,1,3,"tb-js-func",8),a["\u0275\u0275template"](15,R,1,3,"tb-js-func",9),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.mobileActionFormGroup),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngForOf",t.mobileActionTypes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.mobileActionFormGroup.get("type").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",t.mobileActionTypeFormGroup)("ngSwitch",t.mobileActionFormGroup.get("type").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.mobileActionFormGroup.get("type").value===t.mobileActionType.mapDirection||t.mobileActionFormGroup.get("type").value===t.mobileActionType.mapLocation?t.mobileActionFormGroup.get("type").value:""),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.mobileActionType.makePhoneCall),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.mobileActionFormGroup.get("type").value===t.mobileActionType.takePhoto||t.mobileActionFormGroup.get("type").value===t.mobileActionType.takePictureFromGallery||t.mobileActionFormGroup.get("type").value===t.mobileActionType.takeScreenshot?t.mobileActionFormGroup.get("type").value:""),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.mobileActionType.scanQrCode),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.mobileActionType.getLocation),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.mobileActionFormGroup.get("type").value===t.mobileActionType.mapDirection||t.mobileActionFormGroup.get("type").value===t.mobileActionType.mapLocation||t.mobileActionFormGroup.get("type").value===t.mobileActionType.makePhoneCall?t.mobileActionFormGroup.get("type").value:""),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.mobileActionFormGroup.get("type").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.mobileActionFormGroup.get("type").value))},directives:[r.NgControlStatusGroup,r.FormGroupDirective,y.MatFormField,y.MatLabel,v.TranslateDirective,C.MatSelect,r.RequiredValidator,r.NgControlStatus,r.FormControlName,x.NgForOf,x.NgIf,x.NgSwitch,x.NgSwitchCase,w.MatOption,y.MatError,c.a],pipes:[v.TranslatePipe],encapsulation:2}),e}();0,void 0},"02Lk":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("JL25"),a=n("mvVQ"),r=n("/E8u"),o=n("MGFw"),s=n("WtWf"),l=n("zx2A");function c(e,t){return function(n){return n.lift(new d(e,t))}}var d=function(){function e(t,n){Object(o.a)(this,e),this.keySelector=t,this.flushes=n}return Object(s.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new u(e,this.keySelector,this.flushes))}}]),e}(),u=function(e){Object(a.a)(n,e);var t=Object(r.a)(n);function n(e,a,r){var s;return Object(o.a)(this,n),(s=t.call(this,e)).keySelector=a,s.values=new Set,r&&s.add(Object(l.c)(r,new l.a(Object(i.a)(s)))),s}return Object(s.a)(n,[{key:"notifyNext",value:function(){this.values.clear()}},{key:"notifyError",value:function(e){this._error(e)}},{key:"_next",value:function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)}},{key:"_useKeySelector",value:function(e){var t,n=this.destination;try{t=this.keySelector(e)}catch(i){return n.error(i),void 0}this._finalizeNext(t,e)}},{key:"_finalizeNext",value:function(e,t){var n=this.values;n.has(e)||(n.add(e),this.destination.next(t))}}]),n}(l.b)},"0AoA":function(e,t,n){"use strict";n.d(t,"a",function(){return S});var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=n("yl57"),s=n("FBAY"),l=(n("WEPN"),n("l7P3")),c=n("sYmb"),d=n("jhN1"),u=n("ofXK"),p=n("49Ji"),m=n("znSr"),f=n("eeD6"),h=n("XiUz"),g=n("Xa2L"),A=n("bTqV"),b=n("NFeN"),y=["dashboard"];function v(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",5),a["\u0275\u0275element"](1,"mat-spinner",6),a["\u0275\u0275elementEnd"]())}function C(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"span"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.no-widgets")," "))}function x(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",10),a["\u0275\u0275listener"]("click",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).addWidget(e)}),a["\u0275\u0275elementStart"](1,"mat-icon",11),a["\u0275\u0275text"](2,"add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"]()}2&e&&(a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](4,1,"dashboard.add-widget")," "))}function w(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"section",7),a["\u0275\u0275template"](1,C,3,3,"span",8),a["\u0275\u0275template"](2,x,5,3,"button",9),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!n.isEdit),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.isEdit&&!n.widgetEditMode)}}var S=function(e){function t(t,n,i,a){var r=e.call(this,t)||this;return r.store=t,r.translate=n,r.itembuffer=i,r.sanitizer=a,r.dashboardStyle=null,r.hotKeys=[],r.rxSubscriptions=new Array,r.initHotKeys(),r}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"layoutCtx",{get:function(){return this.layoutCtxValue},set:function(e){this.layoutCtxValue=e,this.layoutCtxValue&&(this.layoutCtxValue.ctrl=this,null==this.dashboardStyle&&this.loadDashboardStyle())},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){var e=this;this.rxSubscriptions.push(this.dashboard.dashboardTimewindowChanged.subscribe(function(t){e.dashboardCtx.dashboardTimewindow=t,e.dashboardCtx.runChangeDetection()}))},t.prototype.ngOnDestroy=function(){this.rxSubscriptions.forEach(function(e){e.unsubscribe()}),this.rxSubscriptions.length=0},t.prototype.initHotKeys=function(){var e=this;this.hotKeys.push(new o.a("ctrl+c",function(t){if(e.isEdit&&!e.isEditingWidget&&!e.widgetEditMode){var n=e.dashboard.getSelectedWidget();n&&(t.preventDefault(),e.copyWidget(t,n))}return!1},null,this.translate.instant("action.copy"))),this.hotKeys.push(new o.a("ctrl+r",function(t){if(e.isEdit&&!e.isEditingWidget&&!e.widgetEditMode){var n=e.dashboard.getSelectedWidget();n&&(t.preventDefault(),e.copyWidgetReference(t,n))}return!1},null,this.translate.instant("action.copy-reference"))),this.hotKeys.push(new o.a("ctrl+v",function(t){return!e.isEdit||e.isEditingWidget||e.widgetEditMode||e.itembuffer.hasWidget()&&(t.preventDefault(),e.pasteWidget(t)),!1},null,this.translate.instant("action.paste"))),this.hotKeys.push(new o.a("ctrl+i",function(t){return!e.isEdit||e.isEditingWidget||e.widgetEditMode||e.itembuffer.canPasteWidgetReference(e.dashboardCtx.getDashboard(),e.dashboardCtx.state,e.layoutCtx.id)&&(t.preventDefault(),e.pasteWidgetReference(t)),!1},null,this.translate.instant("action.paste-reference"))),this.hotKeys.push(new o.a("ctrl+x",function(t){if(e.isEdit&&!e.isEditingWidget&&!e.widgetEditMode){var n=e.dashboard.getSelectedWidget();n&&(t.preventDefault(),e.layoutCtx.dashboardCtrl.removeWidget(t,e.layoutCtx,n))}return!1},null,this.translate.instant("action.delete")))},t.prototype.loadDashboardStyle=function(){this.dashboardStyle={"background-color":this.layoutCtx.gridSettings.backgroundColor,"background-repeat":"no-repeat","background-attachment":"scroll","background-size":this.layoutCtx.gridSettings.backgroundSizeMode||"100%","background-position":"0% 0%"},this.backgroundImage=this.layoutCtx.gridSettings.backgroundImageUrl?this.sanitizer.bypassSecurityTrustStyle("url("+this.layoutCtx.gridSettings.backgroundImageUrl+")"):"none"},t.prototype.reload=function(){var e=this;this.loadDashboardStyle(),this.dashboard.pauseChangeNotifications(),setTimeout(function(){e.dashboard.resumeChangeNotifications(),e.dashboard.notifyLayoutUpdated()},0)},t.prototype.resetHighlight=function(){this.dashboard.resetHighlight()},t.prototype.highlightWidget=function(e,t){this.dashboard.highlightWidget(e,t)},t.prototype.selectWidget=function(e,t){this.dashboard.selectWidget(e,t)},t.prototype.addWidget=function(e){this.layoutCtx.dashboardCtrl.addWidget(e,this.layoutCtx)},t.prototype.onEditWidget=function(e,t){this.layoutCtx.dashboardCtrl.editWidget(e,this.layoutCtx,t)},t.prototype.onExportWidget=function(e,t){this.layoutCtx.dashboardCtrl.exportWidget(e,this.layoutCtx,t)},t.prototype.onRemoveWidget=function(e,t){return this.layoutCtx.dashboardCtrl.removeWidget(e,this.layoutCtx,t)},t.prototype.onWidgetMouseDown=function(e,t){this.layoutCtx.dashboardCtrl.widgetMouseDown(e,this.layoutCtx,t)},t.prototype.onWidgetClicked=function(e,t){this.layoutCtx.dashboardCtrl.widgetClicked(e,this.layoutCtx,t)},t.prototype.prepareDashboardContextMenu=function(e){return this.layoutCtx.dashboardCtrl.prepareDashboardContextMenu(this.layoutCtx)},t.prototype.prepareWidgetContextMenu=function(e,t){return this.layoutCtx.dashboardCtrl.prepareWidgetContextMenu(this.layoutCtx,t)},t.prototype.copyWidget=function(e,t){this.layoutCtx.dashboardCtrl.copyWidget(e,this.layoutCtx,t)},t.prototype.copyWidgetReference=function(e,t){this.layoutCtx.dashboardCtrl.copyWidgetReference(e,this.layoutCtx,t)},t.prototype.pasteWidget=function(e){var t=this.dashboard.getEventGridPosition(e);this.layoutCtx.dashboardCtrl.pasteWidget(e,this.layoutCtx,t)},t.prototype.pasteWidgetReference=function(e){var t=this.dashboard.getEventGridPosition(e);this.layoutCtx.dashboardCtrl.pasteWidgetReference(e,this.layoutCtx,t)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](l.Store),a["\u0275\u0275directiveInject"](c.TranslateService),a["\u0275\u0275directiveInject"](s.a),a["\u0275\u0275directiveInject"](d.DomSanitizer))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-dashboard-layout"]],viewQuery:function(e,t){if(1&e&&a["\u0275\u0275viewQuery"](y,3),2&e){var n;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.dashboard=n.first)}},inputs:{dashboardCheatSheet:"dashboardCheatSheet",layoutCtx:"layoutCtx",dashboardCtx:"dashboardCtx",isEdit:"isEdit",isEditingWidget:"isEditingWidget",isMobile:"isMobile",widgetEditMode:"widgetEditMode"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:28,consts:[["fxLayout","column","class","tb-progress-cover","fxLayoutAlign","center center",4,"ngIf"],["tb-hotkeys","",1,"mat-content",2,"position","relative","width","100%","height","100%",3,"hotkeys","cheatSheet","ngStyle"],["fxLayoutAlign","center center","style","display: flex; z-index: 1; pointer-events: none;","class","mat-headline tb-absolute-fill",4,"ngIf"],[3,"dashboardStyle","backgroundImage","widgets","widgetLayouts","columns","margin","aliasController","stateController","dashboardTimewindow","isEdit","autofillHeight","mobileAutofillHeight","mobileRowHeight","isMobile","isMobileDisabled","disableWidgetInteraction","isEditActionEnabled","isExportActionEnabled","isRemoveActionEnabled","callbacks","ignoreLoading"],["dashboard",""],["fxLayout","column","fxLayoutAlign","center center",1,"tb-progress-cover"],["color","warn","mode","indeterminate","diameter","100"],["fxLayoutAlign","center center",1,"mat-headline","tb-absolute-fill",2,"display","flex","z-index","1","pointer-events","none"],[4,"ngIf"],["mat-button","","class","tb-add-new-widget",3,"click",4,"ngIf"],["mat-button","",1,"tb-add-new-widget",3,"click"],[1,"tb-mat-96"]],template:function(e,t){1&e&&(a["\u0275\u0275template"](0,v,2,0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275template"](2,w,3,2,"section",2),a["\u0275\u0275element"](3,"tb-dashboard",3,4),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("ngIf",t.layoutCtx.widgets.isLoading()),a["\u0275\u0275advance"](1),a["\u0275\u0275styleProp"]("background-image",t.backgroundImage),a["\u0275\u0275property"]("hotkeys",t.hotKeys)("cheatSheet",t.dashboardCheatSheet)("ngStyle",t.dashboardStyle),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.layoutCtx.widgets.isEmpty()),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("dashboardStyle",t.dashboardStyle)("backgroundImage",t.backgroundImage)("widgets",t.layoutCtx.widgets)("widgetLayouts",t.layoutCtx.widgetLayouts)("columns",t.layoutCtx.gridSettings.columns)("margin",t.layoutCtx.gridSettings.margin)("aliasController",t.dashboardCtx.aliasController)("stateController",t.dashboardCtx.stateController)("dashboardTimewindow",t.dashboardCtx.dashboardTimewindow)("isEdit",t.isEdit)("autofillHeight",t.layoutCtx.gridSettings.autoFillHeight&&!t.isEdit)("mobileAutofillHeight",t.layoutCtx.gridSettings.mobileAutoFillHeight&&!t.isEdit)("mobileRowHeight",t.layoutCtx.gridSettings.mobileRowHeight)("isMobile",t.isMobile)("isMobileDisabled",t.widgetEditMode)("disableWidgetInteraction",t.isEdit)("isEditActionEnabled",t.isEdit)("isExportActionEnabled",t.isEdit&&!t.widgetEditMode)("isRemoveActionEnabled",t.isEdit&&!t.widgetEditMode)("callbacks",t)("ignoreLoading",t.layoutCtx.ignoreLoading))},directives:[u.NgIf,p.a,o.c,u.NgStyle,m.e,f.a,h.f,h.e,g.MatSpinner,A.MatButton,b.MatIcon],pipes:[c.TranslatePipe],styles:["[_nghost-%COMP%]   button.tb-add-new-widget[_ngcontent-%COMP%]{padding-right:12px;font-size:24px;border-style:dashed;border-width:2px}"]}),t}(r.a);0,void 0},"0Dj+":function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return u});var i=n("fXoL"),a=n("XiUz"),r=n("ofXK"),o=n("bSwM"),s=n("3Pt+"),l=n("sYmb");function c(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-checkbox",2),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.$implicit.display=e})("ngModelChange",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().update()}),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit;i["\u0275\u0275property"]("ngModel",a.display),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,"widget."+a.type)," ")}}var d=new i.InjectionToken("DisplayWidgetTypesPanelData"),u=function(){function e(e){this.data=e,this.types=this.data.types}return e.prototype.update=function(){this.data.typesUpdated(this.types)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](d))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-widget-types-panel"]],decls:2,vars:1,consts:[["fxLayout","column",1,"mat-content","mat-padding"],["style","padding-bottom: 8px;",3,"ngModel","ngModelChange",4,"ngFor","ngForOf"],[2,"padding-bottom","8px",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,c,3,4,"mat-checkbox",1),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",t.types))},directives:[a.f,r.NgForOf,o.MatCheckbox,s.NgControlStatus,s.NgModel],pipes:[l.TranslatePipe],styles:["[_nghost-%COMP%]{width:100%;height:100%;min-width:200px;overflow:hidden;background:#fff;border-radius:4px;box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12)}[_nghost-%COMP%]   .mat-content[_ngcontent-%COMP%]{overflow:hidden;background-color:#fff}[_nghost-%COMP%]   .mat-padding[_ngcontent-%COMP%]{padding:16px}"]}),e}();0,void 0},"0WnP":function(e,t,n){"use strict";n.d(t,"a",function(){return J});var i=n("mrSG"),a=n("fXoL"),r=n("3Pt+"),o=n("MBk6"),s=n("U3y+"),l=n("21Fy"),c=n("7JTo"),d=n("sYmb"),u=n("XiUz"),p=n("kmnG"),m=n("d3UM"),f=n("ofXK"),h=n("FKr1"),g=n("89S7"),A=n("8lD5"),b=n("EdYI"),y=n("NFeN"),v=n("Qu3c"),C=n("qFsG"),x=n("6XAR"),w=n("1jcm"),S=n("+Xys"),E=n("IVsW"),I=n("16lU");function O(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",8),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.aliasFilterTypeTranslations.get(n))," ")}}function T(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"alias.filter-type-required")," "))}function F(e,t){1&e&&a["\u0275\u0275element"](0,"tb-entity-select",9)}function B(e,t){if(1&e&&(a["\u0275\u0275element"](0,"tb-entity-type-select",10),a["\u0275\u0275element"](1,"tb-entity-list",11)),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("allowedEntityTypes",n.allowedEntityTypes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("entityType",n.filterFormGroup.get("entityType").value)}}function M(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"entity.entity-name-filter-required")," "))}function P(e,t){if(1&e&&(a["\u0275\u0275element"](0,"tb-entity-type-select",10),a["\u0275\u0275elementStart"](1,"mat-form-field",1),a["\u0275\u0275elementStart"](2,"mat-label",2),a["\u0275\u0275text"](3,"entity.name-starts-with"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"mat-icon",12),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275text"](6,"help"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](7,"input",13),a["\u0275\u0275template"](8,M,3,3,"mat-error",5),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("allowedEntityTypes",n.allowedEntityTypes),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](5,3,"entity.help-text")),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",n.filterFormGroup.get("entityNameFilter").hasError("required"))}}function D(e,t){if(1&e&&a["\u0275\u0275element"](0,"tb-entity-type-select",10),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("allowedEntityTypes",n.allowedEntityTypes)}}function k(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-form-field",14),a["\u0275\u0275elementStart"](1,"mat-label",2),a["\u0275\u0275text"](2,"alias.state-entity-parameter-name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"input",15),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"div",16),a["\u0275\u0275elementStart"](6,"label",17),a["\u0275\u0275text"](7),a["\u0275\u0275pipe"](8,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](9,"tb-entity-select",18),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](4,2,"alias.default-entity-parameter-name")),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](8,4,"alias.default-state-entity")))}function _(e,t){if(1&e&&(a["\u0275\u0275element"](0,"tb-entity-subtype-autocomplete",19),a["\u0275\u0275elementStart"](1,"mat-form-field",1),a["\u0275\u0275elementStart"](2,"mat-label",2),a["\u0275\u0275text"](3,"asset.name-starts-with"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"mat-icon",12),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275text"](6,"help"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](7,"input",20),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("entityType",n.entityType.ASSET),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](5,2,"asset.help-text"))}}function L(e,t){if(1&e&&(a["\u0275\u0275element"](0,"tb-entity-subtype-autocomplete",21),a["\u0275\u0275elementStart"](1,"mat-form-field",1),a["\u0275\u0275elementStart"](2,"mat-label",2),a["\u0275\u0275text"](3,"device.name-starts-with"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"mat-icon",12),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275text"](6,"help"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](7,"input",22),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("entityType",n.entityType.DEVICE),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](5,2,"device.help-text"))}}function j(e,t){if(1&e&&(a["\u0275\u0275element"](0,"tb-entity-subtype-autocomplete",23),a["\u0275\u0275elementStart"](1,"mat-form-field",1),a["\u0275\u0275elementStart"](2,"mat-label",2),a["\u0275\u0275text"](3,"entity-view.name-starts-with"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"mat-icon",12),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275text"](6,"help"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](7,"input",24),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("entityType",n.entityType.ENTITY_VIEW),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](5,2,"entity-view.help-text"))}}function N(e,t){if(1&e&&(a["\u0275\u0275element"](0,"tb-entity-subtype-autocomplete",25),a["\u0275\u0275elementStart"](1,"mat-form-field",1),a["\u0275\u0275elementStart"](2,"mat-label",2),a["\u0275\u0275text"](3,"edge.name-starts-with"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"input",26),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("entityType",n.entityType.EDGE)}}function R(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",32),a["\u0275\u0275element"](1,"tb-entity-select",41),a["\u0275\u0275elementEnd"]())}function U(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",32),a["\u0275\u0275elementStart"](1,"mat-form-field",42),a["\u0275\u0275elementStart"](2,"mat-label",2),a["\u0275\u0275text"](3,"alias.state-entity-parameter-name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"input",15),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",43),a["\u0275\u0275elementStart"](7,"label",17),a["\u0275\u0275text"](8),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](10,"tb-entity-select",18),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](5,2,"alias.default-entity-parameter-name")),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](9,4,"alias.default-state-entity")))}function V(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",8),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.directionTypeTranslations.get(i.directionTypeEnum[n]))," ")}}function Q(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"section",27),a["\u0275\u0275elementStart"](1,"label",17),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"section",28),a["\u0275\u0275element"](5,"mat-slide-toggle",29),a["\u0275\u0275elementStart"](6,"label",30),a["\u0275\u0275text"](7,"alias.root-state-entity"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,R,2,0,"div",31),a["\u0275\u0275template"](9,U,11,6,"div",31),a["\u0275\u0275elementStart"](10,"div",32),a["\u0275\u0275elementStart"](11,"section",28),a["\u0275\u0275element"](12,"mat-slide-toggle",33),a["\u0275\u0275elementStart"](13,"label",30),a["\u0275\u0275text"](14,"alias.last-level-relation"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"div",34),a["\u0275\u0275elementStart"](16,"mat-form-field",35),a["\u0275\u0275elementStart"](17,"mat-label",2),a["\u0275\u0275text"](18,"relation.direction"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"mat-select",36),a["\u0275\u0275template"](20,V,3,4,"mat-option",4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"mat-form-field",37),a["\u0275\u0275elementStart"](22,"mat-label",2),a["\u0275\u0275text"](23,"alias.max-relation-level"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](24,"input",38),a["\u0275\u0275pipe"](25,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"div",39),a["\u0275\u0275text"](27,"relation.relation-filters"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](28,"tb-relation-filters",40),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](3,6,"alias.root-entity")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",!n.filterFormGroup.get("rootStateEntity").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.filterFormGroup.get("rootStateEntity").value),a["\u0275\u0275advance"](11),a["\u0275\u0275property"]("ngForOf",n.directionTypes),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](25,8,"alias.unlimited-level")),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("allowedEntityTypes",n.allowedEntityTypes)}}function G(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",32),a["\u0275\u0275element"](1,"tb-entity-select",41),a["\u0275\u0275elementEnd"]())}function H(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",32),a["\u0275\u0275elementStart"](1,"mat-form-field",42),a["\u0275\u0275elementStart"](2,"mat-label",2),a["\u0275\u0275text"](3,"alias.state-entity-parameter-name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"input",15),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",43),a["\u0275\u0275elementStart"](7,"label",17),a["\u0275\u0275text"](8),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](10,"tb-entity-select",18),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](5,2,"alias.default-entity-parameter-name")),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](9,4,"alias.default-state-entity")))}function K(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",8),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.directionTypeTranslations.get(i.directionTypeEnum[n]))," ")}}function q(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"label",17),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"section",28),a["\u0275\u0275element"](4,"mat-slide-toggle",29),a["\u0275\u0275elementStart"](5,"label",30),a["\u0275\u0275text"](6,"alias.root-state-entity"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](7,G,2,0,"div",31),a["\u0275\u0275template"](8,H,11,6,"div",31),a["\u0275\u0275elementStart"](9,"div",32),a["\u0275\u0275elementStart"](10,"section",28),a["\u0275\u0275element"](11,"mat-slide-toggle",33),a["\u0275\u0275elementStart"](12,"label",30),a["\u0275\u0275text"](13,"alias.last-level-relation"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"div",34),a["\u0275\u0275elementStart"](15,"mat-form-field",35),a["\u0275\u0275elementStart"](16,"mat-label",2),a["\u0275\u0275text"](17,"relation.direction"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"mat-select",36),a["\u0275\u0275template"](19,K,3,4,"mat-option",4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](20,"mat-form-field",37),a["\u0275\u0275elementStart"](21,"mat-label",2),a["\u0275\u0275text"](22,"alias.max-relation-level"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](23,"input",38),a["\u0275\u0275pipe"](24,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](25,"div",44),a["\u0275\u0275text"](26,"relation.relation-type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](27,"tb-relation-type-autocomplete",45)),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](2,5,"alias.root-entity")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",!n.filterFormGroup.get("rootStateEntity").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.filterFormGroup.get("rootStateEntity").value),a["\u0275\u0275advance"](11),a["\u0275\u0275property"]("ngForOf",n.directionTypes),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](24,7,"alias.unlimited-level"))}}function z(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",46),a["\u0275\u0275text"](1,"asset.asset-types"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](2,"tb-entity-subtype-list",47)),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("entityType",n.entityType.ASSET)}}function W(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",46),a["\u0275\u0275text"](1,"device.device-types"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](2,"tb-entity-subtype-list",48)),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("entityType",n.entityType.DEVICE)}}function X(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",46),a["\u0275\u0275text"](1,"edge.edge-types"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](2,"tb-entity-subtype-list",49)),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("entityType",n.entityType.EDGE)}}function $(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",46),a["\u0275\u0275text"](1,"entity-view.entity-view-types"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](2,"tb-entity-subtype-list",50)),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("entityType",n.entityType.ENTITY_VIEW)}}var J=function(){function e(e,t,n){this.translate=e,this.entityService=t,this.fb=n,this.resolveMultipleChanged=new a.EventEmitter,this.aliasFilterType=o.a,this.aliasFilterTypeTranslations=o.b,this.entityType=s.b,this.directionTypes=Object.keys(c.b),this.directionTypeTranslations=c.g,this.directionTypeEnum=c.b,this.propagateChange=null}return e.prototype.ngOnInit=function(){var e=this;this.aliasFilterTypes=this.entityService.getAliasFilterTypesByEntityTypes(this.allowedEntityTypes),this.entityFilterFormGroup=this.fb.group({type:[null,[r.Validators.required]]}),this.entityFilterFormGroup.get("type").valueChanges.subscribe(function(t){e.filterTypeChanged(t)}),this.entityFilterFormGroup.valueChanges.subscribe(function(){e.updateModel()}),this.filterFormGroup=this.fb.group({})},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){this.disabled=e},e.prototype.writeValue=function(e){e||(e={type:null,resolveMultiple:this.resolveMultiple}),this.entityFilterFormGroup.get("type").patchValue(e.type,{emitEvent:!1}),e&&e.type&&this.updateFilterFormGroup(e.type,e)},e.prototype.updateFilterFormGroup=function(e,t){var n=this;switch(e){case o.a.singleEntity:this.filterFormGroup=this.fb.group({singleEntity:[t?t.singleEntity:null,[r.Validators.required]]});break;case o.a.entityList:this.filterFormGroup=this.fb.group({entityType:[t?t.entityType:null,[r.Validators.required]],entityList:[t?t.entityList:[],[r.Validators.required]]});break;case o.a.entityName:this.filterFormGroup=this.fb.group({entityType:[t?t.entityType:null,[r.Validators.required]],entityNameFilter:[t?t.entityNameFilter:"",[r.Validators.required]]});break;case o.a.entityType:this.filterFormGroup=this.fb.group({entityType:[t?t.entityType:null,[r.Validators.required]]});break;case o.a.stateEntity:this.filterFormGroup=this.fb.group({stateEntityParamName:[t?t.stateEntityParamName:null,[]],defaultStateEntity:[t?t.defaultStateEntity:null,[]]});break;case o.a.assetType:this.filterFormGroup=this.fb.group({assetType:[t?t.assetType:null,[r.Validators.required]],assetNameFilter:[t?t.assetNameFilter:"",[]]});break;case o.a.deviceType:this.filterFormGroup=this.fb.group({deviceType:[t?t.deviceType:null,[r.Validators.required]],deviceNameFilter:[t?t.deviceNameFilter:"",[]]});break;case o.a.edgeType:this.filterFormGroup=this.fb.group({edgeType:[t?t.edgeType:null,[r.Validators.required]],edgeNameFilter:[t?t.edgeNameFilter:"",[]]});break;case o.a.entityViewType:this.filterFormGroup=this.fb.group({entityViewType:[t?t.entityViewType:null,[r.Validators.required]],entityViewNameFilter:[t?t.entityViewNameFilter:"",[]]});break;case o.a.apiUsageState:this.filterFormGroup=this.fb.group({});break;case o.a.relationsQuery:case o.a.assetSearchQuery:case o.a.deviceSearchQuery:case o.a.edgeSearchQuery:case o.a.entityViewSearchQuery:this.filterFormGroup=this.fb.group({rootStateEntity:[!!t&&t.rootStateEntity,[]],stateEntityParamName:[t?t.stateEntityParamName:null,[]],defaultStateEntity:[t?t.defaultStateEntity:null,[]],rootEntity:[t?t.rootEntity:null,t&&t.rootStateEntity?[]:[r.Validators.required]],direction:[t?t.direction:c.b.FROM,[r.Validators.required]],maxLevel:[t?t.maxLevel:1,[]],fetchLastLevelOnly:[!!t&&t.fetchLastLevelOnly,[]]}),this.filterFormGroup.get("rootStateEntity").valueChanges.subscribe(function(e){n.filterFormGroup.get("rootEntity").setValidators(e?[]:[r.Validators.required]),n.filterFormGroup.get("rootEntity").updateValueAndValidity()}),e===o.a.relationsQuery?this.filterFormGroup.addControl("filters",this.fb.control(t?t.filters:[],[])):(this.filterFormGroup.addControl("relationType",this.fb.control(t?t.relationType:null,[])),e===o.a.assetSearchQuery?this.filterFormGroup.addControl("assetTypes",this.fb.control(t?t.assetTypes:[],[r.Validators.required])):e===o.a.deviceSearchQuery?this.filterFormGroup.addControl("deviceTypes",this.fb.control(t?t.deviceTypes:[],[r.Validators.required])):e===o.a.edgeSearchQuery?this.filterFormGroup.addControl("edgeTypes",this.fb.control(t?t.edgeTypes:[],[r.Validators.required])):e===o.a.entityViewSearchQuery&&this.filterFormGroup.addControl("entityViewTypes",this.fb.control(t?t.entityViewTypes:[],[r.Validators.required])))}this.filterFormGroup.valueChanges.subscribe(function(){n.updateModel()})},e.prototype.filterTypeChanged=function(e){var t=!0;e!==o.a.singleEntity&&e!==o.a.stateEntity&&e!==o.a.apiUsageState||(t=!1),this.resolveMultiple!==t&&this.resolveMultipleChanged.emit(t),this.updateFilterFormGroup(e)},e.prototype.updateModel=function(){var e=null;this.entityFilterFormGroup.valid&&this.filterFormGroup.valid&&(e={type:this.entityFilterFormGroup.get("type").value,resolveMultiple:this.resolveMultiple},e=Object(i.a)(Object(i.a)({},e),this.filterFormGroup.value)),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](d.TranslateService),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](r.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-entity-filter"]],inputs:{disabled:"disabled",allowedEntityTypes:"allowedEntityTypes",resolveMultiple:"resolveMultiple"},outputs:{resolveMultipleChanged:"resolveMultipleChanged"},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)(function(){return e}),multi:!0}])],decls:23,vars:20,consts:[["fxLayout","column",1,"tb-entity-filter",3,"formGroup"],[1,"mat-block"],["translate",""],["required","","formControlName","type"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["fxLayout","column",3,"formGroup","ngSwitch"],[3,"ngSwitchCase"],[3,"value"],["required","","useAliasEntityTypes","true","formControlName","singleEntity"],["required","","showLabel","","formControlName","entityType",3,"allowedEntityTypes"],["required","","formControlName","entityList",3,"entityType"],["aria-hidden","false","aria-label","help-icon","matSuffix","",1,"mat-primary",2,"cursor","pointer",3,"matTooltip"],["matInput","","formControlName","entityNameFilter","required",""],["floatLabel","always",1,"mat-block"],["matInput","","formControlName","stateEntityParamName",3,"placeholder"],["fxLayout","column"],[1,"tb-small"],["fxFlex","","useAliasEntityTypes","true","formControlName","defaultStateEntity"],["required","","formControlName","assetType",3,"entityType"],["matInput","","formControlName","assetNameFilter"],["required","","formControlName","deviceType",3,"entityType"],["matInput","","formControlName","deviceNameFilter"],["required","","formControlName","entityViewType",3,"entityType"],["matInput","","formControlName","entityViewNameFilter"],["required","","formControlName","edgeType",3,"entityType"],["matInput","","formControlName","edgeNameFilter"],["fxLayout","column","id","relationsQueryFilter"],["fxLayout","row","fxLayoutAlign","start center",1,"tb-root-state-entity-switch",2,"padding-left","0"],["formControlName","rootStateEntity",1,"root-state-entity-switch"],["translate","",1,"tb-small","root-state-entity-label"],["fxFlex","","fxLayout","row",4,"ngIf"],["fxFlex","","fxLayout","row"],["formControlName","fetchLastLevelOnly",1,"root-state-entity-switch"],["fxFlex","","fxLayoutGap","8px","fxLayout","row","fxLayout.xs","column"],[1,"mat-block",2,"min-width","100px"],["required","","formControlName","direction"],["fxFlex","","floatLabel","always",1,"mat-block"],["matInput","","type","number","min","1","step","1","formControlName","maxLevel",3,"placeholder"],["translate","",1,"mat-caption",2,"padding-bottom","10px","color","rgba(0,0,0,0.57)"],["formControlName","filters",3,"allowedEntityTypes"],["fxFlex","","required","","useAliasEntityTypes","true","formControlName","rootEntity"],["floatLabel","always",1,"mat-block",2,"margin-top","14px","padding-right","8px"],["fxFlex","","fxLayout","column"],["translate","",1,"mat-caption",2,"color","rgba(0,0,0,0.57)"],["fxFlex","","formControlName","relationType"],["translate","",1,"mat-caption","tb-required",2,"color","rgba(0,0,0,0.57)"],["required","","formControlName","assetTypes",3,"entityType"],["required","","formControlName","deviceTypes",3,"entityType"],["required","","formControlName","edgeTypes",3,"entityType"],["required","","formControlName","entityViewTypes",3,"entityType"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"mat-form-field",1),a["\u0275\u0275elementStart"](2,"mat-label",2),a["\u0275\u0275text"](3,"alias.filter-type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"mat-select",3),a["\u0275\u0275template"](5,O,3,4,"mat-option",4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](6,T,3,3,"mat-error",5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"section",6),a["\u0275\u0275template"](8,F,1,0,"ng-template",7),a["\u0275\u0275template"](9,B,2,2,"ng-template",7),a["\u0275\u0275template"](10,P,9,5,"ng-template",7),a["\u0275\u0275template"](11,D,1,1,"ng-template",7),a["\u0275\u0275template"](12,k,10,6,"ng-template",7),a["\u0275\u0275template"](13,_,8,4,"ng-template",7),a["\u0275\u0275template"](14,L,8,4,"ng-template",7),a["\u0275\u0275template"](15,j,8,4,"ng-template",7),a["\u0275\u0275template"](16,N,5,1,"ng-template",7),a["\u0275\u0275template"](17,Q,29,10,"ng-template",7),a["\u0275\u0275template"](18,q,28,9,"ng-template",7),a["\u0275\u0275template"](19,z,3,1,"ng-template",7),a["\u0275\u0275template"](20,W,3,1,"ng-template",7),a["\u0275\u0275template"](21,X,3,1,"ng-template",7),a["\u0275\u0275template"](22,$,3,1,"ng-template",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.entityFilterFormGroup),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngForOf",t.aliasFilterTypes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.entityFilterFormGroup.get("type").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",t.filterFormGroup)("ngSwitch",t.entityFilterFormGroup.get("type").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.aliasFilterType.singleEntity),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.aliasFilterType.entityList),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.aliasFilterType.entityName),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.aliasFilterType.entityType),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.aliasFilterType.stateEntity),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.aliasFilterType.assetType),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.aliasFilterType.deviceType),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.aliasFilterType.entityViewType),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.aliasFilterType.edgeType),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.aliasFilterType.relationsQuery),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.entityFilterFormGroup.get("type").value===t.aliasFilterType.assetSearchQuery||t.entityFilterFormGroup.get("type").value===t.aliasFilterType.deviceSearchQuery||t.entityFilterFormGroup.get("type").value===t.aliasFilterType.edgeSearchQuery||t.entityFilterFormGroup.get("type").value===t.aliasFilterType.entityViewSearchQuery?t.entityFilterFormGroup.get("type").value:""),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.aliasFilterType.assetSearchQuery),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.aliasFilterType.deviceSearchQuery),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.aliasFilterType.edgeSearchQuery),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.aliasFilterType.entityViewSearchQuery))},directives:[u.f,r.NgControlStatusGroup,r.FormGroupDirective,p.MatFormField,p.MatLabel,d.TranslateDirective,m.MatSelect,r.RequiredValidator,r.NgControlStatus,r.FormControlName,f.NgForOf,f.NgIf,f.NgSwitch,f.NgSwitchCase,h.MatOption,p.MatError,g.a,A.a,b.a,y.MatIcon,p.MatSuffix,v.MatTooltip,C.MatInput,r.DefaultValueAccessor,u.b,x.a,u.e,w.MatSlideToggle,u.g,r.NumberValueAccessor,S.a,E.a,I.a],pipes:[d.TranslatePipe],styles:["[_nghost-%COMP%]   .tb-entity-filter[_ngcontent-%COMP%]   #relationsQueryFilter[_ngcontent-%COMP%]{padding-top:20px}[_nghost-%COMP%]   .tb-entity-filter[_ngcontent-%COMP%]   #relationsQueryFilter[_ngcontent-%COMP%]   tb-entity-select[_ngcontent-%COMP%]{min-height:92px}[_nghost-%COMP%]   .tb-entity-filter[_ngcontent-%COMP%]   .tb-root-state-entity-switch[_ngcontent-%COMP%]{padding-left:10px;padding-bottom:10px}[_nghost-%COMP%]   .tb-entity-filter[_ngcontent-%COMP%]   .tb-root-state-entity-switch[_ngcontent-%COMP%]   .root-state-entity-switch[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   .tb-entity-filter[_ngcontent-%COMP%]   .tb-root-state-entity-switch[_ngcontent-%COMP%]   .root-state-entity-label[_ngcontent-%COMP%]{margin:5px 0 5px 10px}"]}),e}();0,void 0},"0dMK":function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return d});var i=n("fXoL"),a=n("XiUz"),r=n("ofXK"),o=n("iOaI"),s=n("3Pt+");function l(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",2),i["\u0275\u0275elementStart"](1,"tb-aliases-entity-autocomplete",3),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.$implicit.value.currentEntity=e})("ngModelChange",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"]().currentAliasEntityChanged(e.key,e.value.currentEntity)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("alias",a.value.alias)("entityFilter",a.value.entityFilter)("ngModel",a.value.currentEntity)}}var c=new i.InjectionToken("AliasesEntitySelectPanelData"),d=function(){function e(e){this.data=e,this.entityAliasesInfo=this.data.entityAliasesInfo}return e.prototype.currentAliasEntityChanged=function(e,t){t&&this.data.aliasController.updateCurrentAliasEntity(e,t)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](c))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-aliases-entity-select-panel"]],decls:3,vars:3,consts:[["fxLayout","column",1,"mat-content","mat-padding"],["fxLayout","row",4,"ngFor","ngForOf"],["fxLayout","row"],["fxFlex","","required","",3,"alias","entityFilter","ngModel","ngModelChange"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,l,2,3,"div",1),i["\u0275\u0275pipe"](2,"keyvalue"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](2,1,t.entityAliasesInfo)))},directives:[a.f,r.NgForOf,o.a,a.b,s.RequiredValidator,s.NgControlStatus,s.NgModel],pipes:[r.KeyValuePipe],styles:["[_nghost-%COMP%]{min-width:300px;max-height:150px;overflow-x:hidden;overflow-y:auto;background:#fff;border-radius:4px;box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12)}@media (min-height:350px){[_nghost-%COMP%]{max-height:250px}}[_nghost-%COMP%]   .mat-content[_ngcontent-%COMP%]{background-color:#fff}"]}),e}();0,void 0},"10j8":function(e,t,n){"use strict";n.d(t,"a",function(){return U});var i=n("mrSG"),a=n("fXoL"),r=n("0IaG"),o=n("jtHE"),s=n("gmuX"),l=n("UZbx"),c=n("7ZKe"),d=n("vkgz"),u=n("l7P3"),p=n("tyNb"),m=n("ofXK"),f=n("sYmb"),h=n("3Pt+"),g=n("/t3+"),A=n("XiUz"),b=n("bTqV"),y=n("NFeN"),v=n("kmnG"),C=n("qFsG"),x=n("znSr"),w=n("bv9b"),S=n("H3So");function E(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",23)}function I(e,t){1&e&&a["\u0275\u0275element"](0,"div",24)}function O(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-form-field",13),a["\u0275\u0275elementStart"](1,"mat-label",11),a["\u0275\u0275text"](2,"alarm.start-time"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"input",27),a["\u0275\u0275elementEnd"]())}function T(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-form-field",13),a["\u0275\u0275elementStart"](1,"mat-label",11),a["\u0275\u0275text"](2,"alarm.end-time"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"input",28),a["\u0275\u0275elementEnd"]())}function F(e,t){1&e&&a["\u0275\u0275element"](0,"span",2)}function B(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",9),a["\u0275\u0275template"](1,O,4,0,"mat-form-field",25),a["\u0275\u0275template"](2,T,4,0,"mat-form-field",25),a["\u0275\u0275template"](3,F,1,0,"span",26),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.alarmFormGroup.get("startTime").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.alarmFormGroup.get("endTime").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!n.alarmFormGroup.get("startTime").value||!n.alarmFormGroup.get("endTime").value)}}function M(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-form-field",13),a["\u0275\u0275elementStart"](1,"mat-label",11),a["\u0275\u0275text"](2,"alarm.ack-time"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"input",29),a["\u0275\u0275elementEnd"]())}function P(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-form-field",13),a["\u0275\u0275elementStart"](1,"mat-label",11),a["\u0275\u0275text"](2,"alarm.clear-time"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"input",30),a["\u0275\u0275elementEnd"]())}function D(e,t){1&e&&a["\u0275\u0275element"](0,"span",2)}function k(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",9),a["\u0275\u0275template"](1,M,4,0,"mat-form-field",25),a["\u0275\u0275template"](2,P,4,0,"mat-form-field",25),a["\u0275\u0275template"](3,D,1,0,"span",26),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.alarmFormGroup.get("ackTime").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.alarmFormGroup.get("clearTime").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!n.alarmFormGroup.get("ackTime").value||!n.alarmFormGroup.get("clearTime").value)}}function _(e,t){1&e&&(a["\u0275\u0275element"](0,"tb-json-object-edit",31),a["\u0275\u0275pipe"](1,"translate")),2&e&&a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](1,1,"alarm.details"))}function L(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",34),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).acknowledge()}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,i.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](3,4,"alarm.acknowledge")," ")}}function j(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",34),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).clear()}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,i.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](3,4,"alarm.clear")," ")}}function N(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",32),a["\u0275\u0275template"](1,L,4,6,"button",33),a["\u0275\u0275template"](2,j,4,6,"button",33),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",i.allowAcknowledgment&&(n.status===i.alarmStatuses.ACTIVE_UNACK||n.status===i.alarmStatuses.CLEARED_UNACK)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",i.allowClear&&(n.status===i.alarmStatuses.ACTIVE_ACK||n.status===i.alarmStatuses.ACTIVE_UNACK))}}var R=function(e){return{fontWeight:"bold",color:e}},U=function(e){function t(t,n,i,a,r,s,c,u){var p=e.call(this,t,n,c)||this;return p.store=t,p.router=n,p.datePipe=i,p.translate=a,p.data=r,p.alarmService=s,p.dialogRef=c,p.fb=u,p.loadAlarmSubject=new o.a,p.alarm$=p.loadAlarmSubject.asObservable().pipe(Object(d.a)(function(e){return p.loadAlarmFields(e)})),p.alarmSeverityColorsMap=l.g,p.alarmStatuses=l.d,p.alarmUpdated=!1,p.allowAcknowledgment=r.allowAcknowledgment,p.allowClear=r.allowClear,p.displayDetails=r.displayDetails,p.alarmFormGroup=p.fb.group({createdTime:[""],originatorName:[""],startTime:[""],endTime:[""],ackTime:[""],clearTime:[""],type:[""],alarmSeverity:[""],alarmStatus:[""],alarmDetails:[null]}),p.loadAlarm(),p}return Object(i.d)(t,e),t.prototype.loadAlarm=function(){var e=this;this.alarmService.getAlarmInfo(this.data.alarmId).subscribe(function(t){return e.loadAlarmSubject.next(t)})},t.prototype.loadAlarmFields=function(e){this.alarmFormGroup.get("createdTime").patchValue(this.datePipe.transform(e.createdTime,"yyyy-MM-dd HH:mm:ss")),this.alarmFormGroup.get("originatorName").patchValue(e.originatorName),e.startTs&&this.alarmFormGroup.get("startTime").patchValue(this.datePipe.transform(e.startTs,"yyyy-MM-dd HH:mm:ss")),e.endTs&&this.alarmFormGroup.get("endTime").patchValue(this.datePipe.transform(e.endTs,"yyyy-MM-dd HH:mm:ss")),e.ackTs&&this.alarmFormGroup.get("ackTime").patchValue(this.datePipe.transform(e.ackTs,"yyyy-MM-dd HH:mm:ss")),e.clearTs&&this.alarmFormGroup.get("clearTime").patchValue(this.datePipe.transform(e.clearTs,"yyyy-MM-dd HH:mm:ss")),this.alarmFormGroup.get("type").patchValue(e.type),this.alarmFormGroup.get("alarmSeverity").patchValue(this.translate.instant(l.h.get(e.severity))),this.alarmFormGroup.get("alarmStatus").patchValue(this.translate.instant(l.i.get(e.status))),this.alarmFormGroup.get("alarmDetails").patchValue(e.details)},t.prototype.ngOnInit=function(){},t.prototype.close=function(){this.dialogRef.close(this.alarmUpdated)},t.prototype.acknowledge=function(){var e=this;this.alarmService.ackAlarm(this.data.alarmId).subscribe(function(){e.alarmUpdated=!0,e.loadAlarm()})},t.prototype.clear=function(){var e=this;this.alarmService.clearAlarm(this.data.alarmId).subscribe(function(){e.alarmUpdated=!0,e.loadAlarm()})},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](u.Store),a["\u0275\u0275directiveInject"](p.Router),a["\u0275\u0275directiveInject"](m.DatePipe),a["\u0275\u0275directiveInject"](f.TranslateService),a["\u0275\u0275directiveInject"](r.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](r.MatDialogRef),a["\u0275\u0275directiveInject"](h.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-alarm-details-dialog"]],features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:50,vars:30,consts:[[2,"min-width","600px",3,"formGroup"],["color","accent"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["fxLayout","row","fxLayoutGap","6px"],[1,"mat-block"],["translate",""],["matInput","","formControlName","createdTime","readonly",""],["fxFlex","",1,"mat-block"],["matInput","","formControlName","originatorName","readonly",""],["fxLayout","row","fxLayoutGap","6px",4,"ngIf"],["matInput","","formControlName","type","readonly",""],["matInput","","formControlName","alarmSeverity","readonly","",3,"ngStyle"],["matInput","","formControlName","alarmStatus","readonly",""],["formControlName","alarmDetails","readonly","",3,"label",4,"ngIf"],["mat-dialog-actions","","fxLayout","row"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["fxLayout","row","fxLayoutGap","8px",4,"ngIf"],["color","warn","mode","indeterminate"],[2,"height","4px"],["fxFlex","","class","mat-block",4,"ngIf"],["fxFlex","",4,"ngIf"],["matInput","","formControlName","startTime","readonly",""],["matInput","","formControlName","endTime","readonly",""],["matInput","","formControlName","ackTime","readonly",""],["matInput","","formControlName","clearTime","readonly",""],["formControlName","alarmDetails","readonly","",3,"label"],["fxLayout","row","fxLayoutGap","8px"],["mat-raised-button","","color","accent","type","button",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","accent","type","button",3,"disabled","click"]],template:function(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",function(){return t.close()}),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,E,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,I,1,0,"div",6),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275elementStart"](14,"fieldset",8),a["\u0275\u0275pipe"](15,"async"),a["\u0275\u0275elementStart"](16,"div",9),a["\u0275\u0275elementStart"](17,"mat-form-field",10),a["\u0275\u0275elementStart"](18,"mat-label",11),a["\u0275\u0275text"](19,"alarm.created-time"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](20,"input",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"mat-form-field",13),a["\u0275\u0275elementStart"](22,"mat-label",11),a["\u0275\u0275text"](23,"alarm.originator"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](24,"input",14),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](25,B,4,3,"div",15),a["\u0275\u0275template"](26,k,4,3,"div",15),a["\u0275\u0275elementStart"](27,"div",9),a["\u0275\u0275elementStart"](28,"mat-form-field",13),a["\u0275\u0275elementStart"](29,"mat-label",11),a["\u0275\u0275text"](30,"alarm.type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](31,"input",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](32,"mat-form-field",13),a["\u0275\u0275elementStart"](33,"mat-label",11),a["\u0275\u0275text"](34,"alarm.severity"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](35,"input",17),a["\u0275\u0275pipe"](36,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](37,"mat-form-field",13),a["\u0275\u0275elementStart"](38,"mat-label",11),a["\u0275\u0275text"](39,"alarm.status"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](40,"input",18),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](41,_,2,3,"tb-json-object-edit",19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](42,"div",20),a["\u0275\u0275elementStart"](43,"button",21),a["\u0275\u0275listener"]("click",function(){return t.close()}),a["\u0275\u0275pipe"](44,"async"),a["\u0275\u0275text"](45),a["\u0275\u0275pipe"](46,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](47,"span",2),a["\u0275\u0275template"](48,N,3,2,"div",22),a["\u0275\u0275pipe"](49,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n;a["\u0275\u0275property"]("formGroup",t.alarmFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,12,"alarm.alarm-details")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,14,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,16,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](15,18,t.isLoading$)),a["\u0275\u0275advance"](11),a["\u0275\u0275property"]("ngIf",t.alarmFormGroup.get("startTime").value||t.alarmFormGroup.get("endTime").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.alarmFormGroup.get("ackTime").value||t.alarmFormGroup.get("clearTime").value),a["\u0275\u0275advance"](9),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](28,R,t.alarmSeverityColorsMap.get(null==(n=a["\u0275\u0275pipeBind1"](36,20,t.alarm$))?null:n.severity))),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",t.displayDetails),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](44,22,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](46,24,"action.close")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](49,26,t.alarm$))}},directives:[h["\u0275angular_packages_forms_forms_ba"],h.NgControlStatusGroup,h.FormGroupDirective,g.MatToolbar,A.b,b.MatButton,y.MatIcon,m.NgIf,r.MatDialogContent,A.f,A.g,v.MatFormField,v.MatLabel,f.TranslateDirective,C.MatInput,h.DefaultValueAccessor,h.NgControlStatus,h.FormControlName,m.NgStyle,x.e,r.MatDialogActions,w.MatProgressBar,S.a],pipes:[f.TranslatePipe,m.AsyncPipe],encapsulation:2}),t}(s.a);0,void 0},"10n/":function(e,t,n){"use strict";n.d(t,"a",function(){return I});var i=n("fXoL"),a=n("3Pt+"),r=n("JIJk"),o=n("XNiG"),s=n("1G5W"),l=n("//Q6"),c=n("kmnG"),d=n("znSr"),u=n("sYmb"),p=n("d3UM"),m=n("ofXK"),f=n("FKr1"),h=n("qFsG"),g=n("gd03"),A=n("cNbA");function b(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",7),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.credentialTypeNamesMap.get(n)," ")}}function y(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device.access-token-required")," "))}function v(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device.access-token-invalid")," "))}function C(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-form-field",8),i["\u0275\u0275elementStart"](1,"mat-label",2),i["\u0275\u0275text"](2,"device.access-token"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](3,"input",9),i["\u0275\u0275template"](4,y,3,3,"mat-error",10),i["\u0275\u0275template"](5,v,3,3,"mat-error",10),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",n.deviceCredentialsFormGroup.get("credentialsId").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.deviceCredentialsFormGroup.get("credentialsId").hasError("pattern"))}}function x(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device.rsa-key-required")," "))}function w(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-form-field",8),i["\u0275\u0275elementStart"](1,"mat-label",2),i["\u0275\u0275text"](2,"device.rsa-key"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](3,"textarea",11),i["\u0275\u0275template"](4,x,3,3,"mat-error",10),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",n.deviceCredentialsFormGroup.get("credentialsValue").hasError("required"))}}function S(e,t){1&e&&i["\u0275\u0275element"](0,"tb-device-credentials-mqtt-basic",12)}function E(e,t){1&e&&i["\u0275\u0275element"](0,"tb-device-credentials-lwm2m",12)}var I=function(){function e(e){var t=this;this.fb=e,this.deviceTransportTypeValue=r.j.DEFAULT,this.destroy$=new o.b,this.deviceCredentialsType=r.g,this.credentialsTypes=r.z.get(r.j.DEFAULT),this.credentialTypeNamesMap=r.y,this.propagateChange=function(e){},this.deviceCredentialsFormGroup=this.fb.group({credentialsType:[r.g.ACCESS_TOKEN],credentialsId:[null],credentialsValue:[null]}),this.deviceCredentialsFormGroup.valueChanges.pipe(Object(s.a)(this.destroy$)).subscribe(function(){t.updateView()}),this.deviceCredentialsFormGroup.get("credentialsType").valueChanges.pipe(Object(s.a)(this.destroy$)).subscribe(function(){t.credentialsTypeChanged()})}return Object.defineProperty(e.prototype,"deviceTransportType",{get:function(){return this.deviceTransportTypeValue},set:function(e){if(e){this.deviceTransportTypeValue=e,this.credentialsTypes=r.z.get(e);var t=this.deviceCredentialsFormGroup.get("credentialsType").value;this.credentialsTypes.includes(t)||this.deviceCredentialsFormGroup.get("credentialsType").patchValue(this.credentialsTypes[0],{onlySelf:!0})}},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.disabled&&this.deviceCredentialsFormGroup.disable({emitEvent:!1})},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.prototype.writeValue=function(e){if(Object(l.o)(e)){var t=this.credentialsTypes.includes(e.credentialsType)?e.credentialsType:this.credentialsTypes[0];this.deviceCredentialsFormGroup.patchValue({credentialsType:t,credentialsId:e.credentialsId,credentialsValue:e.credentialsValue},{emitEvent:!1}),this.updateValidators()}},e.prototype.updateView=function(){var e=this.deviceCredentialsFormGroup.value;this.propagateChange(e)},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.deviceCredentialsFormGroup.disable({emitEvent:!1}):(this.deviceCredentialsFormGroup.enable({emitEvent:!1}),this.updateValidators(),this.deviceCredentialsFormGroup.updateValueAndValidity())},e.prototype.validate=function(e){return this.deviceCredentialsFormGroup.valid?null:{deviceCredentials:{valid:!1}}},e.prototype.credentialsTypeChanged=function(){this.deviceCredentialsFormGroup.patchValue({credentialsId:null,credentialsValue:null}),this.updateValidators()},e.prototype.updateValidators=function(){switch(this.deviceCredentialsFormGroup.get("credentialsType").value){case r.g.ACCESS_TOKEN:this.deviceCredentialsFormGroup.get("credentialsId").setValidators([a.Validators.required,a.Validators.pattern(/^.{1,32}$/)]),this.deviceCredentialsFormGroup.get("credentialsId").updateValueAndValidity({emitEvent:!1}),this.deviceCredentialsFormGroup.get("credentialsValue").setValidators([]),this.deviceCredentialsFormGroup.get("credentialsValue").updateValueAndValidity({emitEvent:!1});break;default:this.deviceCredentialsFormGroup.get("credentialsValue").setValidators([a.Validators.required]),this.deviceCredentialsFormGroup.get("credentialsValue").updateValueAndValidity({emitEvent:!1}),this.deviceCredentialsFormGroup.get("credentialsId").setValidators([]),this.deviceCredentialsFormGroup.get("credentialsId").updateValueAndValidity({emitEvent:!1})}},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-device-credentials"]],inputs:{disabled:"disabled",deviceTransportType:"deviceTransportType"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:11,vars:8,consts:[[3,"formGroup"],[1,"mat-block",3,"fxShow"],["translate",""],["formControlName","credentialsType"],[3,"value",4,"ngFor","ngForOf"],[3,"ngSwitch"],[3,"ngSwitchCase"],[3,"value"],[1,"mat-block"],["matInput","","formControlName","credentialsId","required",""],[4,"ngIf"],["matInput","","formControlName","credentialsValue","cols","15","rows","5","required",""],["formControlName","credentialsValue"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"section",0),i["\u0275\u0275elementStart"](1,"mat-form-field",1),i["\u0275\u0275elementStart"](2,"mat-label",2),i["\u0275\u0275text"](3,"device.credentials-type"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mat-select",3),i["\u0275\u0275template"](5,b,2,2,"mat-option",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",5),i["\u0275\u0275template"](7,C,6,2,"ng-template",6),i["\u0275\u0275template"](8,w,5,1,"ng-template",6),i["\u0275\u0275template"](9,S,1,0,"ng-template",6),i["\u0275\u0275template"](10,E,1,0,"ng-template",6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.deviceCredentialsFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow",(null==t.credentialsTypes?null:t.credentialsTypes.length)>1),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngForOf",t.credentialsTypes),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitch",t.deviceCredentialsFormGroup.get("credentialsType").value),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",t.deviceCredentialsType.ACCESS_TOKEN),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",t.deviceCredentialsType.X509_CERTIFICATE),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",t.deviceCredentialsType.MQTT_BASIC),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",t.deviceCredentialsType.LWM2M_CREDENTIALS))},directives:[a.NgControlStatusGroup,a.FormGroupDirective,c.MatFormField,d.d,c.MatLabel,u.TranslateDirective,p.MatSelect,a.NgControlStatus,a.FormControlName,m.NgForOf,m.NgSwitch,m.NgSwitchCase,f.MatOption,h.MatInput,a.DefaultValueAccessor,a.RequiredValidator,m.NgIf,c.MatError,g.a,A.a],pipes:[u.TranslatePipe],encapsulation:2}),e}();0,void 0},"1iWl":function(e,t,n){"use strict";n.d(t,"a",function(){return v}),n.d(t,"b",function(){return C});var i=n("fXoL"),a=n("UZbx"),r=n("FtGj"),o=n("rDax"),s=n("3Pt+"),l=n("XiUz"),c=n("kmnG"),d=n("sYmb"),u=n("d3UM"),p=n("ofXK"),m=n("A5z7"),f=n("bTqV"),h=n("FKr1"),g=n("NFeN");function A(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",13),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,a.alarmSearchStatusTranslationMap.get(n))," ")}}function b(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",13),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,a.alarmSeverityTranslationMap.get(a.alarmSeverityEnum[n]))," ")}}function y(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-chip",14),i["\u0275\u0275listener"]("removed",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"]().removeAlarmType(e)}),i["\u0275\u0275text"](1),i["\u0275\u0275elementStart"](2,"mat-icon",15),i["\u0275\u0275text"](3,"cancel"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit;i["\u0275\u0275property"]("selectable",!0)("removable",!0),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a," ")}}var v=new i.InjectionToken("AlarmFilterPanelData"),C=function(){function e(e,t,n){this.data=e,this.overlayRef=t,this.fb=n,this.separatorKeysCodes=[r.ENTER,r.COMMA,r.SEMICOLON],this.alarmSearchStatuses=[a.b.ACTIVE,a.b.CLEARED,a.b.ACK,a.b.UNACK],this.alarmSearchStatusTranslationMap=a.f,this.alarmSeverities=Object.keys(a.c),this.alarmSeverityEnum=a.c,this.alarmSeverityTranslationMap=a.h,this.alarmFilterFormGroup=this.fb.group({alarmStatusList:[this.data.statusList],alarmSeverityList:[this.data.severityList],alarmTypeList:[this.data.typeList]})}return e.prototype.alarmTypeList=function(){return this.alarmFilterFormGroup.get("alarmTypeList").value},e.prototype.removeAlarmType=function(e){var t=this.alarmFilterFormGroup.get("alarmTypeList").value,n=t.indexOf(e);n>=0&&(t.splice(n,1),this.alarmFilterFormGroup.get("alarmTypeList").setValue(t),this.alarmFilterFormGroup.get("alarmTypeList").markAsDirty())},e.prototype.addAlarmType=function(e){var t=e.input,n=e.value,i=this.alarmFilterFormGroup.get("alarmTypeList").value;(n||"").trim()&&(i.push(n.trim()),this.alarmFilterFormGroup.get("alarmTypeList").setValue(i),this.alarmFilterFormGroup.get("alarmTypeList").markAsDirty()),t&&(t.value="")},e.prototype.update=function(){this.result={statusList:this.alarmFilterFormGroup.get("alarmStatusList").value,severityList:this.alarmFilterFormGroup.get("alarmSeverityList").value,typeList:this.alarmFilterFormGroup.get("alarmTypeList").value},this.overlayRef.dispose()},e.prototype.cancel=function(){this.overlayRef.dispose()},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](v),i["\u0275\u0275directiveInject"](o.OverlayRef),i["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-alarm-filter-panel"]],decls:28,vars:22,consts:[["fxLayout","column",1,"mat-content","mat-padding",3,"formGroup","ngSubmit"],["fxFlex","","floatLabel","always",1,"mat-block"],["translate",""],["formControlName","alarmStatusList","multiple","",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["formControlName","alarmSeverityList","multiple","",3,"placeholder"],["formControlName","alarmTypeList"],["alarmTypeChipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["matChipInputAddOnBlur","",3,"placeholder","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["fxLayout","row","fxLayoutAlign","end center",1,"tb-panel-actions"],["type","button","mat-button","",3,"click"],["type","submit","mat-raised-button","","color","accent",3,"disabled"],[3,"value"],[3,"selectable","removable","removed"],["matChipRemove",""]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"form",0),i["\u0275\u0275listener"]("ngSubmit",function(){return t.update()}),i["\u0275\u0275elementStart"](1,"mat-form-field",1),i["\u0275\u0275elementStart"](2,"mat-label",2),i["\u0275\u0275text"](3,"alarm.alarm-status-list"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mat-select",3),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275template"](6,A,3,4,"mat-option",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"mat-form-field",1),i["\u0275\u0275elementStart"](8,"mat-label",2),i["\u0275\u0275text"](9,"alarm.alarm-severity-list"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"mat-select",5),i["\u0275\u0275pipe"](11,"translate"),i["\u0275\u0275template"](12,b,3,4,"mat-option",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"mat-form-field",1),i["\u0275\u0275elementStart"](14,"mat-label",2),i["\u0275\u0275text"](15,"alarm.alarm-type-list"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"mat-chip-list",6,7),i["\u0275\u0275template"](18,y,4,3,"mat-chip",8),i["\u0275\u0275elementStart"](19,"input",9),i["\u0275\u0275listener"]("matChipInputTokenEnd",function(e){return t.addAlarmType(e)}),i["\u0275\u0275pipe"](20,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](21,"div",10),i["\u0275\u0275elementStart"](22,"button",11),i["\u0275\u0275listener"]("click",function(){return t.cancel()}),i["\u0275\u0275text"](23),i["\u0275\u0275pipe"](24,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](25,"button",12),i["\u0275\u0275text"](26),i["\u0275\u0275pipe"](27,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](17);i["\u0275\u0275property"]("formGroup",t.alarmFilterFormGroup),i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate"]("placeholder",null!=t.alarmFilterFormGroup.get("alarmStatusList").value&&t.alarmFilterFormGroup.get("alarmStatusList").value.length?"":i["\u0275\u0275pipeBind1"](5,12,"alarm.any-status")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.alarmSearchStatuses),i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate"]("placeholder",null!=t.alarmFilterFormGroup.get("alarmSeverityList").value&&t.alarmFilterFormGroup.get("alarmSeverityList").value.length?"":i["\u0275\u0275pipeBind1"](11,14,"alarm.any-severity")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.alarmSeverities),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngForOf",t.alarmTypeList()),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("placeholder",null!=t.alarmFilterFormGroup.get("alarmTypeList").value&&t.alarmFilterFormGroup.get("alarmTypeList").value.length?"":i["\u0275\u0275pipeBind1"](20,16,"alarm.any-type")),i["\u0275\u0275property"]("matChipInputFor",n)("matChipInputSeparatorKeyCodes",t.separatorKeysCodes),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](24,18,"action.cancel")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",t.alarmFilterFormGroup.invalid||!t.alarmFilterFormGroup.dirty),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](27,20,"action.update")," ")}},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,l.f,s.FormGroupDirective,c.MatFormField,l.b,c.MatLabel,d.TranslateDirective,u.MatSelect,s.NgControlStatus,s.FormControlName,p.NgForOf,m.MatChipList,m.MatChipInput,l.e,f.MatButton,h.MatOption,m.MatChip,g.MatIcon,m.MatChipRemove],pipes:[d.TranslatePipe],styles:["[_nghost-%COMP%]{width:100%;height:100%;min-width:300px;overflow:hidden;background:#fff;border-radius:4px;box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12)}[_nghost-%COMP%]   .mat-content[_ngcontent-%COMP%]{overflow:hidden;background-color:#fff}[_nghost-%COMP%]   .mat-padding[_ngcontent-%COMP%]{padding:16px}"]}),e}();0,void 0},"1uah":function(e,t,n){"use strict";n.d(t,"b",function(){return p}),n.d(t,"a",function(){return m});var i=n("mvVQ"),a=n("/E8u"),r=n("MGFw"),o=n("WtWf"),s=n("yCtX"),l=n("DH7j"),c=n("7o/Q"),d=n("Lhse"),u=n("zx2A");function p(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[t.length-1];return"function"==typeof i&&t.pop(),Object(s.a)(t,void 0).lift(new m(i))}var m=function(){function e(t){Object(r.a)(this,e),this.resultSelector=t}return Object(o.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new f(e,this.resultSelector))}}]),e}(),f=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e,i){var a;arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.create(null);return Object(r.a)(this,n),(a=t.call(this,e)).resultSelector=i,a.iterators=[],a.active=0,a.resultSelector="function"==typeof i?i:void 0,a}return Object(o.a)(n,[{key:"_next",value:function(e){var t=this.iterators;Object(l.a)(e)?t.push(new g(e)):"function"==typeof e[d.a]?t.push(new h(e[d.a]())):t.push(new A(this.destination,this,e))}},{key:"_complete",value:function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0===t)return this.destination.complete(),void 0;this.active=t;for(var n=0;n<t;n++){var i=e[n];if(i.stillUnsubscribed)this.destination.add(i.subscribe());else this.active--}}},{key:"notifyInactive",value:function(){this.active--,0===this.active&&this.destination.complete()}},{key:"checkIterators",value:function(){for(var e=this.iterators,t=e.length,n=this.destination,i=0;i<t;i++){var a=e[i];if("function"==typeof a.hasValue&&!a.hasValue())return}for(var r=!1,o=[],s=0;s<t;s++){var l=e[s],c=l.next();if(l.hasCompleted()&&(r=!0),c.done)return n.complete(),void 0;o.push(c.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),r&&n.complete()}},{key:"_tryresultSelector",value:function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return this.destination.error(n),void 0}this.destination.next(t)}}]),n}(c.a),h=function(){function e(t){Object(r.a)(this,e),this.iterator=t,this.nextResult=t.next()}return Object(o.a)(e,[{key:"hasValue",value:function(){return!0}},{key:"next",value:function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e}},{key:"hasCompleted",value:function(){var e=this.nextResult;return Boolean(e&&e.done)}}]),e}(),g=function(){function e(t){Object(r.a)(this,e),this.array=t,this.index=0,this.length=0,this.length=t.length}return Object(o.a)(e,[{key:d.a,value:function(){return this}},{key:"next",value:function(e){var t=this.index++,n=this.array;return t<this.length?{value:n[t],done:!1}:{value:null,done:!0}}},{key:"hasValue",value:function(){return this.array.length>this.index}},{key:"hasCompleted",value:function(){return this.array.length===this.index}}]),e}(),A=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e,i,a){var o;return Object(r.a)(this,n),(o=t.call(this,e)).parent=i,o.observable=a,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return Object(o.a)(n,[{key:d.a,value:function(){return this}},{key:"next",value:function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}}},{key:"hasValue",value:function(){return this.buffer.length>0}},{key:"hasCompleted",value:function(){return 0===this.buffer.length&&this.isComplete}},{key:"notifyComplete",value:function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}},{key:"notifyNext",value:function(e){this.buffer.push(e),this.parent.checkIterators()}},{key:"subscribe",value:function(){return Object(u.c)(this.observable,new u.a(this))}}]),n}(u.b)},"2/1y":function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return I});var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=(n("0G7Z"),n("//Q6")),s=n("Zss7"),l=n("OiFK"),c=n("0lYY"),d=n("U3y+"),u=n("HR/i"),p=n("l7P3"),m=n("XiUz"),f=n("znSr"),h=n("ofXK"),g=["led"],A=["ledContainer"],b=["textMeasure"],y=["ledTitleContainer"],v=["ledTitle"],C=["ledErrorContainer"],x=["ledError"],w=function(e){return{paddingTop:e}},S=function(e){return{background:e}},E=s,I=function(t){function n(e,n){var i=t.call(this,n)||this;return i.utils=e,i.store=n,i.showTitle=!1,i.value=!1,i.error="",i.title="",i.destroyed=!1,i.subscriptionOptions={callbacks:{onDataUpdated:function(e,t){return i.ctx.ngZone.run(function(){i.onDataUpdated(e,t)})},onDataUpdateError:function(e,t){return i.ctx.ngZone.run(function(){i.onDataUpdateError(e,t)})},dataLoading:function(){}}},i}return Object(i.d)(n,t),n.prototype.ngOnInit=function(){var t=this;this.led=e(this.ledRef.nativeElement),this.ledContainer=e(this.ledContainerRef.nativeElement),this.textMeasure=e(this.textMeasureRef.nativeElement),this.ledTitleContainer=e(this.ledTitleContainerRef.nativeElement),this.ledTitle=e(this.ledTitleRef.nativeElement),this.ledErrorContainer=e(this.ledErrorContainerRef.nativeElement),this.ledError=e(this.ledErrorRef.nativeElement),this.ledResize$=new u.a(function(){t.resize()}),this.ledResize$.observe(this.ledContainerRef.nativeElement),this.init()},n.prototype.ngOnDestroy=function(){this.destroyed=!0,this.checkStatusTimeoutHandle&&clearTimeout(this.checkStatusTimeoutHandle),this.subscription&&this.ctx.subscriptionApi.removeSubscription(this.subscription.id),this.ledResize$&&this.ledResize$.disconnect(),this.ctx.controlApi.completedCommand()},n.prototype.init=function(){var e=this.ctx.settings;this.title=Object(o.n)(e.title)?e.title:"",this.showTitle=!(!this.title||!this.title.length);var t=Object(o.n)(e.ledColor)?e.ledColor:"green";this.valueAttribute=Object(o.n)(e.valueAttribute)?e.valueAttribute:"value",this.ledColor=E(t).brighten(30).toHexString(),this.ledMiddleColor=E(t).toHexString(),this.disabledColor=E(t).darken(40).toHexString(),this.disabledMiddleColor=E(t).darken(60).toHexString();var n=!!Object(o.n)(e.initialValue)&&e.initialValue;this.setValue(n,!0);var i=this.ctx.defaultSubscription.rpcEnabled;if(this.isSimulated=this.utils.widgetEditMode,this.requestTimeout=500,e.requestTimeout&&(this.requestTimeout=e.requestTimeout),this.requestPersistent=!1,e.requestPersistent&&(this.requestPersistent=e.requestPersistent),this.persistentPollingInterval=5e3,e.persistentPollingInterval&&(this.persistentPollingInterval=e.persistentPollingInterval),this.retrieveValueMethod="attribute",e.retrieveValueMethod&&e.retrieveValueMethod.length&&(this.retrieveValueMethod=e.retrieveValueMethod),this.parseValueFunction=function(e){return!!e},e.parseValueFunction&&e.parseValueFunction.length)try{this.parseValueFunction=new Function("data",e.parseValueFunction)}catch(a){this.parseValueFunction=function(e){return!!e}}this.performCheckStatus=!1!==e.performCheckStatus,this.performCheckStatus&&(this.checkStatusMethod="checkStatus",e.checkStatusMethod&&e.checkStatusMethod.length&&(this.checkStatusMethod=e.checkStatusMethod)),i?this.isSimulated||(this.performCheckStatus?this.rpcCheckStatus():this.subscribeForValue()):this.onError("Target device is not set!")},n.prototype.resize=function(){var e=this.ledContainer.width(),t=this.ledContainer.height(),n=Math.min(e,t);this.led.css({width:n,height:n}),this.showTitle&&this.setFontSize(this.ledTitle,this.title,2*this.ledTitleContainer.height()/3,this.ledTitleContainer.width()),this.setFontSize(this.ledError,this.error,this.ledErrorContainer.height(),this.ledErrorContainer.width())},n.prototype.setFontSize=function(e,t,n,i){for(var a=this.measureTextWidth(t,n);a>i;)n--,a=this.measureTextWidth(t,n);e.css({fontSize:n+"px",lineHeight:n+"px"})},n.prototype.measureTextWidth=function(e,t){return this.textMeasure.css({fontSize:t+"px",lineHeight:t+"px"}),this.textMeasure.text(e),this.textMeasure.width()},n.prototype.onError=function(e){this.error=e,this.setFontSize(this.ledError,this.error,this.ledErrorContainer.height(),this.ledErrorContainer.width()),this.ctx.detectChanges()},n.prototype.setValue=function(e,t){(this.value!==e||t)&&(this.value=e,this.updateColor())},n.prototype.updateColor=function(){var e=this.value?this.ledColor:this.disabledColor,t="#000 0 -1px 6px 1px, inset "+(this.value?this.ledMiddleColor:this.disabledMiddleColor)+" 0 -1px 8px, "+e+" 0 3px 11px";this.led.css({backgroundColor:e}),this.led.css({boxShadow:t}),this.value?this.led.removeClass("disabled"):this.led.addClass("disabled")},n.prototype.rpcCheckStatus=function(){var e=this;this.destroyed||(this.error="",this.ctx.controlApi.sendTwoWayCommand(this.checkStatusMethod,null,this.requestTimeout,this.requestPersistent,this.persistentPollingInterval).subscribe(function(t){if(!!t)e.checkStatusTimeoutHandle&&(clearTimeout(e.checkStatusTimeoutHandle),e.checkStatusTimeoutHandle=null),e.subscribeForValue();else{e.onError("Unknown device status!"),e.checkStatusTimeoutHandle&&clearTimeout(e.checkStatusTimeoutHandle),e.checkStatusTimeoutHandle=setTimeout(e.rpcCheckStatus.bind(e),1e4)}},function(){var t=e.ctx.defaultSubscription.rpcErrorText;e.onError(t),e.checkStatusTimeoutHandle&&clearTimeout(e.checkStatusTimeoutHandle),e.checkStatusTimeoutHandle=setTimeout(e.rpcCheckStatus.bind(e),1e4)}))},n.prototype.subscribeForValue=function(){var e=this,t=[{type:c.a.entity,entityType:d.b.DEVICE,entityId:this.ctx.defaultSubscription.targetDeviceId}];"attribute"===this.retrieveValueMethod?t[0].attributes=[{name:this.valueAttribute}]:t[0].timeseries=[{name:this.valueAttribute}],this.ctx.subscriptionApi.createSubscriptionFromInfo(c.m.latest,t,this.subscriptionOptions,!1,!0).subscribe(function(t){e.subscription=t})},n.prototype.onDataUpdated=function(e,t){var n=!1,i=e.data;if(i.length){var a=i[0];if(a&&a.data&&a.data[0]){var r=a.data[0][1];if(Object(o.n)(r)){var s=null;try{s=this.parseValueFunction(JSON.parse(r))}catch(l){}n=!!s}}}this.setValue(n),t&&this.ctx.detectChanges()},n.prototype.onDataUpdateError=function(e,t){var n=this.utils.parseException(t),i=n.name;n.message&&(i+=": "+n.message),this.onError(i)},n.\u0275fac=function(e){return new(e||n)(a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](p.Store))},n.\u0275cmp=a["\u0275\u0275defineComponent"]({type:n,selectors:[["tb-led-indicator"]],viewQuery:function(e,t){if(1&e&&(a["\u0275\u0275viewQuery"](g,3),a["\u0275\u0275viewQuery"](A,3),a["\u0275\u0275viewQuery"](b,3),a["\u0275\u0275viewQuery"](y,3),a["\u0275\u0275viewQuery"](v,3),a["\u0275\u0275viewQuery"](C,3),a["\u0275\u0275viewQuery"](x,3)),2&e){var n=void 0;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.ledRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.ledContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.textMeasureRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.ledTitleContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.ledTitleRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.ledErrorContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.ledErrorRef=n.first)}},inputs:{ctx:"ctx"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:17,vars:10,consts:[["fxLayout","column",1,"tb-led-indicator"],["fxFlex","20","fxLayout","row","fxLayoutAlign","center center",1,"title-container",3,"fxShow"],["ledTitleContainer",""],[1,"led-title"],["ledTitle",""],["id","led-container","fxLayout","column","fxLayoutAlign","center center",3,"fxFlex","ngStyle"],["ledContainer",""],[1,"led"],["led",""],["fxLayout","row","fxLayoutAlign","center center",1,"error-container",3,"ngStyle"],["ledErrorContainer",""],[1,"led-error"],["ledError",""],["id","text-measure"],["textMeasure",""]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1,2),a["\u0275\u0275elementStart"](3,"span",3,4),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",5,6),a["\u0275\u0275element"](8,"div",7,8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"div",9,10),a["\u0275\u0275elementStart"](12,"span",11,12),a["\u0275\u0275text"](14),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](15,"div",13,14),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",t.showTitle),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](t.title),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("fxFlex",t.showTitle?80:100),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](6,w,t.showTitle?"5px":"10px")),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](8,S,null!=t.error&&t.error.length?"rgba(255,255,255,0.25)":"none")),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](t.error))},directives:[m.f,m.b,m.e,f.d,h.NgStyle,f.e],styles:["[_nghost-%COMP%]   .tb-led-indicator[_ngcontent-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .tb-led-indicator[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]   .led-title[_ngcontent-%COMP%]{font-weight:500;color:#757575;white-space:nowrap}[_nghost-%COMP%]   .tb-led-indicator[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]{position:absolute;top:1%;right:0;left:0;z-index:4;height:14px}[_nghost-%COMP%]   .tb-led-indicator[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   .led-error[_ngcontent-%COMP%]{color:#ff3315;white-space:nowrap}[_nghost-%COMP%]   .tb-led-indicator[_ngcontent-%COMP%]   #text-measure[_ngcontent-%COMP%]{position:absolute;width:auto;height:auto;white-space:nowrap;visibility:hidden}[_nghost-%COMP%]   .tb-led-indicator[_ngcontent-%COMP%]   #led-container[_ngcontent-%COMP%]{padding:10px}[_nghost-%COMP%]   .tb-led-indicator[_ngcontent-%COMP%]   #led-container[_ngcontent-%COMP%]   .led[_ngcontent-%COMP%]{position:relative;cursor:pointer;background-image:radial-gradient(circle closest-corner at 50% 50%,transparent,rgba(0,0,0,.25));border-radius:50%;transition:background-color .5s,box-shadow .5s}[_nghost-%COMP%]   .tb-led-indicator[_ngcontent-%COMP%]   #led-container[_ngcontent-%COMP%]   .led.disabled[_ngcontent-%COMP%]{background-image:radial-gradient(circle closest-corner at 50% 50%,hsla(0,0%,100%,.5),rgba(0,0,0,.1))}"]}),n}(r.a);0,void 0}).call(this,n("xexB"))},"2lgB":function(e,t,n){"use strict";n.d(t,"a",function(){return w});var i=n("fXoL"),a=n("3Tyt"),r=n("l7P3"),o=n("Vurf"),s=n("C/rb"),l=n("wtyh"),c=n("MGFw"),d=n("WtWf"),u=n("t9bE"),p=n("KUzl"),m=n("mvVQ"),f=n("/E8u"),h=n("XNiG"),g=n("7o/Q"),A=n("HDdC"),b=n("quSY"),y=n("jtHE"),v={url:"",deserializer:function(e){return JSON.parse(e.data)},serializer:function(e){return JSON.stringify(e)}},C=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e,i){var a;if(Object(c.a)(this,n),a=t.call(this),e instanceof A.a)a.destination=i,a.source=e;else{var r=a._config=Object.assign({},v);if(a._output=new h.b,"string"==typeof e)r.url=e;else for(var o in e)e.hasOwnProperty(o)&&(r[o]=e[o]);if(!r.WebSocketCtor&&WebSocket)r.WebSocketCtor=WebSocket;else if(!r.WebSocketCtor)throw new Error("no WebSocket constructor can be found");a.destination=new y.a}return a}return Object(d.a)(n,[{key:"lift",value:function(e){var t=new n(this._config,this.destination);return t.operator=e,t.source=this,t}},{key:"_resetState",value:function(){this._socket=null,this.source||(this.destination=new y.a),this._output=new h.b}},{key:"multiplex",value:function(e,t,n){var i=this;return new A.a(function(a){try{i.next(e())}catch(o){a.error(o)}var r=i.subscribe(function(e){try{n(e)&&a.next(e)}catch(o){a.error(o)}},function(e){return a.error(e)},function(){return a.complete()});return function(){try{i.next(t())}catch(o){a.error(o)}r.unsubscribe()}})}},{key:"_connectSocket",value:function(){var e=this,t=this._config,n=t.WebSocketCtor,i=t.protocol,a=t.url,r=t.binaryType,o=this._output,s=null;try{s=i?new n(a,i):new n(a),this._socket=s,r&&(this._socket.binaryType=r)}catch(c){return o.error(c),void 0}var l=new b.a(function(){e._socket=null,s&&1===s.readyState&&s.close()});s.onopen=function(t){if(!e._socket)return s.close(),e._resetState(),void 0;var n=e._config.openObserver;n&&n.next(t);var i=e.destination;e.destination=g.a.create(function(n){if(1===s.readyState)try{var i=e._config.serializer;s.send(i(n))}catch(t){e.destination.error(t)}},function(t){var n=e._config.closingObserver;n&&n.next(void 0),t&&t.code?s.close(t.code,t.reason):o.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),e._resetState()},function(){var t=e._config.closingObserver;t&&t.next(void 0),s.close(),e._resetState()}),i&&i instanceof y.a&&l.add(i.subscribe(e.destination))},s.onerror=function(t){e._resetState(),o.error(t)},s.onclose=function(t){e._resetState();var n=e._config.closeObserver;n&&n.next(t),t.wasClean?o.complete():o.error(t)},s.onmessage=function(t){try{var n=e._config.deserializer;o.next(n(t))}catch(i){o.error(i)}}}},{key:"_subscribe",value:function(e){var t=this,n=this.source;return n?n.subscribe(e):(this._socket||this._connectSocket(),this._output.subscribe(e),e.add(function(){var e=t._socket;0===t._output.observers.length&&(e&&1===e.readyState&&e.close(),t._resetState())}),e)}},{key:"unsubscribe",value:function(){var e=this._socket;e&&1===e.readyState&&e.close(),this._resetState(),Object(u.a)(Object(p.a)(n.prototype),"unsubscribe",this).call(this)}}]),n}(h.a);var x=n("xKAQ"),w=function(){function e(e,t,n,i){var o=this;this.store=e,this.authService=t,this.ngZone=n,this.window=i,this.isActive=!1,this.isOpening=!1,this.isOpened=!1,this.isReconnect=!1,this.lastCmdId=0,this.subscribersCount=0,this.subscribersMap=new Map,this.reconnectSubscribers=new Set,this.cmdsWrapper=new a.v,this.store.pipe(Object(r.select)(s.e)).subscribe(function(){o.reset(!0)});var l=this.window.location.port;"https:"===this.window.location.protocol?(l||(l="443"),this.telemetryUri="wss:"):(l||(l="80"),this.telemetryUri="ws:"),this.telemetryUri+="//"+this.window.location.hostname+":"+l+"/api/ws/plugins/telemetry"}return e.prototype.subscribe=function(e){var t=this;this.isActive=!0,e.subscriptionCommands.forEach(function(n){var i=t.nextCmdId();t.subscribersMap.set(i,e),n.cmdId=i,n instanceof a.s?n.getType()===a.u.TIMESERIES?t.cmdsWrapper.tsSubCmds.push(n):t.cmdsWrapper.attrSubCmds.push(n):n instanceof a.q?t.cmdsWrapper.historyCmds.push(n):n instanceof a.n?t.cmdsWrapper.entityDataCmds.push(n):n instanceof a.a?t.cmdsWrapper.alarmDataCmds.push(n):n instanceof a.k&&t.cmdsWrapper.entityCountCmds.push(n)}),this.subscribersCount++,this.publishCommands()},e.prototype.update=function(e){var t=this;this.isReconnect||(e.subscriptionCommands.forEach(function(e){e.cmdId&&e instanceof a.n&&t.cmdsWrapper.entityDataCmds.push(e)}),this.publishCommands())},e.prototype.unsubscribe=function(e){var t=this;this.isActive&&(e.subscriptionCommands.forEach(function(e){if(e instanceof a.s)e.unsubscribe=!0,e.getType()===a.u.TIMESERIES?t.cmdsWrapper.tsSubCmds.push(e):t.cmdsWrapper.attrSubCmds.push(e);else if(e instanceof a.n){var n=new a.o;n.cmdId=e.cmdId,t.cmdsWrapper.entityDataUnsubscribeCmds.push(n)}else if(e instanceof a.a){var i=new a.b;i.cmdId=e.cmdId,t.cmdsWrapper.alarmDataUnsubscribeCmds.push(i)}else if(e instanceof a.k){var r=new a.l;r.cmdId=e.cmdId,t.cmdsWrapper.entityCountUnsubscribeCmds.push(r)}var o=e.cmdId;o&&t.subscribersMap.delete(o)}),this.reconnectSubscribers.delete(e),this.subscribersCount--,this.publishCommands())},e.prototype.nextCmdId=function(){return this.lastCmdId++,this.lastCmdId},e.prototype.publishCommands=function(){for(;this.isOpened&&this.cmdsWrapper.hasCommands();)this.dataStream.next(this.cmdsWrapper.preparePublishCommands(10)),this.checkToClose();this.tryOpenSocket()},e.prototype.checkToClose=function(){var e=this;0===this.subscribersCount&&this.isOpened&&(this.socketCloseTimer||(this.socketCloseTimer=setTimeout(function(){return e.closeSocket()},9e4)))},e.prototype.reset=function(e){this.socketCloseTimer&&(clearTimeout(this.socketCloseTimer),this.socketCloseTimer=null),this.lastCmdId=0,this.subscribersMap.clear(),this.subscribersCount=0,this.cmdsWrapper.clear(),e&&this.closeSocket()},e.prototype.closeSocket=function(){this.isActive=!1,this.isOpened&&this.dataStream.unsubscribe()},e.prototype.tryOpenSocket=function(){var e=this;this.isActive&&(this.isOpened||this.isOpening||(this.isOpening=!0,o.a.isJwtTokenValid()?this.openSocket(o.a.getJwtToken()):this.authService.refreshJwtToken().subscribe(function(){e.openSocket(o.a.getJwtToken())},function(){e.isOpening=!1,e.authService.logout(!0)})),this.socketCloseTimer&&(clearTimeout(this.socketCloseTimer),this.socketCloseTimer=null))},e.prototype.openSocket=function(e){var t=this,n=this.telemetryUri+"?token="+e;this.dataStream=new C({url:n,openObserver:{next:function(){t.onOpen()}},closeObserver:{next:function(e){t.onClose(e)}}}),this.dataStream.subscribe(function(e){t.ngZone.runOutsideAngular(function(){t.onMessage(e)})},function(e){t.onError(e)})},e.prototype.onOpen=function(){var e=this;this.isOpening=!1,this.isOpened=!0,this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.isReconnect?(this.isReconnect=!1,this.reconnectSubscribers.forEach(function(t){t.onReconnected(),e.subscribe(t)}),this.reconnectSubscribers.clear()):this.publishCommands()},e.prototype.onMessage=function(e){if(e.errorCode)this.showWsError(e.errorCode,e.errorMsg);else{var t=void 0;Object(a.B)(e)?(t=this.subscribersMap.get(e.cmdId))&&t.onEntityData(new a.p(e)):Object(a.y)(e)?(t=this.subscribersMap.get(e.cmdId))&&t.onAlarmData(new a.c(e)):Object(a.A)(e)?(t=this.subscribersMap.get(e.cmdId))&&t.onEntityCount(new a.m(e)):e.subscriptionId&&(t=this.subscribersMap.get(e.subscriptionId))&&t.onData(new a.t(e))}this.checkToClose()},e.prototype.onError=function(e){e&&console.warn("WebSocket error event",e),this.isOpening=!1},e.prototype.onClose=function(e){var t=this;e&&e.code>1001&&1006!==e.code&&this.showWsError(e.code,e.reason),this.isOpening=!1,this.isOpened=!1,this.isActive&&(this.isReconnect||(this.reconnectSubscribers.clear(),this.subscribersMap.forEach(function(e){t.reconnectSubscribers.add(e)}),this.reset(!1),this.isReconnect=!0),this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout(function(){return t.tryOpenSocket()},2e3))},e.prototype.showWsError=function(e,t){var n=t;n||(n+="WebSocket Error: error code - "+e+"."),this.store.dispatch(new x.b({message:n,type:"error"}))},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](r.Store),i["\u0275\u0275inject"](o.a),i["\u0275\u0275inject"](i.NgZone),i["\u0275\u0275inject"](l.b))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();0,void 0},"3MWt":function(e,t,n){"use strict";n.d(t,"a",function(){return _});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("OiFK"),d=n("//Q6"),u=n("4j5O"),p=n("YnEf"),m=n("cp0P"),f=n("LRne"),h=n("6opy"),g=n("C6Vs"),A=n("5+tZ"),b=n("FBAY"),y=n("l7P3"),v=n("tyNb"),C=n("/t3+"),x=n("sYmb"),w=n("XiUz"),S=n("bTqV"),E=n("NFeN"),I=n("ofXK"),O=n("QibW"),T=n("XMqU"),F=n("kmnG"),B=n("qFsG"),M=n("bSwM"),P=n("bv9b");function D(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",20)}function k(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.title-required")," "))}var _=function(e){function t(t,n,i,a,r,o,l,c,d,u,p){var m=e.call(this,t,n,r)||this;return m.store=t,m.router=n,m.data=i,m.errorStateMatcher=a,m.dialogRef=r,m.fb=o,m.utils=l,m.dashboardUtils=c,m.dashboardService=d,m.itembuffer=u,m.dialog=p,m.submitted=!1,m.addWidgetFormGroup=m.fb.group({addToDashboardType:[0,[]],dashboardId:[null,[s.Validators.required]],newDashboardTitle:[{value:null,disabled:!0},[]],openDashboard:[!1,[]]}),m.addWidgetFormGroup.get("addToDashboardType").valueChanges.subscribe(function(e){0===e?(m.addWidgetFormGroup.get("dashboardId").setValidators([s.Validators.required]),m.addWidgetFormGroup.get("dashboardId").enable(),m.addWidgetFormGroup.get("newDashboardTitle").setValidators([]),m.addWidgetFormGroup.get("newDashboardTitle").disable(),m.addWidgetFormGroup.get("dashboardId").updateValueAndValidity(),m.addWidgetFormGroup.get("newDashboardTitle").updateValueAndValidity()):(m.addWidgetFormGroup.get("dashboardId").setValidators([]),m.addWidgetFormGroup.get("dashboardId").disable(),m.addWidgetFormGroup.get("newDashboardTitle").setValidators([s.Validators.required]),m.addWidgetFormGroup.get("newDashboardTitle").enable(),m.addWidgetFormGroup.get("dashboardId").updateValueAndValidity(),m.addWidgetFormGroup.get("newDashboardTitle").updateValueAndValidity())}),m}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.add=function(){var e=this;if(this.submitted=!0,0===this.addWidgetFormGroup.get("addToDashboardType").value){var t=this.addWidgetFormGroup.get("dashboardId").value;this.dashboardService.getDashboard(t).pipe(Object(A.b)(function(t){return t=e.dashboardUtils.validateAndUpdateDashboard(t),e.selectTargetState(t).pipe(Object(A.b)(function(n){return Object(m.a)([Object(f.a)(t),Object(f.a)(n),e.selectTargetLayout(t,n)])}))})).subscribe(function(t){e.addWidgetToDashboard(t[0],t[1],t[2])})}else{var n={title:this.addWidgetFormGroup.get("newDashboardTitle").value};this.addWidgetToDashboard(n,"default","main")}},t.prototype.selectTargetState=function(e){var t=e.configuration.states,n=Object.keys(t);return n.length>1?this.dialog.open(g.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{states:t}}).afterClosed():Object(f.a)(n[0])},t.prototype.selectTargetLayout=function(e,t){var n=e.configuration.states[t].layouts,i=Object.keys(n);return i.length>1?this.dialog.open(h.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"]}).afterClosed():Object(f.a)(i[0])},t.prototype.addWidgetToDashboard=function(e,t,n){var i=this,a={datasourceAliases:{},targetDeviceAliases:{}};a.datasourceAliases[0]={alias:this.data.entityName,filter:this.dashboardUtils.createSingleEntityFilter(this.data.entityId)};this.itembuffer.addWidgetToDashboard(e,t,n,this.data.widget,a,{datasourceFilters:{}},null,null,48,null,-1,-1).pipe(Object(A.b)(function(e){return i.dashboardService.saveDashboard(e)})).subscribe(function(n){var a=i.addWidgetFormGroup.get("openDashboard").value;if(i.dialogRef.close(),a){var r=void 0;if(Object.keys(e.configuration.states).indexOf(t)>0){var o={id:t,params:{}},s=Object(d.F)([o]);r="/dashboards/"+n.id.id+"?state="+s}else r="/dashboards/"+n.id.id;i.router.parseUrl(r);i.router.navigateByUrl(r)}})},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](y.Store),a["\u0275\u0275directiveInject"](v.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](u.a),a["\u0275\u0275directiveInject"](p.a),a["\u0275\u0275directiveInject"](b.a),a["\u0275\u0275directiveInject"](o.MatDialog))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-add-widget-to-dashboard-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:41,vars:28,consts:[[2,"min-width","400px",3,"formGroup","ngSubmit"],["color","accent"],["translate",""],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content","","fxLayout","column"],[3,"disabled"],["formControlName","addToDashboardType"],["color","accent",3,"value"],["fxLayout","column",2,"width","300px"],["formControlName","dashboardId",3,"required","selectFirstDashboard"],[1,"mat-block"],["matInput","","formControlName","newDashboardTitle",3,"required"],[4,"ngIf"],["mat-dialog-actions","","fxLayout","row"],["formControlName","openDashboard",2,"margin-bottom","0"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.add()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2",2),a["\u0275\u0275text"](3,"attribute.add-widget-to-dashboard"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",3),a["\u0275\u0275elementStart"](5,"button",4),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](6,"mat-icon",5),a["\u0275\u0275text"](7,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,D,1,0,"mat-progress-bar",6),a["\u0275\u0275pipe"](9,"async"),a["\u0275\u0275elementStart"](10,"div",7),a["\u0275\u0275elementStart"](11,"fieldset",8),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"mat-radio-group",9),a["\u0275\u0275elementStart"](14,"mat-radio-button",10),a["\u0275\u0275elementStart"](15,"section",11),a["\u0275\u0275elementStart"](16,"span",2),a["\u0275\u0275text"](17,"dashboard.select-existing"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](18,"tb-dashboard-autocomplete",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"mat-radio-button",10),a["\u0275\u0275elementStart"](20,"section",11),a["\u0275\u0275elementStart"](21,"span",2),a["\u0275\u0275text"](22,"dashboard.create-new"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](23,"mat-form-field",13),a["\u0275\u0275elementStart"](24,"mat-label",2),a["\u0275\u0275text"](25,"dashboard.new-dashboard-title"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](26,"input",14),a["\u0275\u0275template"](27,k,3,3,"mat-error",15),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"div",16),a["\u0275\u0275elementStart"](29,"mat-checkbox",17),a["\u0275\u0275text"](30),a["\u0275\u0275pipe"](31,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](32,"span",3),a["\u0275\u0275elementStart"](33,"button",18),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](34,"async"),a["\u0275\u0275text"](35),a["\u0275\u0275pipe"](36,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](37,"button",19),a["\u0275\u0275pipe"](38,"async"),a["\u0275\u0275text"](39),a["\u0275\u0275pipe"](40,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.addWidgetFormGroup),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](9,14,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](12,16,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("value",0),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("required",0===t.addWidgetFormGroup.get("addToDashboardType").value)("selectFirstDashboard",!1),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("value",1),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("required",1===t.addWidgetFormGroup.get("addToDashboardType").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.addWidgetFormGroup.get("newDashboardTitle").hasError("required")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](31,18,"dashboard.open-dashboard")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](34,20,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](36,22,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](38,24,t.isLoading$)||t.addWidgetFormGroup.invalid||!t.addWidgetFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](40,26,"action.add")," "))},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,C.MatToolbar,x.TranslateDirective,w.b,S.MatButton,E.MatIcon,I.NgIf,o.MatDialogContent,w.f,O.MatRadioGroup,s.NgControlStatus,s.FormControlName,O.MatRadioButton,T.a,s.RequiredValidator,F.MatFormField,F.MatLabel,B.MatInput,s.DefaultValueAccessor,o.MatDialogActions,M.MatCheckbox,P.MatProgressBar,F.MatError],pipes:[I.AsyncPipe,x.TranslatePipe],styles:["[_nghost-%COMP%]     mat-radio-button{display:block;margin-bottom:16px}[_nghost-%COMP%]     mat-radio-button .mat-radio-label{width:100%;align-items:start}[_nghost-%COMP%]     mat-radio-button .mat-radio-label .mat-radio-label-content{width:100%}"]}),t}(l.a);0,void 0},"3QxM":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"i",function(){return r}),n.d(t,"d",function(){return o}),n.d(t,"e",function(){return s}),n.d(t,"f",function(){return l}),n.d(t,"g",function(){return c}),n.d(t,"c",function(){return d}),n.d(t,"j",function(){return u}),n.d(t,"h",function(){return p});var i={schema:{title:"Map Configuration",type:"object",properties:{defaultZoomLevel:{title:"Default map zoom level (0 - 20)",type:"number"},useDefaultCenterPosition:{title:"Use default map center position",type:"boolean",default:!1},mapPageSize:{title:"Limit of entities to load",type:"number",default:16384},defaultCenterPosition:{title:"Default map center position (0,0)",type:"string",default:"0,0"},fitMapBounds:{title:"Fit map bounds to cover all markers",type:"boolean",default:!0},draggableMarker:{title:"Draggable Marker",type:"boolean",default:!1},disableScrollZooming:{title:"Disable scroll zooming",type:"boolean",default:!1},latKeyName:{title:"Latitude key name",type:"string",default:"latitude"},lngKeyName:{title:"Longitude key name",type:"string",default:"longitude"},xPosKeyName:{title:"X position key name",type:"string",default:"xPos"},yPosKeyName:{title:"Y position key name",type:"string",default:"yPos"},showLabel:{title:"Show label",type:"boolean",default:!0},label:{title:"Label (pattern examples: '${entityName}', '${entityName}: (Text ${keyName} units.)' )",type:"string",default:"${entityName}"},useLabelFunction:{title:"Use label function",type:"boolean",default:!1},labelFunction:{title:"Label function: f(data, dsData, dsIndex)",type:"string"},showTooltip:{title:"Show tooltip",type:"boolean",default:!0},showTooltipAction:{title:"Action for displaying the tooltip",type:"string",default:"click"},autocloseTooltip:{title:"Auto-close tooltips",type:"boolean",default:!0},tooltipPattern:{title:"Tooltip (for ex. 'Text ${keyName} units.' or <link-act name='my-action'>Link text</link-act>')",type:"string",default:"<b>${entityName}</b><br/><br/><b>Latitude:</b> ${latitude:7}<br/><b>Longitude:</b> ${longitude:7}"},useTooltipFunction:{title:"Use tooltip function",type:"boolean",default:!1},tooltipFunction:{title:"Tooltip function: f(data, dsData, dsIndex)",type:"string"},posFunction:{title:"Position conversion function: f(origXPos, origYPos), should return x,y coordinates as double from 0 to 1 each",type:"string",default:"return {x: origXPos, y: origYPos};"},markerOffsetX:{title:"Marker X offset relative to position",type:"number",default:.5},markerOffsetY:{title:"Marker Y offset relative to position",type:"number",default:1},color:{title:"Color",type:"string"},useColorFunction:{title:"Use color function",type:"boolean",default:!1},colorFunction:{title:"Color function: f(data, dsData, dsIndex)",type:"string"},markerImage:{title:"Custom marker image",type:"string"},markerImageSize:{title:"Custom marker image size (px)",type:"number",default:34},useMarkerImageFunction:{title:"Use marker image function",type:"boolean",default:!1},markerImageFunction:{title:"Marker image function: f(data, images, dsData, dsIndex)",type:"string"},markerImages:{title:"Marker images",type:"array",items:{title:"Marker image",type:"string"}}},required:[]},form:[{key:"defaultZoomLevel",condition:'model.provider !== "image-map"'},{key:"useDefaultCenterPosition",condition:'model.provider !== "image-map"'},{key:"defaultCenterPosition",condition:'model.provider !== "image-map"'},{key:"fitMapBounds",condition:'model.provider !== "image-map"'},"mapPageSize","draggableMarker","disableScrollZooming",{key:"latKeyName",condition:'model.provider !== "image-map"'},{key:"lngKeyName",condition:'model.provider !== "image-map"'},{key:"xPosKeyName",condition:'model.provider === "image-map"'},{key:"yPosKeyName",condition:'model.provider === "image-map"'},"showLabel","label","useLabelFunction",{key:"labelFunction",type:"javascript"},"showTooltip",{key:"showTooltipAction",type:"rc-select",multiple:!1,items:[{value:"click",label:"Show tooltip on click (Default)"},{value:"hover",label:"Show tooltip on hover"}]},"autocloseTooltip",{key:"tooltipPattern",type:"textarea"},"useTooltipFunction",{key:"tooltipFunction",type:"javascript"},{key:"markerOffsetX",condition:'model.provider === "image-map"'},{key:"markerOffsetY",condition:'model.provider === "image-map"'},{key:"posFunction",type:"javascript",condition:'model.provider === "image-map"'},{key:"color",type:"color"},"useColorFunction",{key:"colorFunction",type:"javascript"},{key:"markerImage",type:"image"},"markerImageSize","useMarkerImageFunction",{key:"markerImageFunction",type:"javascript"},{key:"markerImages",items:[{key:"markerImages[]",type:"image"}]}]},a={schema:{title:"Map Polygon Configuration",type:"object",properties:{showPolygon:{title:"Show polygon",type:"boolean",default:!1},polygonKeyName:{title:"Polygon key name",type:"string",default:"coordinates"},editablePolygon:{title:"Enable polygon edit",type:"boolean",default:!1},polygonColor:{title:"Polygon color",type:"string"},polygonOpacity:{title:"Polygon opacity",type:"number",default:.5},polygonStrokeColor:{title:"Stroke color",type:"string"},polygonStrokeOpacity:{title:"Stroke opacity",type:"number",default:1},polygonStrokeWeight:{title:"Stroke weight",type:"number",default:1},showPolygonTooltip:{title:"Show polygon tooltip",type:"boolean",default:!1},polygonTooltipPattern:{title:"Tooltip (for ex. 'Text ${keyName} units.' or <link-act name='my-action'>Link text</link-act>')",type:"string",default:"<b>${entityName}</b><br/><br/><b>TimeStamp:</b> ${ts:7}"},usePolygonTooltipFunction:{title:"Use polygon tooltip function",type:"boolean",default:!1},polygonTooltipFunction:{title:"Polygon tooltip function: f(data, dsData, dsIndex)",type:"string"},usePolygonColorFunction:{title:"Use polygon color function",type:"boolean",default:!1},polygonColorFunction:{title:"Polygon Color function: f(data, dsData, dsIndex)",type:"string"}},required:[]},form:["showPolygon","polygonKeyName","editablePolygon",{key:"polygonColor",type:"color"},"polygonOpacity",{key:"polygonStrokeColor",type:"color"},"polygonStrokeOpacity","polygonStrokeWeight","showPolygonTooltip",{key:"polygonTooltipPattern",type:"textarea"},"usePolygonTooltipFunction",{key:"polygonTooltipFunction",type:"javascript"},"usePolygonColorFunction",{key:"polygonColorFunction",type:"javascript"}]},r={schema:{title:"Route Map Configuration",type:"object",properties:{strokeWeight:{title:"Stroke weight",type:"number",default:2},strokeOpacity:{title:"Stroke opacity",type:"number",default:1}},required:[]},form:["strokeWeight","strokeOpacity"]},o={schema:{title:"Markers Clustering Configuration",type:"object",properties:{useClusterMarkers:{title:"Use map markers clustering",type:"boolean",default:!1}},required:[]},form:[{key:"useClusterMarkers",condition:'model.provider !== "image-map"'}]},s={schema:{title:"Markers Clustering Configuration Leaflet",type:"object",properties:{zoomOnClick:{title:"Zoom when clicking on a cluster",type:"boolean",default:!0},maxZoom:{title:"The maximum zoom level when a marker can be part of a cluster (0 - 18)",type:"number"},showCoverageOnHover:{title:"Show the bounds of markers when mouse over a cluster",type:"boolean",default:!0},animate:{title:"Show animation on markers when zooming",type:"boolean",default:!0},maxClusterRadius:{title:"Maximum radius that a cluster will cover in pixels",type:"number",default:80},chunkedLoading:{title:"Use chunks for adding markers so that the page does not freeze",type:"boolean",default:!1},removeOutsideVisibleBounds:{title:"Use lazy load for adding markers",type:"boolean",default:!0}},required:[]},form:["zoomOnClick","maxZoom","showCoverageOnHover","animate","maxClusterRadius","chunkedLoading","removeOutsideVisibleBounds"]},l={schema:{title:"Trip Animation Path Configuration",type:"object",properties:{color:{title:"Path color",type:"string"},strokeWeight:{title:"Stroke weight",type:"number",default:2},strokeOpacity:{title:"Stroke opacity",type:"number",default:1},useColorFunction:{title:"Use path color function",type:"boolean",default:!1},colorFunction:{title:"Path color function: f(data, dsData, dsIndex)",type:"string"},usePolylineDecorator:{title:"Use path decorator",type:"boolean",default:!1},decoratorSymbol:{title:"Decorator symbol",type:"string",default:"arrowHead"},decoratorSymbolSize:{title:"Decorator symbol size (px)",type:"number",default:10},useDecoratorCustomColor:{title:"Use path decorator custom color",type:"boolean",default:!1},decoratorCustomColor:{title:"Decorator custom color",type:"string",default:"#000"},decoratorOffset:{title:"Decorator offset",type:"string",default:"20px"},endDecoratorOffset:{title:"End decorator offset",type:"string",default:"20px"},decoratorRepeat:{title:"Decorator repeat",type:"string",default:"20px"}},required:[]},form:[{key:"color",type:"color"},"useColorFunction",{key:"colorFunction",type:"javascript"},"strokeWeight","strokeOpacity","usePolylineDecorator",{key:"decoratorSymbol",type:"rc-select",multiple:!1,items:[{value:"arrowHead",label:"Arrow"},{value:"dash",label:"Dash"}]},"decoratorSymbolSize","useDecoratorCustomColor",{key:"decoratorCustomColor",type:"color"},{key:"decoratorOffset",type:"textarea"},{key:"endDecoratorOffset",type:"textarea"},{key:"decoratorRepeat",type:"textarea"}]},c={schema:{title:"Trip Animation Path Configuration",type:"object",properties:{showPoints:{title:"Show points",type:"boolean",default:!1},pointColor:{title:"Point color",type:"string"},useColorPointFunction:{title:"Use color point function",type:"boolean",default:!1},colorPointFunction:{title:"Color point function: f(data, dsData, dsIndex)",type:"string"},pointSize:{title:"Point size (px)",type:"number",default:10},usePointAsAnchor:{title:"Use point as anchor",type:"boolean",default:!1},pointAsAnchorFunction:{title:"Point as anchor function: f(data, dsData, dsIndex)",type:"string"},pointTooltipOnRightPanel:{title:"Independant point tooltip",type:"boolean",default:!0}},required:[]},form:["showPoints",{key:"pointColor",type:"color"},"useColorPointFunction",{key:"colorPointFunction",type:"javascript"},"pointSize","usePointAsAnchor",{key:"pointAsAnchorFunction",type:"javascript"},"pointTooltipOnRightPanel"]},d={schema:{title:"Map Provider Configuration",type:"object",properties:{provider:{title:"Map Provider",type:"string",default:"openstreet-map"}},required:[]},form:[{key:"provider",type:"rc-select",multiple:!1,items:[{value:"google-map",label:"Google maps"},{value:"openstreet-map",label:"Openstreet maps"},{value:"here",label:"HERE maps"},{value:"image-map",label:"Image map"},{value:"tencent-map",label:"Tencent maps"}]}]},u={schema:{title:"Openstreet Map Configuration",type:"object",properties:{normalizationStep:{title:"Normalization data step (ms)",type:"number",default:1e3},latKeyName:{title:"Latitude key name",type:"string",default:"latitude"},lngKeyName:{title:"Longitude key name",type:"string",default:"longitude"},showLabel:{title:"Show label",type:"boolean",default:!0},label:{title:"Label (pattern examples: '${entityName}', '${entityName}: (Text ${keyName} units.)' )",type:"string",default:"${entityName}"},useLabelFunction:{title:"Use label function",type:"boolean",default:!1},labelFunction:{title:"Label function: f(data, dsData, dsIndex)",type:"string"},showTooltip:{title:"Show tooltip",type:"boolean",default:!0},tooltipColor:{title:"Tooltip background color",type:"string",default:"#fff"},tooltipFontColor:{title:"Tooltip font color",type:"string",default:"#000"},tooltipOpacity:{title:"Tooltip opacity (0-1)",type:"number",default:1},tooltipPattern:{title:"Tooltip (for ex. 'Text ${keyName} units.' or <link-act name='my-action'>Link text</link-act>')",type:"string",default:"<b>${entityName}</b><br/><br/><b>Latitude:</b> ${latitude:7}<br/><b>Longitude:</b> ${longitude:7}"},useTooltipFunction:{title:"Use tooltip function",type:"boolean",default:!1},tooltipFunction:{title:"Tooltip function: f(data, dsData, dsIndex)",type:"string"},autocloseTooltip:{title:"Auto-close point popup",type:"boolean",default:!0},markerImage:{title:"Custom marker image",type:"string"},markerImageSize:{title:"Custom marker image size (px)",type:"number",default:34},rotationAngle:{title:"Set additional rotation angle for marker (deg)",type:"number",default:0},useMarkerImageFunction:{title:"Use marker image function",type:"boolean",default:!1},markerImageFunction:{title:"Marker image function: f(data, images, dsData, dsIndex)",type:"string"},markerImages:{title:"Marker images",type:"array",items:{title:"Marker image",type:"string"}}},required:[]},form:["normalizationStep","latKeyName","lngKeyName","showLabel","label","useLabelFunction",{key:"labelFunction",type:"javascript"},"showTooltip",{key:"tooltipColor",type:"color"},{key:"tooltipFontColor",type:"color"},"tooltipOpacity",{key:"tooltipPattern",type:"textarea"},"useTooltipFunction",{key:"tooltipFunction",type:"javascript"},"autocloseTooltip",{key:"markerImage",type:"image"},"markerImageSize","rotationAngle","useMarkerImageFunction",{key:"markerImageFunction",type:"javascript"},{key:"markerImages",items:[{key:"markerImages[]",type:"image"}]}]},p={"openstreet-map":{schema:{schema:{title:"Openstreet Map Configuration",type:"object",properties:{mapProvider:{title:"Map provider",type:"string",default:"OpenStreetMap.Mapnik"},useCustomProvider:{title:"Use custom provider",type:"boolean",default:!1},customProviderTileUrl:{title:"Custom provider tile URL",type:"string",default:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}},required:[]},form:[{key:"mapProvider",type:"rc-select",multiple:!1,items:[{value:"OpenStreetMap.Mapnik",label:"OpenStreetMap.Mapnik (Default)"},{value:"OpenStreetMap.HOT",label:"OpenStreetMap.HOT"},{value:"Esri.WorldStreetMap",label:"Esri.WorldStreetMap"},{value:"Esri.WorldTopoMap",label:"Esri.WorldTopoMap"},{value:"CartoDB.Positron",label:"CartoDB.Positron"},{value:"CartoDB.DarkMatter",label:"CartoDB.DarkMatter"}]},"useCustomProvider",{key:"customProviderTileUrl",condition:"model.useCustomProvider === true"}]},name:"openstreet-map"},"tencent-map":{schema:{schema:{title:"Tencent Map Configuration",type:"object",properties:{tmApiKey:{title:"Tencent Maps API Key",type:"string",default:"84d6d83e0e51e481e50454ccbe8986b"},tmDefaultMapType:{title:"Default map type",type:"string",default:"roadmap"}},required:[]},form:["tmApiKey",{key:"tmDefaultMapType",type:"rc-select",multiple:!1,items:[{value:"roadmap",label:"Roadmap"},{value:"satellite",label:"Satellite"},{value:"hybrid",label:"Hybrid"}]}]},name:"tencent-map"},"google-map":{schema:{schema:{title:"Google Map Configuration",type:"object",properties:{gmApiKey:{title:"Google Maps API Key",type:"string",default:"AIzaSyDoEx2kaGz3PxwbI9T7ccTSg5xjdw8Nw8Q"},gmDefaultMapType:{title:"Default map type",type:"string",default:"roadmap"}},required:[]},form:["gmApiKey",{key:"gmDefaultMapType",type:"rc-select",multiple:!1,items:[{value:"roadmap",label:"Roadmap"},{value:"satellite",label:"Satellite"},{value:"hybrid",label:"Hybrid"},{value:"terrain",label:"Terrain"}]}]},name:"google-map"},here:{schema:{schema:{title:"HERE Map Configuration",type:"object",properties:{mapProviderHere:{title:"Map layer",type:"string",default:"HERE.normalDay"},credentials:{type:"object",title:"Credentials",properties:{app_id:{title:"HERE app id",type:"string",default:"AhM6TzD9ThyK78CT3ptx"},app_code:{title:"HERE app code",type:"string",default:"p6NPiITB3Vv0GMUFnkLOOg"}},required:["app_id","app_code"]}},required:[]},form:[{key:"mapProviderHere",type:"rc-select",multiple:!1,items:[{value:"HERE.normalDay",label:"HERE.normalDay (Default)"},{value:"HERE.normalNight",label:"HERE.normalNight"},{value:"HERE.hybridDay",label:"HERE.hybridDay"},{value:"HERE.terrainDay",label:"HERE.terrainDay"}]},"credentials"]},name:"here"},"image-map":{schema:{schema:{title:"Image Map Configuration",type:"object",properties:{mapImageUrl:{title:"Image map background",type:"string",default:"data:image/svg+xml;base64,PHN2ZyBpZD0ic3ZnMiIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTAwIiB3aWR0aD0iMTAwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgdmlld0JveD0iMCAwIDEwMCAxMDAiPgogPGcgaWQ9ImxheWVyMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAtOTUyLjM2KSI+CiAgPHJlY3QgaWQ9InJlY3Q0Njg0IiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBoZWlnaHQ9Ijk5LjAxIiB3aWR0aD0iOTkuMDEiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiB5PSI5NTIuODYiIHg9Ii40OTUwNSIgc3Ryb2tlLXdpZHRoPSIuOTkwMTAiIGZpbGw9IiNlZWUiLz4KICA8dGV4dCBpZD0idGV4dDQ2ODYiIHN0eWxlPSJ3b3JkLXNwYWNpbmc6MHB4O2xldHRlci1zcGFjaW5nOjBweDt0ZXh0LWFuY2hvcjptaWRkbGU7dGV4dC1hbGlnbjpjZW50ZXIiIGZvbnQtd2VpZ2h0PSJib2xkIiB4bWw6c3BhY2U9InByZXNlcnZlIiBmb250LXNpemU9IjEwcHgiIGxpbmUtaGVpZ2h0PSIxMjUlIiB5PSI5NzAuNzI4MDkiIHg9IjQ5LjM5NjQ3NyIgZm9udC1mYW1pbHk9IlJvYm90byIgZmlsbD0iIzY2NjY2NiI+PHRzcGFuIGlkPSJ0c3BhbjQ2OTAiIHg9IjUwLjY0NjQ3NyIgeT0iOTcwLjcyODA5Ij5JbWFnZSBiYWNrZ3JvdW5kIDwvdHNwYW4+PHRzcGFuIGlkPSJ0c3BhbjQ2OTIiIHg9IjQ5LjM5NjQ3NyIgeT0iOTgzLjIyODA5Ij5pcyBub3QgY29uZmlndXJlZDwvdHNwYW4+PC90ZXh0PgogIDxyZWN0IGlkPSJyZWN0NDY5NCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgaGVpZ2h0PSIxOS4zNiIgd2lkdGg9IjY5LjM2IiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgeT0iOTkyLjY4IiB4PSIxNS4zMiIgc3Ryb2tlLXdpZHRoPSIuNjM5ODYiIGZpbGw9Im5vbmUiLz4KIDwvZz4KPC9zdmc+Cg=="},imageEntityAlias:{title:"Image URL source entity alias",type:"string",default:""},imageUrlAttribute:{title:"Image URL source entity attribute",type:"string",default:""}},required:[]},form:[{key:"mapImageUrl",type:"image"},"imageEntityAlias","imageUrlAttribute"]},name:"image-map"}}},"3bvz":function(e,t,n){"use strict";n.d(t,"a",function(){return $});var i=n("mrSG"),a=n("fXoL"),r=n("3Pt+"),o=n("RxGS"),s=n("S+vS"),l=n("mbhL"),c=n("4r/P"),d=n("M9IT"),u=n("Dh3D"),p=n("xgIS"),m=n("VRyK"),f=n("Kj3r"),h=n("/uUt"),g=n("vkgz"),A=n("Hxax"),b=n("OiFK"),y=n("P0tZ"),v=n("//Q6"),C=(n("0lYY"),n("l7P3")),x=n("sYmb"),w=n("0IaG"),S=n("XiUz"),E=n("/t3+"),I=n("znSr"),O=n("bTqV"),T=n("Qu3c"),F=n("NFeN"),B=n("kmnG"),M=n("qFsG"),P=n("+0xr"),D=n("f0Cb"),k=n("ofXK"),_=["searchInput"];function L(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",28),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-config.action-source")," "))}function j(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.actionSourceName," ")}}function N(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",29),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-config.action-name")," "))}function R(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function U(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",30),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-config.action-icon")," "))}function V(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275elementStart"](1,"mat-icon"),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](n.icon)}}function Q(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",31),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-config.action-type")," "))}function G(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.typeName," ")}}function H(e,t){1&e&&a["\u0275\u0275element"](0,"mat-header-cell",32)}function K(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275elementStart"](1,"div",33),a["\u0275\u0275elementStart"](2,"button",6),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit;return a["\u0275\u0275nextContext"]().editAction(e,i)}),a["\u0275\u0275pipe"](3,"async"),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementStart"](5,"mat-icon"),a["\u0275\u0275text"](6,"edit"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"button",6),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit;return a["\u0275\u0275nextContext"]().deleteAction(e,i)}),a["\u0275\u0275pipe"](8,"async"),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementStart"](10,"mat-icon"),a["\u0275\u0275text"](11,"delete"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](4,6,"widget-config.edit-action")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](3,4,i.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](9,10,"widget-config.delete-action")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](8,8,i.isLoading$))}}var q=function(){return{"mat-row-select":!0}};function z(e,t){1&e&&a["\u0275\u0275element"](0,"mat-header-row",34),2&e&&a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction0"](1,q))}function W(e,t){1&e&&a["\u0275\u0275element"](0,"mat-row",34),2&e&&a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction0"](1,q))}var X=function(){return[10,20,30]},$=function(e){function t(t,n,i,a,r){var o=e.call(this,t)||this;o.store=t,o.translate=n,o.utils=i,o.dialog=a,o.dialogs=r,o.textSearchMode=!1,o.viewsInited=!1,o.dirtyValue=!1,o.propagateChange=function(e){};var s={property:"actionSourceName",direction:c.a.ASC};return o.pageLink=new l.b(10,0,null,s),o.dataSource=new A.a(o.translate,o.utils),o.displayedColumns=["actionSourceName","name","icon","typeName","actions"],o}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){},t.prototype.ngOnDestroy=function(){},t.prototype.ngAfterViewInit=function(){var e=this;Object(p.a)(this.searchInputField.nativeElement,"keyup").pipe(Object(f.a)(150),Object(h.a)(),Object(g.a)(function(){e.paginator.pageIndex=0,e.updateData()})).subscribe(),this.sort.sortChange.subscribe(function(){return e.paginator.pageIndex=0}),Object(m.a)(this.sort.sortChange,this.paginator.page).pipe(Object(g.a)(function(){return e.updateData()})).subscribe(),this.viewsInited=!0,this.dirtyValue&&(this.dirtyValue=!1,this.updateData(!0))},t.prototype.updateData=function(e){void 0===e&&(e=!1),this.pageLink.page=this.paginator.pageIndex,this.pageLink.pageSize=this.paginator.pageSize,this.pageLink.sortOrder.property=this.sort.active,this.pageLink.sortOrder.direction=c.a[this.sort.direction.toUpperCase()],this.dataSource.loadActions(this.pageLink,e)},t.prototype.addAction=function(e){this.openWidgetActionDialog(e)},t.prototype.editAction=function(e,t){this.openWidgetActionDialog(e,t)},t.prototype.openWidgetActionDialog=function(e,t){var n=this;void 0===t&&(t=null),e&&e.stopPropagation();var i=null===t,a=null;i||(a=t.actionSourceId);for(var r={},o=0,s=Object.keys(this.innerValue.actionSources);o<s.length;o++){var l=s[o],c=this.innerValue.actionSources[l];if(c.multiple)r[l]=c;else if(i||t.actionSourceId!==l){var d=this.innerValue.actionsMap[l];d&&d.length||(r[l]=c)}else r[l]=c}var u={actionsMap:this.innerValue.actionsMap,actionSources:r};this.dialog.open(y.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{isAdd:i,callbacks:this.callbacks,actionsData:u,action:Object(v.e)(t),widgetType:this.widgetType}}).afterClosed().subscribe(function(e){e&&n.saveAction(e,i,a)})},t.prototype.saveAction=function(e,t,n){var i,a,r=e.actionSourceId,o=Object(A.c)(e);t?(i=this.getOrCreateTargetActions(r)).push(o):r!==n?((a=(i=this.getOrCreateTargetActions(n)).findIndex(function(e){return e.id===o.id}))>-1&&i.splice(a,1),(i=this.getOrCreateTargetActions(r)).push(o)):(a=(i=this.getOrCreateTargetActions(r)).findIndex(function(e){return e.id===o.id}))>-1&&(i[a]=o);this.onActionsUpdated()},t.prototype.getOrCreateTargetActions=function(e){var t=this.innerValue.actionsMap,n=t[e];return n||(n=[],t[e]=n),n},t.prototype.deleteAction=function(e,t){var n=this;e&&e.stopPropagation();var i=this.translate.instant("widget-config.delete-action-title"),a=this.translate.instant("widget-config.delete-action-text",{actionName:t.name});this.dialogs.confirm(i,a,this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){if(e){var i=n.getOrCreateTargetActions(t.actionSourceId),a=i.findIndex(function(e){return e.id===t.id});a>-1&&(i.splice(a,1),n.onActionsUpdated())}})},t.prototype.enterFilterMode=function(){var e=this;this.textSearchMode=!0,this.pageLink.textSearch="",setTimeout(function(){e.searchInputField.nativeElement.focus(),e.searchInputField.nativeElement.setSelectionRange(0,0)},10)},t.prototype.exitFilterMode=function(){this.textSearchMode=!1,this.pageLink.textSearch=null,this.paginator.pageIndex=0,this.updateData()},t.prototype.resetSortAndFilter=function(e){void 0===e&&(e=!0),this.pageLink.textSearch=null,this.paginator.pageIndex=0;var t=this.sort.sortables.get("actionSourceName");this.sort.active=t.id,this.sort.direction="asc",e&&this.updateData(!0)},t.prototype.registerOnChange=function(e){this.propagateChange=e},t.prototype.registerOnTouched=function(e){},t.prototype.setDisabledState=function(e){this.disabled=e},t.prototype.writeValue=function(e){var t=this;this.innerValue=e,this.innerValue&&setTimeout(function(){t.dataSource.setActions(t.innerValue),t.viewsInited?t.resetSortAndFilter(!0):t.dirtyValue=!0},0)},t.prototype.onActionsUpdated=function(){this.updateData(!0),this.propagateChange(this.innerValue)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](C.Store),a["\u0275\u0275directiveInject"](x.TranslateService),a["\u0275\u0275directiveInject"](b.a),a["\u0275\u0275directiveInject"](w.MatDialog),a["\u0275\u0275directiveInject"](s.a))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-manage-widget-actions"]],viewQuery:function(e,t){if(1&e&&(a["\u0275\u0275viewQuery"](_,1),a["\u0275\u0275viewQuery"](d.MatPaginator,1),a["\u0275\u0275viewQuery"](u.MatSort,1)),2&e){var n=void 0;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.searchInputField=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.paginator=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.sort=n.first)}},inputs:{disabled:"disabled",widgetType:"widgetType",callbacks:"callbacks"},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)(function(){return t}),multi:!0}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:58,vars:41,consts:[[1,"mat-padding","tb-entity-table","tb-absolute-fill"],["fxFlex","","fxLayout","column",1,"mat-elevation-z1","tb-entity-table-content"],[1,"mat-table-toolbar",3,"fxShow"],[1,"mat-toolbar-tools"],["translate","",1,"tb-entity-table-title"],["fxFlex",""],["mat-icon-button","","type","button","matTooltipPosition","above",3,"disabled","matTooltip","click"],["mat-icon-button","","type","button","matTooltipPosition","above",3,"matTooltip"],["matInput","",3,"ngModel","placeholder","ngModelChange"],["searchInput",""],["mat-icon-button","","type","button","matTooltipPosition","above",3,"matTooltip","click"],["fxFlex","",1,"table-container"],["mat-table","","matSort","","matSortDisableClear","",3,"dataSource","matSortActive","matSortDirection"],["matColumnDef","actionSourceName"],["mat-sort-header","","style","width: 20%",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["mat-sort-header","","style","width: 30%",4,"matHeaderCellDef"],["matColumnDef","icon"],["mat-sort-header","","style","width: 40px",4,"matHeaderCellDef"],["matColumnDef","typeName"],["mat-sort-header","","style","width: 50%",4,"matHeaderCellDef"],["matColumnDef","actions","stickyEnd",""],["style","min-width: 80px; max-width: 80px; width: 80px",4,"matHeaderCellDef"],[3,"ngClass",4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"ngClass",4,"matRowDef","matRowDefColumns"],["fxLayoutAlign","center center","translate","",1,"no-data-found",3,"fxShow"],[3,"length","pageIndex","pageSize","pageSizeOptions"],["mat-sort-header","",2,"width","20%"],["mat-sort-header","",2,"width","30%"],["mat-sort-header","",2,"width","40px"],["mat-sort-header","",2,"width","50%"],[2,"min-width","80px","max-width","80px","width","80px"],["fxFlex","","fxLayout","row","fxLayoutAlign","end"],[3,"ngClass"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"mat-toolbar",2),a["\u0275\u0275elementStart"](3,"div",3),a["\u0275\u0275elementStart"](4,"span",4),a["\u0275\u0275text"](5,"widget-config.actions"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](6,"span",5),a["\u0275\u0275elementStart"](7,"button",6),a["\u0275\u0275listener"]("click",function(e){return t.addAction(e)}),a["\u0275\u0275pipe"](8,"async"),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementStart"](10,"mat-icon"),a["\u0275\u0275text"](11,"add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](12,"button",6),a["\u0275\u0275listener"]("click",function(){return t.enterFilterMode()}),a["\u0275\u0275pipe"](13,"async"),a["\u0275\u0275pipe"](14,"translate"),a["\u0275\u0275elementStart"](15,"mat-icon"),a["\u0275\u0275text"](16,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"mat-toolbar",2),a["\u0275\u0275elementStart"](18,"div",3),a["\u0275\u0275elementStart"](19,"button",7),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275elementStart"](21,"mat-icon"),a["\u0275\u0275text"](22,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](23,"mat-form-field",5),a["\u0275\u0275elementStart"](24,"mat-label"),a["\u0275\u0275text"](25,"\xa0"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"input",8,9),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.pageLink.textSearch=e}),a["\u0275\u0275pipe"](28,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](29,"button",10),a["\u0275\u0275listener"]("click",function(){return t.exitFilterMode()}),a["\u0275\u0275pipe"](30,"translate"),a["\u0275\u0275elementStart"](31,"mat-icon"),a["\u0275\u0275text"](32,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](33,"div",11),a["\u0275\u0275elementStart"](34,"table",12),a["\u0275\u0275elementContainerStart"](35,13),a["\u0275\u0275template"](36,L,3,3,"mat-header-cell",14),a["\u0275\u0275template"](37,j,2,1,"mat-cell",15),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementContainerStart"](38,16),a["\u0275\u0275template"](39,N,3,3,"mat-header-cell",17),a["\u0275\u0275template"](40,R,2,1,"mat-cell",15),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementContainerStart"](41,18),a["\u0275\u0275template"](42,U,3,3,"mat-header-cell",19),a["\u0275\u0275template"](43,V,3,1,"mat-cell",15),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementContainerStart"](44,20),a["\u0275\u0275template"](45,Q,3,3,"mat-header-cell",21),a["\u0275\u0275template"](46,G,2,1,"mat-cell",15),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementContainerStart"](47,22),a["\u0275\u0275template"](48,H,1,0,"mat-header-cell",23),a["\u0275\u0275template"](49,K,12,12,"mat-cell",15),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275template"](50,z,1,2,"mat-header-row",24),a["\u0275\u0275template"](51,W,1,2,"mat-row",25),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](52,"span",26),a["\u0275\u0275pipe"](53,"async"),a["\u0275\u0275text"](54),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](55,"mat-divider"),a["\u0275\u0275element"](56,"mat-paginator",27),a["\u0275\u0275pipe"](57,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",!t.textSearchMode),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](9,24,"widget-config.add-action")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](8,22,t.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](14,28,"action.search")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](13,26,t.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("fxShow",t.textSearchMode),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](20,30,"widget-config.search-actions")),a["\u0275\u0275advance"](7),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](28,32,"widget-config.search-actions")),a["\u0275\u0275property"]("ngModel",t.pageLink.textSearch),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](30,34,"action.close")),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("dataSource",t.dataSource)("matSortActive",t.pageLink.sortOrder.property)("matSortDirection",t.pageLink.sortDirection()),a["\u0275\u0275advance"](16),a["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",a["\u0275\u0275pipeBind1"](53,36,t.dataSource.isEmpty())),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"]("widget-config.no-actions-text"),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("length",a["\u0275\u0275pipeBind1"](57,38,t.dataSource.total()))("pageIndex",t.pageLink.page)("pageSize",t.pageLink.pageSize)("pageSizeOptions",a["\u0275\u0275pureFunction0"](40,X)))},directives:[S.b,S.f,E.MatToolbar,I.d,x.TranslateDirective,O.MatButton,T.MatTooltip,F.MatIcon,B.MatFormField,B.MatLabel,M.MatInput,r.DefaultValueAccessor,r.NgControlStatus,r.NgModel,P.MatTable,u.MatSort,P.MatColumnDef,P.MatHeaderCellDef,P.MatCellDef,P.MatHeaderRowDef,P.MatRowDef,S.e,D.MatDivider,d.MatPaginator,P.MatHeaderCell,u.MatSortHeader,P.MatCell,P.MatHeaderRow,k.NgClass,I.b,P.MatRow],pipes:[k.AsyncPipe,x.TranslatePipe],styles:["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .tb-entity-table-title[_ngcontent-%COMP%]{padding-right:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]     .mat-sort-header-sorted .mat-sort-header-arrow{opacity:1!important}"]}),t}(o.a);0,void 0},"4Nnk":function(e,t,n){"use strict";n.d(t,"a",function(){return f});var i=n("fXoL"),a=n("3Pt+"),r=n("JIJk"),o=n("Dgsq"),s=n("//Q6"),l=n("0IaG"),c=n("sYmb"),d=n("XiUz"),u=n("bTqV"),p=n("Qu3c"),m=n("NFeN"),f=function(){function e(e,t,n){this.dialog=e,this.translate=t,this.cd=n,this.scheduleText="",this.propagateChange=function(e){}}return e.prototype.ngOnInit=function(){},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){this.disabled=e},e.prototype.writeValue=function(e){this.modelValue=e,this.updateScheduleText()},e.prototype.updateScheduleText=function(){var e=this.modelValue;switch(Object(s.o)(e)||(e={type:r.c.ANY_TIME}),this.scheduleText="",e.type){case r.c.ANY_TIME:this.scheduleText=this.translate.instant("device-profile.schedule-any-time");break;case r.c.SPECIFIC_TIME:for(var t=0,n=e.daysOfWeek;t<n.length;t++){var i=n[t];this.scheduleText.length&&(this.scheduleText+=", "),this.scheduleText+=this.translate.instant(r.A[i-1])}this.scheduleText+=" <b>"+Object(r.M)(Object(r.Q)(e.startsOn),Object(r.Q)(e.endsOn))+"</b>";break;case r.c.CUSTOM:for(var a=0,o=e.items;a<o.length;a++){var l=o[a];l.enabled&&(this.scheduleText.length&&(this.scheduleText+=", "),this.scheduleText+=this.translate.instant(r.A[l.dayOfWeek-1]),this.scheduleText+=" <b>"+Object(r.M)(Object(r.Q)(l.startsOn),Object(r.Q)(l.endsOn))+"</b>")}}},e.prototype.openScheduleDialog=function(e){var t=this;e&&e.stopPropagation(),this.dialog.open(o.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{readonly:this.disabled,alarmSchedule:this.disabled?this.modelValue:Object(s.e)(this.modelValue)}}).afterClosed().subscribe(function(e){e&&(t.modelValue=e,t.propagateChange(t.modelValue),t.updateScheduleText(),t.cd.detectChanges())})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](l.MatDialog),i["\u0275\u0275directiveInject"](c.TranslateService),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-alarm-schedule-info"]],inputs:{disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:9,vars:8,consts:[["fxLayout","row","fxLayoutAlign","start center",2,"min-width","0"],[1,"tb-alarm-rule-schedule","title",3,"click"],[1,"tb-alarm-rule-schedule",3,"innerHTML","click"],["mat-icon-button","","color","accent","type","button","matTooltipPosition","above",3,"matTooltip","click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"span",1),i["\u0275\u0275listener"]("click",function(e){return t.openScheduleDialog(e)}),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"span",2),i["\u0275\u0275listener"]("click",function(e){return t.openScheduleDialog(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"button",3),i["\u0275\u0275listener"]("click",function(e){return t.openScheduleDialog(e)}),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementStart"](7,"mat-icon"),i["\u0275\u0275text"](8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3,4,"device-profile.schedule")+": "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("innerHTML",t.scheduleText,i["\u0275\u0275sanitizeHtml"]),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](6,6,t.disabled?"action.view":"action.edit")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](t.disabled?"visibility":"edit"))},directives:[d.f,d.e,u.MatButton,p.MatTooltip,m.MatIcon],pipes:[c.TranslatePipe],styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   a.mat-button[_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   a.mat-button[_ngcontent-%COMP%]:hover{border-bottom:none}[_nghost-%COMP%]   .tb-alarm-rule-schedule[_ngcontent-%COMP%]{padding:4px;cursor:pointer;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]   .tb-alarm-rule-schedule.title[_ngcontent-%COMP%]{opacity:.7;overflow:visible}"]}),e}();0,void 0},"4aul":function(e,t,n){"use strict";n.d(t,"a",function(){return x});var i=n("mrSG"),a=n("fXoL"),r=n("3Pt+"),o=n("XNiG"),s=n("1G5W"),l=n("aX2P"),c=n("//Q6"),d=n("XiUz"),u=n("kmnG"),p=n("qFsG"),m=n("ofXK"),f=n("sYmb"),h=n("d3UM"),g=n("FKr1");function A(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,n.requiredText)," ")}}function b(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,n.patternText)," ")}}var y=function(e){return{min:e}};function v(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind2"](2,1,n.minText||n.patternText,a["\u0275\u0275pureFunction1"](4,y,n.minTime/1e3))," ")}}function C(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",7),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.timeUnitTranslations.get(n))," ")}}var x=function(){function e(e){this.fb=e,this.timeUnits=Object.values(Object(i.a)(Object(i.a)({},l.k),l.j)).filter(function(e){return e!==l.j.DAYS}),this.timeUnitTranslations=l.M,this.destroy$=new o.b,this.timeUnitToTimeMap=new Map([[l.k.MILLISECONDS,1],[l.j.SECONDS,l.i],[l.j.MINUTES,l.e],[l.j.HOURS,l.c]]),this.timeToTimeUnitMap=new Map([[l.i,l.k.MILLISECONDS],[l.e,l.j.SECONDS],[l.c,l.j.MINUTES]]),this.minTime=0,this.propagateChange=function(e){}}return e.prototype.ngOnInit=function(){var e=this;this.timeUnitSelectFormGroup=this.fb.group({time:[0,[r.Validators.required,r.Validators.min(this.minTime),r.Validators.pattern("[0-9]*")]],unit:[l.k.MILLISECONDS]}),this.timeUnitSelectFormGroup.valueChanges.pipe(Object(s.a)(this.destroy$)).subscribe(function(t){e.updateModel(t)}),this.timeUnitSelectFormGroup.get("unit").valueChanges.pipe(Object(s.a)(this.destroy$)).subscribe(function(t){if(e.minTime>0){var n=e.timeUnitToTimeMap.get(t),i=Math.ceil(e.minTime/n);e.timeUnitSelectFormGroup.get("time").setValidators([r.Validators.required,r.Validators.min(i),r.Validators.pattern("[0-9]*")]),e.timeUnitSelectFormGroup.get("time").updateValueAndValidity({emitEvent:!1})}})},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.timeUnitSelectFormGroup.disable({emitEvent:!1}):this.timeUnitSelectFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){var t={time:0,unit:l.k.MILLISECONDS};Object(c.o)(e)&&Object(c.x)(e)&&e>=0&&(t.unit=this.calculateTimeUnit(e),t.time=e/this.timeUnitToTimeMap.get(t.unit)),this.timeUnitSelectFormGroup.reset(t,{emitEvent:!1}),this.timeUnitSelectFormGroup.get("unit").updateValueAndValidity({onlySelf:!0})},e.prototype.validate=function(){return this.timeUnitSelectFormGroup.valid?null:{timeUnitSelect:!1}},e.prototype.updateModel=function(e){var t=e.time*this.timeUnitToTimeMap.get(e.unit);this.propagateChange(t)},e.prototype.calculateTimeUnit=function(e){if(0===e)return l.k.MILLISECONDS;for(var t=this.timeToTimeUnitMap[Symbol.iterator](),n=t.next();!n.done;){if(!Number.isInteger(e/n.value[0]))return n.value[1];n=t.next()}return l.j.HOURS},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](r.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-time-unit-select"]],inputs:{disabled:"disabled",labelText:"labelText",requiredText:"requiredText",patternText:"patternText",minTime:"minTime",minText:"minText"},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)(function(){return e}),multi:!0},{provide:r.NG_VALIDATORS,useExisting:Object(a.forwardRef)(function(){return e}),multi:!0}])],decls:14,vars:8,consts:[["fxLayout","row","fxLayout.xs","column","fxLayoutGap.gt-xs","8px",3,"formGroup"],["fxFlex","",1,"mat-block"],["matInput","","type","number","min","0","formControlName","time","required",""],[4,"ngIf"],["translate",""],["formControlName","unit"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"section",0),a["\u0275\u0275elementStart"](1,"mat-form-field",1),a["\u0275\u0275elementStart"](2,"mat-label"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"input",2),a["\u0275\u0275template"](6,A,3,3,"mat-error",3),a["\u0275\u0275template"](7,b,3,3,"mat-error",3),a["\u0275\u0275template"](8,v,3,6,"mat-error",3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"mat-form-field",1),a["\u0275\u0275elementStart"](10,"mat-label",4),a["\u0275\u0275text"](11,"device-profile.condition-duration-time-unit"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](12,"mat-select",5),a["\u0275\u0275template"](13,C,3,4,"mat-option",6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.timeUnitSelectFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,6,t.labelText)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",t.timeUnitSelectFormGroup.get("time").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.timeUnitSelectFormGroup.get("time").hasError("pattern")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.timeUnitSelectFormGroup.get("time").hasError("min")),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngForOf",t.timeUnits))},directives:[d.f,d.g,r.NgControlStatusGroup,r.FormGroupDirective,u.MatFormField,d.b,u.MatLabel,p.MatInput,r.NumberValueAccessor,r.DefaultValueAccessor,r.NgControlStatus,r.FormControlName,r.RequiredValidator,m.NgIf,f.TranslateDirective,h.MatSelect,m.NgForOf,u.MatError,g.MatOption],pipes:[f.TranslatePipe],encapsulation:2}),e}();0,void 0},"4j5O":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n("fXoL"),a=n("OiFK"),r=n("k9IB"),o=n("//Q6"),s=n("0lYY"),l=n("U3y+"),c=n("MBk6"),d=function(){function e(e,t){this.utils=e,this.timeService=t}return e.prototype.validateAndUpdateDashboard=function(e){var t=this;if(e.configuration||(e.configuration={}),Object(o.B)(e.configuration.widgets))e.configuration.widgets={};else if(Array.isArray(e.configuration.widgets)){var n={};e.configuration.widgets.forEach(function(e){e.id||(e.id=t.utils.guid()),n[e.id]=e}),e.configuration.widgets=n}for(var i=0,a=Object.keys(e.configuration.widgets);i<a.length;i++){var r=a[i],s=e.configuration.widgets[r];e.configuration.widgets[r]=this.validateAndUpdateWidget(s)}if(Object(o.B)(e.configuration.states)){e.configuration.states={default:this.createDefaultState(e.title,!0)};for(var l=e.configuration.states.default.layouts.main,c=0,d=Object.keys(e.configuration.widgets);c<d.length;c++){r=d[c],s=e.configuration.widgets[r];l.widgets[r]={sizeX:s.sizeX,sizeY:s.sizeY,row:s.row,col:s.col},Object(o.n)(s.config.mobileHeight)&&(l.widgets[r].mobileHeight=s.config.mobileHeight),Object(o.n)(s.config.mobileOrder)&&(l.widgets[r].mobileOrder=s.config.mobileOrder)}}else{for(var u=e.configuration.states,p=!1,m=0,f=Object.keys(u);m<f.length;m++){var h=u[f[m]];Object(o.B)(h.root)?h.root=!1:h.root&&(p=!0),this.validateAndUpdateState(h)}if(!p)u[Object.keys(u)[0]].root=!0}for(var g={},A={},b=0,y=Object.keys(e.configuration.widgets);b<y.length;b++){var v=y[b];if((s=e.configuration.widgets[v]).config.datasources.forEach(function(e){if(e.entityAliasId){var t=e.entityAliasId,n=g[t];n||(n=[],g[t]=n),n.push(e)}}),s.config.targetDeviceAliasIds&&s.config.targetDeviceAliasIds.length){var C=s.config.targetDeviceAliasIds[0],x=A[C];x||(x=[],A[C]=x),x.push(s.config.targetDeviceAliasIds)}}if(e.configuration=this.validateAndUpdateEntityAliases(e.configuration,g,A),e.configuration.filters||(e.configuration.filters={}),Object(o.B)(e.configuration.timewindow)&&(e.configuration.timewindow=this.timeService.defaultTimewindow()),Object(o.B)(e.configuration.settings)?(e.configuration.settings={},e.configuration.settings.stateControllerId="entity",e.configuration.settings.showTitle=!1,e.configuration.settings.showDashboardsSelect=!0,e.configuration.settings.showEntitiesSelect=!0,e.configuration.settings.showDashboardTimewindow=!0,e.configuration.settings.showDashboardExport=!0,e.configuration.settings.toolbarAlwaysOpen=!0):Object(o.B)(e.configuration.settings.stateControllerId)&&(e.configuration.settings.stateControllerId="entity"),Object(o.n)(e.configuration.gridSettings)){var w=e.configuration.gridSettings;Object(o.n)(w.showTitle)&&(e.configuration.settings.showTitle=w.showTitle,delete w.showTitle),Object(o.n)(w.titleColor)&&(e.configuration.settings.titleColor=w.titleColor,delete w.titleColor),Object(o.n)(w.showDevicesSelect)&&(e.configuration.settings.showEntitiesSelect=w.showDevicesSelect,delete w.showDevicesSelect),Object(o.n)(w.showEntitiesSelect)&&(e.configuration.settings.showEntitiesSelect=w.showEntitiesSelect,delete w.showEntitiesSelect),Object(o.n)(w.showDashboardTimewindow)&&(e.configuration.settings.showDashboardTimewindow=w.showDashboardTimewindow,delete w.showDashboardTimewindow),Object(o.n)(w.showDashboardExport)&&(e.configuration.settings.showDashboardExport=w.showDashboardExport,delete w.showDashboardExport),e.configuration.states.default.layouts.main.gridSettings=w,delete e.configuration.gridSettings}return e},e.prototype.createSingleWidgetDashboard=function(e){e.id||(e.id=this.utils.guid());var t={};return(t=this.validateAndUpdateDashboard(t)).configuration.widgets[e.id]=e,t.configuration.states.default.layouts.main.widgets[e.id]={sizeX:e.sizeX,sizeY:e.sizeY,row:e.row,col:e.col},t},e.prototype.validateAndUpdateWidget=function(e){return e.config||(e.config={}),e.config.datasources||(e.config.datasources=[]),e.config.datasources.forEach(function(e){"device"===e.type&&(e.type=s.a.entity),e.deviceAliasId&&(e.entityAliasId=e.deviceAliasId,delete e.deviceAliasId)}),e.isSystemType&&"charts"===e.bundleAlias&&"timeseries"===e.typeAlias&&(e.typeAlias="basic_timeseries"),e},e.prototype.createDefaultLayoutData=function(){return{widgets:{},gridSettings:this.createDefaultGridSettings()}},e.prototype.createDefaultGridSettings=function(){return{backgroundColor:"#eeeeee",columns:24,margin:10,backgroundSizeMode:"100%"}},e.prototype.createDefaultLayouts=function(){return{main:this.createDefaultLayoutData()}},e.prototype.createDefaultState=function(e,t){return{name:e,root:t,layouts:this.createDefaultLayouts()}},e.prototype.createSingleEntityFilter=function(e){return{type:c.a.singleEntity,singleEntity:e,resolveMultiple:!1}},e.prototype.validateAndUpdateState=function(e){e.layouts||(e.layouts=this.createDefaultLayouts());for(var t=0,n=Object.keys(e.layouts);t<n.length;t++){var i=n[t],a=e.layouts[i];this.validateAndUpdateLayout(a)}},e.prototype.validateAndUpdateLayout=function(e){e.gridSettings||(e.gridSettings=this.createDefaultGridSettings()),e.gridSettings.margins&&2===e.gridSettings.margins.length&&(e.gridSettings.margin=e.gridSettings.margins[0],delete e.gridSettings.margins),e.gridSettings.margin=Object(o.n)(e.gridSettings.margin)?e.gridSettings.margin:10},e.prototype.setLayouts=function(e,t,n){for(var i=e.configuration.states[t],a=0,r=0,o=0,s=Object.keys(i.layouts);o<s.length;o++){n[d=s[o]]||r++}for(var l=0,c=Object.keys(n);l<c.length;l++){var d=c[l];i.layouts[d]||a++}i.layouts=n;var u,p=Object.keys(i.layouts).length;if(a)for(var m=0,f=Object.keys(i.layouts);m<f.length;m++){d=f[m];(u=i.layouts[d].gridSettings.columns*(p-a)/p)>0&&(i.layouts[d].gridSettings.columns=u)}if(r)for(var h=0,g=Object.keys(i.layouts);h<g.length;h++){d=g[h];(u=i.layouts[d].gridSettings.columns*(p+r)/p)>0&&(i.layouts[d].gridSettings.columns=u)}this.removeUnusedWidgets(e)},e.prototype.getRootStateId=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t];if(e[i].root)return i}return Object.keys(e)[0]},e.prototype.getStateLayoutsData=function(e,t){var n=e.configuration.states[t];if(n){for(var i={},a=0,r=Object.keys(n.layouts);a<r.length;a++){var o=r[a],s=n.layouts[o];if(s){i[o]={widgetIds:[],widgetLayouts:{},gridSettings:{}};for(var l=0,c=Object.keys(s.widgets);l<c.length;l++){var d=c[l];i[o].widgetIds.push(d)}i[o].widgetLayouts=s.widgets,i[o].gridSettings=s.gridSettings}}return i}return null},e.prototype.getWidgetsArray=function(e){for(var t=[],n=e.configuration.widgets,i=0,a=Object.keys(n);i<a.length;i++){var r=n[a[i]];t.push(r)}return t},e.prototype.addWidgetToLayout=function(e,t,n,i,a,r,s,l){var c=e.configuration,d=c.states[t],u=d.layouts[n],p=Object.keys(d.layouts).length;i.id||(i.id=this.utils.guid()),c.widgets[i.id]||(c.widgets[i.id]=i);var m={sizeX:r?r.sizeX:i.sizeX,sizeY:r?r.sizeY:i.sizeY,mobileOrder:i.config.mobileOrder,mobileHeight:i.config.mobileHeight,mobileHide:i.config.mobileHide};Object(o.B)(a)&&(a=24);var f=u.gridSettings,h=24;if(f&&f.columns&&(h=f.columns),(h*=p)!==a){var g=h/a;m.sizeX*=g,m.sizeY*=g}if(s>-1&&l>-1)m.row=s,m.col=l;else{s=0;for(var A=0,b=Object.keys(u.widgets);A<b.length;A++){var y=b[A],v=u.widgets[y],C=(v.row?v.row:0)+(v.sizeY?v.sizeY:1);s=Math.max(s,C)}m.row=s,m.col=0}m.sizeX=Math.floor(m.sizeX),m.sizeY=Math.floor(m.sizeY),m.row=Math.floor(m.row),m.col=Math.floor(m.col),u.widgets[i.id]=m},e.prototype.removeWidgetFromLayout=function(e,t,n,i){delete e.configuration.states[t].layouts[n].widgets[i],this.removeUnusedWidgets(e)},e.prototype.isSingleLayoutDashboard=function(e){var t=e.configuration.states,n=Object.keys(t);if(1===n.length){var i=t[n[0]].layouts,a=Object.keys(i);if(1===a.length)return{state:n[0],layout:a[0]}}return null},e.prototype.updateLayoutSettings=function(e,t){var n=e.gridSettings,i=n?n.columns:24;i||(i=24);var a=t.columns||24,r=a/i;e.gridSettings=t;for(var o=0,s=0,l=Object.keys(e.widgets);s<l.length;s++){var c=l[s];(m=e.widgets[c]).sizeX||(m.sizeX=1),m.sizeY||(m.sizeY=1),o=Math.max(o,m.row+m.sizeY)}for(var d=Math.round(o*r),u=0,p=Object.keys(e.widgets);u<p.length;u++){var m;c=p[u];(m=e.widgets[c]).row+m.sizeY===o?(m.row=Math.round(m.row*r),m.sizeY=d-m.row):(m.row=Math.round(m.row*r),m.sizeY=Math.round(m.sizeY*r)),m.sizeX=Math.round(m.sizeX*r),m.col=Math.round(m.col*r),m.col+m.sizeX>a&&(m.sizeX=a-m.col)}},e.prototype.removeUnusedWidgets=function(e){for(var t=e.configuration,n=t.states,i=t.widgets,a=0,r=Object.keys(i);a<r.length;a++){for(var o=r[a],s=!1,l=0,c=Object.keys(n);l<c.length;l++)for(var d=n[c[l]],u=0,p=Object.keys(d.layouts);u<p.length;u++){var m=p[u];if(d.layouts[m].widgets[o]){s=!0;break}}s||delete t.widgets[o]}},e.prototype.validateAndUpdateEntityAliases=function(e,t,n){var i;if(Object(o.B)(e.entityAliases)){if(e.entityAliases={},e.deviceAliases){for(var a=e.deviceAliases,r=0,s=Object.keys(a);r<s.length;r++){var l=a[p=s[r]];i=this.validateAndUpdateDeviceAlias(p,l,t,n),e.entityAliases[i.id]=i}delete e.deviceAliases}}else for(var c=e.entityAliases,d=0,u=Object.keys(c);d<u.length;d++){var p;i=c[p=u[d]],p!==(i=this.validateAndUpdateEntityAlias(p,i,t,n)).id&&delete c[p],c[i.id]=i}return e},e.prototype.validateAndUpdateDeviceAlias=function(e,t,n,i){var a={id:e=this.validateAliasId(e,n,i),alias:t.alias,filter:{type:null,entityType:l.b.DEVICE,resolveMultiple:!1}};return t.deviceFilter?(a.filter.type=t.deviceFilter.useFilter?c.a.entityName:c.a.entityList,a.filter.type===c.a.entityList?a.filter.entityList=t.deviceFilter.deviceList:a.filter.entityNameFilter=t.deviceFilter.deviceNameFilter):(a.filter.type=c.a.entityList,a.filter.entityList=[t.deviceId]),a},e.prototype.validateAndUpdateEntityAlias=function(e,t,n,i){return t.id=this.validateAliasId(e,n,i),t.filter||(t.filter={type:t.entityFilter.useFilter?c.a.entityName:c.a.entityList,entityType:t.entityType,resolveMultiple:!1},t.filter.type===c.a.entityList?t.filter.entityList=t.entityFilter.entityList:t.filter.entityNameFilter=t.entityFilter.entityNameFilter,delete t.entityType,delete t.entityFilter),t},e.prototype.validateAliasId=function(e,t,n){if(e&&Object(o.A)(e)&&36===e.length)return e;var i=this.utils.guid(),a=t[e];a&&a.forEach(function(e){e.entityAliasId=i});var r=n[e];return r&&r.forEach(function(e){e[0]=i}),i},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](a.a),i["\u0275\u0275inject"](r.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();0,void 0},"5OJv":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n("mrSG"),a=n("0lYY"),r=n("0G7Z"),o=n("XNiG"),s=n("LRne"),l=n("//Q6");function c(e){return function(t,n,i){i.enumerable=e}}var d=function(){function e(e,t,n){this.dashboard=e,this.widgetsDiffer=t,this.widgetLayoutsDiffer=n,this.highlightedMode=!1,this.dashboardWidgets=[]}return e.prototype[Symbol.iterator]=function(){return this.activeDashboardWidgets[Symbol.iterator]()},Object.defineProperty(e.prototype,"activeDashboardWidgets",{get:function(){return this.dashboard.isMobileSize&&!this.dashboard.isEdit?this.dashboardWidgets.filter(function(e){return!e.mobileHide}):this.dashboardWidgets},enumerable:!1,configurable:!0}),e.prototype.doCheck=function(){var e=this,t=this.widgetsDiffer.diff(this.widgets),n=this.widgetLayoutsDiffer.diff(this.widgetLayouts),i=[];null!==t&&(t.forEachAddedItem(function(t){i.push({widget:t.item,widgetId:t.item.id,widgetLayout:e.widgetLayouts?e.widgetLayouts[t.item.id]:null,operation:"add"})}),t.forEachRemovedItem(function(e){var t=i.find(function(t){return t.widgetId===e.item.id});t?t.operation="update":(t={widgetId:e.item.id,operation:"remove"},i.push(t))})),null!==n&&n.forEachChangedItem(function(t){if(!i.find(function(e){return e.widgetId===t.key})){var n=e.dashboardWidgets.find(function(e){return e.widgetId===t.key});n&&i.push({widget:n.widget,widgetId:t.key,widgetLayout:t.currentValue,operation:"update"})}}),i.length&&(i.forEach(function(t){var n;switch(t.operation){case"add":e.dashboardWidgets.push(new u(e.dashboard,t.widget,t.widgetLayout));break;case"remove":(n=e.dashboardWidgets.findIndex(function(e){return e.widgetId===t.widgetId}))>-1&&e.dashboardWidgets.splice(n,1);break;case"update":if((n=e.dashboardWidgets.findIndex(function(e){return e.widgetId===t.widgetId}))>-1){var i=e.dashboardWidgets[n];Object(l.r)(i.widget,t.widget)&&Object(l.r)(i.widgetLayout,t.widgetLayout)?(e.dashboardWidgets[n].widget=t.widget,e.dashboardWidgets[n].widgetLayout=t.widgetLayout):(e.dashboardWidgets[n]=new u(e.dashboard,t.widget,t.widgetLayout),e.dashboardWidgets[n].highlighted=i.highlighted,e.dashboardWidgets[n].selected=i.selected)}}}),this.updateRowsAndSort())},e.prototype.widgetLayoutsUpdated=function(){for(var e=function(e){var n=t.widgetLayouts[e],i=t.dashboardWidgets.findIndex(function(t){return t.widgetId===e});i>-1&&(t.dashboardWidgets[i].widgetLayout=n)},t=this,n=0,i=Object.keys(this.widgetLayouts);n<i.length;n++){e(i[n])}this.updateRowsAndSort()},e.prototype.setWidgets=function(e,t){this.highlightedMode=!1,this.widgets=e,this.widgetLayouts=t},e.prototype.highlightWidget=function(e){var t=this.findWidgetById(e);return t&&(!this.highlightedMode||!t.highlighted||this.highlightedMode&&t.highlighted)?(this.highlightedMode=!0,t.highlighted=!0,this.dashboardWidgets.forEach(function(e){e!==t&&(e.highlighted=!1)}),t):null},e.prototype.selectWidget=function(e){var t=this.findWidgetById(e);return t&&!t.selected?(t.selected=!0,this.dashboardWidgets.forEach(function(e){e!==t&&(e.selected=!1)}),t):null},e.prototype.resetHighlight=function(){var e=this.dashboardWidgets.find(function(e){return e.highlighted});return this.highlightedMode=!1,this.dashboardWidgets.forEach(function(e){e.highlighted=!1,e.selected=!1}),e},e.prototype.isHighlighted=function(e){return this.highlightedMode&&e.highlighted||e.selected},e.prototype.isNotHighlighted=function(e){return this.highlightedMode&&!e.highlighted},e.prototype.getSelectedWidget=function(){return this.dashboardWidgets.find(function(e){return e.selected})},e.prototype.findWidgetById=function(e){return this.dashboardWidgets.find(function(t){return t.widgetId===e})},e.prototype.updateRowsAndSort=function(){var e=this.dashboard.gridsterOpts.maxRows;this.activeDashboardWidgets.forEach(function(t){var n=t.y+t.rows;e=Math.max(e,n)}),this.sortWidgets(),this.dashboard.gridsterOpts.maxRows=e,this.dashboard.notifyGridsterOptionsChanged()},e.prototype.sortWidgets=function(){this.dashboardWidgets.sort(function(e,t){var n=e.widgetOrder-t.widgetOrder;return 0===n&&(n=e.x-t.x),n})},e}(),u=function(){function e(e,t,n){this.dashboard=e,this.widget=t,this.widgetLayout=n,this.highlightedValue=!1,this.selectedValue=!1,this.isFullscreen=!1,this.widgetContext=new r.c(this.dashboard,this,this.widget),this.gridsterItemComponentSubject=new o.b,t.id||(t.id=Object(l.k)()),this.widgetId=t.id,this.updateWidgetParams(!1)}return Object.defineProperty(e.prototype,"mobileHide",{get:function(){return!!this.widgetLayout&&!0===this.widgetLayout.mobileHide},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gridsterItemComponent",{set:function(e){this.gridsterItemComponentValue=e,this.gridsterItemComponentSubject.next(this.gridsterItemComponentValue),this.gridsterItemComponentSubject.complete()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"highlighted",{get:function(){return this.highlightedValue},set:function(e){this.highlightedValue!==e&&(this.highlightedValue=e,this.widgetContext.detectContainerChanges())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this.selectedValue},set:function(e){this.selectedValue!==e&&(this.selectedValue=e,this.widgetContext.detectContainerChanges())},enumerable:!1,configurable:!0}),e.prototype.gridsterItemComponent$=function(){return this.gridsterItemComponentValue?Object(s.a)(this.gridsterItemComponentValue):this.gridsterItemComponentSubject.asObservable()},e.prototype.updateWidgetParams=function(e){void 0===e&&(e=!0),this.color=this.widget.config.color||"rgba(0, 0, 0, 0.87)",this.backgroundColor=this.widget.config.backgroundColor||"#fff",this.padding=this.widget.config.padding||"8px",this.margin=this.widget.config.margin||"0px",this.title=Object(l.n)(this.widgetContext.widgetTitle)&&this.widgetContext.widgetTitle.length?this.widgetContext.widgetTitle:this.widget.config.title,this.customTranslatedTitle=this.dashboard.utils.customTranslation(this.title,this.title),this.titleTooltip=Object(l.n)(this.widgetContext.widgetTitleTooltip)&&this.widgetContext.widgetTitleTooltip.length?this.widgetContext.widgetTitleTooltip:this.widget.config.titleTooltip,this.titleTooltip=this.dashboard.utils.customTranslation(this.titleTooltip,this.titleTooltip),this.showTitle=!Object(l.n)(this.widget.config.showTitle)||this.widget.config.showTitle,this.titleStyle=this.widget.config.titleStyle?this.widget.config.titleStyle:{},this.titleIcon=Object(l.n)(this.widget.config.titleIcon)?this.widget.config.titleIcon:"",this.showTitleIcon=!!Object(l.n)(this.widget.config.showTitleIcon)&&this.widget.config.showTitleIcon,this.titleIconStyle={},this.widget.config.iconColor&&(this.titleIconStyle.color=this.widget.config.iconColor),this.widget.config.iconSize&&(this.titleIconStyle.fontSize=this.widget.config.iconSize),this.dropShadow=!Object(l.n)(this.widget.config.dropShadow)||this.widget.config.dropShadow,this.enableFullscreen=!Object(l.n)(this.widget.config.enableFullscreen)||this.widget.config.enableFullscreen,this.hasTimewindow=(this.widget.type===a.m.timeseries||this.widget.type===a.m.alarm)&&(!!Object(l.n)(this.widget.config.useDashboardTimewindow)&&(!this.widget.config.useDashboardTimewindow&&(Object(l.B)(this.widget.config.displayTimewindow)||this.widget.config.displayTimewindow))),this.hasAggregation=this.widget.type===a.m.timeseries,this.style={cursor:"pointer",color:this.color,backgroundColor:this.backgroundColor,padding:this.padding,margin:this.margin},this.widget.config.widgetStyle&&(this.style=Object(i.a)(Object(i.a)({},this.style),this.widget.config.widgetStyle)),this.showWidgetTitlePanel=!this.widgetContext.hideTitlePanel&&(this.showTitle||this.hasTimewindow),this.showWidgetActions=!this.widgetContext.hideTitlePanel,this.customHeaderActions=this.widgetContext.customHeaderActions?this.widgetContext.customHeaderActions:[],this.widgetActions=this.widgetContext.widgetActions?this.widgetContext.widgetActions:[],e&&this.widgetContext.detectContainerChanges()},Object.defineProperty(e.prototype,"x",{get:function(){var e;return e=this.widgetLayout?this.widgetLayout.col:this.widget.col,Math.floor(e)},set:function(e){this.dashboard.isMobileSize||(this.widgetLayout?this.widgetLayout.col=e:this.widget.col=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){var e;return e=this.widgetLayout?this.widgetLayout.row:this.widget.row,Math.floor(e)},set:function(e){this.dashboard.isMobileSize||(this.widgetLayout?this.widgetLayout.row=e:this.widget.row=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cols",{get:function(){var e;return e=this.widgetLayout?this.widgetLayout.sizeX:this.widget.sizeX,Math.floor(e)},set:function(e){this.dashboard.isMobileSize||(this.widgetLayout?this.widgetLayout.sizeX=e:this.widget.sizeX=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){var e;if(this.dashboard.isMobileSize&&!this.dashboard.mobileAutofillHeight){var t=void 0;if(this.widgetLayout&&(t=this.widgetLayout.mobileHeight),!t&&this.widget.config.mobileHeight&&(t=this.widget.config.mobileHeight),t)e=t;else e=24*(this.widgetLayout?this.widgetLayout.sizeY:this.widget.sizeY)/this.dashboard.gridsterOpts.minCols}else e=this.widgetLayout?this.widgetLayout.sizeY:this.widget.sizeY;return Math.floor(e)},set:function(e){this.dashboard.isMobileSize||this.dashboard.autofillHeight||(this.widgetLayout?this.widgetLayout.sizeY=e:this.widget.sizeY=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"widgetOrder",{get:function(){return this.widgetLayout&&Object(l.n)(this.widgetLayout.mobileOrder)&&this.widgetLayout.mobileOrder>=0?this.widgetLayout.mobileOrder:Object(l.n)(this.widget.config.mobileOrder)&&this.widget.config.mobileOrder>=0?this.widget.config.mobileOrder:this.widgetLayout?this.widgetLayout.row:this.widget.row},enumerable:!1,configurable:!0}),Object(i.c)([c(!0),Object(i.f)("design:type",Number),Object(i.f)("design:paramtypes",[Number])],e.prototype,"x",null),Object(i.c)([c(!0),Object(i.f)("design:type",Number),Object(i.f)("design:paramtypes",[Number])],e.prototype,"y",null),Object(i.c)([c(!0),Object(i.f)("design:type",Number),Object(i.f)("design:paramtypes",[Number])],e.prototype,"cols",null),Object(i.c)([c(!0),Object(i.f)("design:type",Number),Object(i.f)("design:paramtypes",[Number])],e.prototype,"rows",null),Object(i.c)([c(!0),Object(i.f)("design:type",Number),Object(i.f)("design:paramtypes",[])],e.prototype,"widgetOrder",null),e}()},"5pw5":function(e,t,n){"use strict";n.d(t,"a",function(){return v});var i=n("mrSG"),a=n("fXoL"),r=n("0IaG"),o=n("XOa3"),s=n("gmuX"),l=n("jCow"),c=n("l7P3"),d=n("tyNb"),u=n("/t3+"),p=n("sYmb"),m=n("XiUz"),f=n("bTqV"),h=n("NFeN"),g=n("znSr"),A=n("ofXK"),b=["actionDataEditor"],y=["failureDetailsEditor"],v=function(e){function t(t,n,i,a,r){var o=e.call(this,t,n,a)||this;return o.store=t,o.router=n,o.data=i,o.dialogRef=a,o.renderer=r,o}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){this.auditLog=this.data.auditLog,this.displayFailureDetails=this.auditLog.actionStatus===o.a.FAILURE,this.actionData=this.auditLog.actionData?JSON.stringify(this.auditLog.actionData,null,2):"",this.actionFailureDetails=this.auditLog.actionFailureDetails,this.createEditor(this.actionDataEditorElmRef,this.actionData),this.displayFailureDetails&&this.createEditor(this.failureDetailsEditorElmRef,this.actionFailureDetails)},t.prototype.createEditor=function(e,t){var n=this,a=e.nativeElement,r={mode:"ace/mode/java",theme:"ace/theme/github",showGutter:!1,showPrintMargin:!1,readOnly:!0};r=Object(i.a)(Object(i.a)({},r),{enableSnippets:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1}),Object(l.b)().subscribe(function(e){var i=e.edit(a,r);i.session.setUseWrapMode(!1),i.setValue(t,-1),n.updateEditorSize(a,t,i)})},t.prototype.updateEditorSize=function(e,t,n){var i=200,a=600;if(t&&t.length>0){var r=t.split("\n");i=16*r.length+16;var o=0;r.forEach(function(e){var t=e.replace(/\t/g,"    ").replace(/\n/g,"").length;o=Math.max(o,t)}),a=8*o+16}this.renderer.setStyle(e,"minHeight",i.toString()+"px"),this.renderer.setStyle(e,"height",i.toString()+"px"),this.renderer.setStyle(e,"width",a.toString()+"px"),n.resize()},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](c.Store),a["\u0275\u0275directiveInject"](d.Router),a["\u0275\u0275directiveInject"](r.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.MatDialogRef),a["\u0275\u0275directiveInject"](a.Renderer2))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-audit-log-details-dialog"]],viewQuery:function(e,t){if(1&e&&(a["\u0275\u0275viewQuery"](b,3),a["\u0275\u0275viewQuery"](y,3)),2&e){var n=void 0;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.actionDataEditorElmRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.failureDetailsEditorElmRef=n.first)}},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:22,vars:10,consts:[["color","accent"],["translate",""],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"mat-dialog-close"],[1,"material-icons"],["mat-dialog-content","","fxLayout","column"],["translate","",1,"tb-title","no-padding"],[1,"tb-audit-log-action-data"],["actionDataEditor",""],[2,"min-height","30px"],["translate","",1,"tb-title","no-padding",3,"fxShow"],[1,"tb-audit-log-failure-details",3,"fxShow"],["failureDetailsEditor",""],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","mat-dialog-close"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-toolbar",0),a["\u0275\u0275elementStart"](1,"h2",1),a["\u0275\u0275text"](2,"audit-log.audit-log-details"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"span",2),a["\u0275\u0275elementStart"](4,"button",3),a["\u0275\u0275elementStart"](5,"mat-icon",4),a["\u0275\u0275text"](6,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"div",5),a["\u0275\u0275elementStart"](8,"label",6),a["\u0275\u0275text"](9,"audit-log.action-data"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](10,"div",7,8),a["\u0275\u0275element"](12,"span",9),a["\u0275\u0275elementStart"](13,"label",10),a["\u0275\u0275text"](14,"audit-log.failure-details"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](15,"div",11,12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"div",13),a["\u0275\u0275elementStart"](18,"button",14),a["\u0275\u0275pipe"](19,"async"),a["\u0275\u0275text"](20),a["\u0275\u0275pipe"](21,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("mat-dialog-close",!1),a["\u0275\u0275advance"](9),a["\u0275\u0275property"]("fxShow",t.displayFailureDetails),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",t.displayFailureDetails),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](19,6,t.isLoading$))("mat-dialog-close",!1),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](21,8,"action.close")," "))},directives:[u.MatToolbar,p.TranslateDirective,m.b,f.MatButton,r.MatDialogClose,h.MatIcon,r.MatDialogContent,m.f,g.d,r.MatDialogActions,m.e],pipes:[A.AsyncPipe,p.TranslatePipe],styles:["[_nghost-%COMP%]   .tb-audit-log-action-data[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-audit-log-failure-details[_ngcontent-%COMP%]{width:100%;min-width:400px;height:100%;min-height:50px;border:1px solid silver}"]}),t}(s.a);0,void 0},"6C3e":function(e,t,n){"use strict";n.r(t),n.d(t,"ColorPickerDialogComponent",function(){return i.a}),n.d(t,"MaterialIconsDialogComponent",function(){return a.a}),n.d(t,"PageComponent",function(){return r.a}),n.d(t,"DialogComponent",function(){return o.a}),n.d(t,"JsFuncComponent",function(){return s.a}),n.d(t,"AlarmId",function(){return l.a}),n.d(t,"AssetId",function(){return d}),n.d(t,"AuditLogId",function(){return u}),n.d(t,"CustomerId",function(){return p.a}),n.d(t,"DashboardId",function(){return m.a}),n.d(t,"DeviceCredentialsId",function(){return f}),n.d(t,"DeviceId",function(){return h}),n.d(t,"DeviceProfileId",function(){return g.a}),n.d(t,"entityIdEquals",function(){return A.a}),n.d(t,"EntityViewId",function(){return b}),n.d(t,"EventId",function(){return y}),n.d(t,"NULL_UUID",function(){return v.a}),n.d(t,"OtaPackageId",function(){return C}),n.d(t,"RpcId",function(){return x}),n.d(t,"RuleChainId",function(){return w.a}),n.d(t,"RuleNodeId",function(){return S}),n.d(t,"TenantId",function(){return E.a}),n.d(t,"TenantProfileId",function(){return I.a}),n.d(t,"UserId",function(){return O.a}),n.d(t,"WidgetTypeId",function(){return T.a}),n.d(t,"WidgetsBundleId",function(){return F}),n.d(t,"EdgeId",function(){return B}),n.d(t,"emptyPageData",function(){return M.a}),n.d(t,"MAX_SAFE_PAGE_SIZE",function(){return P.a}),n.d(t,"defaultPageLinkSearchFunction",function(){return P.d}),n.d(t,"sortItems",function(){return P.e}),n.d(t,"PageLink",function(){return P.b}),n.d(t,"TimePageLink",function(){return P.c}),n.d(t,"Direction",function(){return D.a}),n.d(t,"sortOrderFromString",function(){return D.b}),n.d(t,"DataKeyType",function(){return k.h}),n.d(t,"LatestTelemetry",function(){return k.r}),n.d(t,"AttributeScope",function(){return k.d}),n.d(t,"TelemetryFeature",function(){return k.u}),n.d(t,"toTelemetryType",function(){return k.D}),n.d(t,"telemetryTypeTranslations",function(){return k.C}),n.d(t,"isClientSideTelemetryType",function(){return k.z}),n.d(t,"DataSortOrder",function(){return k.i}),n.d(t,"SubscriptionCmd",function(){return k.s}),n.d(t,"AttributesSubscriptionCmd",function(){return k.e}),n.d(t,"TimeseriesSubscriptionCmd",function(){return k.x}),n.d(t,"GetHistoryCmd",function(){return k.q}),n.d(t,"EntityDataCmd",function(){return k.n}),n.d(t,"EntityCountCmd",function(){return k.k}),n.d(t,"AlarmDataCmd",function(){return k.a}),n.d(t,"EntityDataUnsubscribeCmd",function(){return k.o}),n.d(t,"EntityCountUnsubscribeCmd",function(){return k.l}),n.d(t,"AlarmDataUnsubscribeCmd",function(){return k.b}),n.d(t,"TelemetryPluginCmdsWrapper",function(){return k.v}),n.d(t,"CmdUpdateType",function(){return k.g}),n.d(t,"isEntityDataUpdateMsg",function(){return k.B}),n.d(t,"isAlarmDataUpdateMsg",function(){return k.y}),n.d(t,"isEntityCountUpdateMsg",function(){return k.A}),n.d(t,"SubscriptionUpdate",function(){return k.t}),n.d(t,"CmdUpdate",function(){return k.f}),n.d(t,"DataUpdate",function(){return k.j}),n.d(t,"EntityDataUpdate",function(){return k.p}),n.d(t,"AlarmDataUpdate",function(){return k.c}),n.d(t,"EntityCountUpdate",function(){return k.m}),n.d(t,"TelemetrySubscriber",function(){return k.w}),n.d(t,"SECOND",function(){return _.i}),n.d(t,"MINUTE",function(){return _.e}),n.d(t,"HOUR",function(){return _.c}),n.d(t,"DAY",function(){return _.b}),n.d(t,"WEEK",function(){return _.m}),n.d(t,"YEAR",function(){return _.n}),n.d(t,"TimewindowType",function(){return _.l}),n.d(t,"RealtimeWindowType",function(){return _.h}),n.d(t,"HistoryWindowType",function(){return _.d}),n.d(t,"AggregationType",function(){return _.a}),n.d(t,"aggregationTranslations",function(){return _.o}),n.d(t,"QuickTimeInterval",function(){return _.f}),n.d(t,"QuickTimeIntervalTranslationMap",function(){return _.g}),n.d(t,"historyInterval",function(){return _.I}),n.d(t,"defaultTimewindow",function(){return _.z}),n.d(t,"initModelFromDefaultTimewindow",function(){return _.J}),n.d(t,"toHistoryTimewindow",function(){return _.O}),n.d(t,"timewindowTypeChanged",function(){return _.N}),n.d(t,"calculateTsOffset",function(){return _.u}),n.d(t,"isHistoryTypeTimewindow",function(){return _.K}),n.d(t,"createSubscriptionTimewindow",function(){return _.w}),n.d(t,"calculateIntervalStartEndTime",function(){return _.s}),n.d(t,"calculateIntervalStartTime",function(){return _.t}),n.d(t,"calculateIntervalEndTime",function(){return _.r}),n.d(t,"quickTimeIntervalPeriod",function(){return _.L}),n.d(t,"calculateIntervalComparisonStartTime",function(){return _.q}),n.d(t,"calculateIntervalComparisonEndTime",function(){return _.p}),n.d(t,"createTimewindowForComparison",function(){return _.x}),n.d(t,"cloneSelectedTimewindow",function(){return _.v}),n.d(t,"defaultTimeIntervals",function(){return _.y}),n.d(t,"TimeUnit",function(){return _.j}),n.d(t,"TimeUnitMilli",function(){return _.k}),n.d(t,"timeUnitTranslationMap",function(){return _.M}),n.d(t,"getTimezones",function(){return _.H}),n.d(t,"getTimezoneInfo",function(){return _.G}),n.d(t,"getDefaultTimezoneInfo",function(){return _.D}),n.d(t,"getDefaultTimezone",function(){return _.C}),n.d(t,"getCurrentTime",function(){return _.A}),n.d(t,"getTime",function(){return _.E}),n.d(t,"getTimezone",function(){return _.F}),n.d(t,"getCurrentTimeForComparison",function(){return _.B}),n.d(t,"AlarmSeverity",function(){return L.c}),n.d(t,"AlarmStatus",function(){return L.d}),n.d(t,"AlarmSearchStatus",function(){return L.b}),n.d(t,"alarmSeverityTranslations",function(){return L.h}),n.d(t,"alarmStatusTranslations",function(){return L.i}),n.d(t,"alarmSearchStatusTranslations",function(){return L.f}),n.d(t,"alarmSeverityColors",function(){return L.g}),n.d(t,"simulatedAlarm",function(){return L.j}),n.d(t,"alarmFields",function(){return L.e}),n.d(t,"AlarmQuery",function(){return L.a}),n.d(t,"AliasFilterType",function(){return j.a}),n.d(t,"aliasFilterTypeTranslationMap",function(){return j.b}),n.d(t,"AuditLogMode",function(){return N.c}),n.d(t,"ActionType",function(){return N.b}),n.d(t,"ActionStatus",function(){return N.a}),n.d(t,"actionTypeTranslations",function(){return N.e}),n.d(t,"actionStatusTranslations",function(){return N.d}),n.d(t,"Authority",function(){return R.a}),n.d(t,"ComponentType",function(){return U.b}),n.d(t,"ComponentScope",function(){return U.a}),n.d(t,"Constants",function(){return V.a}),n.d(t,"MediaBreakpoints",function(){return V.g}),n.d(t,"HelpLinks",function(){return V.e}),n.d(t,"ValueType",function(){return V.h}),n.d(t,"DataType",function(){return V.c}),n.d(t,"DataTypeTranslationMap",function(){return V.d}),n.d(t,"valueTypesMap",function(){return V.m}),n.d(t,"ContentType",function(){return V.b}),n.d(t,"contentTypesMap",function(){return V.i}),n.d(t,"customTranslationsPrefix",function(){return V.j}),n.d(t,"i18nPrefix",function(){return V.k}),n.d(t,"MODULES_MAP",function(){return V.f}),n.d(t,"ilink",function(){return V.l}),n.d(t,"isPublicDashboard",function(){return Q.c}),n.d(t,"getDashboardAssignedCustomersText",function(){return Q.a}),n.d(t,"isCurrentPublicDashboardCustomer",function(){return Q.b}),n.d(t,"DeviceProfileType",function(){return G.h}),n.d(t,"DeviceTransportType",function(){return G.j}),n.d(t,"TransportPayloadType",function(){return G.r}),n.d(t,"CoapTransportDeviceType",function(){return G.f}),n.d(t,"DeviceProvisionType",function(){return G.i}),n.d(t,"deviceProfileTypeTranslationMap",function(){return G.H}),n.d(t,"deviceProfileTypeConfigurationInfoMap",function(){return G.G}),n.d(t,"deviceTransportTypeTranslationMap",function(){return G.L}),n.d(t,"deviceProvisionTypeTranslationMap",function(){return G.I}),n.d(t,"deviceTransportTypeHintMap",function(){return G.K}),n.d(t,"transportPayloadTypeTranslationMap",function(){return G.P}),n.d(t,"defaultTelemetrySchema",function(){return G.E}),n.d(t,"defaultAttributesSchema",function(){return G.B}),n.d(t,"defaultRpcRequestSchema",function(){return G.C}),n.d(t,"defaultRpcResponseSchema",function(){return G.D}),n.d(t,"coapDeviceTypeTranslationMap",function(){return G.t}),n.d(t,"deviceTransportTypeConfigurationInfoMap",function(){return G.J}),n.d(t,"SnmpSpecType",function(){return G.p}),n.d(t,"SnmpSpecTypeTranslationMap",function(){return G.q}),n.d(t,"createDeviceProfileConfiguration",function(){return G.v}),n.d(t,"createDeviceConfiguration",function(){return G.u}),n.d(t,"createDeviceProfileTransportConfiguration",function(){return G.w}),n.d(t,"createDeviceTransportConfiguration",function(){return G.x}),n.d(t,"AlarmConditionType",function(){return G.a}),n.d(t,"AlarmConditionTypeTranslationMap",function(){return G.b}),n.d(t,"AlarmScheduleType",function(){return G.c}),n.d(t,"AlarmScheduleTypeTranslationMap",function(){return G.d}),n.d(t,"alarmRuleValidator",function(){return G.s}),n.d(t,"deviceProfileAlarmValidator",function(){return G.F}),n.d(t,"SnmpDeviceProtocolVersion",function(){return G.m}),n.d(t,"SnmpAuthenticationProtocol",function(){return G.k}),n.d(t,"SnmpAuthenticationProtocolTranslationMap",function(){return G.l}),n.d(t,"SnmpPrivacyProtocol",function(){return G.n}),n.d(t,"SnmpPrivacyProtocolTranslationMap",function(){return G.o}),n.d(t,"DeviceCredentialsType",function(){return G.g}),n.d(t,"credentialTypeNames",function(){return G.y}),n.d(t,"credentialTypesByTransportType",function(){return G.z}),n.d(t,"ClaimResponse",function(){return G.e}),n.d(t,"dayOfWeekTranslations",function(){return G.A}),n.d(t,"getDayString",function(){return G.N}),n.d(t,"timeOfDayToUTCTimestamp",function(){return G.O}),n.d(t,"utcTimestampToTimeOfDay",function(){return G.Q}),n.d(t,"getAlarmScheduleRangeText",function(){return G.M}),n.d(t,"EdgeEventType",function(){return H.c}),n.d(t,"EdgeEventActionType",function(){return H.a}),n.d(t,"EdgeEventStatus",function(){return H.b}),n.d(t,"edgeEventTypeTranslations",function(){return H.f}),n.d(t,"edgeEventActionTypeTranslations",function(){return H.d}),n.d(t,"edgeEventStatusColor",function(){return H.e}),n.d(t,"entityFields",function(){return K.a}),n.d(t,"EntityType",function(){return c.b}),n.d(t,"AliasEntityType",function(){return c.a}),n.d(t,"entityTypeTranslations",function(){return c.d}),n.d(t,"entityTypeResources",function(){return c.c}),n.d(t,"EventType",function(){return q.b}),n.d(t,"DebugEventType",function(){return q.a}),n.d(t,"eventTypeTranslations",function(){return q.c}),n.d(t,"materialColorPalette",function(){return z.a}),n.d(t,"materialColors",function(){return z.b}),n.d(t,"DomainSchema",function(){return W.b}),n.d(t,"domainSchemaTranslations",function(){return W.f}),n.d(t,"MapperConfigType",function(){return W.c}),n.d(t,"TenantNameStrategy",function(){return W.e}),n.d(t,"PlatformType",function(){return W.d}),n.d(t,"platformTypeTranslations",function(){return W.g}),n.d(t,"ClientAuthenticationMethod",function(){return W.a}),n.d(t,"ServiceType",function(){return X.a}),n.d(t,"CONTAINS_TYPE",function(){return $.a}),n.d(t,"MANAGES_TYPE",function(){return $.c}),n.d(t,"RelationTypes",function(){return $.e}),n.d(t,"RelationTypeGroup",function(){return $.d}),n.d(t,"EntitySearchDirection",function(){return $.b}),n.d(t,"entitySearchDirectionTranslations",function(){return $.g}),n.d(t,"directionTypeTranslations",function(){return $.f}),n.d(t,"ResourceType",function(){return J.a}),n.d(t,"ResourceTypeMIMETypes",function(){return J.c}),n.d(t,"ResourceTypeExtension",function(){return J.b}),n.d(t,"ResourceTypeTranslationMap",function(){return J.d}),n.d(t,"RpcStatus",function(){return Y.a}),n.d(t,"ruleNodeTypeComponentTypes",function(){return Z.d}),n.d(t,"ruleChainNodeComponent",function(){return Z.c}),n.d(t,"unknownNodeComponent",function(){return Z.e}),n.d(t,"inputNodeComponent",function(){return Z.b}),n.d(t,"RuleChainType",function(){return Z.a}),n.d(t,"RuleNodeConfigurationComponent",function(){return ee.b}),n.d(t,"RuleNodeType",function(){return ee.c}),n.d(t,"ruleNodeTypesLibrary",function(){return ee.g}),n.d(t,"ruleNodeTypeDescriptors",function(){return ee.f}),n.d(t,"MessageType",function(){return ee.a}),n.d(t,"messageTypeNames",function(){return ee.e}),n.d(t,"getRuleNodeHelpLink",function(){return ee.d}),n.d(t,"smtpPortPattern",function(){return te.g}),n.d(t,"phoneNumberPattern",function(){return te.c}),n.d(t,"phoneNumberPatternTwilio",function(){return te.d}),n.d(t,"SmsProviderType",function(){return te.a}),n.d(t,"smsProviderTypeTranslationMap",function(){return te.f}),n.d(t,"smsProviderConfigurationValidator",function(){return te.e}),n.d(t,"createSmsProviderConfiguration",function(){return te.b}),n.d(t,"TenantProfileType",function(){return ne.a}),n.d(t,"createTenantProfileConfiguration",function(){return ne.b}),n.d(t,"ActivationMethod",function(){return ie.a}),n.d(t,"activationMethodTranslations",function(){return ie.b}),n.d(t,"widgetType",function(){return ae.m}),n.d(t,"widgetTypesData",function(){return ae.n}),n.d(t,"widgetActionSources",function(){return ae.j}),n.d(t,"LegendDirection",function(){return ae.b}),n.d(t,"legendDirectionTranslationMap",function(){return ae.h}),n.d(t,"LegendPosition",function(){return ae.c}),n.d(t,"legendPositionTranslationMap",function(){return ae.i}),n.d(t,"defaultLegendConfig",function(){return ae.g}),n.d(t,"DatasourceType",function(){return ae.a}),n.d(t,"datasourceTypeTranslationMap",function(){return ae.f}),n.d(t,"WidgetActionType",function(){return ae.d}),n.d(t,"WidgetMobileActionType",function(){return ae.e}),n.d(t,"widgetActionTypeTranslationMap",function(){return ae.k}),n.d(t,"widgetMobileActionTypeTranslationMap",function(){return ae.l}),n.d(t,"EnumToArrayPipe",function(){return re.a}),n.d(t,"HighlightPipe",function(){return oe.a}),n.d(t,"KeyboardShortcutPipe",function(){return se.a}),n.d(t,"MillisecondsToTimeStringPipe",function(){return le.a}),n.d(t,"NospacePipe",function(){return ce.a}),n.d(t,"TruncatePipe",function(){return de.a}),n.d(t,"FileSizePipe",function(){return ue.a}),n.d(t,"SelectableColumnsPipe",function(){return pe.a}),n.d(t,"SharedModule",function(){return me.a});var i=n("VYz+"),a=n("SReA"),r=n("RxGS"),o=n("gmuX"),s=n("yAAm"),l=n("WZ6u"),c=n("U3y+"),d=function(e){this.entityType=c.b.ASSET,this.id=e},u=function(e){this.id=e},p=n("8Mhd"),m=n("YjEJ"),f=function(e){this.id=e},h=function(e){this.entityType=c.b.DEVICE,this.id=e},g=n("zkya"),A=n("WeLn"),b=function(e){this.entityType=c.b.ENTITY_VIEW,this.id=e},y=function(e){this.id=e},v=n("oKkZ"),C=function(e){this.entityType=c.b.OTA_PACKAGE,this.id=e},x=function(e){this.entityType=c.b.RPC,this.id=e},w=n("APwO"),S=function(e){this.entityType=c.b.RULE_NODE,this.id=e},E=n("KMMH"),I=n("XW0v"),O=n("/Bgp"),T=n("do/i"),F=function(e){this.entityType=c.b.WIDGETS_BUNDLE,this.id=e},B=function(e){this.entityType=c.b.EDGE,this.id=e},M=n("Duvn"),P=n("mbhL"),D=n("4r/P"),k=n("3Tyt"),_=n("aX2P"),L=n("UZbx"),j=n("MBk6"),N=n("XOa3"),R=n("zp9Z"),U=n("3Zdl"),V=n("he9t"),Q=n("IktG"),G=n("JIJk"),H=n("7zTf"),K=n("6OOC"),q=n("90vD"),z=n("7dgu"),W=n("PGJw"),X=n("/3Pq"),$=n("7JTo"),J=n("afHT"),Y=n("hB0h"),Z=n("8km5"),ee=n("+5dr"),te=n("c1Lj"),ne=n("NEMC"),ie=n("KJJU"),ae=n("0lYY"),re=n("fjw6"),oe=n("d5eY"),se=n("EbnC"),le=n("z36O"),ce=n("Ki3a"),de=n("T4sd"),ue=n("9DSm"),pe=n("uKK+"),me=n("PCNd")},"6opy":function(e,t,n){"use strict";n.d(t,"a",function(){return b});var i=n("mrSG"),a=n("fXoL"),r=n("gmuX"),o=n("l7P3"),s=n("tyNb"),l=n("0IaG"),c=n("3Pt+"),d=n("/t3+"),u=n("sYmb"),p=n("XiUz"),m=n("bTqV"),f=n("NFeN"),h=n("ofXK"),g=n("bv9b");function A(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",10)}var b=function(e){function t(t,n,i){var a=e.call(this,t,n,i)||this;return a.store=t,a.router=n,a.dialogRef=i,a}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){},t.prototype.selectLayout=function(e){this.dialogRef.close(e)},t.prototype.cancel=function(){this.dialogRef.close(null)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](o.Store),a["\u0275\u0275directiveInject"](s.Router),a["\u0275\u0275directiveInject"](l.MatDialogRef))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-select-target-layout-dialog"]],features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:20,vars:6,consts:[["color","accent"],["translate",""],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],["fxLayout","column","fxLayoutGap","8px",3,"disabled"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px"],["fxFlex","","mat-raised-button","","color","accent","type","button",1,"tb-layout-button",3,"click"],["color","warn","mode","indeterminate"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form"),a["\u0275\u0275elementStart"](1,"mat-toolbar",0),a["\u0275\u0275elementStart"](2,"h2",1),a["\u0275\u0275text"](3,"layout.select"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",2),a["\u0275\u0275elementStart"](5,"button",3),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](6,"mat-icon",4),a["\u0275\u0275text"](7,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,A,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](9,"async"),a["\u0275\u0275elementStart"](10,"div",6),a["\u0275\u0275elementStart"](11,"fieldset",7),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",8),a["\u0275\u0275elementStart"](14,"button",9),a["\u0275\u0275listener"]("click",function(){return t.selectLayout("main")}),a["\u0275\u0275elementStart"](15,"span",1),a["\u0275\u0275text"](16,"layout.main"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"button",9),a["\u0275\u0275listener"]("click",function(){return t.selectLayout("right")}),a["\u0275\u0275elementStart"](18,"span",1),a["\u0275\u0275text"](19,"layout.right"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](9,2,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](12,4,t.isLoading$)))},directives:[c["\u0275angular_packages_forms_forms_ba"],c.NgControlStatusGroup,c.NgForm,d.MatToolbar,u.TranslateDirective,p.b,m.MatButton,f.MatIcon,h.NgIf,l.MatDialogContent,p.f,p.g,p.e,g.MatProgressBar],pipes:[h.AsyncPipe],styles:["[_nghost-%COMP%]   button.tb-layout-button[_ngcontent-%COMP%]{width:100%;height:100%;padding:40px 20px}[_nghost-%COMP%]  .mat-button-wrapper{line-height:18px}[_nghost-%COMP%]  .mat-button-wrapper span{font-size:18px;font-weight:400;white-space:normal}"]}),t}(r.a);0,void 0},"6oqA":function(e,t,n){"use strict";n.d(t,"a",function(){return w});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("gmuX"),l=n("ec17"),c=n("g+M/"),d=n("l7P3"),u=n("tyNb"),p=n("3Pt+"),m=n("/t3+"),f=n("XiUz"),h=n("bTqV"),g=n("NFeN"),A=n("ofXK"),b=n("bv9b"),y=n("sYmb"),v=["deviceProfileComponent"];function C(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",13)}function x(e,t){1&e&&a["\u0275\u0275element"](0,"div",14)}var w=function(e){function t(t,n,i,a,r,o,s,l){var c=e.call(this,t,n,a)||this;return c.store=t,c.router=n,c.data=i,c.dialogRef=a,c.componentFactoryResolver=r,c.injector=o,c.errorStateMatcher=s,c.deviceProfileService=l,c.submitted=!1,c.isAdd=c.data.isAdd,c.deviceProfile=c.data.deviceProfile,c}return Object(i.d)(t,e),t.prototype.ngAfterViewInit=function(){var e=this;this.isAdd&&setTimeout(function(){e.deviceProfileComponent.entityForm.markAsDirty()},0)},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.save=function(){var e=this;this.submitted=!0,this.deviceProfileComponent.entityForm.valid&&(this.deviceProfile=Object(i.a)(Object(i.a)({},this.deviceProfile),this.deviceProfileComponent.entityFormValue()),this.deviceProfileService.saveDeviceProfileAndConfirmOtaChange(this.deviceProfile,this.deviceProfile).subscribe(function(t){e.dialogRef.close(t)}))},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](d.Store),a["\u0275\u0275directiveInject"](u.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](a.ComponentFactoryResolver),a["\u0275\u0275directiveInject"](a.Injector),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](c.a))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-device-profile-dialog"]],viewQuery:function(e,t){if(1&e&&a["\u0275\u0275viewQuery"](v,3),2&e){var n;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.deviceProfileComponent=n.first)}},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:25,vars:24,consts:[[2,"width","1000px",3,"ngSubmit"],["color","accent"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"standalone","entity","isEdit"],["deviceProfileComponent",""],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,C,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,x,1,0,"div",6),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275element"](14,"tb-device-profile",8,9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"div",10),a["\u0275\u0275elementStart"](17,"button",11),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](18,"async"),a["\u0275\u0275text"](19),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"button",12),a["\u0275\u0275pipe"](22,"async"),a["\u0275\u0275text"](23),a["\u0275\u0275pipe"](24,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275reference"](15);a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,10,t.isAdd?"device-profile.add":"device-profile.edit")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,12,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,14,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("standalone",!0)("entity",t.deviceProfile)("isEdit",!0),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](18,16,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](20,18,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](22,20,t.isLoading$)||(null==n.entityForm?null:n.entityForm.invalid)||!(null!=n.entityForm&&n.entityForm.dirty)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](24,22,t.isAdd?"action.add":"action.save")," ")}},directives:[p["\u0275angular_packages_forms_forms_ba"],p.NgControlStatusGroup,p.NgForm,m.MatToolbar,f.b,h.MatButton,g.MatIcon,A.NgIf,o.MatDialogContent,l.a,o.MatDialogActions,f.e,b.MatProgressBar],pipes:[y.TranslatePipe,A.AsyncPipe],encapsulation:2}),t}(s.a);0,void 0},"72sC":function(e,t,n){"use strict";n.d(t,"a",function(){return T}),n.d(t,"b",function(){return M});var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=(n("5OJv"),n("l7P3")),s=n("8m5z"),l=n("XiUz"),c=n("ofXK"),d=n("znSr"),u=n("ncEg"),p=n("Qu3c"),m=n("NFeN"),f=n("k81w"),h=n("3Pt+"),g=n("bTqV"),A=n("sYmb");function b(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-icon",13),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](4);a["\u0275\u0275property"]("ngStyle",n.widget.titleIconStyle),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](n.widget.titleIcon)}}var y=function(e){return{"single-row":e}};function v(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"span",11),a["\u0275\u0275template"](1,b,2,2,"mat-icon",12),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](3);a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](5,y,n.widget.hasTimewindow))("ngStyle",n.widget.titleStyle)("matTooltip",n.widget.titleTooltip),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.widget.showTitleIcon),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.widget.customTranslatedTitle," ")}}function C(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"tb-timewindow",14),a["\u0275\u0275listener"]("ngModelChange",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](3),a["\u0275\u0275reference"](4).widget.config.timewindow=e})("ngModelChange",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](3),a["\u0275\u0275reference"](4).onTimewindowChanged(e)}),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"](3),r=a["\u0275\u0275reference"](4);a["\u0275\u0275propertyInterpolate"]("aggregation",i.widget.hasAggregation),a["\u0275\u0275property"]("isEdit",i.isEdit)("ngModel",r.widget.config.timewindow)}}function x(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",8),a["\u0275\u0275template"](1,v,3,7,"span",9),a["\u0275\u0275template"](2,C,1,3,"tb-timewindow",10),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.widget.showTitle),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.widget.hasTimewindow)}}function w(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"button",17),a["\u0275\u0275listener"]("click",function(e){return t.$implicit.onAction(e)}),a["\u0275\u0275elementStart"](1,"mat-icon"),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"](3);a["\u0275\u0275propertyInterpolate"]("matTooltip",n.displayName),a["\u0275\u0275property"]("fxShow",!i.isEdit),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](n.icon)}}function S(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"button",17),a["\u0275\u0275listener"]("click",function(e){return t.$implicit.onAction(e)}),a["\u0275\u0275pipe"](1,"translate"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"](3);a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](1,3,n.name)),a["\u0275\u0275property"]("fxShow",!i.isEdit&&n.show),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](n.icon)}}var E=function(e){return{"tb-widget-actions-absolute":e}};function I(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",15),a["\u0275\u0275listener"]("mousedown",function(e){return e.stopPropagation()}),a["\u0275\u0275template"](1,w,3,3,"button",16),a["\u0275\u0275template"](2,S,4,5,"button",16),a["\u0275\u0275elementStart"](3,"button",17),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var t=a["\u0275\u0275nextContext"](2);return e.stopPropagation(),t.widget.isFullscreen=!t.widget.isFullscreen}),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementStart"](5,"mat-icon"),a["\u0275\u0275text"](6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"button",17),a["\u0275\u0275listener"]("click",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).onEdit(e)}),a["\u0275\u0275pipe"](8,"translate"),a["\u0275\u0275elementStart"](9,"mat-icon"),a["\u0275\u0275text"](10,"edit"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"button",17),a["\u0275\u0275listener"]("click",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).onExport(e)}),a["\u0275\u0275pipe"](12,"translate"),a["\u0275\u0275elementStart"](13,"mat-icon"),a["\u0275\u0275text"](14,"file_download"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"button",17),a["\u0275\u0275listener"]("click",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).onRemove(e)}),a["\u0275\u0275pipe"](16,"translate"),a["\u0275\u0275elementStart"](17,"mat-icon"),a["\u0275\u0275text"](18,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](20,E,!(i.widget.showWidgetTitlePanel&&(i.widget.showTitle||i.widget.hasAggregation)))),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",i.widget.customHeaderActions),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",i.widget.widgetActions),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](4,12,i.widget.isFullscreen?"fullscreen.exit":"fullscreen.expand")),a["\u0275\u0275property"]("fxShow",!i.isEdit&&i.widget.enableFullscreen),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](i.widget.isFullscreen?"fullscreen_exit":"fullscreen"),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](8,14,"widget.edit")),a["\u0275\u0275property"]("fxShow",i.isEditActionEnabled&&!i.widget.isFullscreen),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](12,16,"widget.export")),a["\u0275\u0275property"]("fxShow",i.isExportActionEnabled&&!i.widget.isFullscreen),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](16,18,"widget.remove")),a["\u0275\u0275property"]("fxShow",i.isRemoveActionEnabled&&!i.widget.isFullscreen)}}function O(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",5),a["\u0275\u0275template"](1,x,3,2,"div",6),a["\u0275\u0275template"](2,I,19,22,"div",7),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.widget.showWidgetTitlePanel),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.widget.showWidgetActions)}}var T,F=function(e,t,n,i){return{"tb-highlighted":e,"tb-not-highlighted":t,"mat-elevation-z4":n,"tb-has-timewindow":i}},B=function(e){return{"tb-no-interaction":e}};!function(e){e[e.MOUSE_DOWN=0]="MOUSE_DOWN",e[e.CLICKED=1]="CLICKED",e[e.CONTEXT_MENU=2]="CONTEXT_MENU",e[e.EDIT=3]="EDIT",e[e.EXPORT=4]="EXPORT",e[e.REMOVE=5]="REMOVE"}(T||(T={}));var M=function(e){function t(t,n){var i=e.call(this,t)||this;return i.store=t,i.cd=n,i.disableWidgetInteraction=!1,i.widgetFullscreenChanged=new a.EventEmitter,i.widgetComponentAction=new a.EventEmitter,i}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){this.widget.widgetContext.containerChangeDetector=this.cd},t.prototype.isHighlighted=function(e){return this.dashboardWidgets.isHighlighted(e)},t.prototype.isNotHighlighted=function(e){return this.dashboardWidgets.isNotHighlighted(e)},t.prototype.onFullscreenChanged=function(e){this.widgetFullscreenChanged.emit(e)},t.prototype.onMouseDown=function(e){this.widgetComponentAction.emit({event:e,actionType:T.MOUSE_DOWN})},t.prototype.onClicked=function(e){this.widgetComponentAction.emit({event:e,actionType:T.CLICKED})},t.prototype.onContextMenu=function(e){this.widgetComponentAction.emit({event:e,actionType:T.CONTEXT_MENU})},t.prototype.onEdit=function(e){this.widgetComponentAction.emit({event:e,actionType:T.EDIT})},t.prototype.onExport=function(e){this.widgetComponentAction.emit({event:e,actionType:T.EXPORT})},t.prototype.onRemove=function(e){this.widgetComponentAction.emit({event:e,actionType:T.REMOVE})},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](o.Store),a["\u0275\u0275directiveInject"](a.ChangeDetectorRef))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-widget-container"]],inputs:{widget:"widget",dashboardStyle:"dashboardStyle",backgroundImage:"backgroundImage",isEdit:"isEdit",isMobile:"isMobile",dashboardWidgets:"dashboardWidgets",isEditActionEnabled:"isEditActionEnabled",isExportActionEnabled:"isExportActionEnabled",isRemoveActionEnabled:"isRemoveActionEnabled",disableWidgetInteraction:"disableWidgetInteraction"},outputs:{widgetFullscreenChanged:"widgetFullscreenChanged",widgetComponentAction:"widgetComponentAction"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:17,consts:[["tb-fullscreen","","fxLayout","column",1,"tb-widget",3,"fullscreen","fullscreenBackgroundStyle","fullscreenBackgroundImage","ngClass","ngStyle","fullscreenChanged","mousedown","click","contextmenu"],["fxLayout","row","fxLayoutAlign","space-between start",4,"ngIf"],["fxFlex","","fxLayout","column",1,"tb-widget-content",3,"ngClass"],["fxFlex","",3,"dashboardWidget","isEdit","isMobile"],["widgetComponent",""],["fxLayout","row","fxLayoutAlign","space-between start"],["class","tb-widget-title","fxLayout","column","fxLayoutAlign","center start",4,"ngIf"],["class","tb-widget-actions","fxLayout","row","fxLayoutAlign","start center",3,"ngClass","mousedown",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center start",1,"tb-widget-title"],["matTooltipClass","tb-tooltip-multiline","matTooltipPosition","above","class","mat-subheading-2 title",3,"ngClass","ngStyle","matTooltip",4,"ngIf"],["timezone","true",3,"aggregation","isEdit","ngModel","ngModelChange",4,"ngIf"],["matTooltipClass","tb-tooltip-multiline","matTooltipPosition","above",1,"mat-subheading-2","title",3,"ngClass","ngStyle","matTooltip"],[3,"ngStyle",4,"ngIf"],[3,"ngStyle"],["timezone","true",3,"aggregation","isEdit","ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","start center",1,"tb-widget-actions",3,"ngClass","mousedown"],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"fxShow","matTooltip","click",4,"ngFor","ngForOf"],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"fxShow","matTooltip","click"]],template:function(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275listener"]("fullscreenChanged",function(e){return t.onFullscreenChanged(e)})("mousedown",function(e){return t.onMouseDown(e)})("click",function(e){return t.onClicked(e)})("contextmenu",function(e){return t.onContextMenu(e)}),a["\u0275\u0275template"](1,O,3,2,"div",1),a["\u0275\u0275elementStart"](2,"div",2),a["\u0275\u0275element"](3,"tb-widget",3,4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275reference"](4);a["\u0275\u0275property"]("fullscreen",t.widget.isFullscreen)("fullscreenBackgroundStyle",t.dashboardStyle)("fullscreenBackgroundImage",t.backgroundImage)("ngClass",a["\u0275\u0275pureFunction4"](10,F,t.isHighlighted(t.widget),t.isNotHighlighted(t.widget),t.widget.dropShadow,t.widget.hasTimewindow))("ngStyle",t.widget.style),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!(null==n.widgetContext||!n.widgetContext.inited)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](15,B,t.disableWidgetInteraction)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("dashboardWidget",t.widget)("isEdit",t.isEdit)("isMobile",t.isMobile)}},directives:[s.a,l.f,c.NgClass,d.b,c.NgStyle,d.e,c.NgIf,l.b,u.a,l.e,p.MatTooltip,m.MatIcon,f.a,h.NgControlStatus,h.NgModel,c.NgForOf,g.MatButton,d.d],pipes:[A.TranslatePipe],styles:["div.tb-widget[_ngcontent-%COMP%], tb-widget.tb-widget[_ngcontent-%COMP%]{position:relative;height:100%;margin:0;overflow:hidden;outline:none;transition:all .2s ease-in-out}div.tb-widget[_ngcontent-%COMP%]   .tb-widget-title[_ngcontent-%COMP%]{max-height:65px;padding-top:5px;padding-left:5px;overflow:hidden}div.tb-widget[_ngcontent-%COMP%]   .tb-widget-title[_ngcontent-%COMP%]   tb-timewindow[_ngcontent-%COMP%]{font-size:14px;opacity:.85;margin:0}div.tb-widget[_ngcontent-%COMP%]   .tb-widget-title[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:100%;overflow:hidden;text-overflow:ellipsis;line-height:24px;letter-spacing:.01em;margin:0;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}div.tb-widget[_ngcontent-%COMP%]   .tb-widget-title[_ngcontent-%COMP%]   .title.single-row[_ngcontent-%COMP%]{-webkit-line-clamp:1}div.tb-widget[_ngcontent-%COMP%]   .tb-widget-actions[_ngcontent-%COMP%]{z-index:19;margin:5px 0 0}div.tb-widget[_ngcontent-%COMP%]   .tb-widget-actions-absolute[_ngcontent-%COMP%]{position:absolute;top:3px;right:8px;z-index:150}div.tb-widget[_ngcontent-%COMP%]   .tb-widget-actions[_ngcontent-%COMP%]   button.mat-icon-button[_ngcontent-%COMP%]{width:32px;min-width:32px;height:32px;min-height:32px;padding:0!important;margin:0!important;line-height:20px}div.tb-widget[_ngcontent-%COMP%]   .tb-widget-actions[_ngcontent-%COMP%]   button.mat-icon-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:20px;min-width:20px;height:20px;min-height:20px;font-size:20px;line-height:20px}div.tb-widget[_ngcontent-%COMP%]   .tb-widget-content.tb-no-interaction[_ngcontent-%COMP%]{pointer-events:none}div.tb-widget[_ngcontent-%COMP%]   .tb-widget-content[_ngcontent-%COMP%]   tb-widget[_ngcontent-%COMP%]{position:relative;width:100%}div.tb-widget.tb-highlighted[_ngcontent-%COMP%]{border:1px solid #039be5;box-shadow:0 0 20px #039be5}div.tb-widget.tb-not-highlighted[_ngcontent-%COMP%]{opacity:.5}"],changeDetection:0}),t}(r.a);0,void 0},"7ZKe":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("fXoL"),a=n("Y8nr"),r=n("OiFK"),o=n("tk/3"),s=function(){function e(e,t){this.http=e,this.utils=t}return e.prototype.getAlarm=function(e,t){return this.http.get("/api/alarm/"+e,Object(a.b)(t))},e.prototype.getAlarmInfo=function(e,t){return this.http.get("/api/alarm/info/"+e,Object(a.b)(t))},e.prototype.saveAlarm=function(e,t){return this.http.post("/api/alarm",e,Object(a.b)(t))},e.prototype.ackAlarm=function(e,t){return this.http.post("/api/alarm/"+e+"/ack",null,Object(a.b)(t))},e.prototype.clearAlarm=function(e,t){return this.http.post("/api/alarm/"+e+"/clear",null,Object(a.b)(t))},e.prototype.deleteAlarm=function(e,t){return this.http.delete("/api/alarm/"+e,Object(a.b)(t))},e.prototype.getAlarms=function(e,t){return this.http.get("/api/alarm"+e.toQuery(),Object(a.b)(t))},e.prototype.getHighestAlarmSeverity=function(e,t,n,i){var r="/api/alarm/highestSeverity/"+e.entityType+"/"+e.id;return t?r+="?searchStatus="+t:n&&(r+="?status="+n),this.http.get(r,Object(a.b)(i))},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](o.HttpClient),i["\u0275\u0275inject"](r.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();0,void 0},"8yrD":function(e,t,n){"use strict";n.d(t,"a",function(){return v});var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("JIJk"),s=n("//Q6"),l=n("l7P3"),c=n("ofXK"),d=n("QTrg"),u=n("Tu+t"),p=n("nc6G"),m=n("CJSR"),f=n("fWS+");function h(e,t){if(1&e&&i["\u0275\u0275element"](0,"tb-default-device-profile-transport-configuration",3),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("required",n.required)}}function g(e,t){if(1&e&&i["\u0275\u0275element"](0,"tb-mqtt-device-profile-transport-configuration",3),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("required",n.required)}}function A(e,t){if(1&e&&i["\u0275\u0275element"](0,"tb-coap-device-profile-transport-configuration",3),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("required",n.required)}}function b(e,t){if(1&e&&i["\u0275\u0275element"](0,"tb-profile-lwm2m-device-transport-configuration",3),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("required",n.required)}}function y(e,t){if(1&e&&i["\u0275\u0275element"](0,"tb-snmp-device-profile-transport-configuration",3),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("required",n.required)}}var v=function(){function e(e,t){this.store=e,this.fb=t,this.deviceTransportType=o.j,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(r.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.deviceProfileTransportConfigurationFormGroup=this.fb.group({configuration:[null,a.Validators.required]}),this.deviceProfileTransportConfigurationFormGroup.valueChanges.subscribe(function(){e.updateModel()})},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.deviceProfileTransportConfigurationFormGroup.disable({emitEvent:!1}):this.deviceProfileTransportConfigurationFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){var t=this;this.transportType=null==e?void 0:e.type;var n=Object(s.e)(e);n&&delete n.type,setTimeout(function(){t.deviceProfileTransportConfigurationFormGroup.patchValue({configuration:n},{emitEvent:!1})},0)},e.prototype.updateModel=function(){var e=null;this.deviceProfileTransportConfigurationFormGroup.valid&&((e=this.deviceProfileTransportConfigurationFormGroup.getRawValue().configuration).type=this.transportType),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](l.Store),i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-device-profile-transport-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:7,vars:7,consts:[[3,"formGroup"],[3,"ngSwitch"],[3,"ngSwitchCase"],["formControlName","configuration",3,"required"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275template"](2,h,1,1,"ng-template",2),i["\u0275\u0275template"](3,g,1,1,"ng-template",2),i["\u0275\u0275template"](4,A,1,1,"ng-template",2),i["\u0275\u0275template"](5,b,1,1,"ng-template",2),i["\u0275\u0275template"](6,y,1,1,"ng-template",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.deviceProfileTransportConfigurationFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitch",t.transportType),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",t.deviceTransportType.DEFAULT),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",t.deviceTransportType.MQTT),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",t.deviceTransportType.COAP),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",t.deviceTransportType.LWM2M),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",t.deviceTransportType.SNMP))},directives:[a.NgControlStatusGroup,a.FormGroupDirective,c.NgSwitch,c.NgSwitchCase,d.a,a.NgControlStatus,a.FormControlName,a.RequiredValidator,u.a,p.a,m.a,f.a],encapsulation:2}),e}();0,void 0},"90vD":function(e,t,n){"use strict";var i,a;n.d(t,"b",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"c",function(){return r}),function(e){e.ERROR="ERROR",e.LC_EVENT="LC_EVENT",e.STATS="STATS"}(i||(i={})),function(e){e.DEBUG_RULE_NODE="DEBUG_RULE_NODE",e.DEBUG_RULE_CHAIN="DEBUG_RULE_CHAIN"}(a||(a={}));var r=new Map([[i.ERROR,"event.type-error"],[i.LC_EVENT,"event.type-lc-event"],[i.STATS,"event.type-stats"],[a.DEBUG_RULE_NODE,"event.type-debug-rule-node"],[a.DEBUG_RULE_CHAIN,"event.type-debug-rule-chain"]])},"91qg":function(e,t,n){"use strict";n.d(t,"a",function(){return f});var i=n("fXoL"),a=n("3Pt+"),r=(n("xw5a"),n("ct/f")),o=n("//Q6"),s=n("0IaG"),l=n("XiUz"),c=n("kmnG"),d=n("sYmb"),u=n("bTqV"),p=n("Qu3c"),m=n("NFeN"),f=function(){function e(e){this.dialog=e,this.displayUserParameters=!0,this.allowUserDynamicSource=!0,this.onlyUserDynamicSource=!1,this.propagateChange=null}return e.prototype.ngOnInit=function(){},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){this.disabled=e},e.prototype.writeValue=function(e){this.complexFilterPredicate=e},e.prototype.openComplexFilterDialog=function(){var e=this;this.dialog.open(r.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{complexPredicate:this.disabled?this.complexFilterPredicate:Object(o.e)(this.complexFilterPredicate),readonly:this.disabled,valueType:this.valueType,isAdd:!1,key:this.key,displayUserParameters:this.displayUserParameters,allowUserDynamicSource:this.allowUserDynamicSource,onlyUserDynamicSource:this.onlyUserDynamicSource}}).afterClosed().subscribe(function(t){t&&(e.complexFilterPredicate=t,e.updateModel())})},e.prototype.updateModel=function(){this.propagateChange(this.complexFilterPredicate)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.MatDialog))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-complex-filter-predicate"]],inputs:{disabled:"disabled",valueType:"valueType",key:"key",displayUserParameters:"displayUserParameters",allowUserDynamicSource:"allowUserDynamicSource",onlyUserDynamicSource:"onlyUserDynamicSource"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:7,vars:4,consts:[["fxFlex","","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px"],["translate",""],["mat-icon-button","","color","accent","type","button","matTooltipPosition","above",1,"tb-mat-32",3,"matTooltip","click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"mat-label",1),i["\u0275\u0275text"](2,"filter.complex-filter"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"button",2),i["\u0275\u0275listener"]("click",function(){return t.openComplexFilterDialog()}),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementStart"](5,"mat-icon"),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](4,2,t.disabled?"filter.complex-filter":"filter.edit-complex-filter")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](t.disabled?"more_vert":"edit"))},directives:[l.b,l.f,l.e,l.g,c.MatLabel,d.TranslateDirective,u.MatButton,p.MatTooltip,m.MatIcon],pipes:[d.TranslatePipe],encapsulation:2}),e}();0,void 0},"96Yx":function(e,t,n){"use strict";n.d(t,"a",function(){return E});var i=n("fXoL"),a=n("3Pt+"),r=n("JIJk"),o=n("UZbx"),s=n("0IaG"),l=n("XiUz"),c=n("ofXK"),d=n("kmnG"),u=n("sYmb"),p=n("d3UM"),m=n("f0Cb"),f=n("z5iZ"),h=n("FKr1"),g=n("bTqV"),A=n("Qu3c"),b=n("NFeN");function y(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",12),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]().index,r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n)("disabled",r.isDisabledSeverity(r.alarmSeverityEnum[n],a)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,3,r.alarmSeverityTranslationMap.get(r.alarmSeverityEnum[n]))," ")}}function v(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.alarm-severity-required")," "))}function C(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",13),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"]().index;return i["\u0275\u0275nextContext"]().removeCreateAlarmRule(e)}),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275elementStart"](2,"mat-icon"),i["\u0275\u0275text"](3,"remove_circle_outline"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}2&e&&i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](1,1,"action.remove"))}function x(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",3),i["\u0275\u0275elementStart"](1,"div",4),i["\u0275\u0275elementStart"](2,"mat-form-field",5),i["\u0275\u0275elementStart"](3,"mat-label",6),i["\u0275\u0275text"](4,"alarm.severity"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"mat-select",7),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275template"](7,y,3,5,"mat-option",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,v,3,3,"mat-error",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](9,"mat-divider",9),i["\u0275\u0275element"](10,"tb-alarm-rule",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](11,C,4,3,"button",11),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("formGroup",n),i["\u0275\u0275advance"](5),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](6,6,"device-profile.select-alarm-severity")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",a.alarmSeverities),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.get("severity").hasError("required")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("deviceProfileId",a.deviceProfileId),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!a.disabled)}}function w(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"span",14),i["\u0275\u0275text"](2,"device-profile.add-create-alarm-rule-prompt"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}function S(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"button",15),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().addCreateAlarmRule()}),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementStart"](3,"mat-icon",16),i["\u0275\u0275text"](4,"add_circle_outline"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](2,2,"device-profile.add-create-alarm-rule")),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](6,4,"device-profile.add-create-alarm-rule")," "))}var E=function(){function e(e,t){this.dialog=e,this.fb=t,this.alarmSeverities=Object.keys(o.c),this.alarmSeverityEnum=o.c,this.alarmSeverityTranslationMap=o.h,this.usedSeverities=[],this.valueChangeSubscription=null,this.propagateChange=function(e){}}return e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){this.createAlarmRulesFormGroup=this.fb.group({createAlarmRules:this.fb.array([])})},e.prototype.createAlarmRulesFormArray=function(){return this.createAlarmRulesFormGroup.get("createAlarmRules")},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.createAlarmRulesFormGroup.disable({emitEvent:!1}):this.createAlarmRulesFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){var t=this;this.valueChangeSubscription&&this.valueChangeSubscription.unsubscribe();var n=[];e&&Object.keys(e).forEach(function(i){var r=e[i];"empty"===i&&(i=null),n.push(t.fb.group({severity:[i,a.Validators.required],alarmRule:[r,a.Validators.required]}))}),this.createAlarmRulesFormGroup.setControl("createAlarmRules",this.fb.array(n)),this.disabled?this.createAlarmRulesFormGroup.disable({emitEvent:!1}):this.createAlarmRulesFormGroup.enable({emitEvent:!1}),this.valueChangeSubscription=this.createAlarmRulesFormGroup.valueChanges.subscribe(function(){t.updateModel()}),this.updateUsedSeverities(),this.disabled||this.createAlarmRulesFormGroup.valid||this.updateModel()},e.prototype.removeCreateAlarmRule=function(e){this.createAlarmRulesFormGroup.get("createAlarmRules").removeAt(e)},e.prototype.addCreateAlarmRule=function(){this.createAlarmRulesFormGroup.get("createAlarmRules").push(this.fb.group({severity:[this.getFirstUnusedSeverity(),a.Validators.required],alarmRule:[{condition:{condition:[]}},r.s]})),this.createAlarmRulesFormGroup.updateValueAndValidity(),this.createAlarmRulesFormGroup.valid||this.updateModel()},e.prototype.getFirstUnusedSeverity=function(){for(var e=0,t=Object.keys(o.c);e<t.length;e++){var n=t[e],i=o.c[n];if(-1===this.usedSeverities.indexOf(i))return i}return null},e.prototype.validate=function(e){return this.createAlarmRulesFormGroup.valid?null:{createAlarmRules:{valid:!1}}},e.prototype.isDisabledSeverity=function(e,t){var n=this.usedSeverities.indexOf(e);return n>-1&&n!==t},e.prototype.updateUsedSeverities=function(){var e=this;this.usedSeverities=[],this.createAlarmRulesFormGroup.get("createAlarmRules").value.forEach(function(t,n){e.usedSeverities[n]=o.c[t.severity]})},e.prototype.updateModel=function(){var e=this.createAlarmRulesFormGroup.get("createAlarmRules").value,t={};e.forEach(function(e){t[e.severity]=e.alarmRule}),this.updateUsedSeverities(),this.propagateChange(t)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.MatDialog),i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-create-alarm-rules"]],inputs:{disabled:"disabled",deviceProfileId:"deviceProfileId"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:4,vars:3,consts:[["fxFlex","","fxLayout","column"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","style","padding-bottom: 8px;",3,"formGroup",4,"ngFor","ngForOf"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px",2,"padding-bottom","8px",3,"formGroup"],["fxFlex","","fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","start",1,"create-alarm-rule"],["floatLabel","always","hideRequiredMarker","",1,"severity","mat-block"],["translate",""],["formControlName","severity","required","",3,"placeholder"],[3,"value","disabled",4,"ngFor","ngForOf"],["vertical",""],["formControlName","alarmRule","required","","fxFlex","",3,"deviceProfileId"],["mat-icon-button","","color","accent","style","min-width: 40px;","type","button","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],[3,"value","disabled"],["mat-icon-button","","color","accent","type","button","matTooltipPosition","above",2,"min-width","40px",3,"matTooltip","click"],["translate","","fxLayoutAlign","center center",1,"tb-prompt","required",2,"margin","16px 0"],["mat-stroked-button","","color","accent","type","button","matTooltipPosition","above",3,"matTooltip","click"],[1,"button-icon"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,x,12,8,"div",1),i["\u0275\u0275template"](2,w,3,0,"div",2),i["\u0275\u0275template"](3,S,7,6,"div",2),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",t.createAlarmRulesFormArray().controls),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.createAlarmRulesFormArray().controls.length&&!t.disabled),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.disabled))},directives:[l.b,l.f,c.NgForOf,c.NgIf,l.e,l.g,a.NgControlStatusGroup,a.FormGroupDirective,d.MatFormField,d.MatLabel,u.TranslateDirective,p.MatSelect,a.NgControlStatus,a.FormControlName,a.RequiredValidator,m.MatDivider,f.a,h.MatOption,d.MatError,g.MatButton,A.MatTooltip,b.MatIcon],pipes:[u.TranslatePipe],styles:["[_nghost-%COMP%]   .create-alarm-rule[_ngcontent-%COMP%]{border:2px groove rgba(0,0,0,.45);border-radius:4px;padding:8px;min-width:0}[_nghost-%COMP%]     .mat-form-field.severity .mat-form-field-infix{width:160px}[_nghost-%COMP%]     .button-icon{font-size:20px;width:20px;height:20px}"]}),e}();0,void 0},"9GfO":function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n("aX2P"),a=n("//Q6"),r=function(){function e(){this.rangeChanged=!1,this.minTs=Number.MAX_SAFE_INTEGER,this.map=new Map}return e.prototype.set=function(e,t){e<this.minTs&&(this.rangeChanged=!0,this.minTs=e),this.map.set(e,t)},e.prototype.get=function(e){return this.map.get(e)},e.prototype.delete=function(e){this.map.delete(e)},e.prototype.forEach=function(e,t){this.map.forEach(e,t)},e.prototype.size=function(){return this.map.size},e}(),o=function(){function e(){this.aggMap={}}return e.prototype.detectRangeChanged=function(){for(var e=!1,t=0,n=Object.keys(this.aggMap);t<n.length;t++){var i=n[t],a=this.aggMap[i];a.rangeChanged&&(e=!0,a.rangeChanged=!1)}return e},e.prototype.clearRangeChangedFlags=function(){for(var e=0,t=Object.keys(this.aggMap);e<t.length;e++){var n=t[e];this.aggMap[n].rangeChanged=!1}},e}(),s=function(e,t){e.count++,e.sum+=t,e.aggValue=e.sum/e.count},l=function(e,t){e.aggValue=Math.min(e.aggValue,t)},c=function(e,t){e.aggValue=Math.max(e.aggValue,t)},d=function(e,t){e.aggValue=e.aggValue+t},u=function(e){e.count++,e.aggValue=e.count},p=function(e,t){e.aggValue=t},m=function(){function e(e,t,n,a,r){var o=this;switch(this.onDataCb=e,this.tsKeyNames=t,this.subsTw=n,this.utils=a,this.ignoreDataUpdateOnIntervalTick=r,this.dataBuffer={},this.dataReceived=!1,this.resetPending=!1,this.updatedData=!1,this.noAggregation=this.subsTw.aggregation.type===i.a.NONE,this.aggregationTimeout=Math.max(this.subsTw.aggregation.interval,1e3),this.tsKeyNames.forEach(function(e){o.dataBuffer[e]=[]}),this.subsTw.aggregation.stateData&&(this.lastPrevKvPairData={}),this.subsTw.aggregation.type){case i.a.MIN:this.aggFunction=l;break;case i.a.MAX:this.aggFunction=c;break;case i.a.AVG:this.aggFunction=s;break;case i.a.SUM:this.aggFunction=d;break;case i.a.COUNT:this.aggFunction=u;break;case i.a.NONE:this.aggFunction=p;break;default:this.aggFunction=s}}return e.prototype.updateOnDataCb=function(e){var t=this.onDataCb;return this.onDataCb=e,t},e.prototype.reset=function(e){this.intervalTimeoutHandle&&(clearTimeout(this.intervalTimeoutHandle),this.intervalTimeoutHandle=null),this.subsTw=e,this.intervalScheduledTime=this.utils.currentPerfTime(),this.calculateStartEndTs(),this.elapsed=0,this.aggregationTimeout=Math.max(this.subsTw.aggregation.interval,1e3),this.resetPending=!0,this.updatedData=!1,this.intervalTimeoutHandle=setTimeout(this.onInterval.bind(this),this.aggregationTimeout)},e.prototype.destroy=function(){this.intervalTimeoutHandle&&(clearTimeout(this.intervalTimeoutHandle),this.intervalTimeoutHandle=null),this.aggregationMap=null},e.prototype.onData=function(e,t,n,i){if(this.updatedData=!0,!this.dataReceived||this.resetPending){var a=!0;this.dataReceived||(this.elapsed=0,this.dataReceived=!0,this.calculateStartEndTs()),this.resetPending&&(this.resetPending=!1,a=!1),t?(this.aggregationMap=new o,this.updateAggregatedData(e.data)):this.aggregationMap=this.processAggregatedData(e.data),a&&(this.intervalScheduledTime=this.utils.currentPerfTime()),this.aggregationMap.clearRangeChangedFlags(),this.onInterval(n,i)}else this.updateAggregatedData(e.data),n?(this.intervalScheduledTime=this.utils.currentPerfTime(),this.onInterval(n,i)):this.aggregationMap.detectRangeChanged()&&this.onInterval(!1,i,!0)},e.prototype.calculateStartEndTs=function(){if(this.startTs=this.subsTw.startTs+this.subsTw.tsOffset,this.subsTw.quickInterval)if("previousInterval"===this.subsTw.timeForComparison){var e=Object(i.E)(this.subsTw.startTs,this.subsTw.timezone),t=Object(i.A)(this.subsTw.timezone);this.endTs=Object(i.p)(this.subsTw.quickInterval,e,t)+this.subsTw.tsOffset}else{e=Object(i.E)(this.subsTw.startTs,this.subsTw.timezone);this.endTs=Object(i.r)(this.subsTw.quickInterval,e,this.subsTw.timezone)+this.subsTw.tsOffset}else this.endTs=this.startTs+this.subsTw.aggregation.timeWindow},e.prototype.onInterval=function(e,t,n){var a=this.utils.currentPerfTime();this.elapsed+=a-this.intervalScheduledTime,this.intervalScheduledTime=a,this.intervalTimeoutHandle&&(clearTimeout(this.intervalTimeoutHandle),this.intervalTimeoutHandle=null);var r=n?this.aggregationTimeout-this.elapsed:this.aggregationTimeout;if(e)this.data=this.updateData();else{var o=Math.floor(this.elapsed/this.subsTw.aggregation.interval);if(o||!this.data||n){var s=o*this.subsTw.aggregation.interval;if(this.subsTw.quickInterval){var l=Object(i.s)(this.subsTw.quickInterval,this.subsTw.timezone);this.startTs=l[0]+this.subsTw.tsOffset,this.endTs=l[1]+this.subsTw.tsOffset}else this.startTs+=s,this.endTs+=s;this.data=this.updateData(),this.elapsed=this.elapsed-o*this.subsTw.aggregation.interval}}!this.onDataCb||this.ignoreDataUpdateOnIntervalTick&&!this.updatedData||(this.onDataCb(this.data,t),this.updatedData=!1),e||(this.intervalTimeoutHandle=setTimeout(this.onInterval.bind(this),r))},e.prototype.updateData=function(){var e=this;this.tsKeyNames.forEach(function(t){e.dataBuffer[t]=[]});for(var t=function(t){var i=n.aggregationMap.aggMap[t],r=n.dataBuffer[t];i.forEach(function(n,a){if(a<e.startTs)e.subsTw.aggregation.stateData&&(!e.lastPrevKvPairData[t]||e.lastPrevKvPairData[t][0]<a)&&(e.lastPrevKvPairData[t]=[a,n.aggValue]),i.delete(a),e.updatedData=!0;else if(a<e.endTs){var o=[a,n.aggValue];r.push(o)}}),r.sort(function(e,t){return e[0]-t[0]}),n.subsTw.aggregation.stateData&&n.updateStateBounds(r,Object(a.e)(n.lastPrevKvPairData[t])),r.length>n.subsTw.aggregation.limit&&(r=r.slice(r.length-n.subsTw.aggregation.limit)),n.dataBuffer[t]=r},n=this,i=0,r=Object.keys(this.aggregationMap.aggMap);i<r.length;i++){t(r[i])}return this.dataBuffer},e.prototype.updateStateBounds=function(e,t){var n;if(t&&(t[0]=this.startTs),e.length?n=e[0]:t&&(n=t,e.push(n)),n&&n[0]>this.startTs&&t&&e.unshift(t),e.length){var i=e[e.length-1];i[0]<this.endTs&&((i=Object(a.e)(i))[0]=this.endTs,e.push(i))}},e.prototype.processAggregatedData=function(e){for(var t=this,n=this.subsTw.aggregation.type===i.a.COUNT,a=new o,s=function(i){var o=a.aggMap[i];o||(o=new r,a.aggMap[i]=o),e[i].forEach(function(e){var i=e[0],a=t.convertValue(e[1]),r=i,s={count:n?a:1,sum:a,aggValue:a};o.set(r,s)})},l=0,c=Object.keys(e);l<c.length;l++){s(c[l])}return a},e.prototype.updateAggregatedData=function(e){for(var t=this,n=this.subsTw.aggregation.type===i.a.COUNT,a=function(i){var a=o.aggregationMap.aggMap[i];a||(a=new r,o.aggregationMap.aggMap[i]=a),e[i].forEach(function(e){var i=e[0],r=t.convertValue(e[1]),o=t.noAggregation?i:t.startTs+Math.floor((i-t.startTs)/t.subsTw.aggregation.interval)*t.subsTw.aggregation.interval+t.subsTw.aggregation.interval/2,s=a.get(o);s?t.aggFunction(s,r):(s={count:1,sum:r,aggValue:n?1:r},a.set(o,s))})},o=this,s=0,l=Object.keys(e);s<l.length;s++){a(l[s])}},e.prototype.convertValue=function(e){return!this.noAggregation||e&&Object(a.y)(e)&&Number(e).toString()===e?Number(e):e},e}()},"9HAa":function(e,t,n){"use strict";n.d(t,"a",function(){return k});var i=n("mrSG"),a=n("fXoL"),r=n("YnEf"),o=n("xKAQ"),s=n("//Q6"),l=n("wtyh"),c=n("ofXK"),d=n("MBk6"),u=n("ou6H"),p=n("LRne"),m=n("cp0P"),f=n("5+tZ"),h=n("JIr8"),g=n("lJxs"),A=n("vkgz"),b=n("4j5O"),y=n("21Fy"),v=n("EWcq"),C=n("FBAY"),x=n("z3OR"),w=n("U3y+"),S=n("OiFK"),E=n("5xOD"),I=n("oKkZ"),O=n("8km5"),T=n("C4fA"),F=n("g+M/"),B=n("vnPf"),M=n("l7P3"),P=n("sYmb"),D=n("0IaG"),k=function(){function e(e,t,n,i,a,r,o,s,l,c,d,u,p,m){this.window=e,this.document=t,this.store=n,this.translate=i,this.dashboardService=a,this.dashboardUtils=r,this.widgetService=o,this.deviceProfileService=s,this.tenantProfileService=l,this.entityService=c,this.ruleChainService=d,this.utils=u,this.itembuffer=p,this.dialog=m}return e.prototype.exportDashboard=function(e){var t=this;this.dashboardService.getDashboard(e).subscribe(function(e){var n=e.title;n=n.toLowerCase().replace(/\W/g,"_"),t.exportToPc(t.prepareDashboardExport(e),n)},function(e){t.handleExportError(e,"dashboard.export-failed-error")})},e.prototype.importDashboard=function(){var e=this;return this.openImportDialog("dashboard.import","dashboard.dashboard-file").pipe(Object(f.b)(function(t){if(e.validateImportedDashboard(t)){var n=null,i=(t=e.dashboardUtils.validateAndUpdateDashboard(t)).configuration.entityAliases;return i&&(n=Object.keys(i)),n&&n.length>0?e.processEntityAliases(i,n).pipe(Object(f.b)(function(n){return Object.keys(n).length>0?e.editMissingAliases(e.dashboardUtils.getWidgetsArray(t),!1,"dashboard.dashboard-import-missing-aliases-title",n).pipe(Object(f.b)(function(n){for(var a=0,r=Object.keys(n);a<r.length;a++){var o=r[a];i[o]=n[o]}return e.saveImportedDashboard(t)})):e.saveImportedDashboard(t)})):e.saveImportedDashboard(t)}throw e.store.dispatch(new o.b({message:e.translate.instant("dashboard.invalid-dashboard-file-error"),type:"error"})),new Error("Invalid dashboard file")}),Object(h.a)(function(e){return Object(p.a)(null)}))},e.prototype.exportWidget=function(e,t,n,i){var a=this.itembuffer.prepareWidgetItem(e,t,n,i),r=a.widget.config.title;r=r.toLowerCase().replace(/\W/g,"_"),this.exportToPc(this.prepareExport(a),r)},e.prototype.importWidget=function(e,t,n,a,r){var l=this;return this.openImportDialog("dashboard.import-widget","dashboard.widget-file").pipe(Object(f.b)(function(c){if(l.validateImportedWidget(c)){var d=c.widget;d=l.dashboardUtils.validateAndUpdateWidget(d);var u=l.prepareAliasesInfo(c.aliasesInfo),p=c.filtersInfo||{datasourceFilters:{}},m=c.originalColumns,h=c.originalSize,g=u.datasourceAliases,A=u.targetDeviceAliases;if(g||A){var b={},y={},v={},C=void 0,x=void 0;if(g)for(var w=0,S=Object.keys(g);w<S.length;w++){var E=S[w];x=Number(E),C=l.utils.guid(),y[C]=x,b[C]=Object(i.a)({id:C},g[x])}if(A)for(var I=0,O=Object.keys(A);I<O.length;I++){E=O[I];x=Number(E),C=l.utils.guid(),v[C]=x,b[C]=Object(i.a)({id:C},A[x])}var T=Object.keys(b);return T.length>0?l.processEntityAliases(b,T).pipe(Object(f.b)(function(i){return Object.keys(i).length>0?l.editMissingAliases([d],!1,"dashboard.widget-import-missing-aliases-title",i).pipe(Object(f.b)(function(i){for(var o=0,c=Object.keys(i);o<c.length;o++){var f=c[o],b=i[f],C=void 0;Object(s.n)(y[f])?(C=y[f],g[C]=b):Object(s.n)(v[f])&&(C=v[f],A[C]=b)}return l.addImportedWidget(e,t,n,d,u,p,a,r,m,h)})):l.addImportedWidget(e,t,n,d,u,p,a,r,m,h)})):l.addImportedWidget(e,t,n,d,u,p,a,r,m,h)}return l.addImportedWidget(e,t,n,d,u,p,a,r,m,h)}throw l.store.dispatch(new o.b({message:l.translate.instant("dashboard.invalid-widget-file-error"),type:"error"})),new Error("Invalid widget file")}),Object(h.a)(function(e){return Object(p.a)(null)}))},e.prototype.exportWidgetType=function(e){var t=this;this.widgetService.getWidgetTypeById(e).subscribe(function(e){Object(s.n)(e.bundleAlias)&&delete e.bundleAlias;var n=e.name;n=n.toLowerCase().replace(/\W/g,"_"),t.exportToPc(t.prepareExport(e),n)},function(e){t.handleExportError(e,"widget-type.export-failed-error")})},e.prototype.importWidgetType=function(e){var t=this;return this.openImportDialog("widget-type.import","widget-type.widget-type-file").pipe(Object(f.b)(function(n){if(t.validateImportedWidgetTypeDetails(n))return n.bundleAlias=e,t.widgetService.saveImportedWidgetTypeDetails(n);throw t.store.dispatch(new o.b({message:t.translate.instant("widget-type.invalid-widget-type-file-error"),type:"error"})),new Error("Invalid widget type file")}),Object(h.a)(function(e){return Object(p.a)(null)}))},e.prototype.exportWidgetsBundle=function(e){var t=this;this.widgetService.getWidgetsBundle(e).subscribe(function(e){var n=e.alias,i=e.tenantId.id===I.a;t.widgetService.getBundleWidgetTypesDetails(n,i).subscribe(function(n){n=n.sort(function(e,t){return e.createdTime-t.createdTime});for(var i={widgetsBundle:t.prepareExport(e),widgetTypes:[]},a=0,r=n;a<r.length;a++){var o=r[a];Object(s.n)(o.bundleAlias)&&delete o.bundleAlias,i.widgetTypes.push(t.prepareExport(o))}var l=e.title;l=l.toLowerCase().replace(/\W/g,"_"),t.exportToPc(i,l)},function(e){t.handleExportError(e,"widgets-bundle.export-failed-error")})},function(e){t.handleExportError(e,"widgets-bundle.export-failed-error")})},e.prototype.importWidgetsBundle=function(){var e=this;return this.openImportDialog("widgets-bundle.import","widgets-bundle.widgets-bundle-file").pipe(Object(f.b)(function(t){if(e.validateImportedWidgetsBundle(t)){var n=t.widgetsBundle;return e.widgetService.saveWidgetsBundle(n).pipe(Object(f.b)(function(n){var i=n.alias,a=t.widgetTypes;if(a.length){for(var r=[],o=0,s=a;o<s.length;o++){var l=s[o];l.bundleAlias=i,r.push(e.widgetService.saveImportedWidgetTypeDetails(l))}return Object(m.a)(r).pipe(Object(g.a)(function(){return n}))}return Object(p.a)(n)}))}throw e.store.dispatch(new o.b({message:e.translate.instant("widgets-bundle.invalid-widgets-bundle-file-error"),type:"error"})),new Error("Invalid widgets bundle file")}),Object(h.a)(function(e){return Object(p.a)(null)}))},e.prototype.importEntities=function(e,t,n,i,a){var r=this,o=100;o=e.length>o?o:e.length;for(var s={},l=[],c=0;c<o;c++){var d=this.entityService.saveEntityParameters(t,e[c],n,a).pipe(Object(A.a)(function(e){i&&i()}));l.push(d)}return Object(m.a)(l).pipe(Object(f.b)(function(l){for(var c=0,d=l;c<d.length;c++){var u=d[c];s=r.sumObject(s,u)}return e.splice(0,o),e.length?r.importEntities(e,t,n,i,a).pipe(Object(g.a)(function(e){return r.sumObject(s,e)})):Object(p.a)(s)}))},e.prototype.exportRuleChain=function(e){var t=this;this.ruleChainService.getRuleChain(e).pipe(Object(f.b)(function(n){return t.ruleChainService.getRuleChainMetadata(e).pipe(Object(g.a)(function(e){return{ruleChain:t.prepareRuleChain(n),metadata:t.prepareRuleChainMetaData(e)}}))})).subscribe(function(e){var n=e.ruleChain.name;n=n.toLowerCase().replace(/\W/g,"_"),t.exportToPc(e,n)},function(e){t.handleExportError(e,"rulechain.export-failed-error")})},e.prototype.importRuleChain=function(e){var t=this;return this.openImportDialog("rulechain.import","rulechain.rulechain-file").pipe(Object(f.b)(function(n){if(t.validateImportedRuleChain(n)){if(n.ruleChain.type!==e)throw t.store.dispatch(new o.b({message:t.translate.instant("rulechain.invalid-rulechain-type-error",{expectedRuleChainType:e}),type:"error"})),new Error("Invalid rule chain type");return t.ruleChainService.resolveRuleChainMetadata(n.metadata).pipe(Object(g.a)(function(e){return n.resolvedMetadata=e,n}))}throw t.store.dispatch(new o.b({message:t.translate.instant("rulechain.invalid-rulechain-file-error"),type:"error"})),new Error("Invalid rule chain file")}),Object(h.a)(function(e){return Object(p.a)(null)}))},e.prototype.exportDeviceProfile=function(e){var t=this;this.deviceProfileService.getDeviceProfile(e).subscribe(function(e){var n=e.name;n=n.toLowerCase().replace(/\W/g,"_"),t.exportToPc(t.prepareProfileExport(e),n)},function(e){t.handleExportError(e,"device-profile.export-failed-error")})},e.prototype.importDeviceProfile=function(){var e=this;return this.openImportDialog("device-profile.import","device-profile.device-profile-file").pipe(Object(f.b)(function(t){if(e.validateImportedDeviceProfile(t))return e.deviceProfileService.saveDeviceProfile(t);throw e.store.dispatch(new o.b({message:e.translate.instant("device-profile.invalid-device-profile-file-error"),type:"error"})),new Error("Invalid device profile file")}),Object(h.a)(function(e){return Object(p.a)(null)}))},e.prototype.exportTenantProfile=function(e){var t=this;this.tenantProfileService.getTenantProfile(e).subscribe(function(e){var n=e.name;n=n.toLowerCase().replace(/\W/g,"_"),t.exportToPc(t.prepareProfileExport(e),n)},function(e){t.handleExportError(e,"tenant-profile.export-failed-error")})},e.prototype.importTenantProfile=function(){var e=this;return this.openImportDialog("tenant-profile.import","tenant-profile.tenant-profile-file").pipe(Object(f.b)(function(t){if(e.validateImportedTenantProfile(t))return e.tenantProfileService.saveTenantProfile(t);throw e.store.dispatch(new o.b({message:e.translate.instant("tenant-profile.invalid-tenant-profile-file-error"),type:"error"})),new Error("Invalid tenant profile file")}),Object(h.a)(function(){return Object(p.a)(null)}))},e.prototype.exportJSZip=function(e,t){var i=this;n.e(54).then(n.t.bind(null,"xOOu",7)).then(function(n){var a=new n.default;for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];a.file(r,o)}a.generateAsync({type:"blob"}).then(function(e){i.downloadFile(e,t,x.c)})})},e.prototype.prepareRuleChain=function(e){return(e=this.prepareExport(e)).firstRuleNodeId&&(e.firstRuleNodeId=null),e.root=!1,e},e.prototype.prepareRuleChainMetaData=function(e){delete e.ruleChainId;for(var t=0;t<e.nodes.length;t++){var n=e.nodes[t];delete n.ruleChainId,e.nodes[t]=this.prepareExport(n)}return e},e.prototype.validateImportedRuleChain=function(e){return!(Object(s.B)(e.ruleChain)||Object(s.B)(e.metadata)||Object(s.B)(e.ruleChain.name))&&(Object(s.B)(e.ruleChain.type)&&(e.ruleChain.type=O.a.CORE),!0)},e.prototype.validateImportedDeviceProfile=function(e){return!(Object(s.B)(e.name)||Object(s.B)(e.type)||Object(s.B)(e.transportType)||Object(s.B)(e.provisionType)||Object(s.B)(e.profileData))},e.prototype.validateImportedTenantProfile=function(e){return Object(s.n)(e.name)&&Object(s.n)(e.profileData)&&Object(s.n)(e.isolatedTbCore)&&Object(s.n)(e.isolatedTbRuleEngine)},e.prototype.sumObject=function(e,t){var n=this;return Object.keys(t).map(function(a){Object(s.z)(t[a])?(e[a]=e[a]||{},e[a]=Object(i.a)(Object(i.a)({},e[a]),n.sumObject(e[a],t[a]))):e[a]=(e[a]||0)+t[a]}),e},e.prototype.handleExportError=function(e,t){var n=e;n||(n=this.translate.instant("error.unknown-error")),this.store.dispatch(new o.b({message:this.translate.instant(t,{error:n}),type:"error"}))},e.prototype.validateImportedDashboard=function(e){return!Object(s.B)(e.title)&&!Object(s.B)(e.configuration)},e.prototype.validateImportedWidget=function(e){if(Object(s.B)(e.widget)||Object(s.B)(e.aliasesInfo)||Object(s.B)(e.originalColumns))return!1;var t=e.widget;return!(Object(s.B)(t.isSystemType)||Object(s.B)(t.bundleAlias)||Object(s.B)(t.typeAlias)||Object(s.B)(t.type))},e.prototype.validateImportedWidgetTypeDetails=function(e){return!Object(s.B)(e.name)&&!Object(s.B)(e.descriptor)},e.prototype.validateImportedWidgetsBundle=function(e){if(Object(s.B)(e.widgetsBundle))return!1;if(Object(s.B)(e.widgetTypes))return!1;var t=e.widgetsBundle;if(Object(s.B)(t.title))return!1;for(var n=0,i=e.widgetTypes;n<i.length;n++){var a=i[n];if(!this.validateImportedWidgetTypeDetails(a))return!1}return!0},e.prototype.saveImportedDashboard=function(e){return this.dashboardService.saveDashboard(e)},e.prototype.addImportedWidget=function(e,t,n,i,a,r,o,s,l,c){var d=this;return n().pipe(Object(f.b)(function(n){return d.itembuffer.addWidgetToDashboard(e,t,n,i,a,r,o,s,l,c,-1,-1).pipe(Object(g.a)(function(){return{widget:i,layoutId:n}}))}))},e.prototype.processEntityAliases=function(e,t){for(var n=[],i=function(t){var i=e[t];n.push(a.entityService.checkEntityAlias(i).pipe(Object(g.a)(function(e){if(!e){var t=Object(s.e)(i);return t.filter=null,t}return null})))},a=this,r=0,o=t;r<o.length;r++){i(o[r])}return Object(m.a)(n).pipe(Object(g.a)(function(e){for(var t={},n=0,i=e=e.filter(function(e){return null!==e});n<i.length;n++){var a=i[n];t[a.id]=a}return t}))},e.prototype.editMissingAliases=function(e,t,n,i){var a=this.entityService.prepareAllowedEntityTypesList(null,!0);return this.dialog.open(v.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entityAliases:i,widgets:e,customTitle:n,isSingleWidget:t,disableAdd:!0,allowedEntityTypes:a}}).afterClosed().pipe(Object(g.a)(function(e){if(e)return e;throw new Error("Unable to resolve missing entity aliases!")}))},e.prototype.prepareAliasesInfo=function(e){var t=e.datasourceAliases,n=e.targetDeviceAliases;if(t||n){if(t)for(var i=0,a=Object.keys(t);i<a.length;i++){var r=a[i];t[l=Number(r)]=this.prepareEntityAlias(t[l])}if(n)for(var o=0,s=Object.keys(n);o<s.length;o++){var l;r=s[o];n[l=Number(r)]=this.prepareEntityAlias(n[l])}}return e},e.prototype.prepareEntityAlias=function(e){var t,n;return e.deviceId?(t=e.aliasName,n={type:d.a.entityList,entityType:w.b.DEVICE,entityList:[e.deviceId],resolveMultiple:!1}):e.deviceFilter?(t=e.aliasName,(n={type:e.deviceFilter.useFilter?d.a.entityName:d.a.entityList,entityType:w.b.DEVICE,resolveMultiple:!1}).type===d.a.entityList?n.entityList=e.deviceFilter.deviceList:n.entityNameFilter=e.deviceFilter.deviceNameFilter):e.entityFilter?(t=e.aliasName,(n={type:e.entityFilter.useFilter?d.a.entityName:d.a.entityList,entityType:e.entityType,resolveMultiple:!1}).type===d.a.entityList?n.entityList=e.entityFilter.entityList:n.entityNameFilter=e.entityFilter.entityNameFilter):(t=e.alias,n=e.filter),{alias:t,filter:n}},e.prototype.openImportDialog=function(e,t){return this.dialog.open(u.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{importTitle:e,importFileLabel:t}}).afterClosed().pipe(Object(g.a)(function(e){if(e)return e;throw new Error("No file selected!")}))},e.prototype.exportToPc=function(e,t){if(!e)return console.error("No data"),void 0;this.exportJson(e,t)},e.prototype.exportJson=function(e,t){Object(s.z)(e)&&(e=JSON.stringify(e,null,2)),this.downloadFile(e,t,x.b)},e.prototype.downloadFile=function(e,t,n){t||(t="download"),t+="."+n.extension;var i=new Blob([e],{type:n.mimeType});if(this.window.navigator&&this.window.navigator.msSaveOrOpenBlob)this.window.navigator.msSaveOrOpenBlob(i,t);else{var a=this.document.createEvent("MouseEvents"),r=this.document.createElement("a");r.download=t,r.href=URL.createObjectURL(i),r.dataset.downloadurl=[n.mimeType,r.download,r.href].join(":"),a.initEvent("click",!0,!1,this.window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(a)}},e.prototype.prepareDashboardExport=function(e){return delete(e=this.prepareExport(e)).assignedCustomers,e},e.prototype.prepareProfileExport=function(e){return(e=this.prepareExport(e)).default=!1,e},e.prototype.prepareExport=function(e){var t=Object(s.e)(e);return Object(s.n)(t.id)&&delete t.id,Object(s.n)(t.createdTime)&&delete t.createdTime,Object(s.n)(t.tenantId)&&delete t.tenantId,Object(s.n)(t.customerId)&&delete t.customerId,t},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275inject"](l.b),a["\u0275\u0275inject"](c.DOCUMENT),a["\u0275\u0275inject"](M.Store),a["\u0275\u0275inject"](P.TranslateService),a["\u0275\u0275inject"](r.a),a["\u0275\u0275inject"](b.a),a["\u0275\u0275inject"](E.a),a["\u0275\u0275inject"](F.a),a["\u0275\u0275inject"](B.a),a["\u0275\u0275inject"](y.a),a["\u0275\u0275inject"](T.a),a["\u0275\u0275inject"](S.a),a["\u0275\u0275inject"](C.a),a["\u0275\u0275inject"](D.MatDialog))},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0},"9J+n":function(e,t,n){"use strict";n.d(t,"a",function(){return S});var i=n("fXoL"),a=n("UaJx"),r=n("mrSG"),o=n("qxrw"),s=n("7zTf"),l=n("4r/P"),c=n("he9t"),d=n("GdA0"),u=n("3Tyt"),p=n("NSP8"),m=n("lJxs"),f=n("xKAQ"),h=function(e){function t(t,n,i,a,r,o,s,c,d){var u=e.call(this)||this;return u.attributeService=t,u.datePipe=n,u.dialogService=i,u.dialog=a,u.edgeService=r,u.entityService=o,u.translate=s,u.store=c,u.entityId=d,u.tableTitle="",u.loadDataOnInit=!1,u.useTimePageLink=!0,u.detailsPanelEnabled=!1,u.selectionEnabled=!1,u.searchEnabled=!1,u.addEnabled=!1,u.entitiesDeleteEnabled=!1,u.headerComponent=p.a,u.entityTranslations={noEntities:"edge.no-downlinks-prompt"},u.entitiesFetchFunction=function(e){return u.fetchEvents(e)},u.defaultSortOrder={property:"createdTime",direction:l.a.DESC},u.updateColumns(),u}return Object(r.d)(t,e),t.prototype.fetchEvents=function(e){return this.loadEdgeInfo(),this.edgeService.getEdgeEvents(this.entityId,e)},t.prototype.loadEdgeInfo=function(){var e=this;this.attributeService.getEntityAttributes(this.entityId,u.d.SERVER_SCOPE,["queueStartTs"]).subscribe(function(t){return e.onUpdate(t)})},t.prototype.onUpdate=function(e){this.queueStartTs=0;var t=e.reduce(function(e,t){return e[t.key]=t,e},{});t.queueStartTs&&(this.queueStartTs=t.queueStartTs.lastUpdateTs)},t.prototype.updateColumns=function(e){var t=this;void 0===e&&(e=!1),this.columns=[],this.columns.push(new o.b("createdTime","event.event-time",this.datePipe,"120px"),new o.d("type","event.type","25%",function(e){return t.translate.instant(s.f.get(e.type))},function(e){return{}},!1),new o.d("action","edge.event-action","25%",function(e){return t.translate.instant(s.d.get(e.action))},function(e){return{}},!1),new o.d("entityId","edge.entity-id","40%",function(e){return e.entityId},function(e){return{}},!1),new o.d("status","event.status","10%",function(e){return t.updateEdgeEventStatus(e.createdTime)},function(e){return{color:t.isPending(e.createdTime)?s.e.get(s.b.PENDING):s.e.get(s.b.DEPLOYED)}},!1),new o.c("data","event.data",{name:this.translate.instant("action.view"),icon:"more_horiz",isEnabled:function(e){return t.isEdgeEventHasData(e)},onAction:function(e,n){t.prepareEdgeEventContent(n).subscribe(function(n){return t.showEdgeEventContent(e,n,"event.data")},function(){return t.showEntityNotFoundError()})}},"40px")),e&&this.table.columnsUpdated(!0)},t.prototype.updateEdgeEventStatus=function(e){return this.queueStartTs&&e<this.queueStartTs?this.translate.instant("edge.deployed"):this.translate.instant("edge.pending")},t.prototype.isPending=function(e){return e>this.queueStartTs},t.prototype.isEdgeEventHasData=function(e){return!(e.type===s.c.ADMIN_SETTINGS||e.action===s.a.DELETED)},t.prototype.prepareEdgeEventContent=function(e){return this.entityService.getEdgeEventContent(e).pipe(Object(m.a)(function(e){return JSON.stringify(e)}))},t.prototype.showEdgeEventContent=function(e,t,n){e&&e.stopPropagation(),this.dialog.open(d.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{content:t,title:n,contentType:c.b.JSON}})},t.prototype.showEntityNotFoundError=function(){this.store.dispatch(new f.b({message:this.translate.instant("edge.load-entity-error"),type:"error",verticalPosition:"top",horizontalPosition:"left"}))},t}(o.e),g=n("S+vS"),A=n("BsGH"),b=n("y7gY"),y=n("21Fy"),v=n("ofXK"),C=n("0IaG"),x=n("sYmb"),w=n("l7P3"),S=function(){function e(e,t,n,i,a,r,o,s){this.attributeService=e,this.datePipe=t,this.dialogService=n,this.dialog=i,this.edgeService=a,this.entityService=r,this.translate=o,this.store=s,this.activeValue=!1,this.dirtyValue=!1}return Object.defineProperty(e.prototype,"active",{set:function(e){this.activeValue!==e&&(this.activeValue=e,this.activeValue&&this.dirtyValue&&(this.dirtyValue=!1,this.entitiesTable.updateData()))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"entityId",{set:function(e){this.entityIdValue=e,this.edgeDownlinkTableConfig&&this.edgeDownlinkTableConfig.entityId!==e&&(this.edgeDownlinkTableConfig.entityId=e,this.entitiesTable.resetSortAndFilter(this.activeValue),this.activeValue||(this.dirtyValue=!0))},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.dirtyValue=!this.activeValue,this.edgeDownlinkTableConfig=new h(this.attributeService,this.datePipe,this.dialogService,this.dialog,this.edgeService,this.entityService,this.translate,this.store,this.entityIdValue)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](A.a),i["\u0275\u0275directiveInject"](v.DatePipe),i["\u0275\u0275directiveInject"](g.a),i["\u0275\u0275directiveInject"](C.MatDialog),i["\u0275\u0275directiveInject"](b.a),i["\u0275\u0275directiveInject"](y.a),i["\u0275\u0275directiveInject"](x.TranslateService),i["\u0275\u0275directiveInject"](w.Store))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-edge-downlink-table"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](a.a,3),2&e){var n;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.entitiesTable=n.first)}},inputs:{active:"active",entityId:"entityId"},decls:1,vars:1,consts:[[3,"entitiesTableConfig"]],template:function(e,t){1&e&&i["\u0275\u0275element"](0,"tb-entities-table",0),2&e&&i["\u0275\u0275property"]("entitiesTableConfig",t.edgeDownlinkTableConfig)},directives:[a.a],styles:["[_nghost-%COMP%]     tb-entities-table .mat-drawer-container{background-color:#fff}"]}),e}();0,void 0},"9Q2s":function(e,t,n){"use strict";n.d(t,"a",function(){return v});var i=n("fXoL"),a=n("DaoB"),r=n("JIJk"),o=n("//Q6"),s=n("2Vo4"),l=n("pLZG"),c=n("/uUt"),d=n("vkgz"),u=n("5+tZ"),p=n("U3y+"),m=n("xKAQ"),f=n("l7P3"),h=n("sYmb"),g=n("bTqV"),A=n("Dvla"),b=n("znSr"),y=n("NFeN"),v=function(){function e(e,t,n,i){var a=this;this.store=e,this.translate=t,this.deviceService=n,this.cd=i,this.deviceId$=new s.a(null),this.hideButton=!0,this.loading=!1,this.credentialsSubscription=null,this.deviceId$.pipe(Object(l.a)(function(e){return Object(o.o)(e)&&e.entityType===p.b.DEVICE}),Object(c.a)(function(e,t){return e.id===t.id}),Object(d.a)(function(){return a.loading=!0}),Object(u.b)(function(e){return a.deviceService.getDeviceCredentials(e.id)})).subscribe(function(e){a.processingValue(e),a.loading=!1})}return Object.defineProperty(e.prototype,"deviceId",{set:function(e){this.deviceId$.next(e)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.credentialsSubscription=this.credentials$.pipe(Object(l.a)(function(e){return Object(o.o)(e)}),Object(c.a)(function(e,t){return Object(o.r)(e,t)})).subscribe(function(t){e.processingValue(t),e.cd.detectChanges()})},e.prototype.ngOnDestroy=function(){this.deviceId$.unsubscribe(),null!==this.credentialsSubscription&&this.credentialsSubscription.unsubscribe()},e.prototype.processingValue=function(e){switch(e.credentialsType){case r.g.ACCESS_TOKEN:this.hideButton=!1,this.credential=e.credentialsId,this.buttonLabel=this.translate.instant("device.copyAccessToken"),this.tooltipMessage=this.translate.instant("device.accessTokenCopiedMessage");break;case r.g.MQTT_BASIC:this.hideButton=!1,this.credential=this.convertObjectToString(JSON.parse(e.credentialsValue)),this.buttonLabel=this.translate.instant("device.copy-mqtt-authentication"),this.tooltipMessage=this.translate.instant("device.mqtt-authentication-copied-message");break;default:this.hideButton=!0,this.credential=null,this.buttonLabel="",this.tooltipMessage=""}},e.prototype.convertObjectToString=function(e){return Object.keys(e).forEach(function(t){return!e[t]&&void 0!==e[t]&&delete e[t]}),JSON.stringify(e).replace(/"([^"]+)":/g,"$1:")},e.prototype.onCopyCredential=function(){this.store.dispatch(new m.b({message:this.tooltipMessage,type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](f.Store),i["\u0275\u0275directiveInject"](h.TranslateService),i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-copy-device-credentials"]],inputs:{deviceId:"deviceId",disabled:"disabled",credentials$:"credentials$"},decls:4,vars:4,consts:[["mat-raised-button","","ngxClipboard","",3,"cbContent","fxHide","disabled","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"button",0),i["\u0275\u0275listener"]("cbOnSuccess",function(){return t.onCopyCredential()}),i["\u0275\u0275element"](1,"mat-icon",1),i["\u0275\u0275elementStart"](2,"span"),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("cbContent",t.credential)("fxHide",t.hideButton)("disabled",t.disabled||t.loading),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](t.buttonLabel))},directives:[g.MatButton,A.a,b.d,y.MatIcon],encapsulation:2}),e}();0,void 0},"9joC":function(e,t,n){"use strict";n.d(t,"a",function(){return C});var i=n("fXoL"),a=n("3Pt+"),r=n("//Q6"),o=n("JIJk"),s=n("lVMo"),l=n("aX2P"),c=n("xw5a"),d=n("0IaG"),u=n("sYmb"),p=n("XiUz"),m=n("eIDA"),f=n("ofXK"),h=n("bTqV"),g=n("Qu3c"),A=n("NFeN"),b=n("znSr"),y=function(e){return{disabled:e}};function v(e,t){if(1&e&&i["\u0275\u0275element"](0,"span",5),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](2,y,n.disabled))("innerHTML",n.specText,i["\u0275\u0275sanitizeHtml"])}}var C=function(){function e(e,t,n){this.dialog=e,this.fb=t,this.translate=n,this.specText="",this.propagateChange=function(e){}}return e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){this.alarmRuleConditionFormGroup=this.fb.group({condition:[null,a.Validators.required],spec:[null,a.Validators.required]})},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.alarmRuleConditionFormGroup.disable({emitEvent:!1}):this.alarmRuleConditionFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){var t,n;this.modelValue=e,null===this.modelValue||Object(r.o)(null===(n=null===(t=this.modelValue)||void 0===t?void 0:t.spec)||void 0===n?void 0:n.predicate)||(this.modelValue=Object.assign(this.modelValue,{spec:{type:o.a.SIMPLE}})),this.updateConditionInfo()},e.prototype.conditionSet=function(){return this.modelValue&&this.modelValue.condition.length},e.prototype.validate=function(e){return this.conditionSet()?null:{alarmRuleCondition:{valid:!1}}},e.prototype.openFilterDialog=function(e){var t=this;e&&e.stopPropagation(),this.dialog.open(s.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{readonly:this.disabled,condition:this.disabled?this.modelValue:Object(r.e)(this.modelValue),entityId:this.deviceProfileId}}).afterClosed().subscribe(function(e){e&&(t.modelValue=e,t.updateModel())})},e.prototype.updateConditionInfo=function(){var e,t;this.alarmRuleConditionFormGroup.patchValue({condition:null===(e=this.modelValue)||void 0===e?void 0:e.condition,spec:null===(t=this.modelValue)||void 0===t?void 0:t.spec}),this.updateSpecText()},e.prototype.updateSpecText=function(){if(this.specText="",this.modelValue&&this.modelValue.spec){var e=this.modelValue.spec;switch(e.type){case o.a.SIMPLE:break;case o.a.DURATION:var t="";switch(e.unit){case l.j.SECONDS:t=this.translate.instant("timewindow.seconds",{seconds:e.predicate.defaultValue});break;case l.j.MINUTES:t=this.translate.instant("timewindow.minutes",{minutes:e.predicate.defaultValue});break;case l.j.HOURS:t=this.translate.instant("timewindow.hours",{hours:e.predicate.defaultValue});break;case l.j.DAYS:t=this.translate.instant("timewindow.days",{days:e.predicate.defaultValue})}if(e.predicate.dynamicValue&&e.predicate.dynamicValue.sourceAttribute){var n=this.translate.instant(c.q.get(e.predicate.dynamicValue.sourceType));this.specText=this.translate.instant("device-profile.condition-during-dynamic",{during:t,attribute:n+"."+e.predicate.dynamicValue.sourceAttribute})}else this.specText=this.translate.instant("device-profile.condition-during",{during:t});break;case o.a.REPEATING:if(e.predicate.dynamicValue&&e.predicate.dynamicValue.sourceAttribute){n=this.translate.instant(c.q.get(e.predicate.dynamicValue.sourceType));this.specText=this.translate.instant("device-profile.condition-repeat-times-dynamic",{count:e.predicate.defaultValue,attribute:n+"."+e.predicate.dynamicValue.sourceAttribute})}else this.specText=this.translate.instant("device-profile.condition-repeat-times",{count:e.predicate.defaultValue})}}},e.prototype.updateModel=function(){this.updateConditionInfo(),this.propagateChange(this.modelValue)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](d.MatDialog),i["\u0275\u0275directiveInject"](a.FormBuilder),i["\u0275\u0275directiveInject"](u.TranslateService))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-alarm-rule-condition"]],inputs:{disabled:"disabled",deviceProfileId:"deviceProfileId"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:9,vars:11,consts:[["fxLayout","row","fxLayoutAlign","start center",2,"min-width","0",3,"formGroup"],["fxFlex","","fxLayout","column","fxLayoutAlign","center",1,"tb-alarm-rule-condition",3,"click"],["formControlName","condition","required","",3,"nowrap","addFilterPrompt"],["class","tb-alarm-rule-condition-spec",3,"ngClass","innerHTML",4,"ngIf"],["mat-icon-button","","type","button","matTooltipPosition","above",3,"color","matTooltip","click"],[1,"tb-alarm-rule-condition-spec",3,"ngClass","innerHTML"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275listener"]("click",function(e){return t.openFilterDialog(e)}),i["\u0275\u0275element"](2,"tb-filter-text",2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275template"](4,v,1,4,"span",3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"button",4),i["\u0275\u0275listener"]("click",function(e){return t.openFilterDialog(e)}),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementStart"](7,"mat-icon"),i["\u0275\u0275text"](8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.alarmRuleConditionFormGroup),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("addFilterPrompt",i["\u0275\u0275pipeBind1"](3,7,"device-profile.enter-alarm-rule-condition-prompt")),i["\u0275\u0275property"]("nowrap",!0),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.specText),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](6,9,t.disabled?"action.view":"action.edit")),i["\u0275\u0275property"]("color",t.conditionSet()?"primary":"warn"),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](t.disabled?"visibility":t.conditionSet()?"edit":"add"))},directives:[p.f,p.e,a.NgControlStatusGroup,a.FormGroupDirective,p.b,m.a,a.NgControlStatus,a.FormControlName,a.RequiredValidator,f.NgIf,h.MatButton,g.MatTooltip,A.MatIcon,f.NgClass,b.b],pipes:[u.TranslatePipe],styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   a.mat-button[_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   a.mat-button[_ngcontent-%COMP%]:hover{border-bottom:none}[_nghost-%COMP%]   .tb-alarm-rule-condition[_ngcontent-%COMP%]{cursor:pointer;min-width:0}[_nghost-%COMP%]   .tb-alarm-rule-condition[_ngcontent-%COMP%]   .tb-alarm-rule-condition-spec[_ngcontent-%COMP%]{opacity:.7;padding:4px}[_nghost-%COMP%]     .tb-alarm-rule-condition .tb-filter-text{max-height:200px}"]}),e}();0,void 0},"9kgB":function(e,t,n){"use strict";n.d(t,"a",function(){return A});var i=n("fXoL"),a=n("3Pt+"),r=n("ofXK"),o=n("rDax"),s=n("+rOU"),l=n("he9t"),c=n("wtyh"),d=n("//Q6"),u=n("EYOO"),p=n("0MNC"),m=n("bTqV"),f=n("NFeN"),h=n("sYmb"),g=["legendConfigPanelOrigin"],A=function(){function e(e,t,n,i,a){this.overlay=e,this.viewContainerRef=t,this.breakpointObserver=n,this.document=i,this.window=a,this.propagateChange=function(e){}}return e.prototype.ngOnInit=function(){},e.prototype.ngOnDestroy=function(){},e.prototype.openEditMode=function(){if(!this.disabled){var e=this.breakpointObserver.isMatched(l.g["gt-sm"]),t=this.overlay.position(),n=new o.OverlayConfig({panelClass:"tb-legend-config-panel",backdropClass:"cdk-overlay-transparent-backdrop",hasBackdrop:e});if(e){n.minWidth="220px",n.maxHeight="300px";var i=this.legendConfigPanelOrigin.elementRef.nativeElement.getBoundingClientRect(),a=this.window.pageYOffset||this.document.documentElement.scrollTop||this.document.body.scrollTop||0,r=this.window.pageXOffset||this.document.documentElement.scrollLeft||this.document.body.scrollLeft||0,c=i.bottom-a,p=i.left-r,m=void 0,f=void 0,h=void 0,g=void 0;c+220>this.document.documentElement.clientHeight?(f="top",g="bottom"):(f="bottom",g="top"),p+220>this.document.documentElement.clientWidth?(m="end",h="end"):(m="start",h="start");var A={originX:m,originY:f,overlayX:h,overlayY:g};n.positionStrategy=t.flexibleConnectedTo(this.legendConfigPanelOrigin.elementRef).withPositions([A])}else n.minWidth="100%",n.minHeight="100%",n.positionStrategy=t.global().top("0%").left("0%").right("0%").bottom("0%");var b=this.overlay.create(n);b.backdropClick().subscribe(function(){b.dispose()});var y=this._createLegendConfigPanelInjector(b,{legendConfig:Object(d.e)(this.innerValue),legendConfigUpdated:this.legendConfigUpdated.bind(this)});b.attach(new s.ComponentPortal(u.b,this.viewContainerRef,y))}},e.prototype._createLegendConfigPanelInjector=function(e,t){var n=[{provide:u.a,useValue:t},{provide:o.OverlayRef,useValue:e}];return i.Injector.create({parent:this.viewContainerRef.injector,providers:n})},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){this.disabled=e},e.prototype.writeValue=function(e){this.innerValue=e},e.prototype.legendConfigUpdated=function(e){this.innerValue=e,this.propagateChange(this.innerValue)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.Overlay),i["\u0275\u0275directiveInject"](i.ViewContainerRef),i["\u0275\u0275directiveInject"](p.BreakpointObserver),i["\u0275\u0275directiveInject"](r.DOCUMENT),i["\u0275\u0275directiveInject"](c.b))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-legend-config"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](g,1),2&e){var n;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.legendConfigPanelOrigin=n.first)}},inputs:{disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:6,vars:1,consts:[["cdkOverlayOrigin","","type","button","mat-button","","mat-raised-button","","color","accent",3,"disabled","click"],["legendConfigPanelOrigin","cdkOverlayOrigin"],[1,"material-icons"],["translate",""]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"button",0,1),i["\u0275\u0275listener"]("click",function(){return t.openEditMode()}),i["\u0275\u0275elementStart"](2,"mat-icon",2),i["\u0275\u0275text"](3,"toc"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"span",3),i["\u0275\u0275text"](5,"legend.settings"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&i["\u0275\u0275property"]("disabled",t.disabled)},directives:[m.MatButton,o.CdkOverlayOrigin,f.MatIcon,h.TranslateDirective],encapsulation:2}),e}();0,void 0},A1kC:function(e,t,n){"use strict";n.d(t,"a",function(){return B});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("xw5a"),d=n("//Q6"),u=n("l7P3"),p=n("tyNb"),m=n("sYmb"),f=n("/t3+"),h=n("XiUz"),g=n("bTqV"),A=n("NFeN"),b=n("ofXK"),y=n("bv9b"),v=n("kmnG"),C=n("qFsG"),x=n("gl+N"),w=n("bSwM");function S(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",12)}function E(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-form-field",16),a["\u0275\u0275elementStart"](1,"mat-label"),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"input",17),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](n.get("label").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formControl",n.get("value"))}}function I(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-form-field",16),a["\u0275\u0275elementStart"](1,"mat-label"),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"input",18),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](n.get("label").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formControl",n.get("value"))}}function O(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"label",19),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](2,"tb-datetime",20)),2&e){var n=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](n.get("label").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formControl",n.get("value"))("showLabel",!1)}}function T(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-checkbox",21),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275property"]("formControl",n.get("value")),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.get("label").value," ")}}function F(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",13),a["\u0275\u0275elementStart"](1,"div",14),a["\u0275\u0275template"](2,E,4,2,"ng-template",15),a["\u0275\u0275template"](3,I,4,2,"ng-template",15),a["\u0275\u0275template"](4,O,3,3,"ng-template",15),a["\u0275\u0275template"](5,T,2,2,"ng-template",15),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitch",n.get("valueType").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",i.valueTypeEnum.STRING),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",i.valueTypeEnum.NUMERIC),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",i.valueTypeEnum.DATE_TIME),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",i.valueTypeEnum.BOOLEAN)}}var B=function(e){function t(t,n,i,a,r,o,s){var l=e.call(this,t,n,r)||this;l.store=t,l.router=n,l.data=i,l.errorStateMatcher=a,l.dialogRef=r,l.fb=o,l.translate=s,l.valueTypeEnum=c.e,l.submitted=!1,l.filter=i.filter;for(var d=[],u=0,p=Object(c.z)(l.filter,s);u<p.length;u++){var m=p[u];d.push(l.createUserInputFormControl(m))}return l.userFilterFormGroup=l.fb.group({userInputs:l.fb.array(d)}),l}return Object(i.d)(t,e),t.prototype.createUserInputFormControl=function(e){var t=e.info.keyFilterPredicate.value,n=Object(d.o)(t.userValue)?t.userValue:t.defaultValue,i=this.fb.group({label:[e.label],valueType:[e.valueType],value:[n,e.valueType===c.e.NUMERIC||e.valueType===c.e.DATE_TIME?[s.Validators.required]:[]]});return i.get("value").valueChanges.subscribe(function(t){e.info.keyFilterPredicate.value.userValue=t}),i},t.prototype.userInputsFormArray=function(){return this.userFilterFormGroup.get("userInputs")},t.prototype.ngOnInit=function(){},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.save=function(){this.submitted=!0,this.dialogRef.close(this.filter)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](u.Store),a["\u0275\u0275directiveInject"](p.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder),a["\u0275\u0275directiveInject"](m.TranslateService))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-user-filter-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:23,vars:21,consts:[[2,"width","400px",3,"formGroup","ngSubmit"],["color","accent"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["formArrayName","userInputs",4,"ngFor","ngForOf"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],["formArrayName","userInputs"],[3,"ngSwitch"],[3,"ngSwitchCase"],[1,"mat-block"],["matInput","",3,"formControl"],["required","","type","number","matInput","",3,"formControl"],[1,"tb-title","no-padding","tb-required"],["dateText","filter.date","timeText","filter.time","required","",3,"formControl","showLabel"],["labelPosition","before",3,"formControl"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",2),a["\u0275\u0275elementStart"](5,"button",3),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](6,"mat-icon",4),a["\u0275\u0275text"](7,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,S,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](9,"async"),a["\u0275\u0275elementStart"](10,"div",6),a["\u0275\u0275elementStart"](11,"fieldset",7),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275template"](13,F,6,5,"div",8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"div",9),a["\u0275\u0275elementStart"](15,"button",10),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](16,"async"),a["\u0275\u0275text"](17),a["\u0275\u0275pipe"](18,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"button",11),a["\u0275\u0275pipe"](20,"async"),a["\u0275\u0275text"](21),a["\u0275\u0275pipe"](22,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.userFilterFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.filter.filter),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](9,9,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](12,11,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",t.userInputsFormArray().controls),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](16,13,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](18,15,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](20,17,t.isLoading$)||t.userFilterFormGroup.invalid||!t.userFilterFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](22,19,"action.update")," "))},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,f.MatToolbar,h.b,g.MatButton,A.MatIcon,b.NgIf,o.MatDialogContent,b.NgForOf,o.MatDialogActions,h.e,y.MatProgressBar,s.FormArrayName,b.NgSwitch,b.NgSwitchCase,v.MatFormField,v.MatLabel,C.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlDirective,s.NumberValueAccessor,s.RequiredValidator,x.a,w.MatCheckbox],pipes:[b.AsyncPipe,m.TranslatePipe],encapsulation:2}),t}(l.a);0,void 0},A6E3:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return p});var i=n("fXoL"),a=n("XiUz"),r=n("sYmb"),o=n("ofXK"),s=n("bSwM"),l=n("3Pt+"),c=n("uKK+");function d(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-checkbox",3),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.$implicit.display=e})("ngModelChange",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().update()}),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit;i["\u0275\u0275property"]("ngModel",a.display),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.title," ")}}var u=new i.InjectionToken("DisplayColumnsPanelData"),p=function(){function e(e){this.data=e,this.columns=this.data.columns}return e.prototype.update=function(){this.data.columnsUpdated(this.columns)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](u))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-display-columns-panel"]],decls:5,vars:3,consts:[["fxLayout","column",1,"mat-content","mat-padding"],["translate","",1,"tb-title"],["style","padding-bottom: 8px;",3,"ngModel","ngModelChange",4,"ngFor","ngForOf"],[2,"padding-bottom","8px",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"label",1),i["\u0275\u0275text"](2,"entity.columns-to-display"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](3,d,2,2,"mat-checkbox",2),i["\u0275\u0275pipe"](4,"selectableColumns"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](4,1,t.columns)))},directives:[a.f,r.TranslateDirective,o.NgForOf,s.MatCheckbox,l.NgControlStatus,l.NgModel],pipes:[c.a],styles:["[_nghost-%COMP%]{width:100%;height:100%;min-width:300px;overflow:hidden;background:#fff;border-radius:4px;box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12)}[_nghost-%COMP%]   .mat-content[_ngcontent-%COMP%]{overflow:hidden;background-color:#fff}[_nghost-%COMP%]   .mat-padding[_ngcontent-%COMP%]{padding:16px}"]}),e}();0,void 0},AAbs:function(e,t,n){"use strict";n.d(t,"a",function(){return Pe});var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=n("mbhL"),s=n("M9IT"),l=n("Dh3D"),c=n("S+vS"),d=n("4r/P"),u=n("xgIS"),p=n("VRyK"),m=n("Kj3r"),f=n("/uUt"),h=n("vkgz"),g=n("3Tyt"),A=n("dj4w"),b=n("BsGH"),y=n("U3y+"),v=n("8LU1"),C=n("Mldr"),x=n("rDax"),w=n("Rm96"),S=n("+rOU"),E=n("2lgB"),I=n("0lYY"),O=n("Xk9D"),T=n("OiFK"),F=n("4j5O"),B=n("oKkZ"),M=n("5xOD"),P=n("0G7Z"),D=n("21Fy"),k=n("3MWt"),_=n("//Q6"),L=n("l7P3"),j=n("sYmb"),N=n("0IaG"),R=n("XiUz"),U=n("/t3+"),V=n("znSr"),Q=n("ofXK"),G=n("bTqV"),H=n("Qu3c"),K=n("NFeN"),q=n("kmnG"),z=n("qFsG"),W=n("3Pt+"),X=n("KEZ6"),$=n("+0xr"),J=n("f0Cb"),Y=n("d3UM"),Z=n("FKr1"),ee=n("bSwM"),te=n("joFe"),ne=n("eeD6"),ie=n("WKhm"),ae=["searchInput"];function re(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",47),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.telemetryTypeTranslationsMap.get(i.toTelemetryTypeFunc(n)))," ")}}function oe(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-form-field",44),a["\u0275\u0275elementStart"](1,"mat-label",19),a["\u0275\u0275text"](2,"attribute.attributes-scope"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"mat-select",45),a["\u0275\u0275listener"]("ngModelChange",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().attributeScopeChanged(e)}),a["\u0275\u0275pipe"](4,"async"),a["\u0275\u0275template"](5,re,3,4,"mat-option",46),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](4,3,i.isLoading$)||i.attributeScopeSelectionReadonly)("ngModel",i.attributeScope),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",i.attributeScopes)}}function se(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",9),a["\u0275\u0275listener"]("click",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().addAttribute(e)}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementStart"](3,"mat-icon"),a["\u0275\u0275text"](4,"add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](2,4,"action.add")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,i.isLoading$))}}function le(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",9),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().reloadAttributes()}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementStart"](3,"mat-icon"),a["\u0275\u0275text"](4,"refresh"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](2,4,"action.refresh")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,i.isLoading$))}}function ce(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-header-cell",48),a["\u0275\u0275elementStart"](1,"mat-checkbox",49),a["\u0275\u0275listener"]("change",function(e){a["\u0275\u0275restoreView"](n);var t=a["\u0275\u0275nextContext"]();return e?t.dataSource.masterToggle():null}),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275pipe"](3,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("checked",i.dataSource.selection.hasValue()&&a["\u0275\u0275pipeBind1"](2,2,i.dataSource.isAllSelected()))("indeterminate",i.dataSource.selection.hasValue()&&!a["\u0275\u0275pipeBind1"](3,4,i.dataSource.isAllSelected()))}}function de(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275elementStart"](1,"mat-checkbox",50),a["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()})("change",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit,r=a["\u0275\u0275nextContext"]();return e?r.dataSource.selection.toggle(i):null}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("checked",r.dataSource.selection.isSelected(i))}}function ue(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",51),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"attribute.last-update-time")," "))}function pe(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"date"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind2"](2,1,n.lastUpdateTs,"yyyy-MM-dd HH:mm:ss")," ")}}function me(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",52),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"attribute.key")," "))}function fe(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.key," ")}}function he(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",53),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"attribute.value")," "))}function ge(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-cell",54),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit;return a["\u0275\u0275nextContext"]().editAttribute(e,i)}),a["\u0275\u0275elementStart"](1,"div",55),a["\u0275\u0275elementStart"](2,"span",7),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"tbJson"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"span",40),a["\u0275\u0275elementStart"](6,"mat-icon"),a["\u0275\u0275text"](7,"edit"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,2,i.value)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",!r.isClientSideTelemetryTypeMap.get(r.attributeScope))}}var Ae=function(){return{"mat-row-select":!0}};function be(e,t){1&e&&a["\u0275\u0275element"](0,"mat-header-row",56),2&e&&a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction0"](1,Ae))}var ye=function(e){return{"mat-row-select":!0,"mat-selected":e}};function ve(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-row",57),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](n);var e=t.$implicit;return a["\u0275\u0275nextContext"]().dataSource.selection.toggle(e)}),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](1,ye,r.dataSource.selection.isSelected(i)))}}function Ce(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"article",65),a["\u0275\u0275element"](1,"tb-dashboard",66),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("aliasController",i.aliasController)("widgets",n)("columns",20)("isEdit",!1)("isMobileDisabled",!0)("isEditActionEnabled",!1)("isRemoveActionEnabled",!1)}}function xe(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"button",10),a["\u0275\u0275pipe"](1,"translate"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3,"keyboard_arrow_left"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](1,1,"attribute.prev-widget"))}function we(e,t){if(1&e&&a["\u0275\u0275template"](0,xe,4,3,"button",67),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("ngIf",n.widgetsCarouselIndex>0)}}function Se(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"button",10),a["\u0275\u0275pipe"](1,"translate"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3,"keyboard_arrow_right"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](1,1,"attribute.next-widget"))}function Ee(e,t){if(1&e&&a["\u0275\u0275template"](0,Se,4,3,"button",67),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("ngIf",n.widgetsCarouselIndex<n.widgetsList.length-1)}}function Ie(e,t){if(1&e&&a["\u0275\u0275element"](0,"div",68),2&e){var n=t.$implicit;a["\u0275\u0275classProp"]("visible",n.index===n.currentIndex)}}function Oe(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"ngx-hm-carousel",58,59),a["\u0275\u0275listener"]("ngModelChange",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().widgetsCarouselIndex=e})("ngModelChange",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onWidgetsCarouselIndexChanged()}),a["\u0275\u0275elementStart"](2,"section",60),a["\u0275\u0275template"](3,Ce,2,7,"article",61),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](4,we,1,1,"ng-template",null,62,a["\u0275\u0275templateRefExtractor"]),a["\u0275\u0275template"](6,Ee,1,1,"ng-template",null,63,a["\u0275\u0275templateRefExtractor"]),a["\u0275\u0275template"](8,Ie,1,2,"ng-template",null,64,a["\u0275\u0275templateRefExtractor"]),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngModel",i.widgetsCarouselIndex)("data",i.widgetsList)("infinite",!1),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",i.widgetsList)}}function Te(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"span",69),a["\u0275\u0275text"](1,"widgets-bundle.empty"),a["\u0275\u0275elementEnd"]())}function Fe(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"span",69),a["\u0275\u0275text"](1,"widget.select-widgets-bundle"),a["\u0275\u0275elementEnd"]())}var Be=function(e){return{count:e}},Me=function(){return[10,20,30]},Pe=function(e){function t(t,n,i,a,r,s,l,c,u,p,m,f,h,b){var y=e.call(this,t)||this;y.store=t,y.attributeService=n,y.telemetryWsService=i,y.translate=a,y.dialog=r,y.overlay=s,y.viewContainerRef=l,y.dialogService=c,y.entityService=u,y.utils=p,y.dashboardUtils=m,y.widgetService=f,y.zone=h,y.cd=b,y.telemetryTypeTranslationsMap=g.C,y.isClientSideTelemetryTypeMap=g.z,y.latestTelemetryTypes=g.r,y.mode="default",y.attributeScopes=[],y.toTelemetryTypeFunc=g.D,y.displayedColumns=["select","lastUpdateTs","key","value"],y.textSearchMode=!1,y.activeValue=!1,y.dirtyValue=!1,y.attributeScopeSelectionReadonly=!1,y.viewsInited=!1,y.selectedWidgetsBundleAlias=null,y.widgetBundleSet=!1,y.widgetsLoaded=!1,y.widgetsCarouselIndex=0,y.widgetsList=[],y.widgetsListCache=[],y.dirtyValue=!y.activeValue;var v={property:"key",direction:d.a.ASC};return y.pageLink=new o.b(10,0,null,v),y.dataSource=new A.a(y.attributeService,y.telemetryWsService,y.zone,y.translate),console.log("Data Source: ",y.dataSource),y}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"disableAttributeScopeSelection",{get:function(){return this.disableAttributeScopeSelectionValue},set:function(e){this.disableAttributeScopeSelectionValue=Object(v.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"active",{set:function(e){this.activeValue!==e&&(this.activeValue=e,this.activeValue&&this.dirtyValue&&(this.dirtyValue=!1,this.viewsInited&&this.updateData(!0)))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"entityId",{set:function(e){this.entityIdValue!==e&&(this.entityIdValue=e,this.resetSortAndFilter(this.activeValue),this.activeValue||(this.dirtyValue=!0))},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){console.log("Widget List: ",this.widgetsList)},t.prototype.attributeScopeChanged=function(e){this.attributeScope=e,this.mode="default",this.updateData(!0)},t.prototype.ngAfterViewInit=function(){var e=this;Object(u.a)(this.searchInputField.nativeElement,"keyup").pipe(Object(m.a)(150),Object(f.a)(),Object(h.a)(function(){e.paginator.pageIndex=0,e.updateData()})).subscribe(),this.sort.sortChange.subscribe(function(){return e.paginator.pageIndex=0}),Object(p.a)(this.sort.sortChange,this.paginator.page).pipe(Object(h.a)(function(){return e.updateData()})).subscribe(),this.viewsInited=!0,this.activeValue&&this.entityIdValue&&this.updateData(!0)},t.prototype.updateData=function(e){void 0===e&&(e=!1),this.pageLink.page=this.paginator.pageIndex,this.pageLink.pageSize=this.paginator.pageSize,this.pageLink.sortOrder.property=this.sort.active,this.pageLink.sortOrder.direction=d.a[this.sort.direction.toUpperCase()],this.dataSource.loadAttributes(this.entityIdValue,this.attributeScope,this.pageLink,e)},t.prototype.enterFilterMode=function(){var e=this;this.textSearchMode=!0,this.pageLink.textSearch="",setTimeout(function(){e.searchInputField.nativeElement.focus(),e.searchInputField.nativeElement.setSelectionRange(0,0)},10)},t.prototype.exitFilterMode=function(){this.textSearchMode=!1,this.pageLink.textSearch=null,this.paginator.pageIndex=0,this.updateData()},t.prototype.resetSortAndFilter=function(e){void 0===e&&(e=!0);var t=this.entityIdValue.entityType;if(t===y.b.DEVICE||t===y.b.ENTITY_VIEW?(this.attributeScopes=Object.keys(g.d),this.attributeScopeSelectionReadonly=!1):(this.attributeScopes=[g.d.SERVER_SCOPE],this.attributeScopeSelectionReadonly=!0),this.mode="default",this.attributeScope=this.defaultAttributeScope,this.pageLink.textSearch=null,this.viewsInited){this.paginator.pageIndex=0;var n=this.sort.sortables.get("key");this.sort.active=n.id,this.sort.direction="asc",e&&this.updateData(!0)}},t.prototype.reloadAttributes=function(){this.updateData(!0)},t.prototype.addAttribute=function(e){var t=this;e&&e.stopPropagation(),this.dialog.open(C.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entityId:this.entityIdValue,attributeScope:this.attributeScope}}).afterClosed().subscribe(function(e){e&&t.reloadAttributes()})},t.prototype.editAttribute=function(e,t){var n=this;if(e&&e.stopPropagation(),!this.isClientSideTelemetryTypeMap.get(this.attributeScope)){var r=e.target||e.srcElement||e.currentTarget,o=new x.OverlayConfig;o.backdropClass="cdk-overlay-transparent-backdrop",o.hasBackdrop=!0;o.positionStrategy=this.overlay.position().flexibleConnectedTo(r).withPositions([{originX:"end",originY:"center",overlayX:"end",overlayY:"center"}]);var s=this.overlay.create(o);s.backdropClick().subscribe(function(){s.dispose()});var l=[{provide:w.a,useValue:{attributeValue:t.value}},{provide:x.OverlayRef,useValue:s}],c=a.Injector.create({parent:this.viewContainerRef.injector,providers:l}),d=s.attach(new S.ComponentPortal(w.b,this.viewContainerRef,c));d.onDestroy(function(){if(null!==d.instance.result){var e=d.instance.result,a=Object(i.a)({},t);a.value=e,n.attributeService.saveEntityAttributes(n.entityIdValue,n.attributeScope,[a]).subscribe(function(){n.reloadAttributes()})}})}},t.prototype.deleteAttributes=function(e){var t=this;e&&e.stopPropagation(),this.dataSource.selection.selected.length>0&&this.dialogService.confirm(this.translate.instant("attribute.delete-attributes-title",{count:this.dataSource.selection.selected.length}),this.translate.instant("attribute.delete-attributes-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){e&&t.attributeService.deleteEntityAttributes(t.entityIdValue,t.attributeScope,t.dataSource.selection.selected).subscribe(function(){t.reloadAttributes()})})},t.prototype.enterWidgetMode=function(){this.mode="widget",this.widgetsList=[],this.widgetsListCache=[],this.widgetsLoaded=!1,this.widgetBundleSet=!1,this.widgetsCarouselIndex=0,this.selectedWidgetsBundleAlias="cards";var e={id:this.utils.guid(),alias:this.entityName,filter:this.dashboardUtils.createSingleEntityFilter(this.entityIdValue)},t={};t[e.id]=e;var n={getStateParams:function(){return{}}};this.aliasController=new O.a(this.utils,this.entityService,this.translate,function(){return n},t,{});var i=this.attributeScope===g.r.LATEST_TELEMETRY?g.h.timeseries:g.h.attribute;this.widgetDatasource={type:I.a.entity,entityAliasId:e.id,dataKeys:[]};for(var a=0;a<this.dataSource.selection.selected.length;a++){var r=this.dataSource.selection.selected[a],o={name:r.key,label:r.key,type:i,color:this.utils.getMaterialColor(a),settings:{},_hash:Math.random()};this.widgetDatasource.dataKeys.push(o)}},t.prototype.onWidgetsCarouselIndexChanged=function(){if("widget"===this.mode)for(var e=0;e<this.widgetsList.length;e++)this.widgetsList[e].splice(0,this.widgetsList[e].length),e===this.widgetsCarouselIndex&&this.widgetsList[e].push(this.widgetsListCache[e][0])},t.prototype.onWidgetsBundleChanged=function(e){var t=this;if(this.widgetBundleSet=!!e,"widget"===this.mode&&(this.widgetsList=[],this.widgetsListCache=[],this.widgetsCarouselIndex=0,e)){this.widgetsLoaded=!1;var n=e.alias,i=e.tenantId.id===B.a;this.widgetService.getBundleWidgetTypes(n,i).subscribe(function(e){for(var a=0,r=e=e.sort(function(e,t){var n=I.m[t.descriptor.type].localeCompare(I.m[e.descriptor.type]);return 0===n&&(n=t.createdTime-e.createdTime),n});a<r.length;a++){var o=r[a],s=Object(P.e)(o);if(s.type!==I.m.static){var l=2*s.sizeX,c=2*s.sizeY,d=Math.floor(Math.max(0,(20-l)/2)),u={isSystemType:i,bundleAlias:n,typeAlias:s.alias,type:s.type,title:s.widgetName,sizeX:l,sizeY:c,row:0,col:d,config:JSON.parse(s.defaultConfig)};if(u.config.title=s.widgetName,u.config.datasources=[t.widgetDatasource],t.attributeScope===g.r.LATEST_TELEMETRY&&s.type!==I.m.rpc||s.type===I.m.latest){var p=t.widgetsListCache.push([u]);t.widgetsList.push(1===p?[u]:[])}}}t.widgetsLoaded=!0,t.cd.markForCheck()})}},t.prototype.addWidgetToDashboard=function(){if("widget"===this.mode&&this.widgetsListCache.length>0){var e=this.widgetsListCache[this.widgetsCarouselIndex][0];this.dialog.open(k.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entityId:this.entityIdValue,entityName:this.entityName,widget:Object(_.e)(e)}}).afterClosed()}},t.prototype.exitWidgetMode=function(){this.selectedWidgetsBundleAlias=null,this.mode="default"},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](L.Store),a["\u0275\u0275directiveInject"](b.a),a["\u0275\u0275directiveInject"](E.a),a["\u0275\u0275directiveInject"](j.TranslateService),a["\u0275\u0275directiveInject"](N.MatDialog),a["\u0275\u0275directiveInject"](x.Overlay),a["\u0275\u0275directiveInject"](a.ViewContainerRef),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](D.a),a["\u0275\u0275directiveInject"](T.a),a["\u0275\u0275directiveInject"](F.a),a["\u0275\u0275directiveInject"](M.a),a["\u0275\u0275directiveInject"](a.NgZone),a["\u0275\u0275directiveInject"](a.ChangeDetectorRef))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-attribute-table"]],viewQuery:function(e,t){if(1&e&&(a["\u0275\u0275viewQuery"](ae,1),a["\u0275\u0275viewQuery"](s.MatPaginator,1),a["\u0275\u0275viewQuery"](l.MatSort,1)),2&e){var n=void 0;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.searchInputField=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.paginator=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.sort=n.first)}},inputs:{disableAttributeScopeSelection:"disableAttributeScopeSelection",defaultAttributeScope:"defaultAttributeScope",active:"active",entityId:"entityId",entityName:"entityName"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:95,vars:87,consts:[[1,"mat-padding","tb-entity-table","tb-absolute-fill"],["fxFlex","","fxLayout","column",1,"mat-elevation-z1","tb-entity-table-content"],[1,"mat-table-toolbar",3,"fxShow"],[1,"mat-toolbar-tools"],["fxLayout","row","fxLayoutAlign","start center","fxLayout.xs","column","fxLayoutAlign.xs","center start",1,"title-container"],[1,"tb-entity-table-title"],["class","mat-block tb-attribute-scope",4,"ngIf"],["fxFlex",""],["mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click",4,"ngIf"],["mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click"],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip"],["matInput","",3,"ngModel","placeholder","ngModelChange"],["searchInput",""],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip","click"],["color","accent",1,"mat-table-toolbar",3,"fxShow"],["fxLayout.xs","row wrap",1,"mat-toolbar-tools"],[1,"tb-entity-table-info"],["mat-icon-button","","matTooltipPosition","above",1,"button-widget-action",3,"fxShow","disabled","matTooltip","click"],["mat-raised-button","","color","accent","matTooltipPosition","above",1,"button-widget-action",3,"disabled","matTooltip","click"],["translate",""],["fxLayoutGap","8px","fxLayout.xs","row wrap",1,"mat-toolbar-tools"],["fxFlex","","fxLayout","row","fxLayoutAlign","start"],[1,"tb-details-subtitle"],["fxFlexOffset","5","fxFlex","",3,"selectFirstBundle","selectBundleAlias","ngModel","ngModelChange"],["mat-raised-button","","color","accent","matTooltipPosition","above",1,"button-widget-action",3,"fxShow","disabled","matTooltip","click"],["fxFlex","",1,"table-container",3,"fxShow"],["mat-table","","matSort","","matSortDisableClear","",3,"dataSource","matSortActive","matSortDirection"],["matColumnDef","select","sticky",""],["style","width: 30px;",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","lastUpdateTs"],["mat-sort-header","","style","min-width: 150px; max-width: 150px; width: 150px;",4,"matHeaderCellDef"],["matColumnDef","key"],["mat-sort-header","","style","width: 40%",4,"matHeaderCellDef"],["matColumnDef","value"],["style","width: 60%",4,"matHeaderCellDef"],["class","tb-value-cell",3,"click",4,"matCellDef"],[3,"ngClass",4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"ngClass","click",4,"matRowDef","matRowDefColumns"],["fxLayoutAlign","center center","translate","",1,"no-data-found",3,"fxShow"],[3,"fxShow"],["showFirstLastButtons","",3,"fxShow","length","pageIndex","pageSize","pageSizeOptions"],["fxFlex","","class","carousel c-accent",3,"ngModel","data","infinite","ngModelChange",4,"ngIf"],["translate","","fxFlex","","fxLayoutAlign","center center","style","display: flex;","class","mat-headline",4,"ngIf"],[1,"mat-block","tb-attribute-scope"],[3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[2,"width","30px"],[3,"checked","indeterminate","change"],[3,"checked","click","change"],["mat-sort-header","",2,"min-width","150px","max-width","150px","width","150px"],["mat-sort-header","",2,"width","40%"],[2,"width","60%"],[1,"tb-value-cell",3,"click"],["fxLayout","row",2,"align-items","center"],[3,"ngClass"],[3,"ngClass","click"],["fxFlex","",1,"carousel","c-accent",3,"ngModel","data","infinite","ngModelChange"],["carousel",""],["ngx-hm-carousel-container","",1,"content"],["class","item cursor-pointer","ngx-hm-carousel-item","",4,"ngFor","ngForOf"],["carouselPrev",""],["carouselNext",""],["carouselDot",""],["ngx-hm-carousel-item","",1,"item","cursor-pointer"],[1,"tb-absolute-fill",3,"aliasController","widgets","columns","isEdit","isMobileDisabled","isEditActionEnabled","isRemoveActionEnabled"],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip",4,"ngIf"],[1,"ball"],["translate","","fxFlex","","fxLayoutAlign","center center",1,"mat-headline",2,"display","flex"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"mat-toolbar",2),a["\u0275\u0275elementStart"](3,"div",3),a["\u0275\u0275elementStart"](4,"div",4),a["\u0275\u0275elementStart"](5,"span",5),a["\u0275\u0275text"](6),a["\u0275\u0275pipe"](7,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,oe,6,5,"mat-form-field",6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](9,"span",7),a["\u0275\u0275template"](10,se,5,6,"button",8),a["\u0275\u0275template"](11,le,5,6,"button",8),a["\u0275\u0275elementStart"](12,"button",9),a["\u0275\u0275listener"]("click",function(){return t.enterFilterMode()}),a["\u0275\u0275pipe"](13,"async"),a["\u0275\u0275pipe"](14,"translate"),a["\u0275\u0275elementStart"](15,"mat-icon"),a["\u0275\u0275text"](16,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"mat-toolbar",2),a["\u0275\u0275elementStart"](18,"div",3),a["\u0275\u0275elementStart"](19,"button",10),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275elementStart"](21,"mat-icon"),a["\u0275\u0275text"](22,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](23,"mat-form-field",7),a["\u0275\u0275elementStart"](24,"mat-label"),a["\u0275\u0275text"](25,"\xa0"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"input",11,12),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.pageLink.textSearch=e}),a["\u0275\u0275pipe"](28,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](29,"button",13),a["\u0275\u0275listener"]("click",function(){return t.exitFilterMode()}),a["\u0275\u0275pipe"](30,"translate"),a["\u0275\u0275elementStart"](31,"mat-icon"),a["\u0275\u0275text"](32,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](33,"mat-toolbar",14),a["\u0275\u0275elementStart"](34,"div",15),a["\u0275\u0275elementStart"](35,"span",16),a["\u0275\u0275text"](36),a["\u0275\u0275pipe"](37,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](38,"span",7),a["\u0275\u0275elementStart"](39,"button",17),a["\u0275\u0275listener"]("click",function(e){return t.deleteAttributes(e)}),a["\u0275\u0275pipe"](40,"async"),a["\u0275\u0275pipe"](41,"translate"),a["\u0275\u0275elementStart"](42,"mat-icon"),a["\u0275\u0275text"](43,"delete"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](44,"button",18),a["\u0275\u0275listener"]("click",function(){return t.enterWidgetMode()}),a["\u0275\u0275pipe"](45,"async"),a["\u0275\u0275pipe"](46,"translate"),a["\u0275\u0275elementStart"](47,"mat-icon"),a["\u0275\u0275text"](48,"now_widgets"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](49,"span",19),a["\u0275\u0275text"](50,"attribute.show-on-widget"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](51,"mat-toolbar",14),a["\u0275\u0275elementStart"](52,"div",20),a["\u0275\u0275elementStart"](53,"div",21),a["\u0275\u0275elementStart"](54,"span",22),a["\u0275\u0275text"](55),a["\u0275\u0275pipe"](56,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](57,"tb-widgets-bundle-select",23),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.onWidgetsBundleChanged(e)}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](58,"button",24),a["\u0275\u0275listener"]("click",function(){return t.addWidgetToDashboard()}),a["\u0275\u0275pipe"](59,"async"),a["\u0275\u0275pipe"](60,"translate"),a["\u0275\u0275elementStart"](61,"mat-icon"),a["\u0275\u0275text"](62,"dashboard"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](63,"span",19),a["\u0275\u0275text"](64,"attribute.add-to-dashboard"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](65,"button",9),a["\u0275\u0275listener"]("click",function(){return t.exitWidgetMode()}),a["\u0275\u0275pipe"](66,"async"),a["\u0275\u0275pipe"](67,"translate"),a["\u0275\u0275elementStart"](68,"mat-icon"),a["\u0275\u0275text"](69,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](70,"div",25),a["\u0275\u0275elementStart"](71,"table",26),a["\u0275\u0275elementContainerStart"](72,27),a["\u0275\u0275template"](73,ce,4,6,"mat-header-cell",28),a["\u0275\u0275template"](74,de,2,1,"mat-cell",29),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementContainerStart"](75,30),a["\u0275\u0275template"](76,ue,3,3,"mat-header-cell",31),a["\u0275\u0275template"](77,pe,3,4,"mat-cell",29),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementContainerStart"](78,32),a["\u0275\u0275template"](79,me,3,3,"mat-header-cell",33),a["\u0275\u0275template"](80,fe,2,1,"mat-cell",29),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementContainerStart"](81,34),a["\u0275\u0275template"](82,he,3,3,"mat-header-cell",35),a["\u0275\u0275template"](83,ge,8,4,"mat-cell",36),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275template"](84,be,1,2,"mat-header-row",37),a["\u0275\u0275template"](85,ve,1,3,"mat-row",38),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](86,"span",39),a["\u0275\u0275pipe"](87,"async"),a["\u0275\u0275text"](88),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](89,"mat-divider",40),a["\u0275\u0275element"](90,"mat-paginator",41),a["\u0275\u0275pipe"](91,"async"),a["\u0275\u0275template"](92,Oe,10,4,"ngx-hm-carousel",42),a["\u0275\u0275template"](93,Te,2,0,"span",43),a["\u0275\u0275template"](94,Fe,2,0,"span",43),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow","default"===t.mode&&!t.textSearchMode&&t.dataSource.selection.isEmpty()),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](7,47,t.telemetryTypeTranslationsMap.get(t.attributeScope))),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!t.disableAttributeScopeSelection),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!t.isClientSideTelemetryTypeMap.get(t.attributeScope)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!t.isClientSideTelemetryTypeMap.get(t.attributeScope)),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](14,51,"action.search")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](13,49,t.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("fxShow","default"===t.mode&&t.textSearchMode&&t.dataSource.selection.isEmpty()),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](20,53,"action.search")),a["\u0275\u0275advance"](7),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](28,55,"common.enter-search")),a["\u0275\u0275property"]("ngModel",t.pageLink.textSearch),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](30,57,"action.close")),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("fxShow","default"===t.mode&&!t.dataSource.selection.isEmpty()),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind2"](37,59,t.attributeScope===t.latestTelemetryTypes.LATEST_TELEMETRY?"attribute.selected-telemetry":"attribute.selected-attributes",a["\u0275\u0275pureFunction1"](84,Be,t.dataSource.selection.selected.length))," "),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](41,64,"action.delete")),a["\u0275\u0275property"]("fxShow",!t.isClientSideTelemetryTypeMap.get(t.attributeScope))("disabled",a["\u0275\u0275pipeBind1"](40,62,t.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](46,68,"attribute.show-on-widget")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](45,66,t.isLoading$)),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("fxShow","widget"===t.mode),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](56,70,"widgets-bundle.current")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("selectFirstBundle",!1)("selectBundleAlias",t.selectedWidgetsBundleAlias)("ngModel",null),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](60,74,"attribute.add-to-dashboard")),a["\u0275\u0275property"]("fxShow",t.widgetsList.length>0)("disabled",a["\u0275\u0275pipeBind1"](59,72,t.isLoading$)),a["\u0275\u0275advance"](7),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](67,78,"action.close")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](66,76,t.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("fxShow","widget"!==t.mode),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("dataSource",t.dataSource)("matSortActive",t.pageLink.sortOrder.property)("matSortDirection",t.pageLink.sortDirection()),a["\u0275\u0275advance"](13),a["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",a["\u0275\u0275pipeBind1"](87,80,t.dataSource.isEmpty())),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](t.attributeScope===t.latestTelemetryTypes.LATEST_TELEMETRY?"attribute.no-telemetry-text":"attribute.no-attributes-text"),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow","widget"!==t.mode),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow","widget"!==t.mode)("length",a["\u0275\u0275pipeBind1"](91,82,t.dataSource.total()))("pageIndex",t.pageLink.page)("pageSize",t.pageLink.pageSize)("pageSizeOptions",a["\u0275\u0275pureFunction0"](86,Me)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf","widget"===t.mode&&t.widgetsList.length>0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf","widget"===t.mode&&t.widgetsLoaded&&0===t.widgetsList.length&&t.widgetBundleSet),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf","widget"===t.mode&&!t.widgetBundleSet))},directives:[R.b,R.f,U.MatToolbar,V.d,R.e,Q.NgIf,G.MatButton,H.MatTooltip,K.MatIcon,q.MatFormField,q.MatLabel,z.MatInput,W.DefaultValueAccessor,W.NgControlStatus,W.NgModel,j.TranslateDirective,R.g,X.a,R.c,$.MatTable,l.MatSort,$.MatColumnDef,$.MatHeaderCellDef,$.MatCellDef,$.MatHeaderRowDef,$.MatRowDef,J.MatDivider,s.MatPaginator,Y.MatSelect,Q.NgForOf,Z.MatOption,$.MatHeaderCell,ee.MatCheckbox,$.MatCell,l.MatSortHeader,$.MatHeaderRow,Q.NgClass,V.b,$.MatRow,te.a,te.b,ne.a],pipes:[j.TranslatePipe,Q.AsyncPipe,Q.DatePipe,ie.a],styles:["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{min-height:auto}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .tb-entity-table-title[_ngcontent-%COMP%]{padding-right:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .tb-entity-table-info[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .button-widget-action[_ngcontent-%COMP%]{margin-left:auto;overflow:hidden;text-overflow:ellipsis}@media screen and (max-width:599px){[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{height:auto;min-height:100px}[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]   .tb-entity-table-title[_ngcontent-%COMP%]{padding-bottom:5px;width:100%}}[_nghost-%COMP%]     .mat-sort-header-sorted .mat-sort-header-arrow{opacity:1!important}[_nghost-%COMP%]     mat-form-field.tb-attribute-scope{font-size:16px;width:200px}[_nghost-%COMP%]     mat-form-field.tb-attribute-scope .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     mat-form-field.tb-attribute-scope .mat-form-field-underline{bottom:0}@media screen and (max-width:599px){[_nghost-%COMP%]     mat-form-field.tb-attribute-scope{width:100%}[_nghost-%COMP%]     mat-form-field.tb-attribute-scope .mat-form-field-infix{width:auto!important}}[_nghost-%COMP%]     mat-cell.tb-value-cell{cursor:pointer}[_nghost-%COMP%]     mat-cell.tb-value-cell mat-icon{height:24px;width:24px;font-size:24px;color:#757575}[_nghost-%COMP%]     .carousel .aniT{transition:all 1s linear}[_nghost-%COMP%]     .carousel .transition{transition:all .3s ease-in-out!important}[_nghost-%COMP%]     .carousel .content{display:flex;height:100%}[_nghost-%COMP%]     .carousel .content .item{position:relative}[_nghost-%COMP%]     .carousel .direction{width:60px}[_nghost-%COMP%]     .carousel .ball{width:10px;height:10px;border-radius:50%;background:#000;border:2px solid;opacity:.5}[_nghost-%COMP%]     .carousel .ball.visible{opacity:1}[_nghost-%COMP%]     .carousel ul.indicators{pointer-events:none}[_nghost-%COMP%]     .carousel ul.indicators li{pointer-events:all}"],changeDetection:0}),t}(r.a);0,void 0},AC8c:function(e,t,n){"use strict";n.d(t,"a",function(){return C});var i=n("fXoL"),a=n("3Pt+"),r=n("gGt+"),o=n("8LU1"),s=n("FtGj"),l=n("kmnG"),c=n("A5z7"),d=n("ofXK"),u=n("qFsG"),p=n("NFeN"),m=n("sYmb"),f=["instanceId"];function h(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-icon",10),i["\u0275\u0275text"](1,"close"),i["\u0275\u0275elementEnd"]())}function g(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-chip",8),i["\u0275\u0275listener"]("removed",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"]().remove(e)}),i["\u0275\u0275text"](1),i["\u0275\u0275template"](2,h,2,0,"mat-icon",9),i["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("selectable",!r.disabled)("removable",!r.disabled),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!r.disabled)}}function A(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.instances-list-required")," "))}function b(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.instance-id-pattern")," "))}var y=function(e){return{max:e}};function v(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind2"](2,1,"device-profile.lwm2m.instance-id-max",i["\u0275\u0275pureFunction1"](4,y,n.instanceIdValueMax))," ")}}var C=function(){function e(e){var t=this;this.fb=e,this.instancesId=new Set,this.separatorKeysCodes=[s.ENTER,s.COMMA,s.SEMICOLON],this.instanceIdValueMax=r.s,this.propagateChange=function(e){},this.add=function(e){var n=e.value;t.instancesListFormGroup.get("instanceId").valid&&""!==n&&Number.isFinite(Number(n))&&(t.instancesId.add(Number(n)),t.instancesListFormGroup.patchValue({instanceList:Array.from(t.instancesId)},{emitEvent:!1}),t.instancesListFormGroup.get("instanceId").setValue(null,{emitEvent:!1}),t.propagateChange(t.instancesId))},this.remove=function(e){t.instancesId.delete(e),t.instancesListFormGroup.patchValue({instanceList:Array.from(t.instancesId)},{emitEvent:!1}),t.propagateChange(t.instancesId)},this.instancesListFormGroup=this.fb.group({instanceList:[null],instanceId:[null,[a.Validators.min(r.t),a.Validators.max(r.s),a.Validators.pattern("[0-9]*")]]}),this.instancesListFormGroup.get("instanceId").statusChanges.subscribe(function(e){if("INVALID"===e){var n=t.instancesListFormGroup.get("instanceId").errors;t.instancesListFormGroup.get("instanceList").setErrors(n)}else t.instancesListFormGroup.get("instanceList").updateValueAndValidity({onlySelf:!0})})}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(o.coerceBooleanProperty)(e),this.updateValidators()},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){this.disabled=e,e?this.instancesListFormGroup.disable({emitEvent:!1}):this.instancesListFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){e&&e.size&&(this.instancesId=e,this.instancesListFormGroup.patchValue({instanceList:Array.from(this.instancesId)},{emitEvent:!1}))},e.prototype.validate=function(){return this.instancesListFormGroup.valid?null:{instancesListForm:!1}},e.prototype.onFocus=function(){var e=this;setTimeout(function(){e.instanceId.nativeElement.blur(),e.instanceId.nativeElement.focus()},0)},e.prototype.updateValidators=function(){this.instancesListFormGroup.get("instanceList").setValidators(this.required?[a.Validators.required]:[]),this.instancesListFormGroup.get("instanceList").updateValueAndValidity({emitEvent:!1})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-profile-lwm2m-object-add-instances-list"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](f,1),2&e){var n;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.instanceId=n.first)}},inputs:{disabled:"disabled",required:"required"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:13,vars:11,consts:[[1,"lwm2m-instances-list",3,"formGroup"],[1,"mat-block"],["formControlName","instanceList",3,"required","focus"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","instanceId","matChipInputAddOnBlur","",2,"max-width","70px",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["instanceId",""],[4,"ngIf"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"section",0),i["\u0275\u0275elementStart"](1,"mat-form-field",1),i["\u0275\u0275elementStart"](2,"mat-label"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"mat-chip-list",2,3),i["\u0275\u0275listener"]("focus",function(){return t.onFocus()}),i["\u0275\u0275template"](7,g,3,4,"mat-chip",4),i["\u0275\u0275elementStart"](8,"input",5,6),i["\u0275\u0275listener"]("matChipInputTokenEnd",function(e){return t.add(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](10,A,3,3,"mat-error",7),i["\u0275\u0275template"](11,b,3,3,"mat-error",7),i["\u0275\u0275template"](12,v,3,6,"mat-error",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](6);i["\u0275\u0275property"]("formGroup",t.instancesListFormGroup),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,9,"device-profile.lwm2m.instances-list")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("required",t.required),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.instancesId),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("matChipInputFor",n)("matChipInputSeparatorKeyCodes",t.separatorKeysCodes),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.instancesListFormGroup.get("instanceList").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.instancesListFormGroup.get("instanceId").hasError("pattern")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.instancesListFormGroup.get("instanceId").hasError("max"))}},directives:[a.NgControlStatusGroup,a.FormGroupDirective,l.MatFormField,l.MatLabel,c.MatChipList,a.NgControlStatus,a.FormControlName,a.RequiredValidator,d.NgForOf,u.MatInput,a.DefaultValueAccessor,c.MatChipInput,d.NgIf,c.MatChip,p.MatIcon,c.MatChipRemove,l.MatError],pipes:[m.TranslatePipe],encapsulation:2}),e}();0,void 0},APwO:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("U3y+"),a=function(e){this.entityType=i.b.RULE_CHAIN,this.id=e}},AUWA:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i=n("mrSG"),a=n("RxGS"),r=n("fXoL"),o=n("wZkO"),s=n("2Vo4"),l=n("zp9Z"),c=n("C/rb"),d=n("U3y+"),u=n("XOa3"),p=n("90vD"),m=n("3Tyt"),f=n("oKkZ"),h=n("l7P3"),g=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n.attributeScopes=m.d,n.latestTelemetryTypes=m.r,n.authorities=l.a,n.entityTypes=d.b,n.auditLogModes=u.c,n.eventTypes=p.b,n.debugEventTypes=p.a,n.nullUid=f.a,n.entityTabsSubject=new s.a(null),n.entityTabsChanged=n.entityTabsSubject.asObservable(),n.authUser=Object(c.b)(t),n}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"isEdit",{get:function(){return this.isEditValue},set:function(e){this.isEditValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"entity",{get:function(){return this.entityValue},set:function(e){this.setEntity(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"entitiesTableConfig",{get:function(){return this.entitiesTableConfigValue},set:function(e){this.setEntitiesTableConfig(e)},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){var e=this;this.entityTabsSubject.next(this.entityTabs.toArray()),this.entityTabs.changes.subscribe(function(){e.entityTabsSubject.next(e.entityTabs.toArray())})},t.prototype.setEntity=function(e){this.entityValue=e},t.prototype.setEntitiesTableConfig=function(e){this.entitiesTableConfigValue=e},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](h.Store))},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,viewQuery:function(e,t){if(1&e&&r["\u0275\u0275viewQuery"](o.MatTab,1),2&e){var n;r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.entityTabs=n)}},inputs:{isEdit:"isEdit",entity:"entity",entitiesTableConfig:"entitiesTableConfig",detailsForm:"detailsForm"},features:[r["\u0275\u0275InheritDefinitionFeature"]]}),t}(a.a);0,void 0},Absi:function(e,t,n){"use strict";n.d(t,"a",function(){return re});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("gmuX"),l=n("mbhL"),c=n("2Vo4"),d=n("jtHE"),u=n("LRne"),p=n("Duvn"),m=n("JIr8"),f=n("lJxs"),h=n("05l1"),g=n("x+ZX"),A=function(){function e(e){this.states=e,this.statesSubject=new c.a([]),this.pageDataSubject=new c.a(Object(p.a)()),this.pageData$=this.pageDataSubject.asObservable()}return e.prototype.connect=function(e){return this.statesSubject.asObservable()},e.prototype.disconnect=function(e){this.statesSubject.complete(),this.pageDataSubject.complete()},e.prototype.loadStates=function(e,t){var n=this;void 0===t&&(t=!1),t&&(this.allStates=null);var i=new d.a;return this.fetchStates(e).pipe(Object(m.a)(function(){return Object(u.a)(Object(p.a)())})).subscribe(function(e){n.statesSubject.next(e.data),n.pageDataSubject.next(e),i.next(e)}),i},e.prototype.fetchStates=function(e){return this.getAllStates().pipe(Object(f.a)(function(t){return e.filterData(t)}))},e.prototype.getAllStates=function(){if(!this.allStates){for(var e=[],t=0,n=Object.keys(this.states);t<n.length;t++){var a=n[t],r=this.states[a];e.push(Object(i.a)({id:a},r))}this.allStates=Object(u.a)(e).pipe(Object(h.a)(1),Object(g.a)())}return this.allStates},e.prototype.isEmpty=function(){return this.statesSubject.pipe(Object(f.a)(function(e){return!e.length}))},e.prototype.total=function(){return this.pageDataSubject.pipe(Object(f.a)(function(e){return e.totalElements}))},e}(),b=n("4r/P"),y=n("M9IT"),v=n("Dh3D"),C=n("xgIS"),x=n("VRyK"),w=n("Kj3r"),S=n("/uUt"),E=n("vkgz"),I=n("S+vS"),O=n("//Q6"),T=n("LBt+"),F=n("l7P3"),B=n("tyNb"),M=n("3Pt+"),P=n("sYmb"),D=n("/t3+"),k=n("XiUz"),_=n("bTqV"),L=n("NFeN"),j=n("ofXK"),N=n("znSr"),R=n("Qu3c"),U=n("kmnG"),V=n("qFsG"),Q=n("+0xr"),G=n("f0Cb"),H=n("bv9b"),K=["searchInput"];function q(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",38)}function z(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",39),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.state-name")," "))}function W(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function X(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",40),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.state-id")," "))}function $(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.id," ")}}function J(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",41),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.is-root-state")," "))}function Y(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275elementStart"](1,"mat-icon",42),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](n.root?"check_box":"check_box_outline_blank")}}function Z(e,t){1&e&&a["\u0275\u0275element"](0,"mat-header-cell",43)}function ee(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275elementStart"](1,"div",44),a["\u0275\u0275elementStart"](2,"button",15),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit;return a["\u0275\u0275nextContext"]().editState(e,i)}),a["\u0275\u0275pipe"](3,"async"),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementStart"](5,"mat-icon"),a["\u0275\u0275text"](6,"edit"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"button",45),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit;return a["\u0275\u0275nextContext"]().deleteState(e,i)}),a["\u0275\u0275pipe"](8,"async"),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementStart"](10,"mat-icon"),a["\u0275\u0275text"](11,"delete"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](4,7,"dashboard.edit-state")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](3,5,r.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](9,11,"dashboard.delete-state")),a["\u0275\u0275property"]("fxShow",!i.root)("disabled",a["\u0275\u0275pipeBind1"](8,9,r.isLoading$))}}function te(e,t){1&e&&a["\u0275\u0275element"](0,"mat-header-row",46)}function ne(e,t){1&e&&a["\u0275\u0275element"](0,"mat-row",46)}var ie=function(){return{standalone:!0}},ae=function(){return[5,10,15]},re=function(e){function t(t,n,i,a,r,o,s,c,d){var u=e.call(this,t,n,r)||this;u.store=t,u.router=n,u.data=i,u.errorStateMatcher=a,u.dialogRef=r,u.fb=o,u.translate=s,u.dialogs=c,u.dialog=d,u.textSearchMode=!1,u.submitted=!1,u.states=u.data.states,u.statesFormGroup=u.fb.group({});var p={property:"name",direction:b.a.ASC};return u.pageLink=new l.b(5,0,null,p),u.displayedColumns=["name","id","root","actions"],u.dataSource=new A(u.states),u}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){this.dataSource.loadStates(this.pageLink)},t.prototype.ngAfterViewInit=function(){var e=this;Object(C.a)(this.searchInputField.nativeElement,"keyup").pipe(Object(w.a)(150),Object(S.a)(),Object(E.a)(function(){e.paginator.pageIndex=0,e.updateData()})).subscribe(),this.sort.sortChange.subscribe(function(){return e.paginator.pageIndex=0}),Object(x.a)(this.sort.sortChange,this.paginator.page).pipe(Object(E.a)(function(){return e.updateData()})).subscribe()},t.prototype.updateData=function(e){void 0===e&&(e=!1),this.pageLink.page=this.paginator.pageIndex,this.pageLink.pageSize=this.paginator.pageSize,this.pageLink.sortOrder.property=this.sort.active,this.pageLink.sortOrder.direction=b.a[this.sort.direction.toUpperCase()],this.dataSource.loadStates(this.pageLink,e)},t.prototype.addState=function(e){this.openStateDialog(e)},t.prototype.editState=function(e,t){this.openStateDialog(e,t)},t.prototype.deleteState=function(e,t){var n=this;e&&e.stopPropagation();var i=this.translate.instant("dashboard.delete-state-title"),a=this.translate.instant("dashboard.delete-state-text",{stateName:t.name});this.dialogs.confirm(i,a,this.translate.instant("action.no"),this.translate.instant("action.yes")).subscribe(function(e){e&&(delete n.states[t.id],n.onStatesUpdated())})},t.prototype.enterFilterMode=function(){var e=this;this.textSearchMode=!0,this.pageLink.textSearch="",setTimeout(function(){e.searchInputField.nativeElement.focus(),e.searchInputField.nativeElement.setSelectionRange(0,0)},10)},t.prototype.exitFilterMode=function(){this.textSearchMode=!1,this.pageLink.textSearch=null,this.paginator.pageIndex=0,this.updateData()},t.prototype.openStateDialog=function(e,t){var n=this;void 0===t&&(t=null),e&&e.stopPropagation();var i=null===t,a=null;i||(a=t.id),this.dialog.open(T.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{isAdd:i,states:this.states,state:Object(O.e)(t)}}).afterClosed().subscribe(function(e){e&&n.saveState(e,a)})},t.prototype.saveState=function(e,t){var n={name:e.name,root:e.root,layouts:e.layouts};if(t&&t!==e.id?(delete this.states[t],this.states[e.id]=n):this.states[e.id]=n,e.root)for(var i=0,a=Object.keys(this.states);i<a.length;i++){var r=a[i],o=this.states[r];r!==e.id&&(o.root=!1)}else{for(var s=!1,l=0,c=Object.keys(this.states);l<c.length;l++){r=c[l];if((o=this.states[r]).root){s=!0;break}}if(!s){var d=Object.keys(this.states)[0];this.states[d].root=!0}}this.onStatesUpdated()},t.prototype.onStatesUpdated=function(){this.statesFormGroup.markAsDirty(),this.updateData(!0)},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.save=function(){this.submitted=!0,this.dialogRef.close(this.states)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](F.Store),a["\u0275\u0275directiveInject"](B.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](M.FormBuilder),a["\u0275\u0275directiveInject"](P.TranslateService),a["\u0275\u0275directiveInject"](I.a),a["\u0275\u0275directiveInject"](o.MatDialog))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-manage-dashboard-states-dialog"]],viewQuery:function(e,t){if(1&e&&(a["\u0275\u0275viewQuery"](K,1),a["\u0275\u0275viewQuery"](y.MatPaginator,1),a["\u0275\u0275viewQuery"](v.MatSort,1)),2&e){var n=void 0;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.searchInputField=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.paginator=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.sort=n.first)}},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:78,vars:62,consts:[[2,"min-width","480px",3,"formGroup","ngSubmit"],["color","accent"],["translate",""],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],[1,"manage-dashboard-states"],[1,"tb-entity-table"],["fxLayout","column",1,"tb-entity-table-content"],[1,"mat-table-toolbar",3,"fxShow"],[1,"mat-toolbar-tools"],["translate","",1,"tb-entity-table-title"],["mat-icon-button","","type","button","matTooltipPosition","above",3,"disabled","matTooltip","click"],["mat-icon-button","","type","button","matTooltipPosition","above",3,"matTooltip"],["matInput","",3,"ngModel","ngModelOptions","placeholder","ngModelChange"],["searchInput",""],["mat-icon-button","","type","button","matTooltipPosition","above",3,"matTooltip","click"],[1,"table-container"],["mat-table","","matSort","","matSortDisableClear","",3,"dataSource","matSortActive","matSortDirection"],["matColumnDef","name"],["mat-sort-header","","style","width: 60%",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","id"],["mat-sort-header","","style","width: 40%",4,"matHeaderCellDef"],["matColumnDef","root"],["mat-sort-header","","style","width: 80px",4,"matHeaderCellDef"],["matColumnDef","actions","stickyEnd",""],["style","min-width: 80px; max-width: 80px; width: 80px",4,"matHeaderCellDef"],["class","mat-row-select",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","mat-row-select",4,"matRowDef","matRowDefColumns"],["fxLayoutAlign","center center","translate","",1,"no-data-found",3,"fxShow"],[3,"length","pageIndex","pageSize","pageSizeOptions"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],["mat-sort-header","",2,"width","60%"],["mat-sort-header","",2,"width","40%"],["mat-sort-header","",2,"width","80px"],[1,"material-icons","mat-icon"],[2,"min-width","80px","max-width","80px","width","80px"],["fxFlex","","fxLayout","row"],["mat-icon-button","","type","button","matTooltipPosition","above",3,"fxShow","disabled","matTooltip","click"],[1,"mat-row-select"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2",2),a["\u0275\u0275text"](3,"dashboard.manage-states"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",3),a["\u0275\u0275elementStart"](5,"button",4),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](6,"mat-icon",5),a["\u0275\u0275text"](7,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,q,1,0,"mat-progress-bar",6),a["\u0275\u0275pipe"](9,"async"),a["\u0275\u0275elementStart"](10,"div",7),a["\u0275\u0275elementStart"](11,"fieldset",8),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",9),a["\u0275\u0275elementStart"](14,"div",10),a["\u0275\u0275elementStart"](15,"div",11),a["\u0275\u0275elementStart"](16,"mat-toolbar",12),a["\u0275\u0275elementStart"](17,"div",13),a["\u0275\u0275elementStart"](18,"span",14),a["\u0275\u0275text"](19,"dashboard.states"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](20,"span",3),a["\u0275\u0275elementStart"](21,"button",15),a["\u0275\u0275listener"]("click",function(e){return t.addState(e)}),a["\u0275\u0275pipe"](22,"async"),a["\u0275\u0275pipe"](23,"translate"),a["\u0275\u0275elementStart"](24,"mat-icon"),a["\u0275\u0275text"](25,"add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"button",15),a["\u0275\u0275listener"]("click",function(){return t.enterFilterMode()}),a["\u0275\u0275pipe"](27,"async"),a["\u0275\u0275pipe"](28,"translate"),a["\u0275\u0275elementStart"](29,"mat-icon"),a["\u0275\u0275text"](30,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](31,"mat-toolbar",12),a["\u0275\u0275elementStart"](32,"div",13),a["\u0275\u0275elementStart"](33,"button",16),a["\u0275\u0275pipe"](34,"translate"),a["\u0275\u0275elementStart"](35,"mat-icon"),a["\u0275\u0275text"](36,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](37,"mat-form-field",3),a["\u0275\u0275elementStart"](38,"mat-label"),a["\u0275\u0275text"](39,"\xa0"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](40,"input",17,18),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.pageLink.textSearch=e}),a["\u0275\u0275pipe"](42,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](43,"button",19),a["\u0275\u0275listener"]("click",function(){return t.exitFilterMode()}),a["\u0275\u0275pipe"](44,"translate"),a["\u0275\u0275elementStart"](45,"mat-icon"),a["\u0275\u0275text"](46,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](47,"div",20),a["\u0275\u0275elementStart"](48,"table",21),a["\u0275\u0275elementContainerStart"](49,22),a["\u0275\u0275template"](50,z,3,3,"mat-header-cell",23),a["\u0275\u0275template"](51,W,2,1,"mat-cell",24),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementContainerStart"](52,25),a["\u0275\u0275template"](53,X,3,3,"mat-header-cell",26),a["\u0275\u0275template"](54,$,2,1,"mat-cell",24),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementContainerStart"](55,27),a["\u0275\u0275template"](56,J,3,3,"mat-header-cell",28),a["\u0275\u0275template"](57,Y,3,1,"mat-cell",24),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementContainerStart"](58,29),a["\u0275\u0275template"](59,Z,1,0,"mat-header-cell",30),a["\u0275\u0275template"](60,ee,12,13,"mat-cell",24),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275template"](61,te,1,0,"mat-header-row",31),a["\u0275\u0275template"](62,ne,1,0,"mat-row",32),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](63,"span",33),a["\u0275\u0275pipe"](64,"async"),a["\u0275\u0275text"](65),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](66,"mat-divider"),a["\u0275\u0275element"](67,"mat-paginator",34),a["\u0275\u0275pipe"](68,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](69,"div",35),a["\u0275\u0275elementStart"](70,"button",36),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](71,"async"),a["\u0275\u0275text"](72),a["\u0275\u0275pipe"](73,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](74,"button",37),a["\u0275\u0275pipe"](75,"async"),a["\u0275\u0275text"](76),a["\u0275\u0275pipe"](77,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.statesFormGroup),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](9,30,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](12,32,t.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("fxShow",!t.textSearchMode),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](23,36,"dashboard.add-state")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](22,34,t.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](28,40,"action.search")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](27,38,t.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("fxShow",t.textSearchMode),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](34,42,"dashboard.search-states")),a["\u0275\u0275advance"](7),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](42,44,"dashboard.search-states")),a["\u0275\u0275property"]("ngModel",t.pageLink.textSearch)("ngModelOptions",a["\u0275\u0275pureFunction0"](60,ie)),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](44,46,"action.close")),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("dataSource",t.dataSource)("matSortActive",t.pageLink.sortOrder.property)("matSortDirection",t.pageLink.sortDirection()),a["\u0275\u0275advance"](13),a["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",a["\u0275\u0275pipeBind1"](64,48,t.dataSource.isEmpty())),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"]("dashboard.no-states-text"),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("length",a["\u0275\u0275pipeBind1"](68,50,t.dataSource.total()))("pageIndex",t.pageLink.page)("pageSize",t.pageLink.pageSize)("pageSizeOptions",a["\u0275\u0275pureFunction0"](61,ae)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](71,52,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](73,54,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](75,56,t.isLoading$)||t.statesFormGroup.invalid||!t.statesFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](77,58,"action.save")," "))},directives:[M["\u0275angular_packages_forms_forms_ba"],M.NgControlStatusGroup,M.FormGroupDirective,D.MatToolbar,P.TranslateDirective,k.b,_.MatButton,L.MatIcon,j.NgIf,o.MatDialogContent,k.f,N.d,R.MatTooltip,U.MatFormField,U.MatLabel,V.MatInput,M.DefaultValueAccessor,M.NgControlStatus,M.NgModel,Q.MatTable,v.MatSort,Q.MatColumnDef,Q.MatHeaderCellDef,Q.MatCellDef,Q.MatHeaderRowDef,Q.MatRowDef,k.e,G.MatDivider,y.MatPaginator,o.MatDialogActions,H.MatProgressBar,Q.MatHeaderCell,v.MatSortHeader,Q.MatCell,Q.MatHeaderRow,Q.MatRow],pipes:[j.AsyncPipe,P.TranslatePipe],styles:["[_nghost-%COMP%]   .manage-dashboard-states[_ngcontent-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff}[_nghost-%COMP%]   .manage-dashboard-states[_ngcontent-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .tb-entity-table-title[_ngcontent-%COMP%]{padding-right:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .manage-dashboard-states[_ngcontent-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]     .manage-dashboard-states .mat-sort-header-sorted .mat-sort-header-arrow{opacity:1!important}"]}),t}(s.a);0,void 0},BOYq:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return L});var i=n("mrSG"),a=n("fXoL"),r=n("Z9d0"),o=n("5xOD"),s=n("jtHE"),l=n("Cfvw"),c=n("cp0P"),d=n("LRne"),u=n("z6cu"),p=n("0G7Z"),m=n("Neop"),f=n("OiFK"),h=n("OCOE"),g=n("0lYY"),A=n("5+tZ"),b=n("vkgz"),y=n("JIr8"),v=n("lJxs"),C=n("eIep"),x=n("//Q6"),w=n("QXrN"),S=n("BY7U"),E=n("wtyh"),I=n("oKkZ"),O=n("do/i"),T=n("KMMH"),F=n("PCNd"),B=n("6C3e"),M=n("Zss7"),P=n("wd/R"),D=n.n(P),k=n("sYmb"),_=M,L=function(){function t(e,t,n,i,a,r,o){var s=this;this.window=e,this.modulesMap=t,this.dynamicComponentFactoryService=n,this.widgetService=i,this.utils=a,this.resources=r,this.translate=o,this.cssParser=new m.a,this.widgetsInfoInMemoryCache=new Map,this.widgetsInfoFetchQueue=new Map,this.cssParser.testMode=!1,this.widgetService.onWidgetTypeUpdated().subscribe(function(e){s.deleteWidgetInfoFromCache(e.bundleAlias,e.alias,e.tenantId.id===I.a)}),this.widgetService.onWidgetBundleDeleted().subscribe(function(e){s.deleteWidgetsBundleFromCache(e.alias,e.tenantId.id===I.a)}),this.init()}return t.prototype.init=function(){var t=this;if(this.init$)return this.init$;this.missingWidgetType=Object(i.a)({},p.b),this.errorWidgetType=Object(i.a)({},p.a),this.utils.widgetEditMode&&(this.editingWidgetType=Object(p.f)({widgetName:this.utils.editWidgetInfo.widgetName,alias:"customWidget",type:this.utils.editWidgetInfo.type,sizeX:this.utils.editWidgetInfo.sizeX,sizeY:this.utils.editWidgetInfo.sizeY,resources:this.utils.editWidgetInfo.resources,templateHtml:this.utils.editWidgetInfo.templateHtml,templateCss:this.utils.editWidgetInfo.templateCss,controllerScript:this.utils.editWidgetInfo.controllerScript,settingsSchema:this.utils.editWidgetInfo.settingsSchema,dataKeySettingsSchema:this.utils.editWidgetInfo.dataKeySettingsSchema,defaultConfig:this.utils.editWidgetInfo.defaultConfig},new O.a("1"),new T.a(I.a),"customWidgetBundle",void 0));var a=new s.a;this.init$=a.asObservable();var r=this.window;r.tinycolor=_,r.cssjs=m.a,r.moment=D.a,r.$=e,r.jQuery=e;var o=[];return o.push(Object(l.a)(n.e(23).then(n.t.bind(null,"CbsS",7)))),o.push(Object(l.a)(n.e(45).then(n.t.bind(null,"BElK",7))).pipe(Object(A.b)(function(){var e=[];return e.push(Object(l.a)(n.e(44).then(n.t.bind(null,"6QTo",7)))),e.push(Object(l.a)(n.e(51).then(n.t.bind(null,"53JH",7)))),e.push(Object(l.a)(n.e(48).then(n.t.bind(null,"qAHz",7)))),e.push(Object(l.a)(n.e(47).then(n.t.bind(null,"+8KB",7)))),e.push(Object(l.a)(n.e(46).then(n.t.bind(null,"ZKjk",7)))),e.push(Object(l.a)(n.e(49).then(n.t.bind(null,"zqSh",7)))),e.push(Object(l.a)(n.e(50).then(n.t.bind(null,"Z5FO",7)))),e.push(Object(l.a)(n.e(43).then(n.t.bind(null,"aATD",7)))),Object(c.a)(e)}))),o.push(Object(l.a)(Promise.all([n.e(6),n.e(60)]).then(n.bind(null,"bOIV"))).pipe(Object(b.a)(function(e){window.TbFlot=e.TbFlot}))),o.push(Object(l.a)(Promise.all([n.e(6),n.e(61)]).then(n.bind(null,"gGQI"))).pipe(Object(b.a)(function(e){window.TemPeratureFlot=e.TemPeratureFlot}))),o.push(Object(l.a)(Promise.all([n.e(0),n.e(4),n.e(57)]).then(n.bind(null,"NZZV"))).pipe(Object(b.a)(function(e){window.TbAnalogueCompass=e.TbAnalogueCompass}))),o.push(Object(l.a)(Promise.all([n.e(0),n.e(4),n.e(59)]).then(n.bind(null,"0mCz"))).pipe(Object(b.a)(function(e){window.TbAnalogueRadialGauge=e.TbAnalogueRadialGauge}))),o.push(Object(l.a)(Promise.all([n.e(0),n.e(4),n.e(58)]).then(n.bind(null,"QfAU"))).pipe(Object(b.a)(function(e){window.TbAnalogueLinearGauge=e.TbAnalogueLinearGauge}))),o.push(Object(l.a)(Promise.all([n.e(0),n.e(13),n.e(25)]).then(n.bind(null,"4FQJ"))).pipe(Object(b.a)(function(e){window.TbCanvasDigitalGauge=e.TbCanvasDigitalGauge}))),o.push(Object(l.a)(n.e(8).then(n.bind(null,"n4i3"))).pipe(Object(b.a)(function(e){window.TbMapWidgetV2=e.TbMapWidgetV2}))),o.push(Object(l.a)(Promise.resolve().then(n.bind(null,"oTDE"))).pipe(Object(b.a)(function(e){window.TbTripAnimationWidget=e.TbTripAnimationWidget}))),Object(c.a)(o).subscribe(function(){var e=[t.loadWidgetResources(t.missingWidgetType,"global-widget-missing-type",[F.a,S.a]),t.loadWidgetResources(t.errorWidgetType,"global-widget-error-type",[F.a,S.a])];Object(c.a)(e).subscribe(function(){a.next()},function(e){var n=["Failed to load default widget types!"];e&&e.length&&(n=n.concat(e)),console.error("Failed to load default widget types!"),a.error({widgetInfo:t.errorWidgetType,errorMessages:n})})},function(e){var n=["Failed to load widget modules!"];e&&e.length&&(n=n.concat(e)),console.error("Failed to load widget modules!"),a.error({widgetInfo:t.errorWidgetType,errorMessages:n})}),this.init$},t.prototype.getInstantWidgetInfo=function(e){var t=this.getWidgetInfoFromCache(e.bundleAlias,e.typeAlias,e.isSystemType);return t||{}},t.prototype.getWidgetInfo=function(e,t,n){var i=this;return this.init().pipe(Object(A.b)(function(){return i.getWidgetInfoInternal(e,t,n)}))},t.prototype.getWidgetInfoInternal=function(e,t,n){var i=this,a=new s.a,r=this.getWidgetInfoFromCache(e,t,n);if(r)a.next(r),a.complete();else if(this.utils.widgetEditMode)this.loadWidget(this.editingWidgetType,e,n,a);else{var o=this.createWidgetInfoCacheKey(e,t,n),l=this.widgetsInfoFetchQueue.get(o);l?l.push(a):(l=new Array,this.widgetsInfoFetchQueue.set(o,l),this.widgetService.getWidgetType(e,t,n,{ignoreErrors:!0}).subscribe(function(t){i.loadWidget(t,e,n,a)},function(){a.next(i.missingWidgetType),a.complete(),i.resolveWidgetsInfoFetchQueue(o,i.missingWidgetType)}))}return a.asObservable()},t.prototype.loadWidget=function(e,t,n,i){var a=this,r=Object(p.e)(e),o=this.createWidgetInfoCacheKey(t,r.alias,n),s=null;try{s=this.createWidgetControllerDescriptor(r,o)}catch(d){var l="Failed to compile widget script. \n Error: "+this.utils.parseException(d).message;this.processWidgetLoadError([l],o,i)}if(s){var c="widget-type-"+(n?"sys-":"")+t+"-"+r.alias;this.loadWidgetResources(r,c,[F.a,S.a]).subscribe(function(){s.settingsSchema&&(r.typeSettingsSchema=s.settingsSchema),s.dataKeySettingsSchema&&(r.typeDataKeySettingsSchema=s.dataKeySettingsSchema),r.typeParameters=s.typeParameters,r.actionSources=s.actionSources,r.widgetTypeFunction=s.widgetTypeFunction,a.putWidgetInfoToCache(r,t,r.alias,n),i&&(i.next(r),i.complete()),a.resolveWidgetsInfoFetchQueue(o,r)},function(e){a.processWidgetLoadError(e,o,i)})}},t.prototype.loadWidgetResources=function(e,t,n){var a=this;this.cssParser.cssPreviewNamespace=t,this.cssParser.createStyleElement(t,e.templateCss);var r,o=[],s=[];return e.resources.length>0&&e.resources.filter(function(e){return e.isModule}).forEach(function(e){s.push(a.resources.loadModules(e.url,a.modulesMap).pipe(Object(y.a)(function(t){return Object(d.a)((null==t?void 0:t.message)?t.message:"Failed to load widget resource module: '"+e.url+"'")})))}),e.resources.filter(function(e){return!e.isModule}).forEach(function(e){o.push(a.resources.loadResource(e.url).pipe(Object(y.a)(function(t){return Object(d.a)("Failed to load widget resource: '"+e.url+"'")})))}),r=s.length?Object(c.a)(s).pipe(Object(v.a)(function(e){var t=e.find(function(e){return"string"==typeof e});if(t)return t;var i=e.flat();return n&&n.length&&(i=i.concat(n)),i})):n&&n.length?Object(d.a)(n):Object(d.a)([]),o.push(r.pipe(Object(A.b)(function(t){return"string"==typeof t?Object(d.a)(t):a.dynamicComponentFactoryService.createDynamicComponentFactory(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.d)(t,e),t}(w.a),e.templateHtml,t).pipe(Object(v.a)(function(t){return e.componentFactory=t,null}),Object(y.a)(function(e){var t="Failed to compile widget html. \n Error: "+a.utils.parseException(e).message;return Object(d.a)(t)}))}))),Object(c.a)(o).pipe(Object(C.a)(function(e){var t;return e&&e.length&&(t=e.filter(function(e){return e&&e.length>0})),t&&t.length?Object(u.a)(t):Object(d.a)(null)}))},t.prototype.createWidgetControllerDescriptor=function(e,t){var n="return function _"+t+" (ctx) {\n    var self = this;\n    self.ctx = ctx;\n\n";n+=e.controllerScript,n+="\n};\n";try{var a=new Function(n).apply(this),r=new a,o={widgetTypeFunction:a};Object(x.s)(r.getSettingsSchema)&&(o.settingsSchema=r.getSettingsSchema()),Object(x.s)(r.getDataKeySettingsSchema)&&(o.dataKeySettingsSchema=r.getDataKeySettingsSchema()),Object(x.s)(r.typeParameters)?o.typeParameters=r.typeParameters():o.typeParameters={},Object(x.s)(r.useCustomDatasources)?o.typeParameters.useCustomDatasources=r.useCustomDatasources():o.typeParameters.useCustomDatasources=!1,Object(x.B)(o.typeParameters.hasDataPageLink)&&(o.typeParameters.hasDataPageLink=!1),Object(x.B)(o.typeParameters.maxDatasources)&&(o.typeParameters.maxDatasources=-1),Object(x.B)(o.typeParameters.maxDataKeys)&&(o.typeParameters.maxDataKeys=-1),Object(x.B)(o.typeParameters.singleEntity)&&(o.typeParameters.singleEntity=!1),Object(x.B)(o.typeParameters.warnOnPageDataOverflow)&&(o.typeParameters.warnOnPageDataOverflow=!0),Object(x.B)(o.typeParameters.ignoreDataUpdateOnIntervalTick)&&(o.typeParameters.ignoreDataUpdateOnIntervalTick=!1),Object(x.B)(o.typeParameters.dataKeysOptional)&&(o.typeParameters.dataKeysOptional=!1),Object(x.B)(o.typeParameters.stateData)&&(o.typeParameters.stateData=!1),Object(x.s)(r.actionSources)?o.actionSources=r.actionSources():o.actionSources={};for(var s=0,l=Object.keys(g.j);s<l.length;s++){var c=l[s];o.actionSources[c]=Object(i.a)({},g.j[c]),o.actionSources[c].name=this.translate.instant(o.actionSources[c].name)}return o}catch(d){throw this.utils.processWidgetException(d),d}},t.prototype.processWidgetLoadError=function(e,t,n){n&&n.error({widgetInfo:this.errorWidgetType,errorMessages:e}),this.resolveWidgetsInfoFetchQueue(t,this.errorWidgetType,e)},t.prototype.resolveWidgetsInfoFetchQueue=function(e,t,n){var i=this.widgetsInfoFetchQueue.get(e);i&&(i.forEach(function(e){n?e.error({widgetInfo:t,errorMessages:n}):(e.next(t),e.complete())}),this.widgetsInfoFetchQueue.delete(e))},t.prototype.createWidgetInfoCacheKey=function(e,t,n){return(n?"sys_":"")+e+"_"+t},t.prototype.getWidgetInfoFromCache=function(e,t,n){var i=this.createWidgetInfoCacheKey(e,t,n);return this.widgetsInfoInMemoryCache.get(i)},t.prototype.putWidgetInfoToCache=function(e,t,n,i){var a=this.createWidgetInfoCacheKey(t,n,i);this.widgetsInfoInMemoryCache.set(a,e)},t.prototype.deleteWidgetInfoFromCache=function(e,t,n){var i=this.createWidgetInfoCacheKey(e,t,n);this.widgetsInfoInMemoryCache.delete(i)},t.prototype.deleteWidgetsBundleFromCache=function(e,t){var n=this,i=(t?"sys_":"")+e;this.widgetsInfoInMemoryCache.forEach(function(e,t){t.startsWith(i)&&n.widgetsInfoInMemoryCache.delete(t)})},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275inject"](E.b),a["\u0275\u0275inject"](B.MODULES_MAP,8),a["\u0275\u0275inject"](r.a),a["\u0275\u0275inject"](o.a),a["\u0275\u0275inject"](f.a),a["\u0275\u0275inject"](h.a),a["\u0275\u0275inject"](k.TranslateService))},t.\u0275prov=a["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}();0,void 0}).call(this,n("xexB"))},BY7U:function(e,t,n){"use strict";n.d(t,"a",function(){return jn});var i=n("fXoL"),a=n("ofXK"),r=n("PCNd"),o=n("Bdm/"),s=n("A6E3"),l=n("nkFp"),c=n("1iWl"),d=n("wst2"),u=n("xRAe"),p=n("bkji"),m=n("g8Nv"),f=n("2/1y"),h=n("CyoE"),g=n("m4rf"),A=n("hBar"),b=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[a.CommonModule,r.a]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](b,{declarations:[f.a,h.a,g.a,A.a],imports:[a.CommonModule,r.a],exports:[f.a,h.a,g.a,A.a]})),0;var y=n("mrSG"),v=n("RxGS"),C=(n("0G7Z"),n("OiFK"));function x(e){var t,n=e.startDate,i=e.endDate;if(0===n.diff(i,"days"))t=n.format("DD MMM YYYY");else{var a="DD";n.month()===i.month()&&n.year()===i.year()||(a+=" MMM"),n.year()!==i.year()&&(a+=" YYYY"),t=n.format(a)+" - "+i.format("DD MMM YYYY")}return t}var w={hour:{ts:36e5,label:"Hour"},day:{ts:864e5,label:"Day"},week:{ts:6048e5,label:"Week"},twoWeeks:{ts:12096e5,label:"2 weeks"},month:{ts:2629743e3,label:"Month"},threeMonths:{ts:7889229e3,label:"3 months"},sixMonths:{ts:15778458e3,label:"6 months"}},S=n("wd/R"),E=n("rDax"),I=n("+rOU"),O=n("aX2P"),T=n("//Q6"),F=n("l7P3"),B=n("znSr"),M=n("kmnG"),P=n("d3UM"),D=n("3Pt+"),k=n("FKr1"),_=n("bTqV"),L=n("NFeN"),j=n("XiUz"),N=n("sYmb"),R=n("YhS8"),U=n("qFsG"),V=["datePicker"];function Q(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-label",13),i["\u0275\u0275text"](1,"widgets.date-range-navigator.localizationMap.Date picker"),i["\u0275\u0275elementEnd"]())}function G(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-label",13),i["\u0275\u0275text"](1,"widgets.date-range-navigator.localizationMap.Interval"),i["\u0275\u0275elementEnd"]())}function H(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",5),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n.customInterval.ts),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,"widgets.date-range-navigator.localizationMap."+n.customInterval.label)," ")}}function K(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",5),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275property"]("value",n.value.ts),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,"widgets.date-range-navigator.localizationMap."+n.value.label)," ")}}function q(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-label",13),i["\u0275\u0275text"](1,"widgets.date-range-navigator.localizationMap.Step size"),i["\u0275\u0275elementEnd"]())}function z(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",5),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275property"]("value",n.value.ts),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,"widgets.date-range-navigator.localizationMap."+n.value.label)," ")}}var W=function(e,t,n){return{"short-mode":e,"labels-hidden":t,"long-mode":n}};function X(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-form-field",4),i["\u0275\u0275element"](1,"input",5),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",n.model.chosenLabel)}}function $(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",6),i["\u0275\u0275element"](1,"span",7),i["\u0275\u0275elementStart"](2,"button",8),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().apply()}),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](4,1,"action.ok")," "))}var J=function(e){function t(t,n,i,a){var r=e.call(this,a)||this;return r.utils=t,r.overlay=n,r.viewContainerRef=i,r.store=a,r.datesMap=w,r.advancedModel={},r.firstUpdate=!0,r.originalOrder=function(e,t){return 0},r}return Object(y.d)(t,e),t.prototype.ngOnInit=function(){var e,t=this;if(this.settings=this.ctx.settings,this.settings.useSessionStorage=!Object(T.n)(this.settings.useSessionStorage)||this.settings.useSessionStorage,this.settings.useSessionStorage&&(e=this.readFromStorage("date-range")),e)this.advancedModel={chosenLabel:e.name,startDate:S(e.start),endDate:S(e.end)};else{var n=new Date;n.setHours(23,59,59,999),this.advancedModel={startDate:S(n.getTime()+1-this.datesMap[this.settings.initialInterval||"week"].ts),endDate:S(n.getTime())},this.advancedModel.chosenLabel=x(this.advancedModel)}this.selectedStepSize=this.datesMap[this.settings.stepSize||"day"].ts,this.widgetContextTimewindowSync(),this.dashboardTimewindowChangedSubscription=this.ctx.dashboard.dashboardTimewindowChanged.subscribe(function(){t.widgetContextTimewindowSync()})},t.prototype.ngOnDestroy=function(){this.dashboardTimewindowChangedSubscription&&(this.dashboardTimewindowChangedSubscription.unsubscribe(),this.dashboardTimewindowChangedSubscription=null)},t.prototype.openNavigatorPanel=function(e){var t=this;e&&e.stopPropagation(),this.datePickerSelect.close();var n=e.target||e.srcElement||e.currentTarget,a=new E.OverlayConfig;a.backdropClass="cdk-overlay-transparent-backdrop",a.hasBackdrop=!0,a.panelClass="tb-date-range-navigator-panel";a.positionStrategy=this.overlay.position().flexibleConnectedTo(n).withPositions([{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}]);var r=this.overlay.create(a);r.backdropClick().subscribe(function(){r.dispose()});var o,s,l=[{provide:Y,useValue:{model:(o=this.advancedModel,s={},s.chosenLabel=o.chosenLabel,s.startDate=o.startDate?o.startDate.clone():void 0,s.endDate=o.endDate?o.endDate.clone():void 0,s),settings:this.settings,onChange:function(e){t.advancedModel=e,t.triggerChange()}}},{provide:E.OverlayRef,useValue:r}],c=i.Injector.create({parent:this.viewContainerRef.injector,providers:l});r.attach(new I.ComponentPortal(Z,this.viewContainerRef,c)),this.ctx.detectChanges()},t.prototype.widgetContextTimewindowSync=function(){this.firstUpdate||this.updateAdvancedModel(),this.updateDateInterval(),this.settings.useSessionStorage&&this.updateStorageDate(),this.firstUpdate&&(this.firstUpdate=!1,this.updateTimewindow(this.advancedModel.startDate.valueOf(),this.advancedModel.endDate.valueOf())),this.ctx.detectChanges()},t.prototype.updateAdvancedModel=function(){var e=this.ctx.dashboardTimewindow;if(e.selectedTab===O.l.HISTORY&&e.history.historyType===O.d.FIXED){var t=e.history.fixedTimewindow;this.advancedModel.startDate=S(t.startTimeMs),this.advancedModel.endDate=S(t.endTimeMs),this.advancedModel.chosenLabel=x(this.advancedModel)}},t.prototype.updateTimewindow=function(e,t){this.ctx.dashboard.onUpdateTimewindow(e,t,10,!0)},t.prototype.updateDateInterval=function(){for(var e=this.advancedModel.endDate.valueOf()-this.advancedModel.startDate.valueOf(),t=0,n=Object.keys(this.datesMap);t<n.length;t++){var i=n[t];if(Object.prototype.hasOwnProperty.call(this.datesMap,i)&&(this.datesMap[i].ts===e||this.datesMap[i].ts===e+1||this.datesMap[i].ts===e-1))return this.selectedDateInterval=this.datesMap[i].ts,this.customInterval=void 0,void 0}this.selectedDateInterval=e,this.customInterval={ts:e,label:"Custom interval"}},t.prototype.triggerChange=function(){this.updateTimewindow(this.advancedModel.startDate.valueOf(),this.advancedModel.endDate.valueOf())},t.prototype.changeInterval=function(){var e=this.ctx.dashboard.dashboardTimewindow.history?this.ctx.dashboard.dashboardTimewindow.history.fixedTimewindow.endTimeMs:this.advancedModel.endDate.valueOf();this.updateTimewindow(e-this.selectedDateInterval/2,e+this.selectedDateInterval/2)},t.prototype.goBack=function(){this.step(-1)},t.prototype.goForth=function(){this.step(1)},t.prototype.step=function(e){var t=this.ctx.dashboard.dashboardTimewindow.history?this.ctx.dashboard.dashboardTimewindow.history.fixedTimewindow.startTimeMs:this.advancedModel.startDate.valueOf(),n=this.ctx.dashboard.dashboardTimewindow.history?this.ctx.dashboard.dashboardTimewindow.history.fixedTimewindow.endTimeMs:this.advancedModel.endDate.valueOf();this.updateTimewindow(t+this.selectedStepSize*e,n+this.selectedStepSize*e)},t.prototype.readFromStorage=function(e){if(window.sessionStorage.getItem(e)){var t=JSON.parse(window.sessionStorage.getItem(e));return t.start=new Date(parseInt(t.start,10)),t.end=new Date(parseInt(t.end,10)),t}},t.prototype.updateStorageDate=function(){this.saveIntoStorage("date-range",{start:this.advancedModel.startDate.valueOf(),end:this.advancedModel.endDate.valueOf(),name:this.advancedModel.chosenLabel})},t.prototype.saveIntoStorage=function(e,t){t&&window.sessionStorage.setItem(e,JSON.stringify(t))},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](C.a),i["\u0275\u0275directiveInject"](E.Overlay),i["\u0275\u0275directiveInject"](i.ViewContainerRef),i["\u0275\u0275directiveInject"](F.Store))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-date-range-navigator-widget"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](V,3),2&e){var n;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.datePickerSelect=n.first)}},inputs:{ctx:"ctx"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:25,vars:25,consts:[[1,"date-range-navigator",3,"ngClass"],[1,"mat-block",3,"fxHide","click"],["translate","",4,"ngIf"],[3,"ngModel"],["datePicker",""],[3,"value"],[1,"mat-block",3,"fxHide"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[1,"drn__element","step",3,"fxHide"],["mat-button","","mat-icon-button","",3,"click"],["fxFlex.gt-sm","",1,"mat-block"],["translate",""]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"mat-form-field",1),i["\u0275\u0275listener"]("click",function(e){return t.openNavigatorPanel(e)}),i["\u0275\u0275template"](2,Q,2,0,"mat-label",2),i["\u0275\u0275elementStart"](3,"mat-select",3,4),i["\u0275\u0275elementStart"](5,"mat-option",5),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"mat-form-field",6),i["\u0275\u0275template"](8,G,2,0,"mat-label",2),i["\u0275\u0275elementStart"](9,"mat-select",7),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.selectedDateInterval=e})("ngModelChange",function(){return t.changeInterval()}),i["\u0275\u0275template"](10,H,3,4,"mat-option",8),i["\u0275\u0275template"](11,K,3,4,"mat-option",9),i["\u0275\u0275pipe"](12,"keyvalue"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"div",10),i["\u0275\u0275elementStart"](14,"button",11),i["\u0275\u0275listener"]("click",function(){return t.goBack()}),i["\u0275\u0275elementStart"](15,"mat-icon"),i["\u0275\u0275text"](16,"keyboard_arrow_left"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"mat-form-field",12),i["\u0275\u0275template"](18,q,2,0,"mat-label",2),i["\u0275\u0275elementStart"](19,"mat-select",7),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.selectedStepSize=e}),i["\u0275\u0275template"](20,z,3,4,"mat-option",9),i["\u0275\u0275pipe"](21,"keyvalue"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"button",11),i["\u0275\u0275listener"]("click",function(){return t.goForth()}),i["\u0275\u0275elementStart"](23,"mat-icon"),i["\u0275\u0275text"](24,"keyboard_arrow_right"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction3"](21,W,t.ctx.width<400,t.settings.hideLabels,t.ctx.width>=400)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxHide",t.settings.hidePicker),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.settings.hideLabels),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",t.advancedModel.chosenLabel),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("value",t.advancedModel.chosenLabel),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",t.advancedModel.chosenLabel," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxHide",t.settings.hideInterval),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.settings.hideLabels),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",t.selectedDateInterval),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.customInterval),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind2"](12,15,t.datesMap,t.originalOrder)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("fxHide",t.settings.hideStepSize),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",!t.settings.hideLabels),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",t.selectedStepSize),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind2"](21,18,t.datesMap,t.originalOrder)))},directives:[a.NgClass,B.b,M.MatFormField,B.d,a.NgIf,P.MatSelect,D.NgControlStatus,D.NgModel,k.MatOption,a.NgForOf,_.MatButton,L.MatIcon,j.b,M.MatLabel,N.TranslateDirective],pipes:[a.KeyValuePipe,N.TranslatePipe],styles:["[_nghost-%COMP%]{display:flex;height:100%}[_nghost-%COMP%]   .date-range-navigator[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-evenly;width:100%;margin:auto}[_nghost-%COMP%]   .date-range-navigator[_ngcontent-%COMP%]   .drn__element[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;max-width:100%;height:60px;margin:4px 0}[_nghost-%COMP%]   .date-range-navigator[_ngcontent-%COMP%]   .picker[_ngcontent-%COMP%]   .picker__wrapper[_ngcontent-%COMP%]{position:relative;max-width:100%;padding:2px}[_nghost-%COMP%]   .date-range-navigator[_ngcontent-%COMP%]   .picker[_ngcontent-%COMP%]   .picker__wrapper[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{position:absolute;right:-3px;bottom:100%;left:0;padding-left:3px;color:#787878;transform:scale(.75);transform-origin:left bottom}[_nghost-%COMP%]   .date-range-navigator[_ngcontent-%COMP%]   .picker[_ngcontent-%COMP%]   .md-select-value[_ngcontent-%COMP%]{min-width:225px;border-color:#e1e1e1}[_nghost-%COMP%]   .date-range-navigator[_ngcontent-%COMP%]   .picker[_ngcontent-%COMP%]   .md-select-value[_ngcontent-%COMP%]   .md-select-icon[_ngcontent-%COMP%]{color:#757575}[_nghost-%COMP%]   .date-range-navigator.short-mode[_ngcontent-%COMP%]{display:block;width:90%}[_nghost-%COMP%]   .date-range-navigator.short-mode[_ngcontent-%COMP%]   .drn__element[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .date-range-navigator.short-mode[_ngcontent-%COMP%]   .picker[_ngcontent-%COMP%]   .picker__wrapper[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .date-range-navigator.short-mode[_ngcontent-%COMP%]   .picker[_ngcontent-%COMP%]   .md-select-value[_ngcontent-%COMP%]{min-width:auto}[_nghost-%COMP%]   .date-range-navigator.short-mode.labels-hidden[_ngcontent-%COMP%]   .drn__element[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   .date-range-navigator.long-mode.labels-hidden[_ngcontent-%COMP%]   .drn__element[_ngcontent-%COMP%]{height:36px}"]}),t}(v.a);0,void 0;var Y=new i.InjectionToken("DateRangeNavigatorPanelData"),Z=function(){function e(e,t){this.data=e,this.overlayRef=t,this.locale={},this.model=e.model,this.settings=e.settings,this.locale.firstDay=this.settings.firstDayOfWeek||1,this.locale.daysOfWeek=S.weekdaysMin(),this.locale.monthNames=S.monthsShort()}return e.prototype.choosedDate=function(e){this.model=e,this.model.chosenLabel=x(this.model),this.settings.autoConfirm&&(this.data.onChange(this.model),this.overlayRef.dispose())},e.prototype.apply=function(){this.data.onChange(this.model),this.overlayRef.dispose()},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](Y),i["\u0275\u0275directiveInject"](E.OverlayRef))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-date-range-navigator-panel"]],decls:4,vars:7,consts:[["fxLayout","column",1,"mat-content","mat-padding"],["class","mat-block",4,"ngIf"],[3,"startDate","endDate","locale","singleDatePicker","autoApply","choosedDate"],["class","tb-panel-actions","fxLayout","row",4,"ngIf"],[1,"mat-block"],["readonly","","matInput","","type","text",3,"ngModel"],["fxLayout","row",1,"tb-panel-actions"],["fxFlex",""],["mat-button","","mat-raised-button","","color","accent","type","button",3,"click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,X,2,1,"mat-form-field",1),i["\u0275\u0275elementStart"](2,"ngx-daterangepicker-material",2),i["\u0275\u0275listener"]("choosedDate",function(e){return t.choosedDate(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](3,$,5,3,"div",3),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.settings.showTemplate),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("startDate",t.model.startDate)("endDate",t.model.endDate)("locale",t.locale)("singleDatePicker",t.settings.onePanel)("autoApply",!0),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.settings.autoConfirm))},directives:[j.f,a.NgIf,R.a,M.MatFormField,U.MatInput,D.DefaultValueAccessor,D.NgControlStatus,D.NgModel,j.b,_.MatButton],pipes:[N.TranslatePipe],styles:[".tb-date-range-navigator-panel{overflow:auto;background:#fff;border-radius:4px;box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12)}.tb-date-range-navigator-panel .mat-content{overflow:hidden;background-color:#fff}.tb-date-range-navigator-panel .mat-padding{padding:16px}"],encapsulation:2}),e}();0,void 0;var ee=n("0lYY"),te=n("U3y+"),ne=n("BsGH"),ie=n("3Tyt"),ae=n("XNiG"),re=n("cp0P"),oe=n("HR/i"),se=n("1G5W"),le=n("rezs"),ce=n("bSwM"),de=n("1jcm"),ue=n("xoCY"),pe=["formContainer"];function me(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"legend",11),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]().$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("",a.getGroupTitle(n.datasource)," ")}}function fe(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-icon",21),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2).$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n.settings.icon)}}function he(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2).$implicit,a=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.getErrorMessageText(n.settings,"required")," ")}}function ge(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",16),i["\u0275\u0275elementStart"](1,"mat-form-field",17),i["\u0275\u0275elementStart"](2,"mat-label"),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"input",18),i["\u0275\u0275listener"]("focus",function(e){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"]().$implicit,a=i["\u0275\u0275nextContext"](3);return t.isFocused=!0,a.focusInputElement(e)})("blur",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"]().$implicit,t=i["\u0275\u0275nextContext"]().$implicit,a=i["\u0275\u0275nextContext"](2);return e.isFocused=!1,a.inputChanged(t,e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](5,fe,2,1,"mat-icon",19),i["\u0275\u0275template"](6,he,2,1,"mat-error",20),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=i["\u0275\u0275nextContext"]().$implicit,r=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](a.label),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("formControlName",a.formId),i["\u0275\u0275property"]("required",a.settings.required)("readonly","readonly"===a.settings.isEditable),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.settings.icon),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",r.multipleInputFormGroup.get(a.formId).hasError("required"))}}function Ae(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-icon",21),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2).$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n.settings.icon)}}function be(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2).$implicit,a=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.getErrorMessageText(n.settings,"required")," ")}}function ye(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2).$implicit,a=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.getErrorMessageText(n.settings,"min")," ")}}function ve(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2).$implicit,a=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.getErrorMessageText(n.settings,"max")," ")}}function Ce(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",16),i["\u0275\u0275elementStart"](1,"mat-form-field",17),i["\u0275\u0275elementStart"](2,"mat-label"),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"input",22),i["\u0275\u0275listener"]("focus",function(e){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"]().$implicit,a=i["\u0275\u0275nextContext"](3);return t.isFocused=!0,a.focusInputElement(e)})("blur",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"]().$implicit,t=i["\u0275\u0275nextContext"]().$implicit,a=i["\u0275\u0275nextContext"](2);return e.isFocused=!1,a.inputChanged(t,e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](5,Ae,2,1,"mat-icon",19),i["\u0275\u0275template"](6,be,2,1,"mat-error",20),i["\u0275\u0275template"](7,ye,2,1,"mat-error",20),i["\u0275\u0275template"](8,ve,2,1,"mat-error",20),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=i["\u0275\u0275nextContext"]().$implicit,r=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](a.label),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("formControlName",a.formId),i["\u0275\u0275propertyInterpolate"]("step",a.settings.step),i["\u0275\u0275propertyInterpolate"]("min",a.settings.minValue),i["\u0275\u0275propertyInterpolate"]("max",a.settings.maxValue),i["\u0275\u0275property"]("required",a.settings.required)("readonly","readonly"===a.settings.isEditable),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.settings.icon),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",r.multipleInputFormGroup.get(a.formId).hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",r.multipleInputFormGroup.get(a.formId).hasError("min")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",r.multipleInputFormGroup.get(a.formId).hasError("max"))}}function xe(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",23),i["\u0275\u0275elementStart"](1,"mat-checkbox",24),i["\u0275\u0275listener"]("change",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"]().$implicit,t=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"](2).inputChanged(t,e)}),i["\u0275\u0275elementStart"](2,"span",25),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("formControlName",a.formId),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](a.label)}}function we(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",23),i["\u0275\u0275elementStart"](1,"mat-slide-toggle",24),i["\u0275\u0275listener"]("change",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"]().$implicit,t=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"](2).inputChanged(t,e)}),i["\u0275\u0275elementStart"](2,"span",25),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("formControlName",a.formId),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](a.label)}}function Se(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2).$implicit,a=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.getErrorMessageText(n.settings,"required")," ")}}function Ee(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2).$implicit,a=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.getErrorMessageText(n.settings,"invalidDate")," ")}}function Ie(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",26),i["\u0275\u0275elementStart"](1,"mat-form-field"),i["\u0275\u0275elementStart"](2,"mat-placeholder"),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"mat-datetimepicker-toggle",27),i["\u0275\u0275element"](5,"mat-datetimepicker",28,29),i["\u0275\u0275elementStart"](7,"input",30),i["\u0275\u0275listener"]("focus",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().$implicit.isFocused=!0})("blur",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().$implicit.isFocused=!1})("dateChange",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"]().$implicit,t=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"](2).inputChanged(t,e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,Se,2,1,"mat-error",20),i["\u0275\u0275template"](9,Ee,2,1,"mat-error",20),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=i["\u0275\u0275reference"](6),r=i["\u0275\u0275nextContext"]().$implicit,o=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](r.label),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("for",a),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("type",o.datePickerType(r.settings.dataKeyValueType)),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("formControlName",r.formId),i["\u0275\u0275property"]("required",r.settings.required)("readonly","readonly"===r.settings.isEditable)("matDatetimepicker",a),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",o.multipleInputFormGroup.get(r.formId).hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",o.multipleInputFormGroup.get(r.formId).hasError("matDatepickerParse"))}}var Oe=function(e){return{width:e}};function Te(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",12),i["\u0275\u0275template"](1,ge,7,6,"div",13),i["\u0275\u0275template"](2,Ce,9,11,"div",13),i["\u0275\u0275template"](3,xe,4,2,"div",14),i["\u0275\u0275template"](4,we,4,2,"div",14),i["\u0275\u0275template"](5,Ie,10,9,"div",15),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"](3);i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction1"](6,Oe,a.isVerticalAlignment||a.changeAlignment?"100%":a.inputWidthSettings)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","string"===n.settings.dataKeyValueType),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","double"===n.settings.dataKeyValueType||"integer"===n.settings.dataKeyValueType),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","booleanCheckbox"===n.settings.dataKeyValueType),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","booleanSwitch"===n.settings.dataKeyValueType),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","dateTime"===n.settings.dataKeyValueType||"date"===n.settings.dataKeyValueType||"time"===n.settings.dataKeyValueType)}}var Fe=function(e){return{"fields-group":e}},Be=function(e){return{"vertical-alignment":e}};function Me(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"fieldset",7),i["\u0275\u0275template"](1,me,2,1,"legend",8),i["\u0275\u0275elementStart"](2,"div",9),i["\u0275\u0275template"](3,Te,6,8,"div",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](4,Fe,a.settings.showGroupTitle)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.settings.showGroupTitle),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](6,Be,a.isVerticalAlignment||a.changeAlignment)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",a.visibleKeys(n))}}function Pe(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",31),i["\u0275\u0275elementStart"](1,"button",32),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).discardAll()}),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"button",33),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",!a.multipleInputFormGroup.dirty),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.resetButtonLabel," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",!a.multipleInputFormGroup.dirty||a.multipleInputFormGroup.invalid),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.saveButtonLabel," ")}}function De(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",4),i["\u0275\u0275template"](1,Me,4,8,"fieldset",5),i["\u0275\u0275template"](2,Pe,5,4,"div",6),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",n.sources),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.entityDetected&&n.settings.showActionButtons)}}function ke(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",34),i["\u0275\u0275elementStart"](1,"div",35),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",36),i["\u0275\u0275text"](5),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxHide",n.entityDetected),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](3,4,"widgets.input-widgets.no-entity-selected")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("fxShow",n.entityDetected&&!n.isAllParametersValid),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](6,6,"widgets.input-widgets.not-allowed-entity")," ")}}var _e=function(e){function t(t,n,i,a,r,o,s,l,c){var d=e.call(this,t)||this;return d.store=t,d.elementRef=n,d.ngZone=i,d.overlay=a,d.viewContainerRef=r,d.utils=o,d.fb=s,d.attributeService=l,d.translate=c,d.destroy$=new ae.b,d.sources=[],d.entityDetected=!1,d.isAllParametersValid=!0,d.toastTargetId="multiple-input-widget"+d.utils.guid(),d}return Object(y.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this.ctx.$scope.multipleInputWidget=this,this.settings=this.ctx.settings,this.widgetConfig=this.ctx.widgetConfig,this.subscription=this.ctx.defaultSubscription,this.datasources=this.subscription.datasources,this.initializeConfig(),this.updateDatasources(),this.buildForm(),this.ctx.updateWidgetParams(),this.formResize$=new oe.a(function(){e.resize()}),this.formResize$.observe(this.formContainerRef.nativeElement)},t.prototype.ngOnDestroy=function(){this.formResize$&&this.formResize$.disconnect(),this.destroy$.next(),this.destroy$.complete()},t.prototype.initializeConfig=function(){if(this.settings.widgetTitle&&this.settings.widgetTitle.length){var e=this.utils.customTranslation(this.settings.widgetTitle,this.settings.widgetTitle);this.ctx.widgetTitle=Object(T.d)(this.datasources[0],e)}else this.ctx.widgetTitle=this.ctx.widgetConfig.title;this.settings.groupTitle=this.settings.groupTitle||"${entityName}",this.settings.saveButtonLabel&&this.settings.saveButtonLabel.length?this.saveButtonLabel=this.utils.customTranslation(this.settings.saveButtonLabel,this.settings.saveButtonLabel):this.saveButtonLabel=this.translate.instant("action.save"),this.settings.resetButtonLabel&&this.settings.resetButtonLabel.length?this.resetButtonLabel=this.utils.customTranslation(this.settings.resetButtonLabel,this.settings.resetButtonLabel):this.resetButtonLabel=this.translate.instant("action.undo"),Object(T.B)(this.settings.showActionButtons)&&(this.settings.showActionButtons=!0),Object(T.B)(this.settings.fieldsAlignment)&&(this.settings.fieldsAlignment="row"),Object(T.B)(this.settings.fieldsInRow)&&(this.settings.fieldsInRow=2),this.isVerticalAlignment=!("row"===this.settings.fieldsAlignment),!this.isVerticalAlignment&&this.settings.fieldsInRow&&(this.inputWidthSettings=100/this.settings.fieldsInRow+"%"),this.updateWidgetDisplaying()},t.prototype.updateDatasources=function(){var e=this;if(this.datasources&&this.datasources.length){this.entityDetected=!0;var t=0;this.datasources.forEach(function(n){var i={datasource:n,keys:[]};n.type===ee.a.entity?n.dataKeys.forEach(function(a){n.entityType!==te.b.DEVICE&&"shared"===a.settings.dataKeyType&&(e.isAllParametersValid=!1),a.units&&(a.label+=" ("+a.units+")"),a.formId=++t+"",a.isFocused=!1,Object(T.B)(a.settings.dataKeyType)&&(e.settings.attributesShared?a.settings.dataKeyType="shared":a.settings.dataKeyType="server"),Object(T.B)(a.settings.dataKeyValueType)&&(a.settings.inputTypeNumber?a.settings.dataKeyValueType="double":a.settings.dataKeyValueType="string"),Object(T.B)(a.settings.isEditable)&&(a.settings.readOnly?a.settings.isEditable="readonly":a.settings.isEditable="editable"),i.keys.push(a)}):e.entityDetected=!1,e.sources.push(i)})}},t.prototype.buildForm=function(){var e=this;this.multipleInputFormGroup=this.fb.group({}),this.sources.forEach(function(t){for(var n={},i={},a=function(t){var a=[];t.settings.required&&a.push(D.Validators.required),"integer"===t.settings.dataKeyValueType&&a.push(D.Validators.pattern(/^-?[0-9]+$/)),"integer"!==t.settings.dataKeyValueType&&"double"!==t.settings.dataKeyValueType||(Object(T.o)(t.settings.minValue)&&isFinite(t.settings.minValue)&&a.push(D.Validators.min(t.settings.minValue)),Object(T.o)(t.settings.maxValue)&&isFinite(t.settings.maxValue)&&a.push(D.Validators.max(t.settings.maxValue)));var r=e.fb.control({value:t.value,disabled:"disabled"===t.settings.isEditable||t.settings.disabledOnCondition},a);e.settings.showActionButtons&&(n[t.name]=r,"editable"===t.settings.isEditable&&t.settings.disabledOnDataKey&&(n.hasOwnProperty(t.settings.disabledOnDataKey)?n[t.settings.disabledOnDataKey].valueChanges.pipe(Object(se.a)(e.destroy$)).subscribe(function(e){e?r.enable({emitEvent:!1}):r.disable({emitEvent:!1})}):i[t.settings.disabledOnDataKey]=r),i.hasOwnProperty(t.name)&&r.valueChanges.pipe(Object(se.a)(e.destroy$)).subscribe(function(e){e?i[t.name].enable({emitEvent:!1}):i[t.name].disable({emitEvent:!1})})),e.multipleInputFormGroup.addControl(t.formId,r)},r=0,o=e.visibleKeys(t);r<o.length;r++){a(o[r])}})},t.prototype.updateWidgetData=function(e){var t=this,n=0;this.sources.forEach(function(i){i.keys.forEach(function(a){var r=e[n].data;if(r&&r.length){var o=void 0;switch(a.settings.dataKeyValueType){case"dateTime":case"date":o=Object(T.o)(r[0][1])&&""!==r[0][1]?S(r[0][1]).toDate():null;break;case"time":o=S().startOf("day").add(r[0][1],"ms").toDate();break;case"booleanCheckbox":case"booleanSwitch":o="true"===r[0][1];break;default:o=r[0][1]}a.value=o}if("editable"===a.settings.isEditable&&a.settings.disabledOnDataKey){var s=e.filter(function(e){return i.datasource===e.datasource&&e.dataKey.name===a.settings.disabledOnDataKey});s&&s.length&&s[0].data.length&&("false"===s[0].data[0][1]?a.settings.disabledOnCondition=!0:a.settings.disabledOnCondition=!s[0].data[0][1])}if(!a.settings.dataKeyHidden){"disabled"===a.settings.isEditable||a.settings.disabledOnCondition?t.multipleInputFormGroup.get(a.formId).disable({emitEvent:!1}):t.multipleInputFormGroup.get(a.formId).enable({emitEvent:!1});var l=t.multipleInputFormGroup.get(a.formId).dirty;a.isFocused||l||t.multipleInputFormGroup.get(a.formId).patchValue(a.value,{emitEvent:!1})}n++})})},t.prototype.updateWidgetDisplaying=function(){this.changeAlignment=this.ctx.$container&&this.ctx.$container[0].offsetWidth<620},t.prototype.onDataUpdated=function(){this.updateWidgetData(this.subscription.data),this.ctx.detectChanges()},t.prototype.resize=function(){this.updateWidgetDisplaying(),this.ctx.detectChanges()},t.prototype.getGroupTitle=function(e){var t=Object(T.d)(e,this.settings.groupTitle);return this.utils.customTranslation(t,t)},t.prototype.getErrorMessageText=function(e,t){var n,i,a;switch(t){case"required":n=e.requiredErrorMessage,i="";break;case"min":n=e.minValueErrorMessage,i="widgets.input-widgets.min-value-error",a={value:e.minValue};break;case"max":n=e.maxValueErrorMessage,i="widgets.input-widgets.max-value-error",a={value:e.maxValue};break;case"invalidDate":n=e.invalidDateErrorMessage,i="widgets.input-widgets.invalid-date";break;default:return""}return this.getTranslatedErrorText(n,i,a)},t.prototype.getTranslatedErrorText=function(e,t,n){var i;return e&&e.length?i=this.utils.customTranslation(e,e):t&&t.length?(n||(n={}),i=this.translate.instant(t,n)):i="",i},t.prototype.visibleKeys=function(e){return e.keys.filter(function(e){return!e.settings.dataKeyHidden})},t.prototype.datePickerType=function(e){switch(e){case"dateTime":return"datetime";case"date":return"date";case"time":return"time"}},t.prototype.focusInputElement=function(e){e.target.select()},t.prototype.inputChanged=function(e,t){if(!this.settings.showActionButtons){var n=this.multipleInputFormGroup.get(t.formId).value;if(!t.settings.required||t.settings.required&&Object(T.n)(n)){var i={datasource:e.datasource,keys:[t]};this.save(i)}}},t.prototype.save=function(e){var t=this;document&&document.activeElement&&document.activeElement.blur();var n,i={ignoreLoading:!this.settings.showActionButtons};n=e?[e]:this.sources;var a=[];n.forEach(function(e){for(var n=[],r=[],o=[],s=0,l=e.keys;s<l.length;s++){var c=l[s],d=c.settings.dataKeyHidden?c.value:t.multipleInputFormGroup.get(c.formId).value;if(!Object(T.r)(d,c.value)||t.settings.updateAllValues){var u={key:c.name,value:null};if(d)switch(c.settings.dataKeyValueType){case"dateTime":case"date":u.value=d.getTime();break;case"time":u.value=d.getTime()-S().startOf("day").valueOf();break;default:u.value=d}else u.value=""===d?null:d;switch(c.settings.dataKeyType){case"shared":r.push(u);break;case"timeseries":o.push(u);break;default:n.push(u)}}}var p={entityType:e.datasource.entityType,id:e.datasource.entityId};n.length&&a.push(t.attributeService.saveEntityAttributes(p,ie.d.SERVER_SCOPE,n,i)),r.length&&a.push(t.attributeService.saveEntityAttributes(p,ie.d.SHARED_SCOPE,r,i)),o.length&&a.push(t.attributeService.saveEntityTimeseries(p,ie.r.LATEST_TELEMETRY,o,i))}),a.length?Object(re.a)(a).subscribe(function(){t.multipleInputFormGroup.markAsPristine(),t.ctx.detectChanges(),t.settings.showResultMessage&&t.ctx.showSuccessToast(t.translate.instant("widgets.input-widgets.update-successful"),1e3,"bottom","left",t.toastTargetId)},function(){t.settings.showResultMessage&&t.ctx.showErrorToast(t.translate.instant("widgets.input-widgets.update-failed"),"bottom","left",t.toastTargetId)}):(this.multipleInputFormGroup.markAsPristine(),this.ctx.detectChanges())},t.prototype.discardAll=function(){var e=this;this.multipleInputFormGroup.reset(void 0,{emitEvent:!1}),this.sources.forEach(function(t){for(var n=0,i=e.visibleKeys(t);n<i.length;n++){var a=i[n];e.multipleInputFormGroup.get(a.formId).patchValue(a.value,{emitEvent:!1})}}),this.multipleInputFormGroup.markAsPristine()},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](F.Store),i["\u0275\u0275directiveInject"](i.ElementRef),i["\u0275\u0275directiveInject"](i.NgZone),i["\u0275\u0275directiveInject"](E.Overlay),i["\u0275\u0275directiveInject"](i.ViewContainerRef),i["\u0275\u0275directiveInject"](C.a),i["\u0275\u0275directiveInject"](D.FormBuilder),i["\u0275\u0275directiveInject"](ne.a),i["\u0275\u0275directiveInject"](N.TranslateService))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-multiple-input-widget"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](pe,3),2&e){var n;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.formContainerRef=n.first)}},inputs:{ctx:"ctx"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:4,vars:4,consts:[["tb-toast","","novalidate","","autocomplete","off",1,"tb-multiple-input",3,"formGroup","toastTarget","ngSubmit"],["formContainer",""],["style","padding: 0 8px;",4,"ngIf"],["class","tb-multiple-input__errors","fxLayout","column","fxLayoutAlign","center center","style","height: 100%;",4,"ngIf"],[2,"padding","0 8px"],[3,"ngClass",4,"ngFor","ngForOf"],["class","mat-padding","fxLayout","row","fxLayoutAlign","end center",4,"ngIf"],[3,"ngClass"],["class","group-title",4,"ngIf"],["fxLayout","row",1,"layout-wrap",3,"ngClass"],[3,"ngStyle",4,"ngFor","ngForOf"],[1,"group-title"],[3,"ngStyle"],["class","input-field",4,"ngIf"],["class","input-field mat-block",4,"ngIf"],["class","input-field mat-block date-time-input","fxLayout","column",4,"ngIf"],[1,"input-field"],[1,"mat-block"],["matInput","","type","text",3,"formControlName","required","readonly","focus","blur"],["matPrefix","",4,"ngIf"],[4,"ngIf"],["matPrefix",""],["matInput","","type","number",3,"formControlName","required","readonly","step","min","max","focus","blur"],[1,"input-field","mat-block"],[3,"formControlName","change"],[1,"label-wrapper"],["fxLayout","column",1,"input-field","mat-block","date-time-input"],["matPrefix","",3,"for"],["openOnFocus","true",3,"type"],["datePicker",""],["matInput","",3,"formControlName","required","readonly","matDatetimepicker","focus","blur","dateChange"],["fxLayout","row","fxLayoutAlign","end center",1,"mat-padding"],["mat-button","","color","accent","type","button",2,"max-height","50px","margin-right","20px",3,"disabled","click"],["mat-button","","mat-raised-button","","color","accent","type","submit",2,"max-height","50px","margin-right","20px",3,"disabled"],["fxLayout","column","fxLayoutAlign","center center",1,"tb-multiple-input__errors",2,"height","100%"],[2,"text-align","center","font-size","18px","color","#a0a0a0",3,"fxHide"],[2,"text-align","center","font-size","18px","color","#a0a0a0",3,"fxShow"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"form",0,1),i["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),i["\u0275\u0275template"](2,De,3,2,"div",2),i["\u0275\u0275template"](3,ke,7,8,"div",3),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275propertyInterpolate"]("toastTarget",t.toastTargetId),i["\u0275\u0275property"]("formGroup",t.multipleInputFormGroup),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.entityDetected&&t.isAllParametersValid),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.entityDetected||!t.isAllParametersValid))},directives:[D["\u0275angular_packages_forms_forms_ba"],D.NgControlStatusGroup,le.b,D.FormGroupDirective,a.NgIf,a.NgForOf,a.NgClass,B.b,j.f,a.NgStyle,B.e,M.MatFormField,M.MatLabel,U.MatInput,D.DefaultValueAccessor,D.NgControlStatus,D.FormControlName,D.RequiredValidator,L.MatIcon,M.MatPrefix,M.MatError,D.NumberValueAccessor,ce.MatCheckbox,de.MatSlideToggle,M.MatPlaceholder,ue.d,ue.a,ue.b,j.e,_.MatButton,B.d],pipes:[N.TranslatePipe],styles:["[_nghost-%COMP%]   .tb-multiple-input[_ngcontent-%COMP%]{height:100%;overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]   .tb-multiple-input[_ngcontent-%COMP%]   .fields-group[_ngcontent-%COMP%]{padding:0 8px;margin:10px 0;border:1px groove rgba(0,0,0,.25)}[_nghost-%COMP%]   .tb-multiple-input[_ngcontent-%COMP%]   .fields-group[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{color:rgba(0,0,0,.7)}[_nghost-%COMP%]   .tb-multiple-input[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{padding-right:10px}[_nghost-%COMP%]   .tb-multiple-input[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-bottom:5px}[_nghost-%COMP%]   .tb-multiple-input[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-multiple-input[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{display:block;margin-top:20px;margin-bottom:16px}[_nghost-%COMP%]   .tb-multiple-input[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   .label-wrapper[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-multiple-input[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]   .label-wrapper[_ngcontent-%COMP%]{white-space:normal}[_nghost-%COMP%]   .tb-multiple-input[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{height:auto}[_nghost-%COMP%]   .tb-multiple-input[_ngcontent-%COMP%]   .date-time-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;margin:2px 0}[_nghost-%COMP%]   .tb-multiple-input[_ngcontent-%COMP%]   .vertical-alignment[_ngcontent-%COMP%]{flex-direction:column}"]}),t}(v.a);0,void 0;var Le=n("oTDE"),je=n("wtyh"),Ne=n("jhN1"),Re=n("8m5z"),Ue=["videoStream"],Ve=["canvas"];function Qe(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",23),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).takePhoto()}),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"widgets.input-widgets.take-photo")," "))}function Ge(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",3),i["\u0275\u0275elementStart"](1,"div",4),i["\u0275\u0275elementStart"](2,"div",5),i["\u0275\u0275elementStart"](3,"span",6),i["\u0275\u0275text"](4,"widgets.input-widgets.no-image"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](5,"img",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,Qe,3,3,"button",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"div",9),i["\u0275\u0275elementStart"](8,"div",10),i["\u0275\u0275element"](9,"video",11,12),i["\u0275\u0275elementStart"](11,"div",13),i["\u0275\u0275element"](12,"div",14),i["\u0275\u0275elementStart"](13,"button",15),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().switchWebCamera()}),i["\u0275\u0275elementStart"](14,"mat-icon"),i["\u0275\u0275text"](15,"switch_camera"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"button",16),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().createPhoto()}),i["\u0275\u0275elementStart"](17,"mat-icon"),i["\u0275\u0275text"](18,"photo_camera"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](19,"button",17),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().closeCamera()}),i["\u0275\u0275elementStart"](20,"mat-icon"),i["\u0275\u0275text"](21,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](22,"div",14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](23,"div",10),i["\u0275\u0275element"](24,"img",18),i["\u0275\u0275element"](25,"canvas",19,20),i["\u0275\u0275elementStart"](27,"div",21),i["\u0275\u0275element"](28,"div",14),i["\u0275\u0275elementStart"](29,"button",22),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().cancelPhoto()}),i["\u0275\u0275elementStart"](30,"mat-icon"),i["\u0275\u0275text"](31,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](32,"button",22),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().savePhoto()}),i["\u0275\u0275elementStart"](33,"mat-icon"),i["\u0275\u0275text"](34,"check"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](35,"div",14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow",!a.isShowCamera),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("fxShow",!a.lastPhoto),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("fxShow",a.lastPhoto)("src",a.lastPhoto,i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!a.textMessage),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow",a.isShowCamera),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow",!a.isPreviewPhoto),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("disabled",a.singleDevice),i["\u0275\u0275advance"](10),i["\u0275\u0275property"]("fxShow",a.isPreviewPhoto),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("src",a.previewPhoto,i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("disabled",a.updatePhoto),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",a.updatePhoto)}}function He(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",24),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,n.textMessage)," ")}}var Ke,qe=function(e){function t(t,n,i,a,r,o,s,l){var c=e.call(this,n)||this;return c.window=t,c.store=n,c.elementRef=i,c.ngZone=a,c.overlay=r,c.utils=o,c.attributeService=s,c.sanitizer=l,c.videoInputsIndex=0,c.width=640,c.height=480,c.isEntityDetected=!1,c.dataKeyDetected=!1,c.isProtocolHttps=!1,c.isCameraSupport=!1,c.isDeviceDetect=!1,c.isShowCamera=!1,c.isPreviewPhoto=!1,c.isHavePermissionCamera=!0,c.isLoading=!1,c.singleDevice=!0,c.updatePhoto=!1,c}return Object(y.d)(t,e),Object.defineProperty(t.prototype,"videoElement",{get:function(){return this.videoStreamRef.nativeElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElement",{get:function(){return this.canvasRef.nativeElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoWidth",{get:function(){var e=this.getVideoAspectRatio();return Math.min(this.width,this.height*e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoHeight",{get:function(){var e=this.getVideoAspectRatio();return Math.min(this.height,this.width/e)},enumerable:!1,configurable:!0}),t.hasGetUserMedia=function(){return!(!window.navigator.mediaDevices||!window.navigator.mediaDevices.getUserMedia)},t.getAvailableVideoInputs=function(){return new Promise(function(e,t){navigator.mediaDevices.enumerateDevices().then(function(t){e(t.filter(function(e){return"videoinput"===e.kind}))}).catch(function(e){t(e.message||e)})})},t.prototype.ngOnInit=function(){this.ctx.$scope.photoCameraInputWidget=this,this.isLoading=!0,this.settings=this.ctx.settings,this.datasource=this.ctx.datasources[0],this.settings.widgetTitle&&this.settings.widgetTitle.length?this.ctx.widgetTitle=this.utils.customTranslation(this.settings.widgetTitle,this.settings.widgetTitle):this.ctx.widgetTitle=this.ctx.widgetConfig.title,this.width=this.settings.maxWidth?this.settings.maxWidth:640,this.height=this.settings.maxHeight?this.settings.maxWidth:480,this.datasource.type===ee.a.entity&&this.datasource.entityType&&this.datasource.entityId&&(this.isEntityDetected=!0),this.datasource.dataKeys.length&&(this.dataKeyDetected=!0),this.detectAvailableDevices()},t.prototype.ngOnDestroy=function(){this.stopMediaTracks()},t.prototype.updateWidgetData=function(e){var t=e[0].data;(null==t?void 0:t.length)&&Object(T.A)(t[0][1])&&t[0][1].startsWith("data:image/")&&(this.lastPhoto=this.sanitizer.bypassSecurityTrustUrl(t[0][1]))},t.prototype.onDataUpdated=function(){this.updateWidgetData(this.ctx.defaultSubscription.data),this.ctx.detectChanges()},t.prototype.detectAvailableDevices=function(){var e=this;"https:"===this.window.location.protocol||"localhost"===this.window.location.hostname?(this.isProtocolHttps=!0,t.hasGetUserMedia()?(this.isCameraSupport=!0,t.getAvailableVideoInputs().then(function(t){e.isLoading=!1,e.isDeviceDetect=!!t.length,e.singleDevice=t.length<2,e.availableVideoInputs=t,e.ctx.detectChanges()},function(){e.isLoading=!1,e.availableVideoInputs=[]})):this.isLoading=!1):this.isLoading=!1},t.prototype.getVideoAspectRatio=function(){return this.videoElement.videoWidth&&this.videoElement.videoWidth>0&&this.videoElement.videoHeight&&this.videoElement.videoHeight>0?this.videoElement.videoWidth/this.videoElement.videoHeight:this.width/this.height},t.prototype.stopMediaTracks=function(){this.mediaStream&&this.mediaStream.getTracks&&this.mediaStream.getTracks().forEach(function(e){return e.stop()})},t.prototype.takePhoto=function(){this.inititedVideoStream(this.availableVideoInputs[this.videoInputsIndex].deviceId,!0)},t.prototype.closeCamera=function(){this.stopMediaTracks(),this.videoElement.srcObject=null,this.isShowCamera=!1},t.prototype.cancelPhoto=function(){this.isPreviewPhoto=!1,this.previewPhoto=""},t.prototype.savePhoto=function(){var e,t=this;this.updatePhoto=!0;var n={entityType:this.datasource.entityType,id:this.datasource.entityId},i=[{key:this.datasource.dataKeys[0].name,value:this.previewPhoto}];this.datasource.dataKeys[0].type===ie.h.attribute?e=this.attributeService.saveEntityAttributes(n,ie.d.SERVER_SCOPE,i):this.datasource.dataKeys[0].type===ie.h.timeseries&&(e=this.attributeService.saveEntityTimeseries(n,"scope",i)),e.subscribe(function(){t.isPreviewPhoto=!1,t.updatePhoto=!1,t.closeCamera()},function(){t.updatePhoto=!1})},t.prototype.switchWebCamera=function(){this.videoInputsIndex=(this.videoInputsIndex+1)%this.availableVideoInputs.length,this.stopMediaTracks(),this.inititedVideoStream(this.availableVideoInputs[this.videoInputsIndex].deviceId)},t.prototype.createPhoto=function(){this.canvasElement.width=this.videoWidth,this.canvasElement.height=this.videoHeight,this.canvasElement.getContext("2d").drawImage(this.videoElement,0,0,this.videoWidth,this.videoHeight);var e=this.settings.imageFormat?this.settings.imageFormat:t.DEFAULT_IMAGE_TYPE,n=this.settings.imageQuality?this.settings.imageQuality:t.DEFAULT_IMAGE_QUALITY;this.previewPhoto=this.canvasElement.toDataURL(e,n),this.isPreviewPhoto=!0},t.prototype.inititedVideoStream=function(e,n){var i=this;if(void 0===n&&(n=!1),window.navigator.mediaDevices&&window.navigator.mediaDevices.getUserMedia){var a={video:{deviceId:""!==e?{exact:e}:void 0}};window.navigator.mediaDevices.getUserMedia(a).then(function(e){n&&(i.isShowCamera=!0,i.availableVideoInputs.find(function(e){return""===e.deviceId})&&t.getAvailableVideoInputs().then(function(e){i.singleDevice=e.length<2,i.availableVideoInputs=e,i.ctx.detectChanges()})),i.mediaStream=e,i.videoElement.srcObject=e,i.ctx.detectChanges()},function(){i.isHavePermissionCamera=!1})}},Object.defineProperty(t.prototype,"textMessage",{get:function(){return this.isLoading?"":this.isProtocolHttps?this.isCameraSupport?this.isEntityDetected?this.dataKeyDetected?this.isDeviceDetect?this.isHavePermissionCamera?null:"widgets.input-widgets.no-permission-camera":"widgets.input-widgets.no-found-your-camera":"widgets.input-widgets.no-datakey-selected":"widgets.input-widgets.no-entity-selected":"widgets.input-widgets.no-support-web-camera":"widgets.input-widgets.enable-https-use-widget"},enumerable:!1,configurable:!0}),t.DEFAULT_IMAGE_TYPE="image/jpeg",t.DEFAULT_IMAGE_QUALITY=.92,t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](je.b),i["\u0275\u0275directiveInject"](F.Store),i["\u0275\u0275directiveInject"](i.ElementRef),i["\u0275\u0275directiveInject"](i.NgZone),i["\u0275\u0275directiveInject"](E.Overlay),i["\u0275\u0275directiveInject"](C.a),i["\u0275\u0275directiveInject"](ne.a),i["\u0275\u0275directiveInject"](Ne.DomSanitizer))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-photo-camera-widget"]],viewQuery:function(e,t){if(1&e&&(i["\u0275\u0275viewQuery"](Ue,1),i["\u0275\u0275viewQuery"](Ve,1)),2&e){var n=void 0;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.videoStreamRef=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.canvasRef=n.first)}},inputs:{ctx:"ctx"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:3,consts:[["fxLayout","column","fxLayoutAlign","center center","tb-fullscreen","",1,"tb-web-camera",3,"fullscreen"],["class","image-container",4,"ngIf"],["class","message-text",4,"ngIf"],[1,"image-container"],["fxLayout","column","fxLayoutAlign","space-between center","fxFlexFill","",3,"fxShow"],["fxFlex","",1,"tb-web-camera__last-photo"],["translate","",1,"tb-web-camera__last-photo_text",3,"fxShow"],["alt","last photo",1,"tb-web-camera__last-photo_img",3,"fxShow","src"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"camera-container",3,"fxShow"],[1,"camera",3,"fxShow"],["autoplay","","muted","","playsinline","",1,"camera-stream"],["videoStream",""],["fxLayout","row wrap","fxLayoutAlign","space-between end",1,"camera-controls"],["fxFlex",""],["mat-mini-fab","","color","accent",3,"disabled","click"],["mat-fab","","color","accent",3,"click"],["mat-mini-fab","","color","accent",3,"click"],["alt","preview photo",1,"camera-stream",3,"src"],[2,"display","none"],["canvas",""],["fxLayout","row","fxLayoutAlign","space-between end",1,"camera-controls"],["mat-fab","","color","accent",3,"disabled","click"],["mat-raised-button","","color","accent",3,"click"],[1,"message-text"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,Ge,36,12,"div",1),i["\u0275\u0275template"](2,He,3,3,"div",2),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("fullscreen",t.isShowCamera),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.isEntityDetected&&t.dataKeyDetected&&t.isCameraSupport&&t.isProtocolHttps),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.textMessage))},directives:[j.f,j.e,Re.a,a.NgIf,j.k,B.d,j.b,N.TranslateDirective,_.MatButton,L.MatIcon],pipes:[N.TranslatePipe],styles:[".tb-web-camera{height:100%}.tb-web-camera__last-photo{width:100%;min-height:0;margin:5px 0;text-align:center;border:1px solid}.tb-web-camera__last-photo_text{position:absolute;top:50%;left:50%;margin-top:-.625em;transform:translate(-50%,-50%)}.tb-web-camera__last-photo_img{width:100%;height:100%;-o-object-fit:contain;object-fit:contain}.tb-web-camera .camera-container{height:100%}.tb-web-camera .camera{position:relative;width:100%;height:100%;overflow:hidden}.tb-web-camera .camera .camera-stream{display:block;width:100%;height:100%;-o-object-fit:contain;object-fit:contain}.tb-web-camera .camera .camera-controls{position:absolute;bottom:0;width:100%;padding:0 5px 5px}.tb-web-camera .camera .camera-controls .mat-button-base{margin:6px 8px}.tb-web-camera .message-text{font-size:18px;color:#a0a0a0;text-align:center}.tb-web-camera .image-container{height:100%;min-height:0;width:100%;min-width:100%}"],encapsulation:2}),t}(v.a);0,void 0,function(e){e.tls="tls",e.accessToken="accessToken"}(Ke||(Ke={}));var ze,We,Xe=new Map([[Ke.tls,"gateway.security-types.tls"],[Ke.accessToken,"gateway.security-types.access-token"]]);!function(e){e.none="NONE",e.critical="CRITICAL",e.error="ERROR",e.warning="WARNING",e.info="INFO",e.debug="DEBUG"}(ze||(ze={})),function(e){e.memory="memory",e.file="file"}(We||(We={}));var $e,Je=new Map([[We.memory,"gateway.storage-types.memory-storage"],[We.file,"gateway.storage-types.file-storage"]]);!function(e){e.mqtt="MQTT",e.modbus="Modbus",e.opcua="OPC-UA",e.ble="BLE",e.request="Request",e.can="CAN",e.bacnet="BACnet",e.custom="Custom"}($e||($e={}));var Ye={config:{},name:"",configType:null,enabled:!1};function Ze(e){return JSON.stringify(e.value)===JSON.stringify({})?{validJSON:!0}:null}function et(e){return e.replace("_","").replace("-","").replace(/^\s+|\s+/g,"").toLowerCase()+".json"}function tt(e,t){return'[loggers]}}keys=root, service, connector, converter, tb_connection, storage, extension}}[handlers]}}keys=consoleHandler, serviceHandler, connectorHandler, converterHandler, tb_connectionHandler, storageHandler, extensionHandler}}[formatters]}}keys=LogFormatter}}[logger_root]}}level=ERROR}}handlers=consoleHandler}}[logger_connector]}}level={ERROR}}}handlers=connectorHandler}}formatter=LogFormatter}}qualname=connector}}[logger_storage]}}level={ERROR}}}handlers=storageHandler}}formatter=LogFormatter}}qualname=storage}}[logger_tb_connection]}}level={ERROR}}}handlers=tb_connectionHandler}}formatter=LogFormatter}}qualname=tb_connection}}[logger_service]}}level={ERROR}}}handlers=serviceHandler}}formatter=LogFormatter}}qualname=service}}[logger_converter]}}level={ERROR}}}handlers=converterHandler}}formatter=LogFormatter}}qualname=converter}}[logger_extension]}}level={ERROR}}}handlers=connectorHandler}}formatter=LogFormatter}}qualname=extension}}[handler_consoleHandler]}}class=StreamHandler}}level={ERROR}}}formatter=LogFormatter}}args=(sys.stdout,)}}[handler_connectorHandler]}}level={ERROR}}}class=logging.handlers.TimedRotatingFileHandler}}formatter=LogFormatter}}args=("{./logs/}connector.log", "d", 1, 7,)}}[handler_storageHandler]}}level={ERROR}}}class=logging.handlers.TimedRotatingFileHandler}}formatter=LogFormatter}}args=("{./logs/}storage.log", "d", 1, 7,)}}[handler_serviceHandler]}}level={ERROR}}}class=logging.handlers.TimedRotatingFileHandler}}formatter=LogFormatter}}args=("{./logs/}service.log", "d", 1, 7,)}}[handler_converterHandler]}}level={ERROR}}}class=logging.handlers.TimedRotatingFileHandler}}formatter=LogFormatter}}args=("{./logs/}converter.log", "d", 1, 3,)}}[handler_extensionHandler]}}level={ERROR}}}class=logging.handlers.TimedRotatingFileHandler}}formatter=LogFormatter}}args=("{./logs/}extension.log", "d", 1, 3,)}}[handler_tb_connectionHandler]}}level={ERROR}}}class=logging.handlers.TimedRotatingFileHandler}}formatter=LogFormatter}}args=("{./logs/}tb_connection.log", "d", 1, 3,)}}[formatter_LogFormatter]}}format="%(asctime)s - %(levelname)s - [%(filename)s] - %(module)s - %(lineno)d - %(message)s" }}datefmt="%Y-%m-%d %H:%M:%S"'.replace(/{ERROR}/g,e).replace(/{.\/logs\/}/g,t)}function nt(e){return{id:e,entityType:te.b.DEVICE}}function it(e){var t={};return Object.prototype.hasOwnProperty.call(e,"thingsboard")&&(t.host=e.thingsboard.host,t.port=e.thingsboard.port,t.remoteConfiguration=e.thingsboard.remoteConfiguration,Object.prototype.hasOwnProperty.call(e.thingsboard.security,Ke.accessToken)?(t.securityType=Ke.accessToken,t.accessToken=e.thingsboard.security.accessToken):(t.securityType=Ke.tls,t.caCertPath=e.thingsboard.security.caCert,t.privateKeyPath=e.thingsboard.security.privateKey,t.certPath=e.thingsboard.security.cert)),Object.prototype.hasOwnProperty.call(e,"storage")&&Object.prototype.hasOwnProperty.call(e.storage,"type")&&(e.storage.type===We.memory?(t.storageType=We.memory,t.readRecordsCount=e.storage.read_records_count,t.maxRecordsCount=e.storage.max_records_count):e.storage.type===We.file&&(t.storageType=We.file,t.dataFolderPath=e.storage.data_folder_path,t.maxFilesCount=e.storage.max_file_count,t.readRecordsCount=e.storage.read_records_count,t.maxRecordsCount=e.storage.max_records_count)),t}function at(e){for(var t={},n=0,i=e;n<i.length;n++){var a=i[n];a.enabled||(t[a.name]={connector:a.configType,config:a.config})}return t}function rt(e){var t={thingsboard:ot(e)};return!function(e,t){for(var n=0,i=t;n<i.length;n++){var a=i[n];if(a.enabled){var r=a.configType;Array.isArray(e[r])||(e[r]=[]);var o={name:a.name,config:a.config};e[r].push(o)}}}(t,e.connectors),t}function ot(e){var t;t=e.securityType===Ke.accessToken?{accessToken:e.accessToken}:{caCert:e.caCertPath,privateKey:e.privateKeyPath,cert:e.certPath};var n,i={host:e.host,remoteConfiguration:e.remoteConfiguration,port:e.port,security:t};n=e.storageType===We.memory?{type:We.memory,read_records_count:e.readRecordsCount,max_records_count:e.maxRecordsCount}:{type:We.file,data_folder_path:e.dataFolderPath,max_file_count:e.maxFilesCount,max_read_records_count:e.readRecordsCount,max_records_per_file:e.maxRecordsCount};for(var a=[],r=0,o=e.connectors;r<o.length;r++){var s=o[r];if(s.enabled){var l={configuration:et(s.name),name:s.name,type:s.configType};a.push(l)}}return{thingsboard:i,connectors:a,storage:n,logs:window.btoa(tt(e.remoteLoggingLevel,e.remoteLoggingPathToLogs))}}var st=n("HeHW"),lt=n("DaoB"),ct=n("vkgz"),dt=n("9HAa"),ut=n("0IaG"),pt=n("7EHt"),mt=n("4Th+"),ft=n("Qu3c"),ht=["formContainer"],gt=["gatewayConfigurationForm"];function At(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",28),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275property"]("value",n.key),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,n.value.toString())," ")}}function bt(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.thingsboard-host-required "),i["\u0275\u0275elementEnd"]())}function yt(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.thingsboard-port-required "),i["\u0275\u0275elementEnd"]())}function vt(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.thingsboard-port-min "),i["\u0275\u0275elementEnd"]())}function Ct(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.thingsboard-port-max "),i["\u0275\u0275elementEnd"]())}function xt(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.thingsboard-port-pattern "),i["\u0275\u0275elementEnd"]())}function wt(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",5),i["\u0275\u0275elementStart"](1,"mat-form-field",6),i["\u0275\u0275elementStart"](2,"mat-label"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](5,"input",30),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"mat-form-field",6),i["\u0275\u0275elementStart"](7,"mat-label"),i["\u0275\u0275text"](8),i["\u0275\u0275pipe"](9,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](10,"input",31),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"mat-form-field",6),i["\u0275\u0275elementStart"](12,"mat-label"),i["\u0275\u0275text"](13),i["\u0275\u0275pipe"](14,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](15,"input",32),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,3,"gateway.tls-path-ca-certificate")),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](9,5,"gateway.tls-path-private-key")),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](14,7,"gateway.tls-path-client-certificate")))}function St(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",28),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n," ")}}function Et(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.path-logs-required "),i["\u0275\u0275elementEnd"]())}function It(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",28),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275property"]("value",n.key),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,n.value.toString())," ")}}function Ot(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.storage-pack-size-required "),i["\u0275\u0275elementEnd"]())}function Tt(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.storage-pack-size-min "),i["\u0275\u0275elementEnd"]())}function Ft(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.storage-pack-size-pattern "),i["\u0275\u0275elementEnd"]())}function Bt(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.storage-max-records-required "),i["\u0275\u0275elementEnd"]())}function Mt(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.storage-max-records-min "),i["\u0275\u0275elementEnd"]())}function Pt(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.storage-max-records-pattern "),i["\u0275\u0275elementEnd"]())}function Dt(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.storage-max-files-required "),i["\u0275\u0275elementEnd"]())}function kt(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.storage-max-files-min "),i["\u0275\u0275elementEnd"]())}function _t(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.storage-max-files-pattern "),i["\u0275\u0275elementEnd"]())}function Lt(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.storage-path-required "),i["\u0275\u0275elementEnd"]())}function jt(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",9),i["\u0275\u0275elementStart"](1,"mat-form-field",6),i["\u0275\u0275elementStart"](2,"mat-label"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](5,"input",33),i["\u0275\u0275template"](6,Dt,2,0,"mat-error",11),i["\u0275\u0275template"](7,kt,2,0,"mat-error",11),i["\u0275\u0275template"](8,_t,2,0,"mat-error",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"mat-form-field",6),i["\u0275\u0275elementStart"](10,"mat-label"),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](13,"input",34),i["\u0275\u0275template"](14,Lt,2,0,"mat-error",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("fxLayout",n.alignment)("fxLayoutGap",n.layoutGap),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,8,"gateway.storage-max-files")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",n.gatewayConfigurationGroup.get("maxFilesCount").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.gatewayConfigurationGroup.get("maxFilesCount").hasError("min")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.gatewayConfigurationGroup.get("maxFilesCount").hasError("pattern")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](12,10,"gateway.storage-path")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",n.gatewayConfigurationGroup.get("dataFolderPath").hasError("required"))}}function Nt(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",28),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n," ")}}function Rt(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.connector-type-required "),i["\u0275\u0275elementEnd"]())}function Ut(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.connector-name-required "),i["\u0275\u0275elementEnd"]())}var Vt=function(e){return{"mat-warn":e}};function Qt(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"section",35),i["\u0275\u0275elementStart"](1,"div",36),i["\u0275\u0275elementStart"](2,"div",37),i["\u0275\u0275element"](3,"mat-slide-toggle",38),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",39),i["\u0275\u0275elementStart"](5,"mat-form-field",6),i["\u0275\u0275elementStart"](6,"mat-label"),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"mat-select",40),i["\u0275\u0275listener"]("selectionChange",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"]().changeConnectorType(e)}),i["\u0275\u0275template"](10,Nt,2,2,"mat-option",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](11,Rt,2,0,"mat-error",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"mat-form-field",6),i["\u0275\u0275elementStart"](13,"mat-label"),i["\u0275\u0275text"](14),i["\u0275\u0275pipe"](15,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"input",41),i["\u0275\u0275listener"]("blur",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit,a=t.index;return i["\u0275\u0275nextContext"]().changeConnectorName(e,a)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](17,Ut,2,0,"mat-error",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](18,"div",42),i["\u0275\u0275elementStart"](19,"button",43),i["\u0275\u0275listener"]("click",function(e){i["\u0275\u0275restoreView"](n);var a=t.index,r=t.$implicit;return i["\u0275\u0275nextContext"]().openConfigDialog(e,a,r.get("config").value,r.get("name").value)}),i["\u0275\u0275pipe"](20,"translate"),i["\u0275\u0275elementStart"](21,"mat-icon"),i["\u0275\u0275text"](22,"more_horiz"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](23,"button",44),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.index;return i["\u0275\u0275nextContext"]().removeConnector(e)}),i["\u0275\u0275pipe"](24,"translate"),i["\u0275\u0275elementStart"](25,"mat-icon"),i["\u0275\u0275text"](26,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,r=t.index,o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("formGroupName",r),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("fxLayout",o.alignment)("fxLayoutGap",o.layoutGap),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](8,16,"gateway.connector-type")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",o.connectorTypes),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.get("configType").hasError("required")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](15,18,"gateway.connector-name")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",a.get("name").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("fxLayoutAlign","row"==o.alignment?"end center":"space-evenly center"),i["\u0275\u0275property"]("fxLayout",o.alignment)("fxLayoutGap",o.layoutGap),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](20,20,"gateway.update-config")),i["\u0275\u0275property"]("disabled",o.isReadOnlyForm)("ngClass",i["\u0275\u0275pureFunction1"](24,Vt,a.get("config").invalid)),i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](24,22,"gateway.delete")),i["\u0275\u0275property"]("disabled",o.isReadOnlyForm)}}function Gt(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",45),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().exportConfig()}),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"]()}if(2&e){var a=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](1,3,"gateway.download-tip")),i["\u0275\u0275property"]("disabled",!a.gatewayConfigurationGroup.dirty||a.gatewayConfigurationGroup.invalid),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](3,5,"action.download")," ")}}function Ht(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"button",46),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](1,3,"gateway.save-tip")),i["\u0275\u0275property"]("disabled",!n.gatewayConfigurationGroup.dirty||n.gatewayConfigurationGroup.invalid),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](3,5,"action.save")," ")}}var Kt=function(e){function t(t,n,i,a,r,o,s,l,c,d,u){var p=e.call(this,t)||this;return p.store=t,p.elementRef=n,p.utils=i,p.ngZone=a,p.fb=r,p.window=o,p.dialog=s,p.translate=l,p.deviceService=c,p.attributeService=d,p.importExport=u,p.alignment="row",p.layoutGap="5px",p.securityTypes=Xe,p.gatewayLogLevels=Object.keys(ze).map(function(e){return ze[e]}),p.connectorTypes=Object.keys($e),p.storageTypes=Je,p.toastTargetId="gateway-configuration-widget"+p.utils.guid(),p.isReadOnlyForm=!1,p}return Object(y.d)(t,e),Object.defineProperty(t.prototype,"connectors",{get:function(){return this.gatewayConfigurationGroup.get("connectors")},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){var e=this;this.initWidgetSettings(this.ctx.settings),this.ctx.datasources&&this.ctx.datasources.length&&(this.deviceNameForm=this.ctx.datasources[0].name),this.buildForm(),this.ctx.updateWidgetParams(),this.formResize$=new oe.a(function(){e.resize()}),this.formResize$.observe(this.formContainerRef.nativeElement)},t.prototype.ngOnDestroy=function(){this.formResize$&&this.formResize$.disconnect(),this.subscribeGateway$.unsubscribe(),this.subscribeStorageType$.unsubscribe()},t.prototype.initWidgetSettings=function(e){var t,n,i;i=e.gatewayTitle&&e.gatewayTitle.length?this.utils.customTranslation(e.gatewayTitle,e.gatewayTitle):this.translate.instant("gateway.gateway"),this.ctx.widgetTitle=i,this.isReadOnlyForm=!!e.readOnly&&e.readOnly,this.archiveFileName=(null===(t=e.archiveFileName)||void 0===t?void 0:t.length)?e.archiveFileName:"gatewayConfiguration",this.gatewayType=(null===(n=e.gatewayType)||void 0===n?void 0:n.length)?e.gatewayType:"Gateway",this.gatewayNameExists=this.utils.customTranslation(e.gatewayNameExists,e.gatewayNameExists)||this.translate.instant("gateway.gateway-exists"),this.successfulSaved=this.utils.customTranslation(e.successfulSave,e.successfulSave)||this.translate.instant("gateway.gateway-saved"),this.updateWidgetDisplaying()},t.prototype.resize=function(){var e=this;this.ngZone.run(function(){e.updateWidgetDisplaying(),e.ctx.detectChanges()})},t.prototype.updateWidgetDisplaying=function(){this.ctx.$container&&this.ctx.$container[0].offsetWidth<=425?(this.layoutGap="0",this.alignment="column"):(this.layoutGap="5px",this.alignment="row")},t.prototype.saveAttribute=function(e,t,n){var i=this.gatewayConfigurationGroup.get("gateway").value,a={key:e,value:t};return this.attributeService.saveEntityAttributes(nt(i),n,[a])},t.prototype.createConnector=function(e){void 0===e&&(e=Ye),this.connectors.push(this.fb.group({enabled:[e.enabled],configType:[e.configType,[D.Validators.required]],name:[e.name,[D.Validators.required]],config:[e.config,[D.Validators.nullValidator,Ze]]}))},t.prototype.getFormField=function(e){return this.gatewayConfigurationGroup.get(e)},t.prototype.buildForm=function(){var e=this;this.gatewayConfigurationGroup=this.fb.group({gateway:[null,[]],accessToken:[null,[D.Validators.required]],securityType:[Ke.accessToken],host:[this.window.location.hostname,[D.Validators.required]],port:[1883,[D.Validators.required,D.Validators.min(1),D.Validators.max(65535),D.Validators.pattern(/^-?[0-9]+$/)]],remoteConfiguration:[!0],caCertPath:["/etc/thingsboard-gateway/ca.pem"],privateKeyPath:["/etc/thingsboard-gateway/privateKey.pem"],certPath:["/etc/thingsboard-gateway/certificate.pem"],remoteLoggingLevel:[ze.debug],remoteLoggingPathToLogs:["./logs/",[D.Validators.required]],storageType:[We.memory],readRecordsCount:[100,[D.Validators.required,D.Validators.min(1),D.Validators.pattern(/^-?[0-9]+$/)]],maxRecordsCount:[1e4,[D.Validators.required,D.Validators.min(1),D.Validators.pattern(/^-?[0-9]+$/)]],maxFilesCount:[5,[D.Validators.required,D.Validators.min(1),D.Validators.pattern(/^-?[0-9]+$/)]],dataFolderPath:["./data/",[D.Validators.required]],connectors:this.fb.array([])}),this.isReadOnlyForm&&this.gatewayConfigurationGroup.disable({emitEvent:!1}),this.subscribeStorageType$=this.getFormField("storageType").valueChanges.subscribe(function(t){t===We.memory?(e.getFormField("maxFilesCount").disable(),e.getFormField("dataFolderPath").disable()):(e.getFormField("maxFilesCount").enable(),e.getFormField("dataFolderPath").enable())}),this.subscribeGateway$=this.getFormField("gateway").valueChanges.subscribe(function(t){null!==t?Object(re.a)(Object(y.h)([e.deviceService.getDeviceCredentials(t).pipe(Object(ct.a)(function(t){e.getFormField("accessToken").patchValue(t.credentialsId)}))],e.getAttributes(t))).subscribe(function(){e.gatewayConfigurationGroup.markAsPristine(),e.ctx.detectChanges()}):e.getFormField("accessToken").patchValue("")})},t.prototype.gatewayExist=function(){this.ctx.showErrorToast(this.gatewayNameExists,"top","left",this.toastTargetId)},t.prototype.exportConfig=function(){var e,t,n,i=this.gatewayConfigurationGroup.value,a={};a["tb_gateway.yaml"]=function(e){var t;t="thingsboard:\n",t+="  host: "+e.host+"\n",t+="  remoteConfiguration: "+e.remoteConfiguration+"\n",t+="  port: "+e.port+"\n",t+="  security:\n",e.securityType===Ke.accessToken?t+="    access-token: "+e.accessToken+"\n":(t+="    ca_cert: "+e.caCertPath+"\n",t+="    privateKey: "+e.privateKeyPath+"\n",t+="    cert: "+e.certPath+"\n"),t+="storage:\n",e.storageType===We.memory?(t+="  type: memory\n",t+="  read_records_count: "+e.readRecordsCount+"\n",t+="  max_records_count: "+e.maxRecordsCount+"\n"):(t+="  type: file\n",t+="  data_folder_path: "+e.dataFolderPath+"\n",t+="  max_file_count: "+e.maxFilesCount+"\n",t+="  max_read_records_count: "+e.readRecordsCount+"\n",t+="  max_records_per_file: "+e.maxRecordsCount+"\n"),t+="connectors:\n";for(var n=0,i=e.connectors;n<i.length;n++){var a=i[n];a.enabled&&(t+="  -\n",t+="    name: "+a.name+"\n",t+="    type: "+a.configType+"\n",t+="    configuration: "+et(a.name)+"\n")}return t}(i),function(e,t){for(var n=0,i=t;n<i.length;n++){var a=i[n];a.enabled&&(e[et(a.name)]=JSON.stringify(a.config))}}(a,i.connectors),e=a,t=i.remoteLoggingLevel,n=i.remoteLoggingPathToLogs,e["logs.conf"]=tt(t,n),this.importExport.exportJSZip(a,this.archiveFileName),this.saveAttribute("RemoteLoggingLevel",this.gatewayConfigurationGroup.value.remoteLoggingLevel.toUpperCase(),ie.d.SHARED_SCOPE)},t.prototype.addNewConnector=function(){this.createConnector()},t.prototype.removeConnector=function(e){e>-1&&(this.connectors.removeAt(e),this.connectors.markAsDirty())},t.prototype.openConfigDialog=function(e,t,n,i){var a=this;e&&(e.stopPropagation(),e.preventDefault()),this.dialog.open(st.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{jsonValue:n,title:this.translate.instant("gateway.title-connectors-json",{typeName:i})}}).afterClosed().subscribe(function(e){e&&(a.connectors.at(t).get("config").patchValue(e),a.ctx.detectChanges())})},t.prototype.createConnectorName=function(e,t,n){void 0===n&&(n=0);var i=n?t+n:t;return-1===e.findIndex(function(e){return e.name===i})?i:this.createConnectorName(e,t,++n)},t.prototype.validateConnectorName=function(e,t,n,i){void 0===i&&(i=0);for(var a=0;a<e.length;a++){var r=0===i?t:t+i;a!==n&&e[a].name===r&&this.validateConnectorName(e,t,n,++i)}return 0===i?t:t+i},t.prototype.changeConnectorType=function(e){if(!e.get("name").value){var t=e.get("configType").value,n=this.gatewayConfigurationGroup.value.connectors;e.get("name").patchValue(this.createConnectorName(n,$e[t]))}},t.prototype.changeConnectorName=function(e,t){var n=this.gatewayConfigurationGroup.value.connectors;e.get("name").patchValue(this.validateConnectorName(n,e.get("name").value,t))},t.prototype.save=function(){var e=this,t=this.gatewayConfigurationGroup.value;Object(re.a)([this.saveAttribute("configuration",window.btoa(JSON.stringify(rt(t))),ie.d.SHARED_SCOPE),this.saveAttribute("configuration_drafts",window.btoa(JSON.stringify(at(t.connectors))),ie.d.SERVER_SCOPE),this.saveAttribute("RemoteLoggingLevel",this.gatewayConfigurationGroup.value.remoteLoggingLevel.toUpperCase(),ie.d.SHARED_SCOPE)]).subscribe(function(){e.ctx.showSuccessToast(e.successfulSaved,2e3,"top","left",e.toastTargetId),e.gatewayConfigurationGroup.markAsPristine()})},t.prototype.getAttributes=function(e){var t=this,n=[];return n.push(Object(re.a)([this.getAttribute("current_configuration",ie.d.CLIENT_SCOPE,e),this.getAttribute("configuration_drafts",ie.d.SERVER_SCOPE,e)]).pipe(Object(ct.a)(function(e){var n=e[0],i=e[1];t.setFormGatewaySettings(n),t.setFormConnectorsDraft(i),t.isReadOnlyForm&&t.gatewayConfigurationGroup.disable({emitEvent:!1})}))),n.push(this.getAttribute("RemoteLoggingLevel",ie.d.SHARED_SCOPE,e).pipe(Object(ct.a)(function(e){return t.processLoggingLevel(e)}))),n},t.prototype.getAttribute=function(e,t,n){return this.attributeService.getEntityAttributes(nt(n),t,[e])},t.prototype.setFormGatewaySettings=function(e){if(this.connectors.clear(),e.length>0)for(var t=JSON.parse(window.atob(e[0].value)),n=0,i=Object.keys(t);n<i.length;n++){var a=i[n],r=t[a];if("thingsboard"===a)null!==r&&Object.keys(r).length>0&&this.gatewayConfigurationGroup.patchValue(it(r));else for(var o=0,s=Object.keys(r);o<s.length;o++){var l=s[o],c="No name";Object.prototype.hasOwnProperty.call(r[l],"name")&&(c=r[l].name);var d={enabled:!0,configType:a,config:r[l].config,name:c};this.createConnector(d)}}},t.prototype.setFormConnectorsDraft=function(e){if(e.length>0)for(var t=JSON.parse(window.atob(e[0].value)),n=0,i=Object.keys(t);n<i.length;n++){var a=i[n],r={enabled:!1,configType:t[a].connector,config:t[a].config,name:a};this.createConnector(r)}},t.prototype.processLoggingLevel=function(e){var t=ze.debug;e.length>0&&ze[e[0].value.toLowerCase()]&&(t=ze[e[0].value.toLowerCase()]),this.getFormField("remoteLoggingLevel").patchValue(t)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](F.Store),i["\u0275\u0275directiveInject"](i.ElementRef),i["\u0275\u0275directiveInject"](C.a),i["\u0275\u0275directiveInject"](i.NgZone),i["\u0275\u0275directiveInject"](D.FormBuilder),i["\u0275\u0275directiveInject"](je.b),i["\u0275\u0275directiveInject"](ut.MatDialog),i["\u0275\u0275directiveInject"](N.TranslateService),i["\u0275\u0275directiveInject"](lt.a),i["\u0275\u0275directiveInject"](ne.a),i["\u0275\u0275directiveInject"](dt.a))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-gateway-form"]],viewQuery:function(e,t){if(1&e&&(i["\u0275\u0275viewQuery"](ht,3),i["\u0275\u0275viewQuery"](gt,3)),2&e){var n=void 0;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.formContainerRef=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.multipleInputForm=n.first)}},inputs:{ctx:"ctx",isStateForm:"isStateForm"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:105,vars:89,consts:[["tb-toast","",1,"gateway-form",3,"formGroup","toastTarget","ngSubmit"],["formContainer",""],["multi","true",1,"mat-body-1"],[1,"tb-panel-title"],["formControlName","gateway","required","",3,"deviceName","isStateForm","newGatewayType","gatewayNameExist"],["fxLayout","column"],["fxFlex",""],["formControlName","securityType"],[3,"value",4,"ngFor","ngForOf"],[3,"fxLayout","fxLayoutGap"],["matInput","","type","text","formControlName","host"],["translate","",4,"ngIf"],["matInput","","type","number","formControlName","port"],["fxLayout","column",4,"ngIf"],["formControlName","remoteConfiguration"],["formControlName","remoteLoggingLevel"],["matInput","","type","text","formControlName","remoteLoggingPathToLogs"],["formControlName","storageType"],["matInput","","type","number","formControlName","readRecordsCount"],["matInput","","type","number","formControlName","maxRecordsCount"],[3,"fxLayout","fxLayoutGap",4,"ngIf"],["fxLayout","column",1,"gateway-config"],["formArrayName","connectors",4,"ngFor","ngForOf"],["fxLayoutAlign","center center",1,"no-data-found",3,"fxShow"],["mat-raised-button","","type","button","matTooltipPosition","above",3,"fxShow","matTooltip","click"],["fxLayout","row","fxLayoutAlign","end center",1,"form-action-buttons",3,"fxShow"],["mat-raised-button","","color","accent","type","button",3,"disabled","matTooltip","click",4,"ngIf"],["mat-raised-button","","color","accent","type","submit",3,"disabled","matTooltip",4,"ngIf"],[3,"value"],["translate",""],["matInput","","type","text","formControlName","caCertPath"],["matInput","","type","text","formControlName","privateKeyPath"],["matInput","","type","text","formControlName","certPath"],["matInput","","type","number","formControlName","maxFilesCount"],["matInput","","type","text","formControlName","dataFolderPath"],["formArrayName","connectors"],["fxLayout","row","fxLayoutAlign","space-between stretch","fxLayoutGap","8px",3,"formGroupName"],["fxLayout","column","fxLayoutAlign","center start"],["formControlName","enabled"],["fxFlex","",3,"fxLayout","fxLayoutGap"],["formControlName","configType",3,"selectionChange"],["matInput","","type","text","formControlName","name",3,"blur"],[1,"action-buttons",3,"fxLayout","fxLayoutGap","fxLayoutAlign"],["mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","ngClass","click"],["mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click"],["mat-raised-button","","color","accent","type","button",3,"disabled","matTooltip","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled","matTooltip"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"form",0,1),i["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),i["\u0275\u0275elementStart"](2,"mat-accordion",2),i["\u0275\u0275elementStart"](3,"mat-expansion-panel"),i["\u0275\u0275elementStart"](4,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](5,"mat-panel-title"),i["\u0275\u0275elementStart"](6,"div",3),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"uppercase"),i["\u0275\u0275pipe"](9,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"tb-entity-gateway-select",4),i["\u0275\u0275listener"]("gatewayNameExist",function(){return t.gatewayExist()}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"div",5),i["\u0275\u0275elementStart"](12,"mat-form-field",6),i["\u0275\u0275elementStart"](13,"mat-label"),i["\u0275\u0275text"](14),i["\u0275\u0275pipe"](15,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"mat-select",7),i["\u0275\u0275template"](17,At,3,4,"mat-option",8),i["\u0275\u0275pipe"](18,"keyvalue"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](19,"div",9),i["\u0275\u0275elementStart"](20,"mat-form-field",6),i["\u0275\u0275elementStart"](21,"mat-label"),i["\u0275\u0275text"](22),i["\u0275\u0275pipe"](23,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](24,"input",10),i["\u0275\u0275template"](25,bt,2,0,"mat-error",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](26,"mat-form-field",6),i["\u0275\u0275elementStart"](27,"mat-label"),i["\u0275\u0275text"](28),i["\u0275\u0275pipe"](29,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](30,"input",12),i["\u0275\u0275template"](31,yt,2,0,"mat-error",11),i["\u0275\u0275template"](32,vt,2,0,"mat-error",11),i["\u0275\u0275template"](33,Ct,2,0,"mat-error",11),i["\u0275\u0275template"](34,xt,2,0,"mat-error",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](35,wt,16,9,"div",13),i["\u0275\u0275elementStart"](36,"mat-checkbox",14),i["\u0275\u0275text"](37),i["\u0275\u0275pipe"](38,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](39,"div",9),i["\u0275\u0275elementStart"](40,"mat-form-field",6),i["\u0275\u0275elementStart"](41,"mat-label"),i["\u0275\u0275text"](42),i["\u0275\u0275pipe"](43,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](44,"mat-select",15),i["\u0275\u0275template"](45,St,2,2,"mat-option",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](46,"mat-form-field",6),i["\u0275\u0275elementStart"](47,"mat-label"),i["\u0275\u0275text"](48),i["\u0275\u0275pipe"](49,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](50,"input",16),i["\u0275\u0275template"](51,Et,2,0,"mat-error",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](52,"mat-expansion-panel"),i["\u0275\u0275elementStart"](53,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](54,"mat-panel-title"),i["\u0275\u0275elementStart"](55,"div",3),i["\u0275\u0275text"](56),i["\u0275\u0275pipe"](57,"uppercase"),i["\u0275\u0275pipe"](58,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](59,"div",5),i["\u0275\u0275elementStart"](60,"mat-form-field",6),i["\u0275\u0275elementStart"](61,"mat-label"),i["\u0275\u0275text"](62),i["\u0275\u0275pipe"](63,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](64,"mat-select",17),i["\u0275\u0275template"](65,It,3,4,"mat-option",8),i["\u0275\u0275pipe"](66,"keyvalue"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](67,"div",9),i["\u0275\u0275elementStart"](68,"mat-form-field",6),i["\u0275\u0275elementStart"](69,"mat-label"),i["\u0275\u0275text"](70),i["\u0275\u0275pipe"](71,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](72,"input",18),i["\u0275\u0275template"](73,Ot,2,0,"mat-error",11),i["\u0275\u0275template"](74,Tt,2,0,"mat-error",11),i["\u0275\u0275template"](75,Ft,2,0,"mat-error",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](76,"mat-form-field",6),i["\u0275\u0275elementStart"](77,"mat-label"),i["\u0275\u0275text"](78),i["\u0275\u0275pipe"](79,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](80,"input",19),i["\u0275\u0275template"](81,Bt,2,0,"mat-error",11),i["\u0275\u0275template"](82,Mt,2,0,"mat-error",11),i["\u0275\u0275template"](83,Pt,2,0,"mat-error",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](84,jt,15,12,"div",20),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](85,"mat-expansion-panel"),i["\u0275\u0275elementStart"](86,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](87,"mat-panel-title"),i["\u0275\u0275elementStart"](88,"div",3),i["\u0275\u0275text"](89),i["\u0275\u0275pipe"](90,"uppercase"),i["\u0275\u0275pipe"](91,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](92,"div",21),i["\u0275\u0275template"](93,Qt,27,26,"section",22),i["\u0275\u0275elementStart"](94,"span",23),i["\u0275\u0275text"](95),i["\u0275\u0275pipe"](96,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](97,"div"),i["\u0275\u0275elementStart"](98,"button",24),i["\u0275\u0275listener"]("click",function(){return t.addNewConnector()}),i["\u0275\u0275pipe"](99,"translate"),i["\u0275\u0275text"](100),i["\u0275\u0275pipe"](101,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](102,"section",25),i["\u0275\u0275template"](103,Gt,4,7,"button",26),i["\u0275\u0275template"](104,Ht,4,7,"button",27),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275propertyInterpolate"]("toastTarget",t.toastTargetId),i["\u0275\u0275property"]("formGroup",t.gatewayConfigurationGroup),i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](8,49,i["\u0275\u0275pipeBind1"](9,51,"gateway.thingsboard"))),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("deviceName",t.deviceNameForm)("isStateForm",t.isStateForm)("newGatewayType",t.gatewayType),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](15,53,"gateway.security-type")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](18,55,t.securityTypes)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("fxLayout",t.alignment)("fxLayoutGap",t.layoutGap),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](23,57,"gateway.thingsboard-host")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",t.gatewayConfigurationGroup.get("host").hasError("required")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](29,59,"gateway.thingsboard-port")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",t.gatewayConfigurationGroup.get("port").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.gatewayConfigurationGroup.get("port").hasError("min")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.gatewayConfigurationGroup.get("port").hasError("max")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.gatewayConfigurationGroup.get("port").hasError("pattern")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","tls"==t.gatewayConfigurationGroup.get("securityType").value),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](38,61,"gateway.remote")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("fxLayout",t.alignment)("fxLayoutGap",t.layoutGap),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](43,63,"gateway.remote-logging-level")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",t.gatewayLogLevels),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](49,65,"gateway.path-logs")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",t.gatewayConfigurationGroup.get("remoteLoggingPathToLogs").hasError("required")),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](57,67,i["\u0275\u0275pipeBind1"](58,69,"gateway.storage"))),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](63,71,"gateway.storage-type")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](66,73,t.storageTypes)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("fxLayout",t.alignment)("fxLayoutGap",t.layoutGap),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](71,75,"gateway.storage-pack-size")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",t.gatewayConfigurationGroup.get("readRecordsCount").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.gatewayConfigurationGroup.get("readRecordsCount").hasError("min")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.gatewayConfigurationGroup.get("readRecordsCount").hasError("pattern")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](79,77,"file"!==t.gatewayConfigurationGroup.get("storageType").value?"gateway.storage-max-records":"gateway.storage-max-file-records")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",t.gatewayConfigurationGroup.get("maxRecordsCount").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.gatewayConfigurationGroup.get("maxRecordsCount").hasError("min")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.gatewayConfigurationGroup.get("maxRecordsCount").hasError("pattern")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","file"==t.gatewayConfigurationGroup.get("storageType").value),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](90,79,i["\u0275\u0275pipeBind1"](91,81,"gateway.connectors"))),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngForOf",t.connectors.controls),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow",!t.connectors.length),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](96,83,"gateway.no-connectors")),i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](99,85,"gateway.connector-add")),i["\u0275\u0275property"]("fxShow",!t.isReadOnlyForm),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](101,87,"action.add")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("fxShow",!t.isReadOnlyForm),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.gatewayConfigurationGroup.get("remoteConfiguration").value),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.gatewayConfigurationGroup.get("remoteConfiguration").value))},directives:[D["\u0275angular_packages_forms_forms_ba"],D.NgControlStatusGroup,le.b,D.FormGroupDirective,pt.MatAccordion,pt.MatExpansionPanel,pt.MatExpansionPanelHeader,pt.MatExpansionPanelTitle,mt.a,D.NgControlStatus,D.FormControlName,D.RequiredValidator,j.f,M.MatFormField,j.b,M.MatLabel,P.MatSelect,a.NgForOf,j.g,U.MatInput,D.DefaultValueAccessor,a.NgIf,D.NumberValueAccessor,ce.MatCheckbox,j.e,B.d,_.MatButton,ft.MatTooltip,k.MatOption,M.MatError,N.TranslateDirective,D.FormArrayName,D.FormGroupName,de.MatSlideToggle,a.NgClass,B.b,L.MatIcon],pipes:[a.UpperCasePipe,N.TranslatePipe,a.KeyValuePipe],styles:["[_nghost-%COMP%]   .gateway-form[_ngcontent-%COMP%]{height:100%;padding:5px;background-color:transparent;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .gateway-form[_ngcontent-%COMP%]   .form-action-buttons[_ngcontent-%COMP%]{padding-top:8px}[_nghost-%COMP%]   .gateway-form[_ngcontent-%COMP%]   .gateway-config[_ngcontent-%COMP%]   .no-data-found[_ngcontent-%COMP%]{position:relative;display:flex;height:40px}[_nghost-%COMP%]     .mat-form-field-infix{width:auto!important}"]}),t}(v.a);0,void 0;var qt=n("/crD"),zt=n("lJxs"),Wt=n("tyNb"),Xt=n("zkoq"),$t=n("Wp6s");function Jt(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-icon",12),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n.icon)}}function Yt(e,t){if(1&e&&i["\u0275\u0275element"](0,"mat-icon",13),2&e){var n=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275property"]("svgIcon",n.icon)}}function Zt(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-grid-tile"),i["\u0275\u0275elementStart"](1,"a",8),i["\u0275\u0275listener"]("click",function(e){i["\u0275\u0275restoreView"](n);var a=t.$implicit;return i["\u0275\u0275nextContext"](3).navigate(e,a.path)}),i["\u0275\u0275template"](2,Jt,2,1,"mat-icon",9),i["\u0275\u0275template"](3,Yt,1,1,"mat-icon",10),i["\u0275\u0275elementStart"](4,"span",11),i["\u0275\u0275text"](5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("href",a.path,i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!a.isMdiIcon),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.isMdiIcon),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](a.name)}}function en(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-grid-tile",3),i["\u0275\u0275elementStart"](1,"mat-card",4),i["\u0275\u0275elementStart"](2,"mat-card-title"),i["\u0275\u0275elementStart"](3,"span",5),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"mat-card-content"),i["\u0275\u0275elementStart"](6,"mat-grid-list",6),i["\u0275\u0275template"](7,Zt,6,4,"mat-grid-tile",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("colspan",a.sectionColspan(n)),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](n.name),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("cols",a.sectionPlaces(n).length),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",a.sectionPlaces(n))}}function tn(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-grid-list",1),i["\u0275\u0275template"](1,en,8,4,"mat-grid-tile",2),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("cols",n.cols),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](2,2,n.showHomeSections$))}}var nn=function(e){function t(t,n,i,a){var r=e.call(this,t)||this;return r.store=t,r.menuService=n,r.ngZone=i,r.router=a,r.homeSections$=r.menuService.homeSections(),r.showHomeSections$=r.homeSections$.pipe(Object(zt.a)(function(e){return e.filter(function(e){return r.sectionPlaces(e).length>0})})),r.cols=null,r}return Object(y.d)(t,e),t.prototype.ngOnInit=function(){this.ctx.$scope.navigationCardsWidget=this,this.settings=this.ctx.settings},t.prototype.resize=function(){this.updateColumnCount()},t.prototype.updateColumnCount=function(){this.cols=2;var e=this.ctx.width;e>=1280&&(this.cols=3,e>=1920&&(this.cols=4)),this.ctx.detectChanges()},t.prototype.navigate=function(e,t){var n=this;e.preventDefault(),this.ngZone.run(function(){n.router.navigateByUrl(t)})},t.prototype.sectionPlaces=function(e){var t=this;return e&&e.places?e.places.filter(function(e){return t.filterPlace(e)}):[]},t.prototype.filterPlace=function(e){return"include"===this.settings.filterType?this.settings.filter.includes(e.path):"exclude"!==this.settings.filterType||!this.settings.filter.includes(e.path)},t.prototype.sectionColspan=function(e){if(this.ctx.width>=960){var t=this.cols,n=this.sectionPlaces(e);return n.length<=t&&(t=n.length),t}return 2},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](F.Store),i["\u0275\u0275directiveInject"](qt.a),i["\u0275\u0275directiveInject"](i.NgZone),i["\u0275\u0275directiveInject"](Wt.Router))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-navigation-cards-widget"]],inputs:{ctx:"ctx"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:1,consts:[["class","tb-navigation-cards","rowHeight","280px",3,"cols",4,"ngIf"],["rowHeight","280px",1,"tb-navigation-cards",3,"cols"],[3,"colspan",4,"ngFor","ngForOf"],[3,"colspan"],[2,"width","100%"],["translate","",1,"mat-headline"],["rowHeight","170px",3,"cols"],[4,"ngFor","ngForOf"],["mat-raised-button","","color","accent",1,"tb-card-button",3,"href","click"],["class","material-icons tb-mat-96",4,"ngIf"],["class","tb-mat-96",3,"svgIcon",4,"ngIf"],["translate",""],[1,"material-icons","tb-mat-96"],[1,"tb-mat-96",3,"svgIcon"]],template:function(e,t){1&e&&i["\u0275\u0275template"](0,tn,3,4,"mat-grid-list",0),2&e&&i["\u0275\u0275property"]("ngIf",t.cols)},directives:[a.NgIf,Xt.MatGridList,a.NgForOf,Xt.MatGridTile,$t.MatCard,$t.MatCardTitle,N.TranslateDirective,$t.MatCardContent,_.MatAnchor,L.MatIcon],pipes:[a.AsyncPipe],styles:["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]     .tb-navigation-cards .mat-headline{font-size:20px}@media screen and (min-width:1600px){[_nghost-%COMP%]     .tb-navigation-cards .mat-headline{font-size:24px}}[_nghost-%COMP%]     .tb-navigation-cards mat-card{padding:0;margin:8px}[_nghost-%COMP%]     .tb-navigation-cards mat-card mat-card-title{margin:0;padding:24px 16px 16px}[_nghost-%COMP%]     .tb-navigation-cards mat-card mat-card-title+mat-card-content{padding-top:0}[_nghost-%COMP%]     .tb-navigation-cards mat-card mat-card-content{padding:16px}[_nghost-%COMP%]     .tb-navigation-cards .tb-card-button{width:100%;height:100%;max-width:240px}[_nghost-%COMP%]     .tb-navigation-cards .tb-card-button:hover{border-bottom:none}[_nghost-%COMP%]     .tb-navigation-cards .tb-card-button:focus{border-bottom:none}[_nghost-%COMP%]     .tb-navigation-cards .tb-card-button .mat-button-wrapper{width:100%;height:100%;display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]     .tb-navigation-cards .tb-card-button .mat-button-wrapper mat-icon{margin:auto}[_nghost-%COMP%]     .tb-navigation-cards .tb-card-button .mat-button-wrapper span{height:18px;min-height:36px;max-height:36px;padding:0 0 20px;margin:auto;font-size:18px;font-weight:400;line-height:18px;white-space:normal}[_nghost-%COMP%]     .tb-navigation-cards .tb-card-button.mat-raised-button.mat-primary .mat-ripple-element{opacity:.3;background-color:hsla(0,0%,100%,.3)}"]}),t}(v.a);0,void 0;var an=function(e){function t(t,n,i,a){var r=e.call(this,t)||this;return r.store=t,r.utils=n,r.ngZone=i,r.router=a,r}return Object(y.d)(t,e),t.prototype.ngOnInit=function(){this.ctx.$scope.navigationCardWidget=this,this.settings=this.ctx.settings,this.translatedName=this.utils.customTranslation(this.settings.name,this.settings.name)},t.prototype.navigate=function(e,t){var n=this;e.preventDefault(),this.ngZone.run(function(){n.router.navigateByUrl(t)})},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](F.Store),i["\u0275\u0275directiveInject"](C.a),i["\u0275\u0275directiveInject"](i.NgZone),i["\u0275\u0275directiveInject"](Wt.Router))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-navigation-card-widget"]],inputs:{ctx:"ctx"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:3,consts:[["mat-raised-button","","color","accent",1,"tb-nav-button",3,"href","click"],[1,"material-icons","tb-mat-96"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"a",0),i["\u0275\u0275listener"]("click",function(e){return t.navigate(e,t.settings.path)}),i["\u0275\u0275elementStart"](1,"mat-icon",1),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"span"),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275propertyInterpolate"]("href",t.settings.path,i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](t.settings.icon),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](t.translatedName))},directives:[_.MatAnchor,L.MatIcon],styles:["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]     .tb-nav-button{width:100%;height:100%}[_nghost-%COMP%]     .tb-nav-button:hover{border-bottom:none}[_nghost-%COMP%]     .tb-nav-button:focus{border-bottom:none}[_nghost-%COMP%]     .tb-nav-button .mat-button-wrapper{width:100%;height:100%;display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]     .tb-nav-button .mat-button-wrapper mat-icon{margin:auto}[_nghost-%COMP%]     .tb-nav-button .mat-button-wrapper span{height:18px;min-height:36px;max-height:36px;padding:0 0 20px;margin:auto;font-size:18px;font-weight:400;line-height:18px;white-space:normal}[_nghost-%COMP%]     .tb-nav-button.mat-raised-button.mat-primary .mat-ripple-element{opacity:.3;background-color:hsla(0,0%,100%,.3)}"]}),t}(v.a);function rn(e,t){return sn(t)+function(e,t){var n="";switch(t){case te.b.DEVICE:n="device.devices";break;case te.b.ASSET:n="asset.assets";break;case te.b.DASHBOARD:n="dashboard.dashboards";break;case te.b.ENTITY_VIEW:n="entity-view.entity-views";break;case te.b.RULE_CHAIN:n="rulechain.rulechains"}return e.instant(n)}(e,t)}function on(e){return sn(e.id.entityType)+e.name}function sn(e){var t="insert_drive_file";switch(e){case te.b.DEVICE:t="devices_other";break;case te.b.ASSET:t="domain";break;case te.b.DASHBOARD:t="dashboards";break;case te.b.ENTITY_VIEW:t="view_quilt";break;case te.b.RULE_CHAIN:t="settings_ethernet"}return'<mat-icon class="node-icon material-icons" role="img" aria-hidden="false">'+t+"</mat-icon>"}0,void 0;var ln=[te.b.ASSET,te.b.DEVICE,te.b.ENTITY_VIEW,te.b.DASHBOARD,te.b.RULE_CHAIN],cn=n("y7gY"),dn=n("21Fy"),un=n("mbhL"),pn=n("C/rb"),mn=n("zp9Z"),fn=n("NOb7");function hn(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span",6),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n.customerTitle)}}function gn(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span",7),i["\u0275\u0275text"](1,"edge.widget-datasource-error"),i["\u0275\u0275elementEnd"]())}var An=function(e){function t(t,n,i,a,r,o){var s=e.call(this,t)||this;return s.store=t,s.edgeService=n,s.entityService=i,s.translateService=a,s.utils=r,s.cd=o,s.toastTargetId="edges-overview-"+s.utils.guid(),s.customerTitle=null,s.edgeIsDatasource=!0,s.nodeIdCounter=0,s.loadNodes=function(e,t){var n=s.datasources[0];if("#"===e.id&&n)if(n.type===ee.a.entity&&n.entity.id.entityType===te.b.EDGE){var i=n.entity;s.updateTitle(i),s.getCustomerTitle(i.id.id),t(s.loadNodesForEdge(i))}else n.type===ee.a.function?t(s.loadNodesForEdge(n.entity)):(s.edgeIsDatasource=!1,t([]));else if(e.data&&e.data.entity.id.entityType===te.b.EDGE){var a=e.data.entity.id.id,r=e.data.entityType,o=new un.b(n.pageLink.pageSize);s.entityService.getAssignedToEdgeEntitiesByType(a,r,o).subscribe(function(e){e.data.length>0?t(s.entitiesToNodes(e.data)):t([])})}else t([])},s}return Object(y.d)(t,e),t.prototype.ngOnInit=function(){this.widgetConfig=this.ctx.widgetConfig,this.subscription=this.ctx.defaultSubscription,this.datasources=this.subscription.datasources,this.settings=this.ctx.settings,this.initializeConfig(),this.ctx.updateWidgetParams()},t.prototype.loadNodesForEdge=function(e){var t=this,n=[],i=Object(pn.b)(this.store),a=ln;return i.authority===mn.a.CUSTOMER_USER&&(a=ln.filter(function(e){return e!==te.b.RULE_CHAIN})),a.forEach(function(i){var a={id:++t.nodeIdCounter+"",icon:!1,text:rn(t.translateService,i),children:!0,data:{entityType:i,entity:e,internalId:e.id.id+"_"+i}};n.push(a)}),n},t.prototype.createEntityNode=function(e){return{id:++this.nodeIdCounter+"",icon:!1,text:on(e),children:!1,state:{disabled:!1},data:{entity:e,internalId:e.id.id}}},t.prototype.entitiesToNodes=function(e){var t=this,n=[];return e&&e.forEach(function(e){var i=t.createEntityNode(e);n.push(i)}),n},t.prototype.getCustomerTitle=function(e){var t=this;this.edgeService.getEdgeInfo(e).subscribe(function(e){e.customerTitle?t.customerTitle=t.translateService.instant("edge.assigned-to-customer",{customerTitle:e.customerTitle}):t.customerTitle=null,t.cd.detectChanges()})},t.prototype.initializeConfig=function(){if(this.datasources[0]&&this.datasources[0].type===ee.a.entity&&this.datasources[0].entity.id.entityType===te.b.EDGE){var e=this.datasources[0].entity;this.updateTitle(e)}},t.prototype.updateTitle=function(e){var t=!!Object(T.n)(this.settings.enableDefaultTitle)&&this.settings.enableDefaultTitle;this.ctx.widgetTitle=t?e.name+" Quick Overview":this.widgetConfig.title},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](F.Store),i["\u0275\u0275directiveInject"](cn.a),i["\u0275\u0275directiveInject"](dn.a),i["\u0275\u0275directiveInject"](N.TranslateService),i["\u0275\u0275directiveInject"](C.a),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-edges-overview-widget"]],inputs:{ctx:"ctx"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:6,vars:4,consts:[["tb-toast","",1,"tb-edges-overview","tb-absolute-fill",3,"toastTarget"],["fxFlex","","fxLayout","column",1,"tb-absolute-fill"],["class","mat-subheader","fxLayout","row",4,"ngIf"],["class","mat-subheader","fxLayout","row","translate","",4,"ngIf"],["fxFlex","",1,"tb-entities-nav-tree-panel"],[3,"loadNodes"],["fxLayout","row",1,"mat-subheader"],["fxLayout","row","translate","",1,"mat-subheader"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275template"](2,hn,2,1,"span",2),i["\u0275\u0275template"](3,gn,2,0,"span",3),i["\u0275\u0275elementStart"](4,"div",4),i["\u0275\u0275element"](5,"tb-nav-tree",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275propertyInterpolate"]("toastTarget",t.toastTargetId),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.customerTitle),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.edgeIsDatasource),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("loadNodes",t.loadNodes))},directives:[le.b,j.b,j.f,a.NgIf,fn.a,N.TranslateDirective],styles:[".tb-has-timewindow[_nghost-%COMP%]   .tb-edges-overview[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%], .tb-has-timewindow   [_nghost-%COMP%]   .tb-edges-overview[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]{height:60px;max-height:60px}.tb-has-timewindow[_nghost-%COMP%]   .tb-edges-overview[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%], .tb-has-timewindow   [_nghost-%COMP%]   .tb-edges-overview[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{height:60px;max-height:60px}[_nghost-%COMP%]   .tb-edges-overview[_ngcontent-%COMP%]   mat-toolbar.mat-table-toolbar[_ngcontent-%COMP%]:not([color=accent]){background:transparent}[_nghost-%COMP%]   .tb-edges-overview[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]{min-height:39px;max-height:39px}[_nghost-%COMP%]   .tb-edges-overview[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{min-height:39px;max-height:39px}[_nghost-%COMP%]   .tb-edges-overview[_ngcontent-%COMP%]   .mat-subheader[_ngcontent-%COMP%]{padding:15px;color:rgba(0,0,0,.54);font-size:14px;font-weight:400}[_nghost-%COMP%]   .tb-edges-overview[_ngcontent-%COMP%]   .tb-entities-nav-tree-panel[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:auto}[_nghost-%COMP%]     .tb-nav-tree-container.jstree-proton .jstree-anchor div.node-icon{display:inline-block;width:22px;height:22px;margin-right:2px;margin-bottom:2px;background-color:transparent;background-repeat:no-repeat;background-attachment:scroll;background-position:50%;background-size:18px 18px}[_nghost-%COMP%]     .tb-nav-tree-container.jstree-proton .jstree-anchor mat-icon.node-icon{width:22px;min-width:22px;height:22px;min-height:22px;margin-right:2px;margin-bottom:2px;color:inherit;vertical-align:middle}[_nghost-%COMP%]     .tb-nav-tree-container.jstree-proton .jstree-anchor mat-icon.node-icon.material-icons{font-size:18px;line-height:22px;text-align:center}[_nghost-%COMP%]     .tb-nav-tree-container.jstree-proton .jstree-anchor.jstree-disabled div.node-icon, [_nghost-%COMP%]     .tb-nav-tree-container.jstree-proton .jstree-anchor.jstree-hovered:not(.jstree-clicked) div.node-icon{opacity:.5}@media (max-width:768px){[_nghost-%COMP%]     .tb-nav-tree-container.jstree-proton-responsive .jstree-anchor div.node-icon{width:40px;height:40px;margin:0;background-size:24px 24px}[_nghost-%COMP%]     .tb-nav-tree-container.jstree-proton-responsive .jstree-anchor mat-icon.node-icon{width:40px;min-width:40px;height:40px;min-height:40px;margin:0}[_nghost-%COMP%]     .tb-nav-tree-container.jstree-proton-responsive .jstree-anchor mat-icon.node-icon.material-icons{font-size:24px;line-height:40px}}"]}),t}(v.a);0,void 0;var bn,yn=n("H3So"),vn=function(){return{minHeight:"100px"}};function Cn(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",5),i["\u0275\u0275elementStart"](1,"fieldset",6),i["\u0275\u0275elementStart"](2,"tb-json-object-edit",7),i["\u0275\u0275listener"]("focusin",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).isFocused=!0})("focusout",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).isFocused=!1}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",8),i["\u0275\u0275elementStart"](4,"button",9),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).discard()}),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275text"](6),i["\u0275\u0275pipe"](7,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"button",10),i["\u0275\u0275text"](9),i["\u0275\u0275pipe"](10,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("label",a.settings.showLabel?a.labelValue:""),i["\u0275\u0275property"]("editorStyle",i["\u0275\u0275pureFunction0"](14,vn))("required",a.settings.attributeRequired),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](5,8,"widgets.input-widgets.discard-changes")),i["\u0275\u0275property"]("disabled",!a.attributeUpdateFormGroup.dirty),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](7,10,"action.undo")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",a.attributeUpdateFormGroup.invalid||!a.attributeUpdateFormGroup.dirty),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](10,12,"action.save")," ")}}function xn(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",13),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"widgets.input-widgets.no-entity-selected")," "))}function wn(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",13),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"widgets.input-widgets.no-datakey-selected")," "))}function Sn(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",13),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,n.errorMessage)," ")}}function En(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",11),i["\u0275\u0275template"](1,xn,3,3,"div",12),i["\u0275\u0275template"](2,wn,3,3,"div",12),i["\u0275\u0275template"](3,Sn,3,3,"div",12),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!n.entityDetected),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.entityDetected&&!n.dataKeyDetected),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.dataKeyDetected&&!n.isValidParameter)}}function In(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"form",2),i["\u0275\u0275listener"]("ngSubmit",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().save()}),i["\u0275\u0275template"](1,Cn,11,15,"div",3),i["\u0275\u0275template"](2,En,4,3,"div",4),i["\u0275\u0275elementEnd"]()}if(2&e){var a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("formGroup",a.attributeUpdateFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.entityDetected&&a.isValidParameter&&a.dataKeyDetected),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!a.entityDetected||!a.dataKeyDetected||!a.isValidParameter)}}!function(e){e.ATTRIBUTE="ATTRIBUTE",e.TIME_SERIES="TIME_SERIES"}(bn||(bn={}));var On=function(e){function t(t,n,i,a,r){var o=e.call(this,t)||this;return o.store=t,o.utils=n,o.fb=i,o.attributeService=a,o.translate=r,o.entityDetected=!1,o.dataKeyDetected=!1,o.isValidParameter=!1,o.toastTargetId="json-input-widget"+o.utils.guid(),o}return Object(y.d)(t,e),t.prototype.ngOnInit=function(){this.ctx.$scope.jsonInputWidget=this,this.settings=this.ctx.settings,this.widgetConfig=this.ctx.widgetConfig,this.subscription=this.ctx.defaultSubscription,this.datasource=this.subscription.datasources[0],this.initializeConfig(),this.validateDatasources(),this.buildForm(),this.ctx.updateWidgetParams()},t.prototype.initializeConfig=function(){if(this.settings.widgetTitle&&this.settings.widgetTitle.length){var e=Object(T.d)(this.datasource,this.settings.widgetTitle);this.ctx.widgetTitle=this.utils.customTranslation(e,e)}else this.ctx.widgetTitle=this.ctx.widgetConfig.title;if(this.settings.labelValue&&this.settings.labelValue.length){var t=Object(T.d)(this.datasource,this.settings.labelValue);this.labelValue=this.utils.customTranslation(t,t)}else this.labelValue=this.translate.instant("widgets.input-widgets.value")},t.prototype.validateDatasources=function(){var e;(null===(e=this.datasource)||void 0===e?void 0:e.type)===ee.a.entity&&(this.entityDetected=!0,this.datasource.dataKeys.length&&(this.dataKeyDetected=!0,this.settings.widgetMode===bn.ATTRIBUTE?this.datasource.dataKeys[0].type===ie.h.attribute?this.settings.attributeScope===ie.d.SERVER_SCOPE||this.datasource.entityType===te.b.DEVICE?this.isValidParameter=!0:this.errorMessage="widgets.input-widgets.not-allowed-entity":this.errorMessage="widgets.input-widgets.no-attribute-selected":this.datasource.dataKeys[0].type===ie.h.timeseries?this.isValidParameter=!0:this.errorMessage="widgets.input-widgets.no-timeseries-selected"))},t.prototype.buildForm=function(){var e=this,t=[];this.settings.attributeRequired&&t.push(D.Validators.required),this.attributeUpdateFormGroup=this.fb.group({currentValue:[{},t]}),this.attributeUpdateFormGroup.valueChanges.subscribe(function(){e.ctx.detectChanges()})},t.prototype.updateWidgetData=function(e){if(this.isValidParameter){var t={};if(""!==e[0].data[0][1])try{t=JSON.parse(e[0].data[0][1])}catch(n){t=e[0].data[0][1]}this.originalValue=t,this.isFocused||(this.attributeUpdateFormGroup.get("currentValue").patchValue(this.originalValue),this.ctx.detectChanges())}},t.prototype.onDataUpdated=function(){this.updateWidgetData(this.subscription.data)},t.prototype.save=function(){var e=this;this.isFocused=!1;var t={key:this.datasource.dataKeys[0].name,value:this.attributeUpdateFormGroup.get("currentValue").value},n={entityType:this.datasource.entityType,id:this.datasource.entityId};(this.settings.widgetMode===bn.ATTRIBUTE?this.attributeService.saveEntityAttributes(n,this.settings.attributeScope,[t],{}):this.attributeService.saveEntityTimeseries(n,ie.r.LATEST_TELEMETRY,[t],{})).subscribe(function(){e.attributeUpdateFormGroup.markAsPristine(),e.ctx.detectChanges(),e.settings.showResultMessage&&e.ctx.showSuccessToast(e.translate.instant("widgets.input-widgets.update-successful"),1e3,"bottom","left",e.toastTargetId)},function(){e.settings.showResultMessage&&e.ctx.showErrorToast(e.translate.instant("widgets.input-widgets.update-failed"),"bottom","left",e.toastTargetId)})},t.prototype.discard=function(){this.attributeUpdateFormGroup.reset({currentValue:this.originalValue},{emitEvent:!1}),this.attributeUpdateFormGroup.markAsPristine(),this.isFocused=!1},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](F.Store),i["\u0275\u0275directiveInject"](C.a),i["\u0275\u0275directiveInject"](D.FormBuilder),i["\u0275\u0275directiveInject"](ne.a),i["\u0275\u0275directiveInject"](N.TranslateService))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-json-input-widget"]],inputs:{ctx:"ctx"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:2,consts:[["tb-toast","",1,"tb-json-input",3,"toastTarget"],["fxLayout","column","class","tb-json-input__form",3,"formGroup","ngSubmit",4,"ngIf"],["fxLayout","column",1,"tb-json-input__form",3,"formGroup","ngSubmit"],["fxLayout","column","fxLayoutGap","10px","fxFlex","",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","fxFlex","",4,"ngIf"],["fxLayout","column","fxLayoutGap","10px","fxFlex",""],["fxFlex",""],["fillHeight","true","formControlName","currentValue",3,"editorStyle","required","label","focusin","focusout"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","20px",1,"tb-json-input-form__actions"],["mat-button","","color","accent","type","button","matTooltipPosition","above",3,"disabled","matTooltip","click"],["mat-button","","mat-raised-button","","color","accent","type","submit",3,"disabled"],["fxLayout","column","fxLayoutAlign","center center","fxFlex",""],["class","tb-json-input__error",4,"ngIf"],[1,"tb-json-input__error"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,In,3,3,"form",1),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275propertyInterpolate"]("toastTarget",t.toastTargetId),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.attributeUpdateFormGroup))},directives:[le.b,a.NgIf,D["\u0275angular_packages_forms_forms_ba"],D.NgControlStatusGroup,j.f,D.FormGroupDirective,j.g,j.b,yn.a,D.NgControlStatus,D.FormControlName,D.RequiredValidator,j.e,_.MatButton,ft.MatTooltip],pipes:[N.TranslatePipe],styles:[".tb-json-input[_ngcontent-%COMP%]{width:100%;height:100%;padding:5px}.tb-json-input__form[_ngcontent-%COMP%]{overflow:auto;height:100%}.tb-json-input__error[_ngcontent-%COMP%]{text-align:center;font-size:18px;color:#a0a0a0}.tb-toast[_ngcontent-%COMP%]{font-size:14px!important}"]}),t}(v.a);0,void 0;var Tn=n("t+jE"),Fn=["canvas"];function Bn(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",4),i["\u0275\u0275text"](1,"entity.no-data"),i["\u0275\u0275elementEnd"]())}function Mn(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",4),i["\u0275\u0275text"](1,"widgets.invalid-qr-code-text"),i["\u0275\u0275elementEnd"]())}var Pn=function(e){return{display:e}},Dn=function(e){function t(t,n){var i=e.call(this,t)||this;return i.store=t,i.cd=n,i.invalidQrCodeText=!1,i}return Object(y.d)(t,e),t.prototype.ngOnInit=function(){this.ctx.$scope.qrCodeWidget=this,this.settings=this.ctx.settings,this.qrCodeTextFunction=this.settings.useQrCodeTextFunction?Object(Tn.o)(this.settings.qrCodeTextFunction,["data"]):null},t.prototype.ngAfterViewInit=function(){this.viewInited=!0,this.scheduleUpdateCanvas&&(this.scheduleUpdateCanvas=!1,this.updateCanvas())},t.prototype.onDataUpdated=function(){var e,t,n,i;if((null===(e=this.ctx.data)||void 0===e?void 0:e.length)?n=this.ctx.data:(null===(t=this.ctx.datasources)||void 0===t?void 0:t.length)&&(n=[{datasource:this.ctx.datasources[0],dataKey:{type:ie.h.attribute,name:"empty"},data:[]}]),n){var a=Object(Tn.n)(n)[0],r=this.settings.useQrCodeTextFunction?Object(Tn.r)(this.qrCodeTextFunction,[a]):this.settings.qrCodeTextPattern,o=Object(Tn.q)(r,a);i=Object(Tn.e)(r,o,a)}this.updateQrCodeText(i)},t.prototype.updateQrCodeText=function(e){this.qrCodeText!==e&&(this.qrCodeText=e,Object(T.z)(e)||Object(T.x)(e)?this.invalidQrCodeText=!0:(this.invalidQrCodeText=!1,this.qrCodeText&&this.updateCanvas()),this.cd.detectChanges())},t.prototype.updateCanvas=function(){var e=this;this.viewInited?n.e(20).then(n.t.bind(null,"0FX9",7)).then(function(t){t.toCanvas(e.canvasRef.nativeElement,e.qrCodeText),e.canvasRef.nativeElement.style.width="auto",e.canvasRef.nativeElement.style.height="auto"}):this.scheduleUpdateCanvas=!0},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](F.Store),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-qrcode-widget"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](Fn,1),2&e){var n;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.canvasRef=n.first)}},inputs:{ctx:"ctx"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:5,consts:[["fxLayout","column","fxLayoutAlign","center center",2,"width","100%","height","100%"],["fxFlex","",3,"ngStyle"],["canvas",""],["translate","",4,"ngIf"],["translate",""]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275element"](1,"canvas",1,2),i["\u0275\u0275template"](3,Bn,2,0,"div",3),i["\u0275\u0275template"](4,Mn,2,0,"div",3),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction1"](3,Pn,t.qrCodeText&&!t.invalidQrCodeText?"block":"none")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.qrCodeText&&!t.invalidQrCodeText),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.invalidQrCodeText))},directives:[j.f,j.e,j.b,a.NgStyle,B.e,a.NgIf,N.TranslateDirective],encapsulation:2}),t}(v.a);0,void 0;var kn=n("Neop"),_n=n("lR5k"),Ln=function(e){function t(t,n){var i=e.call(this,t)||this;return i.store=t,i.cd=n,i}return Object(y.d)(t,e),t.prototype.ngOnInit=function(){this.ctx.$scope.markdownWidget=this,this.settings=this.ctx.settings,this.markdownTextFunction=this.settings.useMarkdownTextFunction?Object(Tn.o)(this.settings.markdownTextFunction,["data"]):null,this.markdownClass="markdown-widget";var e=this.settings.markdownCss;if(Object(T.w)(e)){var t=new kn.a;t.testMode=!1,this.markdownClass+="-"+Object(T.l)(e),t.cssPreviewNamespace="tb-markdown-view."+this.markdownClass,t.createStyleElement(this.markdownClass,e)}},t.prototype.onDataUpdated=function(){var e,t,n,i;if((null===(e=this.ctx.data)||void 0===e?void 0:e.length)?n=this.ctx.data:(null===(t=this.ctx.datasources)||void 0===t?void 0:t.length)&&(n=[{datasource:this.ctx.datasources[0],dataKey:{type:ie.h.attribute,name:"empty"},data:[]}]),n){var a=Object(Tn.n)(n);i=this.settings.useMarkdownTextFunction?Object(Tn.r)(this.markdownTextFunction,[a]):this.settings.markdownTextPattern;var r=Object(Tn.g)(a),o=Object(Tn.q)(i,r);i=Object(Tn.e)(i,o,r)}this.markdownText!==i&&(this.markdownText=i,this.cd.detectChanges())},t.prototype.markdownClick=function(e){this.ctx.actionsApi.elementClick(e)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](F.Store),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-markdown-widget"]],inputs:{ctx:"ctx"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:4,consts:[[3,"data","click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"markdown",0),i["\u0275\u0275listener"]("click",function(e){return t.markdownClick(e)}),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275classMapInterpolate1"]("tb-markdown-view ",t.markdownClass,""),i["\u0275\u0275property"]("data",t.markdownText))},directives:[_n.a],styles:[".tb-markdown-view[_ngcontent-%COMP%]{display:block}.tb-markdown-view[_ngcontent-%COMP%]     h1{font-size:32px;padding-right:60px}.tb-markdown-view[_ngcontent-%COMP%]     h1, .tb-markdown-view[_ngcontent-%COMP%]     h2, .tb-markdown-view[_ngcontent-%COMP%]     h3, .tb-markdown-view[_ngcontent-%COMP%]     h4, .tb-markdown-view[_ngcontent-%COMP%]     h5, .tb-markdown-view[_ngcontent-%COMP%]     h6{line-height:normal;font-weight:500;margin-bottom:30px;padding-bottom:10px;border-bottom:1px solid #ccc}.tb-markdown-view[_ngcontent-%COMP%]     p{font-size:16px;font-weight:400;line-height:1.25em;margin:0}.tb-markdown-view[_ngcontent-%COMP%]     p+p{margin-top:10px}.tb-markdown-view[_ngcontent-%COMP%]     table{width:100%;border:1px solid #ccc;border-spacing:0;margin-top:30px;margin-bottom:30px}.tb-markdown-view[_ngcontent-%COMP%]     thead{background-color:#555;color:#fff}.tb-markdown-view[_ngcontent-%COMP%]     td, .tb-markdown-view[_ngcontent-%COMP%]     th{font-size:.85em;padding:8px;margin:0;text-align:left}.tb-markdown-view[_ngcontent-%COMP%]     td[align=center], .tb-markdown-view[_ngcontent-%COMP%]     th[align=center]{text-align:center}.tb-markdown-view[_ngcontent-%COMP%]     td[align=right], .tb-markdown-view[_ngcontent-%COMP%]     th[align=right]{text-align:right}.tb-markdown-view[_ngcontent-%COMP%]     tr:nth-child(2n){background-color:#f7f7f7}.tb-markdown-view[_ngcontent-%COMP%]     code:not([class*=language-]){background:#f5f5f5;border-radius:2px;color:#dd4a68;padding:2px 4px}.tb-markdown-view[_ngcontent-%COMP%]     div.code-wrapper{position:relative}.tb-markdown-view[_ngcontent-%COMP%]     div.code-wrapper button.clipboard-btn{cursor:pointer;margin:0;border:0;outline:none;position:absolute;top:5px;right:5px;background:#fff;box-shadow:0 1px 8px 0 rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 3px 3px -2px rgba(0,0,0,.12);border-radius:5px;opacity:0;transition:opacity .3s;padding:3px 6px;line-height:16px}.tb-markdown-view[_ngcontent-%COMP%]     div.code-wrapper button.clipboard-btn img{width:18px}.tb-markdown-view[_ngcontent-%COMP%]     div.code-wrapper button.clipboard-btn:hover{background:#f9f9f9}.tb-markdown-view[_ngcontent-%COMP%]     div.code-wrapper button.clipboard-btn:active{background-color:#ececec;box-shadow:inset 1px -1px 4px 0 rgba(0,0,0,.4)}.tb-markdown-view[_ngcontent-%COMP%]     div.code-wrapper:hover button.clipboard-btn{opacity:.85}.tb-markdown-view[_ngcontent-%COMP%]     td div.code-wrapper, .tb-markdown-view[_ngcontent-%COMP%]     th div.code-wrapper{display:inline-block}.tb-markdown-view[_ngcontent-%COMP%]     td div.code-wrapper button.clipboard-btn, .tb-markdown-view[_ngcontent-%COMP%]     th div.code-wrapper button.clipboard-btn{top:-5px;right:-30px;padding:0 3px}"]}),t}(v.a);0,void 0;var jn=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[m.a,dt.a],imports:[[a.CommonModule,r.a,b,d.a],b]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](jn,{declarations:[s.b,c.b,o.a,l.a,u.a,p.a,An,J,Z,On,_e,Le.TripAnimationComponent,qe,Kt,nn,an,Dn,Ln],imports:[a.CommonModule,r.a,b,d.a],exports:[o.a,l.a,u.a,p.a,An,b,J,On,_e,Le.TripAnimationComponent,qe,Kt,nn,an,Dn,Ln]})),0},"Bdm/":function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return re});var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=(n("0G7Z"),n("OiFK")),s=n("//Q6"),l=n("Neop"),c=n("3Tyt"),d=n("xgIS"),u=n("VRyK"),p=n("2Vo4"),m=n("Duvn"),f=n("U3y+"),h=n("Kj3r"),g=n("/uUt"),A=n("vkgz"),b=n("lJxs"),y=n("M9IT"),v=n("Dh3D"),C=n("fr2l"),x=n("rDax"),w=n("+rOU"),S=n("A6E3"),E=n("xw5a"),I=n("mbhL"),O=n("6OOC"),T=n("l7P3"),F=n("ofXK"),B=n("sYmb"),M=n("jhN1"),P=n("XiUz"),D=n("/t3+"),k=n("znSr"),_=n("bTqV"),L=n("Qu3c"),j=n("NFeN"),N=n("kmnG"),R=n("qFsG"),U=n("3Pt+"),V=n("+0xr"),Q=n("STbY"),G=n("f0Cb"),H=["searchInput"];function K(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",24),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]().$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle",i.headerStyle(n)),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.title," ")}}function q(e,t){if(1&e&&a["\u0275\u0275element"](0,"mat-cell",25),2&e){var n=t.$implicit,i=t.index,r=a["\u0275\u0275nextContext"]().$implicit,o=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("innerHTML",o.cellContent(n,r,i),a["\u0275\u0275sanitizeHtml"])("ngStyle",o.cellStyle(n,r,i))}}function z(e,t){if(1&e&&(a["\u0275\u0275elementContainerStart"](0,21),a["\u0275\u0275template"](1,K,2,2,"mat-header-cell",22),a["\u0275\u0275template"](2,q,1,2,"mat-cell",23),a["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275property"]("matColumnDef",n.def)}}var W=function(e,t,n){return{minWidth:e,maxWidth:t,width:n}};function X(e,t){if(1&e&&a["\u0275\u0275element"](0,"mat-header-cell",26),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle.gt-md",a["\u0275\u0275pureFunction3"](1,W,40*n.actionCellDescriptors.length+"px",40*n.actionCellDescriptors.length+"px",40*n.actionCellDescriptors.length+"px"))}}function $(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",30),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit,r=a["\u0275\u0275nextContext"]().$implicit;return a["\u0275\u0275nextContext"]().onActionButtonClick(e,r,i)}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=a["\u0275\u0275nextContext"](2);a["\u0275\u0275propertyInterpolate"]("matTooltip",i.displayName),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,3,r.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](i.icon)}}function J(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",37),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit,r=a["\u0275\u0275nextContext"](2).$implicit;return a["\u0275\u0275nextContext"]().onActionButtonClick(e,r,i)}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"span"),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=a["\u0275\u0275nextContext"](3);a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,3,r.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](i.icon),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](i.displayName)}}function Y(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",31),a["\u0275\u0275elementStart"](1,"button",32),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var t=a["\u0275\u0275nextContext"](2);return e.stopPropagation(),t.ctx.detectChanges()}),a["\u0275\u0275elementStart"](2,"mat-icon",33),a["\u0275\u0275text"](3,"more_vert"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"mat-menu",34,35),a["\u0275\u0275template"](6,J,6,5,"button",36),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275reference"](5),r=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("matMenuTriggerFor",i),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngForOf",r.actionCellDescriptors)("ngForTrackBy",r.trackByActionCellDescriptionId)}}function Z(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-cell",26),a["\u0275\u0275elementStart"](1,"div",27),a["\u0275\u0275template"](2,$,4,5,"button",28),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](3,Y,7,3,"div",29),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle.gt-md",a["\u0275\u0275pureFunction3"](4,W,40*n.actionCellDescriptors.length+"px",40*n.actionCellDescriptors.length+"px",40*n.actionCellDescriptors.length+"px")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",n.actionCellDescriptors)("ngForTrackBy",n.trackByActionCellDescriptionId),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.actionCellDescriptors.length)}}function ee(e,t){1&e&&a["\u0275\u0275element"](0,"mat-header-row")}var te=function(e,t){return{"tb-current-entity":e,invisible:t}};function ne(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-row",38),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit;return a["\u0275\u0275nextContext"]().onRowClick(e,i)})("dblclick",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit;return a["\u0275\u0275nextContext"]().onRowClick(e,i,!0)}),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=t.index,o=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction2"](2,te,o.entityDatasource.isCurrentEntity(i),o.entityDatasource.dataLoading))("ngStyle",o.rowStyle(i,r))}}function ie(e,t){1&e&&a["\u0275\u0275element"](0,"mat-divider")}function ae(e,t){if(1&e&&(a["\u0275\u0275element"](0,"mat-paginator",39),a["\u0275\u0275pipe"](1,"async")),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("length",a["\u0275\u0275pipeBind1"](1,4,n.entityDatasource.total()))("pageIndex",n.pageLink.page)("pageSize",n.pageLink.pageSize)("pageSizeOptions",n.pageSizeOptions)}}var re=function(t){function n(e,n,i,a,r,o,s,l,c){var d=t.call(this,e)||this;return d.store=e,d.elementRef=n,d.ngZone=i,d.overlay=a,d.viewContainerRef=r,d.utils=o,d.datePipe=s,d.translate=l,d.domSanitizer=c,d.displayPagination=!0,d.enableStickyHeader=!0,d.enableStickyAction=!0,d.textSearchMode=!1,d.columns=[],d.displayedColumns=[],d.cellContentCache=[],d.cellStyleCache=[],d.rowStyleCache=[],d.defaultPageSize=10,d.defaultSortOrder="entityName",d.contentsInfo={},d.stylesInfo={},d.columnWidth={},d.columnDefaultVisibility={},d.columnSelectionAvailability={},d.searchAction={name:"action.search",show:!0,icon:"search",onAction:function(){d.enterFilterMode()}},d.columnDisplayAction={name:"entity.columns-to-display",show:!0,icon:"view_column",onAction:function(e){d.editColumnsToDisplay(e)}},d.pageLink={page:0,pageSize:d.defaultPageSize,textSearch:null,dynamic:!0},d}return Object(i.d)(n,t),n.prototype.ngOnInit=function(){this.ctx.$scope.entitiesTableWidget=this,this.settings=this.ctx.settings,this.widgetConfig=this.ctx.widgetConfig,this.subscription=this.ctx.defaultSubscription,this.initializeConfig(),this.updateDatasources(),this.ctx.updateWidgetParams()},n.prototype.ngAfterViewInit=function(){var e=this;Object(d.a)(this.searchInputField.nativeElement,"keyup").pipe(Object(h.a)(150),Object(g.a)(),Object(A.a)(function(){e.displayPagination&&(e.paginator.pageIndex=0),e.updateData()})).subscribe(),this.displayPagination&&this.sort.sortChange.subscribe(function(){return e.paginator.pageIndex=0}),(this.displayPagination?Object(u.a)(this.sort.sortChange,this.paginator.page):this.sort.sortChange).pipe(Object(A.a)(function(){return e.updateData()})).subscribe(),this.updateData()},n.prototype.onDataUpdated=function(){this.updateTitle(!0),this.entityDatasource.dataUpdated(),this.clearCache(),this.ctx.detectChanges()},n.prototype.pageLinkSortDirection=function(){return Object(E.r)(this.pageLink)},n.prototype.initializeConfig=function(){this.ctx.widgetActions=[this.searchAction,this.columnDisplayAction],this.actionCellDescriptors=this.ctx.actionsApi.getActionDescriptors("actionCellButton"),this.settings.entitiesTitle&&this.settings.entitiesTitle.length?this.entitiesTitlePattern=this.utils.customTranslation(this.settings.entitiesTitle,this.settings.entitiesTitle):this.entitiesTitlePattern=this.translate.instant("entity.entities"),this.updateTitle(!1),this.searchAction.show=!Object(s.n)(this.settings.enableSearch)||this.settings.enableSearch,this.displayPagination=!Object(s.n)(this.settings.displayPagination)||this.settings.displayPagination,this.enableStickyHeader=!Object(s.n)(this.settings.enableStickyHeader)||this.settings.enableStickyHeader,this.enableStickyAction=!Object(s.n)(this.settings.enableStickyAction)||this.settings.enableStickyAction,this.columnDisplayAction.show=!Object(s.n)(this.settings.enableSelectColumnDisplay)||this.settings.enableSelectColumnDisplay,this.rowStylesInfo=Object(C.m)(this.settings,"entity, ctx");var t=this.settings.defaultPageSize;Object(s.n)(t)&&Object(s.x)(t)&&t>0&&(this.defaultPageSize=t),this.pageSizeOptions=[this.defaultPageSize,2*this.defaultPageSize,3*this.defaultPageSize],this.pageLink.pageSize=this.displayPagination?this.defaultPageSize:1024;var n=Object(C.a)(this.widgetConfig),i=new l.a;i.testMode=!1;var a="entities-table-"+Object(s.l)(n);i.cssPreviewNamespace=a,i.createStyleElement(a,n),e(this.elementRef.nativeElement).addClass(a)},n.prototype.updateTitle=function(e){void 0===e&&(e=!1);var t=Object(s.d)(this.subscription.datasources[0],this.entitiesTitlePattern);this.ctx.widgetTitle!==t&&(this.ctx.widgetTitle=t,e&&this.ctx.updateWidgetParams())},n.prototype.updateDatasources=function(){var e,t,n,i=this,a=!Object(s.n)(this.settings.displayEntityName)||this.settings.displayEntityName,r=!!Object(s.n)(this.settings.displayEntityLabel)&&this.settings.displayEntityLabel;t=this.settings.entityNameColumnTitle&&this.settings.entityNameColumnTitle.length?this.utils.customTranslation(this.settings.entityNameColumnTitle,this.settings.entityNameColumnTitle):this.translate.instant("entity.entity-name"),n=this.settings.entityLabelColumnTitle&&this.settings.entityLabelColumnTitle.length?this.utils.customTranslation(this.settings.entityLabelColumnTitle,this.settings.entityLabelColumnTitle):this.translate.instant("entity.entity-label");var o=!Object(s.n)(this.settings.displayEntityType)||this.settings.displayEntityType;a&&(this.columns.push({name:"entityName",label:"entityName",def:"entityName",title:t,entityKey:{key:"name",type:E.d.ENTITY_FIELD}}),this.contentsInfo.entityName={useCellContentFunction:!1},this.stylesInfo.entityName={useCellStyleFunction:!1},this.columnWidth.entityName="0px",this.columnDefaultVisibility.entityName=!0,this.columnSelectionAvailability.entityName=!0),r&&(this.columns.push({name:"entityLabel",label:"entityLabel",def:"entityLabel",title:n,entityKey:{key:"label",type:E.d.ENTITY_FIELD}}),this.contentsInfo.entityLabel={useCellContentFunction:!1},this.stylesInfo.entityLabel={useCellStyleFunction:!1},this.columnWidth.entityLabel="0px",this.columnDefaultVisibility.entityLabel=!0,this.columnSelectionAvailability.entityLabel=!0),o&&(this.columns.push({name:"entityType",label:"entityType",def:"entityType",title:this.translate.instant("entity.entity-type"),entityKey:{key:"entityType",type:E.d.ENTITY_FIELD}}),this.contentsInfo.entityType={useCellContentFunction:!1},this.stylesInfo.entityType={useCellStyleFunction:!1},this.columnWidth.entityType="0px",this.columnDefaultVisibility.entityType=!0,this.columnSelectionAvailability.entityType=!0);var l,d=[],u=this.subscription.options.datasources?this.subscription.options.datasources[0]:null;u&&u.dataKeys&&(u.dataKeys.forEach(function(e){var t=Object(s.e)(e);t.entityKey=Object(E.n)(e),t.type===c.h.function&&(t.name=t.label),d.push(t),t.label=i.utils.customTranslation(t.label,t.label),t.title=t.label,t.def="def"+i.columns.length;var n=t.settings;if(t.type===c.h.entityField&&!Object(s.n)(n.columnWidth)||"0px"===n.columnWidth){var a=O.a[t.name];a&&a.time&&(n.columnWidth="120px")}i.stylesInfo[t.def]=Object(C.h)(n,"value, entity, ctx"),i.contentsInfo[t.def]=Object(C.g)(n,"value, entity, ctx"),i.contentsInfo[t.def].units=t.units,i.contentsInfo[t.def].decimals=t.decimals,i.columnWidth[t.def]=Object(C.k)(n),i.columnDefaultVisibility[t.def]=Object(C.i)(n),i.columnSelectionAvailability[t.def]=Object(C.j)(n),i.columns.push(t)}),(e=this.displayedColumns).push.apply(e,this.columns.filter(function(e){return i.columnDefaultVisibility[e.def]}).map(function(e){return e.def}))),this.settings.defaultSortOrder&&this.settings.defaultSortOrder.length&&(this.defaultSortOrder=this.utils.customTranslation(this.settings.defaultSortOrder,this.settings.defaultSortOrder)),this.pageLink.sortOrder=Object(C.b)(this.defaultSortOrder,this.columns),this.pageLink.sortOrder&&(l=Object(C.c)(this.pageLink.sortOrder.key,this.columns)),this.sortOrderProperty=l?l.def:null,this.actionCellDescriptors.length&&this.displayedColumns.push("actions"),this.entityDatasource=new oe(this.translate,d,this.subscription,this.ngZone)},n.prototype.editColumnsToDisplay=function(e){var t=this;e&&e.stopPropagation();var n=e.target||e.currentTarget,i=new x.OverlayConfig;i.backdropClass="cdk-overlay-transparent-backdrop",i.hasBackdrop=!0;i.positionStrategy=this.overlay.position().flexibleConnectedTo(n).withPositions([{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}]);var r=this.overlay.create(i);r.backdropClick().subscribe(function(){r.dispose()});var o=this.columns.map(function(e){return{title:e.title,def:e.def,display:t.displayedColumns.indexOf(e.def)>-1,selectable:t.columnSelectionAvailability[e.def]}}),s=[{provide:S.a,useValue:{columns:o,columnsUpdated:function(e){t.displayedColumns=e.filter(function(e){return e.display}).map(function(e){return e.def}),t.actionCellDescriptors.length&&t.displayedColumns.push("actions"),t.clearCache()}}},{provide:x.OverlayRef,useValue:r}],l=a.Injector.create({parent:this.viewContainerRef.injector,providers:s});r.attach(new w.ComponentPortal(S.b,this.viewContainerRef,l)),this.ctx.detectChanges()},n.prototype.enterFilterMode=function(){var e=this;this.textSearchMode=!0,this.pageLink.textSearch="",this.ctx.hideTitlePanel=!0,this.ctx.detectChanges(!0),setTimeout(function(){e.searchInputField.nativeElement.focus(),e.searchInputField.nativeElement.setSelectionRange(0,0)},10)},n.prototype.exitFilterMode=function(){this.textSearchMode=!1,this.pageLink.textSearch=null,this.displayPagination&&(this.paginator.pageIndex=0),this.updateData(),this.ctx.hideTitlePanel=!1,this.ctx.detectChanges(!0)},n.prototype.updateData=function(){this.displayPagination?(this.pageLink.page=this.paginator.pageIndex,this.pageLink.pageSize=this.paginator.pageSize):this.pageLink.page=0;var e=Object(C.d)(this.sort.active,this.columns);this.pageLink.sortOrder=e?{key:e,direction:E.c[this.sort.direction.toUpperCase()]}:null;var t=Object(C.e)(this.sort.active,this.columns);this.entityDatasource.loadEntities(this.pageLink,t,null),this.ctx.detectChanges()},n.prototype.trackByColumnDef=function(e,t){return t.def},n.prototype.trackByEntityId=function(e,t){return t.id.id},n.prototype.trackByActionCellDescriptionId=function(e,t){return t.id},n.prototype.headerStyle=function(e){var t=this.columnWidth[e.def];return Object(C.n)(t)},n.prototype.rowStyle=function(e,t){var n=this.rowStyleCache[t];if(!n){if(n={},e&&this.rowStylesInfo.useRowStyleFunction&&this.rowStylesInfo.rowStyleFunction)try{if(n=this.rowStylesInfo.rowStyleFunction(e,this.ctx),!Object(s.z)(n))throw new TypeError((null===n?"null":typeof n)+" instead of style object");if(Array.isArray(n))throw new TypeError("Array instead of style object")}catch(i){n={},console.warn("Row style function in widget '"+this.ctx.widgetTitle+"' returns '"+i+"'. Please check your row style function.")}this.rowStyleCache[t]=n}return n},n.prototype.cellStyle=function(e,t,n){var i=this.columns.indexOf(t),a=n*this.columns.length+i,r=this.cellStyleCache[a];if(!r&&(r={},e&&t)){var o=this.stylesInfo[t.def],l=Object(C.l)(e,t);if(o.useCellStyleFunction&&o.cellStyleFunction)try{if(r=o.cellStyleFunction(l,e,this.ctx),!Object(s.z)(r))throw new TypeError((null===r?"null":typeof r)+" instead of style object");if(Array.isArray(r))throw new TypeError("Array instead of style object")}catch(d){r={},console.warn("Cell style function for data key '"+t.label+"' in widget '"+this.ctx.widgetTitle+"' returns '"+d+"'. Please check your cell style function.")}this.cellStyleCache[a]=r}if(!r.width){var c=this.columnWidth[t.def];r=Object.assign(r,Object(C.n)(c))}return r},n.prototype.cellContent=function(e,t,n){var i=this.columns.indexOf(t),a=n*this.columns.length+i,r=this.cellContentCache[a];if(Object(s.B)(r)){if(r="",e&&t){var o=this.contentsInfo[t.def],l=Object(C.l)(e,t),c=void 0;if(o.useCellContentFunction&&o.cellContentFunction)try{c=o.cellContentFunction(l,e,this.ctx)}catch(d){c=""+l}else c=this.defaultContent(t,o,l);if(Object(s.n)(c))switch(typeof(c=this.utils.customTranslation(c,c))){case"string":r=this.domSanitizer.bypassSecurityTrustHtml(c);break;default:r=c}}this.cellContentCache[a]=r}return r},n.prototype.defaultContent=function(e,t,n){if(Object(s.n)(n)){var i=O.a[e.name];if(i&&i.time)return this.datePipe.transform(n,"yyyy-MM-dd HH:mm:ss");var a=t.decimals||0===t.decimals?t.decimals:this.ctx.widgetConfig.decimals,r=t.units||this.ctx.widgetConfig.units;return this.ctx.utils.formatValue(n,a,r,!0)}return""},n.prototype.onRowClick=function(e,t,n){e&&e.stopPropagation(),this.entityDatasource.toggleCurrentEntity(t);var i=n?"rowDoubleClick":"rowClick",a=this.ctx.actionsApi.getActionDescriptors(i);if(a.length){var r=void 0,o=void 0,s=void 0;t&&(r=t.id,o=t.entityName,s=t.entityLabel),this.ctx.actionsApi.handleWidgetAction(e,a[0],r,o,{entity:t},s)}},n.prototype.onActionButtonClick=function(e,t,n){var i,a,r;e&&e.stopPropagation(),t&&(i=t.id,a=t.entityName,r=t.entityLabel),this.ctx.actionsApi.handleWidgetAction(e,n,i,a,{entity:t},r)},n.prototype.clearCache=function(){this.cellContentCache.length=0,this.cellStyleCache.length=0,this.rowStyleCache.length=0},n.\u0275fac=function(e){return new(e||n)(a["\u0275\u0275directiveInject"](T.Store),a["\u0275\u0275directiveInject"](a.ElementRef),a["\u0275\u0275directiveInject"](a.NgZone),a["\u0275\u0275directiveInject"](x.Overlay),a["\u0275\u0275directiveInject"](a.ViewContainerRef),a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](F.DatePipe),a["\u0275\u0275directiveInject"](B.TranslateService),a["\u0275\u0275directiveInject"](M.DomSanitizer))},n.\u0275cmp=a["\u0275\u0275defineComponent"]({type:n,selectors:[["tb-entities-table-widget"]],viewQuery:function(e,t){if(1&e&&(a["\u0275\u0275viewQuery"](H,1),a["\u0275\u0275viewQuery"](y.MatPaginator,1),a["\u0275\u0275viewQuery"](v.MatSort,1)),2&e){var n=void 0;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.searchInputField=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.paginator=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.sort=n.first)}},inputs:{ctx:"ctx"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:34,vars:30,consts:[[1,"tb-table-widget","tb-absolute-fill"],["fxFlex","","fxLayout","column",1,"tb-absolute-fill"],[1,"mat-table-toolbar",3,"fxShow"],[1,"mat-toolbar-tools"],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"matTooltip"],["fxFlex",""],["matInput","",3,"ngModel","placeholder","ngModelChange"],["searchInput",""],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"matTooltip","click"],["fxFlex","",1,"table-container"],["mat-table","","matSort","","matSortDisableClear","",3,"dataSource","trackBy","matSortActive","matSortDirection"],[3,"matColumnDef",4,"ngFor","ngForOf","ngForTrackBy"],["matColumnDef","actions",3,"stickyEnd"],[3,"ngStyle.gt-md",4,"matHeaderCellDef"],[3,"ngStyle.gt-md",4,"matCellDef"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"ngClass","ngStyle","click","dblclick",4,"matRowDef","matRowDefColumns"],["fxLayoutAlign","center center","translate","",1,"no-data-found",3,"fxShow"],["fxLayoutAlign","center center",1,"no-data-found",3,"fxShow"],[4,"ngIf"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions",4,"ngIf"],[3,"matColumnDef"],["mat-sort-header","",3,"ngStyle",4,"matHeaderCellDef"],[3,"innerHTML","ngStyle",4,"matCellDef"],["mat-sort-header","",3,"ngStyle"],[3,"innerHTML","ngStyle"],[3,"ngStyle.gt-md"],["fxHide","","fxShow.gt-md","","fxFlex","","fxLayout","row","fxLayoutAlign","end"],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click",4,"ngFor","ngForOf","ngForTrackBy"],["fxHide","","fxShow.lt-lg","",4,"ngIf"],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click"],["fxHide","","fxShow.lt-lg",""],["mat-button","","mat-icon-button","",3,"matMenuTriggerFor","click"],[1,"material-icons"],["xPosition","before"],["cellActionsMenu","matMenu"],["mat-menu-item","",3,"disabled","click",4,"ngFor","ngForOf","ngForTrackBy"],["mat-menu-item","",3,"disabled","click"],[3,"ngClass","ngStyle","click","dblclick"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"mat-toolbar",2),a["\u0275\u0275elementStart"](3,"div",3),a["\u0275\u0275elementStart"](4,"button",4),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275elementStart"](6,"mat-icon"),a["\u0275\u0275text"](7,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"mat-form-field",5),a["\u0275\u0275elementStart"](9,"mat-label"),a["\u0275\u0275text"](10,"\xa0"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"input",6,7),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.pageLink.textSearch=e}),a["\u0275\u0275pipe"](13,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"button",8),a["\u0275\u0275listener"]("click",function(){return t.exitFilterMode()}),a["\u0275\u0275pipe"](15,"translate"),a["\u0275\u0275elementStart"](16,"mat-icon"),a["\u0275\u0275text"](17,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"div",9),a["\u0275\u0275elementStart"](19,"table",10),a["\u0275\u0275template"](20,z,3,1,"ng-container",11),a["\u0275\u0275elementContainerStart"](21,12),a["\u0275\u0275template"](22,X,1,5,"mat-header-cell",13),a["\u0275\u0275template"](23,Z,4,8,"mat-cell",14),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275template"](24,ee,1,0,"mat-header-row",15),a["\u0275\u0275template"](25,ne,1,5,"mat-row",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"span",17),a["\u0275\u0275pipe"](27,"async"),a["\u0275\u0275text"](28,"entity.no-entities-prompt"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](29,"span",18),a["\u0275\u0275text"](30),a["\u0275\u0275pipe"](31,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](32,ie,1,0,"mat-divider",19),a["\u0275\u0275template"](33,ae,2,6,"mat-paginator",20),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",t.textSearchMode),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](5,20,"action.search")),a["\u0275\u0275advance"](7),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](13,22,"entity.search")),a["\u0275\u0275property"]("ngModel",t.pageLink.textSearch),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](15,24,"action.close")),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("dataSource",t.entityDatasource)("trackBy",t.trackByEntityId)("matSortActive",t.sortOrderProperty)("matSortDirection",t.pageLinkSortDirection()),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",t.columns)("ngForTrackBy",t.trackByColumnDef),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("stickyEnd",t.enableStickyAction),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",t.enableStickyHeader),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",a["\u0275\u0275pipeBind1"](27,26,t.entityDatasource.isEmpty())&&!t.entityDatasource.dataLoading),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("fxShow",t.entityDatasource.dataLoading),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](31,28,"common.loading")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",t.displayPagination),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.displayPagination))},directives:[P.b,P.f,D.MatToolbar,k.d,_.MatButton,L.MatTooltip,j.MatIcon,N.MatFormField,N.MatLabel,R.MatInput,U.DefaultValueAccessor,U.NgControlStatus,U.NgModel,V.MatTable,v.MatSort,F.NgForOf,V.MatColumnDef,V.MatHeaderCellDef,V.MatCellDef,V.MatHeaderRowDef,V.MatRowDef,P.e,B.TranslateDirective,F.NgIf,V.MatHeaderCell,v.MatSortHeader,F.NgStyle,k.e,V.MatCell,Q.MatMenuTrigger,Q.MatMenu,Q.MatMenuItem,V.MatHeaderRow,V.MatRow,F.NgClass,k.b,G.MatDivider,y.MatPaginator],pipes:[B.TranslatePipe,F.AsyncPipe],styles:["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-row.invisible[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   span.no-data-found[_ngcontent-%COMP%]{position:absolute;top:60px;bottom:0;left:0;right:0}","[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-paginator[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar.mat-table-toolbar[_ngcontent-%COMP%]:not([color=accent]){background:transparent}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]{height:39px;max-height:39px}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{height:39px;max-height:39px}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-footer-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-header-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-footer-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-header-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2){padding:0 5px}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:nth-child(2){padding:0 5px}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2){padding:0 5px}.tb-has-timewindow[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%], .tb-has-timewindow   [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]{height:65px;max-height:65px}.tb-has-timewindow[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%], .tb-has-timewindow   [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{height:65px;max-height:65px}"]}),n}(r.a);0,void 0;var oe=function(){function e(e,t,n,i){this.translate=e,this.dataKeys=t,this.subscription=n,this.ngZone=i,this.entitiesSubject=new p.a([]),this.pageDataSubject=new p.a(Object(m.a)()),this.currentEntity=null,this.dataLoading=!0}return e.prototype.connect=function(e){return this.entitiesSubject.asObservable()},e.prototype.disconnect=function(e){this.entitiesSubject.complete(),this.pageDataSubject.complete()},e.prototype.loadEntities=function(e,t,n){this.dataLoading=!0,this.appliedPageLink=e,this.appliedSortOrderLabel=t,this.subscription.subscribeForPaginatedData(0,e,n)},e.prototype.clear=function(){this.entitiesSubject.next([]),this.pageDataSubject.next(Object(m.a)())},e.prototype.dataUpdated=function(){var e=this,t=this.subscription.datasourcePages[0],n=this.subscription.dataPages[0],i=new Array;if(t.data.forEach(function(t,a){i.push(e.datasourceToEntityData(t,n.data[a]))}),this.appliedSortOrderLabel&&this.appliedSortOrderLabel.length){var a=this.appliedPageLink.sortOrder.direction===E.c.ASC;i=i.sort(function(t,n){return Object(I.e)(t,n,e.appliedSortOrderLabel,a)})}var r={data:i,totalPages:t.totalPages,totalElements:t.totalElements,hasNext:t.hasNext};this.ngZone.run(function(){e.entitiesSubject.next(i),e.pageDataSubject.next(r),e.dataLoading=!1})},e.prototype.datasourceToEntityData=function(e,t){var n={id:{},entityName:e.entityName,entityLabel:e.entityLabel?e.entityLabel:e.entityName};return e.entityId&&(n.id.id=e.entityId),e.entityType?(n.id.entityType=e.entityType,n.entityType=this.translate.instant(f.d.get(e.entityType).type)):n.entityType="",this.dataKeys.forEach(function(e,i){var a=t[i].data;a&&a.length&&a[0].length>1?t[i].dataKey.type===c.h.entityField&&n.hasOwnProperty(e.label)||(n[e.label]=a[0][1]):n[e.label]=""}),n},e.prototype.isEmpty=function(){return this.entitiesSubject.pipe(Object(b.a)(function(e){return!e.length}))},e.prototype.total=function(){return this.pageDataSubject.pipe(Object(b.a)(function(e){return e.totalElements}))},e.prototype.toggleCurrentEntity=function(e){return this.currentEntity!==e&&(this.currentEntity=e,!0)},e.prototype.isCurrentEntity=function(e){return this.currentEntity&&e&&this.currentEntity.id&&e.id&&this.currentEntity.id.id===e.id.id},e}()}).call(this,n("xexB"))},C6Vs:function(e,t,n){"use strict";n.d(t,"a",function(){return w});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("4j5O"),d=n("l7P3"),u=n("tyNb"),p=n("/t3+"),m=n("sYmb"),f=n("XiUz"),h=n("bTqV"),g=n("NFeN"),A=n("ofXK"),b=n("kmnG"),y=n("d3UM"),v=n("bv9b");function C(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",15)}function x(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",16),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275property"]("value",n.key),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.value.name," ")}}var w=function(e){function t(t,n,i,a,r,o,l){var c=e.call(this,t,n,r)||this;return c.store=t,c.router=n,c.data=i,c.errorStateMatcher=a,c.dialogRef=r,c.fb=o,c.dashboardUtils=l,c.submitted=!1,c.states=c.data.states,c.stateFormGroup=c.fb.group({stateId:[c.dashboardUtils.getRootStateId(c.states),[s.Validators.required]]}),c}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.save=function(){this.submitted=!0;var e=this.stateFormGroup.get("stateId").value;this.dialogRef.close(e)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](d.Store),a["\u0275\u0275directiveInject"](u.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder),a["\u0275\u0275directiveInject"](c.a))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-select-target-state-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:28,vars:22,consts:[[3,"formGroup","ngSubmit"],["color","accent"],["translate",""],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],["fxLayout","column",3,"disabled"],[1,"mat-block"],["required","","formControlName","stateId"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[3,"value"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2",2),a["\u0275\u0275text"](3,"dashboard.select-state"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",3),a["\u0275\u0275elementStart"](5,"button",4),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](6,"mat-icon",5),a["\u0275\u0275text"](7,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,C,1,0,"mat-progress-bar",6),a["\u0275\u0275pipe"](9,"async"),a["\u0275\u0275elementStart"](10,"div",7),a["\u0275\u0275elementStart"](11,"fieldset",8),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"mat-form-field",9),a["\u0275\u0275elementStart"](14,"mat-label",2),a["\u0275\u0275text"](15,"dashboard.state"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"mat-select",10),a["\u0275\u0275template"](17,x,2,2,"mat-option",11),a["\u0275\u0275pipe"](18,"keyvalue"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"div",12),a["\u0275\u0275elementStart"](20,"button",13),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](21,"async"),a["\u0275\u0275text"](22),a["\u0275\u0275pipe"](23,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](24,"button",14),a["\u0275\u0275pipe"](25,"async"),a["\u0275\u0275text"](26),a["\u0275\u0275pipe"](27,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.stateFormGroup),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](9,8,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](12,10,t.isLoading$)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngForOf",a["\u0275\u0275pipeBind1"](18,12,t.states)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](21,14,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](23,16,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](25,18,t.isLoading$)||t.stateFormGroup.invalid),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](27,20,"action.select")," "))},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,p.MatToolbar,m.TranslateDirective,f.b,h.MatButton,g.MatIcon,A.NgIf,o.MatDialogContent,f.f,b.MatFormField,b.MatLabel,y.MatSelect,s.RequiredValidator,s.NgControlStatus,s.FormControlName,A.NgForOf,o.MatDialogActions,f.e,v.MatProgressBar,r.MatOption],pipes:[A.AsyncPipe,A.KeyValuePipe,m.TranslatePipe],encapsulation:2}),t}(l.a);0,void 0},CJSR:function(e,t,n){"use strict";n.d(t,"a",function(){return X});var i=n("mrSG"),a=n("fXoL"),r=n("3Pt+"),o=n("8LU1"),s=n("gGt+"),l=n("g+M/"),c=n("//Q6"),d=n("4r/P"),u=n("LvDl"),p=n.n(u),m=n("XNiG"),f=n("1G5W"),h=n("wZkO"),g=n("7EHt"),A=n("CTyS"),b=n("OUR+"),y=n("XiUz"),v=n("kmnG"),C=n("qFsG"),x=n("ofXK"),w=n("d3UM"),S=n("bSwM"),E=n("FKr1"),I=n("llVA"),O=n("sYmb"),T=n("pNH3"),F=n("1jcm"),B=n("H3So");function M(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"section",4),a["\u0275\u0275elementStart"](1,"tb-profile-lwm2m-object-list",10),a["\u0275\u0275listener"]("addList",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().addObjectsList(e)})("removeList",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().removeObjectsList(e)}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](2,"tb-profile-lwm2m-observe-attr-telemetry",11),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("formGroup",i.lwm2mDeviceProfileFormGroup)}}function P(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.short-id-required")," "))}function D(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.short-id-range")," "))}function k(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.short-id-pattern")," "))}function _(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.lifetime-required")," "))}function L(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.lifetime-pattern")," "))}function j(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.default-min-period-required")," "))}function N(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.default-min-period-pattern")," "))}function R(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",22),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.bindingModeTypeNamesMap.get(n))," ")}}function U(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",12),a["\u0275\u0275elementStart"](1,"mat-form-field",13),a["\u0275\u0275elementStart"](2,"mat-label"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"input",14),a["\u0275\u0275template"](6,P,3,3,"mat-error",15),a["\u0275\u0275template"](7,D,3,3,"mat-error",15),a["\u0275\u0275template"](8,k,3,3,"mat-error",15),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"mat-form-field",13),a["\u0275\u0275elementStart"](10,"mat-label"),a["\u0275\u0275text"](11),a["\u0275\u0275pipe"](12,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](13,"input",16),a["\u0275\u0275template"](14,_,3,3,"mat-error",15),a["\u0275\u0275template"](15,L,3,3,"mat-error",15),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"mat-form-field",13),a["\u0275\u0275elementStart"](17,"mat-label"),a["\u0275\u0275text"](18),a["\u0275\u0275pipe"](19,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](20,"input",17),a["\u0275\u0275template"](21,j,3,3,"mat-error",15),a["\u0275\u0275template"](22,N,3,3,"mat-error",15),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](23,"mat-form-field",18),a["\u0275\u0275elementStart"](24,"mat-label"),a["\u0275\u0275text"](25),a["\u0275\u0275pipe"](26,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](27,"mat-select",19),a["\u0275\u0275template"](28,R,3,4,"mat-option",20),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](29,"mat-checkbox",21),a["\u0275\u0275text"](30),a["\u0275\u0275pipe"](31,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,13,"device-profile.lwm2m.short-id")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",n.lwm2mDeviceProfileFormGroup.get("bootstrap.servers.shortId").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.lwm2mDeviceProfileFormGroup.get("bootstrap.servers.shortId").hasError("min")||n.lwm2mDeviceProfileFormGroup.get("bootstrap.servers.shortId").hasError("max")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.lwm2mDeviceProfileFormGroup.get("bootstrap.servers.shortId").hasError("pattern")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](12,15,"device-profile.lwm2m.lifetime")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",n.lwm2mDeviceProfileFormGroup.get("bootstrap.servers.lifetime").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.lwm2mDeviceProfileFormGroup.get("bootstrap.servers.lifetime").hasError("pattern")||n.lwm2mDeviceProfileFormGroup.get("bootstrap.servers.lifetime").hasError("min")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](19,17,"device-profile.lwm2m.default-min-period")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",n.lwm2mDeviceProfileFormGroup.get("bootstrap.servers.defaultMinPeriod").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.lwm2mDeviceProfileFormGroup.get("bootstrap.servers.defaultMinPeriod").hasError("pattern")||n.lwm2mDeviceProfileFormGroup.get("bootstrap.servers.defaultMinPeriod").hasError("min")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](26,19,"device-profile.lwm2m.binding")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",n.bindingModeTypes),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](31,21,"device-profile.lwm2m.notification-storing")," ")}}function V(e,t){1&e&&a["\u0275\u0275element"](0,"tb-profile-lwm2m-device-config-server",23),2&e&&a["\u0275\u0275property"]("isBootstrapServer",!0)}function Q(e,t){1&e&&a["\u0275\u0275element"](0,"tb-profile-lwm2m-device-config-server",24),2&e&&a["\u0275\u0275property"]("isBootstrapServer",!1)}function G(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.fw-update-resource-required")," "))}function H(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-form-field",28),a["\u0275\u0275elementStart"](1,"mat-label"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"input",34),a["\u0275\u0275template"](5,G,3,3,"mat-error",15),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](3,2,"device-profile.lwm2m.fw-update-resource")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",n.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.fwUpdateResource").hasError("required"))}}function K(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.sw-update-resource-required")," "))}function q(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-form-field",28),a["\u0275\u0275elementStart"](1,"mat-label"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"input",35),a["\u0275\u0275template"](5,K,3,3,"mat-error",15),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](3,2,"device-profile.lwm2m.sw-update-resource")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",n.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.swUpdateResource").hasError("required"))}}function z(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"section",25),a["\u0275\u0275elementStart"](1,"fieldset",26),a["\u0275\u0275elementStart"](2,"legend",27),a["\u0275\u0275text"](3,"device-profile.lwm2m.fw-update"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"mat-form-field",28),a["\u0275\u0275elementStart"](5,"mat-label"),a["\u0275\u0275text"](6),a["\u0275\u0275pipe"](7,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"mat-select",29),a["\u0275\u0275elementStart"](9,"mat-option",22),a["\u0275\u0275text"](10),a["\u0275\u0275pipe"](11,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](12,"mat-option",22),a["\u0275\u0275text"](13),a["\u0275\u0275pipe"](14,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"mat-option",22),a["\u0275\u0275text"](16),a["\u0275\u0275pipe"](17,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](18,H,6,4,"mat-form-field",30),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"fieldset",26),a["\u0275\u0275elementStart"](20,"legend",27),a["\u0275\u0275text"](21,"device-profile.lwm2m.sw-update"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"mat-form-field",28),a["\u0275\u0275elementStart"](23,"mat-label"),a["\u0275\u0275text"](24),a["\u0275\u0275pipe"](25,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"mat-select",31),a["\u0275\u0275elementStart"](27,"mat-option",22),a["\u0275\u0275text"](28),a["\u0275\u0275pipe"](29,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](30,"mat-option",22),a["\u0275\u0275text"](31),a["\u0275\u0275pipe"](32,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](33,q,6,4,"mat-form-field",30),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](34,"fieldset",26),a["\u0275\u0275elementStart"](35,"legend",27),a["\u0275\u0275text"](36,"device-profile.power-saving-mode"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](37,"tb-power-mode-settings",32),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](38,"mat-slide-toggle",33),a["\u0275\u0275text"](39),a["\u0275\u0275pipe"](40,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](6),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](7,16,"device-profile.lwm2m.fw-update-strategy")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("value",1),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](11,18,"device-profile.lwm2m.fw-update-strategy-package")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("value",2),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](14,20,"device-profile.lwm2m.fw-update-strategy-package-uri")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("value",3),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](17,22,"device-profile.lwm2m.fw-update-strategy-data")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",2===n.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.fwUpdateStrategy").value),a["\u0275\u0275advance"](6),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](25,24,"device-profile.lwm2m.sw-update-strategy")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("value",1),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](29,26,"device-profile.lwm2m.sw-update-strategy-package")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("value",2),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](32,28,"device-profile.lwm2m.sw-update-strategy-package-uri")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",2===n.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.swUpdateStrategy").value),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("parentForm",n.clientSettingsFormGroup),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](40,30,"device-profile.lwm2m.composite-operations-support"))}}function W(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"section",36),a["\u0275\u0275element"](1,"tb-json-object-edit",37),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](2,3,"device-profile.transport-type-lwm2m")),a["\u0275\u0275property"]("sort",n.sortFunction)("ngModel",n.configurationValue)}}var X=function(){function e(e,t){var n=this;this.fb=e,this.deviceProfileService=t,this.disabled=!1,this.destroy$=new m.b,this.bindingModeTypes=Object.values(s.d),this.bindingModeTypeNamesMap=s.e,this.propagateChange=function(e){},this.initWriteValue=function(){var e=n.getObjectsFromJsonAllConfig();if(e.length>0){var t={property:"id",direction:d.a.ASC};n.deviceProfileService.getLwm2mObjects(t,e,null).subscribe(function(e){n.updateWriteValue(e)})}else n.updateWriteValue([])},this.updateWriteValue=function(e){n.lwm2mDeviceProfileFormGroup.patchValue({objectIds:e,observeAttrTelemetry:n.getObserveAttrTelemetryObjects(e),bootstrap:n.configurationValue.bootstrap,clientLwM2mSettings:{clientOnlyObserveAfterConnect:n.configurationValue.clientLwM2mSettings.clientOnlyObserveAfterConnect,fwUpdateStrategy:n.configurationValue.clientLwM2mSettings.fwUpdateStrategy||1,swUpdateStrategy:n.configurationValue.clientLwM2mSettings.swUpdateStrategy||1,fwUpdateResource:n.configurationValue.clientLwM2mSettings.fwUpdateResource||"",swUpdateResource:n.configurationValue.clientLwM2mSettings.swUpdateResource||"",powerMode:n.configurationValue.clientLwM2mSettings.powerMode||s.y.DRX,edrxCycle:n.configurationValue.clientLwM2mSettings.edrxCycle||s.g,pagingTransmissionWindow:n.configurationValue.clientLwM2mSettings.pagingTransmissionWindow||s.m,psmActivityTimer:n.configurationValue.clientLwM2mSettings.psmActivityTimer||s.p,compositeOperationsSupport:n.configurationValue.clientLwM2mSettings.compositeOperationsSupport||!1}},{emitEvent:!1}),n.disabled||(n.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.powerMode").updateValueAndValidity({onlySelf:!0}),n.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.fwUpdateStrategy").updateValueAndValidity({onlySelf:!0}),n.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.swUpdateStrategy").updateValueAndValidity({onlySelf:!0}))},this.updateModel=function(){var e=null;n.lwm2mDeviceProfileFormGroup.valid&&(e=n.configurationValue),n.propagateChange(e)},this.updateObserveAttrTelemetryObjectFormGroup=function(e){n.lwm2mDeviceProfileFormGroup.patchValue({observeAttrTelemetry:Object(c.e)(n.getObserveAttrTelemetryObjects(e))},{emitEvent:!1})},this.getObserveAttrTelemetryObjects=function(e){var t=Object(c.e)(e);if(n.configurationValue.observeAttr&&t.length>0){var i=n.configurationValue.observeAttr.attribute,a=n.configurationValue.observeAttr.telemetry,r=n.configurationValue.observeAttr.keyName;n.includesNotZeroInstance(i,a)&&n.addInstances(i,a,t),Object(c.o)(n.configurationValue.observeAttr.observe)&&n.configurationValue.observeAttr.observe.length>0&&n.updateObserveAttrTelemetryObjects(n.configurationValue.observeAttr.observe,t,s.w),Object(c.o)(i)&&i.length>0&&n.updateObserveAttrTelemetryObjects(i,t,s.a),Object(c.o)(a)&&a.length>0&&n.updateObserveAttrTelemetryObjects(a,t,s.B),Object(c.o)(n.configurationValue.observeAttr.attributeLwm2m)&&n.updateAttributes(t),Object(c.o)(r)&&(n.configurationValue.observeAttr.keyName=n.validateKeyNameObjects(r,i,a),n.updateKeyNameObjects(t))}return t},this.includesNotZeroInstance=function(e,t){var n=function(e){return!e.includes("/0/")};return e.some(n)||t.some(n)},this.addInstances=function(e,t,i){var a=e.concat(t).filter(function(e){return!e.includes("/0/")}).map(function(e){return e.slice(1,e.lastIndexOf("/"))}).sort(n.sortPath);new Set(a).forEach(function(e){var t=Array.from(e.split("/"),String),a=i.find(function(e){return e.keyId===t[0]});if(a){var r=n.updateInInstanceKeyName(a.instances[0],+t[1]);a.instances.push(r)}})},this.updateInInstanceKeyName=function(e,t){var n=Object(c.e)(e);return n.id=t,n.resources.forEach(function(e){e.keyName=p.a.camelCase(e.name+n.id)}),n},this.updateObserveAttrTelemetryObjects=function(e,t,n){e.forEach(function(e){var i=Array.from(e.substring(1).split("/"),String),a=i[0],r=i[1],o=i[2],s=t.find(function(e){return e.keyId===a});s&&(s.instances.find(function(e){return e.id===+r}).resources.find(function(e){return e.id===+o})[n]=!0)})},this.updateAttributes=function(e){Object.keys(n.configurationValue.observeAttr.attributeLwm2m).forEach(function(t){var i=Array.from(t.substring(1).split("/"),String),a=i[0],r=i[1],o=i[2],s=e.find(function(e){return e.keyId===a});if(s&&r){var l=s.instances.find(function(e){return e.id===+r});l&&o?l.resources.find(function(e){return e.id===+o}).attributes=n.configurationValue.observeAttr.attributeLwm2m[t]:l&&(l.attributes=n.configurationValue.observeAttr.attributeLwm2m[t])}else s&&(s.attributes=n.configurationValue.observeAttr.attributeLwm2m[t])})},this.updateKeyNameObjects=function(e){Object.keys(n.configurationValue.observeAttr.keyName).forEach(function(t){var i=Array.from(t.substring(1).split("/"),String),a=i[0],r=i[1],o=i[2],s=e.find(function(e){return e.keyId===a});s&&(s.instances.find(function(e){return e.id===+r}).resources.find(function(e){return e.id===+o}).keyName=n.configurationValue.observeAttr.keyName[t])})},this.validateKeyNameObjects=function(e,t,n){var i=JSON.parse(JSON.stringify(e)),a={},r=t.concat(n);return Object.keys(i).forEach(function(e){r.includes(e)&&(a[e]=i[e])}),a},this.updateObserveAttrTelemetryFromGroupToJson=function(e){var t=[],i=[],a=[],r={},o={};JSON.parse(JSON.stringify(e)).forEach(function(e){if(Object(c.o)(e.attributes)&&!Object(c.p)(e.attributes)){var n="/"+e.keyId;r[n]=e.attributes}e.hasOwnProperty(s.r)&&Array.isArray(e.instances)&&e.instances.forEach(function(n){if(Object(c.o)(n.attributes)&&!Object(c.p)(n.attributes)){var l="/"+e.keyId+"/"+n.id;r[l]=n.attributes}n.hasOwnProperty(s.A)&&Array.isArray(n.resources)&&n.resources.forEach(function(s){if(s.attribute||s.telemetry){var l="/"+e.keyId+"/"+n.id+"/"+s.id;s.observe&&t.push(l),s.attribute&&i.push(l),s.telemetry&&a.push(l),o[l]=s.keyName,Object(c.o)(s.attributes)&&!Object(c.p)(s.attributes)&&(r[l]=s.attributes)}})})}),n.configurationValue.observeAttr={observe:t,attribute:i,telemetry:a,keyName:n.sortObjectKeyPathJson(s.u,o),attributeLwm2m:r}},this.sortObjectKeyPathJson=function(e,t){return e===s.u?Object.keys(t).sort(n.sortPath).reduce(function(e,n){return e[n]=t[n],e},{}):e===s.w||e===s.a||e===s.B?Object.values(t).sort(n.sortPath).reduce(function(e,t){return e.push(t),e},[]):t},this.sortPath=function(e,t){return e.localeCompare(t,void 0,{numeric:!0,sensitivity:"base"})},this.getObjectsFromJsonAllConfig=function(){var e=new Set;return n.configurationValue.observeAttr&&(n.configurationValue.observeAttr.observe&&n.configurationValue.observeAttr.observe.forEach(function(t){e.add(Array.from(t.substring(1).split("/"),String)[0])}),n.configurationValue.observeAttr.attribute&&n.configurationValue.observeAttr.attribute.forEach(function(t){e.add(Array.from(t.substring(1).split("/"),String)[0])}),n.configurationValue.observeAttr.telemetry&&n.configurationValue.observeAttr.telemetry.forEach(function(t){e.add(Array.from(t.substring(1).split("/"),String)[0])})),e.size>0?Array.from(e):[]},this.addObjectsList=function(e){n.updateObserveAttrTelemetryObjectFormGroup(e)},this.removeObjectsList=function(e){var t=n.lwm2mDeviceProfileFormGroup.get("observeAttrTelemetry").value,i=t.findIndex(function(t){return t.keyId===e.keyId});i>=0&&t.splice(i,1),n.removeObserveAttrTelemetryFromJson(s.w,e.keyId),n.removeObserveAttrTelemetryFromJson(s.B,e.keyId),n.removeObserveAttrTelemetryFromJson(s.a,e.keyId),n.removeKeyNameFromJson(e.keyId),n.removeAttributesFromJson(e.keyId),n.updateObserveAttrTelemetryObjectFormGroup(t)},this.removeObserveAttrTelemetryFromJson=function(e,t){for(var i=function(e){return e.startsWith("/"+t)},a=n.configurationValue.observeAttr[e].findIndex(i);a>=0;)n.configurationValue.observeAttr[e].splice(a,1),a=n.configurationValue.observeAttr[e].findIndex(i,a)},this.removeKeyNameFromJson=function(e){var t=n.configurationValue.observeAttr.keyName;Object.keys(t).forEach(function(n){n.startsWith("/"+e)&&delete t[n]})},this.removeAttributesFromJson=function(e){var t=n.configurationValue.observeAttr.attributeLwm2m;Object.keys(t).forEach(function(n){n.startsWith("/"+e)&&delete t[n]})},this.lwm2mDeviceProfileFormGroup=this.fb.group({objectIds:[null],observeAttrTelemetry:[null],bootstrap:this.fb.group({servers:this.fb.group({binding:[s.f],shortId:[s.i,[r.Validators.required,r.Validators.min(1),r.Validators.max(65534),r.Validators.pattern("[0-9]*")]],lifetime:[s.j,[r.Validators.required,r.Validators.min(0),r.Validators.pattern("[0-9]*")]],notifIfDisabled:[s.l,[]],defaultMinPeriod:[s.k,[r.Validators.required,r.Validators.min(0),r.Validators.pattern("[0-9]*")]]}),bootstrapServer:[null,r.Validators.required],lwm2mServer:[null,r.Validators.required]}),clientLwM2mSettings:this.fb.group({clientOnlyObserveAfterConnect:[1,[]],fwUpdateStrategy:[1,[]],swUpdateStrategy:[1,[]],fwUpdateResource:[{value:"",disabled:!0},[]],swUpdateResource:[{value:"",disabled:!0},[]],powerMode:[s.y.DRX,r.Validators.required],edrxCycle:[{disabled:!0,value:0},r.Validators.required],psmActivityTimer:[{disabled:!0,value:0},r.Validators.required],pagingTransmissionWindow:[{disabled:!0,value:0},r.Validators.required],compositeOperationsSupport:[!1]})}),this.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.fwUpdateStrategy").valueChanges.pipe(Object(f.a)(this.destroy$)).subscribe(function(e){2===e?n.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.fwUpdateResource").enable({emitEvent:!1}):(n.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.fwUpdateResource").disable({emitEvent:!1}),n.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.fwUpdateResource").reset(s.h,{emitEvent:!1}))}),this.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.swUpdateStrategy").valueChanges.pipe(Object(f.a)(this.destroy$)).subscribe(function(e){2===e?n.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.swUpdateResource").enable({emitEvent:!1}):(n.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.swUpdateResource").disable({emitEvent:!1}),n.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.swUpdateResource").reset(s.q,{emitEvent:!1}))}),this.lwm2mDeviceProfileFormGroup.valueChanges.pipe(Object(f.a)(this.destroy$)).subscribe(function(e){n.updateDeviceProfileValue(e)}),this.sortFunction=this.sortObjectKeyPathJson}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(o.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.prototype.setDisabledState=function(e){this.disabled=e,e?this.lwm2mDeviceProfileFormGroup.disable({emitEvent:!1}):(this.lwm2mDeviceProfileFormGroup.enable({emitEvent:!1}),this.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.powerMode").updateValueAndValidity({onlySelf:!0}),this.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.fwUpdateStrategy").updateValueAndValidity({onlySelf:!0}),this.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings.swUpdateStrategy").updateValueAndValidity({onlySelf:!0}))},e.prototype.writeValue=function(e){return Object(i.b)(this,void 0,void 0,function(){return Object(i.e)(this,function(t){switch(t.label){case 0:return Object(c.o)(e)&&((null==e?void 0:e.clientLwM2mSettings)||(null==e?void 0:e.observeAttr)||(null==e?void 0:e.bootstrap))?(this.configurationValue=e,1===e.clientLwM2mSettings.fwUpdateStrategy&&Object(c.B)(e.clientLwM2mSettings.fwUpdateResource)?[4,this.defaultProfileConfig()]:[3,2]):[3,3];case 1:t.sent(),t.label=2;case 2:this.initWriteValue(),t.label=3;case 3:return[2]}})})},e.prototype.validate=function(){return this.lwm2mDeviceProfileFormGroup.valid?null:{lwm2mDeviceProfile:!1}},e.prototype.defaultProfileConfig=function(){return Object(i.b)(this,void 0,void 0,function(){var e,t,n;return Object(i.e)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Promise.all([this.deviceProfileService.getLwm2mBootstrapSecurityInfoBySecurityType(!0).toPromise(),this.deviceProfileService.getLwm2mBootstrapSecurityInfoBySecurityType(!1).toPromise()])];case 1:return n=i.sent(),e=n[0],t=n[1],[3,3];case 2:return i.sent(),e=Object(s.C)(),t=Object(s.E)(),[3,3];case 3:return this.configurationValue.bootstrap.bootstrapServer=e,this.configurationValue.bootstrap.lwm2mServer=t,this.lwm2mDeviceProfileFormGroup.patchValue({bootstrap:this.configurationValue.bootstrap},{emitEvent:!1}),[2]}})})},e.prototype.updateDeviceProfileValue=function(e){this.lwm2mDeviceProfileFormGroup.valid&&this.updateObserveAttrTelemetryFromGroupToJson(e.observeAttrTelemetry),this.configurationValue.bootstrap.bootstrapServer=e.bootstrap.bootstrapServer,this.configurationValue.bootstrap.lwm2mServer=e.bootstrap.lwm2mServer,this.configurationValue.bootstrap.servers=e.bootstrap.servers,this.configurationValue.clientLwM2mSettings=e.clientLwM2mSettings,this.updateModel()},Object.defineProperty(e.prototype,"clientSettingsFormGroup",{get:function(){return this.lwm2mDeviceProfileFormGroup.get("clientLwM2mSettings")},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](r.FormBuilder),a["\u0275\u0275directiveInject"](l.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-profile-lwm2m-device-transport-configuration"]],inputs:{required:"required"},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)(function(){return e}),multi:!0},{provide:r.NG_VALIDATORS,useExisting:Object(a.forwardRef)(function(){return e}),multi:!0}])],decls:34,vars:23,consts:[[2,"padding-bottom","16px","margin","0"],["dynamicHeight",""],[3,"label"],["matTabContent",""],[3,"formGroup"],["formGroupName","bootstrap",2,"padding","4px 2px"],["multi","true"],["matExpansionPanelContent","","formGroupName","servers"],["matExpansionPanelContent",""],["matTabContent","",3,"formGroup"],["formControlName","objectIds",3,"addList","removeList"],["formControlName","observeAttrTelemetry"],["fxLayout","row","fxLayout.xs","column","fxLayoutGap","8px","fxLayoutGap.xs","0px"],["fxFlex",""],["matInput","","type","number","min","1","max","65534","formControlName","shortId","required",""],[4,"ngIf"],["matInput","","type","number","min","0","formControlName","lifetime","required",""],["matInput","","type","number","min","0","formControlName","defaultMinPeriod","required",""],[1,"mat-block"],["formControlName","binding"],[3,"value",4,"ngFor","ngForOf"],["formControlName","notifIfDisabled","color","accent"],[3,"value"],["formControlName","bootstrapServer",3,"isBootstrapServer"],["formControlName","lwm2mServer",3,"isBootstrapServer"],["formGroupName","clientLwM2mSettings"],[1,"fields-group"],["translate","",1,"group-title"],["fxFlex","",1,"mat-block"],["formControlName","fwUpdateStrategy"],["class","mat-block","fxFlex","",4,"ngIf"],["formControlName","swUpdateStrategy"],[3,"parentForm"],["formControlName","compositeOperationsSupport",1,"mat-slider"],["matInput","","formControlName","fwUpdateResource","required",""],["matInput","","formControlName","swUpdateResource","required",""],[2,"padding","8px 0"],["readonly","",3,"sort","label","ngModel"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"section",0),a["\u0275\u0275elementStart"](1,"mat-tab-group",1),a["\u0275\u0275elementStart"](2,"mat-tab",2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275template"](4,M,3,1,"ng-template",3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"mat-tab",2),a["\u0275\u0275pipe"](6,"translate"),a["\u0275\u0275elementStart"](7,"section",4),a["\u0275\u0275elementStart"](8,"section",5),a["\u0275\u0275elementStart"](9,"mat-accordion",6),a["\u0275\u0275elementStart"](10,"mat-expansion-panel"),a["\u0275\u0275elementStart"](11,"mat-expansion-panel-header"),a["\u0275\u0275elementStart"](12,"mat-panel-title"),a["\u0275\u0275text"](13),a["\u0275\u0275pipe"](14,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](15,U,32,23,"ng-template",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"mat-expansion-panel"),a["\u0275\u0275elementStart"](17,"mat-expansion-panel-header"),a["\u0275\u0275elementStart"](18,"mat-panel-title"),a["\u0275\u0275text"](19),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](21,V,1,1,"ng-template",8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"mat-expansion-panel"),a["\u0275\u0275elementStart"](23,"mat-expansion-panel-header"),a["\u0275\u0275elementStart"](24,"mat-panel-title"),a["\u0275\u0275text"](25),a["\u0275\u0275pipe"](26,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](27,Q,1,1,"ng-template",8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"mat-tab",2),a["\u0275\u0275pipe"](29,"translate"),a["\u0275\u0275template"](30,z,41,32,"ng-template",9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](31,"mat-tab",2),a["\u0275\u0275pipe"](32,"translate"),a["\u0275\u0275template"](33,W,3,5,"ng-template",3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](3,9,"device-profile.lwm2m.model-tab")),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](6,11,"device-profile.lwm2m.servers")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("formGroup",t.lwm2mDeviceProfileFormGroup),a["\u0275\u0275advance"](6),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](14,13,"device-profile.lwm2m.servers")),a["\u0275\u0275advance"](6),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](20,15,"device-profile.lwm2m.bootstrap-server")),a["\u0275\u0275advance"](6),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](26,17,"device-profile.lwm2m.lwm2m-server")),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](29,19,"device-profile.lwm2m.others-tab")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("formGroup",t.lwm2mDeviceProfileFormGroup),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](32,21,"device-profile.lwm2m.config-json-tab")))},directives:[h.MatTabGroup,h.MatTab,h.MatTabContent,r.NgControlStatusGroup,r.FormGroupDirective,r.FormGroupName,g.MatAccordion,g.MatExpansionPanel,g.MatExpansionPanelHeader,g.MatExpansionPanelTitle,g.MatExpansionPanelContent,A.a,r.NgControlStatus,r.FormControlName,b.a,y.f,y.g,v.MatFormField,y.b,v.MatLabel,C.MatInput,r.NumberValueAccessor,r.DefaultValueAccessor,r.RequiredValidator,x.NgIf,w.MatSelect,x.NgForOf,S.MatCheckbox,v.MatError,E.MatOption,I.a,O.TranslateDirective,T.a,F.MatSlideToggle,B.a,r.NgModel],pipes:[O.TranslatePipe],styles:["[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]{padding:8px;margin:10px 0;border:1px groove rgba(0,0,0,.25);border-radius:4px}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{color:rgba(0,0,0,.7)}[_nghost-%COMP%]   .mat-slider[_ngcontent-%COMP%]{margin:8px 0 8px 10px}"]}),e}();0,void 0},CRwc:function(e,t,n){"use strict";n.d(t,"a",function(){return k});var i=n("fXoL"),a=n("0lYY"),r=n("ofXK"),o=n("znSr"),s=n("sYmb");function l(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"legend.min")))}function c(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"legend.max")))}function d(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"legend.avg")))}function u(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"th"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"legend.total")))}function p(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"tr",5),i["\u0275\u0275element"](1,"th",6),i["\u0275\u0275template"](2,l,3,3,"th",2),i["\u0275\u0275template"](3,c,3,3,"th",2),i["\u0275\u0275template"](4,d,3,3,"th",2),i["\u0275\u0275template"](5,u,3,3,"th",2),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!0===n.legendConfig.showMin),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!0===n.legendConfig.showMax),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!0===n.legendConfig.showAvg),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!0===n.legendConfig.showTotal)}}function m(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",12),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]().$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](a.legendData.data[n.dataIndex].min)}}function f(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",12),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]().$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](a.legendData.data[n.dataIndex].max)}}function h(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",12),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]().$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](a.legendData.data[n.dataIndex].avg)}}function g(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",12),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]().$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](a.legendData.data[n.dataIndex].total)}}var A=function(e){return{backgroundColor:e}},b=function(e,t){return{"tb-hidden-label":e,"tb-horizontal":t}};function y(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"tr",8),i["\u0275\u0275elementStart"](1,"td"),i["\u0275\u0275element"](2,"span",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"td",10),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"](2).toggleHideData(e.dataIndex)}),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](5,m,2,1,"td",11),i["\u0275\u0275template"](6,f,2,1,"td",11),i["\u0275\u0275template"](7,h,2,1,"td",11),i["\u0275\u0275template"](8,g,2,1,"td",11),i["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,r=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction1"](7,A,a.dataKey.color)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction2"](9,b,a.dataKey.hidden,r.isHorizontal)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.dataKey.label," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!0===r.legendConfig.showMin),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!0===r.legendConfig.showMax),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!0===r.legendConfig.showAvg),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!0===r.legendConfig.showTotal)}}function v(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,y,9,12,"tr",7),i["\u0275\u0275elementContainerEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",n.legendKeys())}}var C=function(e){return{"tb-hidden-label":e}};function x(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"td"),i["\u0275\u0275element"](1,"span",9),i["\u0275\u0275elementStart"](2,"span",10),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"](2).toggleHideData(e.dataIndex)}),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction1"](3,A,a.dataKey.color)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](5,C,a.dataKey.hidden)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.dataKey.label," ")}}var w=function(e){return{"tb-row-direction":e}};function S(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"tr",13),i["\u0275\u0275element"](1,"td"),i["\u0275\u0275template"](2,x,4,7,"td",14),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](2,w,!n.displayHeader)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",n.legendKeys())}}function E(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",12),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.legendData.data[n.dataIndex].min," ")}}function I(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"tr",8),i["\u0275\u0275elementStart"](1,"td",15),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,E,2,1,"td",16),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3,2,"legend.min")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",n.legendKeys())}}function O(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",12),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.legendData.data[n.dataIndex].max," ")}}function T(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"tr",8),i["\u0275\u0275elementStart"](1,"td",15),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,O,2,1,"td",16),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3,2,"legend.max")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",n.legendKeys())}}function F(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",12),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.legendData.data[n.dataIndex].avg," ")}}function B(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"tr",8),i["\u0275\u0275elementStart"](1,"td",15),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,F,2,1,"td",16),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3,2,"legend.avg")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",n.legendKeys())}}function M(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"td",12),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.legendData.data[n.dataIndex].total," ")}}function P(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"tr",8),i["\u0275\u0275elementStart"](1,"td",15),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,M,2,1,"td",16),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3,2,"legend.total")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",n.legendKeys())}}var D=function(e){return{marginRight:e}},k=function(){function e(){this.legendKeyHiddenChange=new i.EventEmitter}return e.prototype.ngOnInit=function(){this.displayHeader=!0===this.legendConfig.showMin||!0===this.legendConfig.showMax||!0===this.legendConfig.showAvg||!0===this.legendConfig.showTotal,this.isHorizontal=this.legendConfig.position===a.c.bottom||this.legendConfig.position===a.c.top,this.isRowDirection=this.legendConfig.direction===a.b.row},e.prototype.toggleHideData=function(e){var t=this.legendData.keys.find(function(t){return t.dataIndex===e}).dataKey;t.settings.disableDataHiding||(t.hidden=!t.hidden,this.legendKeyHiddenChange.emit(e))},e.prototype.legendKeys=function(){var e=this,t=this.legendData.keys;return this.legendConfig.sortDataKeys&&(t=this.legendData.keys.sort(function(e,t){return e.dataKey.label.localeCompare(t.dataKey.label)})),t.filter(function(t){return e.legendData.keys[t.dataIndex].dataKey.inLegend})},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-legend"]],inputs:{legendConfig:"legendConfig",legendData:"legendData"},outputs:{legendKeyHiddenChange:"legendKeyHiddenChange"},decls:10,vars:11,consts:[[1,"tb-legend",3,"ngClass","ngStyle"],["class","tb-legend-header",4,"ngIf"],[4,"ngIf"],["class","tb-legend-keys",3,"ngClass",4,"ngIf"],["class","tb-legend-keys",4,"ngIf"],[1,"tb-legend-header"],["colspan","2"],["class","tb-legend-keys",4,"ngFor","ngForOf"],[1,"tb-legend-keys"],[1,"tb-legend-line",3,"ngStyle"],[1,"tb-legend-label",3,"ngClass","click"],["class","tb-legend-value",4,"ngIf"],[1,"tb-legend-value"],[1,"tb-legend-keys",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"tb-legend-type"],["class","tb-legend-value",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"table",0),i["\u0275\u0275elementStart"](1,"thead"),i["\u0275\u0275template"](2,p,6,4,"tr",1),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"tbody"),i["\u0275\u0275template"](4,v,2,1,"ng-container",2),i["\u0275\u0275template"](5,S,3,4,"tr",3),i["\u0275\u0275template"](6,I,5,4,"tr",4),i["\u0275\u0275template"](7,T,5,4,"tr",4),i["\u0275\u0275template"](8,B,5,4,"tr",4),i["\u0275\u0275template"](9,P,5,4,"tr",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("ngClass",t.isRowDirection?"tb-legend-row":"tb-legend-column")("ngStyle",i["\u0275\u0275pureFunction1"](9,D,t.isRowDirection&&!t.displayHeader?"auto":"20px")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.isRowDirection),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.isRowDirection),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.isRowDirection),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.isRowDirection&&!0===t.legendConfig.showMin),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.isRowDirection&&!0===t.legendConfig.showMax),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.isRowDirection&&!0===t.legendConfig.showAvg),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.isRowDirection&&!0===t.legendConfig.showTotal))},directives:[r.NgClass,o.b,r.NgStyle,o.e,r.NgIf,r.NgForOf],pipes:[s.TranslatePipe],styles:["[_nghost-%COMP%]   table.tb-legend[_ngcontent-%COMP%]{font-size:12px}[_nghost-%COMP%]   table.tb-legend.tb-legend-column[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   table.tb-legend.tb-legend-row[_ngcontent-%COMP%]{width:auto;margin-left:auto}[_nghost-%COMP%]   table.tb-legend[_ngcontent-%COMP%]   .tb-legend-header[_ngcontent-%COMP%], [_nghost-%COMP%]   table.tb-legend[_ngcontent-%COMP%]   .tb-legend-value[_ngcontent-%COMP%]{text-align:right}[_nghost-%COMP%]   table.tb-legend[_ngcontent-%COMP%]   .tb-legend-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:0 10px 1px 0;color:#ff6e40;white-space:nowrap;font-size:12px}[_nghost-%COMP%]   table.tb-legend[_ngcontent-%COMP%]   .tb-legend-keys[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px}[_nghost-%COMP%]   table.tb-legend[_ngcontent-%COMP%]   .tb-legend-keys[_ngcontent-%COMP%]   td.tb-legend-label[_ngcontent-%COMP%], [_nghost-%COMP%]   table.tb-legend[_ngcontent-%COMP%]   .tb-legend-keys[_ngcontent-%COMP%]   td.tb-legend-value[_ngcontent-%COMP%]{padding:2px 10px;white-space:nowrap}[_nghost-%COMP%]   table.tb-legend[_ngcontent-%COMP%]   .tb-legend-keys[_ngcontent-%COMP%]   .tb-legend-type[_ngcontent-%COMP%]{min-width:50px;padding:0 10px 1px 0;font-weight:700;color:#ff6e40;text-align:right;white-space:nowrap}[_nghost-%COMP%]   table.tb-legend[_ngcontent-%COMP%]   .tb-legend-keys[_ngcontent-%COMP%]   .tb-legend-line[_ngcontent-%COMP%]{display:inline-block;width:15px;height:3px;vertical-align:middle}[_nghost-%COMP%]   table.tb-legend[_ngcontent-%COMP%]   .tb-legend-keys[_ngcontent-%COMP%]   .tb-legend-label[_ngcontent-%COMP%]{padding:2px 10px;text-align:left;white-space:nowrap;outline:none}[_nghost-%COMP%]   table.tb-legend[_ngcontent-%COMP%]   .tb-legend-keys[_ngcontent-%COMP%]   .tb-legend-label.tb-horizontal[_ngcontent-%COMP%]{width:95%}[_nghost-%COMP%]   table.tb-legend[_ngcontent-%COMP%]   .tb-legend-keys[_ngcontent-%COMP%]   .tb-legend-label.tb-hidden-label[_ngcontent-%COMP%]{text-decoration:line-through;opacity:.6}[_nghost-%COMP%]   table.tb-legend[_ngcontent-%COMP%]   .tb-legend-keys.tb-row-direction[_ngcontent-%COMP%]{display:inline-block}"]}),e}();0,void 0},CTyS:function(e,t,n){"use strict";n.d(t,"a",function(){return _});var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("vkgz"),s=n("pLZG"),l=n("/uUt"),c=n("5+tZ"),d=n("w1tV"),u=n("gGt+"),p=n("g+M/"),m=n("4r/P"),f=n("//Q6"),h=n("mbhL"),g=n("T4sd"),A=n("kmnG"),b=n("sYmb"),y=n("A5z7"),v=n("ofXK"),C=n("qFsG"),x=n("/1cH"),w=n("NFeN"),S=n("FKr1"),E=n("d5eY"),I=["objectInput"];function O(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-icon",14),i["\u0275\u0275text"](1,"close"),i["\u0275\u0275elementEnd"]())}function T(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-chip",12),i["\u0275\u0275listener"]("removed",function(){i["\u0275\u0275restoreView"](n);var e=t.$implicit;return i["\u0275\u0275nextContext"]().remove(e)}),i["\u0275\u0275text"](1),i["\u0275\u0275template"](2,O,2,0,"mat-icon",13),i["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("selectable",!r.disabled)("removable",!r.disabled),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate2"](" ",a.name," #",a.keyId," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!r.disabled)}}function F(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",15),i["\u0275\u0275element"](1,"span",16),i["\u0275\u0275pipe"](2,"highlight"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("innerHTML",n.keyId+": "+i["\u0275\u0275pipeBind2"](2,2,n.name,a.searchText),i["\u0275\u0275sanitizeHtml"])}}function B(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"span",1),i["\u0275\u0275text"](2,"device-profile.lwm2m.no-objects-found"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}var M=function(e){return{object:e}};function P(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind2"](2,1,"device-profile.lwm2m.no-objects-matching",i["\u0275\u0275pureFunction1"](4,M,n.truncate.transform(n.searchText,!0,6,"...")))," ")}}function D(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",15),i["\u0275\u0275template"](1,B,3,0,"div",17),i["\u0275\u0275template"](2,P,3,6,"ng-template",null,18,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](3),a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",null),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!a.textIsNotEmpty(a.searchText))("ngIfElse",n)}}function k(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.object-list-empty")," "))}var _=function(){function e(e,t,n){var r=this;this.truncate=e,this.deviceProfileService=t,this.fb=n,this.dirty=!1,this.objectsList=[],this.disabled=!1,this.searchText="",this.addList=new i.EventEmitter,this.removeList=new i.EventEmitter,this.propagateChange=function(e){},this.updateValidators=function(){r.lwm2mListFormGroup.get("objectsList").setValidators(r.required?[a.Validators.required]:[]),r.lwm2mListFormGroup.get("objectsList").updateValueAndValidity()},this.remove=function(e){var t=r.objectsList.indexOf(e);t>=0&&(r.objectsList.splice(t,1),r.lwm2mListFormGroup.get("objectsList").setValue(r.objectsList),r.removeList.next(e),r.clear())},this.displayObjectLwm2mFn=function(e){return e?e.name:""},this.fetchListObjects=function(e){r.searchText=e;var t=new h.b(u.x,0,r.searchText,{property:"id",direction:m.a.ASC});return r.deviceProfileService.getLwm2mObjectsPage(t)},this.onFocus=function(){r.dirty||(r.lwm2mListFormGroup.get("objectLwm2m").updateValueAndValidity({onlySelf:!0,emitEvent:!0}),r.dirty=!0)},this.lwm2mListFormGroup=this.fb.group({objectsList:[this.objectsList],objectLwm2m:[""]}),this.lwm2mListFormGroup.valueChanges.subscribe(function(e){var t=null;r.lwm2mListFormGroup.valid&&(t=e.objectsList),r.propagateChange(t)})}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(r.coerceBooleanProperty)(e),this.updateValidators()},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.filteredObjectsList=this.lwm2mListFormGroup.get("objectLwm2m").valueChanges.pipe(Object(o.a)(function(t){t&&!Object(f.A)(t)?e.add(t):null===t&&e.clear(e.objectInput.nativeElement.value)}),Object(s.a)(function(e){return Object(f.A)(e)}),Object(l.a)(),Object(c.b)(function(t){return e.fetchListObjects(t)}),Object(d.a)())},e.prototype.setDisabledState=function(e){this.disabled=e,e?(this.lwm2mListFormGroup.disable({emitEvent:!1}),Object(f.n)(this.objectInput)&&this.clear("",!1)):this.lwm2mListFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){this.searchText="",Object(f.o)(e)&&(Array.isArray(e)?this.objectsList=e:this.objectsList=[],this.lwm2mListFormGroup.patchValue({objectsList:this.objectsList},{emitEvent:!1}),this.dirty=!1)},e.prototype.validate=function(){return this.lwm2mListFormGroup.valid?null:{lwm2mListObj:!1}},e.prototype.add=function(e){Object(f.o)(this.objectsList)&&-1===this.objectsList.findIndex(function(t){return t.keyId===e.keyId})&&(this.objectsList.push(e),this.lwm2mListFormGroup.get("objectsList").setValue(this.objectsList),this.addList.next(this.objectsList)),this.clear()},e.prototype.textIsNotEmpty=function(e){return e&&e.length>0},e.prototype.clear=function(e,t){var n=this;void 0===e&&(e=""),void 0===t&&(t=!0),this.objectInput.nativeElement.value=e,this.lwm2mListFormGroup.get("objectLwm2m").patchValue(e,{emitEvent:t}),t&&setTimeout(function(){n.objectInput.nativeElement.blur(),n.objectInput.nativeElement.focus()},0)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](g.a),i["\u0275\u0275directiveInject"](p.a),i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-profile-lwm2m-object-list"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](I,1),2&e){var n;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.objectInput=n.first)}},inputs:{required:"required"},outputs:{addList:"addList",removeList:"removeList"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:16,vars:14,consts:[["appearance","standard",1,"mat-block",3,"formGroup"],["translate",""],["formControlName","objectsList",3,"required"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","objectLwm2m","matAutocompleteOrigin","",2,"max-width","200px",3,"matAutocompleteConnectedTo","matAutocomplete","matChipInputFor","focusin"],["objectInput","","origin","matAutocompleteOrigin"],[1,"tb-autocomplete",3,"displayWith"],["objectAutocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],[4,"ngIf"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[3,"value"],[3,"innerHTML"],[4,"ngIf","ngIfElse"],["searchNotEmpty",""]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-form-field",0),i["\u0275\u0275elementStart"](1,"mat-label",1),i["\u0275\u0275text"](2,"device-profile.lwm2m.object-list"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"mat-chip-list",2,3),i["\u0275\u0275template"](5,T,3,5,"mat-chip",4),i["\u0275\u0275elementStart"](6,"input",5,6),i["\u0275\u0275listener"]("focusin",function(){return t.onFocus()}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"mat-autocomplete",7,8),i["\u0275\u0275template"](11,F,3,5,"mat-option",9),i["\u0275\u0275pipe"](12,"async"),i["\u0275\u0275template"](13,D,4,3,"mat-option",10),i["\u0275\u0275pipe"](14,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](15,k,3,3,"mat-error",11),i["\u0275\u0275elementEnd"]()),2&e){var n,a=i["\u0275\u0275reference"](4),r=i["\u0275\u0275reference"](8),o=i["\u0275\u0275reference"](10);i["\u0275\u0275property"]("formGroup",t.lwm2mListFormGroup),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("required",t.required),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.objectsList),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("matAutocompleteConnectedTo",r)("matAutocomplete",o)("matChipInputFor",a),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("displayWith",t.displayObjectLwm2mFn),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](12,10,t.filteredObjectsList)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!(null!=(n=i["\u0275\u0275pipeBind1"](14,12,t.filteredObjectsList))&&n.length)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.lwm2mListFormGroup.get("objectsList").hasError("required"))}},directives:[A.MatFormField,a.NgControlStatusGroup,a.FormGroupDirective,A.MatLabel,b.TranslateDirective,y.MatChipList,a.NgControlStatus,a.FormControlName,a.RequiredValidator,v.NgForOf,C.MatInput,a.DefaultValueAccessor,x.MatAutocompleteTrigger,y.MatChipInput,x.MatAutocompleteOrigin,x.MatAutocomplete,v.NgIf,y.MatChip,w.MatIcon,y.MatChipRemove,S.MatOption,A.MatError],pipes:[v.AsyncPipe,E.a,b.TranslatePipe],encapsulation:2}),e}();0,void 0},CUDX:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("fXoL"),a=n("Qrxw"),r=function(){function e(e,t){this.viewContainerRef=e,this.statesControllerService=t}return e.prototype.ngOnInit=function(){this.init()},e.prototype.ngOnDestroy=function(){this.destroy()},e.prototype.ngOnChanges=function(e){for(var t=!1,n=0,i=Object.keys(e);n<i.length;n++){var a=i[n],r=e[a];r.firstChange||r.currentValue===r.previousValue||("statesControllerId"===a?this.reInit():"states"===a?this.stateControllerComponent.states=this.states:"dashboardId"===a?(this.stateControllerComponent.dashboardId=this.dashboardId,t=!0):"isMobile"===a?this.stateControllerComponent.isMobile=this.isMobile:"state"===a?this.stateControllerComponent.state=this.state:"currentState"===a?this.stateControllerComponent.currentState=this.currentState:"syncStateWithQueryParam"===a&&(this.stateControllerComponent.syncStateWithQueryParam=this.syncStateWithQueryParam))}t&&this.stateControllerComponent.reInit()},e.prototype.reInit=function(){this.destroy(),this.init()},e.prototype.init=function(){this.viewContainerRef.clear();var e=this.statesControllerService.getStateController(this.statesControllerId);e||(e=this.statesControllerService.getStateController("default"));var t=this.dashboardCtrl.dashboardCtx.instanceId+"_"+this.statesControllerId,n=this.statesControllerService.withdrawStateControllerState(t),i=e.factory;this.stateControllerComponentRef=this.viewContainerRef.createComponent(i),this.stateControllerComponent=this.stateControllerComponentRef.instance,this.dashboardCtrl.dashboardCtx.stateController=this.stateControllerComponent,this.stateControllerComponent.preservedState=n,this.stateControllerComponent.dashboardCtrl=this.dashboardCtrl,this.stateControllerComponent.stateControllerInstanceId=t,this.stateControllerComponent.state=this.state,this.stateControllerComponent.currentState=this.currentState,this.stateControllerComponent.syncStateWithQueryParam=this.syncStateWithQueryParam,this.stateControllerComponent.isMobile=this.isMobile,this.stateControllerComponent.states=this.states,this.stateControllerComponent.dashboardId=this.dashboardId},e.prototype.destroy=function(){this.stateControllerComponentRef&&this.stateControllerComponentRef.destroy()},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](i.ViewContainerRef),i["\u0275\u0275directiveInject"](a.a))},e.\u0275dir=i["\u0275\u0275defineDirective"]({type:e,selectors:[["tb-states-component"]],inputs:{statesControllerId:"statesControllerId",dashboardCtrl:"dashboardCtrl",dashboardId:"dashboardId",states:"states",state:"state",currentState:"currentState",syncStateWithQueryParam:"syncStateWithQueryParam",isMobile:"isMobile"},features:[i["\u0275\u0275NgOnChangesFeature"]]}),e}();0,void 0},CyoE:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return I});var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=(n("0G7Z"),n("OiFK")),s=n("//Q6"),l=n("0lYY"),c=n("U3y+"),d=n("HR/i"),u=n("l7P3"),p=n("XiUz"),m=n("ofXK"),f=n("znSr"),h=["switch"],g=["switchContainer"],A=["onoff"],b=["textMeasure"],y=["switchTitleContainer"],v=["switchTitle"],C=["switchErrorContainer"],x=["switchError"],w=function(e){return{pointerEvents:e}},S=function(e){return{paddingTop:e}},E=function(e){return{background:e}},I=function(t){function n(e,n){var i=t.call(this,n)||this;return i.utils=e,i.store=n,i.showTitle=!1,i.value=!1,i.error="",i.title="",i.checkboxId="onoff-"+i.utils.guid(),i}return Object(i.d)(n,t),n.prototype.ngOnInit=function(){var t=this;this.switchElement=e(this.switchElementRef.nativeElement),this.switchContainer=e(this.switchContainerRef.nativeElement),this.onoff=e(this.onoffRef.nativeElement),this.textMeasure=e(this.textMeasureRef.nativeElement),this.switchTitleContainer=e(this.switchTitleContainerRef.nativeElement),this.switchTitle=e(this.switchTitleRef.nativeElement),this.switchErrorContainer=e(this.switchErrorContainerRef.nativeElement),this.switchError=e(this.switchErrorRef.nativeElement),this.onoff.on("change",function(){t.value=!1===t.onoff.prop("checked"),t.onValue()}),this.switchResize$=new d.a(function(){t.resize()}),this.switchResize$.observe(this.switchContainerRef.nativeElement),this.init()},n.prototype.ngOnDestroy=function(){this.valueSubscription&&this.ctx.subscriptionApi.removeSubscription(this.valueSubscription.id),this.switchResize$&&this.switchResize$.disconnect(),this.ctx.controlApi.completedCommand()},n.prototype.init=function(){var e=this.ctx.settings;this.title=Object(s.n)(e.title)?e.title:"",this.showTitle=!(!this.title||!this.title.length);var t=!!Object(s.n)(e.initialValue)&&e.initialValue;this.setValue(t);var n=this.ctx.defaultSubscription.rpcEnabled;if(this.isSimulated=this.utils.widgetEditMode,this.requestTimeout=500,e.requestTimeout&&(this.requestTimeout=e.requestTimeout),this.requestPersistent=!1,e.requestPersistent&&(this.requestPersistent=e.requestPersistent),this.persistentPollingInterval=5e3,e.persistentPollingInterval&&(this.persistentPollingInterval=e.persistentPollingInterval),this.retrieveValueMethod="rpc",e.retrieveValueMethod&&e.retrieveValueMethod.length&&(this.retrieveValueMethod=e.retrieveValueMethod),this.valueKey="value",e.valueKey&&e.valueKey.length&&(this.valueKey=e.valueKey),this.parseValueFunction=function(e){return!!e},e.parseValueFunction&&e.parseValueFunction.length)try{this.parseValueFunction=new Function("data",e.parseValueFunction)}catch(i){this.parseValueFunction=function(e){return!!e}}if(this.convertValueFunction=function(e){return e},e.convertValueFunction&&e.convertValueFunction.length)try{this.convertValueFunction=new Function("value",e.convertValueFunction)}catch(i){this.convertValueFunction=function(e){return e}}this.getValueMethod="getValue",e.getValueMethod&&e.getValueMethod.length&&(this.getValueMethod=e.getValueMethod),this.setValueMethod="setValue",e.setValueMethod&&e.setValueMethod.length&&(this.setValueMethod=e.setValueMethod),n?this.isSimulated||("rpc"===this.retrieveValueMethod?this.rpcRequestValue():"attribute"!==this.retrieveValueMethod&&"timeseries"!==this.retrieveValueMethod||this.subscribeForValue()):this.onError("Target device is not set!")},n.prototype.resize=function(){var e=this.switchContainer.width(),t=this.switchContainer.height(),n=Math.min(e,t)/260;this.switchElement.css({"-webkit-transform":"scale("+n+")","-moz-transform":"scale("+n+")","-ms-transform":"scale("+n+")","-o-transform":"scale("+n+")",transform:"scale("+n+")"}),this.showTitle&&this.setFontSize(this.switchTitle,this.title,2*this.switchTitleContainer.height()/3,this.switchTitleContainer.width()),this.setFontSize(this.switchError,this.error,this.switchErrorContainer.height(),this.switchErrorContainer.width())},n.prototype.setFontSize=function(e,t,n,i){for(var a=this.measureTextWidth(t,n);a>i;)n--,a=this.measureTextWidth(t,n);e.css({fontSize:n+"px",lineHeight:n+"px"})},n.prototype.measureTextWidth=function(e,t){return this.textMeasure.css({fontSize:t+"px",lineHeight:t+"px"}),this.textMeasure.text(e),this.textMeasure.width()},n.prototype.onError=function(e){this.error=e,this.setFontSize(this.switchError,this.error,this.switchErrorContainer.height(),this.switchErrorContainer.width()),this.ctx.detectChanges()},n.prototype.setValue=function(e){this.value=!!e,this.onoff.prop("checked",!this.value)},n.prototype.onValue=function(){this.rpcUpdateValue(this.value)},n.prototype.rpcRequestValue=function(){var e=this;this.error="",this.ctx.controlApi.sendTwoWayCommand(this.getValueMethod,null,this.requestTimeout,this.requestPersistent,this.persistentPollingInterval).subscribe(function(t){e.setValue(e.parseValueFunction(t))},function(){var t=e.ctx.defaultSubscription.rpcErrorText;e.onError(t)})},n.prototype.rpcUpdateValue=function(e){var t=this;if(this.executingUpdateValue)return this.scheduledValue=e,void 0;this.scheduledValue=null,this.rpcValue=e,this.executingUpdateValue=!0,this.error="",this.ctx.controlApi.sendOneWayCommand(this.setValueMethod,this.convertValueFunction(e),this.requestTimeout,this.requestPersistent,this.persistentPollingInterval).subscribe(function(){t.executingUpdateValue=!1,null!=t.scheduledValue&&t.scheduledValue!==t.rpcValue&&t.rpcUpdateValue(t.scheduledValue)},function(){t.executingUpdateValue=!1;var e=t.ctx.defaultSubscription.rpcErrorText;t.onError(e)})},n.prototype.subscribeForValue=function(){var e=this,t=[{type:l.a.entity,entityType:c.b.DEVICE,entityId:this.ctx.defaultSubscription.targetDeviceId}];"attribute"===this.retrieveValueMethod?t[0].attributes=[{name:this.valueKey}]:t[0].timeseries=[{name:this.valueKey}];var n={callbacks:{onDataUpdated:function(t,n){return e.ctx.ngZone.run(function(){e.onDataUpdated(t,n)})},onDataUpdateError:function(t,n){return e.ctx.ngZone.run(function(){e.onDataUpdateError(t,n)})}}};this.ctx.subscriptionApi.createSubscriptionFromInfo(l.m.latest,t,n,!1,!0).subscribe(function(t){e.valueSubscription=t})},n.prototype.onDataUpdated=function(e,t){var n=!1,i=e.data;if(i.length){var a=i[0];if(a&&a.data&&a.data[0]){var r=a.data[0][1];if(Object(s.n)(r)){var o=null;try{o=this.parseValueFunction(JSON.parse(r))}catch(l){}n=!!o}}}this.setValue(n),t&&this.ctx.detectChanges()},n.prototype.onDataUpdateError=function(e,t){var n=this.utils.parseException(t),i=n.name;n.message&&(i+=": "+n.message),this.onError(i)},n.\u0275fac=function(e){return new(e||n)(a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](u.Store))},n.\u0275cmp=a["\u0275\u0275defineComponent"]({type:n,selectors:[["tb-round-switch"]],viewQuery:function(e,t){if(1&e&&(a["\u0275\u0275viewQuery"](h,3),a["\u0275\u0275viewQuery"](g,3),a["\u0275\u0275viewQuery"](A,3),a["\u0275\u0275viewQuery"](b,3),a["\u0275\u0275viewQuery"](y,3),a["\u0275\u0275viewQuery"](v,3),a["\u0275\u0275viewQuery"](C,3),a["\u0275\u0275viewQuery"](x,3)),2&e){var n=void 0;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.switchElementRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.switchContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.onoffRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.textMeasureRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.switchTitleContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.switchTitleRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.switchErrorContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.switchErrorRef=n.first)}},inputs:{ctx:"ctx"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:25,vars:15,consts:[["fxLayout","column",1,"tb-round-switch",3,"ngStyle"],["fxFlex","20","fxLayout","row","fxLayoutAlign","center center",1,"title-container",3,"fxShow"],["switchTitleContainer",""],[1,"switch-title"],["switchTitle",""],["id","switch-container","fxLayout","column","fxLayoutAlign","center center",3,"fxFlex","ngStyle"],["switchContainer",""],[1,"switch"],["switch",""],["type","checkbox","name","onoff",3,"id"],["onoff",""],[1,"back"],[1,"but",3,"for"],[1,"on"],[1,"off"],["fxLayout","row","fxLayoutAlign","center center",1,"error-container",3,"ngStyle"],["switchErrorContainer",""],[1,"switch-error"],["switchError",""],["id","text-measure"],["textMeasure",""]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1,2),a["\u0275\u0275elementStart"](3,"span",3,4),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",5,6),a["\u0275\u0275elementStart"](8,"div",7,8),a["\u0275\u0275element"](10,"input",9,10),a["\u0275\u0275elementStart"](12,"div",11),a["\u0275\u0275elementStart"](13,"label",12),a["\u0275\u0275elementStart"](14,"span",13),a["\u0275\u0275text"](15,"I"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"span",14),a["\u0275\u0275text"](17,"0"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"div",15,16),a["\u0275\u0275elementStart"](20,"span",17,18),a["\u0275\u0275text"](22),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](23,"div",19,20),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](9,w,t.ctx.isEdit?"none":"all")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",t.showTitle),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](t.title),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("fxFlex",t.showTitle?80:100),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](11,S,t.showTitle?"5px":"10px")),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("id",t.checkboxId),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("for",t.checkboxId),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](13,E,null!=t.error&&t.error.length?"rgba(255,255,255,0.25)":"none")),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](t.error))},directives:[p.f,m.NgStyle,f.e,p.b,p.e,f.d],styles:["[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]   .switch-title[_ngcontent-%COMP%]{font-weight:500;color:#757575;white-space:nowrap}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]{position:absolute;top:1%;right:0;left:0;z-index:4;height:14px}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   .switch-error[_ngcontent-%COMP%]{color:#ff3315;white-space:nowrap}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #text-measure[_ngcontent-%COMP%]{position:absolute;width:auto;height:auto;white-space:nowrap;visibility:hidden}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]{padding:10px}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;width:260px;min-width:260px;height:260px;min-height:260px;padding:25px;font-family:sans-serif;font-size:48px;color:#424242;cursor:pointer;background:#ddd;background:linear-gradient(180deg,#bbb,#ddd);border-radius:130px;box-shadow:0 0 0 8px rgba(0,0,0,.1),0 0 3px 1px rgba(0,0,0,.1),inset 0 8px 3px -8px hsla(0,0%,100%,.4)}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   .off[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   .on[_ngcontent-%COMP%]{position:absolute;width:100%;text-align:center;text-shadow:1px 1px 4px #4a4a4a}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   .on[_ngcontent-%COMP%]{top:10px;font-family:sans-serif;color:#444;transition:all .1s}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   .off[_ngcontent-%COMP%]{bottom:5px;transition:all .1s;transform:scaleY(.85)}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   .but[_ngcontent-%COMP%]{position:relative;display:block;width:200px;height:178px;font-size:48px;cursor:pointer;background-color:#d8d8d8;border-bottom-width:0;border-radius:400px 400px 400px 400px/400px 400px 300px 300px;box-shadow:inset 8px 6px 5px -7px #a2a2a2,inset -8px 6px 5px -7px #a2a2a2,inset 0 -3px 2px -2px hsla(0,0%,78%,.5),0 3px 3px -2px #fff,inset 0 -230px 60px -200px hsla(0,0%,100%,.2),inset 0 220px 40px -200px rgba(0,0,0,.3);transition:all .2s}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{box-sizing:border-box;width:210px;height:210px;padding:4px;cursor:pointer;background-color:#888787;background-image:linear-gradient(-90deg,transparent 30%,transparent 70%),linear-gradient(0deg,hsla(0,0%,59%,0) 30%,hsla(0,0%,59%,.2) 50%,hsla(0,0%,59%,0) 70%);border-radius:105px;box-shadow:30px 30px 30px -20px rgba(58,58,58,.3),-30px 30px 30px -20px rgba(58,58,58,.3),0 30px 30px 0 hsla(0,0%,6%,.3),inset 0 -1px 0 0 #484848;transition:all .2s}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .back[_ngcontent-%COMP%]   .off[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .back[_ngcontent-%COMP%]   .on[_ngcontent-%COMP%]{text-shadow:1px 1px 4px #4a4a4a}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .back[_ngcontent-%COMP%]   .on[_ngcontent-%COMP%]{top:10px;color:#4c4c4c;transform:scaleY(.85)}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .back[_ngcontent-%COMP%]   .off[_ngcontent-%COMP%]{bottom:5px;color:#444;transform:scaleY(1)}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .back[_ngcontent-%COMP%]   .but[_ngcontent-%COMP%]{margin-top:20px;background:#dcdcdc radial-gradient(circle closest-corner at 50% 15%,rgba(0,0,0,.3),transparent);border-radius:400px 400px 400px 400px/300px 300px 400px 400px;box-shadow:inset 8px -4px 5px -7px #a9a9a9,inset -8px -4px 5px -7px grey,0 -3px 8px -4px rgba(50,50,50,.4),inset 0 3px 4px -2px #9c9c9c,inset 0 280px 40px -200px rgba(0,0,0,.2),inset 0 -200px 40px -200px hsla(0,0%,71%,.2)}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .back[_ngcontent-%COMP%]{padding:2px 4px;background-image:linear-gradient(0deg,#868686 30%,transparent 70%),linear-gradient(90deg,hsla(0,0%,45%,0),hsla(0,0%,100%,.74) 50%,hsla(0,0%,41%,0));box-shadow:30px 30px 30px -20px rgba(49,49,49,.1),-30px 30px 30px -20px hsla(0,0%,44%,.1),0 30px 30px 0 rgba(0,0,0,.2),inset 0 1px 2px 0 hsla(0,0%,65%,.6)}"]}),n}(r.a);0,void 0}).call(this,n("xexB"))},DZlp:function(e,t,n){"use strict";n.d(t,"a",function(){return C});var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("XNiG"),s=n("itXk"),l=n("JX91"),c=n("1G5W"),d=n("XiUz"),u=n("kmnG"),p=n("sYmb"),m=n("f0Cb"),f=n("ofXK"),h=n("bSwM"),g=n("Qu3c"),A=n("qFsG"),b=n("QNnG");function y(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.key-name-required")," "))}function v(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",7),i["\u0275\u0275elementStart"](1,"div",8),i["\u0275\u0275elementStart"](2,"div",9),i["\u0275\u0275text"](3),i["\u0275\u0275elementStart"](4,"span",10),i["\u0275\u0275text"](5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",11),i["\u0275\u0275element"](7,"mat-checkbox",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"div",11),i["\u0275\u0275element"](9,"mat-checkbox",13),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"div",11),i["\u0275\u0275element"](11,"mat-checkbox",14),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"mat-form-field",15),i["\u0275\u0275element"](14,"mat-label"),i["\u0275\u0275element"](15,"input",16),i["\u0275\u0275template"](16,y,3,3,"mat-error",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](17,"span",5),i["\u0275\u0275element"](18,"tb-profile-lwm2m-attributes",18),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=t.index,r=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("formGroupName",a),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" #",n.get("id").value," "),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](n.get("name").value),i["\u0275\u0275advance"](6),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](12,8,"device-profile.lwm2m.edit-observe-select")),i["\u0275\u0275property"]("matTooltipDisabled",r.disabled||!r.isDisabledObserve(a)),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",n.get("keyName").hasError("required")||n.get("keyName").hasError("pattern")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("isAttributeTelemetry",r.isDisabledObserve(a))("modelName",r.getNameResourceLwm2m(n.value))}}var C=function(){function e(e){this.fb=e,this.disabled=!1,this.destroy$=new o.b,this.valueChange$=null,this.propagateChange=function(e){},this.resourcesFormGroup=this.fb.group({resources:this.fb.array([])})}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){var t=Object(r.coerceBooleanProperty)(e);this.requiredValue!==t&&(this.requiredValue=t)},enumerable:!1,configurable:!0}),e.prototype.ngOnDestroy=function(){this.valueChange$&&this.valueChange$.unsubscribe(),this.destroy$.next(),this.destroy$.complete()},e.prototype.registerOnTouched=function(e){},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.writeValue=function(e){this.updatedResources(e)},e.prototype.setDisabledState=function(e){this.disabled=e,e?this.resourcesFormGroup.disable({emitEvent:!1}):this.resourcesFormArray.controls.forEach(function(e){e.get("id").enable({emitEvent:!1}),e.get("name").enable({emitEvent:!1}),e.get("keyName").enable({emitEvent:!1}),e.get("attribute").enable({emitEvent:!1}),e.get("telemetry").enable({onlySelf:!0}),e.get("attributes").enable({emitEvent:!1})})},e.prototype.validate=function(){return this.resourcesFormGroup.valid?null:{resources:!1}},Object.defineProperty(e.prototype,"resourcesFormArray",{get:function(){return this.resourcesFormGroup.get("resources")},enumerable:!1,configurable:!0}),e.prototype.getNameResourceLwm2m=function(e){return"#"+e.id+" "+e.name},e.prototype.updatedResources=function(e){var t=this;if(e.length===this.resourcesFormArray.length)this.resourcesFormArray.patchValue(e,{onlySelf:!0});else{this.valueChange$&&this.valueChange$.unsubscribe();var n=[];e&&e.forEach(function(e){n.push(t.createdResourceFormGroup(e))}),this.resourcesFormGroup.setControl("resources",this.fb.array(n)),this.disabled&&this.resourcesFormGroup.disable({emitEvent:!1}),this.valueChange$=this.resourcesFormGroup.valueChanges.subscribe(function(){t.updateModel(t.resourcesFormGroup.getRawValue().resources)})}},e.prototype.createdResourceFormGroup=function(e){var t=this,n=this.fb.group({id:[e.id],name:[e.name],attribute:[e.attribute],telemetry:[e.telemetry],observe:[e.observe],keyName:[e.keyName,[a.Validators.required,a.Validators.pattern("(.|\\s)*\\S(.|\\s)*")]],attributes:[e.attributes]});return Object(s.b)([n.get("attribute").valueChanges.pipe(Object(l.a)(e.attribute),Object(c.a)(this.destroy$)),n.get("telemetry").valueChanges.pipe(Object(l.a)(e.telemetry),Object(c.a)(this.destroy$))]).subscribe(function(e){var i=e[0],a=e[1];t.disabled||(i||a?n.get("observe").enable({emitEvent:!1}):(n.get("observe").disable({emitEvent:!1}),n.get("observe").patchValue(!1,{emitEvent:!1}),n.get("attributes").patchValue({},{emitEvent:!1})))}),n},e.prototype.updateModel=function(e){e&&this.resourcesFormGroup.valid?this.propagateChange(e):this.propagateChange(null)},e.prototype.trackByParams=function(e,t){return t.id},e.prototype.isDisabledObserve=function(e){return this.resourcesFormArray.at(e).get("observe").disabled},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-profile-lwm2m-observe-attr-telemetry-resource"]],inputs:{disabled:"disabled",required:"required"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:19,vars:3,consts:[[3,"formGroup"],["fxLayout","row","fxLayoutAlign","start center"],["fxFlex","30"],["translate",""],["fxFlex","10",1,"checkbox-column-title"],["fxFlex",""],["formArrayName","resources",4,"ngFor","ngForOf","ngForTrackBy"],["formArrayName","resources"],["fxLayout","row","fxLayoutAlign","start center",1,"resource-list",3,"formGroupName"],["fxFlex","30",1,"resource-name"],[1,"name"],["fxFlex","10","fxLayoutAlign","center center"],["formControlName","attribute","color","warn"],["formControlName","telemetry","color","accent"],["fxFlex","10","formControlName","observe","color","accent","matTooltipPosition","above",3,"matTooltip","matTooltipDisabled"],["fxFlex","33","hideRequiredMarker",""],["matInput","","type","text","formControlName","keyName","required",""],[4,"ngIf"],["formControlName","attributes","isResource","true",3,"isAttributeTelemetry","modelName"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"section",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275elementStart"](3,"mat-label",3),i["\u0275\u0275text"](4,"device-profile.lwm2m.resource-label"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",4),i["\u0275\u0275elementStart"](6,"mat-label",3),i["\u0275\u0275text"](7,"device-profile.lwm2m.attribute-label"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"div",4),i["\u0275\u0275elementStart"](9,"mat-label",3),i["\u0275\u0275text"](10,"device-profile.lwm2m.telemetry-label"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"div",4),i["\u0275\u0275elementStart"](12,"mat-label",3),i["\u0275\u0275text"](13,"device-profile.lwm2m.observe-label"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"div",5),i["\u0275\u0275elementStart"](15,"mat-label",3),i["\u0275\u0275text"](16,"device-profile.lwm2m.key-name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](17,"mat-divider"),i["\u0275\u0275template"](18,v,19,10,"div",6),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.resourcesFormGroup),i["\u0275\u0275advance"](18),i["\u0275\u0275property"]("ngForOf",t.resourcesFormArray.controls)("ngForTrackBy",t.trackByParams))},directives:[a.NgControlStatusGroup,a.FormGroupDirective,d.f,d.e,d.b,u.MatLabel,p.TranslateDirective,m.MatDivider,f.NgForOf,a.FormArrayName,a.FormGroupName,h.MatCheckbox,a.NgControlStatus,a.FormControlName,g.MatTooltip,u.MatFormField,A.MatInput,a.DefaultValueAccessor,a.RequiredValidator,f.NgIf,b.a,u.MatError],pipes:[p.TranslatePipe],styles:["[_nghost-%COMP%]   .resource-name[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .resource-name[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:500}[_nghost-%COMP%]   .checkbox-column-title[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   .mat-divider[_ngcontent-%COMP%]{margin-bottom:4px}[_nghost-%COMP%]   .resource-list[_ngcontent-%COMP%]{padding-bottom:8px;height:42px}[_nghost-%COMP%]     .resource-list mat-form-field .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     .resource-list mat-form-field .mat-form-field-wrapper .mat-form-field-infix{border-top-width:.2em;width:auto;min-width:auto}[_nghost-%COMP%]     .resource-list mat-form-field .mat-form-field-wrapper .mat-form-field-underline{bottom:0}[_nghost-%COMP%]     .resource-list mat-form-field .mat-form-field-wrapper .mat-form-field-subscript-wrapper{margin-top:1.8em}"]}),e}();0,void 0},Dgsq:function(e,t,n){"use strict";n.d(t,"a",function(){return x});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("gmuX"),l=n("OiFK"),c=n("l7P3"),d=n("tyNb"),u=n("3Pt+"),p=n("sYmb"),m=n("/t3+"),f=n("XiUz"),h=n("bTqV"),g=n("NFeN"),A=n("ofXK"),b=n("V4k/"),y=n("bv9b");function v(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",13)}function C(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"button",14),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,n.isLoading$)||n.alarmScheduleFormGroup.invalid||!n.alarmScheduleFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](3,4,"action.save")," ")}}var x=function(e){function t(t,n,i,a,r,o,s,l){var c=e.call(this,t,n,r)||this;return c.store=t,c.router=n,c.data=i,c.errorStateMatcher=a,c.dialogRef=r,c.fb=o,c.utils=s,c.translate=l,c.readonly=c.data.readonly,c.alarmSchedule=c.data.alarmSchedule,c.submitted=!1,c.alarmScheduleFormGroup=c.fb.group({alarmSchedule:[c.alarmSchedule]}),c.readonly&&c.alarmScheduleFormGroup.disable({emitEvent:!1}),c}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.save=function(){this.submitted=!0,this.alarmSchedule=this.alarmScheduleFormGroup.get("alarmSchedule").value,this.dialogRef.close(this.alarmSchedule)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](c.Store),a["\u0275\u0275directiveInject"](d.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](u.FormBuilder),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](p.TranslateService))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-alarm-schedule-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:22,vars:17,consts:[[2,"width","800px",3,"formGroup","ngSubmit"],["color","accent"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["fxFlex","","fxLayout","column"],["formControlName","alarmSchedule"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled",4,"ngIf"],["color","warn","mode","indeterminate"],["mat-raised-button","","color","accent","type","submit",3,"disabled"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,v,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275elementStart"](11,"div",6),a["\u0275\u0275elementStart"](12,"fieldset",7),a["\u0275\u0275pipe"](13,"async"),a["\u0275\u0275elementStart"](14,"div",8),a["\u0275\u0275element"](15,"tb-alarm-schedule",9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"div",10),a["\u0275\u0275elementStart"](17,"button",11),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](18,"async"),a["\u0275\u0275text"](19),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](21,C,4,6,"button",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.alarmScheduleFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,7,t.readonly?"device-profile.schedule":"device-profile.edit-schedule")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,9,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](13,11,t.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](18,13,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](20,15,t.readonly?"action.close":"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!t.readonly))},directives:[u["\u0275angular_packages_forms_forms_ba"],u.NgControlStatusGroup,u.FormGroupDirective,m.MatToolbar,f.b,h.MatButton,g.MatIcon,A.NgIf,o.MatDialogContent,f.f,b.a,u.NgControlStatus,u.FormControlName,o.MatDialogActions,f.e,y.MatProgressBar],pipes:[p.TranslatePipe,A.AsyncPipe],encapsulation:2}),t}(s.a);0,void 0},E4Bx:function(e,t,n){"use strict";n.d(t,"a",function(){return j});var i=n("fXoL"),a=n("3Pt+"),r=n("LRne"),o=n("Kj3r"),s=n("vkgz"),l=n("lJxs"),c=n("/uUt"),d=n("eIep"),u=n("w1tV"),p=n("JIr8"),m=n("8LU1"),f=n("U3y+"),h=n("21Fy"),g=n("T4sd"),A=n("C4fA"),b=n("/1cH"),y=n("8km5"),v=n("l7P3"),C=n("sYmb"),x=n("kmnG"),w=n("qFsG"),S=n("ofXK"),E=n("bTqV"),I=n("NFeN"),O=n("FKr1"),T=n("d5eY"),F=["ruleChainInput"];function B(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",9),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().clear()}),i["\u0275\u0275elementStart"](1,"mat-icon",10),i["\u0275\u0275text"](2,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function M(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",11),i["\u0275\u0275element"](1,"span",12),i["\u0275\u0275pipe"](2,"highlight"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind2"](2,2,n.name,a.searchText),i["\u0275\u0275sanitizeHtml"])}}function P(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"span",18),i["\u0275\u0275text"](2,"device-profile.no-device-profiles-found"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}var D=function(e){return{entity:e}};function k(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,n.translate.get("rulechain.no-rulechains-matching",i["\u0275\u0275pureFunction1"](3,D,n.truncate.transform(n.searchText,!0,6,"..."))))," ")}}function _(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-option",13),i["\u0275\u0275elementStart"](1,"div",14),i["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),i["\u0275\u0275template"](2,P,3,0,"div",15),i["\u0275\u0275template"](3,k,3,5,"ng-template",null,16,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementStart"](5,"span"),i["\u0275\u0275elementStart"](6,"a",17),i["\u0275\u0275listener"]("click",function(e){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"]();return t.createDefaultRuleChain(e,t.searchText)}),i["\u0275\u0275text"](7,"rulechain.create-new-rulechain"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=i["\u0275\u0275reference"](4),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",null),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!r.textIsNotEmpty(r.searchText))("ngIfElse",a)}}function L(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"rulechain.rulechain-required")," "))}var j=function(){function e(e,t,n,i,a,r){this.store=e,this.translate=t,this.truncate=n,this.entityService=i,this.ruleChainService=a,this.fb=r,this.ruleChainLabel="rulechain.rulechain",this.searchText="",this.dirty=!1,this.propagateChange=function(e){},this.selectRuleChainFormGroup=this.fb.group({ruleChainId:[null]})}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(m.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.filteredRuleChains=this.selectRuleChainFormGroup.get("ruleChainId").valueChanges.pipe(Object(o.a)(150),Object(s.a)(function(t){var n;n="string"!=typeof t&&t?t.id.id:null,e.updateView(n),null===t&&e.clear()}),Object(l.a)(function(e){return e?"string"==typeof e?e:e.name:""}),Object(c.a)(),Object(d.a)(function(t){return e.fetchRuleChain(t)}),Object(u.a)())},e.prototype.ngAfterViewInit=function(){},e.prototype.getCurrentEntity=function(){var e=this.selectRuleChainFormGroup.get("ruleChainId").value;return e&&"string"!=typeof e?e:null},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.selectRuleChainFormGroup.disable({emitEvent:!1}):this.selectRuleChainFormGroup.enable({emitEvent:!1})},e.prototype.textIsNotEmpty=function(e){return e&&e.length>0},e.prototype.writeValue=function(e){var t=this;if(this.searchText="",null!=e){var n=f.b.RULE_CHAIN;this.entityService.getEntity(n,e,{ignoreLoading:!0,ignoreErrors:!0}).subscribe(function(e){t.modelValue=e.id.id,t.selectRuleChainFormGroup.get("ruleChainId").patchValue(e,{emitEvent:!1})},function(){t.modelValue=null,t.selectRuleChainFormGroup.get("ruleChainId").patchValue("",{emitEvent:!1}),null!==e&&t.propagateChange(t.modelValue)})}else this.modelValue=null,this.selectRuleChainFormGroup.get("ruleChainId").patchValue("",{emitEvent:!1});this.dirty=!0},e.prototype.onFocus=function(){this.dirty&&(this.selectRuleChainFormGroup.get("ruleChainId").updateValueAndValidity({onlySelf:!0,emitEvent:!0}),this.dirty=!1)},e.prototype.reset=function(){this.selectRuleChainFormGroup.get("ruleChainId").patchValue("",{emitEvent:!1})},e.prototype.updateView=function(e){this.modelValue!==e&&(this.modelValue=e,this.propagateChange(this.modelValue))},e.prototype.displayRuleChainFn=function(e){return e?e.name:void 0},e.prototype.fetchRuleChain=function(e){return this.searchText=e,this.entityService.getEntitiesByNameFilter(f.b.RULE_CHAIN,e,50,y.a.CORE,{ignoreLoading:!0}).pipe(Object(p.a)(function(){return Object(r.a)([])}))},e.prototype.clear=function(){var e=this;this.selectRuleChainFormGroup.get("ruleChainId").patchValue("",{emitEvent:!0}),setTimeout(function(){e.ruleChainInput.nativeElement.blur(),e.ruleChainInput.nativeElement.focus()},0)},e.prototype.createDefaultRuleChain=function(e,t){var n=this;e.preventDefault(),this.ruleChainAutocomplete.closePanel(),this.ruleChainService.createDefaultRuleChain(t.trim()).subscribe(function(e){n.selectRuleChainFormGroup.get("ruleChainId").patchValue(e)})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](v.Store),i["\u0275\u0275directiveInject"](C.TranslateService),i["\u0275\u0275directiveInject"](g.a),i["\u0275\u0275directiveInject"](h.a),i["\u0275\u0275directiveInject"](A.a),i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-rule-chain-autocomplete"]],viewQuery:function(e,t){if(1&e&&(i["\u0275\u0275viewQuery"](F,3),i["\u0275\u0275viewQuery"](F,1,b.MatAutocompleteTrigger)),2&e){var n=void 0;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.ruleChainInput=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.ruleChainAutocomplete=n.first)}},inputs:{labelText:"labelText",requiredText:"requiredText",required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:12,vars:15,consts:[[1,"mat-block",3,"formGroup"],["matInput","","type","text","formControlName","ruleChainId",3,"placeholder","required","matAutocomplete","focusin"],["ruleChainInput",""],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"tb-autocomplete",3,"displayWith"],["ruleChainAutocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["class","tb-not-found",3,"value",4,"ngIf"],[4,"ngIf"],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"material-icons"],[3,"value"],[3,"innerHTML"],[1,"tb-not-found",3,"value"],[1,"tb-not-found-content",3,"click"],[4,"ngIf","ngIfElse"],["searchNotEmpty",""],["translate","",3,"click"],["translate",""]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-form-field",0),i["\u0275\u0275elementStart"](1,"input",1,2),i["\u0275\u0275listener"]("focusin",function(){return t.onFocus()}),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,B,3,0,"button",3),i["\u0275\u0275elementStart"](5,"mat-autocomplete",4,5),i["\u0275\u0275template"](7,M,3,5,"mat-option",6),i["\u0275\u0275pipe"](8,"async"),i["\u0275\u0275template"](9,_,8,3,"mat-option",7),i["\u0275\u0275pipe"](10,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](11,L,3,3,"mat-error",8),i["\u0275\u0275elementEnd"]()),2&e){var n,a=i["\u0275\u0275reference"](6);i["\u0275\u0275property"]("formGroup",t.selectRuleChainFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](3,9,t.ruleChainLabel)),i["\u0275\u0275property"]("required",t.required)("matAutocomplete",a),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",t.selectRuleChainFormGroup.get("ruleChainId").value&&!t.disabled),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("displayWith",t.displayRuleChainFn),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](8,11,t.filteredRuleChains)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!(null!=(n=i["\u0275\u0275pipeBind1"](10,13,t.filteredRuleChains))&&n.length)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.selectRuleChainFormGroup.get("ruleChainId").hasError("required"))}},directives:[x.MatFormField,a.NgControlStatusGroup,a.FormGroupDirective,w.MatInput,a.DefaultValueAccessor,b.MatAutocompleteTrigger,a.NgControlStatus,a.FormControlName,a.RequiredValidator,S.NgIf,b.MatAutocomplete,S.NgForOf,E.MatButton,x.MatSuffix,I.MatIcon,O.MatOption,C.TranslateDirective,x.MatError],pipes:[C.TranslatePipe,S.AsyncPipe,T.a],encapsulation:2}),e}();0,void 0},EWcq:function(e,t,n){"use strict";n.d(t,"a",function(){return _});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("0lYY"),d=n("OiFK"),u=n("xKAQ"),p=n("S+vS"),m=n("//Q6"),f=n("hqxT"),h=n("l7P3"),g=n("tyNb"),A=n("sYmb"),b=n("/t3+"),y=n("XiUz"),v=n("bTqV"),C=n("NFeN"),x=n("ofXK"),w=n("f0Cb"),S=n("znSr"),E=n("Qu3c"),I=n("bv9b"),O=n("kmnG"),T=n("qFsG"),F=n("c3m7"),B=n("1jcm");function M(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",21)}function P(e,t){1&e&&a["\u0275\u0275element"](0,"div",22)}function D(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"entity.alias-required")," "))}function k(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",23),a["\u0275\u0275elementStart"](1,"span",9),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"div",24),a["\u0275\u0275elementStart"](4,"mat-form-field",25),a["\u0275\u0275element"](5,"mat-label"),a["\u0275\u0275element"](6,"input",26),a["\u0275\u0275pipe"](7,"translate"),a["\u0275\u0275template"](8,D,3,3,"mat-error",27),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](9,"tb-entity-filter-view",28),a["\u0275\u0275elementStart"](10,"section",29),a["\u0275\u0275element"](11,"mat-slide-toggle",30),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](12,"button",31),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](n);var e=t.index;return a["\u0275\u0275nextContext"]().editAlias(e)}),a["\u0275\u0275pipe"](13,"async"),a["\u0275\u0275pipe"](14,"translate"),a["\u0275\u0275elementStart"](15,"mat-icon"),a["\u0275\u0275text"](16,"edit"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"button",31),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](n);var e=t.index;return a["\u0275\u0275nextContext"]().removeAlias(e)}),a["\u0275\u0275pipe"](18,"async"),a["\u0275\u0275pipe"](19,"translate"),a["\u0275\u0275elementStart"](20,"mat-icon"),a["\u0275\u0275text"](21,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=t.index,o=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"]("",r+1,"."),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](7,10,"entity.alias")),a["\u0275\u0275property"]("formControl",i.get("alias")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",i.get("alias").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formControl",i.get("filter")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("formControl",i.get("resolveMultiple")),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](14,14,"alias.edit")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](13,12,o.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](19,18,"entity.remove-alias")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](18,16,o.isLoading$))}}var _=function(e){function t(t,n,i,a,r,o,s,l,d,u){var p=e.call(this,t,n,r)||this;if(p.store=t,p.router=n,p.data=i,p.errorStateMatcher=a,p.dialogRef=r,p.fb=o,p.utils=s,p.translate=l,p.dialogs=d,p.dialog=u,p.aliasToWidgetsMap={},p.submitted=!1,p.title=i.customTitle?i.customTitle:"entity.aliases",p.disableAdd=p.data.disableAdd,p.allowedEntityTypes=p.data.allowedEntityTypes,i.widgets){var f=void 0;if(p.data.isSingleWidget&&1===p.data.widgets.length){f=[p.data.widgets[0].config.title];for(var h=0,g=Object.keys(p.data.entityAliases);h<g.length;h++){var A=g[h];p.aliasToWidgetsMap[A]=f}}else p.data.widgets.forEach(function(e){if(e.type===c.m.rpc)e.config.targetDeviceAliasIds&&e.config.targetDeviceAliasIds.length>0&&p.addWidgetTitleToWidgetsMap(e.config.targetDeviceAliasIds[0],e.config.title);else if(e.type===c.m.alarm)e.config.alarmSource&&p.addWidgetTitleToWidgetsMap(e.config.alarmSource.entityAliasId,e.config.title);else{p.utils.validateDatasources(e.config.datasources).forEach(function(t){t.type===c.a.entity&&t.entityAliasId&&p.addWidgetTitleToWidgetsMap(t.entityAliasId,e.config.title)})}})}for(var b=[],y=0,v=Object.keys(p.data.entityAliases);y<v.length;y++){A=v[y];var C=p.data.entityAliases[A];C.filter||(C.filter={resolveMultiple:!1}),Object(m.B)(C.filter.resolveMultiple)&&(C.filter.resolveMultiple=!1),b.push(p.createEntityAliasFormControl(A,C))}return p.entityAliasesFormGroup=p.fb.group({entityAliases:p.fb.array(b)}),p}return Object(i.d)(t,e),t.prototype.addWidgetTitleToWidgetsMap=function(e,t){var n=this.aliasToWidgetsMap[e];n||(n=[],this.aliasToWidgetsMap[e]=n),n.push(t)},t.prototype.createEntityAliasFormControl=function(e,t){var n=this.fb.group({id:[e],alias:[t?t.alias:null,[s.Validators.required]],filter:[t?t.filter:null],resolveMultiple:[!!t&&t.filter.resolveMultiple]});return n.get("resolveMultiple").valueChanges.subscribe(function(e){n.get("filter").value.resolveMultiple=e}),n},t.prototype.entityAliasesFormArray=function(){return this.entityAliasesFormGroup.get("entityAliases")},t.prototype.ngOnInit=function(){},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.removeAlias=function(e){var t=this.entityAliasesFormGroup.get("entityAliases").value[e],n=this.aliasToWidgetsMap[t.id];if(n){for(var i="",a=0,r=n;a<r.length;a++){i+="<br/>'"+r[a]+"'"}var o=this.translate.instant("entity.unable-delete-entity-alias-text",{entityAlias:t.alias,widgetsList:i});this.dialogs.alert(this.translate.instant("entity.unable-delete-entity-alias-title"),o,this.translate.instant("action.close"),!0)}else this.entityAliasesFormGroup.get("entityAliases").removeAt(e),this.entityAliasesFormGroup.markAsDirty()},t.prototype.addAlias=function(){this.openAliasDialog(-1)},t.prototype.editAlias=function(e){this.openAliasDialog(e)},t.prototype.openAliasDialog=function(e){var t,n=this,i=-1===e,a=this.entityAliasesFormGroup.get("entityAliases").value;i||(t=a[e]),this.dialog.open(f.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{isAdd:i,allowedEntityTypes:this.allowedEntityTypes,entityAliases:a,alias:i?null:Object(m.e)(t)}}).afterClosed().subscribe(function(t){if(t){if(i)n.entityAliasesFormGroup.get("entityAliases").push(n.createEntityAliasFormControl(t.id,t));else{var a=n.entityAliasesFormGroup.get("entityAliases").at(e);a.get("alias").patchValue(t.alias),a.get("filter").patchValue(t.filter),a.get("resolveMultiple").patchValue(t.filter.resolveMultiple)}n.entityAliasesFormGroup.markAsDirty()}})},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.save=function(){this.submitted=!0;for(var e,t={},n={},i=!0,a=0,r=this.entityAliasesFormGroup.get("entityAliases").value;a<r.length;a++){var o=r[a],s=o.id,l=o.alias.trim(),c=o.filter;if(n[l]){i=!1,e=this.translate.instant("entity.duplicate-alias-error",{alias:l});break}if(!c||!c.type){i=!1,e=this.translate.instant("entity.missing-entity-filter-error",{alias:l});break}n[l]=l,t[s]={id:s,alias:l,filter:c}}i?this.dialogRef.close(t):this.store.dispatch(new u.b({message:e,type:"error"}))},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](h.Store),a["\u0275\u0275directiveInject"](g.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder),a["\u0275\u0275directiveInject"](d.a),a["\u0275\u0275directiveInject"](A.TranslateService),a["\u0275\u0275directiveInject"](p.a),a["\u0275\u0275directiveInject"](o.MatDialog))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-entity-aliases-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:43,vars:36,consts:[[2,"width","700px",3,"formGroup","ngSubmit"],["color","accent"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],["fxLayout","row","fxLayoutAlign","start center",1,"tb-aliases-header"],["fxFlex","5"],["fxFlex","95","fxLayout","row","fxLayoutAlign","start center"],["translate","","fxFlex","150px",1,"tb-header-label"],["translate","","fxFlex","",1,"tb-header-label",2,"padding-left","10px"],["translate","","fxFlex","120px",1,"tb-header-label",2,"padding-left","10px"],[2,"min-width","80px"],[3,"disabled"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center","formArrayName","entityAliases",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-raised-button","","color","accent","type","button","matTooltipPosition","above",3,"fxShow","disabled","matTooltip","click"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center","formArrayName","entityAliases"],["fxFlex","95","fxLayout","row","fxLayoutAlign","start center",1,"mat-elevation-z4","tb-alias"],["floatLabel","always","hideRequiredMarker","","fxFlex","150px",1,"mat-block"],["matInput","","required","",3,"formControl","placeholder"],[4,"ngIf"],["fxFlex","",2,"padding-left","10px",3,"formControl"],["fxFlex","120px","fxLayout","column","fxLayoutAlign","center center",1,"tb-resolve-multiple-switch",2,"padding-left","10px"],[1,"resolve-multiple-switch",3,"formControl"],["mat-icon-button","","color","accent","type","button","matTooltipPosition","above",2,"min-width","40px",3,"disabled","matTooltip","click"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,M,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,P,1,0,"div",6),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275elementStart"](14,"div",8),a["\u0275\u0275element"](15,"span",9),a["\u0275\u0275elementStart"](16,"div",10),a["\u0275\u0275elementStart"](17,"span",11),a["\u0275\u0275text"](18,"alias.name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"span",12),a["\u0275\u0275text"](20,"alias.entity-filter"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"span",13),a["\u0275\u0275text"](22,"alias.resolve-multiple"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](23,"span",14),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](24,"fieldset",15),a["\u0275\u0275pipe"](25,"async"),a["\u0275\u0275element"](26,"mat-divider"),a["\u0275\u0275template"](27,k,22,20,"div",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"div",17),a["\u0275\u0275elementStart"](29,"button",18),a["\u0275\u0275listener"]("click",function(){return t.addAlias()}),a["\u0275\u0275pipe"](30,"async"),a["\u0275\u0275pipe"](31,"translate"),a["\u0275\u0275text"](32),a["\u0275\u0275pipe"](33,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](34,"span",2),a["\u0275\u0275elementStart"](35,"button",19),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](36,"async"),a["\u0275\u0275text"](37),a["\u0275\u0275pipe"](38,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](39,"button",20),a["\u0275\u0275pipe"](40,"async"),a["\u0275\u0275text"](41),a["\u0275\u0275pipe"](42,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.entityAliasesFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,14,t.title)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,16,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,18,t.isLoading$)),a["\u0275\u0275advance"](13),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](25,20,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",t.entityAliasesFormArray().controls),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](31,24,"alias.add")),a["\u0275\u0275property"]("fxShow",!t.disableAdd)("disabled",a["\u0275\u0275pipeBind1"](30,22,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](33,26,"alias.add")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](36,28,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](38,30,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](40,32,t.isLoading$)||t.entityAliasesFormGroup.invalid||!t.entityAliasesFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](42,34,"action.save")," "))},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,b.MatToolbar,y.b,v.MatButton,C.MatIcon,x.NgIf,o.MatDialogContent,y.f,y.e,A.TranslateDirective,w.MatDivider,x.NgForOf,o.MatDialogActions,S.d,E.MatTooltip,I.MatProgressBar,s.FormArrayName,O.MatFormField,O.MatLabel,T.MatInput,s.DefaultValueAccessor,s.RequiredValidator,s.NgControlStatus,s.FormControlDirective,F.a,B.MatSlideToggle,O.MatError],pipes:[A.TranslatePipe,x.AsyncPipe],styles:["[_nghost-%COMP%]   .tb-aliases-header[_ngcontent-%COMP%]{min-height:40px;padding:0 11px;margin:5px}[_nghost-%COMP%]   .tb-aliases-header[_ngcontent-%COMP%]   .tb-header-label[_ngcontent-%COMP%]{font-size:14px;color:rgba(0,0,0,.57)}[_nghost-%COMP%]   mat-divider[_ngcontent-%COMP%]{margin:-1px -24px}[_nghost-%COMP%]   .tb-alias[_ngcontent-%COMP%]{padding:0 0 0 10px;margin:5px}[_nghost-%COMP%]   .tb-alias[_ngcontent-%COMP%]   .tb-resolve-multiple-switch[_ngcontent-%COMP%]{padding-left:10px}[_nghost-%COMP%]   .tb-alias[_ngcontent-%COMP%]   .tb-resolve-multiple-switch[_ngcontent-%COMP%]   .resolve-multiple-switch[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]     .mat-dialog-content{padding-top:0!important;padding-bottom:0!important}"]}),t}(l.a);0,void 0},EYOO:function(e,t,n){"use strict";n.d(t,"a",function(){return y}),n.d(t,"b",function(){return v});var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=n("0lYY"),s=n("rDax"),l=n("l7P3"),c=n("3Pt+"),d=n("XiUz"),u=n("kmnG"),p=n("sYmb"),m=n("d3UM"),f=n("ofXK"),h=n("bSwM"),g=n("FKr1");function A(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",15),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.legendDirectionTranslations.get(i.legendDirection[n]))," ")}}function b(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",16),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n)("disabled",i.legendConfigForm.get("direction").value===i.legendDirection.row&&(n===i.legendPosition.left||n===i.legendPosition.right)),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,3,i.legendPositionTranslations.get(i.legendPosition[n]))," ")}}var y=new a.InjectionToken("LegendConfigPanelData"),v=function(e){function t(t,n,i,a,r){var s=e.call(this,i)||this;return s.data=t,s.overlayRef=n,s.store=i,s.fb=a,s.viewContainerRef=r,s.legendDirection=o.b,s.legendDirections=Object.keys(o.b),s.legendDirectionTranslations=o.h,s.legendPosition=o.c,s.legendPositions=Object.keys(o.c),s.legendPositionTranslations=o.i,s}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this.legendConfigForm=this.fb.group({direction:[this.data.legendConfig.direction,[]],position:[this.data.legendConfig.position,[]],sortDataKeys:[this.data.legendConfig.sortDataKeys,[]],showMin:[this.data.legendConfig.showMin,[]],showMax:[this.data.legendConfig.showMax,[]],showAvg:[this.data.legendConfig.showAvg,[]],showTotal:[this.data.legendConfig.showTotal,[]]}),this.legendConfigForm.get("direction").valueChanges.subscribe(function(t){e.onDirectionChanged(t)}),this.onDirectionChanged(this.data.legendConfig.direction),this.legendConfigForm.valueChanges.subscribe(function(){e.update()})},t.prototype.onDirectionChanged=function(e){if(e===o.b.row){var t=this.legendConfigForm.get("position").value;t!==o.c.bottom&&t!==o.c.top&&(t=o.c.bottom),this.legendConfigForm.patchValue({position:t},{emitEvent:!1})}},t.prototype.update=function(){var e=this.legendConfigForm.value;this.data.legendConfigUpdated(e)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](y),a["\u0275\u0275directiveInject"](s.OverlayRef),a["\u0275\u0275directiveInject"](l.Store),a["\u0275\u0275directiveInject"](c.FormBuilder),a["\u0275\u0275directiveInject"](a.ViewContainerRef))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-legend-config-panel"]],features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:31,vars:21,consts:[[3,"formGroup"],[3,"disabled"],[1,"mat-content",2,"height","100%"],[1,"mat-padding"],["fxLayout","column"],["translate",""],["matInput","","formControlName","direction",2,"min-width","150px"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","position",2,"min-width","150px"],[3,"value","disabled",4,"ngFor","ngForOf"],["formControlName","sortDataKeys"],["formControlName","showMin"],["formControlName","showMax"],["formControlName","showAvg"],["formControlName","showTotal"],[3,"value"],[3,"value","disabled"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275elementStart"](1,"fieldset",1),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275elementStart"](3,"div",2),a["\u0275\u0275elementStart"](4,"div",3),a["\u0275\u0275elementStart"](5,"section",4),a["\u0275\u0275elementStart"](6,"mat-form-field"),a["\u0275\u0275elementStart"](7,"mat-label",5),a["\u0275\u0275text"](8,"legend.direction"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"mat-select",6),a["\u0275\u0275template"](10,A,3,4,"mat-option",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"mat-form-field"),a["\u0275\u0275elementStart"](12,"mat-label",5),a["\u0275\u0275text"](13,"legend.position"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"mat-select",8),a["\u0275\u0275template"](15,b,3,5,"mat-option",9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"mat-checkbox",10),a["\u0275\u0275text"](17),a["\u0275\u0275pipe"](18,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"mat-checkbox",11),a["\u0275\u0275text"](20),a["\u0275\u0275pipe"](21,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"mat-checkbox",12),a["\u0275\u0275text"](23),a["\u0275\u0275pipe"](24,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](25,"mat-checkbox",13),a["\u0275\u0275text"](26),a["\u0275\u0275pipe"](27,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"mat-checkbox",14),a["\u0275\u0275text"](29),a["\u0275\u0275pipe"](30,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.legendConfigForm),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](2,9,t.isLoading$)),a["\u0275\u0275advance"](9),a["\u0275\u0275property"]("ngForOf",t.legendDirections),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngForOf",t.legendPositions),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](18,11,"legend.sort-legend")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](21,13,"legend.show-min")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](24,15,"legend.show-max")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](27,17,"legend.show-avg")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](30,19,"legend.show-total")," "))},directives:[c["\u0275angular_packages_forms_forms_ba"],c.NgControlStatusGroup,c.FormGroupDirective,d.f,u.MatFormField,u.MatLabel,p.TranslateDirective,m.MatSelect,c.NgControlStatus,c.FormControlName,f.NgForOf,h.MatCheckbox,g.MatOption],pipes:[f.AsyncPipe,p.TranslatePipe],styles:["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%], [_nghost-%COMP%]   form[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .mat-content[_ngcontent-%COMP%]{overflow:hidden;background-color:#fff}[_nghost-%COMP%]   .mat-padding[_ngcontent-%COMP%]{padding:16px}"]}),t}(r.a);0,void 0},Et39:function(e,t,n){"use strict";n.d(t,"a",function(){return x});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("gmuX"),s=n("0IaG"),l=n("l7P3"),c=n("tyNb"),d=n("3Pt+"),u=n("/t3+"),p=n("XiUz"),m=n("bTqV"),f=n("NFeN"),h=n("ofXK"),g=n("J/M1"),A=n("bv9b"),b=n("sYmb");function y(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",11)}function v(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"button",12),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,n.isLoading$)||n.attributeFormGroup.invalid||!n.attributeFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](3,4,"action.save")," ")}}var C=function(e){return{name:e}},x=function(e){function t(t,n,i,a,r,o){var s=e.call(this,t,n,r)||this;return s.store=t,s.router=n,s.data=i,s.errorStateMatcher=a,s.dialogRef=r,s.fb=o,s.submitted=!1,s.readonly=i.readonly,s.name=i.modelName,s.isResource=i.isResource,s.attributeFormGroup=s.fb.group({attributes:[i.attributes]}),s.readonly&&s.attributeFormGroup.disable({emitEvent:!1}),s}return Object(i.d)(t,e),t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.save=function(){this.submitted=!0,this.dialogRef.close(this.attributeFormGroup.get("attributes").value)},t.prototype.cancel=function(){this.dialogRef.close(null)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](l.Store),a["\u0275\u0275directiveInject"](c.Router),a["\u0275\u0275directiveInject"](s.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](s.MatDialogRef),a["\u0275\u0275directiveInject"](d.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-lwm2m-attributes-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:19,vars:18,consts:[[2,"min-width","500px",3,"formGroup","ngSubmit"],["color","accent"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],["formControlName","attributes",3,"isResource"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled",4,"ngIf"],["color","warn","mode","indeterminate"],["mat-raised-button","","color","accent","type","submit",3,"disabled"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,y,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275elementStart"](11,"div",6),a["\u0275\u0275element"](12,"tb-lwm2m-attributes-key-list",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](13,"div",8),a["\u0275\u0275elementStart"](14,"button",9),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](15,"async"),a["\u0275\u0275text"](16),a["\u0275\u0275pipe"](17,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](18,v,4,6,"button",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.attributeFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind2"](4,7,t.readonly?"device-profile.lwm2m.view-attributes":"device-profile.lwm2m.edit-attributes",a["\u0275\u0275pureFunction1"](16,C,t.name))," "),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,10,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("isResource",t.isResource),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](15,12,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](17,14,t.readonly?"action.close":"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!t.readonly))},directives:[d["\u0275angular_packages_forms_forms_ba"],d.NgControlStatusGroup,d.FormGroupDirective,u.MatToolbar,p.b,m.MatButton,f.MatIcon,h.NgIf,s.MatDialogContent,g.a,d.NgControlStatus,d.FormControlName,s.MatDialogActions,p.e,A.MatProgressBar],pipes:[b.TranslatePipe,h.AsyncPipe],encapsulation:2}),t}(o.a);0,void 0},F4h8:function(e,t,n){"use strict";n.d(t,"a",function(){return Pn});var i={};n.r(i),n.d(i,"MatBadge",function(){return M}),n.d(i,"MatBadgeModule",function(){return P});var a={};n.r(a),n.d(a,"MAT_BOTTOM_SHEET_DATA",function(){return U}),n.d(a,"MAT_BOTTOM_SHEET_DEFAULT_OPTIONS",function(){return q}),n.d(a,"MatBottomSheet",function(){return z}),n.d(a,"MatBottomSheetConfig",function(){return V}),n.d(a,"MatBottomSheetContainer",function(){return G}),n.d(a,"MatBottomSheetModule",function(){return H}),n.d(a,"MatBottomSheetRef",function(){return K}),n.d(a,"matBottomSheetAnimations",function(){return Q});var r={};n.r(r),n.d(r,"MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS",function(){return J}),n.d(r,"MAT_BUTTON_TOGGLE_GROUP",function(){return Y}),n.d(r,"MAT_BUTTON_TOGGLE_GROUP_VALUE_ACCESSOR",function(){return Z}),n.d(r,"MatButtonToggle",function(){return ie}),n.d(r,"MatButtonToggleChange",function(){return te}),n.d(r,"MatButtonToggleGroup",function(){return ne}),n.d(r,"MatButtonToggleModule",function(){return ae});var o={};n.r(o),n.d(o,"MatNestedTreeNode",function(){return et}),n.d(o,"MatTree",function(){return at}),n.d(o,"MatTreeFlatDataSource",function(){return dt}),n.d(o,"MatTreeFlattener",function(){return ct}),n.d(o,"MatTreeModule",function(){return lt}),n.d(o,"MatTreeNestedDataSource",function(){return ut}),n.d(o,"MatTreeNode",function(){return Je}),n.d(o,"MatTreeNodeDef",function(){return Ye}),n.d(o,"MatTreeNodeOutlet",function(){return it}),n.d(o,"MatTreeNodePadding",function(){return tt}),n.d(o,"MatTreeNodeToggle",function(){return ot});var s={};n.r(s),n.d(s,"HomeComponentsModule",function(){return bt.a});var l={};n.r(l),n.d(l,"CDK_DRAG_CONFIG",function(){return bn}),n.d(l,"CDK_DRAG_HANDLE",function(){return xn}),n.d(l,"CDK_DRAG_PARENT",function(){return hn}),n.d(l,"CDK_DRAG_PLACEHOLDER",function(){return Sn}),n.d(l,"CDK_DRAG_PREVIEW",function(){return In}),n.d(l,"CDK_DROP_LIST",function(){return vn}),n.d(l,"CDK_DROP_LIST_GROUP",function(){return gn}),n.d(l,"CdkDrag",function(){return Tn}),n.d(l,"CdkDragHandle",function(){return wn}),n.d(l,"CdkDragPlaceholder",function(){return En}),n.d(l,"CdkDragPreview",function(){return On}),n.d(l,"CdkDropList",function(){return Cn}),n.d(l,"CdkDropListGroup",function(){return An}),n.d(l,"DragDrop",function(){return fn}),n.d(l,"DragDropModule",function(){return Bn}),n.d(l,"DragDropRegistry",function(){return pn}),n.d(l,"DragRef",function(){return zt}),n.d(l,"DropListRef",function(){return rn}),n.d(l,"copyArrayItem",function(){return nn}),n.d(l,"moveItemInArray",function(){return en}),n.d(l,"transferArrayItem",function(){return tn});var c=n("R0Ic"),d=n("fXoL"),u=n("ofXK"),p=n("3Pt+"),m=n("YUcS"),f=n("jhN1"),h=n("tyNb"),g=n("8LU1"),A=n("0EQZ"),b=n("FtGj"),y=n("0MNC"),v=n("rDax"),C=n("+rOU"),x=n("/1cH"),w=n("WtWf"),S=n("mvVQ"),E=n("/E8u"),I=n("MGFw"),O=n("FKr1"),T=n("u47x"),F=n("R1ws"),B=0,M=function(e){Object(S.a)(n,e);var t=Object(E.a)(n);function n(e,i,a,r,o){var s;return Object(I.a)(this,n),(s=t.call(this))._ngZone=e,s._elementRef=i,s._ariaDescriber=a,s._renderer=r,s._animationMode=o,s._hasContent=!1,s._color="primary",s._overlap=!0,s.position="above after",s.size="medium",s._id=B++,0,s}return Object(w.a)(n,[{key:"color",get:function(){return this._color},set:function(e){this._setColor(e),this._color=e}},{key:"overlap",get:function(){return this._overlap},set:function(e){this._overlap=Object(g.coerceBooleanProperty)(e)}},{key:"description",get:function(){return this._description},set:function(e){if(e!==this._description){var t=this._badgeElement;this._updateHostAriaDescription(e,this._description),this._description=e,t&&(e?t.setAttribute("aria-label",e):t.removeAttribute("aria-label"))}}},{key:"hidden",get:function(){return this._hidden},set:function(e){this._hidden=Object(g.coerceBooleanProperty)(e)}},{key:"isAbove",value:function(){return-1===this.position.indexOf("below")}},{key:"isAfter",value:function(){return-1===this.position.indexOf("before")}},{key:"ngOnChanges",value:function(e){var t=e.content;if(t){var n=t.currentValue;this._hasContent=null!=n&&"".concat(n).trim().length>0,this._updateTextContent()}}},{key:"ngOnDestroy",value:function(){var e=this._badgeElement;e&&(this.description&&this._ariaDescriber.removeDescription(e,this.description),this._renderer.destroyNode&&this._renderer.destroyNode(e))}},{key:"getBadgeElement",value:function(){return this._badgeElement}},{key:"_updateTextContent",value:function(){return this._badgeElement?this._badgeElement.textContent=this._stringifyContent():this._badgeElement=this._createBadgeElement(),this._badgeElement}},{key:"_createBadgeElement",value:function(){var e=this._renderer.createElement("span");return this._clearExistingBadges("mat-badge-content"),e.setAttribute("id","mat-badge-content-".concat(this._id)),e.classList.add("mat-badge-content"),e.textContent=this._stringifyContent(),"NoopAnimations"===this._animationMode&&e.classList.add("_mat-animation-noopable"),this.description&&e.setAttribute("aria-label",this.description),this._elementRef.nativeElement.appendChild(e),"function"==typeof requestAnimationFrame&&"NoopAnimations"!==this._animationMode?this._ngZone.runOutsideAngular(function(){requestAnimationFrame(function(){e.classList.add("mat-badge-active")})}):e.classList.add("mat-badge-active"),e}},{key:"_updateHostAriaDescription",value:function(e,t){var n=this._updateTextContent();t&&this._ariaDescriber.removeDescription(n,t),e&&this._ariaDescriber.describe(n,e)}},{key:"_setColor",value:function(e){if(e!==this._color){var t=this._elementRef.nativeElement.classList;this._color&&t.remove("mat-badge-".concat(this._color)),e&&t.add("mat-badge-".concat(e))}}},{key:"_clearExistingBadges",value:function(e){for(var t=this._elementRef.nativeElement,n=t.children.length;n--;){var i=t.children[n];i.classList.contains(e)&&t.removeChild(i)}}},{key:"_stringifyContent",value:function(){var e=this.content;return null==e?"":"".concat(e)}}]),n}(Object(O.mixinDisabled)(function e(){Object(I.a)(this,e)}));M.\u0275fac=function(e){return new(e||M)(d["\u0275\u0275directiveInject"](d.NgZone),d["\u0275\u0275directiveInject"](d.ElementRef),d["\u0275\u0275directiveInject"](T.c),d["\u0275\u0275directiveInject"](d.Renderer2),d["\u0275\u0275directiveInject"](F.a,8))},M.\u0275dir=d["\u0275\u0275defineDirective"]({type:M,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(e,t){2&e&&d["\u0275\u0275classProp"]("mat-badge-overlap",t.overlap)("mat-badge-above",t.isAbove())("mat-badge-below",!t.isAbove())("mat-badge-before",!t.isAfter())("mat-badge-after",t.isAfter())("mat-badge-small","small"===t.size)("mat-badge-medium","medium"===t.size)("mat-badge-large","large"===t.size)("mat-badge-hidden",t.hidden||!t._hasContent)("mat-badge-disabled",t.disabled)},inputs:{disabled:["matBadgeDisabled","disabled"],position:["matBadgePosition","position"],size:["matBadgeSize","size"],color:["matBadgeColor","color"],overlap:["matBadgeOverlap","overlap"],description:["matBadgeDescription","description"],hidden:["matBadgeHidden","hidden"],content:["matBadge","content"]},features:[d["\u0275\u0275InheritDefinitionFeature"],d["\u0275\u0275NgOnChangesFeature"]]}),M.ctorParameters=function(){return[{type:d.NgZone},{type:d.ElementRef},{type:T.c},{type:d.Renderer2},{type:String,decorators:[{type:d.Optional},{type:d.Inject,args:[F.a]}]}]},M.propDecorators={color:[{type:d.Input,args:["matBadgeColor"]}],overlap:[{type:d.Input,args:["matBadgeOverlap"]}],position:[{type:d.Input,args:["matBadgePosition"]}],content:[{type:d.Input,args:["matBadge"]}],description:[{type:d.Input,args:["matBadgeDescription"]}],size:[{type:d.Input,args:["matBadgeSize"]}],hidden:[{type:d.Input,args:["matBadgeHidden"]}]},0;var P=function e(){Object(I.a)(this,e)};P.\u0275fac=function(e){return new(e||P)},P.\u0275mod=d["\u0275\u0275defineNgModule"]({type:P}),P.\u0275inj=d["\u0275\u0275defineInjector"]({imports:[[T.a,O.MatCommonModule],O.MatCommonModule]}),("undefined"==typeof ngJitMode||ngJitMode)&&d["\u0275\u0275setNgModuleScope"](P,{declarations:function(){return[M]},imports:function(){return[T.a,O.MatCommonModule]},exports:function(){return[M,O.MatCommonModule]}}),0;var D=n("cH1L"),k=n("XNiG"),_=n("VRyK"),L=n("LRne"),j=n("pLZG"),N=n("IzEk");function R(e,t){}var U=new d.InjectionToken("MatBottomSheetData"),V=function e(){Object(I.a)(this,e),this.data=null,this.hasBackdrop=!0,this.disableClose=!1,this.ariaLabel=null,this.closeOnNavigation=!0,this.autoFocus=!1,this.restoreFocus=!0},Q={bottomSheetState:Object(c.trigger)("state",[Object(c.state)("void, hidden",Object(c.style)({transform:"translateY(100%)"})),Object(c.state)("visible",Object(c.style)({transform:"translateY(0%)"})),Object(c.transition)("visible => void, visible => hidden",Object(c.animate)("".concat(O.AnimationDurations.COMPLEX," ").concat(O.AnimationCurves.ACCELERATION_CURVE))),Object(c.transition)("void => visible",Object(c.animate)("".concat(O.AnimationDurations.EXITING," ").concat(O.AnimationCurves.DECELERATION_CURVE)))])},G=function(e){Object(S.a)(n,e);var t=Object(E.a)(n);function n(e,i,a,r,o,s){var l;return Object(I.a)(this,n),(l=t.call(this))._elementRef=e,l._changeDetectorRef=i,l._focusTrapFactory=a,l.bottomSheetConfig=s,l._animationState="void",l._animationStateChanged=new d.EventEmitter,l._elementFocusedBeforeOpened=null,l.attachDomPortal=function(e){return l._validatePortalAttached(),l._setPanelClass(),l._savePreviouslyFocusedElement(),l._portalOutlet.attachDomPortal(e)},l._document=o,l._breakpointSubscription=r.observe([y.Breakpoints.Medium,y.Breakpoints.Large,y.Breakpoints.XLarge]).subscribe(function(){l._toggleClass("mat-bottom-sheet-container-medium",r.isMatched(y.Breakpoints.Medium)),l._toggleClass("mat-bottom-sheet-container-large",r.isMatched(y.Breakpoints.Large)),l._toggleClass("mat-bottom-sheet-container-xlarge",r.isMatched(y.Breakpoints.XLarge))}),l}return Object(w.a)(n,[{key:"attachComponentPortal",value:function(e){return this._validatePortalAttached(),this._setPanelClass(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachComponentPortal(e)}},{key:"attachTemplatePortal",value:function(e){return this._validatePortalAttached(),this._setPanelClass(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachTemplatePortal(e)}},{key:"enter",value:function(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges())}},{key:"exit",value:function(){this._destroyed||(this._animationState="hidden",this._changeDetectorRef.markForCheck())}},{key:"ngOnDestroy",value:function(){this._breakpointSubscription.unsubscribe(),this._destroyed=!0}},{key:"_onAnimationDone",value:function(e){"hidden"===e.toState?this._restoreFocus():"visible"===e.toState&&this._trapFocus(),this._animationStateChanged.emit(e)}},{key:"_onAnimationStart",value:function(e){this._animationStateChanged.emit(e)}},{key:"_toggleClass",value:function(e,t){var n=this._elementRef.nativeElement.classList;t?n.add(e):n.remove(e)}},{key:"_validatePortalAttached",value:function(){if(this._portalOutlet.hasAttached()&&(0,0))throw Error("Attempting to attach bottom sheet content after content is already attached")}},{key:"_setPanelClass",value:function(){var e=this._elementRef.nativeElement,t=this.bottomSheetConfig.panelClass;Array.isArray(t)?t.forEach(function(t){return e.classList.add(t)}):t&&e.classList.add(t)}},{key:"_trapFocus",value:function(){var e=this._elementRef.nativeElement;if(this._focusTrap||(this._focusTrap=this._focusTrapFactory.create(e)),this.bottomSheetConfig.autoFocus)this._focusTrap.focusInitialElementWhenReady();else{var t=this._getActiveElement();t===e||e.contains(t)||e.focus()}}},{key:"_restoreFocus",value:function(){var e=this._elementFocusedBeforeOpened;if(this.bottomSheetConfig.restoreFocus&&e&&"function"==typeof e.focus){var t=this._getActiveElement(),n=this._elementRef.nativeElement;t&&t!==this._document.body&&t!==n&&!n.contains(t)||e.focus()}this._focusTrap&&this._focusTrap.destroy()}},{key:"_savePreviouslyFocusedElement",value:function(){var e=this;this._elementFocusedBeforeOpened=this._getActiveElement(),this._elementRef.nativeElement.focus&&Promise.resolve().then(function(){return e._elementRef.nativeElement.focus()})}},{key:"_getActiveElement",value:function(){var e,t=this._document.activeElement;return(null===(e=null==t?void 0:t.shadowRoot)||void 0===e?void 0:e.activeElement)||t}}]),n}(C.BasePortalOutlet);G.\u0275fac=function(e){return new(e||G)(d["\u0275\u0275directiveInject"](d.ElementRef),d["\u0275\u0275directiveInject"](d.ChangeDetectorRef),d["\u0275\u0275directiveInject"](T.i),d["\u0275\u0275directiveInject"](y.BreakpointObserver),d["\u0275\u0275directiveInject"](u.DOCUMENT,8),d["\u0275\u0275directiveInject"](V))},G.\u0275cmp=d["\u0275\u0275defineComponent"]({type:G,selectors:[["mat-bottom-sheet-container"]],viewQuery:function(e,t){var n;(1&e&&d["\u0275\u0275viewQuery"](C.CdkPortalOutlet,3),2&e)&&(d["\u0275\u0275queryRefresh"](n=d["\u0275\u0275loadQuery"]())&&(t._portalOutlet=n.first))},hostAttrs:["tabindex","-1","role","dialog","aria-modal","true",1,"mat-bottom-sheet-container"],hostVars:2,hostBindings:function(e,t){1&e&&d["\u0275\u0275syntheticHostListener"]("@state.start",function(e){return t._onAnimationStart(e)})("@state.done",function(e){return t._onAnimationDone(e)}),2&e&&(d["\u0275\u0275attribute"]("aria-label",null==t.bottomSheetConfig?null:t.bottomSheetConfig.ariaLabel),d["\u0275\u0275syntheticHostProperty"]("@state",t._animationState))},features:[d["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,t){1&e&&d["\u0275\u0275template"](0,R,0,0,"ng-template",0)},directives:[C.CdkPortalOutlet],styles:[".mat-bottom-sheet-container{padding:8px 16px;min-width:100vw;box-sizing:border-box;display:block;outline:0;max-height:80vh;overflow:auto}.cdk-high-contrast-active .mat-bottom-sheet-container{outline:1px solid}.mat-bottom-sheet-container-xlarge,.mat-bottom-sheet-container-large,.mat-bottom-sheet-container-medium{border-top-left-radius:4px;border-top-right-radius:4px}.mat-bottom-sheet-container-medium{min-width:384px;max-width:calc(100vw - 128px)}.mat-bottom-sheet-container-large{min-width:512px;max-width:calc(100vw - 256px)}.mat-bottom-sheet-container-xlarge{min-width:576px;max-width:calc(100vw - 384px)}\n"],encapsulation:2,data:{animation:[Q.bottomSheetState]}}),G.ctorParameters=function(){return[{type:d.ElementRef},{type:d.ChangeDetectorRef},{type:T.i},{type:y.BreakpointObserver},{type:void 0,decorators:[{type:d.Optional},{type:d.Inject,args:[u.DOCUMENT]}]},{type:V}]},G.propDecorators={_portalOutlet:[{type:d.ViewChild,args:[C.CdkPortalOutlet,{static:!0}]}]},0;var H=function e(){Object(I.a)(this,e)};H.\u0275fac=function(e){return new(e||H)},H.\u0275mod=d["\u0275\u0275defineNgModule"]({type:H}),H.\u0275inj=d["\u0275\u0275defineInjector"]({imports:[[v.OverlayModule,O.MatCommonModule,C.PortalModule],O.MatCommonModule]}),("undefined"==typeof ngJitMode||ngJitMode)&&d["\u0275\u0275setNgModuleScope"](H,{declarations:function(){return[G]},imports:function(){return[v.OverlayModule,O.MatCommonModule,C.PortalModule]},exports:function(){return[G,O.MatCommonModule]}}),0;var K=function(){function e(t,n){var i=this;Object(I.a)(this,e),this._overlayRef=n,this._afterDismissed=new k.b,this._afterOpened=new k.b,this.containerInstance=t,this.disableClose=t.bottomSheetConfig.disableClose,t._animationStateChanged.pipe(Object(j.a)(function(e){return"done"===e.phaseName&&"visible"===e.toState}),Object(N.a)(1)).subscribe(function(){i._afterOpened.next(),i._afterOpened.complete()}),t._animationStateChanged.pipe(Object(j.a)(function(e){return"done"===e.phaseName&&"hidden"===e.toState}),Object(N.a)(1)).subscribe(function(){clearTimeout(i._closeFallbackTimeout),n.dispose()}),n.detachments().pipe(Object(N.a)(1)).subscribe(function(){i._afterDismissed.next(i._result),i._afterDismissed.complete()}),Object(_.a)(n.backdropClick(),n.keydownEvents().pipe(Object(j.a)(function(e){return e.keyCode===b.ESCAPE}))).subscribe(function(e){i.disableClose||"keydown"===e.type&&Object(b.hasModifierKey)(e)||(e.preventDefault(),i.dismiss())})}return Object(w.a)(e,[{key:"dismiss",value:function(e){var t=this;this._afterDismissed.closed||(this.containerInstance._animationStateChanged.pipe(Object(j.a)(function(e){return"start"===e.phaseName}),Object(N.a)(1)).subscribe(function(e){t._closeFallbackTimeout=setTimeout(function(){t._overlayRef.dispose()},e.totalTime+100),t._overlayRef.detachBackdrop()}),this._result=e,this.containerInstance.exit())}},{key:"afterDismissed",value:function(){return this._afterDismissed}},{key:"afterOpened",value:function(){return this._afterOpened}},{key:"backdropClick",value:function(){return this._overlayRef.backdropClick()}},{key:"keydownEvents",value:function(){return this._overlayRef.keydownEvents()}}]),e}(),q=new d.InjectionToken("mat-bottom-sheet-default-options"),z=function(){function e(t,n,i,a){Object(I.a)(this,e),this._overlay=t,this._injector=n,this._parentBottomSheet=i,this._defaultOptions=a,this._bottomSheetRefAtThisLevel=null}return Object(w.a)(e,[{key:"_openedBottomSheetRef",get:function(){var e=this._parentBottomSheet;return e?e._openedBottomSheetRef:this._bottomSheetRefAtThisLevel},set:function(e){this._parentBottomSheet?this._parentBottomSheet._openedBottomSheetRef=e:this._bottomSheetRefAtThisLevel=e}},{key:"open",value:function(e,t){var n=this,i=function(e,t){return Object.assign(Object.assign({},e),t)}(this._defaultOptions||new V,t),a=this._createOverlay(i),r=this._attachContainer(a,i),o=new K(r,a);if(e instanceof d.TemplateRef)r.attachTemplatePortal(new C.TemplatePortal(e,null,{$implicit:i.data,bottomSheetRef:o}));else{var s=new C.ComponentPortal(e,void 0,this._createInjector(i,o)),l=r.attachComponentPortal(s);o.instance=l.instance}return o.afterDismissed().subscribe(function(){n._openedBottomSheetRef==o&&(n._openedBottomSheetRef=null)}),this._openedBottomSheetRef?(this._openedBottomSheetRef.afterDismissed().subscribe(function(){return o.containerInstance.enter()}),this._openedBottomSheetRef.dismiss()):o.containerInstance.enter(),this._openedBottomSheetRef=o,o}},{key:"dismiss",value:function(e){this._openedBottomSheetRef&&this._openedBottomSheetRef.dismiss(e)}},{key:"ngOnDestroy",value:function(){this._bottomSheetRefAtThisLevel&&this._bottomSheetRefAtThisLevel.dismiss()}},{key:"_attachContainer",value:function(e,t){var n=t&&t.viewContainerRef&&t.viewContainerRef.injector,i=d.Injector.create({parent:n||this._injector,providers:[{provide:V,useValue:t}]}),a=new C.ComponentPortal(G,t.viewContainerRef,i);return e.attach(a).instance}},{key:"_createOverlay",value:function(e){var t=new v.OverlayConfig({direction:e.direction,hasBackdrop:e.hasBackdrop,disposeOnNavigation:e.closeOnNavigation,maxWidth:"100%",scrollStrategy:e.scrollStrategy||this._overlay.scrollStrategies.block(),positionStrategy:this._overlay.position().global().centerHorizontally().bottom("0")});return e.backdropClass&&(t.backdropClass=e.backdropClass),this._overlay.create(t)}},{key:"_createInjector",value:function(e,t){var n=e&&e.viewContainerRef&&e.viewContainerRef.injector,i=[{provide:K,useValue:t},{provide:U,useValue:e.data}];return!e.direction||n&&n.get(D.b,null)||i.push({provide:D.b,useValue:{value:e.direction,change:Object(L.a)()}}),d.Injector.create({parent:n||this._injector,providers:i})}}]),e}();z.\u0275fac=function(e){return new(e||z)(d["\u0275\u0275inject"](v.Overlay),d["\u0275\u0275inject"](d.Injector),d["\u0275\u0275inject"](z,12),d["\u0275\u0275inject"](q,8))},z.\u0275prov=Object(d["\u0275\u0275defineInjectable"])({factory:function(){return new z(Object(d["\u0275\u0275inject"])(v.Overlay),Object(d["\u0275\u0275inject"])(d.INJECTOR),Object(d["\u0275\u0275inject"])(z,12),Object(d["\u0275\u0275inject"])(q,8))},token:z,providedIn:H}),z.ctorParameters=function(){return[{type:v.Overlay},{type:d.Injector},{type:z,decorators:[{type:d.Optional},{type:d.SkipSelf}]},{type:V,decorators:[{type:d.Optional},{type:d.Inject,args:[q]}]}]},0;var W=n("bTqV"),X=n("8vcG"),$=["button"],J=new d.InjectionToken("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),Y=new d.InjectionToken("MatButtonToggleGroup"),Z={provide:p.NG_VALUE_ACCESSOR,useExisting:Object(d.forwardRef)(function(){return ne}),multi:!0},ee=0,te=function e(t,n){Object(I.a)(this,e),this.source=t,this.value=n},ne=function(){function e(t,n){Object(I.a)(this,e),this._changeDetector=t,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=function(){},this._onTouched=function(){},this._name="mat-button-toggle-group-".concat(ee++),this.valueChange=new d.EventEmitter,this.change=new d.EventEmitter,this.appearance=n&&n.appearance?n.appearance:"standard"}return Object(w.a)(e,[{key:"name",get:function(){return this._name},set:function(e){var t=this;this._name=e,this._buttonToggles&&this._buttonToggles.forEach(function(e){e.name=t._name,e._markForCheck()})}},{key:"vertical",get:function(){return this._vertical},set:function(e){this._vertical=Object(g.coerceBooleanProperty)(e)}},{key:"value",get:function(){var e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e.map(function(e){return e.value}):e[0]?e[0].value:void 0},set:function(e){this._setSelectionByValue(e),this.valueChange.emit(this.value)}},{key:"selected",get:function(){var e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e:e[0]||null}},{key:"multiple",get:function(){return this._multiple},set:function(e){this._multiple=Object(g.coerceBooleanProperty)(e)}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=Object(g.coerceBooleanProperty)(e),this._buttonToggles&&this._buttonToggles.forEach(function(e){return e._markForCheck()})}},{key:"ngOnInit",value:function(){this._selectionModel=new A.SelectionModel(this.multiple,void 0,!1)}},{key:"ngAfterContentInit",value:function(){var e;(e=this._selectionModel).select.apply(e,Object(X.a)(this._buttonToggles.filter(function(e){return e.checked})))}},{key:"writeValue",value:function(e){this.value=e,this._changeDetector.markForCheck()}},{key:"registerOnChange",value:function(e){this._controlValueAccessorChangeFn=e}},{key:"registerOnTouched",value:function(e){this._onTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e}},{key:"_emitChangeEvent",value:function(){var e=this.selected,t=Array.isArray(e)?e[e.length-1]:e,n=new te(t,this.value);this._controlValueAccessorChangeFn(n.value),this.change.emit(n)}},{key:"_syncButtonToggle",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.multiple||!this.selected||e.checked||(this.selected.checked=!1),this._selectionModel?t?this._selectionModel.select(e):this._selectionModel.deselect(e):a=!0,a?Promise.resolve().then(function(){return n._updateModelValue(i)}):this._updateModelValue(i)}},{key:"_isSelected",value:function(e){return this._selectionModel&&this._selectionModel.isSelected(e)}},{key:"_isPrechecked",value:function(e){return void 0!==this._rawValue&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(function(t){return null!=e.value&&t===e.value}):e.value===this._rawValue)}},{key:"_setSelectionByValue",value:function(e){var t=this;if(this._rawValue=e,this._buttonToggles)if(this.multiple&&e){if(!Array.isArray(e)&&(0,0))throw Error("Value must be an array in multiple-selection mode.");this._clearSelection(),e.forEach(function(e){return t._selectValue(e)})}else this._clearSelection(),this._selectValue(e)}},{key:"_clearSelection",value:function(){this._selectionModel.clear(),this._buttonToggles.forEach(function(e){return e.checked=!1})}},{key:"_selectValue",value:function(e){var t=this._buttonToggles.find(function(t){return null!=t.value&&t.value===e});t&&(t.checked=!0,this._selectionModel.select(t))}},{key:"_updateModelValue",value:function(e){e&&this._emitChangeEvent(),this.valueChange.emit(this.value)}}]),e}();ne.\u0275fac=function(e){return new(e||ne)(d["\u0275\u0275directiveInject"](d.ChangeDetectorRef),d["\u0275\u0275directiveInject"](J,8))},ne.\u0275dir=d["\u0275\u0275defineDirective"]({type:ne,selectors:[["mat-button-toggle-group"]],contentQueries:function(e,t,n){var i;(1&e&&d["\u0275\u0275contentQuery"](n,ie,1),2&e)&&(d["\u0275\u0275queryRefresh"](i=d["\u0275\u0275loadQuery"]())&&(t._buttonToggles=i))},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(e,t){2&e&&(d["\u0275\u0275attribute"]("aria-disabled",t.disabled),d["\u0275\u0275classProp"]("mat-button-toggle-vertical",t.vertical)("mat-button-toggle-group-appearance-standard","standard"===t.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[d["\u0275\u0275ProvidersFeature"]([Z,{provide:Y,useExisting:ne}])]}),ne.ctorParameters=function(){return[{type:d.ChangeDetectorRef},{type:void 0,decorators:[{type:d.Optional},{type:d.Inject,args:[J]}]}]},ne.propDecorators={_buttonToggles:[{type:d.ContentChildren,args:[Object(d.forwardRef)(function(){return ie}),{descendants:!0}]}],appearance:[{type:d.Input}],name:[{type:d.Input}],vertical:[{type:d.Input}],value:[{type:d.Input}],valueChange:[{type:d.Output}],multiple:[{type:d.Input}],disabled:[{type:d.Input}],change:[{type:d.Output}]},0;var ie=function(e){Object(S.a)(n,e);var t=Object(E.a)(n);function n(e,i,a,r,o,s){var l;Object(I.a)(this,n),(l=t.call(this))._changeDetectorRef=i,l._elementRef=a,l._focusMonitor=r,l._isSingleSelector=!1,l._checked=!1,l.ariaLabelledby=null,l._disabled=!1,l.change=new d.EventEmitter;var c=Number(o);return l.tabIndex=c||0===c?c:null,l.buttonToggleGroup=e,l.appearance=s&&s.appearance?s.appearance:"standard",l}return Object(w.a)(n,[{key:"buttonId",get:function(){return"".concat(this.id,"-button")}},{key:"appearance",get:function(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance},set:function(e){this._appearance=e}},{key:"checked",get:function(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked},set:function(e){var t=Object(g.coerceBooleanProperty)(e);t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}},{key:"disabled",get:function(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled},set:function(e){this._disabled=Object(g.coerceBooleanProperty)(e)}},{key:"ngOnInit",value:function(){var e=this.buttonToggleGroup;this._isSingleSelector=e&&!e.multiple,this.id=this.id||"mat-button-toggle-".concat(ee++),this._isSingleSelector&&(this.name=e.name),e&&(e._isPrechecked(this)?this.checked=!0:e._isSelected(this)!==this._checked&&e._syncButtonToggle(this,this._checked))}},{key:"ngAfterViewInit",value:function(){this._focusMonitor.monitor(this._elementRef,!0)}},{key:"ngOnDestroy",value:function(){var e=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),e&&e._isSelected(this)&&e._syncButtonToggle(this,!1,!1,!0)}},{key:"focus",value:function(e){this._buttonElement.nativeElement.focus(e)}},{key:"_onButtonClick",value:function(){var e=!!this._isSingleSelector||!this._checked;e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new te(this,this.value))}},{key:"_markForCheck",value:function(){this._changeDetectorRef.markForCheck()}}]),n}(Object(O.mixinDisableRipple)(function e(){Object(I.a)(this,e)}));ie.\u0275fac=function(e){return new(e||ie)(d["\u0275\u0275directiveInject"](Y,8),d["\u0275\u0275directiveInject"](d.ChangeDetectorRef),d["\u0275\u0275directiveInject"](d.ElementRef),d["\u0275\u0275directiveInject"](T.h),d["\u0275\u0275injectAttribute"]("tabindex"),d["\u0275\u0275directiveInject"](J,8))},ie.\u0275cmp=d["\u0275\u0275defineComponent"]({type:ie,selectors:[["mat-button-toggle"]],viewQuery:function(e,t){var n;(1&e&&d["\u0275\u0275viewQuery"]($,1),2&e)&&(d["\u0275\u0275queryRefresh"](n=d["\u0275\u0275loadQuery"]())&&(t._buttonElement=n.first))},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(e,t){1&e&&d["\u0275\u0275listener"]("focus",function(){return t.focus()}),2&e&&(d["\u0275\u0275attribute"]("aria-label",null)("aria-labelledby",null)("id",t.id)("name",null),d["\u0275\u0275classProp"]("mat-button-toggle-standalone",!t.buttonToggleGroup)("mat-button-toggle-checked",t.checked)("mat-button-toggle-disabled",t.disabled)("mat-button-toggle-appearance-standard","standard"===t.appearance))},inputs:{disableRipple:"disableRipple",ariaLabelledby:["aria-labelledby","ariaLabelledby"],tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled",id:"id",name:"name",ariaLabel:["aria-label","ariaLabel"],value:"value"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[d["\u0275\u0275InheritDefinitionFeature"]],ngContentSelectors:["*"],decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(e,t){if(1&e&&(d["\u0275\u0275projectionDef"](),d["\u0275\u0275elementStart"](0,"button",0,1),d["\u0275\u0275listener"]("click",function(){return t._onButtonClick()}),d["\u0275\u0275elementStart"](2,"span",2),d["\u0275\u0275projection"](3),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](4,"span",3),d["\u0275\u0275element"](5,"span",4)),2&e){var n=d["\u0275\u0275reference"](1);d["\u0275\u0275property"]("id",t.buttonId)("disabled",t.disabled||null),d["\u0275\u0275attribute"]("tabindex",t.disabled?-1:t.tabIndex)("aria-pressed",t.checked)("name",t.name||null)("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledby),d["\u0275\u0275advance"](5),d["\u0275\u0275property"]("matRippleTrigger",n)("matRippleDisabled",t.disableRipple||t.disabled)}},directives:[O.MatRipple],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:transparent}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.cdk-high-contrast-active .mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:.5}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}.cdk-high-contrast-active .mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.5}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{border-radius:inherit;pointer-events:none;opacity:0;top:0;left:0;right:0;bottom:0;position:absolute}.mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}\n"],encapsulation:2,changeDetection:0}),ie.ctorParameters=function(){return[{type:ne,decorators:[{type:d.Optional},{type:d.Inject,args:[Y]}]},{type:d.ChangeDetectorRef},{type:d.ElementRef},{type:T.h},{type:String,decorators:[{type:d.Attribute,args:["tabindex"]}]},{type:void 0,decorators:[{type:d.Optional},{type:d.Inject,args:[J]}]}]},ie.propDecorators={ariaLabel:[{type:d.Input,args:["aria-label"]}],ariaLabelledby:[{type:d.Input,args:["aria-labelledby"]}],_buttonElement:[{type:d.ViewChild,args:["button"]}],id:[{type:d.Input}],name:[{type:d.Input}],value:[{type:d.Input}],tabIndex:[{type:d.Input}],appearance:[{type:d.Input}],checked:[{type:d.Input}],disabled:[{type:d.Input}],change:[{type:d.Output}]},0;var ae=function e(){Object(I.a)(this,e)};ae.\u0275fac=function(e){return new(e||ae)},ae.\u0275mod=d["\u0275\u0275defineNgModule"]({type:ae}),ae.\u0275inj=d["\u0275\u0275defineInjector"]({imports:[[O.MatCommonModule,O.MatRippleModule],O.MatCommonModule]}),("undefined"==typeof ngJitMode||ngJitMode)&&d["\u0275\u0275setNgModuleScope"](ae,{declarations:function(){return[ne,ie]},imports:function(){return[O.MatCommonModule,O.MatRippleModule]},exports:function(){return[O.MatCommonModule,ne,ie]}}),0;var re=n("Wp6s"),oe=n("bSwM"),se=n("A5z7"),le=n("iadO"),ce=n("0IaG"),de=n("f0Cb"),ue=n("7EHt"),pe=n("kmnG"),me=n("zkoq"),fe=n("NFeN"),he=n("qFsG"),ge=n("MutI"),Ae=n("STbY"),be=n("M9IT"),ye=n("bv9b"),ve=n("Xa2L"),Ce=n("QibW"),xe=n("d3UM"),we=n("XhcP"),Se=n("1jcm"),Ee=n("5RNC"),Ie=n("dNgK"),Oe=n("Dh3D"),Te=n("xHqg"),Fe=n("+0xr"),Be=n("wZkO"),Me=n("/t3+"),Pe=n("Qu3c"),De=n("t9bE"),ke=n("KUzl"),_e=(n("QdLy"),n("7+OI")),Le=n("2Vo4"),je=n("1G5W"),Ne=new d.InjectionToken("CDK_TREE_NODE_OUTLET_NODE"),Re=function e(t,n){Object(I.a)(this,e),this.viewContainer=t,this._node=n};Re.\u0275fac=function(e){return new(e||Re)(d["\u0275\u0275directiveInject"](d.ViewContainerRef),d["\u0275\u0275directiveInject"](Ne,8))},Re.\u0275dir=d["\u0275\u0275defineDirective"]({type:Re,selectors:[["","cdkTreeNodeOutlet",""]]}),Re.ctorParameters=function(){return[{type:d.ViewContainerRef},{type:void 0,decorators:[{type:d.Inject,args:[Ne]},{type:d.Optional}]}]},0;var Ue=function e(t){Object(I.a)(this,e),this.$implicit=t},Ve=function e(t){Object(I.a)(this,e),this.template=t};function Qe(){return Error("Could not find functions for nested/flat tree in tree control.")}Ve.\u0275fac=function(e){return new(e||Ve)(d["\u0275\u0275directiveInject"](d.TemplateRef))},Ve.\u0275dir=d["\u0275\u0275defineDirective"]({type:Ve,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}}),Ve.ctorParameters=function(){return[{type:d.TemplateRef}]},0;var Ge=function(){function e(t,n){Object(I.a)(this,e),this._differs=t,this._changeDetectorRef=n,this._onDestroy=new k.b,this._levels=new Map,this.viewChange=new Le.a({start:0,end:Number.MAX_VALUE})}return Object(w.a)(e,[{key:"dataSource",get:function(){return this._dataSource},set:function(e){this._dataSource!==e&&this._switchDataSource(e)}},{key:"ngOnInit",value:function(){if(this._dataDiffer=this._differs.find([]).create(this.trackBy),!this.treeControl&&(0,0))throw Error("Could not find a tree control for the tree.")}},{key:"ngOnDestroy",value:function(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}},{key:"ngAfterContentChecked",value:function(){var e=this._nodeDefs.filter(function(e){return!e.when});if(e.length>1&&(0,0))throw Error("There can only be one default row without a when predicate function.");this._defaultNodeDef=e[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}},{key:"_switchDataSource",value:function(e){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),e||this._nodeOutlet.viewContainer.clear(),this._dataSource=e,this._nodeDefs&&this._observeRenderChanges()}},{key:"_observeRenderChanges",value:function(){var e,t=this;Object(A.isDataSource)(this._dataSource)?e=this._dataSource.connect(this):Object(_e.a)(this._dataSource)?e=this._dataSource:Array.isArray(this._dataSource)&&(e=Object(L.a)(this._dataSource)),e&&(this._dataSubscription=e.pipe(Object(je.a)(this._onDestroy)).subscribe(function(e){return t.renderNodeChanges(e)}))}},{key:"renderNodeChanges",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._dataDiffer,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._nodeOutlet.viewContainer,a=arguments.length>3?arguments[3]:void 0,r=n.diff(e);r&&(r.forEachOperation(function(n,r,o){if(null==n.previousIndex)t.insertNode(e[o],o,i,a);else if(null==o)i.remove(r),t._levels.delete(n.item);else{var s=i.get(r);i.move(s,o)}}),this._changeDetectorRef.detectChanges())}},{key:"_getNodeDef",value:function(e,t){if(1===this._nodeDefs.length)return this._nodeDefs.first;var n=this._nodeDefs.find(function(n){return n.when&&n.when(t,e)})||this._defaultNodeDef;if(0,!n,0)throw Error("Could not find a matching node definition for the provided node data.");return n}},{key:"insertNode",value:function(e,t,n,i){var a=this._getNodeDef(e,t),r=new Ue(e);this.treeControl.getLevel?r.level=this.treeControl.getLevel(e):void 0!==i&&this._levels.has(i)?r.level=this._levels.get(i)+1:r.level=0,this._levels.set(e,r.level),(n||this._nodeOutlet.viewContainer).createEmbeddedView(a.template,r,t),He.mostRecentTreeNode&&(He.mostRecentTreeNode.data=e)}}]),e}();Ge.\u0275fac=function(e){return new(e||Ge)(d["\u0275\u0275directiveInject"](d.IterableDiffers),d["\u0275\u0275directiveInject"](d.ChangeDetectorRef))},Ge.\u0275cmp=d["\u0275\u0275defineComponent"]({type:Ge,selectors:[["cdk-tree"]],contentQueries:function(e,t,n){var i;(1&e&&d["\u0275\u0275contentQuery"](n,Ve,1),2&e)&&(d["\u0275\u0275queryRefresh"](i=d["\u0275\u0275loadQuery"]())&&(t._nodeDefs=i))},viewQuery:function(e,t){var n;(1&e&&d["\u0275\u0275viewQuery"](Re,3),2&e)&&(d["\u0275\u0275queryRefresh"](n=d["\u0275\u0275loadQuery"]())&&(t._nodeOutlet=n.first))},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(e,t){1&e&&d["\u0275\u0275elementContainer"](0,0)},directives:[Re],encapsulation:2}),Ge.ctorParameters=function(){return[{type:d.IterableDiffers},{type:d.ChangeDetectorRef}]},Ge.propDecorators={dataSource:[{type:d.Input}],treeControl:[{type:d.Input}],trackBy:[{type:d.Input}],_nodeOutlet:[{type:d.ViewChild,args:[Re,{static:!0}]}],_nodeDefs:[{type:d.ContentChildren,args:[Ve,{descendants:!0}]}]},0;var He=function(){function e(t,n){Object(I.a)(this,e),this._elementRef=t,this._tree=n,this._destroyed=new k.b,this._dataChanges=new k.b,e.mostRecentTreeNode=this,this._elementRef.nativeElement.classList.add("cdk-tree-node"),this.role="treeitem"}return Object(w.a)(e,[{key:"role",get:function(){return"treeitem"},set:function(e){this._elementRef.nativeElement.setAttribute("role",e)}},{key:"data",get:function(){return this._data},set:function(e){e!==this._data&&(this._data=e,this._setRoleFromData(),this._dataChanges.next())}},{key:"isExpanded",get:function(){return this._tree.treeControl.isExpanded(this._data)}},{key:"_setExpanded",value:function(e){this._isAriaExpanded=e,this._elementRef.nativeElement.setAttribute("aria-expanded","".concat(e))}},{key:"level",get:function(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):this._parentNodeAriaLevel}},{key:"ngOnInit",value:function(){this._parentNodeAriaLevel=function(e){var t=e.parentElement;for(;t&&(n=t,i=void 0,i=n.classList,!(null==i?void 0:i.contains("cdk-nested-tree-node"))&&!(null==i?void 0:i.contains("cdk-tree")));)t=t.parentElement;var n,i;return t?t.classList.contains("cdk-nested-tree-node")?Object(g.coerceNumberProperty)(t.getAttribute("aria-level")):0:(0,0,-1)}(this._elementRef.nativeElement),this._elementRef.nativeElement.setAttribute("aria-level","".concat(this.level+1))}},{key:"ngDoCheck",value:function(){this.isExpanded!=this._isAriaExpanded&&this._setExpanded(this.isExpanded)}},{key:"ngOnDestroy",value:function(){e.mostRecentTreeNode===this&&(e.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}},{key:"focus",value:function(){this._elementRef.nativeElement.focus()}},{key:"_setRoleFromData",value:function(){if(!this._tree.treeControl.isExpandable&&!this._tree.treeControl.getChildren&&(0,0))throw Qe();this.role="treeitem"}}]),e}();He.\u0275fac=function(e){return new(e||He)(d["\u0275\u0275directiveInject"](d.ElementRef),d["\u0275\u0275directiveInject"](Ge))},He.\u0275dir=d["\u0275\u0275defineDirective"]({type:He,selectors:[["cdk-tree-node"]],inputs:{role:"role"},exportAs:["cdkTreeNode"]}),He.mostRecentTreeNode=null,He.ctorParameters=function(){return[{type:d.ElementRef},{type:Ge}]},He.propDecorators={role:[{type:d.Input}]},0;var Ke=function(e){Object(S.a)(n,e);var t=Object(E.a)(n);function n(e,i,a){var r;return Object(I.a)(this,n),(r=t.call(this,e,i))._elementRef=e,r._tree=i,r._differs=a,r._elementRef.nativeElement.classList.add("cdk-nested-tree-node"),r}return Object(w.a)(n,[{key:"ngAfterContentInit",value:function(){var e=this;if(this._dataDiffer=this._differs.find([]).create(this._tree.trackBy),!this._tree.treeControl.getChildren&&(0,0))throw Qe();var t=this._tree.treeControl.getChildren(this.data);Array.isArray(t)?this.updateChildrenNodes(t):Object(_e.a)(t)&&t.pipe(Object(je.a)(this._destroyed)).subscribe(function(t){return e.updateChildrenNodes(t)}),this.nodeOutlet.changes.pipe(Object(je.a)(this._destroyed)).subscribe(function(){return e.updateChildrenNodes()})}},{key:"ngOnInit",value:function(){Object(De.a)(Object(ke.a)(n.prototype),"ngOnInit",this).call(this)}},{key:"ngDoCheck",value:function(){Object(De.a)(Object(ke.a)(n.prototype),"ngDoCheck",this).call(this)}},{key:"ngOnDestroy",value:function(){this._clear(),Object(De.a)(Object(ke.a)(n.prototype),"ngOnDestroy",this).call(this)}},{key:"updateChildrenNodes",value:function(e){var t=this._getNodeOutlet();if(e&&(this._children=e),t&&this._children){var n=t.viewContainer;this._tree.renderNodeChanges(this._children,this._dataDiffer,n,this._data)}else this._dataDiffer.diff([])}},{key:"_clear",value:function(){var e=this._getNodeOutlet();e&&(e.viewContainer.clear(),this._dataDiffer.diff([]))}},{key:"_getNodeOutlet",value:function(){var e=this,t=this.nodeOutlet;return t&&t.find(function(t){return!t._node||t._node===e})}}]),n}(He);Ke.\u0275fac=function(e){return new(e||Ke)(d["\u0275\u0275directiveInject"](d.ElementRef),d["\u0275\u0275directiveInject"](Ge),d["\u0275\u0275directiveInject"](d.IterableDiffers))},Ke.\u0275dir=d["\u0275\u0275defineDirective"]({type:Ke,selectors:[["cdk-nested-tree-node"]],contentQueries:function(e,t,n){var i;(1&e&&d["\u0275\u0275contentQuery"](n,Re,1),2&e)&&(d["\u0275\u0275queryRefresh"](i=d["\u0275\u0275loadQuery"]())&&(t.nodeOutlet=i))},inputs:{role:"role",disabled:"disabled",tabIndex:"tabIndex"},exportAs:["cdkNestedTreeNode"],features:[d["\u0275\u0275ProvidersFeature"]([{provide:He,useExisting:Ke},{provide:Ne,useExisting:Ke}]),d["\u0275\u0275InheritDefinitionFeature"]]}),Ke.ctorParameters=function(){return[{type:d.ElementRef},{type:Ge},{type:d.IterableDiffers}]},Ke.propDecorators={nodeOutlet:[{type:d.ContentChildren,args:[Re,{descendants:!0}]}]},0;var qe=/([A-Za-z%]+)$/,ze=function(){function e(t,n,i,a){var r=this;Object(I.a)(this,e),this._treeNode=t,this._tree=n,this._element=i,this._dir=a,this._destroyed=new k.b,this.indentUnits="px",this._indent=40,this._setPadding(),a&&a.change.pipe(Object(je.a)(this._destroyed)).subscribe(function(){return r._setPadding(!0)}),t._dataChanges.subscribe(function(){return r._setPadding()})}return Object(w.a)(e,[{key:"level",get:function(){return this._level},set:function(e){this._setLevelInput(e)}},{key:"indent",get:function(){return this._indent},set:function(e){this._setIndentInput(e)}},{key:"ngOnDestroy",value:function(){this._destroyed.next(),this._destroyed.complete()}},{key:"_paddingIndent",value:function(){var e=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,t=null==this._level?e:this._level;return"number"==typeof t?"".concat(t*this._indent).concat(this.indentUnits):null}},{key:"_setPadding",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._paddingIndent();if(t!==this._currentPadding||e){var n=this._element.nativeElement,i=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",a="paddingLeft"===i?"paddingRight":"paddingLeft";n.style[i]=t||"",n.style[a]="",this._currentPadding=t}}},{key:"_setLevelInput",value:function(e){this._level=Object(g.coerceNumberProperty)(e,null),this._setPadding()}},{key:"_setIndentInput",value:function(e){var t=e,n="px";if("string"==typeof e){var i=e.split(qe);t=i[0],n=i[1]||n}this.indentUnits=n,this._indent=Object(g.coerceNumberProperty)(t),this._setPadding()}}]),e}();ze.\u0275fac=function(e){return new(e||ze)(d["\u0275\u0275directiveInject"](He),d["\u0275\u0275directiveInject"](Ge),d["\u0275\u0275directiveInject"](d.ElementRef),d["\u0275\u0275directiveInject"](D.b,8))},ze.\u0275dir=d["\u0275\u0275defineDirective"]({type:ze,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:["cdkTreeNodePadding","level"],indent:["cdkTreeNodePaddingIndent","indent"]}}),ze.ctorParameters=function(){return[{type:He},{type:Ge},{type:d.ElementRef},{type:D.b,decorators:[{type:d.Optional}]}]},ze.propDecorators={level:[{type:d.Input,args:["cdkTreeNodePadding"]}],indent:[{type:d.Input,args:["cdkTreeNodePaddingIndent"]}]},0;var We=function(){function e(t,n){Object(I.a)(this,e),this._tree=t,this._treeNode=n,this._recursive=!1}return Object(w.a)(e,[{key:"recursive",get:function(){return this._recursive},set:function(e){this._recursive=Object(g.coerceBooleanProperty)(e)}},{key:"_toggle",value:function(e){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),e.stopPropagation()}}]),e}();We.\u0275fac=function(e){return new(e||We)(d["\u0275\u0275directiveInject"](Ge),d["\u0275\u0275directiveInject"](He))},We.\u0275dir=d["\u0275\u0275defineDirective"]({type:We,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(e,t){1&e&&d["\u0275\u0275listener"]("click",function(e){return t._toggle(e)})},inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]}}),We.ctorParameters=function(){return[{type:Ge},{type:He}]},We.propDecorators={recursive:[{type:d.Input,args:["cdkTreeNodeToggleRecursive"]}],_toggle:[{type:d.HostListener,args:["click",["$event"]]}]},0;var Xe=function e(){Object(I.a)(this,e)};Xe.\u0275fac=function(e){return new(e||Xe)},Xe.\u0275mod=d["\u0275\u0275defineNgModule"]({type:Xe}),Xe.\u0275inj=d["\u0275\u0275defineInjector"]({}),("undefined"==typeof ngJitMode||ngJitMode)&&d["\u0275\u0275setNgModuleScope"](Xe,{declarations:[Ke,Ve,ze,We,Ge,He,Re],exports:[Ke,Ve,ze,We,Ge,He,Re]}),0;var $e=n("lJxs"),Je=function(e){Object(S.a)(n,e);var t=Object(E.a)(n);function n(e,i,a){var r;return Object(I.a)(this,n),(r=t.call(this,e,i))._elementRef=e,r._tree=i,r.tabIndex=Number(a)||0,r._elementRef.nativeElement.classList.add("mat-tree-node"),r}return Object(w.a)(n,[{key:"ngOnInit",value:function(){Object(De.a)(Object(ke.a)(n.prototype),"ngOnInit",this).call(this)}},{key:"ngDoCheck",value:function(){Object(De.a)(Object(ke.a)(n.prototype),"ngDoCheck",this).call(this)}},{key:"ngOnDestroy",value:function(){Object(De.a)(Object(ke.a)(n.prototype),"ngOnDestroy",this).call(this)}}]),n}(Object(O.mixinTabIndex)(Object(O.mixinDisabled)(He)));Je.\u0275fac=function(e){return new(e||Je)(d["\u0275\u0275directiveInject"](d.ElementRef),d["\u0275\u0275directiveInject"](Ge),d["\u0275\u0275injectAttribute"]("tabindex"))},Je.\u0275dir=d["\u0275\u0275defineDirective"]({type:Je,selectors:[["mat-tree-node"]],inputs:{role:"role",disabled:"disabled",tabIndex:"tabIndex"},exportAs:["matTreeNode"],features:[d["\u0275\u0275ProvidersFeature"]([{provide:He,useExisting:Je}]),d["\u0275\u0275InheritDefinitionFeature"]]}),Je.ctorParameters=function(){return[{type:d.ElementRef},{type:Ge},{type:String,decorators:[{type:d.Attribute,args:["tabindex"]}]}]},0;var Ye=function(e){Object(S.a)(n,e);var t=Object(E.a)(n);function n(){return Object(I.a)(this,n),t.apply(this,arguments)}return n}(Ve);Ye.\u0275fac=function(e){return Ze(e||Ye)},Ye.\u0275dir=d["\u0275\u0275defineDirective"]({type:Ye,selectors:[["","matTreeNodeDef",""]],inputs:{when:["matTreeNodeDefWhen","when"],data:["matTreeNode","data"]},features:[d["\u0275\u0275ProvidersFeature"]([{provide:Ve,useExisting:Ye}]),d["\u0275\u0275InheritDefinitionFeature"]]}),Ye.propDecorators={data:[{type:d.Input,args:["matTreeNode"]}]};var Ze=d["\u0275\u0275getInheritedFactory"](Ye);0,void 0;var et=function(e){Object(S.a)(n,e);var t=Object(E.a)(n);function n(e,i,a,r){var o;return Object(I.a)(this,n),(o=t.call(this,e,i,a))._elementRef=e,o._tree=i,o._differs=a,o._disabled=!1,o.tabIndex=Number(r)||0,o._elementRef.nativeElement.classList.add("mat-nested-tree-node"),o}return Object(w.a)(n,[{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=Object(g.coerceBooleanProperty)(e)}},{key:"tabIndex",get:function(){return this.disabled?-1:this._tabIndex},set:function(e){this._tabIndex=null!=e?e:0}},{key:"ngOnInit",value:function(){Object(De.a)(Object(ke.a)(n.prototype),"ngOnInit",this).call(this)}},{key:"ngDoCheck",value:function(){Object(De.a)(Object(ke.a)(n.prototype),"ngDoCheck",this).call(this)}},{key:"ngAfterContentInit",value:function(){Object(De.a)(Object(ke.a)(n.prototype),"ngAfterContentInit",this).call(this)}},{key:"ngOnDestroy",value:function(){Object(De.a)(Object(ke.a)(n.prototype),"ngOnDestroy",this).call(this)}}]),n}(Ke);et.\u0275fac=function(e){return new(e||et)(d["\u0275\u0275directiveInject"](d.ElementRef),d["\u0275\u0275directiveInject"](Ge),d["\u0275\u0275directiveInject"](d.IterableDiffers),d["\u0275\u0275injectAttribute"]("tabindex"))},et.\u0275dir=d["\u0275\u0275defineDirective"]({type:et,selectors:[["mat-nested-tree-node"]],inputs:{role:"role",disabled:"disabled",tabIndex:"tabIndex",node:["matNestedTreeNode","node"]},exportAs:["matNestedTreeNode"],features:[d["\u0275\u0275ProvidersFeature"]([{provide:Ke,useExisting:et},{provide:He,useExisting:et},{provide:Ne,useExisting:et}]),d["\u0275\u0275InheritDefinitionFeature"]]}),et.ctorParameters=function(){return[{type:d.ElementRef},{type:Ge},{type:d.IterableDiffers},{type:String,decorators:[{type:d.Attribute,args:["tabindex"]}]}]},et.propDecorators={node:[{type:d.Input,args:["matNestedTreeNode"]}],disabled:[{type:d.Input}],tabIndex:[{type:d.Input}]},0;var tt=function(e){Object(S.a)(n,e);var t=Object(E.a)(n);function n(){return Object(I.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"level",get:function(){return this._level},set:function(e){this._setLevelInput(e)}},{key:"indent",get:function(){return this._indent},set:function(e){this._setIndentInput(e)}}]),n}(ze);tt.\u0275fac=function(e){return nt(e||tt)},tt.\u0275dir=d["\u0275\u0275defineDirective"]({type:tt,selectors:[["","matTreeNodePadding",""]],inputs:{level:["matTreeNodePadding","level"],indent:["matTreeNodePaddingIndent","indent"]},features:[d["\u0275\u0275ProvidersFeature"]([{provide:ze,useExisting:tt}]),d["\u0275\u0275InheritDefinitionFeature"]]}),tt.propDecorators={level:[{type:d.Input,args:["matTreeNodePadding"]}],indent:[{type:d.Input,args:["matTreeNodePaddingIndent"]}]};var nt=d["\u0275\u0275getInheritedFactory"](tt);0,void 0;var it=function e(t,n){Object(I.a)(this,e),this.viewContainer=t,this._node=n};it.\u0275fac=function(e){return new(e||it)(d["\u0275\u0275directiveInject"](d.ViewContainerRef),d["\u0275\u0275directiveInject"](Ne,8))},it.\u0275dir=d["\u0275\u0275defineDirective"]({type:it,selectors:[["","matTreeNodeOutlet",""]],features:[d["\u0275\u0275ProvidersFeature"]([{provide:Re,useExisting:it}])]}),it.ctorParameters=function(){return[{type:d.ViewContainerRef},{type:void 0,decorators:[{type:d.Inject,args:[Ne]},{type:d.Optional}]}]},0;var at=function(e){Object(S.a)(n,e);var t=Object(E.a)(n);function n(){return Object(I.a)(this,n),t.apply(this,arguments)}return n}(Ge);at.\u0275fac=function(e){return rt(e||at)},at.\u0275cmp=d["\u0275\u0275defineComponent"]({type:at,selectors:[["mat-tree"]],viewQuery:function(e,t){var n;(1&e&&d["\u0275\u0275viewQuery"](it,3),2&e)&&(d["\u0275\u0275queryRefresh"](n=d["\u0275\u0275loadQuery"]())&&(t._nodeOutlet=n.first))},hostAttrs:["role","tree",1,"mat-tree","cdk-tree"],exportAs:["matTree"],features:[d["\u0275\u0275ProvidersFeature"]([{provide:Ge,useExisting:at}]),d["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:0,consts:[["matTreeNodeOutlet",""]],template:function(e,t){1&e&&d["\u0275\u0275elementContainer"](0,0)},directives:[it],styles:[".mat-tree{display:block}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word}.mat-nested-tree-node{border-bottom-width:0}\n"],encapsulation:2}),at.propDecorators={_nodeOutlet:[{type:d.ViewChild,args:[it,{static:!0}]}]};var rt=d["\u0275\u0275getInheritedFactory"](at);0,void 0;var ot=function(e){Object(S.a)(n,e);var t=Object(E.a)(n);function n(){return Object(I.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"recursive",get:function(){return this._recursive},set:function(e){this._recursive=Object(g.coerceBooleanProperty)(e)}}]),n}(We);ot.\u0275fac=function(e){return st(e||ot)},ot.\u0275dir=d["\u0275\u0275defineDirective"]({type:ot,selectors:[["","matTreeNodeToggle",""]],inputs:{recursive:["matTreeNodeToggleRecursive","recursive"]},features:[d["\u0275\u0275ProvidersFeature"]([{provide:We,useExisting:ot}]),d["\u0275\u0275InheritDefinitionFeature"]]}),ot.propDecorators={recursive:[{type:d.Input,args:["matTreeNodeToggleRecursive"]}]};var st=d["\u0275\u0275getInheritedFactory"](ot);0,void 0;var lt=function e(){Object(I.a)(this,e)};lt.\u0275fac=function(e){return new(e||lt)},lt.\u0275mod=d["\u0275\u0275defineNgModule"]({type:lt}),lt.\u0275inj=d["\u0275\u0275defineInjector"]({imports:[[Xe,O.MatCommonModule],O.MatCommonModule]}),("undefined"==typeof ngJitMode||ngJitMode)&&d["\u0275\u0275setNgModuleScope"](lt,{declarations:function(){return[et,Ye,tt,ot,at,Je,it]},imports:function(){return[Xe,O.MatCommonModule]},exports:function(){return[O.MatCommonModule,et,Ye,tt,ot,at,Je,it]}}),0;var ct=function(){function e(t,n,i,a){Object(I.a)(this,e),this.transformFunction=t,this.getLevel=n,this.isExpandable=i,this.getChildren=a}return Object(w.a)(e,[{key:"_flattenNode",value:function(e,t,n,i){var a=this,r=this.transformFunction(e,t);if(n.push(r),this.isExpandable(r)){var o=this.getChildren(e);o&&(Array.isArray(o)?this._flattenChildren(o,t,n,i):o.pipe(Object(N.a)(1)).subscribe(function(e){a._flattenChildren(e,t,n,i)}))}return n}},{key:"_flattenChildren",value:function(e,t,n,i){var a=this;e.forEach(function(r,o){var s=i.slice();s.push(o!=e.length-1),a._flattenNode(r,t+1,n,s)})}},{key:"flattenNodes",value:function(e){var t=this,n=[];return e.forEach(function(e){return t._flattenNode(e,0,n,[])}),n}},{key:"expandFlattenedNodes",value:function(e,t){var n=this,i=[],a=[];return a[0]=!0,e.forEach(function(e){for(var r=!0,o=0;o<=n.getLevel(e);o++)r=r&&a[o];r&&i.push(e),n.isExpandable(e)&&(a[n.getLevel(e)+1]=t.isExpanded(e))}),i}}]),e}(),dt=function(e){Object(S.a)(n,e);var t=Object(E.a)(n);function n(e,i){var a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Object(I.a)(this,n),(a=t.call(this))._treeControl=e,a._treeFlattener=i,a._flattenedData=new Le.a([]),a._expandedData=new Le.a([]),a._data=new Le.a(r),a}return Object(w.a)(n,[{key:"data",get:function(){return this._data.value},set:function(e){this._data.next(e),this._flattenedData.next(this._treeFlattener.flattenNodes(this.data)),this._treeControl.dataNodes=this._flattenedData.value}},{key:"connect",value:function(e){var t=this,n=[e.viewChange,this._treeControl.expansionModel.changed,this._flattenedData];return _.a.apply(void 0,n).pipe(Object($e.a)(function(){return t._expandedData.next(t._treeFlattener.expandFlattenedNodes(t._flattenedData.value,t._treeControl)),t._expandedData.value}))}},{key:"disconnect",value:function(){}}]),n}(A.DataSource),ut=function(e){Object(S.a)(n,e);var t=Object(E.a)(n);function n(){var e;return Object(I.a)(this,n),(e=t.apply(this,arguments))._data=new Le.a([]),e}return Object(w.a)(n,[{key:"data",get:function(){return this._data.value},set:function(e){this._data.next(e)}},{key:"connect",value:function(e){var t=this;return _.a.apply(void 0,[e.viewChange,this._data]).pipe(Object($e.a)(function(){return t.data}))}},{key:"disconnect",value:function(){}}]),n}(A.DataSource),pt=n("l7P3"),mt=n("qCKp"),ft=n("kU1M"),ht=n("sYmb"),gt=n("GL+W"),At=n("6C3e"),bt=n("G4cQ"),yt=n("wd/R"),vt=n("95OS"),Ct=n("vxfF"),xt=n("nLfN"),wt=n("quSY"),St=n("l5mm"),Et=n("eNwd"),It=n("HDdC"),Ot=n("JX91"),Tt=n("vkgz"),Ft=n("eIep");function Bt(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Mt(e,t){var n=t?"":"none";Bt(e.style,{touchAction:t?"":"none",webkitUserDrag:t?"":"none",webkitTapHighlightColor:t?"":"transparent",userSelect:n,msUserSelect:n,webkitUserSelect:n,MozUserSelect:n})}function Pt(e,t){var n=e.style;n.position=t?"":"fixed",n.top=n.opacity=t?"":"0",n.left=t?"":"-999em"}function Dt(e){var t=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*t}function kt(e,t){return e.getPropertyValue(t).split(",").map(function(e){return e.trim()})}function _t(e){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}}function Lt(e,t,n){var i=e.top,a=e.bottom,r=e.left,o=e.right;return n>=i&&n<=a&&t>=r&&t<=o}function jt(e,t,n){e.top+=t,e.bottom=e.top+e.height,e.left+=n,e.right=e.left+e.width}function Nt(e,t,n,i){var a=e.top,r=e.right,o=e.bottom,s=e.left,l=e.width*t,c=e.height*t;return i>a-c&&i<o+c&&n>s-l&&n<r+l}var Rt=function(){function e(t,n){Object(I.a)(this,e),this._document=t,this._viewportRuler=n,this.positions=new Map}return Object(w.a)(e,[{key:"clear",value:function(){this.positions.clear()}},{key:"cache",value:function(e){var t=this;this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),e.forEach(function(e){t.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:_t(e)})})}},{key:"handleScroll",value:function(e){var t=e.target,n=this.positions.get(t);if(!n)return null;var i,a,r=t===this._document?t.documentElement:t,o=n.scrollPosition;if(t===this._document){var s=this._viewportRuler.getViewportScrollPosition();i=s.top,a=s.left}else i=t.scrollTop,a=t.scrollLeft;var l=o.top-i,c=o.left-a;return this.positions.forEach(function(e,n){e.clientRect&&t!==n&&r.contains(n)&&jt(e.clientRect,l,c)}),o.top=i,o.left=a,{top:l,left:c}}}]),e}();function Ut(e){var t=e.cloneNode(!0),n=t.querySelectorAll("[id]"),i=e.nodeName.toLowerCase();t.removeAttribute("id");for(var a=0;a<n.length;a++)n[a].removeAttribute("id");return"canvas"===i?Ht(e,t):"input"!==i&&"select"!==i&&"textarea"!==i||Gt(e,t),Vt("canvas",e,t,Ht),Vt("input, textarea, select",e,t,Gt),t}function Vt(e,t,n,i){var a=t.querySelectorAll(e);if(a.length)for(var r=n.querySelectorAll(e),o=0;o<a.length;o++)i(a[o],r[o])}var Qt=0;function Gt(e,t){"file"!==t.type&&(t.value=e.value),"radio"===t.type&&t.name&&(t.name="mat-clone-".concat(t.name,"-").concat(Qt++))}function Ht(e,t){var n=t.getContext("2d");if(n)try{n.drawImage(e,0,0)}catch(i){}}var Kt=Object(xt.f)({passive:!0}),qt=Object(xt.f)({passive:!1}),zt=function(){function e(t,n,i,a,r,o){var s=this;Object(I.a)(this,e),this._config=n,this._document=i,this._ngZone=a,this._viewportRuler=r,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new k.b,this._pointerMoveSubscription=wt.a.EMPTY,this._pointerUpSubscription=wt.a.EMPTY,this._scrollSubscription=wt.a.EMPTY,this._resizeSubscription=wt.a.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new k.b,this.started=new k.b,this.released=new k.b,this.ended=new k.b,this.entered=new k.b,this.exited=new k.b,this.dropped=new k.b,this.moved=this._moveEvents,this._pointerDown=function(e){if(s.beforeStarted.next(),s._handles.length){var t=s._handles.find(function(t){var n=e.target;return!!n&&(n===t||t.contains(n))});!t||s._disabledHandles.has(t)||s.disabled||s._initializeDragSequence(t,e)}else s.disabled||s._initializeDragSequence(s._rootElement,e)},this._pointerMove=function(e){var t=s._getPointerPositionOnPage(e);if(s._hasStartedDragging){s._boundaryElement&&(s._previewRect&&(s._previewRect.width||s._previewRect.height)||(s._previewRect=(s._preview||s._rootElement).getBoundingClientRect())),e.preventDefault();var n=s._getConstrainedPointerPosition(t);if(s._hasMoved=!0,s._lastKnownPointerPosition=t,s._updatePointerDirectionDelta(n),s._dropContainer)s._updateActiveDropContainer(n,t);else{var i=s._activeTransform;if(i.x=n.x-s._pickupPositionOnPage.x+s._passiveTransform.x,i.y=n.y-s._pickupPositionOnPage.y+s._passiveTransform.y,s._applyRootElementTransform(i.x,i.y),"undefined"!=typeof SVGElement&&s._rootElement instanceof SVGElement){var a="translate(".concat(i.x," ").concat(i.y,")");s._rootElement.setAttribute("transform",a)}}s._moveEvents.observers.length&&s._ngZone.run(function(){s._moveEvents.next({source:s,pointerPosition:n,event:e,distance:s._getDragDistance(n),delta:s._pointerDirectionDelta})})}else{if(Math.abs(t.x-s._pickupPositionOnPage.x)+Math.abs(t.y-s._pickupPositionOnPage.y)>=s._config.dragStartThreshold){var r=Date.now()>=s._dragStartTime+s._getDragStartDelay(e),o=s._dropContainer;if(!r)return s._endDragSequence(e),void 0;o&&(o.isDragging()||o.isReceiving())||(e.preventDefault(),s._hasStartedDragging=!0,s._ngZone.run(function(){return s._startDragSequence(e)}))}}},this._pointerUp=function(e){s._endDragSequence(e)},this.withRootElement(t).withParent(n.parentDragRef||null),this._parentPositions=new Rt(i,r),o.registerDragItem(this)}return Object(w.a)(e,[{key:"disabled",get:function(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)},set:function(e){var t=Object(g.coerceBooleanProperty)(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(function(e){return Mt(e,t)}))}},{key:"getPlaceholderElement",value:function(){return this._placeholder}},{key:"getRootElement",value:function(){return this._rootElement}},{key:"getVisibleElement",value:function(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}},{key:"withHandles",value:function(e){var t=this;this._handles=e.map(function(e){return Object(g.coerceElement)(e)}),this._handles.forEach(function(e){return Mt(e,t.disabled)}),this._toggleNativeDragInteractions();var n=new Set;return this._disabledHandles.forEach(function(e){t._handles.indexOf(e)>-1&&n.add(e)}),this._disabledHandles=n,this}},{key:"withPreviewTemplate",value:function(e){return this._previewTemplate=e,this}},{key:"withPlaceholderTemplate",value:function(e){return this._placeholderTemplate=e,this}},{key:"withRootElement",value:function(e){var t=this,n=Object(g.coerceElement)(e);return n!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(function(){n.addEventListener("mousedown",t._pointerDown,qt),n.addEventListener("touchstart",t._pointerDown,Kt)}),this._initialTransform=void 0,this._rootElement=n),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}},{key:"withBoundaryElement",value:function(e){var t=this;return this._boundaryElement=e?Object(g.coerceElement)(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(function(){return t._containInsideBoundaryOnResize()})),this}},{key:"withParent",value:function(e){return this._parentDragRef=e,this}},{key:"dispose",value:function(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&$t(this._rootElement),$t(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}},{key:"isDragging",value:function(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}},{key:"reset",value:function(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}},{key:"disableHandle",value:function(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),Mt(e,!0))}},{key:"enableHandle",value:function(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),Mt(e,this.disabled))}},{key:"withDirection",value:function(e){return this._direction=e,this}},{key:"_withDropContainer",value:function(e){this._dropContainer=e}},{key:"getFreeDragPosition",value:function(){var e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}},{key:"setFreeDragPosition",value:function(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}},{key:"_sortFromLastPointerPosition",value:function(){var e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}},{key:"_removeSubscriptions",value:function(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}},{key:"_destroyPreview",value:function(){this._preview&&$t(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}},{key:"_destroyPlaceholder",value:function(){this._placeholder&&$t(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}},{key:"_endDragSequence",value:function(e){var t=this;this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging&&(this.released.next({source:this}),this._dropContainer?(this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(function(){t._cleanupDragArtifacts(e),t._cleanupCachedDimensions(),t._dragDropRegistry.stopDragging(t)})):(this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(function(){t.ended.next({source:t,distance:t._getDragDistance(t._getPointerPositionOnPage(e))})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this))))}},{key:"_startDragSequence",value:function(e){Jt(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();var t=this._dropContainer;if(t){var n=this._rootElement,i=n.parentNode,a=this._preview=this._createPreviewElement(),r=this._placeholder=this._createPlaceholderElement(),o=this._anchor=this._anchor||this._document.createComment(""),s=this._getShadowRoot();i.insertBefore(o,n),Pt(n,!1),this._document.body.appendChild(i.replaceChild(r,n)),function(e,t){return t||e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement||e.body}(this._document,s).appendChild(a),this.started.next({source:this}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}},{key:"_initializeDragSequence",value:function(e,t){var n=this;this._parentDragRef&&t.stopPropagation();var i=this.isDragging(),a=Jt(t),r=!a&&0!==t.button,o=this._rootElement,s=!a&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now();if(t.target&&t.target.draggable&&"mousedown"===t.type&&t.preventDefault(),!(i||r||s)){this._handles.length&&(this._rootElementTapHighlight=o.style.webkitTapHighlightColor||"",o.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scroll.subscribe(function(e){n._updateOnScroll(e)}),this._boundaryElement&&(this._boundaryRect=_t(this._boundaryElement));var l=this._previewTemplate;this._pickupPositionInElement=l&&l.template&&!l.matchSize?{x:0,y:0}:this._getPointerPositionInElement(e,t);var c=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:c.x,y:c.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}}},{key:"_cleanupDragArtifacts",value:function(e){var t=this;Pt(this._rootElement,!0),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run(function(){var n=t._dropContainer,i=n.getItemIndex(t),a=t._getPointerPositionOnPage(e),r=t._getDragDistance(t._getPointerPositionOnPage(e)),o=n._isOverContainer(a.x,a.y);t.ended.next({source:t,distance:r}),t.dropped.next({item:t,currentIndex:i,previousIndex:t._initialIndex,container:n,previousContainer:t._initialContainer,isPointerOverContainer:o,distance:r}),n.drop(t,i,t._initialIndex,t._initialContainer,o,r),t._dropContainer=t._initialContainer})}},{key:"_updateActiveDropContainer",value:function(e,t){var n=this,i=e.x,a=e.y,r=t.x,o=t.y,s=this._initialContainer._getSiblingContainerFromPosition(this,i,a);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(i,a)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(function(){n.exited.next({item:n,container:n._dropContainer}),n._dropContainer.exit(n),n._dropContainer=s,n._dropContainer.enter(n,i,a,s===n._initialContainer&&s.sortingDisabled?n._initialIndex:void 0),n.entered.next({item:n,container:s,currentIndex:s.getItemIndex(n)})}),this._dropContainer._startScrollingIfNecessary(r,o),this._dropContainer._sortItem(this,i,a,this._pointerDirectionDelta),this._preview.style.transform=Wt(i-this._pickupPositionInElement.x,a-this._pickupPositionInElement.y)}},{key:"_createPreviewElement",value:function(){var e,t=this._previewTemplate,n=this.previewClass,i=t?t.template:null;if(i&&t){var a=t.matchSize?this._rootElement.getBoundingClientRect():null,r=t.viewContainer.createEmbeddedView(i,t.context);r.detectChanges(),e=Yt(r,this._document),this._previewRef=r,t.matchSize?Zt(e,a):e.style.transform=Wt(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{var o=this._rootElement;Zt(e=Ut(o),o.getBoundingClientRect())}return Bt(e.style,{pointerEvents:"none",margin:"0",position:"fixed",top:"0",left:"0",zIndex:"".concat(this._config.zIndex||1e3)}),Mt(e,!1),e.classList.add("cdk-drag-preview"),e.setAttribute("dir",this._direction),n&&(Array.isArray(n)?n.forEach(function(t){return e.classList.add(t)}):e.classList.add(n)),e}},{key:"_animatePreviewToPlaceholder",value:function(){var e=this;if(!this._hasMoved)return Promise.resolve();var t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=Wt(t.left,t.top);var n=function(e){var t=getComputedStyle(e),n=kt(t,"transition-property"),i=n.find(function(e){return"transform"===e||"all"===e});if(!i)return 0;var a=n.indexOf(i),r=kt(t,"transition-duration"),o=kt(t,"transition-delay");return Dt(r[a])+Dt(o[a])}(this._preview);return 0===n?Promise.resolve():this._ngZone.runOutsideAngular(function(){return new Promise(function(t){var i=function n(i){(!i||i.target===e._preview&&"transform"===i.propertyName)&&(e._preview.removeEventListener("transitionend",n),t(),clearTimeout(a))},a=setTimeout(i,1.5*n);e._preview.addEventListener("transitionend",i)})})}},{key:"_createPlaceholderElement",value:function(){var e,t=this._placeholderTemplate,n=t?t.template:null;return n?(this._placeholderRef=t.viewContainer.createEmbeddedView(n,t.context),this._placeholderRef.detectChanges(),e=Yt(this._placeholderRef,this._document)):e=Ut(this._rootElement),e.classList.add("cdk-drag-placeholder"),e}},{key:"_getPointerPositionInElement",value:function(e,t){var n=this._rootElement.getBoundingClientRect(),i=e===this._rootElement?null:e,a=i?i.getBoundingClientRect():n,r=Jt(t)?t.targetTouches[0]:t,o=this._getViewportScrollPosition(),s=r.pageX-a.left-o.left,l=r.pageY-a.top-o.top;return{x:a.left-n.left+s,y:a.top-n.top+l}}},{key:"_getPointerPositionOnPage",value:function(e){var t=this._getViewportScrollPosition(),n=Jt(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=n.pageX-t.left,a=n.pageY-t.top;if(this._ownerSVGElement){var r=this._ownerSVGElement.getScreenCTM();if(r){var o=this._ownerSVGElement.createSVGPoint();return o.x=i,o.y=a,o.matrixTransform(r.inverse())}}return{x:i,y:a}}},{key:"_getConstrainedPointerPosition",value:function(e){var t=this._dropContainer?this._dropContainer.lockAxis:null,n=this.constrainPosition?this.constrainPosition(e,this):e,i=n.x,a=n.y;if("x"===this.lockAxis||"x"===t?a=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==t||(i=this._pickupPositionOnPage.x),this._boundaryRect){var r=this._pickupPositionInElement,o=r.x,s=r.y,l=this._boundaryRect,c=this._previewRect,d=l.top+s,u=l.bottom-(c.height-s);i=Xt(i,l.left+o,l.right-(c.width-o)),a=Xt(a,d,u)}return{x:i,y:a}}},{key:"_updatePointerDirectionDelta",value:function(e){var t=e.x,n=e.y,i=this._pointerDirectionDelta,a=this._pointerPositionAtLastDirectionChange,r=Math.abs(t-a.x),o=Math.abs(n-a.y);return r>this._config.pointerDirectionChangeThreshold&&(i.x=t>a.x?1:-1,a.x=t),o>this._config.pointerDirectionChangeThreshold&&(i.y=n>a.y?1:-1,a.y=n),i}},{key:"_toggleNativeDragInteractions",value:function(){if(this._rootElement&&this._handles){var e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,Mt(this._rootElement,e))}}},{key:"_removeRootElementListeners",value:function(e){e.removeEventListener("mousedown",this._pointerDown,qt),e.removeEventListener("touchstart",this._pointerDown,Kt)}},{key:"_applyRootElementTransform",value:function(e,t){var n=Wt(e,t);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._rootElement.style.transform=this._initialTransform?n+" "+this._initialTransform:n}},{key:"_getDragDistance",value:function(e){var t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}},{key:"_cleanupCachedDimensions",value:function(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}},{key:"_containInsideBoundaryOnResize",value:function(){var e=this._passiveTransform,t=e.x,n=e.y;if(!(0===t&&0===n||this.isDragging())&&this._boundaryElement){var i=this._boundaryElement.getBoundingClientRect(),a=this._rootElement.getBoundingClientRect();if(!(0===i.width&&0===i.height||0===a.width&&0===a.height)){var r=i.left-a.left,o=a.right-i.right,s=i.top-a.top,l=a.bottom-i.bottom;i.width>a.width?(r>0&&(t+=r),o>0&&(t-=o)):t=0,i.height>a.height?(s>0&&(n+=s),l>0&&(n-=l)):n=0,t===this._passiveTransform.x&&n===this._passiveTransform.y||this.setFreeDragPosition({y:n,x:t})}}}},{key:"_getDragStartDelay",value:function(e){var t=this.dragStartDelay;return"number"==typeof t?t:Jt(e)?t.touch:t?t.mouse:0}},{key:"_updateOnScroll",value:function(e){var t=this._parentPositions.handleScroll(e);if(t){var n=e.target;this._boundaryRect&&(n===this._document||n!==this._boundaryElement&&n.contains(this._boundaryElement))&&jt(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}},{key:"_getViewportScrollPosition",value:function(){var e=this._parentPositions.positions.get(this._document);return e?e.scrollPosition:this._viewportRuler.getViewportScrollPosition()}},{key:"_getShadowRoot",value:function(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=Object(xt.c)(this._rootElement)),this._cachedShadowRoot}}]),e}();function Wt(e,t){return"translate3d(".concat(Math.round(e),"px, ").concat(Math.round(t),"px, 0)")}function Xt(e,t,n){return Math.max(t,Math.min(n,e))}function $t(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Jt(e){return"t"===e.type[0]}function Yt(e,t){var n=e.rootNodes;if(1===n.length&&n[0].nodeType===t.ELEMENT_NODE)return n[0];var i=t.createElement("div");return n.forEach(function(e){return i.appendChild(e)}),i}function Zt(e,t){e.style.width="".concat(t.width,"px"),e.style.height="".concat(t.height,"px"),e.style.transform=Wt(t.left,t.top)}function en(e,t,n){var i=an(t,e.length-1),a=an(n,e.length-1);if(i!==a){for(var r=e[i],o=a<i?-1:1,s=i;s!==a;s+=o)e[s]=e[s+o];e[a]=r}}function tn(e,t,n,i){var a=an(n,e.length-1),r=an(i,t.length);e.length&&t.splice(r,0,e.splice(a,1)[0])}function nn(e,t,n,i){var a=an(i,t.length);e.length&&t.splice(a,0,e[n])}function an(e,t){return Math.max(0,Math.min(t,e))}var rn=function(){function e(t,n,i,a,r){var o=this;Object(I.a)(this,e),this._dragDropRegistry=n,this._ngZone=a,this._viewportRuler=r,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=function(){return!0},this.sortPredicate=function(){return!0},this.beforeStarted=new k.b,this.entered=new k.b,this.exited=new k.b,this.dropped=new k.b,this.sorted=new k.b,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=wt.a.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new k.b,this._cachedShadowRoot=null,this._startScrollInterval=function(){o._stopScrolling(),Object(St.a)(0,Et.b).pipe(Object(je.a)(o._stopScrollTimers)).subscribe(function(){var e=o._scrollNode,t=o.autoScrollStep;1===o._verticalScrollDirection?sn(e,-t):2===o._verticalScrollDirection&&sn(e,t),1===o._horizontalScrollDirection?ln(e,-t):2===o._horizontalScrollDirection&&ln(e,t)})},this.element=Object(g.coerceElement)(t),this._document=i,this.withScrollableParents([this.element]),n.registerDropContainer(this),this._parentPositions=new Rt(i,r)}return Object(w.a)(e,[{key:"dispose",value:function(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}},{key:"isDragging",value:function(){return this._isDragging}},{key:"start",value:function(){this._draggingStarted(),this._notifyReceivingSiblings()}},{key:"enter",value:function(e,t,n,i){var a;this._draggingStarted(),null==i?-1===(a=this.sortingDisabled?this._draggables.indexOf(e):-1)&&(a=this._getItemIndexFromPointerPosition(e,t,n)):a=i;var r=this._activeDraggables,o=r.indexOf(e),s=e.getPlaceholderElement(),l=r[a];if(l===e&&(l=r[a+1]),o>-1&&r.splice(o,1),l&&!this._dragDropRegistry.isDragging(l)){var c=l.getRootElement();c.parentElement.insertBefore(s,c),r.splice(a,0,e)}else if(this._shouldEnterAsFirstChild(t,n)){var d=r[0].getRootElement();d.parentNode.insertBefore(s,d),r.unshift(e)}else Object(g.coerceElement)(this.element).appendChild(s),r.push(e);s.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}},{key:"exit",value:function(e){this._reset(),this.exited.next({item:e,container:this})}},{key:"drop",value:function(e,t,n,i,a,r){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:n,container:this,previousContainer:i,isPointerOverContainer:a,distance:r})}},{key:"withItems",value:function(e){var t=this,n=this._draggables;(this._draggables=e,e.forEach(function(e){return e._withDropContainer(t)}),this.isDragging())&&(n.filter(function(e){return e.isDragging()}).every(function(t){return-1===e.indexOf(t)})?this._reset():this._cacheItems());return this}},{key:"withDirection",value:function(e){return this._direction=e,this}},{key:"connectedTo",value:function(e){return this._siblings=e.slice(),this}},{key:"withOrientation",value:function(e){return this._orientation=e,this}},{key:"withScrollableParents",value:function(e){var t=Object(g.coerceElement)(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t].concat(Object(X.a)(e)):e.slice(),this}},{key:"getScrollableParents",value:function(){return this._scrollableElements}},{key:"getItemIndex",value:function(e){return this._isDragging?on("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,function(t){return t.drag===e}):this._draggables.indexOf(e)}},{key:"isReceiving",value:function(){return this._activeSiblings.size>0}},{key:"_sortItem",value:function(e,t,n,i){if(!this.sortingDisabled&&this._clientRect&&Nt(this._clientRect,.05,t,n)){var a=this._itemPositions,r=this._getItemIndexFromPointerPosition(e,t,n,i);if(!(-1===r&&a.length>0)){var o="horizontal"===this._orientation,s=on(a,function(t){return t.drag===e}),l=a[r],c=a[s].clientRect,d=l.clientRect,u=s>r?1:-1,p=this._getItemOffsetPx(c,d,u),m=this._getSiblingOffsetPx(s,a,u),f=a.slice();en(a,s,r),this.sorted.next({previousIndex:s,currentIndex:r,container:this,item:e}),a.forEach(function(t,n){if(f[n]!==t){var i=t.drag===e,a=i?p:m,r=i?e.getPlaceholderElement():t.drag.getRootElement();t.offset+=a,o?(r.style.transform="translate3d(".concat(Math.round(t.offset),"px, 0, 0)"),jt(t.clientRect,0,a)):(r.style.transform="translate3d(0, ".concat(Math.round(t.offset),"px, 0)"),jt(t.clientRect,a,0))}}),this._previousSwap.overlaps=Lt(d,t,n),this._previousSwap.drag=l.drag,this._previousSwap.delta=o?i.x:i.y}}}},{key:"_startScrollingIfNecessary",value:function(e,t){var n=this;if(!this.autoScrollDisabled){var i,a=0,r=0;if(this._parentPositions.positions.forEach(function(o,s){if(s!==n._document&&o.clientRect&&!i&&Nt(o.clientRect,.05,e,t)){var l=function(e,t,n,i){var a=cn(t,i),r=dn(t,n),o=0,s=0;if(a){var l=e.scrollTop;1===a?l>0&&(o=1):e.scrollHeight-l>e.clientHeight&&(o=2)}if(r){var c=e.scrollLeft;1===r?c>0&&(s=1):e.scrollWidth-c>e.clientWidth&&(s=2)}return[o,s]}(s,o.clientRect,e,t),c=Object(vt.a)(l,2);a=c[0],r=c[1],(a||r)&&(i=s)}}),!a&&!r){var o=this._viewportRuler.getViewportSize(),s=o.width,l=o.height,c={width:s,height:l,top:0,right:s,bottom:l,left:0};a=cn(c,t),r=dn(c,e),i=window}!i||a===this._verticalScrollDirection&&r===this._horizontalScrollDirection&&i===this._scrollNode||(this._verticalScrollDirection=a,this._horizontalScrollDirection=r,this._scrollNode=i,(a||r)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}}},{key:"_stopScrolling",value:function(){this._stopScrollTimers.next()}},{key:"_draggingStarted",value:function(){var e=Object(g.coerceElement)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}},{key:"_cacheParentPositions",value:function(){var e=Object(g.coerceElement)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}},{key:"_cacheItemPositions",value:function(){var e="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(function(e){var t=e.getVisibleElement();return{drag:e,offset:0,clientRect:_t(t)}}).sort(function(t,n){return e?t.clientRect.left-n.clientRect.left:t.clientRect.top-n.clientRect.top})}},{key:"_reset",value:function(){var e=this;this._isDragging=!1;var t=Object(g.coerceElement)(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(function(e){var t=e.getRootElement();t&&(t.style.transform="")}),this._siblings.forEach(function(t){return t._stopReceiving(e)}),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}},{key:"_getSiblingOffsetPx",value:function(e,t,n){var i="horizontal"===this._orientation,a=t[e].clientRect,r=t[e+-1*n],o=a[i?"width":"height"]*n;if(r){var s=i?"left":"top",l=i?"right":"bottom";-1===n?o-=r.clientRect[s]-a[l]:o+=a[s]-r.clientRect[l]}return o}},{key:"_getItemOffsetPx",value:function(e,t,n){var i="horizontal"===this._orientation,a=i?t.left-e.left:t.top-e.top;return-1===n&&(a+=i?t.width-e.width:t.height-e.height),a}},{key:"_shouldEnterAsFirstChild",value:function(e,t){if(!this._activeDraggables.length)return!1;var n=this._itemPositions,i="horizontal"===this._orientation;if(n[0].drag!==this._activeDraggables[0]){var a=n[n.length-1].clientRect;return i?e>=a.right:t>=a.bottom}var r=n[0].clientRect;return i?e<=r.left:t<=r.top}},{key:"_getItemIndexFromPointerPosition",value:function(e,t,n,i){var a=this,r="horizontal"===this._orientation,o=on(this._itemPositions,function(o,s,l){var c=o.drag,d=o.clientRect;if(c===e)return l.length<2;if(i){var u=r?i.x:i.y;if(c===a._previousSwap.drag&&a._previousSwap.overlaps&&u===a._previousSwap.delta)return!1}return r?t>=Math.floor(d.left)&&t<Math.floor(d.right):n>=Math.floor(d.top)&&n<Math.floor(d.bottom)});return-1!==o&&this.sortPredicate(o,e,this)?o:-1}},{key:"_cacheItems",value:function(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}},{key:"_isOverContainer",value:function(e,t){return null!=this._clientRect&&Lt(this._clientRect,e,t)}},{key:"_getSiblingContainerFromPosition",value:function(e,t,n){return this._siblings.find(function(i){return i._canReceive(e,t,n)})}},{key:"_canReceive",value:function(e,t,n){if(!this._clientRect||!Lt(this._clientRect,t,n)||!this.enterPredicate(e,this))return!1;var i=this._getShadowRoot().elementFromPoint(t,n);if(!i)return!1;var a=Object(g.coerceElement)(this.element);return i===a||a.contains(i)}},{key:"_startReceiving",value:function(e,t){var n=this,i=this._activeSiblings;!i.has(e)&&t.every(function(e){return n.enterPredicate(e,n)||n._draggables.indexOf(e)>-1})&&(i.add(e),this._cacheParentPositions(),this._listenToScrollEvents())}},{key:"_stopReceiving",value:function(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe()}},{key:"_listenToScrollEvents",value:function(){var e=this;this._viewportScrollSubscription=this._dragDropRegistry.scroll.subscribe(function(t){if(e.isDragging()){var n=e._parentPositions.handleScroll(t);n&&(e._itemPositions.forEach(function(e){jt(e.clientRect,n.top,n.left)}),e._itemPositions.forEach(function(t){var n=t.drag;e._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()}))}else e.isReceiving()&&e._cacheParentPositions()})}},{key:"_getShadowRoot",value:function(){if(!this._cachedShadowRoot){var e=Object(xt.c)(Object(g.coerceElement)(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}},{key:"_notifyReceivingSiblings",value:function(){var e=this,t=this._activeDraggables.filter(function(e){return e.isDragging()});this._siblings.forEach(function(n){return n._startReceiving(e,t)})}}]),e}();function on(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return n;return-1}function sn(e,t){e===window?e.scrollBy(0,t):e.scrollTop+=t}function ln(e,t){e===window?e.scrollBy(t,0):e.scrollLeft+=t}function cn(e,t){var n=e.top,i=e.bottom,a=.05*e.height;return t>=n-a&&t<=n+a?1:t>=i-a&&t<=i+a?2:0}function dn(e,t){var n=e.left,i=e.right,a=.05*e.width;return t>=n-a&&t<=n+a?1:t>=i-a&&t<=i+a?2:0}var un=Object(xt.f)({passive:!1,capture:!0}),pn=function(){function e(t,n){var i=this;Object(I.a)(this,e),this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=function(e){return e.isDragging()},this.pointerMove=new k.b,this.pointerUp=new k.b,this.scroll=new k.b,this._preventDefaultWhileDragging=function(e){i._activeDragInstances.length>0&&e.preventDefault()},this._persistentTouchmoveListener=function(e){i._activeDragInstances.length>0&&(i._activeDragInstances.some(i._draggingPredicate)&&e.preventDefault(),i.pointerMove.next(e))},this._document=n}return Object(w.a)(e,[{key:"registerDropContainer",value:function(e){this._dropInstances.has(e)||this._dropInstances.add(e)}},{key:"registerDragItem",value:function(e){var t=this;this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(function(){t._document.addEventListener("touchmove",t._persistentTouchmoveListener,un)})}},{key:"removeDropContainer",value:function(e){this._dropInstances.delete(e)}},{key:"removeDragItem",value:function(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,un)}},{key:"startDragging",value:function(e,t){var n=this;if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){var i=t.type.startsWith("touch");this._globalListeners.set(i?"touchend":"mouseup",{handler:function(e){return n.pointerUp.next(e)},options:!0}).set("scroll",{handler:function(e){return n.scroll.next(e)},options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:un}),i||this._globalListeners.set("mousemove",{handler:function(e){return n.pointerMove.next(e)},options:un}),this._ngZone.runOutsideAngular(function(){n._globalListeners.forEach(function(e,t){n._document.addEventListener(t,e.handler,e.options)})})}}},{key:"stopDragging",value:function(e){var t=this._activeDragInstances.indexOf(e);t>-1&&(this._activeDragInstances.splice(t,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}},{key:"isDragging",value:function(e){return this._activeDragInstances.indexOf(e)>-1}},{key:"ngOnDestroy",value:function(){var e=this;this._dragInstances.forEach(function(t){return e.removeDragItem(t)}),this._dropInstances.forEach(function(t){return e.removeDropContainer(t)}),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}},{key:"_clearGlobalListeners",value:function(){var e=this;this._globalListeners.forEach(function(t,n){e._document.removeEventListener(n,t.handler,t.options)}),this._globalListeners.clear()}}]),e}();pn.\u0275fac=function(e){return new(e||pn)(d["\u0275\u0275inject"](d.NgZone),d["\u0275\u0275inject"](u.DOCUMENT))},pn.\u0275prov=Object(d["\u0275\u0275defineInjectable"])({factory:function(){return new pn(Object(d["\u0275\u0275inject"])(d.NgZone),Object(d["\u0275\u0275inject"])(u.DOCUMENT))},token:pn,providedIn:"root"}),pn.ctorParameters=function(){return[{type:d.NgZone},{type:void 0,decorators:[{type:d.Inject,args:[u.DOCUMENT]}]}]},0;var mn={dragStartThreshold:5,pointerDirectionChangeThreshold:5},fn=function(){function e(t,n,i,a){Object(I.a)(this,e),this._document=t,this._ngZone=n,this._viewportRuler=i,this._dragDropRegistry=a}return Object(w.a)(e,[{key:"createDrag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mn;return new zt(e,t,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}},{key:"createDropList",value:function(e){return new rn(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}]),e}();fn.\u0275fac=function(e){return new(e||fn)(d["\u0275\u0275inject"](u.DOCUMENT),d["\u0275\u0275inject"](d.NgZone),d["\u0275\u0275inject"](Ct.e),d["\u0275\u0275inject"](pn))},fn.\u0275prov=Object(d["\u0275\u0275defineInjectable"])({factory:function(){return new fn(Object(d["\u0275\u0275inject"])(u.DOCUMENT),Object(d["\u0275\u0275inject"])(d.NgZone),Object(d["\u0275\u0275inject"])(Ct.e),Object(d["\u0275\u0275inject"])(pn))},token:fn,providedIn:"root"}),fn.ctorParameters=function(){return[{type:void 0,decorators:[{type:d.Inject,args:[u.DOCUMENT]}]},{type:d.NgZone},{type:Ct.e},{type:pn}]},0;var hn=new d.InjectionToken("CDK_DRAG_PARENT"),gn=new d.InjectionToken("CdkDropListGroup"),An=function(){function e(){Object(I.a)(this,e),this._items=new Set,this._disabled=!1}return Object(w.a)(e,[{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=Object(g.coerceBooleanProperty)(e)}},{key:"ngOnDestroy",value:function(){this._items.clear()}}]),e}();An.\u0275fac=function(e){return new(e||An)},An.\u0275dir=d["\u0275\u0275defineDirective"]({type:An,selectors:[["","cdkDropListGroup",""]],inputs:{disabled:["cdkDropListGroupDisabled","disabled"]},exportAs:["cdkDropListGroup"],features:[d["\u0275\u0275ProvidersFeature"]([{provide:gn,useExisting:An}])]}),An.propDecorators={disabled:[{type:d.Input,args:["cdkDropListGroupDisabled"]}]},0;var bn=new d.InjectionToken("CDK_DRAG_CONFIG");var yn=0,vn=new d.InjectionToken("CdkDropList"),Cn=function(){function e(t,n,i,a,r,o,s){var l=this;Object(I.a)(this,e),this.element=t,this._changeDetectorRef=i,this._scrollDispatcher=a,this._dir=r,this._group=o,this._destroyed=new k.b,this.connectedTo=[],this.id="cdk-drop-list-".concat(yn++),this.enterPredicate=function(){return!0},this.sortPredicate=function(){return!0},this.dropped=new d.EventEmitter,this.entered=new d.EventEmitter,this.exited=new d.EventEmitter,this.sorted=new d.EventEmitter,this._unsortedItems=new Set,0,this._dropListRef=n.createDropList(t),this._dropListRef.data=this,s&&this._assignDefaults(s),this._dropListRef.enterPredicate=function(e,t){return l.enterPredicate(e.data,t.data)},this._dropListRef.sortPredicate=function(e,t,n){return l.sortPredicate(e,t.data,n.data)},this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),e._dropLists.push(this),o&&o._items.add(this)}return Object(w.a)(e,[{key:"disabled",get:function(){return this._disabled||!!this._group&&this._group.disabled},set:function(e){this._dropListRef.disabled=this._disabled=Object(g.coerceBooleanProperty)(e)}},{key:"addItem",value:function(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}},{key:"removeItem",value:function(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}},{key:"getSortedItems",value:function(){return Array.from(this._unsortedItems).sort(function(e,t){return e._dragRef.getVisibleElement().compareDocumentPosition(t._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1})}},{key:"ngOnDestroy",value:function(){var t=e._dropLists.indexOf(this);t>-1&&e._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}},{key:"_setupInputSyncSubscription",value:function(t){var n=this;this._dir&&this._dir.change.pipe(Object(Ot.a)(this._dir.value),Object(je.a)(this._destroyed)).subscribe(function(e){return t.withDirection(e)}),t.beforeStarted.subscribe(function(){var i=Object(g.coerceArray)(n.connectedTo).map(function(t){if("string"==typeof t){var n=e._dropLists.find(function(e){return e.id===t});return 0,!n,0,n}return t});if(n._group&&n._group._items.forEach(function(e){-1===i.indexOf(e)&&i.push(e)}),!n._scrollableParentsResolved){var a=n._scrollDispatcher.getAncestorScrollContainers(n.element).map(function(e){return e.getElementRef().nativeElement});n._dropListRef.withScrollableParents(a),n._scrollableParentsResolved=!0}t.disabled=n.disabled,t.lockAxis=n.lockAxis,t.sortingDisabled=Object(g.coerceBooleanProperty)(n.sortingDisabled),t.autoScrollDisabled=Object(g.coerceBooleanProperty)(n.autoScrollDisabled),t.autoScrollStep=Object(g.coerceNumberProperty)(n.autoScrollStep,2),t.connectedTo(i.filter(function(e){return e&&e!==n}).map(function(e){return e._dropListRef})).withOrientation(n.orientation)})}},{key:"_handleEvents",value:function(e){var t=this;e.beforeStarted.subscribe(function(){t._syncItemsWithRef(),t._changeDetectorRef.markForCheck()}),e.entered.subscribe(function(e){t.entered.emit({container:t,item:e.item.data,currentIndex:e.currentIndex})}),e.exited.subscribe(function(e){t.exited.emit({container:t,item:e.item.data}),t._changeDetectorRef.markForCheck()}),e.sorted.subscribe(function(e){t.sorted.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,container:t,item:e.item.data})}),e.dropped.subscribe(function(e){t.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,item:e.item.data,isPointerOverContainer:e.isPointerOverContainer,distance:e.distance}),t._changeDetectorRef.markForCheck()})}},{key:"_assignDefaults",value:function(e){var t=e.lockAxis,n=e.draggingDisabled,i=e.sortingDisabled,a=e.listAutoScrollDisabled,r=e.listOrientation;this.disabled=null!=n&&n,this.sortingDisabled=null!=i&&i,this.autoScrollDisabled=null!=a&&a,this.orientation=r||"vertical",t&&(this.lockAxis=t)}},{key:"_syncItemsWithRef",value:function(){this._dropListRef.withItems(this.getSortedItems().map(function(e){return e._dragRef}))}}]),e}();Cn.\u0275fac=function(e){return new(e||Cn)(d["\u0275\u0275directiveInject"](d.ElementRef),d["\u0275\u0275directiveInject"](fn),d["\u0275\u0275directiveInject"](d.ChangeDetectorRef),d["\u0275\u0275directiveInject"](Ct.c),d["\u0275\u0275directiveInject"](D.b,8),d["\u0275\u0275directiveInject"](gn,12),d["\u0275\u0275directiveInject"](bn,8))},Cn.\u0275dir=d["\u0275\u0275defineDirective"]({type:Cn,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(e,t){2&e&&(d["\u0275\u0275attribute"]("id",t.id),d["\u0275\u0275classProp"]("cdk-drop-list-disabled",t.disabled)("cdk-drop-list-dragging",t._dropListRef.isDragging())("cdk-drop-list-receiving",t._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],id:"id",enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],orientation:["cdkDropListOrientation","orientation"],lockAxis:["cdkDropListLockAxis","lockAxis"],data:["cdkDropListData","data"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[d["\u0275\u0275ProvidersFeature"]([{provide:gn,useValue:void 0},{provide:vn,useExisting:Cn}])]}),Cn._dropLists=[],Cn.ctorParameters=function(){return[{type:d.ElementRef},{type:fn},{type:d.ChangeDetectorRef},{type:Ct.c},{type:D.b,decorators:[{type:d.Optional}]},{type:An,decorators:[{type:d.Optional},{type:d.Inject,args:[gn]},{type:d.SkipSelf}]},{type:void 0,decorators:[{type:d.Optional},{type:d.Inject,args:[bn]}]}]},Cn.propDecorators={connectedTo:[{type:d.Input,args:["cdkDropListConnectedTo"]}],data:[{type:d.Input,args:["cdkDropListData"]}],orientation:[{type:d.Input,args:["cdkDropListOrientation"]}],id:[{type:d.Input}],lockAxis:[{type:d.Input,args:["cdkDropListLockAxis"]}],disabled:[{type:d.Input,args:["cdkDropListDisabled"]}],sortingDisabled:[{type:d.Input,args:["cdkDropListSortingDisabled"]}],enterPredicate:[{type:d.Input,args:["cdkDropListEnterPredicate"]}],sortPredicate:[{type:d.Input,args:["cdkDropListSortPredicate"]}],autoScrollDisabled:[{type:d.Input,args:["cdkDropListAutoScrollDisabled"]}],autoScrollStep:[{type:d.Input,args:["cdkDropListAutoScrollStep"]}],dropped:[{type:d.Output,args:["cdkDropListDropped"]}],entered:[{type:d.Output,args:["cdkDropListEntered"]}],exited:[{type:d.Output,args:["cdkDropListExited"]}],sorted:[{type:d.Output,args:["cdkDropListSorted"]}]},0;var xn=new d.InjectionToken("CdkDragHandle"),wn=function(){function e(t,n){Object(I.a)(this,e),this.element=t,this._stateChanges=new k.b,this._disabled=!1,0,this._parentDrag=n}return Object(w.a)(e,[{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=Object(g.coerceBooleanProperty)(e),this._stateChanges.next(this)}},{key:"ngOnDestroy",value:function(){this._stateChanges.complete()}}]),e}();wn.\u0275fac=function(e){return new(e||wn)(d["\u0275\u0275directiveInject"](d.ElementRef),d["\u0275\u0275directiveInject"](hn,12))},wn.\u0275dir=d["\u0275\u0275defineDirective"]({type:wn,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]},features:[d["\u0275\u0275ProvidersFeature"]([{provide:xn,useExisting:wn}])]}),wn.ctorParameters=function(){return[{type:d.ElementRef},{type:void 0,decorators:[{type:d.Inject,args:[hn]},{type:d.Optional},{type:d.SkipSelf}]}]},wn.propDecorators={disabled:[{type:d.Input,args:["cdkDragHandleDisabled"]}]},0;var Sn=new d.InjectionToken("CdkDragPlaceholder"),En=function e(t){Object(I.a)(this,e),this.templateRef=t};En.\u0275fac=function(e){return new(e||En)(d["\u0275\u0275directiveInject"](d.TemplateRef))},En.\u0275dir=d["\u0275\u0275defineDirective"]({type:En,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"},features:[d["\u0275\u0275ProvidersFeature"]([{provide:Sn,useExisting:En}])]}),En.ctorParameters=function(){return[{type:d.TemplateRef}]},En.propDecorators={data:[{type:d.Input}]},0;var In=new d.InjectionToken("CdkDragPreview"),On=function(){function e(t){Object(I.a)(this,e),this.templateRef=t,this._matchSize=!1}return Object(w.a)(e,[{key:"matchSize",get:function(){return this._matchSize},set:function(e){this._matchSize=Object(g.coerceBooleanProperty)(e)}}]),e}();On.\u0275fac=function(e){return new(e||On)(d["\u0275\u0275directiveInject"](d.TemplateRef))},On.\u0275dir=d["\u0275\u0275defineDirective"]({type:On,selectors:[["ng-template","cdkDragPreview",""]],inputs:{matchSize:"matchSize",data:"data"},features:[d["\u0275\u0275ProvidersFeature"]([{provide:In,useExisting:On}])]}),On.ctorParameters=function(){return[{type:d.TemplateRef}]},On.propDecorators={data:[{type:d.Input}],matchSize:[{type:d.Input}]},0;var Tn=function(){function e(t,n,i,a,r,o,s,l,c,u,p){var m=this;Object(I.a)(this,e),this.element=t,this.dropContainer=n,this._ngZone=a,this._viewContainerRef=r,this._dir=s,this._changeDetectorRef=c,this._selfHandle=u,this._parentDrag=p,this._destroyed=new k.b,this.started=new d.EventEmitter,this.released=new d.EventEmitter,this.ended=new d.EventEmitter,this.entered=new d.EventEmitter,this.exited=new d.EventEmitter,this.dropped=new d.EventEmitter,this.moved=new It.a(function(e){var t=m._dragRef.moved.pipe(Object($e.a)(function(e){return{source:m,pointerPosition:e.pointerPosition,event:e.event,delta:e.delta,distance:e.distance}})).subscribe(e);return function(){t.unsubscribe()}}),this._dragRef=l.createDrag(t,{dragStartThreshold:o&&null!=o.dragStartThreshold?o.dragStartThreshold:5,pointerDirectionChangeThreshold:o&&null!=o.pointerDirectionChangeThreshold?o.pointerDirectionChangeThreshold:5,zIndex:null==o?void 0:o.zIndex}),this._dragRef.data=this,e._dragInstances.push(this),o&&this._assignDefaults(o),n&&(this._dragRef._withDropContainer(n._dropListRef),n.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}return Object(w.a)(e,[{key:"disabled",get:function(){return this._disabled||this.dropContainer&&this.dropContainer.disabled},set:function(e){this._disabled=Object(g.coerceBooleanProperty)(e),this._dragRef.disabled=this._disabled}},{key:"getPlaceholderElement",value:function(){return this._dragRef.getPlaceholderElement()}},{key:"getRootElement",value:function(){return this._dragRef.getRootElement()}},{key:"reset",value:function(){this._dragRef.reset()}},{key:"getFreeDragPosition",value:function(){return this._dragRef.getFreeDragPosition()}},{key:"ngAfterViewInit",value:function(){var e=this;this._ngZone.onStable.pipe(Object(N.a)(1),Object(je.a)(this._destroyed)).subscribe(function(){e._updateRootElement(),e._handles.changes.pipe(Object(Ot.a)(e._handles),Object(Tt.a)(function(t){var n=t.filter(function(t){return t._parentDrag===e}).map(function(e){return e.element});e._selfHandle&&e.rootElementSelector&&n.push(e.element),e._dragRef.withHandles(n)}),Object(Ft.a)(function(e){return _.a.apply(void 0,Object(X.a)(e.map(function(e){return e._stateChanges.pipe(Object(Ot.a)(e))})))}),Object(je.a)(e._destroyed)).subscribe(function(t){var n=e._dragRef,i=t.element.nativeElement;t.disabled?n.disableHandle(i):n.enableHandle(i)}),e.freeDragPosition&&e._dragRef.setFreeDragPosition(e.freeDragPosition)})}},{key:"ngOnChanges",value:function(e){var t=e.rootElementSelector,n=e.freeDragPosition;t&&!t.firstChange&&this._updateRootElement(),n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}},{key:"ngOnDestroy",value:function(){this.dropContainer&&this.dropContainer.removeItem(this);var t=e._dragInstances.indexOf(this);t>-1&&e._dragInstances.splice(t,1),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()}},{key:"_updateRootElement",value:function(){var e=this.element.nativeElement,t=this.rootElementSelector?Fn(e,this.rootElementSelector):e;0,t,0,this._dragRef.withRootElement(t||e)}},{key:"_getBoundaryElement",value:function(){var e=this.boundaryElement;if(!e)return null;if("string"==typeof e)return Fn(this.element.nativeElement,e);var t=Object(g.coerceElement)(e);return 0,0,t}},{key:"_syncInputs",value:function(t){var n=this;t.beforeStarted.subscribe(function(){if(!t.isDragging()){var e=n._dir,i=n.dragStartDelay,a=n._placeholderTemplate?{template:n._placeholderTemplate.templateRef,context:n._placeholderTemplate.data,viewContainer:n._viewContainerRef}:null,r=n._previewTemplate?{template:n._previewTemplate.templateRef,context:n._previewTemplate.data,matchSize:n._previewTemplate.matchSize,viewContainer:n._viewContainerRef}:null;t.disabled=n.disabled,t.lockAxis=n.lockAxis,t.dragStartDelay="object"==typeof i&&i?i:Object(g.coerceNumberProperty)(i),t.constrainPosition=n.constrainPosition,t.previewClass=n.previewClass,t.withBoundaryElement(n._getBoundaryElement()).withPlaceholderTemplate(a).withPreviewTemplate(r),e&&t.withDirection(e.value)}}),t.beforeStarted.pipe(Object(N.a)(1)).subscribe(function(){var i,a;if(n._parentDrag)return t.withParent(n._parentDrag._dragRef),void 0;for(var r=n.element.nativeElement.parentElement;r;){if(null===(i=r.classList)||void 0===i?void 0:i.contains("cdk-drag")){t.withParent((null===(a=e._dragInstances.find(function(e){return e.element.nativeElement===r}))||void 0===a?void 0:a._dragRef)||null);break}r=r.parentElement}})}},{key:"_handleEvents",value:function(e){var t=this;e.started.subscribe(function(){t.started.emit({source:t}),t._changeDetectorRef.markForCheck()}),e.released.subscribe(function(){t.released.emit({source:t})}),e.ended.subscribe(function(e){t.ended.emit({source:t,distance:e.distance}),t._changeDetectorRef.markForCheck()}),e.entered.subscribe(function(e){t.entered.emit({container:e.container.data,item:t,currentIndex:e.currentIndex})}),e.exited.subscribe(function(e){t.exited.emit({container:e.container.data,item:t})}),e.dropped.subscribe(function(e){t.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,isPointerOverContainer:e.isPointerOverContainer,item:t,distance:e.distance})})}},{key:"_assignDefaults",value:function(e){var t=e.lockAxis,n=e.dragStartDelay,i=e.constrainPosition,a=e.previewClass,r=e.boundaryElement,o=e.draggingDisabled,s=e.rootElementSelector;this.disabled=null!=o&&o,this.dragStartDelay=n||0,t&&(this.lockAxis=t),i&&(this.constrainPosition=i),a&&(this.previewClass=a),r&&(this.boundaryElement=r),s&&(this.rootElementSelector=s)}}]),e}();function Fn(e,t){for(var n=e.parentElement;n;){if(n.matches?n.matches(t):n.msMatchesSelector(t))return n;n=n.parentElement}return null}Tn.\u0275fac=function(e){return new(e||Tn)(d["\u0275\u0275directiveInject"](d.ElementRef),d["\u0275\u0275directiveInject"](vn,12),d["\u0275\u0275directiveInject"](u.DOCUMENT),d["\u0275\u0275directiveInject"](d.NgZone),d["\u0275\u0275directiveInject"](d.ViewContainerRef),d["\u0275\u0275directiveInject"](bn,8),d["\u0275\u0275directiveInject"](D.b,8),d["\u0275\u0275directiveInject"](fn),d["\u0275\u0275directiveInject"](d.ChangeDetectorRef),d["\u0275\u0275directiveInject"](xn,10),d["\u0275\u0275directiveInject"](hn,12))},Tn.\u0275dir=d["\u0275\u0275defineDirective"]({type:Tn,selectors:[["","cdkDrag",""]],contentQueries:function(e,t,n){var i;(1&e&&(d["\u0275\u0275contentQuery"](n,In,1),d["\u0275\u0275contentQuery"](n,Sn,1),d["\u0275\u0275contentQuery"](n,xn,1)),2&e)&&(d["\u0275\u0275queryRefresh"](i=d["\u0275\u0275loadQuery"]())&&(t._previewTemplate=i.first),d["\u0275\u0275queryRefresh"](i=d["\u0275\u0275loadQuery"]())&&(t._placeholderTemplate=i.first),d["\u0275\u0275queryRefresh"](i=d["\u0275\u0275loadQuery"]())&&(t._handles=i))},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(e,t){2&e&&d["\u0275\u0275classProp"]("cdk-drag-disabled",t.disabled)("cdk-drag-dragging",t._dragRef.isDragging())},inputs:{disabled:["cdkDragDisabled","disabled"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],lockAxis:["cdkDragLockAxis","lockAxis"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],boundaryElement:["cdkDragBoundary","boundaryElement"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],data:["cdkDragData","data"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[d["\u0275\u0275ProvidersFeature"]([{provide:hn,useExisting:Tn}]),d["\u0275\u0275NgOnChangesFeature"]]}),Tn._dragInstances=[],Tn.ctorParameters=function(){return[{type:d.ElementRef},{type:void 0,decorators:[{type:d.Inject,args:[vn]},{type:d.Optional},{type:d.SkipSelf}]},{type:void 0,decorators:[{type:d.Inject,args:[u.DOCUMENT]}]},{type:d.NgZone},{type:d.ViewContainerRef},{type:void 0,decorators:[{type:d.Optional},{type:d.Inject,args:[bn]}]},{type:D.b,decorators:[{type:d.Optional}]},{type:fn},{type:d.ChangeDetectorRef},{type:wn,decorators:[{type:d.Optional},{type:d.Self},{type:d.Inject,args:[xn]}]},{type:Tn,decorators:[{type:d.Optional},{type:d.SkipSelf},{type:d.Inject,args:[hn]}]}]},Tn.propDecorators={_handles:[{type:d.ContentChildren,args:[xn,{descendants:!0}]}],_previewTemplate:[{type:d.ContentChild,args:[In]}],_placeholderTemplate:[{type:d.ContentChild,args:[Sn]}],data:[{type:d.Input,args:["cdkDragData"]}],lockAxis:[{type:d.Input,args:["cdkDragLockAxis"]}],rootElementSelector:[{type:d.Input,args:["cdkDragRootElement"]}],boundaryElement:[{type:d.Input,args:["cdkDragBoundary"]}],dragStartDelay:[{type:d.Input,args:["cdkDragStartDelay"]}],freeDragPosition:[{type:d.Input,args:["cdkDragFreeDragPosition"]}],disabled:[{type:d.Input,args:["cdkDragDisabled"]}],constrainPosition:[{type:d.Input,args:["cdkDragConstrainPosition"]}],previewClass:[{type:d.Input,args:["cdkDragPreviewClass"]}],started:[{type:d.Output,args:["cdkDragStarted"]}],released:[{type:d.Output,args:["cdkDragReleased"]}],ended:[{type:d.Output,args:["cdkDragEnded"]}],entered:[{type:d.Output,args:["cdkDragEntered"]}],exited:[{type:d.Output,args:["cdkDragExited"]}],dropped:[{type:d.Output,args:["cdkDragDropped"]}],moved:[{type:d.Output,args:["cdkDragMoved"]}]},0;var Bn=function e(){Object(I.a)(this,e)};Bn.\u0275fac=function(e){return new(e||Bn)},Bn.\u0275mod=d["\u0275\u0275defineNgModule"]({type:Bn}),Bn.\u0275inj=d["\u0275\u0275defineInjector"]({providers:[fn],imports:[Ct.b]}),("undefined"==typeof ngJitMode||ngJitMode)&&d["\u0275\u0275setNgModuleScope"](Bn,{declarations:function(){return[Cn,An,Tn,wn,On,En]},exports:function(){return[Ct.b,Cn,An,Tn,wn,On,En]}}),0;var Mn=n("tk/3"),Pn={"@angular/animations":SystemJS.newModule(c),"@angular/core":SystemJS.newModule(d),"@angular/common":SystemJS.newModule(u),"@angular/common/http":SystemJS.newModule(Mn),"@angular/forms":SystemJS.newModule(p),"@angular/flex-layout":SystemJS.newModule(m),"@angular/platform-browser":SystemJS.newModule(f),"@angular/router":SystemJS.newModule(h),"@angular/cdk/coercion":SystemJS.newModule(g),"@angular/cdk/collections":SystemJS.newModule(A),"@angular/cdk/keycodes":SystemJS.newModule(b),"@angular/cdk/layout":SystemJS.newModule(y),"@angular/cdk/overlay":SystemJS.newModule(v),"@angular/cdk/portal":SystemJS.newModule(C),"@angular/cdk/drag-drop":SystemJS.newModule(l),"@angular/material/autocomplete":SystemJS.newModule(x),"@angular/material/badge":SystemJS.newModule(i),"@angular/material/bottom-sheet":SystemJS.newModule(a),"@angular/material/button":SystemJS.newModule(W),"@angular/material/button-toggle":SystemJS.newModule(r),"@angular/material/card":SystemJS.newModule(re),"@angular/material/checkbox":SystemJS.newModule(oe),"@angular/material/chips":SystemJS.newModule(se),"@angular/material/core":SystemJS.newModule(O),"@angular/material/datepicker":SystemJS.newModule(le),"@angular/material/dialog":SystemJS.newModule(ce),"@angular/material/divider":SystemJS.newModule(de),"@angular/material/expansion":SystemJS.newModule(ue),"@angular/material/form-field":SystemJS.newModule(pe),"@angular/material/grid-list":SystemJS.newModule(me),"@angular/material/icon":SystemJS.newModule(fe),"@angular/material/input":SystemJS.newModule(he),"@angular/material/list":SystemJS.newModule(ge),"@angular/material/menu":SystemJS.newModule(Ae),"@angular/material/paginator":SystemJS.newModule(be),"@angular/material/progress-bar":SystemJS.newModule(ye),"@angular/material/progress-spinner":SystemJS.newModule(ve),"@angular/material/radio":SystemJS.newModule(Ce),"@angular/material/select":SystemJS.newModule(xe),"@angular/material/sidenav":SystemJS.newModule(we),"@angular/material/slide-toggle":SystemJS.newModule(Se),"@angular/material/slider":SystemJS.newModule(Ee),"@angular/material/snack-bar":SystemJS.newModule(Ie),"@angular/material/sort":SystemJS.newModule(Oe),"@angular/material/stepper":SystemJS.newModule(Te),"@angular/material/table":SystemJS.newModule(Fe),"@angular/material/tabs":SystemJS.newModule(Be),"@angular/material/toolbar":SystemJS.newModule(Me),"@angular/material/tooltip":SystemJS.newModule(Pe),"@angular/material/tree":SystemJS.newModule(o),"@ngrx/store":SystemJS.newModule(pt),rxjs:SystemJS.newModule(mt),"rxjs/operators":SystemJS.newModule(ft),"@ngx-translate/core":SystemJS.newModule(ht),"@core/public-api":SystemJS.newModule(gt),"@shared/public-api":SystemJS.newModule(At),"@home/components/public-api":SystemJS.newModule(s),moment:SystemJS.newModule(yt)}},"F97/":function(e,t,n){"use strict";function i(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}n.d(t,"a",function(){return i})},FBAY:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n("fXoL"),a=n("0lYY"),r=n("4j5O"),o=n("//Q6"),s=n("OiFK"),l=n("z6cu"),c=n("LRne"),d=n("lJxs"),u=n("+5dr"),p=n("C4fA"),m=function(){function e(e,t,n){this.dashboardUtils=e,this.ruleChainService=t,this.utils=n,this.namespace="tbBufferStore",this.delimiter="."}return e.prototype.prepareWidgetItem=function(e,t,n,i){var r={datasourceAliases:{},targetDeviceAliases:{}},o={datasourceFilters:{}},s=this.getOriginalColumns(e,t,n),l=this.getOriginalSize(e,t,n,i);if(i.config&&e.configuration&&e.configuration.entityAliases){var c=void 0;if(i.config.datasources)for(var d=0;d<i.config.datasources.length;d++){(m=i.config.datasources[d]).type!==a.a.entity&&m.type!==a.a.entityCount||!m.entityAliasId||(c=e.configuration.entityAliases[m.entityAliasId])&&(r.datasourceAliases[d]=this.prepareAliasInfo(c))}if(i.config.targetDeviceAliasIds)for(d=0;d<i.config.targetDeviceAliasIds.length;d++){var u=i.config.targetDeviceAliasIds[d];u&&(c=e.configuration.entityAliases[u])&&(r.targetDeviceAliases[d]=this.prepareAliasInfo(c))}}if(i.config&&e.configuration&&e.configuration.filters){var p=void 0;if(i.config.datasources)for(d=0;d<i.config.datasources.length;d++){var m;(m=i.config.datasources[d]).type!==a.a.entity&&m.type!==a.a.entityCount||!m.filterId||(p=e.configuration.filters[m.filterId])&&(o.datasourceFilters[d]=this.prepareFilterInfo(p))}}return{widget:i,aliasesInfo:r,filtersInfo:o,originalSize:l,originalColumns:s}},e.prototype.copyWidget=function(e,t,n,i){var a=this.prepareWidgetItem(e,t,n,i);this.storeSet("widget_item",a)},e.prototype.copyWidgetReference=function(e,t,n,i){var a=this.prepareWidgetReference(e,t,n,i);this.storeSet("widget_reference",a)},e.prototype.hasWidget=function(){return this.storeHas("widget_item")},e.prototype.canPasteWidgetReference=function(e,t,n){var i=this.storeGet("widget_reference");return!(!i||i.dashboardId!==e.id.id||i.sourceState===t&&i.sourceLayout===n||!e.configuration.widgets[i.widgetId])},e.prototype.pasteWidget=function(e,t,n,i,a,r){var o=this.storeGet("widget_item");if(o){var s=o.widget,c=o.aliasesInfo,u=o.filtersInfo,p=o.originalColumns,m=o.originalSize,f=-1,h=-1;return i&&(f=i.row,h=i.column),s.id=this.utils.guid(),this.addWidgetToDashboard(e,t,n,s,c,u,a,r,p,m,f,h).pipe(Object(d.a)(function(){return s}))}return Object(l.a)("Failed to read widget from buffer!")},e.prototype.pasteWidgetReference=function(e,t,n,i){var a=this.storeGet("widget_reference");if(a){var r=e.configuration.widgets[a.widgetId];if(r){var o=a.originalColumns,s=a.originalSize,c=-1,u=-1;return i&&(c=i.row,u=i.column),this.addWidgetToDashboard(e,t,n,r,null,null,null,null,o,s,c,u).pipe(Object(d.a)(function(){return r}))}return Object(l.a)("Failed to read widget reference from buffer!")}return Object(l.a)("Failed to read widget reference from buffer!")},e.prototype.addWidgetToDashboard=function(e,t,n,i,a,r,s,l,d,u,p,m){var f;f=e||{},f=this.dashboardUtils.validateAndUpdateDashboard(f);var h=!1,g=!1;if(a){var A=this.updateAliases(f,i,a);!Object(o.r)(A,f.configuration.entityAliases)&&(f.configuration.entityAliases=A,s&&(h=!0))}if(r){var b=this.updateFilters(f,i,r);!Object(o.r)(b,f.configuration.filters)&&(f.configuration.filters=b,l&&(g=!0))}return this.dashboardUtils.addWidgetToLayout(f,t,n,i,d,u,p,m),h&&s(),g&&l(),Object(c.a)(f)},e.prototype.copyRuleNodes=function(e,t){for(var n={nodes:[],connections:[]},i=-1,a=-1,r=-1,o=-1,s=0;s<e.length;s++){var l=e[s],c={id:"",connectors:[],additionalInfo:l.additionalInfo,configuration:l.configuration,debugMode:l.debugMode,x:l.x,y:l.y,name:l.name,componentClazz:l.component.clazz,ruleChainType:l.ruleChainType};l.targetRuleChainId&&(c.targetRuleChainId=l.targetRuleChainId),l.error&&(c.error=l.error),n.nodes.push(c),0===s?(i=c.y,a=c.x,r=c.y+50,o=c.x+170):(i=Math.min(i,c.y),a=Math.min(a,c.x),r=Math.max(r,c.y+50),o=Math.max(o,c.x+170))}n.originX=a+(o-a)/2,n.originY=i+(r-i)/2,t.forEach(function(e){n.connections.push(e)}),this.storeSet("rule_nodes",n)},e.prototype.hasRuleNodes=function(){return this.storeHas("rule_nodes")},e.prototype.pasteRuleNodes=function(e,t){var n=this.storeGet("rule_nodes");if(n){for(var i=e-n.originX,a=t-n.originY,r=0,o=n.nodes;r<o.length;r++){var s=o[r],l=this.ruleChainService.getRuleNodeComponentByClazz(s.ruleChainType,s.componentClazz);if(!l)return null;var c=u.f.get(l.type).icon,d=null;l.configurationDescriptor.nodeDefinition.icon&&(c=l.configurationDescriptor.nodeDefinition.icon),l.configurationDescriptor.nodeDefinition.iconUrl&&(d=l.configurationDescriptor.nodeDefinition.iconUrl),delete s.componentClazz,s.component=l,s.nodeClass=u.f.get(l.type).nodeClass,s.icon=c,s.iconUrl=d,s.connectors=[],s.x=Math.round(s.x+i),s.y=Math.round(s.y+a)}return n}return null},e.prototype.hasRuleChainImport=function(){return this.storeHas("rule_chain_import")},e.prototype.storeRuleChainImport=function(e){this.storeSet("rule_chain_import",e)},e.prototype.getRuleChainImport=function(){var e=this.storeGet("rule_chain_import");return this.storeRemove("rule_chain_import"),e},e.prototype.getOriginalColumns=function(e,t,n){var i=24,a=null,r=e.configuration.states[t],o=Object.keys(r.layouts).length;if(r){var s=r.layouts[n];s&&(a=s.gridSettings)}return a&&a.columns&&(i=a.columns),i*=o},e.prototype.getOriginalSize=function(e,t,n,i){var a=e.configuration.states[t].layouts[n].widgets[i.id];return{sizeX:a.sizeX,sizeY:a.sizeY}},e.prototype.prepareAliasInfo=function(e){return{alias:e.alias,filter:e.filter}},e.prototype.prepareFilterInfo=function(e){return{filter:e.filter,keyFilters:e.keyFilters,editable:e.editable}},e.prototype.prepareWidgetReference=function(e,t,n,i){var a=this.getOriginalColumns(e,t,n),r=this.getOriginalSize(e,t,n,i);return{dashboardId:e.id.id,sourceState:t,sourceLayout:n,widgetId:i.id,originalSize:r,originalColumns:a}},e.prototype.updateAliases=function(e,t,n){for(var i,a,r=Object(o.e)(e.configuration.entityAliases),s=0,l=Object.keys(n.datasourceAliases);s<l.length;s++){var c=l[s],d=Number(c);i=n.datasourceAliases[d],a=this.getEntityAliasId(r,i),t.config.datasources[d].entityAliasId=a}for(var u=0,p=Object.keys(n.targetDeviceAliases);u<p.length;u++){var m=p[u],f=Number(m);i=n.targetDeviceAliases[f],a=this.getEntityAliasId(r,i),t.config.targetDeviceAliasIds[f]=a}return r},e.prototype.updateFilters=function(e,t,n){for(var i,a,r=Object(o.e)(e.configuration.filters),s=0,l=Object.keys(n.datasourceFilters);s<l.length;s++){var c=l[s],d=Number(c);i=n.datasourceFilters[d],a=this.getFilterId(r,i),t.config.datasources[d].filterId=a}return r},e.prototype.isEntityAliasEqual=function(e,t){return Object(o.r)(e.filter,t.filter)},e.prototype.getEntityAliasId=function(e,t){for(var n,i=0,a=Object.keys(e);i<a.length;i++){var r=a[i];if(this.isEntityAliasEqual(e[r],t)){n=r;break}}if(!n){var o=this.createEntityAliasName(e,t.alias);e[n=this.utils.guid()]={id:n,alias:o,filter:t.filter}}return n},e.prototype.createEntityAliasName=function(e,t){for(var n=0,i=t,a=!1;!a;){a=!0;for(var r=0,o=Object.keys(e);r<o.length;r++){i===e[o[r]].alias&&(i=t+ ++n,a=!1)}}return i},e.prototype.isFilterEqual=function(e,t){return Object(o.r)(e.keyFilters,t.keyFilters)},e.prototype.getFilterId=function(e,t){for(var n,i=0,a=Object.keys(e);i<a.length;i++){var r=a[i];if(this.isFilterEqual(e[r],t)){n=r;break}}if(!n){var o=this.createFilterName(e,t.filter);e[n=this.utils.guid()]={id:n,filter:o,keyFilters:t.keyFilters,editable:t.editable}}return n},e.prototype.createFilterName=function(e,t){for(var n=0,i=t,a=!1;!a;){a=!0;for(var r=0,o=Object.keys(e);r<o.length;r++){i===e[o[r]].filter&&(i=t+ ++n,a=!1)}}return i},e.prototype.storeSet=function(e,t){localStorage.setItem(this.getNamespacedKey(e),JSON.stringify(t))},e.prototype.storeGet=function(e){var t=null,n=localStorage.getItem(this.getNamespacedKey(e));try{t=void 0===n||"undefined"===n?void 0:JSON.parse(n)}catch(i){this.storeRemove(e)}return t},e.prototype.storeHas=function(e){var t=localStorage.getItem(this.getNamespacedKey(e));return void 0!==t&&"undefined"!==t&&null!==t},e.prototype.storeRemove=function(e){localStorage.removeItem(this.getNamespacedKey(e))},e.prototype.getNamespacedKey=function(e){return[this.namespace,e].join(this.delimiter)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](r.a),i["\u0275\u0275inject"](p.a),i["\u0275\u0275inject"](s.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();0,void 0},G4cQ:function(e,t,n){"use strict";n.d(t,"a",function(){return Gn});var i=n("fXoL"),a=n("ofXK"),r=n("PCNd"),o=n("LrsY"),s=n("UaJx"),l=n("aYVl"),c=n("mrSG"),d=n("RxGS"),u=(n("qxrw"),n("U3y+")),p=n("HnHJ"),m=n("wZkO"),f=n("//Q6"),h=n("l7P3"),g=n("XiUz"),A=n("kRCp"),b=n("znSr"),y=n("sYmb"),v=["entityDetailsForm"],C=["entityTabs"],x=function(e){return{"tb-headless":e}},w=function(e){function t(t,n,a,r){var o=e.call(this,t)||this;return o.store=t,o.injector=n,o.cd=a,o.componentFactoryResolver=r,o.closeEntityDetails=new i.EventEmitter,o.entityUpdated=new i.EventEmitter,o.entityAction=new i.EventEmitter,o.isEditValue=!1,o.selectedTab=0,o.entityTypes=u.b,o.subscriptions=[],o.viewInited=!1,o}return Object(c.d)(t,e),Object.defineProperty(t.prototype,"entityId",{set:function(e){e&&e!==this.currentEntityId&&(this.currentEntityId=e,this.reload())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"entitiesTableConfig",{get:function(){return this.entitiesTableConfigValue},set:function(e){this.entitiesTableConfigValue!==e&&(this.entitiesTableConfigValue=e,this.entitiesTableConfigValue&&(this.currentEntityId=null,this.isEdit=!1,this.entity=null,this.init()))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEdit",{get:function(){return this.isEditValue},set:function(e){this.isEditValue=e,this.entityComponent&&(this.entityComponent.isEdit=e),this.entityTabsComponent&&(this.entityTabsComponent.isEdit=e)},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.translations=this.entitiesTableConfig.entityTranslations,this.resources=this.entitiesTableConfig.entityResources,this.buildEntityComponent()},t.prototype.clearSubscriptions=function(){this.subscriptions.forEach(function(e){e.unsubscribe()}),this.subscriptions.length=0},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.clearSubscriptions()},t.prototype.buildEntityComponent=function(){var e=this;this.clearSubscriptions(),this.entityComponentRef&&(this.entityComponentRef.destroy(),this.entityComponentRef=null);var t=this.componentFactoryResolver.resolveComponentFactory(this.entitiesTableConfig.entityComponent),n=this.entityDetailsFormAnchor.viewContainerRef;n.clear();var a=i.Injector.create({providers:[{provide:"entity",useValue:this.entity},{provide:"entitiesTableConfig",useValue:this.entitiesTableConfig}],parent:this.injector});this.entityComponentRef=n.createComponent(t,0,a),this.entityComponent=this.entityComponentRef.instance,this.entityComponent.isEdit=this.isEdit,this.detailsForm=this.entityComponent.entityForm,this.subscriptions.push(this.entityComponent.entityAction.subscribe(function(t){e.entityAction.emit(t)})),this.buildEntityTabsComponent(),this.subscriptions.push(this.entityComponent.entityForm.valueChanges.subscribe(function(){e.cd.detectChanges()}))},t.prototype.buildEntityTabsComponent=function(){var e=this;this.entityTabsComponentRef&&(this.entityTabsComponentRef.destroy(),this.entityTabsComponentRef=null);var t=this.entityTabsAnchor.viewContainerRef;if(t.clear(),this.entityTabsComponent=null,this.entitiesTableConfig.entityTabsComponent){var n=this.componentFactoryResolver.resolveComponentFactory(this.entitiesTableConfig.entityTabsComponent);this.entityTabsComponentRef=t.createComponent(n),this.entityTabsComponent=this.entityTabsComponentRef.instance,this.entityTabsComponent.isEdit=this.isEdit,this.entityTabsComponent.entitiesTableConfig=this.entitiesTableConfig,this.entityTabsComponent.detailsForm=this.detailsForm,this.subscriptions.push(this.entityTabsComponent.entityTabsChanged.subscribe(function(t){t&&(e.viewInited?(e.matTabGroup._tabs.reset(Object(c.h)(e.inclusiveTabs.toArray(),t)),e.matTabGroup._tabs.notifyOnChanges()):e.pendingTabs=t)}))}},t.prototype.hideDetailsTabs=function(){return this.isEditValue&&this.entitiesTableConfig.hideDetailsTabsOnEdit},t.prototype.reload=function(){var e=this;this.isEdit=!1,this.entitiesTableConfig.loadEntity(this.currentEntityId).subscribe(function(t){e.entity=t,e.entityComponent.entity=t,e.entityTabsComponent&&(e.entityTabsComponent.entity=t)})},t.prototype.onCloseEntityDetails=function(){this.closeEntityDetails.emit()},t.prototype.onToggleEditMode=function(e){e?(this.isEdit=e,this.editingEntity=Object(f.e)(this.entity),this.entityComponent.entity=this.editingEntity,this.entityTabsComponent&&(this.entityTabsComponent.entity=this.editingEntity),this.entitiesTableConfig.hideDetailsTabsOnEdit&&(this.selectedTab=0)):(this.entityComponent.entity=this.entity,this.entityTabsComponent&&(this.entityTabsComponent.entity=this.entity),this.isEdit=e)},t.prototype.helpLinkId=function(){return this.resources.helpLinkIdForEntity&&this.entityComponent.entityForm?this.resources.helpLinkIdForEntity(this.entityComponent.entityForm.getRawValue()):this.resources.helpLinkId},t.prototype.saveEntity=function(){var e,t=this;if(this.detailsForm.valid){var n=Object(c.a)(Object(c.a)({},this.editingEntity),this.entityComponent.entityFormValue());this.editingEntity.hasOwnProperty("additionalInfo")&&(n.additionalInfo=Object(f.D)(this.editingEntity.additionalInfo,null===(e=this.entityComponent.entityFormValue())||void 0===e?void 0:e.additionalInfo)),this.entitiesTableConfig.saveEntity(n,this.editingEntity).subscribe(function(e){t.entity=e,t.entityComponent.entity=e,t.entityTabsComponent&&(t.entityTabsComponent.entity=e),t.isEdit=!1,t.entityUpdated.emit(t.entity)})}},t.prototype.ngAfterViewInit=function(){this.viewInited=!0,this.pendingTabs&&(this.matTabGroup._tabs.reset(Object(c.h)(this.inclusiveTabs.toArray(),this.pendingTabs)),this.matTabGroup._tabs.notifyOnChanges(),this.pendingTabs=null)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](i.Injector),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](i.ComponentFactoryResolver))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-entity-details-panel"]],viewQuery:function(e,t){if(1&e&&(i["\u0275\u0275viewQuery"](v,3),i["\u0275\u0275viewQuery"](C,3),i["\u0275\u0275viewQuery"](m.MatTabGroup,3),i["\u0275\u0275viewQuery"](m.MatTab,1)),2&e){var n=void 0;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.entityDetailsFormAnchor=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.entityTabsAnchor=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.matTabGroup=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.inclusiveTabs=n)}},inputs:{entityId:"entityId",entitiesTableConfig:"entitiesTableConfig"},outputs:{closeEntityDetails:"closeEntityDetails",entityUpdated:"entityUpdated",entityAction:"entityAction"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:11,vars:15,consts:[["fxFlex","",3,"headerTitle","headerSubtitle","isReadOnly","isEdit","theForm","closeDetails","toggleDetailsEditMode","applyDetails"],[1,"details-buttons"],[3,"tb-help"],["fxFlex","",1,"tb-absolute-fill",3,"ngClass","selectedIndex","selectedIndexChange"],[3,"label"],["entityDetailsForm",""],["entityTabs",""]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"tb-details-panel",0),i["\u0275\u0275listener"]("closeDetails",function(){return t.onCloseEntityDetails()})("toggleDetailsEditMode",function(e){return t.onToggleEditMode(e)})("applyDetails",function(){return t.saveEntity()}),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275elementStart"](2,"div",1),i["\u0275\u0275element"](3,"div",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mat-tab-group",3),i["\u0275\u0275listener"]("selectedIndexChange",function(e){return t.selectedTab=e}),i["\u0275\u0275elementStart"](5,"mat-tab",4),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275element"](7,"tb-anchor",null,5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](9,"tb-anchor",null,6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275propertyInterpolate"]("headerSubtitle",i["\u0275\u0275pipeBind1"](1,9,t.translations.details)),i["\u0275\u0275property"]("headerTitle",t.entitiesTableConfig.entityTitle(t.entity))("isReadOnly",t.entitiesTableConfig.detailsReadonly(t.entity))("isEdit",t.isEditValue)("theForm",t.detailsForm),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("tb-help",t.helpLinkId()),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](13,x,t.hideDetailsTabs()))("selectedIndex",t.selectedTab),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](6,11,"details.details")))},directives:[l.a,g.b,A.a,m.MatTabGroup,a.NgClass,b.b,m.MatTab,p.a],pipes:[y.TranslatePipe],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}[_nghost-%COMP%]     tb-details-panel>.mat-content>.mat-tab-group>.mat-tab-body-wrapper{position:absolute;top:49px;left:0;right:0;bottom:0}[_nghost-%COMP%]     tb-details-panel>.mat-content>.mat-tab-group>.mat-tab-header .mat-tab-label{min-width:40px}"],changeDetection:0}),t}(d.a);0,void 0;var S=n("5pw5"),E=n("igfJ"),I=n("dSnI"),O=n("mXAo"),T=n("unUE"),F=n("enJx"),B=n("jkF6"),M=n("o3UX"),P=n("eOYM"),D=n("AAbs"),k=n("Mldr"),_=n("Rm96"),L=n("eeD6"),j=n("ncEg"),N=n("BOYq"),R=n("CRwc"),U=n("0dMK"),V=n("wIJ8"),Q=n("fYjj"),G=n("EWcq"),H=n("c3m7"),K=n("hqxT"),q=n("0WnP"),z=n("+Xys"),W=n("JA3I"),X=n("O5Hl"),$=n("jhTr"),J=n("leY2"),Y=n("EYOO"),Z=n("9kgB"),ee=n("3bvz"),te=n("P0tZ"),ne=n("LqAV"),ie=n("Grun"),ae=n("/U8w"),re=n("g8Nv"),oe=n("txsh"),se=n("9HAa"),le=n("ou6H"),ce=n("3MWt"),de=n("XCsc"),ue=n("LpWh"),pe=n("GdA0"),me=n("wst2"),fe=n("6opy"),he=n("C6Vs"),ge=n("iOaI"),Ae=n("RFBu"),be=n("IfZf"),ye=n("qlrG"),ve=n("91qg"),Ce=n("kN7V"),xe=n("HX6g"),we=n("mcsV"),Se=n("ct/f"),Ee=n("UGF7"),Ie=n("HvOk"),Oe=n("kHY0"),Te=n("pf+U"),Fe=n("x7Md"),Be=n("xze0"),Me=n("A1kC"),Pe=n("W1QD"),De=n("S0ZR"),ke=n("cXYG"),_e=n("Vbuf"),Le=n("oook"),je=n("Nw2X"),Ne=n("RX5c"),Re=n("NPtW"),Ue=n("TpGD"),Ve=n("ec17"),Qe=n("QTrg"),Ge=n("8yrD"),He=n("6oqA"),Ke=n("p4Q/"),qe=n("Tu+t"),ze=n("nc6G"),We=n("em8L"),Xe=n("gKbb"),$e=n("96Yx"),Je=n("z5iZ"),Ye=n("9joC"),Ze=n("eIDA"),et=n("eriv"),tt=n("E4Bx"),nt=n("xkYi"),it=n("V4k/"),at=n("TRkj"),rt=n("4Nnk"),ot=n("Dgsq"),st=n("IVUU"),lt=n("lVMo"),ct=n("JoHb"),dt=n("OUQ4"),ut=n("PWf0"),pt=n("Mfyf"),mt=n("Yhx1"),ft=n("CJSR"),ht=n("CTyS"),gt=n("OUR+"),At=n("DZlp"),bt=n("Et39"),yt=n("QNnG"),vt=n("J/M1"),Ct=n("llVA"),xt=n("fhIE"),wt=n("AC8c"),St=n("QQgM"),Et=n("QaJg"),It=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[],imports:[[a.CommonModule,r.a,Et.a]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](It,{declarations:[ft.a,ht.a,gt.a,At.a,bt.a,yt.a,vt.a,Ct.a,xt.a,wt.a,St.a],imports:[a.CommonModule,r.a,Et.a],exports:[ft.a,ht.a,gt.a,At.a,bt.a,yt.a,vt.a,Ct.a,xt.a,wt.a,St.a]})),0;var Ot=n("Xbih"),Tt=n("dmmb"),Ft=n("Qrxw"),Bt=n("cp0P"),Mt=n("LRne"),Pt=n("tyNb"),Dt=function(){function e(e,t,n,i){this.router=e,this.route=t,this.ngZone=n,this.statesControllerService=i,this.stateObject=[],this.rxSubscriptions=new Array,this.inited=!1}return Object.defineProperty(e.prototype,"isMobile",{get:function(){return this.isMobileValue},set:function(e){this.isMobileValue!==e&&(this.isMobileValue=e,this.inited&&this.onMobileChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this.stateValue},set:function(e){this.stateValue!==e&&(this.stateValue=e,this.inited&&this.onStateIdChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dashboardId",{get:function(){return this.dashboardIdValue},set:function(e){this.dashboardIdValue!==e&&(this.dashboardIdValue=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"states",{get:function(){return this.statesValue},set:function(e){this.statesValue!==e&&(this.statesValue=e,this.inited&&this.onStatesChanged())},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.syncStateWithQueryParam&&this.rxSubscriptions.push(this.route.queryParamMap.subscribe(function(t){var n=e.route.snapshot.params.dashboardId||"";if(e.dashboardId===n){var i=e.decodeStateParam(t.get("state"));e.currentState!==i&&(e.currentState=i,e.inited&&e.onStateChanged())}})),this.init(),this.inited=!0},e.prototype.ngOnDestroy=function(){this.rxSubscriptions.forEach(function(e){e.unsubscribe()}),this.rxSubscriptions.length=0},e.prototype.updateStateParam=function(e,t){var n=this;if(void 0===t&&(t=!1),this.currentState=e,this.syncStateWithQueryParam){var i={state:this.currentState?encodeURIComponent(this.currentState):this.currentState};this.ngZone.run(function(){n.router.navigate([],{relativeTo:n.route,queryParams:i,queryParamsHandling:"merge",replaceUrl:t})})}},e.prototype.openRightLayout=function(){this.dashboardCtrl.openRightLayout()},e.prototype.preserveState=function(){this.statesControllerService.preserveStateControllerState(this.stateControllerInstanceId,this.stateObject)},e.prototype.cleanupPreservedStates=function(){this.statesControllerService.cleanupPreservedStates()},e.prototype.reInit=function(){this.preservedState=null,this.currentState=this.decodeStateParam(this.route.snapshot.queryParamMap.get("state")),this.init()},e.prototype.decodeStateParam=function(e){return null!==e?decodeURIComponent(e):null},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](Pt.Router),i["\u0275\u0275directiveInject"](Pt.ActivatedRoute),i["\u0275\u0275directiveInject"](i.NgZone),i["\u0275\u0275directiveInject"](Ft.a))},e.\u0275dir=i["\u0275\u0275defineDirective"]({type:e}),e}();0,void 0;var kt=n("OiFK"),_t=n("4j5O"),Lt=n("21Fy"),jt=n("vkgz"),Nt=n("lJxs"),Rt=n("T9Vw"),Ut=n("d3UM"),Vt=n("3Pt+"),Qt=n("FKr1"),Gt=function(e,t){return{fontWeight:e,cursor:t}};function Ht(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span",5),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.index;return i["\u0275\u0275nextContext"](2).navigatePrevState(e)}),i["\u0275\u0275text"](1),i["\u0275\u0275elementStart"](2,"span",6),i["\u0275\u0275text"](3," > "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=t.index,r=t.last,o=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction2"](3,Gt,r?"bold":"normal",r?"default":"pointer")),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",o.getStateName(a)," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxHide",r)}}function Kt(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",3),i["\u0275\u0275template"](1,Ht,4,6,"span",4),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",n.stateObject)}}function qt(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",9),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.index,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.getStateName(n)," ")}}function zt(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-select",7),i["\u0275\u0275listener"]("ngModelChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().selectedStateIndex=e})("ngModelChange",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().selectedStateIndexChanged()}),i["\u0275\u0275template"](1,qt,2,2,"mat-option",8),i["\u0275\u0275elementEnd"]()}if(2&e){var a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngModel",a.selectedStateIndex),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",a.stateObject)}}var Wt=function(e){function t(t,n,i,a,r,o,s,l){var c=e.call(this,t,n,i,a)||this;return c.router=t,c.route=n,c.ngZone=i,c.statesControllerService=a,c.utils=r,c.entityService=o,c.mobileService=s,c.dashboardUtils=l,c.selectedStateIndex=-1,c}return Object(c.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.prototype.init=function(){var e=this;if(this.preservedState)this.stateObject=this.preservedState,this.selectedStateIndex=this.stateObject.length-1,setTimeout(function(){e.gotoState(e.stateObject[e.stateObject.length-1].id,!0)},1);else{var t=this.currentState;this.stateObject=this.parseState(t),this.selectedStateIndex=this.stateObject.length-1,setTimeout(function(){e.gotoState(e.stateObject[e.stateObject.length-1].id,!1)},1)}},t.prototype.onMobileChanged=function(){},t.prototype.onStateIdChanged=function(){},t.prototype.onStatesChanged=function(){},t.prototype.onStateChanged=function(){this.stateObject=this.parseState(this.currentState),this.selectedStateIndex=this.stateObject.length-1,this.gotoState(this.stateObject[this.stateObject.length-1].id,!1)},t.prototype.stateControllerId=function(){return"entity"},t.prototype.getStateParams=function(){return this.stateObject&&this.stateObject.length?this.stateObject[this.stateObject.length-1].params:{}},t.prototype.openState=function(e,t,n){var i=this;this.states&&this.states[e]&&this.resolveEntity(t).subscribe(function(){var a={id:e,params:t};i.stateObject.push(a),i.selectedStateIndex=i.stateObject.length-1,i.gotoState(i.stateObject[i.stateObject.length-1].id,!0,n)})},t.prototype.pushAndOpenState=function(e,t){var n=this;if(this.states){for(var i=0,a=e;i<a.length;i++){var r=a[i];if(!this.states[r.id])return}Object(Bt.a)(e.map(function(e){return n.resolveEntity(e.params)})).subscribe(function(){var i;(i=n.stateObject).push.apply(i,e),n.selectedStateIndex=n.stateObject.length-1,n.gotoState(n.stateObject[n.stateObject.length-1].id,!0,t)})}},t.prototype.updateState=function(e,t,n){var i=this;e||(e=this.getStateId()),this.states&&this.states[e]&&this.resolveEntity(t).subscribe(function(){i.stateObject[i.stateObject.length-1]={id:e,params:t},i.gotoState(i.stateObject[i.stateObject.length-1].id,!0,n)})},t.prototype.getEntityId=function(e){var t=this.getStateParams();return e&&e.length?t[e]?t[e].entityId:null:t.entityId},t.prototype.getStateId=function(){return this.stateObject&&this.stateObject.length?this.stateObject[this.stateObject.length-1].id:""},t.prototype.getStateIdAtIndex=function(e){return this.stateObject&&this.stateObject[e]?this.stateObject[e].id:""},t.prototype.getStateIndex=function(){return this.stateObject&&this.stateObject.length?this.stateObject.length-1:-1},t.prototype.getStateParamsByStateId=function(e){var t=this.getStateObjById(e);return t?t.params:null},t.prototype.navigatePrevState=function(e){e<this.stateObject.length-1&&(this.stateObject.splice(e+1,this.stateObject.length-e-1),this.selectedStateIndex=this.stateObject.length-1,this.gotoState(this.stateObject[this.stateObject.length-1].id,!0))},t.prototype.resetState=function(){var e=this.dashboardUtils.getRootStateId(this.states);this.stateObject=[{id:e,params:{}}],this.gotoState(e,!0)},t.prototype.getStateName=function(e){var t="",n=this.stateObject[e];if(n){var i=this.states[n.id];if(i){var a=i.name;a=this.utils.customTranslation(a,a);var r=this.stateObject[e].params,o=r&&r.entityName?r.entityName:"",s=r&&r.entityLabel?r.entityLabel:"";t=Object(f.m)(a,"entityName",o),t=Object(f.m)(t,"entityLabel",s);for(var l=0,c=Object.keys(r);l<c.length;l++){var d=c[l];r[d]&&r[d].entityName&&(t=Object(f.m)(t,d+":entityName",r[d].entityName)),r[d]&&r[d].entityLabel&&(t=Object(f.m)(t,d+":entityLabel",r[d].entityLabel))}}}return t},t.prototype.getCurrentStateName=function(){return this.getStateName(this.stateObject.length-1)},t.prototype.selectedStateIndexChanged=function(){this.navigatePrevState(this.selectedStateIndex)},t.prototype.parseState=function(e){var t;if(e)try{t=Object(f.b)(e)}catch(a){t=[{id:null,params:{}}]}t||(t=[]),t.length||(t[0]={id:null,params:{}});var n=this.dashboardUtils.getRootStateId(this.states);t[0].id||(t[0].id=n),this.states[t[0].id]||(t[0].id=n);for(var i=t.length;i--;)t[i].id&&this.states[t[i].id]||t.splice(i,1);return t},t.prototype.gotoState=function(e,t,n){var i=this.dashboardCtrl.dashboardCtx.state!==e;this.dashboardCtrl.openDashboardState(e,n),this.mobileService.handleDashboardStateName(this.getStateName(this.stateObject.length-1)),t&&this.updateLocation(i)},t.prototype.updateLocation=function(e){if(this.stateObject[this.stateObject.length-1].id){var t=void 0;t=this.isDefaultState()?null:Object(f.E)(this.stateObject),this.updateStateParam(t,!e)}},t.prototype.isDefaultState=function(){if(1===this.stateObject.length){var e=this.stateObject[0],t=this.dashboardUtils.getRootStateId(this.states);if(e.id===t&&(!e.params||Object(f.p)(e.params)))return!0}return!1},t.prototype.resolveEntity=function(e){return e&&e.targetEntityParamName&&(e=e[e.targetEntityParamName]),e&&e.entityId&&e.entityId.id&&e.entityId.entityType?this.isEntityResolved(e)?Object(Mt.a)(null):this.entityService.getEntity(e.entityId.entityType,e.entityId.id,{ignoreLoading:!0,ignoreErrors:!0}).pipe(Object(jt.a)(function(t){e.entityName=t.name,e.entityLabel=t.label}),Object(Nt.a)(function(){return null})):Object(Mt.a)(null)},t.prototype.isEntityResolved=function(e){return!(!e.entityName||!e.entityName.length)},t.prototype.getStateObjById=function(e){return this.stateObject.find(function(t){return t.id===e})},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](Pt.Router),i["\u0275\u0275directiveInject"](Pt.ActivatedRoute),i["\u0275\u0275directiveInject"](i.NgZone),i["\u0275\u0275directiveInject"](Ft.a),i["\u0275\u0275directiveInject"](kt.a),i["\u0275\u0275directiveInject"](Lt.a),i["\u0275\u0275directiveInject"](Rt.a),i["\u0275\u0275directiveInject"](_t.a))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-entity-state-controller"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:2,consts:[[1,"entity-state-controller"],["fxLayout","row","fxLayoutAlign","start center",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center"],["class","state-entry",3,"ngStyle","click",4,"ngFor","ngForOf"],[1,"state-entry",3,"ngStyle","click"],[1,"state-divider",3,"fxHide"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,Kt,2,1,"div",1),i["\u0275\u0275template"](2,zt,2,2,"mat-select",2),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.isMobile||1===t.stateObject.length),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.isMobile&&t.stateObject.length>1))},directives:[a.NgIf,g.f,g.e,a.NgForOf,a.NgStyle,b.e,b.d,Ut.MatSelect,Vt.NgControlStatus,Vt.NgModel,Qt.MatOption],styles:["[_nghost-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .entity-state-controller[_ngcontent-%COMP%]   .state-divider[_ngcontent-%COMP%]{padding:0 15px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;pointer-events:none}[_nghost-%COMP%]   .entity-state-controller[_ngcontent-%COMP%]   .state-entry[_ngcontent-%COMP%]{pointer-events:all;overflow:hidden;font-size:18px;text-overflow:ellipsis;white-space:nowrap;outline:none}[_nghost-%COMP%]   .entity-state-controller[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]     mat-select .mat-select-value{max-width:200px}[_nghost-%COMP%]     mat-select .mat-select-value .mat-select-value-text{font-size:18px;font-weight:700}"]}),t}(Dt);0,void 0;var Xt=n("CUDX"),$t=n("M0Qk");function Jt(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",2),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n.key),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.getStateName(n.key,n.value)," ")}}var Yt=function(e){function t(t,n,i,a,r,o,s,l){var c=e.call(this,t,n,i,a)||this;return c.router=t,c.route=n,c.ngZone=i,c.statesControllerService=a,c.utils=r,c.entityService=o,c.mobileService=s,c.dashboardUtils=l,c}return Object(c.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.prototype.init=function(){var e=this;if(this.preservedState)this.stateObject=this.preservedState,setTimeout(function(){e.gotoState(e.stateObject[0].id,!0)},1);else{var t=this.currentState;this.stateObject=this.parseState(t),setTimeout(function(){e.gotoState(e.stateObject[0].id,!1)},1)}},t.prototype.onMobileChanged=function(){},t.prototype.onStateIdChanged=function(){},t.prototype.onStatesChanged=function(){},t.prototype.onStateChanged=function(){this.stateObject=this.parseState(this.currentState),this.gotoState(this.stateObject[0].id,!1)},t.prototype.stateControllerId=function(){return"default"},t.prototype.getStateParams=function(){return this.stateObject&&this.stateObject.length?this.stateObject[this.stateObject.length-1].params:{}},t.prototype.openState=function(e,t,n){if(this.states&&this.states[e]){t||(t={});var i={id:e,params:t};this.stateObject[0]=i,this.gotoState(this.stateObject[0].id,!0,n)}},t.prototype.pushAndOpenState=function(e,t){var n=e[e.length-1];this.openState(n.id,n.params,t)},t.prototype.updateState=function(e,t,n){if(e||(e=this.getStateId()),this.states&&this.states[e]){t||(t={});var i={id:e,params:t};this.stateObject[0]=i,this.gotoState(this.stateObject[0].id,!0,n)}},t.prototype.getEntityId=function(e){return null},t.prototype.getStateId=function(){return this.stateObject&&this.stateObject.length?this.stateObject[this.stateObject.length-1].id:""},t.prototype.getStateIdAtIndex=function(e){return this.stateObject&&this.stateObject[e]?this.stateObject[e].id:""},t.prototype.getStateIndex=function(){return this.stateObject&&this.stateObject.length?this.stateObject.length-1:-1},t.prototype.getStateParamsByStateId=function(e){var t=this.getStateObjById(e);return t?t.params:null},t.prototype.navigatePrevState=function(e){e<this.stateObject.length-1&&(this.stateObject.splice(e+1,this.stateObject.length-e-1),this.gotoState(this.stateObject[this.stateObject.length-1].id,!0))},t.prototype.resetState=function(){var e=this.dashboardUtils.getRootStateId(this.states);this.stateObject=[{id:e,params:{}}],this.gotoState(e,!0)},t.prototype.getStateName=function(e,t){return this.utils.customTranslation(t.name,e)},t.prototype.getCurrentStateName=function(){return this.getStateName(this.stateObject[0].id,this.statesValue[this.stateObject[0].id])},t.prototype.displayStateSelection=function(){return this.states&&Object.keys(this.states).length>1},t.prototype.selectedStateIdChanged=function(){this.gotoState(this.stateObject[0].id,!0)},t.prototype.parseState=function(e){var t;if(e)try{t=Object(f.b)(e)}catch(r){t=[{id:null,params:{}}]}if(t||(t=[]),t.length){if(t.length>1){var n=[];n.push(t[t.length-1]),t=n}}else t[0]={id:null,params:{}};var i=this.dashboardUtils.getRootStateId(this.states);t[0].id||(t[0].id=i),this.states[t[0].id]||(t[0].id=i);for(var a=t.length;a--;)t[a].id&&this.states[t[a].id]||t.splice(a,1);return t},t.prototype.gotoState=function(e,t,n){this.dashboardCtrl.dashboardCtx.state!==e&&(this.dashboardCtrl.openDashboardState(e,n),e&&this.statesValue[e]&&this.mobileService.handleDashboardStateName(this.getStateName(e,this.statesValue[e])),t&&this.updateLocation())},t.prototype.updateLocation=function(){if(this.stateObject[0].id){var e=Object(f.E)(this.stateObject);this.updateStateParam(e)}},t.prototype.getStateObjById=function(e){return this.stateObject.find(function(t){return t.id===e})},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](Pt.Router),i["\u0275\u0275directiveInject"](Pt.ActivatedRoute),i["\u0275\u0275directiveInject"](i.NgZone),i["\u0275\u0275directiveInject"](Ft.a),i["\u0275\u0275directiveInject"](kt.a),i["\u0275\u0275directiveInject"](Lt.a),i["\u0275\u0275directiveInject"](Rt.a),i["\u0275\u0275directiveInject"](_t.a))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-default-state-controller"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:5,consts:[[1,"default-state-controller",3,"fxShow","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-select",0),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.stateObject[0].id=e})("ngModelChange",function(){return t.selectedStateIdChanged()}),i["\u0275\u0275template"](1,Jt,2,2,"mat-option",1),i["\u0275\u0275pipe"](2,"keyvalue"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("fxShow",t.displayStateSelection())("ngModel",t.stateObject[0].id),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](2,3,t.states)))},directives:[Ut.MatSelect,b.d,Vt.NgControlStatus,Vt.NgModel,a.NgForOf,Qt.MatOption],pipes:[a.KeyValuePipe],styles:["[_nghost-%COMP%]{width:-webkit-min-content;width:-moz-min-content;width:min-content}[_nghost-%COMP%]   mat-select.default-state-controller[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]     mat-select.default-state-controller .mat-select-value{max-width:200px}"]}),t}(Dt);0,void 0;var Zt=function(){function e(e){this.statesControllerService=e,this.statesControllerService.registerStatesController("default",Yt),this.statesControllerService.registerStatesController("entity",Wt)}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](Ft.a))},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[Ft.a],imports:[[a.CommonModule,r.a,$t.a]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](Zt,{declarations:[Xt.a,Yt,Wt],imports:[a.CommonModule,r.a,$t.a],exports:[Xt.a]})),0;var en=n("0AoA"),tn=n("LwFc"),nn=n("xzJA"),an=n("fDYr"),rn=n("aMoz"),on=n("oPR/"),sn=n("Absi"),ln=n("LBt+"),cn=n("0IaG"),dn=n("gmuX"),un=n("/t3+"),pn=n("bTqV"),mn=n("NFeN"),fn=n("bv9b"),hn=["dashboardContent"];function gn(e,t){1&e&&i["\u0275\u0275element"](0,"mat-progress-bar",11)}function An(e,t){1&e&&i["\u0275\u0275element"](0,"div",12)}var bn=function(e){function t(t,n,i,a){var r=e.call(this,t,n,a)||this;return r.store=t,r.router=n,r.data=i,r.dialogRef=a,r.dashboard=r.data.dashboard,r.state=r.data.state,r.title=r.data.title,r.hideToolbar=r.data.hideToolbar,r.dialogStyle={},r.data.width&&(r.dialogStyle.width=r.data.width+"vw"),r.data.height&&(r.dialogStyle.height=r.data.height+"vh"),r}return Object(c.d)(t,e),t.prototype.ngOnInit=function(){},t.prototype.close=function(){this.dialogRef.close(null)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](Pt.Router),i["\u0275\u0275directiveInject"](cn.MAT_DIALOG_DATA),i["\u0275\u0275directiveInject"](cn.MatDialogRef))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-embed-dashboard-dialog"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](hn,3,i.ViewContainerRef),2&e){var n;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.dashboardContentContainer=n.first)}},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:18,vars:16,consts:[["fxLayout","column",1,"dashboard-state-dialog",3,"ngStyle"],["color","accent"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content","","fxFlex","","fxLayout","column",1,"dashboard-state-dialog-content",2,"padding","8px"],[2,"width","100%","height","100%",3,"embedded","syncStateWithQueryParam","hideToolbar","currentState","dashboard"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"mat-toolbar",1),i["\u0275\u0275elementStart"](2,"h2"),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"span",2),i["\u0275\u0275elementStart"](5,"button",3),i["\u0275\u0275listener"]("click",function(){return t.close()}),i["\u0275\u0275elementStart"](6,"mat-icon",4),i["\u0275\u0275text"](7,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,gn,1,0,"mat-progress-bar",5),i["\u0275\u0275pipe"](9,"async"),i["\u0275\u0275template"](10,An,1,0,"div",6),i["\u0275\u0275pipe"](11,"async"),i["\u0275\u0275elementStart"](12,"div",7),i["\u0275\u0275element"](13,"tb-dashboard-page",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"div",9),i["\u0275\u0275elementStart"](15,"button",10),i["\u0275\u0275listener"]("click",function(){return t.close()}),i["\u0275\u0275pipe"](16,"async"),i["\u0275\u0275text"](17," Close "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("ngStyle",t.dialogStyle),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](t.title),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](9,10,t.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](11,12,t.isLoading$)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("embedded",!0)("syncStateWithQueryParam",!1)("hideToolbar",t.hideToolbar)("currentState",t.state)("dashboard",t.dashboard),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](16,14,t.isLoading$)))},directives:[g.f,a.NgStyle,b.e,un.MatToolbar,g.b,pn.MatButton,mn.MatIcon,a.NgIf,cn.MatDialogContent,Ot.a,cn.MatDialogActions,g.e,fn.MatProgressBar],pipes:[a.AsyncPipe],styles:["[_nghost-%COMP%]   .dashboard-state-dialog[_ngcontent-%COMP%]   .mat-dialog-content.dashboard-state-dialog-content[_ngcontent-%COMP%]{max-height:100%}@media screen and (max-width:599px){[_nghost-%COMP%]   .dashboard-state-dialog[_ngcontent-%COMP%]{width:100%!important;height:100%!important}}@media screen and (min-width:600px){[_nghost-%COMP%]   .dashboard-state-dialog[_ngcontent-%COMP%]{width:480px;height:600px}}@media screen and (min-width:960px){[_nghost-%COMP%]   .dashboard-state-dialog[_ngcontent-%COMP%]{width:768px;height:600px}}@media screen and (min-width:1280px){[_nghost-%COMP%]   .dashboard-state-dialog[_ngcontent-%COMP%]{width:1000px;height:800px}}"]}),t}(dn.a);0,void 0;var yn=n("vY+p"),vn=n("9J+n"),Cn=n("NSP8"),xn=n("0Dj+"),wn=n("de2O"),Sn=n("z0mp"),En=n("72sC"),In=n("fWS+"),On=n("t2OX"),Tn=n("cWLi"),Fn=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[a.CommonModule,r.a]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](Fn,{declarations:[In.a,On.a,Tn.a],imports:[a.CommonModule,r.a],exports:[In.a]})),0;var Bn=n("YPhb"),Mn=n("XhcP"),Pn=n("k81w"),Dn=n("Qu3c"),kn=n("STbY"),_n=n("kmnG"),Ln=n("qFsG"),jn=n("+0xr"),Nn=n("Dh3D"),Rn=n("bSwM"),Un=n("j8W/"),Vn=n("f0Cb"),Qn=n("M9IT"),Gn=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[N.a,re.a,se.a,{provide:yn.a,useValue:bn}],imports:[[a.CommonModule,r.a,me.a,It,Fn,Zt,Bn.a,Et.a]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](Gn,{declarations:[s.a,o.a,l.a,w,E.a,S.a,pe.a,I.a,O.a,T.b,Cn.a,vn.a,F.a,B.a,z.a,M.a,P.a,D.a,k.a,_.b,U.b,V.a,ge.a,G.a,K.a,L.a,En.b,j.a,R.a,Q.a,H.a,q.a,W.a,X.a,J.a,$.a,Y.b,Z.a,ee.a,te.a,ne.a,ie.a,ae.a,oe.a,le.a,de.a,fe.a,he.a,ce.a,ue.a,Ae.a,be.a,ye.a,ve.a,Se.a,Ce.a,xe.a,we.a,Ee.a,Oe.a,Ie.a,Te.a,Ze.a,Fe.a,Be.b,Me.a,Pe.a,De.a,ke.a,_e.a,ct.a,dt.a,Ne.a,Le.a,je.a,Ke.a,Re.a,Ue.a,Qe.a,qe.a,ze.a,Ge.a,$e.a,Je.a,lt.a,Ye.a,Xe.a,We.a,Ve.a,He.a,et.a,tt.a,rt.a,nt.a,it.a,wn.a,at.a,ot.a,st.a,ut.a,pt.a,mt.a,Tt.a,Ot.a,en.a,tn.a,nn.a,an.a,rn.a,on.a,sn.a,ln.a,Sn.a,bn,xn.b],imports:[a.CommonModule,r.a,me.a,It,Fn,Zt,Bn.a,Et.a],exports:[s.a,o.a,l.a,w,E.a,O.a,Cn.a,vn.a,F.a,z.a,P.a,D.a,V.a,ge.a,G.a,K.a,L.a,En.b,j.a,R.a,Q.a,H.a,q.a,W.a,X.a,J.a,$.a,Z.a,ee.a,te.a,ne.a,ie.a,ae.a,oe.a,le.a,de.a,ue.a,fe.a,he.a,Ae.a,be.a,ye.a,ve.a,Se.a,Ce.a,xe.a,we.a,Ee.a,Oe.a,Ie.a,Te.a,Ze.a,Fe.a,Me.a,_e.a,Ne.a,Le.a,je.a,Ke.a,Re.a,Ue.a,Qe.a,qe.a,ze.a,Ge.a,$e.a,Je.a,lt.a,Ye.a,Xe.a,We.a,Ve.a,He.a,et.a,tt.a,at.a,rt.a,it.a,ot.a,wn.a,st.a,nt.a,it.a,ut.a,pt.a,mt.a,Tt.a,Ot.a,en.a,tn.a,nn.a,an.a,rn.a,on.a,sn.a,ln.a,Sn.a,bn,xn.b]})),0,i["\u0275\u0275setComponentScope"](s.a,[Mn.MatDrawerContainer,a.NgIf,Mn.MatDrawer,w,Mn.MatDrawerContent,g.f,un.MatToolbar,b.d,g.e,p.a,Pn.a,Vt.NgControlStatus,Vt.NgModel,g.b,pn.MatButton,Dn.MatTooltip,mn.MatIcon,kn.MatMenuTrigger,kn.MatMenu,a.NgForOf,kn.MatMenuItem,_n.MatFormField,_n.MatLabel,Ln.MatInput,Vt.DefaultValueAccessor,jn.MatTable,Nn.MatSort,jn.MatColumnDef,jn.MatHeaderCellDef,jn.MatHeaderCell,Rn.MatCheckbox,jn.MatCellDef,jn.MatCell,Nn.MatSortHeader,a.NgClass,b.b,a.NgStyle,b.e,a.NgSwitch,a.NgSwitchCase,Un.a,a.NgSwitchDefault,jn.MatHeaderRowDef,jn.MatHeaderRow,jn.MatRowDef,jn.MatRow,Vn.MatDivider,Qn.MatPaginator],[a.AsyncPipe,y.TranslatePipe]),i["\u0275\u0275setComponentScope"](Se.a,[Vt["\u0275angular_packages_forms_forms_ba"],Vt.NgControlStatusGroup,Vt.FormGroupDirective,un.MatToolbar,y.TranslateDirective,g.b,pn.MatButton,mn.MatIcon,cn.MatDialogContent,g.f,_n.MatFormField,_n.MatLabel,Ut.MatSelect,Vt.RequiredValidator,Vt.NgControlStatus,Vt.FormControlName,a.NgForOf,Qt.MatOption,xe.a,cn.MatDialogActions,g.e,a.NgIf],[a.AsyncPipe,y.TranslatePipe])},G8Aa:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("mrSG"),a=n("RxGS"),r=n("fXoL"),o=n("//Q6"),s=(n("l7P3"),n("3Pt+"),function(e){function t(t,n,i,a,o){var s=e.call(this,t)||this;return s.store=t,s.fb=n,s.entityValue=i,s.entitiesTableConfigValue=a,s.cd=o,s.entityAction=new r.EventEmitter,s.entityForm=s.buildForm(s.entityValue),s}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"entitiesTableConfig",{get:function(){return this.entitiesTableConfigValue},set:function(e){this.setEntitiesTableConfig(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEdit",{get:function(){return this.isEditValue},set:function(e){this.isEditValue=e,this.cd.markForCheck(),this.updateFormState()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAdd",{get:function(){return this.entityValue&&(!this.entityValue.id||!this.entityValue.id.id)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"entity",{get:function(){return this.entityValue},set:function(e){this.entityValue=e,this.entityForm&&(this.entityForm.markAsPristine(),this.updateForm(e))},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){},t.prototype.onEntityAction=function(e,t){var n={event:e,action:t,entity:this.entity},i=!1;this.entitiesTableConfig&&(i=this.entitiesTableConfig.onEntityAction(n)),i||this.entityAction.emit(n)},t.prototype.updateFormState=function(){this.entityForm&&(this.isEditValue?this.entityForm.enable({emitEvent:!1}):this.entityForm.disable({emitEvent:!1}))},t.prototype.entityFormValue=function(){var e=this.entityForm?Object(i.a)({},this.entityForm.getRawValue()):{};return this.prepareFormValue(e)},t.prototype.prepareFormValue=function(e){return Object(o.f)(e)},t.prototype.setEntitiesTableConfig=function(e){this.entitiesTableConfigValue=e},t.\u0275fac=function(e){r["\u0275\u0275invalidFactory"]()},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,inputs:{entitiesTableConfig:"entitiesTableConfig",isEdit:"isEdit",entity:"entity"},outputs:{entityAction:"entityAction"},features:[r["\u0275\u0275InheritDefinitionFeature"]]}),t}(a.a));0,void 0},"GL+W":function(e,t,n){"use strict";n.r(t),n.d(t,"AliasController",function(){return i.a}),n.d(t,"DataAggregator",function(){return a.a}),n.d(t,"EntityDataService",function(){return r.a}),n.d(t,"EntityDataSubscription",function(){return o.a}),n.d(t,"WidgetSubscriptionContext",function(){return s.a}),n.d(t,"WidgetSubscription",function(){return l.a}),n.d(t,"AdminService",function(){return c.a}),n.d(t,"AlarmService",function(){return d.a}),n.d(t,"AssetService",function(){return u.a}),n.d(t,"AttributeService",function(){return p.a}),n.d(t,"AuditLogService",function(){return m.a}),n.d(t,"ComponentDescriptorService",function(){return f.a}),n.d(t,"CustomerService",function(){return h.a}),n.d(t,"DashboardService",function(){return g.a}),n.d(t,"DeviceService",function(){return A.a}),n.d(t,"EntityService",function(){return b.a}),n.d(t,"EdgeService",function(){return y.a}),n.d(t,"EntityRelationService",function(){return v.a}),n.d(t,"EntityViewService",function(){return C.a}),n.d(t,"EventService",function(){return x.a}),n.d(t,"defaultHttpOptionsFromConfig",function(){return w.b}),n.d(t,"defaultHttpOptions",function(){return w.a}),n.d(t,"defaultHttpUploadOptions",function(){return w.c}),n.d(t,"OAuth2Service",function(){return S.a}),n.d(t,"QueueService",function(){return E.a}),n.d(t,"RuleChainService",function(){return I.a}),n.d(t,"TenantService",function(){return O.a}),n.d(t,"UserService",function(){return T.a}),n.d(t,"WidgetService",function(){return F.a}),n.d(t,"IntegrationService",function(){return D}),n.d(t,"LocalStorageService",function(){return k.a}),n.d(t,"NodeScriptTestService",function(){return R}),n.d(t,"BroadcastService",function(){return U.a}),n.d(t,"DashboardUtilsService",function(){return V.a}),n.d(t,"DialogService",function(){return Q.a}),n.d(t,"DynamicComponentModule",function(){return G.b}),n.d(t,"DynamicComponentFactoryService",function(){return G.a}),n.d(t,"ItemBufferService",function(){return H.a}),n.d(t,"MenuService",function(){return K.a}),n.d(t,"NotificationService",function(){return q.a}),n.d(t,"RafService",function(){return z.a}),n.d(t,"ResourcesService",function(){return W.a}),n.d(t,"TimeService",function(){return X.a}),n.d(t,"TitleService",function(){return $.a}),n.d(t,"UtilsService",function(){return J.a}),n.d(t,"WINDOW",function(){return Y.b}),n.d(t,"WindowRef",function(){return Y.d}),n.d(t,"BrowserWindowRef",function(){return Y.a}),n.d(t,"windowFactory",function(){return Y.f}),n.d(t,"browserWindowProvider",function(){return Y.e}),n.d(t,"windowProvider",function(){return Y.g}),n.d(t,"WINDOW_PROVIDERS",function(){return Y.c}),n.d(t,"TelemetryWebsocketService",function(){return Z.a}),n.d(t,"reducers",function(){return ee.c}),n.d(t,"metaReducers",function(){return ee.b}),n.d(t,"effects",function(){return ee.a}),n.d(t,"HttpLoaderFactory",function(){return te.b}),n.d(t,"CoreModule",function(){return te.a}),n.d(t,"onParentScrollOrWindowResize",function(){return j.I}),n.d(t,"isLocalUrl",function(){return j.u}),n.d(t,"animatedScroll",function(){return j.a}),n.d(t,"isUndefined",function(){return j.B}),n.d(t,"isUndefinedOrNull",function(){return j.C}),n.d(t,"isDefined",function(){return j.n}),n.d(t,"isDefinedAndNotNull",function(){return j.o}),n.d(t,"isEmptyStr",function(){return j.q}),n.d(t,"isNotEmptyStr",function(){return j.w}),n.d(t,"isFunction",function(){return j.s}),n.d(t,"isObject",function(){return j.z}),n.d(t,"isNumber",function(){return j.x}),n.d(t,"isNumeric",function(){return j.y}),n.d(t,"isString",function(){return j.A}),n.d(t,"isEmpty",function(){return j.p}),n.d(t,"isLiteralObject",function(){return j.t}),n.d(t,"formatValue",function(){return j.h}),n.d(t,"objectValues",function(){return j.H}),n.d(t,"deleteNullProperties",function(){return j.g}),n.d(t,"objToBase64",function(){return j.E}),n.d(t,"objToBase64URI",function(){return j.F}),n.d(t,"base64toObj",function(){return j.b}),n.d(t,"hashCode",function(){return j.l}),n.d(t,"objectHashCode",function(){return j.G}),n.d(t,"deepClone",function(){return j.e}),n.d(t,"isEqual",function(){return j.r}),n.d(t,"mergeDeep",function(){return j.D}),n.d(t,"guid",function(){return j.k}),n.d(t,"snakeCase",function(){return j.L}),n.d(t,"getDescendantProp",function(){return j.j}),n.d(t,"insertVariable",function(){return j.m}),n.d(t,"createLabelFromDatasource",function(){return j.d}),n.d(t,"padValue",function(){return j.J}),n.d(t,"baseUrl",function(){return j.c}),n.d(t,"sortObjectKeys",function(){return j.M}),n.d(t,"deepTrim",function(){return j.f}),n.d(t,"generateSecret",function(){return j.i}),n.d(t,"validateEntityId",function(){return j.N}),n.d(t,"isMobileApp",function(){return j.v}),n.d(t,"randomAlphanumeric",function(){return j.K});var i=n("Xk9D"),a=n("9GfO"),r=n("lbPe"),o=n("Pmg/"),s=n("OMGm"),l=n("c6cM"),c=n("jKtI"),d=n("7ZKe"),u=n("1y+p"),p=n("BsGH"),m=n("Q7pZ"),f=n("9n8L"),h=n("ktVl"),g=n("YnEf"),A=n("DaoB"),b=n("21Fy"),y=n("y7gY"),v=n("Bjlt"),C=n("j37L"),x=n("mopS"),w=n("Y8nr"),S=n("wSoN"),E=n("IaQH"),I=n("C4fA"),O=n("WNjs"),T=n("9D3k"),F=n("5xOD"),B=n("fXoL"),M=n("he9t"),P=n("tk/3"),D=function(){function e(e){this.http=e}return e.prototype.getProducts=function(e){return this.http.get(M.l.product,Object(w.b)(e))},e.prototype.getGroupProducts=function(e){return this.http.get(M.l.groupProduct,Object(w.b)(e))},e.prototype.getStages=function(e){return this.http.get(M.l.stage,Object(w.b)(e))},e.prototype.getErrors=function(e){return this.http.get(M.l.error,Object(w.b)(e))},e.prototype.getAsset=function(e,t){return this.http.get("/api/asset/"+e,Object(w.b)(t))},e.prototype.saveAsset=function(e,t){return this.http.post("/api/asset",e,Object(w.b)(t))},e.prototype.deleteAsset=function(e,t){return this.http.delete("/api/asset/"+e,Object(w.b)(t))},e.\u0275fac=function(t){return new(t||e)(B["\u0275\u0275inject"](P.HttpClient))},e.\u0275prov=B["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();0,void 0;var k=n("EP1h"),_=n("eIep"),L=n("nfcV"),j=n("//Q6"),N=n("0IaG"),R=function(){function e(e,t){this.ruleChainService=e,this.dialog=t}return e.prototype.testNodeScript=function(e,t,n,i,a,r){var o=this;return r?this.ruleChainService.getLatestRuleNodeDebugInput(r).pipe(Object(_.a)(function(r){var s,l,c;return r&&(r.data&&(s=JSON.parse(r.data)),r.metadata&&(l=JSON.parse(r.metadata)),c=r.msgType),o.openTestScriptDialog(e,t,n,i,a,s,l,c)})):this.openTestScriptDialog(e,t,n,i,a)},e.prototype.openTestScriptDialog=function(e,t,n,i,a,r,o,s){return r||(r={temperature:22.4,humidity:78}),o=o?Object(j.M)(o):{deviceName:"Test Device",deviceType:"default",ts:(new Date).getTime()+""},s||(s="POST_TELEMETRY_REQUEST"),this.dialog.open(L.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog","tb-fullscreen-dialog-gt-sm"],data:{msg:r,metadata:o,msgType:s,functionTitle:n,functionName:i,script:e,scriptType:t,argNames:a}}).afterClosed()},e.\u0275fac=function(t){return new(t||e)(B["\u0275\u0275inject"](I.a),B["\u0275\u0275inject"](N.MatDialog))},e.\u0275prov=B["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();0,void 0;var U=n("gM18"),V=n("4j5O"),Q=n("S+vS"),G=n("Z9d0"),H=n("FBAY"),K=n("/crD"),q=n("Y4+Y"),z=n("nhHW"),W=n("OCOE"),X=n("k9IB"),$=n("NXKV"),J=n("OiFK"),Y=n("wtyh"),Z=n("2lgB"),ee=n("Vz2p"),te=n("pKmL")},GdA0:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var i=n("mrSG"),a=n("fXoL"),r=n("0IaG"),o=n("gmuX"),s=n("he9t"),l=n("jCow"),c=n("Uj2l"),d=n("LRne"),u=n("l7P3"),p=n("tyNb"),m=n("/t3+"),f=n("XiUz"),h=n("sYmb"),g=n("bTqV"),A=n("NFeN"),b=n("ofXK"),y=["eventContentEditor"],v=function(e){function t(t,n,i,a,r){var o=e.call(this,t,n,a)||this;return o.store=t,o.router=n,o.data=i,o.dialogRef=a,o.renderer=r,o}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){this.content=this.data.content,this.title=this.data.title,this.contentType=this.data.contentType,this.createEditor(this.eventContentEditorElmRef,this.content)},t.prototype.createEditor=function(e,t){var n=this,a=e.nativeElement,r="java",o=null;this.contentType&&(r=s.i.get(this.contentType).code,this.contentType===s.b.JSON&&t&&(o=Object(c.c)(t,{indent_size:4}))),o||(o=Object(d.a)(t)),o.subscribe(function(e){var t={mode:"ace/mode/"+r,theme:"ace/theme/github",showGutter:!1,showPrintMargin:!1,readOnly:!0};t=Object(i.a)(Object(i.a)({},t),{enableSnippets:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1}),Object(l.b)().subscribe(function(i){var r=i.edit(a,t);r.session.setUseWrapMode(!1),r.setValue(e,-1),n.updateEditorSize(a,e,r)})})},t.prototype.updateEditorSize=function(e,t,n){var i=400,a=600;if(t&&t.length>0){var r=t.split("\n");i=16*r.length+16;var o=0;r.forEach(function(e){var t=e.replace(/\t/g,"    ").replace(/\n/g,"").length;o=Math.max(o,t)}),a=8*o+16}this.renderer.setStyle(e,"minHeight",i.toString()+"px"),this.renderer.setStyle(e,"height",i.toString()+"px"),this.renderer.setStyle(e,"width",a.toString()+"px"),n.resize()},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](u.Store),a["\u0275\u0275directiveInject"](p.Router),a["\u0275\u0275directiveInject"](r.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.MatDialogRef),a["\u0275\u0275directiveInject"](a.Renderer2))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-event-content-dialog"]],viewQuery:function(e,t){if(1&e&&a["\u0275\u0275viewQuery"](y,3),2&e){var n;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.eventContentEditorElmRef=n.first)}},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:16,vars:9,consts:[["fxLayout","row","color","accent"],["translate",""],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"mat-dialog-close"],[1,"material-icons"],["mat-dialog-content","","fxLayout","column"],[1,"tb-event-content"],["eventContentEditor",""],["mat-dialog-actions","","fxLayout","row"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","mat-dialog-close"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-toolbar",0),a["\u0275\u0275elementStart"](1,"h2",1),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"span",2),a["\u0275\u0275elementStart"](4,"button",3),a["\u0275\u0275elementStart"](5,"mat-icon",4),a["\u0275\u0275text"](6,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"div",5),a["\u0275\u0275element"](8,"div",6,7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"div",8),a["\u0275\u0275element"](11,"span",2),a["\u0275\u0275elementStart"](12,"button",9),a["\u0275\u0275pipe"](13,"async"),a["\u0275\u0275text"](14),a["\u0275\u0275pipe"](15,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](t.title),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("mat-dialog-close",!1),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](13,5,t.isLoading$))("mat-dialog-close",!1),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](15,7,"action.close")," "))},directives:[m.MatToolbar,f.f,h.TranslateDirective,f.b,g.MatButton,r.MatDialogClose,A.MatIcon,r.MatDialogContent,r.MatDialogActions],pipes:[b.AsyncPipe,h.TranslatePipe],styles:["[_nghost-%COMP%]   .tb-event-content[_ngcontent-%COMP%]{width:100%;min-width:400px;height:100%;min-height:50px}"]}),t}(o.a);0,void 0},Grun:function(e,t,n){"use strict";n.d(t,"a",function(){return T});var i=n("mrSG"),a=n("fXoL"),r=n("3Pt+"),o=n("RxGS"),s=n("itXk"),l=n("gi3d"),c=n("l7P3"),d=n("8m5z"),u=n("XiUz"),p=n("ofXK"),m=n("znSr"),f=n("bTqV"),h=n("Qu3c"),g=n("NFeN"),A=n("sYmb"),b=n("LqAV"),y=n("yAAm"),v=["leftPanel"],C=["rightPanel"];function x(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"span",7),a["\u0275\u0275text"](1,"widget.toggle-fullscreen"),a["\u0275\u0275elementEnd"]())}function w(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275elementStart"](1,"tb-custom-action-pretty-resources-tabs",8),a["\u0275\u0275listener"]("actionUpdated",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onActionUpdated(!!e)}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("hasCustomFunction",!0)("action",i.action)}}var S=function(){return["$event","widgetContext","entityId","entityName","htmlTemplate","additionalParams","entityLabel"]},E=function(){return[]};function I(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",9),a["\u0275\u0275elementStart"](1,"div",10,11),a["\u0275\u0275elementStart"](3,"tb-custom-action-pretty-resources-tabs",8),a["\u0275\u0275listener"]("actionUpdated",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onActionUpdated(!!e)}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"div",12,13),a["\u0275\u0275elementStart"](6,"tb-js-func",14),a["\u0275\u0275listener"]("ngModelChange",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().action.customFunction=e})("ngModelChange",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onActionUpdated()}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("hasCustomFunction",!1)("action",i.action),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngModel",i.action.customFunction)("fillHeight",!0)("functionArgs",a["\u0275\u0275pureFunction0"](7,S))("validationArgs",a["\u0275\u0275pureFunction0"](8,E))("editorCompleter",i.customPrettyActionEditorCompleter)}}var O=function(e){return{"tb-fullscreen-editor":e}},T=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n.fullscreen=!1,n.customPrettyActionEditorCompleter=l.b,n.propagateChange=function(e){},n}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){var e=this;Object(s.b)(this.leftPanelElmRef.changes,this.rightPanelElmRef.changes).subscribe(function(){e.leftPanelElmRef.length&&e.rightPanelElmRef.length&&e.initSplitLayout(e.leftPanelElmRef.first.nativeElement,e.rightPanelElmRef.first.nativeElement)})},t.prototype.initSplitLayout=function(e,t){Split([e,t],{sizes:[50,50],gutterSize:8,cursor:"col-resize"})},t.prototype.ngOnDestroy=function(){},t.prototype.registerOnChange=function(e){this.propagateChange=e},t.prototype.registerOnTouched=function(e){},t.prototype.setDisabledState=function(e){this.disabled=e},t.prototype.writeValue=function(e){this.action=e},t.prototype.onActionUpdated=function(e){void 0===e&&(e=!0),e?this.propagateChange(this.action):this.propagateChange(null)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](c.Store))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-custom-action-pretty-editor"]],viewQuery:function(e,t){if(1&e&&(a["\u0275\u0275viewQuery"](v,1),a["\u0275\u0275viewQuery"](C,1)),2&e){var n=void 0;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.leftPanelElmRef=n),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.rightPanelElmRef=n)}},inputs:{disabled:"disabled"},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)(function(){return t}),multi:!0}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:11,vars:14,consts:[["tb-fullscreen","",1,"tb-custom-action-pretty","mat-elevation-z1",3,"fullscreen"],["fxLayout","row","fxLayoutAlign","end center",1,"tb-action-expand-button",3,"ngClass"],["mat-button","","fxHide.lt-md","","matTooltipPosition","above",3,"matTooltip","click"],["translate","",4,"ngIf"],[1,"tb-custom-action-editor",3,"ngClass"],[4,"ngIf","ngIfElse"],["fullscreenEditor",""],["translate",""],[3,"hasCustomFunction","action","actionUpdated"],["fxLayout","row",1,"tb-fullscreen-panel","tb-layout-fill"],[1,"tb-split","tb-content"],["leftPanel",""],[1,"tb-split","tb-content","right-panel"],["rightPanel",""],[3,"ngModel","fillHeight","functionArgs","validationArgs","editorCompleter","ngModelChange"]],template:function(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"button",2),a["\u0275\u0275listener"]("click",function(){return t.fullscreen=!t.fullscreen}),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementStart"](4,"mat-icon"),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](6,x,2,0,"span",3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"div",4),a["\u0275\u0275template"](8,w,2,2,"div",5),a["\u0275\u0275template"](9,I,7,9,"ng-template",null,6,a["\u0275\u0275templateRefExtractor"]),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275reference"](10);a["\u0275\u0275property"]("fullscreen",t.fullscreen),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](10,O,t.fullscreen)),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](3,8,"widget.toggle-fullscreen")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.fullscreen?"fullscreen_exit":"fullscreen"),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.fullscreen),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](12,O,t.fullscreen)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!t.fullscreen)("ngIfElse",n)}},directives:[d.a,u.f,u.e,p.NgClass,m.b,f.MatButton,m.d,h.MatTooltip,g.MatIcon,p.NgIf,A.TranslateDirective,b.a,y.a,r.NgControlStatus,r.NgModel],pipes:[A.TranslatePipe],styles:[".tb-custom-action-pretty{box-sizing:border-box;position:relative;padding:8px;background-color:#fff}.tb-custom-action-pretty .tb-fullscreen-panel .tb-custom-action-editor-container{height:calc(100% - 40px)}.tb-custom-action-pretty .tb-fullscreen-panel .right-panel{padding-top:8px;padding-left:3px}.tb-custom-action-pretty .tb-fullscreen-panel tb-js-func .tb-js-func-panel{box-sizing:border-box}.tb-custom-action-pretty .tb-fullscreen-panel mat-tab-group .mat-tab-body-wrapper,.tb-custom-action-pretty .tb-fullscreen-panel mat-tab-group .mat-tab-body-wrapper mat-tab-body,.tb-custom-action-pretty .tb-fullscreen-panel mat-tab-group .mat-tab-body-wrapper mat-tab-body>div{height:100%}.tb-custom-action-pretty .tb-split{box-sizing:border-box;overflow-x:hidden;overflow-y:auto}.tb-custom-action-pretty .tb-content{border:1px solid silver}.tb-custom-action-pretty .gutter{background-color:#eee;background-repeat:no-repeat;background-position:50%}.tb-custom-action-pretty .gutter.gutter-horizontal{cursor:col-resize;background-image:url(vertical.5e6d1df402c3bc10ecc6.png)}.tb-custom-action-pretty .gutter.gutter-horizontal,.tb-custom-action-pretty .tb-split.tb-split-horizontal{float:left;height:100%}.tb-custom-action-pretty .tb-action-expand-button{position:absolute;right:14px;z-index:2}.tb-custom-action-pretty .tb-action-expand-button.tb-fullscreen-editor{position:relative;right:0}.tb-custom-action-pretty .tb-action-expand-button.tb-fullscreen-editor .mat-button .mat-icon{margin-right:5px}.tb-custom-action-pretty .tb-action-expand-button .mat-button{min-width:36px;padding:0}.tb-custom-action-pretty .tb-action-expand-button .mat-button .mat-icon{margin-right:0}.tb-custom-action-pretty .tb-custom-action-editor.tb-fullscreen-editor{height:100%}"],encapsulation:2}),t}(o.a);0,void 0},HUB6:function(e,t,n){"use strict";n.d(t,"a",function(){return S});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("U3y+"),l=n("YnEf"),c=n("cp0P"),d=n("gmuX"),u=n("l7P3"),p=n("tyNb"),m=n("3Pt+"),f=n("/t3+"),h=n("XiUz"),g=n("bTqV"),A=n("NFeN"),b=n("ofXK"),y=n("EdYI"),v=n("bv9b"),C=n("sYmb");function x(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",13)}function w(e,t){1&e&&a["\u0275\u0275element"](0,"div",14)}var S=function(e){function t(t,n,i,a,r,o,l){var c=e.call(this,t,n,o)||this;switch(c.store=t,c.router=n,c.data=i,c.dashboardService=a,c.errorStateMatcher=r,c.dialogRef=o,c.fb=l,c.submitted=!1,c.entityType=s.b,c.assignedCustomersIds=i.assignedCustomersIds||[],i.actionType){case"assign":c.titleText="dashboard.assign-to-customers",c.labelText="dashboard.assign-to-customers-text",c.actionName="action.assign";break;case"manage":c.titleText="dashboard.manage-assigned-customers",c.labelText="dashboard.assigned-customers",c.actionName="action.update";break;case"unassign":c.titleText="dashboard.unassign-from-customers",c.labelText="dashboard.unassign-from-customers-text",c.actionName="action.unassign"}return c}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){this.dashboardCustomersFormGroup=this.fb.group({assignedCustomerIds:[Object(i.h)(this.assignedCustomersIds)]})},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.cancel=function(){this.dialogRef.close(!1)},t.prototype.submit=function(){var e=this;this.submitted=!0;var t=this.dashboardCustomersFormGroup.get("assignedCustomerIds").value,n=[];this.data.dashboardIds.forEach(function(i){n.push(e.getManageDashboardCustomersTask(i,t))}),Object(c.a)(n).subscribe(function(){e.dialogRef.close(!0)})},t.prototype.getManageDashboardCustomersTask=function(e,t){switch(this.data.actionType){case"assign":return this.dashboardService.addDashboardCustomers(e,t);case"manage":return this.dashboardService.updateDashboardCustomers(e,t);case"unassign":return this.dashboardService.removeDashboardCustomers(e,t)}},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](u.Store),a["\u0275\u0275directiveInject"](p.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](m.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-manage-dashboard-customers-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:30,vars:30,consts:[[2,"width","600px",3,"formGroup","ngSubmit"],["fxLayout","row","color","accent"],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["formControlName","assignedCustomerIds",3,"required","entityType"],["mat-dialog-actions","","fxLayout","row"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-button","","mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.submit()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,x,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,w,1,0,"div",6),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275elementStart"](14,"fieldset",8),a["\u0275\u0275pipe"](15,"async"),a["\u0275\u0275elementStart"](16,"span"),a["\u0275\u0275text"](17),a["\u0275\u0275pipe"](18,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](19,"tb-entity-list",9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](20,"div",10),a["\u0275\u0275element"](21,"span",2),a["\u0275\u0275elementStart"](22,"button",11),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](23,"async"),a["\u0275\u0275text"](24),a["\u0275\u0275pipe"](25,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"button",12),a["\u0275\u0275pipe"](27,"async"),a["\u0275\u0275text"](28),a["\u0275\u0275pipe"](29,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.dashboardCustomersFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,12,t.titleText)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,14,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,16,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](15,18,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](18,20,t.labelText)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("required","manage"!==t.data.actionType)("entityType",t.entityType.CUSTOMER),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](23,22,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](25,24,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](27,26,t.isLoading$)||t.dashboardCustomersFormGroup.invalid||!t.dashboardCustomersFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](29,28,t.actionName)," "))},directives:[m["\u0275angular_packages_forms_forms_ba"],m.NgControlStatusGroup,m.FormGroupDirective,f.MatToolbar,h.f,h.b,g.MatButton,A.MatIcon,b.NgIf,o.MatDialogContent,y.a,m.NgControlStatus,m.FormControlName,m.RequiredValidator,o.MatDialogActions,v.MatProgressBar],pipes:[C.TranslatePipe,b.AsyncPipe],encapsulation:2}),t}(d.a);0,void 0},HX6g:function(e,t,n){"use strict";n.d(t,"a",function(){return E});var i=n("fXoL"),a=n("3Pt+"),r=n("LRne"),o=n("xw5a"),s=n("ct/f"),l=n("lJxs"),c=n("0IaG"),d=n("XiUz"),u=n("7EHt"),p=n("sYmb"),m=n("ofXK"),f=n("znSr"),h=n("f0Cb"),g=n("bTqV"),A=n("Qu3c"),b=n("kN7V"),y=n("NFeN");function v(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"label",18),i["\u0275\u0275text"](1,"filter.ignore-case"),i["\u0275\u0275elementEnd"]())}function C(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"label",19),i["\u0275\u0275text"](1,"filter.user-parameters"),i["\u0275\u0275elementEnd"]())}function x(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,n.complexOperationTranslations.get(n.operation)))}}function w(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",20),i["\u0275\u0275elementStart"](1,"div",21),i["\u0275\u0275template"](2,x,3,3,"span",22),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",23),i["\u0275\u0275elementStart"](4,"div",24),i["\u0275\u0275element"](5,"tb-filter-predicate",25),i["\u0275\u0275elementStart"](6,"button",26),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.index;return i["\u0275\u0275nextContext"]().removePredicate(e)}),i["\u0275\u0275pipe"](7,"translate"),i["\u0275\u0275elementStart"](8,"mat-icon"),i["\u0275\u0275text"](9,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,r=t.index,o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",r>0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("valueType",o.valueType)("displayUserParameters",o.displayUserParameters)("allowUserDynamicSource",o.allowUserDynamicSource)("onlyUserDynamicSource",o.onlyUserDynamicSource)("key",o.key)("formControl",a),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](7,9,"filter.remove-filter")),i["\u0275\u0275property"]("fxShow",!o.disabled)}}var S=function(e){return{disabled:e}},E=function(){function e(e,t){this.fb=e,this.dialog=t,this.operation=o.b.AND,this.displayUserParameters=!0,this.allowUserDynamicSource=!0,this.onlyUserDynamicSource=!1,this.valueTypeEnum=o.e,this.complexOperationTranslations=o.j,this.propagateChange=null,this.valueChangeSubscription=null}return e.prototype.ngOnInit=function(){this.filterListFormGroup=this.fb.group({}),this.filterListFormGroup.addControl("predicates",this.fb.array([]))},e.prototype.predicatesFormArray=function(){return this.filterListFormGroup.get("predicates")},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.filterListFormGroup.disable({emitEvent:!1}):this.filterListFormGroup.enable({emitEvent:!1})},e.prototype.validate=function(e){return this.filterListFormGroup.valid?null:{filterList:{valid:!1}}},e.prototype.writeValue=function(e){var t=this;this.valueChangeSubscription&&this.valueChangeSubscription.unsubscribe();var n=[];if(e)for(var i=0,r=e;i<r.length;i++){var o=r[i];n.push(this.fb.control(o,[a.Validators.required]))}this.filterListFormGroup.setControl("predicates",this.fb.array(n)),this.valueChangeSubscription=this.filterListFormGroup.valueChanges.subscribe(function(){t.updateModel()}),this.disabled?this.filterListFormGroup.disable({emitEvent:!1}):this.filterListFormGroup.enable({emitEvent:!1})},e.prototype.removePredicate=function(e){this.filterListFormGroup.get("predicates").removeAt(e)},e.prototype.addPredicate=function(e){var t=this,n=this.filterListFormGroup.get("predicates"),i=Object(o.l)(this.valueType,e);(e?this.openComplexFilterDialog(i):Object(r.a)(i)).subscribe(function(e){e&&n.push(t.fb.control(e,[a.Validators.required]))})},e.prototype.openComplexFilterDialog=function(e){return this.dialog.open(s.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{complexPredicate:e.keyFilterPredicate,readonly:this.disabled,valueType:this.valueType,key:this.key,isAdd:!0,displayUserParameters:this.displayUserParameters,allowUserDynamicSource:this.allowUserDynamicSource,onlyUserDynamicSource:this.onlyUserDynamicSource}}).afterClosed().pipe(Object(l.a)(function(t){return t?(e.keyFilterPredicate=t,e):null}))},e.prototype.updateModel=function(){var e=this.filterListFormGroup.getRawValue().predicates;e.length?this.propagateChange(e):this.propagateChange(null)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.FormBuilder),i["\u0275\u0275directiveInject"](c.MatDialog))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-filter-predicate-list"]],inputs:{disabled:"disabled",valueType:"valueType",key:"key",operation:"operation",displayUserParameters:"displayUserParameters",allowUserDynamicSource:"allowUserDynamicSource",onlyUserDynamicSource:"onlyUserDynamicSource"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:33,vars:24,consts:[["fxLayout","column",3,"formGroup"],[3,"expanded"],["translate",""],["fxLayout","row"],["fxFlex","8"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxFlex","92"],["fxFlex","","fxLayout","row","fxLayoutGap","8px"],["fxFlex","30","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px"],["fxFlex","","translate","",1,"tb-title","no-padding"],["translate","","class","tb-title no-padding","style","min-width: 70px;",4,"ngIf"],["fxFlex","70","translate","",1,"tb-title","no-padding"],["translate","","class","tb-title no-padding","style","width: 60px;",4,"ngIf"],[2,"min-width","40px",3,"fxShow"],[1,"predicate-list"],["fxLayout","row","fxLayoutAlign","start center","style","height: 45px;","formArrayName","predicates",4,"ngFor","ngForOf"],["fxLayoutAlign","center center","translate","",1,"no-data-found",3,"fxShow","ngClass"],["fxLayout","row","fxLayoutGap","8px",2,"margin-top","16px"],["mat-button","","mat-raised-button","","color","accent","type","button","matTooltipPosition","above",3,"fxShow","matTooltip","click"],["translate","",1,"tb-title","no-padding",2,"min-width","70px"],["translate","",1,"tb-title","no-padding",2,"width","60px"],["fxLayout","row","fxLayoutAlign","start center","formArrayName","predicates",2,"height","45px"],["fxFlex","8","fxLayout","row","fxLayoutAlign","center",1,"filters-operation"],[4,"ngIf"],["fxLayout","column","fxFlex","92"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxFlex",""],["fxFlex","",3,"valueType","displayUserParameters","allowUserDynamicSource","onlyUserDynamicSource","key","formControl"],["mat-icon-button","","color","accent","type","button","matTooltipPosition","above",3,"fxShow","matTooltip","click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"section",0),i["\u0275\u0275elementStart"](1,"mat-expansion-panel",1),i["\u0275\u0275elementStart"](2,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](3,"mat-panel-title"),i["\u0275\u0275elementStart"](4,"div",2),i["\u0275\u0275text"](5,"filter.filters"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",3),i["\u0275\u0275element"](7,"span",4),i["\u0275\u0275elementStart"](8,"div",5),i["\u0275\u0275elementStart"](9,"div",6),i["\u0275\u0275elementStart"](10,"div",7),i["\u0275\u0275elementStart"](11,"label",8),i["\u0275\u0275text"](12,"filter.operation.operation"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](13,v,2,0,"label",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"label",10),i["\u0275\u0275text"](15,"filter.value"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](16,C,2,0,"label",11),i["\u0275\u0275elementStart"](17,"span",12),i["\u0275\u0275text"](18,"\xa0"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](19,"mat-divider"),i["\u0275\u0275elementStart"](20,"div",13),i["\u0275\u0275template"](21,w,10,11,"div",14),i["\u0275\u0275elementStart"](22,"span",15),i["\u0275\u0275text"](23,"filter.no-filters"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](24,"div",16),i["\u0275\u0275elementStart"](25,"button",17),i["\u0275\u0275listener"]("click",function(){return t.addPredicate(!1)}),i["\u0275\u0275pipe"](26,"translate"),i["\u0275\u0275text"](27),i["\u0275\u0275pipe"](28,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](29,"button",17),i["\u0275\u0275listener"]("click",function(){return t.addPredicate(!0)}),i["\u0275\u0275pipe"](30,"translate"),i["\u0275\u0275text"](31),i["\u0275\u0275pipe"](32,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.filterListFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("expanded",!0),i["\u0275\u0275advance"](12),i["\u0275\u0275property"]("ngIf",t.valueType===t.valueTypeEnum.STRING),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",t.displayUserParameters),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow",!t.disabled),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngForOf",t.predicatesFormArray().controls),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow",!t.predicatesFormArray().length)("ngClass",i["\u0275\u0275pureFunction1"](22,S,t.disabled)),i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](26,14,"filter.add-filter")),i["\u0275\u0275property"]("fxShow",!t.disabled),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](28,16,"action.add")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](30,18,"filter.add-complex-filter")),i["\u0275\u0275property"]("fxShow",!t.disabled),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](32,20,"filter.add-complex")," "))},directives:[d.f,a.NgControlStatusGroup,a.FormGroupDirective,u.MatExpansionPanel,u.MatExpansionPanelHeader,u.MatExpansionPanelTitle,p.TranslateDirective,d.b,d.e,d.g,m.NgIf,f.d,h.MatDivider,m.NgForOf,m.NgClass,f.b,g.MatButton,A.MatTooltip,a.FormArrayName,b.a,a.NgControlStatus,a.FormControlDirective,y.MatIcon],pipes:[p.TranslatePipe],styles:["[_nghost-%COMP%]   .predicate-list[_ngcontent-%COMP%]{overflow:auto;max-height:350px}[_nghost-%COMP%]   .predicate-list[_ngcontent-%COMP%]   .no-data-found[_ngcontent-%COMP%]{height:50px}[_nghost-%COMP%]   .filters-operation[_ngcontent-%COMP%]{margin-top:-40px;color:#666;font-weight:500}"]}),e}();0,void 0},Hl1W:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return r}),n.d(t,"d",function(){return o});var i,a=8;!function(e){e.google="google-map",e.openstreet="openstreet-map",e.here="here",e.image="image-map",e.tencent="tencent-map"}(i||(i={}));var r={xPosKeyName:"xPos",yPosKeyName:"yPos",markerOffsetX:.5,markerOffsetY:1,latKeyName:"latitude",lngKeyName:"longitude",polygonKeyName:"coordinates",showLabel:!1,label:"${entityName}",showTooltip:!1,useDefaultCenterPosition:!1,showTooltipAction:"click",autocloseTooltip:!1,showPolygon:!1,labelColor:"#000000",color:"#FE7569",polygonColor:"#0000ff",polygonStrokeColor:"#fe0001",polygonOpacity:.5,polygonStrokeOpacity:1,polygonStrokeWeight:1,useLabelFunction:!1,markerImages:[],strokeWeight:2,strokeOpacity:1,initCallback:function(){},disableScrollZooming:!1,minZoomLevel:16,credentials:"",markerClusteringSetting:null,draggableMarker:!1,editablePolygon:!1,fitMapBounds:!0,mapPageSize:16384},o=["HERE.normalDay","HERE.normalNight","HERE.hybridDay","HERE.terrainDay"]},HvOk:function(e,t,n){"use strict";n.d(t,"a",function(){return P});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("0lYY"),d=n("OiFK"),u=n("xKAQ"),p=n("S+vS"),m=n("//Q6"),f=n("kHY0"),h=n("l7P3"),g=n("tyNb"),A=n("sYmb"),b=n("/t3+"),y=n("XiUz"),v=n("bTqV"),C=n("NFeN"),x=n("ofXK"),w=n("f0Cb"),S=n("znSr"),E=n("Qu3c"),I=n("bv9b"),O=n("kmnG"),T=n("1jcm");function F(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",20)}function B(e,t){1&e&&a["\u0275\u0275element"](0,"div",21)}function M(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",22),a["\u0275\u0275elementStart"](1,"span",9),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"div",23),a["\u0275\u0275elementStart"](4,"mat-label",2),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"section",24),a["\u0275\u0275element"](7,"mat-slide-toggle",25),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"button",26),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](n);var e=t.index;return a["\u0275\u0275nextContext"]().editFilter(e)}),a["\u0275\u0275pipe"](9,"async"),a["\u0275\u0275pipe"](10,"translate"),a["\u0275\u0275elementStart"](11,"mat-icon"),a["\u0275\u0275text"](12,"edit"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](13,"button",26),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](n);var e=t.index;return a["\u0275\u0275nextContext"]().removeFilter(e)}),a["\u0275\u0275pipe"](14,"async"),a["\u0275\u0275pipe"](15,"translate"),a["\u0275\u0275elementStart"](16,"mat-icon"),a["\u0275\u0275text"](17,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=t.index,o=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"]("",r+1,"."),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](i.get("filter").value),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("formControl",i.get("editable")),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](10,9,"filter.edit")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](9,7,o.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](15,13,"filter.remove-filter")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](14,11,o.isLoading$))}}var P=function(e){function t(t,n,i,a,r,o,s,l,d,u){var p,f=e.call(this,t,n,r)||this;if(f.store=t,f.router=n,f.data=i,f.errorStateMatcher=a,f.dialogRef=r,f.fb=o,f.utils=s,f.translate=l,f.dialogs=d,f.dialog=u,f.filterToWidgetsMap={},f.submitted=!1,f.title=i.customTitle?i.customTitle:"filter.filters",f.disableAdd=f.data.disableAdd,i.widgets)if(f.data.isSingleWidget&&1===f.data.widgets.length){var h=f.data.widgets[0];p=[h.config.title];for(var g=0,A=Object.keys(f.data.filters);g<A.length;g++){var b=A[g];f.filterToWidgetsMap[b]=p}}else f.data.widgets.forEach(function(e){f.utils.validateDatasources(e.config.datasources).forEach(function(t){t.type===c.a.entity&&t.filterId&&((p=f.filterToWidgetsMap[t.filterId])||(p=[],f.filterToWidgetsMap[t.filterId]=p),p.push(e.config.title))})});for(var y=[],v=0,C=Object.keys(f.data.filters);v<C.length;v++){b=C[v];var x=f.data.filters[b];Object(m.B)(x.editable)&&(x.editable=!0),y.push(f.createFilterFormControl(b,x))}return f.filtersFormGroup=f.fb.group({filters:f.fb.array(y)}),f}return Object(i.d)(t,e),t.prototype.createFilterFormControl=function(e,t){return this.fb.group({id:[e],filter:[t?t.filter:null,[s.Validators.required]],keyFilters:[t?t.keyFilters:[],[s.Validators.required]],editable:[!t||t.editable]})},t.prototype.filtersFormArray=function(){return this.filtersFormGroup.get("filters")},t.prototype.ngOnInit=function(){},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.removeFilter=function(e){var t=this.filtersFormGroup.get("filters").value[e],n=this.filterToWidgetsMap[t.id];if(n){for(var i="",a=0,r=n;a<r.length;a++){i+="<br/>'"+r[a]+"'"}var o=this.translate.instant("filter.unable-delete-filter-text",{filter:t.filter,widgetsList:i});this.dialogs.alert(this.translate.instant("filter.unable-delete-filter-title"),o,this.translate.instant("action.close"),!0)}else this.filtersFormGroup.get("filters").removeAt(e),this.filtersFormGroup.markAsDirty()},t.prototype.addFilter=function(){this.openFilterDialog(-1)},t.prototype.editFilter=function(e){this.openFilterDialog(e)},t.prototype.openFilterDialog=function(e){var t,n=this,i=-1===e,a=this.filtersFormGroup.get("filters").value;i||(t=a[e]),this.dialog.open(f.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{isAdd:i,filters:a,filter:i?null:Object(m.e)(t)}}).afterClosed().subscribe(function(t){if(t){if(i)n.filtersFormGroup.get("filters").push(n.createFilterFormControl(t.id,t));else{var a=n.filtersFormGroup.get("filters").at(e);a.get("filter").patchValue(t.filter),a.get("editable").patchValue(t.editable),a.get("keyFilters").patchValue(t.keyFilters)}n.filtersFormGroup.markAsDirty()}})},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.save=function(){this.submitted=!0;for(var e,t={},n={},i=!0,a=0,r=this.filtersFormGroup.get("filters").value;a<r.length;a++){var o=r[a],s=o.id,l=o.filter,c=o.keyFilters,d=o.editable;if(n[l]){i=!1,e=this.translate.instant("filter.duplicate-filter-error",{filter:l});break}if(!c||!c.length){i=!1,e=this.translate.instant("filter.missing-key-filters-error",{filter:l});break}n[l]=l,t[s]={id:s,filter:l,keyFilters:c,editable:d}}i?this.dialogRef.close(t):this.store.dispatch(new u.b({message:e,type:"error"}))},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](h.Store),a["\u0275\u0275directiveInject"](g.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder),a["\u0275\u0275directiveInject"](d.a),a["\u0275\u0275directiveInject"](A.TranslateService),a["\u0275\u0275directiveInject"](p.a),a["\u0275\u0275directiveInject"](o.MatDialog))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-filters-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:41,vars:36,consts:[[2,"width","700px",3,"formGroup","ngSubmit"],["color","accent"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],["fxLayout","row","fxLayoutAlign","start center",1,"tb-filters-header"],["fxFlex","5"],["fxFlex","95","fxLayout","row","fxLayoutAlign","start center"],["translate","","fxFlex","",1,"tb-header-label"],["translate","","fxFlex","120px","fxLayout","column","fxLayoutAlign","center center",1,"tb-header-label",2,"padding-left","30px"],[2,"min-width","80px"],[3,"disabled"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center","formArrayName","filters",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-raised-button","","color","accent","type","button","matTooltipPosition","above",3,"fxShow","disabled","matTooltip","click"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center","formArrayName","filters"],["fxFlex","95","fxLayout","row","fxLayoutAlign","start center",1,"mat-elevation-z4","tb-filter"],["fxFlex","120px","fxLayout","column","fxLayoutAlign","center center",1,"tb-editable-switch",2,"padding-left","10px"],[1,"editable-switch",3,"formControl"],["mat-icon-button","","color","accent","type","button","matTooltipPosition","above",2,"min-width","40px",3,"disabled","matTooltip","click"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,F,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,B,1,0,"div",6),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275elementStart"](14,"div",8),a["\u0275\u0275element"](15,"span",9),a["\u0275\u0275elementStart"](16,"div",10),a["\u0275\u0275elementStart"](17,"div",11),a["\u0275\u0275text"](18,"filter.filter"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"div",12),a["\u0275\u0275text"](20,"filter.editable"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](21,"div",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"fieldset",14),a["\u0275\u0275pipe"](23,"async"),a["\u0275\u0275element"](24,"mat-divider"),a["\u0275\u0275template"](25,M,18,15,"div",15),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"div",16),a["\u0275\u0275elementStart"](27,"button",17),a["\u0275\u0275listener"]("click",function(){return t.addFilter()}),a["\u0275\u0275pipe"](28,"async"),a["\u0275\u0275pipe"](29,"translate"),a["\u0275\u0275text"](30),a["\u0275\u0275pipe"](31,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](32,"span",2),a["\u0275\u0275elementStart"](33,"button",18),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](34,"async"),a["\u0275\u0275text"](35),a["\u0275\u0275pipe"](36,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](37,"button",19),a["\u0275\u0275pipe"](38,"async"),a["\u0275\u0275text"](39),a["\u0275\u0275pipe"](40,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.filtersFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,14,t.title)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,16,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,18,t.isLoading$)),a["\u0275\u0275advance"](11),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](23,20,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",t.filtersFormArray().controls),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](29,24,"filter.add")),a["\u0275\u0275property"]("fxShow",!t.disableAdd)("disabled",a["\u0275\u0275pipeBind1"](28,22,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](31,26,"filter.add")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](34,28,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](36,30,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](38,32,t.isLoading$)||t.filtersFormGroup.invalid||!t.filtersFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](40,34,"action.save")," "))},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,b.MatToolbar,y.b,v.MatButton,C.MatIcon,x.NgIf,o.MatDialogContent,y.f,y.e,A.TranslateDirective,w.MatDivider,x.NgForOf,o.MatDialogActions,S.d,E.MatTooltip,I.MatProgressBar,s.FormArrayName,O.MatLabel,T.MatSlideToggle,s.NgControlStatus,s.FormControlDirective],pipes:[A.TranslatePipe,x.AsyncPipe],styles:["[_nghost-%COMP%]   .tb-filters-header[_ngcontent-%COMP%]{min-height:40px;padding:0 11px;margin:5px}[_nghost-%COMP%]   .tb-filters-header[_ngcontent-%COMP%]   .tb-header-label[_ngcontent-%COMP%]{font-size:14px;color:rgba(0,0,0,.57)}[_nghost-%COMP%]   mat-divider[_ngcontent-%COMP%]{margin:-1px -24px}[_nghost-%COMP%]   .tb-filter[_ngcontent-%COMP%]{padding:0 0 0 10px;margin:5px}[_nghost-%COMP%]   .tb-filter[_ngcontent-%COMP%]   .tb-editable-switch[_ngcontent-%COMP%]{padding-left:10px}[_nghost-%COMP%]   .tb-filter[_ngcontent-%COMP%]   .tb-editable-switch[_ngcontent-%COMP%]   .editable-switch[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]     .mat-dialog-content{padding-top:0!important;padding-bottom:0!important}"]}),t}(l.a);0,void 0},Hxax:function(e,t,n){"use strict";n.d(t,"c",function(){return f}),n.d(t,"b",function(){return h}),n.d(t,"a",function(){return g});var i=n("mrSG"),a=n("0lYY"),r=n("2Vo4"),o=n("jtHE"),s=n("LRne"),l=n("Duvn"),c=n("JIr8"),d=n("lJxs"),u=n("05l1"),p=n("x+ZX"),m=n("//Q6");function f(e){var t=Object(m.e)(e);return delete t.actionSourceId,delete t.actionSourceName,delete t.typeName,t}function h(e){var t;return(t=!e||Object(m.B)(e.customFunction)&&Object(m.B)(e.customHtml)&&Object(m.B)(e.customCss)?{customHtml:'\x3c!--=======================================================================--\x3e\r\n\x3c!--=====  There are two example templates: for edit and add entity   =====--\x3e\r\n\x3c!--=======================================================================--\x3e\r\n\x3c!--========================  Edit entity example  ========================--\x3e\r\n\x3c!--=======================================================================--\x3e\r\n\x3c!-- --\x3e\r\n\x3c!--<form #editEntityForm="ngForm" [formGroup]="editEntityFormGroup"--\x3e\r\n\x3c!--      (ngSubmit)="save()"  class="edit-entity-form">--\x3e\r\n\x3c!--    <mat-toolbar fxLayout="row" color="accent">--\x3e\r\n\x3c!--        <h2>Edit {{entityType.toLowerCase()}} {{entityName}}</h2>--\x3e\r\n\x3c!--        <span fxFlex></span>--\x3e\r\n\x3c!--        <button mat-icon-button (click)="cancel()" type="button">--\x3e\r\n\x3c!--            <mat-icon class="material-icons">close</mat-icon>--\x3e\r\n\x3c!--        </button>--\x3e\r\n\x3c!--    </mat-toolbar>--\x3e\r\n\x3c!--    <mat-progress-bar color="warn" mode="indeterminate" *ngIf="isLoading$ | async">--\x3e\r\n\x3c!--    </mat-progress-bar>--\x3e\r\n\x3c!--    <div style="height: 4px;" *ngIf="!(isLoading$ | async)"></div>--\x3e\r\n\x3c!--    <div mat-dialog-content fxLayout="column">--\x3e\r\n\x3c!--        <div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0">--\x3e\r\n\x3c!--            <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                <mat-label>Entity Name</mat-label>--\x3e\r\n\x3c!--                <input matInput formControlName="entityName" required readonly="">--\x3e\r\n\x3c!--            </mat-form-field>--\x3e\r\n\x3c!--            <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                <mat-label>Entity Label</mat-label>--\x3e\r\n\x3c!--                <input matInput formControlName="entityLabel">--\x3e\r\n\x3c!--            </mat-form-field>--\x3e\r\n\x3c!--        </div>--\x3e\r\n\x3c!--        <div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0">--\x3e\r\n\x3c!--            <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                <mat-label>Entity Type</mat-label>--\x3e\r\n\x3c!--                <input matInput formControlName="entityType" readonly>--\x3e\r\n\x3c!--            </mat-form-field>--\x3e\r\n\x3c!--            <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                <mat-label>Type</mat-label>--\x3e\r\n\x3c!--                <input matInput formControlName="type" readonly>--\x3e\r\n\x3c!--            </mat-form-field>--\x3e\r\n\x3c!--        </div>--\x3e\r\n\x3c!--        <div formGroupName="attributes" fxLayout="column">--\x3e\r\n\x3c!--            <div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0">--\x3e\r\n\x3c!--                <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                    <mat-label>Latitude</mat-label>--\x3e\r\n\x3c!--                    <input type="number" step="any" matInput formControlName="latitude">--\x3e\r\n\x3c!--                </mat-form-field>--\x3e\r\n\x3c!--                <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                    <mat-label>Longitude</mat-label>--\x3e\r\n\x3c!--                    <input type="number" step="any" matInput formControlName="longitude">--\x3e\r\n\x3c!--                </mat-form-field>--\x3e\r\n\x3c!--            </div>--\x3e\r\n\x3c!--            <div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0">--\x3e\r\n\x3c!--                <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                    <mat-label>Address</mat-label>--\x3e\r\n\x3c!--                    <input matInput formControlName="address">--\x3e\r\n\x3c!--                </mat-form-field>--\x3e\r\n\x3c!--                <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                    <mat-label>Owner</mat-label>--\x3e\r\n\x3c!--                    <input matInput formControlName="owner">--\x3e\r\n\x3c!--                </mat-form-field>--\x3e\r\n\x3c!--            </div>--\x3e\r\n\x3c!--            <div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0">--\x3e\r\n\x3c!--                <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                    <mat-label>Integer Value</mat-label>--\x3e\r\n\x3c!--                    <input type="number" step="1" matInput formControlName="number">--\x3e\r\n\x3c!--                    <mat-error *ngIf="editEntityFormGroup.get(\'attributes.number\').hasError(\'pattern\')">--\x3e\r\n\x3c!--                        Invalid integer value.--\x3e\r\n\x3c!--                    </mat-error>--\x3e\r\n\x3c!--                </mat-form-field>--\x3e\r\n\x3c!--                <div class="boolean-value-input" fxLayout="column" fxLayoutAlign="center start" fxFlex>--\x3e\r\n\x3c!--                    <label class="checkbox-label">Boolean Value</label>--\x3e\r\n\x3c!--                    <mat-checkbox formControlName="booleanValue" style="margin-bottom: 40px;">--\x3e\r\n\x3c!--                        {{ (editEntityFormGroup.get(\'attributes.booleanValue\').value ? "value.true" : "value.false") | translate }}--\x3e\r\n\x3c!--                    </mat-checkbox>--\x3e\r\n\x3c!--                </div>--\x3e\r\n\x3c!--            </div>--\x3e\r\n\x3c!--        </div>--\x3e\r\n\x3c!--        <div class="relations-list old-relations">--\x3e\r\n\x3c!--            <div class="mat-body-1" style="padding-bottom: 10px; color: rgba(0,0,0,0.57);">Relations</div>--\x3e\r\n\x3c!--            <div class="body" [fxShow]="oldRelations().length">--\x3e\r\n\x3c!--                <div class="row" fxLayout="row" fxLayoutAlign="start center" formArrayName="oldRelations" --\x3e\r\n\x3c!--                     *ngFor="let relation of oldRelations().controls; let i = index;">--\x3e\r\n\x3c!--                    <div [formGroupName]="i" class="mat-elevation-z2" fxFlex fxLayout="row" style="padding: 5px 0 5px 5px;">--\x3e\r\n\x3c!--                        <div fxFlex fxLayout="column">--\x3e\r\n\x3c!--                            <div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0">--\x3e\r\n\x3c!--                                <mat-form-field class="mat-block" style="min-width: 100px;">--\x3e\r\n\x3c!--                                    <mat-label>Direction</mat-label>--\x3e\r\n\x3c!--                                    <mat-select formControlName="direction" name="direction">--\x3e\r\n\x3c!--                                        <mat-option *ngFor="let direction of entitySearchDirection | keyvalue" [value]="direction.value">--\x3e\r\n\x3c!--                                            {{ ("relation.search-direction." + direction.value) | translate}}--\x3e\r\n\x3c!--                                        </mat-option>--\x3e\r\n\x3c!--                                    </mat-select>--\x3e\r\n\x3c!--                                    <mat-error *ngIf="relation.get(\'direction\').hasError(\'required\')">--\x3e\r\n\x3c!--                                        Relation direction is required.--\x3e\r\n\x3c!--                                    </mat-error>--\x3e\r\n\x3c!--                                </mat-form-field>--\x3e\r\n\x3c!--                                <tb-relation-type-autocomplete--\x3e\r\n\x3c!--                                        fxFlex class="mat-block"--\x3e\r\n\x3c!--                                        formControlName="relationType"--\x3e\r\n\x3c!--                                        required="true">--\x3e\r\n\x3c!--                                </tb-relation-type-autocomplete>--\x3e\r\n\x3c!--                            </div>--\x3e\r\n\x3c!--                            <div fxLayout="row" fxLayout.xs="column">--\x3e\r\n\x3c!--                                <tb-entity-select--\x3e\r\n\x3c!--                                        fxFlex class="mat-block"--\x3e\r\n\x3c!--                                        required="true"--\x3e\r\n\x3c!--                                        formControlName="relatedEntity">--\x3e\r\n\x3c!--                                </tb-entity-select>--\x3e\r\n\x3c!--                            </div>--\x3e\r\n\x3c!--                        </div>--\x3e\r\n\x3c!--                        <div fxLayout="column" fxLayoutAlign="center center">--\x3e\r\n\x3c!--                            <button mat-icon-button color="accent"--\x3e\r\n\x3c!--                                    aria-label="Remove"--\x3e\r\n\x3c!--                                    type="button"--\x3e\r\n\x3c!--                                    (click)="removeOldRelation(i)"--\x3e\r\n\x3c!--                                    matTooltip="Remove relation"--\x3e\r\n\x3c!--                                    matTooltipPosition="above">--\x3e\r\n\x3c!--                                <mat-icon>close</mat-icon>--\x3e\r\n\x3c!--                            </button>--\x3e\r\n\x3c!--                        </div>--\x3e\r\n\x3c!--                    </div>--\x3e\r\n\x3c!--                </div>--\x3e\r\n\x3c!--            </div>--\x3e\r\n\x3c!--        </div>--\x3e\r\n\x3c!--        <div class="relations-list">--\x3e\r\n\x3c!--            <div class="mat-body-1" style="padding-bottom: 10px; color: rgba(0,0,0,0.57);">New Relations</div>--\x3e\r\n\x3c!--            <div class="body" [fxShow]="relations().length">--\x3e\r\n\x3c!--                <div class="row" fxLayout="row" fxLayoutAlign="start center" formArrayName="relations" *ngFor="let relation of relations().controls; let i = index;">--\x3e\r\n\x3c!--                    <div [formGroupName]="i" class="mat-elevation-z2" fxFlex fxLayout="row" style="padding: 5px 0 5px 5px;">--\x3e\r\n\x3c!--                        <div fxFlex fxLayout="column">--\x3e\r\n\x3c!--                            <div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0">--\x3e\r\n\x3c!--                                <mat-form-field class="mat-block" style="min-width: 100px;">--\x3e\r\n\x3c!--                                    <mat-label>Direction</mat-label>--\x3e\r\n\x3c!--                                    <mat-select formControlName="direction" name="direction">--\x3e\r\n\x3c!--                                        <mat-option *ngFor="let direction of entitySearchDirection | keyvalue" [value]="direction.value">--\x3e\r\n\x3c!--                                            {{ ("relation.search-direction." + direction.value) | translate}}--\x3e\r\n\x3c!--                                        </mat-option>--\x3e\r\n\x3c!--                                    </mat-select>--\x3e\r\n\x3c!--                                    <mat-error *ngIf="relation.get(\'direction\').hasError(\'required\')">--\x3e\r\n\x3c!--                                        Relation direction is required.--\x3e\r\n\x3c!--                                    </mat-error>--\x3e\r\n\x3c!--                                </mat-form-field>--\x3e\r\n\x3c!--                                <tb-relation-type-autocomplete--\x3e\r\n\x3c!--                                        fxFlex class="mat-block"--\x3e\r\n\x3c!--                                        formControlName="relationType"--\x3e\r\n\x3c!--                                        [required]="true">--\x3e\r\n\x3c!--                                </tb-relation-type-autocomplete>--\x3e\r\n\x3c!--                            </div>--\x3e\r\n\x3c!--                            <div fxLayout="row" fxLayout.xs="column">--\x3e\r\n\x3c!--                                <tb-entity-select--\x3e\r\n\x3c!--                                        fxFlex class="mat-block"--\x3e\r\n\x3c!--                                        [required]="true"--\x3e\r\n\x3c!--                                        formControlName="relatedEntity">--\x3e\r\n\x3c!--                                </tb-entity-select>--\x3e\r\n\x3c!--                            </div>--\x3e\r\n\x3c!--                        </div>--\x3e\r\n\x3c!--                        <div fxLayout="column" fxLayoutAlign="center center">--\x3e\r\n\x3c!--                            <button mat-icon-button color="accent"--\x3e\r\n\x3c!--                                    aria-label="Remove"--\x3e\r\n\x3c!--                                    type="button"--\x3e\r\n\x3c!--                                    (click)="removeRelation(i)"--\x3e\r\n\x3c!--                                    matTooltip="Remove relation"--\x3e\r\n\x3c!--                                    matTooltipPosition="above">--\x3e\r\n\x3c!--                                <mat-icon>close</mat-icon>--\x3e\r\n\x3c!--                            </button>--\x3e\r\n\x3c!--                        </div>--\x3e\r\n\x3c!--                    </div>--\x3e\r\n\x3c!--                </div>--\x3e\r\n\x3c!--            </div>--\x3e\r\n\x3c!--            <div>--\x3e\r\n\x3c!--                <button mat-raised-button color="accent"--\x3e\r\n\x3c!--                        type="button"--\x3e\r\n\x3c!--                        (click)="addRelation()"--\x3e\r\n\x3c!--                        matTooltip="Add Relation"--\x3e\r\n\x3c!--                        matTooltipPosition="above">--\x3e\r\n\x3c!--                    Add--\x3e\r\n\x3c!--                </button>--\x3e\r\n\x3c!--            </div>--\x3e\r\n\x3c!--        </div>--\x3e\r\n\x3c!--    </div>--\x3e\r\n\x3c!--    <div mat-dialog-actions fxLayout="row" fxLayoutAlign="end center">--\x3e\r\n\x3c!--        <button mat-button color="accent"--\x3e\r\n\x3c!--                type="button"--\x3e\r\n\x3c!--                [disabled]="(isLoading$ | async)"--\x3e\r\n\x3c!--                (click)="cancel()" cdkFocusInitial>--\x3e\r\n\x3c!--            Cancel--\x3e\r\n\x3c!--        </button>--\x3e\r\n\x3c!--        <button mat-button mat-raised-button color="accent"--\x3e\r\n\x3c!--                type="submit"--\x3e\r\n\x3c!--                [disabled]="(isLoading$ | async) || editEntityForm.invalid || !editEntityForm.dirty">--\x3e\r\n\x3c!--            Save--\x3e\r\n\x3c!--        </button>--\x3e\r\n\x3c!--    </div>--\x3e\r\n\x3c!--</form>--\x3e\r\n\x3c!----\x3e\r\n\x3c!--========================================================================--\x3e\r\n\x3c!--=========================  Add entity example  =========================--\x3e\r\n\x3c!--========================================================================--\x3e\r\n\x3c!----\x3e\r\n\x3c!--<form #addEntityForm="ngForm" [formGroup]="addEntityFormGroup"--\x3e\r\n\x3c!--      (ngSubmit)="save()" class="add-entity-form">--\x3e\r\n\x3c!--    <mat-toolbar fxLayout="row" color="accent">--\x3e\r\n\x3c!--        <h2>Add entity</h2>--\x3e\r\n\x3c!--        <span fxFlex></span>--\x3e\r\n\x3c!--        <button mat-icon-button (click)="cancel()" type="button">--\x3e\r\n\x3c!--            <mat-icon class="material-icons">close</mat-icon>--\x3e\r\n\x3c!--        </button>--\x3e\r\n\x3c!--    </mat-toolbar>--\x3e\r\n\x3c!--    <mat-progress-bar color="warn" mode="indeterminate" *ngIf="isLoading$ | async">--\x3e\r\n\x3c!--    </mat-progress-bar>--\x3e\r\n\x3c!--    <div style="height: 4px;" *ngIf="!(isLoading$ | async)"></div>--\x3e\r\n\x3c!--    <div mat-dialog-content fxLayout="column">--\x3e\r\n\x3c!--        <div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0">--\x3e\r\n\x3c!--            <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                <mat-label>Entity Name</mat-label>--\x3e\r\n\x3c!--                <input matInput formControlName="entityName" required>--\x3e\r\n\x3c!--                <mat-error *ngIf="addEntityFormGroup.get(\'entityName\').hasError(\'required\')">--\x3e\r\n\x3c!--                    Entity name is required.--\x3e\r\n\x3c!--                </mat-error>--\x3e\r\n\x3c!--            </mat-form-field>--\x3e\r\n\x3c!--            <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                <mat-label>Entity Label</mat-label>--\x3e\r\n\x3c!--                <input matInput formControlName="entityLabel" >--\x3e\r\n\x3c!--            </mat-form-field>--\x3e\r\n\x3c!--        </div>--\x3e\r\n\x3c!--        <div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0">--\x3e\r\n\x3c!--            <tb-entity-type-select--\x3e\r\n\x3c!--                    class="mat-block"--\x3e\r\n\x3c!--                    formControlName="entityType"--\x3e\r\n\x3c!--                    [showLabel]="true"--\x3e\r\n\x3c!--                    [allowedEntityTypes]="allowedEntityTypes"--\x3e\r\n\x3c!--            ></tb-entity-type-select>--\x3e\r\n\x3c!--            <tb-entity-subtype-autocomplete--\x3e\r\n\x3c!--                    fxFlex *ngIf="addEntityFormGroup.get(\'entityType\').value == \'ASSET\'"--\x3e\r\n\x3c!--                    class="mat-block"--\x3e\r\n\x3c!--                    formControlName="type"--\x3e\r\n\x3c!--                    [required]="true"--\x3e\r\n\x3c!--                    [entityType]="\'ASSET\'"--\x3e\r\n\x3c!--            ></tb-entity-subtype-autocomplete>--\x3e\r\n\x3c!--            <tb-entity-subtype-autocomplete--\x3e\r\n\x3c!--                    fxFlex *ngIf="addEntityFormGroup.get(\'entityType\').value != \'ASSET\'"--\x3e\r\n\x3c!--                    class="mat-block"--\x3e\r\n\x3c!--                    formControlName="type"--\x3e\r\n\x3c!--                    [required]="true"--\x3e\r\n\x3c!--                    [entityType]="\'DEVICE\'"--\x3e\r\n\x3c!--            ></tb-entity-subtype-autocomplete>--\x3e\r\n\x3c!--        </div>--\x3e\r\n\x3c!--        <div formGroupName="attributes" fxLayout="column">--\x3e\r\n\x3c!--            <div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0">--\x3e\r\n\x3c!--                <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                    <mat-label>Latitude</mat-label>--\x3e\r\n\x3c!--                    <input type="number" step="any" matInput formControlName="latitude">--\x3e\r\n\x3c!--                </mat-form-field>--\x3e\r\n\x3c!--                <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                    <mat-label>Longitude</mat-label>--\x3e\r\n\x3c!--                    <input type="number" step="any" matInput formControlName="longitude">--\x3e\r\n\x3c!--                </mat-form-field>--\x3e\r\n\x3c!--            </div>--\x3e\r\n\x3c!--            <div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0">--\x3e\r\n\x3c!--                <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                    <mat-label>Address</mat-label>--\x3e\r\n\x3c!--                    <input matInput formControlName="address">--\x3e\r\n\x3c!--                </mat-form-field>--\x3e\r\n\x3c!--                <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                    <mat-label>Owner</mat-label>--\x3e\r\n\x3c!--                    <input matInput formControlName="owner">--\x3e\r\n\x3c!--                </mat-form-field>--\x3e\r\n\x3c!--            </div>--\x3e\r\n\x3c!--            <div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0">--\x3e\r\n\x3c!--                <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                    <mat-label>Integer Value</mat-label>--\x3e\r\n\x3c!--                    <input type="number" step="1" matInput formControlName="number">--\x3e\r\n\x3c!--                    <mat-error *ngIf="addEntityFormGroup.get(\'attributes.number\').hasError(\'pattern\')">--\x3e\r\n\x3c!--                        Invalid integer value.--\x3e\r\n\x3c!--                    </mat-error>--\x3e\r\n\x3c!--                </mat-form-field>--\x3e\r\n\x3c!--                <div class="boolean-value-input" fxLayout="column" fxLayoutAlign="center start" fxFlex>--\x3e\r\n\x3c!--                    <label class="checkbox-label">Boolean Value</label>--\x3e\r\n\x3c!--                    <mat-checkbox formControlName="booleanValue" style="margin-bottom: 40px;">--\x3e\r\n\x3c!--                        {{ (addEntityFormGroup.get(\'attributes.booleanValue\').value ? "value.true" : "value.false") | translate }}--\x3e\r\n\x3c!--                    </mat-checkbox>--\x3e\r\n\x3c!--                </div>--\x3e\r\n\x3c!--            </div>--\x3e\r\n\x3c!--        </div>--\x3e\r\n\x3c!--        <div class="relations-list">--\x3e\r\n\x3c!--            <div class="mat-body-1" style="padding-bottom: 10px; color: rgba(0,0,0,0.57);">Relations</div>--\x3e\r\n\x3c!--            <div class="body" [fxShow]="relations().length">--\x3e\r\n\x3c!--                <div class="row" fxLayout="row" fxLayoutAlign="start center" formArrayName="relations" *ngFor="let relation of relations().controls; let i = index;">--\x3e\r\n\x3c!--                    <div [formGroupName]="i" class="mat-elevation-z2" fxFlex fxLayout="row" style="padding: 5px 0 5px 5px;">--\x3e\r\n\x3c!--                        <div fxFlex fxLayout="column">--\x3e\r\n\x3c!--                            <div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0">--\x3e\r\n\x3c!--                                <mat-form-field class="mat-block" style="min-width: 100px;">--\x3e\r\n\x3c!--                                    <mat-label>Direction</mat-label>--\x3e\r\n\x3c!--                                    <mat-select formControlName="direction" name="direction">--\x3e\r\n\x3c!--                                        <mat-option *ngFor="let direction of entitySearchDirection | keyvalue" [value]="direction.value">--\x3e\r\n\x3c!--                                            {{ ("relation.search-direction." + direction.value) | translate}}--\x3e\r\n\x3c!--                                        </mat-option>--\x3e\r\n\x3c!--                                    </mat-select>--\x3e\r\n\x3c!--                                    <mat-error *ngIf="relation.get(\'direction\').hasError(\'required\')">--\x3e\r\n\x3c!--                                        Relation direction is required.--\x3e\r\n\x3c!--                                    </mat-error>--\x3e\r\n\x3c!--                                </mat-form-field>--\x3e\r\n\x3c!--                                <tb-relation-type-autocomplete--\x3e\r\n\x3c!--                                        fxFlex class="mat-block"--\x3e\r\n\x3c!--                                        formControlName="relationType"--\x3e\r\n\x3c!--                                        [required]="true">--\x3e\r\n\x3c!--                                </tb-relation-type-autocomplete>--\x3e\r\n\x3c!--                            </div>--\x3e\r\n\x3c!--                            <div fxLayout="row" fxLayout.xs="column">--\x3e\r\n\x3c!--                                <tb-entity-select--\x3e\r\n\x3c!--                                        fxFlex class="mat-block"--\x3e\r\n\x3c!--                                        [required]="true"--\x3e\r\n\x3c!--                                        formControlName="relatedEntity">--\x3e\r\n\x3c!--                                </tb-entity-select>--\x3e\r\n\x3c!--                            </div>--\x3e\r\n\x3c!--                        </div>--\x3e\r\n\x3c!--                        <div fxLayout="column" fxLayoutAlign="center center">--\x3e\r\n\x3c!--                            <button mat-icon-button color="accent"--\x3e\r\n\x3c!--                                    aria-label="Remove"--\x3e\r\n\x3c!--                                    type="button"--\x3e\r\n\x3c!--                                    (click)="removeRelation(i)"--\x3e\r\n\x3c!--                                    matTooltip="Remove relation"--\x3e\r\n\x3c!--                                    matTooltipPosition="above">--\x3e\r\n\x3c!--                                <mat-icon>close</mat-icon>--\x3e\r\n\x3c!--                            </button>--\x3e\r\n\x3c!--                        </div>--\x3e\r\n\x3c!--                    </div>--\x3e\r\n\x3c!--                </div>--\x3e\r\n\x3c!--            </div>--\x3e\r\n\x3c!--            <div>--\x3e\r\n\x3c!--                <button mat-raised-button color="accent"--\x3e\r\n\x3c!--                        type="button"--\x3e\r\n\x3c!--                        (click)="addRelation()"--\x3e\r\n\x3c!--                        matTooltip="Add Relation"--\x3e\r\n\x3c!--                        matTooltipPosition="above">--\x3e\r\n\x3c!--                    Add--\x3e\r\n\x3c!--                </button>--\x3e\r\n\x3c!--            </div>--\x3e\r\n\x3c!--        </div>--\x3e\r\n\x3c!--    </div>--\x3e\r\n\x3c!--    <div mat-dialog-actions fxLayout="row" fxLayoutAlign="end center">--\x3e\r\n\x3c!--        <button mat-button color="accent"--\x3e\r\n\x3c!--                type="button"--\x3e\r\n\x3c!--                [disabled]="(isLoading$ | async)"--\x3e\r\n\x3c!--                (click)="cancel()" cdkFocusInitial>--\x3e\r\n\x3c!--            Cancel--\x3e\r\n\x3c!--        </button>--\x3e\r\n\x3c!--        <button mat-button mat-raised-button color="accent"--\x3e\r\n\x3c!--                type="submit"--\x3e\r\n\x3c!--                [disabled]="(isLoading$ | async) || addEntityForm.invalid || !addEntityForm.dirty">--\x3e\r\n\x3c!--            Create--\x3e\r\n\x3c!--        </button>--\x3e\r\n\x3c!--    </div>--\x3e\r\n\x3c!--</form>--\x3e\r\n',customCss:"/*=======================================================================*/\r\n/*==========  There are two examples: for edit and add entity  ==========*/\r\n/*=======================================================================*/\r\n/*========================  Edit entity example  ========================*/\r\n/*=======================================================================*/\r\n/*\r\n.edit-entity-form .boolean-value-input {\r\n    padding-left: 5px;\r\n}\r\n\r\n.edit-entity-form .boolean-value-input .checkbox-label {\r\n    margin-bottom: 8px;\r\n    color: rgba(0,0,0,0.54);\r\n    font-size: 12px;\r\n}\r\n\r\n.relations-list .header {\r\n    padding-right: 5px;\r\n    padding-bottom: 5px;\r\n    padding-left: 5px;\r\n}\r\n\r\n.relations-list .header .cell {\r\n    padding-right: 5px;\r\n    padding-left: 5px;\r\n    font-size: 12px;\r\n    font-weight: 700;\r\n    color: rgba(0, 0, 0, .54);\r\n    white-space: nowrap;\r\n}\r\n\r\n.relations-list .mat-form-field-infix {\r\n    width: auto !important;\r\n}\r\n\r\n.relations-list .body {\r\n    padding-right: 5px;\r\n    padding-bottom: 15px;\r\n    padding-left: 5px;\r\n}\r\n\r\n.relations-list .body .row {\r\n    padding-top: 5px;\r\n}\r\n\r\n.relations-list .body .cell {\r\n    padding-right: 5px;\r\n    padding-left: 5px;\r\n}\r\n\r\n.relations-list .body .md-button {\r\n    margin: 0;\r\n}\r\n*/\r\n/*========================================================================*/\r\n/*=========================  Add entity example  =========================*/\r\n/*========================================================================*/\r\n/*\r\n.add-entity-form .boolean-value-input {\r\n    padding-left: 5px;\r\n}\r\n\r\n.add-entity-form .boolean-value-input .checkbox-label {\r\n    margin-bottom: 8px;\r\n    color: rgba(0,0,0,0.54);\r\n    font-size: 12px;\r\n}\r\n\r\n.relations-list .header {\r\n    padding-right: 5px;\r\n    padding-bottom: 5px;\r\n    padding-left: 5px;\r\n}\r\n\r\n.relations-list .header .cell {\r\n    padding-right: 5px;\r\n    padding-left: 5px;\r\n    font-size: 12px;\r\n    font-weight: 700;\r\n    color: rgba(0, 0, 0, .54);\r\n    white-space: nowrap;\r\n}\r\n\r\n.relations-list .mat-form-field-infix {\r\n    width: auto !important;\r\n}\r\n\r\n.relations-list .body {\r\n    padding-right: 5px;\r\n    padding-bottom: 15px;\r\n    padding-left: 5px;\r\n}\r\n\r\n.relations-list .body .row {\r\n    padding-top: 5px;\r\n}\r\n\r\n.relations-list .body .cell {\r\n    padding-right: 5px;\r\n    padding-left: 5px;\r\n}\r\n\r\n.relations-list .body .md-button {\r\n    margin: 0;\r\n}\r\n*/\r\n",customFunction:"/*=======================================================================*/\r\n/*=====  There are three examples: for delete, edit and add entity  =====*/\r\n/*=======================================================================*/\r\n/*=======================  Delete entity example  =======================*/\r\n/*=======================================================================*/\r\n//\r\n//let $injector = widgetContext.$scope.$injector;\r\n//let dialogs = $injector.get(widgetContext.servicesMap.get('dialogs'));\r\n//let assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\r\n//let deviceService = $injector.get(widgetContext.servicesMap.get('deviceService'));\r\n//\r\n//openDeleteEntityDialog();\r\n//\r\n//function openDeleteEntityDialog() {\r\n//    let title = 'Delete ' + entityId.entityType.toLowerCase() + ' ' +\r\n//                 entityName;\r\n//    let content = 'Are you sure you want to delete the ' +\r\n//                  entityId.entityType.toLowerCase() + ' ' + entityName + '?';\r\n//    dialogs.confirm(title, content, 'Cancel', 'Delete').subscribe(\r\n//        function(result) {\r\n//            if (result) {\r\n//                deleteEntity();\r\n//            }\r\n//        }\r\n//    );\r\n//}\r\n//\r\n//function deleteEntity() {\r\n//    deleteEntityObservable(entityId).subscribe(\r\n//        function success() {\r\n//            widgetContext.updateAliases();\r\n//        },\r\n//        function fail() {\r\n//            showErrorDialog();\r\n//        }\r\n//    );\r\n//}\r\n//\r\n//function deleteEntityObservable(entityId) {\r\n//    if (entityId.entityType == \"ASSET\") {\r\n//        return assetService.deleteAsset(entityId.id);\r\n//    } else if (entityId.entityType == \"DEVICE\") {\r\n//        return deviceService.deleteDevice(entityId.id);\r\n//    }\r\n//}\r\n//\r\n//function showErrorDialog() {\r\n//    let title = 'Error';\r\n//    let content = 'An error occurred while deleting the entity. Please try again.';\r\n//    dialogs.alert(title, content, 'CLOSE').subscribe(\r\n//        function(result) {}\r\n//    );\r\n//}\r\n//\r\n/*=======================================================================*/\r\n/*========================  Edit entity example  ========================*/\r\n/*=======================================================================*/\r\n//\r\n//let $injector = widgetContext.$scope.$injector;\r\n//let customDialog = $injector.get(widgetContext.servicesMap.get('customDialog'));\r\n//let entityService = $injector.get(widgetContext.servicesMap.get('entityService'));\r\n//let assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\r\n//let deviceService = $injector.get(widgetContext.servicesMap.get('deviceService'));\r\n//let attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\r\n//let entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService'));\r\n//\r\n//openEditEntityDialog();\r\n//\r\n//function openEditEntityDialog() {\r\n//    customDialog.customDialog(htmlTemplate, EditEntityDialogController).subscribe();\r\n//}\r\n//\r\n//function EditEntityDialogController(instance) {\r\n//    let vm = instance;\r\n//\r\n//    vm.entityName = entityName;\r\n//    vm.entityType = entityId.entityType;\r\n//    vm.entitySearchDirection = {\r\n//        from: \"FROM\",\r\n//        to: \"TO\"\r\n//    };\r\n//    vm.attributes = {};\r\n//    vm.oldRelationsData = [];\r\n//    vm.relationsToDelete = [];\r\n//    vm.entity = {};\r\n//\r\n//    vm.editEntityFormGroup = vm.fb.group({\r\n//        entityName: ['', [vm.validators.required]],\r\n//        entityType: [null],\r\n//        entityLabel: [null],\r\n//        type: ['', [vm.validators.required]],\r\n//        attributes: vm.fb.group({\r\n//            latitude: [null],\r\n//            longitude: [null],\r\n//            address: [null],\r\n//            owner: [null],\r\n//            number: [null, [vm.validators.pattern(/^-?[0-9]+$/)]],\r\n//            booleanValue: [false]\r\n//        }),\r\n//        oldRelations: vm.fb.array([]),\r\n//        relations: vm.fb.array([])\r\n//    });\r\n//\r\n//    getEntityInfo();\r\n//\r\n//    vm.cancel = function() {\r\n//        vm.dialogRef.close(null);\r\n//    };\r\n//\r\n//    vm.relations = function() {\r\n//        return vm.editEntityFormGroup.get('relations');\r\n//    };\r\n//\r\n//    vm.oldRelations = function() {\r\n//        return vm.editEntityFormGroup.get('oldRelations');\r\n//    };\r\n//\r\n//    vm.addRelation = function() {\r\n//        vm.relations().push(vm.fb.group({\r\n//            relatedEntity: [null, [vm.validators.required]],\r\n//            relationType: [null, [vm.validators.required]],\r\n//            direction: [null, [vm.validators.required]]\r\n//        }));\r\n//    };\r\n//\r\n//    function addOldRelation() {\r\n//        vm.oldRelations().push(vm.fb.group({\r\n//            relatedEntity: [{value: null, disabled: true}, [vm.validators.required]],\r\n//            relationType: [{value: null, disabled: true}, [vm.validators.required]],\r\n//            direction: [{value: null, disabled: true}, [vm.validators.required]]\r\n//        }));\r\n//    }\r\n//\r\n//    vm.removeRelation = function(index) {\r\n//        vm.relations().removeAt(index);\r\n//        vm.relations().markAsDirty();\r\n//    };\r\n//\r\n//    vm.removeOldRelation = function(index) {\r\n//        vm.oldRelations().removeAt(index);\r\n//        vm.relationsToDelete.push(vm.oldRelationsData[index]);\r\n//        vm.oldRelations().markAsDirty();\r\n//    };\r\n//\r\n//    vm.save = function() {\r\n//        vm.editEntityFormGroup.markAsPristine();\r\n//        widgetContext.rxjs.forkJoin([\r\n//            saveAttributes(entityId),\r\n//            saveRelations(entityId),\r\n//            saveEntity()\r\n//        ]).subscribe(\r\n//            function () {\r\n//                widgetContext.updateAliases();\r\n//                vm.dialogRef.close(null);\r\n//            }\r\n//        );\r\n//    };\r\n//\r\n//    function getEntityAttributes(attributes) {\r\n//        for (var i = 0; i < attributes.length; i++) {\r\n//            vm.attributes[attributes[i].key] = attributes[i].value;\r\n//        }\r\n//    }\r\n//\r\n//    function getEntityRelations(relations) {\r\n//        let relationsFrom = relations[0];\r\n//        let relationsTo = relations[1];\r\n//        for (let i=0; i < relationsFrom.length; i++) {\r\n//            let relation = {\r\n//                direction: 'FROM',\r\n//                relationType: relationsFrom[i].type,\r\n//                relatedEntity: relationsFrom[i].to\r\n//            };\r\n//            vm.oldRelationsData.push(relation);\r\n//            addOldRelation();\r\n//        }\r\n//        for (let i=0; i < relationsTo.length; i++) {\r\n//            let relation = {\r\n//                direction: 'TO',\r\n//                relationType: relationsTo[i].type,\r\n//                relatedEntity: relationsTo[i].from\r\n//            };\r\n//            vm.oldRelationsData.push(relation);\r\n//            addOldRelation();\r\n//        }\r\n//    }\r\n//\r\n//    function getEntityInfo() {\r\n//         widgetContext.rxjs.forkJoin([\r\n//             entityRelationService.findInfoByFrom(entityId),\r\n//             entityRelationService.findInfoByTo(entityId),\r\n//             attributeService.getEntityAttributes(entityId, 'SERVER_SCOPE'),\r\n//             entityService.getEntity(entityId.entityType, entityId.id)\r\n//         ]).subscribe(\r\n//             function (data) {\r\n//                 getEntityRelations(data.slice(0,2));\r\n//                 getEntityAttributes(data[2]);\r\n//                 vm.entity = data[3];\r\n//                 vm.editEntityFormGroup.patchValue({\r\n//                     entityName: vm.entity.name,\r\n//                     entityType: vm.entityType,\r\n//                     entityLabel: vm.entity.label,\r\n//                     type: vm.entity.type,\r\n//                     attributes: vm.attributes,\r\n//                     oldRelations: vm.oldRelationsData\r\n//                 }, {emitEvent: false});\r\n//             }\r\n//         );\r\n//     }\r\n//\r\n//    function saveEntity() {\r\n//        const formValues = vm.editEntityFormGroup.value;\r\n//        if (vm.entity.label !== formValues.entityLabel){\r\n//            vm.entity.label = formValues.entityLabel;\r\n//            if (formValues.entityType == 'ASSET') {\r\n//                return assetService.saveAsset(vm.entity);\r\n//            } else if (formValues.entityType == 'DEVICE') {\r\n//                return deviceService.saveDevice(vm.entity);\r\n//            }\r\n//        }\r\n//        return widgetContext.rxjs.of([]);\r\n//    }\r\n//\r\n//    function saveAttributes(entityId) {\r\n//        let attributes = vm.editEntityFormGroup.get('attributes').value;\r\n//        let attributesArray = [];\r\n//        for (let key in attributes) {\r\n//            if (attributes[key] !== vm.attributes[key]) {\r\n//                attributesArray.push({key: key, value: attributes[key]});\r\n//            }\r\n//        }\r\n//        if (attributesArray.length > 0) {\r\n//            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\r\n//        }\r\n//        return widgetContext.rxjs.of([]);\r\n//    }\r\n//\r\n//    function saveRelations(entityId) {\r\n//        let relations = vm.editEntityFormGroup.get('relations').value;\r\n//        let tasks = [];\r\n//        for(let i=0; i < relations.length; i++) {\r\n//            let relation = {\r\n//                type: relations[i].relationType,\r\n//                typeGroup: 'COMMON'\r\n//            };\r\n//            if (relations[i].direction == 'FROM') {\r\n//                relation.to = relations[i].relatedEntity;\r\n//                relation.from = entityId;\r\n//            } else {\r\n//                relation.to = entityId;\r\n//                relation.from = relations[i].relatedEntity;\r\n//            }\r\n//            tasks.push(entityRelationService.saveRelation(relation));\r\n//        }\r\n//        for (let i=0; i < vm.relationsToDelete.length; i++) {\r\n//            let relation = {\r\n//                type: vm.relationsToDelete[i].relationType\r\n//            };\r\n//            if (vm.relationsToDelete[i].direction == 'FROM') {\r\n//                relation.to = vm.relationsToDelete[i].relatedEntity;\r\n//                relation.from = entityId;\r\n//            } else {\r\n//                relation.to = entityId;\r\n//                relation.from = vm.relationsToDelete[i].relatedEntity;\r\n//            }\r\n//            tasks.push(entityRelationService.deleteRelation(relation.from, relation.type, relation.to));\r\n//        }\r\n//        if (tasks.length > 0) {\r\n//            return widgetContext.rxjs.forkJoin(tasks);\r\n//        }\r\n//        return widgetContext.rxjs.of([]);\r\n//    }\r\n//}\r\n//\r\n/*========================================================================*/\r\n/*=========================  Add entity example  =========================*/\r\n/*========================================================================*/\r\n//\r\n//let $injector = widgetContext.$scope.$injector;\r\n//let customDialog = $injector.get(widgetContext.servicesMap.get('customDialog'));\r\n//let assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\r\n//let deviceService = $injector.get(widgetContext.servicesMap.get('deviceService'));\r\n//let attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\r\n//let entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService'));\r\n//\r\n//openAddEntityDialog();\r\n//\r\n//function openAddEntityDialog() {\r\n//    customDialog.customDialog(htmlTemplate, AddEntityDialogController).subscribe();\r\n//}\r\n//\r\n//function AddEntityDialogController(instance) {\r\n//    let vm = instance;\r\n//\r\n//    vm.allowedEntityTypes = ['ASSET', 'DEVICE'];\r\n//    vm.entitySearchDirection = {\r\n//        from: \"FROM\",\r\n//        to: \"TO\"\r\n//    }\r\n//\r\n//    vm.addEntityFormGroup = vm.fb.group({\r\n//      entityName: ['', [vm.validators.required]],\r\n//      entityType: ['DEVICE'],\r\n//      entityLabel: [null],\r\n//      type: ['', [vm.validators.required]],\r\n//      attributes: vm.fb.group({\r\n//          latitude: [null],\r\n//          longitude: [null],\r\n//          address: [null],\r\n//          owner: [null],\r\n//          number: [null, [vm.validators.pattern(/^-?[0-9]+$/)]],\r\n//          booleanValue: [null]\r\n//      }),\r\n//      relations: vm.fb.array([])\r\n//    });\r\n//\r\n//    vm.cancel = function() {\r\n//        vm.dialogRef.close(null);\r\n//    };\r\n//\r\n//    vm.relations = function() {\r\n//        return vm.addEntityFormGroup.get('relations');\r\n//    };\r\n//\r\n//    vm.addRelation = function() {\r\n//        vm.relations().push(vm.fb.group({\r\n//          relatedEntity: [null, [vm.validators.required]],\r\n//          relationType: [null, [vm.validators.required]],\r\n//          direction: [null, [vm.validators.required]]\r\n//        }));\r\n//    };\r\n//\r\n//    vm.removeRelation = function(index) {\r\n//        vm.relations().removeAt(index);\r\n//        vm.relations().markAsDirty();\r\n//    };\r\n//\r\n//    vm.save = function() {\r\n//        vm.addEntityFormGroup.markAsPristine();\r\n//        saveEntityObservable().subscribe(\r\n//            function (entity) {\r\n//                widgetContext.rxjs.forkJoin([\r\n//                    saveAttributes(entity.id),\r\n//                    saveRelations(entity.id)\r\n//                ]).subscribe(\r\n//                    function () {\r\n//                        widgetContext.updateAliases();\r\n//                        vm.dialogRef.close(null);\r\n//                    }\r\n//                );\r\n//            }\r\n//        );\r\n//    };\r\n//\r\n//    function saveEntityObservable() {\r\n//        const formValues = vm.addEntityFormGroup.value;\r\n//        let entity = {\r\n//            name: formValues.entityName,\r\n//            type: formValues.type,\r\n//            label: formValues.entityLabel\r\n//        };\r\n//        if (formValues.entityType == 'ASSET') {\r\n//            return assetService.saveAsset(entity);\r\n//        } else if (formValues.entityType == 'DEVICE') {\r\n//            return deviceService.saveDevice(entity);\r\n//        }\r\n//    }\r\n//\r\n//    function saveAttributes(entityId) {\r\n//        let attributes = vm.addEntityFormGroup.get('attributes').value;\r\n//        let attributesArray = [];\r\n//        for (let key in attributes) {\r\n//            if(attributes[key] !== null) {\r\n//                attributesArray.push({key: key, value: attributes[key]});\r\n//            }\r\n//        }\r\n//        if (attributesArray.length > 0) {\r\n//            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\r\n//        }\r\n//        return widgetContext.rxjs.of([]);\r\n//    }\r\n//\r\n//    function saveRelations(entityId) {\r\n//        let relations = vm.addEntityFormGroup.get('relations').value;\r\n//        let tasks = [];\r\n//        for(let i=0; i < relations.length; i++) {\r\n//            let relation = {\r\n//                type: relations[i].relationType,\r\n//                typeGroup: 'COMMON'\r\n//            };\r\n//            if (relations[i].direction == 'FROM') {\r\n//                relation.to = relations[i].relatedEntity;\r\n//                relation.from = entityId;\r\n//            } else {\r\n//                relation.to = entityId;\r\n//                relation.from = relations[i].relatedEntity;\r\n//            }\r\n//            tasks.push(entityRelationService.saveRelation(relation));\r\n//        }\r\n//        if (tasks.length > 0) {\r\n//            return widgetContext.rxjs.forkJoin(tasks);\r\n//        }\r\n//        return widgetContext.rxjs.of([]);\r\n//    }\r\n//}\r\n"}:{customHtml:e.customHtml,customCss:e.customCss,customFunction:e.customFunction}).customResources=e&&Object(m.n)(e.customResources)?Object(m.e)(e.customResources):[],t}var g=function(){function e(e,t){this.translate=e,this.utils=t,this.actionsSubject=new r.a([]),this.pageDataSubject=new r.a(Object(l.a)()),this.pageData$=this.pageDataSubject.asObservable()}return e.prototype.connect=function(e){return this.actionsSubject.asObservable()},e.prototype.disconnect=function(e){this.actionsSubject.complete(),this.pageDataSubject.complete()},e.prototype.setActions=function(e){this.actionsMap=e.actionsMap,this.actionSources=e.actionSources},e.prototype.loadActions=function(e,t){var n=this;void 0===t&&(t=!1),t&&(this.allActions=null);var i=new o.a;return this.fetchActions(e).pipe(Object(c.a)(function(){return Object(s.a)(Object(l.a)())})).subscribe(function(e){n.actionsSubject.next(e.data),n.pageDataSubject.next(e),i.next(e)}),i},e.prototype.fetchActions=function(e){return this.getAllActions().pipe(Object(d.a)(function(t){return e.filterData(t)}))},e.prototype.getAllActions=function(){var e=this;if(!this.allActions){for(var t=[],n=function(n){i.actionsMap[n].forEach(function(i){t.push(e.toWidgetActionDescriptorInfo(n,i))})},i=this,a=0,r=Object.keys(this.actionsMap);a<r.length;a++){n(r[a])}this.allActions=Object(s.a)(t).pipe(Object(u.a)(1),Object(p.a)())}return this.allActions},e.prototype.toWidgetActionDescriptorInfo=function(e,t){var n=this.actionSources[e],r=n?this.utils.customTranslation(n.name,n.name):e,o=this.translate.instant(a.k.get(t.type));return Object(i.a)({actionSourceId:e,actionSourceName:r,typeName:o},t)},e.prototype.isEmpty=function(){return this.actionsSubject.pipe(Object(d.a)(function(e){return!e.length}))},e.prototype.total=function(){return this.pageDataSubject.pipe(Object(d.a)(function(e){return e.totalElements}))},e}()},IVUU:function(e,t,n){"use strict";n.d(t,"a",function(){return w});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("gmuX"),l=n("OiFK"),c=n("l7P3"),d=n("tyNb"),u=n("3Pt+"),p=n("sYmb"),m=n("/t3+"),f=n("XiUz"),h=n("bTqV"),g=n("NFeN"),A=n("ofXK"),b=n("kmnG"),y=n("qFsG"),v=n("bv9b");function C(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",15)}function x(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"button",16),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,n.isLoading$)||n.editDetailsFormGroup.invalid||!n.editDetailsFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](3,4,"action.save")," ")}}var w=function(e){function t(t,n,i,a,r,o,s,l){var c=e.call(this,t,n,r)||this;return c.store=t,c.router=n,c.data=i,c.errorStateMatcher=a,c.dialogRef=r,c.fb=o,c.utils=s,c.translate=l,c.alarmDetails=c.data.alarmDetails,c.submitted=!1,c.editDetailsFormGroup=c.fb.group({alarmDetails:[c.alarmDetails]}),c.data.readonly&&c.editDetailsFormGroup.disable(),c}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.save=function(){this.submitted=!0,this.alarmDetails=this.editDetailsFormGroup.get("alarmDetails").value,this.dialogRef.close(this.alarmDetails)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](c.Store),a["\u0275\u0275directiveInject"](d.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](u.FormBuilder),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](p.TranslateService))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-edit-alarm-details-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:25,vars:17,consts:[[2,"width","800px",3,"formGroup","ngSubmit"],["color","accent"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["fxFlex","","fxLayout","column"],[1,"mat-block"],["translate",""],["matInput","","formControlName","alarmDetails","rows","5"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled",4,"ngIf"],["color","warn","mode","indeterminate"],["mat-raised-button","","color","accent","type","submit",3,"disabled"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,C,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275elementStart"](11,"div",6),a["\u0275\u0275elementStart"](12,"fieldset",7),a["\u0275\u0275pipe"](13,"async"),a["\u0275\u0275elementStart"](14,"div",8),a["\u0275\u0275elementStart"](15,"mat-form-field",9),a["\u0275\u0275elementStart"](16,"mat-label",10),a["\u0275\u0275text"](17,"device-profile.alarm-details"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](18,"textarea",11),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"div",12),a["\u0275\u0275elementStart"](20,"button",13),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](21,"async"),a["\u0275\u0275text"](22),a["\u0275\u0275pipe"](23,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](24,x,4,6,"button",14),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.editDetailsFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,7,"device-profile.alarm-rule-details")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,9,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](13,11,t.isLoading$)),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](21,13,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](23,15,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!t.data.readonly))},directives:[u["\u0275angular_packages_forms_forms_ba"],u.NgControlStatusGroup,u.FormGroupDirective,m.MatToolbar,f.b,h.MatButton,g.MatIcon,A.NgIf,o.MatDialogContent,f.f,b.MatFormField,b.MatLabel,p.TranslateDirective,y.MatInput,u.DefaultValueAccessor,u.NgControlStatus,u.FormControlName,o.MatDialogActions,f.e,v.MatProgressBar],pipes:[p.TranslatePipe,A.AsyncPipe],encapsulation:2}),t}(s.a);0,void 0},IfZf:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n("fXoL"),a=n("3Pt+"),r=n("xw5a"),o=n("XiUz"),s=n("kmnG"),l=n("d3UM"),c=n("ofXK"),d=n("bSwM"),u=n("cXYG"),p=n("FKr1"),m=n("sYmb");function f(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",7),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,a.stringOperationTranslations.get(a.stringOperationEnum[n]))," ")}}var h=function(){function e(e){this.fb=e,this.allowUserDynamicSource=!0,this.onlyUserDynamicSource=!1,this.valueTypeEnum=r.e,this.stringOperations=Object.keys(r.h),this.stringOperationEnum=r.h,this.stringOperationTranslations=r.J,this.propagateChange=null}return e.prototype.ngOnInit=function(){var e=this;this.stringFilterPredicateFormGroup=this.fb.group({operation:[r.h.STARTS_WITH,[a.Validators.required]],value:[null,[a.Validators.required]],ignoreCase:[!1]}),this.stringFilterPredicateFormGroup.valueChanges.subscribe(function(){e.updateModel()})},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.stringFilterPredicateFormGroup.disable({emitEvent:!1}):this.stringFilterPredicateFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){this.stringFilterPredicateFormGroup.get("operation").patchValue(e.operation,{emitEvent:!1}),this.stringFilterPredicateFormGroup.get("value").patchValue(e.value,{emitEvent:!1}),this.stringFilterPredicateFormGroup.get("ignoreCase").patchValue(e.ignoreCase,{emitEvent:!1})},e.prototype.validate=function(e){return this.stringFilterPredicateFormGroup.valid?null:{stringFilterPredicate:{valid:!1}}},e.prototype.updateModel=function(){var e=this.stringFilterPredicateFormGroup.getRawValue();e.type=r.f.STRING,this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-string-filter-predicate"]],inputs:{disabled:"disabled",allowUserDynamicSource:"allowUserDynamicSource",onlyUserDynamicSource:"onlyUserDynamicSource"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:9,vars:8,consts:[["fxFlex","","fxLayout","row","fxLayoutAlign","start start","fxLayoutGap","8px",3,"formGroup"],["fxFlex","30","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px"],["floatLabel","always","hideRequiredMarker","","fxFlex","",1,"mat-block"],["required","","formControlName","operation",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","center","formControlName","ignoreCase",2,"min-width","70px"],["fxFlex","70","formControlName","value",3,"allowUserDynamicSource","onlyUserDynamicSource","valueType"],[3,"value"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"mat-form-field",2),i["\u0275\u0275element"](3,"mat-label"),i["\u0275\u0275elementStart"](4,"mat-select",3),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275template"](6,f,3,4,"mat-option",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](7,"mat-checkbox",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](8,"tb-filter-predicate-value",6),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.stringFilterPredicateFormGroup),i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](5,6,"filter.operation.operation")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.stringOperations),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("allowUserDynamicSource",t.allowUserDynamicSource)("onlyUserDynamicSource",t.onlyUserDynamicSource)("valueType",t.valueTypeEnum.STRING))},directives:[o.b,o.f,o.e,o.g,a.NgControlStatusGroup,a.FormGroupDirective,s.MatFormField,s.MatLabel,l.MatSelect,a.RequiredValidator,a.NgControlStatus,a.FormControlName,c.NgForOf,d.MatCheckbox,u.a,p.MatOption],pipes:[m.TranslatePipe],styles:["[_nghost-%COMP%]   .tb-hint[_ngcontent-%COMP%]{padding-bottom:0}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-infix{border-top-width:.2em;width:auto;min-width:auto}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-underline{bottom:0}"]}),e}();0,void 0},IktG:function(e,t,n){"use strict";function i(e){return!(!e||!e.assignedCustomers)&&e.assignedCustomers.filter(function(e){return e.public}).length>0}function a(e){return e&&e.assignedCustomers&&e.assignedCustomers.length>0?e.assignedCustomers.filter(function(e){return!e.public}).map(function(e){return e.title}).join(", "):""}function r(e,t){return!!(t&&e&&e.assignedCustomers)&&e.assignedCustomers.filter(function(e){return e.public&&t===e.customerId.id}).length>0}n.d(t,"c",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r})},"J/M1":function(e,t,n){"use strict";n.d(t,"a",function(){return B});var i=n("mrSG"),a=n("fXoL"),r=n("3Pt+"),o=n("XNiG"),s=n("gGt+"),l=n("//Q6"),c=n("RxGS"),d=n("1G5W"),u=n("l7P3"),p=n("XiUz"),m=n("sYmb"),f=n("znSr"),h=n("ofXK"),g=n("kmnG"),A=n("d3UM"),b=n("qFsG"),y=n("FKr1"),v=n("bTqV"),C=n("Qu3c"),x=n("NFeN");function w(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",18),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]().index,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n)("disabled",r.isDisabledAttributeName(n,i)),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,3,r.attributeNameTranslationMap.get(n))," ")}}function S(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.attribute-name-required")," "))}function E(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error",19),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.attribute-value-required")," "))}function I(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error",19),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.attribute-value-pattern")," "))}function O(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",20),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](n);var e=a["\u0275\u0275nextContext"]().index;return a["\u0275\u0275nextContext"]().removeKeyVal(e)}),a["\u0275\u0275pipe"](1,"translate"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}2&e&&a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](1,1,"device-profile.lwm2m.remove-attribute"))}function T(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",8),a["\u0275\u0275elementStart"](1,"div",9),a["\u0275\u0275elementStart"](2,"mat-form-field",10),a["\u0275\u0275element"](3,"mat-label"),a["\u0275\u0275elementStart"](4,"mat-select",11),a["\u0275\u0275template"](5,w,3,5,"mat-option",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](6,S,3,3,"mat-error",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"mat-form-field",14),a["\u0275\u0275element"](8,"mat-label"),a["\u0275\u0275element"](9,"input",15),a["\u0275\u0275pipe"](10,"translate"),a["\u0275\u0275template"](11,E,3,3,"mat-error",16),a["\u0275\u0275template"](12,I,3,3,"mat-error",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](13,O,4,3,"button",17),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("formGroup",n),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngForOf",i.attributeNames),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.get("name").hasError("required")),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](10,7,"key-val.value")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",n.get("value").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.get("value").hasError("min")||n.get("value").hasError("pattern")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!i.disabled)}}function F(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",21),a["\u0275\u0275elementStart"](1,"button",22),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().addKeyVal()}),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275elementStart"](3,"mat-icon",23),a["\u0275\u0275text"](4,"add_circle_outline"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](5),a["\u0275\u0275pipe"](6,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](2,2,i.isLoading$)),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](6,4,"device-profile.lwm2m.add-attribute")," ")}}var B=function(e){function t(t,n){var i=e.call(this,t)||this;return i.store=t,i.fb=n,i.attributeNameTranslationMap=s.c,i.isResource=!1,i.propagateChange=null,i.valueChange$=null,i.destroy$=new o.b,i.usedAttributesName=[],i.attributesValueFormGroup=i.fb.group({attributesValue:i.fb.array([])}),i}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){this.isResource?this.attributeNames=Object.values(s.b):this.attributeNames=Object.values(s.b).filter(function(e){return![s.b.lt,s.b.gt,s.b.st].includes(e)})},t.prototype.ngOnDestroy=function(){this.valueChange$&&this.valueChange$.unsubscribe(),this.destroy$.next(),this.destroy$.complete()},t.prototype.registerOnChange=function(e){this.propagateChange=e},t.prototype.registerOnTouched=function(e){},t.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.attributesValueFormGroup.disable({emitEvent:!1}):this.attributesValueFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(e){var t=this;this.valueChange$&&this.valueChange$.unsubscribe();var n=[];e&&Object.keys(e).forEach(function(i){n.push(t.createdFormGroup({name:i,value:e[i]}))}),this.attributesValueFormGroup.setControl("attributesValue",this.fb.array(n)),this.disabled?this.attributesValueFormGroup.disable({emitEvent:!1}):this.attributesValueFormGroup.enable({emitEvent:!1}),this.valueChange$=this.attributesValueFormGroup.valueChanges.subscribe(function(){t.updateModel()}),this.updateUsedAttributesName()},t.prototype.attributesValueFormArray=function(){return this.attributesValueFormGroup.get("attributesValue")},t.prototype.removeKeyVal=function(e){this.attributesValueFormArray().removeAt(e)},t.prototype.addKeyVal=function(){this.attributesValueFormArray().push(this.createdFormGroup()),this.attributesValueFormGroup.updateValueAndValidity({emitEvent:!1}),this.attributesValueFormGroup.invalid&&this.updateModel()},t.prototype.createdFormGroup=function(e){Object(l.C)(e)&&(e={name:this.getFirstUnusedAttributesName(),value:null});var t=this.fb.group({name:[e.name,r.Validators.required],value:[e.value,Object(s.J)(e.name)]});return t.get("name").valueChanges.pipe(Object(d.a)(this.destroy$)).subscribe(function(e){t.get("value").setValidators(Object(s.J)(e)),t.get("value").updateValueAndValidity()}),t},t.prototype.validate=function(){return this.attributesValueFormGroup.valid?null:{attributesValue:{valid:!1}}},t.prototype.updateModel=function(){var e=this.attributesValueFormGroup.get("attributesValue").value,t={};e.forEach(function(e){t[e.name]=e.value}),this.updateUsedAttributesName(),this.propagateChange(t)},t.prototype.isDisabledAttributeName=function(e,t){var n=this.usedAttributesName.indexOf(e);return n>-1&&n!==t},t.prototype.getFirstUnusedAttributesName=function(){for(var e=0,t=this.attributeNames;e<t.length;e++){var n=t[e];if(-1===this.usedAttributesName.indexOf(n))return n}return null},t.prototype.updateUsedAttributesName=function(){var e=this;this.usedAttributesName=[],this.attributesValueFormGroup.get("attributesValue").value.forEach(function(t,n){e.usedAttributesName[n]=t.name})},Object.defineProperty(t.prototype,"isAddEnabled",{get:function(){return this.attributesValueFormArray().length!==this.attributeNames.length},enumerable:!1,configurable:!0}),t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](u.Store),a["\u0275\u0275directiveInject"](r.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-lwm2m-attributes-key-list"]],inputs:{disabled:"disabled",isResource:"isResource"},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)(function(){return t}),multi:!0},{provide:r.NG_VALIDATORS,useExisting:Object(a.forwardRef)(function(){return t}),multi:!0}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:11,vars:5,consts:[["fxLayout","column",1,"name-value-map",3,"formGroup"],["fxLayout","row","fxLayoutGap","8px",2,"max-height","40px","margin-top","8px"],["fxFlex","40","translate","",1,"tb-title","no-padding",2,"min-width","230px"],["fxFlex","60","translate","",1,"tb-title","no-padding"],[2,"width","40px",3,"fxShow"],["fxLayout","column","class","map-list",3,"formGroup",4,"ngFor","ngForOf"],["fxLayoutAlign","center center","translate","",1,"map-list",3,"fxShow"],["style","margin-top: 9px;",4,"ngIf"],["fxLayout","column",1,"map-list",3,"formGroup"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px"],["fxFlex","40","floatLabel","always","hideRequiredMarker",""],["formControlName","name","required",""],[3,"value","disabled",4,"ngFor","ngForOf"],[4,"ngIf"],["fxFlex","60","floatLabel","always","hideRequiredMarker",""],["formControlName","value","matInput","","required","","type","number",3,"placeholder"],["fxLayout","row",4,"ngIf"],["mat-icon-button","","color","accent","style","min-width: 40px;","type","button","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],[3,"value","disabled"],["fxLayout","row"],["mat-icon-button","","color","accent","type","button","matTooltipPosition","above",2,"min-width","40px",3,"matTooltip","click"],[2,"margin-top","9px"],["mat-stroked-button","","color","accent","type","button",3,"disabled","click"],[1,"button-icon"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"section",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"label",2),a["\u0275\u0275text"](3,"device-profile.lwm2m.attribute-name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"label",3),a["\u0275\u0275text"](5,"device-profile.lwm2m.attribute-value"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](6,"span",4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](7,T,14,9,"div",5),a["\u0275\u0275elementStart"](8,"div",6),a["\u0275\u0275text"](9,"device-profile.lwm2m.no-attributes-set"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](10,F,7,6,"div",7),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.attributesValueFormGroup),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("fxShow",!t.disabled),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",t.attributesValueFormArray().controls),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",!t.attributesValueFormArray().length),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!t.disabled&&t.isAddEnabled))},directives:[p.f,r.NgControlStatusGroup,r.FormGroupDirective,p.g,p.b,m.TranslateDirective,f.d,h.NgForOf,p.e,h.NgIf,g.MatFormField,g.MatLabel,A.MatSelect,r.NgControlStatus,r.FormControlName,r.RequiredValidator,r.DefaultValueAccessor,b.MatInput,r.NumberValueAccessor,y.MatOption,g.MatError,v.MatButton,C.MatTooltip,x.MatIcon],pipes:[m.TranslatePipe,h.AsyncPipe],styles:["[_nghost-%COMP%]   .name-value-map[_ngcontent-%COMP%]   span.no-data-found[_ngcontent-%COMP%]{position:relative;display:flex;height:40px}[_nghost-%COMP%]   .name-value-map[_ngcontent-%COMP%]   span.no-data-found.disabled[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}[_nghost-%COMP%]   .name-value-map[_ngcontent-%COMP%]   .map-list[_ngcontent-%COMP%]{height:45px}[_nghost-%COMP%]     .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     .mat-form-field-infix{border-top:0}[_nghost-%COMP%]     .mat-form-field-underline{bottom:0}[_nghost-%COMP%]     .button-icon{font-size:20px;width:20px;height:20px}[_nghost-%COMP%]     .map-list mat-form-field .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     .map-list mat-form-field .mat-form-field-wrapper .mat-form-field-infix{border-top-width:.2em;width:auto;min-width:auto}[_nghost-%COMP%]     .map-list mat-form-field .mat-form-field-wrapper .mat-form-field-underline{bottom:0}[_nghost-%COMP%]     .map-list mat-form-field .mat-form-field-wrapper .mat-form-field-subscript-wrapper{margin-top:1.8em}"]}),t}(c.a);0,void 0},JA3I:function(e,t,n){"use strict";n.d(t,"a",function(){return _});var i=n("fXoL"),a=n("3Pt+"),r=n("LRne"),o=n("vkgz"),s=n("lJxs"),l=n("5+tZ"),c=n("w1tV"),d=n("21Fy"),u=n("8LU1"),p=n("T4sd"),m=n("/1cH"),f=n("FtGj"),h=n("FKr1"),g=n("l7P3"),A=n("sYmb"),b=n("kmnG"),y=n("ofXK"),v=n("qFsG"),C=n("bTqV"),x=n("NFeN"),w=n("d5eY"),S=["entityAliasAutocomplete"],E=["autocomplete"],I=["entityAliasInput"];function O(e,t){1&e&&i["\u0275\u0275element"](0,"mat-label")}function T(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",9),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().clear()}),i["\u0275\u0275elementStart"](1,"mat-icon",10),i["\u0275\u0275text"](2,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function F(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",11),i["\u0275\u0275element"](1,"span",12),i["\u0275\u0275pipe"](2,"highlight"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind2"](2,2,n.alias,a.searchText),i["\u0275\u0275sanitizeHtml"])}}function B(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"span",18),i["\u0275\u0275text"](2,"entity.no-aliases-found"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}var M=function(e){return{alias:e}};function P(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,n.translate.get("entity.no-alias-matching",i["\u0275\u0275pureFunction1"](3,M,n.truncate.transform(n.searchText,!0,6,"..."))))," ")}}function D(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-option",13),i["\u0275\u0275elementStart"](1,"div",14),i["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),i["\u0275\u0275template"](2,B,3,0,"div",15),i["\u0275\u0275template"](3,P,3,5,"ng-template",null,16,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementStart"](5,"span"),i["\u0275\u0275elementStart"](6,"a",17),i["\u0275\u0275listener"]("click",function(e){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"]();return t.createEntityAlias(e,t.searchText)}),i["\u0275\u0275text"](7,"entity.create-new-alias"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=i["\u0275\u0275reference"](4),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",null),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!r.textIsNotEmpty(r.searchText))("ngIfElse",a)}}function k(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"entity.alias-required")," "))}var _=function(){function e(e,t,n,i,a,r){this.store=e,this.errorStateMatcher=t,this.entityService=n,this.translate=i,this.truncate=a,this.fb=r,this.entityAliasList=[],this.searchText="",this.dirty=!1,this.creatingEntityAlias=!1,this.propagateChange=function(e){},this.selectEntityAliasFormGroup=this.fb.group({entityAlias:[null]})}return Object.defineProperty(e.prototype,"tbRequired",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(u.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){for(var e=this,t=this.aliasController.getEntityAliases(),n=0,i=Object.keys(t);n<i.length;n++){var a=i[n];this.allowedEntityTypes&&this.allowedEntityTypes.length&&!this.entityService.filterAliasByEntityTypes(t[a],this.allowedEntityTypes)||this.entityAliasList.push(t[a])}this.filteredEntityAliases=this.selectEntityAliasFormGroup.get("entityAlias").valueChanges.pipe(Object(o.a)(function(t){var n;n="string"!=typeof t&&t?t:null,e.updateView(n),null===t&&e.clear()}),Object(s.a)(function(e){return e?"string"==typeof e?e:e.alias:""}),Object(l.b)(function(t){return e.fetchEntityAliases(t)}),Object(c.a)())},e.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=this.tbRequired&&!this.modelValue;return n||i},e.prototype.ngAfterViewInit=function(){},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.selectEntityAliasFormGroup.disable({emitEvent:!1}):this.selectEntityAliasFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){this.searchText="";var t=null;if(null!=e){var n=this.aliasController.getEntityAliases();n[e]&&(t=n[e])}null!=t?(this.modelValue=t.id,this.selectEntityAliasFormGroup.get("entityAlias").patchValue(t,{emitEvent:!1})):(this.modelValue=null,this.selectEntityAliasFormGroup.get("entityAlias").patchValue("",{emitEvent:!1})),this.dirty=!0},e.prototype.onFocus=function(){this.dirty&&(this.selectEntityAliasFormGroup.get("entityAlias").updateValueAndValidity({onlySelf:!0,emitEvent:!0}),this.dirty=!1)},e.prototype.updateView=function(e){var t=e?e.id:null;this.modelValue!==t&&(this.modelValue=t,this.propagateChange(this.modelValue))},e.prototype.displayEntityAliasFn=function(e){return e?e.alias:void 0},e.prototype.fetchEntityAliases=function(e){this.searchText=e;var t=this.entityAliasList;return e&&e.length&&(t=this.entityAliasList.filter(function(t){return t.alias.toLowerCase().includes(e.toLowerCase())})),Object(r.a)(t)},e.prototype.clear=function(e){var t=this;void 0===e&&(e=""),this.entityAliasInput.nativeElement.value=e,this.selectEntityAliasFormGroup.get("entityAlias").patchValue(e,{emitEvent:!0}),setTimeout(function(){t.entityAliasInput.nativeElement.blur(),t.entityAliasInput.nativeElement.focus()},0)},e.prototype.textIsNotEmpty=function(e){return!!(e&&null!=e&&e.length>0)},e.prototype.entityAliasEnter=function(e){e.keyCode===f.ENTER&&(e.preventDefault(),this.modelValue||this.createEntityAlias(e,this.searchText))},e.prototype.createEntityAlias=function(e,t){var n=this;e.preventDefault(),this.creatingEntityAlias=!0,this.callbacks&&this.callbacks.createEntityAlias&&this.callbacks.createEntityAlias(t,this.allowedEntityTypes).subscribe(function(e){e?(n.entityAliasList.push(e),n.modelValue=e.id,n.selectEntityAliasFormGroup.get("entityAlias").patchValue(e,{emitEvent:!0}),n.propagateChange(n.modelValue)):setTimeout(function(){n.entityAliasInput.nativeElement.blur(),n.entityAliasInput.nativeElement.focus()},0)})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](g.Store),i["\u0275\u0275directiveInject"](h.ErrorStateMatcher,4),i["\u0275\u0275directiveInject"](d.a),i["\u0275\u0275directiveInject"](A.TranslateService),i["\u0275\u0275directiveInject"](p.a),i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-entity-alias-select"]],viewQuery:function(e,t){if(1&e&&(i["\u0275\u0275viewQuery"](S,1),i["\u0275\u0275viewQuery"](E,1,m.MatAutocompleteTrigger),i["\u0275\u0275viewQuery"](I,3)),2&e){var n=void 0;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.entityAliasAutocomplete=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.autoCompleteTrigger=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.entityAliasInput=n.first)}},inputs:{aliasController:"aliasController",allowedEntityTypes:"allowedEntityTypes",callbacks:"callbacks",showLabel:"showLabel",tbRequired:"tbRequired",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:h.ErrorStateMatcher,useExisting:e}])],decls:13,vars:18,consts:[[1,"mat-block",3,"floatLabel","hideRequiredMarker","formGroup"],[4,"ngIf"],["matInput","","type","text","formControlName","entityAlias",3,"placeholder","required","matAutocomplete","focusin","keydown","keypress"],["entityAliasInput",""],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"tb-autocomplete",3,"displayWith"],["entityAliasAutocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["class","tb-not-found",3,"value",4,"ngIf"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"material-icons"],[3,"value"],[3,"innerHTML"],[1,"tb-not-found",3,"value"],[1,"tb-not-found-content",3,"click"],[4,"ngIf","ngIfElse"],["searchNotEmpty",""],["translate","",3,"click"],["translate",""]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-form-field",0),i["\u0275\u0275template"](1,O,1,0,"mat-label",1),i["\u0275\u0275elementStart"](2,"input",2,3),i["\u0275\u0275listener"]("focusin",function(){return t.onFocus()})("keydown",function(e){return t.entityAliasEnter(e)})("keypress",function(e){return t.entityAliasEnter(e)}),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](5,T,3,0,"button",4),i["\u0275\u0275elementStart"](6,"mat-autocomplete",5,6),i["\u0275\u0275template"](8,F,3,5,"mat-option",7),i["\u0275\u0275pipe"](9,"async"),i["\u0275\u0275template"](10,D,8,3,"mat-option",8),i["\u0275\u0275pipe"](11,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](12,k,3,3,"mat-error",1),i["\u0275\u0275elementEnd"]()),2&e){var n,a=i["\u0275\u0275reference"](7);i["\u0275\u0275property"]("floatLabel",t.showLabel?"auto":"always")("hideRequiredMarker",!t.showLabel)("formGroup",t.selectEntityAliasFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.showLabel),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](4,12,"entity.entity-alias")),i["\u0275\u0275property"]("required",t.tbRequired)("matAutocomplete",a),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",t.selectEntityAliasFormGroup.get("entityAlias").value&&!t.disabled),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("displayWith",t.displayEntityAliasFn),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](9,14,t.filteredEntityAliases)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!(null!=(n=i["\u0275\u0275pipeBind1"](11,16,t.filteredEntityAliases))&&n.length)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.modelValue&&t.tbRequired)}},directives:[b.MatFormField,a.NgControlStatusGroup,a.FormGroupDirective,y.NgIf,v.MatInput,a.DefaultValueAccessor,m.MatAutocompleteTrigger,a.NgControlStatus,a.FormControlName,a.RequiredValidator,m.MatAutocomplete,y.NgForOf,b.MatLabel,C.MatButton,b.MatSuffix,x.MatIcon,h.MatOption,A.TranslateDirective,b.MatError],pipes:[A.TranslatePipe,y.AsyncPipe,w.a],styles:["[_nghost-%COMP%]     .mat-form-field-infix{border-top:none}"]}),e}();0,void 0},JTB5:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("mrSG"),a=n("RxGS"),r=n("fXoL"),o=n("l7P3"),s=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"entitiesTableConfig",{get:function(){return this.entitiesTableConfigValue},set:function(e){this.setEntitiesTableConfig(e)},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){},t.prototype.setEntitiesTableConfig=function(e){this.entitiesTableConfigValue=e},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](o.Store))},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,inputs:{entitiesTableConfig:"entitiesTableConfig"},features:[r["\u0275\u0275InheritDefinitionFeature"]]}),t}(a.a);0,void 0},JoHb:function(e,t,n){"use strict";n.d(t,"a",function(){return Z});var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("//Q6"),s=n("l7P3"),l=n("XiUz"),c=n("kmnG"),d=n("sYmb"),u=n("qFsG"),p=n("ofXK");function m(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-devices-required")," "))}function f(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-devices-range")," "))}function h(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-assets-required")," "))}function g(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-assets-range")," "))}function A(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-customers-required")," "))}function b(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-customers-range")," "))}function y(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-users-required")," "))}function v(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-users-range")," "))}function C(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-dashboards-required")," "))}function x(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-dashboards-range")," "))}function w(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-rule-chains-required")," "))}function S(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-rule-chains-range")," "))}function E(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-resources-sum-data-size-required")," "))}function I(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-resources-sum-data-size-range")," "))}function O(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-ota-packages-sum-data-size-required")," "))}function T(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-ota-packages-sum-data-size-range")," "))}function F(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-transport-messages-range")," "))}function B(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-transport-messages-required")," "))}function M(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-transport-data-points-required")," "))}function P(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-transport-data-points-range")," "))}function D(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-r-e-executions-required")," "))}function k(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-r-e-executions-range")," "))}function _(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-j-s-executions-required")," "))}function L(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-j-s-executions-range")," "))}function j(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-d-p-storage-days-required")," "))}function N(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-d-p-storage-days-range")," "))}function R(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.default-storage-ttl-days-required")," "))}function U(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.default-storage-ttl-days-range")," "))}function V(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.alarms-ttl-days-required")," "))}function Q(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.alarms-ttl-days-days-range")," "))}function G(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.rpc-ttl-days-required")," "))}function H(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.rpc-ttl-days-days-range")," "))}function K(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-rule-node-executions-per-message-required")," "))}function q(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-rule-node-executions-per-message-range")," "))}function z(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-emails-required")," "))}function W(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-emails-range")," "))}function X(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-sms-required")," "))}function $(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-sms-range")," "))}function J(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-created-alarms-required")," "))}function Y(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-created-alarms-range")," "))}var Z=function(){function e(e,t){var n=this;this.store=e,this.fb=t,this.propagateChange=function(e){},this.defaultTenantProfileConfigurationFormGroup=this.fb.group({maxDevices:[null,[a.Validators.required,a.Validators.min(0)]],maxAssets:[null,[a.Validators.required,a.Validators.min(0)]],maxCustomers:[null,[a.Validators.required,a.Validators.min(0)]],maxUsers:[null,[a.Validators.required,a.Validators.min(0)]],maxDashboards:[null,[a.Validators.required,a.Validators.min(0)]],maxRuleChains:[null,[a.Validators.required,a.Validators.min(0)]],maxResourcesInBytes:[null,[a.Validators.required,a.Validators.min(0)]],maxOtaPackagesInBytes:[null,[a.Validators.required,a.Validators.min(0)]],transportTenantMsgRateLimit:[null,[]],transportTenantTelemetryMsgRateLimit:[null,[]],transportTenantTelemetryDataPointsRateLimit:[null,[]],transportDeviceMsgRateLimit:[null,[]],transportDeviceTelemetryMsgRateLimit:[null,[]],transportDeviceTelemetryDataPointsRateLimit:[null,[]],maxTransportMessages:[null,[a.Validators.required,a.Validators.min(0)]],maxTransportDataPoints:[null,[a.Validators.required,a.Validators.min(0)]],maxREExecutions:[null,[a.Validators.required,a.Validators.min(0)]],maxJSExecutions:[null,[a.Validators.required,a.Validators.min(0)]],maxDPStorageDays:[null,[a.Validators.required,a.Validators.min(0)]],maxRuleNodeExecutionsPerMessage:[null,[a.Validators.required,a.Validators.min(0)]],maxEmails:[null,[a.Validators.required,a.Validators.min(0)]],maxSms:[null,[a.Validators.required,a.Validators.min(0)]],maxCreatedAlarms:[null,[a.Validators.required,a.Validators.min(0)]],defaultStorageTtlDays:[null,[a.Validators.required,a.Validators.min(0)]],alarmsTtlDays:[null,[a.Validators.required,a.Validators.min(0)]],rpcTtlDays:[null,[a.Validators.required,a.Validators.min(0)]]}),this.defaultTenantProfileConfigurationFormGroup.valueChanges.subscribe(function(){n.updateModel()})}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(r.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.defaultTenantProfileConfigurationFormGroup.disable({emitEvent:!1}):this.defaultTenantProfileConfigurationFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){Object(o.o)(e)&&this.defaultTenantProfileConfigurationFormGroup.patchValue(e,{emitEvent:!1})},e.prototype.updateModel=function(){var e=null;this.defaultTenantProfileConfigurationFormGroup.valid&&(e=this.defaultTenantProfileConfigurationFormGroup.getRawValue()),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.Store),i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-default-tenant-profile-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:145,vars:41,consts:[["fxLayout","column",3,"formGroup"],[1,"mat-block"],["translate",""],["matInput","","required","","min","0","step","1","formControlName","maxDevices","type","number"],[4,"ngIf"],["matInput","","required","","min","0","step","1","formControlName","maxAssets","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxCustomers","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxUsers","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxDashboards","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxRuleChains","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxResourcesInBytes","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxOtaPackagesInBytes","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxTransportMessages","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxTransportDataPoints","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxREExecutions","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxJSExecutions","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxDPStorageDays","type","number"],["matInput","","required","","min","0","step","1","formControlName","defaultStorageTtlDays","type","number"],["matInput","","required","","min","0","step","1","formControlName","alarmsTtlDays","type","number"],["matInput","","required","","min","0","step","1","formControlName","rpcTtlDays","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxRuleNodeExecutionsPerMessage","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxEmails","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxSms","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxCreatedAlarms","type","number"],["matInput","","formControlName","transportTenantMsgRateLimit"],["matInput","","formControlName","transportTenantTelemetryMsgRateLimit"],["matInput","","formControlName","transportTenantTelemetryDataPointsRateLimit"],["matInput","","formControlName","transportDeviceMsgRateLimit"],["matInput","","formControlName","transportDeviceTelemetryMsgRateLimit"],["matInput","","formControlName","transportDeviceTelemetryDataPointsRateLimit"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"section",0),i["\u0275\u0275elementStart"](1,"mat-form-field",1),i["\u0275\u0275elementStart"](2,"mat-label",2),i["\u0275\u0275text"](3,"tenant-profile.maximum-devices"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"input",3),i["\u0275\u0275template"](5,m,3,3,"mat-error",4),i["\u0275\u0275template"](6,f,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"mat-form-field",1),i["\u0275\u0275elementStart"](8,"mat-label",2),i["\u0275\u0275text"](9,"tenant-profile.maximum-assets"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](10,"input",5),i["\u0275\u0275template"](11,h,3,3,"mat-error",4),i["\u0275\u0275template"](12,g,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"mat-form-field",1),i["\u0275\u0275elementStart"](14,"mat-label",2),i["\u0275\u0275text"](15,"tenant-profile.maximum-customers"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](16,"input",6),i["\u0275\u0275template"](17,A,3,3,"mat-error",4),i["\u0275\u0275template"](18,b,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](19,"mat-form-field",1),i["\u0275\u0275elementStart"](20,"mat-label",2),i["\u0275\u0275text"](21,"tenant-profile.maximum-users"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](22,"input",7),i["\u0275\u0275template"](23,y,3,3,"mat-error",4),i["\u0275\u0275template"](24,v,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](25,"mat-form-field",1),i["\u0275\u0275elementStart"](26,"mat-label",2),i["\u0275\u0275text"](27,"tenant-profile.maximum-dashboards"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](28,"input",8),i["\u0275\u0275template"](29,C,3,3,"mat-error",4),i["\u0275\u0275template"](30,x,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](31,"mat-form-field",1),i["\u0275\u0275elementStart"](32,"mat-label",2),i["\u0275\u0275text"](33,"tenant-profile.maximum-rule-chains"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](34,"input",9),i["\u0275\u0275template"](35,w,3,3,"mat-error",4),i["\u0275\u0275template"](36,S,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](37,"mat-form-field",1),i["\u0275\u0275elementStart"](38,"mat-label",2),i["\u0275\u0275text"](39,"tenant-profile.maximum-resources-sum-data-size"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](40,"input",10),i["\u0275\u0275template"](41,E,3,3,"mat-error",4),i["\u0275\u0275template"](42,I,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](43,"mat-form-field",1),i["\u0275\u0275elementStart"](44,"mat-label",2),i["\u0275\u0275text"](45,"tenant-profile.maximum-ota-packages-sum-data-size"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](46,"input",11),i["\u0275\u0275template"](47,O,3,3,"mat-error",4),i["\u0275\u0275template"](48,T,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](49,"mat-form-field",1),i["\u0275\u0275elementStart"](50,"mat-label",2),i["\u0275\u0275text"](51,"tenant-profile.max-transport-messages"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](52,"input",12),i["\u0275\u0275template"](53,F,3,3,"mat-error",4),i["\u0275\u0275template"](54,B,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](55,"mat-form-field",1),i["\u0275\u0275elementStart"](56,"mat-label",2),i["\u0275\u0275text"](57,"tenant-profile.max-transport-data-points"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](58,"input",13),i["\u0275\u0275template"](59,M,3,3,"mat-error",4),i["\u0275\u0275template"](60,P,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](61,"mat-form-field",1),i["\u0275\u0275elementStart"](62,"mat-label",2),i["\u0275\u0275text"](63,"tenant-profile.max-r-e-executions"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](64,"input",14),i["\u0275\u0275template"](65,D,3,3,"mat-error",4),i["\u0275\u0275template"](66,k,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](67,"mat-form-field",1),i["\u0275\u0275elementStart"](68,"mat-label",2),i["\u0275\u0275text"](69,"tenant-profile.max-j-s-executions"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](70,"input",15),i["\u0275\u0275template"](71,_,3,3,"mat-error",4),i["\u0275\u0275template"](72,L,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](73,"mat-form-field",1),i["\u0275\u0275elementStart"](74,"mat-label",2),i["\u0275\u0275text"](75,"tenant-profile.max-d-p-storage-days"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](76,"input",16),i["\u0275\u0275template"](77,j,3,3,"mat-error",4),i["\u0275\u0275template"](78,N,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](79,"mat-form-field",1),i["\u0275\u0275elementStart"](80,"mat-label",2),i["\u0275\u0275text"](81,"tenant-profile.default-storage-ttl-days"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](82,"input",17),i["\u0275\u0275template"](83,R,3,3,"mat-error",4),i["\u0275\u0275template"](84,U,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](85,"mat-form-field",1),i["\u0275\u0275elementStart"](86,"mat-label",2),i["\u0275\u0275text"](87,"tenant-profile.alarms-ttl-days"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](88,"input",18),i["\u0275\u0275template"](89,V,3,3,"mat-error",4),i["\u0275\u0275template"](90,Q,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](91,"mat-form-field",1),i["\u0275\u0275elementStart"](92,"mat-label",2),i["\u0275\u0275text"](93,"tenant-profile.rpc-ttl-days"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](94,"input",19),i["\u0275\u0275template"](95,G,3,3,"mat-error",4),i["\u0275\u0275template"](96,H,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](97,"mat-form-field",1),i["\u0275\u0275elementStart"](98,"mat-label",2),i["\u0275\u0275text"](99,"tenant-profile.max-rule-node-executions-per-message"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](100,"input",20),i["\u0275\u0275template"](101,K,3,3,"mat-error",4),i["\u0275\u0275template"](102,q,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](103,"mat-form-field",1),i["\u0275\u0275elementStart"](104,"mat-label",2),i["\u0275\u0275text"](105,"tenant-profile.max-emails"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](106,"input",21),i["\u0275\u0275template"](107,z,3,3,"mat-error",4),i["\u0275\u0275template"](108,W,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](109,"mat-form-field",1),i["\u0275\u0275elementStart"](110,"mat-label",2),i["\u0275\u0275text"](111,"tenant-profile.max-sms"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](112,"input",22),i["\u0275\u0275template"](113,X,3,3,"mat-error",4),i["\u0275\u0275template"](114,$,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](115,"mat-form-field",1),i["\u0275\u0275elementStart"](116,"mat-label",2),i["\u0275\u0275text"](117,"tenant-profile.max-created-alarms"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](118,"input",23),i["\u0275\u0275template"](119,J,3,3,"mat-error",4),i["\u0275\u0275template"](120,Y,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](121,"mat-form-field",1),i["\u0275\u0275elementStart"](122,"mat-label",2),i["\u0275\u0275text"](123,"tenant-profile.transport-tenant-msg-rate-limit"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](124,"input",24),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](125,"mat-form-field",1),i["\u0275\u0275elementStart"](126,"mat-label",2),i["\u0275\u0275text"](127,"tenant-profile.transport-tenant-telemetry-msg-rate-limit"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](128,"input",25),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](129,"mat-form-field",1),i["\u0275\u0275elementStart"](130,"mat-label",2),i["\u0275\u0275text"](131,"tenant-profile.transport-tenant-telemetry-data-points-rate-limit"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](132,"input",26),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](133,"mat-form-field",1),i["\u0275\u0275elementStart"](134,"mat-label",2),i["\u0275\u0275text"](135,"tenant-profile.transport-device-msg-rate-limit"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](136,"input",27),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](137,"mat-form-field",1),i["\u0275\u0275elementStart"](138,"mat-label",2),i["\u0275\u0275text"](139,"tenant-profile.transport-device-telemetry-msg-rate-limit"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](140,"input",28),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](141,"mat-form-field",1),i["\u0275\u0275elementStart"](142,"mat-label",2),i["\u0275\u0275text"](143,"tenant-profile.transport-device-telemetry-data-points-rate-limit"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](144,"input",29),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.defaultTenantProfileConfigurationFormGroup),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxDevices").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxDevices").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxAssets").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxAssets").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxCustomers").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxCustomers").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxUsers").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxUsers").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxDashboards").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxDashboards").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxRuleChains").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxRuleChains").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxResourcesInBytes").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxResourcesInBytes").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxOtaPackagesInBytes").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxOtaPackagesInBytes").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxTransportMessages").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxTransportMessages").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxTransportDataPoints").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxTransportDataPoints").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxREExecutions").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxREExecutions").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxJSExecutions").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxJSExecutions").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxDPStorageDays").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxDPStorageDays").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("defaultStorageTtlDays").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("defaultStorageTtlDays").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("alarmsTtlDays").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("alarmsTtlDays").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("rpcTtlDays").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("rpcTtlDays").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxRuleNodeExecutionsPerMessage").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxRuleNodeExecutionsPerMessage").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxEmails").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxEmails").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxSms").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxSms").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxCreatedAlarms").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.defaultTenantProfileConfigurationFormGroup.get("maxCreatedAlarms").hasError("min")))},directives:[l.f,a.NgControlStatusGroup,a.FormGroupDirective,c.MatFormField,c.MatLabel,d.TranslateDirective,u.MatInput,a.DefaultValueAccessor,a.NumberValueAccessor,a.RequiredValidator,a.NgControlStatus,a.FormControlName,p.NgIf,c.MatError],pipes:[d.TranslatePipe],encapsulation:2}),e}();0,void 0},KJJU:function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a}),function(e){e.DISPLAY_ACTIVATION_LINK="DISPLAY_ACTIVATION_LINK",e.SEND_ACTIVATION_MAIL="SEND_ACTIVATION_MAIL"}(i||(i={}));var a=new Map([[i.DISPLAY_ACTIVATION_LINK,"user.display-activation-link"],[i.SEND_ACTIVATION_MAIL,"user.send-activation-mail"]])},"LBt+":function(e,t,n){"use strict";n.d(t,"a",function(){return I});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("4j5O"),d=n("l7P3"),u=n("tyNb"),p=n("sYmb"),m=n("/t3+"),f=n("XiUz"),h=n("bTqV"),g=n("NFeN"),A=n("ofXK"),b=n("kmnG"),y=n("qFsG"),v=n("bSwM"),C=n("bv9b");function x(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",17)}function w(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.state-name-required")," "))}function S(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.state-id-required")," "))}function E(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.state-id-exists")," "))}var I=function(e){function t(t,n,a,r,o,l,c,d){var u=e.call(this,t,n,o)||this;return u.store=t,u.router=n,u.data=a,u.errorStateMatcher=r,u.dialogRef=o,u.fb=l,u.translate=c,u.dashboardUtils=d,u.submitted=!1,u.states=u.data.states,u.isAdd=u.data.isAdd,u.isAdd?(u.state=Object(i.a)({id:""},u.dashboardUtils.createDefaultState("",!1)),u.prevStateId=""):(u.state=u.data.state,u.prevStateId=u.state.id),u.stateFormGroup=u.fb.group({name:[u.state.name,[s.Validators.required]],id:[u.state.id,[s.Validators.required,u.validateDuplicateStateId()]],root:[u.state.root,[]]}),u.stateFormGroup.get("name").valueChanges.subscribe(function(e){u.checkStateName(e)}),u.stateFormGroup.get("id").valueChanges.subscribe(function(e){u.stateIdTouched=!0}),u}return Object(i.d)(t,e),t.prototype.checkStateName=function(e){e&&!this.stateIdTouched&&this.isAdd&&this.stateFormGroup.get("id").setValue(e.toLowerCase().replace(/\W/g,"_"),{emitEvent:!1})},t.prototype.validateDuplicateStateId=function(){var e=this;return function(t){var n=t.value;if(n&&(e.states[n]&&n!==e.prevStateId))return{stateExists:!0};return null}},t.prototype.ngOnInit=function(){},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.save=function(){this.submitted=!0,this.state=Object(i.a)(Object(i.a)({},this.state),this.stateFormGroup.value),this.state.id=this.state.id.trim(),this.dialogRef.close(this.state)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](d.Store),a["\u0275\u0275directiveInject"](u.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder),a["\u0275\u0275directiveInject"](p.TranslateService),a["\u0275\u0275directiveInject"](c.a))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-dashboard-state-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:36,vars:26,consts:[[2,"min-width","480px",3,"formGroup","ngSubmit"],["color","accent"],["translate",""],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],["fxLayout","column",3,"disabled"],[1,"mat-block"],["required","","matInput","","formControlName","name"],[4,"ngIf"],["required","","matInput","","formControlName","id"],["formControlName","root"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2",2),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",3),a["\u0275\u0275elementStart"](5,"button",4),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](6,"mat-icon",5),a["\u0275\u0275text"](7,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,x,1,0,"mat-progress-bar",6),a["\u0275\u0275pipe"](9,"async"),a["\u0275\u0275elementStart"](10,"div",7),a["\u0275\u0275elementStart"](11,"fieldset",8),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"mat-form-field",9),a["\u0275\u0275elementStart"](14,"mat-label",2),a["\u0275\u0275text"](15,"dashboard.state-name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](16,"input",10),a["\u0275\u0275template"](17,w,3,3,"mat-error",11),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"mat-form-field",9),a["\u0275\u0275elementStart"](19,"mat-label",2),a["\u0275\u0275text"](20,"dashboard.state-id"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](21,"input",12),a["\u0275\u0275template"](22,S,3,3,"mat-error",11),a["\u0275\u0275template"](23,E,3,3,"mat-error",11),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](24,"mat-checkbox",13),a["\u0275\u0275text"](25),a["\u0275\u0275pipe"](26,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](27,"div",14),a["\u0275\u0275elementStart"](28,"button",15),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](29,"async"),a["\u0275\u0275text"](30),a["\u0275\u0275pipe"](31,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](32,"button",16),a["\u0275\u0275pipe"](33,"async"),a["\u0275\u0275text"](34),a["\u0275\u0275pipe"](35,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.stateFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.isAdd?"dashboard.add-state":"dashboard.edit-state"),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](9,12,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](12,14,t.isLoading$)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",t.stateFormGroup.get("name").hasError("required")),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",t.stateFormGroup.get("id").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.stateFormGroup.get("id").hasError("stateExists")),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](26,16,"dashboard.is-root-state")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](29,18,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](31,20,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](33,22,t.isLoading$)||t.stateFormGroup.invalid||!t.stateFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](35,24,t.isAdd?"action.add":"action.save")," "))},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,m.MatToolbar,p.TranslateDirective,f.b,h.MatButton,g.MatIcon,A.NgIf,o.MatDialogContent,f.f,b.MatFormField,b.MatLabel,y.MatInput,s.DefaultValueAccessor,s.RequiredValidator,s.NgControlStatus,s.FormControlName,v.MatCheckbox,o.MatDialogActions,f.e,C.MatProgressBar,b.MatError],pipes:[A.AsyncPipe,p.TranslatePipe],encapsulation:2}),t}(l.a);0,void 0},LCzJ:function(e,t,n){"use strict";n.d(t,"a",function(){return B});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("DaoB"),c=n("y7gY"),d=n("U3y+"),u=n("cp0P"),p=n("1y+p"),m=n("j37L"),f=n("YnEf"),h=n("gmuX"),g=n("C4fA"),A=n("8km5"),b=n("l7P3"),y=n("tyNb"),v=n("/t3+"),C=n("XiUz"),x=n("bTqV"),w=n("NFeN"),S=n("ofXK"),E=n("EdYI"),I=n("bv9b"),O=n("sYmb");function T(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",13)}function F(e,t){1&e&&a["\u0275\u0275element"](0,"div",14)}var B=function(e){function t(t,n,i,a,r,o,s,l,c,d,u,p){var m=e.call(this,t,n,u)||this;return m.store=t,m.router=n,m.data=i,m.deviceService=a,m.edgeService=r,m.assetService=o,m.entityViewService=s,m.dashboardService=l,m.ruleChainService=c,m.errorStateMatcher=d,m.dialogRef=u,m.fb=p,m.submitted=!1,m.entityType=m.data.entityType,m}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){switch(this.addEntitiesToEdgeFormGroup=this.fb.group({entityIds:[null,[s.Validators.required]]}),this.subType="",this.entityType){case d.b.DEVICE:this.assignToEdgeTitle="device.assign-device-to-edge-title",this.assignToEdgeText="device.assign-device-to-edge-text";break;case d.b.RULE_CHAIN:this.assignToEdgeTitle="rulechain.assign-rulechain-to-edge-title",this.assignToEdgeText="rulechain.assign-rulechain-to-edge-text",this.subType=A.a.EDGE;break;case d.b.ASSET:this.assignToEdgeTitle="asset.assign-asset-to-edge-title",this.assignToEdgeText="asset.assign-asset-to-edge-text";break;case d.b.ENTITY_VIEW:this.assignToEdgeTitle="entity-view.assign-entity-view-to-edge-title",this.assignToEdgeText="entity-view.assign-entity-view-to-edge-text";break;case d.b.DASHBOARD:this.assignToEdgeTitle="dashboard.assign-dashboard-to-edge-title",this.assignToEdgeText="dashboard.assign-dashboard-to-edge-text"}},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.cancel=function(){this.dialogRef.close(!1)},t.prototype.assign=function(){var e=this;this.submitted=!0;var t=this.addEntitiesToEdgeFormGroup.get("entityIds").value,n=[];t.forEach(function(t){n.push(e.getAssignToEdgeTask(e.data.edgeId,t,e.entityType))}),Object(u.a)(n).subscribe(function(){e.dialogRef.close(!0)})},t.prototype.getAssignToEdgeTask=function(e,t,n){switch(n){case d.b.DEVICE:return this.deviceService.assignDeviceToEdge(e,t);case d.b.ASSET:return this.assetService.assignAssetToEdge(e,t);case d.b.ENTITY_VIEW:return this.entityViewService.assignEntityViewToEdge(e,t);case d.b.DASHBOARD:return this.dashboardService.assignDashboardToEdge(e,t);case d.b.RULE_CHAIN:return this.ruleChainService.assignRuleChainToEdge(e,t)}},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](b.Store),a["\u0275\u0275directiveInject"](y.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](p.a),a["\u0275\u0275directiveInject"](m.a),a["\u0275\u0275directiveInject"](f.a),a["\u0275\u0275directiveInject"](g.a),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-add-entities-to-edge-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:29,vars:30,consts:[[3,"formGroup","ngSubmit"],["fxLayout","row","color","accent"],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["formControlName","entityIds","required","",3,"entityType","subType"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button",2,"margin-right","20px",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.assign()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,T,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,F,1,0,"div",6),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275elementStart"](14,"fieldset",8),a["\u0275\u0275pipe"](15,"async"),a["\u0275\u0275elementStart"](16,"span"),a["\u0275\u0275text"](17),a["\u0275\u0275pipe"](18,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](19,"tb-entity-list",9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](20,"div",10),a["\u0275\u0275elementStart"](21,"button",11),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](22,"async"),a["\u0275\u0275text"](23),a["\u0275\u0275pipe"](24,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](25,"button",12),a["\u0275\u0275pipe"](26,"async"),a["\u0275\u0275text"](27),a["\u0275\u0275pipe"](28,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.addEntitiesToEdgeFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,12,t.assignToEdgeTitle)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,14,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,16,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](15,18,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](18,20,t.assignToEdgeText)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("entityType",t.entityType)("subType",t.subType),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](22,22,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](24,24,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](26,26,t.isLoading$)||t.addEntitiesToEdgeFormGroup.invalid||!t.addEntitiesToEdgeFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](28,28,"action.assign")," "))},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,v.MatToolbar,C.f,C.b,x.MatButton,w.MatIcon,S.NgIf,o.MatDialogContent,E.a,s.NgControlStatus,s.FormControlName,s.RequiredValidator,o.MatDialogActions,C.e,I.MatProgressBar],pipes:[O.TranslatePipe,S.AsyncPipe],encapsulation:2}),t}(h.a);0,void 0},Lm6k:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return N});var i='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/id/entity-id.ts#L20">EntityId</a>',a='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/base-data.ts#L22">Base data</a>',r='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/telemetry/telemetry.models.ts#L37">Attribute scope</a>',o='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/entity-type.models.ts#L36">EntityType</a>',s='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/page/page-data.ts#L17">PageData</a>',l='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/device.models.ts#L33">DeviceInfo</a>',c='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/asset.models.ts#L32">AssetInfo</a>',d='<a href = "https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/entity-view.models.ts#L47">EntityViewInfo</a>',u='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/relation.models.ts#L69">EntityRelationsQuery</a>',p='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/relation.models.ts#L87">EntityRelationInfo</a>',m='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/dashboard.models.ts#L25">DashboardInfo</a>',f='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/device.models.ts#L24">Device</a>',h='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/asset.models.ts#L23">Asset</a>',g='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/entity-view.models.ts#L35">entityView</a>',A='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/relation.models.ts#L79">Entity relation</a>',b='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/dashboard.models.ts#L102">Dashboard</a>',y='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/customer.model.ts#L21">Customer</a>',v='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/telemetry/telemetry.models.ts#L76">Attribute Data</a>',C='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/user.model.ts#L23">User</a>',x='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/device.models.ts#L50">DeviceCredentials</a>',w='<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/query/query.models.ts#L487">Entity filter</a>',S='<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/entity.models.ts#L20">Entity info</a>',E='<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/entity-type.models.ts#L51">Alias Entity Type</a>',I='<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/entity-type.models.ts#L51">Alias filter type</a>',O='<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/alias.models.ts#L150">Entity alias</a>',T='<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/widget.models.ts#L257">Datasource</a>',F='<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/core/api/widget-api.models.ts#L129">State params</a>',B='<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/entity.models.ts#L28">Import entity data</a>',M={name:"pageLink",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/page/page-link.ts#L68">PageLink</a>',description:"Page link object used to perform paginated request."},P={name:"config",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/http-utils.ts#L21">RequestConfig</a>',description:"HTTP request configuration.",optional:!0};function D(e){return{type:"Observable&lt;"+e+"&gt;",description:"An <code>Observable</code> of <code>"+e+"</code> object."}}function k(e){return{type:"Observable&lt;"+e+"&gt;",description:"An <code>Observable</code> of <code>"+e+"</code> variable."}}function _(e){return{type:"Observable&lt;Array&lt;"+e+"&gt;&gt;",description:"An <code>Observable</code> of array of <code>"+e+"</code> objects."}}function L(){return{type:"Observable&lt;Array&lt;"+a+"&lt;"+i+"&gt;&gt;&gt;",description:"An <code>Observable</code> of array of <code>"+a+"</code> objects."}}function j(e){return{type:"Observable&lt;"+s+"&lt;"+e+"&gt;&gt;",description:"An <code>Observable</code> of page result as a <code>"+s+"</code> holding array of <code>"+e+"</code> objects."}}var N={deviceService:{description:'Device Service API<br>See <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/device.service.ts#L37">DeviceService</a> for API reference.',meta:"service",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/device.service.ts#L37">DeviceService</a>',children:{getTenantDeviceInfos:{description:"Get tenant devices",meta:"function",args:[M,{name:"type",type:"string",optional:!0,description:"Device type"},P],return:j(l)},getCustomerDeviceInfos:{description:"Get customer devices",meta:"function",args:[{name:"customerId",type:"string",description:"Id of the customer"},M,{name:"type",type:"string",optional:!0,description:"Device type"},P],return:j(l)},getDevice:{description:"Get device by id",meta:"function",args:[{name:"deviceId",type:"string",description:"Id of the device"},P],return:D(f)},getDevices:{description:"Get devices by ids",meta:"function",args:[{name:"deviceIds",type:"Array&lt;string&gt;",description:"List of device ids"},P],return:_(f)},getDeviceInfo:{description:"Get device info by id",meta:"function",args:[{name:"deviceId",type:"string",description:"Id of the device"},P],return:D(l)},saveDevice:{description:"Save device",meta:"function",args:[{name:"device",type:f,description:"Device object to save"},P],return:D(f)},deleteDevice:{description:"Delete device by id",meta:"function",args:[{name:"deviceId",type:"string",description:"Id of the device"},P],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}},getDeviceTypes:{description:"Get all available devices types",meta:"function",args:[P],return:_('<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/entity-type.models.ts#L295">EntitySubtype</a>')},getDeviceCredentials:{description:"Get device credentials by device id",meta:"function",args:[{name:"deviceId",type:"string",description:"Id of the device"},{name:"sync",type:"boolean",description:"Whether to execute HTTP request synchronously (false by default)",optional:!0},P],return:D(x)},saveDeviceCredentials:{description:"Save device credentials",meta:"function",args:[{name:"deviceCredentials",type:x,description:"Device credentials object to save"},P],return:D(x)},makeDevicePublic:{description:"Make device public (available from public dashboard)",meta:"function",args:[{name:"deviceId",type:"string",description:"Id of the device"},P],return:D(f)},assignDeviceToCustomer:{description:"Assign device to specific customer",meta:"function",args:[{name:"customerId",type:"string",description:"Id of the customer"},{name:"deviceId",type:"string",description:"Id of the device"},P],return:D(f)},unassignDeviceFromCustomer:{description:"Unassign device from any customer",meta:"function",args:[{name:"deviceId",type:"string",description:"Id of the device"},P],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}},sendOneWayRpcCommand:{description:"Send one way (without response) RPC command to the device.",meta:"function",args:[{name:"deviceId",type:"string",description:"Id of the device"},{name:"requestBody",type:"object",description:"Request body to be sent to device"},P],return:{type:"Observable&lt;any&gt;",description:"A command execution <code>Observable</code>."}},sendTwoWayRpcCommand:{description:"Sends two way (with response) RPC command to the device.",meta:"function",args:[{name:"deviceId",type:"string",description:"Id of the device"},{name:"requestBody",type:"object",description:"Request body to be sent to device"},P],return:{type:"Observable&lt;any&gt;",description:"A command execution <code>Observable</code> of response body."}},findByQuery:{description:"Find devices by search query",meta:"function",args:[{name:"query",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/device.models.ts#L57">DeviceSearchQuery</a>',description:"Device search query object"},P],return:_(f)},findByName:{description:"Find device by name",meta:"function",args:[{name:"deviceName",type:"string",description:"Search device name"},P],return:D(f)},claimDevice:{description:"Send claim device request",meta:"function",args:[{name:"deviceName",type:"string",description:"Claiming device name"},P],return:D('<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/device.models.ts#L71">ClaimResult</a>')},unclaimDevice:{description:"Send un-claim device request",meta:"function",args:[{name:"deviceName",type:"string",description:"Device name to un-claim"},P],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}}}},assetService:{description:'Asset Service API<br>See <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/asset.service.ts#L29">AssetService</a> for API reference.',meta:"service",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/asset.service.ts#L29">AssetService</a>',children:{getTenantAssetInfos:{description:"Get tenant assets",meta:"function",args:[M,{name:"type",type:"string",optional:!0,description:"Asset type"},P],return:j(c)},getCustomerAssetInfos:{description:"Get customer assets",meta:"function",args:[{name:"customerId",type:"string",description:"Id of the customer"},M,{name:"type",type:"string",optional:!0,description:"Asset type"},P],return:j(c)},getAsset:{description:"Get asset by id",meta:"function",args:[{name:"assetId",type:"string",description:"Id of the asset"},P],return:D(h)},getAssets:{description:"Get assets by ids",meta:"function",args:[{name:"assetIds",type:"Array&lt;string&gt;",description:"Ids of the assets"},P],return:_(h)},getAssetInfo:{description:"Get asset info by id",meta:"function",args:[{name:"assetId",type:"string",description:"Id of the assets"},P],return:D(c)},saveAsset:{description:"Save asset",meta:"function",args:[{name:"asset",type:h,description:"Asset object to save"},P],return:D(h)},deleteAsset:{description:"Delete asset by id",meta:"function",args:[{name:"assetId",type:"string",description:"Id of the asset"},P],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}},getAssetTypes:{description:"Get all available assets types",meta:"function",args:[P],return:_('<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/entity-type.models.ts#L295">EntitySubtype</a>')},makeAssetPublic:{description:"Make asset public (available from public dashboard)",meta:"function",args:[{name:"assetId",type:"string",description:"Id of the asset"},P],return:D(h)},assignAssetToCustomer:{description:"Assign asset to specific customer",meta:"function",args:[{name:"customerId",type:"string",description:"Id of the customer"},{name:"assetId",type:"string",description:"Id of the asset"},P],return:D(h)},unassignAssetFromCustomer:{description:"Unassign asset from any customer",meta:"function",args:[{name:"assetId",type:"string",description:"Id of the asset"},P],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}},findByQuery:{description:"Find assets by search query",meta:"function",args:[{name:"query",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/asset.models.ts#L37">AssetSearchQuery</a>',description:"Asset search query object"},P],return:_(h)},findByName:{description:"Find asset by name",meta:"function",args:[{name:"assetName",type:"string",description:"Search asset name"},P],return:D(h)}}},entityViewService:{description:'EntityView Service API<br>See <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/entity-view.service.ts#L29">EntityViewService</a> for API reference.',meta:"service",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/entity-view.service.ts#L29">EntityViewService</a>',children:{getTenantEntityViewInfos:{description:"Get tenant entity view infos",meta:"function",args:[M,{name:"type",type:"string",optional:!0,description:"Entity view type"},P],return:j(d)},getCustomerEntityViewInfos:{description:"Get customer entities view infos by id",meta:"function",args:[{name:"customerId",type:"string",description:"Id of the customer"},M,{name:"type",type:"string",optional:!0,description:"Entity view type"},P],return:j(d)},getEntityView:{description:"Get entity view by id",meta:"function",args:[{name:"entityViewId",type:"string",description:"Id of the entity view"},P],return:D(g)},getEntityViewInfo:{description:"Get entity view info by id",meta:"function",args:[{name:"entityViewId",type:"string",description:"Id of the entity view"},P],return:D(d)},saveEntityView:{description:"Save entity view",meta:"function",args:[{name:"entityView",type:g,description:"Entity view object to save"},P],return:D(g)},deleteEntityView:{description:"Delete entity view by id",meta:"function",args:[{name:"entityViewId",type:"string",description:"Id of the entity view"},P],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}},getEntityViewTypes:{description:"Get all available entity view types",meta:"function",args:[P],return:_('<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/entity-type.models.ts#L295">EntitySubtype</a>')},makeEntityViewPublic:{description:"Make entity view public (available from public dashboard)",meta:"function",args:[{name:"entityViewId",type:"string",description:"Id of the entity view"},P],return:D(g)},assignEntityViewToCustomer:{description:"Assign entity view to specific customer",meta:"function",args:[{name:"customerId",type:"string",description:"Id of the customer"},{name:"entityViewId",type:"string",description:"Id of the entity view"},P],return:D(g)},unassignEntityViewFromCustomer:{description:"Unassign entity view from any customer",meta:"function",args:[{name:"entityViewId",type:"string",description:"Id of the entity view"},P],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}},findByQuery:{description:"Find entities view by search query",meta:"function",args:[{name:"query",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/asset.models.ts#L37">AssetSearchQuery</a>',description:"Entity view search query object"},P],return:_(g)}}},customerService:{description:'Customer Service API<br>See <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/customer.service.ts#L28">CustomerService</a> for API reference.',meta:"service",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/customer.service.ts#L28">CustomerService</a>',children:{getCustomer:{description:"Get customer by id",meta:"function",args:[{name:"customerId",type:"string",description:"Id of the customer"},P],return:D(y)},getCustomers:{description:"Get customers by ids",meta:"function",args:[M,P],return:j(y)},saveCustomer:{description:"Save customer",meta:"function",args:[{name:"customer",type:y,description:"Customer object to save"},P],return:D(y)},deleteCustomer:{description:"Delete customer by id",meta:"function",args:[{name:"customerId",type:"string",description:"Id of the customer"},P],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}}}},dashboardService:{description:'Dashboard Service API<br>See <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/dashboard.service.ts#L32">DashboardService</a> for API reference.',meta:"service",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/dashboard.service.ts#L32">DashboardService</a>',children:{getTenantDashboards:{description:"Get tenant dashboards",meta:"function",args:[M,P],return:j(m)},getTenantDashboardsByTenantId:{description:"Get dashboards by tenant id",meta:"function",args:[{name:"tenantId",type:"string",description:"Id of the tenant"},M,P],return:j(m)},getCustomerDashboards:{description:"Get dashboards by customer id",meta:"function",args:[{name:"customerId",type:"string",description:"Id of the customer"},M,P],return:j(m)},getDashboard:{description:"Get dashboard by id",meta:"function",args:[{name:"dashboardId",type:"string",description:"Id of the dashboard"},P],return:D(b)},getDashboardInfo:{description:"Get dashboard info by id",meta:"function",args:[{name:"dashboardId",type:"string",description:"Id of the dashboard"},P],return:D(m)},saveDashboard:{description:"Save dashboard",meta:"function",args:[{name:"dashboard",type:b,description:"Dashboard object to save"},P],return:D(b)},deleteDashboard:{description:"Delete dashboard by id",meta:"function",args:[{name:"dashboardId",type:"string",description:"Id of the dashboard"},P],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}},assignDashboardToCustomer:{description:"Assign dashboard to specific customer",meta:"function",args:[{name:"customerId",type:"string",description:"Id of the customer"},{name:"dashboardId",type:"string",description:"Id of the dashboard"},P],return:D(b)},unassignDashboardFromCustomer:{description:"Unassign dashboard from specific customer",meta:"function",args:[{name:"customerId",type:"string",description:"Id of the customer"},{name:"dashboardId",type:"string",description:"Id of the dashboard"},P],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}},makeDashboardPublic:{description:"Make dashboard public by id",meta:"function",args:[{name:"dashboardId",type:"string",description:"Id of the dashboard"},P],return:D(b)},makeDashboardPrivate:{description:"Make dashboard private by id",meta:"function",args:[{name:"dashboardId",type:"string",description:"Id of the dashboard"},P],return:D(b)},updateDashboardCustomers:{description:"Update customers assigned to dashboard by ids",meta:"function",args:[{name:"dashboardId",type:"string",description:"Id of the dashboard"},{name:"customerIds",type:"Array&lt;string&gt;",description:"Ids of the customers"},P],return:D(b)},addDashboardCustomers:{description:"Assign (Add) customers to dashboard by ids",meta:"function",args:[{name:"dashboardId",type:"string",description:"Id of the dashboard"},{name:"customerIds",type:"Array&lt;string&gt;",description:"Ids of the customers"},P],return:D(b)},removeDashboardCustomers:{description:"Unassign (Remove) customers from dashboard by ids",meta:"function",args:[{name:"dashboardId",type:"string",description:"Id of the dashboard"},{name:"customerIds",type:"Array&lt;string&gt;",description:"Id of the customers"},P],return:D(b)},getPublicDashboardLink:{description:"Get public dashboard link",meta:"function",args:[{name:"dashboard",type:m,description:"dashboard info"}],return:{type:"string|null",description:"Returns dashboard url"}},getServerTimeDiff:{description:"Get time difference",meta:"function",args:[],return:k("number")}}},userService:{description:'User Service API<br>See <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/user.service.ts#L29">UserService</a> for API reference.',meta:"service",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/user.service.ts#L29">UserService</a>',children:{getUsers:{description:"Get  users",meta:"function",args:[M,P],return:j(C)},getTenantAdmins:{description:"Get tenant admins by id",meta:"function",args:[{name:"tenantId",type:"string",description:"Id of the tenant"},M,P],return:j(C)},getCustomerUsers:{description:"Get customer users by id",meta:"function",args:[{name:"customerId",type:"string",description:"Id of the customer"},M,P],return:j(C)},getUser:{description:"Get user by id",meta:"function",args:[{name:"userId",type:"string",description:"Id of the user"},P],return:D(C)},saveUser:{description:"Save user",meta:"function",args:[{name:"user",type:C,description:"User object to save"},{name:"sendActivationMail",type:"boolean",description:"Send activation email",optional:!0},P],return:D(C)},deleteUser:{description:"Delete user by id",meta:"function",args:[{name:"userId",type:"string",description:"Id of the user"},P],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}},setUserCredentialsEnabled:{description:"Set user credentials enabled by id",meta:"function",args:[{name:"userId",type:"string",description:"Id of the user"},{name:"userCredentialsEnabled",type:"boolean",description:"User credentials enabled"},P],return:k("any")},getActivationLink:{description:"Get activation link by id",meta:"function",args:[{name:"userId",type:"string",description:"Id of the user"},P],return:k("string")},sendActivationEmail:{description:"Send activation email",meta:"function",args:[{name:"email",type:"string",description:"Email of the user"},P],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}}}},entityRelationService:{description:'Entity Relation Service API<br>See <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/entity-relation.service.ts#L27">EntityRelationService</a> for API reference.',meta:"service",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/entity-relation.service.ts#L27">EntityRelationService</a>',children:{saveRelation:{description:"Save relation",meta:"function",args:[{name:"relation",type:A,description:"Relation object to save"},P],return:D(A)},deleteRelation:{description:"Delete relation by ids",meta:"function",args:[{name:"fromId",type:i,description:"From-id"},{name:"relationType",type:"string",description:"Relation type"},{name:"toId",type:i,description:"To-id"},P],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}},deleteRelations:{description:"Delete relations by entity id",meta:"function",args:[{name:"entityId",type:i,description:"Entity Id"},P],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}},getRelation:{description:"Get relation by ids",meta:"function",args:[{name:"fromId",type:i,description:"From-id"},{name:"relationType",type:"string",description:"Relation type"},{name:"toId",type:i,description:"To-id"},P],return:D(A)},findByFrom:{description:"Find by from-id",meta:"function",args:[{name:"fromId",type:i,description:"From-id"},P],return:_(A)},findInfoByFrom:{description:"Find info by from-id",meta:"function",args:[{name:"fromId",type:i,description:"From-id"},P],return:_(p)},findByFromAndType:{description:"Find by from-id and relation type",meta:"function",args:[{name:"fromId",type:i,description:"From-id"},{name:"relationType",type:"string",description:"Relation type"},P],return:_(A)},findByTo:{description:"Find by to-id",meta:"function",args:[{name:"toId",type:i,description:"To-id"},P],return:_(A)},findInfoByTo:{description:"Find info by to-id",meta:"function",args:[{name:"toId",type:i,description:"To-id"},P],return:_(p)},findByToAndType:{description:"Find by to-id and relation type",meta:"function",args:[{name:"toId",type:i,description:"To-id"},{name:"relationType",type:"string",description:"Relation type"},P],return:_(A)},findByQuery:{description:"Find by query",meta:"function",args:[{name:"query",type:u,description:"Entity relations query"},P],return:_(A)},findInfoByQuery:{description:"Find info by query",meta:"function",args:[{name:"query",type:u,description:"Entity relations query"},P],return:_(p)}}},attributeService:{description:'Attribute Service API<br>See <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/attribute.service.ts#L28">AttributeService</a> for API reference.',meta:"service",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/attribute.service.ts#L28">AttributeService</a>',children:{getEntityAttributes:{description:"Get entity attributes by id",meta:"function",args:[{name:"entityId",type:i,description:"Id of the entity"},{name:"attributeScope",type:r,description:"Attribute scope"},{name:"keys",type:"Array&lt;string&gt;",description:"Array of the keys"},P],return:_(v)},deleteEntityAttributes:{description:"Delete entity attributes by id",meta:"function",args:[{name:"entityId",type:i,description:"Id of the entity"},{name:"attributeScope",type:r,description:"Attribute scope"},{name:"attributes",type:"array&lt;"+v+"&gt;",description:"Array of the attributes data"},P],return:k("any")},deleteEntityTimeseries:{description:"Delete entity timeseries by id",meta:"function",args:[{name:"entityId",type:i,description:"Id of the entity"},{name:"timeseries",type:"Array&lt;"+v+"&gt;>",description:"Array of the timeseries data"},{name:"deleteAllDataForKeys",type:"boolean",optional:!0,description:"Delete all data for keys"},P],return:k("any")},saveEntityAttributes:{description:"Save entity attributes",meta:"function",args:[{name:"entityId",type:i,description:"Id of the entity"},{name:"attributeScope",type:r,description:"Attribute scope"},{name:"attributes",type:"Array&lt;${attributeDataHref}&gt;>",description:"Array of the attributes data"},P],return:k("any")},saveEntityTimeseries:{description:"Save entity timeseries",meta:"function",args:[{name:"entityId",type:i,description:"Id of the entity"},{name:"timeseriesScope",type:"string",description:"Timeseries scope"},{name:"timeseries",type:"Array&lt;attributeDataHref&gt;",description:"Array of the timeseries data"},P],return:k("any")},getEntityTimeseries:{description:"Get entity timeseries",meta:"function",args:[{name:"entityId",type:i,description:"Id of the entity"},{name:"keys",type:"Array&lt;string&gt;",description:"Array of the keys"},{name:"startTs",type:"number",description:"Start time in milliseconds"},{name:"endTs",type:"number",description:"End time in milliseconds"},{name:"limit",type:"number",description:"Limit of values to receive for each key"},{name:"agg",type:'<a href="https://github.com/thingsboard/thingsboard/blob/a8ea887eacf7729e603ace13ce2d7d89dae82931/ui-ngx/src/app/shared/models/time/time.models.ts#L54">Aggregation Type</a>',description:"Aggregation type"},{name:"interval",type:"number",description:"Aggregation interval"},{name:"orderBy",type:'<a href="https://github.com/thingsboard/thingsboard/blob/627c0577b08452308f925cecb3860e35292c649e/ui-ngx/src/app/shared/models/telemetry/telemetry.models.ts#L95">Data Sort Order</a>',description:"Data order by time"},{name:"useStrictDataTypes",type:"boolean",description:'If "false" all values will be returned as strings'},P],return:k('<a href="https://github.com/thingsboard/thingsboard/blob/627c0577b08452308f925cecb3860e35292c649e/ui-ngx/src/app/shared/models/telemetry/telemetry.models.ts#L91">Timeseries Data</a>')}}},entityService:{description:'Entity Service API<br>See <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/entity.service.ts#L64">EntityService</a> for API reference.',meta:"service",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/entity.service.ts#L64">EntityService</a>',children:{getEntity:{description:"Get entity by id",meta:"function",args:[{name:"entityType",type:o,description:"Entity type"},{name:"entityId",type:"string",description:"Id of the entity"},P],return:{type:"Observable&lt;"+a+"&lt;"+i+"&gt;&gt;",description:"An <code>Observable</code> of <code>"+a+"</code> object."}},getEntities:{description:"Get entities by ids",meta:"function",args:[{name:"entityType",type:o,description:"Entity type"},{name:"entityIds",type:"Array&lt;string&gt;",description:"Ids of the entities"},P],return:L()},getEntitiesByNameFilter:{description:"Get entities by name filter",meta:"function",args:[{name:"entityType",type:o,description:"Entity type"},{name:"entityNameFilter",type:"string",description:"Name filter for the entity"},{name:"pageSize",type:"number",description:"Size of the page"},{name:"subType",type:"string",optional:!0,description:"Subtype"},P],return:L()},findEntityDataByQuery:{description:"Find entity data by query",meta:"function",args:[{name:"query",type:'<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/query/query.models.ts#L555">Entity Data Query</a>',description:"Entity data query"},P],return:j('<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/query/query.models.ts#L567">Entity data</a>')},findAlarmDataByQuery:{description:"Find alarm data by query",meta:"function",args:[{name:"query",type:'<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/query/query.models.ts#L558">Alarm data query</a>',description:"Alarm data query"},P],return:j('<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/query/query.models.ts#L573">Alarm data</a>')},findEntityInfosByFilterAndName:{description:"Find entity infos by filter and name",meta:"function",args:[{name:"filter",type:w,description:"Filter for the entities"},{name:"searchText",type:"string",description:"Search text"},P],return:j(S)},findSingleEntityInfoByEntityFilter:{description:"Find single entity infos by filter",meta:"function",args:[{name:"filter",type:w,description:"Filter for the entity"},P],return:D(S)},getAliasFilterTypesByEntityTypes:{description:"Get alias filter types by entity types",meta:"function",args:[{name:"entityTypes",type:"Array&lt;"+o+"|"+E+"&gt;",description:"Entity types"}],return:{type:"Array&lt;"+I+"$gt;",description:"Array of "+I+" objects"}},filterAliasByEntityTypes:{description:"Filter alias by entity types",meta:"function",args:[{name:"entityAlias",type:O,description:"Alias of the entity"},{name:"entityTypes",type:"Array&lt;"+o+"|"+E+"&gt;",description:"Entity types"}],return:{type:"boolean",description:"Returns <code>boolean</code> variable based on the filter"}},prepareAllowedEntityTypesList:{description:"Prepare allowed entity types list",meta:"function",args:[{name:"allowedEntityTypes",type:"Array&lt;"+o+"|"+E+"&gt;",description:"Entity types"},{name:"useAliasEntityTypes",type:"boolean",description:"Use alias entity types"}],return:{type:"Array&lt;"+o+"|"+E+"&gt;",description:"Returns entity types array"}},getEntityKeys:{description:"Get entity keys by id",meta:"function",args:[{name:"entityId",type:i,description:"Id of the entity"},{name:"query",type:"string",description:"Key name starts with"},{name:"type",type:'<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/telemetry/telemetry.models.ts#L27">Data key type</a>',description:"Datakey type"},P],return:{type:"Observable&lt;Array&lt;string&gt;&gt;",description:"An <code>Observable</code> of array of <code>string</code> variables."}},createDatasourcesFromSubscriptionsInfo:{description:"Create datasources from subscriptions info",meta:"function",args:[{name:"subscriptionsInfo",type:"array<subscriptionInfoHref>",description:"Subscriptions info"}],return:{type:"Array&lt;"+T+"&gt;",description:"Array of <code>"+T+"</code> objects"}},createAlarmSourceFromSubscriptionInfo:{description:"Create alarm source from subscriptions info",meta:"function",args:[{name:"subscriptionInfo",type:'<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/core/api/widget-api.models.ts#L155">Subscription info</a>',description:"Subscription info"}],return:{type:""+T,description:"<code>"+T+"</code> object"}},resolveAlias:{description:"Resolve alias",meta:"function",args:[{name:"entityAlias",type:O,description:"Entity alias"},{name:"stateParams",type:F,description:"State params"}],return:D('<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/core/api/widget-api.models.ts#L88">Alias info</a>')},resolveAliasFilter:{description:"Resolve alias filter",meta:"function",args:[{name:"filter",type:'<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/alias.models.ts#L134">Entity alias filter</a>',description:"Entity alias filter"},{name:"stateParams",type:F,description:"State params"}],return:D('<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/alias.models.ts#L158">Entity alias filter result</a>')},checkEntityAlias:{description:"Check entity alias",meta:"function",args:[{name:"entityAlias",type:O,description:"Entity alias"}],return:k("boolean")},saveEntityParameters:{description:"Save entity parameters",meta:"function",args:[{name:"entityType",type:o,description:"Entity type"},{name:"entityData",type:B,description:"Entity data"},{name:"update",type:"boolean",description:"Update"},P],return:D('<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/entity.models.ts#L42">Import entities result info</a>')},saveEntityData:{description:"Save entity data",meta:"function",args:[{name:"entityId",type:i,description:"Id of the entity"},{name:"entityData",type:B,description:"Entity data"},P],return:k("any")}}},dialogs:{description:'Dialogs Service API<br>See <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/services/dialog.service.ts#L39">DialogService</a> for API reference.',meta:"service",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/services/dialog.service.ts#L39">DialogService</a>',children:{confirm:{description:"Confirm",meta:"function",args:[{name:"title",type:"string",description:"Title"},{name:"message",type:"string",description:"Message"},{name:"cancel",type:"string",optional:!0,description:"Cancel"},{name:"ok",type:"string",optional:!0,description:"Ok"},{name:"fullscreen",type:"boolean",optional:!0,description:"Fullscreen"}],return:k("boolean")},alert:{description:"Alert",meta:"function",args:[{name:"title",type:"string",description:"Title"},{name:"message",type:"string",description:"Message"},{name:"ok",type:"string",optional:!0,description:"Ok"},{name:"fullscreen",type:"boolean",optional:!0,description:"Fullscreen"}],return:k("boolean")},colorPicker:{description:"Color picker",meta:"function",args:[{name:"color",type:"string",description:"\u0421olor"}],return:k("string")},materialIconPicker:{description:"Material icon picker",meta:"function",args:[{name:"icon",type:"string",description:"Icon"}],return:k("string")},forbidden:{description:"Forbidden",meta:"function",args:[],return:k("boolean")},todo:{description:"To do",meta:"function",args:[],return:k("any")}}},customDialog:{description:'Custom Dialog Service API<br>See <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/modules/home/components/widget/dialog/custom-dialog.service.ts#L33">CustomDialogService</a> for API reference.',meta:"service",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/modules/home/components/widget/dialog/custom-dialog.service.ts#L33">CustomDialogService</a>',children:{customDialog:{description:"Custom Dialog",meta:"function",args:[{name:"template",type:"string",description:"Template"},{name:"controller",type:'<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/modules/home/components/widget/dialog/custom-dialog.component.ts#L48">CustomDialogComponent</a>',description:"Controller"},{name:"data",type:"any",description:"Data",optional:!0}],return:k("any")}}},date:{description:'Date Pipe<br>Formats a date value according to locale rules.<br>See <a href="https://angular.io/api/common/DatePipe">DatePipe</a> for API reference.',meta:"service",type:'<a href="https://angular.io/api/common/DatePipe">DatePipe</a>'},translate:{description:'Translate Service API<br>See <a href="https://github.com/ngx-translate/core#translateservice">TranslateService</a> for API reference.',meta:"service",type:'<a href="https://github.com/ngx-translate/core#translateservice">TranslateService</a>'},http:{description:'HTTP Client Service<br>See <a href="https://angular.io/api/common/http/HttpClient">HttpClient</a> for API reference.',meta:"service",type:'<a href="https://angular.io/api/common/http/HttpClient">HttpClient</a>'},sanitizer:{description:'DomSanitizer Service<br>See <a href="https://angular.io/api/platform-browser/DomSanitizer">DomSanitizer</a> for API reference.',meta:"service",type:'<a href="https://angular.io/api/platform-browser/DomSanitizer">DomSanitizer</a>'},router:{description:'Router Service<br>See <a href="https://angular.io/api/router/Router">Router</a> for API reference.',meta:"service",type:'<a href="https://angular.io/api/router/Router">Router</a>'}}},LpWh:function(e,t,n){"use strict";n.d(t,"a",function(){return F});var i=n("fXoL"),a=n("3Pt+"),r=n("U3y+"),o=n("z3OR"),s=n("2Vo4"),l=n("l7P3"),c=n("+0xr"),d=n("f0Cb"),u=n("d3UM"),p=n("ofXK"),m=n("FKr1"),f=n("kmnG"),h=n("qFsG"),g=n("sYmb");function A(e,t){1&e&&i["\u0275\u0275element"](0,"mat-header-cell",12)}function b(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-cell"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.index;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n+1," ")}}function y(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-header-cell",13),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"import.column-example")," "))}function v(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-cell"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.sampleData," ")}}function C(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-header-cell",14),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"import.column-type.column-type")," "))}function x(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",17),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("value",n.value)("disabled",n.disabled),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,3,a.columnTypesTranslations.get(n.value))," ")}}function w(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-cell"),i["\u0275\u0275elementStart"](1,"mat-select",15),i["\u0275\u0275listener"]("ngModelChange",function(e){return t.$implicit.type=e})("ngModelChange",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().columnsUpdated()}),i["\u0275\u0275template"](2,x,3,5,"mat-option",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,r=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",a.type),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",r.columnTypes)}}function S(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-header-cell",18),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"import.column-key")," "))}function E(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-form-field",20),i["\u0275\u0275element"](1,"mat-label"),i["\u0275\u0275elementStart"](2,"input",21),i["\u0275\u0275listener"]("ngModelChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().$implicit.key=e})("ngModelChange",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).columnsUpdated()}),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](3,2,"import.column-value")),i["\u0275\u0275property"]("ngModel",a.key)}}function I(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-cell"),i["\u0275\u0275template"](1,E,4,4,"mat-form-field",19),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.isColumnTypeDiffers(n.type))}}function O(e,t){1&e&&i["\u0275\u0275element"](0,"mat-header-row")}function T(e,t){1&e&&i["\u0275\u0275element"](0,"mat-row")}var F=function(){function e(e,t){this.elementRef=e,this.store=t,this.dataSource=new B,this.displayedColumns=["order","sampleData","type","key"],this.columnTypes=[],this.columnTypesTranslations=o.e,this.valid=!0,this.propagateChangePending=!1,this.propagateChange=null}return e.prototype.ngOnInit=function(){switch(this.columnTypes.push({value:o.a.name},{value:o.a.type},{value:o.a.label},{value:o.a.description}),this.entityType){case r.b.DEVICE:this.columnTypes.push({value:o.a.sharedAttribute},{value:o.a.serverAttribute},{value:o.a.timeseries},{value:o.a.accessToken},{value:o.a.isGateway});break;case r.b.ASSET:this.columnTypes.push({value:o.a.serverAttribute},{value:o.a.timeseries});break;case r.b.EDGE:this.columnTypes.push({value:o.a.edgeLicenseKey},{value:o.a.cloudEndpoint},{value:o.a.routingKey},{value:o.a.secret})}},e.prototype.registerOnChange=function(e){this.propagateChange=e,this.propagateChangePending&&(this.propagateChange(this.columns),this.propagateChangePending=!1)},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){this.disabled=e},e.prototype.columnsUpdated=function(){var e=this,t=this.columns.findIndex(function(e){return e.type===o.a.name})>-1,n=this.columns.findIndex(function(e){return e.type===o.a.type})>-1,i=this.columns.findIndex(function(e){return e.type===o.a.label})>-1,a=this.columns.findIndex(function(e){return e.type===o.a.accessToken})>-1,r=this.columns.findIndex(function(e){return e.type===o.a.isGateway})>-1,s=this.columns.findIndex(function(e){return e.type===o.a.description})>-1,l=this.columns.findIndex(function(e){return e.type===o.a.edgeLicenseKey})>-1,c=this.columns.findIndex(function(e){return e.type===o.a.cloudEndpoint})>-1,d=this.columns.findIndex(function(e){return e.type===o.a.routingKey})>-1,u=this.columns.findIndex(function(e){return e.type===o.a.secret})>-1,p=this.columns.findIndex(function(t){return!e.columnValid(t)})>-1;this.valid=t&&n&&!p,this.columnTypes.find(function(e){return e.value===o.a.name}).disabled=t,this.columnTypes.find(function(e){return e.value===o.a.type}).disabled=n,this.columnTypes.find(function(e){return e.value===o.a.label}).disabled=i,this.columnTypes.find(function(e){return e.value===o.a.description}).disabled=s;var m=this.columnTypes.find(function(e){return e.value===o.a.isGateway});m&&(m.disabled=r);var f=this.columnTypes.find(function(e){return e.value===o.a.accessToken});f&&(f.disabled=a);var h=this.columnTypes.find(function(e){return e.value===o.a.edgeLicenseKey});h&&(h.disabled=l);var g=this.columnTypes.find(function(e){return e.value===o.a.cloudEndpoint});g&&(g.disabled=c);var A=this.columnTypes.find(function(e){return e.value===o.a.routingKey});A&&(A.disabled=d);var b=this.columnTypes.find(function(e){return e.value===o.a.secret});b&&(b.disabled=u),this.propagateChange?this.propagateChange(this.columns):this.propagateChangePending=!0},e.prototype.isColumnTypeDiffers=function(e){return e===o.a.clientAttribute||e===o.a.sharedAttribute||e===o.a.serverAttribute||e===o.a.timeseries},e.prototype.columnValid=function(e){return!!o.f.includes(e.type)||e.key&&e.key.trim().length>0},e.prototype.validate=function(e){return this.valid?null:{columnsInvalid:!0}},e.prototype.writeValue=function(e){this.columns=e,this.dataSource.setColumns(this.columns),this.columnsUpdated()},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](i.ElementRef),i["\u0275\u0275directiveInject"](l.Store))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-table-columns-assignment"]],inputs:{entityType:"entityType",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:16,vars:3,consts:[["mat-table","",3,"dataSource"],["matColumnDef","order"],["style","min-width: 40px; max-width: 40px; width: 40px",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","sampleData"],["style","flex: 0 0 30%;","class","mat-column-sampleData",4,"matHeaderCellDef"],["matColumnDef","type"],["style","flex: 0 0 40%","class","mat-column-type",4,"matHeaderCellDef"],["matColumnDef","key"],["style","flex: 0 0 30%",4,"matHeaderCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[2,"min-width","40px","max-width","40px","width","40px"],[1,"mat-column-sampleData",2,"flex","0 0 30%"],[1,"mat-column-type",2,"flex","0 0 40%"],["matInput","",3,"ngModel","ngModelChange"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],[2,"flex","0 0 30%"],["floatLabel","always","hideRequiredMarker","",4,"ngIf"],["floatLabel","always","hideRequiredMarker",""],["matInput","","required","",3,"ngModel","placeholder","ngModelChange"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"table",0),i["\u0275\u0275elementContainerStart"](1,1),i["\u0275\u0275template"](2,A,1,0,"mat-header-cell",2),i["\u0275\u0275template"](3,b,2,1,"mat-cell",3),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](4,4),i["\u0275\u0275template"](5,y,3,3,"mat-header-cell",5),i["\u0275\u0275template"](6,v,2,1,"mat-cell",3),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](7,6),i["\u0275\u0275template"](8,C,3,3,"mat-header-cell",7),i["\u0275\u0275template"](9,w,3,2,"mat-cell",3),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](10,8),i["\u0275\u0275template"](11,S,3,3,"mat-header-cell",9),i["\u0275\u0275template"](12,I,2,1,"mat-cell",3),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275template"](13,O,1,0,"mat-header-row",10),i["\u0275\u0275template"](14,T,1,0,"mat-row",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](15,"mat-divider")),2&e&&(i["\u0275\u0275property"]("dataSource",t.dataSource),i["\u0275\u0275advance"](13),i["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns))},directives:[c.MatTable,c.MatColumnDef,c.MatHeaderCellDef,c.MatCellDef,c.MatHeaderRowDef,c.MatRowDef,d.MatDivider,c.MatHeaderCell,c.MatCell,u.MatSelect,a.NgControlStatus,a.NgModel,p.NgForOf,m.MatOption,p.NgIf,f.MatFormField,f.MatLabel,h.MatInput,a.DefaultValueAccessor,a.RequiredValidator,c.MatHeaderRow,c.MatRow],pipes:[g.TranslatePipe],styles:["[_nghost-%COMP%]   .mat-column-order[_ngcontent-%COMP%]{flex:0 0 40px}[_nghost-%COMP%]   .mat-column-sampleData[_ngcontent-%COMP%]{flex:0 0 120px;min-width:120px}[_nghost-%COMP%]   .mat-column-type[_ngcontent-%COMP%]{flex:0 0 120px;min-width:120px}"]}),e}();0,void 0;var B=function(){function e(){this.columnsSubject=new s.a([])}return e.prototype.connect=function(e){return this.columnsSubject.asObservable()},e.prototype.disconnect=function(e){this.columnsSubject.complete()},e.prototype.setColumns=function(e){this.columnsSubject.next(e)},e}()},LqAV:function(e,t,n){"use strict";n.d(t,"a",function(){return D});var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=n("nhHW"),s=n("HR/i"),l=n("gi3d"),c=n("cp0P"),d=n("vkgz"),u=n("lJxs"),p=n("jCow"),m=n("Uj2l"),f=n("l7P3"),h=n("sYmb"),g=n("wZkO"),A=n("ofXK"),b=n("bTqV"),y=n("Qu3c"),v=n("8m5z"),C=n("NFeN"),x=n("XiUz"),w=n("kmnG"),S=n("qFsG"),E=n("3Pt+"),I=n("yAAm"),O=["htmlInput"],T=["cssInput"];function F(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",17),a["\u0275\u0275elementStart"](1,"mat-form-field",18),a["\u0275\u0275elementStart"](2,"input",19),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.$implicit.url=e})("ngModelChange",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().notifyActionUpdated()}),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"button",20),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](n);var e=t.index;return a["\u0275\u0275nextContext"]().removeResource(e)}),a["\u0275\u0275pipe"](5,"async"),a["\u0275\u0275pipe"](6,"translate"),a["\u0275\u0275elementStart"](7,"mat-icon"),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](3,4,"widget.resource-url")),a["\u0275\u0275property"]("ngModel",i.url),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](6,8,"widget.remove-resource")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](5,6,r.isLoading$))}}var B=function(){return["$event","widgetContext","entityId","entityName","htmlTemplate","additionalParams","entityLabel"]},M=function(){return[]};function P(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-tab",1),a["\u0275\u0275pipe"](1,"translate"),a["\u0275\u0275elementStart"](2,"tb-js-func",21),a["\u0275\u0275listener"]("ngModelChange",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().action.customFunction=e})("ngModelChange",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().notifyActionUpdated()}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](1,5,"widget.js")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngModel",i.action.customFunction)("functionArgs",a["\u0275\u0275pureFunction0"](7,B))("validationArgs",a["\u0275\u0275pureFunction0"](8,M))("editorCompleter",i.customPrettyActionEditorCompleter)}}var D=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.store=t,r.translate=n,r.raf=i,r.actionUpdated=new a.EventEmitter,r.htmlFullscreen=!1,r.cssFullscreen=!1,r.aceEditors=[],r.editorsResizeCafs={},r.setValuesPending=!1,r.customPrettyActionEditorCompleter=l.b,r}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this.initAceEditors().subscribe(function(){e.setValuesPending&&(e.setAceEditorValues(),e.setValuesPending=!1)})},t.prototype.ngOnDestroy=function(){this.aceResize$.disconnect()},t.prototype.ngOnChanges=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){"action"===n[t]&&(2===this.aceEditors.length?this.setAceEditorValues():this.setValuesPending=!0)}},t.prototype.notifyActionUpdated=function(){this.actionUpdated.emit(this.validate()?this.action:null)},t.prototype.validate=function(){if(this.action.customResources)for(var e=0,t=this.action.customResources;e<t.length;e++){if(!t[e].url)return!1}return!0},t.prototype.addResource=function(){this.action.customResources||(this.action.customResources=[]),this.action.customResources.push({url:""}),this.notifyActionUpdated()},t.prototype.removeResource=function(e){e>-1&&this.action.customResources.splice(e,1).length>0&&this.notifyActionUpdated()},t.prototype.beautifyCss=function(){var e=this;Object(m.a)(this.action.customCss,{indent_size:4}).subscribe(function(t){e.action.customCss!==t&&(e.action.customCss=t,e.cssEditor.setValue(e.action.customCss?e.action.customCss:"",-1),e.notifyActionUpdated())})},t.prototype.beautifyHtml=function(){var e=this;Object(m.b)(this.action.customHtml,{indent_size:4,wrap_line_length:60}).subscribe(function(t){e.action.customHtml!==t&&(e.action.customHtml=t,e.htmlEditor.setValue(e.action.customHtml?e.action.customHtml:"",-1),e.notifyActionUpdated())})},t.prototype.initAceEditors=function(){var e=this;this.aceResize$=new s.a(function(t){t.forEach(function(t){var n=e.aceEditors.find(function(e){return e.container===t.target});e.onAceEditorResize(n)})});var t=[];return t.push(this.createAceEditor(this.htmlInputElmRef,"html").pipe(Object(d.a)(function(t){e.htmlEditor=t,e.htmlEditor.on("input",function(){var t=e.htmlEditor.getValue();e.action.customHtml!==t&&(e.action.customHtml=t,e.notifyActionUpdated())})}))),t.push(this.createAceEditor(this.cssInputElmRef,"css").pipe(Object(d.a)(function(t){e.cssEditor=t,e.cssEditor.on("input",function(){var t=e.cssEditor.getValue();e.action.customCss!==t&&(e.action.customCss=t,e.notifyActionUpdated())})}))),Object(c.a)(t)},t.prototype.createAceEditor=function(e,t){var n=this,a=e.nativeElement,r={mode:"ace/mode/"+t,showGutter:!0,showPrintMargin:!0};return r=Object(i.a)(Object(i.a)({},r),{enableSnippets:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0}),Object(p.b)().pipe(Object(u.a)(function(e){var t=e.edit(a,r);return t.session.setUseWrapMode(!0),n.aceEditors.push(t),n.aceResize$.observe(a),t}))},t.prototype.setAceEditorValues=function(){this.htmlEditor.setValue(this.action.customHtml?this.action.customHtml:"",-1),this.cssEditor.setValue(this.action.customCss?this.action.customCss:"",-1)},t.prototype.onAceEditorResize=function(e){this.editorsResizeCafs[e.id]&&(this.editorsResizeCafs[e.id](),delete this.editorsResizeCafs[e.id]),this.editorsResizeCafs[e.id]=this.raf.raf(function(){e.resize(),e.renderer.updateFull()})},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](f.Store),a["\u0275\u0275directiveInject"](h.TranslateService),a["\u0275\u0275directiveInject"](o.a))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-custom-action-pretty-resources-tabs"]],viewQuery:function(e,t){if(1&e&&(a["\u0275\u0275viewQuery"](O,3),a["\u0275\u0275viewQuery"](T,3)),2&e){var n=void 0;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.htmlInputElmRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.cssInputElmRef=n.first)}},inputs:{action:"action",hasCustomFunction:"hasCustomFunction"},outputs:{actionUpdated:"actionUpdated"},features:[a["\u0275\u0275InheritDefinitionFeature"],a["\u0275\u0275NgOnChangesFeature"]],decls:39,vars:34,consts:[["dynamicHeight","true",2,"width","100%","height","100%",3,"selectedIndex"],[2,"width","100%","height","100%",3,"label"],[1,"tb-custom-action-editor-container",2,"background-color","#fff"],[1,"mat-padding"],["fxFlex","","fxLayout","row","style","max-height: 40px;","fxLayoutAlign","start center",4,"ngFor","ngForOf"],[2,"margin-top","6px"],["mat-button","","mat-raised-button","","color","accent","type","button","matTooltipPosition","above",3,"disabled","matTooltip","click"],["translate",""],["tb-fullscreen","",1,"tb-custom-action-editor-container",3,"fullscreen"],[1,"tb-editor-area-title-panel"],["mat-button","","type","button",3,"click"],["mat-button","","type","button","mat-icon-button","","matTooltipPosition","above",1,"tb-mat-32",3,"matTooltip","click"],[1,"css-panel"],["cssInput",""],[1,"html-panel"],["htmlInput",""],["style","width: 100%; height: 100%;",3,"label",4,"ngIf"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",2,"max-height","40px"],["fxFlex","","floatLabel","never",1,"mat-block","resource-field",2,"margin","10px 0 0","max-height","40px"],["required","","matInput","",3,"ngModel","placeholder","ngModelChange"],["mat-icon-button","","color","accent","type","button","matTooltipPosition","above",3,"disabled","matTooltip","click"],[3,"ngModel","functionArgs","validationArgs","editorCompleter","ngModelChange"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-tab-group",0),a["\u0275\u0275elementStart"](1,"mat-tab",1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementStart"](3,"div",2),a["\u0275\u0275elementStart"](4,"div",3),a["\u0275\u0275template"](5,F,9,10,"div",4),a["\u0275\u0275elementStart"](6,"div",5),a["\u0275\u0275elementStart"](7,"button",6),a["\u0275\u0275listener"]("click",function(){return t.addResource()}),a["\u0275\u0275pipe"](8,"async"),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementStart"](10,"span",7),a["\u0275\u0275text"](11,"action.add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](12,"mat-tab",1),a["\u0275\u0275pipe"](13,"translate"),a["\u0275\u0275elementStart"](14,"div",8),a["\u0275\u0275elementStart"](15,"div",9),a["\u0275\u0275elementStart"](16,"button",10),a["\u0275\u0275listener"]("click",function(){return t.beautifyCss()}),a["\u0275\u0275text"](17),a["\u0275\u0275pipe"](18,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"button",11),a["\u0275\u0275listener"]("click",function(){return t.cssFullscreen=!t.cssFullscreen}),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275elementStart"](21,"mat-icon"),a["\u0275\u0275text"](22),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](23,"div",12,13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](25,"mat-tab",1),a["\u0275\u0275pipe"](26,"translate"),a["\u0275\u0275elementStart"](27,"div",8),a["\u0275\u0275elementStart"](28,"div",9),a["\u0275\u0275elementStart"](29,"button",10),a["\u0275\u0275listener"]("click",function(){return t.beautifyHtml()}),a["\u0275\u0275text"](30),a["\u0275\u0275pipe"](31,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](32,"button",11),a["\u0275\u0275listener"]("click",function(){return t.htmlFullscreen=!t.htmlFullscreen}),a["\u0275\u0275pipe"](33,"translate"),a["\u0275\u0275elementStart"](34,"mat-icon"),a["\u0275\u0275text"](35),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](36,"div",14,15),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](38,P,3,9,"mat-tab",16),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275propertyInterpolate"]("selectedIndex",t.hasCustomFunction?3:2),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](2,16,"widget.resources")),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngForOf",t.action.customResources),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](9,20,"widget.add-resource")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](8,18,t.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](13,22,"widget.css")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fullscreen",t.cssFullscreen),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](18,24,"widget.tidy")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](20,26,t.cssFullscreen?"fullscreen.exit":"fullscreen.expand")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.cssFullscreen?"fullscreen_exit":"fullscreen"),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](26,28,"widget.html")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fullscreen",t.htmlFullscreen),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](31,30,"widget.tidy")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](33,32,t.htmlFullscreen?"fullscreen.exit":"fullscreen.expand")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.htmlFullscreen?"fullscreen_exit":"fullscreen"),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",t.hasCustomFunction))},directives:[g.MatTabGroup,g.MatTab,A.NgForOf,b.MatButton,y.MatTooltip,h.TranslateDirective,v.a,C.MatIcon,A.NgIf,x.b,x.f,x.e,w.MatFormField,S.MatInput,E.DefaultValueAccessor,E.RequiredValidator,E.NgControlStatus,E.NgModel,I.a],pipes:[h.TranslatePipe,A.AsyncPipe],styles:[".tb-custom-action-editor-container mat-form-field.resource-field{max-height:40px;margin:10px 0 0}.tb-custom-action-editor-container mat-form-field.resource-field .mat-form-field-wrapper{padding-bottom:0}.tb-custom-action-editor-container mat-form-field.resource-field .mat-form-field-wrapper .mat-form-field-flex{max-height:40px}.tb-custom-action-editor-container mat-form-field.resource-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix{border:0}.tb-custom-action-editor-container mat-form-field.resource-field .mat-form-field-wrapper .mat-form-field-underline{bottom:0}.tb-custom-action-editor-container .css-panel,.tb-custom-action-editor-container .html-panel{width:100%;min-width:200px;height:100%;min-height:200px}.tb-custom-action-editor-container div.tb-editor-area-title-panel{position:absolute;top:5px;right:20px;z-index:5;font-size:.8rem;font-weight:500}.tb-custom-action-editor-container div.tb-editor-area-title-panel label{padding:4px;color:#00acc1;background:hsla(0,0%,86%,.35);border-radius:5px}.tb-custom-action-editor-container div.tb-editor-area-title-panel label:not(:last-child){margin-right:4px}.tb-custom-action-editor-container div.tb-editor-area-title-panel button.mat-button,.tb-custom-action-editor-container div.tb-editor-area-title-panel button.mat-icon-button,.tb-custom-action-editor-container div.tb-editor-area-title-panel button.mat-icon-button.tb-mat-32{align-items:center;vertical-align:middle;min-width:32px;min-height:15px;padding:4px;margin:0;font-size:.8rem;line-height:15px;color:#7b7b7b;background:hsla(0,0%,86%,.35)}.tb-custom-action-editor-container div.tb-editor-area-title-panel button.mat-button:not(:last-child),.tb-custom-action-editor-container div.tb-editor-area-title-panel button.mat-icon-button.tb-mat-32:not(:last-child),.tb-custom-action-editor-container div.tb-editor-area-title-panel button.mat-icon-button:not(:last-child){margin-right:4px}"],encapsulation:2}),t}(r.a);0,void 0},LrsY:function(e,t,n){"use strict";n.d(t,"a",function(){return S});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("HnHJ"),l=n("gmuX"),c=n("l7P3"),d=n("tyNb"),u=n("3Pt+"),p=n("ofXK"),m=n("znSr"),f=n("/t3+"),h=n("sYmb"),g=n("XiUz"),A=n("kRCp"),b=n("bTqV"),y=n("NFeN"),v=n("bv9b"),C=["entityDetailsForm"];function x(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",14)}function w(e,t){1&e&&a["\u0275\u0275element"](0,"div",15)}var S=function(e){function t(t,n,i,a,r,o,s){var l=e.call(this,t,n,a)||this;return l.store=t,l.router=n,l.data=i,l.dialogRef=a,l.componentFactoryResolver=r,l.injector=o,l.errorStateMatcher=s,l.submitted=!1,l}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){this.entitiesTableConfig=this.data.entitiesTableConfig,this.translations=this.entitiesTableConfig.entityTranslations,this.resources=this.entitiesTableConfig.entityResources,this.entity={};var e=this.componentFactoryResolver.resolveComponentFactory(this.entitiesTableConfig.entityComponent),t=this.entityDetailsFormAnchor.viewContainerRef;t.clear();var n=a.Injector.create({providers:[{provide:"entity",useValue:this.entity},{provide:"entitiesTableConfig",useValue:this.entitiesTableConfig}],parent:this.injector}),i=t.createComponent(e,0,n);this.entityComponent=i.instance,this.entityComponent.isEdit=!0,this.detailsForm=this.entityComponent.entityForm},t.prototype.helpLinkId=function(){return this.resources.helpLinkIdForEntity&&this.entityComponent.entityForm?this.resources.helpLinkIdForEntity(this.entityComponent.entityForm.getRawValue()):this.resources.helpLinkId},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.add=function(){var e=this;this.submitted=!0,this.detailsForm.valid&&(this.entity=Object(i.a)(Object(i.a)({},this.entity),this.entityComponent.entityFormValue()),this.entitiesTableConfig.saveEntity(this.entity).subscribe(function(t){e.dialogRef.close(t)}))},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](c.Store),a["\u0275\u0275directiveInject"](d.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](a.ComponentFactoryResolver),a["\u0275\u0275directiveInject"](a.Injector),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-add-entity-dialog"]],viewQuery:function(e,t){if(1&e&&a["\u0275\u0275viewQuery"](C,3),2&e){var n;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.entityDetailsFormAnchor=n.first)}},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:25,vars:21,consts:[[2,"min-width","400px",3,"ngStyle","ngSubmit"],["color","accent"],["translate",""],["fxFlex",""],[3,"tb-help"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],["entityDetailsForm",""],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.add()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2",2),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",3),a["\u0275\u0275element"](5,"div",4),a["\u0275\u0275elementStart"](6,"button",5),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](7,"mat-icon",6),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,x,1,0,"mat-progress-bar",7),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,w,1,0,"div",8),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",9),a["\u0275\u0275element"](14,"tb-anchor",null,10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"div",11),a["\u0275\u0275elementStart"](17,"button",12),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](18,"async"),a["\u0275\u0275text"](19),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"button",13),a["\u0275\u0275pipe"](22,"async"),a["\u0275\u0275text"](23),a["\u0275\u0275pipe"](24,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("ngStyle",t.entitiesTableConfig.addDialogStyle),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.translations.add),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("tb-help",t.helpLinkId()),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,9,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,11,t.isLoading$)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](18,13,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](20,15,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](22,17,t.isLoading$)||(null==t.detailsForm?null:t.detailsForm.invalid)||!(null!=t.detailsForm&&t.detailsForm.dirty)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](24,19,"action.add")," "))},directives:[u["\u0275angular_packages_forms_forms_ba"],u.NgControlStatusGroup,u.NgForm,p.NgStyle,m.e,f.MatToolbar,h.TranslateDirective,g.b,A.a,b.MatButton,y.MatIcon,p.NgIf,o.MatDialogContent,s.a,o.MatDialogActions,g.e,v.MatProgressBar],pipes:[p.AsyncPipe,h.TranslatePipe],styles:["[_nghost-%COMP%]     .mat-padding{padding:0}"]}),t}(l.a);0,void 0},LwFc:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=n("BOYq"),s=n("//Q6"),l=n("l7P3"),c=n("0IaG"),d=n("3Pt+"),u=n("fYjj"),p=n("ofXK"),m=function(e){function t(t,n,i,a){var r=e.call(this,t)||this;return r.store=t,r.dialog=n,r.fb=i,r.widgetComponentService=a,r.widgetFormGroup=r.fb.group({widgetConfig:[null]}),r}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){this.loadWidgetConfig()},t.prototype.ngOnChanges=function(e){for(var t=!1,n=0,i=Object.keys(e);n<i.length;n++){var a=i[n],r=e[a];r.firstChange||r.currentValue===r.previousValue||["widget","widgetLayout"].includes(a)&&(t=!0)}t&&this.loadWidgetConfig()},t.prototype.loadWidgetConfig=function(){if(this.widget){var e,t,n=this.widgetComponentService.getInstantWidgetInfo(this.widget),i=n.typeSettingsSchema||n.settingsSchema,a=n.typeDataKeySettingsSchema||n.dataKeySettingsSchema,r=n.typeParameters,o=n.actionSources,l=!Object(s.n)(n.typeParameters)||!n.typeParameters.useCustomDatasources;e=i&&""!==i?Object(s.A)(i)?JSON.parse(i):i:{},t=a&&""!==a?Object(s.A)(a)?JSON.parse(a):a:{},this.widgetConfig={config:this.widget.config,layout:this.widgetLayout,widgetType:this.widget.type,typeParameters:r,actionSources:o,isDataEnabled:l,settingsSchema:e,dataKeySettingsSchema:t},this.widgetFormGroup.reset({widgetConfig:this.widgetConfig})}},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](l.Store),a["\u0275\u0275directiveInject"](c.MatDialog),a["\u0275\u0275directiveInject"](d.FormBuilder),a["\u0275\u0275directiveInject"](o.a))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-edit-widget"]],inputs:{dashboard:"dashboard",aliasController:"aliasController",widgetEditMode:"widgetEditMode",widget:"widget",widgetLayout:"widgetLayout"},features:[a["\u0275\u0275InheritDefinitionFeature"],a["\u0275\u0275NgOnChangesFeature"]],decls:4,vars:9,consts:[[3,"formGroup"],[3,"disabled"],["formControlName","widgetConfig",3,"aliasController","functionsOnly","entityAliases","filters","dashboardStates"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275elementStart"](1,"fieldset",1),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275element"](3,"tb-widget-config",2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.widgetFormGroup),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](2,7,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("aliasController",t.aliasController)("functionsOnly",t.widgetEditMode)("entityAliases",t.dashboard.configuration.entityAliases)("filters",t.dashboard.configuration.filters)("dashboardStates",t.dashboard.configuration.states))},directives:[d["\u0275angular_packages_forms_forms_ba"],d.NgControlStatusGroup,d.FormGroupDirective,u.a,d.NgControlStatus,d.FormControlName],pipes:[p.AsyncPipe],encapsulation:2}),t}(r.a);0,void 0},M0Qk:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n("fXoL"),a=n("ofXK"),r=n("PCNd"),o=n("uPsX"),s=n("tM37"),l=n("SZX/"),c=n("LCzJ"),d=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[l.a],imports:[[a.CommonModule,r.a]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](d,{declarations:[o.a,s.a,c.a],imports:[a.CommonModule,r.a],exports:[o.a,s.a,c.a]})),0},Mfyf:function(e,t,n){"use strict";n.d(t,"a",function(){return A});var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("//Q6"),s=n("c1Lj"),l=n("l7P3"),c=n("kmnG"),d=n("sYmb"),u=n("qFsG"),p=n("ofXK"),m=n("40Wt");function f(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.aws-access-key-id-required")," "))}function h(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.aws-secret-access-key-required")," "))}function g(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.aws-region-required")," "))}var A=function(){function e(e,t){this.store=e,this.fb=t,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(r.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.awsSnsProviderConfigurationFormGroup=this.fb.group({accessKeyId:[null,[a.Validators.required]],secretAccessKey:[null,[a.Validators.required]],region:[null,[a.Validators.required]]}),this.awsSnsProviderConfigurationFormGroup.valueChanges.subscribe(function(){e.updateModel()})},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.awsSnsProviderConfigurationFormGroup.disable({emitEvent:!1}):this.awsSnsProviderConfigurationFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){Object(o.o)(e)&&this.awsSnsProviderConfigurationFormGroup.patchValue(e,{emitEvent:!1})},e.prototype.updateModel=function(){var e=null;this.awsSnsProviderConfigurationFormGroup.valid&&((e=this.awsSnsProviderConfigurationFormGroup.value).type=s.a.AWS_SNS),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](l.Store),i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-aws-sns-provider-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:17,vars:4,consts:[[2,"padding-bottom","16px",3,"formGroup"],[1,"mat-block"],["translate",""],["required","","matInput","","formControlName","accessKeyId"],[4,"ngIf"],["required","","type","password","matInput","","formControlName","secretAccessKey"],["matSuffix",""],["required","","matInput","","formControlName","region"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"form",0),i["\u0275\u0275elementStart"](1,"mat-form-field",1),i["\u0275\u0275elementStart"](2,"mat-label",2),i["\u0275\u0275text"](3,"admin.aws-access-key-id"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"input",3),i["\u0275\u0275template"](5,f,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"mat-form-field",1),i["\u0275\u0275elementStart"](7,"mat-label",2),i["\u0275\u0275text"](8,"admin.aws-secret-access-key"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](9,"input",5),i["\u0275\u0275element"](10,"tb-toggle-password",6),i["\u0275\u0275template"](11,h,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"mat-form-field",1),i["\u0275\u0275elementStart"](13,"mat-label",2),i["\u0275\u0275text"](14,"admin.aws-region"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](15,"input",7),i["\u0275\u0275template"](16,g,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.awsSnsProviderConfigurationFormGroup),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.awsSnsProviderConfigurationFormGroup.get("accessKeyId").hasError("required")),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",t.awsSnsProviderConfigurationFormGroup.get("secretAccessKey").hasError("required")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.awsSnsProviderConfigurationFormGroup.get("region").hasError("required")))},directives:[a["\u0275angular_packages_forms_forms_ba"],a.NgControlStatusGroup,a.FormGroupDirective,c.MatFormField,c.MatLabel,d.TranslateDirective,u.MatInput,a.DefaultValueAccessor,a.RequiredValidator,a.NgControlStatus,a.FormControlName,p.NgIf,m.a,c.MatSuffix,c.MatError],pipes:[d.TranslatePipe],encapsulation:2}),e}();0,void 0},Mldr:function(e,t,n){"use strict";n.d(t,"a",function(){return E});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("BsGH"),d=n("l7P3"),u=n("tyNb"),p=n("/t3+"),m=n("XiUz"),f=n("bTqV"),h=n("NFeN"),g=n("ofXK"),A=n("kmnG"),b=n("sYmb"),y=n("qFsG"),v=n("4t+N"),C=n("bv9b");function x(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",17)}function w(e,t){1&e&&a["\u0275\u0275element"](0,"div",18)}function S(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"attribute.key-required")," "))}var E=function(e){function t(t,n,i,a,r,o,s){var l=e.call(this,t,n,o)||this;return l.store=t,l.router=n,l.data=i,l.attributeService=a,l.errorStateMatcher=r,l.dialogRef=o,l.fb=s,l.submitted=!1,l}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){this.attributeFormGroup=this.fb.group({key:["",[s.Validators.required]],value:[null,[s.Validators.required]]})},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.cancel=function(){this.dialogRef.close(!1)},t.prototype.add=function(){var e=this;this.submitted=!0;var t={lastUpdateTs:null,key:this.attributeFormGroup.get("key").value.trim(),value:this.attributeFormGroup.get("value").value};this.attributeService.saveEntityAttributes(this.data.entityId,this.data.attributeScope,[t]).subscribe(function(){e.dialogRef.close(!0)})},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](d.Store),a["\u0275\u0275directiveInject"](u.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-add-attribute-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:31,vars:26,consts:[[2,"min-width","400px",3,"formGroup","ngSubmit"],["color","accent"],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],[1,"mat-block"],["translate",""],["matInput","","formControlName","key","required",""],[4,"ngIf"],["formControlName","value","requiredText","attribute.value-required"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.add()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,x,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,w,1,0,"div",6),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275elementStart"](14,"fieldset",8),a["\u0275\u0275pipe"](15,"async"),a["\u0275\u0275elementStart"](16,"mat-form-field",9),a["\u0275\u0275elementStart"](17,"mat-label",10),a["\u0275\u0275text"](18,"attribute.key"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](19,"input",11),a["\u0275\u0275template"](20,S,3,3,"mat-error",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](21,"tb-value-input",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"div",14),a["\u0275\u0275elementStart"](23,"button",15),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](24,"async"),a["\u0275\u0275text"](25),a["\u0275\u0275pipe"](26,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](27,"button",16),a["\u0275\u0275pipe"](28,"async"),a["\u0275\u0275text"](29),a["\u0275\u0275pipe"](30,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.attributeFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,10,"attribute.add")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,12,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,14,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](15,16,t.isLoading$)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",t.attributeFormGroup.get("key").hasError("required")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](24,18,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](26,20,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](28,22,t.isLoading$)||t.attributeFormGroup.invalid||!t.attributeFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](30,24,"action.add")," "))},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,p.MatToolbar,m.b,f.MatButton,h.MatIcon,g.NgIf,o.MatDialogContent,A.MatFormField,A.MatLabel,b.TranslateDirective,y.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,s.RequiredValidator,v.a,o.MatDialogActions,m.e,C.MatProgressBar,A.MatError],pipes:[b.TranslatePipe,g.AsyncPipe],encapsulation:2}),t}(l.a);0,void 0},NEMC:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r});var i,a=n("mrSG");function r(e){var t=null;if(e)switch(e){case i.DEFAULT:t=Object(a.a)(Object(a.a)({},{maxDevices:0,maxAssets:0,maxCustomers:0,maxUsers:0,maxDashboards:0,maxRuleChains:0,maxResourcesInBytes:0,maxOtaPackagesInBytes:0,maxTransportMessages:0,maxTransportDataPoints:0,maxREExecutions:0,maxJSExecutions:0,maxDPStorageDays:0,maxRuleNodeExecutionsPerMessage:0,maxEmails:0,maxSms:0,maxCreatedAlarms:0,defaultStorageTtlDays:0,alarmsTtlDays:0,rpcTtlDays:0}),{type:i.DEFAULT})}return t}!function(e){e.DEFAULT="DEFAULT"}(i||(i={}))},"NHP+":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("MGFw"),a=n("WtWf"),r=n("t9bE"),o=n("KUzl"),s=n("mvVQ"),l=n("/E8u"),c=n("XNiG"),d=n("quSY"),u=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).value=null,e.hasNext=!1,e.hasCompleted=!1,e}return Object(a.a)(n,[{key:"_subscribe",value:function(e){return this.hasError?(e.error(this.thrownError),d.a.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),d.a.EMPTY):Object(r.a)(Object(o.a)(n.prototype),"_subscribe",this).call(this,e)}},{key:"next",value:function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)}},{key:"error",value:function(e){this.hasCompleted||Object(r.a)(Object(o.a)(n.prototype),"error",this).call(this,e)}},{key:"complete",value:function(){this.hasCompleted=!0,this.hasNext&&Object(r.a)(Object(o.a)(n.prototype),"next",this).call(this,this.value),Object(r.a)(Object(o.a)(n.prototype),"complete",this).call(this)}}]),n}(c.b)},NPtW:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("JIJk"),s=n("l7P3"),l=function(){function e(e,t){this.store=e,this.fb=t,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(r.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.defaultDeviceProfileConfigurationFormGroup=this.fb.group({configuration:[null,a.Validators.required]}),this.defaultDeviceProfileConfigurationFormGroup.valueChanges.subscribe(function(){e.updateModel()})},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.defaultDeviceProfileConfigurationFormGroup.disable({emitEvent:!1}):this.defaultDeviceProfileConfigurationFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){this.defaultDeviceProfileConfigurationFormGroup.patchValue({configuration:e},{emitEvent:!1})},e.prototype.updateModel=function(){var e=null;this.defaultDeviceProfileConfigurationFormGroup.valid&&((e=this.defaultDeviceProfileConfigurationFormGroup.getRawValue().configuration).type=o.h.DEFAULT),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.Store),i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-default-device-profile-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:1,vars:1,consts:[[2,"padding-bottom","16px",3,"formGroup"]],template:function(e,t){1&e&&i["\u0275\u0275element"](0,"form",0),2&e&&i["\u0275\u0275property"]("formGroup",t.defaultDeviceProfileConfigurationFormGroup)},directives:[a["\u0275angular_packages_forms_forms_ba"],a.NgControlStatusGroup,a.FormGroupDirective],encapsulation:2}),e}();0,void 0},NSP8:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("mrSG"),a=n("fXoL"),r=n("JTB5"),o=n("l7P3"),s=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"eventTableConfig",{get:function(){return this.entitiesTableConfig},enumerable:!1,configurable:!0}),t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](o.Store))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-edge-downlink-table-header"]],features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:0,template:function(e,t){1&e&&a["\u0275\u0275element"](0,"div")},styles:["[_nghost-%COMP%]{padding-right:8px}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     mat-form-field .mat-form-field-underline{bottom:0}@media screen and (max-width:599px){[_nghost-%COMP%]     mat-form-field{width:100%}[_nghost-%COMP%]     mat-form-field .mat-form-field-infix{width:auto!important}}"]}),t}(r.a);0,void 0},Neop:function(e,t,n){"use strict";var i=function(){this.cssImportStatements=[],this.cssKeyframeStatements=[],this.cssRegex=new RegExp("([\\s\\S]*?){([\\s\\S]*?)}","gi"),this.cssMediaQueryRegex="((@media [\\s\\S]*?){([\\s\\S]*?}\\s*?)})",this.cssKeyframeRegex="((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})",this.combinedCSSRegex="((\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",this.cssCommentsRegex="(\\/\\*[\\s\\S]*?\\*\\/)",this.cssImportStatementRegex=new RegExp("@import .*?;","gi")};i.prototype.stripComments=function(e){var t=new RegExp(this.cssCommentsRegex,"gi");return e.replace(t,"")},i.prototype.parseCSS=function(e){if(void 0===e)return[];for(var t=[];;){var n=this.cssImportStatementRegex.exec(e);if(null===n)break;this.cssImportStatements.push(n[0]),t.push({selector:"@imports",type:"imports",styles:n[0]})}e=e.replace(this.cssImportStatementRegex,"");for(var i,a=new RegExp(this.cssKeyframeRegex,"gi");null!==(i=a.exec(e));)t.push({selector:"@keyframes",type:"keyframes",styles:i[0]});e=e.replace(a,"");for(var r=new RegExp(this.combinedCSSRegex,"gi");null!==(i=r.exec(e));){var o="";o=void 0===i[2]?i[5].split("\r\n").join("\n").trim():i[2].split("\r\n").join("\n").trim();var s=new RegExp(this.cssCommentsRegex,"gi"),l=s.exec(o);if(null!==l&&(o=o.replace(s,"").trim()),-1!==o.indexOf("@media")){var c={selector:o,type:"media",subStyles:this.parseCSS(i[3]+"\n}")};null!==l&&(c.comments=l[0]),t.push(c)}else{var d={selector:o,rules:this.parseRules(i[6])};"@font-face"===o&&(d.type="font-face"),null!==l&&(d.comments=l[0]),t.push(d)}}return t},i.prototype.parseRules=function(e){var t=[];e=(e=e.split("\r\n").join("\n")).split(/;(?![^\(]*\))/);for(var n=0;n<e.length;n++){var i=e[n];if(-1!==(i=i.trim()).indexOf(":")){var a=(i=i.split(":"))[0].trim(),r=i.slice(1).join(":").trim();if(a.length<1||r.length<1)continue;t.push({directive:a,value:r})}else"base64,"==i.trim().substr(0,7)?t[t.length-1].value+=i.trim():i.length>0&&t.push({directive:"",value:i,defective:!0})}return t},i.prototype.findCorrespondingRule=function(e,t,n){void 0===n&&(n=!1);for(var i=!1,a=0;a<e.length&&(e[a].directive!=t||(i=e[a],n!==e[a].value));a++);return i},i.prototype.findBySelector=function(e,t,n){void 0===n&&(n=!1);for(var i=[],a=0;a<e.length;a++)!1===n?e[a].selector===t&&i.push(e[a]):-1!==e[a].selector.indexOf(t)&&i.push(e[a]);if(i.length<2)return i;var r=i[0];for(a=1;a<i.length;a++)this.intelligentCSSPush([r],i[a]);return[r]},i.prototype.deleteBySelector=function(e,t){for(var n=[],i=0;i<e.length;i++)e[i].selector!==t&&n.push(e[i]);return n},i.prototype.compressCSS=function(e){for(var t=[],n={},i=0;i<e.length;i++){var a=e[i];if(!0!==n[a.selector]){var r=this.findBySelector(e,a.selector);0!==r.length&&(t.push(r[0]),n[a.selector]=!0)}}return t},i.prototype.cssDiff=function(e,t){if(e.selector!==t.selector)return!1;if("media"===e.type||"media"===t.type)return!1;for(var n,i,a={selector:e.selector,rules:[]},r=0;r<e.rules.length;r++)n=e.rules[r],(!1===(i=this.findCorrespondingRule(t.rules,n.directive,n.value))||n.value!==i.value)&&a.rules.push(n);for(var o=0;o<t.rules.length;o++)i=t.rules[o],!1===(n=this.findCorrespondingRule(e.rules,i.directive))&&(i.type="DELETED",a.rules.push(i));return 0!==a.rules.length&&a},i.prototype.intelligentMerge=function(e,t,n){void 0===n&&(n=!1);for(var i=0;i<t.length;i++)this.intelligentCSSPush(e,t[i],n);for(i=0;i<e.length;i++){var a=e[i];"media"!==a.type&&"keyframes"!==a.type&&(a.rules=this.compactRules(a.rules))}},i.prototype.intelligentCSSPush=function(e,t,n){t.selector;var i=!1;if(void 0===n&&(n=!1),!1===n){for(var a=0;a<e.length;a++)if(e[a].selector===t.selector){i=e[a];break}}else for(var r=e.length-1;r>-1;r--)if(e[r].selector===t.selector){i=e[r];break}if(!1===i)e.push(t);else if("media"!==t.type)for(var o=0;o<t.rules.length;o++){var s=t.rules[o],l=this.findCorrespondingRule(i.rules,s.directive);!1===l?i.rules.push(s):"DELETED"==s.type?l.type="DELETED":l.value=s.value}else i.subStyles=t.subStyles},i.prototype.compactRules=function(e){for(var t=[],n=0;n<e.length;n++)"DELETED"!==e[n].type&&t.push(e[n]);return t},i.prototype.getCSSForEditor=function(e,t){void 0===t&&(t=0);var n="";void 0===e&&(e=this.css);for(var i=0;i<e.length;i++)"imports"==e[i].type&&(n+=e[i].styles+"\n\n");for(i=0;i<e.length;i++){var a=e[i];if(void 0!==a.selector){var r="";void 0!==a.comments&&(r=a.comments+"\n"),"media"==a.type?(n+=r+a.selector+"{\n",n+=this.getCSSForEditor(a.subStyles,t+1),n+="}\n\n"):"keyframes"!==a.type&&"imports"!==a.type&&(n+=this.getSpaces(t)+r+a.selector+" {\n",n+=this.getCSSOfRules(a.rules,t+1),n+=this.getSpaces(t)+"}\n\n")}}for(i=0;i<e.length;i++)"keyframes"==e[i].type&&(n+=e[i].styles+"\n\n");return n},i.prototype.getImports=function(e){for(var t=[],n=0;n<e.length;n++)"imports"==e[n].type&&t.push(e[n].styles);return t},i.prototype.getCSSOfRules=function(e,t){for(var n="",i=0;i<e.length;i++)void 0!==e[i]&&(void 0===e[i].defective?n+=this.getSpaces(t)+e[i].directive+" : "+e[i].value+";\n":n+=this.getSpaces(t)+e[i].value+";\n");return n||"\n"},i.prototype.getSpaces=function(e){for(var t="",n=0;n<4*e;n++)t+=" ";return t},i.prototype.applyNamespacing=function(e,t){var n=e,i="."+this.cssPreviewNamespace;void 0!==t&&(i=t),"string"==typeof e&&(n=this.parseCSS(e));for(var a=0;a<n.length;a++){var r=n[a];if(!(r.selector.indexOf("@font-face")>-1||r.selector.indexOf("keyframes")>-1||r.selector.indexOf("@import")>-1||r.selector.indexOf(".form-all")>-1||r.selector.indexOf("#stage")>-1))if("media"!==r.type){for(var o=r.selector.split(","),s=[],l=0;l<o.length;l++)-1===o[l].indexOf(".supernova")?s.push(i+" "+o[l]):s.push(o[l]);r.selector=s.join(",")}else r.subStyles=this.applyNamespacing(r.subStyles,t)}return n},i.prototype.clearNamespacing=function(e,t){void 0===t&&(t=!1);var n=e,i="."+this.cssPreviewNamespace;"string"==typeof e&&(n=this.parseCSS(e));for(var a=0;a<n.length;a++){var r=n[a];if("media"!==r.type){for(var o=r.selector.split(","),s=[],l=0;l<o.length;l++)s.push(o[l].split(i+" ").join(""));r.selector=s.join(",")}else r.subStyles=this.clearNamespacing(r.subStyles,!0)}return!1===t?this.getCSSForEditor(n):n},i.prototype.createStyleElement=function(e,t,n){if(void 0===n&&(n=!1),!1===this.testMode&&"nonamespace"!==n&&(t=this.applyNamespacing(t)),"string"!=typeof t&&(t=this.getCSSForEditor(t)),!0===n&&(t=this.getCSSForEditor(this.parseCSS(t))),!1!==this.testMode)return this.testMode("create style #"+e,t);var i=document.getElementById(e);i&&i.parentNode.removeChild(i);var a=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.id=e,r.type="text/css",a.appendChild(r),r.styleSheet&&!r.sheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))},t.a=i},Nv8m:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("mvVQ"),a=n("/E8u"),r=n("MGFw"),o=n("WtWf"),s=n("DH7j"),l=n("yCtX"),c=n("l7GE"),d=n("ZUHj");function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length){if(!Object(s.a)(t[0]))return t[0];t=t[0]}return Object(l.a)(t,void 0).lift(new p)}var p=function(){function e(){Object(r.a)(this,e)}return Object(o.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new m(e))}}]),e}(),m=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).hasFirst=!1,i.observables=[],i.subscriptions=[],i}return Object(o.a)(n,[{key:"_next",value:function(e){this.observables.push(e)}},{key:"_complete",value:function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var i=e[n],a=Object(d.a)(this,i,void 0,n);this.subscriptions&&this.subscriptions.push(a),this.add(a)}this.observables=null}}},{key:"notifyNext",value:function(e,t,n){if(!this.hasFirst){this.hasFirst=!0;for(var i=0;i<this.subscriptions.length;i++)if(i!==n){var a=this.subscriptions[i];a.unsubscribe(),this.remove(a)}this.subscriptions=null}this.destination.next(t)}}]),n}(c.a)},Nw2X:function(e,t,n){"use strict";n.d(t,"a",function(){return w});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("gmuX"),l=n("oook"),c=n("vnPf"),d=n("l7P3"),u=n("tyNb"),p=n("3Pt+"),m=n("/t3+"),f=n("XiUz"),h=n("bTqV"),g=n("NFeN"),A=n("ofXK"),b=n("bv9b"),y=n("sYmb"),v=["tenantProfileComponent"];function C(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",13)}function x(e,t){1&e&&a["\u0275\u0275element"](0,"div",14)}var w=function(e){function t(t,n,i,a,r,o,s,l){var c=e.call(this,t,n,a)||this;return c.store=t,c.router=n,c.data=i,c.dialogRef=a,c.componentFactoryResolver=r,c.injector=o,c.errorStateMatcher=s,c.tenantProfileService=l,c.submitted=!1,c.isAdd=c.data.isAdd,c.tenantProfile=c.data.tenantProfile,c}return Object(i.d)(t,e),t.prototype.ngAfterViewInit=function(){var e=this;this.isAdd&&setTimeout(function(){e.tenantProfileComponent.entityForm.markAsDirty()},0)},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.save=function(){var e=this;this.submitted=!0,this.tenantProfileComponent.entityForm.valid&&(this.tenantProfile=Object(i.a)(Object(i.a)({},this.tenantProfile),this.tenantProfileComponent.entityFormValue()),this.tenantProfileService.saveTenantProfile(this.tenantProfile).subscribe(function(t){e.dialogRef.close(t)}))},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](d.Store),a["\u0275\u0275directiveInject"](u.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](a.ComponentFactoryResolver),a["\u0275\u0275directiveInject"](a.Injector),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](c.a))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-tenant-profile-dialog"]],viewQuery:function(e,t){if(1&e&&a["\u0275\u0275viewQuery"](v,3),2&e){var n;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.tenantProfileComponent=n.first)}},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:25,vars:24,consts:[[2,"width","600px",3,"ngSubmit"],["color","accent"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"standalone","entity","isEdit"],["tenantProfileComponent",""],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,C,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,x,1,0,"div",6),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275element"](14,"tb-tenant-profile",8,9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"div",10),a["\u0275\u0275elementStart"](17,"button",11),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](18,"async"),a["\u0275\u0275text"](19),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"button",12),a["\u0275\u0275pipe"](22,"async"),a["\u0275\u0275text"](23),a["\u0275\u0275pipe"](24,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275reference"](15);a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,10,t.isAdd?"tenant-profile.add":"tenant-profile.edit")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,12,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,14,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("standalone",!0)("entity",t.tenantProfile)("isEdit",!0),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](18,16,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](20,18,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](22,20,t.isLoading$)||(null==n.entityForm?null:n.entityForm.invalid)||!(null!=n.entityForm&&n.entityForm.dirty)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](24,22,t.isAdd?"action.add":"action.save")," ")}},directives:[p["\u0275angular_packages_forms_forms_ba"],p.NgControlStatusGroup,p.NgForm,m.MatToolbar,f.b,h.MatButton,g.MatIcon,A.NgIf,o.MatDialogContent,l.a,o.MatDialogActions,f.e,b.MatProgressBar],pipes:[y.TranslatePipe,A.AsyncPipe],encapsulation:2}),t}(s.a);0,void 0},O5Hl:function(e,t,n){"use strict";n.d(t,"a",function(){return be});var i=n("mrSG"),a=n("FtGj"),r=n("fXoL"),o=n("3Pt+"),s=n("LRne"),l=n("vkgz"),c=n("pLZG"),d=n("lJxs"),u=n("5+tZ"),p=n("w1tV"),m=n("05l1"),f=n("x+ZX"),h=n("8LU1"),g=n("3Tyt"),A=n("0lYY"),b=n("UZbx"),y=n("OiFK"),v=n("FKr1"),C=n("T4sd"),x=n("S+vS"),w=n("jhTr"),S=n("//Q6"),E=n("l7P3"),I=n("sYmb"),O=n("0IaG"),T=n("kmnG"),F=n("A5z7"),B=n("2+wj"),M=n("ofXK"),P=n("qFsG"),D=n("/1cH"),k=n("XiUz"),_=n("znSr"),L=n("NFeN"),j=n("Qu3c"),N=n("bTqV"),R=n("d5eY"),U=["keyInput"],V=["keyAutocomplete"],Q=["chipList"];function G(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",24),r["\u0275\u0275elementStart"](1,"mat-icon",25),r["\u0275\u0275text"](2,"drag_handle"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]())}function H(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"span",27),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275elementStart"](2,"mat-icon",25),r["\u0275\u0275text"](3,"notifications"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](1,1,"datakey.alarm"))}function K(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"span",27),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275element"](2,"mat-icon",28),r["\u0275\u0275elementEnd"]()),2&e&&r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](1,1,"datakey.attributes"))}function q(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"span",27),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275element"](2,"mat-icon",29),r["\u0275\u0275elementEnd"]()),2&e&&r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](1,1,"datakey.entity-field"))}function z(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"span",27),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275elementStart"](2,"mat-icon",25),r["\u0275\u0275text"](3,"timeline"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](1,1,"datakey.timeseries"))}function W(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275template"](1,H,4,3,"span",26),r["\u0275\u0275template"](2,K,3,3,"span",26),r["\u0275\u0275template"](3,q,3,3,"span",26),r["\u0275\u0275template"](4,z,4,3,"span",26),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]().$implicit,i=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.type===i.dataKeyTypes.alarm),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.type===i.dataKeyTypes.attribute),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.type===i.dataKeyTypes.entityField),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.type===i.dataKeyTypes.timeseries)}}function X(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"strong"),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]().$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("f(",n.name,")")}}function $(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"strong"),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]().$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](n.name)}}function J(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",30),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"](),t=e.$implicit,i=e.index;return r["\u0275\u0275nextContext"]().editDataKey(t,i)}),r["\u0275\u0275elementStart"](1,"mat-icon",25),r["\u0275\u0275text"](2,"edit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}}function Y(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-icon",31),r["\u0275\u0275text"](1,"close"),r["\u0275\u0275elementEnd"]())}var Z=function(e){return{background:e}};function ee(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mat-chip",12),r["\u0275\u0275listener"]("removed",function(){r["\u0275\u0275restoreView"](n);var e=t.$implicit;return r["\u0275\u0275nextContext"]().remove(e)}),r["\u0275\u0275elementStart"](1,"div",13),r["\u0275\u0275template"](2,G,3,0,"div",14),r["\u0275\u0275elementStart"](3,"div",15),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=t.$implicit;return r["\u0275\u0275nextContext"]().showColorPicker(e)}),r["\u0275\u0275element"](4,"div",16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"div",17),r["\u0275\u0275elementStart"](6,"div",18),r["\u0275\u0275template"](7,W,5,4,"span",10),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"div",19),r["\u0275\u0275text"](10,": "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"div",18),r["\u0275\u0275template"](12,X,2,1,"strong",20),r["\u0275\u0275template"](13,$,2,1,"ng-template",null,21,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](15,J,3,0,"button",22),r["\u0275\u0275template"](16,Y,2,0,"mat-icon",23),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,a=r["\u0275\u0275reference"](14),o=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("selectable",!o.disabled)("removable",!o.disabled&&!o.isEntityCountDatasource),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!o.disabled),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngStyle",r["\u0275\u0275pureFunction1"](10,Z,i.color)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",o.datasourceType===o.datasourceTypes.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",i.label," "),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",o.datasourceType!==o.datasourceTypes.function&&i.postFuncBody)("ngIfElse",a),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",!o.disabled),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!o.disabled&&!o.isEntityCountDatasource)}}function te(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"span",27),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275elementStart"](2,"mat-icon",35),r["\u0275\u0275text"](3,"notifications"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](1,1,"datakey.alarm"))}function ne(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"span",27),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275element"](2,"mat-icon",36),r["\u0275\u0275elementEnd"]()),2&e&&r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](1,1,"datakey.attributes"))}function ie(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"span",27),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275element"](2,"mat-icon",37),r["\u0275\u0275elementEnd"]()),2&e&&r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](1,1,"datakey.entity-field"))}function ae(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"span",27),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275elementStart"](2,"mat-icon",35),r["\u0275\u0275text"](3,"timeline"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](1,1,"datakey.timeseries"))}function re(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275template"](1,te,4,3,"span",26),r["\u0275\u0275template"](2,ne,3,3,"span",26),r["\u0275\u0275template"](3,ie,3,3,"span",26),r["\u0275\u0275template"](4,ae,4,3,"span",26),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]().$implicit,i=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.type===i.dataKeyTypes.alarm),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.type===i.dataKeyTypes.attribute),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.type===i.dataKeyTypes.entityField),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.type===i.dataKeyTypes.timeseries)}}function oe(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-option",32),r["\u0275\u0275elementStart"](1,"span",33),r["\u0275\u0275template"](2,re,5,4,"span",10),r["\u0275\u0275element"](3,"span",34),r["\u0275\u0275pipe"](4,"highlight"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("value",n),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",i.datasourceType===i.datasourceTypes.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("innerHTML",r["\u0275\u0275pipeBind2"](4,3,n.name,i.searchText),r["\u0275\u0275sanitizeHtml"])}}function se(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"span",41),r["\u0275\u0275text"](2,"entity.no-keys-found"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]())}function le(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275elementStart"](1,"a",43),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"](3);return e.createKey(e.searchText)}),r["\u0275\u0275text"](2,"entity.create-new-key"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}}function ce(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"span",27),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275elementStart"](2,"mat-icon",44),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"](4);return e.createKey(e.searchText,e.dataKeyTypes.alarm)}),r["\u0275\u0275text"](3,"notifications"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}2&e&&r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](1,1,"datakey.alarm"))}function de(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"span",27),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275elementStart"](2,"mat-icon",45),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"](4);return e.createKey(e.searchText,e.dataKeyTypes.attribute)}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}2&e&&r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](1,1,"datakey.attributes"))}function ue(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"span",27),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275elementStart"](2,"mat-icon",46),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"](4);return e.createKey(e.searchText,e.dataKeyTypes.entityField)}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}2&e&&r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](1,1,"datakey.entity-field"))}function pe(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](3,ce,4,3,"span",26),r["\u0275\u0275template"](4,de,3,3,"span",26),r["\u0275\u0275template"](5,ue,3,3,"span",26),r["\u0275\u0275elementStart"](6,"span",27),r["\u0275\u0275pipe"](7,"translate"),r["\u0275\u0275elementStart"](8,"mat-icon",44),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"](3);return e.createKey(e.searchText,e.dataKeyTypes.timeseries)}),r["\u0275\u0275text"](9,"timeline"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"](3);r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("",r["\u0275\u0275pipeBind1"](2,5,"entity.create-new-key")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",i.widgetType==i.widgetTypes.alarm),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",i.widgetType==i.widgetTypes.latest||i.widgetType==i.widgetTypes.alarm),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",i.widgetType==i.widgetTypes.latest||i.widgetType==i.widgetTypes.alarm),r["\u0275\u0275advance"](1),r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](7,7,"datakey.timeseries"))}}var me=function(e){return{key:e}};function fe(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"async"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](3,le,3,0,"span",20),r["\u0275\u0275template"](4,pe,10,9,"ng-template",null,42,r["\u0275\u0275templateRefExtractor"])),2&e){var n=r["\u0275\u0275reference"](5),i=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,3,i.translate.get("entity.no-key-matching",r["\u0275\u0275pureFunction1"](5,me,i.truncate.transform(i.searchText,!0,6,"..."))))," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",i.datasourceType!==i.datasourceTypes.entity)("ngIfElse",n)}}function he(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-option",38),r["\u0275\u0275elementStart"](1,"div",39),r["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),r["\u0275\u0275template"](2,se,3,0,"div",20),r["\u0275\u0275template"](3,fe,6,7,"ng-template",null,40,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](4),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("value",null),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!i.textIsNotEmpty(i.searchText))("ngIfElse",n)}}function ge(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",n.requiredText," ")}}function Ae(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",47),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",n.maxDataKeysText(),"\n")}}var be=function(){function e(e,t,n,i,r,o,s,l){this.store=e,this.errorStateMatcher=t,this.translate=n,this.utils=i,this.dialogs=r,this.dialog=o,this.fb=s,this.truncate=l,this.datasourceTypes=A.a,this.widgetTypes=A.m,this.dataKeyTypes=g.h,this.keys=[],this.separatorKeysCodes=[a.ENTER,a.COMMA,a.SEMICOLON],this.searchText="",this.latestSearchTextResult=null,this.fetchObservable$=null,this.dirty=!1,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"maxDataKeys",{get:function(){return this.datasourceType===A.a.entityCount?1:this.maxDataKeysValue},set:function(e){this.maxDataKeysValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue||!this.optDataKeys||this.isEntityCountDatasource},set:function(e){this.requiredValue=Object(h.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.updateValidators=function(){this.keysListFormGroup.get("keys").setValidators(this.required?[o.Validators.required]:[]),this.keysListFormGroup.get("keys").updateValueAndValidity()},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.keysListFormGroup=this.fb.group({keys:[null,this.required?[o.Validators.required]:[]],key:[null]}),this.alarmKeys=[];for(var t=0,n=Object.keys(b.e);t<n.length;t++){var i=n[t];this.alarmKeys.push({name:i,type:g.h.alarm})}this.functionTypeKeys=[];for(var a=0,r=this.utils.getPredefinedFunctionsList();a<r.length;a++){var s=r[a];this.functionTypeKeys.push({name:s,type:g.h.function})}this.updateParams(),this.filteredKeys=this.keysListFormGroup.get("key").valueChanges.pipe(Object(l.a)(function(t){t&&"string"!=typeof t?e.addFromChipValue(t):null===t&&e.clear(e.keyInput.nativeElement.value)}),Object(c.a)(function(e){return"string"==typeof e}),Object(d.a)(function(e){return e?"string"==typeof e?e:e.name:""}),Object(u.b)(function(t){return e.fetchKeys(t)}),Object(p.a)())},e.prototype.maxDataKeysText=function(){return null!==this.maxDataKeys&&this.maxDataKeys>-1?this.datasourceType===A.a.function?this.translate.instant("datakey.maximum-function-types",{count:this.maxDataKeys}):this.isEntityCountDatasource?"":this.translate.instant("datakey.maximum-timeseries-or-attributes",{count:this.maxDataKeys}):""},e.prototype.updateParams=function(){this.datasourceType===A.a.function?(this.dataKeyType=g.h.function,this.placeholder=this.translate.instant("datakey.function-types"),this.requiredText=this.translate.instant("datakey.function-types-required")):(this.widgetType===A.m.latest?(this.dataKeyType=null,this.requiredText=this.translate.instant("datakey.timeseries-or-attributes-required")):this.widgetType===A.m.alarm?(this.dataKeyType=null,this.requiredText=this.translate.instant("datakey.alarm-fields-timeseries-or-attributes-required")):(this.dataKeyType=g.h.timeseries,this.requiredText=this.translate.instant("datakey.timeseries-required")),this.placeholder="")},e.prototype.reset=function(){this.widgetType===A.m.alarm?this.keys=this.utils.getDefaultAlarmDataKeys():this.isEntityCountDatasource?this.keys=[this.callbacks.generateDataKey("count",g.h.count)]:this.keys=[],this.keysListFormGroup.get("keys").setValue(this.keys),this.modelValue=this.keys.length?Object(i.h)(this.keys):null,this.keyInput&&(this.keyInput.nativeElement.value=""),this.keysListFormGroup.get("key").patchValue("",{emitEvent:!1}),this.propagateChange(this.modelValue),this.dirty=!0,this.latestSearchTextResult=null},e.prototype.ngOnChanges=function(e){for(var t=this,n=0,i=Object.keys(e);n<i.length;n++){var a=i[n],r=e[a];r.firstChange||r.currentValue===r.previousValue||("entityAliasId"===a?(this.clearSearchCache(),this.dirty=!0):["widgetType","datasourceType"].includes(a)?(this.clearSearchCache(),this.updateParams(),setTimeout(function(){t.reset()},1)):["required","optDataKeys"].includes("propName")&&this.updateValidators())}},e.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=this.required&&!this.modelValue;return n||i},e.prototype.ngAfterViewInit=function(){},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.keysListFormGroup.disable({emitEvent:!1}):this.keysListFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){this.searchText="",null!=e&&e.length?(this.modelValue=Object(i.h)(e),this.keys=Object(i.h)(e),this.keysListFormGroup.get("keys").setValue(this.keys)):(this.keys=[],this.keysListFormGroup.get("keys").setValue(this.keys),this.modelValue=null),this.dirty=!0},e.prototype.onFocus=function(){this.dirty&&(this.keysListFormGroup.get("key").updateValueAndValidity({onlySelf:!0,emitEvent:!0}),this.dirty=!1)},e.prototype.addFromChipValue=function(e){var t=this.callbacks.generateDataKey(e.name,e.type);this.addKey(t)},e.prototype.addKey=function(e){(!this.maxDataKeys||this.maxDataKeys<0||!this.modelValue||this.modelValue.length<this.maxDataKeys)&&(this.modelValue||(this.modelValue=[]),this.modelValue.push(e),this.keys.push(e),this.keysListFormGroup.get("keys").setValue(this.keys)),this.propagateChange(this.modelValue),this.clear()},e.prototype.add=function(e){var t=e.value;(t||"").trim()&&this.dataKeyType&&this.addFromChipValue({name:t.trim(),type:this.dataKeyType}),this.clear()},e.prototype.remove=function(e){var t=this.keys.indexOf(e);t>=0&&(this.keys.splice(t,1),this.keysListFormGroup.get("keys").setValue(this.keys),this.modelValue.splice(t,1),this.modelValue.length||(this.modelValue=null),this.propagateChange(this.modelValue),this.clear())},e.prototype.onChipDrop=function(e){var t=e.from,n=e.to;this.keys.splice(n,0,this.keys.splice(t,1)[0]),this.keysListFormGroup.get("keys").setValue(this.keys),this.modelValue.splice(n,0,this.modelValue.splice(t,1)[0]),this.propagateChange(this.modelValue)},e.prototype.showColorPicker=function(e){var t=this;this.dialogs.colorPicker(e.color).subscribe(function(n){n&&e.color!==n&&(e.color=n,t.propagateChange(t.modelValue))})},e.prototype.editDataKey=function(e,t){var n=this;this.dialog.open(w.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{dataKey:Object(S.e)(e),dataKeySettingsSchema:this.datakeySettingsSchema,entityAliasId:this.entityAliasId,showPostProcessing:this.widgetType!==A.m.alarm,callbacks:this.callbacks}}).afterClosed().subscribe(function(e){e&&(n.keys[t]=e,n.keysListFormGroup.get("keys").setValue(n.keys),n.modelValue[t]=e,n.propagateChange(n.modelValue))})},e.prototype.createKey=function(e,t){void 0===t&&(t=this.dataKeyType),this.addFromChipValue({name:e?e.trim():"",type:t})},e.prototype.displayKeyFn=function(e){return e?e.name:void 0},e.prototype.fetchKeys=function(e){var t=this;if(this.searchText!==e||null===this.latestSearchTextResult){this.searchText=e;var n=this.createDataKeyFilter(this.searchText);return this.getKeys().pipe(Object(d.a)(function(e){return e.filter(n)}),Object(l.a)(function(e){return t.latestSearchTextResult=e}))}return Object(s.a)(this.latestSearchTextResult)},e.prototype.getKeys=function(){if(null===this.fetchObservable$){var e=void 0;if(this.datasourceType===A.a.function){var t=this.widgetType===A.m.alarm?this.alarmKeys:this.functionTypeKeys;e=Object(s.a)(t)}else if(this.datasourceType===A.a.entity&&this.entityAliasId){var n=[g.h.timeseries];this.widgetType!==A.m.latest&&this.widgetType!==A.m.alarm||(n.push(g.h.attribute),n.push(g.h.entityField),this.widgetType===A.m.alarm&&n.push(g.h.alarm)),e=this.callbacks.fetchEntityKeys(this.entityAliasId,n)}else e=Object(s.a)([]);this.fetchObservable$=e.pipe(Object(m.a)(1),Object(f.a)())}return this.fetchObservable$},e.prototype.createDataKeyFilter=function(e){var t=e.toLowerCase();return function(e){return e.name.toLowerCase().startsWith(t)}},e.prototype.textIsNotEmpty=function(e){return!!(e&&null!=e&&e.length>0)},e.prototype.clear=function(e){var t=this;void 0===e&&(e=""),this.keyInput.nativeElement.value=e,this.keysListFormGroup.get("key").patchValue(e,{emitEvent:!0}),setTimeout(function(){t.keyInput.nativeElement.blur(),t.keyInput.nativeElement.focus()},0)},Object.defineProperty(e.prototype,"isEntityCountDatasource",{get:function(){return this.datasourceType===A.a.entityCount},enumerable:!1,configurable:!0}),e.prototype.clearSearchCache=function(){this.searchText="",this.fetchObservable$=null,this.latestSearchTextResult=null},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](E.Store),r["\u0275\u0275directiveInject"](v.ErrorStateMatcher,4),r["\u0275\u0275directiveInject"](I.TranslateService),r["\u0275\u0275directiveInject"](y.a),r["\u0275\u0275directiveInject"](x.a),r["\u0275\u0275directiveInject"](O.MatDialog),r["\u0275\u0275directiveInject"](o.FormBuilder),r["\u0275\u0275directiveInject"](C.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-data-keys"]],viewQuery:function(e,t){if(1&e&&(r["\u0275\u0275viewQuery"](U,1),r["\u0275\u0275viewQuery"](V,1),r["\u0275\u0275viewQuery"](Q,1)),2&e){var n=void 0;r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.keyInput=n.first),r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.matAutocomplete=n.first),r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.chipList=n.first)}},inputs:{widgetType:"widgetType",datasourceType:"datasourceType",maxDataKeys:"maxDataKeys",optDataKeys:"optDataKeys",aliasController:"aliasController",datakeySettingsSchema:"datakeySettingsSchema",callbacks:"callbacks",entityAliasId:"entityAliasId",required:"required",disabled:"disabled"},features:[r["\u0275\u0275ProvidersFeature"]([{provide:o.NG_VALUE_ACCESSOR,useExisting:Object(r.forwardRef)(function(){return e}),multi:!0},{provide:v.ErrorStateMatcher,useExisting:e}]),r["\u0275\u0275NgOnChangesFeature"]],decls:15,vars:18,consts:[["appearance","standard",1,"mat-block",3,"formGroup"],["formControlName","keys","tb-chip-draggable","",3,"chipDrop"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","key","matAutocompleteOrigin","",2,"max-width","200px",3,"placeholder","readonly","matAutocompleteConnectedTo","matAutocomplete","matAutocompleteDisabled","matChipInputFor","matChipInputSeparatorKeyCodes","focusin","matChipInputTokenEnd"],["keyInput","","origin","matAutocompleteOrigin"],[1,"tb-autocomplete",3,"displayWith"],["keyAutocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["class","tb-not-found",3,"value",4,"ngIf"],[4,"ngIf"],["class","mat-caption","style","color: rgba(0,0,0,0.57);",4,"ngIf"],[3,"selectable","removable","removed"],["fxLayout","row","fxLayoutAlign","start center",1,"tb-attribute-chip"],["class","tb-chip-drag-handle","style","margin-right: 5px;",4,"ngIf"],[1,"tb-color-preview",2,"margin-right","5px",3,"click"],[1,"tb-color-result",3,"ngStyle"],[1,"tb-chip-labels"],[1,"tb-chip-label"],[1,"tb-chip-separator"],[4,"ngIf","ngIfElse"],["simpleChipLabel",""],["type","button","mat-button","","mat-icon-button","","class","tb-mat-32",3,"click",4,"ngIf"],["matChipRemove","",4,"ngIf"],[1,"tb-chip-drag-handle",2,"margin-right","5px"],[1,"tb-mat-20"],["matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["matTooltipPosition","above",3,"matTooltip"],["svgIcon","mdi:alpha-a-circle-outline",1,"tb-mat-20"],["svgIcon","mdi:alpha-e-circle-outline",1,"tb-mat-20"],["type","button","mat-button","","mat-icon-button","",1,"tb-mat-32",3,"click"],["matChipRemove",""],[3,"value"],[2,"white-space","nowrap"],[3,"innerHTML"],[1,"tb-mat-16"],["svgIcon","mdi:alpha-a-circle-outline",1,"tb-mat-16"],["svgIcon","mdi:alpha-e-circle-outline",1,"tb-mat-16"],[1,"tb-not-found",3,"value"],[1,"tb-not-found-content",3,"click"],["searchNotEmpty",""],["translate",""],["createEntityKey",""],["translate","",3,"click"],[1,"tb-mat-16",3,"click"],["svgIcon","mdi:alpha-a-circle-outline",1,"tb-mat-16",3,"click"],["svgIcon","mdi:alpha-e-circle-outline",1,"tb-mat-16",3,"click"],[1,"mat-caption",2,"color","rgba(0,0,0,0.57)"]],template:function(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-form-field",0),r["\u0275\u0275elementStart"](1,"mat-chip-list",1,2),r["\u0275\u0275listener"]("chipDrop",function(e){return t.onChipDrop(e)}),r["\u0275\u0275template"](3,ee,17,12,"mat-chip",3),r["\u0275\u0275elementStart"](4,"input",4,5),r["\u0275\u0275listener"]("focusin",function(){return t.onFocus()})("matChipInputTokenEnd",function(e){return t.add(e)}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"mat-autocomplete",6,7),r["\u0275\u0275template"](9,oe,5,6,"mat-option",8),r["\u0275\u0275pipe"](10,"async"),r["\u0275\u0275template"](11,he,5,3,"mat-option",9),r["\u0275\u0275pipe"](12,"async"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](13,ge,2,1,"mat-error",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](14,Ae,2,1,"div",11)),2&e){var n,i=r["\u0275\u0275reference"](2),a=r["\u0275\u0275reference"](6),o=r["\u0275\u0275reference"](8);r["\u0275\u0275property"]("formGroup",t.keysListFormGroup),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngForOf",t.keys),r["\u0275\u0275advance"](1),r["\u0275\u0275propertyInterpolate"]("placeholder",t.disabled?"":t.placeholder),r["\u0275\u0275property"]("readonly",t.isEntityCountDatasource)("matAutocompleteConnectedTo",a)("matAutocomplete",o)("matAutocompleteDisabled",t.isEntityCountDatasource)("matChipInputFor",i)("matChipInputSeparatorKeyCodes",t.separatorKeysCodes),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("displayWith",t.displayKeyFn),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",r["\u0275\u0275pipeBind1"](10,14,t.filteredKeys)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!(null!=(n=r["\u0275\u0275pipeBind1"](12,16,t.filteredKeys))&&n.length)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.keysListFormGroup.get("keys").hasError("required")),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",null!==t.maxDataKeys&&t.maxDataKeys>-1)}},directives:[T.MatFormField,o.NgControlStatusGroup,o.FormGroupDirective,F.MatChipList,B.a,o.NgControlStatus,o.FormControlName,M.NgForOf,P.MatInput,o.DefaultValueAccessor,D.MatAutocompleteTrigger,F.MatChipInput,D.MatAutocompleteOrigin,D.MatAutocomplete,M.NgIf,F.MatChip,k.f,k.e,M.NgStyle,_.e,L.MatIcon,j.MatTooltip,N.MatButton,F.MatChipRemove,v.MatOption,I.TranslateDirective,T.MatError],pipes:[M.AsyncPipe,I.TranslatePipe,R.a],styles:["[_nghost-%COMP%]   .mat-chip.mat-standard-chip[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .mat-chip.mat-standard-chip[_ngcontent-%COMP%]   .tb-attribute-chip[_ngcontent-%COMP%]{max-width:100%;color:#424242;font-weight:400;font-size:16px}[_nghost-%COMP%]   .mat-chip.mat-standard-chip[_ngcontent-%COMP%]   .tb-attribute-chip[_ngcontent-%COMP%]   .tb-chip-drag-handle[_ngcontent-%COMP%]{cursor:move}[_nghost-%COMP%]   .mat-chip.mat-standard-chip[_ngcontent-%COMP%]   .tb-attribute-chip[_ngcontent-%COMP%]   .tb-chip-drag-handle[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{pointer-events:none}[_nghost-%COMP%]   .mat-chip.mat-standard-chip[_ngcontent-%COMP%]   .tb-attribute-chip[_ngcontent-%COMP%]   .tb-chip-labels[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-end;min-width:0}[_nghost-%COMP%]   .mat-chip.mat-standard-chip[_ngcontent-%COMP%]   .tb-attribute-chip[_ngcontent-%COMP%]   .tb-chip-labels[_ngcontent-%COMP%]   .tb-chip-label[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[_nghost-%COMP%]   .mat-chip.mat-standard-chip[_ngcontent-%COMP%]   .tb-attribute-chip[_ngcontent-%COMP%]   .tb-chip-labels[_ngcontent-%COMP%]   .tb-chip-separator[_ngcontent-%COMP%]{white-space:pre}[_nghost-%COMP%]   .mat-chip.mat-standard-chip[_ngcontent-%COMP%]   .tb-attribute-chip[_ngcontent-%COMP%]   .mat-chip-remove.mat-icon[_ngcontent-%COMP%]{width:24px;height:24px;font-size:24px;margin-left:0;color:inherit;opacity:inherit}[_nghost-%COMP%]     .mat-form-field-flex{padding-top:0}[_nghost-%COMP%]     .mat-form-field-flex .mat-form-field-infix{border-top:0}"]}),e}();0,void 0},OMGm:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(e){this.dashboard=e,this.dashboardTimewindowApi={onResetTimewindow:this.dashboard.onResetTimewindow.bind(this.dashboard),onUpdateTimewindow:this.dashboard.onUpdateTimewindow.bind(this.dashboard)}}return Object.defineProperty(e.prototype,"aliasController",{get:function(){return this.dashboard.aliasController},enumerable:!1,configurable:!0}),e}()},OUQ4:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("//Q6"),s=n("NEMC"),l=n("l7P3"),c=n("ofXK"),d=n("JoHb");function u(e,t){if(1&e&&i["\u0275\u0275element"](0,"tb-default-tenant-profile-configuration",3),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("required",n.required)}}var p=function(){function e(e,t){this.store=e,this.fb=t,this.tenantProfileType=s.a,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(r.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.tenantProfileConfigurationFormGroup=this.fb.group({configuration:[null,a.Validators.required]}),this.tenantProfileConfigurationFormGroup.valueChanges.subscribe(function(){e.updateModel()})},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.tenantProfileConfigurationFormGroup.disable({emitEvent:!1}):this.tenantProfileConfigurationFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){this.type=null==e?void 0:e.type;var t=Object(o.e)(e);t&&delete t.type,this.tenantProfileConfigurationFormGroup.patchValue({configuration:t},{emitEvent:!1})},e.prototype.updateModel=function(){var e=null;this.tenantProfileConfigurationFormGroup.valid&&((e=this.tenantProfileConfigurationFormGroup.getRawValue().configuration).type=this.type),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](l.Store),i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-tenant-profile-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:3,vars:3,consts:[[3,"formGroup"],[3,"ngSwitch"],[3,"ngSwitchCase"],["formControlName","configuration",3,"required"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275template"](2,u,1,1,"ng-template",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.tenantProfileConfigurationFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitch",t.type),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",t.tenantProfileType.DEFAULT))},directives:[a.NgControlStatusGroup,a.FormGroupDirective,c.NgSwitch,c.NgSwitchCase,d.a,a.NgControlStatus,a.FormControlName,a.RequiredValidator],encapsulation:2}),e}();0,void 0},"OUR+":function(e,t,n){"use strict";n.d(t,"a",function(){return S});var i=n("mrSG"),a=n("fXoL"),r=n("3Pt+"),o=n("8LU1"),s=n("//Q6"),l=n("fhIE"),c=n("LvDl"),d=n.n(c),u=n("0IaG"),p=n("7EHt"),m=n("ofXK"),f=n("XiUz"),h=n("QNnG"),g=n("bTqV"),A=n("Qu3c"),b=n("NFeN"),y=n("QQgM"),v=n("sYmb");function C(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",10),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var t=a["\u0275\u0275nextContext"]().$implicit;return a["\u0275\u0275nextContext"]().addInstances(e,t)}),a["\u0275\u0275pipe"](1,"translate"),a["\u0275\u0275elementStart"](2,"mat-icon",11),a["\u0275\u0275text"](3,"note_add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}2&e&&a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](1,1,"device-profile.lwm2m.add-new-instances"))}function x(e,t){1&e&&a["\u0275\u0275element"](0,"tb-profile-lwm2m-observe-attr-telemetry-instances",12)}function w(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-expansion-panel",3),a["\u0275\u0275elementStart"](1,"mat-expansion-panel-header"),a["\u0275\u0275elementStart"](2,"mat-panel-title",4),a["\u0275\u0275elementStart"](3,"span",5),a["\u0275\u0275text"](4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](5),a["\u0275\u0275element"](6,"span",6),a["\u0275\u0275element"](7,"tb-profile-lwm2m-attributes",7),a["\u0275\u0275template"](8,C,4,3,"button",8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,x,1,0,"ng-template",9),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=t.index,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("formGroupName",i),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](n.get("name").value),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"]("\xa0#",n.get("keyId").value," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("modelName",r.getNameObject(n.value)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!r.disabled&&n.get("multiple").value)}}var S=function(){function e(e,t,n){var i=this;this.fb=e,this.dialog=t,this.cd=n,this.valueChange$=null,this.propagateChange=function(e){},this.updateModel=function(e){e&&i.modelsFormGroup.valid?i.propagateChange(e):i.propagateChange(null)},this.updateValidators=function(){i.modelsFormArray.setValidators(i.required?r.Validators.required:[]),i.modelsFormArray.updateValueAndValidity()},this.trackByParams=function(e,t){return t.id},this.addInstances=function(e,t){e&&(e.stopPropagation(),e.preventDefault());var n=t.value,a=i.instancesToSetId(n.instances);i.dialog.open(l.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{instancesId:new Set(a),objectName:n.name,objectId:n.id}}).afterClosed().subscribe(function(e){Object(s.o)(e)&&i.updateInstancesIds(e,t,a)})},this.getNameObject=function(e){return e.name+" #"+e.keyId},this.modelsFormGroup=this.fb.group({models:this.fb.array([])})}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){var t=Object(o.coerceBooleanProperty)(e);this.requiredValue!==t&&(this.requiredValue=t,this.updateValidators())},enumerable:!1,configurable:!0}),e.prototype.ngOnDestroy=function(){this.valueChange$&&this.valueChange$.unsubscribe()},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){this.disabled=e,e?this.modelsFormGroup.disable({emitEvent:!1}):this.modelsFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){Object(s.o)(e)&&this.updateModels(e)},e.prototype.validate=function(){return this.modelsFormGroup.valid?null:{modelsFormGroup:!1}},Object.defineProperty(e.prototype,"modelsFormArray",{get:function(){return this.modelsFormGroup.get("models")},enumerable:!1,configurable:!0}),e.prototype.updateModels=function(e){var t=this;if(e.length===this.modelsFormArray.length)this.modelsFormArray.patchValue(e,{emitEvent:!1});else{this.valueChange$&&this.valueChange$.unsubscribe();var n=[];e.forEach(function(e){n.push(t.createModelFormGroup(e))}),this.modelsFormGroup.setControl("models",this.fb.array(n)),this.disabled&&this.modelsFormGroup.disable({emitEvent:!1}),this.valueChange$=this.modelsFormGroup.valueChanges.subscribe(function(e){t.updateModel(e.models)})}},e.prototype.createModelFormGroup=function(e){return this.fb.group({id:[e.id],keyId:[e.keyId],name:[e.name],multiple:[e.multiple],mandatory:[e.mandatory],attributes:[e.attributes],instances:[e.instances]})},e.prototype.updateInstancesIds=function(e,t,n){var i=t.get("instances").value,a=Object(s.e)(i[0]);if(a.attributes={},a.resources.forEach(function(e){e.attribute=!1,e.telemetry=!1,e.observe=!1,e.keyName=d.a.camelCase(e.name),e.attributes={}}),!Object(s.r)(n,e)){var r=this.diffBetweenSet(n,e),o=this.diffBetweenSet(e,n);o.size&&o.forEach(function(e){var t=Object(s.e)(a);t.resources.forEach(function(t){return t.keyName+=e}),t.id=e,i.push(t)}),r.size&&0===(i=i.filter(function(e){return!r.has(e.id)})).length&&(a.id=0,i.push(a)),(o.size||r.size)&&(i.sort(function(e,t){return e.id-t.id}),t.get("instances").patchValue(i),this.cd.markForCheck())}},e.prototype.diffBetweenSet=function(e,t){return new Set(Object(i.h)(Array.from(e)).filter(function(e){return!t.has(e)}))},e.prototype.instancesToSetId=function(e){return new Set(e.map(function(e){return e.id}))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](r.FormBuilder),a["\u0275\u0275directiveInject"](u.MatDialog),a["\u0275\u0275directiveInject"](a.ChangeDetectorRef))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-profile-lwm2m-observe-attr-telemetry"]],inputs:{required:"required",disabled:"disabled"},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)(function(){return e}),multi:!0},{provide:r.NG_VALIDATORS,useExisting:Object(a.forwardRef)(function(){return e}),multi:!0}])],decls:3,vars:3,consts:[[3,"formGroup"],["multi","true","formArrayName","models"],[3,"formGroupName",4,"ngFor","ngForOf","ngForTrackBy"],[3,"formGroupName"],["fxLayoutAlign","start center"],[1,"tb-panel-title"],["fxFlex",""],["formControlName","attributes",3,"modelName"],["type","button","mat-button","","mat-icon-button","","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],["matExpansionPanelContent",""],["type","button","mat-button","","mat-icon-button","","matTooltipPosition","above",3,"matTooltip","click"],[1,"material-icons"],["formControlName","instances"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"section",0),a["\u0275\u0275elementStart"](1,"mat-accordion",1),a["\u0275\u0275template"](2,w,10,5,"mat-expansion-panel",2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.modelsFormGroup),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",t.modelsFormArray.controls)("ngForTrackBy",t.trackByParams))},directives:[r.NgControlStatusGroup,r.FormGroupDirective,p.MatAccordion,r.FormArrayName,m.NgForOf,p.MatExpansionPanel,r.FormGroupName,p.MatExpansionPanelHeader,p.MatExpansionPanelTitle,f.e,f.b,h.a,r.NgControlStatus,r.FormControlName,m.NgIf,p.MatExpansionPanelContent,g.MatButton,A.MatTooltip,b.MatIcon,y.a],pipes:[v.TranslatePipe],styles:["[_nghost-%COMP%]   section[_ngcontent-%COMP%]{padding:2px}[_nghost-%COMP%]   .tb-panel-title[_ngcontent-%COMP%]{font-weight:500}"]}),e}();0,void 0},P0tZ:function(e,t,n){"use strict";n.d(t,"a",function(){return be});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("LRne"),c=n("gmuX"),d=n("Hxax"),u=n("OiFK"),p=n("0lYY"),m=n("vkgz"),f=n("5+tZ"),h=n("lJxs"),g=n("JX91"),A=n("YnEf"),b=n("4j5O"),y=n("gi3d"),v=n("//Q6"),C=n("/U8w"),x=n("l7P3"),w=n("tyNb"),S=n("/t3+"),E=n("XiUz"),I=n("bTqV"),O=n("NFeN"),T=n("ofXK"),F=n("kmnG"),B=n("sYmb"),M=n("d3UM"),P=n("qFsG"),D=n("jy/V"),k=n("bv9b"),_=n("XMqU"),L=n("/1cH"),j=n("bSwM"),N=n("yAAm"),R=n("Grun"),U=n("d5eY"),V=["dashboardStateInput"],Q=["mobileActionEditor"];function G(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",23)}function H(e,t){1&e&&a["\u0275\u0275element"](0,"div",24)}function K(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",25),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n.key),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",i.actionSourceName(n.value)," ")}}function q(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-config.action-source-required")," "))}function z(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-config.action-name-required")," "))}function W(e,t){1&e&&(a["\u0275\u0275element"](0,"mat-error",26),a["\u0275\u0275pipe"](1,"translate")),2&e&&a["\u0275\u0275property"]("innerHTML",a["\u0275\u0275pipeBind1"](1,1,"widget-config.action-name-not-unique"),a["\u0275\u0275sanitizeHtml"])}function X(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",25),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.widgetActionTypeTranslations.get(i.widgetActionType[n]))," ")}}function $(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-config.action-type-required")," "))}function J(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",27),a["\u0275\u0275text"](1,"widget-action.target-dashboard"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](2,"tb-dashboard-autocomplete",28)),2&e&&(a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("selectFirstDashboard",!0))}function Y(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",34),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).clearTargetDashboardState()}),a["\u0275\u0275elementStart"](1,"mat-icon",4),a["\u0275\u0275text"](2,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}}function Z(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",25),a["\u0275\u0275element"](1,"span",26),a["\u0275\u0275pipe"](2,"highlight"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("innerHTML",a["\u0275\u0275pipeBind2"](2,2,n,i.targetDashboardStateSearchText),a["\u0275\u0275sanitizeHtml"])}}function ee(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-action.target-dashboard-state-required")," "))}function te(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-form-field",9),a["\u0275\u0275element"](1,"input",29,30),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275template"](4,Y,3,0,"button",31),a["\u0275\u0275elementStart"](5,"mat-autocomplete",32,33),a["\u0275\u0275template"](7,Z,3,5,"mat-option",12),a["\u0275\u0275pipe"](8,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,ee,3,3,"mat-error",13),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275reference"](6),i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](3,6,"widget-action.target-dashboard-state")),a["\u0275\u0275property"]("required",i.widgetActionFormGroup.get("type").value===i.widgetActionType.openDashboardState)("matAutocomplete",n),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",i.actionTypeFormGroup.get("targetDashboardStateId").value),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",a["\u0275\u0275pipeBind1"](8,8,i.filteredDashboardStates)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",i.actionTypeFormGroup.get("targetDashboardStateId").hasError("required"))}}function ne(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-checkbox",35),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-action.open-right-layout")," "))}function ie(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-checkbox",36),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-action.open-new-browser-tab")," "))}function ae(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-checkbox",39),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-action.set-entity-from-widget")," "))}function re(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-form-field",40),a["\u0275\u0275elementStart"](1,"mat-label",10),a["\u0275\u0275text"](2,"alias.state-entity-parameter-name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"input",41),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](4,1,"alias.default-entity-parameter-name")))}function oe(e,t){if(1&e&&(a["\u0275\u0275template"](0,ae,3,3,"mat-checkbox",37),a["\u0275\u0275template"](1,re,5,3,"mat-form-field",38)),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngIf",n.data.widgetType!==n.widgetType.static),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.actionTypeFormGroup.get("setEntityId").value)}}function se(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-action.dialog-size-range-error")," "))}function le(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-action.dialog-size-range-error")," "))}function ce(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-action.dialog-size-range-error")," "))}function de(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-action.dialog-size-range-error")," "))}function ue(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"section"),a["\u0275\u0275elementStart"](1,"mat-form-field",9),a["\u0275\u0275elementStart"](2,"mat-label",10),a["\u0275\u0275text"](3,"widget-action.dialog-title"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"input",43),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"mat-checkbox",44),a["\u0275\u0275text"](6),a["\u0275\u0275pipe"](7,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"mat-form-field",9),a["\u0275\u0275elementStart"](9,"mat-label",10),a["\u0275\u0275text"](10,"widget-action.dialog-width"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](11,"input",45),a["\u0275\u0275template"](12,se,3,3,"mat-error",13),a["\u0275\u0275template"](13,le,3,3,"mat-error",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"mat-form-field",9),a["\u0275\u0275elementStart"](15,"mat-label",10),a["\u0275\u0275text"](16,"widget-action.dialog-height"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](17,"input",46),a["\u0275\u0275template"](18,ce,3,3,"mat-error",13),a["\u0275\u0275template"](19,de,3,3,"mat-error",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](6),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](7,5,"widget-action.dialog-hide-dashboard-toolbar")," "),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",n.actionTypeFormGroup.get("dialogWidth").hasError("min")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.actionTypeFormGroup.get("dialogWidth").hasError("max")),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",n.actionTypeFormGroup.get("dialogHeight").hasError("min")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.actionTypeFormGroup.get("dialogHeight").hasError("max"))}}function pe(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-checkbox",42),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](3,ue,20,7,"section",13)),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,"widget-action.open-in-separate-dialog")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",n.actionTypeFormGroup.get("openInSeparateDialog").value)}}var me=function(){return["$event","widgetContext","entityId","entityName","additionalParams","entityLabel"]},fe=function(){return[]};function he(e,t){if(1&e&&a["\u0275\u0275element"](0,"tb-js-func",47),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("functionArgs",a["\u0275\u0275pureFunction0"](3,me))("validationArgs",a["\u0275\u0275pureFunction0"](4,fe))("editorCompleter",n.customActionEditorCompleter)}}function ge(e,t){1&e&&a["\u0275\u0275element"](0,"tb-custom-action-pretty-editor",48)}function Ae(e,t){1&e&&a["\u0275\u0275element"](0,"tb-mobile-action-editor",49,50)}var be=function(e){function t(t,n,i,a,r,o,s,l,c){var d=e.call(this,t,n,l)||this;return d.store=t,d.router=n,d.utils=i,d.dashboardService=a,d.dashboardUtils=r,d.data=o,d.errorStateMatcher=s,d.dialogRef=l,d.fb=c,d.widgetActionTypes=Object.keys(p.d),d.widgetActionTypeTranslations=p.k,d.widgetActionType=p.d,d.targetDashboardStateSearchText="",d.customActionEditorCompleter=y.a,d.submitted=!1,d.widgetType=p.m,d.isAdd=o.isAdd,d.isAdd?d.action={id:d.utils.guid(),name:"",icon:"more_horiz",type:null}:d.action=d.data.action,d}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this.widgetActionFormGroup=this.fb.group({}),this.widgetActionFormGroup.addControl("actionSourceId",this.fb.control(this.action.actionSourceId,[s.Validators.required])),this.widgetActionFormGroup.addControl("name",this.fb.control(this.action.name,[this.validateActionName(),s.Validators.required])),this.widgetActionFormGroup.addControl("icon",this.fb.control(this.action.icon,[s.Validators.required])),this.widgetActionFormGroup.addControl("type",this.fb.control(this.action.type,[s.Validators.required])),this.updateActionTypeFormGroup(this.action.type,this.action),this.widgetActionFormGroup.get("type").valueChanges.subscribe(function(t){e.updateActionTypeFormGroup(t)}),this.widgetActionFormGroup.get("actionSourceId").valueChanges.subscribe(function(){e.widgetActionFormGroup.get("name").updateValueAndValidity()})},t.prototype.updateActionTypeFormGroup=function(e,t){if(this.actionTypeFormGroup=this.fb.group({}),e)switch(e){case p.d.openDashboard:case p.d.openDashboardState:case p.d.updateDashboardState:this.actionTypeFormGroup.addControl("targetDashboardStateId",this.fb.control(t?t.targetDashboardStateId:null,e===p.d.openDashboardState?[s.Validators.required]:[])),this.actionTypeFormGroup.addControl("setEntityId",this.fb.control(this.data.widgetType!==p.m.static&&(!t||t.setEntityId),[])),this.actionTypeFormGroup.addControl("stateEntityParamName",this.fb.control(t?t.stateEntityParamName:null,[])),e===p.d.openDashboard?(this.actionTypeFormGroup.addControl("openNewBrowserTab",this.fb.control(!!t&&t.openNewBrowserTab,[])),this.actionTypeFormGroup.addControl("targetDashboardId",this.fb.control(t?t.targetDashboardId:null,[s.Validators.required])),this.setupSelectedDashboardStateIds(t?t.targetDashboardId:null)):(e===p.d.openDashboardState&&(this.actionTypeFormGroup.addControl("openInSeparateDialog",this.fb.control(!!t&&t.openInSeparateDialog,[])),this.actionTypeFormGroup.addControl("dialogTitle",this.fb.control(t?t.dialogTitle:"",[])),this.actionTypeFormGroup.addControl("dialogHideDashboardToolbar",this.fb.control(!t||!Object(v.o)(t.dialogHideDashboardToolbar)||t.dialogHideDashboardToolbar,[])),this.actionTypeFormGroup.addControl("dialogWidth",this.fb.control(t?t.dialogWidth:null,[s.Validators.min(1),s.Validators.max(100)])),this.actionTypeFormGroup.addControl("dialogHeight",this.fb.control(t?t.dialogHeight:null,[s.Validators.min(1),s.Validators.max(100)]))),this.actionTypeFormGroup.addControl("openRightLayout",this.fb.control(!!t&&t.openRightLayout,[]))),this.setupFilteredDashboardStates();break;case p.d.custom:this.actionTypeFormGroup.addControl("customFunction",this.fb.control(t?t.customFunction:null,[]));break;case p.d.customPretty:this.actionTypeFormGroup.addControl("customAction",this.fb.control(Object(d.b)(t),[s.Validators.required]));break;case p.d.mobileAction:this.actionTypeFormGroup.addControl("mobileAction",this.fb.control(t?t.mobileAction:null,[s.Validators.required]))}},t.prototype.setupSelectedDashboardStateIds=function(e){var t=this;this.selectedDashboardStateIds=this.actionTypeFormGroup.get("targetDashboardId").valueChanges.pipe(Object(m.a)(function(){t.targetDashboardStateSearchText=""}),Object(f.b)(function(e){return e?t.dashboardService.getDashboard(e):Object(l.a)(null)}),Object(h.a)(function(e){if(e){var n=(e=t.dashboardUtils.validateAndUpdateDashboard(e)).configuration.states;return Object.keys(n)}return[]}))},t.prototype.setupFilteredDashboardStates=function(){var e=this;this.targetDashboardStateSearchText="",this.filteredDashboardStates=this.actionTypeFormGroup.get("targetDashboardStateId").valueChanges.pipe(Object(g.a)(""),Object(h.a)(function(e){return e||""}),Object(f.b)(function(t){return e.fetchDashboardStates(t)}))},t.prototype.fetchDashboardStates=function(e){var t=this;return this.targetDashboardStateSearchText=e,this.widgetActionFormGroup.get("type").value===p.d.openDashboard?this.selectedDashboardStateIds.pipe(Object(h.a)(function(n){var i=e?n.filter(t.createFilterForDashboardState(e)):n;return i&&i.length?i:[e]})):Object(l.a)(this.data.callbacks.fetchDashboardStates(e))},t.prototype.createFilterForDashboardState=function(e){var t=e.toLowerCase();return function(e){return 0===e.toLowerCase().indexOf(t)}},t.prototype.clearTargetDashboardState=function(e){var t=this;void 0===e&&(e=""),this.dashboardStateInput.nativeElement.value=e,this.actionTypeFormGroup.get("targetDashboardStateId").patchValue(e,{emitEvent:!0}),setTimeout(function(){t.dashboardStateInput.nativeElement.blur(),t.dashboardStateInput.nativeElement.focus()},0)},t.prototype.validateActionName=function(){var e=this;return function(t){var n=t.value;return e.checkActionName(n,e.widgetActionFormGroup.get("actionSourceId").value)?null:{actionNameNotUnique:!0}}},t.prototype.checkActionName=function(e,t){var n=!0;if(e&&t){var i=this.data.actionsData.actionsMap[t];if(i){var a=i.filter(function(t){return t.name===e});a&&a.length&&a[0].id!==this.action.id&&(n=!1)}}return n},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.actionSourceName=function(e){return e?this.utils.customTranslation(e.name,e.name):""},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.save=function(){if(this.submitted=!0,null!=this.mobileActionEditor&&this.mobileActionEditor.validateOnSubmit(),this.widgetActionFormGroup.valid&&this.actionTypeFormGroup.valid){var e=void 0;(e=this.widgetActionFormGroup.get("type").value===p.d.customPretty?Object(i.a)(Object(i.a)({},this.widgetActionFormGroup.value),this.actionTypeFormGroup.get("customAction").value):Object(i.a)(Object(i.a)({},this.widgetActionFormGroup.value),this.actionTypeFormGroup.value)).id=this.action.id,this.dialogRef.close(e)}},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](x.Store),a["\u0275\u0275directiveInject"](w.Router),a["\u0275\u0275directiveInject"](u.a),a["\u0275\u0275directiveInject"](A.a),a["\u0275\u0275directiveInject"](b.a),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-widget-action-dialog"]],viewQuery:function(e,t){if(1&e&&(a["\u0275\u0275viewQuery"](V,1),a["\u0275\u0275viewQuery"](Q,1)),2&e){var n=void 0;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.dashboardStateInput=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.mobileActionEditor=n.first)}},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:55,vars:44,consts:[[2,"min-width","480px",3,"formGroup","ngSubmit"],["color","accent"],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],[1,"mat-block"],["translate",""],["required","","formControlName","actionSourceId"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["required","","matInput","","formControlName","name"],[3,"innerHTML",4,"ngIf"],["formControlName","icon"],["required","","formControlName","type"],["fxLayout","column",3,"formGroup","ngSwitch"],[3,"ngSwitchCase"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"],[3,"value"],[3,"innerHTML"],["translate","",1,"mat-caption","tb-required",2,"padding-left","3px","padding-bottom","10px","color","rgba(0,0,0,0.57)"],["formControlName","targetDashboardId","required","",3,"selectFirstDashboard"],["matInput","","type","text","formControlName","targetDashboardStateId",3,"placeholder","required","matAutocomplete"],["dashboardStateInput",""],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"tb-autocomplete"],["targetDashboardStateAutocomplete","matAutocomplete"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["formControlName","openRightLayout"],["formControlName","openNewBrowserTab"],["formControlName","setEntityId",4,"ngIf"],["floatLabel","always","class","mat-block",4,"ngIf"],["formControlName","setEntityId"],["floatLabel","always",1,"mat-block"],["matInput","","formControlName","stateEntityParamName",3,"placeholder"],["formControlName","openInSeparateDialog"],["matInput","","formControlName","dialogTitle"],["formControlName","dialogHideDashboardToolbar"],["type","number","min","1","max","100","step","1","matInput","","formControlName","dialogWidth"],["type","number","min","1","max","100","step","1","matInput","","formControlName","dialogHeight"],["formControlName","customFunction",3,"functionArgs","validationArgs","editorCompleter"],["formControlName","customAction"],["formControlName","mobileAction"],["mobileActionEditor",""]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,G,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,H,1,0,"div",6),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275elementStart"](14,"fieldset",8),a["\u0275\u0275pipe"](15,"async"),a["\u0275\u0275elementStart"](16,"mat-form-field",9),a["\u0275\u0275elementStart"](17,"mat-label",10),a["\u0275\u0275text"](18,"widget-config.action-source"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"mat-select",11),a["\u0275\u0275template"](20,K,2,2,"mat-option",12),a["\u0275\u0275pipe"](21,"keyvalue"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](22,q,3,3,"mat-error",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](23,"mat-form-field",9),a["\u0275\u0275elementStart"](24,"mat-label",10),a["\u0275\u0275text"](25,"widget-config.action-name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](26,"input",14),a["\u0275\u0275template"](27,z,3,3,"mat-error",13),a["\u0275\u0275template"](28,W,2,3,"mat-error",15),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](29,"tb-material-icon-select",16),a["\u0275\u0275elementStart"](30,"mat-form-field",9),a["\u0275\u0275elementStart"](31,"mat-label",10),a["\u0275\u0275text"](32,"widget-config.action-type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](33,"mat-select",17),a["\u0275\u0275template"](34,X,3,4,"mat-option",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](35,$,3,3,"mat-error",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](36,"section",18),a["\u0275\u0275template"](37,J,3,1,"ng-template",19),a["\u0275\u0275template"](38,te,10,10,"ng-template",19),a["\u0275\u0275template"](39,ne,3,3,"ng-template",19),a["\u0275\u0275template"](40,ie,3,3,"ng-template",19),a["\u0275\u0275template"](41,oe,2,2,"ng-template",19),a["\u0275\u0275template"](42,pe,4,4,"ng-template",19),a["\u0275\u0275template"](43,he,1,5,"ng-template",19),a["\u0275\u0275template"](44,ge,1,0,"ng-template",19),a["\u0275\u0275template"](45,Ae,2,0,"ng-template",19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](46,"div",20),a["\u0275\u0275elementStart"](47,"button",21),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](48,"async"),a["\u0275\u0275text"](49),a["\u0275\u0275pipe"](50,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](51,"button",22),a["\u0275\u0275pipe"](52,"async"),a["\u0275\u0275text"](53),a["\u0275\u0275pipe"](54,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.widgetActionFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,26,t.isAdd?"widget-config.add-action":"widget-config.edit-action")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,28,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,30,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](15,32,t.isLoading$)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngForOf",a["\u0275\u0275pipeBind1"](21,34,t.data.actionsData.actionSources)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",t.widgetActionFormGroup.get("actionSourceId").hasError("required")),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",t.widgetActionFormGroup.get("name").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.widgetActionFormGroup.get("name").hasError("actionNameNotUnique")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngForOf",t.widgetActionTypes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.widgetActionFormGroup.get("type").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",t.actionTypeFormGroup)("ngSwitch",t.widgetActionFormGroup.get("type").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.widgetActionType.openDashboard),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.widgetActionFormGroup.get("type").value===t.widgetActionType.openDashboardState||t.widgetActionFormGroup.get("type").value===t.widgetActionType.updateDashboardState||t.widgetActionFormGroup.get("type").value===t.widgetActionType.openDashboard?t.widgetActionFormGroup.get("type").value:""),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.widgetActionFormGroup.get("type").value===t.widgetActionType.openDashboardState||t.widgetActionFormGroup.get("type").value===t.widgetActionType.updateDashboardState?t.widgetActionFormGroup.get("type").value:""),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.widgetActionFormGroup.get("type").value===t.widgetActionType.openDashboard?t.widgetActionFormGroup.get("type").value:""),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.widgetActionFormGroup.get("type").value===t.widgetActionType.openDashboardState||t.widgetActionFormGroup.get("type").value===t.widgetActionType.updateDashboardState||t.widgetActionFormGroup.get("type").value===t.widgetActionType.openDashboard?t.widgetActionFormGroup.get("type").value:""),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.widgetActionFormGroup.get("type").value===t.widgetActionType.openDashboardState?t.widgetActionFormGroup.get("type").value:""),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.widgetActionType.custom),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.widgetActionType.customPretty),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",t.widgetActionType.mobileAction),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](48,36,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](50,38,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](52,40,t.isLoading$)||t.widgetActionFormGroup.invalid||t.actionTypeFormGroup.invalid||!t.widgetActionFormGroup.dirty&&!t.actionTypeFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](54,42,t.isAdd?"action.add":"action.save")," "))},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,S.MatToolbar,E.b,I.MatButton,O.MatIcon,T.NgIf,o.MatDialogContent,F.MatFormField,F.MatLabel,B.TranslateDirective,M.MatSelect,s.RequiredValidator,s.NgControlStatus,s.FormControlName,T.NgForOf,P.MatInput,s.DefaultValueAccessor,D.a,E.f,T.NgSwitch,T.NgSwitchCase,o.MatDialogActions,E.e,k.MatProgressBar,r.MatOption,F.MatError,_.a,L.MatAutocompleteTrigger,L.MatAutocomplete,F.MatSuffix,j.MatCheckbox,s.NumberValueAccessor,N.a,R.a,C.a],pipes:[B.TranslatePipe,T.AsyncPipe,T.KeyValuePipe,U.a],styles:["[_nghost-%COMP%]     .mat-checkbox-label{white-space:normal}"]}),t}(c.a);0,void 0},PWf0:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("//Q6"),s=n("c1Lj"),l=n("l7P3"),c=n("kmnG"),d=n("sYmb"),u=n("d3UM"),p=n("ofXK"),m=n("FKr1"),f=n("Mfyf"),h=n("Yhx1");function g(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",8),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,a.smsProviderTypeTranslations.get(n))," ")}}function A(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.sms-provider-type-required")," "))}function b(e,t){if(1&e&&i["\u0275\u0275element"](0,"tb-aws-sns-provider-configuration",9),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("required",n.required)}}function y(e,t){if(1&e&&i["\u0275\u0275element"](0,"tb-twilio-sms-provider-configuration",9),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("required",n.required)}}var v=function(){function e(e,t){this.store=e,this.fb=t,this.smsProviderType=s.a,this.smsProviderTypes=Object.keys(s.a),this.smsProviderTypeTranslations=s.f,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(r.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.smsProviderConfigurationFormGroup=this.fb.group({type:[null,a.Validators.required],configuration:[null,Object(s.e)(!0)]}),this.smsProviderConfigurationFormGroup.valueChanges.subscribe(function(){e.updateModel()}),this.smsProviderConfigurationFormGroup.get("type").valueChanges.subscribe(function(){e.smsProviderTypeChanged()})},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.smsProviderConfigurationFormGroup.disable({emitEvent:!1}):this.smsProviderConfigurationFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){var t=Object(o.e)(e),n=null==t?void 0:t.type;t&&delete t.type,this.smsProviderConfigurationFormGroup.patchValue({type:n},{emitEvent:!1}),this.smsProviderConfigurationFormGroup.patchValue({configuration:t},{emitEvent:!1})},e.prototype.smsProviderTypeChanged=function(){var e=this.smsProviderConfigurationFormGroup.get("type").value;this.smsProviderConfigurationFormGroup.patchValue({configuration:Object(s.b)(e)},{emitEvent:!1})},e.prototype.updateModel=function(){var e=null;this.smsProviderConfigurationFormGroup.valid&&((e=this.smsProviderConfigurationFormGroup.getRawValue().configuration).type=this.smsProviderConfigurationFormGroup.getRawValue().type),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](l.Store),i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-sms-provider-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:10,vars:7,consts:[[3,"formGroup"],[1,"mat-block"],["translate",""],["formControlName","type",3,"required"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngSwitch"],[3,"ngSwitchCase"],[3,"value"],["formControlName","configuration",3,"required"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"mat-form-field",1),i["\u0275\u0275elementStart"](2,"mat-label",2),i["\u0275\u0275text"](3,"admin.sms-provider-type"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mat-select",3),i["\u0275\u0275template"](5,g,3,4,"mat-option",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,A,3,3,"mat-error",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"div",6),i["\u0275\u0275template"](8,b,1,1,"ng-template",7),i["\u0275\u0275template"](9,y,1,1,"ng-template",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.smsProviderConfigurationFormGroup),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("required",t.required),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",t.smsProviderTypes),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.smsProviderConfigurationFormGroup.get("type").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitch",t.smsProviderConfigurationFormGroup.get("type").value),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",t.smsProviderType.AWS_SNS),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",t.smsProviderType.TWILIO))},directives:[a.NgControlStatusGroup,a.FormGroupDirective,c.MatFormField,c.MatLabel,d.TranslateDirective,u.MatSelect,a.NgControlStatus,a.FormControlName,a.RequiredValidator,p.NgForOf,p.NgIf,p.NgSwitch,p.NgSwitchCase,m.MatOption,c.MatError,f.a,h.a],pipes:[d.TranslatePipe],encapsulation:2}),e}();0,void 0},PdRd:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n("0lYY"),a=n("fXoL"),r=n("2lgB"),o=n("mrSG"),s=n("3Tyt"),l=n("xw5a"),c=n("//Q6"),d=n("UZbx"),u=function(){function e(e,t){this.listener=e,this.telemetryService=t,this.alarmDataSubscriptionOptions=this.listener.alarmDataSubscriptionOptions,this.datasourceType=this.alarmDataSubscriptionOptions.datasourceType}return e.prototype.unsubscribe=function(){this.datasourceType===i.a.entity&&this.subscriber&&(this.subscriber.unsubscribe(),this.subscriber=null)},e.prototype.subscribe=function(){var e=this;if(this.subsTw=this.alarmDataSubscriptionOptions.subscriptionTimewindow,this.history=this.alarmDataSubscriptionOptions.subscriptionTimewindow&&Object(c.z)(this.alarmDataSubscriptionOptions.subscriptionTimewindow.fixedWindow),this.realtime=this.alarmDataSubscriptionOptions.subscriptionTimewindow&&Object(c.o)(this.alarmDataSubscriptionOptions.subscriptionTimewindow.realtimeWindowMs),this.datasourceType===i.a.entity){this.subscriber=new s.w(this.telemetryService),this.alarmDataCommand=new s.a;var t=this.alarmDataSubscriptionOptions.dataKeys.filter(function(e){return e.type===s.h.alarm}).map(function(e){return{type:l.d.ALARM_FIELD,key:e.name}}),n=this.alarmDataSubscriptionOptions.dataKeys.filter(function(e){return e.type===s.h.entityField}).map(function(e){return{type:l.d.ENTITY_FIELD,key:e.name}}),a=this.alarmDataSubscriptionOptions.dataKeys.filter(function(e){return e.type===s.h.attribute}).map(function(e){return{type:l.d.ATTRIBUTE,key:e.name}}),r=this.alarmDataSubscriptionOptions.dataKeys.filter(function(e){return e.type===s.h.timeseries}).map(function(e){return{type:l.d.TIME_SERIES,key:e.name}}),u=a.concat(r),p=this.alarmDataSubscriptionOptions.keyFilters;this.alarmDataSubscriptionOptions.additionalKeyFilters&&(p=p?p.concat(this.alarmDataSubscriptionOptions.additionalKeyFilters):this.alarmDataSubscriptionOptions.additionalKeyFilters),this.alarmDataCommand.query={entityFilter:this.alarmDataSubscriptionOptions.entityFilter,pageLink:Object(c.e)(this.alarmDataSubscriptionOptions.pageLink),keyFilters:p,alarmFields:t,entityFields:n,latestValues:u},this.history?(this.alarmDataCommand.query.pageLink.startTs=this.subsTw.fixedWindow.startTimeMs,this.alarmDataCommand.query.pageLink.endTs=this.subsTw.fixedWindow.endTimeMs):this.alarmDataCommand.query.pageLink.timeWindow=this.subsTw.realtimeWindowMs,this.subscriber.setTsOffset(this.subsTw.tsOffset),this.subscriber.subscriptionCommands.push(this.alarmDataCommand),this.subscriber.alarmData$.subscribe(function(t){t.data?e.onPageData(t.data,t.allowedEntities,t.totalEntities):t.update&&e.onDataUpdate(t.update)}),this.subscriber.subscribe()}else if(this.datasourceType===i.a.function){var m=Object(c.e)(d.j);m.createdTime+=this.subsTw.tsOffset,m.startTs+=this.subsTw.tsOffset;var f={data:[Object(o.a)(Object(o.a)({},m),{entityId:"1",latest:{}})],hasNext:!1,totalElements:1,totalPages:1};this.onPageData(f,1024,1)}},e.prototype.resetData=function(){this.alarmIdToDataIndex={};for(var e=0;e<this.pageData.data.length;e++){var t=this.pageData.data[e];this.alarmIdToDataIndex[t.id.id]=e}},e.prototype.onPageData=function(e,t,n){this.pageData=e,this.resetData(),this.listener.alarmsLoaded(e,t,n)},e.prototype.onDataUpdate=function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t],a=this.alarmIdToDataIndex[i.id.id];Object(c.n)(a)&&a>=0&&(this.pageData.data[a]=i)}this.listener.alarmsUpdated(e,this.pageData)},e}(),p=function(){function e(e){this.telemetryService=e}return e.prototype.subscribeForAlarms=function(e,t,n){var a=e.alarmSource;if(e.alarmDataSubscriptionOptions=this.createAlarmSubscriptionOptions(e,t,n),a.type!==i.a.entity||a.entityFilter&&t)return e.subscription=new u(e,this.telemetryService),e.subscription.subscribe()},e.prototype.stopSubscription=function(e){e.subscription&&e.subscription.unsubscribe()},e.prototype.createAlarmSubscriptionOptions=function(e,t,n){var a=e.alarmSource,r=[];a.dataKeys.forEach(function(e){var t={name:e.name,type:e.type};r.push(t)});var o={datasourceType:a.type,dataKeys:r,subscriptionTimewindow:Object(c.e)(e.subscriptionTimewindow)};return o.datasourceType===i.a.entity&&(o.entityFilter=a.entityFilter,o.pageLink=t,o.keyFilters=a.keyFilters,o.additionalKeyFilters=n),o},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275inject"](r.a))},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();0,void 0},"Pmg/":function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n("0lYY"),a=n("aX2P"),r=n("xw5a"),o=n("3Tyt"),s=n("//Q6"),l=n("9GfO"),c=n("oKkZ"),d=n("U3y+"),u=n("jtHE"),p=n("LRne"),m=function(){function e(e,t,n){this.listener=e,this.telemetryService=t,this.utils=n,this.entityDataSubscriptionOptions=this.listener.subscriptionOptions,this.datasourceType=this.entityDataSubscriptionOptions.datasourceType,this.dataKeys={},this.tickScheduledTime=0,this.tickElapsed=0,this.dataResolved=!1,this.started=!1,this.initializeSubscription()}return e.prototype.initializeSubscription=function(){for(var e=0;e<this.entityDataSubscriptionOptions.dataKeys.length;e++){var t=Object(s.e)(this.entityDataSubscriptionOptions.dataKeys[e]);t.index=e,this.datasourceType===i.a.function?t.func||(t.func=new Function("time","prevValue",t.funcBody)):t.postFuncBody&&!t.postFunc&&(t.postFunc=new Function("time","value","prevValue","timePrev","prevOrigValue",t.postFuncBody));var n=void 0;if(this.datasourceType===i.a.entity||this.datasourceType===i.a.entityCount||this.entityDataSubscriptionOptions.type===i.m.timeseries){n=this.datasourceType===i.a.function?t.name+"_"+t.index+"_"+t.type:t.name+"_"+t.type;var a=this.dataKeys[n];a||(a=[],this.dataKeys[n]=a),a.push(t)}else n=String(Object(s.G)(t)),this.dataKeys[n]=t;t.key=n}},e.prototype.unsubscribe=function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.datasourceType!==i.a.entity&&this.datasourceType!==i.a.entityCount||this.subscriber&&(this.subscriber.unsubscribe(),this.subscriber=null),this.dataAggregators&&(this.dataAggregators.forEach(function(e){e.destroy()}),this.dataAggregators=null),this.pageData=null},e.prototype.subscribe=function(){var e=this;if(this.entityDataResolveSubject=new u.a(1),this.entityDataSubscriptionOptions.isPaginatedDataSubscription&&(this.started=!0,this.dataResolved=!0,this.subsTw=this.entityDataSubscriptionOptions.subscriptionTimewindow,this.latestTsOffset=this.entityDataSubscriptionOptions.latestTsOffset,this.history=this.entityDataSubscriptionOptions.subscriptionTimewindow&&Object(s.z)(this.entityDataSubscriptionOptions.subscriptionTimewindow.fixedWindow),this.realtime=this.entityDataSubscriptionOptions.subscriptionTimewindow&&Object(s.o)(this.entityDataSubscriptionOptions.subscriptionTimewindow.realtimeWindowMs)),this.datasourceType===i.a.entity){var t=this.entityDataSubscriptionOptions.dataKeys.filter(function(e){return e.type===o.h.entityField}).map(function(e){return{type:r.d.ENTITY_FIELD,key:e.name}});t.find(function(e){return"name"===e.key})||t.push({type:r.d.ENTITY_FIELD,key:"name"}),t.find(function(e){return"label"===e.key})||t.push({type:r.d.ENTITY_FIELD,key:"label"}),t.find(function(e){return"additionalInfo"===e.key})||t.push({type:r.d.ENTITY_FIELD,key:"additionalInfo"}),this.attrFields=this.entityDataSubscriptionOptions.dataKeys.filter(function(e){return e.type===o.h.attribute}).map(function(e){return{type:r.d.ATTRIBUTE,key:e.name}}),this.tsFields=this.entityDataSubscriptionOptions.dataKeys.filter(function(e){return e.type===o.h.timeseries}).map(function(e){return{type:r.d.TIME_SERIES,key:e.name}}),this.latestValues=this.attrFields.concat(this.tsFields),this.subscriber=new o.w(this.telemetryService),this.dataCommand=new o.n;var n=this.entityDataSubscriptionOptions.keyFilters;this.entityDataSubscriptionOptions.additionalKeyFilters&&(n=n?n.concat(this.entityDataSubscriptionOptions.additionalKeyFilters):this.entityDataSubscriptionOptions.additionalKeyFilters),this.dataCommand.query={entityFilter:this.entityDataSubscriptionOptions.entityFilter,pageLink:this.entityDataSubscriptionOptions.pageLink,keyFilters:n,entityFields:t,latestValues:this.latestValues},this.entityDataSubscriptionOptions.isPaginatedDataSubscription&&(this.prepareSubscriptionCommands(this.dataCommand),this.entityDataSubscriptionOptions.type===i.m.timeseries?this.subscriber.setTsOffset(this.subsTw.tsOffset):this.subscriber.setTsOffset(this.latestTsOffset)),this.subscriber.subscriptionCommands.push(this.dataCommand),this.subscriber.entityData$.subscribe(function(t){t.data?e.onPageData(t.data):t.update&&e.onDataUpdate(t.update)}),this.subscriber.reconnect$.subscribe(function(){if(e.started){var t=e.entityDataSubscriptionOptions.isPaginatedDataSubscription?e.dataCommand:e.subsCommand;if(e.entityDataSubscriptionOptions.type===i.m.timeseries&&!e.history&&e.tsFields.length){var n=e.listener.updateRealtimeSubscription();e.subsTw=n,t.tsCmd.startTs=e.subsTw.startTs,t.tsCmd.timeWindow=e.subsTw.aggregation.timeWindow,t.tsCmd.interval=e.subsTw.aggregation.interval,t.tsCmd.limit=e.subsTw.aggregation.limit,t.tsCmd.agg=e.subsTw.aggregation.type,t.tsCmd.fetchLatestPreviousPoint=e.subsTw.aggregation.stateData,e.dataAggregators.forEach(function(e){e.reset(n)})}e.entityDataSubscriptionOptions.type===i.m.timeseries?e.subscriber.setTsOffset(e.subsTw.tsOffset):e.subscriber.setTsOffset(e.latestTsOffset),t.query=e.dataCommand.query,e.subscriber.subscriptionCommands=[t]}else e.subscriber.subscriptionCommands=[e.dataCommand]}),this.subscriber.subscribe()}else if(this.datasourceType===i.a.function){var a=0;this.entityDataSubscriptionOptions.type===i.m.latest?a=this.entityDataSubscriptionOptions.latestTsOffset:this.entityDataSubscriptionOptions.subscriptionTimewindow&&(a=this.entityDataSubscriptionOptions.subscriptionTimewindow.tsOffset);var l={entityId:{id:c.a,entityType:d.b.DEVICE},timeseries:{},latest:{}},m=i.a.function;l.latest[r.d.ENTITY_FIELD]={name:{ts:Date.now()+a,value:m}};var f={data:[l],hasNext:!1,totalElements:1,totalPages:1};this.onPageData(f)}else if(this.datasourceType===i.a.entityCount){this.latestTsOffset=this.entityDataSubscriptionOptions.latestTsOffset,this.subscriber=new o.w(this.telemetryService),this.subscriber.setTsOffset(this.latestTsOffset),this.countCommand=new o.k;n=this.entityDataSubscriptionOptions.keyFilters;this.entityDataSubscriptionOptions.additionalKeyFilters&&(n=n?n.concat(this.entityDataSubscriptionOptions.additionalKeyFilters):this.entityDataSubscriptionOptions.additionalKeyFilters),this.countCommand.query={entityFilter:this.entityDataSubscriptionOptions.entityFilter,keyFilters:n},this.subscriber.subscriptionCommands.push(this.countCommand);var h={id:c.a,entityType:null},g=this.entityDataSubscriptionOptions.dataKeys[0],A=!1;this.subscriber.entityCount$.subscribe(function(t){var n,a,o,s;if(A){var l=[{entityId:h,latest:(o={},o[r.d.COUNT]=(s={},s[g.name]={ts:Date.now()+e.latestTsOffset,value:t.count+""},s),o),timeseries:{}}];e.onDataUpdate(l)}else{var c={data:[{entityId:h,latest:(n={},n[r.d.ENTITY_FIELD]={name:{ts:Date.now()+e.latestTsOffset,value:i.a.entityCount}},n[r.d.COUNT]=(a={},a[g.name]={ts:Date.now()+e.latestTsOffset,value:t.count+""},a),n),timeseries:{}}],hasNext:!1,totalElements:1,totalPages:1};e.onPageData(c),A=!0}}),this.subscriber.subscribe()}return this.entityDataSubscriptionOptions.isPaginatedDataSubscription?Object(p.a)(null):this.entityDataResolveSubject.asObservable()},e.prototype.start=function(){if(!this.entityDataSubscriptionOptions.isPaginatedDataSubscription){if(this.subsTw=this.entityDataSubscriptionOptions.subscriptionTimewindow,this.latestTsOffset=this.entityDataSubscriptionOptions.latestTsOffset,this.history=this.entityDataSubscriptionOptions.subscriptionTimewindow&&Object(s.z)(this.entityDataSubscriptionOptions.subscriptionTimewindow.fixedWindow),this.realtime=this.entityDataSubscriptionOptions.subscriptionTimewindow&&Object(s.o)(this.entityDataSubscriptionOptions.subscriptionTimewindow.realtimeWindowMs),this.prepareData(),this.datasourceType===i.a.entity){this.subsCommand=new o.n,this.subsCommand.cmdId=this.dataCommand.cmdId,this.prepareSubscriptionCommands(this.subsCommand);var e=!1;this.entityDataSubscriptionOptions.type===i.m.timeseries?this.subscriber.setTsOffset(this.subsTw.tsOffset):e=this.subscriber.setTsOffset(this.latestTsOffset),e?this.listener.forceReInit&&this.listener.forceReInit():this.subsCommand.isEmpty()||(this.subscriber.subscriptionCommands=[this.subsCommand],this.subscriber.update())}else this.datasourceType===i.a.entityCount?this.subscriber.setTsOffset(this.latestTsOffset)&&this.listener.forceReInit&&this.listener.forceReInit():this.datasourceType===i.a.function&&this.startFunction();this.started=!0}},e.prototype.prepareSubscriptionCommands=function(e){this.entityDataSubscriptionOptions.type===i.m.timeseries?this.tsFields.length>0&&(this.history?e.historyCmd={keys:this.tsFields.map(function(e){return e.key}),startTs:this.subsTw.fixedWindow.startTimeMs,endTs:this.subsTw.fixedWindow.endTimeMs,interval:this.subsTw.aggregation.interval,limit:this.subsTw.aggregation.limit,agg:this.subsTw.aggregation.type,fetchLatestPreviousPoint:this.subsTw.aggregation.stateData}:e.tsCmd={keys:this.tsFields.map(function(e){return e.key}),startTs:this.subsTw.startTs,timeWindow:this.subsTw.aggregation.timeWindow,interval:this.subsTw.aggregation.interval,limit:this.subsTw.aggregation.limit,agg:this.subsTw.aggregation.type,fetchLatestPreviousPoint:this.subsTw.aggregation.stateData}):this.entityDataSubscriptionOptions.type===i.m.latest&&this.latestValues.length>0&&(e.latestCmd={keys:this.latestValues})},e.prototype.startFunction=function(){this.frequency=1e3,this.entityDataSubscriptionOptions.type===i.m.timeseries&&(this.frequency=Math.min(this.entityDataSubscriptionOptions.subscriptionTimewindow.aggregation.interval,5e3)),this.tickScheduledTime=this.utils.currentPerfTime(),this.history?this.onTick(!0):this.timer=setTimeout(this.onTick.bind(this,!0),0)},e.prototype.prepareData=function(){if(this.timer&&(clearTimeout(this.timer),this.timer=null),this.dataAggregators&&this.dataAggregators.forEach(function(e){e.destroy()}),this.dataAggregators=[],this.resetData(),this.entityDataSubscriptionOptions.type===i.m.timeseries){var e=[];if(this.datasourceType===i.a.function)for(var t=0,n=Object.keys(this.dataKeys);t<n.length;t++){var a=n[t];this.dataKeys[a].forEach(function(t){e.push(t.name+"_"+t.index)})}else e=this.tsFields?this.tsFields.map(function(e){return e.key}):[];for(var r=0;r<this.pageData.data.length;r++)this.datasourceType===i.a.function?this.dataAggregators[r]=this.createRealtimeDataAggregator(this.subsTw,e,o.h.function,r,this.notifyListener.bind(this)):e.length&&(this.dataAggregators[r]=this.createRealtimeDataAggregator(this.subsTw,e,o.h.timeseries,r,this.notifyListener.bind(this)))}},e.prototype.resetData=function(){this.datasourceData=[],this.entityIdToDataIndex={};for(var e=0;e<this.pageData.data.length;e++){var t=this.pageData.data[e];this.entityIdToDataIndex[t.entityId.id]=e,this.datasourceData[e]={};for(var n=0,a=Object.keys(this.dataKeys);n<a.length;n++){var r=a[n],o=this.dataKeys[r];if(this.datasourceType===i.a.entity||this.datasourceType===i.a.entityCount||this.entityDataSubscriptionOptions.type===i.m.timeseries)for(var l=o,c=0;c<l.length;c++)this.datasourceData[e][r+"_"+c]={data:[]};else this.datasourceData[e][r]={data:[]}}}if(this.datasourceOrigData=Object(s.e)(this.datasourceData),this.entityDataSubscriptionOptions.type===i.m.timeseries)for(var d=0,u=Object.keys(this.dataKeys);d<u.length;d++){r=u[d];this.dataKeys[r].forEach(function(e){delete e.lastUpdateTime})}else if(this.entityDataSubscriptionOptions.type===i.m.latest)for(var p=0,m=Object.keys(this.dataKeys);p<m.length;p++){r=m[p];delete this.dataKeys[r].lastUpdateTime}},e.prototype.onPageData=function(e){var t=!this.pageData;if(!t&&!this.entityDataSubscriptionOptions.isPaginatedDataSubscription&&Object(r.x)(this.pageData,e))return this.listener.initialPageDataChanged&&this.listener.initialPageDataChanged(e),void 0;this.pageData=e,this.entityDataSubscriptionOptions.isPaginatedDataSubscription?this.prepareData():t&&this.resetData();for(var n=[],a=0;a<e.data.length;a++){var o=e.data[a];this.processEntityData(o,a,!1,function(e,t,i){n[t]||(n[t]=[]),n[t][i]=e})}this.dataResolved?((t||this.entityDataSubscriptionOptions.isPaginatedDataSubscription)&&this.listener.dataLoaded(e,n,this.listener.configDatasourceIndex,this.entityDataSubscriptionOptions.pageLink),this.entityDataSubscriptionOptions.isPaginatedDataSubscription&&t&&(this.datasourceType===i.a.function&&this.startFunction(),this.entityDataResolveSubject.next({pageData:e,data:n,datasourceIndex:this.listener.configDatasourceIndex,pageLink:this.entityDataSubscriptionOptions.pageLink}),this.entityDataResolveSubject.complete())):(this.dataResolved=!0,this.entityDataResolveSubject.next({pageData:e,data:n,datasourceIndex:this.listener.configDatasourceIndex,pageLink:this.entityDataSubscriptionOptions.pageLink}),this.entityDataResolveSubject.complete())},e.prototype.onDataUpdate=function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t],a=this.entityIdToDataIndex[i.entityId.id];Object(s.n)(a)&&a>=0&&this.processEntityData(i,a,!0,this.notifyListener.bind(this))}},e.prototype.notifyListener=function(e,t,n,i){this.listener.dataUpdated(e,this.listener.configDatasourceIndex,t,n,i)},e.prototype.processEntityData=function(e,t,n,a){var s=this;if(this.entityDataSubscriptionOptions.type===i.m.latest&&e.latest)for(var l=0,c=Object.keys(e.latest);l<c.length;l++){var d=c[l],u=this.toSubscriptionData(e.latest[d],!1),p=Object(r.u)(r.d[d]);this.onData(u,p,t,!0,a)}if(this.entityDataSubscriptionOptions.type===i.m.timeseries&&e.timeseries){u=this.toSubscriptionData(e.timeseries,!0);if(this.dataAggregators&&this.dataAggregators[t]){var m=this.dataAggregators[t],f=void 0;n||(f=m.updateOnDataCb(function(e,n){s.onData(e,s.datasourceType===i.a.function?o.h.function:o.h.timeseries,t,n,a)})),m.onData({data:u},!1,this.history,!0),f&&m.updateOnDataCb(f)}else this.history||n||this.onData(u,o.h.timeseries,t,!0,a)}},e.prototype.onData=function(e,t,n,a,r){for(var o=this,s=0,l=Object.keys(e);s<l.length;s++)for(var c=l[s],d=e[c],u=c+"_"+t,p=this.dataKeys[u],m=function(e){var t=u+"_"+e;if(f.datasourceData[n][t].data){var s,l,c=p[e],m=[],h=void 0,g=void 0,A=!1;if(f.realtime?(h=[],g=[]):(h=f.datasourceData[n][t].data,g=f.datasourceOrigData[n][t].data),h.length>0?(s=h[h.length-1],l=g[g.length-1]):(s=[0,0],l=[0,0]),f.datasourceOrigData[n][t].data=[],f.entityDataSubscriptionOptions.type===i.m.timeseries)d.forEach(function(e){var i=e,a=i[0];o.datasourceOrigData[n][t].data.push(i);var r=o.convertValue(i[1]);c.postFunc&&(r=c.postFunc(a,r,s[1],l[0],l[1])),l=i,i=[a,r],m.push(i),s=i}),A=!0;else if(f.entityDataSubscriptionOptions.type===i.m.latest){if(d.length>0){var b=d[0],y=b[0];f.datasourceOrigData[n][t].data.push(b);var v=f.convertValue(b[1]);c.postFunc&&(v=c.postFunc(y,v,s[1],l[0],l[1])),b=[y,v],m.push(b)}A=!0}A&&(f.datasourceData[n][t].data=m,r(f.datasourceData[n][t],n,c.index,a))}},f=this,h=0;p&&h<p.length;h++)m(h)},e.prototype.convertValue=function(e){return e&&Object(s.y)(e)&&Number(e).toString()===e?Number(e):e},e.prototype.toSubscriptionData=function(e,t){for(var n={},i=function(i){var a=e[i],r=[];if(t)a.forEach(function(e){r.push([e.ts,e.value])});else{var o=a;r.push([o.ts,o.value])}n[i]=r},a=0,r=Object.keys(e);a<r.length;a++){i(r[a])}return n},e.prototype.createRealtimeDataAggregator=function(e,t,n,i,a){var r=this;return new l.a(function(e,t){r.onData(e,n,i,t,a)},t,e,this.utils,this.entityDataSubscriptionOptions.ignoreDataUpdateOnIntervalTick)},e.prototype.generateSeries=function(e,t,n,i){var a,r=[],o=e.key+"_"+t,s=this.datasourceData[0][o].data;a=s.length>0?s[s.length-1]:[0,0];for(var l=n;l<=i&&(this.timer||this.history);l+=this.frequency){var c=[l,e.func(l,a[1])];r.push(c),a=c}return r.length>0&&(e.lastUpdateTime=r[r.length-1][0]),r},e.prototype.generateLatest=function(e,t){var n,i=this.datasourceData[0][e.key].data;n=i.length>0?i[i.length-1]:[0,0];var a=Date.now()+this.latestTsOffset,r=[a,e.func(a,n[1])];this.datasourceData[0][e.key].data=[r],this.listener.dataUpdated(this.datasourceData[0][e.key],this.listener.configDatasourceIndex,0,e.index,t)},e.prototype.onTick=function(e){var t,n=this.utils.currentPerfTime();if(this.tickElapsed+=n-this.tickScheduledTime,this.tickScheduledTime=n,this.timer&&clearTimeout(this.timer),this.entityDataSubscriptionOptions.type===i.m.timeseries){var r=void 0,o=void 0,s=void 0,l={data:{}};this.history||(s=Math.floor(this.tickElapsed/this.frequency));var c=this.history?this.frequency:s*this.frequency;this.tickElapsed=this.tickElapsed-c;for(var d=0,u=Object.keys(this.dataKeys);d<u.length;d++){t=u[d];for(var p=this.dataKeys[t],m=0;m<p.length&&(this.timer||this.history);m++){var f=p[m];if(!r){if(this.realtime){if(f.lastUpdateTime)r=f.lastUpdateTime+this.frequency,o=f.lastUpdateTime+c;else if(o=(r=this.entityDataSubscriptionOptions.subscriptionTimewindow.startTs+this.entityDataSubscriptionOptions.subscriptionTimewindow.tsOffset)+this.entityDataSubscriptionOptions.subscriptionTimewindow.realtimeWindowMs+this.frequency,this.entityDataSubscriptionOptions.subscriptionTimewindow.aggregation.type===a.a.NONE){var h=o-this.frequency*this.entityDataSubscriptionOptions.subscriptionTimewindow.aggregation.limit;r=Math.max(h,r)}}else r=this.entityDataSubscriptionOptions.subscriptionTimewindow.fixedWindow.startTimeMs+this.entityDataSubscriptionOptions.subscriptionTimewindow.tsOffset,o=this.entityDataSubscriptionOptions.subscriptionTimewindow.fixedWindow.endTimeMs+this.entityDataSubscriptionOptions.subscriptionTimewindow.tsOffset;if(this.entityDataSubscriptionOptions.subscriptionTimewindow.quickInterval){var g=Object(a.A)().valueOf()+this.entityDataSubscriptionOptions.subscriptionTimewindow.tsOffset;o=Math.min(g,o)}}l.data[f.name+"_"+f.index]=this.generateSeries(f,m,r,o)}}this.dataAggregators&&this.dataAggregators.length&&this.dataAggregators[0].onData(l,!0,this.history,e)}else if(this.entityDataSubscriptionOptions.type===i.m.latest)for(var A=0,b=Object.keys(this.dataKeys);A<b.length;A++)t=b[A],this.generateLatest(this.dataKeys[t],e);this.history||(this.timer=setTimeout(this.onTick.bind(this,!0),this.frequency))},e}()},Q7pZ:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("fXoL"),a=n("Y8nr"),r=n("tk/3"),o=function(){function e(e){this.http=e}return e.prototype.getAuditLogs=function(e,t){return this.http.get("/api/audit/logs"+e.toQuery(),Object(a.b)(t))},e.prototype.getAuditLogsByCustomerId=function(e,t,n){return this.http.get("/api/audit/logs/customer/"+e+t.toQuery(),Object(a.b)(n))},e.prototype.getAuditLogsByUserId=function(e,t,n){return this.http.get("/api/audit/logs/user/"+e+t.toQuery(),Object(a.b)(n))},e.prototype.getAuditLogsByEntityId=function(e,t,n){return this.http.get("/api/audit/logs/entity/"+e.entityType+"/"+e.id+t.toQuery(),Object(a.b)(n))},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](r.HttpClient))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();0,void 0},QNnG:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("//Q6"),s=n("Et39"),l=n("XNiG"),c=n("1G5W"),d=n("0IaG"),u=n("znSr"),p=n("Qu3c"),m=n("bTqV"),f=n("NFeN"),h=n("sYmb"),g=function(){function e(e,t){var n=this;this.dialog=e,this.fb=t,this.destroy$=new l.b,this.isResource=!1,this.propagateChange=function(e){},this.editAttributesLwm2m=function(e){e&&e.stopPropagation(),n.dialog.open(s.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{readonly:n.disabled,attributes:n.attributesValueMap,modelName:n.modelName,isResource:n.isResource}}).afterClosed().subscribe(function(e){e&&n.attributesFormGroup.patchValue({attributes:e})})},this.attributesFormGroup=this.fb.group({attributes:[{}]}),this.attributesFormGroup.get("attributes").valueChanges.pipe(Object(c.a)(this.destroy$)).subscribe(function(e){n.propagateChange(e)})}return Object.defineProperty(e.prototype,"required",{set:function(e){this.requiredValue=Object(r.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){this.disabled=e,e?this.attributesFormGroup.disable({emitEvent:!1}):this.attributesFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){this.attributesFormGroup.patchValue({attributes:e},{emitEvent:!1})},Object.defineProperty(e.prototype,"attributesValueMap",{get:function(){return this.attributesFormGroup.get("attributes").value},enumerable:!1,configurable:!0}),e.prototype.isDisableBtn=function(){return!this.disabled&&this.isAttributeTelemetry},e.prototype.isEmpty=function(){var e=this.attributesValueMap;return Object(o.C)(e)||Object(o.p)(e)},Object.defineProperty(e.prototype,"tooltipSetAttributesTelemetry",{get:function(){return this.isDisableBtn()?"device-profile.lwm2m.edit-attributes-select":""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tooltipButton",{get:function(){return this.disabled?"device-profile.lwm2m.view-attribute":this.isEmpty()?"device-profile.lwm2m.add-attribute":"device-profile.lwm2m.edit-attribute"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iconButton",{get:function(){return this.disabled?"visibility":this.isEmpty()?"add":"edit"},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](d.MatDialog),i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-profile-lwm2m-attributes"]],inputs:{isAttributeTelemetry:"isAttributeTelemetry",modelName:"modelName",disabled:"disabled",isResource:"isResource",required:"required"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:6,vars:9,consts:[["matTooltipPosition","above",3,"fxHide","matTooltip"],["type","button","mat-button","","mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click"],[1,"material-icons"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275elementStart"](2,"button",1),i["\u0275\u0275listener"]("click",function(e){return t.editAttributesLwm2m(e)}),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementStart"](4,"mat-icon",2),i["\u0275\u0275text"](5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](1,5,t.tooltipSetAttributesTelemetry)),i["\u0275\u0275property"]("fxHide",t.disabled&&t.isEmpty()),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](3,7,t.tooltipButton)),i["\u0275\u0275property"]("disabled",t.isDisableBtn()),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](t.iconButton))},directives:[u.d,p.MatTooltip,m.MatButton,f.MatIcon],pipes:[h.TranslatePipe],encapsulation:2}),e}();0,void 0},QQgM:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("//Q6"),s=n("sYmb"),l=n("7EHt"),c=n("ofXK"),d=n("XiUz"),u=n("bSwM"),p=n("QNnG"),m=n("DZlp");function f(e,t){1&e&&i["\u0275\u0275element"](0,"tb-profile-lwm2m-observe-attr-telemetry-resource",13)}function h(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-expansion-panel",3),i["\u0275\u0275elementStart"](1,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](2,"mat-panel-title",4),i["\u0275\u0275elementStart"](3,"div",5),i["\u0275\u0275elementStart"](4,"span",6),i["\u0275\u0275text"](5),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"div",7),i["\u0275\u0275elementStart"](9,"mat-checkbox",8),i["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()})("change",function(e){i["\u0275\u0275restoreView"](n);var a=t.$implicit;return i["\u0275\u0275nextContext"]().changeInstanceResourcesCheckBox(e.checked,a,"attribute")}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"div",7),i["\u0275\u0275elementStart"](11,"mat-checkbox",9),i["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()})("change",function(e){i["\u0275\u0275restoreView"](n);var a=t.$implicit;return i["\u0275\u0275nextContext"]().changeInstanceResourcesCheckBox(e.checked,a,"telemetry")}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"div",7),i["\u0275\u0275elementStart"](13,"mat-checkbox",9),i["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()})("change",function(e){i["\u0275\u0275restoreView"](n);var a=t.$implicit;return i["\u0275\u0275nextContext"]().changeInstanceResourcesCheckBox(e.checked,a,"observe")}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](14,"span",10),i["\u0275\u0275element"](15,"tb-profile-lwm2m-attributes",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](16,f,1,0,"ng-template",12),i["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,r=t.index,o=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("formGroupName",r)("expanded",o.isExpend)("disabled",o.isExpend),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](6,16,"device-profile.lwm2m.instance")),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"]("\xa0#",a.get("id").value," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",o.disabled)("checked",o.getChecked(a,"attribute"))("indeterminate",o.getIndeterminate(a,"attribute")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",o.disabled)("checked",o.getChecked(a,"telemetry"))("indeterminate",o.getIndeterminate(a,"telemetry")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",o.disableObserve(a))("checked",o.getChecked(a,"observe"))("indeterminate",o.getIndeterminate(a,"observe")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("isAttributeTelemetry",o.disableObserveInstance(a))("modelName",o.getNameInstance(a.value))}}var g=function(){function e(e,t){var n=this;this.fb=e,this.translate=t,this.valueChange$=null,this.propagateChange=function(e){},this.changeInstanceResourcesCheckBox=function(e,t,n){var i=Object(o.e)(t.get("resources").value);e&&"observe"===n?i.forEach(function(e){return e[n]=e.telemetry||e.attribute}):e||"observe"===n?i.forEach(function(t){return t[n]=e}):i.forEach(function(t){t[n]=e,!t.observe||t.telemetry||t.attribute||(t.observe=!1)}),t.get("resources").patchValue(i)},this.trackByParams=function(e,t){return t.id},this.getIndeterminate=function(e,t){var n=e.get("resources").value;if(Object(o.o)(n)){var i=n.filter(function(e){return e[t]});return 0!==i.length&&i.length!==n.length}return!1},this.getChecked=function(e,t){var n=e.get("resources").value;return Object(o.o)(n)&&n.every(function(e){return e[t]})},this.disableObserveInstance=function(e){var t=n.observeInstance(e);return t&&e.get("attributes").patchValue(null,{emitEvent:!1}),t},this.observeInstance=function(e){var t=e.get("resources").value;if(Object(o.o)(t)){var n=t.filter(function(e){return e.attribute}),i=t.filter(function(e){return e.telemetry});return 0===n.length&&0===i.length}return!1},this.instancesFormGroup=this.fb.group({instances:this.fb.array([])})}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){var t=Object(r.coerceBooleanProperty)(e);this.requiredValue!==t&&(this.requiredValue=t,this.updateValidators())},enumerable:!1,configurable:!0}),e.prototype.ngOnDestroy=function(){this.valueChange$&&this.valueChange$.unsubscribe()},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){this.disabled=e,e?this.instancesFormGroup.disable({emitEvent:!1}):this.instancesFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){this.updateInstances(e)},e.prototype.validate=function(e){return this.instancesFormGroup.valid?null:{instancesForm:!1}},Object.defineProperty(e.prototype,"instancesFormArray",{get:function(){return this.instancesFormGroup.get("instances")},enumerable:!1,configurable:!0}),e.prototype.updateInstances=function(e){var t=this;if(e.length===this.instancesFormArray.length)this.instancesFormArray.patchValue(e,{emitEvent:!1});else{this.valueChange$&&this.valueChange$.unsubscribe();var n=[];e&&e.forEach(function(e){n.push(t.createInstanceFormGroup(e))}),this.instancesFormGroup.setControl("instances",this.fb.array(n)),this.disabled&&this.instancesFormGroup.disable({emitEvent:!1}),this.valueChange$=this.instancesFormGroup.valueChanges.subscribe(function(e){t.updateModel(e.instances)})}},e.prototype.createInstanceFormGroup=function(e){return this.fb.group({id:[e.id],attributes:[e.attributes],resources:[e.resources]})},e.prototype.updateModel=function(e){e&&this.instancesFormGroup.valid?this.propagateChange(e):this.propagateChange(null)},e.prototype.updateValidators=function(){this.instancesFormArray.setValidators(this.required?a.Validators.required:[]),this.instancesFormArray.updateValueAndValidity()},e.prototype.disableObserve=function(e){return this.disabled||!(this.getIndeterminate(e,"telemetry")||this.getIndeterminate(e,"attribute")||this.getChecked(e,"telemetry")||this.getChecked(e,"attribute"))},Object.defineProperty(e.prototype,"isExpend",{get:function(){return 1===this.instancesFormArray.length},enumerable:!1,configurable:!0}),e.prototype.getNameInstance=function(e){return this.translate.instant("device-profile.lwm2m.instance")+" #"+e.id},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.FormBuilder),i["\u0275\u0275directiveInject"](s.TranslateService))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-profile-lwm2m-observe-attr-telemetry-instances"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:3,vars:3,consts:[[3,"formGroup"],["multi","true","formArrayName","instances"],["class","instance-row",3,"formGroupName","expanded","disabled",4,"ngFor","ngForOf","ngForTrackBy"],[1,"instance-row",3,"formGroupName","expanded","disabled"],["fxLayout","row",1,"tb-panel"],["fxFlex","30","fxLayoutAlign","start center"],[1,"tb-panel-title"],["fxLayoutAlign","center center","fxFlex","10"],["color","warn",3,"disabled","checked","indeterminate","click","change"],["color","accent",3,"disabled","checked","indeterminate","click","change"],["fxFlex",""],["formControlName","attributes",3,"isAttributeTelemetry","modelName"],["matExpansionPanelContent",""],["formControlName","resources"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"section",0),i["\u0275\u0275elementStart"](1,"mat-accordion",1),i["\u0275\u0275template"](2,h,17,18,"mat-expansion-panel",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.instancesFormGroup),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.instancesFormArray.controls)("ngForTrackBy",t.trackByParams))},directives:[a.NgControlStatusGroup,a.FormGroupDirective,l.MatAccordion,a.FormArrayName,c.NgForOf,l.MatExpansionPanel,a.FormGroupName,l.MatExpansionPanelHeader,l.MatExpansionPanelTitle,d.f,d.b,d.e,u.MatCheckbox,p.a,a.NgControlStatus,a.FormControlName,l.MatExpansionPanelContent,m.a],pipes:[s.TranslatePipe],styles:["[_nghost-%COMP%]   .tb-panel[_ngcontent-%COMP%]{min-height:42px}[_nghost-%COMP%]   .tb-panel[_ngcontent-%COMP%]   .tb-panel-title[_ngcontent-%COMP%]{font-weight:500}[_nghost-%COMP%]   .instance-row[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{color:inherit}[_nghost-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{margin-right:0}"]}),e}();0,void 0},QTrg:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("JIJk"),s=n("l7P3"),l=function(){function e(e,t){this.store=e,this.fb=t,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(r.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.defaultDeviceProfileTransportConfigurationFormGroup=this.fb.group({configuration:[null,a.Validators.required]}),this.defaultDeviceProfileTransportConfigurationFormGroup.valueChanges.subscribe(function(){e.updateModel()})},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.defaultDeviceProfileTransportConfigurationFormGroup.disable({emitEvent:!1}):this.defaultDeviceProfileTransportConfigurationFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){this.defaultDeviceProfileTransportConfigurationFormGroup.patchValue({configuration:e},{emitEvent:!1})},e.prototype.updateModel=function(){var e=null;this.defaultDeviceProfileTransportConfigurationFormGroup.valid&&((e=this.defaultDeviceProfileTransportConfigurationFormGroup.getRawValue().configuration).type=o.j.DEFAULT),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.Store),i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-default-device-profile-transport-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:1,vars:1,consts:[[2,"padding-bottom","16px",3,"formGroup"]],template:function(e,t){1&e&&i["\u0275\u0275element"](0,"form",0),2&e&&i["\u0275\u0275property"]("formGroup",t.defaultDeviceProfileTransportConfigurationFormGroup)},directives:[a["\u0275angular_packages_forms_forms_ba"],a.NgControlStatusGroup,a.FormGroupDirective],encapsulation:2}),e}();0,void 0},QXrN:function(e,t,n){"use strict";n.d(t,"a",function(){return O});var i=n("mrSG"),a=n("RxGS"),r=n("fXoL"),o=n("l7P3"),s=n("0G7Z"),l=n("tk/3"),c=n("nhHW"),d=n("3Pt+"),u=n("DaoB"),p=n("1y+p"),m=n("j37L"),f=n("ktVl"),h=n("YnEf"),g=n("9D3k"),A=n("BsGH"),b=n("Bjlt"),y=n("21Fy"),v=n("S+vS"),C=n("g8Nv"),x=n("ofXK"),w=n("sYmb"),S=n("jhN1"),E=n("tyNb"),I=n("vW25"),O=function(e){function t(t,n,i,a,r,o){var s=e.call(this,n)||this;return s.raf=t,s.store=n,s.fb=i,s.$injector=a,s.ctx=r,s.errorMessages=o,s.validators=d.Validators,s.ctx.$injector=a,s.ctx.deviceService=a.get(u.a),s.ctx.assetService=a.get(p.a),s.ctx.entityViewService=a.get(m.a),s.ctx.customerService=a.get(f.a),s.ctx.dashboardService=a.get(h.a),s.ctx.userService=a.get(g.a),s.ctx.attributeService=a.get(A.a),s.ctx.entityRelationService=a.get(b.a),s.ctx.entityService=a.get(y.a),s.ctx.dialogs=a.get(v.a),s.ctx.customDialog=a.get(C.a),s.ctx.date=a.get(x.DatePipe),s.ctx.translate=a.get(w.TranslateService),s.ctx.http=a.get(l.HttpClient),s.ctx.sanitizer=a.get(S.DomSanitizer),s.ctx.router=a.get(E.Router),s.ctx.$scope=s,s.ctx.defaultSubscription&&(s.executingRpcRequest=s.ctx.defaultSubscription.executingRpcRequest,s.rpcEnabled=s.ctx.defaultSubscription.rpcEnabled,s.rpcErrorText=s.ctx.defaultSubscription.rpcErrorText,s.rpcRejection=s.ctx.defaultSubscription.rpcRejection),s}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){},t.prototype.ngOnDestroy=function(){},t.prototype.clearRpcError=function(){this.widgetContext.defaultSubscription&&this.widgetContext.defaultSubscription.clearRpcError()},t.prototype.showSuccessToast=function(e,t,n,i,a){void 0===t&&(t=1e3),void 0===n&&(n="bottom"),void 0===i&&(i="left"),this.ctx.showSuccessToast(e,t,n,i,a)},t.prototype.showErrorToast=function(e,t,n,i){void 0===t&&(t="bottom"),void 0===n&&(n="left"),this.ctx.showErrorToast(e,t,n,i)},t.prototype.showToast=function(e,t,n,i,a,r){void 0===i&&(i="bottom"),void 0===a&&(a="left"),this.ctx.showToast(e,t,n,i,a,r)},t.\u0275fac=function(e){r["\u0275\u0275invalidFactory"]()},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,features:[r["\u0275\u0275InheritDefinitionFeature"]]}),t=Object(i.c)([Object(i.g)(0,Object(I.a)(c.a)),Object(i.g)(1,Object(I.a)(o.Store)),Object(i.g)(2,Object(I.a)(d.FormBuilder)),Object(i.g)(3,Object(I.a)(r.Injector)),Object(i.g)(4,Object(I.a)("widgetContext")),Object(i.g)(5,Object(I.a)("errorMessages")),Object(i.f)("design:paramtypes",[c.a,o.Store,d.FormBuilder,r.Injector,s.c,Array])],t)}(a.a);0,void 0},QaJg:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("fXoL"),a=n("pNH3"),r=n("PCNd"),o=n("ofXK"),s=n("4aul"),l=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[o.CommonModule,r.a]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](l,{declarations:[a.a,s.a],imports:[o.CommonModule,r.a],exports:[a.a]})),0},Qrxw:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("fXoL"),a=n("//Q6"),r=function(){function e(e){this.componentFactoryResolver=e,this.statesControllers={},this.statesControllerStates={}}return e.prototype.registerStatesController=function(e,t){var n=this.componentFactoryResolver.resolveComponentFactory(t);this.statesControllers[e]={factory:n}},e.prototype.getStateControllers=function(){return this.statesControllers},e.prototype.getStateController=function(e){return this.statesControllers[e]},e.prototype.preserveStateControllerState=function(e,t){this.statesControllerStates[e]=Object(a.e)(t)},e.prototype.withdrawStateControllerState=function(e){var t=this.statesControllerStates[e];return delete this.statesControllerStates[e],t},e.prototype.cleanupPreservedStates=function(){this.statesControllerStates={}},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](i.ComponentFactoryResolver))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0},RFBu:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var i=n("fXoL"),a=n("3Pt+"),r=n("xw5a"),o=n("XiUz"),s=n("kmnG"),l=n("d3UM"),c=n("ofXK"),d=n("cXYG"),u=n("FKr1"),p=n("sYmb");function m(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",5),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,a.booleanOperationTranslations.get(a.booleanOperationEnum[n]))," ")}}var f=function(){function e(e){this.fb=e,this.allowUserDynamicSource=!0,this.onlyUserDynamicSource=!1,this.valueTypeEnum=r.e,this.booleanOperations=Object.keys(r.a),this.booleanOperationEnum=r.a,this.booleanOperationTranslations=r.i,this.propagateChange=null}return e.prototype.ngOnInit=function(){var e=this;this.booleanFilterPredicateFormGroup=this.fb.group({operation:[r.a.EQUAL,[a.Validators.required]],value:[null,[a.Validators.required]]}),this.booleanFilterPredicateFormGroup.valueChanges.subscribe(function(){e.updateModel()})},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.booleanFilterPredicateFormGroup.disable({emitEvent:!1}):this.booleanFilterPredicateFormGroup.enable({emitEvent:!1})},e.prototype.validate=function(){return this.booleanFilterPredicateFormGroup?null:{booleanFilterPredicate:{valid:!1}}},e.prototype.writeValue=function(e){this.booleanFilterPredicateFormGroup.get("operation").patchValue(e.operation,{emitEvent:!1}),this.booleanFilterPredicateFormGroup.get("value").patchValue(e.value,{emitEvent:!1})},e.prototype.updateModel=function(){var e=this.booleanFilterPredicateFormGroup.getRawValue();e.type=r.f.BOOLEAN,this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-boolean-filter-predicate"]],inputs:{disabled:"disabled",allowUserDynamicSource:"allowUserDynamicSource",onlyUserDynamicSource:"onlyUserDynamicSource"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:7,vars:8,consts:[["fxFlex","","fxLayout","row","fxLayoutAlign","start start","fxLayoutGap","8px",3,"formGroup"],["floatLabel","always","hideRequiredMarker","","fxFlex","30",1,"mat-block"],["required","","formControlName","operation",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","70","formControlName","value",3,"allowUserDynamicSource","onlyUserDynamicSource","valueType"],[3,"value"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"mat-form-field",1),i["\u0275\u0275element"](2,"mat-label"),i["\u0275\u0275elementStart"](3,"mat-select",2),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275template"](5,m,3,4,"mat-option",3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](6,"tb-filter-predicate-value",4),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.booleanFilterPredicateFormGroup),i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](4,6,"filter.operation.operation")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.booleanOperations),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("allowUserDynamicSource",t.allowUserDynamicSource)("onlyUserDynamicSource",t.onlyUserDynamicSource)("valueType",t.valueTypeEnum.BOOLEAN))},directives:[o.b,o.f,o.e,o.g,a.NgControlStatusGroup,a.FormGroupDirective,s.MatFormField,s.MatLabel,l.MatSelect,a.RequiredValidator,a.NgControlStatus,a.FormControlName,c.NgForOf,d.a,u.MatOption],pipes:[p.TranslatePipe],styles:["[_nghost-%COMP%]   .tb-hint[_ngcontent-%COMP%]{padding-bottom:0}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-infix{border-top-width:.2em;width:auto;min-width:auto}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-underline{bottom:0}"]}),e}();0,void 0},RLvv:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("mrSG"),a=n("Lm6k"),r={ctx:{description:"A reference to widget context that has all necessary API<br>and data used by widget instance.",meta:"object",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/modules/home/models/widget-component.models.ts#L83">WidgetContext</a>',children:Object(i.a)({$container:{description:"Container element of the widget.<br>Can be used to dynamically access or modify widget DOM using jQuery API.",meta:"property",type:"jQuery Object"},$scope:{description:"Reference to the current widget component.<br>Can be used to access/modify component properties when widget is built using Angular approach.",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/modules/home/models/widget-component.models.ts#L274">IDynamicWidgetComponent</a>'},width:{description:"Current width of widget container in pixels.",meta:"property",type:"number"},height:{description:"Current height of widget container in pixels.",meta:"property",type:"number"},isEdit:{description:"Indicates whether the dashboard is in in the view or editing state.",meta:"property",type:"boolean"},isMobile:{description:"Indicates whether the dashboard view is less then 960px width (default mobile breakpoint).",meta:"property",type:"boolean"},widgetConfig:{description:"Common widget configuration containing properties such as <code>color</code> (text color), <code>backgroundColor</code> (widget background color), etc.",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/widget.models.ts#L341">WidgetConfig</a>',children:{title:{description:"Widget title.",meta:"property",type:"string"},titleIcon:{description:"Widget title icon.",meta:"property",type:"string"},showTitle:{description:"Whether to show widget title.",meta:"property",type:"boolean"},showTitleIcon:{description:"Whether to show widget title icon.",meta:"property",type:"boolean"},iconColor:{description:"Widget title icon color.",meta:"property",type:"string"},iconSize:{description:"Widget title icon size.",meta:"property",type:"string"},titleTooltip:{description:"Widget title tooltip content.",meta:"property",type:"string"},dropShadow:{description:"Enable/disable widget card shadow.",meta:"property",type:"boolean"},enableFullscreen:{description:"Whether to enable fullscreen button on widget.",meta:"property",type:"boolean"},useDashboardTimewindow:{description:"Whether to use dashboard timewindow (applicable for timeseries widgets).",meta:"property",type:"boolean"},displayTimewindow:{description:"Whether to display timewindow (applicable for timeseries widgets).",meta:"property",type:"boolean"},showLegend:{description:"Whether to show legend.",meta:"property",type:"boolean"},legendConfig:{description:"Legend configuration.",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/widget.models.ts#L198">LegendConfig</a>',children:{position:{description:"Legend position. Possible values: <code>'top', 'bottom', 'left', 'right'</code>",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/widget.models.ts#L182">LegendPosition</a>'},direction:{description:"Legend direction. Possible values: <code>'column', 'row'</code>",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/widget.models.ts#L170">LegendDirection</a>'},showMin:{description:"Whether to display aggregated min values.",meta:"property",type:"boolean"},showMax:{description:"Whether to display aggregated max values.",meta:"property",type:"boolean"},showAvg:{description:"Whether to display aggregated average values.",meta:"property",type:"boolean"},showTotal:{description:"Whether to display aggregated total values.",meta:"property",type:"boolean"}}},timewindow:{description:"Timewindow configuration object",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/time/time.models.ts#L80">Timewindow</a>',children:{displayValue:{description:"Current timewindow display value.",meta:"property",type:"string"},hideInterval:{description:"Whether to hide interval selection in timewindow panel.",meta:"property",type:"boolean"},hideAggregation:{description:"Whether to hide aggregation selection in timewindow panel.",meta:"property",type:"boolean"},hideAggInterval:{description:"Whether to hide aggregation interval selection in timewindow panel.",meta:"property",type:"boolean"},selectedTab:{description:"Current selected timewindow type (0 - realtime, 1 - history).",meta:"property",type:"number"},realtime:{description:"Realtime timewindow configuration object.",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/time/time.models.ts#L39">IntervalWindow</a>',children:{interval:{description:"Timewindow aggregation interval in milliseconds",meta:"property",type:"number"},timewindowMs:{description:"Timewindow interval in milliseconds",meta:"property",type:"number"}}},history:{description:"History timewindow configuration object.",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/time/time.models.ts#L49">HistoryWindow</a>',children:{historyType:{description:"History timewindow type (0 - last interval, 1 - fixed)",meta:"property",type:"number"},interval:{description:"Timewindow aggregation interval in milliseconds",meta:"property",type:"number"},timewindowMs:{description:"Timewindow interval in milliseconds",meta:"property",type:"number"},fixedTimewindow:{description:"Fixed history timewindow configuration object",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/time/time.models.ts#L44">FixedWindow</a>',children:{startTimeMs:{description:"Timewindow start time in UTC milliseconds",meta:"property",type:"number"},endTimeMs:{description:"Timewindow end time in UTC milliseconds",meta:"property",type:"number"}}}}},aggregation:{description:"Timewindow aggregation configuration object.",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/time/time.models.ts#L74">Aggregation</a>',children:{interval:{description:"Aggregation interval in milliseconds",meta:"property",type:"number"},type:{description:"Aggregation type",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/time/time.models.ts#L54">AggregationType</a>'},limit:{description:"Maximum allowed datapoints when aggregation is disabled (<code>AggregationType == 'NONE'</code>)",meta:"property",type:"number"}}}}},mobileHeight:{description:"Widget height in mobile mode.",meta:"property",type:"number"},mobileOrder:{description:"Widget order in mobile mode.",meta:"property",type:"number"},color:{description:"Widget text color.",meta:"property",type:"string"},backgroundColor:{description:"Widget background color.",meta:"property",type:"string"},padding:{description:"Widget card padding.",meta:"property",type:"string"},margin:{description:"Widget card margin.",meta:"property",type:"string"},widgetStyle:{description:"Widget element style object.",meta:"property",type:"object"},titleStyle:{description:"Widget title element style object.",meta:"property",type:"object"},units:{description:"Optional property defining units text of values displayed by widget. Useful for simple widgets like cards or gauges.",meta:"property",type:"string"},decimals:{description:"Optional property defining how many positions should be used to display decimal part of the value number.",meta:"property",type:"number"},actions:{description:"Map of configured widget actions.",meta:"property",type:"object"},settings:{description:"Object holding widget settings according to widget type.",meta:"property",type:"object"},alarmSource:{description:"Configured alarm source for alarm widget type.",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/widget.models.ts#L250">Datasource</a>'},alarmSearchStatus:{description:"Configured default alarm search status for alarm widget type.",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/alarm.models.ts#L41">AlarmSearchStatus</a>'},alarmsPollingInterval:{description:"Configured alarms polling interval for alarm widget type.",meta:"property",type:"number"},alarmsMaxCountLoad:{description:"Configured maximum alarms to load for alarm widget type.",meta:"property",type:"number"},alarmsFetchSize:{description:"Configured alarms page size used to load alarms.",meta:"property",type:"number"},datasources:{description:"Array of configured widget datasources.",meta:"property",type:'Array&lt;<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/widget.models.ts#L250">Datasource</a>&gt;'}}},settings:{description:'Widget settings containing widget specific properties according to the defined <a href="https://thingsboard.io/docs/user-guide/contribution/widgets-development/#settings-schema-section">settings json schema</a>',meta:"property",type:"object"},datasources:{description:"Array of resolved widget datasources.",meta:"property",type:'Array&lt;<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/widget.models.ts#L250">Datasource</a>&gt;'},data:{description:"Array of latest datasources data.",meta:"property",type:'Array&lt;<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/widget.models.ts#L275">DatasourceData</a>&gt;'},timeWindow:{description:"Current widget timewindow (applicable for timeseries widgets).",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/time/time.models.ts#L104">WidgetTimewindow</a>'},units:{description:"Optional property defining units text of values displayed by widget. Useful for simple widgets like cards or gauges.",meta:"property",type:"string"},decimals:{description:"Optional property defining how many positions should be used to display decimal part of the value number.",meta:"property",type:"number"},hideTitlePanel:{description:"Manages visibility of widget title panel. Useful for widget with custom title panels or different states. <b>updateWidgetParams()</b> function must be called after this property change.",meta:"property",type:"boolean"},widgetTitle:{description:"If set, will override configured widget title text. <b>updateWidgetParams()</b> function must be called after this property change.",meta:"property",type:"string"},detectChanges:{description:"Trigger change detection for current widget. Must be invoked when widget HTML template bindings should be updated due to widget data changes.",meta:"function"},updateWidgetParams:{description:"Updates widget with runtime set properties such as <b>widgetTitle</b>, <b>hideTitlePanel</b>, etc. Must be invoked in order these properties changes take effect.",meta:"function"},defaultSubscription:{description:"Default widget subscription object contains all subscription information,<br>including current data, according to the widget type.",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/api/widget-api.models.ts#L220">IWidgetSubscription</a>'},timewindowFunctions:{description:"Object with timewindow functions used to manage widget data time frame. Can by used by Time-series or Alarm widgets.",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/api/widget-api.models.ts#L45">TimewindowFunctions</a>',children:{onUpdateTimewindow:{description:"This function can be used to update current subscription time frame<br>to historical one identified by <code>startTimeMs</code> and <code>endTimeMs</code> arguments.",meta:"function",args:[{name:"startTimeMs",description:"Timewindow start time in UTC milliseconds",type:"number"},{name:"endTimeMs",description:"Timewindow end time in UTC milliseconds",type:"number"}]},onResetTimewindow:{description:"Resets subscription time frame to default defined by widget timewindow component<br>or dashboard timewindow depending on widget settings.",meta:"function"}}},controlApi:{description:"Object that provides API functions for RPC (Control) widgets.",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/api/widget-api.models.ts#L58">RpcApi</a>',children:{sendOneWayCommand:{description:"Sends one way (without response) RPC command to the device.",meta:"function",args:[{name:"method",description:"RPC method name",type:"string"},{name:"params",description:"RPC method params, custom json object",type:"object",optional:!0},{name:"timeout",description:"Maximum delay in milliseconds to wait until response/acknowledgement is received.",type:"number",optional:!0},{name:"persistent",description:"RPC request persistent",type:"boolean",optional:!0},{name:"persistentPollingInterval",description:"Polling interval in milliseconds to get persistent RPC command response",type:"number",optional:!0}],return:{description:"A command execution Observable.",type:"Observable&lt;any&gt;"}},sendTwoWayCommand:{description:"Sends two way (with response) RPC command to the device.",meta:"function",args:[{name:"method",description:"RPC method name",type:"string"},{name:"params",description:"RPC method params, custom json object",type:"object",optional:!0},{name:"timeout",description:"Maximum delay in milliseconds to wait until response/acknowledgement is received.",type:"number",optional:!0},{name:"persistent",description:"RPC request persistent",type:"boolean",optional:!0},{name:"persistentPollingInterval",description:"Polling interval in milliseconds to get persistent RPC command response",type:"number",optional:!0}],return:{description:"A command execution Observable of response body.",type:"Observable&lt;any&gt;"}}}},actionsApi:{description:"Set of API functions to work with user defined actions.",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/api/widget-api.models.ts#L67">WidgetActionsApi</a>',children:{getActionDescriptors:{description:"Get list of action descriptors for provided <code>actionSourceId</code>.",meta:"function",args:[{name:"actionSourceId",description:"Id of widget action source",type:"string"}],return:{description:"The list of action descriptors",type:'Array&lt;<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/widget.models.ts#L323">WidgetActionDescriptor</a>&gt;'}},handleWidgetAction:{description:"Handle action produced by particular action source.",meta:"function",args:[{name:"$event",description:"DOM event object associated with action.",type:"Event"},{name:"descriptor",description:"An action descriptor.",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/widget.models.ts#L323">WidgetActionDescriptor</a>'},{name:"entityId",description:"Current entity id provided by action source if available.",type:a.a,optional:!0},{name:"entityName",description:"Current entity name provided by action source if available.",type:"string",optional:!0}]}}},stateController:{description:"Reference to Dashboard state controller, providing API to manage current dashboard state.",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/api/widget-api.models.ts#L121">IStateController</a>',children:{openState:{description:"Navigate to new dashboard state.",meta:"function",args:[{name:"id",description:"An id of the target dashboard state.",type:"string"},{name:"params",description:"An object with state parameters to use by the new state.",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/api/widget-api.models.ts#L111">StateParams</a>',optional:!0},{name:"openRightLayout",description:"An optional boolean argument to force open right dashboard layout if present in mobile view mode.",type:"boolean",optional:!0}]},pushAndOpenState:{description:"Navigate to new dashboard state and adding intermediate states.",meta:"function",args:[{name:"id",description:"An array state object of the target dashboard state.",type:'Array <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/api/widget-api.models.ts#L140">StateObject</a>'},{name:"openRightLayout",description:"An optional boolean argument to force open right dashboard layout if present in mobile view mode.",type:"boolean",optional:!0}]},updateState:{description:"Updates current dashboard state.",meta:"function",args:[{name:"id",description:"An optional id of the target dashboard state to replace current state id.",type:"string",optional:!0},{name:"params",description:"An object with state parameters to update current state parameters.",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/api/widget-api.models.ts#L111">StateParams</a>',optional:!0},{name:"openRightLayout",description:"An optional boolean argument to force open right dashboard layout if present in mobile view mode.",type:"boolean",optional:!0}]},getStateId:{description:"Get current dashboard state id.",meta:"function",return:{description:"current dashboard state id.",type:"string"}},getStateParams:{description:"Get current dashboard state parameters.",meta:"function",return:{description:"current dashboard state parameters.",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/api/widget-api.models.ts#L111">StateParams</a>'}},getStateParamsByStateId:{description:"Get state parameters for particular dashboard state identified by <code>id</code>.",meta:"function",args:[{name:"id",description:"An id of the target dashboard state.",type:"string"}],return:{description:"current dashboard state parameters.",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/api/widget-api.models.ts#L111">StateParams</a>'}}}}},a.c)}}},RX5c:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("l7P3"),s=n("7EHt"),l=n("sYmb"),c=n("OUQ4");function d(e,t){1&e&&i["\u0275\u0275element"](0,"tb-tenant-profile-configuration",4)}var u=function(){function e(e,t){this.store=e,this.fb=t,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(r.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.tenantProfileDataFormGroup=this.fb.group({configuration:[null,a.Validators.required]}),this.tenantProfileDataFormGroup.valueChanges.subscribe(function(){e.updateModel()})},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.tenantProfileDataFormGroup.disable({emitEvent:!1}):this.tenantProfileDataFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){this.tenantProfileDataFormGroup.patchValue({configuration:null==e?void 0:e.configuration},{emitEvent:!1})},e.prototype.updateModel=function(){var e=null;this.tenantProfileDataFormGroup.valid&&(e=this.tenantProfileDataFormGroup.getRawValue()),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.Store),i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-tenant-profile-data"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:7,vars:2,consts:[[2,"padding-bottom","16px",3,"formGroup"],[3,"expanded"],["translate",""],["matExpansionPanelContent",""],["formControlName","configuration","required",""]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"form",0),i["\u0275\u0275elementStart"](1,"mat-expansion-panel",1),i["\u0275\u0275elementStart"](2,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](3,"mat-panel-title"),i["\u0275\u0275elementStart"](4,"div",2),i["\u0275\u0275text"](5,"tenant-profile.profile-configuration"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,d,1,0,"ng-template",3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.tenantProfileDataFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("expanded",!0))},directives:[a["\u0275angular_packages_forms_forms_ba"],a.NgControlStatusGroup,a.FormGroupDirective,s.MatExpansionPanel,s.MatExpansionPanelHeader,s.MatExpansionPanelTitle,l.TranslateDirective,s.MatExpansionPanelContent,c.a,a.NgControlStatus,a.FormControlName,a.RequiredValidator],encapsulation:2}),e}();0,void 0},Rm96:function(e,t,n){"use strict";n.d(t,"a",function(){return h}),n.d(t,"b",function(){return g});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("3Pt+"),s=n("RxGS"),l=n("l7P3"),c=n("rDax"),d=n("4t+N"),u=n("XiUz"),p=n("bTqV"),m=n("ofXK"),f=n("sYmb"),h=new a.InjectionToken("EditAttributeValuePanelData"),g=function(e){function t(t,n,i,a,r){var o=e.call(this,t)||this;return o.store=t,o.data=n,o.errorStateMatcher=i,o.overlayRef=a,o.fb=r,o.result=null,o.submitted=!1,o}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){this.attributeFormGroup=this.fb.group({value:[this.data.attributeValue,[o.Validators.required]]})},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.cancel=function(){this.overlayRef.dispose()},t.prototype.update=function(){this.submitted=!0,this.result=this.attributeFormGroup.get("value").value,this.overlayRef.dispose()},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](l.Store),a["\u0275\u0275directiveInject"](h),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](c.OverlayRef),a["\u0275\u0275directiveInject"](o.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-edit-attribute-value-panel"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:14,vars:16,consts:[[1,"mat-elevation-z1",2,"width","400px","padding","5px",3,"formGroup","ngSubmit"],[3,"disabled"],["formControlName","value","requiredText","attribute.value-required"],["fxLayout","row",1,"tb-panel-actions"],["fxFlex",""],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-button","","mat-raised-button","","color","accent","type","submit",3,"disabled"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.update()}),a["\u0275\u0275elementStart"](1,"fieldset",1),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275element"](3,"tb-value-input",2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"div",3),a["\u0275\u0275element"](5,"span",4),a["\u0275\u0275elementStart"](6,"button",5),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](7,"async"),a["\u0275\u0275text"](8),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"button",6),a["\u0275\u0275pipe"](11,"async"),a["\u0275\u0275text"](12),a["\u0275\u0275pipe"](13,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.attributeFormGroup),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](2,6,t.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](7,8,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](9,10,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](11,12,t.isLoading$)||t.attributeFormGroup.invalid||!t.attributeFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](13,14,"action.update")," "))},directives:[o["\u0275angular_packages_forms_forms_ba"],o.NgControlStatusGroup,o.FormGroupDirective,d.a,o.NgControlStatus,o.FormControlName,u.f,u.b,p.MatButton],pipes:[m.AsyncPipe,f.TranslatePipe],styles:["[_nghost-%COMP%]{background-color:#f9f9f9}"]}),t}(s.a);0,void 0},S0ZR:function(e,t,n){"use strict";n.d(t,"a",function(){return x});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("gmuX"),l=n("xw5a"),c=n("l7P3"),d=n("tyNb"),u=n("3Pt+"),p=n("sYmb"),m=n("/t3+"),f=n("XiUz"),h=n("bTqV"),g=n("NFeN"),A=n("bSwM"),b=n("kmnG"),y=n("qFsG"),v=n("ofXK");function C(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"button",18),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,n.isLoading$)||n.filterUserInfoFormGroup.invalid||!n.filterUserInfoFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](3,4,"action.update")," ")}}var x=function(e){function t(t,n,i,a,r,o,s){var c=e.call(this,t,n,r)||this;c.store=t,c.router=n,c.data=i,c.errorStateMatcher=a,c.dialogRef=r,c.fb=o,c.translate=s,c.submitted=!1;var d=c.data.keyFilterPredicateUserInfo||Object(l.m)();return c.filterUserInfoFormGroup=c.fb.group({editable:[d.editable],label:[d.label],autogeneratedLabel:[d.autogeneratedLabel],order:[d.order]}),c.onAutogeneratedLabelChange(),c.data.readonly?c.filterUserInfoFormGroup.disable({emitEvent:!1}):c.filterUserInfoFormGroup.get("autogeneratedLabel").valueChanges.subscribe(function(){c.onAutogeneratedLabelChange()}),c}return Object(i.d)(t,e),t.prototype.onAutogeneratedLabelChange=function(){if(this.filterUserInfoFormGroup.get("autogeneratedLabel").value){var e=Object(l.A)(this.data.key,this.data.valueType,this.data.operation,this.translate);this.filterUserInfoFormGroup.get("label").patchValue(e,{emitEvent:!1}),this.filterUserInfoFormGroup.get("label").disable({emitEvent:!1})}else this.filterUserInfoFormGroup.get("label").enable({emitEvent:!1})},t.prototype.ngOnInit=function(){},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.save=function(){if(this.submitted=!0,this.filterUserInfoFormGroup.valid){var e=this.filterUserInfoFormGroup.getRawValue();this.dialogRef.close(e)}},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](c.Store),a["\u0275\u0275directiveInject"](d.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](u.FormBuilder),a["\u0275\u0275directiveInject"](p.TranslateService))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-filter-user-info-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:33,vars:20,consts:[[2,"width","500px",3,"formGroup","ngSubmit"],["color","accent"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],["fxLayout","column",3,"disabled"],["formControlName","editable",2,"margin-bottom","16px"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px"],["fxFlex","",1,"mat-block"],["translate",""],["matInput","","formControlName","label"],["formControlName","autogeneratedLabel"],[1,"mat-block"],["matInput","","type","number","formControlName","order"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled",4,"ngIf"],["mat-raised-button","","color","accent","type","submit",3,"disabled"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"div",5),a["\u0275\u0275elementStart"](10,"fieldset",6),a["\u0275\u0275pipe"](11,"async"),a["\u0275\u0275elementStart"](12,"mat-checkbox",7),a["\u0275\u0275text"](13),a["\u0275\u0275pipe"](14,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"div",8),a["\u0275\u0275elementStart"](16,"mat-form-field",9),a["\u0275\u0275elementStart"](17,"mat-label",10),a["\u0275\u0275text"](18,"filter.display-label"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](19,"input",11),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](20,"mat-checkbox",12),a["\u0275\u0275text"](21),a["\u0275\u0275pipe"](22,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](23,"mat-form-field",13),a["\u0275\u0275elementStart"](24,"mat-label",10),a["\u0275\u0275text"](25,"filter.order-priority"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](26,"input",14),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](27,"div",15),a["\u0275\u0275elementStart"](28,"button",16),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](29,"async"),a["\u0275\u0275text"](30),a["\u0275\u0275pipe"](31,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](32,C,4,6,"button",17),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.filterUserInfoFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,8,t.data.readonly?"filter.filter-user-params":"filter.edit-filter-user-params")),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](11,10,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](14,12,"filter.editable")," "),a["\u0275\u0275advance"](8),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](22,14,"filter.autogenerated-label")," "),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](29,16,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](31,18,t.data.readonly?"action.close":"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!t.data.readonly))},directives:[u["\u0275angular_packages_forms_forms_ba"],u.NgControlStatusGroup,u.FormGroupDirective,m.MatToolbar,f.b,h.MatButton,g.MatIcon,o.MatDialogContent,f.f,A.MatCheckbox,u.NgControlStatus,u.FormControlName,f.e,f.g,b.MatFormField,b.MatLabel,p.TranslateDirective,y.MatInput,u.DefaultValueAccessor,u.NumberValueAccessor,o.MatDialogActions,v.NgIf],pipes:[p.TranslatePipe,v.AsyncPipe],encapsulation:2}),t}(s.a);0,void 0},"SZX/":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("fXoL"),a=n("U3y+"),r=n("XCsc"),o=n("0IaG"),s=function(){function e(e){this.dialog=e}return e.prototype.importEntities=function(e){switch(e){case a.b.DEVICE:return this.openImportDialogCSV(e,"device.import","device.device-file");case a.b.ASSET:return this.openImportDialogCSV(e,"asset.import","asset.asset-file");case a.b.EDGE:return this.openImportDialogCSV(e,"edge.import","edge.edge-file")}},e.prototype.openImportDialogCSV=function(e,t,n){return this.dialog.open(r.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entityType:e,importTitle:t,importFileLabel:n}}).afterClosed()},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](o.MatDialog))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0},T7OX:function(e,t,n){"use strict";n.d(t,"f",function(){return o}),n.d(t,"g",function(){return s}),n.d(t,"e",function(){return l}),n.d(t,"c",function(){return c}),n.d(t,"a",function(){return d}),n.d(t,"b",function(){return u}),n.d(t,"d",function(){return p});var i=n("//Q6"),a=n("7JTo"),r=n("U3y+");function o(e,t){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];var r=null;if(Object(i.n)(e)&&e.length)try{var o=(r=new Function(t,e)).apply(null,n);Object(i.B)(o)&&(r=null)}catch(s){r=null}return r}function s(e){return'<mat-icon class="node-icon material-icons" role="img" aria-hidden="false">'+e+"</mat-icon>"}function l(e){return'<div class="node-icon" style="background-image: url('+e+');">&nbsp;</div>'}var c=function(e){var t=e.entity;return{parameters:{rootId:t.id.id,rootType:t.id.entityType,direction:a.b.FROM,relationTypeGroup:a.d.COMMON,maxLevel:1},filters:[{relationType:"Contains",entityTypes:[]}]}},d=function(e){var t="insert_drive_file",n=e.entity;if(n&&n.id&&n.id.entityType)switch(n.id.entityType){case"function":t="functions";break;case r.b.DEVICE:t="devices_other";break;case r.b.ASSET:t="domain";break;case r.b.TENANT:case r.b.CUSTOMER:t="supervisor_account";break;case r.b.USER:t="account_circle";break;case r.b.DASHBOARD:t="dashboards";break;case r.b.ALARM:t="notifications_active";break;case r.b.ENTITY_VIEW:t="view_quilt"}return{materialIcon:t}},u=function(e){return e.level<=4},p=function(e,t){var n=0;return e.entity.id.entityType&&t.entity.id.entityType?n=e.entity.id.entityType.localeCompare(t.entity.id.entityType):e.entity.id.entityType?n=1:t.entity.id.entityType&&(n=-1),0===n&&(n=e.entity.name.localeCompare(t.entity.name)),n}},TRkj:function(e,t,n){"use strict";n.d(t,"a",function(){return ve});var i=n("mrSG"),a=n("fXoL"),r=n("0IaG"),o=n("3Pt+"),s=n("gmuX"),l=n("JIJk"),c=n("U3y+"),d=n("g+M/"),u=n("LRne"),p=n("z6cu"),m=n("5+tZ"),f=n("vkgz"),h=n("lJxs"),g=n("JIr8"),A=n("DaoB"),b=n("he9t"),y=n("APwO"),v=n("/3Pq"),C=n("//Q6"),x=n("l7P3"),w=n("tyNb"),S=n("FKr1"),E=n("0MNC"),I=n("/t3+"),O=n("sYmb"),T=n("XiUz"),F=n("kRCp"),B=n("bTqV"),M=n("NFeN"),P=n("ofXK"),D=n("xHqg"),k=n("kmnG"),_=n("qFsG"),L=n("QibW"),j=n("p4Q/"),N=n("znSr"),R=n("E4Bx"),U=n("5U8l"),V=n("bSwM"),Q=n("10n/"),G=n("TSBb"),H=n("f0Cb"),K=n("bv9b"),q=n("d3UM"),z=n("8yrD"),W=n("em8L"),X=n("xkYi"),$=["addDeviceWizardStepper"];function J(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",45)}function Y(e,t){1&e&&a["\u0275\u0275element"](0,"div",46)}function Z(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-icon"),a["\u0275\u0275text"](1,"check"),a["\u0275\u0275elementEnd"]())}function ee(e,t){1&e&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&e&&a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](1,1,"device.wizard.device-details"))}function te(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device.name-required")," "))}function ne(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.new-device-profile-name-required")," "))}function ie(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-checkbox",47),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device.overwrite-activity-time")," "))}function ae(e,t){1&e&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&e&&a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](1,1,"device-profile.transport-configuration"))}function re(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",52),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.deviceTransportTypeTranslations.get(n))," ")}}function oe(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-hint"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,n.deviceTransportTypeHints.get(n.transportConfigFormGroup.get("transportType").value))," ")}}function se(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.transport-type-required")," "))}function le(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-step",35),a["\u0275\u0275elementStart"](1,"form",13),a["\u0275\u0275template"](2,ae,2,3,"ng-template",14),a["\u0275\u0275elementStart"](3,"mat-form-field",48),a["\u0275\u0275elementStart"](4,"mat-label",1),a["\u0275\u0275text"](5,"device-profile.transport-type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"mat-select",49),a["\u0275\u0275template"](7,re,3,4,"mat-option",50),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,oe,3,3,"mat-hint",18),a["\u0275\u0275template"](9,se,3,3,"mat-error",18),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](10,"tb-device-profile-transport-configuration",51),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("stepControl",n.transportConfigFormGroup)("optional",!0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",n.transportConfigFormGroup),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngForOf",n.deviceTransportTypes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.transportConfigFormGroup.get("transportType").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.transportConfigFormGroup.get("transportType").hasError("required"))}}var ce=function(e){return{count:e}};function de(e,t){if(1&e&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind2"](1,1,"device-profile.alarm-rules-with-count",a["\u0275\u0275pureFunction1"](4,ce,n.alarmRulesFormGroup.get("alarms").value?n.alarmRulesFormGroup.get("alarms").value.length:0)))}}function ue(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-step",35),a["\u0275\u0275elementStart"](1,"form",13),a["\u0275\u0275template"](2,de,2,6,"ng-template",14),a["\u0275\u0275element"](3,"tb-device-profile-alarms",53),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("stepControl",n.alarmRulesFormGroup)("optional",!0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",n.alarmRulesFormGroup),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("deviceProfileId",null)}}function pe(e,t){1&e&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&e&&a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](1,1,"device-profile.device-provisioning"))}function me(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-step",35),a["\u0275\u0275elementStart"](1,"form",13),a["\u0275\u0275template"](2,pe,2,3,"ng-template",14),a["\u0275\u0275element"](3,"tb-device-profile-provision-configuration",54),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("stepControl",n.provisionConfigFormGroup)("optional",!0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",n.provisionConfigFormGroup)}}function fe(e,t){1&e&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&e&&a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](1,1,"device.credentials"))}function he(e,t){1&e&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&e&&a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](1,1,"customer.customer"))}function ge(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",55),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().previousStep()}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,i.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](3,4,"action.back"))}}var Ae=function(e){return{label:e}};function be(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",56),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().nextStep()}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,i.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind2"](3,4,"action.next-with-label",a["\u0275\u0275pureFunction1"](9,Ae,a["\u0275\u0275pipeBind1"](4,7,i.getFormLabel(i.selectedIndex+1)))))}}var ye=function(e){return{invisible:e}},ve=function(e){function t(t,n,i,a,r,s,d,u,p){var m=e.call(this,t,n,r)||this;return m.store=t,m.router=n,m.data=i,m.errorStateMatcher=a,m.dialogRef=r,m.deviceProfileService=s,m.deviceService=d,m.breakpointObserver=u,m.fb=p,m.selectedIndex=0,m.showNext=!0,m.createProfile=!1,m.entityType=c.b,m.deviceTransportTypes=Object.values(l.j),m.deviceTransportTypeTranslations=l.L,m.deviceTransportTypeHints=l.K,m.labelPosition="end",m.serviceType=v.a.TB_RULE_ENGINE,m.subscriptions=[],m.currentDeviceProfileTransportType=l.j.DEFAULT,m.deviceWizardFormGroup=m.fb.group({name:["",o.Validators.required],label:[""],gateway:[!1],overwriteActivityTime:[!1],addProfileType:[0],deviceProfileId:[null,o.Validators.required],newDeviceProfileTitle:[{value:null,disabled:!0}],defaultRuleChainId:[{value:null,disabled:!0}],defaultQueueName:[{value:null,disabled:!0}],description:[""]}),m.subscriptions.push(m.deviceWizardFormGroup.get("addProfileType").valueChanges.subscribe(function(e){0===e?(m.deviceWizardFormGroup.get("deviceProfileId").setValidators([o.Validators.required]),m.deviceWizardFormGroup.get("deviceProfileId").enable(),m.deviceWizardFormGroup.get("newDeviceProfileTitle").setValidators(null),m.deviceWizardFormGroup.get("newDeviceProfileTitle").disable(),m.deviceWizardFormGroup.get("defaultRuleChainId").disable(),m.deviceWizardFormGroup.get("defaultQueueName").disable(),m.deviceWizardFormGroup.updateValueAndValidity(),m.createProfile=!1):(m.deviceWizardFormGroup.get("deviceProfileId").setValidators(null),m.deviceWizardFormGroup.get("deviceProfileId").disable(),m.deviceWizardFormGroup.get("newDeviceProfileTitle").setValidators([o.Validators.required]),m.deviceWizardFormGroup.get("newDeviceProfileTitle").enable(),m.deviceWizardFormGroup.get("defaultRuleChainId").enable(),m.deviceWizardFormGroup.get("defaultQueueName").enable(),m.deviceWizardFormGroup.updateValueAndValidity(),m.createProfile=!0)})),m.transportConfigFormGroup=m.fb.group({transportType:[l.j.DEFAULT,o.Validators.required],transportConfiguration:[Object(l.w)(l.j.DEFAULT),o.Validators.required]}),m.subscriptions.push(m.transportConfigFormGroup.get("transportType").valueChanges.subscribe(function(e){m.deviceProfileTransportTypeChanged(e)})),m.alarmRulesFormGroup=m.fb.group({alarms:[null]}),m.provisionConfigFormGroup=m.fb.group({provisionConfiguration:[{type:l.i.DISABLED},[o.Validators.required]]}),m.credentialsFormGroup=m.fb.group({setCredential:[!1],credential:[{value:null,disabled:!0}]}),m.subscriptions.push(m.credentialsFormGroup.get("setCredential").valueChanges.subscribe(function(e){e?m.credentialsFormGroup.get("credential").enable():m.credentialsFormGroup.get("credential").disable()})),m.customerFormGroup=m.fb.group({customerId:[null]}),m.labelPosition=m.breakpointObserver.isMatched(b.g["gt-sm"])?"end":"bottom",m.subscriptions.push(m.breakpointObserver.observe(b.g["gt-sm"]).subscribe(function(e){e.matches?m.labelPosition="end":m.labelPosition="bottom"})),m}return Object(i.d)(t,e),t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.subscriptions.forEach(function(e){return e.unsubscribe()})},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!(!e||!e.invalid);return n||i},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.previousStep=function(){this.addDeviceWizardStepper.previous()},t.prototype.nextStep=function(){this.addDeviceWizardStepper.next()},t.prototype.getFormLabel=function(e){switch(e>0&&(this.createProfile||(e+=3)),e){case 0:return"device.wizard.device-details";case 1:return"device-profile.transport-configuration";case 2:return"device-profile.alarm-rules";case 3:return"device-profile.device-provisioning";case 4:return"device.credentials";case 5:return"customer.customer"}},Object.defineProperty(t.prototype,"maxStepperIndex",{get:function(){var e,t;return(null===(t=null===(e=this.addDeviceWizardStepper)||void 0===e?void 0:e._steps)||void 0===t?void 0:t.length)-1},enumerable:!1,configurable:!0}),t.prototype.deviceProfileTransportTypeChanged=function(e){this.transportConfigFormGroup.patchValue({transportConfiguration:Object(l.w)(e)})},t.prototype.add=function(){var e=this;this.allValid()&&this.createDeviceProfile().pipe(Object(m.b)(function(t){return e.createDevice(t)}),Object(m.b)(function(t){return e.saveCredentials(t)})).subscribe(function(t){e.dialogRef.close(t)})},Object.defineProperty(t.prototype,"deviceTransportType",{get:function(){return this.deviceWizardFormGroup.get("addProfileType").value?this.transportConfigFormGroup.get("transportType").value:this.currentDeviceProfileTransportType},enumerable:!1,configurable:!0}),t.prototype.deviceProfileChanged=function(e){e&&(this.currentDeviceProfileTransportType=e.transportType)},t.prototype.createDeviceProfile=function(){var e=this;if(this.deviceWizardFormGroup.get("addProfileType").value){var t=this.provisionConfigFormGroup.get("provisionConfiguration").value,n=t.provisionDeviceKey;delete t.provisionDeviceKey;var i={name:this.deviceWizardFormGroup.get("newDeviceProfileTitle").value,type:l.h.DEFAULT,defaultQueueName:this.deviceWizardFormGroup.get("defaultQueueName").value,transportType:this.transportConfigFormGroup.get("transportType").value,provisionType:t.type,provisionDeviceKey:n,profileData:{configuration:Object(l.v)(l.h.DEFAULT),transportConfiguration:this.transportConfigFormGroup.get("transportConfiguration").value,alarms:this.alarmRulesFormGroup.get("alarms").value,provisionConfiguration:t}};return this.deviceWizardFormGroup.get("defaultRuleChainId").value&&(i.defaultRuleChainId=new y.a(this.deviceWizardFormGroup.get("defaultRuleChainId").value)),this.deviceProfileService.saveDeviceProfile(Object(C.f)(i)).pipe(Object(f.a)(function(t){e.currentDeviceProfileTransportType=t.transportType,e.deviceWizardFormGroup.patchValue({deviceProfileId:t.id,addProfileType:0})}),Object(h.a)(function(e){return e.id}))}return Object(u.a)(this.deviceWizardFormGroup.get("deviceProfileId").value)},t.prototype.createDevice=function(e){var t=this,n={name:this.deviceWizardFormGroup.get("name").value,label:this.deviceWizardFormGroup.get("label").value,deviceProfileId:e,additionalInfo:{gateway:this.deviceWizardFormGroup.get("gateway").value,overwriteActivityTime:this.deviceWizardFormGroup.get("overwriteActivityTime").value,description:this.deviceWizardFormGroup.get("description").value},customerId:null};return this.customerFormGroup.get("customerId").value&&(n.customerId={entityType:c.b.CUSTOMER,id:this.customerFormGroup.get("customerId").value}),this.data.entitiesTableConfig.saveEntity(Object(C.f)(n)).pipe(Object(g.a)(function(e){return t.addDeviceWizardStepper.selectedIndex=0,Object(p.a)(e)}))},t.prototype.saveCredentials=function(e){var t=this;return this.credentialsFormGroup.get("setCredential").value?this.deviceService.getDeviceCredentials(e.id.id).pipe(Object(m.b)(function(n){var a=Object(i.a)(Object(i.a)({},n),t.credentialsFormGroup.value.credential);return t.deviceService.saveDeviceCredentials(a).pipe(Object(g.a)(function(n){return t.addDeviceWizardStepper.selectedIndex=1,t.deviceService.deleteDevice(e.id.id).pipe(Object(m.b)(function(){return Object(p.a)(n)}))}))}),Object(h.a)(function(){return!0})):Object(u.a)(!0)},t.prototype.allValid=function(){var e=this;return!this.addDeviceWizardStepper.steps.find(function(t,n){return!!t.stepControl.invalid&&(t.interacted=!0,e.addDeviceWizardStepper.selectedIndex=n,!0)})},t.prototype.changeStep=function(e){this.selectedIndex=e.selectedIndex,this.selectedIndex===this.maxStepperIndex?this.showNext=!1:this.showNext=!0},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](x.Store),a["\u0275\u0275directiveInject"](w.Router),a["\u0275\u0275directiveInject"](r.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](S.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](r.MatDialogRef),a["\u0275\u0275directiveInject"](d.a),a["\u0275\u0275directiveInject"](A.a),a["\u0275\u0275directiveInject"](E.BreakpointObserver),a["\u0275\u0275directiveInject"](o.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-device-wizard"]],viewQuery:function(e,t){if(1&e&&a["\u0275\u0275viewQuery"]($,3),2&e){var n;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.addDeviceWizardStepper=n.first)}},features:[a["\u0275\u0275ProvidersFeature"]([]),a["\u0275\u0275InheritDefinitionFeature"]],decls:87,vars:69,consts:[["color","accent"],["translate",""],["fxFlex",""],[3,"tb-help"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"linear","labelPosition","selectionChange"],["addDeviceWizardStepper",""],["matStepperIcon","edit"],[3,"stepControl"],[2,"padding-bottom","16px",3,"formGroup"],["matStepLabel",""],[3,"disabled"],[1,"mat-block"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["matInput","","formControlName","label"],["fxLayout","row","fxLayoutGap","16px"],["fxLayout","column","formControlName","addProfileType","fxLayoutAlign","space-around"],["color","accent",3,"value"],["fxLayout","column"],["formControlName","deviceProfileId",3,"required","ngClass","addNewProfile","selectDefaultProfile","editProfileEnabled","deviceProfileChanged"],["fxFlex","",1,"mat-block",3,"ngClass"],["matInput","","formControlName","newDeviceProfileTitle",3,"required"],["fxLayout","column","fxLayoutAlign","flex-end start"],["labelText","device-profile.default-rule-chain","formControlName","defaultRuleChainId",3,"ngClass"],["formControlName","defaultQueueName",3,"ngClass","queueType"],["fxLayout","row","fxLayoutGap","16px",2,"padding-bottom","16px"],["formControlName","gateway"],["formControlName","overwriteActivityTime",4,"ngIf"],["matInput","","formControlName","description","rows","2"],[3,"stepControl","optional",4,"ngIf"],[3,"stepControl","optional"],["formControlName","setCredential",2,"padding-bottom","16px"],["formControlName","credential",3,"fxShow","deviceTransportType"],["formControlName","customerId","labelText","device.wizard.customer-to-assign-device",3,"entityType"],["mat-dialog-actions","","fxLayout","row"],["mat-stroked-button","",3,"disabled","click",4,"ngIf"],["mat-stroked-button","","color","accent",3,"disabled","click",4,"ngIf"],["mat-dialog-actions","","fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","end"],["mat-button","",3,"disabled","click"],["mat-raised-button","","color","accent",3,"disabled","click"],["color","warn","mode","indeterminate"],[2,"height","4px"],["formControlName","overwriteActivityTime"],[1,"mat-block",2,"padding-bottom","14px"],["formControlName","transportType","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","transportConfiguration","required",""],[3,"value"],["formControlName","alarms",3,"deviceProfileId"],["formControlName","provisionConfiguration"],["mat-stroked-button","",3,"disabled","click"],["mat-stroked-button","","color","accent",3,"disabled","click"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275elementStart"](1,"mat-toolbar",0),a["\u0275\u0275elementStart"](2,"h2",1),a["\u0275\u0275text"](3,"device.add-device-text"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",2),a["\u0275\u0275element"](5,"div",3),a["\u0275\u0275elementStart"](6,"button",4),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](7,"mat-icon",5),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,J,1,0,"mat-progress-bar",6),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,Y,1,0,"div",7),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",8),a["\u0275\u0275elementStart"](14,"mat-horizontal-stepper",9,10),a["\u0275\u0275listener"]("selectionChange",function(e){return t.changeStep(e)}),a["\u0275\u0275template"](16,Z,2,0,"ng-template",11),a["\u0275\u0275elementStart"](17,"mat-step",12),a["\u0275\u0275elementStart"](18,"form",13),a["\u0275\u0275template"](19,ee,2,3,"ng-template",14),a["\u0275\u0275elementStart"](20,"fieldset",15),a["\u0275\u0275pipe"](21,"async"),a["\u0275\u0275elementStart"](22,"mat-form-field",16),a["\u0275\u0275elementStart"](23,"mat-label",1),a["\u0275\u0275text"](24,"device.name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](25,"input",17),a["\u0275\u0275template"](26,te,3,3,"mat-error",18),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](27,"mat-form-field",16),a["\u0275\u0275elementStart"](28,"mat-label",1),a["\u0275\u0275text"](29,"device.label"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](30,"input",19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](31,"div",20),a["\u0275\u0275elementStart"](32,"mat-radio-group",21),a["\u0275\u0275elementStart"](33,"mat-radio-button",22),a["\u0275\u0275elementStart"](34,"span",1),a["\u0275\u0275text"](35,"device.wizard.existing-device-profile"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](36,"mat-radio-button",22),a["\u0275\u0275elementStart"](37,"span",1),a["\u0275\u0275text"](38,"device.wizard.new-device-profile"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](39,"div",23),a["\u0275\u0275elementStart"](40,"tb-device-profile-autocomplete",24),a["\u0275\u0275listener"]("deviceProfileChanged",function(e){return t.deviceProfileChanged(e)}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](41,"mat-form-field",25),a["\u0275\u0275elementStart"](42,"mat-label",1),a["\u0275\u0275text"](43,"device-profile.new-device-profile-name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](44,"input",26),a["\u0275\u0275template"](45,ne,3,3,"mat-error",18),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](46,"div",27),a["\u0275\u0275element"](47,"tb-rule-chain-autocomplete",28),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](48,"div",27),a["\u0275\u0275element"](49,"tb-queue-type-list",29),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](50,"div",30),a["\u0275\u0275elementStart"](51,"mat-checkbox",31),a["\u0275\u0275text"](52),a["\u0275\u0275pipe"](53,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](54,ie,3,3,"mat-checkbox",32),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](55,"mat-form-field",16),a["\u0275\u0275elementStart"](56,"mat-label",1),a["\u0275\u0275text"](57,"device.description"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](58,"textarea",33),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](59,le,11,6,"mat-step",34),a["\u0275\u0275template"](60,ue,4,4,"mat-step",34),a["\u0275\u0275template"](61,me,4,3,"mat-step",34),a["\u0275\u0275elementStart"](62,"mat-step",35),a["\u0275\u0275template"](63,fe,2,3,"ng-template",14),a["\u0275\u0275elementStart"](64,"form",13),a["\u0275\u0275elementStart"](65,"mat-checkbox",36),a["\u0275\u0275text"](66),a["\u0275\u0275pipe"](67,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](68,"tb-device-credentials",37),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](69,"mat-step",35),a["\u0275\u0275template"](70,he,2,3,"ng-template",14),a["\u0275\u0275elementStart"](71,"form",13),a["\u0275\u0275element"](72,"tb-entity-autocomplete",38),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](73,"div",39),a["\u0275\u0275template"](74,ge,4,6,"button",40),a["\u0275\u0275element"](75,"span",2),a["\u0275\u0275template"](76,be,5,11,"button",41),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](77,"mat-divider"),a["\u0275\u0275elementStart"](78,"div",42),a["\u0275\u0275elementStart"](79,"button",43),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](80,"async"),a["\u0275\u0275text"](81),a["\u0275\u0275pipe"](82,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](83,"button",44),a["\u0275\u0275listener"]("click",function(){return t.add()}),a["\u0275\u0275pipe"](84,"async"),a["\u0275\u0275text"](85),a["\u0275\u0275pipe"](86,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("tb-help","devices"),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,43,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,45,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("linear",!0)("labelPosition",t.labelPosition),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("stepControl",t.deviceWizardFormGroup),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",t.deviceWizardFormGroup),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](21,47,t.isLoading$)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",t.deviceWizardFormGroup.get("name").hasError("required")),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("value",0),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("value",1),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("required",!t.createProfile)("ngClass",a["\u0275\u0275pureFunction1"](61,ye,0!==t.deviceWizardFormGroup.get("addProfileType").value))("addNewProfile",!1)("selectDefaultProfile",!0)("editProfileEnabled",!1),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](63,ye,1!==t.deviceWizardFormGroup.get("addProfileType").value)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("required",t.createProfile),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.deviceWizardFormGroup.get("newDeviceProfileTitle").hasError("required")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](65,ye,1!==t.deviceWizardFormGroup.get("addProfileType").value)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](67,ye,1!==t.deviceWizardFormGroup.get("addProfileType").value))("queueType",t.serviceType),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](53,49,"device.is-gateway")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",t.deviceWizardFormGroup.get("gateway").value),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",t.createProfile),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.createProfile),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.createProfile),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("stepControl",t.credentialsFormGroup)("optional",!0),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("formGroup",t.credentialsFormGroup),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](67,51,"device.wizard.add-credentials")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",t.credentialsFormGroup.get("setCredential").value)("deviceTransportType",t.deviceTransportType),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("stepControl",t.customerFormGroup)("optional",!0),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("formGroup",t.customerFormGroup),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("entityType",t.entityType.CUSTOMER),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",t.selectedIndex>0),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",t.showNext),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](80,53,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](82,55,"action.cancel")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](84,57,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](86,59,"action.add")))},directives:[I.MatToolbar,O.TranslateDirective,T.b,F.a,B.MatButton,M.MatIcon,P.NgIf,r.MatDialogContent,D.MatHorizontalStepper,D.MatStepperIcon,D.MatStep,o["\u0275angular_packages_forms_forms_ba"],o.NgControlStatusGroup,o.FormGroupDirective,D.MatStepLabel,k.MatFormField,k.MatLabel,_.MatInput,o.DefaultValueAccessor,o.NgControlStatus,o.FormControlName,o.RequiredValidator,T.f,T.g,L.MatRadioGroup,T.e,L.MatRadioButton,j.a,P.NgClass,N.b,R.a,U.a,V.MatCheckbox,Q.a,N.d,G.a,r.MatDialogActions,H.MatDivider,K.MatProgressBar,k.MatError,q.MatSelect,P.NgForOf,z.a,S.MatOption,k.MatHint,W.a,X.a],pipes:[P.AsyncPipe,O.TranslatePipe],styles:["@media screen and (max-width:599px){.tb-fullscreen-dialog   .mat-dialog-container[_nghost-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-dialog-container   [_nghost-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]{max-height:75vh}}.tb-fullscreen-dialog   .mat-dialog-container[_nghost-%COMP%]   .invisible[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-dialog-container   [_nghost-%COMP%]   .invisible[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]     .mat-dialog-content{display:flex;flex-direction:column;height:100%;padding:0!important}[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal{display:flex;flex-direction:column;height:100%;overflow:hidden}@media screen and (max-width:599px){[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal .mat-step-label{white-space:normal;overflow:visible}[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal .mat-step-label .mat-step-text-label{overflow:visible}}[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal .mat-horizontal-content-container{height:530px;max-height:100%;width:100%;overflow-y:auto}@media screen and (min-width:960px){[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal .mat-horizontal-content-container{min-width:800px}}[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal .mat-horizontal-stepper-content[aria-expanded=true]{height:100%}[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal .mat-horizontal-stepper-content[aria-expanded=true] form{height:100%}[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal tb-device-profile-autocomplete .mat-form-field-wrapper, [_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal tb-queue-type-list .mat-form-field-wrapper{width:180px!important}"]}),t}(s.a);0,void 0},TpGD:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("JIJk"),s=n("//Q6"),l=n("XNiG"),c=n("1G5W"),d=n("l7P3"),u=n("ofXK"),p=n("NPtW");function m(e,t){if(1&e&&i["\u0275\u0275element"](0,"tb-default-device-profile-configuration",3),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("required",n.required)}}var f=function(){function e(e,t){this.store=e,this.fb=t,this.deviceProfileType=o.h,this.destroy$=new l.b,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(r.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.deviceProfileConfigurationFormGroup=this.fb.group({configuration:[null,a.Validators.required]}),this.deviceProfileConfigurationFormGroup.valueChanges.pipe(Object(c.a)(this.destroy$)).subscribe(function(){e.updateModel()})},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.deviceProfileConfigurationFormGroup.disable({emitEvent:!1}):this.deviceProfileConfigurationFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){this.type=null==e?void 0:e.type;var t=Object(s.e)(e);t&&delete t.type,this.deviceProfileConfigurationFormGroup.patchValue({configuration:t},{emitEvent:!1})},e.prototype.updateModel=function(){var e=null;this.deviceProfileConfigurationFormGroup.valid&&((e=this.deviceProfileConfigurationFormGroup.getRawValue().configuration).type=this.type),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](d.Store),i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-device-profile-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:3,vars:3,consts:[[3,"formGroup"],[3,"ngSwitch"],[3,"ngSwitchCase"],["formControlName","configuration",3,"required"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275template"](2,m,1,1,"ng-template",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.deviceProfileConfigurationFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitch",t.type),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",t.deviceProfileType.DEFAULT))},directives:[a.NgControlStatusGroup,a.FormGroupDirective,u.NgSwitch,u.NgSwitchCase,p.a,a.NgControlStatus,a.FormControlName,a.RequiredValidator],encapsulation:2}),e}();0,void 0},"Tu+t":function(e,t,n){"use strict";n.d(t,"a",function(){return P});var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("JIJk"),s=n("//Q6"),l=n("XNiG"),c=n("1G5W"),d=n("l7P3"),u=n("sYmb"),p=n("XiUz"),m=n("kmnG"),f=n("qFsG"),h=n("ofXK"),g=n("d3UM"),A=n("FKr1");function b(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.telemetry-topic-filter-required")," "))}function y(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.not-valid-single-character")," "))}function v(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.not-valid-multi-character")," "))}function C(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.attributes-topic-filter-required")," "))}function x(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.not-valid-single-character")," "))}function w(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.not-valid-multi-character")," "))}function S(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.mqtt-device-topic-filters-unique")," "))}function E(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",16),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,a.transportPayloadTypeTranslations.get(n))," ")}}function I(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.mqtt-payload-type-required")," "))}function O(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.telemetry-proto-schema-required")," "))}function T(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.attributes-proto-schema-required")," "))}function F(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.rpc-request-proto-schema-required")," "))}function B(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.rpc-response-proto-schema-required")," "))}function M(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",17),i["\u0275\u0275elementStart"](1,"mat-form-field",5),i["\u0275\u0275elementStart"](2,"mat-label",6),i["\u0275\u0275text"](3,"device-profile.telemetry-proto-schema"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"textarea",18),i["\u0275\u0275template"](5,O,3,3,"mat-error",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"mat-form-field",5),i["\u0275\u0275elementStart"](7,"mat-label",6),i["\u0275\u0275text"](8,"device-profile.attributes-proto-schema"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](9,"textarea",19),i["\u0275\u0275template"](10,T,3,3,"mat-error",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"mat-form-field",20),i["\u0275\u0275elementStart"](12,"mat-label",6),i["\u0275\u0275text"](13,"device-profile.rpc-request-proto-schema"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](14,"textarea",21),i["\u0275\u0275template"](15,F,3,3,"mat-error",8),i["\u0275\u0275elementStart"](16,"mat-hint",22),i["\u0275\u0275text"](17,"device-profile.rpc-request-proto-schema-hint"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](18,"mat-form-field",5),i["\u0275\u0275elementStart"](19,"mat-label",6),i["\u0275\u0275text"](20,"device-profile.rpc-response-proto-schema"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](21,"textarea",23),i["\u0275\u0275template"](22,B,3,3,"mat-error",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",n.mqttDeviceProfileTransportConfigurationFormGroup.get("transportPayloadTypeConfiguration.deviceTelemetryProtoSchema").hasError("required")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",n.mqttDeviceProfileTransportConfigurationFormGroup.get("transportPayloadTypeConfiguration.deviceAttributesProtoSchema").hasError("required")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",n.mqttDeviceProfileTransportConfigurationFormGroup.get("transportPayloadTypeConfiguration.deviceRpcRequestProtoSchema").hasError("required")),i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("ngIf",n.mqttDeviceProfileTransportConfigurationFormGroup.get("transportPayloadTypeConfiguration.deviceRpcResponseProtoSchema").hasError("required"))}}var P=function(){function e(e,t){this.store=e,this.fb=t,this.transportPayloadTypes=Object.keys(o.r),this.transportPayloadTypeTranslations=o.P,this.destroy$=new l.b,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(r.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.mqttDeviceProfileTransportConfigurationFormGroup=this.fb.group({deviceAttributesTopic:[null,[a.Validators.required,this.validationMQTTTopic()]],deviceTelemetryTopic:[null,[a.Validators.required,this.validationMQTTTopic()]],transportPayloadTypeConfiguration:this.fb.group({transportPayloadType:[o.r.JSON,a.Validators.required],deviceTelemetryProtoSchema:[o.E,a.Validators.required],deviceAttributesProtoSchema:[o.B,a.Validators.required],deviceRpcRequestProtoSchema:[o.C,a.Validators.required],deviceRpcResponseProtoSchema:[o.D,a.Validators.required]})},{validator:this.uniqueDeviceTopicValidator}),this.mqttDeviceProfileTransportConfigurationFormGroup.get("transportPayloadTypeConfiguration.transportPayloadType").valueChanges.pipe(Object(c.a)(this.destroy$)).subscribe(function(t){e.updateTransportPayloadBasedControls(t,!0)}),this.mqttDeviceProfileTransportConfigurationFormGroup.valueChanges.pipe(Object(c.a)(this.destroy$)).subscribe(function(){e.updateModel()})},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.mqttDeviceProfileTransportConfigurationFormGroup.disable({emitEvent:!1}):this.mqttDeviceProfileTransportConfigurationFormGroup.enable({emitEvent:!1})},Object.defineProperty(e.prototype,"protoPayloadType",{get:function(){return this.mqttDeviceProfileTransportConfigurationFormGroup.get("transportPayloadTypeConfiguration.transportPayloadType").value===o.r.PROTOBUF},enumerable:!1,configurable:!0}),e.prototype.writeValue=function(e){var t;Object(s.o)(e)&&(this.mqttDeviceProfileTransportConfigurationFormGroup.patchValue(e,{emitEvent:!1}),this.updateTransportPayloadBasedControls(null===(t=e.transportPayloadTypeConfiguration)||void 0===t?void 0:t.transportPayloadType))},e.prototype.updateModel=function(){var e=null;this.mqttDeviceProfileTransportConfigurationFormGroup.valid&&((e=this.mqttDeviceProfileTransportConfigurationFormGroup.value).type=o.j.MQTT),this.propagateChange(e)},e.prototype.updateTransportPayloadBasedControls=function(e,t){void 0===t&&(t=!1);var n=this.mqttDeviceProfileTransportConfigurationFormGroup.get("transportPayloadTypeConfiguration");t&&n.patchValue({deviceTelemetryProtoSchema:o.E,deviceAttributesProtoSchema:o.B,deviceRpcRequestProtoSchema:o.C,deviceRpcResponseProtoSchema:o.D},{emitEvent:!1}),e!==o.r.PROTOBUF||this.disabled?(n.get("deviceTelemetryProtoSchema").disable({emitEvent:!1}),n.get("deviceAttributesProtoSchema").disable({emitEvent:!1}),n.get("deviceRpcRequestProtoSchema").disable({emitEvent:!1}),n.get("deviceRpcResponseProtoSchema").disable({emitEvent:!1})):(n.get("deviceTelemetryProtoSchema").enable({emitEvent:!1}),n.get("deviceAttributesProtoSchema").enable({emitEvent:!1}),n.get("deviceRpcRequestProtoSchema").enable({emitEvent:!1}),n.get("deviceRpcResponseProtoSchema").enable({emitEvent:!1}))},e.prototype.validationMQTTTopic=function(){return function(e){for(var t=e.value,n=/[#+]/g,i=n.exec(t);i;){var a=i.index,r=i[0],o=a>0?t[a-1]:null,s=a<t.length-1?t[a+1]:null;if("#"===r&&(a!==t.length-1||null!==o&&"/"!==o))return{invalidMultiTopicCharacter:{valid:!1}};if("+"===r&&(null!==o&&"/"!==o||null!==s&&"/"!==s))return{invalidSingleTopicCharacter:{valid:!1}};i=n.exec(t)}return null}},e.prototype.uniqueDeviceTopicValidator=function(e){if(e.getRawValue()){var t=e.getRawValue();if(t.deviceAttributesTopic===t.deviceTelemetryTopic)return{unique:!0}}return null},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](d.Store),i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-mqtt-device-profile-transport-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:37,vars:20,consts:[[2,"padding-bottom","16px",3,"formGroup"],[1,"fields-group"],["translate","",1,"group-title"],["fxLayoutGap","8px","fxLayout","column"],["fxLayout","row","fxLayoutGap","8px","fxLayout.xs","column"],["fxFlex",""],["translate",""],["matInput","","required","","formControlName","deviceTelemetryTopic","type","text"],[4,"ngIf"],["matInput","","required","","formControlName","deviceAttributesTopic","type","text"],[1,"tb-hint",3,"innerHTML"],["formGroupName","transportPayloadTypeConfiguration"],[1,"mat-block"],["formControlName","transportPayloadType","required",""],[3,"value",4,"ngFor","ngForOf"],["fxLayout","column",4,"ngIf"],[3,"value"],["fxLayout","column"],["matInput","","required","","formControlName","deviceTelemetryProtoSchema","rows","5"],["matInput","","required","","formControlName","deviceAttributesProtoSchema","rows","5"],["fxFlex","",2,"padding-bottom","20px"],["matInput","","required","","formControlName","deviceRpcRequestProtoSchema","rows","5"],["translate","",1,"tb-hint"],["matInput","","required","","formControlName","deviceRpcResponseProtoSchema","rows","5"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"form",0),i["\u0275\u0275elementStart"](1,"fieldset",1),i["\u0275\u0275elementStart"](2,"legend",2),i["\u0275\u0275text"](3,"device-profile.mqtt-device-topic-filters"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",3),i["\u0275\u0275elementStart"](5,"div",4),i["\u0275\u0275elementStart"](6,"mat-form-field",5),i["\u0275\u0275elementStart"](7,"mat-label",6),i["\u0275\u0275text"](8,"device-profile.telemetry-topic-filter"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](9,"input",7),i["\u0275\u0275template"](10,b,3,3,"mat-error",8),i["\u0275\u0275template"](11,y,3,3,"mat-error",8),i["\u0275\u0275template"](12,v,3,3,"mat-error",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"mat-form-field",5),i["\u0275\u0275elementStart"](14,"mat-label",6),i["\u0275\u0275text"](15,"device-profile.attributes-topic-filter"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](16,"input",9),i["\u0275\u0275template"](17,C,3,3,"mat-error",8),i["\u0275\u0275template"](18,x,3,3,"mat-error",8),i["\u0275\u0275template"](19,w,3,3,"mat-error",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](20,S,3,3,"mat-error",8),i["\u0275\u0275element"](21,"div",10),i["\u0275\u0275pipe"](22,"translate"),i["\u0275\u0275element"](23,"div",10),i["\u0275\u0275pipe"](24,"translate"),i["\u0275\u0275element"](25,"div",10),i["\u0275\u0275pipe"](26,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](27,"section",11),i["\u0275\u0275elementStart"](28,"fieldset",1),i["\u0275\u0275elementStart"](29,"legend",2),i["\u0275\u0275text"](30,"device-profile.mqtt-device-payload-type"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](31,"div",3),i["\u0275\u0275elementStart"](32,"mat-form-field",12),i["\u0275\u0275elementStart"](33,"mat-select",13),i["\u0275\u0275template"](34,E,3,4,"mat-option",14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](35,I,3,3,"mat-error",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](36,M,23,4,"div",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.mqttDeviceProfileTransportConfigurationFormGroup),i["\u0275\u0275advance"](10),i["\u0275\u0275property"]("ngIf",t.mqttDeviceProfileTransportConfigurationFormGroup.get("deviceTelemetryTopic").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.mqttDeviceProfileTransportConfigurationFormGroup.get("deviceTelemetryTopic").hasError("invalidSingleTopicCharacter")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.mqttDeviceProfileTransportConfigurationFormGroup.get("deviceTelemetryTopic").hasError("invalidMultiTopicCharacter")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.mqttDeviceProfileTransportConfigurationFormGroup.get("deviceAttributesTopic").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.mqttDeviceProfileTransportConfigurationFormGroup.get("deviceAttributesTopic").hasError("invalidSingleTopicCharacter")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.mqttDeviceProfileTransportConfigurationFormGroup.get("deviceAttributesTopic").hasError("invalidMultiTopicCharacter")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.mqttDeviceProfileTransportConfigurationFormGroup.hasError("unique")),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("innerHTML",i["\u0275\u0275pipeBind1"](22,14,"device-profile.support-level-wildcards"),i["\u0275\u0275sanitizeHtml"]),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("innerHTML",i["\u0275\u0275pipeBind1"](24,16,"device-profile.single-level-wildcards-hint"),i["\u0275\u0275sanitizeHtml"]),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("innerHTML",i["\u0275\u0275pipeBind1"](26,18,"device-profile.multi-level-wildcards-hint"),i["\u0275\u0275sanitizeHtml"]),i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("ngForOf",t.transportPayloadTypes),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.mqttDeviceProfileTransportConfigurationFormGroup.get("transportPayloadTypeConfiguration.transportPayloadType").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.protoPayloadType))},directives:[a["\u0275angular_packages_forms_forms_ba"],a.NgControlStatusGroup,a.FormGroupDirective,u.TranslateDirective,p.g,p.f,m.MatFormField,p.b,m.MatLabel,f.MatInput,a.DefaultValueAccessor,a.RequiredValidator,a.NgControlStatus,a.FormControlName,h.NgIf,a.FormGroupName,g.MatSelect,h.NgForOf,m.MatError,A.MatOption,m.MatHint],pipes:[u.TranslatePipe],styles:["[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]{padding:8px;margin:10px 0;border:1px groove rgba(0,0,0,.25);border-radius:4px}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{color:rgba(0,0,0,.7)}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]   .tb-hint[_ngcontent-%COMP%]{padding:0}"]}),e}();0,void 0},UGF7:function(e,t,n){"use strict";n.d(t,"a",function(){return Z});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("xw5a"),d=n("S+vS"),u=n("6OOC"),p=n("XNiG"),m=n("LRne"),f=n("1G5W"),h=n("JX91"),g=n("pLZG"),A=n("lJxs"),b=n("5+tZ"),y=n("05l1"),v=n("x+ZX"),C=n("//Q6"),x=n("g+M/"),w=n("l7P3"),S=n("tyNb"),E=n("sYmb"),I=n("/t3+"),O=n("XiUz"),T=n("bTqV"),F=n("NFeN"),B=n("kmnG"),M=n("d3UM"),P=n("ofXK"),D=n("qFsG"),k=n("/1cH"),_=n("gl+N"),L=n("bSwM"),j=n("HX6g"),N=n("d5eY"),R=["keyNameInput"];function U(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",28),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.entityKeyTypeTranslations.get(n))," ")}}function V(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",29),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().clear()}),a["\u0275\u0275elementStart"](1,"mat-icon",4),a["\u0275\u0275text"](2,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}}function Q(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",28),a["\u0275\u0275element"](1,"span",30),a["\u0275\u0275pipe"](2,"highlight"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("innerHTML",a["\u0275\u0275pipeBind2"](2,2,n,i.searchText),a["\u0275\u0275sanitizeHtml"])}}function G(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"filter.key-name-required")," "))}function H(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",28),a["\u0275\u0275element"](1,"mat-icon",22),a["\u0275\u0275elementStart"](2,"span"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("svgIcon",i.entityKeyValueTypes.get(i.entityKeyValueTypeEnum[n]).icon),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,3,i.entityKeyValueTypes.get(i.entityKeyValueTypeEnum[n]).name))}}function K(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"filter.value-type-required")," "))}function q(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-form-field",33),a["\u0275\u0275elementStart"](1,"mat-label",10),a["\u0275\u0275text"](2,"filter.value"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"input",34),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](4,1,"filter.value")))}function z(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-form-field",33),a["\u0275\u0275elementStart"](1,"mat-label",10),a["\u0275\u0275text"](2,"filter.value"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"input",35),a["\u0275\u0275elementEnd"]())}function W(e,t){1&e&&a["\u0275\u0275element"](0,"tb-datetime",36)}function X(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-checkbox",37),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,n.keyFilterFormGroup.get("value").value?"value.true":"value.false")," ")}}function $(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",2),a["\u0275\u0275elementStart"](1,"div",31),a["\u0275\u0275template"](2,q,5,3,"ng-template",32),a["\u0275\u0275template"](3,z,4,0,"ng-template",32),a["\u0275\u0275template"](4,W,1,0,"ng-template",32),a["\u0275\u0275template"](5,X,3,3,"ng-template",32),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitch",n.keyFilterFormGroup.get("valueType").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",n.entityKeyValueTypeEnum.STRING),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",n.entityKeyValueTypeEnum.NUMERIC),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",n.entityKeyValueTypeEnum.DATE_TIME),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",n.entityKeyValueTypeEnum.BOOLEAN)}}function J(e,t){if(1&e&&a["\u0275\u0275element"](0,"tb-filter-predicate-list",38),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("allowUserDynamicSource",n.data.allowUserDynamicSource)("onlyUserDynamicSource",n.isConstantKeyType)("displayUserParameters",n.data.displayUserParameters)("valueType",n.keyFilterFormGroup.get("valueType").value)("key",n.keyFilterFormGroup.get("key.key").value)}}function Y(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"button",39),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,n.isLoading$)||n.keyFilterFormGroup.invalid||!n.keyFilterFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](3,4,n.data.isAdd?"action.add":"action.update")," ")}}var Z=function(e){function t(t,n,i,a,r,o,l,d,m){var y=e.call(this,t,n,r)||this;return y.store=t,y.router=n,y.data=i,y.errorStateMatcher=a,y.dialogRef=r,y.deviceProfileService=o,y.dialogs=l,y.translate=d,y.fb=m,y.dirty=!1,y.destroy$=new p.b,y.entityKeyTypes=y.data.telemetryKeysOnly?[c.d.ATTRIBUTE,c.d.TIME_SERIES,c.d.CONSTANT]:[c.d.ENTITY_FIELD,c.d.ATTRIBUTE,c.d.TIME_SERIES],y.entityKeyTypeTranslations=c.v,y.entityKeyValueTypesKeys=Object.keys(c.e),y.entityKeyValueTypeEnum=c.e,y.entityKeyValueTypes=c.w,y.submitted=!1,y.showAutocomplete=!1,y.searchText="",y.keyFilterFormGroup=y.fb.group({key:y.fb.group({type:[y.data.keyFilter.key.type,[s.Validators.required]],key:[y.data.keyFilter.key.key,[s.Validators.required]]}),valueType:[y.data.keyFilter.valueType,[s.Validators.required]],predicates:[y.data.keyFilter.predicates,[s.Validators.required]]}),y.data.telemetryKeysOnly&&y.keyFilterFormGroup.addControl("value",y.fb.control(y.data.keyFilter.value)),y.data.readonly?y.keyFilterFormGroup.disable({emitEvent:!1}):(y.keyFilterFormGroup.get("valueType").valueChanges.pipe(Object(f.a)(y.destroy$)).subscribe(function(e){var t=y.keyFilterFormGroup.value.valueType,n=y.keyFilterFormGroup.get("predicates").value;t&&t!==e&&n&&n.length&&y.dialogs.confirm(y.translate.instant("filter.key-value-type-change-title"),y.translate.instant("filter.key-value-type-change-message")).subscribe(function(e){e?y.keyFilterFormGroup.get("predicates").setValue([]):y.keyFilterFormGroup.get("valueType").setValue(t,{emitEvent:!1})})}),y.keyFilterFormGroup.get("key.type").valueChanges.pipe(Object(h.a)(y.data.keyFilter.key.type),Object(f.a)(y.destroy$)).subscribe(function(e){e===c.d.ENTITY_FIELD||Object(C.n)(y.data.entityId)?(y.entityKeysName=null,y.dirty=!1,y.showAutocomplete=!0):y.showAutocomplete=!1,y.data.telemetryKeysOnly&&(e===c.d.CONSTANT?(y.keyFilterFormGroup.get("value").setValidators(s.Validators.required),y.keyFilterFormGroup.get("value").updateValueAndValidity()):(y.keyFilterFormGroup.get("value").clearValidators(),y.keyFilterFormGroup.get("value").updateValueAndValidity()))}),y.keyFilterFormGroup.get("key.key").valueChanges.pipe(Object(g.a)(function(e){return y.keyFilterFormGroup.get("key.type").value===c.d.ENTITY_FIELD&&u.a.hasOwnProperty(e)}),Object(f.a)(y.destroy$)).subscribe(function(e){var t,n=y.keyFilterFormGroup.value.valueType,i=(null===(t=u.a[e])||void 0===t?void 0:t.time)?c.e.DATE_TIME:c.e.STRING;n!==i&&y.keyFilterFormGroup.get("valueType").patchValue(i,{emitEvent:!1})}),y.filteredKeysName=y.keyFilterFormGroup.get("key.key").valueChanges.pipe(Object(A.a)(function(e){return e||""}),Object(b.b)(function(e){return y.fetchEntityName(e)}),Object(f.a)(y.destroy$))),y}return Object(i.d)(t,e),t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.destroy$.next(),this.destroy$.complete()},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.clear=function(){var e=this;this.keyFilterFormGroup.get("key.key").patchValue("",{emitEvent:!0}),setTimeout(function(){e.keyNameInput.nativeElement.blur(),e.keyNameInput.nativeElement.focus()},0)},t.prototype.onFocus=function(){!this.dirty&&this.showAutocomplete&&(this.keyFilterFormGroup.get("key.key").updateValueAndValidity({onlySelf:!0,emitEvent:!0}),this.dirty=!0)},t.prototype.save=function(){if(this.submitted=!0,this.keyFilterFormGroup.valid){var e=this.keyFilterFormGroup.getRawValue();this.dialogRef.close(e)}},Object.defineProperty(t.prototype,"isConstantKeyType",{get:function(){return this.keyFilterFormGroup.get("key.type").value===c.d.CONSTANT},enumerable:!1,configurable:!0}),t.prototype.fetchEntityName=function(e){return this.searchText=e,this.getEntityKeys().pipe(Object(A.a)(function(t){return e?t.filter(function(t){return t.toUpperCase().startsWith(e.toUpperCase())}):t}))},t.prototype.getEntityKeys=function(){var e,t;if(!this.entityKeysName){var n=void 0;switch(this.keyFilterFormGroup.get("key.type").value){case c.d.ENTITY_FIELD:n=Object(m.a)(Object.keys(u.a).map(function(e){return u.a[e]}).map(function(e){return e.keyName}).sort());break;case c.d.ATTRIBUTE:n=this.deviceProfileService.getDeviceProfileDevicesAttributesKeys(null===(e=this.data.entityId)||void 0===e?void 0:e.id,{ignoreLoading:!0});break;case c.d.TIME_SERIES:n=this.deviceProfileService.getDeviceProfileDevicesTimeseriesKeys(null===(t=this.data.entityId)||void 0===t?void 0:t.id,{ignoreLoading:!0});break;default:n=Object(m.a)([])}this.entityKeysName=n.pipe(Object(y.a)(1),Object(v.a)())}return this.entityKeysName},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](w.Store),a["\u0275\u0275directiveInject"](S.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](x.a),a["\u0275\u0275directiveInject"](d.a),a["\u0275\u0275directiveInject"](E.TranslateService),a["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-key-filter-dialog"]],viewQuery:function(e,t){if(1&e&&a["\u0275\u0275viewQuery"](R,3),2&e){var n;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.keyNameInput=n.first)}},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:49,vars:32,consts:[[2,"width","900px",3,"formGroup","ngSubmit"],["color","accent"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],["fxLayout","column",3,"disabled"],["fxLayout","row","fxLayoutGap","8px",1,"entity-key"],["fxLayout","row","formGroupName","key","fxLayoutGap","8px",3,"fxFlex"],["fxFlex","40",1,"mat-block"],["translate",""],["required","","formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","60",1,"mat-block"],["matInput","","required","","formControlName","key",3,"matAutocomplete","matAutocompleteDisabled","focusin"],["keyNameInput",""],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption",""],["keyName","matAutocomplete"],[4,"ngIf"],[1,"mat-block",3,"fxFlex"],["formControlName","valueType"],[1,"tb-mat-18",3,"svgIcon"],["fxFlex","",4,"ngIf"],["formControlName","predicates",3,"allowUserDynamicSource","onlyUserDynamicSource","displayUserParameters","valueType","key",4,"ngIf"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled",4,"ngIf"],[3,"value"],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"innerHTML"],["fxLayout","column",3,"ngSwitch"],[3,"ngSwitchCase"],[1,"mat-block"],["matInput","","required","","formControlName","value",3,"placeholder"],["required","","type","number","matInput","","formControlName","value"],["formControlName","value","dateText","filter.date","timeText","filter.time","required",""],["formControlName","value",2,"margin-top","20px"],["formControlName","predicates",3,"allowUserDynamicSource","onlyUserDynamicSource","displayUserParameters","valueType","key"],["mat-raised-button","","color","accent","type","submit",3,"disabled"]],template:function(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"div",5),a["\u0275\u0275elementStart"](10,"fieldset",6),a["\u0275\u0275pipe"](11,"async"),a["\u0275\u0275elementStart"](12,"section",7),a["\u0275\u0275elementStart"](13,"section",8),a["\u0275\u0275elementStart"](14,"mat-form-field",9),a["\u0275\u0275elementStart"](15,"mat-label",10),a["\u0275\u0275text"](16,"filter.key-type.key-type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"mat-select",11),a["\u0275\u0275template"](18,U,3,4,"mat-option",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"mat-form-field",13),a["\u0275\u0275elementStart"](20,"mat-label",10),a["\u0275\u0275text"](21,"filter.key-name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"input",14,15),a["\u0275\u0275listener"]("focusin",function(){return t.onFocus()}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](24,V,3,0,"button",16),a["\u0275\u0275elementStart"](25,"mat-autocomplete",17,18),a["\u0275\u0275template"](27,Q,3,5,"mat-option",12),a["\u0275\u0275pipe"](28,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](29,G,3,3,"mat-error",19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](30,"mat-form-field",20),a["\u0275\u0275elementStart"](31,"mat-label",10),a["\u0275\u0275text"](32,"filter.value-type.value-type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](33,"mat-select",21),a["\u0275\u0275elementStart"](34,"mat-select-trigger"),a["\u0275\u0275element"](35,"mat-icon",22),a["\u0275\u0275elementStart"](36,"span"),a["\u0275\u0275text"](37),a["\u0275\u0275pipe"](38,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](39,H,5,5,"mat-option",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](40,K,3,3,"mat-error",19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](41,$,6,5,"div",23),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](42,J,1,5,"tb-filter-predicate-list",24),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](43,"div",25),a["\u0275\u0275elementStart"](44,"button",26),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](45,"async"),a["\u0275\u0275text"](46),a["\u0275\u0275pipe"](47,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](48,Y,4,6,"button",27),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n,i,r=a["\u0275\u0275reference"](26);a["\u0275\u0275property"]("formGroup",t.keyFilterFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,20,t.data.isAdd?"filter.add-key-filter":t.data.readonly?"filter.key-filter":"filter.edit-key-filter")),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](11,22,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("fxFlex",t.isConstantKeyType?45:70),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngForOf",t.entityKeyTypes),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("matAutocomplete",r)("matAutocompleteDisabled",!t.showAutocomplete),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",t.keyFilterFormGroup.get("key.key").value&&t.showAutocomplete),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",a["\u0275\u0275pipeBind1"](28,24,t.filteredKeysName)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",t.keyFilterFormGroup.get("key.key").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxFlex",t.isConstantKeyType?20:30),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("svgIcon",null==(n=t.entityKeyValueTypes.get(t.keyFilterFormGroup.get("valueType").value))?null:n.icon),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](38,26,null==(i=t.entityKeyValueTypes.get(t.keyFilterFormGroup.get("valueType").value))?null:i.name)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",t.entityKeyValueTypesKeys),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.keyFilterFormGroup.get("valueType").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.isConstantKeyType),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.keyFilterFormGroup.get("valueType").value),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](45,28,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](47,30,t.data.readonly?"action.close":"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!t.data.readonly)}},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,I.MatToolbar,O.b,T.MatButton,F.MatIcon,o.MatDialogContent,O.f,O.g,s.FormGroupName,B.MatFormField,B.MatLabel,E.TranslateDirective,M.MatSelect,s.RequiredValidator,s.NgControlStatus,s.FormControlName,P.NgForOf,D.MatInput,s.DefaultValueAccessor,k.MatAutocompleteTrigger,P.NgIf,k.MatAutocomplete,M.MatSelectTrigger,o.MatDialogActions,O.e,r.MatOption,B.MatSuffix,B.MatError,P.NgSwitch,P.NgSwitchCase,s.NumberValueAccessor,_.a,L.MatCheckbox,j.a],pipes:[E.TranslatePipe,P.AsyncPipe,N.a],styles:["[_nghost-%COMP%]     .entity-key mat-form-field .mat-form-field-wrapper .mat-form-field-infix{width:auto}"]}),t}(l.a);0,void 0},UaJx:function(e,t,n){"use strict";n.d(t,"a",function(){return ge});var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=n("mbhL"),s=n("M9IT"),l=n("Dh3D"),c=n("Kj3r"),d=n("/uUt"),u=n("vkgz"),p=n("lJxs"),m=n("JIr8"),f=n("4r/P"),h=n("xgIS"),g=n("VRyK"),A=n("LRne"),b=n("cp0P"),y=n("qxrw"),v=n("S+vS"),C=n("LrsY"),x=n("aX2P"),w=(n("HnHJ"),n("//Q6")),S=n("l7P3"),E=n("tyNb"),I=n("sYmb"),O=n("0IaG"),T=n("jhN1"),F=["entityTableHeader"],B=["searchInput"];function M(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-drawer",36,37),a["\u0275\u0275elementStart"](2,"tb-entity-details-panel",38),a["\u0275\u0275listener"]("closeEntityDetails",function(){a["\u0275\u0275restoreView"](n);var e=a["\u0275\u0275nextContext"]();return e.isDetailsOpen=!1,e.detailsPanelOpened.emit(e.isDetailsOpen)})("entityUpdated",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onEntityUpdated(e)})("entityAction",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onEntityAction(e)}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("opened",i.isDetailsOpen),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("entitiesTableConfig",i.entitiesTableConfig)("entityId",null==i.dataSource.currentEntity?null:i.dataSource.currentEntity.id)}}function P(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"span",39),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](n.entitiesTableConfig.tableTitle)}}function D(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"tb-timewindow",40),a["\u0275\u0275listener"]("ngModelChange",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().timewindow=e})("ngModelChange",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onTimewindowChange()}),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngModel",i.timewindow)}}function k(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",15),a["\u0275\u0275listener"]("click",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().addEntity(e)}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementStart"](3,"mat-icon"),a["\u0275\u0275text"](4,"add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](2,4,i.translations.add)),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,i.isLoading$))}}function _(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",43),a["\u0275\u0275listener"]("click",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).entitiesTableConfig.addActionDescriptors[0].onAction(e)}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275propertyInterpolate"]("matTooltip",i.entitiesTableConfig.addActionDescriptors[0].name),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,4,i.isLoading$))("fxShow",i.entitiesTableConfig.addActionDescriptors[0].isEnabled()),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](i.entitiesTableConfig.addActionDescriptors[0].icon)}}function L(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"button",48),a["\u0275\u0275listener"]("click",function(e){return t.$implicit.onAction(e)}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"span"),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"](3);a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,4,i.isLoading$))("fxShow",n.isEnabled()),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](n.icon),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](n.name)}}function j(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"button",44),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementStart"](3,"mat-icon"),a["\u0275\u0275text"](4,"add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"mat-menu",45,46),a["\u0275\u0275template"](7,L,6,6,"button",47),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275reference"](6),i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](2,6,i.translations.add)),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,4,i.isLoading$))("matMenuTriggerFor",n),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("ngForOf",i.entitiesTableConfig.addActionDescriptors)}}function N(e,t){if(1&e&&(a["\u0275\u0275template"](0,_,4,6,"button",41),a["\u0275\u0275template"](1,j,8,8,"ng-template",null,42,a["\u0275\u0275templateRefExtractor"])),2&e){var n=a["\u0275\u0275reference"](2),i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngIf",1===i.entitiesTableConfig.addActionDescriptors.length)("ngIfElse",n)}}function R(e,t){if(1&e&&a["\u0275\u0275element"](0,"mat-icon",50),2&e){var n=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275property"]("svgIcon",n.icon)}}function U(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-icon"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](n.icon)}}function V(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"button",43),a["\u0275\u0275listener"]("click",function(e){return t.$implicit.onAction(e)}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275template"](2,R,1,1,"mat-icon",49),a["\u0275\u0275template"](3,U,2,1,"mat-icon",34),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("matTooltip",n.name),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,5,i.isLoading$))("fxShow",n.isEnabled()),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",n.isMdiIcon),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!n.isMdiIcon)}}function Q(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",15),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().enterFilterMode()}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementStart"](3,"mat-icon"),a["\u0275\u0275text"](4,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](2,4,i.translations.search)),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,i.isLoading$))}}function G(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",43),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit,r=a["\u0275\u0275nextContext"](2);return i.onAction(e,r.dataSource.selection.selected)}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=a["\u0275\u0275nextContext"](2);a["\u0275\u0275propertyInterpolate"]("matTooltip",i.name),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,4,r.isLoading$))("fxShow",i.isEnabled),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](i.icon)}}var H=function(e){return{count:e}};function K(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-toolbar",51),a["\u0275\u0275elementStart"](1,"div",5),a["\u0275\u0275elementStart"](2,"span",52),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",10),a["\u0275\u0275template"](6,G,4,6,"button",14),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("fxShow",!n.dataSource.selection.isEmpty()),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind2"](4,3,n.translations.selectedEntities,a["\u0275\u0275pureFunction1"](6,H,n.dataSource.selection.selected.length))," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",n.groupActionDescriptors)}}function q(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-header-cell",53),a["\u0275\u0275elementStart"](1,"mat-checkbox",54),a["\u0275\u0275listener"]("change",function(e){a["\u0275\u0275restoreView"](n);var t=a["\u0275\u0275nextContext"]();return e?t.dataSource.masterToggle():null}),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275pipe"](3,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("checked",i.dataSource.selection.hasValue()&&a["\u0275\u0275pipeBind1"](2,2,i.dataSource.isAllSelected()))("indeterminate",i.dataSource.selection.hasValue()&&!a["\u0275\u0275pipeBind1"](3,4,i.dataSource.isAllSelected()))}}function z(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275elementStart"](1,"mat-checkbox",55),a["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()})("change",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit,r=a["\u0275\u0275nextContext"]();return e?r.dataSource.selection.toggle(i):null}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",r.entitiesTableConfig.entitySelectionEnabled(i))("checked",r.dataSource.selection.isSelected(i))}}var W=function(e){return{"mat-number-cell":e}};function X(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",59),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]().$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](7,W,n.isNumberColumn))("fxHide.lt-lg",n.mobileHide)("ngStyle",i.headerCellStyle(n))("disabled",!n.sortable),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.ignoreTranslate?n.title:a["\u0275\u0275pipeBind1"](2,5,n.title)," ")}}function $(e,t){if(1&e&&(a["\u0275\u0275element"](0,"tb-copy-button",66),a["\u0275\u0275pipe"](1,"async")),2&e){var n=a["\u0275\u0275nextContext"](2).$implicit,i=a["\u0275\u0275nextContext"]().$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275styleMap"](i.actionCell.style),a["\u0275\u0275propertyInterpolate"]("tooltipText",i.actionCell.nameFunction?i.actionCell.nameFunction(n):i.actionCell.name),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,8,r.isLoading$))("fxShow",i.actionCell.isEnabled(n))("copyText",i.actionCell.onAction(null,n))("icon",i.actionCell.icon)("mdiIcon",i.actionCell.mdiIcon)}}function J(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",43),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var t=a["\u0275\u0275nextContext"](2).$implicit;return a["\u0275\u0275nextContext"]().$implicit.actionCell.onAction(e,t)}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275elementStart"](2,"mat-icon",67),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"](2).$implicit,r=a["\u0275\u0275nextContext"]().$implicit,o=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("matTooltip",r.actionCell.nameFunction?r.actionCell.nameFunction(i):r.actionCell.name),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,6,o.isLoading$))("fxShow",r.actionCell.isEnabled(i)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("svgIcon",r.actionCell.mdiIcon)("ngStyle",r.actionCell.style),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",r.actionCell.icon," ")}}function Y(e,t){if(1&e&&(a["\u0275\u0275elementContainerStart"](0,63),a["\u0275\u0275template"](1,$,2,10,"ng-template",64),a["\u0275\u0275template"](2,J,4,8,"ng-template",65),a["\u0275\u0275elementContainerEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2).$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngSwitch",n.actionCell.type),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",i.cellActionType.COPY_BUTTON)}}function Z(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-cell",60),a["\u0275\u0275element"](1,"span",61),a["\u0275\u0275template"](2,Y,3,2,"ng-template",62),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=t.index,r=a["\u0275\u0275nextContext"]().$implicit,o=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](6,W,r.isNumberColumn))("fxHide.lt-lg",r.mobileHide)("matTooltip",o.cellTooltip(n,r,i))("ngStyle",o.cellStyle(n,r,i)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("innerHTML",o.cellContent(n,r,i),a["\u0275\u0275sanitizeHtml"]),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",r.actionCell)}}function ee(e,t){if(1&e&&(a["\u0275\u0275elementContainerStart"](0,56),a["\u0275\u0275template"](1,X,3,9,"mat-header-cell",57),a["\u0275\u0275template"](2,Z,3,8,"mat-cell",58),a["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275property"]("matColumnDef",n.key)}}function te(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",70),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]().$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle",i.headerCellStyle(n))("disabled",!n.sortable),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,3,n.title)," ")}}function ne(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-cell",71),a["\u0275\u0275elementStart"](1,"button",43),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit;return a["\u0275\u0275nextContext"]().$implicit.actionDescriptor.onAction(e,i)}),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275elementStart"](3,"mat-icon",67),a["\u0275\u0275text"](4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=t.index,o=a["\u0275\u0275nextContext"]().$implicit,s=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle",s.cellStyle(i,o,r)),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",o.actionDescriptor.nameFunction?o.actionDescriptor.nameFunction(i):o.actionDescriptor.name),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](2,7,s.isLoading$))("fxShow",o.actionDescriptor.isEnabled(i)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("svgIcon",o.actionDescriptor.mdiIcon)("ngStyle",o.actionDescriptor.style),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",o.actionDescriptor.icon,"")}}function ie(e,t){if(1&e&&(a["\u0275\u0275elementContainerStart"](0,56),a["\u0275\u0275template"](1,te,3,5,"mat-header-cell",68),a["\u0275\u0275template"](2,ne,5,9,"mat-cell",69),a["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275property"]("matColumnDef",n.key)}}var ae=function(e,t,n){return{minWidth:e,maxWidth:t,width:n}};function re(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",72),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle.gt-md",a["\u0275\u0275pureFunction3"](4,ae,40*n.cellActionDescriptors.length+"px",40*n.cellActionDescriptors.length+"px",40*n.cellActionDescriptors.length+"px")),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.entitiesTableConfig.actionsColumnTitle?a["\u0275\u0275pipeBind1"](2,2,n.entitiesTableConfig.actionsColumnTitle):""," ")}}function oe(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",15),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit,r=a["\u0275\u0275nextContext"]().$implicit;return i.onAction(e,r)}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275elementStart"](2,"mat-icon",67),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=a["\u0275\u0275nextContext"]().$implicit,o=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("matTooltip",i.nameFunction?i.nameFunction(r):i.name),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,5,o.isLoading$)||!i.isEnabled(r)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("svgIcon",i.mdiIcon)("ngStyle",i.style),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",i.icon,"")}}function se(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",48),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit,r=a["\u0275\u0275nextContext"](2).$implicit;return i.onAction(e,r)}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275elementStart"](2,"mat-icon",67),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"span"),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=a["\u0275\u0275nextContext"](2).$implicit,o=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,6,o.isLoading$))("fxShow",i.isEnabled(r)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("svgIcon",i.mdiIcon)("ngStyle",i.style),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",i.icon,""),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](i.nameFunction?i.nameFunction(r):i.name)}}function le(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",76),a["\u0275\u0275elementStart"](1,"button",77),a["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),a["\u0275\u0275elementStart"](2,"mat-icon",78),a["\u0275\u0275text"](3,"more_vert"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"mat-menu",45,79),a["\u0275\u0275template"](6,se,6,8,"button",47),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275reference"](5),i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("matMenuTriggerFor",n),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngForOf",i.cellActionDescriptors)}}function ce(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-cell",72),a["\u0275\u0275elementStart"](1,"div",73),a["\u0275\u0275template"](2,oe,4,7,"button",74),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](3,le,7,2,"div",75),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle.gt-md",a["\u0275\u0275pureFunction3"](3,ae,40*n.cellActionDescriptors.length+"px",40*n.cellActionDescriptors.length+"px",40*n.cellActionDescriptors.length+"px")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",n.cellActionDescriptors),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.cellActionDescriptors.length)}}var de=function(e){return{"mat-row-select":e}};function ue(e,t){if(1&e&&a["\u0275\u0275element"](0,"mat-header-row",80),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](1,de,n.selectionEnabled))}}var pe=function(e,t,n){return{"mat-row-select":e,"mat-selected":t,"tb-current-entity":n}};function me(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-row",81),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit;return a["\u0275\u0275nextContext"]().onRowClick(e,i)}),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("fxShow",!r.dataSource.dataLoading)("ngClass",a["\u0275\u0275pureFunction3"](2,pe,r.selectionEnabled,r.dataSource.selection.isSelected(i),r.dataSource.isCurrentEntity(i)))}}function fe(e,t){1&e&&a["\u0275\u0275element"](0,"mat-divider")}function he(e,t){if(1&e&&(a["\u0275\u0275element"](0,"mat-paginator",82),a["\u0275\u0275pipe"](1,"async")),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("length",a["\u0275\u0275pipeBind1"](1,4,n.dataSource.total()))("pageIndex",n.pageLink.page)("pageSize",n.pageLink.pageSize)("pageSizeOptions",n.pageSizeOptions)}}var ge=function(e){function t(t,n,i,r,o,s,l,c){var d=e.call(this,t)||this;return d.store=t,d.route=n,d.translate=i,d.dialog=r,d.dialogService=o,d.domSanitizer=s,d.cd=l,d.componentFactoryResolver=c,d.headerCellStyleCache=[],d.cellContentCache=[],d.cellTooltipCache=[],d.cellStyleCache=[],d.defaultPageSize=10,d.displayPagination=!0,d.textSearchMode=!1,d.cellActionType=y.a,d.isDetailsOpen=!1,d.detailsPanelOpened=new a.EventEmitter,d.viewInited=!1,d}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){this.entitiesTableConfig?this.init(this.entitiesTableConfig):this.init(this.route.snapshot.data.entitiesTableConfig)},t.prototype.ngOnChanges=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t],a=e[i];a.firstChange||a.currentValue===a.previousValue||"entitiesTableConfig"===i&&a.currentValue&&this.init(a.currentValue)}},t.prototype.init=function(e){var t=this;if(this.isDetailsOpen=!1,this.entitiesTableConfig=e,this.entitiesTableConfig.headerComponent){var n=this.componentFactoryResolver.resolveComponentFactory(this.entitiesTableConfig.headerComponent),a=this.entityTableHeaderAnchor.viewContainerRef;a.clear(),a.createComponent(n).instance.entitiesTableConfig=this.entitiesTableConfig}this.entitiesTableConfig.table=this,this.translations=this.entitiesTableConfig.entityTranslations,this.headerActionDescriptors=Object(i.h)(this.entitiesTableConfig.headerActionDescriptors),this.groupActionDescriptors=Object(i.h)(this.entitiesTableConfig.groupActionDescriptors),this.cellActionDescriptors=Object(i.h)(this.entitiesTableConfig.cellActionDescriptors),this.entitiesTableConfig.entitiesDeleteEnabled&&(this.cellActionDescriptors.push({name:this.translate.instant("action.delete"),icon:"delete",isEnabled:function(e){return t.entitiesTableConfig.deleteEnabled(e)},onAction:function(e,n){return t.deleteEntity(e,n)}}),this.groupActionDescriptors.push({name:this.translate.instant("action.delete"),icon:"delete",isEnabled:!0,onAction:function(e,n){return t.deleteEntities(e,n)}}));var r=this.groupActionDescriptors.filter(function(e){return e.isEnabled});this.selectionEnabled=this.entitiesTableConfig.selectionEnabled&&r.length,this.columnsUpdated();var s=null;if(this.entitiesTableConfig.defaultSortOrder&&(s={property:this.entitiesTableConfig.defaultSortOrder.property,direction:this.entitiesTableConfig.defaultSortOrder.direction}),this.displayPagination=this.entitiesTableConfig.displayPagination,this.defaultPageSize=this.entitiesTableConfig.defaultPageSize,this.pageSizeOptions=[this.defaultPageSize,2*this.defaultPageSize,3*this.defaultPageSize],this.entitiesTableConfig.useTimePageLink){this.timewindow=this.entitiesTableConfig.defaultTimewindowInterval;var l=Date.now();this.pageLink=new o.c(10,0,null,s,l-this.timewindow.history.timewindowMs,l)}else this.pageLink=new o.b(10,0,null,s);this.pageLink.pageSize=this.displayPagination?this.defaultPageSize:o.a,this.dataSource=this.entitiesTableConfig.dataSource(this.dataLoaded.bind(this)),this.entitiesTableConfig.onLoadAction&&this.entitiesTableConfig.onLoadAction(this.route),this.entitiesTableConfig.loadDataOnInit&&this.dataSource.loadEntities(this.pageLink),this.viewInited&&setTimeout(function(){t.updatePaginationSubscriptions()},0)},t.prototype.ngAfterViewInit=function(){var e=this;Object(h.a)(this.searchInputField.nativeElement,"keyup").pipe(Object(c.a)(150),Object(d.a)(),Object(u.a)(function(){e.displayPagination&&(e.paginator.pageIndex=0),e.updateData()})).subscribe(),this.updatePaginationSubscriptions(),this.viewInited=!0},t.prototype.updatePaginationSubscriptions=function(){var e=this;this.sortSubscription&&(this.sortSubscription.unsubscribe(),this.sortSubscription=null),this.updateDataSubscription&&(this.updateDataSubscription.unsubscribe(),this.updateDataSubscription=null),this.displayPagination&&(this.sortSubscription=this.sort.sortChange.subscribe(function(){return e.paginator.pageIndex=0})),this.updateDataSubscription=(this.displayPagination?Object(g.a)(this.sort.sortChange,this.paginator.page):this.sort.sortChange).pipe(Object(u.a)(function(){return e.updateData()})).subscribe()},t.prototype.addEnabled=function(){return this.entitiesTableConfig.addEnabled},t.prototype.clearSelection=function(){this.dataSource.selection.clear(),this.cd.detectChanges()},t.prototype.updateData=function(e){if(void 0===e&&(e=!0),e&&(this.isDetailsOpen=!1),this.displayPagination?(this.pageLink.page=this.paginator.pageIndex,this.pageLink.pageSize=this.paginator.pageSize):this.pageLink.page=0,this.sort.active?this.pageLink.sortOrder={property:this.sort.active,direction:f.a[this.sort.direction.toUpperCase()]}:this.pageLink.sortOrder=null,this.entitiesTableConfig.useTimePageLink){var t=this.pageLink;if(this.timewindow.history.historyType===x.d.LAST_INTERVAL){var n=Date.now();t.startTime=n-this.timewindow.history.timewindowMs,t.endTime=n}else if(this.timewindow.history.historyType===x.d.INTERVAL){var i=Object(x.s)(this.timewindow.history.quickInterval);t.startTime=i[0],t.endTime=i[1]}else t.startTime=this.timewindow.history.fixedTimewindow.startTimeMs,t.endTime=this.timewindow.history.fixedTimewindow.endTimeMs}this.dataSource.loadEntities(this.pageLink)},t.prototype.dataLoaded=function(e,t){isFinite(e)&&isFinite(t)?this.clearCellCache(e,t):(this.headerCellStyleCache.length=0,this.cellContentCache.length=0,this.cellTooltipCache.length=0,this.cellStyleCache.length=0)},t.prototype.onRowClick=function(e,t){this.entitiesTableConfig.handleRowClick(e,t)||this.toggleEntityDetails(e,t)},t.prototype.toggleEntityDetails=function(e,t){e&&e.stopPropagation(),this.dataSource.toggleCurrentEntity(t)?this.isDetailsOpen=!0:this.isDetailsOpen=!this.isDetailsOpen,this.detailsPanelOpened.emit(this.isDetailsOpen)},t.prototype.addEntity=function(e){var t=this;(this.entitiesTableConfig.addEntity?this.entitiesTableConfig.addEntity():this.dialog.open(C.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entitiesTableConfig:this.entitiesTableConfig}}).afterClosed()).subscribe(function(e){e&&(t.updateData(),t.entitiesTableConfig.entityAdded(e))})},t.prototype.onEntityUpdated=function(e){this.updateData(!1),this.entitiesTableConfig.entityUpdated(e)},t.prototype.onEntityAction=function(e){"delete"===e.action&&this.deleteEntity(e.event,e.entity)},t.prototype.deleteEntity=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.entitiesTableConfig.deleteEntityTitle(t),this.entitiesTableConfig.deleteEntityContent(t),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){e&&n.entitiesTableConfig.deleteEntity(t.id).subscribe(function(){n.updateData(),n.entitiesTableConfig.entitiesDeleted([t.id])})})},t.prototype.deleteEntities=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.entitiesTableConfig.deleteEntitiesTitle(t.length),this.entitiesTableConfig.deleteEntitiesContent(t.length),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){if(e){var i=[];t.forEach(function(e){n.entitiesTableConfig.deleteEnabled(e)&&i.push(n.entitiesTableConfig.deleteEntity(e.id).pipe(Object(p.a)(function(){return e.id}),Object(m.a)(function(){return Object(A.a)(null)})))}),Object(b.a)(i).subscribe(function(e){n.updateData(),n.entitiesTableConfig.entitiesDeleted(e.filter(function(e){return null!==e}))})}})},t.prototype.onTimewindowChange=function(){this.updateData()},t.prototype.enterFilterMode=function(){var e=this;this.textSearchMode=!0,this.pageLink.textSearch="",setTimeout(function(){e.searchInputField.nativeElement.focus(),e.searchInputField.nativeElement.setSelectionRange(0,0)},10)},t.prototype.exitFilterMode=function(){this.textSearchMode=!1,this.pageLink.textSearch=null,this.displayPagination&&(this.paginator.pageIndex=0),this.updateData()},t.prototype.resetSortAndFilter=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!1),this.pageLink.textSearch=null,this.entitiesTableConfig.useTimePageLink&&!t&&(this.timewindow=this.entitiesTableConfig.defaultTimewindowInterval),this.displayPagination&&(this.paginator.pageIndex=0);var n=this.sort.sortables.get(this.entitiesTableConfig.defaultSortOrder.property);this.sort.active=n.id,this.sort.direction=this.entitiesTableConfig.defaultSortOrder.direction===f.a.ASC?"asc":"desc",e&&this.updateData()},t.prototype.columnsUpdated=function(e){var t=this;void 0===e&&(e=!1),this.entityColumns=this.entitiesTableConfig.columns.filter(function(e){return e instanceof y.d}).map(function(e){return e}),this.actionColumns=this.entitiesTableConfig.columns.filter(function(e){return e instanceof y.c}).map(function(e){return e}),this.displayedColumns=[],this.selectionEnabled&&this.displayedColumns.push("select"),this.entitiesTableConfig.columns.forEach(function(e){t.displayedColumns.push(e.key)}),this.displayedColumns.push("actions"),this.headerCellStyleCache.length=0,this.cellContentCache.length=0,this.cellTooltipCache.length=0,this.cellStyleCache.length=0,e&&this.dataSource.reset()},t.prototype.headerCellStyle=function(e){var t=this.entitiesTableConfig.columns.indexOf(e),n=this.headerCellStyleCache[t];if(!n){var a={width:e.width};"0px"!==e.width&&(a.minWidth=e.width,a.maxWidth=e.width),n=e instanceof y.d?Object(i.a)(Object(i.a)({},e.headerCellStyleFunction(e.key)),a):a,this.headerCellStyleCache[t]=n}return n},t.prototype.clearCellCache=function(e,t){var n=t*this.entitiesTableConfig.columns.length+e;this.cellContentCache[n]=void 0,this.cellTooltipCache[n]=void 0,this.cellStyleCache[n]=void 0},t.prototype.cellContent=function(e,t,n){if(t instanceof y.d){var i=this.entitiesTableConfig.columns.indexOf(t),a=n*this.entitiesTableConfig.columns.length+i,r=this.cellContentCache[a];return Object(w.B)(r)&&(r=this.domSanitizer.bypassSecurityTrustHtml(t.cellContentFunction(e,t.key)),this.cellContentCache[a]=r),r}return""},t.prototype.cellTooltip=function(e,t,n){if(t instanceof y.d){var i=this.entitiesTableConfig.columns.indexOf(t),a=n*this.entitiesTableConfig.columns.length+i,r=this.cellTooltipCache[a];if(!Object(w.B)(r))return null!==r?r:void 0;r=t.cellTooltipFunction(e,t.key),r=Object(w.n)(r)?r:null,this.cellTooltipCache[a]=r}},t.prototype.cellStyle=function(e,t,n){var a=this.entitiesTableConfig.columns.indexOf(t),r=n*this.entitiesTableConfig.columns.length+a,o=this.cellStyleCache[r];if(!o){var s={width:t.width};"0px"!==t.width&&(s.minWidth=t.width,s.maxWidth=t.width),o=t instanceof y.d?Object(i.a)(Object(i.a)({},t.cellStyleFunction(e,t.key)),s):s,this.cellStyleCache[r]=o}return o},t.prototype.trackByColumnKey=function(e,t){return t.key},t.prototype.trackByEntityId=function(e,t){return t.id.id},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](S.Store),a["\u0275\u0275directiveInject"](E.ActivatedRoute),a["\u0275\u0275directiveInject"](I.TranslateService),a["\u0275\u0275directiveInject"](O.MatDialog),a["\u0275\u0275directiveInject"](v.a),a["\u0275\u0275directiveInject"](T.DomSanitizer),a["\u0275\u0275directiveInject"](a.ChangeDetectorRef),a["\u0275\u0275directiveInject"](a.ComponentFactoryResolver))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-entities-table"]],viewQuery:function(e,t){if(1&e&&(a["\u0275\u0275viewQuery"](F,3),a["\u0275\u0275viewQuery"](B,1),a["\u0275\u0275viewQuery"](s.MatPaginator,1),a["\u0275\u0275viewQuery"](l.MatSort,1)),2&e){var n=void 0;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.entityTableHeaderAnchor=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.searchInputField=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.paginator=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.sort=n.first)}},inputs:{entitiesTableConfig:"entitiesTableConfig"},features:[a["\u0275\u0275InheritDefinitionFeature"],a["\u0275\u0275NgOnChangesFeature"]],decls:63,vars:52,consts:[["hasBackdrop","false",1,"tb-absolute-fill"],["class","tb-details-drawer mat-elevation-z4","mode","over","position","end",3,"opened",4,"ngIf"],[1,"mat-padding","tb-entity-table","tb-absolute-fill"],["fxLayout","column",1,"mat-elevation-z1","tb-entity-table-content"],[1,"mat-table-toolbar",3,"fxShow"],[1,"mat-toolbar-tools"],["fxLayout","row","fxLayoutAlign","start center","fxLayout.xs","column","fxLayoutAlign.xs","center start",1,"title-container"],["class","tb-entity-table-title",4,"ngIf"],["entityTableHeader",""],["asButton","","historyOnly","",3,"ngModel","ngModelChange",4,"ngIf"],["fxFlex",""],[3,"fxShow"],["mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click",4,"ngIf","ngIfElse"],["addActions",""],["mat-icon-button","","matTooltipPosition","above",3,"disabled","fxShow","matTooltip","click",4,"ngFor","ngForOf"],["mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click"],["mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click",4,"ngIf"],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip"],["matInput","",3,"ngModel","placeholder","ngModelChange"],["searchInput",""],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip","click"],["class","mat-table-toolbar","color","accent",3,"fxShow",4,"ngIf"],["fxFlex","",1,"table-container"],["mat-table","","matSort","","matSortDisableClear","",3,"dataSource","trackBy","matSortActive","matSortDirection"],["matColumnDef","select","sticky",""],["style","width: 30px;",4,"matHeaderCellDef"],[4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf","ngForTrackBy"],["matColumnDef","actions","stickyEnd",""],[3,"ngStyle.gt-md",4,"matHeaderCellDef"],[3,"ngStyle.gt-md",4,"matCellDef"],[3,"ngClass",4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"fxShow","ngClass","click",4,"matRowDef","matRowDefColumns"],["fxLayoutAlign","center center",1,"no-data-found",3,"fxShow"],[4,"ngIf"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions",4,"ngIf"],["mode","over","position","end",1,"tb-details-drawer","mat-elevation-z4",3,"opened"],["drawer",""],[3,"entitiesTableConfig","entityId","closeEntityDetails","entityUpdated","entityAction"],[1,"tb-entity-table-title"],["asButton","","historyOnly","",3,"ngModel","ngModelChange"],["mat-icon-button","","matTooltipPosition","above",3,"disabled","fxShow","matTooltip","click",4,"ngIf","ngIfElse"],["addActionsMenu",""],["mat-icon-button","","matTooltipPosition","above",3,"disabled","fxShow","matTooltip","click"],["mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","matMenuTriggerFor"],["xPosition","before"],["addActionsMenu","matMenu"],["mat-menu-item","",3,"disabled","fxShow","click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"disabled","fxShow","click"],[3,"svgIcon",4,"ngIf"],[3,"svgIcon"],["color","accent",1,"mat-table-toolbar",3,"fxShow"],[1,"tb-entity-table-info"],[2,"width","30px"],[3,"checked","indeterminate","change"],[3,"fxShow","checked","click","change"],[3,"matColumnDef"],["mat-sort-header","",3,"ngClass","fxHide.lt-lg","ngStyle","disabled",4,"matHeaderCellDef"],["matTooltipPosition","above",3,"ngClass","fxHide.lt-lg","matTooltip","ngStyle",4,"matCellDef"],["mat-sort-header","",3,"ngClass","fxHide.lt-lg","ngStyle","disabled"],["matTooltipPosition","above",3,"ngClass","fxHide.lt-lg","matTooltip","ngStyle"],[3,"innerHTML"],[3,"ngIf"],[3,"ngSwitch"],[3,"ngSwitchCase"],["ngSwitchDefault",""],["tooltipPosition","above",3,"disabled","fxShow","copyText","tooltipText","icon","mdiIcon"],[3,"svgIcon","ngStyle"],["mat-sort-header","",3,"ngStyle","disabled",4,"matHeaderCellDef"],[3,"ngStyle",4,"matCellDef"],["mat-sort-header","",3,"ngStyle","disabled"],[3,"ngStyle"],[3,"ngStyle.gt-md"],["fxHide","","fxShow.gt-md","","fxFlex","","fxLayout","row","fxLayoutAlign","end"],["mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click",4,"ngFor","ngForOf"],["fxHide","","fxShow.lt-lg","",4,"ngIf"],["fxHide","","fxShow.lt-lg",""],["mat-icon-button","",3,"matMenuTriggerFor","click"],[1,"material-icons"],["cellActionsMenu","matMenu"],[3,"ngClass"],[3,"fxShow","ngClass","click"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions"]],template:function(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-drawer-container",0),a["\u0275\u0275template"](1,M,3,3,"mat-drawer",1),a["\u0275\u0275elementStart"](2,"mat-drawer-content"),a["\u0275\u0275elementStart"](3,"div",2),a["\u0275\u0275elementStart"](4,"div",3),a["\u0275\u0275elementStart"](5,"mat-toolbar",4),a["\u0275\u0275elementStart"](6,"div",5),a["\u0275\u0275elementStart"](7,"div",6),a["\u0275\u0275template"](8,P,2,1,"span",7),a["\u0275\u0275element"](9,"tb-anchor",null,8),a["\u0275\u0275template"](11,D,1,1,"tb-timewindow",9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](12,"span",10),a["\u0275\u0275elementStart"](13,"div",11),a["\u0275\u0275template"](14,k,5,6,"button",12),a["\u0275\u0275template"](15,N,3,2,"ng-template",null,13,a["\u0275\u0275templateRefExtractor"]),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](17,V,4,7,"button",14),a["\u0275\u0275elementStart"](18,"button",15),a["\u0275\u0275listener"]("click",function(){return t.updateData()}),a["\u0275\u0275pipe"](19,"async"),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275elementStart"](21,"mat-icon"),a["\u0275\u0275text"](22,"refresh"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](23,Q,5,6,"button",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](24,"mat-toolbar",4),a["\u0275\u0275elementStart"](25,"div",5),a["\u0275\u0275elementStart"](26,"button",17),a["\u0275\u0275pipe"](27,"translate"),a["\u0275\u0275elementStart"](28,"mat-icon"),a["\u0275\u0275text"](29,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](30,"mat-form-field",10),a["\u0275\u0275elementStart"](31,"mat-label"),a["\u0275\u0275text"](32,"\xa0"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](33,"input",18,19),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.pageLink.textSearch=e}),a["\u0275\u0275pipe"](35,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](36,"button",20),a["\u0275\u0275listener"]("click",function(){return t.exitFilterMode()}),a["\u0275\u0275pipe"](37,"translate"),a["\u0275\u0275elementStart"](38,"mat-icon"),a["\u0275\u0275text"](39,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](40,K,7,8,"mat-toolbar",21),a["\u0275\u0275elementStart"](41,"div",22),a["\u0275\u0275elementStart"](42,"table",23),a["\u0275\u0275elementContainerStart"](43,24),a["\u0275\u0275template"](44,q,4,6,"mat-header-cell",25),a["\u0275\u0275template"](45,z,2,2,"mat-cell",26),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275template"](46,ee,3,1,"ng-container",27),a["\u0275\u0275template"](47,ie,3,1,"ng-container",27),a["\u0275\u0275elementContainerStart"](48,28),a["\u0275\u0275template"](49,re,3,8,"mat-header-cell",29),a["\u0275\u0275template"](50,ce,4,7,"mat-cell",30),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275template"](51,ue,1,3,"mat-header-row",31),a["\u0275\u0275template"](52,me,1,6,"mat-row",32),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](53,"span",33),a["\u0275\u0275pipe"](54,"async"),a["\u0275\u0275pipe"](55,"async"),a["\u0275\u0275text"](56),a["\u0275\u0275pipe"](57,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](58,"span",33),a["\u0275\u0275text"](59),a["\u0275\u0275pipe"](60,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](61,fe,1,0,"mat-divider",34),a["\u0275\u0275template"](62,he,2,6,"mat-paginator",35),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275reference"](16);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.entitiesTableConfig.detailsPanelEnabled),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("fxShow",!t.textSearchMode&&t.dataSource.selection.isEmpty()),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",t.entitiesTableConfig.tableTitle),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",t.entitiesTableConfig.useTimePageLink),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",t.addEnabled()),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!t.entitiesTableConfig.addActionDescriptors.length)("ngIfElse",n),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",t.headerActionDescriptors),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](20,36,"action.refresh")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](19,34,t.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",t.entitiesTableConfig.searchEnabled),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",t.textSearchMode&&t.dataSource.selection.isEmpty()),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](27,38,t.translations.search)),a["\u0275\u0275advance"](7),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](35,40,t.translations.search)),a["\u0275\u0275property"]("ngModel",t.pageLink.textSearch),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](37,42,"action.close")),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",t.entitiesTableConfig.selectionEnabled),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("dataSource",t.dataSource)("trackBy",t.trackByEntityId)("matSortActive",null==t.pageLink.sortOrder?null:t.pageLink.sortOrder.property)("matSortDirection",t.pageLink.sortDirection()),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngForOf",t.entityColumns)("ngForTrackBy",t.trackByColumnKey),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",t.actionColumns)("ngForTrackBy",t.trackByColumnKey),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",!a["\u0275\u0275pipeBind1"](54,44,t.isLoading$)&&a["\u0275\u0275pipeBind1"](55,46,t.dataSource.isEmpty())&&!t.dataSource.dataLoading),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](57,48,t.translations.noEntities)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",t.dataSource.dataLoading),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](60,50,"common.loading")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",t.displayPagination),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.displayPagination)}},styles:["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{min-height:auto}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .tb-entity-table-title[_ngcontent-%COMP%]{padding-right:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .tb-entity-table-info[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media screen and (max-width:599px){[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{height:auto;min-height:100px}[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]   .tb-entity-table-title[_ngcontent-%COMP%]{padding-bottom:5px;width:100%}}[_nghost-%COMP%]     .mat-sort-header-sorted .mat-sort-header-arrow{opacity:1!important}"],changeDetection:0}),t}(r.a);0,void 0},"V4k/":function(e,t,n){"use strict";n.d(t,"a",function(){return T});var i=n("mrSG"),a=n("fXoL"),r=n("3Pt+"),o=n("JIJk"),s=n("//Q6"),l=n("aX2P"),c=n("XiUz"),d=n("kmnG"),u=n("d3UM"),p=n("ofXK"),m=n("FKr1"),f=n("pd1A"),h=n("sYmb"),g=n("0Miz"),A=n("xoCY"),b=n("qFsG"),y=n("bSwM");function v(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",5),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.alarmScheduleTypeTranslate.get(n))," ")}}function C(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.schedule-type-required")," "))}function x(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-checkbox",24),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"](3);a["\u0275\u0275property"]("formControl",i.weeklyRepeatControl(n)),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.dayOfWeekTranslationsArray[n])," ")}}function w(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-checkbox",24),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"](3);a["\u0275\u0275property"]("formControl",i.weeklyRepeatControl(n)),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.dayOfWeekTranslationsArray[n])," ")}}function S(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"section"),a["\u0275\u0275elementStart"](1,"div",7),a["\u0275\u0275text"](2,"device-profile.schedule-days"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"div",8),a["\u0275\u0275elementStart"](4,"div",9),a["\u0275\u0275template"](5,x,3,4,"mat-checkbox",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",9),a["\u0275\u0275template"](7,w,3,4,"mat-checkbox",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](8,"tb-error",11),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementStart"](10,"div",7),a["\u0275\u0275text"](11,"device-profile.schedule-time"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](12,"div",12),a["\u0275\u0275elementStart"](13,"div",13),a["\u0275\u0275elementStart"](14,"mat-form-field",14),a["\u0275\u0275elementStart"](15,"mat-label",15),a["\u0275\u0275text"](16,"device-profile.schedule-time-from"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](17,"mat-datetimepicker-toggle",16),a["\u0275\u0275element"](18,"mat-datetimepicker",17,18),a["\u0275\u0275element"](20,"input",19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"mat-form-field",14),a["\u0275\u0275elementStart"](22,"mat-label",15),a["\u0275\u0275text"](23,"device-profile.schedule-time-to"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](24,"mat-datetimepicker-toggle",16),a["\u0275\u0275element"](25,"mat-datetimepicker",17,20),a["\u0275\u0275element"](27,"input",21),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"div",22),a["\u0275\u0275element"](29,"div",23),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275reference"](19),i=a["\u0275\u0275reference"](26),r=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngForOf",r.firstRowDays),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",r.secondRowDays),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("error",r.alarmScheduleForm.get("daysOfWeek").hasError("dayOfWeeks")?a["\u0275\u0275pipeBind1"](9,8,"device-profile.schedule-days-of-week-required"):""),a["\u0275\u0275advance"](9),a["\u0275\u0275property"]("for",n),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("matDatetimepicker",n),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("for",i),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("matDatetimepicker",i),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("innerHTML",r.getSchedulerRangeText(r.alarmScheduleForm),a["\u0275\u0275sanitizeHtml"])}}function E(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",26),a["\u0275\u0275elementStart"](1,"div",27),a["\u0275\u0275elementStart"](2,"mat-checkbox",28),a["\u0275\u0275listener"]("change",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit;return a["\u0275\u0275nextContext"](3).changeCustomScheduler(e,i)}),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"div",29),a["\u0275\u0275elementStart"](6,"mat-form-field",30),a["\u0275\u0275elementStart"](7,"mat-label",15),a["\u0275\u0275text"](8,"device-profile.schedule-time-from"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](9,"mat-datetimepicker-toggle",16),a["\u0275\u0275element"](10,"mat-datetimepicker",17,18),a["\u0275\u0275element"](12,"input",19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](13,"mat-form-field",30),a["\u0275\u0275elementStart"](14,"mat-label",15),a["\u0275\u0275text"](15,"device-profile.schedule-time-to"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](16,"mat-datetimepicker-toggle",16),a["\u0275\u0275element"](17,"mat-datetimepicker",17,20),a["\u0275\u0275element"](19,"input",21),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](20,"div",31),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=a["\u0275\u0275reference"](11),o=a["\u0275\u0275reference"](18),s=a["\u0275\u0275nextContext"](3);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroupName",""+i),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](4,7,s.dayOfWeekTranslationsArray[i])," "),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("for",r),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("matDatetimepicker",r),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("for",o),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("matDatetimepicker",o),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("innerHTML",s.getSchedulerRangeText(s.itemsSchedulerForm.at(i)),a["\u0275\u0275sanitizeHtml"])}}function I(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"section"),a["\u0275\u0275elementStart"](1,"div",7),a["\u0275\u0275text"](2,"device-profile.schedule-days"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](3,E,21,9,"div",25),a["\u0275\u0275element"](4,"tb-error",11),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",n.allDays),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("error",n.alarmScheduleForm.get("items").hasError("dayOfWeeks")?a["\u0275\u0275pipeBind1"](5,2,"device-profile.schedule-days-of-week-required"):"")}}function O(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275element"](1,"tb-timezone-select",6),a["\u0275\u0275template"](2,S,30,10,"section",4),a["\u0275\u0275template"](3,I,6,4,"section",4),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",n.alarmScheduleForm.get("type").value===n.alarmScheduleType.SPECIFIC_TIME),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.alarmScheduleForm.get("type").value===n.alarmScheduleType.CUSTOM)}}var T=function(){function e(e){this.fb=e,this.alarmScheduleTypes=Object.keys(o.c),this.alarmScheduleType=o.c,this.alarmScheduleTypeTranslate=o.d,this.dayOfWeekTranslationsArray=o.A,this.allDays=Array(7).fill(0).map(function(e,t){return t}),this.firstRowDays=Array(4).fill(0).map(function(e,t){return t}),this.secondRowDays=Array(3).fill(0).map(function(e,t){return t+4}),this.defaultItems=Array.from({length:7},function(e,t){return{enabled:!0,dayOfWeek:t+1}}),this.propagateChange=function(e){}}return e.prototype.ngOnInit=function(){var e=this;this.alarmScheduleForm=this.fb.group({type:[o.c.ANY_TIME,r.Validators.required],timezone:[null,r.Validators.required],daysOfWeek:this.fb.array(new Array(7).fill(!1),this.validateDayOfWeeks),startsOn:[0,r.Validators.required],endsOn:[0,r.Validators.required],items:this.fb.array(Array.from({length:7},function(t,n){return e.defaultItemsScheduler(n)}),this.validateItems)}),this.alarmScheduleForm.get("type").valueChanges.subscribe(function(t){var n=Object(l.C)();e.alarmScheduleForm.reset({type:t,items:e.defaultItems,timezone:n},{emitEvent:!1}),e.updateValidators(t,!0),e.alarmScheduleForm.updateValueAndValidity()}),this.alarmScheduleForm.valueChanges.subscribe(function(){e.updateModel()})},e.prototype.validateDayOfWeeks=function(e){var t=e.value;return t&&t.length&&t.find(function(e){return!0===e})?null:{dayOfWeeks:!0}},e.prototype.validateItems=function(e){var t=e.value;return t&&t.length&&t.find(function(e){return!0===e.enabled})?null:{dayOfWeeks:!0}},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.alarmScheduleForm.disable({emitEvent:!1}):this.alarmScheduleForm.enable({emitEvent:!1})},e.prototype.writeValue=function(e){var t=this;switch(this.modelValue=e,Object(s.o)(this.modelValue)||(this.modelValue={type:o.c.ANY_TIME}),this.modelValue.type){case o.c.SPECIFIC_TIME:var n=new Array(7).fill(!1);Object(s.n)(this.modelValue.daysOfWeek)&&(n=n.map(function(e,n){return t.modelValue.daysOfWeek.indexOf(n+1)>-1})),this.alarmScheduleForm.patchValue({type:this.modelValue.type,timezone:this.modelValue.timezone,daysOfWeek:n,startsOn:Object(o.Q)(this.modelValue.startsOn),endsOn:Object(o.Q)(this.modelValue.endsOn)},{emitEvent:!1});break;case o.c.CUSTOM:if(this.modelValue.items){var i=[];this.modelValue.items.sort(function(e,t){return e.dayOfWeek-t.dayOfWeek}).forEach(function(e,n){t.disabledSelectedTime(e.enabled,n),i.push({enabled:e.enabled,startsOn:Object(o.Q)(e.startsOn),endsOn:Object(o.Q)(e.endsOn)})}),this.alarmScheduleForm.patchValue({type:this.modelValue.type,timezone:this.modelValue.timezone,items:i},{emitEvent:!1})}break;default:this.alarmScheduleForm.patchValue(this.modelValue||void 0,{emitEvent:!1})}this.updateValidators(this.modelValue.type)},e.prototype.validate=function(e){return this.alarmScheduleForm.valid?null:{alarmScheduler:{valid:!1}}},e.prototype.weeklyRepeatControl=function(e){return this.alarmScheduleForm.get("daysOfWeek").at(e)},e.prototype.updateValidators=function(e,t){switch(void 0===t&&(t=!1),e){case o.c.ANY_TIME:this.alarmScheduleForm.get("timezone").disable({emitEvent:!1}),this.alarmScheduleForm.get("daysOfWeek").disable({emitEvent:!1}),this.alarmScheduleForm.get("startsOn").disable({emitEvent:!1}),this.alarmScheduleForm.get("endsOn").disable({emitEvent:!1}),this.alarmScheduleForm.get("items").disable({emitEvent:!1});break;case o.c.SPECIFIC_TIME:this.alarmScheduleForm.get("timezone").enable({emitEvent:!1}),this.alarmScheduleForm.get("daysOfWeek").enable({emitEvent:!1}),this.alarmScheduleForm.get("startsOn").enable({emitEvent:!1}),this.alarmScheduleForm.get("endsOn").enable({emitEvent:!1}),this.alarmScheduleForm.get("items").disable({emitEvent:!1});break;case o.c.CUSTOM:this.alarmScheduleForm.get("timezone").enable({emitEvent:!1}),this.alarmScheduleForm.get("daysOfWeek").disable({emitEvent:!1}),this.alarmScheduleForm.get("startsOn").disable({emitEvent:!1}),this.alarmScheduleForm.get("endsOn").disable({emitEvent:!1}),t&&this.alarmScheduleForm.get("items").enable({emitEvent:!1})}},e.prototype.updateModel=function(){var e=this.alarmScheduleForm.value;this.modelValue&&(Object(s.n)(e.daysOfWeek)&&(e.daysOfWeek=e.daysOfWeek.map(function(e,t){return e?t+1:null}).filter(function(e){return!!e})),Object(s.n)(e.startsOn)&&0!==e.startsOn&&(e.startsOn=Object(o.O)(e.startsOn)),Object(s.n)(e.endsOn)&&0!==e.endsOn&&(e.endsOn=Object(o.O)(e.endsOn)),Object(s.n)(e.items)&&(e.items=this.alarmScheduleForm.getRawValue().items,e.items=e.items.map(function(e){return Object(i.a)(Object(i.a)({},e),{startsOn:Object(o.O)(e.startsOn),endsOn:Object(o.O)(e.endsOn)})})),this.modelValue=e,this.propagateChange(this.modelValue))},e.prototype.defaultItemsScheduler=function(e){return this.fb.group({enabled:[!0],dayOfWeek:[e+1],startsOn:[0,r.Validators.required],endsOn:[0,r.Validators.required]})},e.prototype.changeCustomScheduler=function(e,t){var n=e.checked;this.disabledSelectedTime(n,t,!0)},e.prototype.disabledSelectedTime=function(e,t,n){void 0===n&&(n=!1),e?(this.itemsSchedulerForm.at(t).get("startsOn").enable({emitEvent:!1}),this.itemsSchedulerForm.at(t).get("endsOn").enable({emitEvent:n})):(this.itemsSchedulerForm.at(t).get("startsOn").disable({emitEvent:!1}),this.itemsSchedulerForm.at(t).get("endsOn").disable({emitEvent:n}))},e.prototype.getSchedulerRangeText=function(e){return Object(o.M)(e.get("startsOn").value,e.get("endsOn").value)},Object.defineProperty(e.prototype,"itemsSchedulerForm",{get:function(){return this.alarmScheduleForm.get("items")},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](r.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-alarm-schedule"]],inputs:{disabled:"disabled"},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)(function(){return e}),multi:!0},{provide:r.NG_VALIDATORS,useExisting:Object(a.forwardRef)(function(){return e}),multi:!0}])],decls:8,vars:7,consts:[["fxLayout","column",3,"formGroup"],["hideRequiredMarker","","floatLabel","always",1,"mat-block"],["formControlName","type","required","",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],["userTimezoneByDefault","","required","","formControlName","timezone"],["translate","",1,"tb-small",2,"margin-bottom","0.5em"],["fxLayout","column","fxLayout.gt-md","row","fxLayoutGap","16px"],["fxLayout","row","fxLayoutGap","16px"],[3,"formControl",4,"ngFor","ngForOf"],[2,"display","block",3,"error"],["fxLayout","row","fxLayout.xs","column","fxLayoutGap.gt-xs","8px"],["fxLayout","row","fxLayoutGap","8px","fxFlex.gt-md",""],["fxFlex.xs","","fxFlex.sm","150px","fxFlex.md","150px","fxFlex.gt-md",""],["translate",""],["matPrefix","",3,"for"],["type","time","openOnFocus","true"],["startTimePicker",""],["required","","matInput","","formControlName","startsOn",3,"matDatetimepicker"],["endTimePicker",""],["required","","matInput","","formControlName","endsOn",3,"matDatetimepicker"],["fxFlex","","fxLayoutAlign","center center",2,"margin","auto"],[2,"text-align","center",3,"innerHTML"],[3,"formControl"],["fxLayout","column","formArrayName","items","fxLayoutGap","1em",4,"ngFor","ngForOf"],["fxLayout","column","formArrayName","items","fxLayoutGap","1em"],["fxLayout.xs","column","fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","start center","fxLayoutAlign.xs","center start",3,"formGroupName"],["formControlName","enabled","fxFlex","17",3,"change"],["fxLayout","row","fxLayoutGap","8px","fxFlex",""],["fxFlex.xs","","fxFlex.sm","100px","fxFlex.md","100px"],["fxFlex","","fxLayoutAlign","center center",2,"text-align","center",3,"innerHTML"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"section",0),a["\u0275\u0275elementStart"](1,"mat-form-field",1),a["\u0275\u0275element"](2,"mat-label"),a["\u0275\u0275elementStart"](3,"mat-select",2),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275template"](5,v,3,4,"mat-option",3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](6,C,3,3,"mat-error",4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](7,O,4,2,"div",4),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.alarmScheduleForm),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](4,5,"device-profile.schedule-type")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",t.alarmScheduleTypes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.alarmScheduleForm.get("type").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.alarmScheduleForm.get("type").value!==t.alarmScheduleType.ANY_TIME))},directives:[c.f,r.NgControlStatusGroup,r.FormGroupDirective,d.MatFormField,d.MatLabel,u.MatSelect,r.NgControlStatus,r.FormControlName,r.RequiredValidator,p.NgForOf,p.NgIf,m.MatOption,d.MatError,f.a,h.TranslateDirective,c.g,g.a,c.b,A.d,d.MatPrefix,A.a,b.MatInput,r.DefaultValueAccessor,A.b,c.e,y.MatCheckbox,r.FormControlDirective,r.FormArrayName,r.FormGroupName],pipes:[h.TranslatePipe],styles:[".nowrap{white-space:nowrap}"]}),e}();0,void 0},Vbuf:function(e,t,n){"use strict";n.d(t,"a",function(){return H});var i=n("fXoL"),a=n("3Pt+"),r=n("LRne"),o=n("mbhL"),s=n("4r/P"),l=n("Kj3r"),c=n("vkgz"),d=n("lJxs"),u=n("/uUt"),p=n("eIep"),m=n("w1tV"),f=n("JIr8"),h=n("8LU1"),g=n("XW0v"),A=n("vnPf"),b=n("WeLn"),y=n("T4sd"),v=n("FtGj"),C=n("Nw2X"),x=n("Duvn"),w=n("l7P3"),S=n("sYmb"),E=n("0IaG"),I=n("kmnG"),O=n("qFsG"),T=n("/1cH"),F=n("ofXK"),B=n("bTqV"),M=n("NFeN"),P=n("Qu3c"),D=n("FKr1"),k=n("d5eY"),_=["tenantProfileInput"];function L(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",10),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().clear()}),i["\u0275\u0275elementStart"](1,"mat-icon",11),i["\u0275\u0275text"](2,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function j(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",12),i["\u0275\u0275listener"]("click",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().editTenantProfile(e)}),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275elementStart"](2,"mat-icon",11),i["\u0275\u0275text"](3,"edit"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}2&e&&i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](1,1,"tenant-profile.edit"))}function N(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",13),i["\u0275\u0275element"](1,"span",14),i["\u0275\u0275pipe"](2,"highlight"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind2"](2,2,n.name,a.searchText),i["\u0275\u0275sanitizeHtml"])}}function R(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"span",20),i["\u0275\u0275text"](2,"tenant-profile.no-tenant-profiles-found"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}var U=function(e){return{entity:e}};function V(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,n.translate.get("tenant-profile.no-tenant-profiles-matching",i["\u0275\u0275pureFunction1"](3,U,n.truncate.transform(n.searchText,!0,6,"..."))))," ")}}function Q(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-option",15),i["\u0275\u0275elementStart"](1,"div",16),i["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),i["\u0275\u0275template"](2,R,3,0,"div",17),i["\u0275\u0275template"](3,V,3,5,"ng-template",null,18,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementStart"](5,"span"),i["\u0275\u0275elementStart"](6,"a",19),i["\u0275\u0275listener"]("click",function(e){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"]();return t.createTenantProfile(e,t.searchText)}),i["\u0275\u0275text"](7,"tenant-profile.create-new-tenant-profile"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=i["\u0275\u0275reference"](4),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",null),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!r.textIsNotEmpty(r.searchText))("ngIfElse",a)}}function G(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.tenant-profile-required")," "))}var H=function(){function e(e,t,n,a,r,o){this.store=e,this.translate=t,this.truncate=n,this.tenantProfileService=a,this.fb=r,this.dialog=o,this.selectDefaultProfile=!1,this.tenantProfileUpdated=new i.EventEmitter,this.searchText="",this.dirty=!1,this.propagateChange=function(e){},this.selectTenantProfileFormGroup=this.fb.group({tenantProfile:[null]})}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(h.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.filteredTenantProfiles=this.selectTenantProfileFormGroup.get("tenantProfile").valueChanges.pipe(Object(l.a)(150),Object(c.a)(function(t){var n;n="string"!=typeof t&&t?new g.a(t.id.id):null,e.updateView(n)}),Object(d.a)(function(e){return e?"string"==typeof e?e:e.name:""}),Object(u.a)(),Object(p.a)(function(t){return e.fetchTenantProfiles(t)}),Object(m.a)())},e.prototype.selectDefaultTenantProfileIfNeeded=function(){var e=this;this.selectDefaultProfile&&!this.modelValue&&this.tenantProfileService.getDefaultTenantProfileInfo().subscribe(function(t){t&&(e.modelValue=new g.a(t.id.id),e.selectTenantProfileFormGroup.get("tenantProfile").patchValue(t,{emitEvent:!1}),e.propagateChange(e.modelValue))})},e.prototype.setDisabledState=function(e){this.disabled=e},e.prototype.writeValue=function(e){var t=this;this.searchText="",null!=e?this.tenantProfileService.getTenantProfileInfo(e.id).subscribe(function(e){t.modelValue=new g.a(e.id.id),t.selectTenantProfileFormGroup.get("tenantProfile").patchValue(e,{emitEvent:!1})}):(this.modelValue=null,this.selectTenantProfileFormGroup.get("tenantProfile").patchValue(null,{emitEvent:!1}),this.selectDefaultTenantProfileIfNeeded()),this.dirty=!0},e.prototype.onFocus=function(){this.dirty&&(this.selectTenantProfileFormGroup.get("tenantProfile").updateValueAndValidity({onlySelf:!0,emitEvent:!0}),this.dirty=!1)},e.prototype.updateView=function(e){Object(b.a)(this.modelValue,e)||(this.modelValue=e,this.propagateChange(this.modelValue))},e.prototype.displayTenantProfileFn=function(e){return e?e.name:void 0},e.prototype.fetchTenantProfiles=function(e){this.searchText=e;var t=new o.b(10,0,e,{property:"name",direction:s.a.ASC});return this.tenantProfileService.getTenantProfileInfos(t,{ignoreLoading:!0}).pipe(Object(f.a)(function(){return Object(r.a)(Object(x.a)())}),Object(d.a)(function(e){return e.data}))},e.prototype.clear=function(){var e=this;this.selectTenantProfileFormGroup.get("tenantProfile").patchValue(null,{emitEvent:!0}),setTimeout(function(){e.tenantProfileInput.nativeElement.blur(),e.tenantProfileInput.nativeElement.focus()},0)},e.prototype.textIsNotEmpty=function(e){return e&&e.length>0},e.prototype.tenantProfileEnter=function(e){e.keyCode===v.ENTER&&(e.preventDefault(),this.modelValue||this.createTenantProfile(e,this.searchText))},e.prototype.createTenantProfile=function(e,t){e.preventDefault();var n={name:t};this.openTenantProfileDialog(n,!0)},e.prototype.editTenantProfile=function(e){var t=this;e.preventDefault(),this.tenantProfileService.getTenantProfile(this.modelValue.id).subscribe(function(e){t.openTenantProfileDialog(e,!1)})},e.prototype.openTenantProfileDialog=function(e,t){var n=this;this.dialog.open(C.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{isAdd:t,tenantProfile:e}}).afterClosed().subscribe(function(e){e?n.tenantProfileService.getTenantProfileInfo(e.id.id).subscribe(function(i){n.modelValue=new g.a(i.id.id),n.selectTenantProfileFormGroup.get("tenantProfile").patchValue(i,{emitEvent:!0}),t?n.propagateChange(n.modelValue):n.tenantProfileUpdated.next(e.id)}):setTimeout(function(){n.tenantProfileInput.nativeElement.blur(),n.tenantProfileInput.nativeElement.focus()},0)})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](w.Store),i["\u0275\u0275directiveInject"](S.TranslateService),i["\u0275\u0275directiveInject"](y.a),i["\u0275\u0275directiveInject"](A.a),i["\u0275\u0275directiveInject"](a.FormBuilder),i["\u0275\u0275directiveInject"](E.MatDialog))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-tenant-profile-autocomplete"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](_,3),2&e){var n;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.tenantProfileInput=n.first)}},inputs:{selectDefaultProfile:"selectDefaultProfile",required:"required",disabled:"disabled"},outputs:{tenantProfileUpdated:"tenantProfileUpdated"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:13,vars:16,consts:[[1,"mat-block",3,"formGroup"],["matInput","","type","text","formControlName","tenantProfile",3,"placeholder","required","matAutocomplete","focusin","keydown","keypress"],["tenantProfileInput",""],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Edit","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],[1,"tb-autocomplete",3,"displayWith"],["tenantProfileAutocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["class","tb-not-found",3,"value",4,"ngIf"],[4,"ngIf"],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"material-icons"],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Edit","matTooltipPosition","above",3,"matTooltip","click"],[3,"value"],[3,"innerHTML"],[1,"tb-not-found",3,"value"],[1,"tb-not-found-content",3,"click"],[4,"ngIf","ngIfElse"],["searchNotEmpty",""],["translate","",3,"click"],["translate",""]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-form-field",0),i["\u0275\u0275elementStart"](1,"input",1,2),i["\u0275\u0275listener"]("focusin",function(){return t.onFocus()})("keydown",function(e){return t.tenantProfileEnter(e)})("keypress",function(e){return t.tenantProfileEnter(e)}),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,L,3,0,"button",3),i["\u0275\u0275template"](5,j,4,3,"button",4),i["\u0275\u0275elementStart"](6,"mat-autocomplete",5,6),i["\u0275\u0275template"](8,N,3,5,"mat-option",7),i["\u0275\u0275pipe"](9,"async"),i["\u0275\u0275template"](10,Q,8,3,"mat-option",8),i["\u0275\u0275pipe"](11,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](12,G,3,3,"mat-error",9),i["\u0275\u0275elementEnd"]()),2&e){var n,a=i["\u0275\u0275reference"](7);i["\u0275\u0275property"]("formGroup",t.selectTenantProfileFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](3,10,"tenant-profile.tenant-profile")),i["\u0275\u0275property"]("required",t.required)("matAutocomplete",a),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",t.selectTenantProfileFormGroup.get("tenantProfile").value&&!t.disabled),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.selectTenantProfileFormGroup.get("tenantProfile").value&&!t.disabled),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("displayWith",t.displayTenantProfileFn),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](9,12,t.filteredTenantProfiles)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!(null!=(n=i["\u0275\u0275pipeBind1"](11,14,t.filteredTenantProfiles))&&n.length)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.selectTenantProfileFormGroup.get("tenantProfile").hasError("required"))}},directives:[I.MatFormField,a.NgControlStatusGroup,a.FormGroupDirective,O.MatInput,a.DefaultValueAccessor,T.MatAutocompleteTrigger,a.NgControlStatus,a.FormControlName,a.RequiredValidator,F.NgIf,T.MatAutocomplete,F.NgForOf,B.MatButton,I.MatSuffix,M.MatIcon,P.MatTooltip,D.MatOption,S.TranslateDirective,I.MatError],pipes:[S.TranslatePipe,F.AsyncPipe,k.a],encapsulation:2}),e}();0,void 0},W1QD:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n("fXoL"),a=n("3Pt+"),r=(n("xw5a"),n("S0ZR")),o=n("//Q6"),s=n("0IaG"),l=n("bTqV"),c=n("Qu3c"),d=n("NFeN"),u=n("sYmb"),p=function(){function e(e){this.dialog=e,this.propagateChange=null}return e.prototype.ngOnInit=function(){},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){this.disabled=e},e.prototype.writeValue=function(e){this.keyFilterPredicateUserInfo=e},e.prototype.openFilterUserInfoDialog=function(){var e=this;this.dialog.open(r.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{keyFilterPredicateUserInfo:Object(o.e)(this.keyFilterPredicateUserInfo),valueType:this.valueType,key:this.key,operation:this.operation,readonly:this.disabled}}).afterClosed().subscribe(function(t){t&&(e.keyFilterPredicateUserInfo=t,e.updateModel())})},e.prototype.updateModel=function(){this.propagateChange(this.keyFilterPredicateUserInfo)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.MatDialog))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-filter-user-info"]],inputs:{disabled:"disabled",key:"key",operation:"operation",valueType:"valueType"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:4,vars:3,consts:[["mat-icon-button","","color","accent","type","button","matTooltipPosition","above",1,"tb-mat-32",3,"matTooltip","click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"button",0),i["\u0275\u0275listener"]("click",function(){return t.openFilterUserInfoDialog()}),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275elementStart"](2,"mat-icon"),i["\u0275\u0275text"](3,"settings"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](1,1,t.disabled?"filter.filter-user-params":"filter.edit-filter-user-params"))},directives:[l.MatButton,c.MatTooltip,d.MatIcon],pipes:[u.TranslatePipe],encapsulation:2}),e}();0,void 0},WeLn:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("//Q6");function a(e,t){return Object(i.o)(e)&&Object(i.o)(t)?e.id===t.id&&e.entityType===t.entityType:e===t}},XCsc:function(e,t,n){"use strict";n.d(t,"a",function(){return V});var i=n("mrSG"),a=n("fXoL"),r=n("0IaG"),o=n("3Pt+"),s=n("gmuX"),l=n("U3y+"),c=n("xKAQ"),d=n("z3OR"),u=n("9HAa"),p=n("l7P3"),m=n("tyNb"),f=n("sYmb"),h=n("/t3+"),g=n("XiUz"),A=n("kRCp"),b=n("bTqV"),y=n("NFeN"),v=n("ofXK"),C=n("xHqg"),x=n("XGqO"),w=n("kmnG"),S=n("d3UM"),E=n("bSwM"),I=n("LpWh"),O=n("bv9b"),T=n("FKr1"),F=["importStepper"];function B(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",31)}function M(e,t){1&e&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&e&&a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](1,1,"import.stepper-text.select-file"))}function P(e,t){1&e&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&e&&a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](1,1,"import.stepper-text.configuration"))}function D(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",32),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275property"]("value",n.key),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.value," ")}}function k(e,t){1&e&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&e&&a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](1,1,"import.stepper-text.column-type"))}function _(e,t){1&e&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&e&&a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](1,1,"import.stepper-text.creat-entities"))}function L(e,t){1&e&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&e&&a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](1,1,"import.stepper-text.done"))}var j=function(e){return{count:e}};function N(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"p",33),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.translate.instant("import.message.create-entities",a["\u0275\u0275pureFunction1"](1,j,n.statistical.create.entity))," ")}}function R(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"p",33),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.translate.instant("import.message.update-entities",a["\u0275\u0275pureFunction1"](1,j,n.statistical.update.entity))," ")}}function U(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"p",33),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.translate.instant("import.message.error-entities",a["\u0275\u0275pureFunction1"](1,j,n.statistical.error.entity))," ")}}var V=function(e){function t(t,n,i,a,r,s,l){var c=e.call(this,t,n,a)||this;return c.store=t,c.router=n,c.data=i,c.dialogRef=a,c.translate=r,c.importExport=s,c.fb=l,c.delimiters=[{key:",",value:","},{key:";",value:";"},{key:"|",value:"|"},{key:"\t",value:"Tab"}],c.selectedIndex=0,c.isImportData=!1,c.progressCreate=0,c.entityType=i.entityType,c.importTitle=i.importTitle,c.importFileLabel=i.importFileLabel,c.selectFileFormGroup=c.fb.group({importData:[null,[o.Validators.required]]}),c.importParametersFormGroup=c.fb.group({delim:[",",[o.Validators.required]],isHeader:[!0,[]],isUpdate:[!0,[]]}),c.columnTypesFormGroup=c.fb.group({columnsParam:[[],[]]}),c}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){},t.prototype.cancel=function(){this.dialogRef.close(!1)},t.prototype.previousStep=function(){this.importStepper.previous()},t.prototype.nextStep=function(e){switch(e){case 2:this.importStepper.next();break;case 3:var t=this.selectFileFormGroup.get("importData").value,n=this.parseCSV(t);if(-1===n)this.importStepper.previous(),this.importStepper.selected.reset();else{this.parseData=n;var i=this.createColumnsData();this.columnTypesFormGroup.patchValue({columnsParam:i},{emitEvent:!0}),this.importStepper.next()}break;case 4:this.importStepper.next(),this.isImportData=!0,this.addEntities();break;case 6:this.dialogRef.close(!0)}},t.prototype.parseCSV=function(e){var t=this,n={delim:this.importParametersFormGroup.get("delim").value,header:this.importParametersFormGroup.get("isHeader").value};return Object(d.d)(e,n,function(e,n){t.store.dispatch(new c.b({message:t.translate.instant(e,n),type:"error"}))})},t.prototype.createColumnsData=function(){for(var e=[],t=this.importParametersFormGroup.get("isHeader").value,n=0;n<this.parseData.headers.length;n++){var i=void 0;i=t&&0===this.parseData.headers[n].search(/^(name|type|label)$/im)?{type:d.a[this.parseData.headers[n].toLowerCase()],key:this.parseData.headers[n].toLowerCase(),sampleData:this.parseData.rows[0][n]}:{type:d.a.serverAttribute,key:t?this.parseData.headers[n]:"",sampleData:this.parseData.rows[0][n]},e.push(i)}return e},t.prototype.addEntities=function(){for(var e=this,t=this.parseData,n=this.columnTypesFormGroup.get("columnsParam").value,i=[],a=0,r=0;r<t.rows.length;r++){for(var o=this.constructDraftImportEntityData(),s=r,l=0;l<n.length;l++)switch(n[l].type){case d.a.serverAttribute:o.attributes.server.push({key:n[l].key,value:t.rows[s][l]});break;case d.a.timeseries:o.timeseries.push({key:n[l].key,value:t.rows[s][l]});break;case d.a.sharedAttribute:o.attributes.shared.push({key:n[l].key,value:t.rows[s][l]});break;case d.a.accessToken:o.accessToken=t.rows[s][l];break;case d.a.name:o.name=t.rows[s][l];break;case d.a.type:o.type=t.rows[s][l];break;case d.a.label:o.label=t.rows[s][l];break;case d.a.isGateway:o.gateway=t.rows[s][l];break;case d.a.description:o.description=t.rows[s][l];break;case d.a.edgeLicenseKey:o.edgeLicenseKey=t.rows[s][l];break;case d.a.cloudEndpoint:o.cloudEndpoint=t.rows[s][l];break;case d.a.routingKey:o.routingKey=t.rows[s][l];break;case d.a.secret:o.secret=t.rows[s][l]}i.push(o)}var c=this.importParametersFormGroup.get("isUpdate").value;this.importExport.importEntities(i,this.entityType,c,function(){a++,e.progressCreate=Math.round(a/t.rows.length*100)},{ignoreErrors:!0,resendRequest:!0}).subscribe(function(t){e.statistical=t,e.isImportData=!1,e.importStepper.next()})},t.prototype.constructDraftImportEntityData=function(){var e={name:"",type:"",description:"",gateway:null,label:"",accessToken:"",attributes:{server:[],shared:[]},timeseries:[]};if(this.entityType===l.b.EDGE){var t=e;return t.edgeLicenseKey="",t.cloudEndpoint="",t.routingKey="",t.secret="",t}return e},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](p.Store),a["\u0275\u0275directiveInject"](m.Router),a["\u0275\u0275directiveInject"](r.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.MatDialogRef),a["\u0275\u0275directiveInject"](f.TranslateService),a["\u0275\u0275directiveInject"](u.a),a["\u0275\u0275directiveInject"](o.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-import-csv-dialog"]],viewQuery:function(e,t){if(1&e&&a["\u0275\u0275viewQuery"](F,3),2&e){var n;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.importStepper=n.first)}},features:[a["\u0275\u0275ProvidersFeature"]([]),a["\u0275\u0275InheritDefinitionFeature"]],decls:94,vars:94,consts:[["fxLayout","row","color","accent"],["translate",""],["fxFlex",""],[3,"tb-help"],["mat-button","","mat-icon-button","","type","button",3,"disabled","click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"linear","selectedIndex"],["importStepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],[3,"disabled"],["formControlName","importData","required","",3,"label","allowedExtensions","accept","dropLabel"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","20px"],["mat-button","",3,"disabled","click"],["mat-raised-button","","color","accent",3,"disabled","click"],["fxLayout","column",3,"disabled"],[1,"mat-block"],["required","","formControlName","delim"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","column","fxLayoutGap","12px"],["formControlName","isHeader"],["formControlName","isUpdate"],["fxLayout","row wrap","fxLayoutAlign","space-between center"],["fxLayout","row wrap","fxLayoutGap","20px"],["formControlName","columnsParam",3,"entityType"],["color","warn","mode","determinate",1,"tb-import-progress",3,"value"],["fxLayout","column"],["class","mat-body-1",4,"ngIf"],["color","warn","mode","indeterminate"],[3,"value"],[1,"mat-body-1"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form"),a["\u0275\u0275elementStart"](1,"mat-toolbar",0),a["\u0275\u0275elementStart"](2,"h2",1),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",2),a["\u0275\u0275element"](5,"div",3),a["\u0275\u0275elementStart"](6,"button",4),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](7,"mat-icon",5),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,B,1,0,"mat-progress-bar",6),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275elementStart"](11,"div",7),a["\u0275\u0275elementStart"](12,"mat-vertical-stepper",8,9),a["\u0275\u0275elementStart"](14,"mat-step",10),a["\u0275\u0275elementStart"](15,"form",11),a["\u0275\u0275template"](16,M,2,3,"ng-template",12),a["\u0275\u0275elementStart"](17,"fieldset",13),a["\u0275\u0275pipe"](18,"async"),a["\u0275\u0275element"](19,"tb-file-input",14),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275pipe"](21,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"div",15),a["\u0275\u0275elementStart"](23,"button",16),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](24,"async"),a["\u0275\u0275text"](25),a["\u0275\u0275pipe"](26,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](27,"button",17),a["\u0275\u0275listener"]("click",function(){return t.nextStep(2)}),a["\u0275\u0275pipe"](28,"async"),a["\u0275\u0275text"](29),a["\u0275\u0275pipe"](30,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](31,"mat-step",10),a["\u0275\u0275elementStart"](32,"form",11),a["\u0275\u0275template"](33,P,2,3,"ng-template",12),a["\u0275\u0275elementStart"](34,"fieldset",18),a["\u0275\u0275pipe"](35,"async"),a["\u0275\u0275elementStart"](36,"mat-form-field",19),a["\u0275\u0275elementStart"](37,"mat-label",1),a["\u0275\u0275text"](38,"import.csv-delimiter"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](39,"mat-select",20),a["\u0275\u0275template"](40,D,2,2,"mat-option",21),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](41,"div",22),a["\u0275\u0275elementStart"](42,"mat-checkbox",23),a["\u0275\u0275text"](43),a["\u0275\u0275pipe"](44,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](45,"mat-checkbox",24),a["\u0275\u0275text"](46),a["\u0275\u0275pipe"](47,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](48,"div",25),a["\u0275\u0275elementStart"](49,"button",16),a["\u0275\u0275listener"]("click",function(){return t.previousStep()}),a["\u0275\u0275pipe"](50,"async"),a["\u0275\u0275text"](51),a["\u0275\u0275pipe"](52,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](53,"div",26),a["\u0275\u0275elementStart"](54,"button",16),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](55,"async"),a["\u0275\u0275text"](56),a["\u0275\u0275pipe"](57,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](58,"button",17),a["\u0275\u0275listener"]("click",function(){return t.nextStep(3)}),a["\u0275\u0275pipe"](59,"async"),a["\u0275\u0275text"](60),a["\u0275\u0275pipe"](61,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](62,"mat-step",10),a["\u0275\u0275elementStart"](63,"form",11),a["\u0275\u0275template"](64,k,2,3,"ng-template",12),a["\u0275\u0275element"](65,"tb-table-columns-assignment",27),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](66,"div",25),a["\u0275\u0275elementStart"](67,"button",16),a["\u0275\u0275listener"]("click",function(){return t.previousStep()}),a["\u0275\u0275pipe"](68,"async"),a["\u0275\u0275text"](69),a["\u0275\u0275pipe"](70,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](71,"div",26),a["\u0275\u0275elementStart"](72,"button",16),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](73,"async"),a["\u0275\u0275text"](74),a["\u0275\u0275pipe"](75,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](76,"button",17),a["\u0275\u0275listener"]("click",function(){return t.nextStep(4)}),a["\u0275\u0275pipe"](77,"async"),a["\u0275\u0275text"](78),a["\u0275\u0275pipe"](79,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](80,"mat-step"),a["\u0275\u0275template"](81,_,2,3,"ng-template",12),a["\u0275\u0275element"](82,"mat-progress-bar",28),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](83,"mat-step"),a["\u0275\u0275template"](84,L,2,3,"ng-template",12),a["\u0275\u0275elementStart"](85,"div",29),a["\u0275\u0275template"](86,N,2,3,"p",30),a["\u0275\u0275template"](87,R,2,3,"p",30),a["\u0275\u0275template"](88,U,2,3,"p",30),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](89,"div",15),a["\u0275\u0275elementStart"](90,"button",17),a["\u0275\u0275listener"]("click",function(){return t.nextStep(6)}),a["\u0275\u0275pipe"](91,"async"),a["\u0275\u0275text"](92),a["\u0275\u0275pipe"](93,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.importTitle),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("tb-help","entitiesImport"),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("disabled",t.isImportData),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,44,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("linear",!0)("selectedIndex",t.selectedIndex),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("stepControl",t.selectFileFormGroup),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",t.selectFileFormGroup),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](18,46,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](20,48,t.importFileLabel)),a["\u0275\u0275propertyInterpolate"]("dropLabel",a["\u0275\u0275pipeBind1"](21,50,"import.drop-file-csv")),a["\u0275\u0275property"]("allowedExtensions","csv,txt")("accept",".csv,application/csv,text/csv,.txt,text/plain"),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](24,52,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](26,54,"action.cancel")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](28,56,t.isLoading$)||t.selectFileFormGroup.invalid||!t.selectFileFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](30,58,"action.continue")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("stepControl",t.importParametersFormGroup),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",t.importParametersFormGroup),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](35,60,t.isLoading$)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngForOf",t.delimiters),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](44,62,"import.csv-first-line-header")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](47,64,"import.csv-update-data")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](50,66,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](52,68,"action.back")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](55,70,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](57,72,"action.cancel")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](59,74,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](61,76,"action.continue")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("stepControl",t.columnTypesFormGroup),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",t.columnTypesFormGroup),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("entityType",t.entityType),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](68,78,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](70,80,"action.back")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](73,82,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](75,84,"action.cancel")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](77,86,t.isLoading$)||t.columnTypesFormGroup.invalid||!t.columnTypesFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](79,88,"action.continue")),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("value",t.progressCreate),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",(null==t.statistical?null:t.statistical.create)&&(null==t.statistical?null:t.statistical.create.entity)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",(null==t.statistical?null:t.statistical.update)&&(null==t.statistical?null:t.statistical.update.entity)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",(null==t.statistical?null:t.statistical.error)&&(null==t.statistical?null:t.statistical.error.entity)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](91,90,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](93,92,"action.ok")))},directives:[o["\u0275angular_packages_forms_forms_ba"],o.NgControlStatusGroup,o.NgForm,h.MatToolbar,g.f,f.TranslateDirective,g.b,A.a,b.MatButton,y.MatIcon,v.NgIf,r.MatDialogContent,C.MatVerticalStepper,C.MatStep,o.FormGroupDirective,C.MatStepLabel,x.a,o.NgControlStatus,o.FormControlName,o.RequiredValidator,g.e,g.g,w.MatFormField,w.MatLabel,S.MatSelect,v.NgForOf,E.MatCheckbox,I.a,O.MatProgressBar,T.MatOption],pipes:[v.AsyncPipe,f.TranslatePipe],styles:["[_nghost-%COMP%]     .mat-dialog-content .mat-vertical-content form{padding-bottom:12px}[_nghost-%COMP%]     .mat-dialog-content .mat-vertical-stepper-header{pointer-events:none!important}[_nghost-%COMP%]     .mat-dialog-content .tb-import-progress{margin:7px 0}"]}),t}(s.a);0,void 0},XOa3:function(e,t,n){"use strict";var i,a,r;n.d(t,"c",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r}),n.d(t,"e",function(){return o}),n.d(t,"d",function(){return s}),function(e){e[e.TENANT=0]="TENANT",e[e.ENTITY=1]="ENTITY",e[e.USER=2]="USER",e[e.CUSTOMER=3]="CUSTOMER"}(i||(i={})),function(e){e.ADDED="ADDED",e.DELETED="DELETED",e.UPDATED="UPDATED",e.ATTRIBUTES_UPDATED="ATTRIBUTES_UPDATED",e.ATTRIBUTES_DELETED="ATTRIBUTES_DELETED",e.RPC_CALL="RPC_CALL",e.CREDENTIALS_UPDATED="CREDENTIALS_UPDATED",e.ASSIGNED_TO_CUSTOMER="ASSIGNED_TO_CUSTOMER",e.UNASSIGNED_FROM_CUSTOMER="UNASSIGNED_FROM_CUSTOMER",e.ACTIVATED="ACTIVATED",e.SUSPENDED="SUSPENDED",e.CREDENTIALS_READ="CREDENTIALS_READ",e.ATTRIBUTES_READ="ATTRIBUTES_READ",e.RELATION_ADD_OR_UPDATE="RELATION_ADD_OR_UPDATE",e.RELATION_DELETED="RELATION_DELETED",e.RELATIONS_DELETED="RELATIONS_DELETED",e.ALARM_ACK="ALARM_ACK",e.ALARM_CLEAR="ALARM_CLEAR",e.LOGIN="LOGIN",e.LOGOUT="LOGOUT",e.LOCKOUT="LOCKOUT",e.ASSIGNED_FROM_TENANT="ASSIGNED_FROM_TENANT",e.ASSIGNED_TO_TENANT="ASSIGNED_TO_TENANT",e.PROVISION_SUCCESS="PROVISION_SUCCESS",e.PROVISION_FAILURE="PROVISION_FAILURE",e.TIMESERIES_UPDATED="TIMESERIES_UPDATED",e.TIMESERIES_DELETED="TIMESERIES_DELETED",e.ASSIGNED_TO_EDGE="ASSIGNED_TO_EDGE",e.UNASSIGNED_FROM_EDGE="UNASSIGNED_FROM_EDGE"}(a||(a={})),function(e){e.SUCCESS="SUCCESS",e.FAILURE="FAILURE"}(r||(r={}));var o=new Map([[a.ADDED,"audit-log.type-added"],[a.DELETED,"audit-log.type-deleted"],[a.UPDATED,"audit-log.type-updated"],[a.ATTRIBUTES_UPDATED,"audit-log.type-attributes-updated"],[a.ATTRIBUTES_DELETED,"audit-log.type-attributes-deleted"],[a.RPC_CALL,"audit-log.type-rpc-call"],[a.CREDENTIALS_UPDATED,"audit-log.type-credentials-updated"],[a.ASSIGNED_TO_CUSTOMER,"audit-log.type-assigned-to-customer"],[a.UNASSIGNED_FROM_CUSTOMER,"audit-log.type-unassigned-from-customer"],[a.ACTIVATED,"audit-log.type-activated"],[a.SUSPENDED,"audit-log.type-suspended"],[a.CREDENTIALS_READ,"audit-log.type-credentials-read"],[a.ATTRIBUTES_READ,"audit-log.type-attributes-read"],[a.RELATION_ADD_OR_UPDATE,"audit-log.type-relation-add-or-update"],[a.RELATION_DELETED,"audit-log.type-relation-delete"],[a.RELATIONS_DELETED,"audit-log.type-relations-delete"],[a.ALARM_ACK,"audit-log.type-alarm-ack"],[a.ALARM_CLEAR,"audit-log.type-alarm-clear"],[a.LOGIN,"audit-log.type-login"],[a.LOGOUT,"audit-log.type-logout"],[a.LOCKOUT,"audit-log.type-lockout"],[a.ASSIGNED_FROM_TENANT,"audit-log.type-assigned-from-tenant"],[a.ASSIGNED_TO_TENANT,"audit-log.type-assigned-to-tenant"],[a.PROVISION_SUCCESS,"audit-log.type-provision-success"],[a.PROVISION_FAILURE,"audit-log.type-provision-failure"],[a.TIMESERIES_UPDATED,"audit-log.type-timeseries-updated"],[a.TIMESERIES_DELETED,"audit-log.type-timeseries-deleted"],[a.ASSIGNED_TO_EDGE,"audit-log.type-assigned-to-edge"],[a.UNASSIGNED_FROM_EDGE,"audit-log.type-unassigned-from-edge"]]),s=new Map([[r.SUCCESS,"audit-log.status-success"],[r.FAILURE,"audit-log.status-failure"]])},XW0v:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("U3y+"),a=function(e){this.entityType=i.b.TENANT_PROFILE,this.id=e}},Xbih:function(e,t,n){"use strict";n.d(t,"a",function(){return Ue});var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=n("OiFK"),s=n("Vurf"),l=n("wtyh"),c=n("//Q6"),d=function(){function e(e){this.dashboardCtx=e,this.widgetIds=[],this.loaded=!1}return e.prototype.size=function(){return this.widgetIds.length},e.prototype.isLoading=function(){return!this.loaded},e.prototype.isEmpty=function(){return this.loaded&&0===this.widgetIds.length},e.prototype.setWidgetIds=function(e){this.widgetIds=e,this.loaded=!0},e.prototype.addWidgetId=function(e){this.widgetIds.push(e)},e.prototype.removeWidgetId=function(e){var t=this.widgetIds.indexOf(e);return t>-1&&(this.widgetIds.splice(t,1),!0)},e.prototype[Symbol.iterator]=function(){var e=0,t=this.widgetIds,n=this.dashboardCtx.getDashboard();return{next:function(i){if(e<t.length){var a=t[e++];return{done:!1,value:n.configuration.widgets[a]}}return{done:!0,value:null}}}},e.prototype.widgetByIndex=function(e){var t=this.widgetIds[e];return t?this.widgetById(t):null},e.prototype.widgetById=function(e){return this.dashboardCtx.getDashboard().configuration.widgets[e]},e}(),u=n("he9t"),p=n("C/rb"),m=n("0lYY"),f=n("AytR"),h=n("zp9Z"),g=n("S+vS"),A=n("21Fy"),b=n("Xk9D"),y=n("LRne"),v=n("4j5O"),C=n("YnEf"),x=n("BOYq"),w=n("FBAY"),S=n("EWcq"),E=n("LwFc"),I=n("fDYr"),O=n("aMoz"),T=n("6opy"),F=n("oPR/"),B=n("Absi"),M=n("9HAa"),P=n("HvOk"),D=n("rDax"),k=n("+rOU"),_=n("0Dj+"),L=n("xzJA"),j=n("T9Vw"),N=n("z0mp"),R=n("l7P3"),U=n("0MNC"),V=n("tyNb"),Q=n("3Pt+"),G=n("0IaG"),H=n("sYmb"),K=n("jhN1"),q=n("XiUz"),z=n("8m5z"),W=n("ofXK"),X=n("znSr"),$=n("WEPN"),J=n("dmmb"),Y=n("bTqV"),Z=n("Qu3c"),ee=n("NFeN"),te=n("CUDX"),ne=n("k81w"),ie=n("x7Md"),ae=n("wIJ8"),re=n("uxh+"),oe=n("XhcP"),se=n("0AoA"),le=n("efJA"),ce=n("kmnG"),de=n("qFsG"),ue=n("8RXW"),pe=n("aYVl"),me=n("kRCp"),fe=n("bdDX"),he=["dashboardContainer"],ge=["tbEditWidget"],Ae=["dashboardWidgetSelect"];function be(e,t){1&e&&a["\u0275\u0275element"](0,"tb-user-menu",35)}function ye(e,t){if(1&e&&a["\u0275\u0275element"](0,"img",36),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("src",n.dashboardLogo,a["\u0275\u0275sanitizeUrl"])}}function ve(e,t){1&e&&a["\u0275\u0275element"](0,"tb-user-menu",37)}var Ce=function(e){return{color:e}};function xe(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"section",38),a["\u0275\u0275elementStart"](1,"h3",39),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"mat-form-field",40),a["\u0275\u0275elementStart"](4,"mat-label",41),a["\u0275\u0275text"](5,"dashboard.title"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"input",42),a["\u0275\u0275listener"]("ngModelChange",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().dashboard.title=e}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](7,Ce,i.dashboard.configuration.settings.titleColor)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",!i.isEdit&&i.displayTitle()),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](i.dashboard.title),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",i.isEdit),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](9,Ce,i.dashboard.configuration.settings.titleColor)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](11,Ce,i.dashboard.configuration.settings.titleColor))("ngModel",i.dashboard.title)}}var we=function(e,t,n){return{minWidth:e,maxWidth:t,height:n,borderLeft:"none"}};function Se(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-drawer",43),a["\u0275\u0275listener"]("openedChange",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().rightLayoutOpened=e}),a["\u0275\u0275element"](1,"tb-dashboard-layout",44),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"](),r=a["\u0275\u0275reference"](2);a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction3"](11,we,i.rightLayoutWidth(),i.rightLayoutWidth(),i.rightLayoutHeight()))("@.disabled",!i.isMobile)("mode",i.isMobile?"over":"side")("opened",i.rightLayoutOpened),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("dashboardCheatSheet",r)("layoutCtx",i.layouts.right.layoutCtx)("dashboardCtx",i.dashboardCtx)("isEdit",i.isEdit)("isEditingWidget",i.isEditingWidget)("isMobile",i.forceDashboardMobileMode)("widgetEditMode",i.widgetEditMode)}}function Ee(e,t){if(1&e&&a["\u0275\u0275element"](0,"tb-footer-fab-buttons",45),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("fxShow",!n.isAddingWidget&&n.isEdit&&!n.widgetEditMode)("footerFabButtons",n.addWidgetFabButtons)}}var Ie=function(e){return{"tb-hide":e}};function Oe(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",46),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().saveDashboard()}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementStart"](3,"mat-icon"),a["\u0275\u0275text"](4,"done"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](2,5,"action.apply-changes")),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](7,Ie,!i.isEdit||i.isAddingWidget))("disabled",a["\u0275\u0275pipeBind1"](1,3,i.isLoading$))}}function Te(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",46),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().toggleDashboardEditMode()}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275text"](4,"++ "),a["\u0275\u0275elementStart"](5,"mat-icon"),a["\u0275\u0275text"](6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](3,8,i.isEdit?"action.decline-changes":"action.enter-edit-mode")),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](10,Ie,i.isAddingWidget||a["\u0275\u0275pipeBind1"](1,4,i.isLoading$)))("disabled",a["\u0275\u0275pipeBind1"](2,6,i.isLoading$)),a["\u0275\u0275advance"](6),a["\u0275\u0275textInterpolate"](i.isEdit?"close":"edit")}}function Fe(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"tb-details-panel",47),a["\u0275\u0275listener"]("closeDetails",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onEditWidgetClosed()})("toggleDetailsEditMode",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onRevertWidgetEdit()})("applyDetails",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().saveWidget()}),a["\u0275\u0275elementStart"](1,"div",48),a["\u0275\u0275element"](2,"div",49),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"tb-edit-widget",50,51),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275reference"](4),r=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("headerTitle",null==r.editingWidget?null:r.editingWidget.config.title),a["\u0275\u0275propertyInterpolate"]("headerSubtitle",r.editingWidgetSubtitle),a["\u0275\u0275property"]("isReadOnly",!1)("isAlwaysEdit",!0)("theForm",i.widgetFormGroup),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("tb-help",r.helpLinkIdForWidgetType()),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("dashboard",r.dashboard)("aliasController",r.dashboardCtx.aliasController)("widgetEditMode",r.widgetEditMode)("widget",r.editingWidget)("widgetLayout",r.editingWidgetLayout)}}function Be(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",58),a["\u0275\u0275elementStart"](1,"tb-widgets-bundle-search",59),a["\u0275\u0275listener"]("ngModelChange",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).searchBundle=e})("ngModelChange",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).searchBundle=e}),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](2,2,null!=i.dashboardWidgetSelectComponent&&i.dashboardWidgetSelectComponent.widgetsBundle?"widget.search":"widgets-bundle.search")),a["\u0275\u0275property"]("ngModel",i.searchBundle)}}function Me(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",61),a["\u0275\u0275listener"]("click",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](3).editWidgetsTypesToDisplay(e)}),a["\u0275\u0275pipe"](1,"translate"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3,"filter_list"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}2&e&&a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](1,1,"widget.filter"))}function Pe(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",48),a["\u0275\u0275template"](1,Me,4,3,"button",60),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",(null==n.dashboardWidgetSelectComponent?null:n.dashboardWidgetSelectComponent.widgetTypes.size)>1)}}function De(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"tb-dashboard-widget-select",62,63),a["\u0275\u0275listener"]("widgetsBundleSelected",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).widgetBundleSelected()})("widgetSelected",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).addWidgetFromType(e)}),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("aliasController",i.dashboardCtx.aliasController)("searchBundle",i.searchBundle)("filterWidgetTypes",i.filterWidgetTypes)}}function ke(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"tb-details-panel",52),a["\u0275\u0275listener"]("closeDetails",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onAddWidgetClosed()})("closeSearch",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onCloseSearchBundle()}),a["\u0275\u0275pipe"](1,"translate"),a["\u0275\u0275elementStart"](2,"div",53),a["\u0275\u0275elementStart"](3,"button",54),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().clearSelectedWidgetBundle()}),a["\u0275\u0275elementStart"](4,"mat-icon"),a["\u0275\u0275text"](5,"arrow_back"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](6,Be,3,4,"div",55),a["\u0275\u0275template"](7,Pe,2,1,"div",56),a["\u0275\u0275template"](8,De,2,3,"tb-dashboard-widget-select",57),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("headerTitle",i.isAddingWidget?a["\u0275\u0275pipeBind2"](1,8,null!=i.dashboardWidgetSelectComponent&&i.dashboardWidgetSelectComponent.widgetsBundle?"dashboard.select-widget-value":"widget.select-widgets-bundle",null==i.dashboardWidgetSelectComponent?null:i.dashboardWidgetSelectComponent.widgetsBundle):""),a["\u0275\u0275property"]("isShowSearch",!0)("isReadOnly",!0)("isEdit",!1),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",!(!i.isAddingWidget||null==i.dashboardWidgetSelectComponent||!i.dashboardWidgetSelectComponent.widgetsBundle)),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",i.isAddingWidget),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",i.isAddingWidget),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",i.isAddingWidget)}}var _e=function(e){return{"mobile-app":e}},Le=function(e,t){return{"tb-dashboard-toolbar-opened":e,"tb-dashboard-toolbar-closed":t}},je=function(e,t,n,i){return{"is-fullscreen":e,"tb-dashboard-toolbar-opened":t,"tb-dashboard-toolbar-animated":n,"tb-dashboard-toolbar-closed":i}},Ne=function(e){return{"tb-shrinked":e}},Re=function(e,t){return{width:e,height:t}},Ue=function(e){function t(t,n,i,a,r,o,s,l,c,d,m,h,g,A,b,y,v,C,x,w,S,E,I){var O=e.call(this,t)||this;return O.store=t,O.window=n,O.breakpointObserver=i,O.route=a,O.router=r,O.utils=o,O.dashboardUtils=s,O.authService=l,O.entityService=c,O.dialogService=d,O.widgetComponentService=m,O.dashboardService=h,O.itembuffer=g,O.importExport=A,O.mobileService=b,O.fb=y,O.dialog=v,O.translate=C,O.ngZone=x,O.overlay=w,O.viewContainerRef=S,O.cd=E,O.sanitizer=I,O.authState=Object(p.a)(O.store),O.authUser=O.authState.authUser,O.embedded=!1,O.hideToolbarValue=!1,O.syncStateWithQueryParam=!0,O.iframeMode=O.utils.iframeMode,O.forceFullscreen=O.authState.forceFullscreen,O.isMobileApp=O.mobileService.isMobileApp(),O.isFullscreen=!1,O.isEdit=!1,O.isEditingWidget=!1,O.isEditingWidgetClosed=!0,O.isMobile=!O.breakpointObserver.isMatched(u.g["gt-sm"]),O.forceDashboardMobileMode=!1,O.isAddingWidget=!1,O.isAddingWidgetClosed=!0,O.searchBundle="",O.filterWidgetTypes=null,O.isToolbarOpened=!1,O.isToolbarOpenedAnimate=!1,O.isRightLayoutOpened=!1,O.allowedEntityTypes=null,O.editingWidget=null,O.editingWidgetLayout=null,O.editingWidgetOriginal=null,O.editingWidgetLayoutOriginal=null,O.editingWidgetSubtitle=null,O.editingLayoutCtx=null,O.thingsboardVersion=f.a.tbVersion,O.setStateDashboardId=!1,O.defaultDashboardLogo="assets/rangdong_logo.jpg",O.dashboardCtx={instanceId:O.utils.guid(),getDashboard:function(){return O.dashboard},dashboardTimewindow:null,state:null,stateController:null,aliasController:null,runChangeDetection:O.runChangeDetection.bind(O)},O.layouts={main:{show:!1,layoutCtx:{id:"main",widgets:null,widgetLayouts:{},gridSettings:{},ignoreLoading:!0,ctrl:null,dashboardCtrl:O}},right:{show:!1,layoutCtx:{id:"right",widgets:null,widgetLayouts:{},gridSettings:{},ignoreLoading:!0,ctrl:null,dashboardCtrl:O}}},O.addWidgetFabButtons={fabTogglerName:"dashboard.add-widget",fabTogglerIcon:"add",buttons:[{name:"dashboard.create-new-widget",icon:"insert_drive_file",onAction:function(e){O.addWidget(e)}},{name:"dashboard.import-widget",icon:"file_upload",onAction:function(e){O.importWidget(e)}}]},O.rxSubscriptions=new Array,O}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"hideToolbar",{get:function(){return(this.hideToolbarValue||this.hideToolbarSetting())&&!this.isEdit},set:function(e){this.hideToolbarValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"toolbarOpened",{get:function(){return!this.widgetEditMode&&!this.hideToolbar&&(this.toolbarAlwaysOpen()||this.isToolbarOpened||this.isEdit||this.showRightLayoutSwitch())},set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightLayoutOpened",{get:function(){return!this.isMobile||this.isRightLayoutOpened},set:function(e){},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){var e=this;this.rxSubscriptions.push(this.route.data.subscribe(function(t){e.embedded?(t.dashboard=e.dashboardUtils.validateAndUpdateDashboard(e.dashboard),t.currentDashboardId=e.dashboard.id?e.dashboard.id.id:null,t.widgetEditMode=!1,t.singlePageMode=!1):t.currentDashboardId=e.route.snapshot.params.dashboardId,e.init(t),e.runChangeDetection()})),this.rxSubscriptions.push(this.route.queryParamMap.subscribe(function(t){t.has("reload")&&(e.dashboardCtx.aliasController.updateAliases(),setTimeout(function(){e.mobileService.handleDashboardStateName(e.dashboardCtx.stateController.getCurrentStateName()),e.mobileService.onDashboardLoaded(e.layouts.right.show,e.isRightLayoutOpened)}))})),this.rxSubscriptions.push(this.breakpointObserver.observe(u.g["gt-sm"]).subscribe(function(t){e.isMobile=!t.matches})),this.isMobileApp&&this.mobileService.registerToggleLayoutFunction(function(){setTimeout(function(){e.toggleLayouts(),e.cd.detectChanges()})})},t.prototype.init=function(e){var t=this;if(this.reset(),this.dashboard=e.dashboard,!this.embedded&&this.dashboard.id&&(this.setStateDashboardId=!0),this.route.snapshot.queryParamMap.has("hideToolbar")&&(this.hideToolbar="true"===this.route.snapshot.queryParamMap.get("hideToolbar")),this.route.snapshot.queryParamMap.has("embedded")&&(this.embedded="true"===this.route.snapshot.queryParamMap.get("embedded")),this.currentDashboardId=e.currentDashboardId,this.route.snapshot.params.customerId?(this.currentCustomerId=this.route.snapshot.params.customerId,this.currentDashboardScope="customer"):(this.currentDashboardScope=this.authUser.authority===h.a.TENANT_ADMIN?"tenant":"customer",this.currentCustomerId=this.authUser.customerId),this.dashboardConfiguration=this.dashboard.configuration,this.dashboardCtx.dashboardTimewindow=this.dashboardConfiguration.timewindow,this.layouts.main.layoutCtx.widgets=new d(this.dashboardCtx),this.layouts.right.layoutCtx.widgets=new d(this.dashboardCtx),this.widgetEditMode=e.widgetEditMode,this.singlePageMode=e.singlePageMode,this.dashboardCtx.aliasController=new b.a(this.utils,this.entityService,this.translate,function(){return t.dashboardCtx.stateController},this.dashboardConfiguration.entityAliases,this.dashboardConfiguration.filters),this.widgetEditMode){this.window.parent.postMessage(JSON.stringify({type:"widgetEditModeInited"}),"*")}this.allowedEntityTypes=this.entityService.prepareAllowedEntityTypesList(null,!0)},t.prototype.reset=function(){this.dashboard=null,this.dashboardConfiguration=null,this.dashboardLogoCache=void 0,this.prevDashboard=null,this.widgetEditMode=!1,this.singlePageMode=!1,this.isFullscreen=!1,this.isEdit=!1,this.isEditingWidget=!1,this.isEditingWidgetClosed=!0,this.forceDashboardMobileMode=!1,this.isAddingWidget=!1,this.isAddingWidgetClosed=!0,this.isToolbarOpened=!1,this.isToolbarOpenedAnimate=!1,this.isRightLayoutOpened=!1,this.editingWidget=null,this.editingWidgetLayout=null,this.editingWidgetOriginal=null,this.editingWidgetLayoutOriginal=null,this.editingWidgetSubtitle=null,this.editingLayoutCtx=null,this.currentDashboardId=null,this.currentCustomerId=null,this.currentDashboardScope=null,this.setStateDashboardId=!1,this.dashboardCtx.state=null},t.prototype.ngOnDestroy=function(){this.isMobileApp&&this.mobileService.unregisterToggleLayoutFunction(),this.rxSubscriptions.forEach(function(e){e.unsubscribe()}),this.rxSubscriptions.length=0},t.prototype.runChangeDetection=function(){var e=this;this.ngZone.run(function(){e.cd.detectChanges()})},t.prototype.openToolbar=function(){this.isToolbarOpenedAnimate=!0,this.isToolbarOpened=!0},t.prototype.closeToolbar=function(){this.isToolbarOpenedAnimate=!0,this.isToolbarOpened=!1},t.prototype.showCloseToolbar=function(){return!this.toolbarAlwaysOpen()&&!this.isEdit&&!this.showRightLayoutSwitch()},t.prototype.hideFullscreenButton=function(){return this.widgetEditMode||this.iframeMode||this.forceFullscreen||this.singlePageMode},t.prototype.toolbarAlwaysOpen=function(){return!this.dashboard.configuration.settings||!Object(c.n)(this.dashboard.configuration.settings.toolbarAlwaysOpen)||this.dashboard.configuration.settings.toolbarAlwaysOpen},t.prototype.hideToolbarSetting=function(){return!(!this.dashboard.configuration.settings||!Object(c.n)(this.dashboard.configuration.settings.hideToolbar))&&this.dashboard.configuration.settings.hideToolbar},t.prototype.displayTitle=function(){return!(!this.dashboard.configuration.settings||!Object(c.n)(this.dashboard.configuration.settings.showTitle))&&this.dashboard.configuration.settings.showTitle},t.prototype.displayExport=function(){return!this.dashboard.configuration.settings||!Object(c.n)(this.dashboard.configuration.settings.showDashboardExport)||this.dashboard.configuration.settings.showDashboardExport},t.prototype.displayUpdateDashboardImage=function(){return!this.dashboard.configuration.settings||!Object(c.n)(this.dashboard.configuration.settings.showUpdateDashboardImage)||this.dashboard.configuration.settings.showUpdateDashboardImage},t.prototype.displayDashboardTimewindow=function(){return!this.dashboard.configuration.settings||!Object(c.n)(this.dashboard.configuration.settings.showDashboardTimewindow)||this.dashboard.configuration.settings.showDashboardTimewindow},t.prototype.displayDashboardsSelect=function(){return!this.dashboard.configuration.settings||!Object(c.n)(this.dashboard.configuration.settings.showDashboardsSelect)||this.dashboard.configuration.settings.showDashboardsSelect},t.prototype.displayEntitiesSelect=function(){return!this.dashboard.configuration.settings||!Object(c.n)(this.dashboard.configuration.settings.showEntitiesSelect)||this.dashboard.configuration.settings.showEntitiesSelect},t.prototype.displayFilters=function(){return!this.dashboard.configuration.settings||!Object(c.n)(this.dashboard.configuration.settings.showFilters)||this.dashboard.configuration.settings.showFilters},t.prototype.showDashboardLogo=function(){return!(!this.dashboard.configuration.settings||!Object(c.n)(this.dashboard.configuration.settings.showDashboardLogo))&&(this.dashboard.configuration.settings.showDashboardLogo&&(this.forceFullscreen||this.singlePageMode||this.isFullscreen))},Object.defineProperty(t.prototype,"dashboardLogo",{get:function(){if(!this.dashboardLogoCache){var e=this.dashboard.configuration.settings.dashboardLogoUrl||this.defaultDashboardLogo;this.dashboardLogoCache=this.sanitizer.bypassSecurityTrustUrl(e)}return this.dashboardLogoCache},enumerable:!1,configurable:!0}),t.prototype.showRightLayoutSwitch=function(){return this.isMobile&&!this.isMobileApp&&this.layouts.right.show},t.prototype.toggleLayouts=function(){this.isRightLayoutOpened=!this.isRightLayoutOpened,this.mobileService.onDashboardRightLayoutChanged(this.isRightLayoutOpened)},t.prototype.openRightLayout=function(){this.isRightLayoutOpened=!0,this.mobileService.onDashboardRightLayoutChanged(this.isRightLayoutOpened)},t.prototype.mainLayoutWidth=function(){return this.isEditingWidget&&"main"===this.editingLayoutCtx.id?"100%":this.layouts.right.show&&!this.isMobile?"50%":"100%"},t.prototype.mainLayoutHeight=function(){return this.isEditingWidget&&"main"!==this.editingLayoutCtx.id?"0px":"100%"},t.prototype.rightLayoutWidth=function(){return this.isEditingWidget&&"right"===this.editingLayoutCtx.id||this.isMobile?"100%":"50%"},t.prototype.rightLayoutHeight=function(){return this.isEditingWidget&&"right"!==this.editingLayoutCtx.id?"0px":"100%"},t.prototype.isPublicUser=function(){return this.authUser.isPublic},t.prototype.isTenantAdmin=function(){return this.authUser.authority===h.a.TENANT_ADMIN},t.prototype.isSystemAdmin=function(){return this.authUser.authority===h.a.SYS_ADMIN},t.prototype.exportDashboard=function(e){e&&e.stopPropagation(),this.importExport.exportDashboard(this.currentDashboardId)},t.prototype.openEntityAliases=function(e){var t=this;e&&e.stopPropagation(),this.dialog.open(S.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entityAliases:Object(c.e)(this.dashboard.configuration.entityAliases),widgets:this.dashboardUtils.getWidgetsArray(this.dashboard),isSingleEntityAlias:!1,allowedEntityTypes:this.allowedEntityTypes}}).afterClosed().subscribe(function(e){e&&(t.dashboard.configuration.entityAliases=e,t.entityAliasesUpdated())})},t.prototype.openFilters=function(e){var t=this;e&&e.stopPropagation(),this.dialog.open(P.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{filters:Object(c.e)(this.dashboard.configuration.filters),widgets:this.dashboardUtils.getWidgetsArray(this.dashboard),isSingleFilter:!1}}).afterClosed().subscribe(function(e){e&&(t.dashboard.configuration.filters=e,t.filtersUpdated())})},t.prototype.openDashboardSettings=function(e){var t=this;e&&e.stopPropagation();var n=null,i=this.dashboardUtils.isSingleLayoutDashboard(this.dashboard);i&&(n=Object(c.e)(this.dashboard.configuration.states[i.state].layouts[i.layout].gridSettings)),this.dialog.open(F.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{settings:Object(c.e)(this.dashboard.configuration.settings),gridSettings:n}}).afterClosed().subscribe(function(e){if(e){t.dashboard.configuration.settings=e.settings,t.dashboardLogoCache=void 0;var n=e.gridSettings;if(n){var a=t.dashboard.configuration.states[i.state].layouts[i.layout];t.dashboardUtils.updateLayoutSettings(a,n),t.updateLayouts()}}})},t.prototype.manageDashboardStates=function(e){var t=this;e&&e.stopPropagation(),this.dialog.open(B.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{states:Object(c.e)(this.dashboard.configuration.states)}}).afterClosed().subscribe(function(e){e&&t.updateStates(e)})},t.prototype.manageDashboardLayouts=function(e){var t=this;e&&e.stopPropagation(),this.dialog.open(O.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{layouts:Object(c.e)(this.dashboard.configuration.states[this.dashboardCtx.state].layouts)}}).afterClosed().subscribe(function(e){e&&t.updateDashboardLayouts(e)})},t.prototype.updateDashboardLayouts=function(e){this.dashboardUtils.setLayouts(this.dashboard,this.dashboardCtx.state,e),this.updateLayouts()},t.prototype.updateStates=function(e){this.dashboard.configuration.states=e,this.dashboardUtils.removeUnusedWidgets(this.dashboard);var t=this.dashboardCtx.state;this.dashboard.configuration.states[t]||(t=this.dashboardUtils.getRootStateId(this.dashboardConfiguration.states)),this.openDashboardState(t)},t.prototype.importWidget=function(e){var t=this;e&&e.stopPropagation(),this.importExport.importWidget(this.dashboard,this.dashboardCtx.state,this.selectTargetLayout.bind(this),this.entityAliasesUpdated.bind(this),this.filtersUpdated.bind(this)).subscribe(function(e){if(e){var n=e.widget,i=e.layoutId;t.layouts[i].layoutCtx.widgets.addWidgetId(n.id),t.runChangeDetection()}})},t.prototype.currentDashboardIdChanged=function(e){this.widgetEditMode||(this.dashboardCtx.stateController.cleanupPreservedStates(),"customer"===this.currentDashboardScope&&this.authUser.authority===h.a.TENANT_ADMIN?this.router.navigateByUrl("customers/"+this.currentCustomerId+"/dashboards/"+e):this.singlePageMode?this.router.navigateByUrl("dashboard/"+e):this.router.navigateByUrl("dashboards/"+e))},t.prototype.toggleDashboardEditMode=function(){this.setEditMode(!this.isEdit,!0)},t.prototype.saveDashboard=function(){this.setEditMode(!1,!1),this.notifyDashboardUpdated()},t.prototype.openDashboardState=function(e,t){var n=this,i=this.dashboardUtils.getStateLayoutsData(this.dashboard,e);i&&(this.dashboardCtx.state=e,this.dashboardCtx.aliasController.dashboardStateChanged(),this.isRightLayoutOpened=!!t,this.updateLayouts(i)),setTimeout(function(){n.mobileService.onDashboardLoaded(n.layouts.right.show,n.isRightLayoutOpened)})},t.prototype.updateLayouts=function(e){e||(e=this.dashboardUtils.getStateLayoutsData(this.dashboard,this.dashboardCtx.state));for(var t=0,n=Object.keys(this.layouts);t<n.length;t++){var i=n[t],a=this.layouts[i];if(e[i]){a.show=!0;var r=e[i];this.updateLayout(a,r)}else a.show=!1,this.updateLayout(a,{widgetIds:[],widgetLayouts:{},gridSettings:null})}},t.prototype.updateLayout=function(e,t){t.gridSettings&&(e.layoutCtx.gridSettings=t.gridSettings),e.layoutCtx.widgets.setWidgetIds(t.widgetIds),e.layoutCtx.widgetLayouts=t.widgetLayouts,e.show&&e.layoutCtx.ctrl&&e.layoutCtx.ctrl.reload(),e.layoutCtx.ignoreLoading=!0},t.prototype.setEditMode=function(e,t){this.isEdit=e,this.isEdit?(this.dashboardCtx.stateController.preserveState(),this.prevDashboard=Object(c.e)(this.dashboard)):this.widgetEditMode?t&&(this.dashboard=this.prevDashboard,this.dashboardLogoCache=void 0):(this.resetHighlight(),t?(this.dashboard=this.prevDashboard,this.dashboardLogoCache=void 0,this.dashboardConfiguration=this.dashboard.configuration,this.dashboardCtx.dashboardTimewindow=this.dashboardConfiguration.timewindow,this.entityAliasesUpdated(),this.filtersUpdated(),this.updateLayouts()):this.dashboard.configuration.timewindow=this.dashboardCtx.dashboardTimewindow)},t.prototype.resetHighlight=function(){for(var e=0,t=Object.keys(this.layouts);e<t.length;e++){var n=t[e];this.layouts[n].layoutCtx&&this.layouts[n].layoutCtx.ctrl&&this.layouts[n].layoutCtx.ctrl.resetHighlight()}},t.prototype.entityAliasesUpdated=function(){this.dashboardCtx.aliasController.updateEntityAliases(this.dashboard.configuration.entityAliases)},t.prototype.filtersUpdated=function(){this.dashboardCtx.aliasController.updateFilters(this.dashboard.configuration.filters)},t.prototype.notifyDashboardUpdated=function(){if(this.widgetEditMode){var e=this.layouts.main.layoutCtx.widgets.widgetByIndex(0),t=this.layouts.main.layoutCtx.widgetLayouts[e.id];e.sizeX=t.sizeX,e.sizeY=t.sizeY;var n={type:"widgetEditUpdated",data:e};this.window.parent.postMessage(JSON.stringify(n),"*")}else this.dashboardService.saveDashboard(this.dashboard).subscribe()},t.prototype.helpLinkIdForWidgetType=function(){var e="widgetsConfig";return this.editingWidget&&this.editingWidget.type&&(e=m.n.get(this.editingWidget.type).configHelpLinkId),e},t.prototype.addWidget=function(e,t){e&&e.stopPropagation(),this.isAddingWidget=!0,this.addingLayoutCtx=t},t.prototype.onAddWidgetClosed=function(){this.isAddingWidget=!1},t.prototype.detailsDrawerOpenedStart=function(){this.isEditingWidget?this.isEditingWidgetClosed=!1:this.isAddingWidget&&(this.isAddingWidgetClosed=!1)},t.prototype.detailsDrawerClosed=function(){this.isEditingWidgetClosed=!0,this.isAddingWidgetClosed=!0},t.prototype.addWidgetToLayout=function(e,t){this.dashboardUtils.addWidgetToLayout(this.dashboard,this.dashboardCtx.state,t,e),this.layouts[t].layoutCtx.widgets.addWidgetId(e.id),this.runChangeDetection()},t.prototype.selectTargetLayout=function(){var e=this.dashboardConfiguration.states[this.dashboardCtx.state].layouts,t=Object.keys(e);return t.length>1?this.dialog.open(T.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"]}).afterClosed():Object(y.a)(t[0])},t.prototype.addWidgetToDashboard=function(e){var t=this;this.addingLayoutCtx?(this.addWidgetToLayout(e,this.addingLayoutCtx.id),this.addingLayoutCtx=null):this.selectTargetLayout().subscribe(function(n){n&&t.addWidgetToLayout(e,n)})},t.prototype.addWidgetFromType=function(e){var t=this;this.onAddWidgetClosed(),this.searchBundle="",this.widgetComponentService.getWidgetInfo(e.bundleAlias,e.typeAlias,e.isSystemType).subscribe(function(n){var i=JSON.parse(n.defaultConfig);i.title="New "+n.widgetName,i.datasources=[],Object(c.o)(i.alarmSource)&&(i.alarmSource={type:m.a.entity,dataKeys:i.alarmSource.dataKeys||[]});var a={isSystemType:e.isSystemType,bundleAlias:e.bundleAlias,typeAlias:n.alias,type:n.type,title:"New widget",image:null,description:null,sizeX:n.sizeX,sizeY:n.sizeY,config:i,row:0,col:0};n.typeParameters.useCustomDatasources?t.addWidgetToDashboard(a):t.dialog.open(I.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{dashboard:t.dashboard,aliasController:t.dashboardCtx.aliasController,widget:a,widgetInfo:n}}).afterClosed().subscribe(function(e){e&&t.addWidgetToDashboard(e)})})},t.prototype.onRevertWidgetEdit=function(){this.editWidgetComponent.widgetFormGroup.dirty&&(this.editWidgetComponent.widgetFormGroup.markAsPristine(),this.editingWidget=Object(c.e)(this.editingWidgetOriginal),this.editingWidgetLayout=Object(c.e)(this.editingWidgetLayoutOriginal))},t.prototype.saveWidget=function(){var e=this;this.editWidgetComponent.widgetFormGroup.markAsPristine();var t=Object(c.e)(this.editingWidget),n=Object(c.e)(this.editingWidgetLayout),i=this.editingWidgetOriginal.id;this.dashboardConfiguration.widgets[i]=t,this.editingWidgetOriginal=t,this.editingWidgetLayoutOriginal=n,this.editingLayoutCtx.widgetLayouts[t.id]=n,setTimeout(function(){e.editingLayoutCtx.ctrl.highlightWidget(t.id,0)},0)},t.prototype.onEditWidgetClosed=function(){this.editingWidgetOriginal=null,this.editingWidget=null,this.editingWidgetLayoutOriginal=null,this.editingWidgetLayout=null,this.editingLayoutCtx=null,this.editingWidgetSubtitle=null,this.isEditingWidget=!1,this.resetHighlight(),this.forceDashboardMobileMode=!1},t.prototype.editWidget=function(e,t,n){if(e.stopPropagation(),this.editingWidgetOriginal===n)this.onEditWidgetClosed();else{var i=!this.forceDashboardMobileMode;if(this.editingWidgetOriginal=n,this.editingWidgetLayoutOriginal=t.widgetLayouts[n.id],this.editingWidget=Object(c.e)(this.editingWidgetOriginal),this.editingWidgetLayout=Object(c.e)(this.editingWidgetLayoutOriginal),this.editingLayoutCtx=t,this.editingWidgetSubtitle=this.widgetComponentService.getInstantWidgetInfo(this.editingWidget).widgetName,this.forceDashboardMobileMode=!0,this.isEditingWidget=!0,t){var a=i?400:300;setTimeout(function(){t.ctrl.highlightWidget(n.id,a)},i?350:0)}}},t.prototype.copyWidget=function(e,t,n){this.itembuffer.copyWidget(this.dashboard,this.dashboardCtx.state,t.id,n)},t.prototype.copyWidgetReference=function(e,t,n){this.itembuffer.copyWidgetReference(this.dashboard,this.dashboardCtx.state,t.id,n)},t.prototype.pasteWidget=function(e,t,n){var i=this;this.itembuffer.pasteWidget(this.dashboard,this.dashboardCtx.state,t.id,n,this.entityAliasesUpdated.bind(this),this.filtersUpdated.bind(this)).subscribe(function(e){t.widgets.addWidgetId(e.id),i.runChangeDetection()})},t.prototype.pasteWidgetReference=function(e,t,n){var i=this;this.itembuffer.pasteWidgetReference(this.dashboard,this.dashboardCtx.state,t.id,n).subscribe(function(e){t.widgets.addWidgetId(e.id),i.runChangeDetection()})},t.prototype.removeWidget=function(e,t,n){var i=this,a=n.config.title;a&&0!==a.length||(a=this.widgetComponentService.getInstantWidgetInfo(n).widgetName);var r=this.translate.instant("widget.remove-widget-title",{widgetTitle:a}),o=this.translate.instant("widget.remove-widget-text");this.dialogService.confirm(r,o,this.translate.instant("action.no"),this.translate.instant("action.yes")).subscribe(function(e){e&&t.widgets.removeWidgetId(n.id)&&(i.dashboardUtils.removeWidgetFromLayout(i.dashboard,i.dashboardCtx.state,t.id,n.id),i.runChangeDetection())})},t.prototype.exportWidget=function(e,t,n){e.stopPropagation(),this.importExport.exportWidget(this.dashboard,this.dashboardCtx.state,t.id,n)},t.prototype.widgetClicked=function(e,t,n){this.isEditingWidget&&this.editWidget(e,t,n)},t.prototype.widgetMouseDown=function(e,t,n){this.isEdit&&!this.isEditingWidget&&t.ctrl.selectWidget(n.id,0)},t.prototype.prepareDashboardContextMenu=function(e){var t=[];return!this.isEdit||this.isEditingWidget||this.widgetEditMode||(t.push({action:this.openDashboardSettings.bind(this),enabled:!0,value:"dashboard.settings",icon:"settings"}),t.push({action:this.openEntityAliases.bind(this),enabled:!0,value:"entity.aliases",icon:"devices_other"}),t.push({action:function(t){e.ctrl.pasteWidget(t)},enabled:this.itembuffer.hasWidget(),value:"action.paste",icon:"content_paste",shortcut:"M-V"}),t.push({action:function(t){e.ctrl.pasteWidgetReference(t)},enabled:this.itembuffer.canPasteWidgetReference(this.dashboard,this.dashboardCtx.state,e.id),value:"action.paste-reference",icon:"content_paste",shortcut:"M-I"})),t},t.prototype.prepareWidgetContextMenu=function(e,t){var n=this,i=[];return this.isEdit&&!this.isEditingWidget&&(i.push({action:function(t,i){n.editWidget(t,e,i)},enabled:!0,value:"action.edit",icon:"edit"}),this.widgetEditMode||(i.push({action:function(t,i){n.copyWidget(t,e,i)},enabled:!0,value:"action.copy",icon:"content_copy",shortcut:"M-C"}),i.push({action:function(t,i){n.copyWidgetReference(t,e,i)},enabled:!0,value:"action.copy-reference",icon:"content_copy",shortcut:"M-R"}),i.push({action:function(t,i){n.removeWidget(t,e,i)},enabled:!0,value:"action.delete",icon:"clear",shortcut:"M-X"}))),i},t.prototype.widgetBundleSelected=function(){this.searchBundle=""},t.prototype.clearSelectedWidgetBundle=function(){this.searchBundle="",this.dashboardWidgetSelectComponent.widgetsBundle=null},t.prototype.editWidgetsTypesToDisplay=function(e){var t=this;e&&e.stopPropagation();var n=e.target||e.currentTarget,i=new D.OverlayConfig;i.backdropClass="cdk-overlay-transparent-backdrop",i.hasBackdrop=!0;i.positionStrategy=this.overlay.position().flexibleConnectedTo(n).withPositions([{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}]);var r=this.overlay.create(i);r.backdropClick().subscribe(function(){r.dispose()});var o=this.dashboardWidgetSelectComponent.filterWidgetTypes,s=Array.from(this.dashboardWidgetSelectComponent.widgetTypes.values()).map(function(e){return{type:e,display:null===o||o.includes(e)}}),l=[{provide:_.a,useValue:{types:s,typesUpdated:function(e){t.filterWidgetTypes=e.filter(function(e){return e.display}).map(function(e){return e.type}),t.cd.markForCheck()}}},{provide:D.OverlayRef,useValue:r}],c=a.Injector.create({parent:this.viewContainerRef.injector,providers:l});r.attach(new k.ComponentPortal(_.b,this.viewContainerRef,c)),this.cd.markForCheck()},t.prototype.onCloseSearchBundle=function(){this.searchBundle=""},t.prototype.updateDashboardImage=function(e){var t=this;e&&e.stopPropagation(),this.dialog.open(N.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{dashboardId:this.dashboard.id,currentImage:this.dashboard.image,dashboardElement:this.dashboardContainer.nativeElement}}).afterClosed().subscribe(function(e){e&&(t.dashboard.image=e.image)})},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](R.Store),a["\u0275\u0275directiveInject"](l.b),a["\u0275\u0275directiveInject"](U.BreakpointObserver),a["\u0275\u0275directiveInject"](V.ActivatedRoute),a["\u0275\u0275directiveInject"](V.Router),a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](v.a),a["\u0275\u0275directiveInject"](s.a),a["\u0275\u0275directiveInject"](A.a),a["\u0275\u0275directiveInject"](g.a),a["\u0275\u0275directiveInject"](x.a),a["\u0275\u0275directiveInject"](C.a),a["\u0275\u0275directiveInject"](w.a),a["\u0275\u0275directiveInject"](M.a),a["\u0275\u0275directiveInject"](j.a),a["\u0275\u0275directiveInject"](Q.FormBuilder),a["\u0275\u0275directiveInject"](G.MatDialog),a["\u0275\u0275directiveInject"](H.TranslateService),a["\u0275\u0275directiveInject"](a.NgZone),a["\u0275\u0275directiveInject"](D.Overlay),a["\u0275\u0275directiveInject"](a.ViewContainerRef),a["\u0275\u0275directiveInject"](a.ChangeDetectorRef),a["\u0275\u0275directiveInject"](K.DomSanitizer))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-dashboard-page"]],viewQuery:function(e,t){if(1&e&&(a["\u0275\u0275viewQuery"](he,1),a["\u0275\u0275viewQuery"](ge,1),a["\u0275\u0275viewQuery"](Ae,1)),2&e){var n=void 0;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.dashboardContainer=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.editWidgetComponent=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.dashboardWidgetSelectComponent=n.first)}},inputs:{embedded:"embedded",currentState:"currentState",hideToolbar:"hideToolbar",syncStateWithQueryParam:"syncStateWithQueryParam",dashboard:"dashboard"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:78,vars:108,consts:[["fxFlex","","tb-fullscreen","",1,"tb-dashboard-page","mat-content",2,"padding-top","150px",3,"ngClass","fullscreen"],["cheatSheetComponent",""],[1,"tb-dashboard-toolbar",3,"ngClass"],[3,"fxShow","forceFullscreen","toolbarOpened","triggerClick"],["fxLayout","column","fxLayout.gt-sm","row","fxLayoutAlign","center stretch","fxLayoutAlign.gt-sm","space-between center",1,"tb-dashboard-action-panels"],["fxFlex","auto","fxLayout","row-reverse","fxLayoutAlign.gt-sm","end center","fxLayoutAlign","space-between center","fxLayoutGap","12px",1,"tb-dashboard-action-panel",3,"fxHide"],["fxHide.gt-sm","","displayUserInfo","true",4,"ngIf"],["fxFlex.lt-md","","fxLayout","row","fxLayoutAlign.gt-sm","start center","fxLayoutAlign","end center","fxLayoutGap","12px",3,"fxShow"],["mat-icon-button","","matTooltipPosition","below",3,"matTooltip","click"],["fxFlex.lt-md","",3,"statesControllerId","dashboardCtrl","dashboardId","isMobile","state","currentState","syncStateWithQueryParam","states"],["aria-label","dashboard_logo","class","dashboard_logo",3,"src",4,"ngIf"],["fxFlex","1 0 auto","fxLayout","row-reverse","fxLayoutAlign.gt-sm","start center","fxLayoutAlign","space-between center","fxLayoutGap","12px",1,"tb-dashboard-action-panel"],["mat-icon-button","","matTooltipPosition","below",1,"close-action",3,"fxShow","matTooltip","click"],["fxHide.lt-md","","displayUserInfo","true",4,"ngIf"],["mat-icon-button","","matTooltipPosition","below",3,"fxShow","matTooltip","click"],["isToolbar","true","direction","left","tooltipPosition","below","aggregation","true","timezone","true",3,"fxShow","isEdit","ngModel","ngModelChange"],["tooltipPosition","below",3,"fxShow","aliasController"],[3,"fxShow","ngModel","customerId","dashboardsScope","ngModelChange"],[1,"tb-dashboard-container","tb-absolute-fill",3,"ngClass"],["dashboardContainer",""],["hasBackdrop","false",1,"tb-absolute-fill","tb-dashboard-drawer-container"],["fxLayout","column","fxLayoutAlign","center start"],["class","tb-dashboard-title",3,"ngStyle",4,"ngIf"],["fxFlex","",1,"tb-dashboard-layouts",3,"ngClass"],["id","tb-right-layout","disableClose","true","position","end",3,"ngStyle","mode","opened","openedChange",4,"ngIf"],["id","tb-main-layout",3,"fxShow","ngStyle"],[3,"dashboardCheatSheet","layoutCtx","dashboardCtx","isEdit","isEditingWidget","isMobile","widgetEditMode"],["data-html2canvas-ignore","","fxLayout","row","fxLayoutAlign","start end",1,"layout-wrap","tb-footer-buttons"],["relative","",3,"fxShow","footerFabButtons",4,"ngIf"],["mat-fab","","color","accent","class","tb-btn-footer","matTooltipPosition","above",3,"ngClass","disabled","matTooltip","click",4,"ngIf"],["data-html2canvas-ignore","",1,"tb-powered-by-footer",3,"ngStyle"],["href","https://rangdong.com.vn/","target","_blank"],["mode","over","position","end",1,"tb-details-drawer",3,"opened","openedStart","closed"],["fxFlex","",3,"headerTitle","headerSubtitle","isReadOnly","isAlwaysEdit","theForm","closeDetails","toggleDetailsEditMode","applyDetails",4,"ngIf"],["fxFlex","","headerHeightPx","64","backgroundColor","#cfd8dc",3,"headerTitle","isShowSearch","isReadOnly","isEdit","closeDetails","closeSearch",4,"ngIf"],["fxHide.gt-sm","","displayUserInfo","true"],["aria-label","dashboard_logo",1,"dashboard_logo",3,"src"],["fxHide.lt-md","","displayUserInfo","true"],[1,"tb-dashboard-title",3,"ngStyle"],[3,"fxShow"],[1,"mat-block",3,"fxShow"],["translate","",3,"ngStyle"],["matInput","","required","","name","title",1,"tb-dashboard-title",3,"ngStyle","ngModel","ngModelChange"],["id","tb-right-layout","disableClose","true","position","end",3,"ngStyle","mode","opened","openedChange"],[2,"height","100%",3,"dashboardCheatSheet","layoutCtx","dashboardCtx","isEdit","isEditingWidget","isMobile","widgetEditMode"],["relative","",3,"fxShow","footerFabButtons"],["mat-fab","","color","accent","matTooltipPosition","above",1,"tb-btn-footer",3,"ngClass","disabled","matTooltip","click"],["fxFlex","",3,"headerTitle","headerSubtitle","isReadOnly","isAlwaysEdit","theForm","closeDetails","toggleDetailsEditMode","applyDetails"],[1,"details-buttons"],[3,"tb-help"],[3,"dashboard","aliasController","widgetEditMode","widget","widgetLayout"],["tbEditWidget",""],["fxFlex","","headerHeightPx","64","backgroundColor","#cfd8dc",3,"headerTitle","isShowSearch","isReadOnly","isEdit","closeDetails","closeSearch"],[1,"prefix-title-buttons",2,"height","28px","margin-right","12px",3,"fxShow"],["mat-icon-button","","type","button",1,"tb-mat-28",3,"click"],["class","search-pane","fxLayout","row",4,"ngIf"],["class","details-buttons",4,"ngIf"],[3,"aliasController","searchBundle","filterWidgetTypes","widgetsBundleSelected","widgetSelected",4,"ngIf"],["fxLayout","row",1,"search-pane"],["fxFlex","",3,"ngModel","placeholder","ngModelChange"],["mat-button","","mat-icon-button","","type","button","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],["mat-button","","mat-icon-button","","type","button","matTooltipPosition","above",3,"matTooltip","click"],[3,"aliasController","searchBundle","filterWidgetTypes","widgetsBundleSelected","widgetSelected"],["dashboardWidgetSelect",""]],template:function(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275element"](1,"tb-hotkeys-cheatsheet",null,1),a["\u0275\u0275elementStart"](3,"section",2),a["\u0275\u0275elementStart"](4,"tb-dashboard-toolbar",3),a["\u0275\u0275listener"]("triggerClick",function(){return t.openToolbar()}),a["\u0275\u0275elementStart"](5,"div",4),a["\u0275\u0275elementStart"](6,"div",5),a["\u0275\u0275template"](7,be,1,0,"tb-user-menu",6),a["\u0275\u0275elementStart"](8,"div",7),a["\u0275\u0275elementStart"](9,"button",8),a["\u0275\u0275listener"]("click",function(e){return t.manageDashboardStates(e)}),a["\u0275\u0275pipe"](10,"translate"),a["\u0275\u0275elementStart"](11,"mat-icon"),a["\u0275\u0275text"](12,"layers"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](13,"button",8),a["\u0275\u0275listener"]("click",function(e){return t.manageDashboardLayouts(e)}),a["\u0275\u0275pipe"](14,"translate"),a["\u0275\u0275elementStart"](15,"mat-icon"),a["\u0275\u0275text"](16,"view_compact"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](17,"tb-states-component",9),a["\u0275\u0275template"](18,ye,1,1,"img",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"div",11),a["\u0275\u0275elementStart"](20,"button",12),a["\u0275\u0275listener"]("click",function(){return t.closeToolbar()}),a["\u0275\u0275pipe"](21,"translate"),a["\u0275\u0275elementStart"](22,"mat-icon"),a["\u0275\u0275text"](23,"arrow_forward"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](24,ve,1,0,"tb-user-menu",13),a["\u0275\u0275elementStart"](25,"button",14),a["\u0275\u0275listener"]("click",function(){return t.toggleLayouts()}),a["\u0275\u0275pipe"](26,"translate"),a["\u0275\u0275elementStart"](27,"mat-icon"),a["\u0275\u0275text"](28),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](29,"button",14),a["\u0275\u0275listener"]("click",function(){return t.isFullscreen=!t.isFullscreen}),a["\u0275\u0275pipe"](30,"translate"),a["\u0275\u0275elementStart"](31,"mat-icon"),a["\u0275\u0275text"](32),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](33,"button",14),a["\u0275\u0275listener"]("click",function(e){return t.updateDashboardImage(e)}),a["\u0275\u0275pipe"](34,"translate"),a["\u0275\u0275elementStart"](35,"mat-icon"),a["\u0275\u0275text"](36,"wallpaper"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](37,"button",14),a["\u0275\u0275listener"]("click",function(e){return t.exportDashboard(e)}),a["\u0275\u0275pipe"](38,"translate"),a["\u0275\u0275elementStart"](39,"mat-icon"),a["\u0275\u0275text"](40,"file_download"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](41,"tb-timewindow",15),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.dashboardCtx.dashboardTimewindow=e}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](42,"tb-filters-edit",16),a["\u0275\u0275element"](43,"tb-aliases-entity-select",16),a["\u0275\u0275elementStart"](44,"button",14),a["\u0275\u0275listener"]("click",function(e){return t.openFilters(e)}),a["\u0275\u0275pipe"](45,"translate"),a["\u0275\u0275elementStart"](46,"mat-icon"),a["\u0275\u0275text"](47,"filter_list"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](48,"button",14),a["\u0275\u0275listener"]("click",function(e){return t.openEntityAliases(e)}),a["\u0275\u0275pipe"](49,"translate"),a["\u0275\u0275elementStart"](50,"mat-icon"),a["\u0275\u0275text"](51,"devices_other"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](52,"button",14),a["\u0275\u0275listener"]("click",function(e){return t.openDashboardSettings(e)}),a["\u0275\u0275pipe"](53,"translate"),a["\u0275\u0275elementStart"](54,"mat-icon"),a["\u0275\u0275text"](55,"settings"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](56,"tb-dashboard-select",17),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.currentDashboardId=e})("ngModelChange",function(){return t.currentDashboardIdChanged(t.currentDashboardId)}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](57,"section",18,19),a["\u0275\u0275elementStart"](59,"mat-drawer-container",20),a["\u0275\u0275elementStart"](60,"mat-drawer-content",21),a["\u0275\u0275template"](61,xe,7,13,"section",22),a["\u0275\u0275elementStart"](62,"mat-drawer-container",23),a["\u0275\u0275template"](63,Se,2,15,"mat-drawer",24),a["\u0275\u0275elementStart"](64,"mat-drawer-content",25),a["\u0275\u0275element"](65,"tb-dashboard-layout",26),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](66,"section",27),a["\u0275\u0275template"](67,Ee,1,2,"tb-footer-fab-buttons",28),a["\u0275\u0275template"](68,Oe,5,9,"button",29),a["\u0275\u0275template"](69,Te,7,12,"button",29),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](70,"section",30),a["\u0275\u0275elementStart"](71,"span"),a["\u0275\u0275text"](72,"Powered by "),a["\u0275\u0275elementStart"](73,"a",31),a["\u0275\u0275text"](74),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](75,"mat-drawer",32),a["\u0275\u0275listener"]("openedStart",function(){return t.detailsDrawerOpenedStart()})("closed",function(){return t.detailsDrawerClosed()}),a["\u0275\u0275template"](76,Fe,5,11,"tb-details-panel",33),a["\u0275\u0275template"](77,ke,9,11,"tb-details-panel",34),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275reference"](2);a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](91,_e,t.isMobileApp&&!t.isEdit))("fullscreen",t.widgetEditMode||t.iframeMode||t.forceFullscreen||t.isFullscreen),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction2"](93,Le,t.toolbarOpened,!t.toolbarOpened)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",!t.widgetEditMode&&!t.hideToolbar)("forceFullscreen",t.forceFullscreen)("toolbarOpened",t.toolbarOpened),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxHide",t.isMobileApp&&!t.isEdit),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!t.isPublicUser()&&t.forceFullscreen),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",t.isEdit),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](10,71,"dashboard.manage-states")),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](14,73,"layout.manage")),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("statesControllerId",t.isEdit?"default":t.dashboardConfiguration.settings.stateControllerId)("dashboardCtrl",t)("dashboardId",t.setStateDashboardId?t.dashboard.id.id:"")("isMobile",t.isMobile)("state",t.dashboardCtx.state)("currentState",t.currentState)("syncStateWithQueryParam",t.syncStateWithQueryParam)("states",t.dashboardConfiguration.states),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.showDashboardLogo()),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](21,75,"dashboard.close-toolbar")),a["\u0275\u0275property"]("fxShow",t.showCloseToolbar()),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",!t.isPublicUser()&&t.forceFullscreen),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](26,77,t.isRightLayoutOpened?"dashboard.hide-details":"dashboard.show-details")),a["\u0275\u0275property"]("fxShow",t.showRightLayoutSwitch()),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.isRightLayoutOpened?"arrow_back":"menu"),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](30,79,t.isFullscreen?"fullscreen.exit":"fullscreen.expand")),a["\u0275\u0275property"]("fxShow",!t.hideFullscreenButton()),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.isFullscreen?"fullscreen_exit":"fullscreen"),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](34,81,"dashboard.update-image")),a["\u0275\u0275property"]("fxShow",t.currentDashboardId&&!t.isEdit&&!t.isMobileApp&&t.isTenantAdmin()&&t.displayUpdateDashboardImage()),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](38,83,"dashboard.export")),a["\u0275\u0275property"]("fxShow",t.currentDashboardId&&!t.isMobileApp&&(t.isEdit||t.displayExport())),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("fxShow",t.isEdit||t.displayDashboardTimewindow())("isEdit",t.isEdit)("ngModel",t.dashboardCtx.dashboardTimewindow),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",!t.isEdit&&t.displayFilters())("aliasController",t.dashboardCtx.aliasController),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",!t.isEdit&&t.displayEntitiesSelect())("aliasController",t.dashboardCtx.aliasController),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](45,85,"filter.filters")),a["\u0275\u0275property"]("fxShow",t.isEdit),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](49,87,"entity.aliases")),a["\u0275\u0275property"]("fxShow",t.isEdit),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](53,89,"dashboard.settings")),a["\u0275\u0275property"]("fxShow",t.isEdit),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("fxShow",!t.isEdit&&!t.widgetEditMode&&!t.embedded&&t.displayDashboardsSelect())("ngModel",t.currentDashboardId)("customerId",t.currentCustomerId)("dashboardsScope",t.currentDashboardScope),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction4"](96,je,t.forceFullscreen,t.toolbarOpened,t.isToolbarOpenedAnimate,!t.toolbarOpened)),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",!t.widgetEditMode),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](101,Ne,t.isEditingWidget)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.layouts.right.show),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",t.layouts.main.show)("ngStyle",a["\u0275\u0275pureFunction2"](103,Re,t.mainLayoutWidth(),t.mainLayoutHeight())),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("dashboardCheatSheet",n)("layoutCtx",t.layouts.main.layoutCtx)("dashboardCtx",t.dashboardCtx)("isEdit",t.isEdit)("isEditingWidget",t.isEditingWidget)("isMobile",t.forceDashboardMobileMode)("widgetEditMode",t.widgetEditMode),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!t.embedded&&!t.isMobileApp),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",(t.isTenantAdmin()||t.isSystemAdmin())&&!t.forceFullscreen&&!t.embedded&&!t.isMobileApp),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",(t.isTenantAdmin()||t.isSystemAdmin())&&!t.forceFullscreen&&!t.embedded&&!t.isMobileApp),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](106,Ce,t.dashboard.configuration.settings.titleColor)),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate1"]("iot platform Rang Dong.",t.thingsboardVersion,""),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("opened",t.isEditingWidget||t.isAddingWidget),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!t.isEditingWidgetClosed),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!t.isAddingWidgetClosed&&!t.widgetEditMode)}},directives:[q.b,z.a,W.NgClass,X.b,$.a,J.a,X.d,q.f,q.e,q.g,W.NgIf,Y.MatButton,Z.MatTooltip,ee.MatIcon,te.a,ne.a,Q.NgControlStatus,Q.NgModel,ie.a,ae.a,re.a,oe.MatDrawerContainer,oe.MatDrawerContent,W.NgStyle,X.e,se.a,oe.MatDrawer,le.a,ce.MatFormField,ce.MatLabel,H.TranslateDirective,de.MatInput,Q.DefaultValueAccessor,Q.RequiredValidator,ue.a,pe.a,me.a,E.a,fe.a,L.a],pipes:[H.TranslatePipe,W.AsyncPipe],styles:["tb-dashboard-page{display:flex;width:100%;height:100%}div.tb-dashboard-page.mat-content{overflow:hidden;background-color:#eee}div.tb-dashboard-page section.tb-dashboard-title{position:relative;padding-left:20px;max-height:60px}div.tb-dashboard-page section.tb-dashboard-title mat-form-field .mat-form-field-infix{width:100%}div.tb-dashboard-page section.tb-dashboard-title input.tb-dashboard-title{height:38px;font-size:2rem;font-weight:500;letter-spacing:.005em}div.tb-dashboard-page section.tb-dashboard-toolbar{position:absolute;top:0;left:0;z-index:13;pointer-events:none}div.tb-dashboard-page section.tb-dashboard-toolbar .dashboard_logo{height:75%;margin-right:16px}div.tb-dashboard-page section.tb-dashboard-toolbar.tb-dashboard-toolbar-opened{right:0}div.tb-dashboard-page section.tb-dashboard-toolbar.tb-dashboard-toolbar-closed{right:18px;transition:right .3s cubic-bezier(.55,0,.55,.2) .2s}div.tb-dashboard-page .tb-dashboard-container.tb-dashboard-toolbar-opened.is-fullscreen{margin-top:84px}@media screen and (min-width:960px){div.tb-dashboard-page .tb-dashboard-container.tb-dashboard-toolbar-opened.is-fullscreen{margin-top:64px}}div.tb-dashboard-page .tb-dashboard-container.tb-dashboard-toolbar-opened:not(.is-fullscreen){margin-top:84px}@media screen and (min-width:960px){div.tb-dashboard-page .tb-dashboard-container.tb-dashboard-toolbar-opened:not(.is-fullscreen){margin-top:50px}}div.tb-dashboard-page .tb-dashboard-container.tb-dashboard-toolbar-opened:not(.is-fullscreen).tb-dashboard-toolbar-animated{transition:margin-top .3s cubic-bezier(.55,0,.55,.2)}div.tb-dashboard-page .tb-dashboard-container.tb-dashboard-toolbar-closed{margin-top:0}div.tb-dashboard-page .tb-dashboard-container.tb-dashboard-toolbar-closed.tb-dashboard-toolbar-animated{transition:margin-top .3s cubic-bezier(.55,0,.55,.2) .2s}div.tb-dashboard-page.mobile-app .tb-dashboard-container.tb-dashboard-toolbar-opened{margin-top:40px}div.tb-dashboard-page mat-drawer-container.tb-dashboard-drawer-container mat-drawer-container.tb-dashboard-layouts{width:100%}div.tb-dashboard-page mat-drawer-container.tb-dashboard-drawer-container mat-drawer-container.tb-dashboard-layouts.tb-shrinked{width:40%}@media screen and (min-width:960px){div.tb-dashboard-page mat-drawer-container.tb-dashboard-drawer-container mat-drawer.tb-details-drawer{width:85%!important}}@media screen and (min-width:1280px){div.tb-dashboard-page mat-drawer-container.tb-dashboard-drawer-container mat-drawer.tb-details-drawer{width:75%!important}}@media screen and (min-width:1920px){div.tb-dashboard-page mat-drawer-container.tb-dashboard-drawer-container mat-drawer.tb-details-drawer{width:60%!important}}div.tb-dashboard-page section.tb-powered-by-footer{position:absolute;right:25px;bottom:5px;z-index:30;pointer-events:none}div.tb-dashboard-page section.tb-powered-by-footer span{font-size:12px}div.tb-dashboard-page section.tb-powered-by-footer span a{font-weight:700;text-decoration:none;pointer-events:all;border:none}"],encapsulation:2,changeDetection:0}),t}(r.a);0,void 0},Xk9D:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var i=n("XNiG"),a=n("cp0P"),r=n("LRne"),o=n("jtHE"),s=n("0lYY"),l=n("//Q6"),c=n("MBk6"),d=n("5+tZ"),u=n("lJxs"),p=n("xw5a"),m=function(){function e(e,t,n,a,r,o){this.utils=e,this.entityService=t,this.translate=n,this.stateControllerHolder=a,this.origEntityAliases=r,this.origFilters=o,this.entityAliasesChangedSubject=new i.b,this.entityAliasesChanged=this.entityAliasesChangedSubject.asObservable(),this.filtersChangedSubject=new i.b,this.filtersChanged=this.filtersChangedSubject.asObservable(),this.entityAliasResolvedSubject=new i.b,this.entityAliasResolved=this.entityAliasResolvedSubject.asObservable(),this.resolvedAliases={},this.resolvedAliasesObservable={},this.resolvedAliasesToStateEntities={},this.entityAliases=Object(l.e)(this.origEntityAliases)||{},this.filters=Object(l.e)(this.origFilters)||{},this.userFilters={}}return e.prototype.updateEntityAliases=function(e){for(var t=[],n=0,i=Object.keys(e);n<i.length;n++){var a=e[c=i[n]],r=this.entityAliases[c];Object(l.r)(a,r)||(t.push(c),this.setAliasUnresolved(c))}for(var o=0,s=Object.keys(this.entityAliases);o<s.length;o++){var c;e[c=s[o]]||(t.push(c),this.setAliasUnresolved(c))}this.entityAliases=Object(l.e)(e),t.length&&this.entityAliasesChangedSubject.next(t)},e.prototype.updateFilters=function(e){for(var t=[],n=0,i=Object.keys(e);n<i.length;n++){var a=e[u=i[n]],r=this.filters[u];Object(l.r)(a,r)||t.push(u)}for(var o=0,s=Object.keys(this.filters);o<s.length;o++){e[u=s[o]]||t.push(u)}if(this.filters=Object(l.e)(e),t.length){for(var c=0,d=t;c<d.length;c++){var u=d[c];delete this.userFilters[u]}this.filtersChangedSubject.next(t)}},e.prototype.updateAliases=function(e){var t=this;if(!e){e=[];for(var n=0,i=Object.keys(this.resolvedAliases);n<i.length;n++){var r=i[n];e.push(r)}}for(var o=[],s=0,l=e;s<l.length;s++){r=l[s];this.setAliasUnresolved(r),o.push(this.getAliasInfo(r))}Object(a.a)(o).subscribe(function(){t.entityAliasesChangedSubject.next(e)})},e.prototype.dashboardStateChanged=function(){for(var e=[],t=0,n=Object.keys(this.resolvedAliasesToStateEntities);t<n.length;t++){var i=n[t],a=this.resolvedAliasesToStateEntities[i],r=this.stateControllerHolder().getEntityId(a.entityParamName),o=a.entityId;Object(l.r)(r,o)||(e.push(i),this.setAliasUnresolved(i))}e.length&&this.entityAliasesChangedSubject.next(e)},e.prototype.setAliasUnresolved=function(e){delete this.resolvedAliases[e],delete this.resolvedAliasesObservable[e],delete this.resolvedAliasesToStateEntities[e]},e.prototype.getEntityAliases=function(){return this.entityAliases},e.prototype.getFilters=function(){return this.filters},e.prototype.getFilterInfo=function(e){return this.userFilters[e]?this.userFilters[e]:this.filters[e]},e.prototype.getKeyFilters=function(e){var t=this.getFilterInfo(e);return t?Object(p.y)(t):[]},e.prototype.getEntityAliasId=function(e){for(var t=0,n=Object.keys(this.entityAliases);t<n.length;t++){var i=n[t];if(this.entityAliases[i].alias===e)return i}return null},e.prototype.getAliasInfo=function(e){var t=this,n=this.resolvedAliases[e];if(n)return Object(r.a)(n);if(this.resolvedAliasesObservable[e])return this.resolvedAliasesObservable[e];var i=new o.a;this.resolvedAliasesObservable[e]=i.asObservable();var a=this.entityAliases[e];if(!a){i.error(null);var s=this.resolvedAliasesObservable[e];return delete this.resolvedAliasesObservable[e],s}return this.entityService.resolveAlias(a,this.stateControllerHolder().getStateParams()).subscribe(function(n){t.resolvedAliases[e]=n,delete t.resolvedAliasesObservable[e],n.stateEntity&&(t.resolvedAliasesToStateEntities[e]={entityParamName:n.entityParamName,entityId:t.stateControllerHolder().getEntityId(n.entityParamName)}),t.entityAliasResolvedSubject.next(e),i.next(n),i.complete()},function(){i.error(null),delete t.resolvedAliasesObservable[e]}),(n=this.resolvedAliases[e])?Object(r.a)(n):this.resolvedAliasesObservable[e]},e.prototype.resolveSingleEntityInfo=function(e){var t=this;return this.getAliasInfo(e).pipe(Object(d.b)(function(e){return e.resolveMultiple?e.entityFilter?t.entityService.findSingleEntityInfoByEntityFilter(e.entityFilter,{ignoreLoading:!0,ignoreErrors:!0}):Object(r.a)(null):Object(r.a)(e.currentEntity)}))},e.prototype.resolveDatasource=function(e,t){var n=this;void 0===t&&(t=!1);var i=Object(l.e)(e);return i.type===s.a.entity||i.type===s.a.entityCount?(i.filterId&&(i.keyFilters=this.getKeyFilters(i.filterId)),i.entityAliasId?this.getAliasInfo(i.entityAliasId).pipe(Object(d.b)(function(e){return i.aliasName=e.alias,e.entityFilter?e.resolveMultiple?(i.entityFilter=e.entityFilter,t?n.entityService.findSingleEntityInfoByEntityFilter(e.entityFilter,{ignoreLoading:!0,ignoreErrors:!0}).pipe(Object(u.a)(function(e){return e&&Object(p.K)(i,e,!0),i})):Object(r.a)(i)):(e.currentEntity?Object(p.K)(i,e.currentEntity,!0):e.stateEntity&&(i.unresolvedStateEntity=!0,i.name="Unresolved",i.entityName="Unresolved"),Object(r.a)(i)):(i.unresolvedStateEntity=!0,i.name="Unresolved",i.entityName="Unresolved",Object(r.a)(i))})):i.entityId&&!i.entityFilter?(i.entityFilter={singleEntity:{id:i.entityId,entityType:i.entityType},type:c.a.singleEntity},Object(r.a)(i)):(i.aliasName=i.entityName,i.name=i.entityName,Object(r.a)(i))):Object(r.a)(i)},e.prototype.resolveAlarmSource=function(e){return this.resolveDatasource(e).pipe(Object(u.a)(function(e){var t;e.type===s.a.function&&(t=e.name&&e.name.length?e.name:s.a.function,e.name=t,e.aliasName=t,e.entityName=t);return e}))},e.prototype.resolveDatasources=function(e,t){var n=this,i=t?[e[0]]:e,r=new Array;return i.forEach(function(e){r.push(n.resolveDatasource(e))}),Object(a.a)(r).pipe(Object(u.a)(function(e){var i=0,a=0;return e.forEach(function(e){var r;e.type===s.a.function||e.type===s.a.entityCount?(e.name&&e.name.length?r=e.name:(e.type===s.a.function?i++:a++,r=n.translate.instant(s.f.get(e.type)),e.type===s.a.function&&i>1?r+=" "+i:e.type===s.a.entityCount&&a>1&&(r+=" "+a)),e.name=r,e.aliasName=r,e.entityName=r):t?e.pageLink=Object(l.e)(p.I):e.pageLink||(e.pageLink=Object(l.e)(p.p))}),e}))},e.prototype.getInstantAliasInfo=function(e){return this.resolvedAliases[e]},e.prototype.updateCurrentAliasEntity=function(e,t){var n=this.resolvedAliases[e];if(n){var i=n.currentEntity;Object(l.r)(t,i)||(n.currentEntity=t,this.entityAliasesChangedSubject.next([e]))}},e.prototype.updateUserFilter=function(e){var t=this.userFilters[e.id];t||(t=this.filters[e.id]),t&&!Object(l.r)(t,e)&&(this.userFilters[e.id]=e,this.filtersChangedSubject.next([e.id]))},e}()},YPhb:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("fXoL"),a=n("ofXK"),r=n("PCNd"),o=n("9Q2s"),s=n("10n/"),l=n("cNbA"),c=n("nYZa"),d=n("gd03"),u=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[a.CommonModule,r.a]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](u,{declarations:[o.a,s.a,l.a,c.a,d.a],imports:[a.CommonModule,r.a],exports:[o.a,s.a,l.a,c.a,d.a]})),0},Yhx1:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("//Q6"),s=n("c1Lj"),l=n("l7P3"),c=n("kmnG"),d=n("sYmb"),u=n("qFsG"),p=n("ofXK"),m=n("40Wt");function f(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.number-from-required")," "))}function h(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.phone-number-pattern-twilio")," "))}function g(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.twilio-account-sid-required")," "))}function A(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.twilio-account-token-required")," "))}var b=function(){function e(e,t){this.store=e,this.fb=t,this.phoneNumberPatternTwilio=s.d,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(r.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.twilioSmsProviderConfigurationFormGroup=this.fb.group({numberFrom:[null,[a.Validators.required,a.Validators.pattern(s.d)]],accountSid:[null,a.Validators.required],accountToken:[null,a.Validators.required]}),this.twilioSmsProviderConfigurationFormGroup.valueChanges.subscribe(function(){e.updateModel()})},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.twilioSmsProviderConfigurationFormGroup.disable({emitEvent:!1}):this.twilioSmsProviderConfigurationFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){Object(o.o)(e)&&this.twilioSmsProviderConfigurationFormGroup.patchValue(e,{emitEvent:!1})},e.prototype.updateModel=function(){var e=null;this.twilioSmsProviderConfigurationFormGroup.valid&&((e=this.twilioSmsProviderConfigurationFormGroup.value).type=s.a.TWILIO),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](l.Store),i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-twilio-sms-provider-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:20,vars:9,consts:[[2,"padding-bottom","16px",3,"formGroup"],[1,"mat-block"],["translate",""],["type","tel","required","","matInput","","formControlName","numberFrom",3,"pattern"],[4,"ngIf"],[3,"innerHTML"],["required","","matInput","","formControlName","accountSid"],["required","","type","password","autocomplete","new-password","matInput","","formControlName","accountToken"],["matSuffix",""]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"form",0),i["\u0275\u0275elementStart"](1,"mat-form-field",1),i["\u0275\u0275elementStart"](2,"mat-label",2),i["\u0275\u0275text"](3,"admin.number-from"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"input",3),i["\u0275\u0275template"](5,f,3,3,"mat-error",4),i["\u0275\u0275template"](6,h,3,3,"mat-error",4),i["\u0275\u0275element"](7,"mat-hint",5),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"mat-form-field",1),i["\u0275\u0275elementStart"](10,"mat-label",2),i["\u0275\u0275text"](11,"admin.twilio-account-sid"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](12,"input",6),i["\u0275\u0275template"](13,g,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"mat-form-field",1),i["\u0275\u0275elementStart"](15,"mat-label",2),i["\u0275\u0275text"](16,"admin.twilio-account-token"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](17,"input",7),i["\u0275\u0275element"](18,"tb-toggle-password",8),i["\u0275\u0275template"](19,A,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.twilioSmsProviderConfigurationFormGroup),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("pattern",t.phoneNumberPatternTwilio),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.twilioSmsProviderConfigurationFormGroup.get("numberFrom").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.twilioSmsProviderConfigurationFormGroup.get("numberFrom").hasError("pattern")),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("innerHTML",i["\u0275\u0275pipeBind1"](8,7,"admin.phone-number-hint-twilio"),i["\u0275\u0275sanitizeHtml"]),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",t.twilioSmsProviderConfigurationFormGroup.get("accountSid").hasError("required")),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",t.twilioSmsProviderConfigurationFormGroup.get("accountToken").hasError("required")))},directives:[a["\u0275angular_packages_forms_forms_ba"],a.NgControlStatusGroup,a.FormGroupDirective,c.MatFormField,c.MatLabel,d.TranslateDirective,u.MatInput,a.DefaultValueAccessor,a.RequiredValidator,a.NgControlStatus,a.FormControlName,a.PatternValidator,p.NgIf,c.MatHint,m.a,c.MatSuffix,c.MatError],pipes:[d.TranslatePipe],encapsulation:2}),e}();0,void 0},YjEJ:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("U3y+"),a=function(e){this.entityType=i.b.DASHBOARD,this.id=e}},Z9d0:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return l});var i=n("mrSG"),a=n("fXoL"),r=n("jtHE"),o=n("ofXK"),s=function(){function e(){}return e.prototype.ngOnDestroy=function(){},e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({}),e}();0,void 0;var l=function(){function e(e,t){this.compiler=e,this.injector=t,this.dynamicComponentModulesMap=new Map}return e.prototype.createDynamicComponentFactory=function(e,t,l){var c=this,d=new r.a;return Promise.all([n.e(2),n.e(5)]).then(n.bind(null,"1uSB")).then(function(){var n=c.createDynamicComponent(e,t),r=[o.CommonModule];l&&(r=Object(i.h)(r,l));var u=Object(a.NgModule)({declarations:[n],imports:r})(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.d)(t,e),t}(s));try{c.compiler.compileModuleAsync(u).then(function(e){var t=e.create(c.injector),i=t.componentFactoryResolver.resolveComponentFactory(n);c.dynamicComponentModulesMap.set(i,{moduleRef:t,moduleType:e.moduleType}),d.next(i),d.complete()}).catch(function(e){d.error(e)})}catch(p){d.error(p)}}),d.asObservable()},e.prototype.destroyDynamicComponentFactory=function(e){var t=this.dynamicComponentModulesMap.get(e);t&&(t.moduleRef.destroy(),this.compiler.clearCacheFor(t.moduleType),this.dynamicComponentModulesMap.delete(e))},e.prototype.createDynamicComponent=function(e,t){return Object(a.Component)({template:t})(e)},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275inject"](a.Compiler),a["\u0275\u0275inject"](a.Injector))},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();0,void 0},aMoz:function(e,t,n){"use strict";n.d(t,"a",function(){return E});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("gmuX"),l=n("OiFK"),c=n("//Q6"),d=n("4j5O"),u=n("oPR/"),p=n("l7P3"),m=n("tyNb"),f=n("3Pt+"),h=n("sYmb"),g=n("/t3+"),A=n("XiUz"),b=n("bTqV"),y=n("NFeN"),v=n("ofXK"),C=n("bSwM"),x=n("znSr"),w=n("bv9b");function S(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",17)}var E=function(e){function t(t,n,i,a,r,o,s,l,d,u){var p=e.call(this,t,n,r)||this;p.store=t,p.router=n,p.data=i,p.errorStateMatcher=a,p.dialogRef=r,p.fb=o,p.utils=s,p.dashboardUtils=l,p.translate=d,p.dialog=u,p.submitted=!1,p.layouts=p.data.layouts,p.layoutsFormGroup=p.fb.group({main:[{value:Object(c.n)(p.layouts.main),disabled:!0},[]],right:[Object(c.n)(p.layouts.right),[]]});for(var m=0,f=Object.keys(p.layoutsFormGroup.controls);m<f.length;m++){var h=f[m];p.layoutsFormGroup.controls[h];p.layouts[h]||(p.layouts[h]=p.dashboardUtils.createDefaultLayoutData())}return p}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.openLayoutSettings=function(e){var t=this,n=Object(c.e)(this.layouts[e].gridSettings);this.dialog.open(u.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{settings:null,gridSettings:n}}).afterClosed().subscribe(function(n){n&&n.gridSettings&&(t.dashboardUtils.updateLayoutSettings(t.layouts[e],n.gridSettings),t.layoutsFormGroup.markAsDirty())})},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.save=function(){this.submitted=!0;for(var e=0,t=Object.keys(this.layoutsFormGroup.controls);e<t.length;e++){var n=t[e];this.layoutsFormGroup.controls[n].value||delete this.layouts[n]}this.dialogRef.close(this.layouts)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](p.Store),a["\u0275\u0275directiveInject"](m.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](f.FormBuilder),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](d.a),a["\u0275\u0275directiveInject"](h.TranslateService),a["\u0275\u0275directiveInject"](o.MatDialog))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-manage-dashboard-layouts-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:36,vars:26,consts:[[3,"formGroup","ngSubmit"],["color","accent"],["translate",""],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],["fxLayout","column","fxLayoutGap","8px",3,"disabled"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px"],["fxFlex","","formControlName","main"],["fxFlex","","formControlName","right"],["fxFlex","","type","button","mat-raised-button","","color","accent",1,"tb-layout-button",3,"click"],["fxFlex","","type","button","mat-raised-button","","color","accent",1,"tb-layout-button",3,"fxShow","click"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2",2),a["\u0275\u0275text"](3,"layout.manage"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",3),a["\u0275\u0275elementStart"](5,"button",4),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](6,"mat-icon",5),a["\u0275\u0275text"](7,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,S,1,0,"mat-progress-bar",6),a["\u0275\u0275pipe"](9,"async"),a["\u0275\u0275elementStart"](10,"div",7),a["\u0275\u0275elementStart"](11,"fieldset",8),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",9),a["\u0275\u0275elementStart"](14,"mat-checkbox",10),a["\u0275\u0275text"](15),a["\u0275\u0275pipe"](16,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"mat-checkbox",11),a["\u0275\u0275text"](18),a["\u0275\u0275pipe"](19,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](20,"div",9),a["\u0275\u0275elementStart"](21,"button",12),a["\u0275\u0275listener"]("click",function(){return t.openLayoutSettings("main")}),a["\u0275\u0275elementStart"](22,"span",2),a["\u0275\u0275text"](23,"layout.main"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](24,"button",13),a["\u0275\u0275listener"]("click",function(){return t.openLayoutSettings("right")}),a["\u0275\u0275elementStart"](25,"span",2),a["\u0275\u0275text"](26,"layout.right"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](27,"div",14),a["\u0275\u0275elementStart"](28,"button",15),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](29,"async"),a["\u0275\u0275text"](30),a["\u0275\u0275pipe"](31,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](32,"button",16),a["\u0275\u0275pipe"](33,"async"),a["\u0275\u0275text"](34),a["\u0275\u0275pipe"](35,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.layoutsFormGroup),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](9,10,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](12,12,t.isLoading$)),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](16,14,"layout.main")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](19,16,"layout.right")," "),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("fxShow",t.layoutsFormGroup.get("right").value),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](29,18,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](31,20,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](33,22,t.isLoading$)||t.layoutsFormGroup.invalid||!t.layoutsFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](35,24,"action.save")," "))},directives:[f["\u0275angular_packages_forms_forms_ba"],f.NgControlStatusGroup,f.FormGroupDirective,g.MatToolbar,h.TranslateDirective,A.b,b.MatButton,y.MatIcon,v.NgIf,o.MatDialogContent,A.f,A.g,A.e,C.MatCheckbox,f.NgControlStatus,f.FormControlName,x.d,o.MatDialogActions,w.MatProgressBar],pipes:[v.AsyncPipe,h.TranslatePipe],styles:["[_nghost-%COMP%]   button.tb-layout-button[_ngcontent-%COMP%]{width:100%;height:100%;padding:40px 20px}[_nghost-%COMP%]  .mat-button-wrapper{line-height:18px}[_nghost-%COMP%]  .mat-button-wrapper span{font-size:18px;font-weight:400;white-space:normal}"]}),t}(s.a);0,void 0},aYVl:function(e,t,n){"use strict";n.d(t,"a",function(){return w});var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=n("l7P3"),s=n("/t3+"),l=n("ofXK"),c=n("znSr"),d=n("XiUz"),u=n("bTqV"),p=n("NFeN"),m=n("Qu3c"),f=n("sYmb");function h(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",12),a["\u0275\u0275elementStart"](1,"button",8),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onToggleSearch()}),a["\u0275\u0275elementStart"](2,"mat-icon",9),a["\u0275\u0275text"](3,"arrow_back"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"div",13),a["\u0275\u0275projection"](5,4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("fxHide",!i.showSearchPane)}}function g(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",8),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onToggleSearch()}),a["\u0275\u0275elementStart"](1,"mat-icon",9),a["\u0275\u0275text"](2,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}}var A=function(e){return{"tb-hide":e}};function b(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"section",14),a["\u0275\u0275elementStart"](1,"button",15),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onApplyDetails()}),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementStart"](4,"mat-icon",9),a["\u0275\u0275text"](5,"done"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"button",16),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onToggleDetailsEditMode()}),a["\u0275\u0275pipe"](7,"async"),a["\u0275\u0275pipe"](8,"translate"),a["\u0275\u0275elementStart"](9,"mat-icon",9),a["\u0275\u0275text"](10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](3,8,"action.apply-changes")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](2,6,i.isLoading$)||(null==i.theForm?null:i.theForm.invalid)||!(null!=i.theForm&&i.theForm.dirty))("ngClass",a["\u0275\u0275pureFunction1"](14,A,!i.isEdit)),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](8,12,i.isAlwaysEdit?"action.decline-changes":"details.toggle-edit-mode")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](7,10,i.isLoading$)||i.isAlwaysEdit&&!(null!=i.theForm&&i.theForm.dirty)),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](i.isEdit?"close":"edit")}}var y=[[["",8,"prefix-title-buttons"]],[["",8,"header-pane"]],[["",8,"details-buttons"]],"*",[["",8,"search-pane"]]],v=function(e){return{height:e}},C=function(e){return{backgroundColor:e}},x=[".prefix-title-buttons",".header-pane",".details-buttons","*",".search-pane"],w=function(e){function t(t,n){var i=e.call(this,t)||this;return i.store=t,i.cd=n,i.headerHeightPx=100,i.headerTitle="",i.headerSubtitle="",i.isReadOnly=!1,i.isAlwaysEdit=!1,i.isShowSearch=!1,i.backgroundColor="#FFF",i.formSubscription=null,i.closeDetails=new a.EventEmitter,i.toggleDetailsEditMode=new a.EventEmitter,i.applyDetails=new a.EventEmitter,i.closeSearch=new a.EventEmitter,i.isEditValue=!1,i.showSearchPane=!1,i.isEditChange=new a.EventEmitter,i}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"theForm",{get:function(){return this.theFormValue},set:function(e){var t=this;this.theFormValue!==e&&(null!==this.formSubscription&&(this.formSubscription.unsubscribe(),this.formSubscription=null),this.theFormValue=e,null!==this.theFormValue&&(this.formSubscription=this.theFormValue.valueChanges.subscribe(function(){return t.cd.detectChanges()})))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEdit",{get:function(){return this.isAlwaysEdit||this.isEditValue},set:function(e){this.isEditValue=e,this.isEditChange.emit(this.isEditValue)},enumerable:!1,configurable:!0}),t.prototype.ngOnDestroy=function(){null!==this.formSubscription&&this.formSubscription.unsubscribe(),e.prototype.ngOnDestroy.call(this)},t.prototype.onCloseDetails=function(){this.closeDetails.emit()},t.prototype.onToggleDetailsEditMode=function(){this.isAlwaysEdit||(this.isEdit=!this.isEdit),this.toggleDetailsEditMode.emit(this.isEditValue)},t.prototype.onApplyDetails=function(){this.theForm&&this.theForm.valid&&this.applyDetails.emit()},t.prototype.onToggleSearch=function(){this.showSearchPane=!this.showSearchPane,this.showSearchPane||this.closeSearch.emit()},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](o.Store),a["\u0275\u0275directiveInject"](a.ChangeDetectorRef))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-details-panel"]],inputs:{headerHeightPx:"headerHeightPx",headerTitle:"headerTitle",headerSubtitle:"headerSubtitle",isReadOnly:"isReadOnly",isAlwaysEdit:"isAlwaysEdit",isShowSearch:"isShowSearch",backgroundColor:"backgroundColor",theForm:"theForm",isEdit:"isEdit"},outputs:{closeDetails:"closeDetails",toggleDetailsEditMode:"toggleDetailsEditMode",applyDetails:"applyDetails",closeSearch:"closeSearch",isEditChange:"isEditChange"},features:[a["\u0275\u0275InheritDefinitionFeature"]],ngContentSelectors:x,decls:21,vars:12,consts:[["color","accent",1,"details-toolbar",3,"ngStyle"],["fxLayout","row","fxLayoutAlign","start center",1,"mat-toolbar-tools",2,"height","100%"],["fxFlex","","fxLayout","column","fxLayoutAlign","start start",1,"mat-toolbar-tools","tb-details-title-header",3,"fxHide"],["fxLayout","row","fxLayoutAlign","start center",1,"tb-details-title"],[1,"tb-details-subtitle"],[2,"width","100%"],["fxLayout","row","fxLayoutAlign","start center","style","width: 100%;",3,"fxHide",4,"ngIf"],["mat-button","","mat-icon-button","",3,"click",4,"ngIf"],["mat-button","","mat-icon-button","",3,"click"],[1,"material-icons"],["fxLayout","row","class","layout-wrap tb-header-buttons",4,"ngIf"],["fxFlex","",1,"mat-content",3,"ngStyle"],["fxLayout","row","fxLayoutAlign","start center",2,"width","100%",3,"fxHide"],[2,"width","100%","margin","0 20px"],["fxLayout","row",1,"layout-wrap","tb-header-buttons"],["mat-fab","","matTooltipPosition","above","color","accent",1,"tb-btn-header","mat-fab-bottom-right",3,"disabled","matTooltip","ngClass","click"],["mat-fab","","matTooltipPosition","above","color","accent",1,"tb-btn-header","mat-fab-bottom-right",3,"disabled","matTooltip","click"]],template:function(e,t){1&e&&(a["\u0275\u0275projectionDef"](y),a["\u0275\u0275elementStart"](0,"header"),a["\u0275\u0275elementStart"](1,"mat-toolbar",0),a["\u0275\u0275elementStart"](2,"div",1),a["\u0275\u0275elementStart"](3,"div",2),a["\u0275\u0275elementStart"](4,"div",3),a["\u0275\u0275projection"](5),a["\u0275\u0275elementStart"](6,"span"),a["\u0275\u0275text"](7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"span",4),a["\u0275\u0275text"](9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"span",5),a["\u0275\u0275projection"](11,1),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](12,h,6,1,"div",6),a["\u0275\u0275template"](13,g,3,0,"button",7),a["\u0275\u0275projection"](14,2),a["\u0275\u0275elementStart"](15,"button",8),a["\u0275\u0275listener"]("click",function(){return t.onCloseDetails()}),a["\u0275\u0275elementStart"](16,"mat-icon",9),a["\u0275\u0275text"](17,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](18,b,11,16,"section",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"div",11),a["\u0275\u0275projection"](20,3),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](8,v,t.headerHeightPx+"px")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxHide",t.showSearchPane),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](t.headerTitle),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](t.headerSubtitle),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",t.isShowSearch),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.isShowSearch&&!t.showSearchPane),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",!t.isReadOnly),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](10,C,t.backgroundColor)))},directives:[s.MatToolbar,l.NgStyle,c.e,d.f,d.e,d.b,c.d,l.NgIf,u.MatButton,p.MatIcon,m.MatTooltip,l.NgClass,c.b],pipes:[l.AsyncPipe,f.TranslatePipe],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .mat-toolbar.details-toolbar[_ngcontent-%COMP%]{padding:0}[_nghost-%COMP%]     .mat-toolbar-tools{height:100%;min-height:60px;max-height:120px}[_nghost-%COMP%]     .mat-toolbar-tools.tb-details-title-header{min-width:0}[_nghost-%COMP%]     .tb-details-title{width:inherit;margin:20px 8px 0 0;overflow:hidden;font-size:1rem;font-weight:400;text-overflow:ellipsis;white-space:nowrap}@media screen and (min-width:960px){[_nghost-%COMP%]     .tb-details-title{font-size:1.5rem}}[_nghost-%COMP%]     .tb-details-subtitle{width:inherit;margin:10px 0;overflow:hidden;font-size:1rem;text-overflow:ellipsis;white-space:nowrap;opacity:.8}[_nghost-%COMP%]     tb-dashboard .tb-dashboard-content{background-color:#cfd8dc!important}"]}),t}(r.a);0,void 0},afHT:function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"b",function(){return r}),n.d(t,"d",function(){return o}),function(e){e.LWM2M_MODEL="LWM2M_MODEL",e.PKCS_12="PKCS_12",e.JKS="JKS"}(i||(i={}));var a=new Map([[i.LWM2M_MODEL,"application/xml,text/xml"],[i.PKCS_12,"application/x-pkcs12"],[i.JKS,"application/x-java-keystore"]]),r=new Map([[i.LWM2M_MODEL,"xml"],[i.PKCS_12,"p12,pfx"],[i.JKS,"jks"]]),o=new Map([[i.LWM2M_MODEL,"LWM2M model"],[i.PKCS_12,"PKCS #12"],[i.JKS,"JKS"]])},bHFI:function(e,t,n){"use strict";n.d(t,"d",function(){return a}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"e",function(){return s}),n.d(t,"a",function(){return l});var i=n("mrSG");function a(){return{schema:{type:"object",properties:{},required:[]},form:[],groupInfoes:[]}}function r(e,t){var n;e.groupInfoes.push({formIndex:(null===(n=e.groupInfoes)||void 0===n?void 0:n.length)||0,GroupTitle:t})}function o(e,t){Object.assign(e.schema.properties,t.schema.properties),e.schema.required=e.schema.required.concat(t.schema.required),e.form.push(t.form)}function s(e){return e.reduce(function(e,t){return{schema:{properties:Object(i.a)(Object(i.a)({},e.schema.properties),t.schema.properties),required:Object(i.h)(e.schema.required,t.schema.required)},form:Object(i.h)(e.form,t.form)}},{schema:{type:"object",properties:{},required:[]},form:[],groupInfoes:[]})}function l(e,t,n){return void 0===n&&(n=[]),e.form=e.form.map(function(e){if(!n.includes(e)&&!n.includes(e.key)){if("string"==typeof e)return{key:e,condition:t};"object"==typeof e&&(e.condition?e.condition+=" && "+t:e.condition=t)}return e}),e}},bkji:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return D});var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=(n("0G7Z"),n("0lYY")),s=n("OiFK"),l=n("Neop"),c=n("xgIS"),d=n("Kj3r"),u=n("/uUt"),p=n("vkgz"),m=n("fr2l"),f=n("U3y+"),h=n("//Q6"),g=n("T7OX"),A=n("MBk6"),b=n("l7P3"),y=n("rDax"),v=n("rezs"),C=n("XiUz"),x=n("/t3+"),w=n("znSr"),S=n("bTqV"),E=n("Qu3c"),I=n("NFeN"),O=n("kmnG"),T=n("qFsG"),F=n("3Pt+"),B=n("NOb7"),M=n("sYmb"),P=["searchInput"],D=function(t){function n(e,n,i,a,r){var s=t.call(this,e)||this;return s.store=e,s.elementRef=n,s.overlay=i,s.viewContainerRef=a,s.utils=r,s.toastTargetId="entities-hierarchy-"+s.utils.guid(),s.textSearchMode=!1,s.textSearch=null,s.nodeEditCallbacks={},s.nodesMap={},s.pendingUpdateNodeTasks={},s.nodeIdCounter=0,s.searchAction={name:"action.search",show:!0,icon:"search",onAction:function(){s.enterFilterMode()}},s.loadNodes=function(e,t){if("#"===e.id){var n=[],i=0;s.datasources.forEach(function(e,t){var a=s.subscription.data.slice(i);n.push(s.datasourceToNode(e,a)),i+=e.dataKeys.length}),t(s.prepareNodes(n))}else e.data&&e.data.nodeCtx.entity&&e.data.nodeCtx.entity.id&&e.data.datasource.type===o.a.entity&&"function"!==e.data.nodeCtx.entity.id.entityType?s.loadChildren(e,e.data.datasource,t):t([])},s.onNodeSelected=function(e,t){var n;if(-1!==(n=e?e.id:-1)){var i=s.nodesMap[n];if(i){var a=s.ctx.actionsApi.getActionDescriptors("nodeSelected");if(a.length){var r=i.data.nodeCtx.entity;s.ctx.actionsApi.handleWidgetAction(t,a[0],r.id,r.name,{nodeCtx:i.data.nodeCtx},r.label)}}}},s.onNodesInserted=function(e){e&&e.forEach(function(e){var t=s.pendingUpdateNodeTasks[e];t&&(t(),delete s.pendingUpdateNodeTasks[e])})},s.searchCallback=function(e,t){var n=s.nodesMap[t.id];return!(!n||!n.data.searchText)&&n.data.searchText.includes(e.toLowerCase())},s}return Object(i.d)(n,t),n.prototype.ngOnInit=function(){this.ctx.$scope.entitiesHierarchyWidget=this,this.settings=this.ctx.settings,this.widgetConfig=this.ctx.widgetConfig,this.subscription=this.ctx.defaultSubscription,this.datasources=this.subscription.datasources,this.initializeConfig(),this.ctx.updateWidgetParams()},n.prototype.ngAfterViewInit=function(){var e=this;Object(c.a)(this.searchInputField.nativeElement,"keyup").pipe(Object(d.a)(150),Object(u.a)(),Object(p.a)(function(){e.updateSearchNodes()})).subscribe()},n.prototype.onDataUpdated=function(){this.updateNodeData(this.subscription.data)},n.prototype.initializeConfig=function(){this.ctx.widgetActions=[this.searchAction];var t={entity:{id:{entityType:f.b.DEVICE,id:"123"},name:"TEST DEV1",label:""},data:{},level:2},n=Object(h.e)(t);n.level=1,t.parentNodeCtx=n,this.nodeRelationQueryFunction=Object(g.f)(this.settings.nodeRelationQueryFunction,"nodeCtx",t),this.nodeIconFunction=Object(g.f)(this.settings.nodeIconFunction,"nodeCtx",t),this.nodeTextFunction=Object(g.f)(this.settings.nodeTextFunction,"nodeCtx",t),this.nodeDisabledFunction=Object(g.f)(this.settings.nodeDisabledFunction,"nodeCtx",t),this.nodeOpenedFunction=Object(g.f)(this.settings.nodeOpenedFunction,"nodeCtx",t),this.nodeHasChildrenFunction=Object(g.f)(this.settings.nodeHasChildrenFunction,"nodeCtx",t);var i=Object(h.e)(t);i.entity.name="TEST DEV2",this.nodesSortFunction=Object(g.f)(this.settings.nodesSortFunction,"nodeCtx1,nodeCtx2",t,i),this.nodeRelationQueryFunction=this.nodeRelationQueryFunction||g.c,this.nodeIconFunction=this.nodeIconFunction||g.a,this.nodeTextFunction=this.nodeTextFunction||function(e){return e.entity.name},this.nodeDisabledFunction=this.nodeDisabledFunction||function(){return!1},this.nodeOpenedFunction=this.nodeOpenedFunction||g.b,this.nodeHasChildrenFunction=this.nodeHasChildrenFunction||function(){return!0},this.nodesSortFunction=this.nodesSortFunction||g.d;var a=Object(m.a)(this.widgetConfig),r=new l.a;r.testMode=!1;var o="entities-hierarchy-"+Object(h.l)(a);r.cssPreviewNamespace=o,r.createStyleElement(o,a),e(this.elementRef.nativeElement).addClass(o)},n.prototype.enterFilterMode=function(){var e=this;this.textSearchMode=!0,this.textSearch="",this.ctx.hideTitlePanel=!0,this.ctx.detectChanges(!0),setTimeout(function(){e.searchInputField.nativeElement.focus(),e.searchInputField.nativeElement.setSelectionRange(0,0)},10)},n.prototype.exitFilterMode=function(){this.textSearchMode=!1,this.textSearch=null,this.updateSearchNodes(),this.ctx.hideTitlePanel=!1,this.ctx.detectChanges(!0)},n.prototype.updateSearchNodes=function(){null!=this.textSearch?this.nodeEditCallbacks.search(this.textSearch):this.nodeEditCallbacks.clearSearch()},n.prototype.updateNodeData=function(e){var t=this,n=[];e&&e.forEach(function(e){var i=e.datasource;if(i.nodeId){var a=t.nodesMap[i.nodeId],r=e.dataKey.label,o=void 0;e.data&&e.data.length&&(o=e.data[0][1]),a.data.nodeCtx.data[r]!==o&&(-1===n.indexOf(i.nodeId)&&n.push(i.nodeId),a.data.nodeCtx.data[r]=o)}}),n.forEach(function(e){t.nodeEditCallbacks.getNode(e)?t.updateNodeStyle(t.nodesMap[e]):t.pendingUpdateNodeTasks[e]=function(){t.updateNodeStyle(t.nodesMap[e])}})},n.prototype.updateNodeStyle=function(e){var t=this.prepareNodeText(e);e.text!==t&&(e.text=t,this.nodeEditCallbacks.updateNode(e.id,e.text));var n=this.nodeDisabledFunction(e.data.nodeCtx);e.state.disabled!==n&&(e.state.disabled=n,e.state.disabled?this.nodeEditCallbacks.disableNode(e.id):this.nodeEditCallbacks.enableNode(e.id));var i=this.nodeHasChildrenFunction(e.data.nodeCtx);e.children!==i&&(e.children=i,this.nodeEditCallbacks.setNodeHasChildren(e.id,e.children))},n.prototype.prepareNodes=function(e){var t=this;return(e=e.filter(function(e){return null!==e})).sort(function(e,n){return t.nodesSortFunction(e.data.nodeCtx,n.data.nodeCtx)}),e},n.prototype.prepareNodeText=function(e){var t=this.prepareNodeIcon(e.data.nodeCtx),n=this.nodeTextFunction(e.data.nodeCtx);return e.data.searchText=n?n.replace(/<[^>]+>/g,"").toLowerCase():"",t+n},n.prototype.prepareNodeIcon=function(e){var t=this.nodeIconFunction(e);return t?("default"===t&&(t=Object(g.a)(e)),t&&"default"!==t&&(t.iconUrl||t.materialIcon)?t.materialIcon?Object(g.g)(t.materialIcon):Object(g.e)(t.iconUrl):""):""},n.prototype.datasourceToNode=function(e,t,n){var i={id:++this.nodeIdCounter+""};this.nodesMap[i.id]=i,e.nodeId=i.id,i.icon=!1;var a={parentNodeCtx:n,entity:{id:{id:e.entityId,entityType:e.entityType},name:e.entityName,label:e.entityLabel?e.entityLabel:e.entityName},data:{}};return e.dataKeys.forEach(function(e,n){var i=t[n].data;i&&i.length&&i[0].length>1?a.data[e.label]=i[0][1]:a.data[e.label]=""}),a.level=n?n.level+1:1,i.data={datasource:e,nodeCtx:a},i.state={disabled:this.nodeDisabledFunction(i.data.nodeCtx),opened:this.nodeOpenedFunction(i.data.nodeCtx)},i.text=this.prepareNodeText(i),i.children=this.nodeHasChildrenFunction(i.data.nodeCtx),i},n.prototype.loadChildren=function(e,t,n){var i=this,a=e.data.nodeCtx;a.childrenNodesLoaded=!1;var r=this.prepareNodeRelationsQueryFilter(a),s={dataKeys:t.dataKeys,type:o.a.entity,filterId:t.filterId,entityFilter:r},l={type:o.m.latest,datasources:[s],callbacks:{onSubscriptionMessage:function(e,t){i.ctx.showToast(t.severity,t.message,void 0,"bottom","left",i.toastTargetId)},onInitialPageDataChanged:function(t){i.ctx.subscriptionApi.removeSubscription(t.id),i.nodeEditCallbacks.refreshNode(e.id)},onDataUpdated:function(e){if(a.childrenNodesLoaded)i.updateNodeData(e.data);else{var t=e.datasourcePages[0],r=e.dataPages[0],o=[];t.data.forEach(function(e,t){o.push(i.datasourceToNode(e,r.data[t],a))}),a.childrenNodesLoaded=!0,n(i.prepareNodes(o))}}}};this.ctx.subscriptionApi.createSubscription(l,!0)},n.prototype.prepareNodeRelationQuery=function(e){var t=this.nodeRelationQueryFunction(e);return t&&"default"===t&&(t=Object(g.c)(e)),t},n.prototype.prepareNodeRelationsQueryFilter=function(e){var t=this.prepareNodeRelationQuery(e);return{rootEntity:{id:t.parameters.rootId,entityType:t.parameters.rootType},direction:t.parameters.direction,filters:t.filters,maxLevel:t.parameters.maxLevel,fetchLastLevelOnly:t.parameters.fetchLastLevelOnly,type:A.a.relationsQuery}},n.\u0275fac=function(e){return new(e||n)(a["\u0275\u0275directiveInject"](b.Store),a["\u0275\u0275directiveInject"](a.ElementRef),a["\u0275\u0275directiveInject"](y.Overlay),a["\u0275\u0275directiveInject"](a.ViewContainerRef),a["\u0275\u0275directiveInject"](s.a))},n.\u0275cmp=a["\u0275\u0275defineComponent"]({type:n,selectors:[["tb-entities-hierarchy-widget"]],viewQuery:function(e,t){if(1&e&&a["\u0275\u0275viewQuery"](P,1),2&e){var n;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.searchInputField=n.first)}},inputs:{ctx:"ctx"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:20,vars:17,consts:[["tb-toast","",1,"tb-entities-hierarchy","tb-absolute-fill",3,"toastTarget"],["fxFlex","","fxLayout","column",1,"tb-absolute-fill"],[1,"mat-table-toolbar",3,"fxShow"],[1,"mat-toolbar-tools"],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"matTooltip"],["fxFlex",""],["matInput","",3,"ngModel","placeholder","ngModelChange"],["searchInput",""],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"matTooltip","click"],["fxFlex","",1,"tb-entities-nav-tree-panel"],["enableSearch","true",3,"loadNodes","onNodeSelected","onNodesInserted","editCallbacks","searchCallback"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"mat-toolbar",2),a["\u0275\u0275elementStart"](3,"div",3),a["\u0275\u0275elementStart"](4,"button",4),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275elementStart"](6,"mat-icon"),a["\u0275\u0275text"](7,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"mat-form-field",5),a["\u0275\u0275elementStart"](9,"mat-label"),a["\u0275\u0275text"](10,"\xa0"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"input",6,7),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.textSearch=e}),a["\u0275\u0275pipe"](13,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"button",8),a["\u0275\u0275listener"]("click",function(){return t.exitFilterMode()}),a["\u0275\u0275pipe"](15,"translate"),a["\u0275\u0275elementStart"](16,"mat-icon"),a["\u0275\u0275text"](17,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"div",9),a["\u0275\u0275element"](19,"tb-nav-tree",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275propertyInterpolate"]("toastTarget",t.toastTargetId),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",t.textSearchMode),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](5,11,"action.search")),a["\u0275\u0275advance"](7),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](13,13,"entity.search")),a["\u0275\u0275property"]("ngModel",t.textSearch),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](15,15,"action.close")),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("loadNodes",t.loadNodes)("onNodeSelected",t.onNodeSelected)("onNodesInserted",t.onNodesInserted)("editCallbacks",t.nodeEditCallbacks)("searchCallback",t.searchCallback))},directives:[v.b,C.b,C.f,x.MatToolbar,w.d,S.MatButton,E.MatTooltip,I.MatIcon,O.MatFormField,O.MatLabel,T.MatInput,F.DefaultValueAccessor,F.NgControlStatus,F.NgModel,B.a],pipes:[M.TranslatePipe],styles:[".tb-has-timewindow[_nghost-%COMP%]   .tb-entities-hierarchy[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%], .tb-has-timewindow   [_nghost-%COMP%]   .tb-entities-hierarchy[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]{height:60px;max-height:60px}.tb-has-timewindow[_nghost-%COMP%]   .tb-entities-hierarchy[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%], .tb-has-timewindow   [_nghost-%COMP%]   .tb-entities-hierarchy[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{height:60px;max-height:60px}[_nghost-%COMP%]   .tb-entities-hierarchy[_ngcontent-%COMP%]   mat-toolbar.mat-table-toolbar[_ngcontent-%COMP%]:not([color=accent]){background:transparent}[_nghost-%COMP%]   .tb-entities-hierarchy[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]{min-height:39px;max-height:39px}[_nghost-%COMP%]   .tb-entities-hierarchy[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{min-height:39px;max-height:39px}[_nghost-%COMP%]   .tb-entities-hierarchy[_ngcontent-%COMP%]   .tb-entities-nav-tree-panel[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:auto}[_nghost-%COMP%]     .tb-nav-tree-container.jstree-proton .jstree-anchor div.node-icon{display:inline-block;width:22px;height:22px;margin-right:2px;margin-bottom:2px;background-color:transparent;background-repeat:no-repeat;background-attachment:scroll;background-position:50%;background-size:18px 18px}[_nghost-%COMP%]     .tb-nav-tree-container.jstree-proton .jstree-anchor mat-icon.node-icon{width:22px;min-width:22px;height:22px;min-height:22px;margin-right:2px;margin-bottom:2px;color:inherit;vertical-align:middle}[_nghost-%COMP%]     .tb-nav-tree-container.jstree-proton .jstree-anchor mat-icon.node-icon.material-icons{font-size:18px;line-height:22px;text-align:center}[_nghost-%COMP%]     .tb-nav-tree-container.jstree-proton .jstree-anchor.jstree-disabled div.node-icon, [_nghost-%COMP%]     .tb-nav-tree-container.jstree-proton .jstree-anchor.jstree-hovered:not(.jstree-clicked) div.node-icon{opacity:.5}@media (max-width:768px){[_nghost-%COMP%]     .tb-nav-tree-container.jstree-proton-responsive .jstree-anchor div.node-icon{width:40px;height:40px;margin:0;background-size:24px 24px}[_nghost-%COMP%]     .tb-nav-tree-container.jstree-proton-responsive .jstree-anchor mat-icon.node-icon{width:40px;min-width:40px;height:40px;min-height:40px;margin:0}[_nghost-%COMP%]     .tb-nav-tree-container.jstree-proton-responsive .jstree-anchor mat-icon.node-icon.material-icons{font-size:24px;line-height:40px}}"]}),n}(r.a);0,void 0}).call(this,n("xexB"))},c1Lj:function(e,t,n){"use strict";n.d(t,"g",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return l}),n.d(t,"a",function(){return i}),n.d(t,"f",function(){return c}),n.d(t,"e",function(){return d}),n.d(t,"b",function(){return u});var i,a=n("mrSG"),r=n("//Q6"),o=/^([0-9]{1,4}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$/,s=/^\+[1-9]\d{1,14}$/,l=/^\+[1-9]\d{1,14}$|^(MG|PN).*$/;!function(e){e.AWS_SNS="AWS_SNS",e.TWILIO="TWILIO"}(i||(i={}));var c=new Map([[i.AWS_SNS,"admin.sms-provider-type-aws-sns"],[i.TWILIO,"admin.sms-provider-type-twilio"]]);function d(e){return function(t){var n=t.value,a=null;if(e){var o=!1;if(n&&n.type)switch(n.type){case i.AWS_SNS:var s=n;o=Object(r.w)(s.accessKeyId)&&Object(r.w)(s.secretAccessKey)&&Object(r.w)(s.region);break;case i.TWILIO:var l=n;o=Object(r.w)(l.numberFrom)&&Object(r.w)(l.accountSid)&&Object(r.w)(l.accountToken)}o||(a={invalid:!0})}return a}}function u(e){var t;if(e)switch(e){case i.AWS_SNS:t=Object(a.a)(Object(a.a)({},{accessKeyId:"",secretAccessKey:"",region:"us-east-1"}),{type:i.AWS_SNS});break;case i.TWILIO:t=Object(a.a)(Object(a.a)({},{numberFrom:"",accountSid:"",accountToken:""}),{type:i.TWILIO})}return t}},c3m7:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n("fXoL"),a=n("3Pt+"),r=n("MBk6"),o=n("U3y+"),s=n("sYmb"),l=n("XiUz"),c=n("ofXK");function d(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",3),i["\u0275\u0275text"](1,"alias.no-entity-filter-specified"),i["\u0275\u0275elementEnd"]())}function u(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",4),i["\u0275\u0275elementStart"](1,"div",5),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](n.filterDisplayValue)}}var p=function(){function e(e){this.translate=e}return e.prototype.registerOnChange=function(e){},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){},e.prototype.writeValue=function(e){var t=this;if(this.filter=e,this.filter&&this.filter.type){var n,i,a,s,l,c=void 0,d=void 0;switch(this.filter.type){case r.a.singleEntity:c=this.filter.singleEntity.entityType,this.filterDisplayValue=this.translate.instant(o.d.get(c).list,{count:1});break;case r.a.entityList:c=this.filter.entityType;var u=this.filter.entityList.length;this.filterDisplayValue=this.translate.instant(o.d.get(c).list,{count:u});break;case r.a.entityName:c=this.filter.entityType,d=this.filter.entityNameFilter,this.filterDisplayValue=this.translate.instant(o.d.get(c).nameStartsWith,{prefix:d});break;case r.a.entityType:c=this.filter.entityType,this.filterDisplayValue=this.translate.instant(o.d.get(c).typePlural);break;case r.a.stateEntity:this.filterDisplayValue=this.translate.instant("alias.filter-type-state-entity-description");break;case r.a.assetType:var p=this.filter.assetType;(d=this.filter.assetNameFilter)&&d.length?this.filterDisplayValue=this.translate.instant("alias.filter-type-asset-type-and-name-description",{assetType:p,prefix:d}):this.filterDisplayValue=this.translate.instant("alias.filter-type-asset-type-description",{assetType:p});break;case r.a.deviceType:var m=this.filter.deviceType;(d=this.filter.deviceNameFilter)&&d.length?this.filterDisplayValue=this.translate.instant("alias.filter-type-device-type-and-name-description",{deviceType:m,prefix:d}):this.filterDisplayValue=this.translate.instant("alias.filter-type-device-type-description",{deviceType:m});break;case r.a.edgeType:var f=this.filter.edgeType;(d=this.filter.edgeNameFilter)&&d.length?this.filterDisplayValue=this.translate.instant("alias.filter-type-edge-type-and-name-description",{edgeType:f,prefix:d}):this.filterDisplayValue=this.translate.instant("alias.filter-type-edge-type-description",{edgeType:f});break;case r.a.entityViewType:var h=this.filter.entityViewType;(d=this.filter.entityViewNameFilter)&&d.length?this.filterDisplayValue=this.translate.instant("alias.filter-type-entity-view-type-and-name-description",{entityView:h,prefix:d}):this.filterDisplayValue=this.translate.instant("alias.filter-type-entity-view-type-description",{entityView:h});break;case r.a.relationsQuery:n=this.translate.instant("alias.all-entities"),i=this.translate.instant("alias.any-relation"),s=this.filter.rootStateEntity?this.translate.instant("alias.state-entity"):this.translate.instant(o.d.get(this.filter.rootEntity.entityType).type),l=this.translate.instant("relation.direction-type."+this.filter.direction);var g=this.filter.filters;if(g&&g.length){var A=[];g.forEach(function(e){var r;if(e.entityTypes&&e.entityTypes.length){var c=[];e.entityTypes.forEach(function(e){c.push(t.translate.instant(o.d.get(e).typePlural))}),r=c.join(", ")}else r=n;a=e.relationType&&e.relationType.length?"'"+e.relationType+"'":i;var d=t.translate.instant("alias.filter-type-relations-query-description",{entities:r,relationType:a,direction:l,rootEntity:s});A.push(d)}),this.filterDisplayValue=A.join(", ")}else this.filterDisplayValue=this.translate.instant("alias.filter-type-relations-query-description",{entities:n,relationType:i,direction:l,rootEntity:s});break;case r.a.assetSearchQuery:case r.a.deviceSearchQuery:case r.a.edgeSearchQuery:case r.a.entityViewSearchQuery:n=this.translate.instant("alias.all-entities"),i=this.translate.instant("alias.any-relation"),s=this.filter.rootStateEntity?this.translate.instant("alias.state-entity"):this.translate.instant(o.d.get(this.filter.rootEntity.entityType).type),l=this.translate.instant("relation.direction-type."+this.filter.direction);var b={relationType:a=this.filter.relationType&&this.filter.relationType.length?"'"+e.relationType+"'":i,direction:l,rootEntity:s};if(this.filter.type===r.a.assetSearchQuery){var y=[];this.filter.assetTypes.forEach(function(e){y.push("'"+e+"'")});var v=y.join(", ");b.assetTypes=v,this.filterDisplayValue=this.translate.instant("alias.filter-type-asset-search-query-description",b)}else if(this.filter.type===r.a.deviceSearchQuery){var C=[];this.filter.deviceTypes.forEach(function(e){C.push("'"+e+"'")});var x=C.join(", ");b.deviceTypes=x,this.filterDisplayValue=this.translate.instant("alias.filter-type-device-search-query-description",b)}else if(this.filter.type===r.a.edgeSearchQuery){var w=[];this.filter.edgeTypes.forEach(function(e){w.push("'"+e+"'")});var S=w.join(", ");b.edgeTypes=S,this.filterDisplayValue=this.translate.instant("alias.filter-type-edge-search-query-description",b)}else if(this.filter.type===r.a.entityViewSearchQuery){var E=[];this.filter.entityViewTypes.forEach(function(e){E.push("'"+e+"'")});var I=E.join(", ");b.entityViewTypes=I,this.filterDisplayValue=this.translate.instant("alias.filter-type-entity-view-search-query-description",b)}break;default:this.filterDisplayValue=this.filter.type}}else this.filterDisplayValue=""},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.TranslateService))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-entity-filter-view"]],features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:4,vars:2,consts:[["fxLayout","column",1,"tb-entity-filter-view"],["class","entity-filter-empty","translate","",4,"ngIf","ngIfElse"],["filterView",""],["translate","",1,"entity-filter-empty"],["fxLayout","column"],[1,"entity-filter-value"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,d,2,0,"div",1),i["\u0275\u0275template"](2,u,3,1,"ng-template",null,2,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.filter||!t.filter.type)("ngIfElse",n)}},directives:[l.f,c.NgIf,s.TranslateDirective],styles:["[_nghost-%COMP%]   .tb-entity-filter-view[_ngcontent-%COMP%]   .entity-filter-empty[_ngcontent-%COMP%]{font-size:14px;line-height:16px;color:rgba(221,44,0,.87)}[_nghost-%COMP%]   .tb-entity-filter-view[_ngcontent-%COMP%]   .entity-filter-type[_ngcontent-%COMP%]{font-size:14px;line-height:16px;color:rgba(0,0,0,.57)}[_nghost-%COMP%]   .tb-entity-filter-view[_ngcontent-%COMP%]   .entity-filter-value[_ngcontent-%COMP%]{font-size:14px;line-height:16px;color:rgba(0,0,0,.57)}"]}),e}();0,void 0},c6cM:function(e,t,n){"use strict";n.d(t,"a",function(){return x});var i=n("0lYY"),a=n("aX2P"),r=n("jtHE"),o=n("LRne"),s=n("cp0P"),l=n("z6cu"),c=n("XNiG"),d=n("PqYM"),u=n("U3y+"),p=n("//Q6"),m=n("wd/R"),f=n("Duvn"),h=n("xw5a"),g=n("lJxs"),A=n("eIep"),b=n("pLZG"),y=n("1G5W"),v=n("hB0h"),C=m,x=function(){function e(e,t){var n=this;this.options=t,this.tsOffset=0,this.cafs={},this.hasResolvedData=!1,this.subscribed=!1;var o=new r.a;this.init$=o.asObservable(),this.ctx=e,this.type=t.type,this.id=this.ctx.utils.guid(),this.callbacks=t.callbacks,this.type===i.m.rpc?(this.callbacks.rpcStateChanged=this.callbacks.rpcStateChanged||function(){},this.callbacks.onRpcSuccess=this.callbacks.onRpcSuccess||function(){},this.callbacks.onRpcFailed=this.callbacks.onRpcFailed||function(){},this.callbacks.onRpcErrorCleared=this.callbacks.onRpcErrorCleared||function(){},this.targetDeviceAliasIds=t.targetDeviceAliasIds,this.targetDeviceIds=t.targetDeviceIds,this.targetDeviceAliasId=null,this.targetDeviceId=null,this.rpcRejection=null,this.rpcErrorText=null,this.rpcEnabled=!1,this.executingRpcRequest=!1,this.executingSubjects=[],this.initRpc().subscribe(function(){o.next(n),o.complete()})):this.type===i.m.alarm?(this.callbacks.onDataUpdated=this.callbacks.onDataUpdated||function(){},this.callbacks.onDataUpdateError=this.callbacks.onDataUpdateError||function(){},this.callbacks.onSubscriptionMessage=this.callbacks.onSubscriptionMessage||function(){},this.callbacks.dataLoading=this.callbacks.dataLoading||function(){},this.callbacks.timeWindowUpdated=this.callbacks.timeWindowUpdated||function(){},this.alarmSource=t.alarmSource,this.alarmDataListener=null,this.alarms=Object(f.a)(),this.originalTimewindow=null,this.timeWindow={},this.useDashboardTimewindow=t.useDashboardTimewindow,this.useDashboardTimewindow?this.timeWindowConfig=Object(p.e)(t.dashboardTimewindow):this.timeWindowConfig=Object(p.e)(t.timeWindowConfig),this.subscriptionTimewindow=null,this.loadingData=!1,this.displayLegend=!1,this.initAlarmSubscription().subscribe(function(){o.next(n),o.complete()},function(){o.error(null)})):(this.callbacks.onDataUpdated=this.callbacks.onDataUpdated||function(){},this.callbacks.onDataUpdateError=this.callbacks.onDataUpdateError||function(){},this.callbacks.onSubscriptionMessage=this.callbacks.onSubscriptionMessage||function(){},this.callbacks.onInitialPageDataChanged=this.callbacks.onInitialPageDataChanged||function(){},this.callbacks.forceReInit=this.callbacks.forceReInit||function(){},this.callbacks.dataLoading=this.callbacks.dataLoading||function(){},this.callbacks.legendDataUpdated=this.callbacks.legendDataUpdated||function(){},this.callbacks.timeWindowUpdated=this.callbacks.timeWindowUpdated||function(){},this.configuredDatasources=this.ctx.utils.validateDatasources(t.datasources),this.entityDataListeners=[],this.hasDataPageLink=t.hasDataPageLink,this.singleEntity=t.singleEntity,this.warnOnPageDataOverflow=t.warnOnPageDataOverflow,this.ignoreDataUpdateOnIntervalTick=t.ignoreDataUpdateOnIntervalTick,this.datasourcePages=[],this.datasources=[],this.dataPages=[],this.data=[],this.hiddenData=[],this.originalTimewindow=null,this.timeWindow={},this.useDashboardTimewindow=t.useDashboardTimewindow,this.stateData=t.stateData,this.type===i.m.latest&&(this.timezone=t.dashboardTimewindow.timezone,this.updateTsOffset()),this.useDashboardTimewindow?this.timeWindowConfig=Object(p.e)(t.dashboardTimewindow):this.timeWindowConfig=Object(p.e)(t.timeWindowConfig),this.subscriptionTimewindow=null,this.comparisonEnabled=t.comparisonEnabled&&Object(a.K)(this.timeWindowConfig),this.comparisonEnabled&&(this.timeForComparison=t.timeForComparison,this.comparisonCustomIntervalValue=t.comparisonCustomIntervalValue,this.comparisonTimeWindow={},this.timewindowForComparison=null),this.units=t.units||"",this.decimals=Object(p.n)(t.decimals)?t.decimals:2,this.loadingData=!1,t.legendConfig?(this.legendConfig=t.legendConfig,this.legendData={keys:[],data:[]},this.displayLegend=!0):this.displayLegend=!1,this.caulculateLegendData=this.displayLegend&&this.type===i.m.timeseries&&(!0===this.legendConfig.showMin||!0===this.legendConfig.showMax||!0===this.legendConfig.showAvg||!0===this.legendConfig.showTotal),this.initDataSubscription().subscribe(function(){o.next(n),o.complete()},function(e){o.error(e)}))}return e.prototype.initRpc=function(){var e=this,t=new r.a;return this.targetDeviceAliasIds&&this.targetDeviceAliasIds.length>0?(this.targetDeviceAliasId=this.targetDeviceAliasIds[0],this.ctx.aliasController.resolveSingleEntityInfo(this.targetDeviceAliasId).subscribe(function(n){n&&n.entityType===u.b.DEVICE?(e.targetDeviceId=n.id,e.targetDeviceName=n.name,e.targetDeviceId?e.rpcEnabled=!0:e.rpcEnabled=e.ctx.utils.widgetEditMode,e.hasResolvedData=e.rpcEnabled,e.callbacks.rpcStateChanged(e),t.next(),t.complete()):(e.rpcEnabled=!1,e.callbacks.rpcStateChanged(e),t.next(),t.complete())},function(){e.rpcEnabled=!1,e.callbacks.rpcStateChanged(e),t.next(),t.complete()})):(this.targetDeviceIds&&this.targetDeviceIds.length>0&&(this.targetDeviceId=this.targetDeviceIds[0]),this.targetDeviceId?this.rpcEnabled=!0:this.rpcEnabled=this.ctx.utils.widgetEditMode,this.hasResolvedData=!0,this.callbacks.rpcStateChanged(this),t.next(),t.complete()),t.asObservable()},e.prototype.initAlarmSubscription=function(){var e=this,t=new r.a(1);return this.loadStDiff().subscribe(function(){e.ctx.aliasController?e.ctx.aliasController.resolveAlarmSource(e.alarmSource).subscribe(function(n){e.alarmSource=n,n&&(e.hasResolvedData=!0),e.configureAlarmsData(),t.next(),t.complete()},function(e){t.error(e)}):(e.hasResolvedData=!0,e.configureAlarmsData(),t.next(),t.complete())}),t.asObservable()},e.prototype.configureAlarmsData=function(){this.notifyDataLoaded()},e.prototype.initDataSubscription=function(){var e=this;this.notifyDataLoading();var t=new r.a(1);return this.loadStDiff().subscribe(function(){e.ctx.aliasController?e.ctx.aliasController.resolveDatasources(e.configuredDatasources,e.singleEntity).subscribe(function(n){e.configuredDatasources=n,e.prepareDataSubscriptions().subscribe(function(){t.next(),t.complete()})},function(n){e.notifyDataLoaded(),t.error(n)}):(e.hasResolvedData=!0,e.prepareDataSubscriptions().subscribe(function(){t.next(),t.complete()}))}),t.asObservable()},e.prototype.prepareDataSubscriptions=function(){var e=this;if(this.hasDataPageLink)return this.hasResolvedData=!0,this.notifyDataLoaded(),Object(o.a)(null);if(this.comparisonEnabled){var t=[];this.configuredDatasources.forEach(function(e,n){var i=[];if(e.dataKeys.forEach(function(e,t){if(e.settings.comparisonSettings&&e.settings.comparisonSettings.showValuesForComparison){var n=Object(p.e)(e);n.isAdditional=!0,n.origDataKeyIndex=t,i.push(n)}}),i.length){var a=Object(p.e)(e);a.dataKeys=i,a.isAdditional=!0,a.origDatasourceIndex=n,t.push(a)}}),this.configuredDatasources=this.configuredDatasources.concat(t)}var n=this.configuredDatasources.map(function(t,n){var i={subscriptionType:e.type,configDatasource:t,configDatasourceIndex:n,dataLoaded:function(t,n,i,a){e.dataLoaded(t,n,i,a,!0)},initialPageDataChanged:e.initialPageDataChanged.bind(e),forceReInit:e.forceReInit.bind(e),dataUpdated:e.dataUpdated.bind(e),updateRealtimeSubscription:function(){return e.updateRealtimeSubscription()},setRealtimeSubscription:function(t){e.updateRealtimeSubscription(Object(p.e)(t))}};return e.entityDataListeners.push(i),e.ctx.entityDataService.prepareSubscription(i,e.ignoreDataUpdateOnIntervalTick)});return Object(s.a)(n).pipe(Object(g.a)(function(t){t.forEach(function(t){t&&e.dataLoaded(t.pageData,t.data,t.datasourceIndex,t.pageLink,!1)}),e.configureLoadedData(),e.hasResolvedData=e.datasources.length>0,e.updateDataTimewindow(),e.notifyDataLoaded(),e.onDataUpdated(!0)}))},e.prototype.resetData=function(){this.data.length=0,this.hiddenData.length=0,this.displayLegend&&(this.legendData.keys.length=0,this.legendData.data.length=0),this.onDataUpdated()},e.prototype.getFirstEntityInfo=function(){var e,t,n,a;if(this.type===i.m.rpc)this.targetDeviceId&&(e={entityType:u.b.DEVICE,id:this.targetDeviceId},t=this.targetDeviceName);else if(this.type===i.m.alarm){if(this.alarmSource&&this.alarmSource.entityType&&this.alarmSource.entityId)e={entityType:this.alarmSource.entityType,id:this.alarmSource.entityId},t=this.alarmSource.entityName,n=this.alarmSource.entityLabel,a=this.alarmSource.entityDescription;else if(this.alarms&&this.alarms.data.length){var r=this.alarms.data[0];if(e=r.originator,t=r.originatorName,r.latest&&r.latest[h.d.ENTITY_FIELD]){var o=r.latest[h.d.ENTITY_FIELD],s=o.label;s&&(n=s.value);var l=o.additionalInfo;if(l){var c=l.value;if(c&&c.length)try{var d=JSON.parse(c);d&&d.description&&(a=d.description)}catch(g){}}}}}else for(var p=0,m=this.datasources;p<m.length;p++){var f=m[p];if(f&&f.entityType&&f.entityId){e={entityType:f.entityType,id:f.entityId},t=f.entityName,n=f.entityLabel,a=f.entityDescription;break}}return e?{entityId:e,entityName:t,entityLabel:n,entityDescription:a}:null},e.prototype.onAliasesChanged=function(e){return this.type===i.m.rpc?this.checkRpcTarget(e):this.type===i.m.alarm?this.checkAlarmSource(e):this.checkSubscriptions(e)},e.prototype.onFiltersChanged=function(e){return this.type!==i.m.rpc&&(this.type===i.m.alarm?this.checkAlarmSourceFilters(e):this.checkSubscriptionsFilters(e))},e.prototype.onDataUpdated=function(e){var t=this;this.cafs.dataUpdated&&(this.cafs.dataUpdated(),this.cafs.dataUpdated=null),this.cafs.dataUpdated=this.ctx.raf.raf(function(){try{t.callbacks.onDataUpdated(t,e)}catch(n){t.callbacks.onDataUpdateError(t,n)}})},e.prototype.onSubscriptionMessage=function(e){var t=this;this.cafs.message&&(this.cafs.message(),this.cafs.message=null),this.cafs.message=this.ctx.raf.raf(function(){t.callbacks.onSubscriptionMessage(t,e)})},e.prototype.onDashboardTimewindowChanged=function(e){if(this.type===i.m.timeseries||this.type===i.m.alarm){if(this.useDashboardTimewindow&&!Object(p.r)(this.timeWindowConfig,e)&&e){var t=Object(a.N)(this.timeWindowConfig,e);this.timeWindowConfig=Object(p.e)(e),this.update(t)}}else this.type===i.m.latest&&e&&this.timezone!==e.timezone&&(this.timezone=e.timezone,this.updateTsOffset()&&this.update())},e.prototype.updateDataVisibility=function(e){this.displayLegend&&(this.legendData.keys.find(function(t){return t.dataIndex===e}).dataKey.hidden?(this.hiddenData[e].data=this.data[e].data,this.data[e].data=[]):(this.data[e].data=this.hiddenData[e].data,this.hiddenData[e].data=[]),this.onDataUpdated())},e.prototype.updateTimewindowConfig=function(e){if(!this.useDashboardTimewindow){var t=Object(a.N)(this.timeWindowConfig,e);this.timeWindowConfig=e,this.update(t)}},e.prototype.onResetTimewindow=function(){if(this.useDashboardTimewindow)this.ctx.dashboardTimewindowApi.onResetTimewindow();else if(this.originalTimewindow){var e=Object(a.N)(this.timeWindowConfig,this.originalTimewindow);this.timeWindowConfig=Object(p.e)(this.originalTimewindow),this.originalTimewindow=null,this.callbacks.timeWindowUpdated(this,this.timeWindowConfig),this.update(e)}},e.prototype.onUpdateTimewindow=function(e,t,n){if(this.useDashboardTimewindow)this.ctx.dashboardTimewindowApi.onUpdateTimewindow(e,t);else{this.originalTimewindow||(this.originalTimewindow=Object(p.e)(this.timeWindowConfig)),this.timeWindowConfig=Object(a.O)(this.timeWindowConfig,e,t,n,this.ctx.timeService),this.callbacks.timeWindowUpdated(this,this.timeWindowConfig);var i=Object(a.N)(this.timeWindowConfig,this.originalTimewindow);this.update(i)}},e.prototype.sendOneWayCommand=function(e,t,n,i,a,r){return this.sendCommand(!0,e,t,n,i,a,r)},e.prototype.sendTwoWayCommand=function(e,t,n,i,a,r){return this.sendCommand(!1,e,t,n,i,a,r)},e.prototype.clearRpcError=function(){this.rpcRejection=null,this.rpcErrorText=null,this.callbacks.onRpcErrorCleared(this)},e.prototype.completedCommand=function(){this.executingSubjects.forEach(function(e){e.next(),e.complete()})},e.prototype.sendCommand=function(e,t,n,i,a,r,s){var u=this;if(this.rpcEnabled){this.rpcRejection&&504!==this.rpcRejection.status&&(this.rpcRejection=null,this.rpcErrorText=null,this.callbacks.onRpcErrorCleared(this));var p={method:t,params:n,persistent:a,requestUUID:s};i&&i>0&&(p.timeout=i);var m=new c.b;return this.executingRpcRequest=!0,this.callbacks.rpcStateChanged(this),this.ctx.utils.widgetEditMode?setTimeout(function(){u.executingRpcRequest=!1,u.callbacks.rpcStateChanged(u),e?(m.next(),m.complete()):(m.next(p),m.complete())},500):(this.executingSubjects.push(m),(e?this.ctx.deviceService.sendOneWayRpcCommand(this.targetDeviceId,p):this.ctx.deviceService.sendTwoWayRpcCommand(this.targetDeviceId,p)).pipe(Object(A.a)(function(e){return a&&r>0?Object(d.a)(r/2,r).pipe(Object(A.a)(function(){return u.ctx.deviceService.getPersistedRpc(e.rpcId,!0)}),Object(b.a)(function(e){return e.status!==v.a.DELIVERED&&e.status!==v.a.QUEUED}),Object(A.a)(function(e){return e.status===v.a.TIMEOUT?Object(l.a)({status:504}):e.status===v.a.FAILED?Object(l.a)({status:502,statusText:e.response.error}):Object(o.a)(e.response)}),Object(y.a)(m)):Object(o.a)(e)})).subscribe(function(e){u.rpcRejection=null,u.rpcErrorText=null;var t=u.executingSubjects.indexOf(m);t>=0&&u.executingSubjects.splice(t,1),u.executingRpcRequest=u.executingSubjects.length>0,u.callbacks.onRpcSuccess(u),m.next(e),m.complete()},function(e){var t=u.executingSubjects.indexOf(m);if(t>=0&&u.executingSubjects.splice(t,1),u.executingRpcRequest=u.executingSubjects.length>0,u.callbacks.rpcStateChanged(u),!u.executingRpcRequest||504===e.status){if(u.rpcRejection=e,504===e.status)u.rpcErrorText="Request Timeout.";else{u.rpcErrorText="Error : "+e.status+" - "+e.statusText;var n=u.extractRejectionErrorText(e);n&&(u.rpcErrorText+="</br>",u.rpcErrorText+=n)}u.callbacks.onRpcFailed(u)}m.error(e)})),m.asObservable()}return Object(l.a)(new Error("Rpc disabled!"))},e.prototype.extractRejectionErrorText=function(e){var t=null;if(e.error){t=e.error;try{t=e.error?JSON.parse(e.error):null}catch(n){}}return t&&!t.message?t=this.prepareMessageFromData(t):t&&t.message&&(t=t.message),t},e.prototype.prepareMessageFromData=function(e){if("object"!=typeof e||e.constructor!==ArrayBuffer)return e;var t=String.fromCharCode.apply(null,new Uint8Array(e));try{var n=JSON.parse(t);return n.message?n.message:t}catch(i){return t}},e.prototype.update=function(e){void 0===e&&(e=!1),this.type!==i.m.rpc&&(this.type===i.m.alarm?this.updateAlarmDataSubscription():this.type===i.m.timeseries&&this.options.comparisonEnabled&&e?this.forceReInit():this.hasDataPageLink?this.updateDataSubscriptions():(this.notifyDataLoading(),this.dataSubscribe()))},e.prototype.subscribe=function(){var e=this;this.subscribed||(this.subscribed=!0,this.cafs.subscribe&&(this.cafs.subscribe(),this.cafs.subscribe=null),this.cafs.subscribe=this.ctx.raf.raf(function(){e.doSubscribe()}))},e.prototype.subscribeAllForPaginatedData=function(e,t){var n=this,i=[];return this.configuredDatasources.forEach(function(a,r){i.push(n.subscribeForPaginatedData(r,e,t))}),i.length?Object(s.a)(i):Object(o.a)(null)},e.prototype.subscribeForPaginatedData=function(e,t,n){var a=this,r=this.entityDataListeners[e];r&&this.ctx.entityDataService.stopSubscription(r);var s=this.configuredDatasources[e];return s?(this.type===i.m.timeseries&&this.timeWindowConfig&&this.updateRealtimeSubscription(),r={subscriptionType:this.type,configDatasource:s,configDatasourceIndex:e,subscriptionTimewindow:this.subscriptionTimewindow,latestTsOffset:this.tsOffset,dataLoaded:function(e,t,n,i){a.dataLoaded(e,t,n,i,!0)},dataUpdated:this.dataUpdated.bind(this),updateRealtimeSubscription:function(){return a.updateRealtimeSubscription()},setRealtimeSubscription:function(e){a.updateRealtimeSubscription(Object(p.e)(e))}},this.entityDataListeners[e]=r,this.ctx.entityDataService.subscribeForPaginatedData(r,t,n,this.ignoreDataUpdateOnIntervalTick)):Object(o.a)(null)},e.prototype.subscribeForAlarms=function(e,t){this.alarmDataListener&&this.ctx.alarmDataService.stopSubscription(this.alarmDataListener),this.timeWindowConfig&&this.updateRealtimeSubscription(),this.alarmDataListener={subscriptionTimewindow:this.subscriptionTimewindow,alarmSource:this.alarmSource,alarmsLoaded:this.alarmsLoaded.bind(this),alarmsUpdated:this.alarmsUpdated.bind(this)},this.alarms=Object(f.a)(),this.ctx.alarmDataService.subscribeForAlarms(this.alarmDataListener,e,t);var n=!1;this.alarmSource.unresolvedStateEntity&&(n=!0),n&&this.onDataUpdated()},e.prototype.doSubscribe=function(){this.type!==i.m.rpc&&this.type!==i.m.alarm&&this.dataSubscribe()},e.prototype.updateDataTimewindow=function(){this.hasDataPageLink||this.type===i.m.timeseries&&this.timeWindowConfig&&(this.updateRealtimeSubscription(),this.comparisonEnabled&&this.updateSubscriptionForComparison())},e.prototype.dataSubscribe=function(){var e=this;if(this.updateDataTimewindow(),!this.hasDataPageLink){this.type===i.m.timeseries&&this.timeWindowConfig&&this.subscriptionTimewindow.fixedWindow&&this.onDataUpdated();var t=!this.datasources.length,n=!this.entityDataListeners.filter(function(e){return!!e.subscription}).length;this.entityDataListeners.forEach(function(t){e.comparisonEnabled&&t.configDatasource.isAdditional?t.subscriptionTimewindow=e.timewindowForComparison:(t.subscriptionTimewindow=e.subscriptionTimewindow,t.latestTsOffset=e.tsOffset),e.ctx.entityDataService.startSubscription(t)}),t&&this.onDataUpdated(),n&&this.notifyDataLoaded()}},e.prototype.unsubscribe=function(){var e=this;this.type!==i.m.rpc&&(this.type===i.m.alarm?this.alarmsUnsubscribe():(this.entityDataListeners.forEach(function(t){null!=t&&e.ctx.entityDataService.stopSubscription(t)}),this.entityDataListeners.length=0,this.resetData())),this.subscribed=!1},e.prototype.alarmsUnsubscribe=function(){this.alarmDataListener&&(this.ctx.alarmDataService.stopSubscription(this.alarmDataListener),this.alarmDataListener=null)},e.prototype.checkRpcTarget=function(e){return e.indexOf(this.targetDeviceAliasId)>-1},e.prototype.checkAlarmSource=function(e){return this.options.alarmSource&&this.options.alarmSource.entityAliasId&&e.indexOf(this.options.alarmSource.entityAliasId)>-1&&this.updateAlarmSubscription(),!1},e.prototype.checkAlarmSourceFilters=function(e){return this.options.alarmSource&&this.options.alarmSource.filterId&&e.indexOf(this.options.alarmSource.filterId)>-1&&this.updateAlarmSubscription(),!1},e.prototype.updateAlarmSubscription=function(){var e=this;this.alarmSource=this.options.alarmSource,this.ctx.aliasController?this.ctx.aliasController.resolveAlarmSource(this.alarmSource).subscribe(function(t){e.alarmSource=t,t&&(e.hasResolvedData=!0),e.configureAlarmsData(),e.updateAlarmDataSubscription()},function(){e.notifyDataLoaded()}):(this.hasResolvedData=!0,this.configureAlarmsData(),this.updateAlarmDataSubscription())},e.prototype.updateAlarmDataSubscription=function(){if(this.alarmDataListener){var e=this.alarmDataListener.alarmDataSubscriptionOptions.pageLink,t=this.alarmDataListener.alarmDataSubscriptionOptions.additionalKeyFilters;this.subscribeForAlarms(e,t)}},e.prototype.checkSubscriptions=function(e){var t=!1,n=this.options.datasources;if(n)for(var i=0,a=n;i<a.length;i++){var r=a[i];if(r.entityAliasId&&e.indexOf(r.entityAliasId)>-1){t=!0;break}}return t&&this.hasDataPageLink&&(t=!1,this.updateDataSubscriptions()),t},e.prototype.checkSubscriptionsFilters=function(e){var t=!1,n=this.options.datasources;if(n)for(var i=0,a=n;i<a.length;i++){var r=a[i];if(r.filterId&&e.indexOf(r.filterId)>-1){t=!0;break}}return t&&this.hasDataPageLink&&(t=!1,this.updateDataSubscriptions()),t},e.prototype.updateDataSubscriptions=function(){var e=this;this.configuredDatasources=this.ctx.utils.validateDatasources(this.options.datasources),this.ctx.aliasController?this.ctx.aliasController.resolveDatasources(this.configuredDatasources,this.singleEntity).subscribe(function(t){e.configuredDatasources=t,e.prepareDataSubscriptions().subscribe(function(){e.updatePaginatedDataSubscriptions()})},function(){e.notifyDataLoaded()}):(this.hasResolvedData=!0,this.prepareDataSubscriptions().subscribe(function(){e.updatePaginatedDataSubscriptions()}))},e.prototype.updatePaginatedDataSubscriptions=function(){for(var e=0;e<this.entityDataListeners.length;e++){var t=this.entityDataListeners[e];if(t){var n=t.subscriptionOptions.pageLink,i=t.subscriptionOptions.additionalKeyFilters;this.subscribeForPaginatedData(e,n,i)}}},e.prototype.isDataResolved=function(){return this.hasResolvedData},e.prototype.destroy=function(){this.unsubscribe();for(var e=0,t=Object.keys(this.cafs);e<t.length;e++){var n=t[e];this.cafs[n]&&(this.cafs[n](),this.cafs[n]=null)}},e.prototype.notifyDataLoading=function(){this.loadingData=!0,this.callbacks.dataLoading(this)},e.prototype.notifyDataLoaded=function(){this.loadingData=!1,this.callbacks.dataLoading(this)},e.prototype.updateTimewindow=function(){if(this.timeWindow.interval=this.subscriptionTimewindow.aggregation.interval||1e3,this.timeWindow.timezone=this.subscriptionTimewindow.timezone,this.subscriptionTimewindow.realtimeWindowMs)if(this.subscriptionTimewindow.quickInterval){var e=Object(a.s)(this.subscriptionTimewindow.quickInterval,this.subscriptionTimewindow.timezone);this.timeWindow.maxTime=e[1]+this.subscriptionTimewindow.tsOffset,this.timeWindow.minTime=e[0]+this.subscriptionTimewindow.tsOffset}else this.timeWindow.maxTime=C().valueOf()+this.subscriptionTimewindow.tsOffset+this.timeWindow.stDiff,this.timeWindow.minTime=this.timeWindow.maxTime-this.subscriptionTimewindow.realtimeWindowMs;else this.subscriptionTimewindow.fixedWindow&&(this.timeWindow.maxTime=this.subscriptionTimewindow.fixedWindow.endTimeMs+this.subscriptionTimewindow.tsOffset,this.timeWindow.minTime=this.subscriptionTimewindow.fixedWindow.startTimeMs+this.subscriptionTimewindow.tsOffset)},e.prototype.updateTsOffset=function(){var e=Object(a.u)(this.timezone);return this.tsOffset!==e&&(this.tsOffset=e,!0)},e.prototype.updateRealtimeSubscription=function(e){return this.subscriptionTimewindow=e||Object(a.w)(this.timeWindowConfig,this.timeWindow.stDiff,this.stateData,this.ctx.timeService),this.updateTimewindow(),this.subscriptionTimewindow},e.prototype.updateComparisonTimewindow=function(){this.comparisonTimeWindow.interval=this.timewindowForComparison.aggregation.interval||1e3,this.comparisonTimeWindow.timezone=this.timewindowForComparison.timezone,this.timewindowForComparison.fixedWindow&&(this.comparisonTimeWindow.maxTime=this.timewindowForComparison.fixedWindow.endTimeMs+this.timewindowForComparison.tsOffset,this.comparisonTimeWindow.minTime=this.timewindowForComparison.fixedWindow.startTimeMs+this.timewindowForComparison.tsOffset)},e.prototype.updateSubscriptionForComparison=function(){return this.timewindowForComparison=Object(a.x)(this.subscriptionTimewindow,this.timeForComparison,this.comparisonCustomIntervalValue),this.updateComparisonTimewindow(),this.timewindowForComparison},e.prototype.initialPageDataChanged=function(e){this.callbacks.onInitialPageDataChanged(this,e)},e.prototype.forceReInit=function(){this.callbacks.forceReInit()},e.prototype.dataLoaded=function(e,t,n,a,r){var o=this,s=this.configuredDatasources[n];s.dataReceived=!0;var l=e.data.map(function(e,t){return o.entityDataToDatasource(s,e,t)});this.datasourcePages[n]={data:l,hasNext:e.hasNext,totalElements:e.totalElements,totalPages:e.totalPages};var c=l.map(function(e,n){return o.entityDataToDatasourceData(e,t[n])});if(this.dataPages[n]={data:c,hasNext:e.hasNext,totalElements:e.totalElements,totalPages:e.totalPages},s.type===i.a.entity&&e.hasNext&&a.pageSize>1&&this.warnOnPageDataOverflow){var d=this.ctx.translate.instant("widget.data-overflow",{count:e.data.length,total:e.totalElements});this.onSubscriptionMessage({severity:"warn",message:d})}r&&(this.configureLoadedData(),this.onDataUpdated(!0))},e.prototype.configureLoadedData=function(){var e=this;this.datasources.length=0,this.data.length=0,this.hiddenData.length=0,this.displayLegend&&(this.legendData.keys.length=0,this.legendData.data.length=0);var t=0;this.configuredDatasources.forEach(function(n,i){n.dataKeyStartIndex=t;var a=e.datasourcePages[i],r=e.dataPages[i];a&&a.data.forEach(function(n,i){n.dataKeys.forEach(function(n,a){var o=r.data[i][a];if(e.data.push(o),e.hiddenData.push({data:[]}),e.displayLegend){var s={dataKey:n,dataIndex:t};e.legendData.keys.push(s);e.legendData.data.push({min:null,max:null,avg:null,total:null,hidden:!1})}t++}),e.datasources.push(n)})});var n=0;this.datasources.forEach(function(t){t.dataKeys.forEach(function(i){(t.generated||t.isAdditional)&&(i._hash=Math.random(),i.color=e.ctx.utils.getMaterialColor(n)),n++})}),this.comparisonEnabled&&this.datasourcePages.forEach(function(t){t.data.forEach(function(t,n){if(t.isAdditional){var i=e.datasourcePages[t.origDatasourceIndex].data[n];t.dataKeys.forEach(function(e){e.settings.comparisonSettings.color&&(e.color=e.settings.comparisonSettings.color),i.dataKeys[e.origDataKeyIndex].settings.comparisonSettings.color=e.color})}})}),this.caulculateLegendData&&(this.data.forEach(function(t,n){e.updateLegend(n,t.data,!1)}),this.callbacks.legendDataUpdated(this,!0))},e.prototype.entityDataToDatasourceData=function(e,t){var n=this;return e.dataKeys.map(function(i,a){i.hidden=!!i.settings.hideDataByDefault,i.inLegend=!i.settings.removeFromLegend,i.label=n.ctx.utils.customTranslation(i.label,i.label),n.comparisonEnabled&&i.isAdditional&&i.settings.comparisonSettings.comparisonValuesLabel?i.label=Object(p.d)(e,i.settings.comparisonSettings.comparisonValuesLabel):(n.comparisonEnabled&&i.isAdditional&&(i.label=i.label+" "+n.ctx.translate.instant("legend.comparison-time-ago."+n.timeForComparison)),i.pattern=i.label,i.label=Object(p.d)(e,i.pattern));var r={datasource:e,dataKey:i,data:[]};return t&&t[a]&&t[a].data&&(r.data=t[a].data),r})},e.prototype.entityDataToDatasource=function(e,t,n){var i=Object(p.e)(e),a=Object(h.s)(t);return Object(h.K)(i,a),i.generated=n>0,i},e.prototype.dataUpdated=function(e,t,n,a,r){var o,s=this.configuredDatasources[t],l=s.dataKeyStartIndex+n*s.dataKeys.length+a,c=!0;if(o=this.displayLegend&&this.legendData.keys.find(function(e){return e.dataIndex===l}).dataKey.hidden?this.hiddenData[l]:this.data[l],this.type===i.m.latest){var d=o.data;if(e.data.length){if(d&&d[0]&&d[0].length>1&&e.data.length>0){var u=d[0][0],p=d[0][1];u===e.data[0][0]&&p===e.data[0][1]&&(c=!1)}}else c=!1}c&&(this.subscriptionTimewindow&&this.subscriptionTimewindow.realtimeWindowMs&&(this.updateTimewindow(),this.timewindowForComparison&&this.timewindowForComparison.realtimeWindowMs&&this.updateComparisonTimewindow()),o.data=e.data,this.caulculateLegendData&&this.updateLegend(l,e.data,r),this.notifyDataLoaded(),this.onDataUpdated(r))},e.prototype.alarmsLoaded=function(e,t,n){if(this.alarms=e,n>t){var i=this.ctx.translate.instant("widget.alarm-data-overflow",{allowedEntities:t,totalEntities:n});this.onSubscriptionMessage({severity:"warn",message:i})}this.subscriptionTimewindow&&this.subscriptionTimewindow.realtimeWindowMs&&this.updateTimewindow(),this.onDataUpdated()},e.prototype.alarmsUpdated=function(e,t){this.alarmsLoaded(t,0,0)},e.prototype.updateLegend=function(e,t,n){var i=this.legendData.keys.find(function(t){return t.dataIndex===e}).dataKey,a=Object(p.o)(i.decimals)?i.decimals:this.decimals,r=i.units&&i.units.length?i.units:this.units,o=this.legendData.data[e];this.legendConfig.showMin&&(o.min=this.ctx.widgetUtils.formatValue(function(e){if(e.length>0){for(var t=Number(e[0][1]),n=1;n<e.length;n++)t=Math.min(t,Number(e[n][1]));return t}return null}(t),a,r)),this.legendConfig.showMax&&(o.max=this.ctx.widgetUtils.formatValue(function(e){if(e.length>0){for(var t=Number(e[0][1]),n=1;n<e.length;n++)t=Math.max(t,Number(e[n][1]));return t}return null}(t),a,r)),this.legendConfig.showAvg&&(o.avg=this.ctx.widgetUtils.formatValue(function(e){return e.length>0?w(e)/e.length:null}(t),a,r)),this.legendConfig.showTotal&&(o.total=this.ctx.widgetUtils.formatValue(w(t),a,r)),this.callbacks.legendDataUpdated(this,!1!==n)},e.prototype.loadStDiff=function(){var e=this,t=new r.a(1);return this.ctx.getServerTimeDiff&&this.timeWindow?this.ctx.getServerTimeDiff().subscribe(function(n){e.timeWindow.stDiff=n,t.next(),t.complete()},function(){e.timeWindow.stDiff=0,t.next(),t.complete()}):(this.timeWindow&&(this.timeWindow.stDiff=0),t.next(),t.complete()),t.asObservable()},e}();function w(e){if(e.length>0){var t=0;return e.forEach(function(e){t+=Number(e[1])}),t}return null}},cNbA:function(e,t,n){"use strict";n.d(t,"a",function(){return P});var i=n("fXoL"),a=n("3Pt+"),r=n("w0k+"),o=n("XNiG"),s=n("1G5W"),l=n("//Q6"),c=n("wZkO"),d=n("kmnG"),u=n("sYmb"),p=n("qFsG"),m=n("ofXK"),f=n("d3UM"),h=n("7EHt"),g=n("FKr1"),A=n("ihCf"),b=n("nYZa");function y(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device.lwm2m-security-config.endpoint-required")," "))}function v(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",13),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.credentialTypeLwM2MNamesMap.get(a.securityConfigLwM2MType[n])," ")}}function C(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device.lwm2m-security-config.identity-required")," "))}function x(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-form-field",3),i["\u0275\u0275elementStart"](1,"mat-label"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"input",14),i["\u0275\u0275template"](5,C,3,3,"mat-error",6),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3,2,"device.lwm2m-security-config.identity")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",n.lwm2mConfigFormGroup.get("client.identity").hasError("required"))}}function w(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-hint",18),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){i["\u0275\u0275nextContext"]();var n=i["\u0275\u0275reference"](5),a=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate2"]("",(null==n.value?null:n.value.length)||0,"/",a.lenMaxKeyClient,"")}}function S(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device.lwm2m-security-config.client-key-required")," "))}function E(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device.lwm2m-security-config.client-key-pattern")," "))}var I=function(e){return{count:e}};function O(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind2"](2,1,"device.lwm2m-security-config.client-key-length",i["\u0275\u0275pureFunction1"](4,I,n.allowLengthKey.join(", ")))," ")}}function T(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-form-field",3),i["\u0275\u0275elementStart"](1,"mat-label"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"textarea",15,16),i["\u0275\u0275text"](6,"        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](7,w,2,2,"mat-hint",17),i["\u0275\u0275template"](8,S,3,3,"mat-error",6),i["\u0275\u0275template"](9,E,3,3,"mat-error",6),i["\u0275\u0275template"](10,O,3,6,"mat-error",6),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3,6,"device.lwm2m-security-config.client-key")),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("maxlength",n.lenMaxKeyClient),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",n.lwm2mConfigFormGroup.get("client.securityConfigClientMode").value===n.securityConfigLwM2MType.PSK),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.lwm2mConfigFormGroup.get("client.key").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.lwm2mConfigFormGroup.get("client.key").hasError("pattern")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.lwm2mConfigFormGroup.get("client.key").hasError("length"))}}function F(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-form-field",3),i["\u0275\u0275elementStart"](1,"mat-label",4),i["\u0275\u0275text"](2,"device.lwm2m-security-config.client-public-key"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"textarea",19),i["\u0275\u0275text"](4,"        "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"mat-hint",4),i["\u0275\u0275text"](6,"device.lwm2m-security-config.client-public-key-hint"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}function B(e,t){1&e&&i["\u0275\u0275element"](0,"tb-device-credentials-lwm2m-server",20)}function M(e,t){1&e&&i["\u0275\u0275element"](0,"tb-device-credentials-lwm2m-server",21)}var P=function(){function e(e){var t=this;this.fb=e,this.securityConfigLwM2MType=r.d,this.securityConfigLwM2MTypes=Object.keys(r.d),this.credentialTypeLwM2MNamesMap=r.e,this.lenMaxKeyClient=r.c,this.allowLengthKey=[32,64,r.c],this.destroy$=new o.b,this.propagateChange=function(e){},this.securityConfigClientUpdateValidators=function(e){switch(e){case r.d.NO_SEC:t.setValidatorsNoSecX509(),t.lwm2mConfigFormGroup.get("client.cert").disable({emitEvent:!1});break;case r.d.X509:t.setValidatorsNoSecX509(),t.lwm2mConfigFormGroup.get("client.cert").enable({emitEvent:!1});break;case r.d.PSK:t.lenMaxKeyClient=r.c,t.setValidatorsPskRpk(e),t.lwm2mConfigFormGroup.get("client.identity").enable({emitEvent:!1});break;case r.d.RPK:t.lenMaxKeyClient=null,t.setValidatorsPskRpk(e),t.lwm2mConfigFormGroup.get("client.identity").disable({emitEvent:!1})}t.lwm2mConfigFormGroup.get("client.identity").updateValueAndValidity({emitEvent:!1}),t.lwm2mConfigFormGroup.get("client.key").updateValueAndValidity({emitEvent:!1})},this.setValidatorsNoSecX509=function(){t.lwm2mConfigFormGroup.get("client.identity").clearValidators(),t.lwm2mConfigFormGroup.get("client.key").clearValidators(),t.lwm2mConfigFormGroup.get("client.identity").disable({emitEvent:!1}),t.lwm2mConfigFormGroup.get("client.key").disable({emitEvent:!1})},this.setValidatorsPskRpk=function(e){var n=[a.Validators.required,a.Validators.pattern(r.a)];e===r.d.PSK?(t.lwm2mConfigFormGroup.get("client.identity").setValidators([a.Validators.required]),n.push(t.maxLength(t.allowLengthKey))):t.lwm2mConfigFormGroup.get("client.identity").clearValidators(),t.lwm2mConfigFormGroup.get("client.key").setValidators(n),t.lwm2mConfigFormGroup.get("client.key").enable({emitEvent:!1}),t.lwm2mConfigFormGroup.get("client.cert").disable({emitEvent:!1})},this.initLwm2mConfigForm=function(){var e=t.fb.group({client:t.fb.group({endpoint:["",a.Validators.required],securityConfigClientMode:[r.d.NO_SEC],identity:[{value:"",disabled:!0}],key:[{value:"",disabled:!0}],cert:[{value:"",disabled:!0}]}),bootstrap:t.fb.group({bootstrapServer:[Object(r.g)()],lwm2mServer:[Object(r.g)()]})});return e.get("client.securityConfigClientMode").valueChanges.pipe(Object(s.a)(t.destroy$)).subscribe(function(e){t.securityConfigClientModeChanged(e)}),e.valueChanges.pipe(Object(s.a)(t.destroy$)).subscribe(function(e){t.propagateChange(JSON.stringify(e))}),e},this.lwm2mConfigFormGroup=this.initLwm2mConfigForm()}return e.prototype.writeValue=function(e){Object(l.o)(e)&&this.initClientSecurityConfig(JSON.parse(e))},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){e?this.lwm2mConfigFormGroup.disable({emitEvent:!1}):(this.lwm2mConfigFormGroup.enable({emitEvent:!1}),this.securityConfigClientUpdateValidators(this.lwm2mConfigFormGroup.get("client.securityConfigClientMode").value))},e.prototype.validate=function(){return this.lwm2mConfigFormGroup.valid?null:{securityConfigLWm2m:!1}},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.prototype.initClientSecurityConfig=function(e){this.lwm2mConfigFormGroup.patchValue(e,{emitEvent:!1}),this.securityConfigClientUpdateValidators(e.client.securityConfigClientMode)},e.prototype.securityConfigClientModeChanged=function(e){var t=Object(r.f)(e,this.lwm2mConfigFormGroup.get("client.endpoint").value);switch(e){case r.d.PSK:case r.d.RPK:t.key=this.lwm2mConfigFormGroup.get("client.key").value}this.lwm2mConfigFormGroup.get("client").reset(t,{emitEvent:!1}),this.securityConfigClientUpdateValidators(e)},e.prototype.maxLength=function(e){return function(t){var n=t.value;return e.some(function(e){return n.length===e})?null:{length:!0}}},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-device-credentials-lwm2m"]],features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:33,vars:18,consts:[[3,"formGroup"],[3,"label"],["formGroupName","client"],[1,"mat-block"],["translate",""],["matInput","","type","text","formControlName","endpoint","required",""],[4,"ngIf"],["formControlName","securityConfigClientMode"],[3,"value",4,"ngFor","ngForOf"],["class","mat-block",4,"ngIf"],["formGroupName","bootstrap",2,"padding","2px"],["multi","true",1,"mat-body-1"],["matExpansionPanelContent",""],[3,"value"],["matInput","","type","text","formControlName","identity","required",""],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cols","1","formControlName","key","required","",3,"maxlength"],["key",""],["align","end",4,"ngIf"],["align","end"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cols","1","formControlName","cert"],["formControlName","bootstrapServer"],["formControlName","lwm2mServer"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab-group",0),i["\u0275\u0275elementStart"](1,"mat-tab",1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementContainerStart"](3,2),i["\u0275\u0275elementStart"](4,"mat-form-field",3),i["\u0275\u0275elementStart"](5,"mat-label",4),i["\u0275\u0275text"](6,"device.lwm2m-security-config.endpoint"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](7,"input",5),i["\u0275\u0275template"](8,y,3,3,"mat-error",6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"mat-form-field",3),i["\u0275\u0275elementStart"](10,"mat-label",4),i["\u0275\u0275text"](11,"device.lwm2m-security-config.mode"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"mat-select",7),i["\u0275\u0275template"](13,v,2,2,"mat-option",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](14,x,6,4,"mat-form-field",9),i["\u0275\u0275template"](15,T,11,8,"mat-form-field",9),i["\u0275\u0275template"](16,F,7,0,"mat-form-field",9),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"mat-tab",1),i["\u0275\u0275pipe"](18,"translate"),i["\u0275\u0275elementStart"](19,"div",10),i["\u0275\u0275elementStart"](20,"mat-accordion",11),i["\u0275\u0275elementStart"](21,"mat-expansion-panel"),i["\u0275\u0275elementStart"](22,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](23,"mat-panel-title"),i["\u0275\u0275text"](24),i["\u0275\u0275pipe"](25,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](26,B,1,0,"ng-template",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](27,"mat-expansion-panel"),i["\u0275\u0275elementStart"](28,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](29,"mat-panel-title"),i["\u0275\u0275text"](30),i["\u0275\u0275pipe"](31,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](32,M,1,0,"ng-template",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.lwm2mConfigFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,10,"device.lwm2m-security-config.client-tab")),i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("ngIf",t.lwm2mConfigFormGroup.get("client.endpoint").hasError("required")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngForOf",t.securityConfigLwM2MTypes),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.lwm2mConfigFormGroup.get("client.securityConfigClientMode").value===t.securityConfigLwM2MType.PSK),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.lwm2mConfigFormGroup.get("client.securityConfigClientMode").value===t.securityConfigLwM2MType.RPK||t.lwm2mConfigFormGroup.get("client.securityConfigClientMode").value===t.securityConfigLwM2MType.PSK),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.lwm2mConfigFormGroup.get("client.securityConfigClientMode").value===t.securityConfigLwM2MType.X509),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](18,12,"device.lwm2m-security-config.bootstrap-tab")),i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](25,14,"device.lwm2m-security-config.bootstrap-server")," "),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](31,16,"device.lwm2m-security-config.lwm2m-server")," "))},directives:[c.MatTabGroup,a.NgControlStatusGroup,a.FormGroupDirective,c.MatTab,a.FormGroupName,d.MatFormField,d.MatLabel,u.TranslateDirective,p.MatInput,a.DefaultValueAccessor,a.NgControlStatus,a.FormControlName,a.RequiredValidator,m.NgIf,f.MatSelect,m.NgForOf,h.MatAccordion,h.MatExpansionPanel,h.MatExpansionPanelHeader,h.MatExpansionPanelTitle,h.MatExpansionPanelContent,d.MatError,g.MatOption,A.b,a.MaxLengthValidator,d.MatHint,b.a],pipes:[u.TranslatePipe],styles:["[_nghost-%COMP%]   mat-tab-group[_ngcontent-%COMP%]{min-height:330px}[_nghost-%COMP%]     .mat-tab-body-wrapper{min-height:200px}[_nghost-%COMP%]     .mat-tab-body{padding:16px 0}"]}),e}();0,void 0},cWLi:function(e,t,n){"use strict";n.d(t,"a",function(){return T});var i=n("fXoL"),a=n("3Pt+"),r=n("he9t"),o=n("//Q6"),s=n("XiUz"),l=n("sYmb"),c=n("znSr"),d=n("f0Cb"),u=n("ofXK"),p=n("kmnG"),m=n("d3UM"),f=n("qFsG"),h=n("FKr1"),g=n("bTqV"),A=n("Qu3c"),b=n("NFeN");function y(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",17),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,a.dataTypesTranslationMap.get(n))," ")}}function v(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.snmp.data-type-required")," "))}function C(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.snmp.data-key-required")," "))}function x(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.snmp.oid-required")," "))}function w(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.snmp.oid-pattern")," "))}function S(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",18),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"]().index;return i["\u0275\u0275nextContext"]().removeMappingConfig(e)}),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275elementStart"](2,"mat-icon"),i["\u0275\u0275text"](3,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}2&e&&i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](1,1,"action.remove"))}function E(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",8),i["\u0275\u0275elementStart"](1,"div",9),i["\u0275\u0275elementStart"](2,"mat-form-field",10),i["\u0275\u0275element"](3,"mat-label"),i["\u0275\u0275elementStart"](4,"mat-select",11),i["\u0275\u0275template"](5,y,3,4,"mat-option",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,v,3,3,"mat-error",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"mat-form-field",13),i["\u0275\u0275element"](8,"mat-label"),i["\u0275\u0275element"](9,"input",14),i["\u0275\u0275template"](10,C,3,3,"mat-error",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"mat-form-field",13),i["\u0275\u0275element"](12,"mat-label"),i["\u0275\u0275element"](13,"input",15),i["\u0275\u0275template"](14,x,3,3,"mat-error",7),i["\u0275\u0275template"](15,w,3,3,"mat-error",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](16,S,4,3,"button",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("formGroup",n),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngForOf",a.dataTypes),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.get("dataType").hasError("required")),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",n.get("key").hasError("required")),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",n.get("oid").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.get("oid").hasError("pattern")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!a.disabled)}}function I(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"span",19),i["\u0275\u0275text"](2,"device-profile.snmp.please-add-mapping-config"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}function O(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"button",20),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().addMappingConfig()}),i["\u0275\u0275elementStart"](2,"mat-icon",21),i["\u0275\u0275text"](3,"add_circle_outline"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](4),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](5,1,"device-profile.snmp.add-mapping")," "))}var T=function(){function e(e){this.fb=e,this.dataTypes=Object.values(r.c),this.dataTypesTranslationMap=r.d,this.oidPattern=/^\.?([0-2])((\.0)|(\.[1-9][0-9]*))*$/,this.valueChange$=null,this.propagateChange=function(e){}}return e.prototype.ngOnInit=function(){this.mappingsConfigForm=this.fb.group({mappings:this.fb.array([])})},e.prototype.ngOnDestroy=function(){this.valueChange$&&this.valueChange$.unsubscribe()},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.mappingsConfigForm.disable({emitEvent:!1}):this.mappingsConfigForm.enable({emitEvent:!1})},e.prototype.validate=function(){return this.mappingsConfigForm.valid&&this.mappingsConfigForm.value.mappings.length?null:{mapping:!1}},e.prototype.writeValue=function(e){var t=this;this.valueChange$&&this.valueChange$.unsubscribe();var n=[];e&&e.forEach(function(e){n.push(t.createdFormGroup(e))}),this.mappingsConfigForm.setControl("mappings",this.fb.array(n)),e&&e.length||this.addMappingConfig(),this.disabled?this.mappingsConfigForm.disable({emitEvent:!1}):this.mappingsConfigForm.enable({emitEvent:!1}),this.valueChange$=this.mappingsConfigForm.valueChanges.subscribe(function(){t.updateModel()}),this.disabled||this.mappingsConfigForm.valid||this.updateModel()},e.prototype.mappingsConfigFormArray=function(){return this.mappingsConfigForm.get("mappings")},e.prototype.addMappingConfig=function(){this.mappingsConfigFormArray().push(this.createdFormGroup()),this.mappingsConfigForm.updateValueAndValidity(),this.mappingsConfigForm.valid||this.updateModel()},e.prototype.removeMappingConfig=function(e){this.mappingsConfigFormArray().removeAt(e)},e.prototype.createdFormGroup=function(e){return Object(o.C)(e)&&(e={dataType:r.c.STRING,key:"",oid:""}),this.fb.group({dataType:[e.dataType,a.Validators.required],key:[e.key,a.Validators.required],oid:[e.oid,[a.Validators.required,a.Validators.pattern(this.oidPattern)]]})},e.prototype.updateModel=function(){var e=this.mappingsConfigForm.get("mappings").value;this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-snmp-device-profile-mapping"]],inputs:{disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:14,vars:4,consts:[["fxFlex","","fxLayout","column",1,"mapping-config"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxFlex","100"],["fxFlex","","fxLayout","row","fxLayoutGap","8px"],["fxFlex","26","translate","",1,"tb-title","no-padding"],["fxFlex","37","translate","",1,"tb-title","no-padding"],[2,"min-width","40px",3,"fxShow"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","class","mapping-list",3,"formGroup",4,"ngFor","ngForOf"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px",1,"mapping-list",3,"formGroup"],["fxFlex","","fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","start"],["fxFlex","26","floatLabel","always","hideRequiredMarker",""],["formControlName","dataType","required",""],[3,"value",4,"ngFor","ngForOf"],["floatLabel","always","hideRequiredMarker","","fxFlex","37"],["matInput","","formControlName","key","required",""],["matInput","","formControlName","oid","required",""],["mat-icon-button","","color","accent","type","button","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],[3,"value"],["mat-icon-button","","color","accent","type","button","matTooltipPosition","above",3,"matTooltip","click"],["fxLayoutAlign","center center","translate","",1,"tb-prompt","required","required-text"],["mat-stroked-button","","color","accent","type","button",3,"click"],[1,"button-icon"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275elementStart"](3,"label",3),i["\u0275\u0275text"](4,"device-profile.snmp.data-type"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"label",4),i["\u0275\u0275text"](6,"device-profile.snmp.data-key"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"label",4),i["\u0275\u0275text"](8,"device-profile.snmp.oid"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](9,"span",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](10,"mat-divider"),i["\u0275\u0275template"](11,E,17,7,"div",6),i["\u0275\u0275template"](12,I,3,0,"div",7),i["\u0275\u0275template"](13,O,6,3,"div",7),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("fxShow",!t.disabled),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.mappingsConfigFormArray().controls),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.mappingsConfigFormArray().controls.length&&!t.disabled),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.disabled))},directives:[s.b,s.f,s.e,s.g,l.TranslateDirective,c.d,d.MatDivider,u.NgForOf,u.NgIf,a.NgControlStatusGroup,a.FormGroupDirective,p.MatFormField,p.MatLabel,m.MatSelect,a.NgControlStatus,a.FormControlName,a.RequiredValidator,f.MatInput,a.DefaultValueAccessor,h.MatOption,p.MatError,g.MatButton,A.MatTooltip,b.MatIcon],pipes:[l.TranslatePipe],styles:["[_nghost-%COMP%]   .mapping-config[_ngcontent-%COMP%]{min-width:518px}[_nghost-%COMP%]   .mapping-list[_ngcontent-%COMP%]{padding-bottom:8px;height:46px}[_nghost-%COMP%]   .required-text[_ngcontent-%COMP%]{margin:14px 0}[_nghost-%COMP%]     .mapping-list mat-form-field .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     .mapping-list mat-form-field .mat-form-field-wrapper .mat-form-field-infix{border-top-width:.2em;width:auto;min-width:auto}[_nghost-%COMP%]     .mapping-list mat-form-field .mat-form-field-wrapper .mat-form-field-underline{bottom:0}[_nghost-%COMP%]     .mapping-list mat-form-field .mat-form-field-wrapper .mat-form-field-subscript-wrapper{margin-top:1.8em}"]}),e}();0,void 0},cX0b:function(e,t,n){"use strict";n.d(t,"a",function(){return M});var i=n("fXoL"),a=n("qxrw"),r=n("U3y+"),o=n("LRne"),s=n("cp0P"),l=n("l7P3"),c=n("C/rb"),d=n("IzEk"),u=n("vkgz"),p=n("5+tZ"),m=n("lJxs"),f=n("zp9Z"),h=n("ktVl"),g=n("S+vS"),A=n("tM37"),b=n("IktG"),y=n("YnEf"),v=n("p0+G"),C=n("HUB6"),x=n("p/3Z"),w=n("yOwA"),S=n("9HAa"),E=n("y7gY"),I=n("LCzJ"),O=n("sYmb"),T=n("ofXK"),F=n("tyNb"),B=n("0IaG"),M=function(){function e(e,t,n,i,o,s,l,c,d,u){var p=this;this.store=e,this.dashboardService=t,this.customerService=n,this.edgeService=i,this.dialogService=o,this.importExport=s,this.translate=l,this.datePipe=c,this.router=d,this.dialog=u,this.config=new a.e,this.config.entityType=r.b.DASHBOARD,this.config.entityComponent=v.a,this.config.entityTabsComponent=w.a,this.config.entityTranslations=r.d.get(r.b.DASHBOARD),this.config.entityResources=r.c.get(r.b.DASHBOARD),this.config.deleteEntityTitle=function(e){return p.translate.instant("dashboard.delete-dashboard-title",{dashboardTitle:e.title})},this.config.deleteEntityContent=function(){return p.translate.instant("dashboard.delete-dashboard-text")},this.config.deleteEntitiesTitle=function(e){return p.translate.instant("dashboard.delete-dashboards-title",{count:e})},this.config.deleteEntitiesContent=function(){return p.translate.instant("dashboard.delete-dashboards-text")},this.config.loadEntity=function(e){return p.dashboardService.getDashboard(e.id)},this.config.saveEntity=function(e){return p.dashboardService.saveDashboard(e)},this.config.onEntityAction=function(e){return p.onDashboardAction(e)},this.config.detailsReadonly=function(){return"customer_user"===p.config.componentsData.dashboardScope||"edge_customer_user"===p.config.componentsData.dashboardScope}}return e.prototype.resolve=function(e){var t=this,n=e.params;return this.config.componentsData={dashboardScope:e.data.dashboardsType,customerId:n.customerId,edgeId:n.edgeId},this.store.pipe(Object(l.select)(c.d),Object(d.a)(1)).pipe(Object(u.a)(function(n){n.authority===f.a.CUSTOMER_USER&&("edge"===e.data.dashboardsType?t.config.componentsData.dashboardScope="edge_customer_user":t.config.componentsData.dashboardScope="customer_user",t.config.componentsData.customerId=n.customerId)}),Object(p.b)(function(){return t.config.componentsData.customerId?t.customerService.getCustomer(t.config.componentsData.customerId):Object(o.a)(null)}),Object(m.a)(function(e){return e?e.additionalInfo&&e.additionalInfo.isPublic?t.config.tableTitle=t.translate.instant("customer.public-dashboards"):t.config.tableTitle=e.title+": "+t.translate.instant("dashboard.dashboards"):"edge"===t.config.componentsData.dashboardScope?t.edgeService.getEdge(t.config.componentsData.edgeId).subscribe(function(e){return t.config.tableTitle=e.name+": "+t.translate.instant("dashboard.dashboards")}):t.config.tableTitle=t.translate.instant("dashboard.dashboards"),t.config.columns=t.configureColumns(t.config.componentsData.dashboardScope),t.configureEntityFunctions(t.config.componentsData.dashboardScope),t.config.cellActionDescriptors=t.configureCellActions(t.config.componentsData.dashboardScope),t.config.groupActionDescriptors=t.configureGroupActions(t.config.componentsData.dashboardScope),t.config.addActionDescriptors=t.configureAddActions(t.config.componentsData.dashboardScope),t.config.addEnabled=!("customer_user"===t.config.componentsData.dashboardScope||"edge_customer_user"===t.config.componentsData.dashboardScope),t.config.entitiesDeleteEnabled="tenant"===t.config.componentsData.dashboardScope,t.config.deleteEnabled=function(){return"tenant"===t.config.componentsData.dashboardScope},t.config}))},e.prototype.configureColumns=function(e){var t=[new a.b("createdTime","common.created-time",this.datePipe,"150px"),new a.d("title","dashboard.title","50%")];return"tenant"===e&&t.push(new a.d("customersTitle","dashboard.assignedToCustomers","50%",function(e){return Object(b.a)(e)},function(){return{}},!1),new a.d("dashboardIsPublic","dashboard.public","60px",function(e){return Object(a.f)(Object(b.c)(e))},function(){return{}},!1)),t},e.prototype.configureEntityFunctions=function(e){var t=this;"tenant"===e?(this.config.entitiesFetchFunction=function(e){return t.dashboardService.getTenantDashboards(e)},this.config.deleteEntity=function(e){return t.dashboardService.deleteDashboard(e.id)}):"edge"===e||"edge_customer_user"===e?this.config.entitiesFetchFunction=function(e){return t.dashboardService.getEdgeDashboards(t.config.componentsData.edgeId,e,t.config.componentsData.dashboardsType)}:(this.config.entitiesFetchFunction=function(e){return t.dashboardService.getCustomerDashboards(t.config.componentsData.customerId,e)},this.config.deleteEntity=function(e){return t.dashboardService.unassignDashboardFromCustomer(t.config.componentsData.customerId,e.id)})},e.prototype.configureCellActions=function(e){var t=this,n=[];return n.push({name:this.translate.instant("dashboard.open-dashboard"),icon:"dashboard",isEnabled:function(){return!0},onAction:function(e,n){return t.openDashboard(e,n)}}),"tenant"===e&&n.push({name:this.translate.instant("dashboard.export"),icon:"file_download",isEnabled:function(){return!0},onAction:function(e,n){return t.exportDashboard(e,n)}},{name:this.translate.instant("dashboard.make-public"),icon:"share",isEnabled:function(e){return!Object(b.c)(e)},onAction:function(e,n){return t.makePublic(e,n)}},{name:this.translate.instant("dashboard.make-private"),icon:"reply",isEnabled:function(e){return Object(b.c)(e)},onAction:function(e,n){return t.makePrivate(e,n)}},{name:this.translate.instant("dashboard.manage-assigned-customers"),icon:"assignment_ind",isEnabled:function(){return!0},onAction:function(e,n){return t.manageAssignedCustomers(e,n)}}),"customer"===e&&n.push({name:this.translate.instant("dashboard.export"),icon:"file_download",isEnabled:function(){return!0},onAction:function(e,n){return t.exportDashboard(e,n)}},{name:this.translate.instant("dashboard.make-private"),icon:"reply",isEnabled:function(e){return Object(b.b)(e,t.config.componentsData.customerId)},onAction:function(e,n){return t.makePrivate(e,n)}},{name:this.translate.instant("dashboard.unassign-from-customer"),icon:"assignment_return",isEnabled:function(e){return!Object(b.b)(e,t.config.componentsData.customerId)},onAction:function(e,n){return t.unassignFromCustomer(e,n,t.config.componentsData.customerId)}}),"edge"===e&&n.push({name:this.translate.instant("dashboard.export"),icon:"file_download",isEnabled:function(){return!0},onAction:function(e,n){return t.exportDashboard(e,n)}},{name:this.translate.instant("edge.unassign-from-edge"),icon:"assignment_return",isEnabled:function(e){return!0},onAction:function(e,n){return t.unassignFromEdge(e,n)}}),n},e.prototype.configureGroupActions=function(e){var t=this,n=[];return"tenant"===e&&(n.push({name:this.translate.instant("dashboard.assign-dashboards"),icon:"assignment_ind",isEnabled:!0,onAction:function(e,n){return t.assignDashboardsToCustomers(e,n.map(function(e){return e.id.id}))}}),n.push({name:this.translate.instant("dashboard.unassign-dashboards"),icon:"assignment_return",isEnabled:!0,onAction:function(e,n){return t.unassignDashboardsFromCustomers(e,n.map(function(e){return e.id.id}))}})),"customer"===e&&n.push({name:this.translate.instant("dashboard.unassign-dashboards"),icon:"assignment_return",isEnabled:!0,onAction:function(e,n){return t.unassignDashboardsFromCustomer(e,n.map(function(e){return e.id.id}),t.config.componentsData.customerId)}}),"edge"===e&&n.push({name:this.translate.instant("dashboard.unassign-dashboards"),icon:"assignment_return",isEnabled:!0,onAction:function(e,n){return t.unassignDashboardsFromEdge(e,n)}}),n},e.prototype.configureAddActions=function(e){var t=this,n=[];return"tenant"===e&&n.push({name:this.translate.instant("dashboard.create-new-dashboard"),icon:"insert_drive_file",isEnabled:function(){return!0},onAction:function(e){return t.config.table.addEntity(e)}},{name:this.translate.instant("dashboard.import"),icon:"file_upload",isEnabled:function(){return!0},onAction:function(e){return t.importDashboard(e)}}),"customer"===e&&n.push({name:this.translate.instant("dashboard.assign-new-dashboard"),icon:"add",isEnabled:function(){return!0},onAction:function(e){return t.addDashboardsToCustomer(e)}}),"edge"===e&&n.push({name:this.translate.instant("dashboard.assign-new-dashboard"),icon:"add",isEnabled:function(){return!0},onAction:function(e){return t.addDashboardsToEdge(e)}}),n},e.prototype.openDashboard=function(e,t){e&&e.stopPropagation(),"customer"===this.config.componentsData.dashboardScope?this.router.navigateByUrl("customers/"+this.config.componentsData.customerId+"/dashboards/"+t.id.id):"edge"===this.config.componentsData.dashboardScope?this.router.navigateByUrl("edgeInstances/"+this.config.componentsData.edgeId+"/dashboards/"+t.id.id):this.router.navigateByUrl("dashboards/"+t.id.id)},e.prototype.importDashboard=function(e){var t=this;this.importExport.importDashboard().subscribe(function(e){e&&t.config.table.updateData()})},e.prototype.exportDashboard=function(e,t){e&&e.stopPropagation(),this.importExport.exportDashboard(t.id.id)},e.prototype.addDashboardsToCustomer=function(e){var t=this;e&&e.stopPropagation(),this.dialog.open(A.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{customerId:this.config.componentsData.customerId,entityType:r.b.DASHBOARD}}).afterClosed().subscribe(function(e){e&&t.config.table.updateData()})},e.prototype.makePublic=function(e,t){var n=this;e&&e.stopPropagation(),this.dashboardService.makeDashboardPublic(t.id.id).subscribe(function(e){n.dialog.open(x.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{dashboard:e}}).afterClosed().subscribe(function(){n.config.table.updateData()})})},e.prototype.makePrivate=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("dashboard.make-private-dashboard-title",{dashboardTitle:t.title}),this.translate.instant("dashboard.make-private-dashboard-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){e&&n.dashboardService.makeDashboardPrivate(t.id.id).subscribe(function(){n.config.table.updateData()})})},e.prototype.manageAssignedCustomers=function(e,t){var n=t.assignedCustomers?t.assignedCustomers.map(function(e){return e.customerId.id}):[];this.showManageAssignedCustomersDialog(e,[t.id.id],"manage",n)},e.prototype.assignDashboardsToCustomers=function(e,t){this.showManageAssignedCustomersDialog(e,t,"assign")},e.prototype.unassignDashboardsFromCustomers=function(e,t){this.showManageAssignedCustomersDialog(e,t,"unassign")},e.prototype.showManageAssignedCustomersDialog=function(e,t,n,i){var a=this;e&&e.stopPropagation(),this.dialog.open(C.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{dashboardIds:t,actionType:n,assignedCustomersIds:i}}).afterClosed().subscribe(function(e){e&&a.config.table.updateData()})},e.prototype.unassignFromCustomer=function(e,t,n){var i=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("dashboard.unassign-dashboard-title",{dashboardTitle:t.title}),this.translate.instant("dashboard.unassign-dashboard-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){e&&i.dashboardService.unassignDashboardFromCustomer(n,t.id.id).subscribe(function(){i.config.table.updateData()})})},e.prototype.unassignDashboardsFromCustomer=function(e,t,n){var i=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("dashboard.unassign-dashboards-title",{count:t.length}),this.translate.instant("dashboard.unassign-dashboards-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){if(e){var a=[];t.forEach(function(e){a.push(i.dashboardService.unassignDashboardFromCustomer(n,e))}),Object(s.a)(a).subscribe(function(){i.config.table.updateData()})}})},e.prototype.onDashboardAction=function(e){switch(e.action){case"open":return this.openDashboard(e.event,e.entity),!0;case"export":return this.exportDashboard(e.event,e.entity),!0;case"makePublic":return this.makePublic(e.event,e.entity),!0;case"makePrivate":return this.makePrivate(e.event,e.entity),!0;case"manageAssignedCustomers":return this.manageAssignedCustomers(e.event,e.entity),!0;case"unassignFromCustomer":return this.unassignFromCustomer(e.event,e.entity,this.config.componentsData.customerId),!0;case"unassignFromEdge":return this.unassignFromEdge(e.event,e.entity),!0}return!1},e.prototype.addDashboardsToEdge=function(e){var t=this;e&&e.stopPropagation(),this.dialog.open(I.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{edgeId:this.config.componentsData.edgeId,entityType:r.b.DASHBOARD}}).afterClosed().subscribe(function(e){e&&t.config.table.updateData()})},e.prototype.unassignFromEdge=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("dashboard.unassign-dashboard-title",{dashboardTitle:t.title}),this.translate.instant("dashboard.unassign-dashboard-from-edge-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){e&&n.dashboardService.unassignDashboardFromEdge(n.config.componentsData.edgeId,t.id.id).subscribe(function(){n.config.table.updateData()})})},e.prototype.unassignDashboardsFromEdge=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("dashboard.unassign-dashboards-from-edge-title",{count:t.length}),this.translate.instant("dashboard.unassign-dashboards-from-edge-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){if(e){var i=[];t.forEach(function(e){i.push(n.dashboardService.unassignDashboardFromEdge(n.config.componentsData.edgeId,e.id.id))}),Object(s.a)(i).subscribe(function(){n.config.table.updateData()})}})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](l.Store),i["\u0275\u0275inject"](y.a),i["\u0275\u0275inject"](h.a),i["\u0275\u0275inject"](E.a),i["\u0275\u0275inject"](g.a),i["\u0275\u0275inject"](S.a),i["\u0275\u0275inject"](O.TranslateService),i["\u0275\u0275inject"](T.DatePipe),i["\u0275\u0275inject"](F.Router),i["\u0275\u0275inject"](B.MatDialog))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0},cXYG:function(e,t,n){"use strict";n.d(t,"a",function(){return I});var i=n("fXoL"),a=n("3Pt+"),r=n("xw5a"),o=n("XiUz"),s=n("znSr"),l=n("ofXK"),c=n("sYmb"),d=n("kmnG"),u=n("d3UM"),p=n("FKr1"),m=n("qFsG"),f=n("gl+N"),h=n("bSwM"),g=n("bTqV"),A=n("Qu3c"),b=n("NFeN");function y(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-form-field",7),i["\u0275\u0275element"](1,"mat-label"),i["\u0275\u0275element"](2,"input",15),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](3,1,"filter.value")))}function v(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-form-field",7),i["\u0275\u0275element"](1,"mat-label"),i["\u0275\u0275element"](2,"input",16),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](3,1,"filter.value")))}function C(e,t){1&e&&i["\u0275\u0275element"](0,"tb-datetime",17),2&e&&i["\u0275\u0275property"]("showLabel",!1)}function x(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-checkbox",18),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,n.filterPredicateValueFormGroup.get("defaultValue").value?"value.true":"value.false")," ")}}function w(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",9),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,a.dynamicValueSourceTypeTranslations.get(n))," ")}}function S(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",19),i["\u0275\u0275elementStart"](1,"mat-checkbox",20),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",4),i["\u0275\u0275text"](5,"filter.source-attribute-not-set"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](3,1,"filter.inherit-owner")," "))}function E(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",21),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"]();return e.dynamicMode=!e.dynamicMode}),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275element"](2,"mat-icon",22),i["\u0275\u0275elementEnd"]()}if(2&e){var a=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](1,2,a.dynamicMode?"filter.switch-to-default-value":"filter.switch-to-dynamic-value")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("svgIcon",a.dynamicMode?"mdi:numeric":"mdi:variable")}}var I=function(){function e(e){this.fb=e,this.inheritModeForSources=r.C,this.onlyUserDynamicSourceValue=!1,this.valueTypeEnum=r.e,this.allow=!0,this.dynamicValueSourceTypes=Object(r.B)(this.allow),this.dynamicValueSourceTypeTranslations=r.q,this.dynamicMode=!1,this.inheritMode=!1,this.propagateChange=null,this.propagateChangePending=!1}return Object.defineProperty(e.prototype,"allowUserDynamicSource",{set:function(e){this.dynamicValueSourceTypes=Object(r.B)(e),this.allow=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onlyUserDynamicSource",{get:function(){return this.onlyUserDynamicSourceValue},set:function(e){var t=this;this.onlyUserDynamicSourceValue=e,this.filterPredicateValueFormGroup&&(this.updateValidationDynamicMode(),setTimeout(function(){t.updateModel()},0))},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e,t,n=this;switch(this.valueType){case r.e.STRING:e="",t=[];break;case r.e.NUMERIC:e=0,t=[a.Validators.required];break;case r.e.BOOLEAN:e=!1,t=[];break;case r.e.DATE_TIME:e=Date.now(),t=[a.Validators.required]}this.filterPredicateValueFormGroup=this.fb.group({defaultValue:[e,t],dynamicValue:this.fb.group({sourceType:[null],sourceAttribute:[null],inherit:[!1]})}),this.filterPredicateValueFormGroup.get("dynamicValue").get("sourceType").valueChanges.subscribe(function(e){e||n.filterPredicateValueFormGroup.get("dynamicValue").get("sourceAttribute").patchValue(null,{emitEvent:!1}),n.updateShowInheritMode(e)}),this.updateValidationDynamicMode(),this.filterPredicateValueFormGroup.valueChanges.subscribe(function(){n.updateModel()})},e.prototype.registerOnChange=function(e){var t=this;this.propagateChange=e,this.propagateChangePending&&(this.propagateChangePending=!1,setTimeout(function(){t.updateModel()},0))},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.filterPredicateValueFormGroup.disable({emitEvent:!1}):this.filterPredicateValueFormGroup.enable({emitEvent:!1})},e.prototype.validate=function(){return this.filterPredicateValueFormGroup.valid?null:{filterPredicateValue:{valid:!1}}},e.prototype.writeValue=function(e){var t;this.propagateChangePending=!1,this.filterPredicateValueFormGroup.get("defaultValue").patchValue(e.defaultValue,{emitEvent:!1}),this.filterPredicateValueFormGroup.get("dynamicValue").patchValue({sourceType:e.dynamicValue?e.dynamicValue.sourceType:null,sourceAttribute:e.dynamicValue?e.dynamicValue.sourceAttribute:null,inherit:!!e.dynamicValue&&e.dynamicValue.inherit},{emitEvent:this.onlyUserDynamicSource}),this.updateShowInheritMode(null===(t=null==e?void 0:e.dynamicValue)||void 0===t?void 0:t.sourceType)},e.prototype.updateModel=function(){var e=this.filterPredicateValueFormGroup.getRawValue();e.dynamicValue&&(e.dynamicValue.sourceType&&e.dynamicValue.sourceAttribute||(e.dynamicValue=null)),this.propagateChange?this.propagateChange(e):this.propagateChangePending=!0},e.prototype.updateShowInheritMode=function(e){this.inheritModeForSources.includes(e)?this.inheritMode=!0:(this.filterPredicateValueFormGroup.get("dynamicValue.inherit").patchValue(!1,{emitEvent:!1}),this.inheritMode=!1)},e.prototype.updateValidationDynamicMode=function(){this.onlyUserDynamicSource?(this.filterPredicateValueFormGroup.get("dynamicValue.sourceType").setValidators(a.Validators.required),this.filterPredicateValueFormGroup.get("dynamicValue.sourceAttribute").setValidators(a.Validators.required)):(this.filterPredicateValueFormGroup.get("dynamicValue.sourceType").clearValidators(),this.filterPredicateValueFormGroup.get("dynamicValue.sourceAttribute").clearValidators()),this.filterPredicateValueFormGroup.get("dynamicValue.sourceType").updateValueAndValidity({emitEvent:!1}),this.filterPredicateValueFormGroup.get("dynamicValue.sourceAttribute").updateValueAndValidity({emitEvent:!1})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-filter-predicate-value"]],inputs:{disabled:"disabled",allowUserDynamicSource:"allowUserDynamicSource",onlyUserDynamicSource:"onlyUserDynamicSource",valueType:"valueType"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:31,vars:21,consts:[["fxFlex","","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px",3,"formGroup"],["fxFlex","","fxLayout","column",3,"fxShow"],["fxLayout","column",3,"ngSwitch"],[3,"ngSwitchCase"],["translate","",1,"tb-hint"],["formGroupName","dynamicValue","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px"],["fxFlex","35","fxLayout","column"],["floatLabel","always","hideRequiredMarker","",1,"mat-block"],["formControlName","sourceType",3,"placeholder"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","","fxLayout","column"],["matInput","","formControlName","sourceAttribute",3,"placeholder"],["fxLayout","column","style","padding-top: 6px",4,"ngIf"],["mat-icon-button","","class","mat-elevation-z1 tb-mat-32","color","accent","type","button","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],["matInput","","formControlName","defaultValue",3,"placeholder"],["required","","type","number","matInput","","formControlName","defaultValue",3,"placeholder"],["formControlName","defaultValue","dateText","filter.date","timeText","filter.time","required","",3,"showLabel"],["formControlName","defaultValue"],["fxLayout","column",2,"padding-top","6px"],["formControlName","inherit"],["mat-icon-button","","color","accent","type","button","matTooltipPosition","above",1,"mat-elevation-z1","tb-mat-32",3,"matTooltip","click"],[1,"tb-mat-20",3,"svgIcon"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275template"](3,y,4,3,"ng-template",3),i["\u0275\u0275template"](4,v,4,3,"ng-template",3),i["\u0275\u0275template"](5,C,1,1,"ng-template",3),i["\u0275\u0275template"](6,x,3,3,"ng-template",3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"div",4),i["\u0275\u0275text"](8,"filter.default-value"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"div",1),i["\u0275\u0275elementStart"](10,"div",5),i["\u0275\u0275elementStart"](11,"div",6),i["\u0275\u0275elementStart"](12,"mat-form-field",7),i["\u0275\u0275element"](13,"mat-label"),i["\u0275\u0275elementStart"](14,"mat-select",8),i["\u0275\u0275pipe"](15,"translate"),i["\u0275\u0275elementStart"](16,"mat-option",9),i["\u0275\u0275text"](17),i["\u0275\u0275pipe"](18,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](19,w,3,4,"mat-option",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](20,"div",4),i["\u0275\u0275text"](21,"filter.dynamic-source-type"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"div",11),i["\u0275\u0275elementStart"](23,"mat-form-field",7),i["\u0275\u0275element"](24,"mat-label"),i["\u0275\u0275element"](25,"input",12),i["\u0275\u0275pipe"](26,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](27,"div",4),i["\u0275\u0275text"](28,"filter.source-attribute"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](29,S,6,3,"div",13),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](30,E,3,4,"button",14),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.filterPredicateValueFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow",!t.dynamicMode&&!t.onlyUserDynamicSource),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitch",t.valueType),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",t.valueTypeEnum.STRING),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",t.valueTypeEnum.NUMERIC),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",t.valueTypeEnum.DATE_TIME),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",t.valueTypeEnum.BOOLEAN),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("fxShow",t.dynamicMode||t.onlyUserDynamicSource),i["\u0275\u0275advance"](5),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](15,15,"filter.dynamic-source-type")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("value",null),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](18,17,"filter.no-dynamic-value")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.dynamicValueSourceTypes),i["\u0275\u0275advance"](6),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](26,19,"filter.source-attribute")),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",!t.allow&&t.inheritMode),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.onlyUserDynamicSource))},directives:[o.b,o.f,o.e,o.g,a.NgControlStatusGroup,a.FormGroupDirective,s.d,l.NgSwitch,l.NgSwitchCase,c.TranslateDirective,a.FormGroupName,d.MatFormField,d.MatLabel,u.MatSelect,a.NgControlStatus,a.FormControlName,p.MatOption,l.NgForOf,m.MatInput,a.DefaultValueAccessor,l.NgIf,a.NumberValueAccessor,a.RequiredValidator,f.a,h.MatCheckbox,g.MatButton,A.MatTooltip,b.MatIcon],pipes:[c.TranslatePipe],styles:["[_nghost-%COMP%]   .tb-hint[_ngcontent-%COMP%]{padding-bottom:0}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-infix{border-top-width:.2em;width:auto;min-width:auto}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-underline{bottom:0}"]}),e}();0,void 0},"ct/f":function(e,t,n){"use strict";n.d(t,"a",function(){return f});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("xw5a"),d=n("l7P3"),u=n("tyNb");function p(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",15),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.complexOperationTranslations.get(i.complexOperationEnum[n]))," ")}}function m(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"button",16),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,n.isLoading$)||n.complexFilterFormGroup.invalid||!n.complexFilterFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](3,4,n.isAdd?"action.add":"action.update")," ")}}var f=function(e){function t(t,n,i,a,r,o){var l=e.call(this,t,n,r)||this;return l.store=t,l.router=n,l.data=i,l.errorStateMatcher=a,l.dialogRef=r,l.fb=o,l.complexOperations=Object.keys(c.b),l.complexOperationEnum=c.b,l.complexOperationTranslations=c.j,l.submitted=!1,l.isAdd=l.data.isAdd,l.complexFilterFormGroup=l.fb.group({operation:[l.data.complexPredicate.operation,[s.Validators.required]],predicates:[l.data.complexPredicate.predicates,[s.Validators.required]]}),l.data.readonly&&l.complexFilterFormGroup.disable({emitEvent:!1}),l}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.save=function(){if(this.submitted=!0,this.complexFilterFormGroup.valid){var e=this.complexFilterFormGroup.getRawValue();e.type=c.f.COMPLEX,this.dialogRef.close(e)}},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](d.Store),a["\u0275\u0275directiveInject"](u.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-complex-filter-predicate-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:23,vars:18,consts:[[2,"width","900px",3,"formGroup","ngSubmit"],["color","accent"],["translate",""],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],["fxLayout","column",3,"disabled"],[1,"mat-block"],["required","","formControlName","operation"],[3,"value",4,"ngFor","ngForOf"],["formControlName","predicates",3,"valueType","displayUserParameters","allowUserDynamicSource","onlyUserDynamicSource","operation","key"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled",4,"ngIf"],[3,"value"],["mat-raised-button","","color","accent","type","submit",3,"disabled"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2",2),a["\u0275\u0275text"](3,"filter.complex-filter"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",3),a["\u0275\u0275elementStart"](5,"button",4),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](6,"mat-icon",5),a["\u0275\u0275text"](7,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"div",6),a["\u0275\u0275elementStart"](9,"fieldset",7),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275elementStart"](11,"mat-form-field",8),a["\u0275\u0275elementStart"](12,"mat-label",2),a["\u0275\u0275text"](13,"filter.operation.operation"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"mat-select",9),a["\u0275\u0275template"](15,p,3,4,"mat-option",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](16,"tb-filter-predicate-list",11),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"div",12),a["\u0275\u0275elementStart"](18,"button",13),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](19,"async"),a["\u0275\u0275text"](20),a["\u0275\u0275pipe"](21,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](22,m,4,6,"button",14),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.complexFilterFormGroup),a["\u0275\u0275advance"](9),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](10,12,t.isLoading$)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngForOf",t.complexOperations),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("valueType",t.data.valueType)("displayUserParameters",t.data.displayUserParameters)("allowUserDynamicSource",t.data.allowUserDynamicSource)("onlyUserDynamicSource",t.data.onlyUserDynamicSource)("operation",t.complexFilterFormGroup.get("operation").value)("key",t.data.key),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](19,14,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](21,16,t.data.readonly?"action.close":"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!t.data.readonly))},encapsulation:2}),t}(l.a);0,void 0},dSnI:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n("mrSG"),a=n("fXoL"),r=n("JTB5"),o=n("90vD"),s=n("l7P3"),l=n("kmnG"),c=n("sYmb"),d=n("d3UM"),u=n("3Pt+"),p=n("ofXK"),m=n("FKr1");function f(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",4),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.eventTypeTranslationsMap.get(n))," ")}}var h=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n.eventTypeTranslationsMap=o.c,n}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"eventTableConfig",{get:function(){return this.entitiesTableConfig},enumerable:!1,configurable:!0}),t.prototype.eventTypeChanged=function(e){this.eventTableConfig.eventType=e,this.eventTableConfig.table.resetSortAndFilter(!0,!0)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](s.Store))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-event-table-header"]],features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:2,consts:[[1,"mat-block"],["translate",""],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-form-field",0),a["\u0275\u0275elementStart"](1,"mat-label",1),a["\u0275\u0275text"](2,"event.event-type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"mat-select",2),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.eventTypeChanged(e)}),a["\u0275\u0275template"](4,f,3,4,"mat-option",3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngModel",t.eventTableConfig.eventType),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",t.eventTableConfig.eventTypes))},directives:[l.MatFormField,l.MatLabel,c.TranslateDirective,d.MatSelect,u.NgControlStatus,u.NgModel,p.NgForOf,m.MatOption],pipes:[c.TranslatePipe],styles:["[_nghost-%COMP%]{padding-right:8px;min-width:160px}[_nghost-%COMP%]     mat-form-field{font-size:16px;width:200px}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     mat-form-field .mat-form-field-underline{bottom:0}@media screen and (max-width:599px){[_nghost-%COMP%]     mat-form-field{width:100%}[_nghost-%COMP%]     mat-form-field .mat-form-field-infix{width:auto!important}}"]}),t}(r.a);0,void 0},de2O:function(e,t,n){"use strict";n.d(t,"a",function(){return E});var i=n("fXoL"),a=n("3Pt+"),r=n("xw5a"),o=n("JIJk"),s=n("XiUz"),l=n("znSr"),c=n("kmnG"),d=n("qFsG"),u=n("ofXK"),p=n("d3UM"),m=n("FKr1"),f=n("bTqV"),h=n("Qu3c"),g=n("NFeN"),A=n("bSwM"),b=n("sYmb");function y(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,n.defaultValueRequiredError)," ")}}function v(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,n.defaultValueRangeError)," ")}}function C(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,n.defaultValueRangeError)," ")}}function x(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,n.defaultValuePatternError)," ")}}function w(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",8),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,a.dynamicValueSourceTypeTranslations.get(n))," ")}}function S(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",16),i["\u0275\u0275elementStart"](1,"mat-checkbox",17),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](3,1,"filter.inherit-owner")," "))}var E=function(){function e(e){this.fb=e,this.inheritModeForSources=r.C,this.defaultValuePlaceholder="",this.defaultValueRequiredError="",this.defaultValueRangeError="",this.defaultValuePatternError="",this.dynamicValueSourceTypes=Object(r.B)(!1),this.dynamicValueSourceTypeTranslations=r.q,this.dynamicMode=!1,this.inheritMode=!1,this.propagateChange=null}return Object.defineProperty(e.prototype,"alarmConditionType",{set:function(e){switch(e){case o.a.REPEATING:this.defaultValuePlaceholder="device-profile.condition-repeating-value-required",this.defaultValueRequiredError="device-profile.condition-repeating-value-range",this.defaultValueRangeError="device-profile.condition-repeating-value-range",this.defaultValuePatternError="device-profile.condition-repeating-value-pattern";break;case o.a.DURATION:this.defaultValuePlaceholder="device-profile.condition-duration-value",this.defaultValueRequiredError="device-profile.condition-duration-value-required",this.defaultValueRangeError="device-profile.condition-duration-value-range",this.defaultValuePatternError="device-profile.condition-duration-value-pattern"}},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.alarmDurationPredicateValueFormGroup=this.fb.group({defaultValue:[0,[a.Validators.required,a.Validators.min(1),a.Validators.max(2147483647),a.Validators.pattern("[0-9]*")]],dynamicValue:this.fb.group({sourceType:[null],sourceAttribute:[null],inherit:[!1]})}),this.alarmDurationPredicateValueFormGroup.get("dynamicValue").get("sourceType").valueChanges.subscribe(function(t){t||e.alarmDurationPredicateValueFormGroup.get("dynamicValue").get("sourceAttribute").patchValue(null,{emitEvent:!1}),e.updateShowInheritMode(t)}),this.alarmDurationPredicateValueFormGroup.valueChanges.subscribe(function(){e.updateModel()})},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){e?this.alarmDurationPredicateValueFormGroup.disable({emitEvent:!1}):this.alarmDurationPredicateValueFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){this.alarmDurationPredicateValueFormGroup.patchValue({defaultValue:e?e.defaultValue:null,dynamicValue:{sourceType:(null==e?void 0:e.dynamicValue)?e.dynamicValue.sourceType:null,sourceAttribute:(null==e?void 0:e.dynamicValue)?e.dynamicValue.sourceAttribute:null,inherit:(null==e?void 0:e.dynamicValue)?e.dynamicValue.inherit:null}},{emitEvent:!1})},e.prototype.updateModel=function(){var e=null;this.alarmDurationPredicateValueFormGroup.valid&&(e=this.alarmDurationPredicateValueFormGroup.getRawValue()).dynamicValue&&(e.dynamicValue.sourceType&&e.dynamicValue.sourceAttribute||(e.dynamicValue=null)),this.propagateChange(e)},e.prototype.updateShowInheritMode=function(e){this.inheritModeForSources.includes(e)?this.inheritMode=!0:(this.alarmDurationPredicateValueFormGroup.get("dynamicValue.inherit").patchValue(!1,{emitEvent:!1}),this.inheritMode=!1)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-alarm-duration-predicate-value"]],inputs:{alarmConditionType:"alarmConditionType"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:30,vars:26,consts:[["fxFlex","","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px",3,"formGroup"],["fxFlex","","fxLayout","column",3,"fxShow"],["floatLabel","always","hideRequiredMarker","",1,"mat-block"],["required","","type","number","matInput","","step","1","min","1","max","2147483647","formControlName","defaultValue",3,"placeholder"],[4,"ngIf"],["formGroupName","dynamicValue","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px"],["fxFlex","40","fxLayout","column"],["formControlName","sourceType",3,"placeholder"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","","fxLayout","column"],["floatLabel","always","hideRequiredMarker","",1,"mat-block","source-attribute"],["matInput","","formControlName","sourceAttribute",3,"placeholder"],["fxLayout","column","style","padding-top: 6px",4,"ngIf"],["mat-icon-button","","color","accent","type","button","matTooltipPosition","above",1,"mat-elevation-z1","tb-mat-32",3,"matTooltip","click"],[1,"tb-mat-20",3,"svgIcon"],["fxLayout","column",2,"padding-top","6px"],["formControlName","inherit"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"mat-form-field",2),i["\u0275\u0275element"](3,"mat-label"),i["\u0275\u0275element"](4,"input",3),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275template"](6,y,3,3,"mat-error",4),i["\u0275\u0275template"](7,v,3,3,"mat-error",4),i["\u0275\u0275template"](8,C,3,3,"mat-error",4),i["\u0275\u0275template"](9,x,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"div",1),i["\u0275\u0275elementStart"](11,"div",5),i["\u0275\u0275elementStart"](12,"div",6),i["\u0275\u0275elementStart"](13,"mat-form-field",2),i["\u0275\u0275element"](14,"mat-label"),i["\u0275\u0275elementStart"](15,"mat-select",7),i["\u0275\u0275pipe"](16,"translate"),i["\u0275\u0275elementStart"](17,"mat-option",8),i["\u0275\u0275text"](18),i["\u0275\u0275pipe"](19,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](20,w,3,4,"mat-option",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](21,"div",10),i["\u0275\u0275elementStart"](22,"mat-form-field",11),i["\u0275\u0275element"](23,"mat-label"),i["\u0275\u0275element"](24,"input",12),i["\u0275\u0275pipe"](25,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](26,S,4,3,"div",13),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](27,"button",14),i["\u0275\u0275listener"]("click",function(){return t.dynamicMode=!t.dynamicMode}),i["\u0275\u0275pipe"](28,"translate"),i["\u0275\u0275element"](29,"mat-icon",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.alarmDurationPredicateValueFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow",!t.dynamicMode),i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](5,16,t.defaultValuePlaceholder)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.alarmDurationPredicateValueFormGroup.get("defaultValue").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.alarmDurationPredicateValueFormGroup.get("defaultValue").hasError("min")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.alarmDurationPredicateValueFormGroup.get("defaultValue").hasError("max")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.alarmDurationPredicateValueFormGroup.get("defaultValue").hasError("pattern")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow",t.dynamicMode),i["\u0275\u0275advance"](5),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](16,18,"filter.dynamic-source-type")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("value",null),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](19,20,"filter.no-dynamic-value")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.dynamicValueSourceTypes),i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](25,22,"filter.source-attribute")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.inheritMode),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](28,24,t.dynamicMode?"filter.switch-to-default-value":"filter.switch-to-dynamic-value")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("svgIcon",t.dynamicMode?"mdi:numeric":"mdi:variable"))},directives:[s.b,s.f,s.e,s.g,a.NgControlStatusGroup,a.FormGroupDirective,l.d,c.MatFormField,c.MatLabel,a.NumberValueAccessor,d.MatInput,a.DefaultValueAccessor,a.RequiredValidator,a.NgControlStatus,a.FormControlName,u.NgIf,a.FormGroupName,p.MatSelect,m.MatOption,u.NgForOf,f.MatButton,h.MatTooltip,g.MatIcon,c.MatError,A.MatCheckbox],pipes:[b.TranslatePipe],styles:["[_nghost-%COMP%]     .source-attribute .mat-form-field-infix{width:100%}"]}),e}();0,void 0},dj4w:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n("0EQZ"),a=n("2Vo4"),r=n("jtHE"),o=n("LRne"),s=n("Duvn"),l=n("JIr8"),c=n("lJxs"),d=n("05l1"),u=n("x+ZX"),p=n("vkgz"),m=n("IzEk"),f=n("3Tyt"),h=function(){function e(e,t,n,r){this.attributeService=e,this.telemetryWsService=t,this.zone=n,this.translate=r,this.attributesSubject=new a.a([]),this.pageDataSubject=new a.a(Object(s.a)()),this.pageData$=this.pageDataSubject.asObservable(),this.selection=new i.SelectionModel(!0,[])}return e.prototype.connect=function(e){return this.attributesSubject.asObservable()},e.prototype.disconnect=function(e){this.attributesSubject.complete(),this.pageDataSubject.complete(),this.telemetrySubscriber&&(this.telemetrySubscriber.unsubscribe(),this.telemetrySubscriber=null)},e.prototype.loadAttributes=function(e,t,n,i){var a=this;void 0===i&&(i=!1),console.log(e),i&&(this.allAttributes=null,this.telemetrySubscriber&&(this.telemetrySubscriber.unsubscribe(),this.telemetrySubscriber=null)),this.selection.clear();var c=new r.a;return this.fetchAttributes(e,t,n).pipe(Object(l.a)(function(){return Object(o.a)(Object(s.a)())})).subscribe(function(e){console.log("Page Data: ",e),a.attributesSubject.next(e.data),a.pageDataSubject.next(e),c.next(e)}),c},e.prototype.fetchAttributes=function(e,t,n){return this.getAllAttributes(e,t).pipe(Object(c.a)(function(e){return n.filterData(e)}))},e.prototype.getAllAttributes=function(e,t){if(!this.allAttributes){console.log("EntityId: ",e),console.log("AttributesScope: ",t);var n=void 0;f.z.get(t)?(this.telemetrySubscriber=f.w.createEntityAttributesSubscription(this.telemetryWsService,e,t,this.zone),this.telemetrySubscriber.subscribe(),n=this.telemetrySubscriber.attributeData$()):n=this.attributeService.getEntityAttributes(e,t),this.allAttributes=n.pipe(Object(d.a)(1),Object(u.a)())}return console.log("All attributes: ",this.allAttributes),this.allAttributes},e.prototype.isAllSelected=function(){var e=this.selection.selected.length;return this.attributesSubject.pipe(Object(c.a)(function(t){return e===t.length}))},e.prototype.isEmpty=function(){return this.attributesSubject.pipe(Object(c.a)(function(e){return!e.length}))},e.prototype.total=function(){return this.pageDataSubject.pipe(Object(c.a)(function(e){return e.totalElements}))},e.prototype.masterToggle=function(){var e=this;this.attributesSubject.pipe(Object(p.a)(function(t){e.selection.selected.length===t.length?e.selection.clear():t.forEach(function(t){e.selection.select(t)})}),Object(m.a)(1)).subscribe()},e}()},dmmb:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var i=n("fXoL"),a=n("Rf0i"),r=n("ofXK"),o=n("znSr"),s=n("bTqV"),l=n("Qu3c"),c=n("NFeN"),d=n("/t3+"),u=n("sYmb"),p=function(e,t){return{"is-fullscreen":e,"mat-elevation-z1":t}},m=["*"],f=function(){function e(){this.triggerClick=new i.EventEmitter}return e.prototype.ngOnInit=function(){},e.prototype.onTriggerClick=function(){this.triggerClick.emit()},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-dashboard-toolbar"]],inputs:{toolbarOpened:"toolbarOpened",forceFullscreen:"forceFullscreen"},outputs:{triggerClick:"triggerClick"},ngContentSelectors:m,decls:9,vars:8,consts:[["color","accent","direction","left",3,"isOpen","ngClass"],["mat-fab","","color","accent","matTooltipPosition","below",3,"matTooltip","click"],["color","accent"],[1,"mat-toolbar-tools"]],template:function(e,t){1&e&&(i["\u0275\u0275projectionDef"](),i["\u0275\u0275elementStart"](0,"mat-fab-toolbar",0),i["\u0275\u0275elementStart"](1,"mat-fab-trigger"),i["\u0275\u0275elementStart"](2,"button",1),i["\u0275\u0275listener"]("click",function(){return t.onTriggerClick()}),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementStart"](4,"mat-icon"),i["\u0275\u0275text"](5,"more_horiz"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"mat-toolbar",2),i["\u0275\u0275elementStart"](7,"mat-fab-actions",3),i["\u0275\u0275projection"](8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("isOpen",t.toolbarOpened)("ngClass",i["\u0275\u0275pureFunction2"](5,p,t.forceFullscreen,t.forceFullscreen&&t.toolbarOpened)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("matTooltip",t.toolbarOpened?"":i["\u0275\u0275pipeBind1"](3,3,"dashboard.open-toolbar")))},directives:[a.b,r.NgClass,o.b,a.c,s.MatButton,l.MatTooltip,c.MatIcon,d.MatToolbar,a.a],pipes:[u.TranslatePipe],styles:["div.tb-dashboard-page.mobile-app tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper{height:40px}div.tb-dashboard-page.mobile-app tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar,div.tb-dashboard-page.mobile-app tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar .mat-toolbar-tools{height:40px;min-height:40px}div.tb-dashboard-page.mobile-app tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions{height:40px;max-height:40px}div.tb-dashboard-page.mobile-app tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item,div.tb-dashboard-page.mobile-app tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels,div.tb-dashboard-page.mobile-app tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel,div.tb-dashboard-page.mobile-app tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel>div{height:40px}tb-dashboard-toolbar mat-fab-toolbar mat-fab-trigger .mat-fab{width:36px;height:36px;margin:4px 0 0 4px}tb-dashboard-toolbar mat-fab-toolbar mat-fab-trigger .mat-fab .mat-button-wrapper{padding:0}tb-dashboard-toolbar mat-fab-toolbar.is-fullscreen .mat-fab-toolbar-wrapper{height:84px}@media screen and (min-width:960px){tb-dashboard-toolbar mat-fab-toolbar.is-fullscreen .mat-fab-toolbar-wrapper{height:64px}}tb-dashboard-toolbar mat-fab-toolbar.is-fullscreen .mat-fab-toolbar-wrapper mat-toolbar,tb-dashboard-toolbar mat-fab-toolbar.is-fullscreen .mat-fab-toolbar-wrapper mat-toolbar .mat-toolbar-tools{height:80px;min-height:80px}@media screen and (min-width:960px){tb-dashboard-toolbar mat-fab-toolbar.is-fullscreen .mat-fab-toolbar-wrapper mat-toolbar,tb-dashboard-toolbar mat-fab-toolbar.is-fullscreen .mat-fab-toolbar-wrapper mat-toolbar .mat-toolbar-tools{height:64px;min-height:64px}}tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper{height:84px}@media screen and (min-width:960px){tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper{height:50px}}tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar,tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar .mat-toolbar-tools{height:80px;min-height:80px}@media screen and (min-width:960px){tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar,tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar .mat-toolbar-tools{height:50px;min-height:50px}}tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions{margin-top:0;font-size:16px}@media screen and (max-width:959px){tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions{height:80px;max-height:80px}}tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .close-action{margin-right:-18px}tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item{width:100%;height:80px}@media screen and (min-width:960px){tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item{height:46px}}tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels{height:80px}@media screen and (min-width:960px){tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels{height:46px}}tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel{min-width:0;height:40px}@media screen and (max-width:959px){tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel mat-menu{margin:0}}@media screen and (min-width:960px){tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel{height:46px}}tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel>div{height:40px}@media screen and (min-width:960px){tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel>div{height:46px}}tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel mat-select{margin:0;pointer-events:all}tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel tb-states-component{pointer-events:all}tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel button.mat-icon-button:not(.tb-mat-32){min-width:40px}@media screen and (max-width:959px){tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel button.mat-icon-button:not(.tb-mat-32){min-width:28px;padding:2px;margin:0}tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel button.mat-icon-button:not(.tb-mat-32) .mat-button-wrapper{display:block;line-height:24px}}"],encapsulation:2}),e}();0,void 0},"do/i":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("U3y+"),a=function(e){this.entityType=i.b.WIDGET_TYPE,this.id=e}},eIDA:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n("fXoL"),a=n("3Pt+"),r=n("xw5a"),o=n("8LU1"),s=n("0IaG"),l=n("sYmb"),c=n("ofXK"),d=n("znSr"),u=function(e,t,n){return{disabled:e,required:t,nowrap:n}},p=function(){function e(e,t,n,i){this.dialog=e,this.fb=t,this.translate=n,this.datePipe=i,this.noFilterText=this.translate.instant("filter.no-filter-text"),this.addFilterPrompt=this.translate.instant("filter.add-filter-prompt"),this.nowrap=!1,this.requiredClass=!1,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(o.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){},e.prototype.setDisabledState=function(e){this.disabled=e},e.prototype.writeValue=function(e){this.updateFilterText(e)},e.prototype.updateFilterText=function(e){this.requiredClass=!1,e&&e.length?this.filterText=Object(r.G)(this.translate,this.datePipe,e):this.required&&!this.disabled?(this.filterText=this.addFilterPrompt,this.requiredClass=!0):this.filterText=this.noFilterText},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](s.MatDialog),i["\u0275\u0275directiveInject"](a.FormBuilder),i["\u0275\u0275directiveInject"](l.TranslateService),i["\u0275\u0275directiveInject"](c.DatePipe))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-filter-text"]],inputs:{required:"required",disabled:"disabled",noFilterText:"noFilterText",addFilterPrompt:"addFilterPrompt",nowrap:"nowrap"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:1,vars:6,consts:[[1,"tb-filter-text",3,"ngClass","innerHTML"]],template:function(e,t){1&e&&i["\u0275\u0275element"](0,"div",0),2&e&&i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction3"](2,u,t.disabled,t.requiredClass,t.nowrap))("innerHTML",t.filterText,i["\u0275\u0275sanitizeHtml"])},directives:[c.NgClass,d.b],styles:["[_nghost-%COMP%]   .tb-filter-text[_ngcontent-%COMP%]{overflow-y:auto}[_nghost-%COMP%]   .tb-filter-text.disabled[_ngcontent-%COMP%]{opacity:.7}[_nghost-%COMP%]   .tb-filter-text.required[_ngcontent-%COMP%]{color:#f44336;padding:0 4px}[_nghost-%COMP%]   .tb-filter-text.nowrap[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden}[_nghost-%COMP%]     .tb-filter-text{line-height:1.8em}[_nghost-%COMP%]     .tb-filter-text span{display:inline-block;vertical-align:middle;line-height:1.4em}[_nghost-%COMP%]     .tb-filter-text .tb-filter-predicate{padding-right:4px;padding-left:4px}[_nghost-%COMP%]     .tb-filter-text .tb-filter-dynamic-source, [_nghost-%COMP%]     .tb-filter-text .tb-filter-entity-key, [_nghost-%COMP%]     .tb-filter-text .tb-filter-value{font-weight:700;border:1px groove rgba(0,0,0,.25);border-radius:4px;padding-left:4px;padding-right:4px}[_nghost-%COMP%]     .tb-filter-text .tb-filter-entity-key, [_nghost-%COMP%]     .tb-filter-text .tb-filter-value{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:150px}[_nghost-%COMP%]     .tb-filter-text .tb-filter-entity-key{color:#305680}[_nghost-%COMP%]     .tb-filter-text .tb-filter-value{color:#ff5722}[_nghost-%COMP%]     .tb-filter-text .tb-filter-simple-operation{font-size:.9em}[_nghost-%COMP%]     .tb-filter-text .tb-filter-complex-operation{font-weight:700}[_nghost-%COMP%]     .tb-filter-text .tb-filter-dynamic-value .tb-filter-dynamic-source, [_nghost-%COMP%]     .tb-filter-text .tb-filter-dynamic-value .tb-filter-value{color:#0c959c}[_nghost-%COMP%]     .tb-filter-text .tb-filter-bracket .tb-left-bracket, [_nghost-%COMP%]     .tb-filter-text .tb-filter-bracket .tb-right-bracket{font-size:1.2em}"]}),e}();0,void 0},eOYM:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var i=n("fXoL"),a=n("UaJx"),r=n("S+vS"),o=n("mrSG"),s=n("qxrw"),l=n("U3y+"),c=n("4r/P"),d=n("UZbx"),u=n("o3UX"),p=n("10j8"),m=n("aX2P"),f=function(e){function t(t,n,i,a,r,o,p){void 0===o&&(o=null),void 0===p&&(p=d.b.ANY);var f=e.call(this)||this;return f.alarmService=t,f.dialogService=n,f.translate=i,f.datePipe=a,f.dialog=r,f.entityId=o,f.defaultSearchStatus=p,f.loadDataOnInit=!1,f.tableTitle="",f.useTimePageLink=!0,f.defaultTimewindowInterval=Object(m.I)(30*m.b),f.detailsPanelEnabled=!1,f.selectionEnabled=!1,f.searchEnabled=!0,f.addEnabled=!1,f.entitiesDeleteEnabled=!1,f.actionsColumnTitle="alarm.details",f.entityType=l.b.ALARM,f.entityTranslations=l.d.get(l.b.ALARM),f.entityResources={},f.searchStatus=p,f.headerComponent=u.a,f.entitiesFetchFunction=function(e){return f.fetchAlarms(e)},f.defaultSortOrder={property:"createdTime",direction:c.a.DESC},f.columns.push(new s.b("createdTime","alarm.created-time",f.datePipe,"150px")),f.columns.push(new s.d("originatorName","alarm.originator","25%",function(e){return e.originatorName},function(e){return{}},!1)),f.columns.push(new s.d("type","alarm.type","25%")),f.columns.push(new s.d("severity","alarm.severity","25%",function(e){return f.translate.instant(d.h.get(e.severity))},function(e){return{fontWeight:"bold",color:d.g.get(e.severity)}})),f.columns.push(new s.d("status","alarm.status","25%",function(e){return f.translate.instant(d.i.get(e.status))})),f.cellActionDescriptors.push({name:f.translate.instant("alarm.details"),icon:"more_horiz",isEnabled:function(){return!0},onAction:function(e,t){return f.showAlarmDetails(t)}}),f}return Object(o.d)(t,e),t.prototype.fetchAlarms=function(e){var t=new d.a(this.entityId,e,this.searchStatus,null,!0);return this.alarmService.getAlarms(t)},t.prototype.showAlarmDetails=function(e){var t=this;this.dialog.open(p.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{alarmId:e.id.id,allowAcknowledgment:!0,allowClear:!0,displayDetails:!0}}).afterClosed().subscribe(function(e){e&&t.table.updateData()})},t}(s.e),h=n("7ZKe"),g=n("sYmb"),A=n("ofXK"),b=n("0IaG"),y=function(){function e(e,t,n,i,a){this.alarmService=e,this.dialogService=t,this.translate=n,this.datePipe=i,this.dialog=a,this.activeValue=!1,this.dirtyValue=!1}return Object.defineProperty(e.prototype,"active",{set:function(e){this.activeValue!==e&&(this.activeValue=e,this.activeValue&&this.dirtyValue&&(this.dirtyValue=!1,this.entitiesTable.updateData()))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"entityId",{set:function(e){this.entityIdValue=e,this.alarmTableConfig&&this.alarmTableConfig.entityId!==e&&(this.alarmTableConfig.searchStatus=d.b.ANY,this.alarmTableConfig.entityId=e,this.entitiesTable.resetSortAndFilter(this.activeValue),this.activeValue||(this.dirtyValue=!0))},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.dirtyValue=!this.activeValue,this.alarmTableConfig=new f(this.alarmService,this.dialogService,this.translate,this.datePipe,this.dialog,this.entityIdValue,d.b.ANY)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](h.a),i["\u0275\u0275directiveInject"](r.a),i["\u0275\u0275directiveInject"](g.TranslateService),i["\u0275\u0275directiveInject"](A.DatePipe),i["\u0275\u0275directiveInject"](b.MatDialog))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-alarm-table"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](a.a,3),2&e){var n;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.entitiesTable=n.first)}},inputs:{active:"active",entityId:"entityId"},decls:1,vars:1,consts:[[3,"entitiesTableConfig"]],template:function(e,t){1&e&&i["\u0275\u0275element"](0,"tb-entities-table",0),2&e&&i["\u0275\u0275property"]("entitiesTableConfig",t.alarmTableConfig)},directives:[a.a],styles:["[_nghost-%COMP%]     tb-entities-table .mat-drawer-container{background-color:#fff}"]}),e}();0,void 0},ec17:function(e,t,n){"use strict";n.d(t,"a",function(){return Y});var i=n("mrSG"),a=n("fXoL"),r=n("3Pt+"),o=n("xKAQ"),s=(n("qxrw"),n("G8Aa")),l=n("JIJk"),c=n("U3y+"),d=n("APwO"),u=n("/3Pq"),p=n("2OQP"),m=n("YjEJ"),f=n("l7P3"),h=n("sYmb"),g=n("ofXK"),A=n("XiUz"),b=n("znSr"),y=n("kmnG"),v=n("qFsG"),C=n("E4Bx"),x=n("XMqU"),w=n("5U8l"),S=n("qPGf"),E=n("d3UM"),I=n("0HhY"),O=n("bTqV"),T=n("Dvla"),F=n("NFeN"),B=n("FKr1"),M=n("7EHt"),P=n("TpGD"),D=n("8yrD"),k=n("em8L"),_=n("xkYi");function L(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",21),a["\u0275\u0275elementStart"](1,"button",22),a["\u0275\u0275listener"]("click",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onEntityAction(e,"export")}),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"button",22),a["\u0275\u0275listener"]("click",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onEntityAction(e,"setDefault")}),a["\u0275\u0275pipe"](6,"async"),a["\u0275\u0275text"](7),a["\u0275\u0275pipe"](8,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"button",22),a["\u0275\u0275listener"]("click",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onEntityAction(e,"delete")}),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275text"](11),a["\u0275\u0275pipe"](12,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](13,"div",23),a["\u0275\u0275elementStart"](14,"button",24),a["\u0275\u0275listener"]("cbOnSuccess",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onDeviceProfileIdCopied(e)}),a["\u0275\u0275element"](15,"mat-icon",25),a["\u0275\u0275elementStart"](16,"span",5),a["\u0275\u0275text"](17,"device-profile.copyId"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](2,11,i.isLoading$))("fxShow",!i.isEdit),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](4,13,"device-profile.export")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](6,15,i.isLoading$))("fxShow",!(i.isEdit||null!=i.entity&&i.entity.default)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](8,17,"device-profile.set-default")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](10,19,i.isLoading$))("fxShow",!i.hideDelete()&&!i.isEdit),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](12,21,"device-profile.delete")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("cbContent",null==i.entity||null==i.entity.id?null:i.entity.id.id)("fxShow",!i.isEdit)}}function j(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.name-required")," "))}function N(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",26),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.deviceProfileTypeTranslations.get(n))," ")}}function R(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.type-required")," "))}function U(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",26),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.deviceTransportTypeTranslations.get(n))," ")}}function V(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.transport-type-required")," "))}function Q(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-form-field",4),a["\u0275\u0275elementStart"](1,"mat-label",5),a["\u0275\u0275text"](2,"device-profile.transport-type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"mat-select",27),a["\u0275\u0275template"](4,U,3,4,"mat-option",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](5,V,3,3,"mat-error",7),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngForOf",n.deviceTransportTypes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.entityForm.get("transportType").hasError("required"))}}function G(e,t){1&e&&a["\u0275\u0275element"](0,"tb-device-profile-configuration",33)}function H(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-expansion-panel",31),a["\u0275\u0275elementStart"](1,"mat-expansion-panel-header"),a["\u0275\u0275elementStart"](2,"mat-panel-title"),a["\u0275\u0275elementStart"](3,"div",5),a["\u0275\u0275text"](4,"device-profile.profile-configuration"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](5,G,1,0,"ng-template",32),a["\u0275\u0275elementEnd"]()),2&e&&a["\u0275\u0275property"]("expanded",!0)}function K(e,t){1&e&&a["\u0275\u0275element"](0,"tb-device-profile-transport-configuration",34)}function q(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-expansion-panel",31),a["\u0275\u0275elementStart"](1,"mat-expansion-panel-header"),a["\u0275\u0275elementStart"](2,"mat-panel-title"),a["\u0275\u0275elementStart"](3,"div",5),a["\u0275\u0275text"](4,"device-profile.transport-configuration"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](5,K,1,0,"ng-template",32),a["\u0275\u0275elementEnd"]()),2&e&&a["\u0275\u0275property"]("expanded",!0)}function z(e,t){if(1&e&&a["\u0275\u0275element"](0,"tb-device-profile-alarms",35),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("deviceProfileId",n.deviceProfileId)}}function W(e,t){1&e&&a["\u0275\u0275element"](0,"tb-device-profile-provision-configuration",36)}var X=function(e){return{count:e}};function $(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",28),a["\u0275\u0275elementStart"](1,"mat-accordion",29),a["\u0275\u0275template"](2,H,6,1,"mat-expansion-panel",30),a["\u0275\u0275template"](3,q,6,1,"mat-expansion-panel",30),a["\u0275\u0275elementStart"](4,"mat-expansion-panel",31),a["\u0275\u0275elementStart"](5,"mat-expansion-panel-header"),a["\u0275\u0275elementStart"](6,"mat-panel-title"),a["\u0275\u0275elementStart"](7,"div"),a["\u0275\u0275text"](8),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](10,z,1,1,"ng-template",32),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"mat-expansion-panel",31),a["\u0275\u0275elementStart"](12,"mat-expansion-panel-header"),a["\u0275\u0275elementStart"](13,"mat-panel-title"),a["\u0275\u0275elementStart"](14,"div",5),a["\u0275\u0275text"](15,"device-profile.device-provisioning"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](16,W,1,0,"ng-template",32),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",n.displayProfileConfiguration),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.displayTransportConfiguration),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("expanded",!1),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind2"](9,5,"device-profile.alarm-rules-with-count",a["\u0275\u0275pureFunction1"](8,X,n.entityForm.get("profileData.alarms").value?n.entityForm.get("profileData.alarms").value.length:0))),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("expanded",!0)}}var J=function(e){return{"mat-padding":e}},Y=function(e){function t(t,n,i,a,r,o){var s=e.call(this,t,r,i,a,o)||this;return s.store=t,s.translate=n,s.entityValue=i,s.entitiesTableConfigValue=a,s.fb=r,s.cd=o,s.standalone=!1,s.entityType=c.b,s.deviceProfileTypes=Object.values(l.h),s.deviceProfileTypeTranslations=l.H,s.deviceTransportTypes=Object.values(l.j),s.deviceTransportTypeTranslations=l.L,s.serviceType=u.a.TB_RULE_ENGINE,s.otaUpdateType=p.d,s}return Object(i.d)(t,e),t.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},t.prototype.buildForm=function(e){var t,n,i,a,o,s=this;this.deviceProfileId=(null==e?void 0:e.id)?e.id:null,this.displayProfileConfiguration=e&&e.type&&l.G.get(e.type).hasProfileConfiguration,this.displayTransportConfiguration=e&&e.transportType&&l.J.get(e.transportType).hasProfileConfiguration;var c={type:(null==e?void 0:e.provisionType)?e.provisionType:l.i.DISABLED,provisionDeviceKey:null==e?void 0:e.provisionDeviceKey,provisionDeviceSecret:null===(n=null===(t=null==e?void 0:e.profileData)||void 0===t?void 0:t.provisionConfiguration)||void 0===n?void 0:n.provisionDeviceSecret},d=this.fb.group({name:[e?e.name:"",[r.Validators.required]],type:[e?e.type:null,[r.Validators.required]],image:[e?e.image:null],transportType:[e?e.transportType:null,[r.Validators.required]],profileData:this.fb.group({configuration:[e&&!this.isAdd?null===(i=e.profileData)||void 0===i?void 0:i.configuration:{},r.Validators.required],transportConfiguration:[e&&!this.isAdd?null===(a=e.profileData)||void 0===a?void 0:a.transportConfiguration:{},r.Validators.required],alarms:[e&&!this.isAdd?null===(o=e.profileData)||void 0===o?void 0:o.alarms:[]],provisionConfiguration:[c,r.Validators.required]}),defaultRuleChainId:[e&&e.defaultRuleChainId?e.defaultRuleChainId.id:null,[]],defaultDashboardId:[e&&e.defaultDashboardId?e.defaultDashboardId.id:null,[]],defaultQueueName:[e?e.defaultQueueName:"",[]],firmwareId:[e?e.firmwareId:null],softwareId:[e?e.softwareId:null],description:[e?e.description:"",[]]});return d.get("type").valueChanges.subscribe(function(){s.deviceProfileTypeChanged(d)}),d.get("transportType").valueChanges.subscribe(function(){s.deviceProfileTransportTypeChanged(d)}),this.checkIsNewDeviceProfile(e,d),d},t.prototype.checkIsNewDeviceProfile=function(e,t){e&&!e.id&&(t.get("type").patchValue(l.h.DEFAULT,{emitEvent:!0}),t.get("transportType").patchValue(l.j.DEFAULT,{emitEvent:!0}),t.get("provisionType").patchValue(l.i.DISABLED,{emitEvent:!0}))},t.prototype.deviceProfileTypeChanged=function(e){var t=e.get("type").value;this.displayProfileConfiguration=t&&l.G.get(t).hasProfileConfiguration;var n=e.getRawValue().profileData;n||(n={configuration:null,transportConfiguration:null}),n.configuration=Object(l.v)(t),e.patchValue({profileData:n})},t.prototype.deviceProfileTransportTypeChanged=function(e){var t=e.get("transportType").value;this.displayTransportConfiguration=t&&l.J.get(t).hasProfileConfiguration;var n=e.getRawValue().profileData;n||(n={configuration:null,transportConfiguration:null}),n.transportConfiguration=Object(l.w)(t),e.patchValue({profileData:n})},t.prototype.updateForm=function(e){var t,n,i,a,r;this.deviceProfileId=e.id,this.displayProfileConfiguration=e.type&&l.G.get(e.type).hasProfileConfiguration,this.displayTransportConfiguration=e.transportType&&l.J.get(e.transportType).hasProfileConfiguration;var o={type:(null==e?void 0:e.provisionType)?e.provisionType:l.i.DISABLED,provisionDeviceKey:null==e?void 0:e.provisionDeviceKey,provisionDeviceSecret:null===(n=null===(t=null==e?void 0:e.profileData)||void 0===t?void 0:t.provisionConfiguration)||void 0===n?void 0:n.provisionDeviceSecret};this.entityForm.patchValue({name:e.name}),this.entityForm.patchValue({type:e.type},{emitEvent:!1}),this.entityForm.patchValue({image:e.image},{emitEvent:!1}),this.entityForm.patchValue({transportType:e.transportType},{emitEvent:!1}),this.entityForm.patchValue({provisionType:e.provisionType},{emitEvent:!1}),this.entityForm.patchValue({provisionDeviceKey:e.provisionDeviceKey},{emitEvent:!1}),this.entityForm.patchValue({profileData:{configuration:null===(i=e.profileData)||void 0===i?void 0:i.configuration,transportConfiguration:null===(a=e.profileData)||void 0===a?void 0:a.transportConfiguration,alarms:null===(r=e.profileData)||void 0===r?void 0:r.alarms,provisionConfiguration:o}},{emitEvent:!1}),this.entityForm.patchValue({defaultRuleChainId:e.defaultRuleChainId?e.defaultRuleChainId.id:null},{emitEvent:!1}),this.entityForm.patchValue({defaultDashboardId:e.defaultDashboardId?e.defaultDashboardId.id:null},{emitEvent:!1}),this.entityForm.patchValue({defaultQueueName:e.defaultQueueName},{emitEvent:!1}),this.entityForm.patchValue({firmwareId:e.firmwareId},{emitEvent:!1}),this.entityForm.patchValue({softwareId:e.softwareId},{emitEvent:!1}),this.entityForm.patchValue({description:e.description},{emitEvent:!1})},t.prototype.prepareFormValue=function(t){t.defaultRuleChainId&&(t.defaultRuleChainId=new d.a(t.defaultRuleChainId)),t.defaultDashboardId&&(t.defaultDashboardId=new m.a(t.defaultDashboardId));var n=t.profileData.provisionConfiguration;return t.provisionType=n.type,t.provisionDeviceKey=n.provisionDeviceKey,delete n.provisionDeviceKey,e.prototype.prepareFormValue.call(this,t)},t.prototype.onDeviceProfileIdCopied=function(e){this.store.dispatch(new o.b({message:this.translate.instant("device-profile.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](f.Store),a["\u0275\u0275directiveInject"](h.TranslateService),a["\u0275\u0275directiveInject"]("entity",8),a["\u0275\u0275directiveInject"]("entitiesTableConfig",8),a["\u0275\u0275directiveInject"](r.FormBuilder),a["\u0275\u0275directiveInject"](a.ChangeDetectorRef))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-device-profile"]],inputs:{standalone:"standalone"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:33,vars:29,consts:[["class","tb-details-buttons","fxLayout.xs","column",4,"ngIf"],["fxLayout","column",3,"ngClass"],[3,"formGroup"],[2,"min-width","0",3,"disabled"],[1,"mat-block"],["translate",""],["matInput","","formControlName","name","required",""],[4,"ngIf"],["labelText","device-profile.default-rule-chain","formControlName","defaultRuleChainId"],["formControlName","defaultDashboardId",3,"placeholder"],["tb-hint",""],["formControlName","defaultQueueName",3,"queueType"],["formControlName","firmwareId",3,"useFullEntityId","type","deviceProfileId"],["formControlName","softwareId",3,"useFullEntityId","type","deviceProfileId"],["fxHide","",1,"mat-block"],["formControlName","type","required",""],[3,"value",4,"ngFor","ngForOf"],["fxFlex","","maxSizeByte","524288","formControlName","image",3,"label"],["matInput","","formControlName","description","rows","2"],["class","mat-block",4,"ngIf"],["formGroupName","profileData","style","padding-bottom: 16px;",4,"ngIf"],["fxLayout.xs","column",1,"tb-details-buttons"],["mat-raised-button","","color","accent",3,"disabled","fxShow","click"],["fxLayout","row","fxLayout.xs","column"],["mat-raised-button","","ngxClipboard","",3,"cbContent","fxShow","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"],[3,"value"],["formControlName","transportType","required",""],["formGroupName","profileData",2,"padding-bottom","16px"],["multi","true"],[3,"expanded",4,"ngIf"],[3,"expanded"],["matExpansionPanelContent",""],["formControlName","configuration","required",""],["formControlName","transportConfiguration","required",""],["formControlName","alarms",3,"deviceProfileId"],["formControlName","provisionConfiguration"]],template:function(e,t){1&e&&(a["\u0275\u0275template"](0,L,18,23,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"form",2),a["\u0275\u0275elementStart"](3,"fieldset",3),a["\u0275\u0275pipe"](4,"async"),a["\u0275\u0275elementStart"](5,"mat-form-field",4),a["\u0275\u0275elementStart"](6,"mat-label",5),a["\u0275\u0275text"](7,"device-profile.name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](8,"input",6),a["\u0275\u0275template"](9,j,3,3,"mat-error",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](10,"tb-rule-chain-autocomplete",8),a["\u0275\u0275elementStart"](11,"tb-dashboard-autocomplete",9),a["\u0275\u0275pipe"](12,"translate"),a["\u0275\u0275elementStart"](13,"div",10),a["\u0275\u0275text"](14),a["\u0275\u0275pipe"](15,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](16,"tb-queue-type-list",11),a["\u0275\u0275element"](17,"tb-ota-package-autocomplete",12),a["\u0275\u0275element"](18,"tb-ota-package-autocomplete",13),a["\u0275\u0275elementStart"](19,"mat-form-field",14),a["\u0275\u0275elementStart"](20,"mat-label",5),a["\u0275\u0275text"](21,"device-profile.type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"mat-select",15),a["\u0275\u0275template"](23,N,3,4,"mat-option",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](24,R,3,3,"mat-error",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](25,"tb-image-input",17),a["\u0275\u0275pipe"](26,"translate"),a["\u0275\u0275elementStart"](27,"mat-form-field",4),a["\u0275\u0275elementStart"](28,"mat-label",5),a["\u0275\u0275text"](29,"device-profile.description"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](30,"textarea",18),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](31,Q,6,2,"mat-form-field",19),a["\u0275\u0275template"](32,$,17,10,"div",20),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("ngIf",!t.standalone),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](27,J,!t.standalone)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",t.entityForm),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](4,19,t.isLoading$)||!t.isEdit),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",t.entityForm.get("name").hasError("required")),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](12,21,"device-profile.mobile-dashboard")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](15,23,"device-profile.mobile-dashboard-hint")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("queueType",t.serviceType),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("useFullEntityId",!0)("type",t.otaUpdateType.FIRMWARE)("deviceProfileId",null==t.deviceProfileId?null:t.deviceProfileId.id),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("useFullEntityId",!0)("type",t.otaUpdateType.SOFTWARE)("deviceProfileId",null==t.deviceProfileId?null:t.deviceProfileId.id),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngForOf",t.deviceProfileTypes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.entityForm.get("type").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](26,25,"device-profile.image")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",t.standalone),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.standalone))},directives:[g.NgIf,A.f,g.NgClass,b.b,r["\u0275angular_packages_forms_forms_ba"],r.NgControlStatusGroup,r.FormGroupDirective,y.MatFormField,y.MatLabel,h.TranslateDirective,v.MatInput,r.DefaultValueAccessor,r.NgControlStatus,r.FormControlName,r.RequiredValidator,C.a,x.a,w.a,S.a,b.d,E.MatSelect,g.NgForOf,I.a,A.b,O.MatButton,T.a,F.MatIcon,y.MatError,B.MatOption,r.FormGroupName,M.MatAccordion,M.MatExpansionPanel,M.MatExpansionPanelHeader,M.MatExpansionPanelTitle,M.MatExpansionPanelContent,P.a,D.a,k.a,_.a],pipes:[g.AsyncPipe,h.TranslatePipe],encapsulation:2}),t}(s.a);0,void 0},eeD6:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return G});var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=n("C/rb"),s=n("aX2P"),l=n("k9IB"),c=n("Ljk9"),d=n("5OJv"),u=n("jtHE"),p=n("S+vS"),m=n("//Q6"),f=n("he9t"),h=n("02Lk"),g=n("HR/i"),A=n("OiFK"),b=n("72sC"),y=n("l7P3"),v=n("0MNC"),C=n("XiUz"),x=n("ofXK"),w=n("znSr"),S=n("Xa2L"),E=n("STbY"),I=n("sYmb"),O=n("NFeN"),T=n("EbnC"),F=["gridster"],B=["dashboardMenuTrigger"],M=["widgetMenuTrigger"];function P(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"span",19),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"keyboardShortcut"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,n.shortcut),"")}}function D(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-icon"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](n.icon)}}function k(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",15),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](n);var e=t.$implicit,i=a["\u0275\u0275nextContext"](2);return e.action(i.dashboardContextMenuEvent)}),a["\u0275\u0275template"](1,P,3,3,"span",16),a["\u0275\u0275template"](2,D,2,1,"mat-icon",17),a["\u0275\u0275elementStart"](3,"span",18),a["\u0275\u0275text"](4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;a["\u0275\u0275property"]("disabled",!i.enabled),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",i.shortcut),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",i.icon),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](i.value)}}function _(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",13),a["\u0275\u0275template"](1,k,5,4,"button",14),a["\u0275\u0275elementEnd"]()),2&e){var n=t.items;a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",n)}}function L(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"span",19),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"keyboardShortcut"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,n.shortcut),"")}}function j(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-icon"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](n.icon)}}function N(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",15),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](n);var e=t.$implicit,i=a["\u0275\u0275nextContext"]().widget,r=a["\u0275\u0275nextContext"]();return e.action(r.widgetContextMenuEvent,i)}),a["\u0275\u0275template"](1,L,3,3,"span",16),a["\u0275\u0275template"](2,j,2,1,"mat-icon",17),a["\u0275\u0275elementStart"](3,"span",18),a["\u0275\u0275text"](4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;a["\u0275\u0275property"]("disabled",!i.enabled),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",i.shortcut),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",i.icon),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](i.value)}}function R(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",13),a["\u0275\u0275template"](1,N,5,4,"button",14),a["\u0275\u0275elementEnd"]()),2&e){var n=t.items;a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",n)}}var U=function(e){return{"tb-noselect":e}};function V(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"gridster-item",20),a["\u0275\u0275elementStart"](1,"tb-widget-container",21),a["\u0275\u0275listener"]("widgetFullscreenChanged",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onWidgetFullscreenChanged(e)})("widgetComponentAction",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit;return a["\u0275\u0275nextContext"]().onWidgetComponentAction(e,i)}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("item",i)("ngClass",a["\u0275\u0275pureFunction1"](12,U,r.isEdit)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("widget",i)("dashboardWidgets",r.dashboardWidgets)("dashboardStyle",r.dashboardStyle)("backgroundImage",r.backgroundImage)("isEdit",r.isEdit)("isMobile",r.isMobileSize)("isEditActionEnabled",r.isEditActionEnabled)("isExportActionEnabled",r.isExportActionEnabled)("isRemoveActionEnabled",r.isRemoveActionEnabled)("disableWidgetInteraction",r.disableWidgetInteraction)}}var Q=function(e){return{overflowY:e}},G=function(t){function n(e,n,i,a,r,s,l,c,p){var m=t.call(this,e)||this;return m.store=e,m.utils=n,m.timeService=i,m.dialogService=a,m.breakpointObserver=r,m.differs=s,m.kvDiffers=l,m.cd=c,m.ngZone=p,m.disableWidgetInteraction=!1,m.ignoreLoading=!0,m.dashboardTimewindowChangedSubject=new u.a,m.dashboardTimewindowChanged=m.dashboardTimewindowChangedSubject.asObservable().pipe(Object(h.a)()),m.isWidgetExpanded=!1,m.isMobileSize=!1,m.dashboardMenuPosition={x:"0px",y:"0px"},m.widgetMenuPosition={x:"0px",y:"0px"},m.dashboardWidgets=new d.a(m,m.differs.find([]).create(function(e,t){return t}),m.kvDiffers.find([]).create()),m.optionsChangeNotificationsPaused=!1,m.authUser=Object(o.b)(e),m}return Object(i.d)(n,t),n.prototype.ngOnInit=function(){var e=this;this.dashboardTimewindow||(this.dashboardTimewindow=this.timeService.defaultTimewindow()),this.gridsterOpts={gridType:c.a.ScrollVertical,keepFixedHeightInMobile:!0,disableWarnings:!1,disableAutoPositionOnConflict:!1,pushItems:!1,swap:!1,maxRows:100,minCols:this.columns?this.columns:24,maxCols:3e3,maxItemCols:1e3,maxItemRows:1e3,maxItemArea:1e6,outerMargin:!0,margin:Object(m.n)(this.margin)?this.margin:10,minItemCols:1,minItemRows:1,defaultItemCols:8,defaultItemRows:6,resizable:{enabled:this.isEdit},draggable:{enabled:this.isEdit},itemChangeCallback:function(t){return e.dashboardWidgets.sortWidgets()},itemInitCallback:function(e,t){t.item.gridsterItemComponent=t}},this.updateMobileOpts(),this.breakpointObserverSubscription=this.breakpointObserver.observe(f.g["gt-sm"]).subscribe(function(){e.updateMobileOpts(),e.notifyGridsterOptionsChanged()}),this.updateWidgets()},n.prototype.ngOnDestroy=function(){t.prototype.ngOnDestroy.call(this),this.gridsterResize$&&this.gridsterResize$.disconnect(),this.breakpointObserverSubscription&&this.breakpointObserverSubscription.unsubscribe(),this.gridster=null},n.prototype.ngDoCheck=function(){this.optionsChangeNotificationsPaused||this.dashboardWidgets.doCheck()},n.prototype.ngOnChanges=function(e){for(var t=!1,n=!1,i=!1,a=!1,r=!1,o=0,s=Object.keys(e);o<s.length;o++){var l=s[o],c=e[l];c.firstChange||c.currentValue===c.previousValue||(["isMobile","isMobileDisabled","autofillHeight","mobileAutofillHeight","mobileRowHeight"].includes(l)?t=!0:["margin","columns"].includes(l)?n=!0:"isEdit"===l?i=!0:["widgets","widgetLayouts"].includes(l)?a=!0:"dashboardTimewindow"===l&&(r=!0))}a?this.updateWidgets():r&&this.dashboardTimewindowChangedSubject.next(this.dashboardTimewindow),t&&this.updateMobileOpts(),n&&this.updateLayoutOpts(),i&&this.updateEditingOpts(),(t||n||i)&&this.notifyGridsterOptionsChanged()},n.prototype.updateWidgets=function(){this.dashboardWidgets.setWidgets(this.widgets,this.widgetLayouts),this.dashboardWidgets.doCheck()},n.prototype.updateWidgetLayouts=function(){this.dashboardWidgets.widgetLayoutsUpdated()},n.prototype.ngAfterViewInit=function(){var e=this;this.gridsterResize$=new g.a(function(){e.onGridsterParentResize()}),this.gridsterResize$.observe(this.gridster.el)},n.prototype.onUpdateTimewindow=function(e,t,n,i){var a=this;this.ngZone.run(function(){a.originalDashboardTimewindow||i||(a.originalDashboardTimewindow=Object(m.e)(a.dashboardTimewindow)),a.dashboardTimewindow=Object(s.O)(a.dashboardTimewindow,e,t,n,a.timeService),a.dashboardTimewindowChangedSubject.next(a.dashboardTimewindow)})},n.prototype.onResetTimewindow=function(){var e=this;this.ngZone.run(function(){e.originalDashboardTimewindow&&(e.dashboardTimewindow=Object(m.e)(e.originalDashboardTimewindow),e.originalDashboardTimewindow=null,e.dashboardTimewindowChangedSubject.next(e.dashboardTimewindow))})},n.prototype.isAutofillHeight=function(){return this.isMobileSize?!!Object(m.n)(this.mobileAutofillHeight)&&this.mobileAutofillHeight:!!Object(m.n)(this.autofillHeight)&&this.autofillHeight},n.prototype.openDashboardContextMenu=function(e){if(this.callbacks&&this.callbacks.prepareDashboardContextMenu){var t=this.callbacks.prepareDashboardContextMenu(e);t&&t.length&&(e.preventDefault(),e.stopPropagation(),this.dashboardContextMenuEvent=e,this.dashboardMenuPosition.x=e.clientX+"px",this.dashboardMenuPosition.y=e.clientY+"px",this.dashboardMenuTrigger.menuData={items:t},this.dashboardMenuTrigger.openMenu())}},n.prototype.openWidgetContextMenu=function(e,t){if(this.callbacks&&this.callbacks.prepareWidgetContextMenu){var n=this.callbacks.prepareWidgetContextMenu(e,t.widget);n&&n.length&&(e.preventDefault(),e.stopPropagation(),this.widgetContextMenuEvent=e,this.widgetMenuPosition.x=e.clientX+"px",this.widgetMenuPosition.y=e.clientY+"px",this.widgetMenuTrigger.menuData={items:n,widget:t.widget},this.widgetMenuTrigger.openMenu())}},n.prototype.onWidgetFullscreenChanged=function(e){this.isWidgetExpanded=e},n.prototype.onWidgetComponentAction=function(e,t){var n=e.event;switch(e.actionType){case b.a.MOUSE_DOWN:this.widgetMouseDown(n,t);break;case b.a.CLICKED:this.widgetClicked(n,t);break;case b.a.CONTEXT_MENU:this.openWidgetContextMenu(n,t);break;case b.a.EDIT:this.editWidget(n,t);break;case b.a.EXPORT:this.exportWidget(n,t);break;case b.a.REMOVE:this.removeWidget(n,t)}},n.prototype.widgetMouseDown=function(e,t){this.callbacks&&this.callbacks.onWidgetMouseDown&&this.callbacks.onWidgetMouseDown(e,t.widget)},n.prototype.widgetClicked=function(e,t){this.callbacks&&this.callbacks.onWidgetClicked&&this.callbacks.onWidgetClicked(e,t.widget)},n.prototype.editWidget=function(e,t){e&&e.stopPropagation(),this.isEditActionEnabled&&this.callbacks&&this.callbacks.onEditWidget&&this.callbacks.onEditWidget(e,t.widget)},n.prototype.exportWidget=function(e,t){e&&e.stopPropagation(),this.isExportActionEnabled&&this.callbacks&&this.callbacks.onExportWidget&&this.callbacks.onExportWidget(e,t.widget)},n.prototype.removeWidget=function(e,t){e&&e.stopPropagation(),this.isRemoveActionEnabled&&this.callbacks&&this.callbacks.onRemoveWidget&&this.callbacks.onRemoveWidget(e,t.widget)},n.prototype.highlightWidget=function(e,t){var n=this.dashboardWidgets.highlightWidget(e);n&&this.scrollToWidget(n,t)},n.prototype.selectWidget=function(e,t){var n=this.dashboardWidgets.selectWidget(e);n&&this.scrollToWidget(n,t)},n.prototype.getSelectedWidget=function(){var e=this.dashboardWidgets.getSelectedWidget();return e?e.widget:null},n.prototype.getEventGridPosition=function(t){var n={row:0,column:0},i=e(this.gridster.el),a=0,r=0;t instanceof MouseEvent&&(a=t.pageX,r=t.pageY);var o=i.offset(),s=a-o.left+i.scrollLeft(),l=r-o.top+i.scrollTop();return n.row=this.gridster.pixelsToPositionY(l,Math.floor),n.column=this.gridster.pixelsToPositionX(s,Math.floor),n},n.prototype.resetHighlight=function(){var e=this,t=this.dashboardWidgets.resetHighlight();t&&setTimeout(function(){e.scrollToWidget(t,0)},0)},n.prototype.scrollToWidget=function(e,t){var n=this,i=this.gridster.el;e.gridsterItemComponent$().subscribe(function(e){var a,r=e.el,o=(i.clientHeight-r.clientHeight)/2;a=n.isMobileSize?r.offsetTop:a=e.top,o>0&&(a-=o),Object(m.a)(i,a,t)})},n.prototype.updateMobileOpts=function(e){this.isMobileSize=this.checkIsMobileSize();var t=this.isAutofillHeight();this.gridsterOpts.gridType=t?this.isMobileSize?c.a.Fixed:c.a.Fit:this.isMobileSize?c.a.Fixed:c.a.ScrollVertical;var n=this.isMobileSize?2e4:0;this.gridsterOpts.mobileBreakpoint=n;var i=this.detectRowSize(this.isMobileSize,t,e);this.gridsterOpts.fixedRowHeight!==i&&(this.gridsterOpts.fixedRowHeight=i)},n.prototype.onGridsterParentResize=function(){var e=this.gridster.el.offsetHeight;this.isMobileSize&&this.mobileAutofillHeight&&e&&this.updateMobileOpts(e),this.notifyGridsterOptionsChanged()},n.prototype.updateLayoutOpts=function(){this.gridsterOpts.minCols=this.columns?this.columns:24,this.gridsterOpts.margin=Object(m.n)(this.margin)?this.margin:10},n.prototype.updateEditingOpts=function(){this.gridsterOpts.resizable.enabled=this.isEdit,this.gridsterOpts.draggable.enabled=this.isEdit},n.prototype.notifyGridsterOptionsChanged=function(){this.optionsChangeNotificationsPaused||this.gridster&&this.gridster.options&&this.gridster.optionsChanged()},n.prototype.pauseChangeNotifications=function(){this.optionsChangeNotificationsPaused=!0},n.prototype.resumeChangeNotifications=function(){this.optionsChangeNotificationsPaused=!1},n.prototype.notifyLayoutUpdated=function(){this.updateWidgetLayouts()},n.prototype.detectRowSize=function(e,t,n){var i=null;if(t){if(t&&e&&(n||(n=this.gridster.el.offsetHeight),n)){for(var a=0,r=0,o=this.dashboardWidgets.dashboardWidgets;r<o.length;r++){a+=o[r].rows}i=(n-this.gridsterOpts.margin*(this.dashboardWidgets.dashboardWidgets.length+2))/a}}else e&&(i=Object(m.n)(this.mobileRowHeight)?this.mobileRowHeight:70);return i},n.prototype.checkIsMobileSize=function(){var e=!0===this.isMobileDisabled,t=!0===this.isMobile&&!e;return t||e||(t=!this.breakpointObserver.isMatched(f.g["gt-sm"])),t},n.\u0275fac=function(e){return new(e||n)(a["\u0275\u0275directiveInject"](y.Store),a["\u0275\u0275directiveInject"](A.a),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](p.a),a["\u0275\u0275directiveInject"](v.BreakpointObserver),a["\u0275\u0275directiveInject"](a.IterableDiffers),a["\u0275\u0275directiveInject"](a.KeyValueDiffers),a["\u0275\u0275directiveInject"](a.ChangeDetectorRef),a["\u0275\u0275directiveInject"](a.NgZone))},n.\u0275cmp=a["\u0275\u0275defineComponent"]({type:n,selectors:[["tb-dashboard"]],viewQuery:function(e,t){if(1&e&&(a["\u0275\u0275viewQuery"](F,3),a["\u0275\u0275viewQuery"](B,3),a["\u0275\u0275viewQuery"](M,3)),2&e){var n=void 0;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.gridster=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.dashboardMenuTrigger=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.widgetMenuTrigger=n.first)}},inputs:{widgets:"widgets",widgetLayouts:"widgetLayouts",callbacks:"callbacks",aliasController:"aliasController",stateController:"stateController",columns:"columns",margin:"margin",isEdit:"isEdit",autofillHeight:"autofillHeight",mobileAutofillHeight:"mobileAutofillHeight",mobileRowHeight:"mobileRowHeight",isMobile:"isMobile",isMobileDisabled:"isMobileDisabled",isEditActionEnabled:"isEditActionEnabled",isExportActionEnabled:"isExportActionEnabled",isRemoveActionEnabled:"isRemoveActionEnabled",disableWidgetInteraction:"disableWidgetInteraction",dashboardStyle:"dashboardStyle",backgroundImage:"backgroundImage",dashboardClass:"dashboardClass",ignoreLoading:"ignoreLoading",dashboardTimewindow:"dashboardTimewindow"},features:[a["\u0275\u0275InheritDefinitionFeature"],a["\u0275\u0275NgOnChangesFeature"]],decls:18,vars:22,consts:[["fxFlex","","fxLayout","column","fxLayoutAlign","center center",1,"tb-progress-cover",3,"ngStyle","fxShow"],["color","warn","mode","indeterminate","diameter","100"],["id","gridster-parent","fxFlex","",1,"tb-dashboard-content","layout-wrap",3,"ngStyle","contextmenu"],[2,"visibility","hidden","position","fixed",3,"matMenuTriggerFor"],["dashboardMenuTrigger","matMenuTrigger"],["dashboardMenu","matMenu"],["matMenuContent",""],["widgetMenuTrigger","matMenuTrigger"],["widgetMenu","matMenu"],["id","gridster-background",2,"height","auto","min-height","100%","display","inline",3,"ngClass"],["id","gridster-child",3,"options"],["gridster",""],[3,"item","ngClass",4,"ngFor","ngForOf"],[1,"tb-dashboard-context-menu-items"],["mat-menu-item","",3,"disabled","click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"disabled","click"],["class","tb-alt-text",4,"ngIf"],[4,"ngIf"],["translate",""],[1,"tb-alt-text"],[3,"item","ngClass"],[3,"widget","dashboardWidgets","dashboardStyle","backgroundImage","isEdit","isMobile","isEditActionEnabled","isExportActionEnabled","isRemoveActionEnabled","disableWidgetInteraction","widgetFullscreenChanged","widgetComponentAction"]],template:function(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275element"](2,"mat-spinner",1),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"div",2),a["\u0275\u0275listener"]("contextmenu",function(e){return t.openDashboardContextMenu(e)}),a["\u0275\u0275element"](4,"div",3,4),a["\u0275\u0275elementStart"](6,"mat-menu",null,5),a["\u0275\u0275template"](8,_,2,1,"ng-template",6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](9,"div",3,7),a["\u0275\u0275elementStart"](11,"mat-menu",null,8),a["\u0275\u0275template"](13,R,2,1,"ng-template",6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"div",9),a["\u0275\u0275elementStart"](15,"gridster",10,11),a["\u0275\u0275template"](17,V,2,14,"gridster-item",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275reference"](7),i=a["\u0275\u0275reference"](12);a["\u0275\u0275styleProp"]("background-image",t.backgroundImage),a["\u0275\u0275property"]("ngStyle",t.dashboardStyle)("fxShow",a["\u0275\u0275pipeBind1"](1,18,t.isLoading$)&&!t.ignoreLoading&&!t.isEdit),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](20,Q,t.isAutofillHeight()?"hidden":"auto")),a["\u0275\u0275advance"](1),a["\u0275\u0275styleProp"]("left",t.dashboardMenuPosition.x)("top",t.dashboardMenuPosition.y),a["\u0275\u0275property"]("matMenuTriggerFor",n),a["\u0275\u0275advance"](5),a["\u0275\u0275styleProp"]("left",t.widgetMenuPosition.x)("top",t.widgetMenuPosition.y),a["\u0275\u0275property"]("matMenuTriggerFor",i),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngClass",t.dashboardClass),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("options",t.gridsterOpts),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",t.dashboardWidgets)}},directives:[C.b,C.f,C.e,x.NgStyle,w.e,w.d,S.MatSpinner,E.MatMenuTrigger,E.MatMenu,E.MatMenuContent,x.NgClass,w.b,c.b,x.NgForOf,E.MatMenuItem,x.NgIf,I.TranslateDirective,O.MatIcon,c.c,b.b],pipes:[x.AsyncPipe,T.a],styles:["[_nghost-%COMP%]   .tb-progress-cover[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;z-index:6;opacity:1}[_nghost-%COMP%]   .tb-dashboard-content[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;background:none;outline:none}[_nghost-%COMP%]   .tb-dashboard-content[_ngcontent-%COMP%]   gridster-item[_ngcontent-%COMP%]{transition:none;overflow:visible;background:none}[_nghost-%COMP%]   #gridster-child[_ngcontent-%COMP%]{background:none}.tb-dashboard-context-menu-items[_ngcontent-%COMP%]{min-width:256px}"],changeDetection:0}),n}(r.a);0,void 0}).call(this,n("xexB"))},ekQc:function(e,t,n){"use strict";n.d(t,"a",function(){return p}),n.d(t,"c",function(){return m}),n.d(t,"b",function(){return h});var i=n("fXoL"),a=n("tyNb"),r=n("UaJx"),o=n("zp9Z"),s=n("cX0b"),l=n("Xbih"),c=n("YnEf"),d=n("4j5O"),u=n("lJxs"),p=function(){function e(e,t){this.dashboardService=e,this.dashboardUtils=t}return e.prototype.resolve=function(e){var t=this,n=e.params.dashboardId;return this.dashboardService.getDashboard(n).pipe(Object(u.a)(function(e){return t.dashboardUtils.validateAndUpdateDashboard(e)}))},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](c.a),i["\u0275\u0275inject"](d.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0;var m=function(e,t,n){return n.dashboard.title},f=[{path:"dashboards",data:{breadcrumb:{label:"dashboard.dashboards",icon:"dashboard"}},children:[{path:"",component:r.a,data:{auth:[o.a.TENANT_ADMIN,o.a.CUSTOMER_USER],title:"dashboard.dashboards",dashboardsType:"tenant"},resolve:{entitiesTableConfig:s.a}},{path:":dashboardId",component:l.a,data:{breadcrumb:{labelFunction:m,icon:"dashboard"},auth:[o.a.TENANT_ADMIN,o.a.CUSTOMER_USER],title:"dashboard.dashboard",widgetEditMode:!1},resolve:{dashboard:p}}]}],h=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({providers:[s.a,p],imports:[[a.RouterModule.forChild(f)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](h,{imports:[a.RouterModule],exports:[a.RouterModule]})),0},em8L:function(e,t,n){"use strict";n.d(t,"a",function(){return x});var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("JIJk"),s=n("//Q6"),l=n("l7P3"),c=n("0IaG"),d=n("XiUz"),u=n("ofXK"),p=n("znSr"),m=n("gKbb"),f=n("sYmb"),h=n("bTqV"),g=n("Qu3c"),A=function(){return{paddingBottom:"8px"}},b=function(){return{}};function y(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",5),i["\u0275\u0275elementStart"](1,"tb-device-profile-alarm",6),i["\u0275\u0275listener"]("removeAlarm",function(){i["\u0275\u0275restoreView"](n);var e=t.index;return i["\u0275\u0275nextContext"]().removeAlarm(e)}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,r=t.index,o=t.last,s=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngStyle",o?i["\u0275\u0275pureFunction0"](5,b):i["\u0275\u0275pureFunction0"](4,A)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("formControl",a)("expanded",0===r)("deviceProfileId",s.deviceProfileId)}}function v(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"span",7),i["\u0275\u0275text"](2,"device-profile.no-alarm-rules"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}function C(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",8),i["\u0275\u0275elementStart"](1,"button",9),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().addAlarm()}),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementStart"](3,"span",10),i["\u0275\u0275text"](4,"device-profile.add-alarm-rule"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](2,1,"device-profile.add-alarm-rule")))}var x=function(){function e(e,t,n){this.store=e,this.fb=t,this.dialog=n,this.valueChangeSubscription=null,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(r.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){this.deviceProfileAlarmsFormGroup=this.fb.group({alarms:this.fb.array([])})},e.prototype.alarmsFormArray=function(){return this.deviceProfileAlarmsFormGroup.get("alarms")},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.deviceProfileAlarmsFormGroup.disable({emitEvent:!1}):this.deviceProfileAlarmsFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){var t=this;this.valueChangeSubscription&&this.valueChangeSubscription.unsubscribe();var n=[];e&&e.forEach(function(e){n.push(t.fb.control(e,[a.Validators.required]))}),this.deviceProfileAlarmsFormGroup.setControl("alarms",this.fb.array(n)),this.disabled?this.deviceProfileAlarmsFormGroup.disable({emitEvent:!1}):this.deviceProfileAlarmsFormGroup.enable({emitEvent:!1}),this.valueChangeSubscription=this.deviceProfileAlarmsFormGroup.valueChanges.subscribe(function(){t.updateModel()})},e.prototype.trackByAlarm=function(e,t){return t?t.value.id:null},e.prototype.removeAlarm=function(e){this.deviceProfileAlarmsFormGroup.get("alarms").removeAt(e)},e.prototype.addAlarm=function(){var e={id:Object(s.k)(),alarmType:"",createRules:{CRITICAL:{condition:{condition:[]}}}};this.deviceProfileAlarmsFormGroup.get("alarms").push(this.fb.control(e,[o.F])),this.deviceProfileAlarmsFormGroup.updateValueAndValidity(),this.deviceProfileAlarmsFormGroup.valid||this.updateModel()},e.prototype.validate=function(e){return this.deviceProfileAlarmsFormGroup.valid?null:{alarms:{valid:!1}}},e.prototype.updateModel=function(){var e=this.deviceProfileAlarmsFormGroup.get("alarms").value;this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](l.Store),i["\u0275\u0275directiveInject"](a.FormBuilder),i["\u0275\u0275directiveInject"](c.MatDialog))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-device-profile-alarms"]],inputs:{required:"required",disabled:"disabled",deviceProfileId:"deviceProfileId"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:5,vars:4,consts:[["fxLayout","column"],[1,"tb-device-profile-alarms"],["fxLayout","column",3,"ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["style","padding-top: 16px;",4,"ngIf"],["fxLayout","column",3,"ngStyle"],[3,"formControl","expanded","deviceProfileId","removeAlarm"],["translate","","fxLayoutAlign","center center",1,"tb-prompt"],[2,"padding-top","16px"],["mat-raised-button","","color","accent","type","button","matTooltipPosition","above",3,"matTooltip","click"],["translate",""]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275template"](2,y,2,6,"div",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](3,v,3,0,"div",3),i["\u0275\u0275template"](4,C,5,3,"div",4),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.alarmsFormArray().controls)("ngForTrackBy",t.trackByAlarm),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.alarmsFormArray().controls.length),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.disabled))},directives:[d.f,u.NgForOf,u.NgIf,u.NgStyle,p.e,m.a,a.NgControlStatus,a.FormControlDirective,f.TranslateDirective,d.e,h.MatButton,g.MatTooltip],pipes:[f.TranslatePipe],styles:["[_nghost-%COMP%]   .tb-device-profile-alarms[_ngcontent-%COMP%]{overflow-y:auto}[_nghost-%COMP%]   .tb-device-profile-alarms.mat-padding[_ngcontent-%COMP%]{padding:8px}@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-device-profile-alarms.mat-padding[_ngcontent-%COMP%]{padding:16px}}[_nghost-%COMP%]   .tb-prompt[_ngcontent-%COMP%]{margin:30px 0}"]}),e}();0,void 0},enJx:function(e,t,n){"use strict";n.d(t,"a",function(){return xe});var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=n("mbhL"),s=n("M9IT"),l=n("Dh3D"),c=n("S+vS"),d=n("Bjlt"),u=n("4r/P"),p=n("xgIS"),m=n("VRyK"),f=n("cp0P"),h=n("Kj3r"),g=n("/uUt"),A=n("vkgz"),b=n("7JTo"),y=n("0EQZ"),v=n("2Vo4"),C=n("jtHE"),x=n("LRne"),w=n("Duvn"),S=n("JIr8"),E=n("lJxs"),I=n("05l1"),O=n("x+ZX"),T=n("IzEk"),F=n("U3y+"),B=function(){function e(e,t){this.entityRelationService=e,this.translate=t,this.relationsSubject=new v.a([]),this.pageDataSubject=new v.a(Object(w.a)()),this.pageData$=this.pageDataSubject.asObservable(),this.selection=new y.SelectionModel(!0,[])}return e.prototype.connect=function(e){return this.relationsSubject.asObservable()},e.prototype.disconnect=function(e){this.relationsSubject.complete(),this.pageDataSubject.complete()},e.prototype.loadRelations=function(e,t,n,i){var a=this;void 0===i&&(i=!1),i&&(this.allRelations=null);var r=new C.a;return this.fetchRelations(e,t,n).pipe(Object(A.a)(function(){a.selection.clear()}),Object(S.a)(function(){return Object(x.a)(Object(w.a)())})).subscribe(function(e){a.relationsSubject.next(e.data),a.pageDataSubject.next(e),r.next(e)}),r},e.prototype.fetchRelations=function(e,t,n){return this.getAllRelations(e,t).pipe(Object(E.a)(function(e){return n.filterData(e)}))},e.prototype.getAllRelations=function(e,t){var n=this;if(!this.allRelations){var i=void 0;switch(e){case b.b.FROM:i=this.entityRelationService.findInfoByFrom(t);break;case b.b.TO:i=this.entityRelationService.findInfoByTo(t)}this.allRelations=i.pipe(Object(E.a)(function(t){return t.forEach(function(t){e===b.b.FROM?t.toEntityTypeName=n.translate.instant(F.d.get(t.to.entityType).type):t.fromEntityTypeName=n.translate.instant(F.d.get(t.from.entityType).type)}),t}),Object(I.a)(1),Object(O.a)())}return this.allRelations},e.prototype.isAllSelected=function(){var e=this.selection.selected.length;return this.relationsSubject.pipe(Object(E.a)(function(t){return e===t.length}))},e.prototype.isEmpty=function(){return this.relationsSubject.pipe(Object(E.a)(function(e){return!e.length}))},e.prototype.total=function(){return this.pageDataSubject.pipe(Object(E.a)(function(e){return e.totalElements}))},e.prototype.masterToggle=function(){var e=this;this.relationsSubject.pipe(Object(A.a)(function(t){e.selection.selected.length===t.length?e.selection.clear():t.forEach(function(t){e.selection.select(t)})}),Object(T.a)(1)).subscribe()},e}(),M=n("jkF6"),P=n("l7P3"),D=n("sYmb"),k=n("0IaG"),_=n("XiUz"),L=n("/t3+"),j=n("znSr"),N=n("kmnG"),R=n("d3UM"),U=n("3Pt+"),V=n("ofXK"),Q=n("bTqV"),G=n("Qu3c"),H=n("NFeN"),K=n("qFsG"),q=n("+0xr"),z=n("f0Cb"),W=n("FKr1"),X=n("bSwM"),$=["searchInput"];function J(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",36),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.directionTypeTranslations.get(i.directions[n]))," ")}}function Y(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-header-cell",37),a["\u0275\u0275elementStart"](1,"mat-checkbox",38),a["\u0275\u0275listener"]("change",function(e){a["\u0275\u0275restoreView"](n);var t=a["\u0275\u0275nextContext"]();return e?t.dataSource.masterToggle():null}),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275pipe"](3,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("checked",i.dataSource.selection.hasValue()&&a["\u0275\u0275pipeBind1"](2,2,i.dataSource.isAllSelected()))("indeterminate",i.dataSource.selection.hasValue()&&!a["\u0275\u0275pipeBind1"](3,4,i.dataSource.isAllSelected()))}}function Z(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275elementStart"](1,"mat-checkbox",39),a["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()})("change",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit,r=a["\u0275\u0275nextContext"]();return e?r.dataSource.selection.toggle(i):null}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("checked",r.dataSource.selection.isSelected(i))}}function ee(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",40),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"relation.type")," "))}function te(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.type," ")}}function ne(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",40),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"relation.to-entity-type")," "))}function ie(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.toEntityTypeName," ")}}function ae(e,t){1&e&&(a["\u0275\u0275elementContainerStart"](0,41),a["\u0275\u0275template"](1,ne,3,3,"mat-header-cell",25),a["\u0275\u0275template"](2,ie,2,1,"mat-cell",23),a["\u0275\u0275elementContainerEnd"]())}function re(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",40),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"relation.to-entity-name")," "))}function oe(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.toName," ")}}function se(e,t){1&e&&(a["\u0275\u0275elementContainerStart"](0,42),a["\u0275\u0275template"](1,re,3,3,"mat-header-cell",25),a["\u0275\u0275template"](2,oe,2,1,"mat-cell",23),a["\u0275\u0275elementContainerEnd"]())}function le(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",40),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"relation.from-entity-type")," "))}function ce(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.fromEntityTypeName," ")}}function de(e,t){1&e&&(a["\u0275\u0275elementContainerStart"](0,43),a["\u0275\u0275template"](1,le,3,3,"mat-header-cell",25),a["\u0275\u0275template"](2,ce,2,1,"mat-cell",23),a["\u0275\u0275elementContainerEnd"]())}function ue(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",40),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"relation.from-entity-name")," "))}function pe(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.fromName," ")}}function me(e,t){1&e&&(a["\u0275\u0275elementContainerStart"](0,44),a["\u0275\u0275template"](1,ue,3,3,"mat-header-cell",25),a["\u0275\u0275template"](2,pe,2,1,"mat-cell",23),a["\u0275\u0275elementContainerEnd"]())}function fe(e,t){1&e&&a["\u0275\u0275element"](0,"mat-header-cell",45)}function he(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275elementStart"](1,"div",46),a["\u0275\u0275elementStart"](2,"button",11),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit;return a["\u0275\u0275nextContext"]().editRelation(e,i)}),a["\u0275\u0275pipe"](3,"async"),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementStart"](5,"mat-icon"),a["\u0275\u0275text"](6,"edit"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"button",11),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit;return a["\u0275\u0275nextContext"]().deleteRelation(e,i)}),a["\u0275\u0275pipe"](8,"async"),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementStart"](10,"mat-icon"),a["\u0275\u0275text"](11,"delete"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](4,6,"relation.edit")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](3,4,i.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](9,10,"relation.delete")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](8,8,i.isLoading$))}}var ge=function(){return{"mat-row-select":!0}};function Ae(e,t){1&e&&a["\u0275\u0275element"](0,"mat-header-row",47),2&e&&a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction0"](1,ge))}var be=function(e){return{"mat-row-select":!0,"mat-selected":e}};function ye(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-row",48),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](n);var e=t.$implicit;return a["\u0275\u0275nextContext"]().dataSource.selection.toggle(e)}),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](1,be,r.dataSource.selection.isSelected(i)))}}var ve=function(e){return{count:e}},Ce=function(){return[10,20,30]},xe=function(e){function t(t,n,i,a,r){var s=e.call(this,t)||this;s.store=t,s.entityRelationService=n,s.translate=i,s.dialog=a,s.dialogService=r,s.directions=b.b,s.directionTypes=Object.keys(b.b),s.directionTypeTranslations=b.g,s.textSearchMode=!1,s.activeValue=!1,s.dirtyValue=!1,s.viewsInited=!1,s.dirtyValue=!s.activeValue;var l={property:"type",direction:u.a.ASC};return s.direction=b.b.FROM,s.pageLink=new o.b(10,0,null,l),s.dataSource=new B(s.entityRelationService,s.translate),s.updateColumns(),s}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"active",{set:function(e){this.activeValue!==e&&(this.activeValue=e,this.activeValue&&this.dirtyValue&&(this.dirtyValue=!1,this.viewsInited&&this.updateData(!0)))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"entityId",{set:function(e){this.entityIdValue!==e&&(this.entityIdValue=e,this.viewsInited&&(this.resetSortAndFilter(this.activeValue),this.activeValue||(this.dirtyValue=!0)))},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){},t.prototype.updateColumns=function(){this.direction===b.b.FROM?this.displayedColumns=["select","type","toEntityTypeName","toName","actions"]:this.displayedColumns=["select","type","fromEntityTypeName","fromName","actions"]},t.prototype.directionChanged=function(e){this.direction=e,this.updateColumns(),this.updateData(!0)},t.prototype.ngAfterViewInit=function(){var e=this;Object(p.a)(this.searchInputField.nativeElement,"keyup").pipe(Object(h.a)(150),Object(g.a)(),Object(A.a)(function(){e.paginator.pageIndex=0,e.updateData()})).subscribe(),this.sort.sortChange.subscribe(function(){return e.paginator.pageIndex=0}),Object(m.a)(this.sort.sortChange,this.paginator.page).pipe(Object(A.a)(function(){return e.updateData()})).subscribe(),this.viewsInited=!0,this.activeValue&&this.entityIdValue&&this.updateData(!0)},t.prototype.updateData=function(e){void 0===e&&(e=!1),this.pageLink.page=this.paginator.pageIndex,this.pageLink.pageSize=this.paginator.pageSize,this.pageLink.sortOrder.property=this.sort.active,this.pageLink.sortOrder.direction=u.a[this.sort.direction.toUpperCase()],this.dataSource.loadRelations(this.direction,this.entityIdValue,this.pageLink,e)},t.prototype.enterFilterMode=function(){var e=this;this.textSearchMode=!0,this.pageLink.textSearch="",setTimeout(function(){e.searchInputField.nativeElement.focus(),e.searchInputField.nativeElement.setSelectionRange(0,0)},10)},t.prototype.exitFilterMode=function(){this.textSearchMode=!1,this.pageLink.textSearch=null,this.paginator.pageIndex=0,this.updateData()},t.prototype.resetSortAndFilter=function(e){void 0===e&&(e=!0),this.direction=b.b.FROM,this.updateColumns(),this.pageLink.textSearch=null,this.paginator.pageIndex=0;var t=this.sort.sortables.get("type");this.sort.active=t.id,this.sort.direction="asc",e&&this.updateData(!0)},t.prototype.reloadRelations=function(){this.updateData(!0)},t.prototype.addRelation=function(e){this.openRelationDialog(e)},t.prototype.editRelation=function(e,t){this.openRelationDialog(e,t)},t.prototype.deleteRelation=function(e,t){var n,i,a=this;e&&e.stopPropagation(),this.direction===b.b.FROM?(n=this.translate.instant("relation.delete-to-relation-title",{entityName:t.toName}),i=this.translate.instant("relation.delete-to-relation-text",{entityName:t.toName})):(n=this.translate.instant("relation.delete-from-relation-title",{entityName:t.fromName}),i=this.translate.instant("relation.delete-from-relation-text",{entityName:t.fromName})),this.dialogService.confirm(n,i,this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){e&&a.entityRelationService.deleteRelation(t.from,t.type,t.to).subscribe(function(){a.reloadRelations()})})},t.prototype.deleteRelations=function(e){var t=this;if(e&&e.stopPropagation(),this.dataSource.selection.selected.length>0){var n=void 0,i=void 0;this.direction===b.b.FROM?(n=this.translate.instant("relation.delete-to-relations-title",{count:this.dataSource.selection.selected.length}),i=this.translate.instant("relation.delete-to-relations-text")):(n=this.translate.instant("relation.delete-from-relations-title",{count:this.dataSource.selection.selected.length}),i=this.translate.instant("relation.delete-from-relations-text")),this.dialogService.confirm(n,i,this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe(function(e){if(e){var n=[];t.dataSource.selection.selected.forEach(function(e){n.push(t.entityRelationService.deleteRelation(e.from,e.type,e.to))}),Object(f.a)(n).subscribe(function(){t.reloadRelations()})}})}},t.prototype.openRelationDialog=function(e,t){var n=this;void 0===t&&(t=null),e&&e.stopPropagation();var a=!1;t||(a=!0,t={from:null,to:null,type:null,typeGroup:b.d.COMMON},this.direction===b.b.FROM?t.from=this.entityIdValue:t.to=this.entityIdValue),this.dialog.open(M.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{isAdd:a,direction:this.direction,relation:Object(i.a)({},t)}}).afterClosed().subscribe(function(e){e&&n.reloadRelations()})},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](P.Store),a["\u0275\u0275directiveInject"](d.a),a["\u0275\u0275directiveInject"](D.TranslateService),a["\u0275\u0275directiveInject"](k.MatDialog),a["\u0275\u0275directiveInject"](c.a))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-relation-table"]],viewQuery:function(e,t){if(1&e&&(a["\u0275\u0275viewQuery"]($,1),a["\u0275\u0275viewQuery"](s.MatPaginator,1),a["\u0275\u0275viewQuery"](l.MatSort,1)),2&e){var n=void 0;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.searchInputField=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.paginator=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.sort=n.first)}},inputs:{active:"active",entityId:"entityId"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:78,vars:69,consts:[[1,"mat-padding","tb-entity-table","tb-absolute-fill"],["fxFlex","","fxLayout","column",1,"mat-elevation-z1","tb-entity-table-content"],[1,"mat-table-toolbar",3,"fxShow"],[1,"mat-toolbar-tools"],["fxLayout","row","fxLayoutAlign","start center","fxLayout.xs","column","fxLayoutAlign.xs","center start",1,"title-container"],[1,"tb-entity-table-title"],[1,"mat-block","tb-relation-direction"],["translate",""],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex",""],["mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click"],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip"],["matInput","",3,"ngModel","placeholder","ngModelChange"],["searchInput",""],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip","click"],["color","accent",1,"mat-table-toolbar",3,"fxShow"],["fxLayoutAlign","space-between center",1,"mat-toolbar-tools"],[1,"tb-entity-table-info"],["fxFlex","",1,"table-container"],["mat-table","","matSort","","matSortDisableClear","",3,"dataSource","matSortActive","matSortDirection"],["matColumnDef","select","sticky",""],["style","width: 30px;",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","type"],["mat-sort-header","","style","width: 33%",4,"matHeaderCellDef"],["matColumnDef","toEntityTypeName",4,"ngIf"],["matColumnDef","toName",4,"ngIf"],["matColumnDef","fromEntityTypeName",4,"ngIf"],["matColumnDef","fromName",4,"ngIf"],["matColumnDef","actions","stickyEnd",""],["style","min-width: 80px; max-width: 80px; width: 80px",4,"matHeaderCellDef"],[3,"ngClass",4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"ngClass","click",4,"matRowDef","matRowDefColumns"],["fxLayoutAlign","center center","translate","",1,"no-data-found",3,"fxShow"],[3,"length","pageIndex","pageSize","pageSizeOptions"],[3,"value"],[2,"width","30px"],[3,"checked","indeterminate","change"],[3,"checked","click","change"],["mat-sort-header","",2,"width","33%"],["matColumnDef","toEntityTypeName"],["matColumnDef","toName"],["matColumnDef","fromEntityTypeName"],["matColumnDef","fromName"],[2,"min-width","80px","max-width","80px","width","80px"],["fxFlex","","fxLayout","row","fxLayoutAlign","end"],[3,"ngClass"],[3,"ngClass","click"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"mat-toolbar",2),a["\u0275\u0275elementStart"](3,"div",3),a["\u0275\u0275elementStart"](4,"div",4),a["\u0275\u0275elementStart"](5,"span",5),a["\u0275\u0275text"](6),a["\u0275\u0275pipe"](7,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"mat-form-field",6),a["\u0275\u0275elementStart"](9,"mat-label",7),a["\u0275\u0275text"](10,"relation.direction"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"mat-select",8),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.directionChanged(e)}),a["\u0275\u0275template"](12,J,3,4,"mat-option",9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](13,"span",10),a["\u0275\u0275elementStart"](14,"button",11),a["\u0275\u0275listener"]("click",function(e){return t.addRelation(e)}),a["\u0275\u0275pipe"](15,"async"),a["\u0275\u0275pipe"](16,"translate"),a["\u0275\u0275elementStart"](17,"mat-icon"),a["\u0275\u0275text"](18,"add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"button",11),a["\u0275\u0275listener"]("click",function(){return t.reloadRelations()}),a["\u0275\u0275pipe"](20,"async"),a["\u0275\u0275pipe"](21,"translate"),a["\u0275\u0275elementStart"](22,"mat-icon"),a["\u0275\u0275text"](23,"refresh"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](24,"button",11),a["\u0275\u0275listener"]("click",function(){return t.enterFilterMode()}),a["\u0275\u0275pipe"](25,"async"),a["\u0275\u0275pipe"](26,"translate"),a["\u0275\u0275elementStart"](27,"mat-icon"),a["\u0275\u0275text"](28,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](29,"mat-toolbar",2),a["\u0275\u0275elementStart"](30,"div",3),a["\u0275\u0275elementStart"](31,"button",12),a["\u0275\u0275pipe"](32,"translate"),a["\u0275\u0275elementStart"](33,"mat-icon"),a["\u0275\u0275text"](34,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](35,"mat-form-field",10),a["\u0275\u0275elementStart"](36,"mat-label"),a["\u0275\u0275text"](37,"\xa0"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](38,"input",13,14),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.pageLink.textSearch=e}),a["\u0275\u0275pipe"](40,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](41,"button",15),a["\u0275\u0275listener"]("click",function(){return t.exitFilterMode()}),a["\u0275\u0275pipe"](42,"translate"),a["\u0275\u0275elementStart"](43,"mat-icon"),a["\u0275\u0275text"](44,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](45,"mat-toolbar",16),a["\u0275\u0275elementStart"](46,"div",17),a["\u0275\u0275elementStart"](47,"span",18),a["\u0275\u0275text"](48),a["\u0275\u0275pipe"](49,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](50,"button",11),a["\u0275\u0275listener"]("click",function(e){return t.deleteRelations(e)}),a["\u0275\u0275pipe"](51,"async"),a["\u0275\u0275pipe"](52,"translate"),a["\u0275\u0275elementStart"](53,"mat-icon"),a["\u0275\u0275text"](54,"delete"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](55,"div",19),a["\u0275\u0275elementStart"](56,"table",20),a["\u0275\u0275elementContainerStart"](57,21),a["\u0275\u0275template"](58,Y,4,6,"mat-header-cell",22),a["\u0275\u0275template"](59,Z,2,1,"mat-cell",23),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementContainerStart"](60,24),a["\u0275\u0275template"](61,ee,3,3,"mat-header-cell",25),a["\u0275\u0275template"](62,te,2,1,"mat-cell",23),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275template"](63,ae,3,0,"ng-container",26),a["\u0275\u0275template"](64,se,3,0,"ng-container",27),a["\u0275\u0275template"](65,de,3,0,"ng-container",28),a["\u0275\u0275template"](66,me,3,0,"ng-container",29),a["\u0275\u0275elementContainerStart"](67,30),a["\u0275\u0275template"](68,fe,1,0,"mat-header-cell",31),a["\u0275\u0275template"](69,he,12,12,"mat-cell",23),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275template"](70,Ae,1,2,"mat-header-row",32),a["\u0275\u0275template"](71,ye,1,3,"mat-row",33),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](72,"span",34),a["\u0275\u0275pipe"](73,"async"),a["\u0275\u0275text"](74),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](75,"mat-divider"),a["\u0275\u0275element"](76,"mat-paginator",35),a["\u0275\u0275pipe"](77,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",!t.textSearchMode&&t.dataSource.selection.isEmpty()),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](7,35,t.direction==t.directions.FROM?"relation.from-relations":"relation.to-relations")," "),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngModel",t.direction),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",t.directionTypes),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](16,39,"action.add")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](15,37,t.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](21,43,"action.refresh")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](20,41,t.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](26,47,"action.search")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](25,45,t.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("fxShow",t.textSearchMode&&t.dataSource.selection.isEmpty()),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](32,49,"action.search")),a["\u0275\u0275advance"](7),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](40,51,"common.enter-search")),a["\u0275\u0275property"]("ngModel",t.pageLink.textSearch),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](42,53,"action.close")),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("fxShow",!t.dataSource.selection.isEmpty()),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind2"](49,55,"relation.selected-relations",a["\u0275\u0275pureFunction1"](66,ve,t.dataSource.selection.selected.length))," "),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](52,60,"action.delete")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](51,58,t.isLoading$)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("dataSource",t.dataSource)("matSortActive",t.pageLink.sortOrder.property)("matSortDirection",t.pageLink.sortDirection()),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("ngIf",t.direction===t.directions.FROM),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.direction===t.directions.FROM),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.direction===t.directions.TO),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.direction===t.directions.TO),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",a["\u0275\u0275pipeBind1"](73,62,t.dataSource.isEmpty())),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"]("relation.no-relations-text"),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("length",a["\u0275\u0275pipeBind1"](77,64,t.dataSource.total()))("pageIndex",t.pageLink.page)("pageSize",t.pageLink.pageSize)("pageSizeOptions",a["\u0275\u0275pureFunction0"](68,Ce)))},directives:[_.b,_.f,L.MatToolbar,j.d,_.e,N.MatFormField,N.MatLabel,D.TranslateDirective,R.MatSelect,U.NgControlStatus,U.NgModel,V.NgForOf,Q.MatButton,G.MatTooltip,H.MatIcon,K.MatInput,U.DefaultValueAccessor,q.MatTable,l.MatSort,q.MatColumnDef,q.MatHeaderCellDef,q.MatCellDef,V.NgIf,q.MatHeaderRowDef,q.MatRowDef,z.MatDivider,s.MatPaginator,W.MatOption,q.MatHeaderCell,X.MatCheckbox,q.MatCell,l.MatSortHeader,q.MatHeaderRow,V.NgClass,j.b,q.MatRow],pipes:[D.TranslatePipe,V.AsyncPipe],styles:["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{min-height:auto}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .tb-entity-table-title[_ngcontent-%COMP%]{padding-right:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .tb-entity-table-info[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media screen and (max-width:599px){[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{height:auto;min-height:100px}[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]   .tb-entity-table-title[_ngcontent-%COMP%]{padding-bottom:5px;width:100%}}[_nghost-%COMP%]     .mat-sort-header-sorted .mat-sort-header-arrow{opacity:1!important}[_nghost-%COMP%]     mat-form-field.tb-relation-direction{font-size:16px;width:200px}[_nghost-%COMP%]     mat-form-field.tb-relation-direction .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     mat-form-field.tb-relation-direction .mat-form-field-underline{bottom:0}@media screen and (max-width:599px){[_nghost-%COMP%]     mat-form-field.tb-relation-direction{width:100%}[_nghost-%COMP%]     mat-form-field.tb-relation-direction .mat-form-field-infix{width:auto!important}}"],changeDetection:0}),t}(r.a);0,void 0},eriv:function(e,t,n){"use strict";n.d(t,"a",function(){return ne});var i=n("mrSG"),a=n("fXoL"),r=n("0IaG"),o=n("3Pt+"),s=n("gmuX"),l=n("JIJk"),c=n("g+M/"),d=n("U3y+"),u=n("APwO"),p=n("//Q6"),m=n("/3Pq"),f=n("YjEJ"),h=n("l7P3"),g=n("tyNb"),A=n("FKr1"),b=n("/t3+"),y=n("sYmb"),v=n("XiUz"),C=n("kRCp"),x=n("bTqV"),w=n("NFeN"),S=n("ofXK"),E=n("xHqg"),I=n("kmnG"),O=n("qFsG"),T=n("E4Bx"),F=n("XMqU"),B=n("5U8l"),M=n("znSr"),P=n("d3UM"),D=n("0HhY"),k=n("8yrD"),_=n("em8L"),L=n("xkYi"),j=n("f0Cb"),N=n("bv9b"),R=["addDeviceProfileStepper"];function U(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",38)}function V(e,t){1&e&&a["\u0275\u0275element"](0,"div",39)}function Q(e,t){1&e&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&e&&a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](1,1,"device-profile.device-profile-details"))}function G(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.name-required")," "))}function H(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",40),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.deviceProfileTypeTranslations.get(n))," ")}}function K(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.type-required")," "))}function q(e,t){1&e&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&e&&a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](1,1,"device-profile.transport-configuration"))}function z(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",40),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.deviceTransportTypeTranslations.get(n))," ")}}function W(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-hint"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,n.deviceTransportTypeHints.get(n.transportConfigFormGroup.get("transportType").value))," ")}}function X(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.transport-type-required")," "))}var $=function(e){return{count:e}};function J(e,t){if(1&e&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind2"](1,1,"device-profile.alarm-rules-with-count",a["\u0275\u0275pureFunction1"](4,$,n.alarmRulesFormGroup.get("alarms").value?n.alarmRulesFormGroup.get("alarms").value.length:0)))}}function Y(e,t){1&e&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&e&&a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](1,1,"device-profile.device-provisioning"))}function Z(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",41),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().previousStep()}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,i.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](3,4,"action.back"))}}var ee=function(e){return{label:e}};function te(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",42),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().nextStep()}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,i.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind2"](3,4,"action.next-with-label",a["\u0275\u0275pureFunction1"](9,ee,a["\u0275\u0275pipeBind1"](4,7,i.getFormLabel(i.selectedIndex+1)))))}}var ne=function(e){function t(t,n,i,a,r,s,c,u,p){var f=e.call(this,t,n,a)||this;return f.store=t,f.router=n,f.data=i,f.dialogRef=a,f.componentFactoryResolver=r,f.injector=s,f.errorStateMatcher=c,f.deviceProfileService=u,f.fb=p,f.selectedIndex=0,f.showNext=!0,f.entityType=d.b,f.deviceProfileTypes=Object.values(l.h),f.deviceProfileTypeTranslations=l.H,f.deviceTransportTypeHints=l.K,f.deviceTransportTypes=Object.values(l.j),f.deviceTransportTypeTranslations=l.L,f.serviceType=m.a.TB_RULE_ENGINE,f.deviceProfileDetailsFormGroup=f.fb.group({name:[i.deviceProfileName,[o.Validators.required]],type:[l.h.DEFAULT,[o.Validators.required]],image:[null,[]],defaultRuleChainId:[null,[]],defaultDashboardId:[null,[]],defaultQueueName:["",[]],description:["",[]]}),f.transportConfigFormGroup=f.fb.group({transportType:[i.transportType?i.transportType:l.j.DEFAULT,[o.Validators.required]],transportConfiguration:[Object(l.w)(l.j.DEFAULT),[o.Validators.required]]}),f.transportConfigFormGroup.get("transportType").valueChanges.subscribe(function(){f.deviceProfileTransportTypeChanged()}),f.alarmRulesFormGroup=f.fb.group({alarms:[null]}),f.provisionConfigFormGroup=f.fb.group({provisionConfiguration:[{type:l.i.DISABLED},[o.Validators.required]]}),f}return Object(i.d)(t,e),t.prototype.deviceProfileTransportTypeChanged=function(){var e=this.transportConfigFormGroup.get("transportType").value;this.transportConfigFormGroup.patchValue({transportConfiguration:Object(l.w)(e)})},t.prototype.ngAfterViewInit=function(){},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.previousStep=function(){this.addDeviceProfileStepper.previous()},t.prototype.nextStep=function(){this.selectedIndex<3?this.addDeviceProfileStepper.next():this.add()},t.prototype.selectedForm=function(){switch(this.selectedIndex){case 0:return this.deviceProfileDetailsFormGroup;case 1:return this.transportConfigFormGroup;case 2:return this.alarmRulesFormGroup;case 3:return this.provisionConfigFormGroup}},t.prototype.add=function(){var e=this;if(this.allValid()){var t=this.provisionConfigFormGroup.get("provisionConfiguration").value,n=t.provisionDeviceKey;delete t.provisionDeviceKey;var i={name:this.deviceProfileDetailsFormGroup.get("name").value,type:this.deviceProfileDetailsFormGroup.get("type").value,image:this.deviceProfileDetailsFormGroup.get("image").value,defaultQueueName:this.deviceProfileDetailsFormGroup.get("defaultQueueName").value,transportType:this.transportConfigFormGroup.get("transportType").value,provisionType:t.type,provisionDeviceKey:n,description:this.deviceProfileDetailsFormGroup.get("description").value,profileData:{configuration:Object(l.v)(l.h.DEFAULT),transportConfiguration:this.transportConfigFormGroup.get("transportConfiguration").value,alarms:this.alarmRulesFormGroup.get("alarms").value,provisionConfiguration:t}};this.deviceProfileDetailsFormGroup.get("defaultRuleChainId").value&&(i.defaultRuleChainId=new u.a(this.deviceProfileDetailsFormGroup.get("defaultRuleChainId").value)),this.deviceProfileDetailsFormGroup.get("defaultDashboardId").value&&(i.defaultDashboardId=new f.a(this.deviceProfileDetailsFormGroup.get("defaultDashboardId").value)),this.deviceProfileService.saveDeviceProfile(Object(p.f)(i)).subscribe(function(t){e.dialogRef.close(t)})}},t.prototype.getFormLabel=function(e){switch(e){case 0:return"device-profile.device-profile-details";case 1:return"device-profile.transport-configuration";case 2:return"device-profile.alarm-rules";case 3:return"device-profile.device-provisioning"}},t.prototype.changeStep=function(e){this.selectedIndex=e.selectedIndex,this.selectedIndex===this.maxStepperIndex?this.showNext=!1:this.showNext=!0},Object.defineProperty(t.prototype,"maxStepperIndex",{get:function(){var e,t;return(null===(t=null===(e=this.addDeviceProfileStepper)||void 0===e?void 0:e._steps)||void 0===t?void 0:t.length)-1},enumerable:!1,configurable:!0}),t.prototype.allValid=function(){var e=this;return!this.addDeviceProfileStepper.steps.find(function(t,n){return!!t.stepControl.invalid&&(t.interacted=!0,e.addDeviceProfileStepper.selectedIndex=n,!0)})},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](h.Store),a["\u0275\u0275directiveInject"](g.Router),a["\u0275\u0275directiveInject"](r.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.MatDialogRef),a["\u0275\u0275directiveInject"](a.ComponentFactoryResolver),a["\u0275\u0275directiveInject"](a.Injector),a["\u0275\u0275directiveInject"](A.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](o.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-add-device-profile-dialog"]],viewQuery:function(e,t){if(1&e&&a["\u0275\u0275viewQuery"](R,3),2&e){var n;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.addDeviceProfileStepper=n.first)}},features:[a["\u0275\u0275ProvidersFeature"]([]),a["\u0275\u0275InheritDefinitionFeature"]],decls:78,vars:53,consts:[["color","accent"],["translate",""],["fxFlex",""],[3,"tb-help"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"linear","selectionChange"],["addDeviceProfileStepper",""],[3,"stepControl"],[2,"padding-bottom","16px",3,"formGroup"],["matStepLabel",""],[3,"disabled"],[1,"mat-block"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["labelText","device-profile.default-rule-chain","formControlName","defaultRuleChainId"],["formControlName","defaultDashboardId",3,"placeholder"],["tb-hint",""],["formControlName","defaultQueueName",3,"queueType"],["fxHide","",1,"mat-block"],["formControlName","type","required",""],[3,"value",4,"ngFor","ngForOf"],["fxFlex","","maxSizeByte","524288","formControlName","image",3,"label"],["matInput","","formControlName","description","rows","2"],[3,"stepControl","optional"],["formControlName","transportType","required",""],["formControlName","transportConfiguration","required",""],["formControlName","alarms",3,"deviceProfileId"],["formControlName","provisionConfiguration"],["mat-dialog-actions","","fxLayout","row"],["mat-stroked-button","",3,"disabled","click",4,"ngIf"],["mat-stroked-button","","color","accent",3,"disabled","click",4,"ngIf"],["mat-dialog-actions","","fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","end"],["mat-button","",3,"disabled","click"],["mat-raised-button","","color","accent",3,"disabled","click"],["color","warn","mode","indeterminate"],[2,"height","4px"],[3,"value"],["mat-stroked-button","",3,"disabled","click"],["mat-stroked-button","","color","accent",3,"disabled","click"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275elementStart"](1,"mat-toolbar",0),a["\u0275\u0275elementStart"](2,"h2",1),a["\u0275\u0275text"](3,"device-profile.add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",2),a["\u0275\u0275element"](5,"div",3),a["\u0275\u0275elementStart"](6,"button",4),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](7,"mat-icon",5),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,U,1,0,"mat-progress-bar",6),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,V,1,0,"div",7),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",8),a["\u0275\u0275elementStart"](14,"mat-horizontal-stepper",9,10),a["\u0275\u0275listener"]("selectionChange",function(e){return t.changeStep(e)}),a["\u0275\u0275elementStart"](16,"mat-step",11),a["\u0275\u0275elementStart"](17,"form",12),a["\u0275\u0275template"](18,Q,2,3,"ng-template",13),a["\u0275\u0275elementStart"](19,"fieldset",14),a["\u0275\u0275pipe"](20,"async"),a["\u0275\u0275elementStart"](21,"mat-form-field",15),a["\u0275\u0275elementStart"](22,"mat-label",1),a["\u0275\u0275text"](23,"device-profile.name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](24,"input",16),a["\u0275\u0275template"](25,G,3,3,"mat-error",17),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](26,"tb-rule-chain-autocomplete",18),a["\u0275\u0275elementStart"](27,"tb-dashboard-autocomplete",19),a["\u0275\u0275pipe"](28,"translate"),a["\u0275\u0275elementStart"](29,"div",20),a["\u0275\u0275text"](30),a["\u0275\u0275pipe"](31,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](32,"tb-queue-type-list",21),a["\u0275\u0275elementStart"](33,"mat-form-field",22),a["\u0275\u0275elementStart"](34,"mat-label",1),a["\u0275\u0275text"](35,"device-profile.type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](36,"mat-select",23),a["\u0275\u0275template"](37,H,3,4,"mat-option",24),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](38,K,3,3,"mat-error",17),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](39,"tb-image-input",25),a["\u0275\u0275pipe"](40,"translate"),a["\u0275\u0275elementStart"](41,"mat-form-field",15),a["\u0275\u0275elementStart"](42,"mat-label",1),a["\u0275\u0275text"](43,"device-profile.description"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](44,"textarea",26),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](45,"mat-step",27),a["\u0275\u0275elementStart"](46,"form",12),a["\u0275\u0275template"](47,q,2,3,"ng-template",13),a["\u0275\u0275elementStart"](48,"mat-form-field",15),a["\u0275\u0275elementStart"](49,"mat-label",1),a["\u0275\u0275text"](50,"device-profile.transport-type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](51,"mat-select",28),a["\u0275\u0275template"](52,z,3,4,"mat-option",24),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](53,W,3,3,"mat-hint",17),a["\u0275\u0275template"](54,X,3,3,"mat-error",17),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](55,"tb-device-profile-transport-configuration",29),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](56,"mat-step",27),a["\u0275\u0275elementStart"](57,"form",12),a["\u0275\u0275template"](58,J,2,6,"ng-template",13),a["\u0275\u0275element"](59,"tb-device-profile-alarms",30),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](60,"mat-step",27),a["\u0275\u0275elementStart"](61,"form",12),a["\u0275\u0275template"](62,Y,2,3,"ng-template",13),a["\u0275\u0275element"](63,"tb-device-profile-provision-configuration",31),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](64,"div",32),a["\u0275\u0275template"](65,Z,4,6,"button",33),a["\u0275\u0275element"](66,"span",2),a["\u0275\u0275template"](67,te,5,11,"button",34),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](68,"mat-divider"),a["\u0275\u0275elementStart"](69,"div",35),a["\u0275\u0275elementStart"](70,"button",36),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](71,"async"),a["\u0275\u0275text"](72),a["\u0275\u0275pipe"](73,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](74,"button",37),a["\u0275\u0275listener"]("click",function(){return t.add()}),a["\u0275\u0275pipe"](75,"async"),a["\u0275\u0275text"](76),a["\u0275\u0275pipe"](77,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("tb-help","deviceProfiles"),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,33,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,35,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("linear",!0),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("stepControl",t.deviceProfileDetailsFormGroup),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",t.deviceProfileDetailsFormGroup),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](20,37,t.isLoading$)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",t.deviceProfileDetailsFormGroup.get("name").hasError("required")),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](28,39,"device-profile.mobile-dashboard")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](31,41,"device-profile.mobile-dashboard-hint")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("queueType",t.serviceType),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngForOf",t.deviceProfileTypes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.deviceProfileDetailsFormGroup.get("type").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](40,43,"device-profile.image")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("stepControl",t.transportConfigFormGroup)("optional",!0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",t.transportConfigFormGroup),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngForOf",t.deviceTransportTypes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.transportConfigFormGroup.get("transportType").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.transportConfigFormGroup.get("transportType").hasError("required")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("stepControl",t.alarmRulesFormGroup)("optional",!0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",t.alarmRulesFormGroup),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("deviceProfileId",null),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("stepControl",t.provisionConfigFormGroup)("optional",!0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",t.provisionConfigFormGroup),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",t.selectedIndex>0),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",t.showNext),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](71,45,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](73,47,"action.cancel")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](75,49,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](77,51,"action.add")))},directives:[b.MatToolbar,y.TranslateDirective,v.b,C.a,x.MatButton,w.MatIcon,S.NgIf,r.MatDialogContent,E.MatHorizontalStepper,E.MatStep,o["\u0275angular_packages_forms_forms_ba"],o.NgControlStatusGroup,o.FormGroupDirective,E.MatStepLabel,I.MatFormField,I.MatLabel,O.MatInput,o.DefaultValueAccessor,o.NgControlStatus,o.FormControlName,o.RequiredValidator,T.a,F.a,B.a,M.d,P.MatSelect,S.NgForOf,D.a,k.a,_.a,L.a,r.MatDialogActions,v.f,j.MatDivider,v.g,v.e,N.MatProgressBar,I.MatError,A.MatOption,I.MatHint],pipes:[S.AsyncPipe,y.TranslatePipe],styles:["@media screen and (max-width:599px){.tb-fullscreen-dialog   .mat-dialog-container[_nghost-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-dialog-container   [_nghost-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]{max-height:75vh}}[_nghost-%COMP%]     .mat-dialog-content{display:flex;flex-direction:column;height:100%;padding:0!important}[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal{display:flex;flex-direction:column;height:100%;overflow:hidden}@media screen and (max-width:599px){[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal .mat-step-label{white-space:normal;overflow:visible}[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal .mat-step-label .mat-step-text-label{overflow:visible}}[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal .mat-horizontal-content-container{height:530px;max-height:100%;width:100%;overflow-y:auto}@media screen and (min-width:960px){[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal .mat-horizontal-content-container{min-width:800px}}[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal .mat-horizontal-stepper-content[aria-expanded=true]{height:100%}[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal .mat-horizontal-stepper-content[aria-expanded=true] form{height:100%}"]}),t}(s.a);0,void 0},fDYr:function(e,t,n){"use strict";n.d(t,"a",function(){return w});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("gmuX"),l=n("0lYY"),c=n("//Q6"),d=n("l7P3"),u=n("tyNb"),p=n("3Pt+"),m=n("/t3+"),f=n("sYmb"),h=n("XiUz"),g=n("kRCp"),A=n("bTqV"),b=n("NFeN"),y=n("ofXK"),v=n("fYjj"),C=n("bv9b");function x(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",14)}var w=function(e){function t(t,n,i,a,r,o){var s=e.call(this,t,n,r)||this;s.store=t,s.router=n,s.data=i,s.errorStateMatcher=a,s.dialogRef=r,s.fb=o,s.submitted=!1,s.dashboard=s.data.dashboard,s.aliasController=s.data.aliasController,s.widget=s.data.widget;var l,d,u=s.data.widgetInfo,p=u.typeSettingsSchema||u.settingsSchema,m=u.typeDataKeySettingsSchema||u.dataKeySettingsSchema,f=u.typeParameters,h=u.actionSources,g=!Object(c.n)(u.typeParameters)||!u.typeParameters.useCustomDatasources;l=p&&""!==p?Object(c.A)(p)?JSON.parse(p):p:{},d=m&&""!==m?Object(c.A)(m)?JSON.parse(m):m:{};var A={config:s.widget.config,layout:{},widgetType:s.widget.type,typeParameters:f,actionSources:h,isDataEnabled:g,settingsSchema:l,dataKeySettingsSchema:d};return s.widgetFormGroup=s.fb.group({widgetConfig:[A,[]]}),s}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.helpLinkIdForWidgetType=function(){var e="widgetsConfig";return this.widget&&this.widget.type&&(e=l.n.get(this.widget.type).configHelpLinkId),e},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.add=function(){this.submitted=!0;var e=this.widgetFormGroup.get("widgetConfig").value;this.widget.config=e.config,this.widget.config.mobileOrder=e.layout.mobileOrder,this.widget.config.mobileHeight=e.layout.mobileHeight,this.widget.config.mobileHide=e.layout.mobileHide,this.dialogRef.close(this.widget)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](d.Store),a["\u0275\u0275directiveInject"](u.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](p.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-add-widget-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:25,vars:26,consts:[[2,"width","900px",3,"formGroup","ngSubmit"],["color","accent"],["translate",""],["fxFlex",""],[3,"tb-help"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[2,"position","relative","height","600px",3,"disabled"],["formControlName","widgetConfig",3,"aliasController","functionsOnly","entityAliases","filters","dashboardStates"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.add()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2",2),a["\u0275\u0275text"](3,"widget.add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"span",3),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](6,"div",4),a["\u0275\u0275elementStart"](7,"button",5),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](8,"mat-icon",6),a["\u0275\u0275text"](9,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](10,x,1,0,"mat-progress-bar",7),a["\u0275\u0275pipe"](11,"async"),a["\u0275\u0275elementStart"](12,"div",8),a["\u0275\u0275elementStart"](13,"fieldset",9),a["\u0275\u0275pipe"](14,"async"),a["\u0275\u0275element"](15,"tb-widget-config",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"div",11),a["\u0275\u0275elementStart"](17,"button",12),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](18,"async"),a["\u0275\u0275text"](19),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"button",13),a["\u0275\u0275pipe"](22,"async"),a["\u0275\u0275text"](23),a["\u0275\u0275pipe"](24,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.widgetFormGroup),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate1"](": ",t.data.widgetInfo.widgetName,""),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("tb-help",t.helpLinkIdForWidgetType()),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](11,14,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](14,16,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("aliasController",t.aliasController)("functionsOnly",!1)("entityAliases",t.dashboard.configuration.entityAliases)("filters",t.dashboard.configuration.filters)("dashboardStates",t.dashboard.configuration.states),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](18,18,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](20,20,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](22,22,t.isLoading$)||t.widgetFormGroup.invalid),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](24,24,"action.add")," "))},directives:[p["\u0275angular_packages_forms_forms_ba"],p.NgControlStatusGroup,p.FormGroupDirective,m.MatToolbar,f.TranslateDirective,h.b,g.a,A.MatButton,b.MatIcon,y.NgIf,o.MatDialogContent,v.a,p.NgControlStatus,p.FormControlName,o.MatDialogActions,h.e,C.MatProgressBar],pipes:[y.AsyncPipe,f.TranslatePipe],encapsulation:2}),t}(s.a);0,void 0},"fWS+":function(e,t,n){"use strict";n.d(t,"a",function(){return v});var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("JIJk"),s=n("//Q6"),l=n("XNiG"),c=n("1G5W"),d=n("XiUz"),u=n("kmnG"),p=n("sYmb"),m=n("qFsG"),f=n("ofXK"),h=n("t2OX");function g(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.snmp.timeout-ms-required")," "))}function A(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.snmp.timeout-ms-invalid-format")," "))}function b(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.snmp.retries-required")," "))}function y(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.snmp.retries-invalid-format")," "))}var v=function(){function e(e){this.fb=e,this.destroy$=new l.b,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(r.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.snmpDeviceProfileTransportConfigurationFormGroup=this.fb.group({timeoutMs:[500,[a.Validators.required,a.Validators.min(0),a.Validators.pattern("[0-9]*")]],retries:[0,[a.Validators.required,a.Validators.min(0),a.Validators.pattern("[0-9]*")]],communicationConfigs:[null,a.Validators.required]}),this.snmpDeviceProfileTransportConfigurationFormGroup.valueChanges.pipe(Object(c.a)(this.destroy$)).subscribe(function(){e.updateModel()})},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.snmpDeviceProfileTransportConfigurationFormGroup.disable({emitEvent:!1}):this.snmpDeviceProfileTransportConfigurationFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){Object(s.o)(e)&&this.snmpDeviceProfileTransportConfigurationFormGroup.patchValue(e,{emitEvent:!e.communicationConfigs})},e.prototype.updateModel=function(){var e=null;this.snmpDeviceProfileTransportConfigurationFormGroup.valid&&((e=this.snmpDeviceProfileTransportConfigurationFormGroup.getRawValue()).type=o.j.SNMP),this.propagateChange(e)},e.prototype.validate=function(){return this.snmpDeviceProfileTransportConfigurationFormGroup.valid?null:{snmpDeviceProfileTransportConfiguration:!1}},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-snmp-device-profile-transport-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:17,vars:5,consts:[[2,"padding","8px 0 16px",3,"formGroup"],["fxLayout","row","fxLayoutGap","8px","fxLayout.xs","column"],["fxFlex",""],["translate",""],["matInput","","formControlName","timeoutMs","type","number","min","0","required",""],[4,"ngIf"],["matInput","","formControlName","retries","type","number","min","0","required",""],["translate","",1,"tb-small",2,"padding-bottom","8px"],["formControlName","communicationConfigs"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"form",0),i["\u0275\u0275elementStart"](1,"section",1),i["\u0275\u0275elementStart"](2,"mat-form-field",2),i["\u0275\u0275elementStart"](3,"mat-label",3),i["\u0275\u0275text"](4,"device-profile.snmp.timeout-ms"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](5,"input",4),i["\u0275\u0275template"](6,g,3,3,"mat-error",5),i["\u0275\u0275template"](7,A,3,3,"mat-error",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"mat-form-field",2),i["\u0275\u0275elementStart"](9,"mat-label",3),i["\u0275\u0275text"](10,"device-profile.snmp.retries"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](11,"input",6),i["\u0275\u0275template"](12,b,3,3,"mat-error",5),i["\u0275\u0275template"](13,y,3,3,"mat-error",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"div",7),i["\u0275\u0275text"](15,"device-profile.snmp.communication-configs"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](16,"tb-snmp-device-profile-communication-config",8),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.snmpDeviceProfileTransportConfigurationFormGroup),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",t.snmpDeviceProfileTransportConfigurationFormGroup.get("timeoutMs").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.snmpDeviceProfileTransportConfigurationFormGroup.get("timeoutMs").hasError("pattern")||t.snmpDeviceProfileTransportConfigurationFormGroup.get("timeoutMs").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.snmpDeviceProfileTransportConfigurationFormGroup.get("retries").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.snmpDeviceProfileTransportConfigurationFormGroup.get("retries").hasError("pattern")||t.snmpDeviceProfileTransportConfigurationFormGroup.get("retries").hasError("min")))},directives:[a["\u0275angular_packages_forms_forms_ba"],a.NgControlStatusGroup,a.FormGroupDirective,d.f,d.g,u.MatFormField,d.b,u.MatLabel,p.TranslateDirective,m.MatInput,a.DefaultValueAccessor,a.NumberValueAccessor,a.NgControlStatus,a.FormControlName,a.RequiredValidator,f.NgIf,h.a,u.MatError],pipes:[p.TranslatePipe],encapsulation:2}),e}();0,void 0},fYjj:function(e,t,n){"use strict";n.d(t,"a",function(){return Ee});var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=n("0lYY"),s=n("3Pt+"),l=n("//Q6"),c=n("UZbx"),d=n("OiFK"),u=n("3Tyt"),p=n("U3y+"),m=n("LRne"),f=n("hqxT"),h=n("vkgz"),g=n("5+tZ"),A=n("JIr8"),b=n("21Fy"),y=n("6OOC"),v=n("kHY0"),C=n("FtGj"),x=n("l7P3"),w=n("0IaG"),S=n("sYmb"),E=n("wZkO"),I=n("ofXK"),O=n("XiUz"),T=n("kmnG"),F=n("qFsG"),B=n("znSr"),M=n("H3So"),P=n("bSwM"),D=n("jy/V"),k=n("nii4"),_=n("9kgB"),L=n("3bvz"),j=n("k81w"),N=n("d3UM"),R=n("A5z7"),U=n("FKr1"),V=n("NFeN"),Q=n("7EHt"),G=n("bTqV"),H=n("Qu3c"),K=n("MutI"),q=n("+C6U"),z=n("O5Hl"),W=n("JA3I"),X=n("pf+U"),$=n("RQSP"),J=function(e){return{"tb-disabled-label":e}};function Y(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",45),a["\u0275\u0275elementStart"](1,"div",46),a["\u0275\u0275elementStart"](2,"mat-checkbox",47),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"mat-checkbox",48),a["\u0275\u0275text"](6),a["\u0275\u0275pipe"](7,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"section",49),a["\u0275\u0275elementStart"](9,"span",50),a["\u0275\u0275text"](10,"widget-config.timewindow"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](11,"tb-timewindow",51),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](4,4,"widget-config.use-dashboard-timewindow")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](7,6,"widget-config.display-timewindow")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](8,J,n.dataSettings.get("useDashboardTimewindow").value)),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("aggregation",n.widgetType===n.widgetTypes.timeseries)}}function Z(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",63),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"](3);a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.alarmSearchStatusTranslationMap.get(n))," ")}}function ee(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",63),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"](3);a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.alarmSeverityTranslationMap.get(i.alarmSeverityEnum[n]))," ")}}function te(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-chip",64),a["\u0275\u0275listener"]("removed",function(){a["\u0275\u0275restoreView"](n);var e=t.$implicit;return a["\u0275\u0275nextContext"](3).removeAlarmType(e)}),a["\u0275\u0275text"](1),a["\u0275\u0275elementStart"](2,"mat-icon",65),a["\u0275\u0275text"](3,"cancel"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;a["\u0275\u0275property"]("selectable",!0)("removable",!0),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",i," ")}}function ne(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",52),a["\u0275\u0275elementStart"](1,"div",53),a["\u0275\u0275elementStart"](2,"mat-form-field",54),a["\u0275\u0275elementStart"](3,"mat-label",5),a["\u0275\u0275text"](4,"alarm.alarm-status-list"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"mat-select",55),a["\u0275\u0275pipe"](6,"translate"),a["\u0275\u0275template"](7,Z,3,4,"mat-option",56),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"mat-form-field",54),a["\u0275\u0275elementStart"](9,"mat-label",5),a["\u0275\u0275text"](10,"alarm.alarm-severity-list"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"mat-select",57),a["\u0275\u0275pipe"](12,"translate"),a["\u0275\u0275template"](13,ee,3,4,"mat-option",56),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"div",53),a["\u0275\u0275elementStart"](15,"mat-form-field",54),a["\u0275\u0275elementStart"](16,"mat-label",5),a["\u0275\u0275text"](17,"alarm.alarm-type-list"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"mat-chip-list",58,59),a["\u0275\u0275template"](20,te,4,3,"mat-chip",60),a["\u0275\u0275elementStart"](21,"input",61),a["\u0275\u0275listener"]("matChipInputTokenEnd",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).addAlarmType(e)}),a["\u0275\u0275pipe"](22,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](23,"mat-checkbox",62),a["\u0275\u0275text"](24),a["\u0275\u0275pipe"](25,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275reference"](19),r=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("placeholder",null!=r.dataSettings.get("alarmStatusList").value&&r.dataSettings.get("alarmStatusList").value.length?"":a["\u0275\u0275pipeBind1"](6,9,"alarm.any-status")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",r.alarmSearchStatuses),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("placeholder",null!=r.dataSettings.get("alarmSeverityList").value&&r.dataSettings.get("alarmSeverityList").value.length?"":a["\u0275\u0275pipeBind1"](12,11,"alarm.any-severity")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",r.alarmSeverities),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("ngForOf",r.alarmTypeList()),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("placeholder",null!=r.dataSettings.get("alarmTypeList").value&&r.dataSettings.get("alarmTypeList").value.length?"":a["\u0275\u0275pipeBind1"](22,13,"alarm.any-type")),a["\u0275\u0275property"]("matChipInputFor",i)("matChipInputSeparatorKeyCodes",r.separatorKeysCodes),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](25,15,"alarm.search-propagated-alarms")," ")}}var ie=function(e){return{count:e}};function ae(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",74),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](3);a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind2"](2,1,"widget-config.maximum-datasources",a["\u0275\u0275pureFunction1"](4,ie,null==n.modelValue?null:n.modelValue.typeParameters.maxDatasources)))}}function re(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275elementStart"](1,"span",75),a["\u0275\u0275text"](2,"datasource.add-datasource-prompt"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]())}function oe(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"button",95),a["\u0275\u0275pipe"](1,"translate"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3,"drag_handle"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](1,1,"action.drag"))}function se(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",63),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"](5);a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.datasourceTypesTranslations.get(n))," ")}}function le(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-form-field",96),a["\u0275\u0275element"](1,"mat-label"),a["\u0275\u0275element"](2,"input",97),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](3,2,"datasource.label")),a["\u0275\u0275property"]("formControl",n.get("name"))}}function ce(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-form-field",101),a["\u0275\u0275element"](1,"mat-label"),a["\u0275\u0275element"](2,"input",97),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2).$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](3,2,"datasource.label")),a["\u0275\u0275property"]("formControl",n.get("name"))}}function de(e,t){if(1&e&&(a["\u0275\u0275element"](0,"tb-entity-alias-select",98),a["\u0275\u0275element"](1,"tb-filter-select",99),a["\u0275\u0275template"](2,ce,4,4,"mat-form-field",100)),2&e){var n=a["\u0275\u0275nextContext"]().$implicit,i=a["\u0275\u0275nextContext"](4);a["\u0275\u0275property"]("showLabel",!0)("tbRequired",!0)("aliasController",i.aliasController)("formControl",n.get("entityAliasId"))("callbacks",i.widgetConfigCallbacks),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("showLabel",!0)("aliasController",i.aliasController)("formControl",n.get("filterId"))("callbacks",i.widgetConfigCallbacks),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.get("type").value===i.datasourceType.entityCount)}}function ue(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-list-item",85),a["\u0275\u0275listener"]("dndMoved",function(){a["\u0275\u0275restoreView"](n);var e=t.index;return a["\u0275\u0275nextContext"](4).dndDatasourceMoved(e)}),a["\u0275\u0275elementStart"](1,"div",72),a["\u0275\u0275elementStart"](2,"div",76),a["\u0275\u0275template"](3,oe,4,3,"button",86),a["\u0275\u0275elementStart"](4,"span"),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",87),a["\u0275\u0275elementStart"](7,"section",88),a["\u0275\u0275elementStart"](8,"mat-form-field",89),a["\u0275\u0275elementStart"](9,"mat-select",90),a["\u0275\u0275template"](10,se,3,4,"mat-option",56),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"section",91),a["\u0275\u0275template"](12,le,4,4,"ng-template",92),a["\u0275\u0275template"](13,de,3,10,"ng-template",92),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](14,"tb-data-keys",93),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"button",94),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](n);var e=t.index;return a["\u0275\u0275nextContext"](4).removeDatasource(e)}),a["\u0275\u0275pipe"](16,"async"),a["\u0275\u0275pipe"](17,"translate"),a["\u0275\u0275elementStart"](18,"mat-icon"),a["\u0275\u0275text"](19,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=t.index,o=a["\u0275\u0275nextContext"](4);a["\u0275\u0275property"]("dndDraggable",i.value)("dndDisableIf",o.disabled),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",!o.disabled),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"]("",r+1,"."),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("formControl",i.get("type")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",o.datasourceTypes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitch",i.get("type").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",o.datasourceType.function),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",i.get("type").value===o.datasourceType.entity||i.get("type").value===o.datasourceType.entityCount?i.get("type").value:""),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("widgetType",o.widgetType)("datasourceType",i.get("type").value)("maxDataKeys",null==o.modelValue||null==o.modelValue.typeParameters?null:o.modelValue.typeParameters.maxDataKeys)("optDataKeys",null==o.modelValue||null==o.modelValue.typeParameters?null:o.modelValue.typeParameters.dataKeysOptional)("aliasController",o.aliasController)("datakeySettingsSchema",null==o.modelValue?null:o.modelValue.dataKeySettingsSchema)("callbacks",o.widgetConfigCallbacks)("entityAliasId",i.get("entityAliasId").value)("formControl",i.get("dataKeys")),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](17,22,"widget-config.remove-datasource")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](16,20,o.isLoading$))}}function pe(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",72),a["\u0275\u0275element"](1,"span",76),a["\u0275\u0275elementStart"](2,"div",77),a["\u0275\u0275elementStart"](3,"span",78),a["\u0275\u0275text"](4,"widget-config.datasource-type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"span",79),a["\u0275\u0275text"](6,"widget-config.datasource-parameters"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](7,"span",80),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"div",81),a["\u0275\u0275elementStart"](9,"mat-list",82),a["\u0275\u0275listener"]("dndDrop",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](3).onDatasourceDrop(e)}),a["\u0275\u0275element"](10,"mat-list-item",83),a["\u0275\u0275template"](11,ue,20,24,"mat-list-item",84),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"](3);a["\u0275\u0275advance"](9),a["\u0275\u0275property"]("dndDisableIf",i.disabled),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",i.datasourcesFormArray().controls)}}function me(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-expansion-panel",66),a["\u0275\u0275elementStart"](1,"mat-expansion-panel-header"),a["\u0275\u0275elementStart"](2,"mat-panel-title",67),a["\u0275\u0275elementStart"](3,"div",68),a["\u0275\u0275text"](4,"widget-config.datasources"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](5,ae,3,6,"div",69),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](6,re,3,0,"div",70),a["\u0275\u0275template"](7,pe,12,2,"ng-template",null,71,a["\u0275\u0275templateRefExtractor"]),a["\u0275\u0275elementStart"](9,"div",72),a["\u0275\u0275elementStart"](10,"button",73),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).addDatasource()}),a["\u0275\u0275pipe"](11,"async"),a["\u0275\u0275pipe"](12,"translate"),a["\u0275\u0275elementStart"](13,"mat-icon"),a["\u0275\u0275text"](14,"add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"span",5),a["\u0275\u0275text"](16,"action.add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275reference"](8),r=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("expanded",!0),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",(null==r.modelValue?null:r.modelValue.typeParameters)&&(null==r.modelValue?null:r.modelValue.typeParameters.maxDatasources)>-1),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",0===r.datasourcesFormArray().length)("ngIfElse",i),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](12,9,"widget-config.add-datasource")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](11,7,r.isLoading$))("fxShow",(null==r.modelValue?null:r.modelValue.typeParameters)&&(-1==(null==r.modelValue?null:r.modelValue.typeParameters.maxDatasources)||r.datasourcesFormArray().controls.length<(null==r.modelValue?null:r.modelValue.typeParameters.maxDatasources)))}}var fe=function(e){return[e]};function he(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-expansion-panel",66),a["\u0275\u0275elementStart"](1,"mat-expansion-panel-header"),a["\u0275\u0275elementStart"](2,"mat-panel-title"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"div",102),a["\u0275\u0275element"](6,"tb-entity-alias-select",103),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("expanded",!0),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](4,7,"widget-config.target-device")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("formGroup",n.targetDeviceSettings),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("tbRequired",!n.widgetEditMode)("aliasController",n.aliasController)("allowedEntityTypes",a["\u0275\u0275pureFunction1"](9,fe,n.entityTypes.DEVICE))("callbacks",n.widgetConfigCallbacks)}}function ge(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",63),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"](3);a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.datasourceTypesTranslations.get(n))," ")}}function Ae(e,t){if(1&e&&(a["\u0275\u0275element"](0,"tb-entity-alias-select",107),a["\u0275\u0275element"](1,"tb-filter-select",108)),2&e){var n=a["\u0275\u0275nextContext"](3);a["\u0275\u0275property"]("showLabel",!0)("tbRequired",n.alarmSourceSettings.get("type").value===n.datasourceType.entity)("aliasController",n.aliasController)("callbacks",n.widgetConfigCallbacks),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("showLabel",!0)("aliasController",n.aliasController)("callbacks",n.widgetConfigCallbacks)}}function be(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-expansion-panel",66),a["\u0275\u0275elementStart"](1,"mat-expansion-panel-header"),a["\u0275\u0275elementStart"](2,"mat-panel-title"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"div",102),a["\u0275\u0275elementStart"](6,"section",88),a["\u0275\u0275elementStart"](7,"mat-form-field",89),a["\u0275\u0275elementStart"](8,"mat-select",104),a["\u0275\u0275template"](9,ge,3,4,"mat-option",56),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"section",105),a["\u0275\u0275template"](11,Ae,2,7,"ng-template",92),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](12,"tb-data-keys",106),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("expanded",!0),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](4,12,"widget-config.alarm-source")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("formGroup",n.alarmSourceSettings),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngForOf",n.datasourceTypes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitch",n.alarmSourceSettings.get("type").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",n.datasourceType.entity),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("widgetType",n.widgetType)("datasourceType",n.alarmSourceSettings.get("type").value)("aliasController",n.aliasController)("datakeySettingsSchema",null==n.modelValue?null:n.modelValue.dataKeySettingsSchema)("callbacks",n.widgetConfigCallbacks)("entityAliasId",n.alarmSourceSettings.get("entityAliasId").value)}}function ye(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-tab",2),a["\u0275\u0275pipe"](1,"translate"),a["\u0275\u0275elementStart"](2,"div",41),a["\u0275\u0275template"](3,Y,12,10,"div",42),a["\u0275\u0275template"](4,ne,26,17,"div",43),a["\u0275\u0275template"](5,me,17,11,"mat-expansion-panel",44),a["\u0275\u0275template"](6,he,7,11,"mat-expansion-panel",44),a["\u0275\u0275template"](7,be,13,14,"mat-expansion-panel",44),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](1,7,"widget-config.data")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("formGroup",n.dataSettings),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.widgetType===n.widgetTypes.timeseries||n.widgetType===n.widgetTypes.alarm),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.widgetType===n.widgetTypes.alarm),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.widgetType!==n.widgetTypes.rpc&&n.widgetType!==n.widgetTypes.alarm&&(null==n.modelValue?null:n.modelValue.isDataEnabled)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.widgetType===n.widgetTypes.rpc&&(null==n.modelValue?null:n.modelValue.isDataEnabled)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.widgetType===n.widgetTypes.alarm&&(null==n.modelValue?null:n.modelValue.isDataEnabled))}}function ve(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-tab",2),a["\u0275\u0275pipe"](1,"translate"),a["\u0275\u0275elementStart"](2,"div",109),a["\u0275\u0275element"](3,"tb-json-form",110),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](1,2,"widget-config.advanced")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("formGroup",n.advancedSettings)}}var Ce=function(){return{minHeight:"100px"}},xe={type:"object",properties:{}},we=[],Se=["*"],Ee=function(e){function t(t,n,i,a,r,s){var l=e.call(this,t)||this;return l.store=t,l.utils=n,l.entityService=i,l.dialog=a,l.translate=r,l.fb=s,l.separatorKeysCodes=[C.ENTER,C.COMMA,C.SEMICOLON],l.widgetTypes=o.m,l.entityTypes=p.b,l.alarmSearchStatuses=[c.b.ACTIVE,c.b.CLEARED,c.b.ACK,c.b.UNACK],l.alarmSearchStatusTranslationMap=c.f,l.alarmSeverities=Object.keys(c.c),l.alarmSeverityEnum=c.c,l.alarmSeverityTranslationMap=c.h,l.datasourceType=o.a,l.datasourceTypes=[],l.datasourceTypesTranslations=o.f,l.widgetConfigCallbacks={createEntityAlias:l.createEntityAlias.bind(l),createFilter:l.createFilter.bind(l),generateDataKey:l.generateDataKey.bind(l),fetchEntityKeys:l.fetchEntityKeys.bind(l),fetchDashboardStates:l.fetchDashboardStates.bind(l)},l.widgetEditMode=l.utils.widgetEditMode,l.propagateChange=null,l}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this.dataSettings=this.fb.group({}),this.targetDeviceSettings=this.fb.group({}),this.alarmSourceSettings=this.fb.group({}),this.advancedSettings=this.fb.group({}),this.widgetSettings=this.fb.group({title:[null,[]],showTitleIcon:[null,[]],titleIcon:[null,[]],iconColor:[null,[]],iconSize:[null,[]],titleTooltip:[null,[]],showTitle:[null,[]],dropShadow:[null,[]],enableFullscreen:[null,[]],backgroundColor:[null,[]],color:[null,[]],padding:[null,[]],margin:[null,[]],widgetStyle:[null,[]],titleStyle:[null,[]],units:[null,[]],decimals:[null,[s.Validators.min(0),s.Validators.max(15),s.Validators.pattern(/^\d*$/)]],showLegend:[null,[]],legendConfig:[null,[]]}),this.widgetSettings.get("showTitleIcon").valueChanges.subscribe(function(t){t?e.widgetSettings.get("titleIcon").enable({emitEvent:!1}):e.widgetSettings.get("titleIcon").disable({emitEvent:!1})}),this.widgetSettings.get("showLegend").valueChanges.subscribe(function(t){t?e.widgetSettings.get("legendConfig").enable({emitEvent:!1}):e.widgetSettings.get("legendConfig").disable({emitEvent:!1})}),this.layoutSettings=this.fb.group({mobileOrder:[null,[s.Validators.pattern(/^-?[0-9]+$/)]],mobileHeight:[null,[s.Validators.min(1),s.Validators.max(10),s.Validators.pattern(/^\d*$/)]],mobileHide:[!1]}),this.actionsSettings=this.fb.group({actionsData:[null,[]]})},t.prototype.removeChangeSubscriptions=function(){this.dataSettingsChangesSubscription&&(this.dataSettingsChangesSubscription.unsubscribe(),this.dataSettingsChangesSubscription=null),this.targetDeviceSettingsSubscription&&(this.targetDeviceSettingsSubscription.unsubscribe(),this.targetDeviceSettingsSubscription=null),this.alarmSourceSettingsSubscription&&(this.alarmSourceSettingsSubscription.unsubscribe(),this.alarmSourceSettingsSubscription=null),this.widgetSettingsSubscription&&(this.widgetSettingsSubscription.unsubscribe(),this.widgetSettingsSubscription=null),this.layoutSettingsSubscription&&(this.layoutSettingsSubscription.unsubscribe(),this.layoutSettingsSubscription=null),this.advancedSettingsSubscription&&(this.advancedSettingsSubscription.unsubscribe(),this.advancedSettingsSubscription=null),this.actionsSettingsSubscription&&(this.actionsSettingsSubscription.unsubscribe(),this.actionsSettingsSubscription=null)},t.prototype.createChangeSubscriptions=function(){var e=this;this.dataSettingsChangesSubscription=this.dataSettings.valueChanges.subscribe(function(){return e.updateDataSettings()}),this.targetDeviceSettingsSubscription=this.targetDeviceSettings.valueChanges.subscribe(function(){return e.updateTargetDeviceSettings()}),this.alarmSourceSettingsSubscription=this.alarmSourceSettings.valueChanges.subscribe(function(){return e.updateAlarmSourceSettings()}),this.widgetSettingsSubscription=this.widgetSettings.valueChanges.subscribe(function(){return e.updateWidgetSettings()}),this.layoutSettingsSubscription=this.layoutSettings.valueChanges.subscribe(function(){return e.updateLayoutSettings()}),this.advancedSettingsSubscription=this.advancedSettings.valueChanges.subscribe(function(){return e.updateAdvancedSettings()}),this.actionsSettingsSubscription=this.actionsSettings.valueChanges.subscribe(function(){return e.updateActionSettings()})},t.prototype.buildForms=function(){var e=this;this.functionsOnly?this.datasourceTypes=[o.a.function]:(this.datasourceTypes=[o.a.function,o.a.entity],this.widgetType===o.m.latest&&this.datasourceTypes.push(o.a.entityCount)),this.dataSettings=this.fb.group({}),this.targetDeviceSettings=this.fb.group({}),this.alarmSourceSettings=this.fb.group({}),this.advancedSettings=this.fb.group({}),this.widgetType!==o.m.timeseries&&this.widgetType!==o.m.alarm||(this.dataSettings.addControl("useDashboardTimewindow",this.fb.control(null)),this.dataSettings.addControl("displayTimewindow",this.fb.control(null)),this.dataSettings.addControl("timewindow",this.fb.control(null)),this.dataSettings.get("useDashboardTimewindow").valueChanges.subscribe(function(t){t?(e.dataSettings.get("displayTimewindow").disable({emitEvent:!1}),e.dataSettings.get("timewindow").disable({emitEvent:!1})):(e.dataSettings.get("displayTimewindow").enable({emitEvent:!1}),e.dataSettings.get("timewindow").enable({emitEvent:!1}))}),this.widgetType===o.m.alarm&&(this.dataSettings.addControl("alarmStatusList",this.fb.control(null)),this.dataSettings.addControl("alarmSeverityList",this.fb.control(null)),this.dataSettings.addControl("alarmTypeList",this.fb.control(null)),this.dataSettings.addControl("searchPropagatedAlarms",this.fb.control(null)))),this.modelValue.isDataEnabled&&(this.widgetType!==o.m.rpc&&this.widgetType!==o.m.alarm&&this.widgetType!==o.m.static?this.dataSettings.addControl("datasources",this.fb.array([])):this.widgetType===o.m.rpc?this.targetDeviceSettings.addControl("targetDeviceAliasId",this.fb.control(null,this.widgetEditMode?[]:[s.Validators.required])):this.widgetType===o.m.alarm&&(this.alarmSourceSettings=this.buildDatasourceForm())),this.advancedSettings.addControl("settings",this.fb.control(null,[]))},t.prototype.datasourcesFormArray=function(){return this.dataSettings.get("datasources")},t.prototype.registerOnChange=function(e){this.propagateChange=e},t.prototype.registerOnTouched=function(e){},t.prototype.setDisabledState=function(e){this.disabled=e},t.prototype.writeValue=function(e){var t=this;if(this.modelValue=e,this.removeChangeSubscriptions(),this.modelValue){this.widgetType!==this.modelValue.widgetType&&(this.widgetType=this.modelValue.widgetType,this.buildForms());var n=this.modelValue.config,i=this.modelValue.layout;if(n){this.selectedTab=0,this.widgetSettings.patchValue({title:n.title,showTitleIcon:!!Object(l.n)(n.showTitleIcon)&&n.showTitleIcon,titleIcon:Object(l.n)(n.titleIcon)?n.titleIcon:"",iconColor:Object(l.n)(n.iconColor)?n.iconColor:"rgba(0, 0, 0, 0.87)",iconSize:Object(l.n)(n.iconSize)?n.iconSize:"24px",titleTooltip:Object(l.n)(n.titleTooltip)?n.titleTooltip:"",showTitle:n.showTitle,dropShadow:!Object(l.n)(n.dropShadow)||n.dropShadow,enableFullscreen:!Object(l.n)(n.enableFullscreen)||n.enableFullscreen,backgroundColor:n.backgroundColor,color:n.color,padding:n.padding,margin:n.margin,widgetStyle:Object(l.n)(n.widgetStyle)?n.widgetStyle:{},titleStyle:Object(l.n)(n.titleStyle)?n.titleStyle:{fontSize:"16px",fontWeight:400},units:n.units,decimals:n.decimals,showLegend:Object(l.n)(n.showLegend)?n.showLegend:this.widgetType===o.m.timeseries,legendConfig:n.legendConfig||Object(o.g)(this.widgetType)},{emitEvent:!1}),this.widgetSettings.get("showTitleIcon").value?this.widgetSettings.get("titleIcon").enable({emitEvent:!1}):this.widgetSettings.get("titleIcon").disable({emitEvent:!1}),this.widgetSettings.get("showLegend").value?this.widgetSettings.get("legendConfig").enable({emitEvent:!1}):this.widgetSettings.get("legendConfig").disable({emitEvent:!1});var a={actionsMap:n.actions||{},actionSources:this.modelValue.actionSources||{}};if(this.actionsSettings.patchValue({actionsData:a},{emitEvent:!1}),this.widgetType===o.m.timeseries||this.widgetType===o.m.alarm){var r=!Object(l.n)(n.useDashboardTimewindow)||n.useDashboardTimewindow;this.dataSettings.patchValue({useDashboardTimewindow:r},{emitEvent:!1}),r?(this.dataSettings.get("displayTimewindow").disable({emitEvent:!1}),this.dataSettings.get("timewindow").disable({emitEvent:!1})):(this.dataSettings.get("displayTimewindow").enable({emitEvent:!1}),this.dataSettings.get("timewindow").enable({emitEvent:!1})),this.dataSettings.patchValue({displayTimewindow:!Object(l.n)(n.displayTimewindow)||n.displayTimewindow},{emitEvent:!1}),this.dataSettings.patchValue({timewindow:n.timewindow},{emitEvent:!1})}if(this.modelValue.isDataEnabled)if(this.widgetType!==o.m.rpc&&this.widgetType!==o.m.alarm&&this.widgetType!==o.m.static){var d=this.dataSettings.get("datasources");d.clear(),n.datasources&&n.datasources.forEach(function(e){d.push(t.buildDatasourceForm(e))})}else if(this.widgetType===o.m.rpc){var u=void 0;if(n.targetDeviceAliasIds&&n.targetDeviceAliasIds.length>0){var p=n.targetDeviceAliasIds[0],m=this.aliasController.getEntityAliases();u=m[p]?m[p].id:null}else u=null;this.targetDeviceSettings.patchValue({targetDeviceAliasId:u},{emitEvent:!1})}else if(this.widgetType===o.m.alarm){var f=[];Object(l.n)(n.alarmStatusList)&&n.alarmStatusList.length?f=n.alarmStatusList:Object(l.n)(n.alarmSearchStatus)&&n.alarmSearchStatus!==c.b.ANY&&(f=[n.alarmSearchStatus]),this.dataSettings.patchValue({alarmStatusList:f},{emitEvent:!1}),this.dataSettings.patchValue({alarmSeverityList:Object(l.n)(n.alarmSeverityList)?n.alarmSeverityList:[]},{emitEvent:!1}),this.dataSettings.patchValue({alarmTypeList:Object(l.n)(n.alarmTypeList)?n.alarmTypeList:[]},{emitEvent:!1}),this.dataSettings.patchValue({searchPropagatedAlarms:!Object(l.n)(n.searchPropagatedAlarms)||n.searchPropagatedAlarms},{emitEvent:!1}),this.alarmSourceSettings.patchValue(n.alarmSource,{emitEvent:!1});var h=this.alarmSourceSettings.get("type").value;this.alarmSourceSettings.get("entityAliasId").setValidators(h===o.a.entity?[s.Validators.required]:[]),this.alarmSourceSettings.get("entityAliasId").updateValueAndValidity({emitEvent:!1})}this.updateSchemaForm(n.settings),i?this.layoutSettings.patchValue({mobileOrder:i.mobileOrder,mobileHeight:i.mobileHeight,mobileHide:i.mobileHide},{emitEvent:!1}):this.layoutSettings.patchValue({mobileOrder:null,mobileHeight:null,mobileHide:!1},{emitEvent:!1})}this.createChangeSubscriptions()}},t.prototype.buildDatasourceForm=function(e){var t=this,n=!this.modelValue.typeParameters||!this.modelValue.typeParameters.dataKeysOptional||(null==e?void 0:e.type)===o.a.entityCount,i=this.fb.group({type:[e?e.type:null,[s.Validators.required]],name:[e?e.name:null,[]],entityAliasId:[e?e.entityAliasId:null,!e||e.type!==o.a.entity&&e.type!==o.a.entityCount?[]:[s.Validators.required]],filterId:[e?e.filterId:null,[]],dataKeys:[e?e.dataKeys:null,n?[s.Validators.required]:[]]});return i.get("type").valueChanges.subscribe(function(e){i.get("entityAliasId").setValidators(e===o.a.entity||e===o.a.entityCount?[s.Validators.required]:[]),n=!t.modelValue.typeParameters||!t.modelValue.typeParameters.dataKeysOptional||e===o.a.entityCount,i.get("dataKeys").setValidators(n?[s.Validators.required]:[]),i.get("entityAliasId").updateValueAndValidity(),i.get("dataKeys").updateValueAndValidity()}),i},t.prototype.updateSchemaForm=function(e){var t={};this.modelValue.settingsSchema&&this.modelValue.settingsSchema.schema?(t.schema=this.modelValue.settingsSchema.schema,t.form=this.modelValue.settingsSchema.form||Object(l.e)(Se),t.groupInfoes=this.modelValue.settingsSchema.groupInfoes,t.model=e):(t.schema=Object(l.e)(xe),t.form=Object(l.e)(Se),t.groupInfoes=Object(l.e)(we),t.model={}),this.advancedSettings.patchValue({settings:t},{emitEvent:!1})},t.prototype.updateDataSettings=function(){this.modelValue&&(this.modelValue.config&&Object.assign(this.modelValue.config,this.dataSettings.value),this.propagateChange(this.modelValue))},t.prototype.updateTargetDeviceSettings=function(){if(this.modelValue){if(this.modelValue.config){var e=this.targetDeviceSettings.get("targetDeviceAliasId").value;this.modelValue.config.targetDeviceAliasIds=e?[e]:[]}this.propagateChange(this.modelValue)}},t.prototype.updateAlarmSourceSettings=function(){if(this.modelValue){if(this.modelValue.config){var e=this.alarmSourceSettings.value;this.modelValue.config.alarmSource=e}this.propagateChange(this.modelValue)}},t.prototype.updateWidgetSettings=function(){this.modelValue&&(this.modelValue.config&&Object.assign(this.modelValue.config,this.widgetSettings.value),this.propagateChange(this.modelValue))},t.prototype.updateLayoutSettings=function(){this.modelValue&&(this.modelValue.layout&&Object.assign(this.modelValue.layout,this.layoutSettings.value),this.propagateChange(this.modelValue))},t.prototype.updateAdvancedSettings=function(){if(this.modelValue){if(this.modelValue.config){var e=this.advancedSettings.get("settings").value.model;this.modelValue.config.settings=e}this.propagateChange(this.modelValue)}},t.prototype.updateActionSettings=function(){if(this.modelValue){if(this.modelValue.config){var e=this.actionsSettings.get("actionsData").value.actionsMap;this.modelValue.config.actions=e}this.propagateChange(this.modelValue)}},t.prototype.alarmTypeList=function(){return this.dataSettings.get("alarmTypeList").value},t.prototype.removeAlarmType=function(e){var t=this.dataSettings.get("alarmTypeList").value,n=t.indexOf(e);n>=0&&(t.splice(n,1),this.dataSettings.get("alarmTypeList").setValue(t),this.dataSettings.get("alarmTypeList").markAsDirty())},t.prototype.addAlarmType=function(e){var t=e.input,n=e.value,i=this.dataSettings.get("alarmTypeList").value;(n||"").trim()&&(i.push(n.trim()),this.dataSettings.get("alarmTypeList").setValue(i),this.dataSettings.get("alarmTypeList").markAsDirty()),t&&(t.value="")},t.prototype.displayAdvanced=function(){return!!this.modelValue&&!!this.modelValue.settingsSchema&&!!this.modelValue.settingsSchema.schema},t.prototype.dndDatasourceMoved=function(e){this.datasourcesFormArray().removeAt(e)},t.prototype.onDatasourceDrop=function(e){var t=e.index;Object(l.B)(t)&&(t=this.datasourcesFormArray().length),this.datasourcesFormArray().insert(t,this.buildDatasourceForm(e.data))},t.prototype.removeDatasource=function(e){this.datasourcesFormArray().removeAt(e)},t.prototype.addDatasource=function(){var e;this.functionsOnly?(e=Object(l.e)(this.utils.getDefaultDatasource(this.modelValue.dataKeySettingsSchema.schema))).dataKeys=[this.generateDataKey("Sin",u.h.function)]:e={type:o.a.entity,dataKeys:[]},this.datasourcesFormArray().push(this.buildDatasourceForm(e))},t.prototype.generateDataKey=function(e,t){if(Object(l.z)(e))return e._hash=Math.random(),e;var n=e;if(t===u.h.alarm||t===u.h.entityField){var i=t===u.h.alarm?c.e[n]:y.a[e];i&&(n=this.translate.instant(i.name))}var a={name:e,type:t,label:n=this.genNextLabel(n),color:this.genNextColor(),settings:{},_hash:Math.random()};return t===u.h.function?(a.name="f(x)",a.funcBody=this.utils.getPredefinedFunctionBody(e),a.funcBody||(a.funcBody="return prevValue + 1;")):t===u.h.count&&(a.name="count"),Object(l.n)(this.modelValue.dataKeySettingsSchema.schema)&&(a.settings=this.utils.generateObjectFromJsonSchema(this.modelValue.dataKeySettingsSchema.schema)),a},t.prototype.genNextLabel=function(e){var t=e,n=1,i=!1,a=this.widgetType===o.m.alarm?[this.modelValue.config.alarmSource]:this.modelValue.config.datasources;if(a)do{i=!1,a.forEach(function(a){a&&a.dataKeys&&a.dataKeys.forEach(function(a){a.label===t&&(n++,t=e+" "+n,i=!0)})})}while(i);return t},t.prototype.genNextColor=function(){var e=0,t=this.widgetType===o.m.alarm?[this.modelValue.config.alarmSource]:this.modelValue.config.datasources;return t&&t.forEach(function(t){t&&t.dataKeys&&(e+=t.dataKeys.length)}),this.utils.getMaterialColor(e)},t.prototype.createEntityAlias=function(e,t){var n=this,i={id:null,alias:e,filter:{resolveMultiple:!1}};return this.dialog.open(f.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{isAdd:!0,allowedEntityTypes:t,entityAliases:this.entityAliases,alias:i}}).afterClosed().pipe(Object(h.a)(function(e){e&&(n.entityAliases[e.id]=e,n.aliasController.updateEntityAliases(n.entityAliases))}))},t.prototype.createFilter=function(e){var t=this,n={id:null,filter:e,keyFilters:[],editable:!0};return this.dialog.open(v.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{isAdd:!0,filters:this.filters,filter:n}}).afterClosed().pipe(Object(h.a)(function(e){e&&(t.filters[e.id]=e,t.aliasController.updateFilters(t.filters))}))},t.prototype.fetchEntityKeys=function(e,t){var n=this;return this.aliasController.getAliasInfo(e).pipe(Object(g.b)(function(e){return n.entityService.getEntityKeysByEntityFilter(e.entityFilter,t,{ignoreLoading:!0,ignoreErrors:!0}).pipe(Object(A.a)(function(){return Object(m.a)([])}))}),Object(A.a)(function(){return Object(m.a)([])}))},t.prototype.fetchDashboardStates=function(e){var t=Object.keys(this.dashboardStates),n=e?t.filter(this.createFilterForDashboardState(e)):t;return n&&n.length?n:[e]},t.prototype.createFilterForDashboardState=function(e){var t=e.toLowerCase();return function(e){return 0===e.toLowerCase().indexOf(t)}},t.prototype.validate=function(e){if(!this.dataSettings.valid)return{dataSettings:{valid:!1}};if(!this.widgetSettings.valid)return{widgetSettings:{valid:!1}};if(!this.layoutSettings.valid)return{widgetSettings:{valid:!1}};if(!this.advancedSettings.valid)return{advancedSettings:{valid:!1}};if(this.modelValue){var t=this.modelValue.config;if(this.widgetType===o.m.rpc&&this.modelValue.isDataEnabled){if(!t.targetDeviceAliasIds||!t.targetDeviceAliasIds.length)return{targetDeviceAliasIds:{valid:!1}}}else if(this.widgetType===o.m.alarm&&this.modelValue.isDataEnabled){if(!this.alarmSourceSettings.valid||!t.alarmSource)return{alarmSource:{valid:!1}}}else if(this.widgetType!==o.m.static&&this.modelValue.isDataEnabled&&(!t.datasources||!t.datasources.length))return{datasources:{valid:!1}}}return null},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](x.Store),a["\u0275\u0275directiveInject"](d.a),a["\u0275\u0275directiveInject"](b.a),a["\u0275\u0275directiveInject"](w.MatDialog),a["\u0275\u0275directiveInject"](S.TranslateService),a["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-widget-config"]],inputs:{forceExpandDatasources:"forceExpandDatasources",aliasController:"aliasController",entityAliases:"entityAliases",filters:"filters",functionsOnly:"functionsOnly",dashboardStates:"dashboardStates",disabled:"disabled"},features:[a["\u0275\u0275ProvidersFeature"]([{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)(function(){return t}),multi:!0},{provide:s.NG_VALIDATORS,useExisting:Object(a.forwardRef)(function(){return t}),multi:!0}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:97,vars:53,consts:[[1,"tb-widget-config","tb-absolute-fill",3,"selectedIndex","selectedIndexChange"],[3,"label",4,"ngIf"],[3,"label"],["fxLayout","column","fxLayoutGap","8px",1,"mat-content","mat-padding"],["fxLayout","column","fxLayoutGap","8px",3,"formGroup"],["translate",""],["fxLayout.xs","column","fxLayoutAlign.xs","center","fxLayout","row","fxLayoutAlign","start center"],["fxLayout","column","fxLayoutAlign","center","fxFlex.sm","40%","fxFlex.gt-sm","30%"],["fxFlex","",1,"mat-block"],["matInput","","formControlName","title"],["fxFlex",""],["matInput","","formControlName","titleTooltip"],["fxFlex","",3,"fxShow"],["required","","formControlName","titleStyle",3,"editorStyle","label"],["fxLayout","column","fxLayoutAlign","center","fxLayout.gt-md","row","fxLayoutAlign.gt-md","start center","fxFlex","100%","fxLayoutGap","8px"],["fxLayout.xs","column","fxLayoutAlign.xs","center","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxFlex.gt-md",""],["fxFlex","","formControlName","showTitleIcon"],["fxFlex","","formControlName","titleIcon"],["fxFlex","","icon","format_color_fill","openOnInput","","formControlName","iconColor",3,"label"],["matInput","","formControlName","iconSize"],["fxLayout.xs","column","fxLayoutAlign.xs","center","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px"],["fxLayout","column","fxLayoutAlign","center","fxLayoutGap","8px","fxFlex.sm","40%","fxFlex.gt-sm","30%"],["formControlName","showTitle"],["formControlName","dropShadow"],["formControlName","enableFullscreen"],["required","","formControlName","widgetStyle",3,"editorStyle","label"],["fxFlex","","icon","format_color_fill","openOnInput","","formControlName","backgroundColor",3,"label"],["fxFlex","","icon","format_color_fill","openOnInput","","formControlName","color",3,"label"],["matInput","","formControlName","padding"],["matInput","","formControlName","margin"],["matInput","","formControlName","units"],["matInput","","formControlName","decimals","type","number","min","0","max","15","step","1"],["fxLayout.xs","column","fxLayoutAlign.xs","center","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxFlex","100%",3,"fxShow"],["fxFlex.gt-xs","","formControlName","showLegend"],["fxFlex.gt-xs","","fxLayout","row","fxLayoutAlign","start center",2,"margin-bottom","16px"],["formControlName","legendConfig"],["formControlName","mobileHide"],["matInput","","formControlName","mobileOrder","type","number","step","1"],["matInput","","formControlName","mobileHeight","type","number","min","1","max","10","step","1"],[3,"label","formGroup"],["formControlName","actionsData",3,"callbacks","widgetType"],["fxLayout","column","fxLayoutGap","8px",1,"mat-content","mat-padding",3,"formGroup"],["fxFlex","100","fxLayout.xs","column","fxLayoutGap","8px","fxLayoutAlign.xs","center","fxLayout","row","fxLayoutAlign","start center",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center",4,"ngIf"],["class","tb-datasources",3,"expanded",4,"ngIf"],["fxFlex","100","fxLayout.xs","column","fxLayoutGap","8px","fxLayoutAlign.xs","center","fxLayout","row","fxLayoutAlign","start center"],["fxLayout","column","fxLayoutGap","8px","fxFlex.gt-xs",""],["formControlName","useDashboardTimewindow"],["formControlName","displayTimewindow"],["fxLayout","row","fxLayoutAlign","start center","fxLayout.lt-lg","column","fxLayoutAlign.lt-lg","center start","fxFlex.gt-xs","",2,"margin-bottom","16px"],["translate","",2,"padding-right","8px",3,"ngClass"],["asButton","true","isEdit","true","fxFlex","","formControlName","timewindow",3,"aggregation"],["fxLayout","column","fxLayoutAlign","center"],["fxLayout","column","fxLayoutAlign","center","fxLayout.gt-xs","row","fxLayoutAlign.gt-xs","start center","fxLayoutGap","8px"],["fxFlex","","floatLabel","always",1,"mat-block"],["formControlName","alarmStatusList","multiple","",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["formControlName","alarmSeverityList","multiple","",3,"placeholder"],["formControlName","alarmTypeList"],["alarmTypeChipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["matChipInputAddOnBlur","",3,"placeholder","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["fxFlex","","formControlName","searchPropagatedAlarms"],[3,"value"],[3,"selectable","removable","removed"],["matChipRemove",""],[1,"tb-datasources",3,"expanded"],["fxLayout","column"],["translate","",1,"tb-panel-title"],["class","tb-panel-hint",4,"ngIf"],[4,"ngIf","ngIfElse"],["datasourcesTemplate",""],["fxFlex","","fxLayout","row","fxLayoutAlign","start center"],["type","button","mat-raised-button","","color","accent","matTooltipPosition","above",3,"disabled","fxShow","matTooltip","click"],[1,"tb-panel-hint"],["translate","","fxLayoutAlign","center center",1,"tb-prompt"],[2,"width","60px"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",2,"padding","0 0 0 10px","margin","5px"],["translate","",2,"min-width","120px"],["fxHide","","fxShow.gt-sm","","translate","","fxFlex","",2,"padding-left","10px"],[2,"min-width","40px"],[2,"overflow","auto","padding-bottom","15px"],["dndDropzone","","dndEffectAllowed","move","formArrayName","datasources",3,"dndDisableIf","dndDrop"],["dndPlaceholderRef","",1,"dndPlaceholder"],["dndEffectAllowed","move",3,"dndDraggable","dndDisableIf","dndMoved",4,"ngFor","ngForOf"],["dndEffectAllowed","move",3,"dndDraggable","dndDisableIf","dndMoved"],["mat-icon-button","","color","accent","class","handle","style","min-width: 40px; margin: 0","dndHandle","","matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",1,"mat-elevation-z4",2,"padding","0 0 0 10px","margin","5px"],["fxFlex","","fxLayout","column","fxLayoutAlign","center","fxLayout.gt-sm","row","fxLayoutAlign.gt-sm","start center"],[1,"tb-datasource-type"],[3,"formControl"],["fxLayout","column",1,"tb-datasource",3,"ngSwitch"],[3,"ngSwitchCase"],["fxFlex","",1,"tb-data-keys",3,"widgetType","datasourceType","maxDataKeys","optDataKeys","aliasController","datakeySettingsSchema","callbacks","entityAliasId","formControl"],["type","button","mat-icon-button","","color","accent","matTooltipPosition","above",2,"min-width","40px",3,"disabled","matTooltip","click"],["mat-icon-button","","color","accent","dndHandle","","matTooltipPosition","above",1,"handle",2,"min-width","40px","margin","0",3,"matTooltip"],["floatLabel","always",1,"tb-datasource-name",2,"min-width","200px"],["matInput","",3,"placeholder","formControl"],[3,"showLabel","tbRequired","aliasController","formControl","callbacks"],[3,"showLabel","aliasController","formControl","callbacks"],["floatLabel","always","class","tb-datasource-name no-border-top","style","min-width: 200px;",4,"ngIf"],["floatLabel","always",1,"tb-datasource-name","no-border-top",2,"min-width","200px"],[2,"padding","0 5px",3,"formGroup"],["fxFlex","","formControlName","targetDeviceAliasId",3,"tbRequired","aliasController","allowedEntityTypes","callbacks"],["formControlName","type"],[1,"tb-datasource",3,"ngSwitch"],["fxFlex","","formControlName","dataKeys",1,"tb-data-keys",3,"widgetType","datasourceType","aliasController","datakeySettingsSchema","callbacks","entityAliasId"],["formControlName","entityAliasId",3,"showLabel","tbRequired","aliasController","callbacks"],["formControlName","filterId",3,"showLabel","aliasController","callbacks"],["fxLayout","column",1,"mat-content","mat-padding","tb-advanced-widget-config",3,"formGroup"],["formControlName","settings"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-tab-group",0),a["\u0275\u0275listener"]("selectedIndexChange",function(e){return t.selectedTab=e}),a["\u0275\u0275template"](1,ye,8,9,"mat-tab",1),a["\u0275\u0275elementStart"](2,"mat-tab",2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementStart"](4,"div",3),a["\u0275\u0275elementStart"](5,"div",4),a["\u0275\u0275elementStart"](6,"span",5),a["\u0275\u0275text"](7,"widget-config.general-settings"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"div",6),a["\u0275\u0275elementStart"](9,"div",7),a["\u0275\u0275elementStart"](10,"mat-form-field",8),a["\u0275\u0275elementStart"](11,"mat-label",5),a["\u0275\u0275text"](12,"widget-config.title"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](13,"input",9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"mat-form-field",10),a["\u0275\u0275elementStart"](15,"mat-label",5),a["\u0275\u0275text"](16,"widget-config.title-tooltip"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](17,"input",11),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"div",12),a["\u0275\u0275element"](19,"tb-json-object-edit",13),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"div",14),a["\u0275\u0275elementStart"](22,"div",15),a["\u0275\u0275elementStart"](23,"mat-checkbox",16),a["\u0275\u0275text"](24),a["\u0275\u0275pipe"](25,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](26,"tb-material-icon-select",17),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](27,"div",15),a["\u0275\u0275element"](28,"tb-color-input",18),a["\u0275\u0275pipe"](29,"translate"),a["\u0275\u0275elementStart"](30,"mat-form-field",10),a["\u0275\u0275elementStart"](31,"mat-label",5),a["\u0275\u0275text"](32,"widget-config.icon-size"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](33,"input",19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](34,"div",20),a["\u0275\u0275elementStart"](35,"div",21),a["\u0275\u0275elementStart"](36,"mat-checkbox",22),a["\u0275\u0275text"](37),a["\u0275\u0275pipe"](38,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](39,"mat-checkbox",23),a["\u0275\u0275text"](40),a["\u0275\u0275pipe"](41,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](42,"mat-checkbox",24),a["\u0275\u0275text"](43),a["\u0275\u0275pipe"](44,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](45,"div",10),a["\u0275\u0275element"](46,"tb-json-object-edit",25),a["\u0275\u0275pipe"](47,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](48,"div",14),a["\u0275\u0275elementStart"](49,"div",15),a["\u0275\u0275element"](50,"tb-color-input",26),a["\u0275\u0275pipe"](51,"translate"),a["\u0275\u0275element"](52,"tb-color-input",27),a["\u0275\u0275pipe"](53,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](54,"div",15),a["\u0275\u0275elementStart"](55,"mat-form-field",10),a["\u0275\u0275elementStart"](56,"mat-label",5),a["\u0275\u0275text"](57,"widget-config.padding"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](58,"input",28),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](59,"mat-form-field",10),a["\u0275\u0275elementStart"](60,"mat-label",5),a["\u0275\u0275text"](61,"widget-config.margin"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](62,"input",29),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](63,"div",20),a["\u0275\u0275elementStart"](64,"mat-form-field",10),a["\u0275\u0275elementStart"](65,"mat-label",5),a["\u0275\u0275text"](66,"widget-config.units"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](67,"input",30),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](68,"mat-form-field",10),a["\u0275\u0275elementStart"](69,"mat-label",5),a["\u0275\u0275text"](70,"widget-config.decimals"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](71,"input",31),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](72,"div",32),a["\u0275\u0275elementStart"](73,"mat-checkbox",33),a["\u0275\u0275text"](74),a["\u0275\u0275pipe"](75,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](76,"section",34),a["\u0275\u0275element"](77,"tb-legend-config",35),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](78,"div",4),a["\u0275\u0275elementStart"](79,"span",5),a["\u0275\u0275text"](80,"widget-config.mobile-mode-settings"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](81,"div",20),a["\u0275\u0275elementStart"](82,"mat-checkbox",36),a["\u0275\u0275text"](83),a["\u0275\u0275pipe"](84,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](85,"mat-form-field",10),a["\u0275\u0275elementStart"](86,"mat-label",5),a["\u0275\u0275text"](87,"widget-config.order"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](88,"input",37),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](89,"mat-form-field",10),a["\u0275\u0275elementStart"](90,"mat-label",5),a["\u0275\u0275text"](91,"widget-config.height"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](92,"input",38),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](93,ve,4,4,"mat-tab",1),a["\u0275\u0275elementStart"](94,"mat-tab",39),a["\u0275\u0275pipe"](95,"translate"),a["\u0275\u0275element"](96,"tb-manage-widget-actions",40),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("selectedIndex",t.selectedTab),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.widgetType!==t.widgetTypes.static),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](3,25,"widget-config.settings")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("formGroup",t.widgetSettings),a["\u0275\u0275advance"](13),a["\u0275\u0275property"]("fxShow",t.widgetSettings.get("showTitle").value),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](20,27,"widget-config.title-style")),a["\u0275\u0275property"]("editorStyle",a["\u0275\u0275pureFunction0"](51,Ce)),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](25,29,"widget-config.display-icon")," "),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](29,31,"widget-config.icon-color")),a["\u0275\u0275advance"](9),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](38,33,"widget-config.display-title")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](41,35,"widget-config.drop-shadow")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](44,37,"widget-config.enable-fullscreen")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](47,39,"widget-config.widget-style")),a["\u0275\u0275property"]("editorStyle",a["\u0275\u0275pureFunction0"](52,Ce)),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](51,41,"widget-config.background-color")),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](53,43,"widget-config.text-color")),a["\u0275\u0275advance"](20),a["\u0275\u0275property"]("fxShow",t.widgetType===t.widgetTypes.timeseries||t.widgetType===t.widgetTypes.latest),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](75,45,"widget-config.display-legend")," "),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("formGroup",t.layoutSettings),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](84,47,"widget-config.mobile-hide")," "),a["\u0275\u0275advance"](10),a["\u0275\u0275property"]("ngIf",t.displayAdvanced()),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](95,49,"widget-config.actions")),a["\u0275\u0275property"]("formGroup",t.actionsSettings),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("callbacks",t.widgetConfigCallbacks)("widgetType",t.modelValue.widgetType))},directives:[E.MatTabGroup,I.NgIf,E.MatTab,O.f,O.g,s.NgControlStatusGroup,s.FormGroupDirective,S.TranslateDirective,O.e,O.b,T.MatFormField,T.MatLabel,F.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,B.d,M.a,s.RequiredValidator,P.MatCheckbox,D.a,k.a,s.NumberValueAccessor,_.a,L.a,I.NgClass,B.b,j.a,N.MatSelect,I.NgForOf,R.MatChipList,R.MatChipInput,U.MatOption,R.MatChip,V.MatIcon,R.MatChipRemove,Q.MatExpansionPanel,Q.MatExpansionPanelHeader,Q.MatExpansionPanelTitle,G.MatButton,H.MatTooltip,K.MatList,q.b,s.FormArrayName,K.MatListItem,q.e,q.a,s.FormControlDirective,I.NgSwitch,I.NgSwitchCase,z.a,q.c,W.a,X.a,$.a],pipes:[S.TranslatePipe,I.AsyncPipe],styles:["[_nghost-%COMP%]   .tb-widget-config[_ngcontent-%COMP%]   .tb-advanced-widget-config[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .tb-widget-config[_ngcontent-%COMP%]   .tb-datasources[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{cursor:move}[_nghost-%COMP%]   .tb-widget-config[_ngcontent-%COMP%]   .tb-datasources[_ngcontent-%COMP%]   .mat-list[_ngcontent-%COMP%]{min-height:68px;padding-left:0}[_nghost-%COMP%]   .tb-widget-config[_ngcontent-%COMP%]   .tb-datasources[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{height:auto;min-height:68px;display:block}[_nghost-%COMP%]   .tb-widget-config[_ngcontent-%COMP%]   .tb-datasources[_ngcontent-%COMP%]   .mat-list-item.dndDraggingSource[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .tb-widget-config[_ngcontent-%COMP%]   .tb-datasources[_ngcontent-%COMP%]   .mat-list-item.dndPlaceholder[_ngcontent-%COMP%]{display:block;background-color:#ddd}[_nghost-%COMP%]   .tb-widget-config[_ngcontent-%COMP%]   .tb-datasource-type[_ngcontent-%COMP%]{min-width:120px}@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-widget-config[_ngcontent-%COMP%]   .tb-datasource-type[_ngcontent-%COMP%]{max-width:120px}}@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-widget-config[_ngcontent-%COMP%]   .tb-datasource[_ngcontent-%COMP%]{padding-left:8px}}@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-widget-config[_ngcontent-%COMP%]   .tb-datasource-name[_ngcontent-%COMP%]{width:200px;max-width:200px}}@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-widget-config[_ngcontent-%COMP%]   .tb-data-keys[_ngcontent-%COMP%]{padding-left:8px}}[_nghost-%COMP%]     .tb-widget-config .mat-tab-body-wrapper{position:absolute;top:49px;left:0;right:0;bottom:0}[_nghost-%COMP%]     .tb-widget-config .tb-panel-hint{font-size:12px;color:grey}[_nghost-%COMP%]     .tb-widget-config .mat-checkbox-label{white-space:normal}[_nghost-%COMP%]     .tb-widget-config .mat-expansion-panel.tb-datasources.mat-expanded{overflow:visible}[_nghost-%COMP%]     .tb-widget-config .mat-expansion-panel.tb-datasources .mat-expansion-panel-body{padding:0 12px 16px}[_nghost-%COMP%]     .tb-widget-config .mat-expansion-panel.tb-datasources .mat-list-base .mat-list-item .mat-list-item-content{padding:0}[_nghost-%COMP%]     .tb-widget-config .mat-expansion-panel .mat-expansion-panel-content{font:inherit}[_nghost-%COMP%]     .tb-widget-config .tb-datasource-type .mat-form-field-infix{width:100%}[_nghost-%COMP%]     .tb-widget-config .tb-datasource-type .mat-select-value{min-width:92px}[_nghost-%COMP%]     .tb-widget-config .tb-datasource tb-entity-alias-select .mat-form-field{margin-top:20px}@media screen and (min-width:960px){[_nghost-%COMP%]     .tb-widget-config .tb-datasource tb-entity-alias-select .mat-form-field{width:200px;max-width:200px}}@media screen and (min-width:960px){[_nghost-%COMP%]     .tb-widget-config .tb-datasource tb-filter-select .mat-form-field{width:200px;max-width:200px}}[_nghost-%COMP%]     .tb-widget-config .tb-datasource .tb-datasource-name.no-border-top .mat-form-field-infix{border-top:0}@media screen and (min-width:960px){[_nghost-%COMP%]     .tb-widget-config .tb-data-keys .mat-input-element{min-height:32px}}"]}),t}(r.a);0,void 0},fhIE:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var i=n("mrSG"),a=n("fXoL"),r=n("gmuX"),o=n("0IaG"),s=n("l7P3"),l=n("tyNb"),c=n("3Pt+"),d=n("/t3+"),u=n("XiUz"),p=n("bTqV"),m=n("NFeN"),f=n("ofXK"),h=n("AC8c"),g=n("bv9b"),A=n("sYmb");function b(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",14)}function y(e,t){1&e&&a["\u0275\u0275element"](0,"div",15)}var v=function(e){function t(t,n,i,a,r){var o=e.call(this,t,n,a)||this;return o.store=t,o.router=n,o.data=i,o.dialogRef=a,o.fb=r,o.submitted=!1,o}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){this.instancesFormGroup=this.fb.group({instancesIds:[this.data.instancesId]})},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.add=function(){this.dialogRef.close(this.instancesFormGroup.get("instancesIds").value)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](s.Store),a["\u0275\u0275directiveInject"](l.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](c.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-lwm2m-object-add-instances"]],features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:26,vars:24,consts:[[2,"min-width","400px",3,"formGroup","ngSubmit"],["fxLayout","row","color","accent"],[2,"font-weight","500"],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["required","","formControlName","instancesIds"],["mat-dialog-actions","","fxLayout","row","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.add()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"span",2),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](4),a["\u0275\u0275element"](5,"span",3),a["\u0275\u0275elementStart"](6,"button",4),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](7,"mat-icon",5),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,b,1,0,"mat-progress-bar",6),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,y,1,0,"div",7),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",8),a["\u0275\u0275elementStart"](14,"fieldset",9),a["\u0275\u0275pipe"](15,"async"),a["\u0275\u0275element"](16,"tb-profile-lwm2m-object-add-instances-list",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"div",11),a["\u0275\u0275elementStart"](18,"button",12),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](19,"async"),a["\u0275\u0275text"](20),a["\u0275\u0275pipe"](21,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"button",13),a["\u0275\u0275pipe"](23,"async"),a["\u0275\u0275text"](24),a["\u0275\u0275pipe"](25,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.instancesFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.data.objectName),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"]("\xa0#",t.data.objectId," "),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,10,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,12,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](15,14,t.isLoading$)),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](19,16,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](21,18,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](23,20,t.isLoading$)||t.instancesFormGroup.invalid||!t.instancesFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](25,22,"action.save")," "))},directives:[c["\u0275angular_packages_forms_forms_ba"],c.NgControlStatusGroup,c.FormGroupDirective,d.MatToolbar,u.f,u.b,p.MatButton,m.MatIcon,f.NgIf,o.MatDialogContent,h.a,c.RequiredValidator,c.NgControlStatus,c.FormControlName,o.MatDialogActions,u.e,g.MatProgressBar],pipes:[f.AsyncPipe,A.TranslatePipe],encapsulation:2}),t}(r.a);0,void 0},fr2l:function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return p}),n.d(t,"e",function(){return h}),n.d(t,"l",function(){return g}),n.d(t,"f",function(){return A}),n.d(t,"m",function(){return b}),n.d(t,"h",function(){return y}),n.d(t,"g",function(){return v}),n.d(t,"k",function(){return C}),n.d(t,"n",function(){return x}),n.d(t,"i",function(){return w}),n.d(t,"j",function(){return S}),n.d(t,"a",function(){return E});var i=n("mrSG"),a=n("//Q6"),r=n("UZbx"),o=n("Zss7"),s=n("xw5a"),l=n("3Tyt"),c=o;function d(e,t){if(!e&&!e.length)return null;var n,i=s.c.ASC;if(e.startsWith("-")?(i=s.c.DESC,n=e.substring(1)):n=e.startsWith("+")?e.substring(1):e,!n&&!n.length)return null;var a=function(e,t){var n,i=t.filter(function(e){return e.type===l.h.alarm});i.length&&(n=m("name",e,i));n||(n=m("label",e,t));return n}(n,t);return a||(a=function(e,t){return m("name",e,t)}(n,t)),a&&a.entityKey?{key:a.entityKey,direction:i}:null}function u(e,t){return e?t.find(function(t){return t.entityKey&&t.entityKey.type===e.type&&t.entityKey.key===e.key}):null}function p(e,t){if(e){var n=function(e,t){return m("def",e,t)}(e,t);return n?n.entityKey:null}return null}function m(e,t,n){return n.find(function(n){return n[e]===t})}function f(e,t,n,i){var a=t,r=i.find(function(n){return n[e]===t});return r&&(a=r[n]),a}function h(e,t){return f("def",e,"label",t)}function g(e,t){return Object(a.j)(e,t.label)}function A(e,t){var n,i=null;return t.type===l.h.alarm&&!(i=null===(n=r.e[t.name])||void 0===n?void 0:n.value)&&t.name.startsWith("details.")&&(i=t.name),i?Object(a.j)(e,i):Object(a.j)(e,t.label)}function b(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=null,o=!1;if(!0===e.useRowStyleFunction&&Object(a.n)(e.rowStyleFunction)&&e.rowStyleFunction.length>0)try{r=new(Function.bind.apply(Function,Object(i.h)([void 0],t,[e.rowStyleFunction]))),o=!0}catch(s){r=null,o=!1}return{useRowStyleFunction:o,rowStyleFunction:r}}function y(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=null,o=!1;if(!0===e.useCellStyleFunction&&Object(a.n)(e.cellStyleFunction)&&e.cellStyleFunction.length>0)try{r=new(Function.bind.apply(Function,Object(i.h)([void 0],t,[e.cellStyleFunction]))),o=!0}catch(s){r=null,o=!1}return{useCellStyleFunction:o,cellStyleFunction:r}}function v(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=null,o=!1;if(!0===e.useCellContentFunction&&Object(a.n)(e.cellContentFunction)&&e.cellContentFunction.length>0)try{r=new(Function.bind.apply(Function,Object(i.h)([void 0],t,[e.cellContentFunction]))),o=!0}catch(s){r=null,o=!1}return{cellContentFunction:r,useCellContentFunction:o}}function C(e){return Object(a.n)(e.columnWidth)?e.columnWidth:"0px"}function x(e){var t={width:e};return"0px"!==e&&(t.minWidth=e,t.maxWidth=e),t}function w(e){return!(Object(a.n)(e.defaultColumnVisibility)&&"hidden"===e.defaultColumnVisibility)}function S(e){return!(Object(a.n)(e.columnSelectionToDisplay)&&"disabled"===e.columnSelectionToDisplay)}function E(e){var t=e.color||"rgba(0, 0, 0, 0.87)",n=e.backgroundColor||"rgb(255, 255, 255)",i=c.mix(n,c("rgba(221, 221, 221, 0.65)").setAlpha(1),65).toRgbString(),a=c.mix(n,c("rgba(221, 221, 221, 0.5)").setAlpha(1),50).toRgbString(),r=c.mix(n,c("rgba(221, 221, 221, 0.3)").setAlpha(1),30).toRgbString(),o=c(t),s=o.setAlpha(.87).toRgbString(),l=o.setAlpha(.54).toRgbString(),d=o.setAlpha(.26).toRgbString(),u=o.setAlpha(.38).toRgbString(),p=o.setAlpha(.12).toRgbString();return".mat-input-element::placeholder {\n   color: "+l+";\n}\n.mat-input-element::-moz-placeholder {\n   color: "+l+";\n}\n.mat-input-element::-webkit-input-placeholder {\n   color: "+l+";\n}\n.mat-input-element:-ms-input-placeholder {\n   color: "+l+";\n}\nmat-toolbar.mat-table-toolbar {\ncolor: "+s+';\n}\nmat-toolbar.mat-table-toolbar:not([color="accent"]) button.mat-icon-button mat-icon {\ncolor: '+l+";\n}\n.mat-tab-label {\ncolor: "+s+";\n}\n.mat-tab-header-pagination-chevron {\nborder-color: "+s+";\n}\n.mat-tab-header-pagination-disabled .mat-tab-header-pagination-chevron {\nborder-color: "+u+";\n}\n.mat-table .mat-header-row {\nbackground-color: "+n+";\n}\n.mat-table .mat-header-cell {\ncolor: "+l+";\n}\n.mat-table .mat-header-cell .mat-sort-header-arrow {\ncolor: "+d+";\n}\n.mat-table .mat-cell, .mat-table .mat-header-cell {\nborder-bottom-color: "+p+";\n}\n.mat-table .mat-cell .mat-checkbox-frame, .mat-table .mat-header-cell .mat-checkbox-frame {\nborder-color: "+l+";\n}\n.mat-table .mat-row .mat-cell.mat-table-sticky {\ntransition: background-color .2s;\n}\n.mat-table .mat-row.tb-current-entity {\nbackground-color: rgba(221, 221, 221, 0.65);\n}\n.mat-table .mat-row.tb-current-entity .mat-cell.mat-table-sticky {\nbackground-color: "+i+";\n}\n.mat-table .mat-row:hover:not(.tb-current-entity) {\nbackground-color: rgba(221, 221, 221, 0.3);\n}\n.mat-table .mat-row:hover:not(.tb-current-entity) .mat-cell.mat-table-sticky {\nbackground-color: "+r+";\n}\n.mat-table .mat-row.mat-row-select.mat-selected:not(.tb-current-entity) {\nbackground-color: rgba(221, 221, 221, 0.5);\n}\n.mat-table .mat-row.mat-row-select.mat-selected:not(.tb-current-entity) .mat-cell.mat-table-sticky {\nbackground-color: "+a+";\n}\n.mat-table .mat-row .mat-cell.mat-table-sticky, .mat-table .mat-header-cell.mat-table-sticky {\nbackground-color: "+n+";\n}\n.mat-table .mat-cell {\ncolor: "+s+";\n}\n.mat-table .mat-cell button.mat-icon-button mat-icon {\ncolor: "+l+";\n}\n.mat-table .mat-cell button.mat-icon-button[disabled][disabled] mat-icon {\ncolor: "+d+";\n}\n.mat-divider {\nborder-top-color: "+p+";\n}\n.mat-paginator {\ncolor: "+l+";\n}\n.mat-paginator button.mat-icon-button {\ncolor: "+l+";\n}\n.mat-paginator button.mat-icon-button[disabled][disabled] {\ncolor: "+d+";\n}\n.mat-paginator .mat-select-value {\ncolor: "+l+";\n}"}},g8Nv:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n("mrSG"),a=n("fXoL"),r=n("Vurf"),o=n("Z9d0"),s=n("ofXK"),l=n("PCNd"),c=n("5+tZ"),d=n("vkgz"),u=n("llUh"),p=n("txsh"),m=n("sYmb"),f=n("0IaG"),h=function(){function e(e,t,n,i){this.translate=e,this.authService=t,this.dynamicComponentFactoryService=n,this.dialog=i}return e.prototype.customDialog=function(e,t,n){var a=this;return this.dynamicComponentFactoryService.createDynamicComponentFactory(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.d)(t,e),t}(u.b),e,[l.a,g]).pipe(Object(c.b)(function(e){var i={controller:t,customComponentFactory:e,data:n};return a.dialog.open(p.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:i}).afterClosed().pipe(Object(d.a)(function(){a.dynamicComponentFactoryService.destroyDynamicComponentFactory(e)}))}))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275inject"](m.TranslateService),a["\u0275\u0275inject"](r.a),a["\u0275\u0275inject"](o.a),a["\u0275\u0275inject"](f.MatDialog))},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();0,void 0;var g=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({imports:[[s.CommonModule,l.a]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&a["\u0275\u0275setNgModuleScope"](g,{imports:[s.CommonModule,l.a]})),0},gKbb:function(e,t,n){"use strict";n.d(t,"a",function(){return _});var i=n("mrSG"),a=n("fXoL"),r=n("3Pt+"),o=n("JIJk"),s=n("FtGj"),l=n("OiFK"),c=n("0IaG"),d=n("7EHt"),u=n("XiUz"),p=n("ofXK"),m=n("bTqV"),f=n("Qu3c"),h=n("NFeN"),g=n("f0Cb"),A=n("kmnG"),b=n("qFsG"),y=n("sYmb"),v=n("96Yx"),C=n("znSr"),x=n("z5iZ"),w=n("bSwM"),S=n("A5z7");function E(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",6),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().removeAlarm.emit()}),a["\u0275\u0275pipe"](1,"translate"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3,"delete"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}2&e&&a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](1,1,"action.remove"))}function I(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.alarm-type-required")," "))}function O(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.alarm-type-unique")," "))}function T(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-chip",32),a["\u0275\u0275listener"]("removed",function(){a["\u0275\u0275restoreView"](n);var e=t.$implicit;return a["\u0275\u0275nextContext"](4).removeRelationType(e)}),a["\u0275\u0275text"](1),a["\u0275\u0275elementStart"](2,"mat-icon",33),a["\u0275\u0275text"](3,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",i," ")}}function F(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"section",24),a["\u0275\u0275elementStart"](1,"mat-form-field",25),a["\u0275\u0275elementStart"](2,"mat-label",26),a["\u0275\u0275text"](3,"device-profile.alarm-rule-relation-types-list"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"mat-chip-list",27,28),a["\u0275\u0275template"](6,T,4,1,"mat-chip",29),a["\u0275\u0275elementStart"](7,"input",30),a["\u0275\u0275listener"]("matChipInputTokenEnd",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](3).addRelationType(e)}),a["\u0275\u0275pipe"](8,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](9,"mat-hint",31),a["\u0275\u0275pipe"](10,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275reference"](5),r=a["\u0275\u0275nextContext"](3);a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("disabled",r.disabled),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",r.alarmFormGroup.get("propagateRelationTypes").value),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](8,6,"device-profile.alarm-rule-relation-types-list")),a["\u0275\u0275property"]("matChipInputFor",i)("matChipInputSeparatorKeyCodes",r.separatorKeysCodes),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("innerHTML",a["\u0275\u0275pipeBind1"](10,8,"device-profile.alarm-rule-relation-types-list-hint"),a["\u0275\u0275sanitizeHtml"])}}function B(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-checkbox",22),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](3,F,11,10,"section",23)),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,"device-profile.propagate-alarm")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!0===n.alarmFormGroup.get("propagate").value)}}function M(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",34),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).removeClearAlarmRule()}),a["\u0275\u0275pipe"](1,"translate"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3,"remove_circle_outline"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}2&e&&a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](1,1,"action.remove"))}function P(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275elementStart"](1,"span",35),a["\u0275\u0275text"](2,"device-profile.no-clear-alarm-rule"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]())}function D(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",36),a["\u0275\u0275elementStart"](1,"button",37),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).addClearAlarmRule()}),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementStart"](3,"mat-icon",38),a["\u0275\u0275text"](4,"add_circle_outline"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](5),a["\u0275\u0275pipe"](6,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("fxShow",!i.alarmFormGroup.get("clearRule").value),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](2,3,"device-profile.add-clear-alarm-rule")),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](6,5,"device-profile.add-clear-alarm-rule")," ")}}function k(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",7),a["\u0275\u0275element"](1,"mat-divider"),a["\u0275\u0275elementStart"](2,"mat-form-field",8),a["\u0275\u0275elementStart"](3,"mat-label"),a["\u0275\u0275text"](4),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](6,"input",9),a["\u0275\u0275template"](7,I,3,3,"mat-error",10),a["\u0275\u0275template"](8,O,3,3,"mat-error",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"mat-expansion-panel",11),a["\u0275\u0275elementStart"](10,"mat-expansion-panel-header"),a["\u0275\u0275elementStart"](11,"mat-panel-title"),a["\u0275\u0275elementStart"](12,"div",12),a["\u0275\u0275elementStart"](13,"div",13),a["\u0275\u0275text"](14,"device-profile.advanced-settings"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](15,B,4,4,"ng-template",5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"div",14),a["\u0275\u0275elementStart"](17,"div",15),a["\u0275\u0275text"](18,"device-profile.create-alarm-rules"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](19,"tb-create-alarm-rules",16),a["\u0275\u0275elementStart"](20,"div",15),a["\u0275\u0275text"](21,"device-profile.clear-alarm-rule"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"div",17),a["\u0275\u0275elementStart"](23,"div",18),a["\u0275\u0275element"](24,"tb-alarm-rule",19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](25,M,4,3,"button",20),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](26,P,3,0,"div",10),a["\u0275\u0275template"](27,D,7,7,"div",21),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](5,10,"device-profile.alarm-type")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",n.alarmFormGroup.get("alarmType").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.alarmFormGroup.get("alarmType").hasError("unique")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("expanded",!1),a["\u0275\u0275advance"](10),a["\u0275\u0275property"]("deviceProfileId",n.deviceProfileId),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("fxShow",n.alarmFormGroup.get("clearRule").value),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("deviceProfileId",n.deviceProfileId),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!n.disabled),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.disabled&&!n.alarmFormGroup.get("clearRule").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!n.disabled)}}var _=function(){function e(e,t,n){this.dialog=e,this.utils=t,this.fb=n,this.removeAlarm=new a.EventEmitter,this.separatorKeysCodes=[s.ENTER,s.COMMA,s.SEMICOLON],this.expanded=!1,this.propagateChange=null,this.propagateChangePending=!1}return e.prototype.registerOnChange=function(e){var t=this;this.propagateChange=e,this.propagateChangePending&&(this.propagateChangePending=!1,setTimeout(function(){t.propagateChange(t.modelValue)},0))},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.alarmFormGroup=this.fb.group({id:[null,r.Validators.required],alarmType:[null,r.Validators.required],createRules:[null],clearRule:[null],propagate:[null],propagateRelationTypes:[null]},{validators:o.F}),this.alarmFormGroup.valueChanges.subscribe(function(){e.updateModel()})},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.alarmFormGroup.disable({emitEvent:!1}):this.alarmFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){this.propagateChangePending=!1,this.modelValue=e,this.modelValue.alarmType||(this.expanded=!0),this.alarmFormGroup.reset(this.modelValue||void 0,{emitEvent:!1}),this.disabled||this.alarmFormGroup.valid||this.updateModel()},e.prototype.addClearAlarmRule=function(){this.alarmFormGroup.patchValue({clearRule:{condition:{condition:[]}}})},e.prototype.removeClearAlarmRule=function(){this.alarmFormGroup.patchValue({clearRule:null})},e.prototype.validate=function(e){if(e.parent){var t=e.value.alarmType,n=[];e.parent.getRawValue().forEach(function(e){n.push(e.alarmType)}),n.filter(function(e){return e===t}).length>1&&this.alarmFormGroup.get("alarmType").setErrors({unique:!0})}return this.alarmFormGroup.valid?null:{alarm:{valid:!1}}},e.prototype.removeRelationType=function(e){var t=this.alarmFormGroup.get("propagateRelationTypes").value,n=t.indexOf(e);n>=0&&(t.splice(n,1),this.alarmFormGroup.get("propagateRelationTypes").setValue(t,{emitEvent:!0}))},e.prototype.addRelationType=function(e){var t=e.input,n=e.value;if((n||"").trim()){n=n.trim();var i=this.alarmFormGroup.get("propagateRelationTypes").value;i&&-1!==i.indexOf(n)||(i||(i=[]),i.push(n),this.alarmFormGroup.get("propagateRelationTypes").setValue(i,{emitEvent:!0}))}t&&(t.value="")},Object.defineProperty(e.prototype,"alarmTypeTitle",{get:function(){var e=this.alarmFormGroup.get("alarmType").value;return this.utils.customTranslation(e,e)},enumerable:!1,configurable:!0}),e.prototype.updateModel=function(){var e=this.alarmFormGroup.value;this.modelValue=Object(i.a)(Object(i.a)({},this.modelValue),e),this.propagateChange?this.propagateChange(this.modelValue):this.propagateChangePending=!0},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](c.MatDialog),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](r.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-device-profile-alarm"]],inputs:{disabled:"disabled",expanded:"expanded",deviceProfileId:"deviceProfileId"},outputs:{removeAlarm:"removeAlarm"},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)(function(){return e}),multi:!0},{provide:r.NG_VALIDATORS,useExisting:Object(a.forwardRef)(function(){return e}),multi:!0}])],decls:9,vars:4,consts:[["fxFlex","",1,"device-profile-alarm",3,"formGroup","expanded","expandedChange"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center"],["fxLayout","row","fxFlex","","fxLayoutAlign","start center"],["fxFlex",""],["mat-icon-button","","style","min-width: 40px;","type","button","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],["matExpansionPanelContent",""],["mat-icon-button","","type","button","matTooltipPosition","above",2,"min-width","40px",3,"matTooltip","click"],["fxLayout","column","fxLayoutGap","0.5em"],["fxFlex","","floatLabel","always"],["required","","matInput","","formControlName","alarmType","placeholder","Enter alarm type"],[4,"ngIf"],[1,"advanced-settings",3,"expanded"],["fxFlex","","fxLayout","row","fxLayoutAlign","end center"],["translate","",1,"tb-small"],["fxFlex","","fxLayout","column"],["translate","",1,"tb-small",2,"padding-bottom","8px"],["formControlName","createRules",2,"padding-bottom","16px",3,"deviceProfileId"],["fxLayout","row","fxLayoutGap","8px;","fxLayoutAlign","start center",2,"padding-bottom","8px",3,"fxShow"],["fxFlex","","fxLayout","row",1,"clear-alarm-rule"],["formControlName","clearRule","fxFlex","",3,"deviceProfileId"],["mat-icon-button","","color","accent","style","min-width: 40px;","type","button","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],[3,"fxShow",4,"ngIf"],["formControlName","propagate",2,"display","block","padding-bottom","16px"],["style","padding-bottom: 1em;",4,"ngIf"],[2,"padding-bottom","1em"],["floatLabel","always",1,"mat-block"],["translate",""],[3,"disabled"],["relationTypesChipList",""],[3,"removed",4,"ngFor","ngForOf"],["matInput","","type","text","matChipInputAddOnBlur","",2,"max-width","200px",3,"placeholder","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],[3,"innerHTML"],[3,"removed"],["matChipRemove",""],["mat-icon-button","","color","accent","type","button","matTooltipPosition","above",2,"min-width","40px",3,"matTooltip","click"],["translate","","fxLayoutAlign","center center",1,"tb-prompt",2,"margin","16px 0"],[3,"fxShow"],["mat-stroked-button","","color","accent","type","button","matTooltipPosition","above",3,"matTooltip","click"],[1,"button-icon"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-expansion-panel",0),a["\u0275\u0275listener"]("expandedChange",function(e){return t.expanded=e}),a["\u0275\u0275elementStart"](1,"mat-expansion-panel-header"),a["\u0275\u0275elementStart"](2,"div",1),a["\u0275\u0275elementStart"](3,"mat-panel-title"),a["\u0275\u0275elementStart"](4,"div",2),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](6,"span",3),a["\u0275\u0275template"](7,E,4,3,"button",4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,k,28,12,"ng-template",5),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.alarmFormGroup)("expanded",t.expanded),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate1"](" ",t.alarmTypeTitle," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!t.disabled))},directives:[d.MatExpansionPanel,u.b,r.NgControlStatusGroup,r.FormGroupDirective,d.MatExpansionPanelHeader,u.f,u.e,d.MatExpansionPanelTitle,p.NgIf,d.MatExpansionPanelContent,m.MatButton,f.MatTooltip,h.MatIcon,u.g,g.MatDivider,A.MatFormField,A.MatLabel,b.MatInput,r.DefaultValueAccessor,r.RequiredValidator,r.NgControlStatus,r.FormControlName,y.TranslateDirective,v.a,C.d,x.a,A.MatError,w.MatCheckbox,S.MatChipList,p.NgForOf,S.MatChipInput,A.MatHint,S.MatChip,S.MatChipRemove],pipes:[y.TranslatePipe],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .clear-alarm-rule[_ngcontent-%COMP%]{border:2px groove rgba(0,0,0,.45);border-radius:4px;padding:8px}[_nghost-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:none}[_nghost-%COMP%]   .mat-expansion-panel.device-profile-alarm[_ngcontent-%COMP%]{border:1px groove rgba(0,0,0,.25)}[_nghost-%COMP%]   .mat-expansion-panel.device-profile-alarm[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 24px 0 8px}[_nghost-%COMP%]   .mat-expansion-panel.device-profile-alarm[_ngcontent-%COMP%]   .mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{height:48px}[_nghost-%COMP%]   .mat-expansion-panel.advanced-settings[_ngcontent-%COMP%]{border:none;padding:0}[_nghost-%COMP%]   .mat-expansion-panel.advanced-settings[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 8px}[_nghost-%COMP%]     .mat-expansion-panel.device-profile-alarm .mat-expansion-panel-body{padding:0 8px 8px}[_nghost-%COMP%]     .mat-expansion-panel.advanced-settings .mat-expansion-panel-body{padding:0}[_nghost-%COMP%]     .mat-expansion-panel .button-icon{font-size:20px;width:20px;height:20px}"]}),e}();0,void 0},gd03:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i=n("fXoL"),a=n("3Pt+"),r=n("XNiG"),o=n("1G5W"),s=n("//Q6"),l=n("kmnG"),c=n("sYmb"),d=n("qFsG"),u=n("ofXK"),p=n("40Wt"),m=n("0Miz");function f(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device.client-id-pattern")," "))}function h(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device.user-name-required")," "))}var g=function(){function e(e){var t=this;this.fb=e,this.destroy$=new r.b,this.propagateChange=function(e){},this.deviceCredentialsMqttFormGroup=this.fb.group({clientId:[null],userName:[null],password:[null]},{validators:this.atLeastOne(a.Validators.required,["clientId","userName"])}),this.deviceCredentialsMqttFormGroup.valueChanges.pipe(Object(o.a)(this.destroy$)).subscribe(function(e){t.updateView(e)})}return e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.deviceCredentialsMqttFormGroup.disable({emitEvent:!1}):this.deviceCredentialsMqttFormGroup.enable({emitEvent:!1})},e.prototype.validate=function(){return this.deviceCredentialsMqttFormGroup.valid?null:{deviceCredentialsMqttBasic:!1}},e.prototype.writeValue=function(e){if(Object(s.o)(e)&&!Object(s.q)(e)){var t=JSON.parse(e);this.deviceCredentialsMqttFormGroup.patchValue(t,{emitEvent:!1})}},e.prototype.updateView=function(e){var t=JSON.stringify(e);this.propagateChange(t)},e.prototype.passwordChanged=function(){""!==this.deviceCredentialsMqttFormGroup.get("password").value?this.deviceCredentialsMqttFormGroup.get("userName").setValidators([a.Validators.required]):this.deviceCredentialsMqttFormGroup.get("userName").setValidators([]),this.deviceCredentialsMqttFormGroup.get("userName").updateValueAndValidity({emitEvent:!1})},e.prototype.atLeastOne=function(e,t){return void 0===t&&(t=null),function(n){return t||(t=Object.keys(n.controls)),(null==n?void 0:n.controls)&&t.some(function(t){return!e(n.controls[t])})?null:{atLeastOne:!0}}},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-device-credentials-mqtt-basic"]],inputs:{disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:18,vars:7,consts:[[3,"formGroup"],[1,"mat-block"],["translate",""],["matInput","","formControlName","clientId"],[4,"ngIf"],["matInput","","formControlName","userName",3,"required"],["matInput","","formControlName","password","autocomplete","new-password","type","password",3,"ngModelChange"],["matSuffix",""],[2,"margin-top","-12px","display","block",3,"error"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"section",0),i["\u0275\u0275elementStart"](1,"mat-form-field",1),i["\u0275\u0275elementStart"](2,"mat-label",2),i["\u0275\u0275text"](3,"device.client-id"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"input",3),i["\u0275\u0275template"](5,f,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"mat-form-field",1),i["\u0275\u0275elementStart"](7,"mat-label",2),i["\u0275\u0275text"](8,"device.user-name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](9,"input",5),i["\u0275\u0275template"](10,h,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"mat-form-field",1),i["\u0275\u0275elementStart"](12,"mat-label",2),i["\u0275\u0275text"](13,"device.password"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"input",6),i["\u0275\u0275listener"]("ngModelChange",function(){return t.passwordChanged()}),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](15,"tb-toggle-password",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](16,"tb-error",8),i["\u0275\u0275pipe"](17,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.deviceCredentialsMqttFormGroup),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",t.deviceCredentialsMqttFormGroup.get("clientId").hasError("pattern")),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("required",!!t.deviceCredentialsMqttFormGroup.get("password").value),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.deviceCredentialsMqttFormGroup.get("userName").hasError("required")),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("error",t.deviceCredentialsMqttFormGroup.hasError("atLeastOne")?i["\u0275\u0275pipeBind1"](17,5,"device.client-id-or-user-name-necessary"):""))},directives:[a.NgControlStatusGroup,a.FormGroupDirective,l.MatFormField,l.MatLabel,c.TranslateDirective,d.MatInput,a.DefaultValueAccessor,a.NgControlStatus,a.FormControlName,u.NgIf,a.RequiredValidator,p.a,l.MatSuffix,m.a,l.MatError],pipes:[c.TranslatePipe],encapsulation:2}),e}();0,void 0},gi3d:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return d});var i=n("mrSG"),a=n("gaqQ"),r=n("RLvv"),o=n("Lm6k"),s=Object(i.a)({$event:{meta:"argument",type:"Event",description:"The DOM event that triggered this action."},widgetContext:r.a.ctx,entityId:{meta:"argument",type:o.a,description:"Id of the entity for which the action was triggered.",children:{id:{meta:"property",type:"string",description:"UUID Id string"},entityType:{meta:"property",type:o.b,description:"Entity type"}}},entityName:{meta:"argument",type:"string",description:"Name of the entity for which the action was triggered."},additionalParams:{meta:"argument",type:"object",description:"Optional object holding additional information."},entityLabel:{meta:"argument",type:"string",description:"Label of the entity for which the action was triggered."}},o.c),l=Object(i.a)({htmlTemplate:{meta:"argument",type:"string",description:"HTML template used to render custom dialog."}},s),c=new a.a(s),d=new a.a(l)},hB0h:function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),function(e){e.QUEUED="QUEUED",e.DELIVERED="DELIVERED",e.SUCCESSFUL="SUCCESSFUL",e.TIMEOUT="TIMEOUT",e.FAILED="FAILED"}(i||(i={}))},hBar:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return B});var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=(n("0G7Z"),n("OiFK")),s=n("//Q6"),l=n("Zss7"),c=n("HR/i"),d=n("l7P3"),u=n("XiUz"),p=n("ofXK"),m=n("znSr"),f=["knob"],h=["knobContainer"],g=["knobTopPointerContainer"],A=["knobTopPointer"],b=["knobValueContainer"],y=["knobValue"],v=["knobErrorContainer"],C=["knobError"],x=["knobTitleContainer"],w=["knobTitle"],S=["knobMinmaxContainer"],E=["textMeasure"],I=["canvasBar"],O=function(e){return{pointerEvents:e}},T=function(e){return{background:e}},F=l,B=function(t){function r(e,n){var i=t.call(this,n)||this;return i.utils=e,i.store=n,i.value="0",i.error="",i.title="",i.newValue=0,i.startDeg=-1,i.currentDeg=0,i.rotation=0,i.lastDeg=0,i.moving=!1,i.minDeg=-45,i.maxDeg=225,i}return Object(i.d)(r,t),r.prototype.ngOnInit=function(){var t=this;this.knob=e(this.knobRef.nativeElement),this.knobContainer=e(this.knobContainerRef.nativeElement),this.knobTopPointerContainer=e(this.knobTopPointerContainerRef.nativeElement),this.knobTopPointer=e(this.knobTopPointerRef.nativeElement),this.knobValueContainer=e(this.knobValueContainerRef.nativeElement),this.knobValue=e(this.knobValueRef.nativeElement),this.knobTitleContainer=e(this.knobTitleContainerRef.nativeElement),this.knobTitle=e(this.knobTitleRef.nativeElement),this.knobErrorContainer=e(this.knobErrorContainerRef.nativeElement),this.knobError=e(this.knobErrorRef.nativeElement),this.knobMinmaxContainer=e(this.knobMinmaxContainerRef.nativeElement),this.minmaxLabel=this.knobMinmaxContainer.find(".minmax-label"),this.textMeasure=e(this.textMeasureRef.nativeElement),this.canvasBarElement=this.canvasBarElementRef.nativeElement,this.knobResize$=new c.a(function(){t.resize()}),this.knobResize$.observe(this.knobContainerRef.nativeElement),this.init()},r.prototype.ngOnDestroy=function(){this.knobResize$&&this.knobResize$.disconnect(),this.ctx.controlApi.completedCommand()},r.prototype.init=function(){var t=this,i=this.ctx.settings;this.minValue=Object(s.n)(i.minValue)?i.minValue:0,this.maxValue=Object(s.n)(i.maxValue)?i.maxValue:100,this.title=Object(s.n)(i.title)?i.title:"";var a={renderTo:this.canvasBarElement,hideValue:!0,neonGlowBrightness:0,gaugeWidthScale:.4,gaugeColor:"rgba(0, 0, 0, 0)",levelColors:["#19ff4b","#ffff19","#ff3232"],minValue:this.minValue,maxValue:this.maxValue,gaugeType:"donut",dashThickness:2,donutStartAngle:3/4*Math.PI,donutEndAngle:9/4*Math.PI,animation:!1};this.knob.on("click",function(e){if(t.moving)return t.moving=!1,!1;e.preventDefault();var n=t.knob.offset(),i=n.top+t.knob.height()/2,a=n.left+t.knob.width()/2,r=180/Math.PI,o=e.originalEvent.touches?e.originalEvent.touches[0]:e,s=i-o.pageY,l=a-o.pageX,c=Math.atan2(s,l)*r;if(c<0&&(c=360+c),c>t.maxDeg){if(!(c-360>t.minDeg))return!1;c-=360}t.currentDeg=c,t.lastDeg=c,t.knobTopPointerContainer.css("transform","rotate("+t.currentDeg+"deg)"),t.turn(t.degreeToRatio(t.currentDeg)),t.rotation=t.currentDeg,t.startDeg=-1,t.rpcUpdateValue(t.newValue)}),this.knob.on("mousedown touchstart",function(n){t.moving=!1,n.preventDefault();var i=t.knob.offset(),a=i.top+t.knob.height()/2,r=i.left+t.knob.width()/2,o=180/Math.PI;e(document).on("mousemove.rem touchmove.rem",function(e){t.moving=!0;var n=e.originalEvent.touches?e.originalEvent.touches[0]:e,i=a-n.pageY,s=r-n.pageX,l=Math.atan2(i,s)*o;l<0&&(l=360+l),-1===t.startDeg&&(t.startDeg=l);var c=Math.floor(l-t.startDeg+t.rotation);(c<0?c=360+c:c>359&&(c%=360),c>t.maxDeg)&&(c-360>t.minDeg?c-=360:c=Math.abs(t.maxDeg-t.lastDeg)<Math.abs(t.minDeg-t.lastDeg)?t.maxDeg:t.minDeg);if(Math.abs(c-t.lastDeg)>180)return t.startDeg=l,t.rotation=t.currentDeg,!1;t.currentDeg=c,t.lastDeg=c,t.knobTopPointerContainer.css("transform","rotate("+t.currentDeg+"deg)"),t.turn(t.degreeToRatio(t.currentDeg))}),e(document).on("mouseup.rem  touchend.rem",function(){t.newValue!==t.rpcValue&&t.moving&&t.rpcUpdateValue(t.newValue),t.knob.off(".rem"),e(document).off(".rem"),t.rotation=t.currentDeg,t.startDeg=-1})});var r=this.ctx.defaultSubscription.rpcEnabled;this.isSimulated=this.utils.widgetEditMode,this.requestTimeout=500,i.requestTimeout&&(this.requestTimeout=i.requestTimeout),this.requestPersistent=!1,i.requestPersistent&&(this.requestPersistent=i.requestPersistent),this.persistentPollingInterval=5e3,i.persistentPollingInterval&&(this.persistentPollingInterval=i.persistentPollingInterval),this.getValueMethod="getValue",i.getValueMethod&&i.getValueMethod.length&&(this.getValueMethod=i.getValueMethod),this.setValueMethod="setValue",i.setValueMethod&&i.setValueMethod.length&&(this.setValueMethod=i.setValueMethod),Promise.all([n.e(0),n.e(13)]).then(n.bind(null,"QR2c")).then(function(e){t.canvasBar=new e.CanvasDigitalGauge(a).draw();var n=Object(s.n)(i.initialValue)?i.initialValue:t.minValue;t.setValue(n),r?t.isSimulated||t.rpcRequestValue():t.onError("Target device is not set!")})},r.prototype.degreeToRatio=function(e){return(e-this.minDeg)/(this.maxDeg-this.minDeg)},r.prototype.ratioToDegree=function(e){return this.minDeg+e*(this.maxDeg-this.minDeg)},r.prototype.turn=function(e){this.newValue=Number((this.minValue+(this.maxValue-this.minValue)*e).toFixed(this.ctx.decimals)),this.canvasBar.value!==this.newValue&&(this.canvasBar.value=this.newValue),this.updateColor(this.canvasBar.getValueColor()),this.onValue(this.newValue)},r.prototype.resize=function(){var e=this.knobContainer.width(),t=this.knobContainer.height(),n=Math.min(e,t);this.knob.css({width:n,height:n}),this.canvasBar&&this.canvasBar.update({width:n,height:n}),this.setFontSize(this.knobTitle,this.title,this.knobTitleContainer.height(),this.knobTitleContainer.width()),this.setFontSize(this.knobError,this.error,this.knobErrorContainer.height(),this.knobErrorContainer.width());var i=this.knobMinmaxContainer.height();this.minmaxLabel.css({fontSize:i+"px",lineHeight:i+"px"}),this.checkValueSize()},r.prototype.checkValueSize=function(){var e=this.knobValueContainer.height()/3.3,t=this.knobValueContainer.width();this.setFontSize(this.knobValue,this.value+"",e,t)},r.prototype.setFontSize=function(e,t,n,i){for(var a=this.measureTextWidth(t,n);a>i&&!(--n<0);)a=this.measureTextWidth(t,n);e.css({fontSize:n+"px",lineHeight:n+"px"})},r.prototype.measureTextWidth=function(e,t){return this.textMeasure.css({fontSize:t+"px",lineHeight:t+"px"}),this.textMeasure.html(e),this.textMeasure.width()},r.prototype.setValue=function(e){var t=(e-this.minValue)/(this.maxValue-this.minValue);this.rotation=this.lastDeg=this.currentDeg=this.ratioToDegree(t),this.knobTopPointerContainer.css("transform","rotate("+this.currentDeg+"deg)"),this.canvasBar.value!==e&&(this.canvasBar.value=e),this.updateColor(this.canvasBar.getValueColor()),this.value=this.formatValue(e),this.checkValueSize(),this.ctx.detectChanges()},r.prototype.updateColor=function(e){var t=F(e).brighten(30).toHexString();this.knobValue.css({color:t});var n=e+" 1px 1px 10px, "+t+" 1px 1px 10px";this.knobValue.css({textShadow:n}),this.knobTopPointer.css({backgroundColor:t});var i="inset 1px 0 2px #040404, 1px 1px 8px 2px "+t;this.knobTopPointer.css({boxShadow:i})},r.prototype.onValue=function(e){this.value=this.formatValue(e),this.checkValueSize(),this.ctx.detectChanges()},r.prototype.formatValue=function(e){return this.ctx.utils.formatValue(e,this.ctx.decimals,this.ctx.units,!0)},r.prototype.rpcRequestValue=function(){var e=this;this.error="",this.ctx.controlApi.sendTwoWayCommand(this.getValueMethod,null,this.requestTimeout,this.requestPersistent,this.persistentPollingInterval).subscribe(function(t){if(Object(s.x)(t)){var n=Number(Number(t).toFixed(e.ctx.decimals));e.setValue(n)}else{var i="Unable to parse response: "+t;e.onError(i)}},function(){var t=e.ctx.defaultSubscription.rpcErrorText;e.onError(t)})},r.prototype.rpcUpdateValue=function(e){var t=this;if(this.executingUpdateValue)return this.scheduledValue=e,void 0;this.scheduledValue=null,this.rpcValue=e,this.executingUpdateValue=!0,this.error="",this.ctx.controlApi.sendOneWayCommand(this.setValueMethod,e,this.requestTimeout,this.requestPersistent,this.persistentPollingInterval).subscribe(function(){t.executingUpdateValue=!1,null!=t.scheduledValue&&t.scheduledValue!==t.rpcValue&&t.rpcUpdateValue(t.scheduledValue)},function(){t.executingUpdateValue=!1;var e=t.ctx.defaultSubscription.rpcErrorText;t.onError(e)})},r.prototype.onError=function(e){this.error=e,this.setFontSize(this.knobError,this.error,this.knobErrorContainer.height(),this.knobErrorContainer.width()),this.ctx.detectChanges()},r.\u0275fac=function(e){return new(e||r)(a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](d.Store))},r.\u0275cmp=a["\u0275\u0275defineComponent"]({type:r,selectors:[["tb-knob"]],viewQuery:function(e,t){if(1&e&&(a["\u0275\u0275viewQuery"](f,3),a["\u0275\u0275viewQuery"](h,3),a["\u0275\u0275viewQuery"](g,3),a["\u0275\u0275viewQuery"](A,3),a["\u0275\u0275viewQuery"](b,3),a["\u0275\u0275viewQuery"](y,3),a["\u0275\u0275viewQuery"](v,3),a["\u0275\u0275viewQuery"](C,3),a["\u0275\u0275viewQuery"](x,3),a["\u0275\u0275viewQuery"](w,3),a["\u0275\u0275viewQuery"](S,3),a["\u0275\u0275viewQuery"](E,3),a["\u0275\u0275viewQuery"](I,3)),2&e){var n=void 0;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.knobRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.knobContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.knobTopPointerContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.knobTopPointerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.knobValueContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.knobValueRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.knobErrorContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.knobErrorRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.knobTitleContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.knobTitleRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.knobMinmaxContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.textMeasureRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.canvasBarElementRef=n.first)}},inputs:{ctx:"ctx"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:36,vars:9,consts:[["fxLayout","column",1,"tb-knob",3,"ngStyle"],["id","knob-container","fxFlex","","fxLayout","column","fxLayoutAlign","center center"],["knobContainer",""],[1,"knob"],["knob",""],["fxLayout","row","fxLayoutAlign","center center",1,"value-container"],["knobValueContainer",""],[1,"knob-value"],["knobValue",""],[1,"canvas-background"],["id","canvasBar"],["canvasBar",""],[1,"top-pointer-container"],["knobTopPointerContainer",""],[1,"top-pointer"],["knobTopPointer",""],[1,"top"],["fxLayout","row","fxLayoutAlign","center center",1,"error-container",3,"ngStyle"],["knobErrorContainer",""],[1,"knob-error",3,"innerHTML"],["knobError",""],["fxLayout","row","fxLayoutAlign","center center",1,"title-container"],["knobTitleContainer",""],[1,"knob-title"],["knobTitle",""],["fxLayout","row","fxLayoutAlign","start center",1,"minmax-container"],["knobMinmaxContainer",""],[1,"minmax-label"],["fxFlex",""],["id","text-measure"],["textMeasure",""]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1,2),a["\u0275\u0275elementStart"](3,"div",3,4),a["\u0275\u0275elementStart"](5,"div",5,6),a["\u0275\u0275elementStart"](7,"span",7,8),a["\u0275\u0275text"](9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](10,"div",9),a["\u0275\u0275element"](11,"canvas",10,11),a["\u0275\u0275elementStart"](13,"div",12,13),a["\u0275\u0275element"](15,"div",14,15),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](17,"div",16),a["\u0275\u0275elementStart"](18,"div",17,18),a["\u0275\u0275element"](20,"span",19,20),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"div",21,22),a["\u0275\u0275elementStart"](24,"span",23,24),a["\u0275\u0275text"](26),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](27,"div",25,26),a["\u0275\u0275elementStart"](29,"span",27),a["\u0275\u0275text"](30,"min"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](31,"span",28),a["\u0275\u0275elementStart"](32,"span",27),a["\u0275\u0275text"](33,"max"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](34,"div",29,30),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](5,O,t.ctx.isEdit?"none":"all")),a["\u0275\u0275advance"](9),a["\u0275\u0275textInterpolate"](t.value),a["\u0275\u0275advance"](9),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](7,T,null!=t.error&&t.error.length?"rgba(255,255,255,0.25)":"none")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("innerHTML",t.error,a["\u0275\u0275sanitizeHtml"]),a["\u0275\u0275advance"](6),a["\u0275\u0275textInterpolate"](t.title))},directives:[u.f,p.NgStyle,m.e,u.b,u.e],styles:['[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[draggable][_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   #canvasBar[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;z-index:2}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   .canvas-background[_ngcontent-%COMP%]{position:absolute;top:5%;right:5%;bottom:5%;left:5%;z-index:2;background:#3f4346;border-radius:50%}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   .value-container[_ngcontent-%COMP%]{position:absolute;top:35%;right:35%;bottom:35%;left:35%;z-index:4}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   .value-container[_ngcontent-%COMP%]   .knob-value[_ngcontent-%COMP%]{font-weight:500;color:#fff;white-space:nowrap}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]{position:absolute;top:1%;right:0;left:0;z-index:4;height:5%}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   .knob-error[_ngcontent-%COMP%]{color:#ff3315;white-space:nowrap}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{position:absolute;right:20%;bottom:5%;left:20%;z-index:4;height:6.6%}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]   .knob-title[_ngcontent-%COMP%]{font-weight:500;color:#757575;white-space:nowrap}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   .minmax-container[_ngcontent-%COMP%]{position:absolute;right:18%;bottom:12%;left:18%;z-index:4;height:4%}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   .minmax-container[_ngcontent-%COMP%]   .minmax-label[_ngcontent-%COMP%]{font-weight:500;color:#757575;white-space:nowrap}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   .top-pointer-container[_ngcontent-%COMP%]{position:absolute;top:3.3%;right:3.3%;bottom:3.3%;left:3.3%;z-index:3;cursor:pointer!important}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   .top-pointer-container[_ngcontent-%COMP%]   .top-pointer[_ngcontent-%COMP%]{position:absolute;top:50%;left:22%;width:5%;height:5%;margin-top:-2.5%;cursor:pointer!important;content:"";background-color:#b5b5b5;border-radius:50%;box-shadow:1px 0 2px #040404}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{position:absolute;top:3.3%;right:3.3%;bottom:3.3%;left:3.3%;z-index:2;cursor:pointer!important;background:url(knob.b7384766f829ebbada43.svg) no-repeat;background-size:contain}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   #text-measure[_ngcontent-%COMP%]{position:absolute;width:auto;height:auto;white-space:nowrap;visibility:hidden}']}),r}(r.a);0,void 0}).call(this,n("xexB"))},hqxT:function(e,t,n){"use strict";n.d(t,"a",function(){return T});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("OiFK"),d=n("21Fy"),u=n("l7P3"),p=n("tyNb"),m=n("sYmb"),f=n("/t3+"),h=n("XiUz"),g=n("bTqV"),A=n("NFeN"),b=n("ofXK"),y=n("kmnG"),v=n("qFsG"),C=n("1jcm"),x=n("0WnP"),w=n("0Miz"),S=n("bv9b");function E(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",22)}function I(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"alias.name-required")," "))}function O(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"alias.duplicate-alias")," "))}var T=function(e){function t(t,n,i,a,r,o,l,c,d){var u=e.call(this,t,n,r)||this;if(u.store=t,u.router=n,u.data=i,u.errorStateMatcher=a,u.dialogRef=r,u.fb=o,u.utils=l,u.translate=c,u.entityService=d,u.submitted=!1,u.isAdd=i.isAdd,u.allowedEntityTypes=i.allowedEntityTypes,Array.isArray(i.entityAliases))u.entityAliases=i.entityAliases;else{u.entityAliases=[];for(var p=0,m=Object.keys(i.entityAliases);p<m.length;p++){var f=m[p];u.entityAliases.push(i.entityAliases[f])}}return u.isAdd&&!u.data.alias?u.alias={id:null,alias:"",filter:{resolveMultiple:!1}}:u.alias=i.alias,u.entityAliasFormGroup=u.fb.group({alias:[u.alias.alias,[u.validateDuplicateAliasName(),s.Validators.required]],resolveMultiple:[u.alias.filter.resolveMultiple],filter:[u.alias.filter,s.Validators.required]}),u}return Object(i.d)(t,e),t.prototype.validateDuplicateAliasName=function(){var e=this;return function(t){var n=t.value.trim(),i=e.entityAliases.find(function(e){return e.alias===n});return i&&(e.isAdd||e.alias.id!==i.id)?{duplicateAliasName:{valid:!1}}:null}},t.prototype.ngOnInit=function(){},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.validate=function(){return this.entityService.resolveAliasFilter(this.alias.filter,null)},t.prototype.save=function(){var e=this;this.submitted=!0,this.alias.alias=this.entityAliasFormGroup.get("alias").value.trim(),this.alias.filter=this.entityAliasFormGroup.get("filter").value,this.alias.filter.resolveMultiple=this.entityAliasFormGroup.get("resolveMultiple").value,this.validate().subscribe(function(){e.isAdd&&(e.alias.id=e.utils.guid()),e.dialogRef.close(e.alias)},function(){e.entityAliasFormGroup.setErrors({noEntityMatched:!0});var t=e.entityAliasFormGroup.valueChanges.subscribe(function(){e.entityAliasFormGroup.setErrors(null),t.unsubscribe()})})},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](u.Store),a["\u0275\u0275directiveInject"](p.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](m.TranslateService),a["\u0275\u0275directiveInject"](d.a))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-entity-alias-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:37,vars:27,consts:[[2,"min-width","480px",3,"formGroup","ngSubmit"],["color","accent"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["fxFlex","","fxLayout","column"],["fxLayout","row"],["fxFlex","",1,"mat-block"],["translate",""],["matInput","","formControlName","alias","required",""],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","start center",1,"tb-resolve-multiple-switch"],["translate","",1,"tb-small","resolve-multiple-label"],["formControlName","resolveMultiple",1,"resolve-multiple-switch"],["formControlName","filter",3,"resolveMultiple","allowedEntityTypes","resolveMultipleChanged"],[3,"error"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,E,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275elementStart"](11,"div",6),a["\u0275\u0275elementStart"](12,"fieldset",7),a["\u0275\u0275pipe"](13,"async"),a["\u0275\u0275elementStart"](14,"div",8),a["\u0275\u0275elementStart"](15,"div",9),a["\u0275\u0275elementStart"](16,"mat-form-field",10),a["\u0275\u0275elementStart"](17,"mat-label",11),a["\u0275\u0275text"](18,"alias.name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](19,"input",12),a["\u0275\u0275template"](20,I,3,3,"mat-error",13),a["\u0275\u0275template"](21,O,3,3,"mat-error",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"section",14),a["\u0275\u0275elementStart"](23,"label",15),a["\u0275\u0275text"](24,"alias.resolve-multiple"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](25,"mat-slide-toggle",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"tb-entity-filter",17),a["\u0275\u0275listener"]("resolveMultipleChanged",function(e){return t.entityAliasFormGroup.get("resolveMultiple").patchValue(e)}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](27,"tb-error",18),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"div",19),a["\u0275\u0275elementStart"](29,"button",20),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](30,"async"),a["\u0275\u0275text"](31),a["\u0275\u0275pipe"](32,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](33,"button",21),a["\u0275\u0275pipe"](34,"async"),a["\u0275\u0275text"](35),a["\u0275\u0275pipe"](36,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.entityAliasFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,13,t.isAdd?"alias.add":"alias.edit")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,15,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](13,17,t.isLoading$)),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("ngIf",t.entityAliasFormGroup.get("alias").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.entityAliasFormGroup.get("alias").hasError("duplicateAliasName")),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("resolveMultiple",t.entityAliasFormGroup.get("resolveMultiple").value)("allowedEntityTypes",t.allowedEntityTypes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("error",t.entityAliasFormGroup.hasError("noEntityMatched")?t.translate.instant("alias.entity-filter-no-entity-matched"):""),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](30,19,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](32,21,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](34,23,t.isLoading$)||t.entityAliasFormGroup.invalid||!t.entityAliasFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](36,25,t.isAdd?"action.add":"action.save")," "))},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,f.MatToolbar,h.b,g.MatButton,A.MatIcon,b.NgIf,o.MatDialogContent,h.f,y.MatFormField,y.MatLabel,m.TranslateDirective,v.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,s.RequiredValidator,h.e,C.MatSlideToggle,x.a,w.a,o.MatDialogActions,S.MatProgressBar,y.MatError],pipes:[m.TranslatePipe,b.AsyncPipe],styles:["[_nghost-%COMP%]   .tb-resolve-multiple-switch[_ngcontent-%COMP%]{padding-left:10px}[_nghost-%COMP%]   .tb-resolve-multiple-switch[_ngcontent-%COMP%]   .resolve-multiple-switch[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   .tb-resolve-multiple-switch[_ngcontent-%COMP%]   .resolve-multiple-label[_ngcontent-%COMP%]{margin:5px 0}"]}),t}(l.a);0,void 0},iOaI:function(e,t,n){"use strict";n.d(t,"a",function(){return M});var i=n("fXoL"),a=n("3Pt+"),r=n("LRne"),o=n("Kj3r"),s=n("vkgz"),l=n("JX91"),c=n("lJxs"),d=n("/uUt"),u=n("eIep"),p=n("JIr8"),m=n("Duvn"),f=n("8LU1"),h=n("21Fy"),g=n("l7P3"),A=n("sYmb"),b=n("kmnG"),y=n("qFsG"),v=n("/1cH"),C=n("ofXK"),x=n("bTqV"),w=n("NFeN"),S=n("FKr1"),E=n("d5eY"),I=["entityInfoInput"];function O(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",8),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().clear()}),i["\u0275\u0275elementStart"](1,"mat-icon",9),i["\u0275\u0275text"](2,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function T(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",10),i["\u0275\u0275element"](1,"span",11),i["\u0275\u0275pipe"](2,"highlight"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind2"](2,2,n.name,a.searchText),i["\u0275\u0275sanitizeHtml"])}}var F=function(e){return{entity:e}};function B(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",10),i["\u0275\u0275elementStart"](1,"span"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",null),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](3,2,n.translate.get("entity.no-entities-matching",i["\u0275\u0275pureFunction1"](4,F,n.searchText)))," ")}}var M=function(){function e(e,t,n,i){this.store=e,this.translate=t,this.entityService=n,this.fb=i,this.searchText="",this.propagateChange=function(e){},this.selectEntityInfoFormGroup=this.fb.group({entityInfo:[null]})}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(f.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.filteredEntityInfos=this.selectEntityInfoFormGroup.get("entityInfo").valueChanges.pipe(Object(o.a)(150),Object(s.a)(function(t){var n;n="string"!=typeof t&&t?t:null,e.updateView(n)}),Object(l.a)(""),Object(c.a)(function(e){return e?"string"==typeof e?e:e.name:""}),Object(d.a)(),Object(u.a)(function(t){return e.fetchEntityInfos(t)}))},e.prototype.ngAfterViewInit=function(){},e.prototype.setDisabledState=function(e){this.disabled=e},e.prototype.writeValue=function(e){this.searchText="",null!=e?(this.modelValue=e,this.selectEntityInfoFormGroup.get("entityInfo").patchValue(e,{emitEvent:!0})):(this.modelValue=null,this.selectEntityInfoFormGroup.get("entityInfo").patchValue(null,{emitEvent:!0}))},e.prototype.updateView=function(e){this.modelValue!==e&&(this.modelValue=e,this.propagateChange(this.modelValue))},e.prototype.displayEntityInfoFn=function(e){return e?e.name:void 0},e.prototype.fetchEntityInfos=function(e){return this.searchText=e,this.getEntityInfos(this.searchText).pipe(Object(c.a)(function(e){return e.data}))},e.prototype.getEntityInfos=function(e){return this.entityService.findEntityInfosByFilterAndName(this.entityFilter,e,{ignoreLoading:!0}).pipe(Object(p.a)(function(){return Object(r.a)(Object(m.a)())}))},e.prototype.clear=function(){var e=this;this.selectEntityInfoFormGroup.get("entityInfo").patchValue(null,{emitEvent:!0}),setTimeout(function(){e.entityInfoInput.nativeElement.blur(),e.entityInfoInput.nativeElement.focus()},0)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](g.Store),i["\u0275\u0275directiveInject"](A.TranslateService),i["\u0275\u0275directiveInject"](h.a),i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-aliases-entity-autocomplete"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](I,3),2&e){var n;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.entityInfoInput=n.first)}},inputs:{alias:"alias",entityFilter:"entityFilter",required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:10,vars:12,consts:[[1,"mat-block",3,"formGroup"],["matInput","","type","text","formControlName","entityInfo",3,"placeholder","required","matAutocomplete"],["entityInfoInput",""],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"tb-autocomplete",3,"displayWith"],["entityInfoAutocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"material-icons"],[3,"value"],[3,"innerHTML"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-form-field",0),i["\u0275\u0275element"](1,"input",1,2),i["\u0275\u0275template"](3,O,3,0,"button",3),i["\u0275\u0275elementStart"](4,"mat-autocomplete",4,5),i["\u0275\u0275template"](6,T,3,5,"mat-option",6),i["\u0275\u0275pipe"](7,"async"),i["\u0275\u0275template"](8,B,4,6,"mat-option",7),i["\u0275\u0275pipe"](9,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n,a=i["\u0275\u0275reference"](5);i["\u0275\u0275property"]("formGroup",t.selectEntityInfoFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("placeholder",t.alias),i["\u0275\u0275property"]("required",t.required)("matAutocomplete",a),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.selectEntityInfoFormGroup.get("entityInfo").value&&!t.disabled),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("displayWith",t.displayEntityInfoFn),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](7,8,t.filteredEntityInfos)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!(null!=(n=i["\u0275\u0275pipeBind1"](9,10,t.filteredEntityInfos))&&n.length))}},directives:[b.MatFormField,a.NgControlStatusGroup,a.FormGroupDirective,y.MatInput,a.DefaultValueAccessor,v.MatAutocompleteTrigger,a.NgControlStatus,a.FormControlName,a.RequiredValidator,C.NgIf,v.MatAutocomplete,C.NgForOf,x.MatButton,b.MatSuffix,w.MatIcon,S.MatOption],pipes:[C.AsyncPipe,E.a],encapsulation:2}),e}();0,void 0},igfJ:function(e,t,n){"use strict";n.d(t,"a",function(){return C});var i=n("fXoL"),a=n("Q7pZ"),r=n("XOa3"),o=(n("/Bgp"),n("8Mhd"),n("mrSG")),s=n("qxrw"),l=n("U3y+"),c=n("4r/P"),d=n("5pw5"),u=function(e){function t(t,n,i,a,o,d,u,p,m){void 0===o&&(o=r.c.TENANT),void 0===d&&(d=null),void 0===u&&(u=null),void 0===p&&(p=null),void 0===m&&(m=!0);var f=e.call(this)||this;return f.auditLogService=t,f.translate=n,f.datePipe=i,f.dialog=a,f.auditLogMode=o,f.entityId=d,f.userId=u,f.customerId=p,f.loadDataOnInit=m,f.tableTitle="",f.useTimePageLink=!0,f.detailsPanelEnabled=!1,f.selectionEnabled=!1,f.searchEnabled=!0,f.addEnabled=!1,f.entitiesDeleteEnabled=!1,f.actionsColumnTitle="audit-log.details",f.entityTranslations={noEntities:"audit-log.no-audit-logs-prompt",search:"audit-log.search"},f.entityResources={},f.entitiesFetchFunction=function(e){return f.fetchAuditLogs(e)},f.defaultSortOrder={property:"createdTime",direction:c.a.DESC},f.columns.push(new s.b("createdTime","audit-log.timestamp",f.datePipe,"150px")),f.auditLogMode!==r.c.ENTITY&&f.columns.push(new s.d("entityType","audit-log.entity-type","20%",function(e){return n.instant(l.d.get(e.entityId.entityType).type)}),new s.d("entityName","audit-log.entity-name","20%")),f.auditLogMode!==r.c.USER&&f.columns.push(new s.d("userName","audit-log.user","33%")),f.columns.push(new s.d("actionType","audit-log.type","33%",function(e){return n.instant(r.e.get(e.actionType))}),new s.d("actionStatus","audit-log.status","33%",function(e){return n.instant(r.d.get(e.actionStatus))})),f.cellActionDescriptors.push({name:f.translate.instant("audit-log.details"),icon:"more_horiz",isEnabled:function(){return!0},onAction:function(e,t){return f.showAuditLogDetails(t)}}),f}return Object(o.d)(t,e),t.prototype.fetchAuditLogs=function(e){switch(this.auditLogMode){case r.c.TENANT:return this.auditLogService.getAuditLogs(e);case r.c.ENTITY:return this.auditLogService.getAuditLogsByEntityId(this.entityId,e);case r.c.USER:return this.auditLogService.getAuditLogsByUserId(this.userId.id,e);case r.c.CUSTOMER:return this.auditLogService.getAuditLogsByCustomerId(this.customerId.id,e)}},t.prototype.showAuditLogDetails=function(e){this.dialog.open(d.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{auditLog:e}})},t}(s.e),p=n("UaJx"),m=n("zp9Z"),f=n("C/rb"),h=n("sYmb"),g=n("ofXK"),A=n("0IaG"),b=n("l7P3"),y=n("znSr"),v=function(e){return{"tb-details-mode":e}},C=function(){function e(e,t,n,i,a){this.auditLogService=e,this.translate=t,this.datePipe=n,this.dialog=i,this.store=a,this.activeValue=!1,this.dirtyValue=!1}return Object.defineProperty(e.prototype,"active",{set:function(e){this.activeValue!==e&&(this.activeValue=e,this.activeValue&&this.dirtyValue&&(this.dirtyValue=!1,this.entitiesTable.updateData()))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"entityId",{set:function(e){this.entityIdValue=e,this.auditLogTableConfig&&this.auditLogTableConfig.entityId!==e&&(this.auditLogTableConfig.entityId=e,this.entitiesTable.resetSortAndFilter(this.activeValue),this.activeValue||(this.dirtyValue=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userId",{set:function(e){this.userIdValue=e,this.auditLogTableConfig&&this.auditLogTableConfig.userId!==e&&(this.auditLogTableConfig.userId=e,this.entitiesTable.resetSortAndFilter(this.activeValue),this.activeValue||(this.dirtyValue=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"customerId",{set:function(e){this.customerIdValue=e,this.auditLogTableConfig&&this.auditLogTableConfig.customerId!==e&&(this.auditLogTableConfig.customerId=e,this.entitiesTable.resetSortAndFilter(this.activeValue),this.activeValue||(this.dirtyValue=!0))},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this.activeValue;(this.dirtyValue=!this.activeValue,this.auditLogMode)||(Object(f.b)(this.store).authority===m.a.TENANT_ADMIN&&(this.auditLogMode=r.c.TENANT),e=!0);this.auditLogTableConfig=new u(this.auditLogService,this.translate,this.datePipe,this.dialog,this.auditLogMode,this.entityIdValue,this.userIdValue,this.customerIdValue,e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](h.TranslateService),i["\u0275\u0275directiveInject"](g.DatePipe),i["\u0275\u0275directiveInject"](A.MatDialog),i["\u0275\u0275directiveInject"](b.Store))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-audit-log-table"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](p.a,3),2&e){var n;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.entitiesTable=n.first)}},inputs:{auditLogMode:"auditLogMode",detailsMode:"detailsMode",active:"active",entityId:"entityId",userId:"userId",customerId:"customerId"},decls:1,vars:4,consts:[[3,"entitiesTableConfig","ngClass"]],template:function(e,t){1&e&&i["\u0275\u0275element"](0,"tb-entities-table",0),2&e&&i["\u0275\u0275property"]("entitiesTableConfig",t.auditLogTableConfig)("ngClass",i["\u0275\u0275pureFunction1"](2,v,t.detailsMode))},directives:[p.a,g.NgClass,y.b],styles:["[_nghost-%COMP%]     tb-entities-table.tb-details-mode .mat-drawer-container{background-color:#fff}"]}),e}();0,void 0},jhTr:function(e,t,n){"use strict";n.d(t,"a",function(){return x});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("leY2"),d=n("l7P3"),u=n("tyNb"),p=n("/t3+"),m=n("XiUz"),f=n("bTqV"),h=n("NFeN"),g=n("ofXK"),A=n("bv9b"),b=n("sYmb"),y=["dataKeyConfig"];function v(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",13)}function C(e,t){1&e&&a["\u0275\u0275element"](0,"div",14)}var x=function(e){function t(t,n,i,a,r,o){var s=e.call(this,t,n,r)||this;return s.store=t,s.router=n,s.data=i,s.errorStateMatcher=a,s.dialogRef=r,s.fb=o,s.submitted=!1,s}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){this.dataKeyFormGroup=this.fb.group({dataKey:[this.data.dataKey,[s.Validators.required]]})},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.save=function(){if(this.submitted=!0,this.dataKeyConfig.validateOnSubmit(),this.dataKeyFormGroup.valid){var e=this.dataKeyFormGroup.get("dataKey").value;this.dialogRef.close(e)}},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](d.Store),a["\u0275\u0275directiveInject"](u.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-data-key-config-dialog"]],viewQuery:function(e,t){if(1&e&&a["\u0275\u0275viewQuery"](y,3),2&e){var n;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.dataKeyConfig=n.first)}},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:25,vars:26,consts:[[2,"min-width","480px",3,"formGroup","ngSubmit"],["color","accent"],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],["formControlName","dataKey",3,"dataKeySettingsSchema","entityAliasId","showPostProcessing","callbacks"],["dataKeyConfig",""],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,v,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,C,1,0,"div",6),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275element"](14,"tb-data-key-config",8,9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"div",10),a["\u0275\u0275elementStart"](17,"button",11),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](18,"async"),a["\u0275\u0275text"](19),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"button",12),a["\u0275\u0275pipe"](22,"async"),a["\u0275\u0275text"](23),a["\u0275\u0275pipe"](24,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.dataKeyFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,12,"datakey.configuration")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,14,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,16,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("dataKeySettingsSchema",t.data.dataKeySettingsSchema)("entityAliasId",t.data.entityAliasId)("showPostProcessing",t.data.showPostProcessing)("callbacks",t.data.callbacks),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](18,18,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](20,20,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](22,22,t.isLoading$)||t.dataKeyFormGroup.invalid||!t.dataKeyFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](24,24,"action.save")," "))},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,p.MatToolbar,m.b,f.MatButton,h.MatIcon,g.NgIf,o.MatDialogContent,c.a,s.NgControlStatus,s.FormControlName,o.MatDialogActions,m.e,A.MatProgressBar],pipes:[b.TranslatePipe,g.AsyncPipe],styles:["[_nghost-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]{padding:0!important;margin:0!important;overflow:hidden}"]}),t}(l.a);0,void 0},jkF6:function(e,t,n){"use strict";n.d(t,"a",function(){return T});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("7JTo"),c=n("Bjlt"),d=n("cp0P"),u=n("H3So"),p=n("gmuX"),m=n("l7P3"),f=n("tyNb"),h=n("/t3+"),g=n("XiUz"),A=n("bTqV"),b=n("NFeN"),y=n("ofXK"),v=n("IVsW"),C=n("91Tk"),x=n("bv9b"),w=n("sYmb"),S=["additionalInfoEdit"];function E(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",17)}function I(e,t){1&e&&a["\u0275\u0275element"](0,"div",18)}function O(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",19),a["\u0275\u0275elementStart"](1,"div",20),a["\u0275\u0275text"](2,"relation.invalid-additional-info"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]())}var T=function(e){function t(t,n,i,a,r,o,s){var c=e.call(this,t,n,o)||this;return c.store=t,c.router=n,c.data=i,c.entityRelationService=a,c.errorStateMatcher=r,c.dialogRef=o,c.fb=s,c.entitySearchDirection=l.b,c.submitted=!1,c.isAdd=i.isAdd,c.direction=i.direction,c}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this.relationFormGroup=this.fb.group({type:[this.isAdd?l.a:this.data.relation.type,[s.Validators.required]],targetEntityIds:[this.isAdd?null:[this.direction===l.b.FROM?this.data.relation.to:this.data.relation.from],[s.Validators.required]]}),this.additionalInfo=new s.FormControl(this.data.relation.additionalInfo?Object(i.a)({},this.data.relation.additionalInfo):null),this.isAdd||(this.relationFormGroup.get("type").disable(),this.relationFormGroup.get("targetEntityIds").disable()),this.additionalInfo.valueChanges.subscribe(function(){e.submitted=!1})},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.cancel=function(){this.dialogRef.close(!1)},t.prototype.save=function(){var e=this;if(this.submitted=!0,this.additionalInfoEdit.validateOnSubmit(),!this.relationFormGroup.invalid&&!this.additionalInfo.invalid)if(this.isAdd){var t=[],n=this.relationFormGroup.get("type").value;this.relationFormGroup.get("targetEntityIds").value.forEach(function(i){var a={type:n,additionalInfo:e.additionalInfo.value,typeGroup:l.d.COMMON};e.direction===l.b.FROM?(a.from=e.data.relation.from,a.to=i):(a.from=i,a.to=e.data.relation.to),t.push(e.entityRelationService.saveRelation(a))}),Object(d.a)(t).subscribe(function(){e.dialogRef.close(!0)})}else{var a=Object(i.a)({},this.data.relation);a.additionalInfo=this.additionalInfo.value,this.entityRelationService.saveRelation(a).subscribe(function(){e.dialogRef.close(!0)})}},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](m.Store),a["\u0275\u0275directiveInject"](f.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-relation-dialog"]],viewQuery:function(e,t){if(1&e&&a["\u0275\u0275viewQuery"](S,3),2&e){var n;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.additionalInfoEdit=n.first)}},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:35,vars:33,consts:[[2,"min-width","600px",3,"formGroup","ngSubmit"],["fxLayout","row","color","accent"],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["formControlName","type","required","true"],["formControlName","targetEntityIds","required","true"],[3,"formControl","label"],["additionalInfoEdit",""],["class","tb-error-messages","role","alert",4,"ngIf"],["mat-dialog-actions","","fxLayout","row"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-button","","mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"],["role","alert",1,"tb-error-messages"],["translate","",1,"tb-error-message"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,E,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,I,1,0,"div",6),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275elementStart"](14,"fieldset",8),a["\u0275\u0275pipe"](15,"async"),a["\u0275\u0275element"](16,"tb-relation-type-autocomplete",9),a["\u0275\u0275elementStart"](17,"small"),a["\u0275\u0275text"](18),a["\u0275\u0275pipe"](19,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](20,"tb-entity-list-select",10),a["\u0275\u0275element"](21,"tb-json-object-edit",11,12),a["\u0275\u0275pipe"](23,"translate"),a["\u0275\u0275template"](24,O,3,0,"div",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](25,"div",14),a["\u0275\u0275element"](26,"span",2),a["\u0275\u0275elementStart"](27,"button",15),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](28,"async"),a["\u0275\u0275text"](29),a["\u0275\u0275pipe"](30,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](31,"button",16),a["\u0275\u0275pipe"](32,"async"),a["\u0275\u0275text"](33),a["\u0275\u0275pipe"](34,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.relationFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,13,t.isAdd?"relation.add":"relation.edit")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,15,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,17,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](15,19,t.isLoading$)),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](19,21,t.direction===t.entitySearchDirection.FROM?"relation.to-entity":"relation.from-entity")),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](23,23,"relation.additional-info")),a["\u0275\u0275property"]("formControl",t.additionalInfo),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",t.submitted&&t.additionalInfo.invalid),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](28,25,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](30,27,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](32,29,t.isLoading$)||t.relationFormGroup.invalid||!(t.relationFormGroup.dirty||t.additionalInfo.dirty)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](34,31,t.isAdd?"action.add":"action.save")," "))},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,h.MatToolbar,g.f,g.b,A.MatButton,b.MatIcon,y.NgIf,o.MatDialogContent,v.a,s.NgControlStatus,s.FormControlName,s.RequiredValidator,C.a,u.a,s.FormControlDirective,o.MatDialogActions,x.MatProgressBar,w.TranslateDirective],pipes:[w.TranslatePipe,y.AsyncPipe],styles:[""]}),t}(p.a);0,void 0},kHY0:function(e,t,n){"use strict";n.d(t,"a",function(){return I});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("OiFK"),d=n("l7P3"),u=n("tyNb"),p=n("sYmb"),m=n("/t3+"),f=n("XiUz"),h=n("bTqV"),g=n("NFeN"),A=n("ofXK"),b=n("kmnG"),y=n("qFsG"),v=n("1jcm"),C=n("mcsV"),x=n("bv9b");function w(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",21)}function S(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"filter.name-required")," "))}function E(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"filter.duplicate-filter")," "))}var I=function(e){function t(t,n,i,a,r,o,l,c){var d=e.call(this,t,n,r)||this;if(d.store=t,d.router=n,d.data=i,d.errorStateMatcher=a,d.dialogRef=r,d.fb=o,d.utils=l,d.translate=c,d.submitted=!1,d.isAdd=i.isAdd,Array.isArray(i.filters))d.filters=i.filters;else{d.filters=[];for(var u=0,p=Object.keys(i.filters);u<p.length;u++){var m=p[u];d.filters.push(i.filters[m])}}return d.isAdd&&!d.data.filter?d.filter={id:null,filter:"",keyFilters:[],editable:!0}:d.filter=i.filter,d.filterFormGroup=d.fb.group({filter:[d.filter.filter,[d.validateDuplicateFilterName(),s.Validators.required]],editable:[d.filter.editable],keyFilters:[d.filter.keyFilters,s.Validators.required]}),d}return Object(i.d)(t,e),t.prototype.validateDuplicateFilterName=function(){var e=this;return function(t){var n=t.value.trim(),i=e.filters.find(function(e){return e.filter===n});return i&&(e.isAdd||e.filter.id!==i.id)?{duplicateFilterName:{valid:!1}}:null}},t.prototype.ngOnInit=function(){},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.save=function(){this.submitted=!0,this.filter.filter=this.filterFormGroup.get("filter").value.trim(),this.filter.editable=this.filterFormGroup.get("editable").value,this.filter.keyFilters=this.filterFormGroup.get("keyFilters").value,this.isAdd&&(this.filter.id=this.utils.guid()),this.dialogRef.close(this.filter)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](d.Store),a["\u0275\u0275directiveInject"](u.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](p.TranslateService))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-filter-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:36,vars:24,consts:[[2,"width","700px",3,"formGroup","ngSubmit"],["color","accent"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["fxFlex","","fxLayout","column"],["fxLayout","row"],["fxFlex","",1,"mat-block"],["translate",""],["matInput","","formControlName","filter","required",""],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","start center",1,"tb-editable-switch"],["translate","",1,"tb-small","editable-label"],["formControlName","editable",1,"editable-switch"],["formControlName","keyFilters"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,w,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275elementStart"](11,"div",6),a["\u0275\u0275elementStart"](12,"fieldset",7),a["\u0275\u0275pipe"](13,"async"),a["\u0275\u0275elementStart"](14,"div",8),a["\u0275\u0275elementStart"](15,"div",9),a["\u0275\u0275elementStart"](16,"mat-form-field",10),a["\u0275\u0275elementStart"](17,"mat-label",11),a["\u0275\u0275text"](18,"filter.name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](19,"input",12),a["\u0275\u0275template"](20,S,3,3,"mat-error",13),a["\u0275\u0275template"](21,E,3,3,"mat-error",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"section",14),a["\u0275\u0275elementStart"](23,"label",15),a["\u0275\u0275text"](24,"filter.editable"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](25,"mat-slide-toggle",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](26,"tb-key-filter-list",17),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](27,"div",18),a["\u0275\u0275elementStart"](28,"button",19),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](29,"async"),a["\u0275\u0275text"](30),a["\u0275\u0275pipe"](31,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](32,"button",20),a["\u0275\u0275pipe"](33,"async"),a["\u0275\u0275text"](34),a["\u0275\u0275pipe"](35,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.filterFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,10,t.isAdd?"filter.add":"filter.edit")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,12,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](13,14,t.isLoading$)),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("ngIf",t.filterFormGroup.get("filter").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.filterFormGroup.get("filter").hasError("duplicateFilterName")),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](29,16,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](31,18,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](33,20,t.isLoading$)||t.filterFormGroup.invalid||!t.filterFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](35,22,t.isAdd?"action.add":"action.update")," "))},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,m.MatToolbar,f.b,h.MatButton,g.MatIcon,A.NgIf,o.MatDialogContent,f.f,b.MatFormField,b.MatLabel,p.TranslateDirective,y.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,s.RequiredValidator,f.e,v.MatSlideToggle,C.a,o.MatDialogActions,x.MatProgressBar,b.MatError],pipes:[p.TranslatePipe,A.AsyncPipe],styles:["[_nghost-%COMP%]   .tb-editable-switch[_ngcontent-%COMP%]{padding-left:10px}[_nghost-%COMP%]   .tb-editable-switch[_ngcontent-%COMP%]   .editable-switch[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   .tb-editable-switch[_ngcontent-%COMP%]   .editable-label[_ngcontent-%COMP%]{margin:5px 0}"]}),t}(l.a);0,void 0},kN7V:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var i=n("fXoL"),a=n("3Pt+"),r=n("xw5a"),o=n("XiUz"),s=n("ofXK"),l=n("IfZf"),c=n("qlrG"),d=n("RFBu"),u=n("91qg"),p=n("W1QD");function m(e,t){if(1&e&&i["\u0275\u0275element"](0,"tb-string-filter-predicate",4),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("allowUserDynamicSource",n.allowUserDynamicSource)("onlyUserDynamicSource",n.onlyUserDynamicSource)}}function f(e,t){if(1&e&&i["\u0275\u0275element"](0,"tb-numeric-filter-predicate",5),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("allowUserDynamicSource",n.allowUserDynamicSource)("onlyUserDynamicSource",n.onlyUserDynamicSource)("valueType",n.valueType)}}function h(e,t){if(1&e&&i["\u0275\u0275element"](0,"tb-boolean-filter-predicate",4),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("allowUserDynamicSource",n.allowUserDynamicSource)("onlyUserDynamicSource",n.onlyUserDynamicSource)}}function g(e,t){if(1&e&&i["\u0275\u0275element"](0,"tb-complex-filter-predicate",6),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("allowUserDynamicSource",n.allowUserDynamicSource)("onlyUserDynamicSource",n.onlyUserDynamicSource)("key",n.key)("valueType",n.valueType)("displayUserParameters",n.displayUserParameters)}}function A(e,t){if(1&e&&i["\u0275\u0275element"](0,"tb-filter-user-info",7),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("valueType",n.valueType)("operation",null==n.filterPredicateFormGroup.get("predicate").value?null:n.filterPredicateFormGroup.get("predicate").value.operation)("key",n.key)}}var b=function(){function e(e){this.fb=e,this.displayUserParameters=!0,this.allowUserDynamicSource=!0,this.onlyUserDynamicSource=!1,this.filterPredicateType=r.f,this.propagateChange=null}return e.prototype.ngOnInit=function(){var e=this;this.filterPredicateFormGroup=this.fb.group({predicate:[null,[a.Validators.required]],userInfo:[null,[]]}),this.filterPredicateFormGroup.valueChanges.subscribe(function(){e.updateModel()})},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.filterPredicateFormGroup.disable({emitEvent:!1}):this.filterPredicateFormGroup.enable({emitEvent:!1})},e.prototype.validate=function(){return this.filterPredicateFormGroup.valid?null:{filterPredicate:{valid:!1}}},e.prototype.writeValue=function(e){this.type=e.keyFilterPredicate.type,this.filterPredicateFormGroup.get("predicate").patchValue(e.keyFilterPredicate,{emitEvent:!1}),this.filterPredicateFormGroup.get("userInfo").patchValue(e.userInfo,{emitEvent:!1})},e.prototype.updateModel=function(){var e=null;this.filterPredicateFormGroup.valid&&(e={keyFilterPredicate:this.filterPredicateFormGroup.getRawValue().predicate,userInfo:this.filterPredicateFormGroup.getRawValue().userInfo}),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-filter-predicate"]],inputs:{disabled:"disabled",valueType:"valueType",key:"key",displayUserParameters:"displayUserParameters",allowUserDynamicSource:"allowUserDynamicSource",onlyUserDynamicSource:"onlyUserDynamicSource"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:7,vars:7,consts:[["fxFlex","","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px",3,"formGroup"],["fxFlex","","fxLayout","column",3,"ngSwitch"],[3,"ngSwitchCase"],["style","width: 60px;","fxLayout","row","fxLayoutAlign","center","formControlName","userInfo",3,"valueType","operation","key",4,"ngIf"],["formControlName","predicate",3,"allowUserDynamicSource","onlyUserDynamicSource"],["formControlName","predicate",3,"allowUserDynamicSource","onlyUserDynamicSource","valueType"],["formControlName","predicate",3,"allowUserDynamicSource","onlyUserDynamicSource","key","valueType","displayUserParameters"],["fxLayout","row","fxLayoutAlign","center","formControlName","userInfo",2,"width","60px",3,"valueType","operation","key"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275template"](2,m,1,2,"ng-template",2),i["\u0275\u0275template"](3,f,1,3,"ng-template",2),i["\u0275\u0275template"](4,h,1,2,"ng-template",2),i["\u0275\u0275template"](5,g,1,5,"ng-template",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,A,1,3,"tb-filter-user-info",3),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.filterPredicateFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitch",t.type),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",t.filterPredicateType.STRING),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",t.filterPredicateType.NUMERIC),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",t.filterPredicateType.BOOLEAN),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",t.filterPredicateType.COMPLEX),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.type!==t.filterPredicateType.COMPLEX&&t.displayUserParameters))},directives:[o.b,o.f,o.e,o.g,a.NgControlStatusGroup,a.FormGroupDirective,s.NgSwitch,s.NgSwitchCase,s.NgIf,l.a,a.NgControlStatus,a.FormControlName,c.a,d.a,u.a,p.a],encapsulation:2}),e}();0,void 0},kU1M:function(e,t,n){"use strict";n.r(t),n.d(t,"audit",function(){return i.a}),n.d(t,"auditTime",function(){return a.a}),n.d(t,"buffer",function(){return u}),n.d(t,"bufferCount",function(){return f.a}),n.d(t,"bufferTime",function(){return v}),n.d(t,"bufferToggle",function(){return B}),n.d(t,"bufferWhen",function(){return D}),n.d(t,"catchError",function(){return L.a}),n.d(t,"combineAll",function(){return N}),n.d(t,"combineLatest",function(){return Q}),n.d(t,"concat",function(){return H}),n.d(t,"concatAll",function(){return K.a}),n.d(t,"concatMap",function(){return q.a}),n.d(t,"concatMapTo",function(){return z}),n.d(t,"count",function(){return W}),n.d(t,"debounce",function(){return J}),n.d(t,"debounceTime",function(){return ee.a}),n.d(t,"defaultIfEmpty",function(){return te.a}),n.d(t,"delay",function(){return ne.a}),n.d(t,"delayWhen",function(){return ae}),n.d(t,"dematerialize",function(){return ce.a}),n.d(t,"distinct",function(){return de.a}),n.d(t,"distinctUntilChanged",function(){return ue.a}),n.d(t,"distinctUntilKeyChanged",function(){return pe}),n.d(t,"elementAt",function(){return Ae}),n.d(t,"endWith",function(){return ye}),n.d(t,"every",function(){return ve}),n.d(t,"exhaust",function(){return we}),n.d(t,"exhaustMap",function(){return Ie.a}),n.d(t,"expand",function(){return Oe.a}),n.d(t,"filter",function(){return fe.a}),n.d(t,"finalize",function(){return Te.a}),n.d(t,"find",function(){return Fe}),n.d(t,"findIndex",function(){return Pe}),n.d(t,"first",function(){return De.a}),n.d(t,"groupBy",function(){return ke.b}),n.d(t,"ignoreElements",function(){return _e.a}),n.d(t,"isEmpty",function(){return Le}),n.d(t,"last",function(){return Re.a}),n.d(t,"map",function(){return Ue.a}),n.d(t,"mapTo",function(){return Ve.a}),n.d(t,"materialize",function(){return Qe.a}),n.d(t,"max",function(){return He}),n.d(t,"merge",function(){return qe}),n.d(t,"mergeAll",function(){return ze.a}),n.d(t,"mergeMap",function(){return We.b}),n.d(t,"flatMap",function(){return We.a}),n.d(t,"mergeMapTo",function(){return Xe}),n.d(t,"mergeScan",function(){return $e}),n.d(t,"min",function(){return Ze}),n.d(t,"multicast",function(){return et.a}),n.d(t,"observeOn",function(){return tt.b}),n.d(t,"onErrorResumeNext",function(){return nt}),n.d(t,"pairwise",function(){return rt.a}),n.d(t,"partition",function(){return st}),n.d(t,"pluck",function(){return lt.a}),n.d(t,"publish",function(){return dt}),n.d(t,"publishBehavior",function(){return pt}),n.d(t,"publishLast",function(){return ft}),n.d(t,"publishReplay",function(){return ht.a}),n.d(t,"race",function(){return At}),n.d(t,"reduce",function(){return Ge.a}),n.d(t,"repeat",function(){return yt}),n.d(t,"repeatWhen",function(){return xt}),n.d(t,"retry",function(){return Et}),n.d(t,"retryWhen",function(){return Tt}),n.d(t,"refCount",function(){return Mt.a}),n.d(t,"sample",function(){return Pt}),n.d(t,"sampleTime",function(){return _t}),n.d(t,"scan",function(){return Rt.a}),n.d(t,"sequenceEqual",function(){return Ut}),n.d(t,"share",function(){return Ht.a}),n.d(t,"shareReplay",function(){return Kt.a}),n.d(t,"single",function(){return zt}),n.d(t,"skip",function(){return $t.a}),n.d(t,"skipLast",function(){return Jt}),n.d(t,"skipUntil",function(){return en}),n.d(t,"skipWhile",function(){return an.a}),n.d(t,"startWith",function(){return rn.a}),n.d(t,"subscribeOn",function(){return cn}),n.d(t,"switchAll",function(){return mn}),n.d(t,"switchMap",function(){return un.a}),n.d(t,"switchMapTo",function(){return fn}),n.d(t,"take",function(){return ge.a}),n.d(t,"takeLast",function(){return hn.a}),n.d(t,"takeUntil",function(){return gn.a}),n.d(t,"takeWhile",function(){return An.a}),n.d(t,"tap",function(){return bn.a}),n.d(t,"throttle",function(){return vn}),n.d(t,"throttleTime",function(){return wn}),n.d(t,"throwIfEmpty",function(){return he.a}),n.d(t,"timeInterval",function(){return Tn}),n.d(t,"timeout",function(){return Bn.a}),n.d(t,"timeoutWith",function(){return Mn.a}),n.d(t,"timestamp",function(){return Pn}),n.d(t,"toArray",function(){return kn.a}),n.d(t,"window",function(){return _n}),n.d(t,"windowCount",function(){return Nn}),n.d(t,"windowTime",function(){return Vn}),n.d(t,"windowToggle",function(){return Wn}),n.d(t,"windowWhen",function(){return Jn}),n.d(t,"withLatestFrom",function(){return ei.a}),n.d(t,"zip",function(){return ni}),n.d(t,"zipAll",function(){return ii});var i=n("tnsW"),a=n("3UWI"),r=n("JL25"),o=n("mvVQ"),s=n("/E8u"),l=n("MGFw"),c=n("WtWf"),d=n("zx2A");function u(e){return function(t){return t.lift(new p(e))}}var p=function(){function e(t){Object(l.a)(this,e),this.closingNotifier=t}return Object(c.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new m(e,this.closingNotifier))}}]),e}(),m=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i){var a;return Object(l.a)(this,n),(a=t.call(this,e)).buffer=[],a.add(Object(d.c)(i,new d.a(Object(r.a)(a)))),a}return Object(c.a)(n,[{key:"_next",value:function(e){this.buffer.push(e)}},{key:"notifyNext",value:function(){var e=this.buffer;this.buffer=[],this.destination.next(e)}}]),n}(d.b),f=n("9M8c"),h=n("t9bE"),g=n("KUzl"),A=n("D0XW"),b=n("7o/Q"),y=n("z+Ro");function v(e){var t=arguments.length,n=A.a;Object(y.a)(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],t--);var i=null;t>=2&&(i=arguments[1]);var a=Number.POSITIVE_INFINITY;return t>=3&&(a=arguments[2]),function(t){return t.lift(new C(e,i,a,n))}}var C=function(){function e(t,n,i,a){Object(l.a)(this,e),this.bufferTimeSpan=t,this.bufferCreationInterval=n,this.maxBufferSize=i,this.scheduler=a}return Object(c.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new w(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))}}]),e}(),x=function e(){Object(l.a)(this,e),this.buffer=[]},w=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i,a,o,s){var c;Object(l.a)(this,n),(c=t.call(this,e)).bufferTimeSpan=i,c.bufferCreationInterval=a,c.maxBufferSize=o,c.scheduler=s,c.contexts=[];var d=c.openContext();if(c.timespanOnly=null==a||a<0,c.timespanOnly){var u={subscriber:Object(r.a)(c),context:d,bufferTimeSpan:i};c.add(d.closeAction=s.schedule(S,i,u))}else{var p={subscriber:Object(r.a)(c),context:d},m={bufferTimeSpan:i,bufferCreationInterval:a,subscriber:Object(r.a)(c),scheduler:s};c.add(d.closeAction=s.schedule(I,i,p)),c.add(s.schedule(E,a,m))}return c}return Object(c.a)(n,[{key:"_next",value:function(e){for(var t,n=this.contexts,i=n.length,a=0;a<i;a++){var r=n[a],o=r.buffer;o.push(e),o.length==this.maxBufferSize&&(t=r)}t&&this.onBufferFull(t)}},{key:"_error",value:function(e){this.contexts.length=0,Object(h.a)(Object(g.a)(n.prototype),"_error",this).call(this,e)}},{key:"_complete",value:function(){for(var e=this.contexts,t=this.destination;e.length>0;){var i=e.shift();t.next(i.buffer)}Object(h.a)(Object(g.a)(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){this.contexts=null}},{key:"onBufferFull",value:function(e){this.closeContext(e);var t=e.closeAction;if(t.unsubscribe(),this.remove(t),!this.closed&&this.timespanOnly){e=this.openContext();var n=this.bufferTimeSpan,i={subscriber:this,context:e,bufferTimeSpan:n};this.add(e.closeAction=this.scheduler.schedule(S,n,i))}}},{key:"openContext",value:function(){var e=new x;return this.contexts.push(e),e}},{key:"closeContext",value:function(e){this.destination.next(e.buffer);var t=this.contexts;(t?t.indexOf(e):-1)>=0&&t.splice(t.indexOf(e),1)}}]),n}(b.a);function S(e){var t=e.subscriber,n=e.context;n&&t.closeContext(n),t.closed||(e.context=t.openContext(),e.context.closeAction=this.schedule(e,e.bufferTimeSpan))}function E(e){var t=e.bufferCreationInterval,n=e.bufferTimeSpan,i=e.subscriber,a=e.scheduler,r=i.openContext();i.closed||(i.add(r.closeAction=a.schedule(I,n,{subscriber:i,context:r})),this.schedule(e,t))}function I(e){var t=e.subscriber,n=e.context;t.closeContext(n)}var O=n("quSY"),T=n("ZUHj"),F=n("l7GE");function B(e,t){return function(n){return n.lift(new M(e,t))}}var M=function(){function e(t,n){Object(l.a)(this,e),this.openings=t,this.closingSelector=n}return Object(c.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new P(e,this.openings,this.closingSelector))}}]),e}(),P=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i,a){var o;return Object(l.a)(this,n),(o=t.call(this,e)).closingSelector=a,o.contexts=[],o.add(Object(T.a)(Object(r.a)(o),i)),o}return Object(c.a)(n,[{key:"_next",value:function(e){for(var t=this.contexts,n=t.length,i=0;i<n;i++)t[i].buffer.push(e)}},{key:"_error",value:function(e){for(var t=this.contexts;t.length>0;){var i=t.shift();i.subscription.unsubscribe(),i.buffer=null,i.subscription=null}this.contexts=null,Object(h.a)(Object(g.a)(n.prototype),"_error",this).call(this,e)}},{key:"_complete",value:function(){for(var e=this.contexts;e.length>0;){var t=e.shift();this.destination.next(t.buffer),t.subscription.unsubscribe(),t.buffer=null,t.subscription=null}this.contexts=null,Object(h.a)(Object(g.a)(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(e,t){e?this.closeBuffer(e):this.openBuffer(t)}},{key:"notifyComplete",value:function(e){this.closeBuffer(e.context)}},{key:"openBuffer",value:function(e){try{var t=this.closingSelector.call(this,e);t&&this.trySubscribe(t)}catch(n){this._error(n)}}},{key:"closeBuffer",value:function(e){var t=this.contexts;if(t&&e){var n=e.buffer,i=e.subscription;this.destination.next(n),t.splice(t.indexOf(e),1),this.remove(i),i.unsubscribe()}}},{key:"trySubscribe",value:function(e){var t=this.contexts,n=new O.a,i={buffer:[],subscription:n};t.push(i);var a=Object(T.a)(this,e,i);!a||a.closed?this.closeBuffer(i):(a.context=i,this.add(a),n.add(a))}}]),n}(F.a);function D(e){return function(t){return t.lift(new k(e))}}var k=function(){function e(t){Object(l.a)(this,e),this.closingSelector=t}return Object(c.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new _(e,this.closingSelector))}}]),e}(),_=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i){var a;return Object(l.a)(this,n),(a=t.call(this,e)).closingSelector=i,a.subscribing=!1,a.openBuffer(),a}return Object(c.a)(n,[{key:"_next",value:function(e){this.buffer.push(e)}},{key:"_complete",value:function(){var e=this.buffer;e&&this.destination.next(e),Object(h.a)(Object(g.a)(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){this.buffer=void 0,this.subscribing=!1}},{key:"notifyNext",value:function(){this.openBuffer()}},{key:"notifyComplete",value:function(){this.subscribing?this.complete():this.openBuffer()}},{key:"openBuffer",value:function(){var e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe());var t,n=this.buffer;this.buffer&&this.destination.next(n),this.buffer=[];try{t=(0,this.closingSelector)()}catch(i){return this.error(i)}e=new O.a,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(Object(d.c)(t,new d.a(this))),this.subscribing=!1}}]),n}(d.b),L=n("JIr8"),j=n("itXk");function N(e){return function(t){return t.lift(new j.a(e))}}var R=n("8vcG"),U=n("DH7j"),V=n("Cfvw");function Q(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=null;return"function"==typeof t[t.length-1]&&(i=t.pop()),1===t.length&&Object(U.a)(t[0])&&(t=t[0].slice()),function(e){return e.lift.call(Object(V.a)([e].concat(Object(R.a)(t))),new j.a(i))}}var G=n("GyhO");function H(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return e.lift.call(G.a.apply(void 0,[e].concat(t)))}}var K=n("0EUg"),q=n("bOdf");function z(e,t){return Object(q.a)(function(){return e},t)}function W(e){return function(t){return t.lift(new X(e,t))}}var X=function(){function e(t,n){Object(l.a)(this,e),this.predicate=t,this.source=n}return Object(c.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new $(e,this.predicate,this.source))}}]),e}(),$=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i,a){var r;return Object(l.a)(this,n),(r=t.call(this,e)).predicate=i,r.source=a,r.count=0,r.index=0,r}return Object(c.a)(n,[{key:"_next",value:function(e){this.predicate?this._tryPredicate(e):this.count++}},{key:"_tryPredicate",value:function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(n){return this.destination.error(n),void 0}t&&this.count++}},{key:"_complete",value:function(){this.destination.next(this.count),this.destination.complete()}}]),n}(b.a);function J(e){return function(t){return t.lift(new Y(e))}}var Y=function(){function e(t){Object(l.a)(this,e),this.durationSelector=t}return Object(c.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new Z(e,this.durationSelector))}}]),e}(),Z=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i){var a;return Object(l.a)(this,n),(a=t.call(this,e)).durationSelector=i,a.hasValue=!1,a}return Object(c.a)(n,[{key:"_next",value:function(e){try{var t=this.durationSelector.call(this,e);t&&this._tryNext(e,t)}catch(n){this.destination.error(n)}}},{key:"_complete",value:function(){this.emitValue(),this.destination.complete()}},{key:"_tryNext",value:function(e,t){var n=this.durationSubscription;this.value=e,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),(n=Object(d.c)(t,new d.a(this)))&&!n.closed&&this.add(this.durationSubscription=n)}},{key:"notifyNext",value:function(){this.emitValue()}},{key:"notifyComplete",value:function(){this.emitValue()}},{key:"emitValue",value:function(){if(this.hasValue){var e=this.value,t=this.durationSubscription;t&&(this.durationSubscription=void 0,t.unsubscribe(),this.remove(t)),this.value=void 0,this.hasValue=!1,Object(h.a)(Object(g.a)(n.prototype),"_next",this).call(this,e)}}}]),n}(d.b),ee=n("Kj3r"),te=n("xbPD"),ne=n("3E0/"),ie=n("HDdC");function ae(e,t){return t?function(n){return new se(n,t).lift(new re(e))}:function(t){return t.lift(new re(e))}}var re=function(){function e(t){Object(l.a)(this,e),this.delayDurationSelector=t}return Object(c.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new oe(e,this.delayDurationSelector))}}]),e}(),oe=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i){var a;return Object(l.a)(this,n),(a=t.call(this,e)).delayDurationSelector=i,a.completed=!1,a.delayNotifierSubscriptions=[],a.index=0,a}return Object(c.a)(n,[{key:"notifyNext",value:function(e,t,n,i,a){this.destination.next(e),this.removeSubscription(a),this.tryComplete()}},{key:"notifyError",value:function(e,t){this._error(e)}},{key:"notifyComplete",value:function(e){var t=this.removeSubscription(e);t&&this.destination.next(t),this.tryComplete()}},{key:"_next",value:function(e){var t=this.index++;try{var n=this.delayDurationSelector(e,t);n&&this.tryDelay(n,e)}catch(i){this.destination.error(i)}}},{key:"_complete",value:function(){this.completed=!0,this.tryComplete(),this.unsubscribe()}},{key:"removeSubscription",value:function(e){e.unsubscribe();var t=this.delayNotifierSubscriptions.indexOf(e);return-1!==t&&this.delayNotifierSubscriptions.splice(t,1),e.outerValue}},{key:"tryDelay",value:function(e,t){var n=Object(T.a)(this,e,t);n&&!n.closed&&(this.destination.add(n),this.delayNotifierSubscriptions.push(n))}},{key:"tryComplete",value:function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()}}]),n}(F.a),se=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i){var a;return Object(l.a)(this,n),(a=t.call(this)).source=e,a.subscriptionDelay=i,a}return Object(c.a)(n,[{key:"_subscribe",value:function(e){this.subscriptionDelay.subscribe(new le(e,this.source))}}]),n}(ie.a),le=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i){var a;return Object(l.a)(this,n),(a=t.call(this)).parent=e,a.source=i,a.sourceSubscribed=!1,a}return Object(c.a)(n,[{key:"_next",value:function(e){this.subscribeToSource()}},{key:"_error",value:function(e){this.unsubscribe(),this.parent.error(e)}},{key:"_complete",value:function(){this.unsubscribe(),this.subscribeToSource()}},{key:"subscribeToSource",value:function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))}}]),n}(b.a),ce=n("kgNN"),de=n("02Lk"),ue=n("/uUt");function pe(e,t){return Object(ue.a)(function(n,i){return t?t(n[e],i[e]):n[e]===i[e]})}var me=n("4I5i"),fe=n("pLZG"),he=n("XDbj"),ge=n("IzEk");function Ae(e,t){if(e<0)throw new me.a;var n=arguments.length>=2;return function(i){return i.pipe(Object(fe.a)(function(t,n){return n===e}),Object(ge.a)(1),n?Object(te.a)(t):Object(he.a)(function(){return new me.a}))}}var be=n("LRne");function ye(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return Object(G.a)(e,be.a.apply(void 0,t))}}function ve(e,t){return function(n){return n.lift(new Ce(e,t,n))}}var Ce=function(){function e(t,n,i){Object(l.a)(this,e),this.predicate=t,this.thisArg=n,this.source=i}return Object(c.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new xe(e,this.predicate,this.thisArg,this.source))}}]),e}(),xe=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i,a,o){var s;return Object(l.a)(this,n),(s=t.call(this,e)).predicate=i,s.thisArg=a,s.source=o,s.index=0,s.thisArg=a||Object(r.a)(s),s}return Object(c.a)(n,[{key:"notifyComplete",value:function(e){this.destination.next(e),this.destination.complete()}},{key:"_next",value:function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(n){return this.destination.error(n),void 0}t||this.notifyComplete(!1)}},{key:"_complete",value:function(){this.notifyComplete(!0)}}]),n}(b.a);function we(){return function(e){return e.lift(new Se)}}var Se=function(){function e(){Object(l.a)(this,e)}return Object(c.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new Ee(e))}}]),e}(),Ee=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).hasCompleted=!1,i.hasSubscription=!1,i}return Object(c.a)(n,[{key:"_next",value:function(e){this.hasSubscription||(this.hasSubscription=!0,this.add(Object(d.c)(e,new d.a(this))))}},{key:"_complete",value:function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()}},{key:"notifyComplete",value:function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}]),n}(d.b),Ie=n("XqQ8"),Oe=n("FQpF"),Te=n("nYR2");function Fe(e,t){if("function"!=typeof e)throw new TypeError("predicate is not a function");return function(n){return n.lift(new Be(e,n,!1,t))}}var Be=function(){function e(t,n,i,a){Object(l.a)(this,e),this.predicate=t,this.source=n,this.yieldIndex=i,this.thisArg=a}return Object(c.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new Me(e,this.predicate,this.source,this.yieldIndex,this.thisArg))}}]),e}(),Me=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i,a,r,o){var s;return Object(l.a)(this,n),(s=t.call(this,e)).predicate=i,s.source=a,s.yieldIndex=r,s.thisArg=o,s.index=0,s}return Object(c.a)(n,[{key:"notifyComplete",value:function(e){var t=this.destination;t.next(e),t.complete(),this.unsubscribe()}},{key:"_next",value:function(e){var t=this.predicate,n=this.thisArg,i=this.index++;try{t.call(n||this,e,i,this.source)&&this.notifyComplete(this.yieldIndex?i:e)}catch(a){this.destination.error(a)}}},{key:"_complete",value:function(){this.notifyComplete(this.yieldIndex?-1:void 0)}}]),n}(b.a);function Pe(e,t){return function(n){return n.lift(new Be(e,n,!0,t))}}var De=n("SxV6"),ke=n("OQgR"),_e=n("4A3s");function Le(){return function(e){return e.lift(new je)}}var je=function(){function e(){Object(l.a)(this,e)}return Object(c.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new Ne(e))}}]),e}(),Ne=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){return Object(l.a)(this,n),t.call(this,e)}return Object(c.a)(n,[{key:"notifyComplete",value:function(e){var t=this.destination;t.next(e),t.complete()}},{key:"_next",value:function(e){this.notifyComplete(!1)}},{key:"_complete",value:function(){this.notifyComplete(!0)}}]),n}(b.a),Re=n("NJ9Y"),Ue=n("lJxs"),Ve=n("CqXF"),Qe=n("dkDA"),Ge=n("128B");function He(e){var t="function"==typeof e?function(t,n){return e(t,n)>0?t:n}:function(e,t){return e>t?e:t};return Object(Ge.a)(t)}var Ke=n("VRyK");function qe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return e.lift.call(Ke.a.apply(void 0,[e].concat(t)))}}var ze=n("bHdf"),We=n("5+tZ");function Xe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof t?Object(We.b)(function(){return e},t,n):("number"==typeof t&&(n=t),Object(We.b)(function(){return e},n))}function $e(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return function(i){return i.lift(new Je(e,t,n))}}var Je=function(){function e(t,n,i){Object(l.a)(this,e),this.accumulator=t,this.seed=n,this.concurrent=i}return Object(c.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new Ye(e,this.accumulator,this.seed,this.concurrent))}}]),e}(),Ye=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i,a,r){var o;return Object(l.a)(this,n),(o=t.call(this,e)).accumulator=i,o.acc=a,o.concurrent=r,o.hasValue=!1,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return Object(c.a)(n,[{key:"_next",value:function(e){if(this.active<this.concurrent){var t,n=this.index++,i=this.destination;try{t=(0,this.accumulator)(this.acc,e,n)}catch(a){return i.error(a)}this.active++,this._innerSub(t)}else this.buffer.push(e)}},{key:"_innerSub",value:function(e){var t=new d.a(this),n=this.destination;n.add(t);var i=Object(d.c)(e,t);i!==t&&n.add(i)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()}},{key:"notifyNext",value:function(e){var t=this.destination;this.acc=e,this.hasValue=!0,t.next(e)}},{key:"notifyComplete",value:function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())}}]),n}(d.b);function Ze(e){var t="function"==typeof e?function(t,n){return e(t,n)<0?t:n}:function(e,t){return e<t?e:t};return Object(Ge.a)(t)}var et=n("oB13"),tt=n("pxpQ");function nt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 1===t.length&&Object(U.a)(t[0])&&(t=t[0]),function(e){return e.lift(new it(t))}}var it=function(){function e(t){Object(l.a)(this,e),this.nextSources=t}return Object(c.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new at(e,this.nextSources))}}]),e}(),at=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i){var a;return Object(l.a)(this,n),(a=t.call(this,e)).destination=e,a.nextSources=i,a}return Object(c.a)(n,[{key:"notifyError",value:function(){this.subscribeToNextSource()}},{key:"notifyComplete",value:function(){this.subscribeToNextSource()}},{key:"_error",value:function(e){this.subscribeToNextSource(),this.unsubscribe()}},{key:"_complete",value:function(){this.subscribeToNextSource(),this.unsubscribe()}},{key:"subscribeToNextSource",value:function(){var e=this.nextSources.shift();if(e){var t=new d.a(this),n=this.destination;n.add(t);var i=Object(d.c)(e,t);i!==t&&n.add(i)}else this.destination.complete()}}]),n}(d.b),rt=n("Zy1z"),ot=n("F97/");function st(e,t){return function(n){return[Object(fe.a)(e,t)(n),Object(fe.a)(Object(ot.a)(e,t))(n)]}}var lt=n("wO+i"),ct=n("XNiG");function dt(e){return e?Object(et.a)(function(){return new ct.b},e):Object(et.a)(new ct.b)}var ut=n("2Vo4");function pt(e){return function(t){return Object(et.a)(new ut.a(e))(t)}}var mt=n("NHP+");function ft(){return function(e){return Object(et.a)(new mt.a)(e)}}var ht=n("05l1"),gt=n("Nv8m");function At(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return 1===t.length&&Object(U.a)(t[0])&&(t=t[0]),e.lift.call(gt.a.apply(void 0,[e].concat(Object(R.a)(t))))}}var bt=n("EY2u");function yt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return function(t){return 0===e?Object(bt.b)():e<0?t.lift(new vt(-1,t)):t.lift(new vt(e-1,t))}}var vt=function(){function e(t,n){Object(l.a)(this,e),this.count=t,this.source=n}return Object(c.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new Ct(e,this.count,this.source))}}]),e}(),Ct=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i,a){var r;return Object(l.a)(this,n),(r=t.call(this,e)).count=i,r.source=a,r}return Object(c.a)(n,[{key:"complete",value:function(){if(!this.isStopped){var e=this.source,t=this.count;if(0===t)return Object(h.a)(Object(g.a)(n.prototype),"complete",this).call(this);t>-1&&(this.count=t-1),e.subscribe(this._unsubscribeAndRecycle())}}}]),n}(b.a);function xt(e){return function(t){return t.lift(new wt(e))}}var wt=function(){function e(t){Object(l.a)(this,e),this.notifier=t}return Object(c.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new St(e,this.notifier,t))}}]),e}(),St=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i,a){var r;return Object(l.a)(this,n),(r=t.call(this,e)).notifier=i,r.source=a,r.sourceIsBeingSubscribedTo=!0,r}return Object(c.a)(n,[{key:"notifyNext",value:function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)}},{key:"notifyComplete",value:function(){if(!1===this.sourceIsBeingSubscribedTo)return Object(h.a)(Object(g.a)(n.prototype),"complete",this).call(this)}},{key:"complete",value:function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return Object(h.a)(Object(g.a)(n.prototype),"complete",this).call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}}},{key:"_unsubscribe",value:function(){var e=this.notifications,t=this.retriesSubscription;e&&(e.unsubscribe(),this.notifications=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}},{key:"_unsubscribeAndRecycle",value:function(){var e=this._unsubscribe;return this._unsubscribe=null,Object(h.a)(Object(g.a)(n.prototype),"_unsubscribeAndRecycle",this).call(this),this._unsubscribe=e,this}},{key:"subscribeToRetries",value:function(){var e;this.notifications=new ct.b;try{e=(0,this.notifier)(this.notifications)}catch(t){return Object(h.a)(Object(g.a)(n.prototype),"complete",this).call(this)}this.retries=e,this.retriesSubscription=Object(d.c)(e,new d.a(this))}}]),n}(d.b);function Et(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return function(t){return t.lift(new It(e,t))}}var It=function(){function e(t,n){Object(l.a)(this,e),this.count=t,this.source=n}return Object(c.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new Ot(e,this.count,this.source))}}]),e}(),Ot=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i,a){var r;return Object(l.a)(this,n),(r=t.call(this,e)).count=i,r.source=a,r}return Object(c.a)(n,[{key:"error",value:function(e){if(!this.isStopped){var t=this.source,i=this.count;if(0===i)return Object(h.a)(Object(g.a)(n.prototype),"error",this).call(this,e);i>-1&&(this.count=i-1),t.subscribe(this._unsubscribeAndRecycle())}}}]),n}(b.a);function Tt(e){return function(t){return t.lift(new Ft(e,t))}}var Ft=function(){function e(t,n){Object(l.a)(this,e),this.notifier=t,this.source=n}return Object(c.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new Bt(e,this.notifier,this.source))}}]),e}(),Bt=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i,a){var r;return Object(l.a)(this,n),(r=t.call(this,e)).notifier=i,r.source=a,r}return Object(c.a)(n,[{key:"error",value:function(e){if(!this.isStopped){var t=this.errors,i=this.retries,a=this.retriesSubscription;if(i)this.errors=void 0,this.retriesSubscription=void 0;else{t=new ct.b;try{i=(0,this.notifier)(t)}catch(r){return Object(h.a)(Object(g.a)(n.prototype),"error",this).call(this,r)}a=Object(d.c)(i,new d.a(this))}this._unsubscribeAndRecycle(),this.errors=t,this.retries=i,this.retriesSubscription=a,t.next(e)}}},{key:"_unsubscribe",value:function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}},{key:"notifyNext",value:function(){var e=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=e,this.source.subscribe(this)}}]),n}(d.b),Mt=n("x+ZX");function Pt(e){return function(t){return t.lift(new Dt(e))}}var Dt=function(){function e(t){Object(l.a)(this,e),this.notifier=t}return Object(c.a)(e,[{key:"call",value:function(e,t){var n=new kt(e),i=t.subscribe(n);return i.add(Object(d.c)(this.notifier,new d.a(n))),i}}]),e}(),kt=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.apply(this,arguments)).hasValue=!1,e}return Object(c.a)(n,[{key:"_next",value:function(e){this.value=e,this.hasValue=!0}},{key:"notifyNext",value:function(){this.emitValue()}},{key:"notifyComplete",value:function(){this.emitValue()}},{key:"emitValue",value:function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))}}]),n}(d.b);function _t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A.a;return function(n){return n.lift(new Lt(e,t))}}var Lt=function(){function e(t,n){Object(l.a)(this,e),this.period=t,this.scheduler=n}return Object(c.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new jt(e,this.period,this.scheduler))}}]),e}(),jt=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i,a){var o;return Object(l.a)(this,n),(o=t.call(this,e)).period=i,o.scheduler=a,o.hasValue=!1,o.add(a.schedule(Nt,i,{subscriber:Object(r.a)(o),period:i})),o}return Object(c.a)(n,[{key:"_next",value:function(e){this.lastValue=e,this.hasValue=!0}},{key:"notifyNext",value:function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))}}]),n}(b.a);function Nt(e){var t=e.subscriber,n=e.period;t.notifyNext(),this.schedule(e,n)}var Rt=n("Kqap");function Ut(e,t){return function(n){return n.lift(new Vt(e,t))}}var Vt=function(){function e(t,n){Object(l.a)(this,e),this.compareTo=t,this.comparator=n}return Object(c.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new Qt(e,this.compareTo,this.comparator))}}]),e}(),Qt=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i,a){var o;return Object(l.a)(this,n),(o=t.call(this,e)).compareTo=i,o.comparator=a,o._a=[],o._b=[],o._oneComplete=!1,o.destination.add(i.subscribe(new Gt(e,Object(r.a)(o)))),o}return Object(c.a)(n,[{key:"_next",value:function(e){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(e),this.checkValues())}},{key:"_complete",value:function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()}},{key:"checkValues",value:function(){for(var e=this._a,t=this._b,n=this.comparator;e.length>0&&t.length>0;){var i=e.shift(),a=t.shift(),r=!1;try{r=n?n(i,a):i===a}catch(o){this.destination.error(o)}r||this.emit(!1)}}},{key:"emit",value:function(e){var t=this.destination;t.next(e),t.complete()}},{key:"nextB",value:function(e){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(e),this.checkValues())}},{key:"completeB",value:function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0}}]),n}(b.a),Gt=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i){var a;return Object(l.a)(this,n),(a=t.call(this,e)).parent=i,a}return Object(c.a)(n,[{key:"_next",value:function(e){this.parent.nextB(e)}},{key:"_error",value:function(e){this.parent.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.completeB(),this.unsubscribe()}}]),n}(b.a),Ht=n("w1tV"),Kt=n("UXun"),qt=n("sVev");function zt(e){return function(t){return t.lift(new Wt(e,t))}}var Wt=function(){function e(t,n){Object(l.a)(this,e),this.predicate=t,this.source=n}return Object(c.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new Xt(e,this.predicate,this.source))}}]),e}(),Xt=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i,a){var r;return Object(l.a)(this,n),(r=t.call(this,e)).predicate=i,r.source=a,r.seenValue=!1,r.index=0,r}return Object(c.a)(n,[{key:"applySingleValue",value:function(e){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=e)}},{key:"_next",value:function(e){var t=this.index++;this.predicate?this.tryNext(e,t):this.applySingleValue(e)}},{key:"tryNext",value:function(e,t){try{this.predicate(e,t,this.source)&&this.applySingleValue(e)}catch(n){this.destination.error(n)}}},{key:"_complete",value:function(){var e=this.destination;this.index>0?(e.next(this.seenValue?this.singleValue:void 0),e.complete()):e.error(new qt.a)}}]),n}(b.a),$t=n("zP0r");function Jt(e){return function(t){return t.lift(new Yt(e))}}var Yt=function(){function e(t){if(Object(l.a)(this,e),this._skipCount=t,this._skipCount<0)throw new me.a}return Object(c.a)(e,[{key:"call",value:function(e,t){return 0===this._skipCount?t.subscribe(new b.a(e)):t.subscribe(new Zt(e,this._skipCount))}}]),e}(),Zt=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i){var a;return Object(l.a)(this,n),(a=t.call(this,e))._skipCount=i,a._count=0,a._ring=new Array(i),a}return Object(c.a)(n,[{key:"_next",value:function(e){var t=this._skipCount,n=this._count++;if(n<t)this._ring[n]=e;else{var i=n%t,a=this._ring,r=a[i];a[i]=e,this.destination.next(r)}}}]),n}(b.a);function en(e){return function(t){return t.lift(new tn(e))}}var tn=function(){function e(t){Object(l.a)(this,e),this.notifier=t}return Object(c.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new nn(e,this.notifier))}}]),e}(),nn=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i){var a;Object(l.a)(this,n),(a=t.call(this,e)).hasValue=!1;var o=new d.a(Object(r.a)(a));a.add(o),a.innerSubscription=o;var s=Object(d.c)(i,o);return s!==o&&(a.add(s),a.innerSubscription=s),a}return Object(c.a)(n,[{key:"_next",value:function(e){this.hasValue&&Object(h.a)(Object(g.a)(n.prototype),"_next",this).call(this,e)}},{key:"notifyNext",value:function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()}},{key:"notifyComplete",value:function(){}}]),n}(d.b),an=n("32Ea"),rn=n("JX91"),on=n("7Hc7"),sn=n("Y7HM"),ln=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:on.a;return Object(l.a)(this,n),(i=t.call(this)).source=e,i.delayTime=a,i.scheduler=r,(!Object(sn.a)(a)||a<0)&&(i.delayTime=0),r&&"function"==typeof r.schedule||(i.scheduler=on.a),i}return Object(c.a)(n,[{key:"_subscribe",value:function(e){var t=this.delayTime,i=this.source;return this.scheduler.schedule(n.dispatch,t,{source:i,subscriber:e})}}],[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:on.a;return new n(e,t,i)}},{key:"dispatch",value:function(e){var t=e.source,n=e.subscriber;return this.add(t.subscribe(n))}}]),n}(ie.a);function cn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new dn(e,t))}}var dn=function(){function e(t,n){Object(l.a)(this,e),this.scheduler=t,this.delay=n}return Object(c.a)(e,[{key:"call",value:function(e,t){return new ln(t,this.delay,this.scheduler).subscribe(e)}}]),e}(),un=n("eIep"),pn=n("SpAZ");function mn(){return Object(un.a)(pn.a)}function fn(e,t){return t?Object(un.a)(function(){return e},t):Object(un.a)(function(){return e})}var hn=n("BFxc"),gn=n("1G5W"),An=n("GJmQ"),bn=n("vkgz"),yn={leading:!0,trailing:!1};function vn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yn;return function(n){return n.lift(new Cn(e,!!t.leading,!!t.trailing))}}var Cn=function(){function e(t,n,i){Object(l.a)(this,e),this.durationSelector=t,this.leading=n,this.trailing=i}return Object(c.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new xn(e,this.durationSelector,this.leading,this.trailing))}}]),e}(),xn=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i,a,r){var o;return Object(l.a)(this,n),(o=t.call(this,e)).destination=e,o.durationSelector=i,o._leading=a,o._trailing=r,o._hasValue=!1,o}return Object(c.a)(n,[{key:"_next",value:function(e){this._hasValue=!0,this._sendValue=e,this._throttled||(this._leading?this.send():this.throttle(e))}},{key:"send",value:function(){var e=this._hasValue,t=this._sendValue;e&&(this.destination.next(t),this.throttle(t)),this._hasValue=!1,this._sendValue=void 0}},{key:"throttle",value:function(e){var t=this.tryDurationSelector(e);t&&this.add(this._throttled=Object(d.c)(t,new d.a(this)))}},{key:"tryDurationSelector",value:function(e){try{return this.durationSelector(e)}catch(t){return this.destination.error(t),null}}},{key:"throttlingDone",value:function(){var e=this._throttled,t=this._trailing;e&&e.unsubscribe(),this._throttled=void 0,t&&this.send()}},{key:"notifyNext",value:function(){this.throttlingDone()}},{key:"notifyComplete",value:function(){this.throttlingDone()}}]),n}(d.b);function wn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A.a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yn;return function(i){return i.lift(new Sn(e,t,n.leading,n.trailing))}}var Sn=function(){function e(t,n,i,a){Object(l.a)(this,e),this.duration=t,this.scheduler=n,this.leading=i,this.trailing=a}return Object(c.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new En(e,this.duration,this.scheduler,this.leading,this.trailing))}}]),e}(),En=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i,a,r,o){var s;return Object(l.a)(this,n),(s=t.call(this,e)).duration=i,s.scheduler=a,s.leading=r,s.trailing=o,s._hasTrailingValue=!1,s._trailingValue=null,s}return Object(c.a)(n,[{key:"_next",value:function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(In,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))}},{key:"_complete",value:function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}},{key:"clearThrottle",value:function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)}}]),n}(b.a);function In(e){e.subscriber.clearThrottle()}var On=n("NXyV");function Tn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A.a;return function(t){return Object(On.a)(function(){return t.pipe(Object(Rt.a)(function(t,n){var i=t.current;return{value:n,current:e.now(),last:i}},{current:e.now(),value:void 0,last:void 0}),Object(Ue.a)(function(e){var t=e.current,n=e.last,i=e.value;return new Fn(i,t-n)}))})}}var Fn=function e(t,n){Object(l.a)(this,e),this.value=t,this.interval=n},Bn=n("tS1D"),Mn=n("syX2");function Pn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A.a;return Object(Ue.a)(function(t){return new Dn(t,e.now())})}var Dn=function e(t,n){Object(l.a)(this,e),this.value=t,this.timestamp=n},kn=n("IAdc");function _n(e){return function(t){return t.lift(new Ln(e))}}var Ln=function(){function e(t){Object(l.a)(this,e),this.windowBoundaries=t}return Object(c.a)(e,[{key:"call",value:function(e,t){var n=new jn(e),i=t.subscribe(n);return i.closed||n.add(Object(d.c)(this.windowBoundaries,new d.a(n))),i}}]),e}(),jn=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).window=new ct.b,e.next(i.window),i}return Object(c.a)(n,[{key:"notifyNext",value:function(){this.openWindow()}},{key:"notifyError",value:function(e){this._error(e)}},{key:"notifyComplete",value:function(){this._complete()}},{key:"_next",value:function(e){this.window.next(e)}},{key:"_error",value:function(e){this.window.error(e),this.destination.error(e)}},{key:"_complete",value:function(){this.window.complete(),this.destination.complete()}},{key:"_unsubscribe",value:function(){this.window=null}},{key:"openWindow",value:function(){var e=this.window;e&&e.complete();var t=this.destination,n=this.window=new ct.b;t.next(n)}}]),n}(d.b);function Nn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new Rn(e,t))}}var Rn=function(){function e(t,n){Object(l.a)(this,e),this.windowSize=t,this.startWindowEvery=n}return Object(c.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new Un(e,this.windowSize,this.startWindowEvery))}}]),e}(),Un=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i,a){var r;return Object(l.a)(this,n),(r=t.call(this,e)).destination=e,r.windowSize=i,r.startWindowEvery=a,r.windows=[new ct.b],r.count=0,e.next(r.windows[0]),r}return Object(c.a)(n,[{key:"_next",value:function(e){for(var t=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,i=this.windowSize,a=this.windows,r=a.length,o=0;o<r&&!this.closed;o++)a[o].next(e);var s=this.count-i+1;if(s>=0&&s%t==0&&!this.closed&&a.shift().complete(),++this.count%t==0&&!this.closed){var l=new ct.b;a.push(l),n.next(l)}}},{key:"_error",value:function(e){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().error(e);this.destination.error(e)}},{key:"_complete",value:function(){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().complete();this.destination.complete()}},{key:"_unsubscribe",value:function(){this.count=0,this.windows=null}}]),n}(b.a);function Vn(e){var t=A.a,n=null,i=Number.POSITIVE_INFINITY;return Object(y.a)(arguments[3])&&(t=arguments[3]),Object(y.a)(arguments[2])?t=arguments[2]:Object(sn.a)(arguments[2])&&(i=Number(arguments[2])),Object(y.a)(arguments[1])?t=arguments[1]:Object(sn.a)(arguments[1])&&(n=Number(arguments[1])),function(a){return a.lift(new Qn(e,n,i,t))}}var Qn=function(){function e(t,n,i,a){Object(l.a)(this,e),this.windowTimeSpan=t,this.windowCreationInterval=n,this.maxWindowSize=i,this.scheduler=a}return Object(c.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new Hn(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))}}]),e}(),Gn=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.apply(this,arguments))._numberOfNextedValues=0,e}return Object(c.a)(n,[{key:"next",value:function(e){this._numberOfNextedValues++,Object(h.a)(Object(g.a)(n.prototype),"next",this).call(this,e)}},{key:"numberOfNextedValues",get:function(){return this._numberOfNextedValues}}]),n}(ct.b),Hn=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i,a,o,s){var c;Object(l.a)(this,n),(c=t.call(this,e)).destination=e,c.windowTimeSpan=i,c.windowCreationInterval=a,c.maxWindowSize=o,c.scheduler=s,c.windows=[];var d=c.openWindow();if(null!==a&&a>=0){var u={subscriber:Object(r.a)(c),window:d,context:null},p={windowTimeSpan:i,windowCreationInterval:a,subscriber:Object(r.a)(c),scheduler:s};c.add(s.schedule(zn,i,u)),c.add(s.schedule(qn,a,p))}else{var m={subscriber:Object(r.a)(c),window:d,windowTimeSpan:i};c.add(s.schedule(Kn,i,m))}return c}return Object(c.a)(n,[{key:"_next",value:function(e){for(var t=this.windows,n=t.length,i=0;i<n;i++){var a=t[i];a.closed||(a.next(e),a.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(a))}}},{key:"_error",value:function(e){for(var t=this.windows;t.length>0;)t.shift().error(e);this.destination.error(e)}},{key:"_complete",value:function(){for(var e=this.windows;e.length>0;){var t=e.shift();t.closed||t.complete()}this.destination.complete()}},{key:"openWindow",value:function(){var e=new Gn;return this.windows.push(e),this.destination.next(e),e}},{key:"closeWindow",value:function(e){e.complete();var t=this.windows;t.splice(t.indexOf(e),1)}}]),n}(b.a);function Kn(e){var t=e.subscriber,n=e.windowTimeSpan,i=e.window;i&&t.closeWindow(i),e.window=t.openWindow(),this.schedule(e,n)}function qn(e){var t=e.windowTimeSpan,n=e.subscriber,i=e.scheduler,a=e.windowCreationInterval,r=n.openWindow(),o={action:this,subscription:null},s={subscriber:n,window:r,context:o};o.subscription=i.schedule(zn,t,s),this.add(o.subscription),this.schedule(e,a)}function zn(e){var t=e.subscriber,n=e.window,i=e.context;i&&i.action&&i.subscription&&i.action.remove(i.subscription),t.closeWindow(n)}function Wn(e,t){return function(n){return n.lift(new Xn(e,t))}}var Xn=function(){function e(t,n){Object(l.a)(this,e),this.openings=t,this.closingSelector=n}return Object(c.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new $n(e,this.openings,this.closingSelector))}}]),e}(),$n=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i,a){var o;return Object(l.a)(this,n),(o=t.call(this,e)).openings=i,o.closingSelector=a,o.contexts=[],o.add(o.openSubscription=Object(T.a)(Object(r.a)(o),i,i)),o}return Object(c.a)(n,[{key:"_next",value:function(e){var t=this.contexts;if(t)for(var n=t.length,i=0;i<n;i++)t[i].window.next(e)}},{key:"_error",value:function(e){var t=this.contexts;if(this.contexts=null,t)for(var i=t.length,a=-1;++a<i;){var r=t[a];r.window.error(e),r.subscription.unsubscribe()}Object(h.a)(Object(g.a)(n.prototype),"_error",this).call(this,e)}},{key:"_complete",value:function(){var e=this.contexts;if(this.contexts=null,e)for(var t=e.length,i=-1;++i<t;){var a=e[i];a.window.complete(),a.subscription.unsubscribe()}Object(h.a)(Object(g.a)(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var e=this.contexts;if(this.contexts=null,e)for(var t=e.length,n=-1;++n<t;){var i=e[n];i.window.unsubscribe(),i.subscription.unsubscribe()}}},{key:"notifyNext",value:function(e,t,n,i,a){if(e===this.openings){var r;try{r=(0,this.closingSelector)(t)}catch(d){return this.error(d)}var o=new ct.b,s=new O.a,l={window:o,subscription:s};this.contexts.push(l);var c=Object(T.a)(this,r,l);c.closed?this.closeWindow(this.contexts.length-1):(c.context=l,s.add(c)),this.destination.next(o)}else this.closeWindow(this.contexts.indexOf(e))}},{key:"notifyError",value:function(e){this.error(e)}},{key:"notifyComplete",value:function(e){e!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(e.context))}},{key:"closeWindow",value:function(e){if(-1!==e){var t=this.contexts,n=t[e],i=n.window,a=n.subscription;t.splice(e,1),i.complete(),a.unsubscribe()}}}]),n}(F.a);function Jn(e){return function(t){return t.lift(new Yn(e))}}var Yn=function(){function e(t){Object(l.a)(this,e),this.closingSelector=t}return Object(c.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new Zn(e,this.closingSelector))}}]),e}(),Zn=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i){var a;return Object(l.a)(this,n),(a=t.call(this,e)).destination=e,a.closingSelector=i,a.openWindow(),a}return Object(c.a)(n,[{key:"notifyNext",value:function(e,t,n,i,a){this.openWindow(a)}},{key:"notifyError",value:function(e){this._error(e)}},{key:"notifyComplete",value:function(e){this.openWindow(e)}},{key:"_next",value:function(e){this.window.next(e)}},{key:"_error",value:function(e){this.window.error(e),this.destination.error(e),this.unsubscribeClosingNotification()}},{key:"_complete",value:function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()}},{key:"unsubscribeClosingNotification",value:function(){this.closingNotification&&this.closingNotification.unsubscribe()}},{key:"openWindow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&(this.remove(e),e.unsubscribe());var t=this.window;t&&t.complete();var n,i=this.window=new ct.b;this.destination.next(i);try{var a=this.closingSelector;n=a()}catch(r){return this.destination.error(r),this.window.error(r),void 0}this.add(this.closingNotification=Object(T.a)(this,n))}}]),n}(F.a),ei=n("zp1y"),ti=n("1uah");function ni(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return e.lift.call(ti.b.apply(void 0,[e].concat(t)))}}function ii(e){return function(t){return t.lift(new ti.a(e))}}},lVMo:function(e,t,n){"use strict";n.d(t,"a",function(){return D});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("xw5a"),d=n("JIJk"),u=n("aX2P"),p=n("l7P3"),m=n("tyNb"),f=n("sYmb"),h=n("/t3+"),g=n("XiUz"),A=n("bTqV"),b=n("NFeN"),y=n("ofXK"),v=n("mcsV"),C=n("kmnG"),x=n("d3UM"),w=n("bv9b"),S=n("de2O");function E(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",20)}function I(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",21),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.alarmConditionTypeTranslation.get(n))," ")}}function O(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.condition-type-required")," "))}function T(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",21),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"](3);a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.timeUnitTranslations.get(n))," ")}}function F(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.condition-duration-time-unit-required")," "))}function B(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",25),a["\u0275\u0275elementStart"](1,"mat-form-field",26),a["\u0275\u0275element"](2,"mat-label"),a["\u0275\u0275elementStart"](3,"mat-select",27),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275template"](5,T,3,4,"mat-option",14),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](6,F,3,3,"mat-error",15),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](4,3,"device-profile.condition-duration-time-unit")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",n.timeUnits),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.conditionFormGroup.get("spec.unit").hasError("required"))}}function M(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",22),a["\u0275\u0275element"](1,"tb-alarm-duration-predicate-value",23),a["\u0275\u0275template"](2,B,7,5,"div",24),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("alarmConditionType",n.conditionFormGroup.get("spec.type").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.conditionFormGroup.get("spec.type").value==n.AlarmConditionType.DURATION)}}function P(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"button",28),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,n.isLoading$)||n.conditionFormGroup.invalid||!n.conditionFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](3,4,"action.save")," ")}}var D=function(e){function t(t,n,i,a,r,o,l){var p,m,f,h,g=e.call(this,t,n,r)||this;return g.store=t,g.router=n,g.data=i,g.errorStateMatcher=a,g.dialogRef=r,g.fb=o,g.translate=l,g.timeUnits=Object.values(u.j),g.timeUnitTranslations=u.M,g.alarmConditionTypes=Object.values(d.a),g.AlarmConditionType=d.a,g.alarmConditionTypeTranslation=d.b,g.readonly=g.data.readonly,g.condition=g.data.condition,g.entityId=g.data.entityId,g.submitted=!1,g.conditionFormGroup=g.fb.group({keyFilters:[Object(c.F)(null===(p=g.condition)||void 0===p?void 0:p.condition),s.Validators.required],spec:g.fb.group({type:[d.a.SIMPLE,s.Validators.required],unit:[null,s.Validators.required],predicate:[null,s.Validators.required]})}),g.conditionFormGroup.patchValue({spec:null===(m=g.condition)||void 0===m?void 0:m.spec}),g.conditionFormGroup.get("spec.type").valueChanges.subscribe(function(e){g.updateValidators(e,!0,!0)}),g.readonly?g.conditionFormGroup.disable({emitEvent:!1}):g.updateValidators(null===(h=null===(f=g.condition)||void 0===f?void 0:f.spec)||void 0===h?void 0:h.type),g}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.updateValidators=function(e,t,n){switch(void 0===t&&(t=!1),void 0===n&&(n=!1),e){case d.a.DURATION:this.conditionFormGroup.get("spec.unit").enable(),this.conditionFormGroup.get("spec.predicate").enable(),t&&this.conditionFormGroup.get("spec").patchValue({predicate:null});break;case d.a.REPEATING:this.conditionFormGroup.get("spec.predicate").enable(),this.conditionFormGroup.get("spec.unit").disable(),t&&this.conditionFormGroup.get("spec").patchValue({unit:null,predicate:null});break;case d.a.SIMPLE:this.conditionFormGroup.get("spec.unit").disable(),this.conditionFormGroup.get("spec.predicate").disable(),t&&this.conditionFormGroup.get("spec").patchValue({unit:null,predicate:null})}this.conditionFormGroup.get("spec.predicate").updateValueAndValidity({emitEvent:n}),this.conditionFormGroup.get("spec.unit").updateValueAndValidity({emitEvent:n})},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.save=function(){this.submitted=!0,this.condition={condition:Object(c.E)(this.conditionFormGroup.get("keyFilters").value),spec:this.conditionFormGroup.get("spec").value},this.dialogRef.close(this.condition)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](p.Store),a["\u0275\u0275directiveInject"](m.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder),a["\u0275\u0275directiveInject"](f.TranslateService))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-alarm-rule-condition-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:30,vars:24,consts:[[2,"width","700px",3,"formGroup","ngSubmit"],["color","accent"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["fxFlex","","fxLayout","column"],["formControlName","keyFilters",3,"displayUserParameters","allowUserDynamicSource","telemetryKeysOnly","entityId"],["formGroupName","spec",2,"margin-top","1em"],["hideRequiredMarker","",1,"mat-block"],["translate",""],["formControlName","type","required",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["fxLayout","row","fxLayout.xs","column","fxLayoutGap.gt-xs","16px",4,"ngIf"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled",4,"ngIf"],["color","warn","mode","indeterminate"],[3,"value"],["fxLayout","row","fxLayout.xs","column","fxLayoutGap.gt-xs","16px"],["fxLayout","row","fxFlex","","formControlName","predicate",3,"alarmConditionType"],["fxFlex","23",4,"ngIf"],["fxFlex","23"],["hideRequiredMarker","","floatLabel","always",1,"mat-block"],["formControlName","unit","required","",3,"placeholder"],["mat-raised-button","","color","accent","type","submit",3,"disabled"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,E,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275elementStart"](11,"div",6),a["\u0275\u0275elementStart"](12,"fieldset",7),a["\u0275\u0275pipe"](13,"async"),a["\u0275\u0275elementStart"](14,"div",8),a["\u0275\u0275element"](15,"tb-key-filter-list",9),a["\u0275\u0275elementStart"](16,"section",10),a["\u0275\u0275elementStart"](17,"mat-form-field",11),a["\u0275\u0275elementStart"](18,"mat-label",12),a["\u0275\u0275text"](19,"device-profile.condition-type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](20,"mat-select",13),a["\u0275\u0275template"](21,I,3,4,"mat-option",14),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](22,O,3,3,"mat-error",15),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](23,M,3,2,"div",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](24,"div",17),a["\u0275\u0275elementStart"](25,"button",18),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](26,"async"),a["\u0275\u0275text"](27),a["\u0275\u0275pipe"](28,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](29,P,4,6,"button",19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.conditionFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,14,t.readonly?"device-profile.alarm-rule-condition":"device-profile.edit-alarm-rule-condition")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,16,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](13,18,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("displayUserParameters",!1)("allowUserDynamicSource",!1)("telemetryKeysOnly",!0)("entityId",t.entityId),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngForOf",t.alarmConditionTypes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.conditionFormGroup.get("spec.type").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.conditionFormGroup.get("spec.type").value!=t.AlarmConditionType.SIMPLE),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](26,20,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](28,22,t.readonly?"action.close":"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!t.readonly))},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,h.MatToolbar,g.b,A.MatButton,b.MatIcon,y.NgIf,o.MatDialogContent,g.f,v.a,s.NgControlStatus,s.FormControlName,s.FormGroupName,C.MatFormField,C.MatLabel,f.TranslateDirective,x.MatSelect,s.RequiredValidator,y.NgForOf,o.MatDialogActions,g.e,w.MatProgressBar,r.MatOption,C.MatError,g.g,S.a],pipes:[f.TranslatePipe,y.AsyncPipe],styles:["[_nghost-%COMP%]   .row[_ngcontent-%COMP%]{margin-top:1em}"]}),t}(l.a);0,void 0},lbPe:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("0lYY"),a=n("Duvn"),r=n("fXoL"),o=n("2lgB"),s=n("OiFK"),l=n("//Q6"),c=n("Pmg/"),d=n("LRne"),u=function(){function e(e,t){this.telemetryService=e,this.utils=t}return e.isUnresolvedDatasource=function(e,t){return e.type===i.a.entity?!e.entityFilter||!t:e.type===i.a.entityCount&&!e.entityFilter},e.prototype.prepareSubscription=function(t,n){void 0===n&&(n=!1);var i=t.configDatasource;return console.log("datasource---\x3e",i),t.subscriptionOptions=this.createSubscriptionOptions(i,t.subscriptionType,i.pageLink,i.keyFilters,null,!1,n),e.isUnresolvedDatasource(i,i.pageLink)?Object(d.a)(null):(t.subscription=new c.a(t,this.telemetryService,this.utils),t.subscription.subscribe())},e.prototype.startSubscription=function(e){e.subscription&&(e.subscriptionType===i.m.timeseries?e.subscriptionOptions.subscriptionTimewindow=Object(l.e)(e.subscriptionTimewindow):e.subscriptionType===i.m.latest&&(e.subscriptionOptions.latestTsOffset=e.latestTsOffset),e.subscription.start())},e.prototype.subscribeForPaginatedData=function(t,n,r,o){void 0===o&&(o=!1);var s=t.configDatasource;return console.log("datasource---\x3e",s),t.subscriptionOptions=this.createSubscriptionOptions(s,t.subscriptionType,n,s.keyFilters,r,!0,o),e.isUnresolvedDatasource(s,n)?(t.dataLoaded(Object(a.a)(),[],t.configDatasourceIndex,t.subscriptionOptions.pageLink),Object(d.a)(null)):(t.subscription=new c.a(t,this.telemetryService,this.utils),t.subscriptionType===i.m.timeseries?t.subscriptionOptions.subscriptionTimewindow=Object(l.e)(t.subscriptionTimewindow):t.subscriptionType===i.m.latest&&(t.subscriptionOptions.latestTsOffset=t.latestTsOffset),t.subscription.subscribe())},e.prototype.stopSubscription=function(e){e.subscription&&e.subscription.unsubscribe()},e.prototype.createSubscriptionOptions=function(e,t,n,a,r,o,s){var l=[];e.dataKeys.forEach(function(e){var t={name:e.name,type:e.type,funcBody:e.funcBody,postFuncBody:e.postFuncBody};l.push(t)});var c={datasourceType:e.type,dataKeys:l,type:t};return c.datasourceType!==i.a.entity&&c.datasourceType!==i.a.entityCount||(c.entityFilter=e.entityFilter,c.keyFilters=a,c.additionalKeyFilters=r,c.datasourceType===i.a.entity&&(c.pageLink=n)),c.isPaginatedDataSubscription=o,c.ignoreDataUpdateOnIntervalTick=s,c},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](o.a),r["\u0275\u0275inject"](s.a))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();0,void 0},leY2:function(e,t,n){"use strict";n.d(t,"a",function(){return te});var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=n("3Pt+"),s=n("OiFK"),l=n("21Fy"),c=n("3Tyt"),d=n("LRne"),u=n("lJxs"),p=n("5+tZ"),m=n("vkgz"),f=n("05l1"),h=n("x+ZX"),g=n("UZbx"),A=n("yAAm"),b=n("l7P3"),y=n("0IaG"),v=n("sYmb"),C=n("wZkO"),x=n("ofXK"),w=n("znSr"),S=n("XiUz"),E=n("kmnG"),I=n("qFsG"),O=n("nii4"),T=n("/1cH"),F=n("bTqV"),B=n("NFeN"),M=n("FKr1"),P=n("bSwM"),D=n("RQSP"),k=n("d5eY"),_=["keyInput"],L=["funcBodyEdit"],j=["postFuncBodyEdit"];function N(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",19),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).clearKey()}),a["\u0275\u0275elementStart"](1,"mat-icon",20),a["\u0275\u0275text"](2,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}}function R(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",21),a["\u0275\u0275element"](1,"span",22),a["\u0275\u0275pipe"](2,"highlight"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("innerHTML",a["\u0275\u0275pipeBind2"](2,2,n,i.keySearchText),a["\u0275\u0275sanitizeHtml"])}}function U(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-form-field",12),a["\u0275\u0275elementStart"](1,"mat-label"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"input",13,14),a["\u0275\u0275pipe"](6,"translate"),a["\u0275\u0275template"](7,N,3,0,"button",15),a["\u0275\u0275elementStart"](8,"mat-autocomplete",16,17),a["\u0275\u0275template"](10,R,3,5,"mat-option",18),a["\u0275\u0275pipe"](11,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275reference"](9),i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](3,5,"entity.key")),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](6,7,"entity.key-name")),a["\u0275\u0275property"]("matAutocomplete",n),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",i.dataKeyFormGroup.get("name").value&&!i.dataKeyFormGroup.get("name").disabled),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",a["\u0275\u0275pipeBind1"](11,9,i.filteredKeys))}}function V(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",4),a["\u0275\u0275elementStart"](1,"mat-form-field",23),a["\u0275\u0275elementStart"](2,"mat-label",6),a["\u0275\u0275text"](3,"datakey.units"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"input",24),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"mat-form-field",23),a["\u0275\u0275elementStart"](6,"mat-label",6),a["\u0275\u0275text"](7,"datakey.decimals"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](8,"input",25),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]())}var Q=function(){return["time","prevValue"]},G=function(){return[1,1]},H=function(){return[1,"1"]},K=function(e,t){return[e,t]};function q(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"section",26),a["\u0275\u0275elementStart"](1,"span",6),a["\u0275\u0275text"](2,"datakey.data-generation-func"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"br"),a["\u0275\u0275element"](4,"tb-js-func",27,28),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("functionArgs",a["\u0275\u0275pureFunction0"](2,Q))("validationArgs",a["\u0275\u0275pureFunction2"](5,K,a["\u0275\u0275pureFunction0"](3,G),a["\u0275\u0275pureFunction0"](4,H))))}var z=function(){return["time","value","prevValue","timePrev","prevOrigValue"]},W=function(){return[1,1,1,1,1]},X=function(){return[1,"1","1",1,"1"]};function $(e,t){1&e&&a["\u0275\u0275element"](0,"tb-js-func",32,33),2&e&&a["\u0275\u0275property"]("functionArgs",a["\u0275\u0275pureFunction0"](2,z))("validationArgs",a["\u0275\u0275pureFunction2"](5,K,a["\u0275\u0275pureFunction0"](3,W),a["\u0275\u0275pureFunction0"](4,X)))}function J(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"label",34),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275element"](3,"br"),a["\u0275\u0275text"](4),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275element"](6,"br"),a["\u0275\u0275text"](7),a["\u0275\u0275pipe"](8,"translate"),a["\u0275\u0275element"](9,"br"),a["\u0275\u0275text"](10),a["\u0275\u0275pipe"](11,"translate"),a["\u0275\u0275element"](12,"br"),a["\u0275\u0275text"](13),a["\u0275\u0275pipe"](14,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" time - ",a["\u0275\u0275pipeBind1"](2,5,"datakey.time-description"),""),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" value - ",a["\u0275\u0275pipeBind1"](5,7,"datakey.value-description"),""),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" prevValue - ",a["\u0275\u0275pipeBind1"](8,9,"datakey.prev-value-description"),""),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" timePrev - ",a["\u0275\u0275pipeBind1"](11,11,"datakey.time-prev-description"),""),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" prevOrigValue - ",a["\u0275\u0275pipeBind1"](14,13,"datakey.prev-orig-value-description")," "))}function Y(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"section",26),a["\u0275\u0275elementStart"](1,"mat-checkbox",29),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](4,$,2,8,"tb-js-func",30),a["\u0275\u0275template"](5,J,15,15,"label",31),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](3,3,"datakey.use-data-post-processing-func")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",n.dataKeyFormGroup.get("usePostProcessing").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.dataKeyFormGroup.get("usePostProcessing").value)}}function Z(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-tab",1),a["\u0275\u0275pipe"](1,"translate"),a["\u0275\u0275elementStart"](2,"div",35),a["\u0275\u0275element"](3,"tb-json-form",36),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](1,2,"datakey.advanced")),a["\u0275\u0275property"]("formGroup",n.dataKeySettingsFormGroup)}}var ee=function(e){return{"tb-headless":e}},te=function(e){function t(t,n,i,a,r,o){var s=e.call(this,t)||this;return s.store=t,s.utils=n,s.entityService=i,s.dialog=a,s.translate=r,s.fb=o,s.dataKeyTypes=c.h,s.showPostProcessing=!0,s.displayAdvanced=!1,s.propagateChange=null,s.latestKeySearchResult=null,s.fetchObservable$=null,s.keySearchText="",s}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this.alarmKeys=[];for(var t=0,n=Object.keys(g.e);t<n.length;t++){var i=n[t];this.alarmKeys.push({name:i,type:c.h.alarm})}this.dataKeySettingsSchema&&this.dataKeySettingsSchema.schema&&(this.displayAdvanced=!0,this.dataKeySettingsData={schema:this.dataKeySettingsSchema.schema,form:this.dataKeySettingsSchema.form||["*"]},this.dataKeySettingsFormGroup=this.fb.group({settings:[null,[]]}),this.dataKeySettingsFormGroup.valueChanges.subscribe(function(){e.updateModel()})),this.dataKeyFormGroup=this.fb.group({name:[null,[]],label:[null,[o.Validators.required]],color:[null,[o.Validators.required]],units:[null,[]],decimals:[null,[o.Validators.min(0),o.Validators.max(15),o.Validators.pattern(/^\d*$/)]],funcBody:[null,[]],usePostProcessing:[null,[]],postFuncBody:[null,[]]}),this.dataKeyFormGroup.valueChanges.subscribe(function(){e.updateModel()}),this.dataKeyFormGroup.get("usePostProcessing").valueChanges.subscribe(function(t){var n=e.dataKeyFormGroup.get("postFuncBody").value;!t||n&&n.length?!t&&n&&n.length&&e.dataKeyFormGroup.get("postFuncBody").patchValue(null):e.dataKeyFormGroup.get("postFuncBody").patchValue("return value;")}),this.filteredKeys=this.dataKeyFormGroup.get("name").valueChanges.pipe(Object(u.a)(function(e){return e||""}),Object(p.b)(function(t){return e.fetchKeys(t)}))},t.prototype.registerOnChange=function(e){this.propagateChange=e},t.prototype.registerOnTouched=function(e){},t.prototype.setDisabledState=function(e){},t.prototype.writeValue=function(e){this.modelValue=e,this.modelValue.postFuncBody&&this.modelValue.postFuncBody.length&&(this.modelValue.usePostProcessing=!0),this.dataKeyFormGroup.patchValue(this.modelValue,{emitEvent:!1}),this.dataKeyFormGroup.get("name").setValidators(this.modelValue.type!==c.h.function&&this.modelValue.type!==c.h.count?[o.Validators.required]:[]),this.modelValue.type===c.h.count?this.dataKeyFormGroup.get("name").disable({emitEvent:!1}):this.dataKeyFormGroup.get("name").enable({emitEvent:!1}),this.dataKeyFormGroup.get("name").updateValueAndValidity({emitEvent:!1}),this.displayAdvanced&&(this.dataKeySettingsData.model=this.modelValue.settings,this.dataKeySettingsFormGroup.patchValue({settings:this.dataKeySettingsData},{emitEvent:!1}))},t.prototype.updateModel=function(){this.modelValue=Object(i.a)(Object(i.a)({},this.modelValue),this.dataKeyFormGroup.value),this.displayAdvanced&&(this.modelValue.settings=this.dataKeySettingsFormGroup.get("settings").value.model),this.modelValue.name&&(this.modelValue.name=this.modelValue.name.trim()),this.propagateChange(this.modelValue)},t.prototype.clearKey=function(){var e=this;this.dataKeyFormGroup.get("name").patchValue(null,{emitEvent:!0}),setTimeout(function(){e.keyInput.nativeElement.blur(),e.keyInput.nativeElement.focus()},0)},t.prototype.fetchKeys=function(e){var t=this;if(this.keySearchText!==e||null===this.latestKeySearchResult){this.keySearchText=e;var n=this.createKeyFilter(this.keySearchText);return this.getKeys().pipe(Object(u.a)(function(e){return e.filter(n)}),Object(m.a)(function(e){return t.latestKeySearchResult=e}))}return Object(d.a)(this.latestKeySearchResult)},t.prototype.getKeys=function(){if(null===this.fetchObservable$){var e=void 0;if(this.modelValue.type===c.h.alarm)e=Object(d.a)(this.alarmKeys);else if(this.entityAliasId){var t=[this.modelValue.type];e=this.callbacks.fetchEntityKeys(this.entityAliasId,t)}else e=Object(d.a)([]);this.fetchObservable$=e.pipe(Object(u.a)(function(e){return e.map(function(e){return e.name})}),Object(f.a)(1),Object(h.a)())}return this.fetchObservable$},t.prototype.createKeyFilter=function(e){var t=e.toLowerCase();return function(e){return e.toLowerCase().startsWith(t)}},t.prototype.validateOnSubmit=function(){this.modelValue.type===c.h.function?this.funcBodyEdit.validateOnSubmit():this.modelValue.type!==c.h.timeseries&&this.modelValue.type!==c.h.attribute||!this.dataKeyFormGroup.get("usePostProcessing").value||this.postFuncBodyEdit.validateOnSubmit()},t.prototype.validate=function(e){return this.dataKeyFormGroup.valid?this.displayAdvanced&&!this.dataKeySettingsFormGroup.valid?{dataKeySettings:{valid:!1}}:null:{dataKey:{valid:!1}}},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](b.Store),a["\u0275\u0275directiveInject"](s.a),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](y.MatDialog),a["\u0275\u0275directiveInject"](v.TranslateService),a["\u0275\u0275directiveInject"](o.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-data-key-config"]],viewQuery:function(e,t){if(1&e&&(a["\u0275\u0275viewQuery"](_,1),a["\u0275\u0275viewQuery"](L,1),a["\u0275\u0275viewQuery"](j,1)),2&e){var n=void 0;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.keyInput=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.funcBodyEdit=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.postFuncBodyEdit=n.first)}},inputs:{entityAliasId:"entityAliasId",callbacks:"callbacks",dataKeySettingsSchema:"dataKeySettingsSchema",showPostProcessing:"showPostProcessing"},features:[a["\u0275\u0275ProvidersFeature"]([{provide:o.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)(function(){return t}),multi:!0},{provide:o.NG_VALIDATORS,useExisting:Object(a.forwardRef)(function(){return t}),multi:!0}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:16,vars:15,consts:[[1,"tb-datakey-config",3,"ngClass"],[3,"formGroup","label"],["fxLayout","column",1,"mat-padding","settings"],["class","mat-block",4,"ngIf"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","start center","fxLayoutAlign.xs","","fxLayoutGap","8px"],["fxFlex","",1,"mat-block"],["translate",""],["matInput","","formControlName","label","required",""],["fxFlex","","required","","icon","format_color_fill","openOnInput","","formControlName","color",3,"label"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","start center","fxLayoutAlign.xs","","fxLayoutGap","8px",4,"ngIf"],["fxLayout","column",4,"ngIf"],[3,"formGroup","label",4,"ngIf"],[1,"mat-block"],["matInput","","type","text","formControlName","name","required","",3,"placeholder","matAutocomplete"],["keyInput",""],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"tb-autocomplete"],["keyAutocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"material-icons"],[3,"value"],[3,"innerHTML"],["fxFlex",""],["matInput","","formControlName","units"],["matInput","","formControlName","decimals","type","number","min","0","max","15","step","1"],["fxLayout","column"],["resultType","any","formControlName","funcBody",3,"functionArgs","validationArgs"],["funcBodyEdit",""],["formControlName","usePostProcessing"],["resultType","any","formControlName","postFuncBody",3,"functionArgs","validationArgs",4,"ngIf"],["class","tb-title","style","margin-left: 15px;",4,"ngIf"],["resultType","any","formControlName","postFuncBody",3,"functionArgs","validationArgs"],["postFuncBodyEdit",""],[1,"tb-title",2,"margin-left","15px"],["fxLayout","column",1,"mat-padding"],["formControlName","settings"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-tab-group",0),a["\u0275\u0275elementStart"](1,"mat-tab",1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementStart"](3,"div",2),a["\u0275\u0275template"](4,U,12,11,"mat-form-field",3),a["\u0275\u0275elementStart"](5,"div",4),a["\u0275\u0275elementStart"](6,"mat-form-field",5),a["\u0275\u0275elementStart"](7,"mat-label",6),a["\u0275\u0275text"](8,"datakey.label"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](9,"input",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](10,"tb-color-input",8),a["\u0275\u0275pipe"](11,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](12,V,9,0,"div",9),a["\u0275\u0275template"](13,q,6,8,"section",10),a["\u0275\u0275template"](14,Y,6,5,"section",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](15,Z,4,4,"mat-tab",11),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](13,ee,!t.displayAdvanced)),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](2,9,"datakey.settings")),a["\u0275\u0275property"]("formGroup",t.dataKeyFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",t.modelValue.type!==t.dataKeyTypes.function),a["\u0275\u0275advance"](6),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](11,11,"datakey.color")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",t.modelValue.type!==t.dataKeyTypes.alarm),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.modelValue.type===t.dataKeyTypes.function),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",(t.modelValue.type===t.dataKeyTypes.timeseries||t.modelValue.type===t.dataKeyTypes.attribute||t.modelValue.type===t.dataKeyTypes.count)&&t.showPostProcessing),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.displayAdvanced))},directives:[C.MatTabGroup,x.NgClass,w.b,C.MatTab,o.NgControlStatusGroup,o.FormGroupDirective,S.f,x.NgIf,S.e,S.g,E.MatFormField,S.b,E.MatLabel,v.TranslateDirective,I.MatInput,o.DefaultValueAccessor,o.NgControlStatus,o.FormControlName,o.RequiredValidator,O.a,T.MatAutocompleteTrigger,T.MatAutocomplete,x.NgForOf,F.MatButton,E.MatSuffix,B.MatIcon,M.MatOption,o.NumberValueAccessor,A.a,P.MatCheckbox,D.a],pipes:[v.TranslatePipe,x.AsyncPipe,k.a],styles:["[_nghost-%COMP%]   .tb-datakey-config[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .tb-datakey-config[_ngcontent-%COMP%]   .settings[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child{padding-top:12px}[_nghost-%COMP%]   .tb-datakey-config[_ngcontent-%COMP%]   .settings[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(n){padding-right:12px;padding-left:12px}[_nghost-%COMP%]     .tb-datakey-config .mat-tab-body.mat-tab-body-active .mat-tab-body-content>div{height:calc(65vh - 50px);overflow:initial}@media screen and (max-width:599px){[_nghost-%COMP%]     .tb-datakey-config .mat-tab-body.mat-tab-body-active .mat-tab-body-content>div{height:500px}}"]}),t}(r.a);0,void 0},llUh:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return p});var i=n("mrSG"),a=n("0IaG"),r=n("fXoL"),o=n("l7P3"),s=n("tyNb"),l=n("RxGS"),c=n("3Pt+"),d=n("vW25"),u=new r.InjectionToken("ConfigDialogData"),p=function(e){function t(t,n,i,a,r){var o=e.call(this,t)||this;return o.store=t,o.router=n,o.dialogRef=i,o.fb=a,o.data=r,o.validators=c.Validators,o.data.controller(o),o}return Object(i.d)(t,e),t.\u0275fac=function(e){r["\u0275\u0275invalidFactory"]()},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,features:[r["\u0275\u0275InheritDefinitionFeature"]]}),t=Object(i.c)([Object(i.g)(0,Object(d.a)(o.Store)),Object(i.g)(1,Object(d.a)(s.Router)),Object(i.g)(2,Object(d.a)(a.MatDialogRef)),Object(i.g)(3,Object(d.a)(c.FormBuilder)),Object(i.g)(4,Object(d.a)(u)),Object(i.f)("design:paramtypes",[o.Store,s.Router,a.MatDialogRef,c.FormBuilder,Object])],t)}(l.a);0,void 0},llVA:function(e,t,n){"use strict";n.d(t,"a",function(){return _});var i=n("fXoL"),a=n("3Pt+"),r=n("gGt+"),o=n("g+M/"),s=n("XNiG"),l=n("vkgz"),c=n("5+tZ"),d=n("1G5W"),u=n("XiUz"),p=n("kmnG"),m=n("d3UM"),f=n("ofXK"),h=n("qFsG"),g=n("Qu3c"),A=n("FKr1"),b=n("ihCf"),y=n("sYmb");function v(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",11),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.credentialTypeLwM2MNamesMap.get(a.securityConfigLwM2MType[n])," ")}}function C(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.server-host-required")," "))}function x(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.server-port-required")," "))}function w(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.server-port-pattern")," "))}function S(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.server-port-range")," "))}function E(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.short-id-required")," "))}function I(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.short-id-pattern")," "))}function O(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.short-id-range")," "))}function T(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.client-hold-off-time-required")," "))}function F(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.client-hold-off-time-pattern")," "))}function B(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.account-after-timeout-required")," "))}function M(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.account-after-timeout-pattern")," "))}function P(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.server-public-key-required")," "))}function D(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.lwm2m.server-public-key-pattern")," "))}function k(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"mat-form-field",12),i["\u0275\u0275elementStart"](2,"mat-label"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](5,"textarea",13),i["\u0275\u0275template"](6,P,3,3,"mat-error",6),i["\u0275\u0275template"](7,D,3,3,"mat-error",6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,3,"device-profile.lwm2m.server-public-key")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",n.serverFormGroup.get("serverPublicKey").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.serverFormGroup.get("serverPublicKey").hasError("pattern"))}}var _=function(){function e(e,t){var n=this;this.fb=e,this.deviceProfileService=t,this.disabled=!1,this.destroy$=new s.b,this.isDataLoadedIntoCache=!1,this.securityConfigLwM2MType=r.H,this.securityConfigLwM2MTypes=Object.keys(r.H),this.credentialTypeLwM2MNamesMap=r.I,this.currentSecurityMode=null,this.isBootstrapServer=!1,this.propagateChange=function(e){},this.propagateChangeState=function(e){void 0!==e&&n.propagateChange(e)}}return e.prototype.ngOnInit=function(){var e=this;this.serverFormGroup=this.fb.group({host:["",a.Validators.required],port:[this.isBootstrapServer?r.n:r.o,[a.Validators.required,a.Validators.min(1),a.Validators.max(65535),a.Validators.pattern("[0-9]*")]],securityMode:[r.H.NO_SEC],serverPublicKey:[""],clientHoldOffTime:["",[a.Validators.required,a.Validators.min(0),a.Validators.pattern("[0-9]*")]],serverId:["",[a.Validators.required,a.Validators.min(1),a.Validators.max(65534),a.Validators.pattern("[0-9]*")]],bootstrapServerAccountTimeout:["",[a.Validators.required,a.Validators.min(0),a.Validators.pattern("[0-9]*")]]}),this.serverFormGroup.get("securityMode").valueChanges.pipe(Object(l.a)(function(t){return e.updateValidate(t)}),Object(c.b)(function(t){return e.getLwm2mBootstrapSecurityInfo(t)}),Object(d.a)(this.destroy$)).subscribe(function(t){e.serverFormGroup.patchValue(t,{emitEvent:!1})}),this.serverFormGroup.valueChanges.pipe(Object(d.a)(this.destroy$)).subscribe(function(t){e.propagateChangeState(t)})},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.prototype.writeValue=function(e){var t=this;e&&(this.serverFormGroup.patchValue(e,{emitEvent:!1}),this.updateValidate(e.securityMode)),this.isDataLoadedIntoCache||this.getLwm2mBootstrapSecurityInfo().subscribe(function(n){e||t.serverFormGroup.patchValue(n)})},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.setDisabledState=function(e){this.disabled=e,e?this.serverFormGroup.disable({emitEvent:!1}):this.serverFormGroup.enable({emitEvent:!1})},e.prototype.registerOnTouched=function(e){},e.prototype.updateValidate=function(e){switch(e){case r.H.NO_SEC:case r.H.PSK:this.clearValidators();break;case r.H.RPK:case r.H.X509:this.setValidators()}this.serverFormGroup.get("serverPublicKey").updateValueAndValidity({emitEvent:!1})},e.prototype.clearValidators=function(){this.serverFormGroup.get("serverPublicKey").clearValidators()},e.prototype.setValidators=function(){this.serverFormGroup.get("serverPublicKey").setValidators([a.Validators.required,a.Validators.pattern(r.v)])},e.prototype.getLwm2mBootstrapSecurityInfo=function(e){var t=this;return void 0===e&&(e=r.H.NO_SEC),this.deviceProfileService.getLwm2mBootstrapSecurityInfoBySecurityType(this.isBootstrapServer,e).pipe(Object(l.a)(function(){return t.isDataLoadedIntoCache=!0}))},e.prototype.validate=function(){return this.serverFormGroup.valid?null:{serverFormGroup:!0}},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.FormBuilder),i["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-profile-lwm2m-device-config-server"]],inputs:{isBootstrapServer:"isBootstrapServer"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:48,vars:38,consts:[[3,"formGroup"],["fxLayout","row","fxLayout.xs","column","fxLayoutGap","8px","fxLayoutGap.xs","0px"],["fxFlex",""],["formControlName","securityMode"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","host","required",""],[4,"ngIf"],["matInput","","type","number","formControlName","port","required","","min","0","max","65535"],["matInput","","type","number","min","1","max","65534","formControlName","serverId","required",""],["matInput","","type","number","formControlName","clientHoldOffTime","required","","min","0","matTooltipPosition","above",3,"matTooltip"],["matInput","","type","number","formControlName","bootstrapServerAccountTimeout","required","","min","0","matTooltipPosition","above",3,"matTooltip"],[3,"value"],[1,"mat-block"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cols","1","required","","formControlName","serverPublicKey"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"section",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"mat-form-field",2),i["\u0275\u0275elementStart"](3,"mat-label"),i["\u0275\u0275text"](4),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"mat-select",3),i["\u0275\u0275template"](7,v,2,2,"mat-option",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"mat-form-field",2),i["\u0275\u0275elementStart"](9,"mat-label"),i["\u0275\u0275text"](10),i["\u0275\u0275pipe"](11,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](12,"input",5),i["\u0275\u0275template"](13,C,3,3,"mat-error",6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"mat-form-field",2),i["\u0275\u0275elementStart"](15,"mat-label"),i["\u0275\u0275text"](16),i["\u0275\u0275pipe"](17,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](18,"input",7),i["\u0275\u0275template"](19,x,3,3,"mat-error",6),i["\u0275\u0275template"](20,w,3,3,"mat-error",6),i["\u0275\u0275template"](21,S,3,3,"mat-error",6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"div",1),i["\u0275\u0275elementStart"](23,"mat-form-field",2),i["\u0275\u0275elementStart"](24,"mat-label"),i["\u0275\u0275text"](25),i["\u0275\u0275pipe"](26,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](27,"input",8),i["\u0275\u0275template"](28,E,3,3,"mat-error",6),i["\u0275\u0275template"](29,I,3,3,"mat-error",6),i["\u0275\u0275template"](30,O,3,3,"mat-error",6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](31,"mat-form-field",2),i["\u0275\u0275elementStart"](32,"mat-label"),i["\u0275\u0275text"](33),i["\u0275\u0275pipe"](34,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](35,"input",9),i["\u0275\u0275pipe"](36,"translate"),i["\u0275\u0275template"](37,T,3,3,"mat-error",6),i["\u0275\u0275template"](38,F,3,3,"mat-error",6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](39,"mat-form-field",2),i["\u0275\u0275elementStart"](40,"mat-label"),i["\u0275\u0275text"](41),i["\u0275\u0275pipe"](42,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](43,"input",10),i["\u0275\u0275pipe"](44,"translate"),i["\u0275\u0275template"](45,B,3,3,"mat-error",6),i["\u0275\u0275template"](46,M,3,3,"mat-error",6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](47,k,8,5,"div",6),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.serverFormGroup),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](5,22,"device-profile.lwm2m.mode")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",t.securityConfigLwM2MTypes),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](11,24,"device-profile.lwm2m.server-host")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",t.serverFormGroup.get("host").hasError("required")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](17,26,"device-profile.lwm2m.server-port")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",t.serverFormGroup.get("port").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.serverFormGroup.get("port").hasError("pattern")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.serverFormGroup.get("port").hasError("min")||t.serverFormGroup.get("port").hasError("max")),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](26,28,"device-profile.lwm2m.short-id")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",t.serverFormGroup.get("serverId").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.serverFormGroup.get("serverId").hasError("pattern")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.serverFormGroup.get("serverId").hasError("min")||t.serverFormGroup.get("serverId").hasError("max")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](34,30,"device-profile.lwm2m.client-hold-off-time")),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](36,32,"device-profile.lwm2m.client-hold-off-time-tooltip")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.serverFormGroup.get("clientHoldOffTime").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.serverFormGroup.get("clientHoldOffTime").hasError("min")||t.serverFormGroup.get("clientHoldOffTime").hasError("pattern")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](42,34,"device-profile.lwm2m.account-after-timeout")),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](44,36,"device-profile.lwm2m.account-after-timeout-tooltip")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.serverFormGroup.get("bootstrapServerAccountTimeout").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.serverFormGroup.get("bootstrapServerAccountTimeout").hasError("min")||t.serverFormGroup.get("bootstrapServerAccountTimeout").hasError("pattern")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.serverFormGroup.get("securityMode").value===t.securityConfigLwM2MType.RPK||t.serverFormGroup.get("securityMode").value===t.securityConfigLwM2MType.X509))},directives:[a.NgControlStatusGroup,a.FormGroupDirective,u.f,u.g,p.MatFormField,u.b,p.MatLabel,m.MatSelect,a.NgControlStatus,a.FormControlName,f.NgForOf,h.MatInput,a.DefaultValueAccessor,a.RequiredValidator,f.NgIf,a.NumberValueAccessor,g.MatTooltip,A.MatOption,p.MatError,b.b],pipes:[y.TranslatePipe],encapsulation:2}),e}();0,void 0},m4rf:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return B});var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=(n("0G7Z"),n("OiFK")),s=n("//Q6"),l=n("0lYY"),c=n("U3y+"),d=n("HR/i"),u=n("l7P3"),p=n("XiUz"),m=n("ofXK"),f=n("znSr"),h=n("1jcm"),g=n("3Pt+"),A=["switch"],b=["switchContainer"],y=["matSlideToggle"],v=["onoffContainer"],C=["onLabel"],x=["offLabel"],w=["switchTitleContainer"],S=["switchTitle"],E=["textMeasure"],I=["switchErrorContainer"],O=["switchError"],T=function(e){return{pointerEvents:e}},F=function(e){return{background:e}},B=function(t){function n(e,n){var i=t.call(this,n)||this;return i.utils=e,i.store=n,i.showTitle=!1,i.value=!1,i.error="",i.title="",i.showOnOffLabels=!1,i}return Object(i.d)(n,t),n.prototype.ngOnInit=function(){var t=this;this.switchElement=e(this.switchElementRef.nativeElement),this.switchContainer=e(this.switchContainerRef.nativeElement),this.matSlideToggle=e(this.matSlideToggleRef._elementRef.nativeElement),this.onoffContainer=e(this.onoffContainerRef.nativeElement),this.onLabel=e(this.onLabelRef.nativeElement),this.offLabel=e(this.offLabelRef.nativeElement),this.switchTitleContainer=e(this.switchTitleContainerRef.nativeElement),this.switchTitle=e(this.switchTitleRef.nativeElement),this.textMeasure=e(this.textMeasureRef.nativeElement),this.switchErrorContainer=e(this.switchErrorContainerRef.nativeElement),this.switchError=e(this.switchErrorRef.nativeElement),this.switchResize$=new d.a(function(){t.resize()}),this.switchResize$.observe(this.switchContainerRef.nativeElement),this.init()},n.prototype.ngOnDestroy=function(){this.valueSubscription&&this.ctx.subscriptionApi.removeSubscription(this.valueSubscription.id),this.switchResize$&&this.switchResize$.disconnect(),this.ctx.controlApi.completedCommand()},n.prototype.init=function(){var e=this.ctx.settings;this.title=Object(s.n)(e.title)?e.title:"",this.showTitle=!(!this.title||!this.title.length),this.showOnOffLabels=!Object(s.n)(e.showOnOffLabels)||e.showOnOffLabels;var t=!!Object(s.n)(e.initialValue)&&e.initialValue;this.setValue(t);var n=this.ctx.defaultSubscription.rpcEnabled;if(this.isSimulated=this.utils.widgetEditMode,this.requestTimeout=500,e.requestTimeout&&(this.requestTimeout=e.requestTimeout),this.requestPersistent=!1,e.requestPersistent&&(this.requestPersistent=e.requestPersistent),this.persistentPollingInterval=5e3,e.persistentPollingInterval&&(this.persistentPollingInterval=e.persistentPollingInterval),this.retrieveValueMethod="rpc",e.retrieveValueMethod&&e.retrieveValueMethod.length&&(this.retrieveValueMethod=e.retrieveValueMethod),this.valueKey="value",e.valueKey&&e.valueKey.length&&(this.valueKey=e.valueKey),this.parseValueFunction=function(e){return!!e},e.parseValueFunction&&e.parseValueFunction.length)try{this.parseValueFunction=new Function("data",e.parseValueFunction)}catch(i){this.parseValueFunction=function(e){return!!e}}if(this.convertValueFunction=function(e){return e},e.convertValueFunction&&e.convertValueFunction.length)try{this.convertValueFunction=new Function("value",e.convertValueFunction)}catch(i){this.convertValueFunction=function(e){return e}}this.getValueMethod="getValue",e.getValueMethod&&e.getValueMethod.length&&(this.getValueMethod=e.getValueMethod),this.setValueMethod="setValue",e.setValueMethod&&e.setValueMethod.length&&(this.setValueMethod=e.setValueMethod),n?this.isSimulated||("rpc"===this.retrieveValueMethod?this.rpcRequestValue():"attribute"!==this.retrieveValueMethod&&"timeseries"!==this.retrieveValueMethod||this.subscribeForValue()):this.onError("Target device is not set!")},n.prototype.resize=function(){var e=this.switchContainer.width(),t=this.switchContainer.height();this.showOnOffLabels&&(t=2*t/3),e/t>2.7893?e=2.7893*t:t=e/2.7893,this.switchElement.css({width:e,height:t}),this.matSlideToggle.css({width:e,height:t,minWidth:e}),this.showTitle&&this.setFontSize(this.switchTitle,this.title,2*this.switchTitleContainer.height()/3,this.switchTitleContainer.width()),this.showOnOffLabels&&(this.onoffContainer.css({width:e,height:this.switchContainer.height()/3}),this.setFontSize(this.onLabel,"OFF",this.onoffContainer.height(),this.onoffContainer.width()/2),this.setFontSize(this.offLabel,"OFF",this.onoffContainer.height(),this.onoffContainer.width()/2)),this.setFontSize(this.switchError,this.error,this.switchErrorContainer.height(),this.switchErrorContainer.width())},n.prototype.setFontSize=function(e,t,n,i){for(var a=this.measureTextWidth(t,n);a>i;)n--,a=this.measureTextWidth(t,n);e.css({fontSize:n+"px",lineHeight:n+"px"})},n.prototype.measureTextWidth=function(e,t){return this.textMeasure.css({fontSize:t+"px",lineHeight:t+"px"}),this.textMeasure.text(e),this.textMeasure.width()},n.prototype.onError=function(e){this.error=e,this.setFontSize(this.switchError,this.error,this.switchErrorContainer.height(),this.switchErrorContainer.width()),this.ctx.detectChanges()},n.prototype.setValue=function(e){this.value=!!e},n.prototype.onValue=function(){this.rpcUpdateValue(this.value)},n.prototype.rpcRequestValue=function(){var e=this;this.error="",this.ctx.controlApi.sendTwoWayCommand(this.getValueMethod,null,this.requestTimeout,this.requestPersistent,this.persistentPollingInterval).subscribe(function(t){e.setValue(e.parseValueFunction(t)),e.ctx.detectChanges()},function(){var t=e.ctx.defaultSubscription.rpcErrorText;e.onError(t)})},n.prototype.rpcUpdateValue=function(e){var t=this;if(this.executingUpdateValue)return this.scheduledValue=e,void 0;this.scheduledValue=null,this.rpcValue=e,this.executingUpdateValue=!0,this.error="",this.ctx.controlApi.sendOneWayCommand(this.setValueMethod,this.convertValueFunction(e),this.requestTimeout,this.requestPersistent,this.persistentPollingInterval).subscribe(function(){t.executingUpdateValue=!1,null!=t.scheduledValue&&t.scheduledValue!==t.rpcValue&&t.rpcUpdateValue(t.scheduledValue)},function(){t.executingUpdateValue=!1;var e=t.ctx.defaultSubscription.rpcErrorText;t.onError(e)})},n.prototype.subscribeForValue=function(){var e=this,t=[{type:l.a.entity,entityType:c.b.DEVICE,entityId:this.ctx.defaultSubscription.targetDeviceId}];"attribute"===this.retrieveValueMethod?t[0].attributes=[{name:this.valueKey}]:t[0].timeseries=[{name:this.valueKey}];var n={callbacks:{onDataUpdated:function(t,n){return e.ctx.ngZone.run(function(){e.onDataUpdated(t,n)})},onDataUpdateError:function(t,n){return e.ctx.ngZone.run(function(){e.onDataUpdateError(t,n)})}}};this.ctx.subscriptionApi.createSubscriptionFromInfo(l.m.latest,t,n,!1,!0).subscribe(function(t){e.valueSubscription=t})},n.prototype.onDataUpdated=function(e,t){var n=!1,i=e.data;if(i.length){var a=i[0];if(a&&a.data&&a.data[0]){var r=a.data[0][1];if(Object(s.n)(r)){var o=null;try{o=this.parseValueFunction(JSON.parse(r))}catch(l){}n=!!o}}}this.setValue(n),t&&this.ctx.detectChanges()},n.prototype.onDataUpdateError=function(e,t){var n=this.utils.parseException(t),i=n.name;n.message&&(i+=": "+n.message),this.onError(i)},n.\u0275fac=function(e){return new(e||n)(a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](u.Store))},n.\u0275cmp=a["\u0275\u0275defineComponent"]({type:n,selectors:[["tb-switch"]],viewQuery:function(e,t){if(1&e&&(a["\u0275\u0275viewQuery"](A,3),a["\u0275\u0275viewQuery"](b,3),a["\u0275\u0275viewQuery"](y,3),a["\u0275\u0275viewQuery"](v,3),a["\u0275\u0275viewQuery"](C,3),a["\u0275\u0275viewQuery"](x,3),a["\u0275\u0275viewQuery"](w,3),a["\u0275\u0275viewQuery"](S,3),a["\u0275\u0275viewQuery"](E,3),a["\u0275\u0275viewQuery"](I,3),a["\u0275\u0275viewQuery"](O,3)),2&e){var n=void 0;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.switchElementRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.switchContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.matSlideToggleRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.onoffContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.onLabelRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.offLabelRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.switchTitleContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.switchTitleRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.textMeasureRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.switchErrorContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.switchErrorRef=n.first)}},inputs:{ctx:"ctx"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:29,vars:16,consts:[["fxLayout","column",1,"tb-switch",3,"ngStyle"],["fxLayout","row","fxLayoutAlign","center center",1,"error-container",3,"ngStyle"],["switchErrorContainer",""],[1,"switch-error"],["switchError",""],["fxFlex","30","fxLayout","row","fxLayoutAlign","center center",1,"title-container",3,"fxShow"],["switchTitleContainer",""],[1,"switch-title"],["switchTitle",""],["id","switch-container","fxLayout","column","fxLayoutAlign","center center",3,"fxFlex"],["switchContainer",""],[1,"switch"],["switch",""],[3,"ngModel","ngModelChange","change"],["matSlideToggle",""],["fxLayout","row","fxLayoutAlign","center start",1,"onoff-container",3,"fxShow"],["onoffContainer",""],["fxFlex","",1,"off-label",2,"text-align","center",3,"fxShow"],["offLabel",""],["fxFlex","",3,"fxShow"],["fxFlex","",1,"on-label",2,"text-align","center",3,"fxShow"],["onLabel",""],["id","text-measure"],["textMeasure",""]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1,2),a["\u0275\u0275elementStart"](3,"span",3,4),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",5,6),a["\u0275\u0275elementStart"](8,"span",7,8),a["\u0275\u0275text"](10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"div",9,10),a["\u0275\u0275elementStart"](13,"div",11,12),a["\u0275\u0275elementStart"](15,"mat-slide-toggle",13,14),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.value=e})("change",function(){return t.onValue()}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"div",15,16),a["\u0275\u0275elementStart"](19,"span",17,18),a["\u0275\u0275text"](21,"OFF"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](22,"span",19),a["\u0275\u0275elementStart"](23,"span",20,21),a["\u0275\u0275text"](25,"ON"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](26,"span",19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](27,"div",22,23),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](12,T,t.ctx.isEdit?"none":"all")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](14,F,null!=t.error&&t.error.length?"rgba(255,255,255,0.25)":"none")),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](t.error),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",t.showTitle),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](t.title),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("fxFlex",t.showTitle?70:100),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngModel",t.value),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",t.showOnOffLabels),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",!t.value),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("fxShow",t.value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",t.value),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("fxShow",!t.value))},directives:[p.f,m.NgStyle,f.e,p.e,p.b,f.d,h.MatSlideToggle,g.NgControlStatus,g.NgModel],styles:["[_nghost-%COMP%]   .tb-switch[_ngcontent-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .tb-switch[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]{position:absolute;top:1%;right:0;left:0;z-index:4;height:14px}[_nghost-%COMP%]   .tb-switch[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   .switch-error[_ngcontent-%COMP%]{color:#ff3315;white-space:nowrap}[_nghost-%COMP%]   .tb-switch[_ngcontent-%COMP%]   .onoff-container[_ngcontent-%COMP%]{height:100%;font-weight:500;color:#757575;white-space:nowrap}[_nghost-%COMP%]   .tb-switch[_ngcontent-%COMP%]   .onoff-container[_ngcontent-%COMP%]   .off-label[_ngcontent-%COMP%]{color:#b7b5b5}[_nghost-%COMP%]   .tb-switch[_ngcontent-%COMP%]   .onoff-container[_ngcontent-%COMP%]   .on-label[_ngcontent-%COMP%]{color:#ff7e57;text-shadow:#ff6e4a 1px 1px 10px,#ffd1c3 1px 1px 10px}[_nghost-%COMP%]   .tb-switch[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]   .switch-title[_ngcontent-%COMP%]{font-weight:500;color:#757575;white-space:nowrap}[_nghost-%COMP%]   .tb-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]{padding-right:10px;padding-left:10px}[_nghost-%COMP%]   .tb-switch[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .tb-switch[_ngcontent-%COMP%]   #text-measure[_ngcontent-%COMP%]{position:absolute;width:auto;height:auto;white-space:nowrap;visibility:hidden}[_nghost-%COMP%]     .tb-switch .switch mat-slide-toggle{position:absolute;top:0;right:0;bottom:0;left:0;margin:0}[_nghost-%COMP%]     .tb-switch .switch mat-slide-toggle .mat-slide-toggle-bar{top:0;left:0;width:100%;height:100%;background:url(thumb-bar.a20486c53566c486c3ab.svg) no-repeat;background-size:contain;border-radius:0}[_nghost-%COMP%]     .tb-switch .switch mat-slide-toggle .mat-slide-toggle-thumb-container{top:5%;left:.25%;width:50%;height:90%}[_nghost-%COMP%]     .tb-switch .switch mat-slide-toggle .mat-slide-toggle-label{height:100%}[_nghost-%COMP%]     .tb-switch .switch mat-slide-toggle .mat-slide-toggle-thumb{top:0;left:0;width:100%;height:100%;background:url(thumb.ab15ca9ad59d07355dfb.svg) no-repeat;background-size:contain;border-radius:0;box-shadow:none}[_nghost-%COMP%]     .tb-switch .switch mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(100%,0,0)}[_nghost-%COMP%]     .tb-switch .switch mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background:url(thumb-bar-checked.4590c5ef1e205a0e5eaa.svg) no-repeat;background-size:contain}[_nghost-%COMP%]     .tb-switch .switch mat-slide-toggle.mat-checked .mat-slide-toggle-thumb{background:url(thumb-checked.3a06c67c75312c6a2729.svg) no-repeat;background-size:contain}"]}),n}(r.a);0,void 0}).call(this,n("xexB"))},mXAo:function(e,t,n){"use strict";n.d(t,"a",function(){return x});var i=n("fXoL"),a=n("UaJx"),r=n("mrSG"),o=n("qxrw"),s=n("90vD"),l=n("dSnI"),c=n("4r/P"),d=n("he9t"),u=n("GdA0"),p=n("//Q6"),m=n("rDax"),f=n("+rOU"),h=n("unUE"),g=function(e){function t(t,n,i,a,o,d,u,m,f,h,g,A,b){void 0===f&&(f=null),void 0===h&&(h=null);var y=e.call(this)||this;return y.eventService=t,y.dialogService=n,y.translate=i,y.datePipe=a,y.dialog=o,y.entityId=d,y.tenantId=u,y.defaultEventType=m,y.disabledEventTypes=f,y.debugEventTypes=h,y.overlay=g,y.viewContainerRef=A,y.cd=b,y.filterParams={},y.filterColumns=[],y.loadDataOnInit=!1,y.tableTitle="",y.useTimePageLink=!0,y.detailsPanelEnabled=!1,y.selectionEnabled=!1,y.searchEnabled=!1,y.addEnabled=!1,y.entitiesDeleteEnabled=!1,y.headerComponent=l.a,y.eventTypes=Object.keys(s.b).map(function(e){return s.b[e]}),f&&f.length&&(y.eventTypes=y.eventTypes.filter(function(e){return-1===f.indexOf(e)})),h&&h.length&&(y.eventTypes=Object(r.h)(y.eventTypes,h)),y.eventTypeValue=m,y.entityTranslations={noEntities:"event.no-events-prompt"},y.entityResources={},y.entitiesFetchFunction=function(e){return y.fetchEvents(e)},y.defaultSortOrder={property:"createdTime",direction:c.a.DESC},y.updateColumns(),y.updateFilterColumns(),y.headerActionDescriptors.push({name:y.translate.instant("event.clear-filter"),icon:"mdi:filter-variant-remove",isMdiIcon:!0,isEnabled:function(){return!Object(p.r)(y.filterParams,{})},onAction:function(e){y.clearFiter(e)}},{name:y.translate.instant("event.events-filter"),icon:"filter_list",isEnabled:function(){return!0},onAction:function(e){y.editEventFilter(e)}}),y}return Object(r.d)(t,e),Object.defineProperty(t.prototype,"eventType",{get:function(){return this.eventTypeValue},set:function(e){this.eventTypeValue!==e&&(this.eventTypeValue=e,this.updateColumns(!0),this.updateFilterColumns())},enumerable:!1,configurable:!0}),t.prototype.fetchEvents=function(e){return this.eventService.getFilterEvents(this.entityId,this.eventType,this.tenantId,this.filterParams,e)},t.prototype.updateColumns=function(e){var t=this;switch(void 0===e&&(e=!1),this.columns=[],this.columns.push(new o.b("createdTime","event.event-time",this.datePipe,"120px"),new o.d("server","event.server","100px",function(e){return e.body.server},function(e){return{}},!1)),this.eventType){case s.b.ERROR:this.columns.push(new o.d("method","event.method","100%",function(e){return e.body.method},function(e){return{}},!1),new o.c("error","event.error",{name:this.translate.instant("action.view"),icon:"more_horiz",isEnabled:function(e){return e.body.error&&e.body.error.length>0},onAction:function(e,n){return t.showContent(e,n.body.error,"event.error")}},"100px"));break;case s.b.LC_EVENT:this.columns.push(new o.d("method","event.event","100%",function(e){return e.body.event},function(e){return{}},!1),new o.d("status","event.status","100%",function(e){return t.translate.instant(e.body.success?"event.success":"event.failed")},function(e){return{}},!1),new o.c("error","event.error",{name:this.translate.instant("action.view"),icon:"more_horiz",isEnabled:function(e){return e.body.error&&e.body.error.length>0},onAction:function(e,n){return t.showContent(e,n.body.error,"event.error")}},"100px"));break;case s.b.STATS:this.columns.push(new o.d("messagesProcessed","event.messages-processed","50%",function(e){return e.body.messagesProcessed+""},function(){return{}},!1,function(){return{}},function(){},!0),new o.d("errorsOccurred","event.errors-occurred","50%",function(e){return e.body.errorsOccurred+""},function(){return{}},!1,function(){return{}},function(){},!0));break;case s.a.DEBUG_RULE_NODE:case s.a.DEBUG_RULE_CHAIN:this.columns[0].width="100px",this.columns.push(new o.d("type","event.type","40px",function(e){return e.body.type},function(e){return{padding:"0 12px 0 0"}},!1,function(e){return{padding:"0 12px 0 0"}}),new o.d("entityName","event.entity-type","100px",function(e){return e.body.entityName},function(e){return{padding:"0 12px 0 0"}},!1,function(e){return{padding:"0 12px 0 0"}}),new o.d("msgId","event.message-id","100px",function(e){return e.body.msgId},function(e){return{whiteSpace:"nowrap",padding:"0 12px 0 0"}},!1,function(e){return{padding:"0 12px 0 0"}},function(e){return e.body.msgId}),new o.d("msgType","event.message-type","100px",function(e){return e.body.msgType},function(e){return{whiteSpace:"nowrap",padding:"0 12px 0 0"}},!1,function(e){return{padding:"0 12px 0 0"}},function(e){return e.body.msgType}),new o.d("relationType","event.relation-type","100px",function(e){return e.body.relationType},function(e){return{padding:"0 12px 0 0"}},!1,function(e){return{padding:"0 12px 0 0"}}),new o.c("data","event.data",{name:this.translate.instant("action.view"),icon:"more_horiz",isEnabled:function(e){return!!e.body.data&&e.body.data.length>0},onAction:function(e,n){return t.showContent(e,n.body.data,"event.data",n.body.dataType)}},"40px"),new o.c("metadata","event.metadata",{name:this.translate.instant("action.view"),icon:"more_horiz",isEnabled:function(e){return!!e.body.metadata&&e.body.metadata.length>0},onAction:function(e,n){return t.showContent(e,n.body.metadata,"event.metadata",d.b.JSON,!0)}},"40px"),new o.c("error","event.error",{name:this.translate.instant("action.view"),icon:"more_horiz",isEnabled:function(e){return e.body.error&&e.body.error.length>0},onAction:function(e,n){return t.showContent(e,n.body.error,"event.error")}},"40px"))}e&&this.table.columnsUpdated(!0)},t.prototype.showContent=function(e,t,n,i,a){if(void 0===i&&(i=null),void 0===a&&(a=!1),e&&e.stopPropagation(),i===d.b.JSON&&a)try{t=JSON.stringify(Object(p.M)(JSON.parse(t)))}catch(r){}this.dialog.open(u.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{content:t,title:n,contentType:i}})},t.prototype.updateFilterColumns=function(){switch(this.filterParams={},this.filterColumns=[{key:"server",title:"event.server"}],this.eventType){case s.b.ERROR:this.filterColumns.push({key:"method",title:"event.method"},{key:"error",title:"event.error"});break;case s.b.LC_EVENT:this.filterColumns.push({key:"event",title:"event.event"},{key:"status",title:"event.status"},{key:"error",title:"event.error"});break;case s.b.STATS:this.filterColumns.push({key:"messagesProcessed",title:"event.min-messages-processed"},{key:"errorsOccurred",title:"event.min-errors-occurred"});break;case s.a.DEBUG_RULE_NODE:case s.a.DEBUG_RULE_CHAIN:this.filterColumns.push({key:"msgDirectionType",title:"event.type"},{key:"entityId",title:"event.entity-id"},{key:"entityName",title:"event.entity-type"},{key:"msgType",title:"event.message-type"},{key:"relationType",title:"event.relation-type"},{key:"dataSearch",title:"event.data"},{key:"metadataSearch",title:"event.metadata"},{key:"isError",title:"event.error"},{key:"error",title:"event.error"})}},t.prototype.clearFiter=function(e){e&&e.stopPropagation(),this.filterParams={},this.table.paginator.pageIndex=0,this.table.updateData()},t.prototype.editEventFilter=function(e){var t=this;e&&e.stopPropagation();var n=e.target||e.srcElement||e.currentTarget,a=new m.OverlayConfig;a.backdropClass="cdk-overlay-transparent-backdrop",a.hasBackdrop=!0;a.positionStrategy=this.overlay.position().flexibleConnectedTo(n).withPositions([{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}]);var r=this.overlay.create(a);r.backdropClick().subscribe(function(){r.dispose()});var o=[{provide:h.a,useValue:{columns:this.filterColumns,filterParams:this.filterParams}},{provide:m.OverlayRef,useValue:r}],s=i.Injector.create({parent:this.viewContainerRef.injector,providers:o}),l=r.attach(new f.ComponentPortal(h.b,this.viewContainerRef,s));l.onDestroy(function(){l.instance.result&&!Object(p.r)(t.filterParams,l.instance.result.filterParams)&&(t.filterParams=l.instance.result.filterParams,t.table.paginator.pageIndex=0,t.table.updateData())}),this.cd.detectChanges()},t}(o.e),A=n("mopS"),b=n("S+vS"),y=n("sYmb"),v=n("ofXK"),C=n("0IaG"),x=function(){function e(e,t,n,i,a,r,o,s){this.eventService=e,this.dialogService=t,this.translate=n,this.datePipe=i,this.dialog=a,this.overlay=r,this.viewContainerRef=o,this.cd=s,this.activeValue=!1,this.dirtyValue=!1}return Object.defineProperty(e.prototype,"active",{set:function(e){this.activeValue!==e&&(this.activeValue=e,this.activeValue&&this.dirtyValue&&(this.dirtyValue=!1,this.entitiesTable.updateData()))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"entityId",{set:function(e){this.entityIdValue=e,this.eventTableConfig&&this.eventTableConfig.entityId!==e&&(this.eventTableConfig.eventType=this.defaultEventType,this.eventTableConfig.entityId=e,this.entitiesTable.resetSortAndFilter(this.activeValue),this.activeValue||(this.dirtyValue=!0))},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.dirtyValue=!this.activeValue,this.eventTableConfig=new g(this.eventService,this.dialogService,this.translate,this.datePipe,this.dialog,this.entityIdValue,this.tenantId,this.defaultEventType,this.disabledEventTypes,this.debugEventTypes,this.overlay,this.viewContainerRef,this.cd)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](A.a),i["\u0275\u0275directiveInject"](b.a),i["\u0275\u0275directiveInject"](y.TranslateService),i["\u0275\u0275directiveInject"](v.DatePipe),i["\u0275\u0275directiveInject"](C.MatDialog),i["\u0275\u0275directiveInject"](m.Overlay),i["\u0275\u0275directiveInject"](i.ViewContainerRef),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-event-table"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](a.a,3),2&e){var n;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.entitiesTable=n.first)}},inputs:{tenantId:"tenantId",defaultEventType:"defaultEventType",disabledEventTypes:"disabledEventTypes",debugEventTypes:"debugEventTypes",active:"active",entityId:"entityId"},decls:1,vars:1,consts:[[3,"entitiesTableConfig"]],template:function(e,t){1&e&&i["\u0275\u0275element"](0,"tb-entities-table",0),2&e&&i["\u0275\u0275property"]("entitiesTableConfig",t.eventTableConfig)},directives:[a.a],styles:["[_nghost-%COMP%]     tb-entities-table .mat-drawer-container{background-color:#fff}"]}),e}();0,void 0},mcsV:function(e,t,n){"use strict";n.d(t,"a",function(){return x});var i=n("fXoL"),a=n("3Pt+"),r=n("xw5a"),o=n("//Q6"),s=n("UGF7"),l=n("0IaG"),c=n("XiUz"),d=n("7EHt"),u=n("sYmb"),p=n("znSr"),m=n("f0Cb"),f=n("ofXK"),h=n("bTqV"),g=n("Qu3c"),A=n("eIDA"),b=n("NFeN");function y(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span",3),i["\u0275\u0275text"](1,"filter.operation.and"),i["\u0275\u0275elementEnd"]())}function v(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",17),i["\u0275\u0275elementStart"](1,"div",18),i["\u0275\u0275template"](2,y,2,0,"span",19),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",20),i["\u0275\u0275elementStart"](4,"div",21),i["\u0275\u0275elementStart"](5,"div",22),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"div",23),i["\u0275\u0275text"](8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"button",24),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.index;return i["\u0275\u0275nextContext"]().editKeyFilter(e)}),i["\u0275\u0275pipe"](10,"translate"),i["\u0275\u0275elementStart"](11,"mat-icon"),i["\u0275\u0275text"](12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"button",25),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=t.index;return i["\u0275\u0275nextContext"]().removeKeyFilter(e)}),i["\u0275\u0275pipe"](14,"translate"),i["\u0275\u0275elementStart"](15,"mat-icon"),i["\u0275\u0275text"](16,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](17,"mat-divider"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,r=t.index,o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",r>0),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](a.value.key.key),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](o.entityKeyTypeTranslations.get(a.value.key.type)),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](10,7,o.disabled?"filter.key-filter":"filter.edit-key-filter")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](o.disabled?"more_vert":"edit"),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](14,9,"filter.remove-key-filter")),i["\u0275\u0275property"]("fxShow",!o.disabled)}}var C=function(e){return{disabled:e}},x=function(){function e(e,t){this.fb=e,this.dialog=t,this.displayUserParameters=!0,this.allowUserDynamicSource=!0,this.telemetryKeysOnly=!1,this.entityKeyTypeTranslations=r.v,this.propagateChange=null,this.valueChangeSubscription=null}return e.prototype.ngOnInit=function(){this.keyFilterListFormGroup=this.fb.group({}),this.keyFilterListFormGroup.addControl("keyFilters",this.fb.array([])),this.keyFiltersControl=this.fb.control(null)},e.prototype.keyFiltersFormArray=function(){return this.keyFilterListFormGroup.get("keyFilters")},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?(this.keyFilterListFormGroup.disable({emitEvent:!1}),this.keyFiltersControl.disable({emitEvent:!1})):(this.keyFilterListFormGroup.enable({emitEvent:!1}),this.keyFiltersControl.enable({emitEvent:!1}))},e.prototype.validate=function(){return this.keyFilterListFormGroup.valid&&this.keyFiltersControl.valid?null:{keyFilterList:{valid:!1}}},e.prototype.writeValue=function(e){var t=this;this.valueChangeSubscription&&this.valueChangeSubscription.unsubscribe();var n=[];if(e)for(var i=0,o=e;i<o.length;i++){var s=o[i];n.push(this.fb.control(s,[a.Validators.required]))}this.keyFilterListFormGroup.setControl("keyFilters",this.fb.array(n)),this.valueChangeSubscription=this.keyFilterListFormGroup.valueChanges.subscribe(function(){t.updateModel()}),this.disabled?this.keyFilterListFormGroup.disable({emitEvent:!1}):this.keyFilterListFormGroup.enable({emitEvent:!1});var l=Object(r.E)(e);this.keyFiltersControl.patchValue(l,{emitEvent:!1})},e.prototype.removeKeyFilter=function(e){this.keyFilterListFormGroup.get("keyFilters").removeAt(e)},e.prototype.addKeyFilter=function(){var e=this,t=this.keyFilterListFormGroup.get("keyFilters");this.openKeyFilterDialog(null).subscribe(function(n){n&&t.push(e.fb.control(n,[a.Validators.required]))})},e.prototype.editKeyFilter=function(e){var t=this,n=this.keyFilterListFormGroup.get("keyFilters").at(e).value;this.openKeyFilterDialog(n).subscribe(function(n){n&&t.keyFilterListFormGroup.get("keyFilters").at(e).patchValue(n)})},e.prototype.openKeyFilterDialog=function(e){var t=!e;return e||(e={key:{key:"",type:r.d.ATTRIBUTE},valueType:null,value:null,predicates:[]}),this.dialog.open(s.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{keyFilter:e?this.disabled?e:Object(o.e)(e):null,isAdd:t,readonly:this.disabled,displayUserParameters:this.displayUserParameters,allowUserDynamicSource:this.allowUserDynamicSource,telemetryKeysOnly:this.telemetryKeysOnly,entityId:this.entityId}}).afterClosed()},e.prototype.updateModel=function(){var e=this.keyFilterListFormGroup.getRawValue().keyFilters;e.length?this.propagateChange(e):this.propagateChange(null);var t=Object(r.E)(e);this.keyFiltersControl.patchValue(t,{emitEvent:!1})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.FormBuilder),i["\u0275\u0275directiveInject"](l.MatDialog))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-key-filter-list"]],inputs:{disabled:"disabled",displayUserParameters:"displayUserParameters",allowUserDynamicSource:"allowUserDynamicSource",telemetryKeysOnly:"telemetryKeysOnly",entityId:"entityId"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:35,vars:19,consts:[["fxLayout","column",3,"formGroup"],[3,"multi"],[3,"expanded"],["translate",""],["fxLayout","row"],["fxFlex","8"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","92"],["fxFlex","","translate","",1,"tb-title","no-padding"],[2,"min-width","80px",3,"fxShow"],[2,"min-width","40px",3,"fxShow"],[1,"key-filter-list"],["fxLayout","row","fxLayoutAlign","start center","style","max-height: 40px;","formArrayName","keyFilters",4,"ngFor","ngForOf"],["fxLayoutAlign","center center","translate","",1,"no-data-found",3,"fxShow","ngClass"],[2,"margin-top","16px"],["mat-button","","mat-raised-button","","color","accent","type","button","matTooltipPosition","above",3,"fxShow","matTooltip","click"],[1,"tb-filter-preview"],[3,"formControl"],["fxLayout","row","fxLayoutAlign","start center","formArrayName","keyFilters",2,"max-height","40px"],["fxFlex","8",1,"filters-operation"],["translate","",4,"ngIf"],["fxLayout","column","fxFlex","92"],["fxLayout","row","fxLayoutAlign","start center"],["fxFlex",""],["fxFlex","","translate",""],["mat-icon-button","","color","accent","type","button","matTooltipPosition","above",3,"matTooltip","click"],["mat-icon-button","","color","accent","type","button","matTooltipPosition","above",3,"fxShow","matTooltip","click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"section",0),i["\u0275\u0275elementStart"](1,"mat-accordion",1),i["\u0275\u0275elementStart"](2,"mat-expansion-panel",2),i["\u0275\u0275elementStart"](3,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](4,"mat-panel-title"),i["\u0275\u0275elementStart"](5,"div",3),i["\u0275\u0275text"](6,"filter.key-filters"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"div",4),i["\u0275\u0275element"](8,"span",5),i["\u0275\u0275elementStart"](9,"div",6),i["\u0275\u0275elementStart"](10,"label",7),i["\u0275\u0275text"](11,"filter.key-name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"label",7),i["\u0275\u0275text"](13,"filter.key-type.key-type"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"span",8),i["\u0275\u0275text"](15,"\xa0"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"span",9),i["\u0275\u0275text"](17,"\xa0"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](18,"mat-divider"),i["\u0275\u0275elementStart"](19,"div",10),i["\u0275\u0275template"](20,v,18,11,"div",11),i["\u0275\u0275elementStart"](21,"span",12),i["\u0275\u0275text"](22,"filter.no-key-filters"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](23,"div",13),i["\u0275\u0275elementStart"](24,"button",14),i["\u0275\u0275listener"]("click",function(){return t.addKeyFilter()}),i["\u0275\u0275pipe"](25,"translate"),i["\u0275\u0275text"](26),i["\u0275\u0275pipe"](27,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](28,"mat-expansion-panel",2),i["\u0275\u0275elementStart"](29,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](30,"mat-panel-title"),i["\u0275\u0275elementStart"](31,"div",3),i["\u0275\u0275text"](32,"filter.preview"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](33,"div",15),i["\u0275\u0275element"](34,"tb-filter-text",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.keyFilterListFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("multi",!0),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("expanded",!0),i["\u0275\u0275advance"](12),i["\u0275\u0275property"]("fxShow",!t.disabled),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("fxShow",t.disabled),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngForOf",t.keyFiltersFormArray().controls),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow",!t.keyFiltersFormArray().length)("ngClass",i["\u0275\u0275pureFunction1"](17,C,t.disabled)),i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](25,13,"filter.add-key-filter")),i["\u0275\u0275property"]("fxShow",!t.disabled),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](27,15,"filter.add-key-filter")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("expanded",!0),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("formControl",t.keyFiltersControl))},directives:[c.f,a.NgControlStatusGroup,a.FormGroupDirective,d.MatAccordion,d.MatExpansionPanel,d.MatExpansionPanelHeader,d.MatExpansionPanelTitle,u.TranslateDirective,c.b,c.e,p.d,m.MatDivider,f.NgForOf,f.NgClass,p.b,h.MatButton,g.MatTooltip,A.a,a.NgControlStatus,a.FormControlDirective,a.FormArrayName,f.NgIf,b.MatIcon],pipes:[u.TranslatePipe],styles:["[_nghost-%COMP%]   .key-filter-list[_ngcontent-%COMP%]{overflow:auto;max-height:300px}[_nghost-%COMP%]   .key-filter-list[_ngcontent-%COMP%]   .no-data-found[_ngcontent-%COMP%]{height:50px}[_nghost-%COMP%]   .filters-operation[_ngcontent-%COMP%]{margin-top:-40px;color:#666;font-weight:500}[_nghost-%COMP%]   .tb-filter-preview[_ngcontent-%COMP%]{padding:8px;border:1px groove rgba(0,0,0,.25);border-radius:4px}[_nghost-%COMP%]     .tb-filter-preview .tb-filter-text{max-height:200px}"]}),e}();0,void 0},mopS:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("mrSG"),a=n("fXoL"),r=n("Y8nr"),o=n("tk/3"),s=function(){function e(e){this.http=e}return e.prototype.getEvents=function(e,t,n,i,a){return this.http.get("/api/events/"+e.entityType+"/"+e.id+"/"+t+i.toQuery()+"&tenantId="+n,Object(r.b)(a))},e.prototype.getFilterEvents=function(e,t,n,a,o,s){return this.http.post("/api/events/"+e.entityType+"/"+e.id+o.toQuery()+"&tenantId="+n,Object(i.a)(Object(i.a)({},a),{eventType:t}),Object(r.b)(s))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275inject"](o.HttpClient))},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();0,void 0},nYZa:function(e,t,n){"use strict";n.d(t,"a",function(){return S});var i=n("fXoL"),a=n("3Pt+"),r=n("w0k+"),o=n("1G5W"),s=n("XNiG"),l=n("XiUz"),c=n("kmnG"),d=n("sYmb"),u=n("d3UM"),p=n("ofXK"),m=n("znSr"),f=n("qFsG"),h=n("ihCf"),g=n("FKr1");function A(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",11),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.lwm2mSecurityTypeTranslationMap.get(n)," ")}}function b(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device.lwm2m-security-config.client-publicKey-or-id-required")," "))}function y(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device.lwm2m-security-config.client-publicKey-or-id-pattern")," "))}function v(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device.lwm2m-security-config.client-secret-key-required")," "))}function C(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device.lwm2m-security-config.client-secret-key-pattern")," "))}var x=function(e){return{count:e}};function w(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind2"](2,1,"device.lwm2m-security-config.client-secret-key-length",i["\u0275\u0275pureFunction1"](4,x,n.allowLengthKey.join(", ")))," ")}}var S=function(){function e(e){var t=this;this.fb=e,this.securityConfigLwM2MType=r.d,this.securityConfigLwM2MTypes=Object.values(r.d),this.lwm2mSecurityTypeTranslationMap=r.e,this.lengthClientSecretKey=r.b,this.allowLengthKey=[32,64,r.c],this.destroy$=new s.b,this.propagateChange=function(e){},this.setValidatorsSecurity=function(e){var n=[a.Validators.required,a.Validators.pattern(r.a)],i=[a.Validators.required];e===r.d.PSK?n.push(t.maxLength(t.allowLengthKey)):i.push(a.Validators.pattern(r.a)),t.serverFormGroup.get("clientPublicKeyOrId").setValidators(i),t.serverFormGroup.get("clientSecretKey").setValidators(n),t.serverFormGroup.get("clientPublicKeyOrId").enable({emitEvent:!1}),t.serverFormGroup.get("clientSecretKey").enable()},this.serverFormGroup=this.fb.group({securityMode:[r.d.NO_SEC],clientPublicKeyOrId:[""],clientSecretKey:[""]}),this.serverFormGroup.get("securityMode").valueChanges.pipe(Object(o.a)(this.destroy$)).subscribe(function(e){t.updateValidate(e)}),this.serverFormGroup.valueChanges.pipe(Object(o.a)(this.destroy$)).subscribe(function(e){t.propagateChange(e)})}return e.prototype.writeValue=function(e){e&&this.updateValueFields(e)},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){e?this.serverFormGroup.disable({emitEvent:!1}):this.serverFormGroup.enable({emitEvent:!1})},e.prototype.validate=function(e){return this.serverFormGroup.valid?null:{securityConfig:{valid:!1}}},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.prototype.updateValueFields=function(e){this.serverFormGroup.patchValue(e,{emitEvent:!1}),this.updateValidate(e.securityMode,!0)},e.prototype.updateValidate=function(e,t){switch(void 0===t&&(t=!1),e){case r.d.NO_SEC:this.serverFormGroup.get("clientPublicKeyOrId").clearValidators(),this.serverFormGroup.get("clientSecretKey").clearValidators(),this.serverFormGroup.get("clientPublicKeyOrId").disable({emitEvent:!1}),this.serverFormGroup.get("clientSecretKey").disable();break;case r.d.PSK:this.lengthClientSecretKey=r.c,this.setValidatorsSecurity(e);break;case r.d.RPK:case r.d.X509:this.lengthClientSecretKey=null,this.setValidatorsSecurity(e)}this.serverFormGroup.get("clientPublicKeyOrId").updateValueAndValidity({emitEvent:!1}),this.serverFormGroup.get("clientSecretKey").updateValueAndValidity({emitEvent:!t})},e.prototype.maxLength=function(e){return function(t){var n=t.value;return e.some(function(e){return n.length===e})?null:{length:!0}}},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-device-credentials-lwm2m-server"]],features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:27,vars:18,consts:[["fxLayout","column",3,"formGroup"],[1,"mat-block"],["translate",""],["formControlName","securityMode"],[3,"value",4,"ngFor","ngForOf"],[3,"fxShow"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cols","1","formControlName","clientPublicKeyOrId","required",""],[4,"ngIf"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cols","1","formControlName","clientSecretKey","required","",3,"maxlength"],["clientSecretKey",""],["align","end",3,"fxShow"],[3,"value"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"section",0),i["\u0275\u0275elementStart"](1,"mat-form-field",1),i["\u0275\u0275elementStart"](2,"mat-label",2),i["\u0275\u0275text"](3,"device.lwm2m-security-config.mode"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mat-select",3),i["\u0275\u0275template"](5,A,2,2,"mat-option",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",5),i["\u0275\u0275elementStart"](7,"mat-form-field",1),i["\u0275\u0275elementStart"](8,"mat-label"),i["\u0275\u0275text"](9),i["\u0275\u0275pipe"](10,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"textarea",6),i["\u0275\u0275text"](12,"      "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](13,b,3,3,"mat-error",7),i["\u0275\u0275template"](14,y,3,3,"mat-error",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"mat-form-field",1),i["\u0275\u0275elementStart"](16,"mat-label"),i["\u0275\u0275text"](17),i["\u0275\u0275pipe"](18,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](19,"textarea",8,9),i["\u0275\u0275text"](21,"      "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"mat-hint",10),i["\u0275\u0275text"](23),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](24,v,3,3,"mat-error",7),i["\u0275\u0275template"](25,C,3,3,"mat-error",7),i["\u0275\u0275template"](26,w,3,6,"mat-error",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](20);i["\u0275\u0275property"]("formGroup",t.serverFormGroup),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngForOf",t.securityConfigLwM2MTypes),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow",t.serverFormGroup.get("securityMode").value!==t.securityConfigLwM2MType.NO_SEC),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](10,14,"device.lwm2m-security-config.client-publicKey-or-id")),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",t.serverFormGroup.get("clientPublicKeyOrId").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.serverFormGroup.get("clientPublicKeyOrId").hasError("pattern")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](18,16,"device.lwm2m-security-config.client-secret-key")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("maxlength",t.lengthClientSecretKey),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("fxShow",t.serverFormGroup.get("securityMode").value===t.securityConfigLwM2MType.PSK),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate2"](" ",(null==n.value?null:n.value.length)||0,"/",t.lengthClientSecretKey," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.serverFormGroup.get("clientSecretKey").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.serverFormGroup.get("clientSecretKey").hasError("pattern")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.serverFormGroup.get("clientSecretKey").hasError("length"))}},directives:[l.f,a.NgControlStatusGroup,a.FormGroupDirective,c.MatFormField,c.MatLabel,d.TranslateDirective,u.MatSelect,a.NgControlStatus,a.FormControlName,p.NgForOf,m.d,f.MatInput,h.b,a.DefaultValueAccessor,a.RequiredValidator,p.NgIf,a.MaxLengthValidator,c.MatHint,g.MatOption,c.MatError],pipes:[d.TranslatePipe],encapsulation:2}),e}();0,void 0},nc6G:function(e,t,n){"use strict";n.d(t,"a",function(){return B});var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("JIJk"),s=n("//Q6"),l=n("XNiG"),c=n("1G5W"),d=n("gGt+"),u=n("l7P3"),p=n("sYmb"),m=n("XiUz"),f=n("kmnG"),h=n("d3UM"),g=n("ofXK"),A=n("pNH3"),b=n("FKr1"),y=n("qFsG");function v(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",12),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,a.coapTransportDeviceTypeTranslations.get(n))," ")}}function C(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.coap-device-type-required")," "))}function x(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",12),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,a.transportPayloadTypeTranslations.get(n))," ")}}function w(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.mqtt-payload-type-required")," "))}function S(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.telemetry-proto-schema-required")," "))}function E(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.attributes-proto-schema-required")," "))}function I(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.rpc-request-proto-schema-required")," "))}function O(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.rpc-response-proto-schema-required")," "))}function T(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",16),i["\u0275\u0275elementStart"](1,"mat-form-field",17),i["\u0275\u0275elementStart"](2,"mat-label",18),i["\u0275\u0275text"](3,"device-profile.telemetry-proto-schema"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"textarea",19),i["\u0275\u0275template"](5,S,3,3,"mat-error",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"mat-form-field",17),i["\u0275\u0275elementStart"](7,"mat-label",18),i["\u0275\u0275text"](8,"device-profile.attributes-proto-schema"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](9,"textarea",20),i["\u0275\u0275template"](10,E,3,3,"mat-error",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"mat-form-field",21),i["\u0275\u0275elementStart"](12,"mat-label",18),i["\u0275\u0275text"](13,"device-profile.rpc-request-proto-schema"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](14,"textarea",22),i["\u0275\u0275template"](15,I,3,3,"mat-error",8),i["\u0275\u0275elementStart"](16,"mat-hint",23),i["\u0275\u0275text"](17,"device-profile.rpc-request-proto-schema-hint"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](18,"mat-form-field",17),i["\u0275\u0275elementStart"](19,"mat-label",18),i["\u0275\u0275text"](20,"device-profile.rpc-response-proto-schema"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](21,"textarea",24),i["\u0275\u0275template"](22,O,3,3,"mat-error",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",n.coapTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration.transportPayloadTypeConfiguration.deviceTelemetryProtoSchema").hasError("required")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",n.coapTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration.transportPayloadTypeConfiguration.deviceAttributesProtoSchema").hasError("required")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",n.coapTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration.transportPayloadTypeConfiguration.deviceRpcRequestProtoSchema").hasError("required")),i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("ngIf",n.coapTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration.transportPayloadTypeConfiguration.deviceRpcResponseProtoSchema").hasError("required"))}}function F(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",13),i["\u0275\u0275elementStart"](1,"fieldset",2),i["\u0275\u0275elementStart"](2,"legend",3),i["\u0275\u0275text"](3,"device-profile.coap-device-payload-type"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",4),i["\u0275\u0275elementStart"](5,"mat-form-field",5),i["\u0275\u0275elementStart"](6,"mat-select",14),i["\u0275\u0275template"](7,x,3,4,"mat-option",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,w,3,3,"mat-error",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](9,T,23,4,"div",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("ngForOf",n.transportPayloadTypes),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.coapTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration.transportPayloadTypeConfiguration.transportPayloadType").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.protoPayloadType)}}var B=function(){function e(e,t){this.store=e,this.fb=t,this.coapTransportDeviceTypes=Object.values(o.f),this.coapTransportDeviceTypeTranslations=o.t,this.transportPayloadTypes=Object.values(o.r),this.transportPayloadTypeTranslations=o.P,this.destroy$=new l.b,this.transportPayloadTypeConfiguration=this.fb.group({transportPayloadType:[o.r.JSON,a.Validators.required],deviceTelemetryProtoSchema:[o.E,a.Validators.required],deviceAttributesProtoSchema:[o.B,a.Validators.required],deviceRpcRequestProtoSchema:[o.C,a.Validators.required],deviceRpcResponseProtoSchema:[o.D,a.Validators.required]}),this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(r.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.coapTransportConfigurationFormGroup=this.fb.group({coapDeviceTypeConfiguration:this.fb.group({coapDeviceType:[o.f.DEFAULT,a.Validators.required],transportPayloadTypeConfiguration:this.transportPayloadTypeConfiguration}),clientSettings:this.fb.group({powerMode:[d.y.DRX,a.Validators.required],edrxCycle:[{disabled:!0,value:0},a.Validators.required],psmActivityTimer:[{disabled:!0,value:0},a.Validators.required],pagingTransmissionWindow:[{disabled:!0,value:0},a.Validators.required]})}),this.coapTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration.coapDeviceType").valueChanges.pipe(Object(c.a)(this.destroy$)).subscribe(function(t){e.updateCoapDeviceTypeBasedControls(t,!0)}),this.coapTransportConfigurationFormGroup.valueChanges.pipe(Object(c.a)(this.destroy$)).subscribe(function(){e.updateModel()})},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},Object.defineProperty(e.prototype,"coapDeviceTypeDefault",{get:function(){return this.coapTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration.coapDeviceType").value===o.f.DEFAULT},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"protoPayloadType",{get:function(){return this.coapTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration.transportPayloadTypeConfiguration.transportPayloadType").value===o.r.PROTOBUF},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clientSettingsFormGroup",{get:function(){return this.coapTransportConfigurationFormGroup.get("clientSettings")},enumerable:!1,configurable:!0}),e.prototype.updateCoapDeviceTypeBasedControls=function(e,t){void 0===t&&(t=!1);var n=this.coapTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration");t&&n.patchValue({transportPayloadTypeConfiguration:this.transportPayloadTypeConfiguration},{emitEvent:!1}),e!==o.f.DEFAULT||this.disabled?n.get("transportPayloadTypeConfiguration").disable({emitEvent:!1}):n.get("transportPayloadTypeConfiguration").enable({emitEvent:!1})},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.coapTransportConfigurationFormGroup.disable({emitEvent:!1}):(this.coapTransportConfigurationFormGroup.enable({emitEvent:!1}),this.coapTransportConfigurationFormGroup.get("clientSettings.powerMode").updateValueAndValidity({onlySelf:!0}))},e.prototype.writeValue=function(e){var t;Object(s.o)(e)&&(e.clientSettings||(e.clientSettings={powerMode:d.y.DRX}),this.coapTransportConfigurationFormGroup.patchValue(e,{emitEvent:!1}),this.disabled||this.coapTransportConfigurationFormGroup.get("clientSettings.powerMode").updateValueAndValidity({onlySelf:!0}),this.updateCoapDeviceTypeBasedControls(null===(t=e.coapDeviceTypeConfiguration)||void 0===t?void 0:t.coapDeviceType))},e.prototype.updateModel=function(){var e=null;this.coapTransportConfigurationFormGroup.valid&&((e=this.coapTransportConfigurationFormGroup.value).type=o.j.COAP),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](u.Store),i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-coap-device-profile-transport-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:16,vars:5,consts:[[2,"padding-bottom","16px",3,"formGroup"],["formGroupName","coapDeviceTypeConfiguration"],[1,"fields-group"],["translate","",1,"group-title"],["fxLayoutGap","8px","fxLayout","column"],[1,"mat-block"],["formControlName","coapDeviceType","required",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["formGroupName","transportPayloadTypeConfiguration",4,"ngIf"],["formGroupName","clientSettings"],[3,"parentForm"],[3,"value"],["formGroupName","transportPayloadTypeConfiguration"],["formControlName","transportPayloadType","required",""],["fxLayout","column",4,"ngIf"],["fxLayout","column"],["fxFlex",""],["translate",""],["matInput","","required","","formControlName","deviceTelemetryProtoSchema","rows","5"],["matInput","","required","","formControlName","deviceAttributesProtoSchema","rows","5"],["fxFlex","",2,"padding-bottom","20px"],["matInput","","required","","formControlName","deviceRpcRequestProtoSchema","rows","5"],["translate","",1,"tb-hint"],["matInput","","required","","formControlName","deviceRpcResponseProtoSchema","rows","5"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"form",0),i["\u0275\u0275elementStart"](1,"section",1),i["\u0275\u0275elementStart"](2,"fieldset",2),i["\u0275\u0275elementStart"](3,"legend",3),i["\u0275\u0275text"](4,"device-profile.coap-device-type"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",4),i["\u0275\u0275elementStart"](6,"mat-form-field",5),i["\u0275\u0275elementStart"](7,"mat-select",6),i["\u0275\u0275template"](8,v,3,4,"mat-option",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](9,C,3,3,"mat-error",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](10,F,10,3,"div",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"section",10),i["\u0275\u0275elementStart"](12,"fieldset",2),i["\u0275\u0275elementStart"](13,"legend",3),i["\u0275\u0275text"](14,"device-profile.power-saving-mode"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](15,"tb-power-mode-settings",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.coapTransportConfigurationFormGroup),i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("ngForOf",t.coapTransportDeviceTypes),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.coapTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration.coapDeviceType").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.coapDeviceTypeDefault),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("parentForm",t.clientSettingsFormGroup))},directives:[a["\u0275angular_packages_forms_forms_ba"],a.NgControlStatusGroup,a.FormGroupDirective,a.FormGroupName,p.TranslateDirective,m.g,m.f,f.MatFormField,h.MatSelect,a.NgControlStatus,a.FormControlName,a.RequiredValidator,g.NgForOf,g.NgIf,A.a,b.MatOption,f.MatError,m.b,f.MatLabel,y.MatInput,a.DefaultValueAccessor,f.MatHint],pipes:[p.TranslatePipe],styles:["[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]{padding:8px;margin:10px 0;border:1px groove rgba(0,0,0,.25);border-radius:4px}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{color:rgba(0,0,0,.7)}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]   .tb-hint[_ngcontent-%COMP%]{padding:0}"]}),e}();0,void 0},ncEg:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return J});var i=n("mrSG"),a=n("fXoL"),r=(n("5OJv"),n("0lYY")),o=n("RxGS"),s=n("5xOD"),l=n("OiFK"),c=n("jtHE"),d=n("LRne"),u=n("HDdC"),p=n("cp0P"),m=n("z6cu"),f=n("//Q6"),h=n("OMGm"),g=n("Neop"),A=n("OCOE"),b=n("lJxs"),y=n("JIr8"),v=n("eIep"),C=n("xKAQ"),x=n("k9IB"),w=n("DaoB"),S=n("BOYq"),E=n("nhHW"),I=n("YnEf"),O=n("c6cM"),T=n("21Fy"),F=n("xFtW"),B=n("HR/i"),M=n("lbPe"),P=n("PdRd"),D=n("vY+p"),k=n("T9Vw"),_=n("S+vS"),L=n("l7P3"),j=n("tyNb"),N=n("0IaG"),R=n("sYmb"),U=n("rezs"),V=n("XiUz"),Q=n("ofXK"),G=n("znSr"),H=n("Xa2L"),K=n("CRwc"),q=["widgetContent"];function z(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"tb-legend",9),a["\u0275\u0275listener"]("legendKeyHiddenChange",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onLegendKeyHiddenChange(e)}),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle",i.legendStyle)("legendConfig",i.legendConfig)("legendData",i.legendData)}}function W(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"tb-legend",9),a["\u0275\u0275listener"]("legendKeyHiddenChange",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onLegendKeyHiddenChange(e)}),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle",i.legendStyle)("legendConfig",i.legendConfig)("legendData",i.legendData)}}function X(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",10),a["\u0275\u0275elementStart"](1,"span"),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"]("Widget Error: ",n.widgetErrorData.name+": "+n.widgetErrorData.message,"")}}function $(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",11),a["\u0275\u0275elementStart"](1,"span",12),a["\u0275\u0275text"](2,"widget.no-data"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]())}var J=function(t){function n(e,n,i,a,r,o,s,l,c,d,u,p,m,f,h,A,b,y,v,C,x,w,S,E){var I=t.call(this,e)||this;return I.store=e,I.route=n,I.router=i,I.widgetComponentService=a,I.componentFactoryResolver=r,I.elementRef=o,I.injector=s,I.dialog=l,I.embedDashboardDialogComponent=c,I.widgetService=d,I.resources=u,I.timeService=p,I.deviceService=m,I.entityService=f,I.dashboardService=h,I.entityDataService=A,I.alarmDataService=b,I.translate=y,I.utils=v,I.mobileService=C,I.dialogs=x,I.raf=w,I.ngZone=S,I.cd=E,I.displayNoData=!1,I.subscriptionInited=!1,I.destroyed=!1,I.widgetSizeDetected=!1,I.widgetInstanceInited=!1,I.dataUpdatePending=!1,I.cafs={},I.toastTargetId="widget-messages-"+I.utils.guid(),I.cssParser=new g.a,I.rxSubscriptions=new Array,I.cssParser.testMode=!1,I}return Object(i.d)(n,t),n.prototype.ngOnInit=function(){var e=this;if(this.loadingData=!0,this.widget=this.dashboardWidget.widget,this.displayLegend=Object(f.n)(this.widget.config.showLegend)?this.widget.config.showLegend:this.widget.type===r.m.timeseries,this.legendContainerLayoutType="column",this.displayLegend)switch(this.legendConfig=this.widget.config.legendConfig||Object(r.g)(this.widget.type),this.legendData={keys:[],data:[]},this.legendConfig.position===r.c.top||this.legendConfig.position===r.c.bottom?(this.legendContainerLayoutType="column",this.isLegendFirst=this.legendConfig.position===r.c.top):(this.legendContainerLayoutType="row",this.isLegendFirst=this.legendConfig.position===r.c.left),this.legendConfig.position){case r.c.top:this.legendStyle={paddingBottom:"8px",maxHeight:"50%",overflowY:"auto"};break;case r.c.bottom:this.legendStyle={paddingTop:"8px",maxHeight:"50%",overflowY:"auto"};break;case r.c.left:this.legendStyle={paddingRight:"0px",maxWidth:"50%",overflowY:"auto"};break;case r.c.right:this.legendStyle={paddingLeft:"0px",maxWidth:"50%",overflowY:"auto"}}var t={};if(this.widget.config.actions)for(var n=function(n){var a=i.widget.config.actions[n],r=[];a.forEach(function(t){var n=Object(f.e)(t);n.displayName=e.utils.customTranslation(t.name,t.name),r.push(n)}),t[n]=r},i=this,a=0,o=Object.keys(this.widget.config.actions);a<o.length;a++){n(o[a])}this.widgetContext=this.dashboardWidget.widgetContext,this.widgetContext.changeDetector=this.cd,this.widgetContext.ngZone=this.ngZone,this.widgetContext.store=this.store,this.widgetContext.servicesMap=F.a,this.widgetContext.isEdit=this.isEdit,this.widgetContext.isMobile=this.isMobile,this.widgetContext.subscriptionApi={createSubscription:this.createSubscription.bind(this),createSubscriptionFromInfo:this.createSubscriptionFromInfo.bind(this),removeSubscription:function(t){var n=e.widgetContext.subscriptions[t];n&&(n.destroy(),delete e.widgetContext.subscriptions[t])}},this.widgetContext.actionsApi={actionDescriptorsBySourceId:t,getActionDescriptors:this.getActionDescriptors.bind(this),handleWidgetAction:this.handleWidgetAction.bind(this),elementClick:this.elementClick.bind(this),getActiveEntityInfo:this.getActiveEntityInfo.bind(this),openDashboardStateInSeparateDialog:this.openDashboardStateInSeparateDialog.bind(this)},this.widgetContext.customHeaderActions=[],this.getActionDescriptors(r.j.headerButton.value).forEach(function(t){var n={name:t.name,displayName:t.displayName,icon:t.icon,descriptor:t,onAction:function(n){var i=e.getActiveEntityInfo(),a=i?i.entityId:null,r=i?i.entityName:null,o=i?i.entityLabel:null;e.handleWidgetAction(n,t,a,r,null,o)}};e.widgetContext.customHeaderActions.push(n)}),this.subscriptionContext=new h.a(this.widgetContext.dashboard),this.subscriptionContext.timeService=this.timeService,this.subscriptionContext.deviceService=this.deviceService,this.subscriptionContext.translate=this.translate,this.subscriptionContext.entityDataService=this.entityDataService,this.subscriptionContext.alarmDataService=this.alarmDataService,this.subscriptionContext.utils=this.utils,this.subscriptionContext.raf=this.raf,this.subscriptionContext.widgetUtils=this.widgetContext.utils,this.subscriptionContext.getServerTimeDiff=this.dashboardService.getServerTimeDiff.bind(this.dashboardService),this.widgetComponentService.getWidgetInfo(this.widget.bundleAlias,this.widget.typeAlias,this.widget.isSystemType).subscribe(function(t){e.widgetInfo=t,e.loadFromWidgetInfo()},function(t){e.widgetInfo=t.widgetInfo,e.errorMessages=t.errorMessages,e.loadFromWidgetInfo()}),setTimeout(function(){e.dashboardWidget.updateWidgetParams()},0)},n.prototype.ngAfterViewInit=function(){},n.prototype.ngOnChanges=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t],a=e[i];a.firstChange||a.currentValue===a.previousValue||("isEdit"===i?this.onEditModeChanged():"isMobile"===i&&this.onMobileModeChanged())}},n.prototype.ngOnDestroy=function(){this.destroyed=!0,this.rxSubscriptions.forEach(function(e){e.unsubscribe()}),this.rxSubscriptions.length=0,this.onDestroy()},n.prototype.displayWidgetInstance=function(){if(this.widget.type!==r.m.static){for(var e=0,t=Object.keys(this.widgetContext.subscriptions);e<t.length;e++){var n=t[e];if(this.widgetContext.subscriptions[n].isDataResolved())return!0}return!1}return!0},n.prototype.onDestroy=function(){if(this.widgetContext){for(var e=this.displayWidgetInstance(),t=0,n=Object.keys(this.widgetContext.subscriptions);t<n.length;t++){var i=n[t];this.widgetContext.subscriptions[i].destroy()}if(this.subscriptionInited=!1,this.dataUpdatePending=!1,this.pendingMessage=null,this.widgetContext.subscriptions={},this.widgetContext.inited){this.widgetContext.inited=!1;for(var a=0,r=Object.keys(this.cafs);a<r.length;a++){var o=r[a];this.cafs[o]&&(this.cafs[o](),this.cafs[o]=null)}try{e&&(this.widgetTypeInstance.onDestroy(),this.widgetInstanceInited=!1)}catch(s){this.handleWidgetException(s)}}this.widgetContext.destroyed=!0,this.destroyDynamicWidgetComponent()}},n.prototype.onTimewindowChanged=function(e){for(var t=0,n=Object.keys(this.widgetContext.subscriptions);t<n.length;t++){var i=n[t],a=this.widgetContext.subscriptions[i];a.useDashboardTimewindow||a.updateTimewindowConfig(e)}},n.prototype.onLegendKeyHiddenChange=function(e){for(var t=0,n=Object.keys(this.widgetContext.subscriptions);t<n.length;t++){var i=n[t];this.widgetContext.subscriptions[i].updateDataVisibility(e)}},n.prototype.loadFromWidgetInfo=function(){var e=this;this.widgetContext.widgetNamespace="widget-type-"+(this.widget.isSystemType?"sys-":"")+this.widget.bundleAlias+"-"+this.widget.typeAlias;var t=this.elementRef.nativeElement;if(t.classList.add("tb-widget"),t.classList.add(this.widgetContext.widgetNamespace),this.widgetType=this.widgetInfo.widgetTypeFunction,this.typeParameters=this.widgetInfo.typeParameters,this.widgetType)try{this.widgetTypeInstance=new this.widgetType(this.widgetContext)}catch(n){this.handleWidgetException(n),this.widgetTypeInstance={}}else this.widgetTypeInstance={};this.widgetTypeInstance.onInit||(this.widgetTypeInstance.onInit=function(){}),this.widgetTypeInstance.onDataUpdated||(this.widgetTypeInstance.onDataUpdated=function(){}),this.widgetTypeInstance.onResize||(this.widgetTypeInstance.onResize=function(){}),this.widgetTypeInstance.onEditModeChanged||(this.widgetTypeInstance.onEditModeChanged=function(){}),this.widgetTypeInstance.onMobileModeChanged||(this.widgetTypeInstance.onMobileModeChanged=function(){}),this.widgetTypeInstance.onDestroy||(this.widgetTypeInstance.onDestroy=function(){}),this.initialize().subscribe(function(){e.onInit()},function(e){})},n.prototype.detectChanges=function(e){if(void 0===e&&(e=!1),!this.destroyed)try{this.cd.detectChanges(),e&&this.widgetContext.detectContainerChanges()}catch(t){}},n.prototype.isReady=function(){return this.subscriptionInited&&this.widgetSizeDetected},n.prototype.onInit=function(e){var t=this;this.widgetContext.$containerParent&&!this.destroyed&&(e||this.checkSize(),!this.widgetContext.inited&&this.isReady()&&(this.widgetContext.inited=!0,this.widgetContext.detectContainerChanges(),this.cafs.init&&(this.cafs.init(),this.cafs.init=null),this.cafs.init=this.raf.raf(function(){try{t.displayWidgetInstance()?(t.widgetTypeInstance.onInit(),t.widgetInstanceInited=!0,t.dataUpdatePending&&(t.widgetTypeInstance.onDataUpdated(),t.dataUpdatePending=!1),t.pendingMessage&&(t.displayMessage(t.pendingMessage.severity,t.pendingMessage.message),t.pendingMessage=null)):(t.loadingData=!1,t.displayNoData=!0),t.detectChanges()}catch(e){t.handleWidgetException(e)}}),!this.typeParameters.useCustomDatasources&&this.widgetContext.defaultSubscription&&this.widgetContext.defaultSubscription.subscribe()))},n.prototype.onResize=function(){var e=this;this.checkSize()&&(this.widgetContext.inited?(this.cafs.resize&&(this.cafs.resize(),this.cafs.resize=null),this.cafs.resize=this.raf.raf(function(){try{e.displayWidgetInstance()&&e.widgetTypeInstance.onResize()}catch(t){e.handleWidgetException(t)}})):this.onInit(!0))},n.prototype.onEditModeChanged=function(){var e=this;this.widgetContext.isEdit!==this.isEdit&&(this.widgetContext.isEdit=this.isEdit,this.widgetContext.inited&&(this.cafs.editMode&&(this.cafs.editMode(),this.cafs.editMode=null),this.cafs.editMode=this.raf.raf(function(){try{e.displayWidgetInstance()&&e.widgetTypeInstance.onEditModeChanged()}catch(t){e.handleWidgetException(t)}})))},n.prototype.onMobileModeChanged=function(){var e=this;this.widgetContext.isMobile!==this.isMobile&&(this.widgetContext.isMobile=this.isMobile,this.widgetContext.inited&&(this.cafs.mobileMode&&(this.cafs.mobileMode(),this.cafs.mobileMode=null),this.cafs.mobileMode=this.raf.raf(function(){try{e.displayWidgetInstance()&&e.widgetTypeInstance.onMobileModeChanged()}catch(t){e.handleWidgetException(t)}})))},n.prototype.reInit=function(){var e=this;this.cafs.reinit&&(this.cafs.reinit(),this.cafs.reinit=null),this.cafs.reinit=this.raf.raf(function(){e.ngZone.run(function(){e.reInitImpl()})})},n.prototype.reInitImpl=function(){var e=this;this.onDestroy(),this.typeParameters.useCustomDatasources?(this.widgetContext.reset(),this.subscriptionInited=!0,this.configureDynamicWidgetComponent(),this.onInit()):this.createDefaultSubscription().subscribe(function(){e.destroyed?e.onDestroy():(e.widgetContext.reset(),e.subscriptionInited=!0,e.configureDynamicWidgetComponent(),e.onInit())},function(){e.destroyed?e.onDestroy():(e.widgetContext.reset(),e.subscriptionInited=!0,e.onInit())})},n.prototype.initialize=function(){var e=this,t=new c.a;return this.rxSubscriptions.push(this.widgetContext.aliasController.entityAliasesChanged.subscribe(function(t){for(var n=!1,i=0,a=Object.keys(e.widgetContext.subscriptions);i<a.length;i++){var r=a[i],o=e.widgetContext.subscriptions[r];n=n||o.onAliasesChanged(t)}n&&!e.typeParameters.useCustomDatasources&&(e.displayNoData=!1,e.reInit())})),this.rxSubscriptions.push(this.widgetContext.aliasController.filtersChanged.subscribe(function(t){for(var n=!1,i=0,a=Object.keys(e.widgetContext.subscriptions);i<a.length;i++){var r=a[i],o=e.widgetContext.subscriptions[r];n=n||o.onFiltersChanged(t)}n&&!e.typeParameters.useCustomDatasources&&(e.displayNoData=!1,e.reInit())})),this.rxSubscriptions.push(this.widgetContext.dashboard.dashboardTimewindowChanged.subscribe(function(t){for(var n=0,i=Object.keys(e.widgetContext.subscriptions);n<i.length;n++){var a=i[n];e.widgetContext.subscriptions[a].onDashboardTimewindowChanged(t)}})),this.typeParameters.useCustomDatasources?(this.loadingData=!1,this.subscriptionInited=!0,this.configureDynamicWidgetComponent(),t.next(),t.complete()):this.createDefaultSubscription().subscribe(function(){e.subscriptionInited=!0,e.configureDynamicWidgetComponent(),t.next(),t.complete()},function(n){e.subscriptionInited=!0,t.error(n)}),t.asObservable()},n.prototype.destroyDynamicWidgetComponent=function(){this.widgetContext.$containerParent&&this.widgetResize$&&this.widgetResize$.disconnect(),this.dynamicWidgetComponentRef&&(this.dynamicWidgetComponentRef.destroy(),this.dynamicWidgetComponentRef=null)},n.prototype.handleWidgetException=function(e){console.error(e),this.widgetErrorData=this.utils.processWidgetException(e),this.detectChanges()},n.prototype.displayMessage=function(e,t,n){this.widgetContext.showToast(e,t,n,"bottom","right",this.toastTargetId)},n.prototype.clearMessage=function(){this.widgetContext.hideToast(this.toastTargetId)},n.prototype.configureDynamicWidgetComponent=function(){var t=this;this.widgetContentContainer.clear();var n=a.Injector.create({providers:[{provide:"widgetContext",useValue:this.widgetContext},{provide:"errorMessages",useValue:this.errorMessages}],parent:this.injector}),i=e(this.elementRef.nativeElement.querySelector("#widget-container"));this.widgetContext.$containerParent=e(i);try{this.dynamicWidgetComponentRef=this.widgetContentContainer.createComponent(this.widgetInfo.componentFactory,0,n),this.cd.detectChanges()}catch(r){console.error(r),this.dynamicWidgetComponentRef&&(this.dynamicWidgetComponentRef.destroy(),this.dynamicWidgetComponentRef=null),this.widgetContentContainer.clear()}this.dynamicWidgetComponentRef&&(this.dynamicWidgetComponent=this.dynamicWidgetComponentRef.instance,this.widgetContext.$container=e(this.dynamicWidgetComponentRef.location.nativeElement),this.widgetContext.$container.css("display","block"),this.widgetContext.$container.attr("id","container"),this.widgetSizeDetected&&(this.widgetContext.$container.css("height",this.widgetContext.height+"px"),this.widgetContext.$container.css("width",this.widgetContext.width+"px"))),this.widgetResize$=new B.a(function(){t.onResize()}),this.widgetResize$.observe(this.widgetContext.$containerParent[0])},n.prototype.createSubscription=function(e,t){var n=this,i=new c.a;e.dashboardTimewindow=this.widgetContext.dashboardTimewindow;var a=new O.a(this.subscriptionContext,e);return a.init$.subscribe(function(){n.widgetContext.subscriptions[a.id]=a,t&&a.subscribe(),i.next(a),i.complete()},function(e){i.error(e)}),i.asObservable()},n.prototype.createSubscriptionFromInfo=function(e,t,n,i,a){var o=this,s=new c.a;return n.type=e,i?this.defaultComponentsOptions(n):n.timeWindowConfig||(n.useDashboardTimewindow=!0),n.type===r.m.alarm?n.alarmSource=this.entityService.createAlarmSourceFromSubscriptionInfo(t[0]):n.datasources=this.entityService.createDatasourcesFromSubscriptionsInfo(t),this.createSubscription(n,a).subscribe(function(e){i&&o.defaultSubscriptionOptions(e,n),s.next(e),s.complete()},function(e){s.error(e)}),s.asObservable()},n.prototype.defaultComponentsOptions=function(e){var t=this;e.useDashboardTimewindow=!Object(f.n)(this.widget.config.useDashboardTimewindow)||this.widget.config.useDashboardTimewindow,e.displayTimewindow=Object(f.n)(this.widget.config.displayTimewindow)?this.widget.config.displayTimewindow:!e.useDashboardTimewindow,e.timeWindowConfig=e.useDashboardTimewindow?this.widgetContext.dashboardTimewindow:this.widget.config.timewindow,e.legendConfig=null,this.displayLegend&&(e.legendConfig=this.legendConfig),e.decimals=this.widgetContext.decimals,e.units=this.widgetContext.units,e.callbacks={onDataUpdated:function(){try{t.displayWidgetInstance()&&(t.widgetInstanceInited?t.widgetTypeInstance.onDataUpdated():t.dataUpdatePending=!0)}catch(e){}},onDataUpdateError:function(e,n){t.handleWidgetException(n)},onSubscriptionMessage:function(e,n){t.displayWidgetInstance()&&(t.widgetInstanceInited?t.displayMessage(n.severity,n.message):t.pendingMessage=n)},onInitialPageDataChanged:function(e,n){t.reInit()},forceReInit:function(){t.reInit()},dataLoading:function(e){t.loadingData!==e.loadingData&&(t.loadingData=e.loadingData,t.detectChanges())},legendDataUpdated:function(e,n){n&&t.detectChanges()},timeWindowUpdated:function(e,n){t.ngZone.run(function(){t.widget.config.timewindow=n,t.detectChanges(!0)})}}},n.prototype.defaultSubscriptionOptions=function(e,t){this.displayLegend&&(this.legendData=e.legendData)},n.prototype.createDefaultSubscription=function(){var e,t=this,n=new c.a;if(this.widget.type!==r.m.rpc&&this.widget.type!==r.m.static){var i=this.widgetContext.settings;e={type:this.widget.type,stateData:this.typeParameters.stateData,hasDataPageLink:this.typeParameters.hasDataPageLink,singleEntity:this.typeParameters.singleEntity,warnOnPageDataOverflow:this.typeParameters.warnOnPageDataOverflow,ignoreDataUpdateOnIntervalTick:this.typeParameters.ignoreDataUpdateOnIntervalTick,comparisonEnabled:i.comparisonEnabled,timeForComparison:i.timeForComparison,comparisonCustomIntervalValue:i.comparisonCustomIntervalValue},this.widget.type===r.m.alarm?e.alarmSource=Object(f.e)(this.widget.config.alarmSource):e.datasources=Object(f.e)(this.widget.config.datasources),this.defaultComponentsOptions(e),this.createSubscription(e).subscribe(function(i){t.defaultSubscriptionOptions(i,e),t.widgetContext.datasources=i.datasources,t.widgetContext.data=i.data,t.widgetContext.hiddenData=i.hiddenData,t.widgetContext.timeWindow=i.timeWindow,t.widgetContext.defaultSubscription=i,n.next(),n.complete()},function(e){n.error(e)})}else this.widget.type===r.m.rpc?(this.loadingData=!1,(e={type:this.widget.type,targetDeviceAliasIds:this.widget.config.targetDeviceAliasIds}).callbacks={rpcStateChanged:function(e){t.dynamicWidgetComponent&&(t.dynamicWidgetComponent.rpcEnabled=e.rpcEnabled,t.dynamicWidgetComponent.executingRpcRequest=e.executingRpcRequest,t.detectChanges())},onRpcSuccess:function(e){t.dynamicWidgetComponent&&(t.dynamicWidgetComponent.executingRpcRequest=e.executingRpcRequest,t.dynamicWidgetComponent.rpcErrorText=e.rpcErrorText,t.dynamicWidgetComponent.rpcRejection=e.rpcRejection,t.clearMessage(),t.detectChanges())},onRpcFailed:function(e){t.dynamicWidgetComponent&&(t.dynamicWidgetComponent.executingRpcRequest=e.executingRpcRequest,t.dynamicWidgetComponent.rpcErrorText=e.rpcErrorText,t.dynamicWidgetComponent.rpcRejection=e.rpcRejection,e.rpcErrorText&&t.displayMessage("error",e.rpcErrorText),t.detectChanges())},onRpcErrorCleared:function(e){t.dynamicWidgetComponent&&(t.dynamicWidgetComponent.rpcErrorText=null,t.dynamicWidgetComponent.rpcRejection=null,t.clearMessage(),t.detectChanges())}},this.createSubscription(e).subscribe(function(e){t.widgetContext.defaultSubscription=e,n.next(),n.complete()},function(e){n.error(e)}),this.detectChanges()):this.widget.type===r.m.static?(this.loadingData=!1,n.next(),n.complete(),this.detectChanges()):(n.next(),n.complete(),this.detectChanges());return n.asObservable()},n.prototype.getActionDescriptors=function(e){var t=this.widgetContext.actionsApi.actionDescriptorsBySourceId[e];return t||(t=[]),t},n.prototype.handleWidgetAction=function(e,t,n,i,a,o){var s,l=this,c=t.type,d=t.stateEntityParamName;switch(t.setEntityId&&Object(f.N)(n)&&(s=n),c){case r.d.openDashboardState:case r.d.updateDashboardState:var u=t.targetDashboardStateId,p=Object(f.e)(this.widgetContext.stateController.getStateParams());this.updateEntityParams(p,d,s,i,o),c===r.d.openDashboardState?t.openInSeparateDialog?this.openDashboardStateInSeparateDialog(t.targetDashboardStateId,p,t.dialogTitle,t.dialogHideDashboardToolbar,t.dialogWidth,t.dialogHeight):this.widgetContext.stateController.openState(u,p,t.openRightLayout):this.widgetContext.stateController.updateState(u,p,t.openRightLayout);break;case r.d.openDashboard:var m=t.targetDashboardId;u=t.targetDashboardStateId;var h={params:{}};this.updateEntityParams(h.params,d,s,i,o),u&&(h.id=u);var g=Object(f.F)([h]),A=void 0;A=this.route.snapshot.data.singlePageMode?"/dashboard/"+m+"?state="+g:"/dashboards/"+m+"?state="+g,t.openNewBrowserTab?window.open(A,"_blank"):this.router.navigateByUrl(A);break;case r.d.custom:var b=t.customFunction;if(b&&b.length>0)try{a||(a={}),new Function("$event","widgetContext","entityId","entityName","additionalParams","entityLabel",b)(e,this.widgetContext,n,i,a,o)}catch(I){console.error(I)}break;case r.d.customPretty:var y=t.customFunction,v=t.customHtml,C=t.customCss,x=t.customResources,w="custom-action-pretty-"+t.name.toLowerCase(),S="";Object(f.n)(v)&&v.length>0&&(S=v),this.loadCustomActionResources(w,C,x).subscribe(function(){if(Object(f.n)(y)&&y.length>0)try{a||(a={}),new Function("$event","widgetContext","entityId","entityName","htmlTemplate","additionalParams","entityLabel",y)(e,l.widgetContext,n,i,S,a,o)}catch(I){console.error(I)}},function(e){l.processResourcesLoadErrors(e)});break;case r.d.mobileAction:var E=t.mobileAction;this.handleMobileAction(e,E,n,i,a,o)}},n.prototype.handleMobileAction=function(e,t,n,a,o,s){var l,c=this,p=t.type;switch(p){case r.e.takePictureFromGallery:case r.e.takePhoto:case r.e.scanQrCode:case r.e.getLocation:case r.e.takeScreenshot:l=Object(d.a)([]);break;case r.e.mapDirection:case r.e.mapLocation:var m=t.getLocationFunction,f=new Function("$event","widgetContext","entityId","entityName","additionalParams","entityLabel",m)(e,this.widgetContext,n,a,o,s);l=(l=f&&f instanceof u.a?f:Object(d.a)(f)).pipe(Object(b.a)(function(e){var t=!1;if(Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&(t=!0),t)return e;throw new Error("Location function did not return valid array of latitude/longitude!")}));break;case r.e.makePhoneCall:var h=t.getPhoneNumberFunction,g=new Function("$event","widgetContext","entityId","entityName","additionalParams","entityLabel",h)(e,this.widgetContext,n,a,o,s);l=(l=g&&g instanceof u.a?g.pipe(Object(b.a)(function(e){return[e]})):Object(d.a)([g])).pipe(Object(b.a)(function(e){var t=!1;if(Array.isArray(e)&&1===e.length&&null!==e[0]&&(t=!0),t)return e;throw new Error("Phone number function did not return valid number!")}))}l.subscribe(function(l){var d;(d=c.mobileService).handleWidgetMobileAction.apply(d,Object(i.h)([p],l)).subscribe(function(i){if(i)if(i.hasError)c.handleWidgetMobileActionError(i.error,e,t,n,a,o,s);else if(i.hasResult){var l=i.result;switch(p){case r.e.takePictureFromGallery:case r.e.takePhoto:case r.e.takeScreenshot:var d=l.imageUrl;if(t.processImageFunction&&t.processImageFunction.length)try{new Function("imageUrl","$event","widgetContext","entityId","entityName","additionalParams","entityLabel",t.processImageFunction)(d,e,c.widgetContext,n,a,o,s)}catch(A){console.error(A)}break;case r.e.scanQrCode:var u=l.code,m=l.format;if(t.processQrCodeFunction&&t.processQrCodeFunction.length)try{new Function("code","format","$event","widgetContext","entityId","entityName","additionalParams","entityLabel",t.processQrCodeFunction)(u,m,e,c.widgetContext,n,a,o,s)}catch(A){console.error(A)}break;case r.e.getLocation:var f=l.latitude,h=l.longitude;if(t.processLocationFunction&&t.processLocationFunction.length)try{new Function("latitude","longitude","$event","widgetContext","entityId","entityName","additionalParams","entityLabel",t.processLocationFunction)(f,h,e,c.widgetContext,n,a,o,s)}catch(A){console.error(A)}break;case r.e.mapDirection:case r.e.mapLocation:case r.e.makePhoneCall:var g=l.launched;if(t.processLaunchResultFunction&&t.processLaunchResultFunction.length)try{new Function("launched","$event","widgetContext","entityId","entityName","additionalParams","entityLabel",t.processLaunchResultFunction)(g,e,c.widgetContext,n,a,o,s)}catch(A){console.error(A)}}}else if(t.handleEmptyResultFunction&&t.handleEmptyResultFunction.length)try{new Function("$event","widgetContext","entityId","entityName","additionalParams","entityLabel",t.handleEmptyResultFunction)(e,c.widgetContext,n,a,o,s)}catch(A){console.error(A)}})},function(i){var r;i&&"string"==typeof i?r=i:i&&i.message&&(r=i.message),r="Failed to get mobile action arguments"+(r?": "+r:"!"),c.handleWidgetMobileActionError(r,e,t,n,a,o,s)})},n.prototype.handleWidgetMobileActionError=function(e,t,n,i,a,r,o){if(n.handleErrorFunction&&n.handleErrorFunction.length)try{new Function("error","$event","widgetContext","entityId","entityName","additionalParams","entityLabel",n.handleErrorFunction)(e,t,this.widgetContext,i,a,r,o)}catch(s){console.error(s)}},n.prototype.openDashboardStateInSeparateDialog=function(e,t,n,i,a,r){void 0===i&&(i=!0);var o=Object(f.e)(this.widgetContext.stateController.dashboardCtrl.dashboardCtx.getDashboard()),s={};s.params=t,e&&(s.id=e);var l=n;if(!l&&e&&o.configuration.states){var c=o.configuration.states[e];c&&(l=c.name)}l||(l=o.title),l=this.utils.customTranslation(l,l);var d=t&&t.entityName?t.entityName:"",u=t&&t.entityLabel?t.entityLabel:"";l=Object(f.m)(l,"entityName",d),l=Object(f.m)(l,"entityLabel",u);for(var p=0,m=Object.keys(t);p<m.length;p++){var h=m[p];t[h]&&t[h].entityName&&(l=Object(f.m)(l,h+":entityName",t[h].entityName)),t[h]&&t[h].entityLabel&&(l=Object(f.m)(l,h+":entityLabel",t[h].entityLabel))}this.dialog.open(this.embedDashboardDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{dashboard:o,state:Object(f.E)([s]),title:l,hideToolbar:i,width:a,height:r}})},n.prototype.elementClick=function(t){var n=t.target||t.srcElement,i=this.getActionDescriptors("elementClick");if(i.length){var a=i.map(function(e){return"#"+e.name}).join(","),r=e(n).closest(a,this.widgetContext.$container[0]);if(r.length&&r[0].id){t.stopPropagation();var o=i.find(function(e){return e.name===r[0].id}),s=this.getActiveEntityInfo(),l=s?s.entityId:null,c=s?s.entityName:null,d=s&&s.entityLabel?s.entityLabel:null;this.handleWidgetAction(t,o,l,c,null,d)}}},n.prototype.updateEntityParams=function(e,t,n,i,a){if(n){var r=void 0;t&&t.length?(r=e[t])||(r={},e[t]=r,e.targetEntityParamName=t):r=e,r.entityId=n,i&&(r.entityName=i),a&&(r.entityLabel=a)}},n.prototype.loadCustomActionResources=function(e,t,n){var i=this;Object(f.n)(t)&&t.length>0&&(this.cssParser.cssPreviewNamespace=e,this.cssParser.createStyleElement(e,t,"nonamespace"));var a=[];return Object(f.n)(n)&&n.length>0?(n.forEach(function(e){a.push(i.resources.loadResource(e.url).pipe(Object(y.a)(function(t){return Object(d.a)("Failed to load custom action resource: '"+e.url+"'")})))}),Object(p.a)(a).pipe(Object(v.a)(function(e){var t;return e&&e.length&&(t=e.filter(function(e){return e&&e.length>0})),t&&t.length?Object(m.a)(t):Object(d.a)(null)}))):Object(d.a)(null)},n.prototype.processResourcesLoadErrors=function(e){var t="";e.forEach(function(e){t+="<div>"+e+"</div>"}),this.store.dispatch(new C.b({message:t,type:"error"}))},n.prototype.getActiveEntityInfo=function(){var e=this.widgetContext.activeEntityInfo;if(!e)for(var t=0,n=Object.keys(this.widgetContext.subscriptions);t<n.length;t++){var i=n[t];if(e=this.widgetContext.subscriptions[i].getFirstEntityInfo())break}return e},n.prototype.checkSize=function(){var e=this.widgetContext.$containerParent.width(),t=this.widgetContext.$containerParent.height(),n=!1;return this.widgetContext.width&&this.widgetContext.width===e&&this.widgetContext.height&&this.widgetContext.height===t||e>0&&t>0&&(this.widgetContext.$container&&(this.widgetContext.$container.css("height",t+"px"),this.widgetContext.$container.css("width",e+"px")),this.widgetContext.width=e,this.widgetContext.height=t,n=!0,this.widgetSizeDetected=!0),n},n.\u0275fac=function(e){return new(e||n)(a["\u0275\u0275directiveInject"](L.Store),a["\u0275\u0275directiveInject"](j.ActivatedRoute),a["\u0275\u0275directiveInject"](j.Router),a["\u0275\u0275directiveInject"](S.a),a["\u0275\u0275directiveInject"](a.ComponentFactoryResolver),a["\u0275\u0275directiveInject"](a.ElementRef),a["\u0275\u0275directiveInject"](a.Injector),a["\u0275\u0275directiveInject"](N.MatDialog),a["\u0275\u0275directiveInject"](D.a),a["\u0275\u0275directiveInject"](s.a),a["\u0275\u0275directiveInject"](A.a),a["\u0275\u0275directiveInject"](x.a),a["\u0275\u0275directiveInject"](w.a),a["\u0275\u0275directiveInject"](T.a),a["\u0275\u0275directiveInject"](I.a),a["\u0275\u0275directiveInject"](M.a),a["\u0275\u0275directiveInject"](P.a),a["\u0275\u0275directiveInject"](R.TranslateService),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](k.a),a["\u0275\u0275directiveInject"](_.a),a["\u0275\u0275directiveInject"](E.a),a["\u0275\u0275directiveInject"](a.NgZone),a["\u0275\u0275directiveInject"](a.ChangeDetectorRef))},n.\u0275cmp=a["\u0275\u0275defineComponent"]({type:n,selectors:[["tb-widget"]],viewQuery:function(e,t){if(1&e&&a["\u0275\u0275viewQuery"](q,3,a.ViewContainerRef),2&e){var n;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.widgetContentContainer=n.first)}},inputs:{isEdit:"isEdit",isMobile:"isMobile",dashboardWidget:"dashboardWidget"},features:[a["\u0275\u0275InheritDefinitionFeature"],a["\u0275\u0275NgOnChangesFeature"]],decls:11,vars:7,consts:[["tb-toast","",1,"tb-absolute-fill",3,"fxLayout","toastTarget"],[3,"ngStyle","legendConfig","legendData","legendKeyHiddenChange",4,"ngIf"],["fxFlex","","id","widget-container"],["widgetContent",""],["class","tb-absolute-fill tb-widget-error",4,"ngIf"],["class","tb-absolute-fill tb-widget-no-data",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"tb-absolute-fill","tb-widget-loading",3,"fxShow"],["color","accent","md-mode","indeterminate","diameter","40"],["id","pieChart"],[3,"ngStyle","legendConfig","legendData","legendKeyHiddenChange"],[1,"tb-absolute-fill","tb-widget-error"],[1,"tb-absolute-fill","tb-widget-no-data"],["fxLayoutAlign","center center","translate","",1,"tb-absolute-fill",2,"display","flex"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275template"](1,z,1,3,"tb-legend",1),a["\u0275\u0275elementStart"](2,"div",2),a["\u0275\u0275elementContainer"](3,null,3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](5,W,1,3,"tb-legend",1),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](6,X,3,1,"div",4),a["\u0275\u0275template"](7,$,3,0,"div",5),a["\u0275\u0275elementStart"](8,"div",6),a["\u0275\u0275element"](9,"mat-spinner",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](10,"canvas",8)),2&e&&(a["\u0275\u0275propertyInterpolate"]("toastTarget",t.toastTargetId),a["\u0275\u0275property"]("fxLayout",t.legendContainerLayoutType),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.displayLegend&&t.isLegendFirst),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",t.displayLegend&&!t.isLegendFirst),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.widgetErrorData),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.displayNoData),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",t.loadingData))},directives:[U.b,V.f,Q.NgIf,V.b,V.e,G.d,H.MatSpinner,K.a,Q.NgStyle,G.e,R.TranslateDirective],styles:[".tb-widget .tb-widget-error{display:flex;align-items:center;justify-content:center;background:hsla(0,0%,100%,.5)}.tb-widget .tb-widget-error span{color:red}.tb-widget .tb-widget-no-data{display:flex;align-items:center;justify-content:center;background:hsla(0,0%,100%,.75)}.tb-widget .tb-widget-no-data span{color:#000;text-align:center}.tb-widget .tb-widget-loading{z-index:3;background:hsla(0,0%,100%,.15)}.tb-widget .tb-widget-error-container{position:absolute;width:100%;height:100%;background-color:#fff}.tb-widget .tb-widget-error-msg{padding:5px;font-size:16px;color:red;word-wrap:break-word}.tb-widget #widget-container{min-height:0;min-width:0}.tb-widget #widget-container canvas{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.tb-widget #widget-container canvas::-moz-selection{background-color:transparent}.tb-widget #widget-container canvas::-moz-selection,.tb-widget #widget-container canvas::selection{background-color:transparent}"],encapsulation:2,changeDetection:0}),n}(o.a);0,void 0}).call(this,n("xexB"))},nkFp:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return xe});var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=(n("0G7Z"),n("OiFK")),s=n("//Q6"),l=n("Neop"),c=n("mbhL"),d=n("4r/P"),u=n("0EQZ"),p=n("xgIS"),m=n("VRyK"),f=n("cp0P"),h=n("2Vo4"),g=n("Duvn"),A=n("U3y+"),b=n("Kj3r"),y=n("/uUt"),v=n("vkgz"),C=n("lJxs"),x=n("IzEk"),w=n("M9IT"),S=n("Dh3D"),E=n("fr2l"),I=n("rDax"),O=n("+rOU"),T=n("A6E3"),F=n("UZbx"),B=n("10j8"),M=n("oKkZ"),P=n("S+vS"),D=n("7ZKe"),k=n("xw5a"),_=n("3Tyt"),L=n("1iWl"),j=n("6OOC"),N=n("l7P3"),R=n("sYmb"),U=n("jhN1"),V=n("ofXK"),Q=n("0IaG"),G=n("XiUz"),H=n("/t3+"),K=n("znSr"),q=n("bTqV"),z=n("Qu3c"),W=n("NFeN"),X=n("kmnG"),$=n("qFsG"),J=n("3Pt+"),Y=n("+0xr"),Z=n("bSwM"),ee=n("STbY"),te=n("f0Cb"),ne=["searchInput"];function ie(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",11),a["\u0275\u0275listener"]("click",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().ackAlarms(e)}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementStart"](3,"mat-icon"),a["\u0275\u0275text"](4,"done"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](2,4,"alarm.acknowledge")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,i.isLoading$))}}function ae(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-header-cell",27),a["\u0275\u0275elementStart"](1,"mat-checkbox",28),a["\u0275\u0275listener"]("change",function(e){a["\u0275\u0275restoreView"](n);var t=a["\u0275\u0275nextContext"]();return e?t.alarmsDatasource.masterToggle():null}),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275pipe"](3,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("checked",i.alarmsDatasource.selection.hasValue()&&a["\u0275\u0275pipeBind1"](2,2,i.alarmsDatasource.isAllSelected()))("indeterminate",i.alarmsDatasource.selection.hasValue()&&!a["\u0275\u0275pipeBind1"](3,4,i.alarmsDatasource.isAllSelected()))}}function re(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275elementStart"](1,"mat-checkbox",29),a["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()})("change",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit,r=a["\u0275\u0275nextContext"]();return e?r.alarmsDatasource.toggleSelection(i):null}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("checked",r.alarmsDatasource.isSelected(i))}}function oe(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",33),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]().$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle",i.headerStyle(n))("disabled",i.isSorting(n)),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.title," ")}}function se(e,t){if(1&e&&a["\u0275\u0275element"](0,"mat-cell",34),2&e){var n=t.$implicit,i=t.index,r=a["\u0275\u0275nextContext"]().$implicit,o=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("innerHTML",o.cellContent(n,r,i),a["\u0275\u0275sanitizeHtml"])("ngStyle",o.cellStyle(n,r,i))}}function le(e,t){if(1&e&&(a["\u0275\u0275elementContainerStart"](0,30),a["\u0275\u0275template"](1,oe,2,3,"mat-header-cell",31),a["\u0275\u0275template"](2,se,1,2,"mat-cell",32),a["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275property"]("matColumnDef",n.def)}}var ce=function(e,t,n){return{minWidth:e,maxWidth:t,width:n}};function de(e,t){if(1&e&&a["\u0275\u0275element"](0,"mat-header-cell",35),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle.gt-md",a["\u0275\u0275pureFunction3"](1,ce,40*n.actionCellDescriptors.length+"px",40*n.actionCellDescriptors.length+"px",40*n.actionCellDescriptors.length+"px"))}}function ue(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",11),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit,r=a["\u0275\u0275nextContext"]().$implicit;return a["\u0275\u0275nextContext"]().onActionButtonClick(e,r,i)}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=a["\u0275\u0275nextContext"]().$implicit,o=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("matTooltip",i.displayName),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,3,o.isLoading$)||!o.actionEnabled(r,i)),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](i.icon)}}function pe(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",45),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit,r=a["\u0275\u0275nextContext"](2).$implicit;return a["\u0275\u0275nextContext"]().onActionButtonClick(e,r,i)}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"span"),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=a["\u0275\u0275nextContext"](2).$implicit,o=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,3,o.isLoading$)||!o.actionEnabled(r,i)),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](i.icon),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](i.displayName)}}function me(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",39),a["\u0275\u0275elementStart"](1,"button",40),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var t=a["\u0275\u0275nextContext"](2);return e.stopPropagation(),t.ctx.detectChanges()}),a["\u0275\u0275elementStart"](2,"mat-icon",41),a["\u0275\u0275text"](3,"more_vert"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"mat-menu",42,43),a["\u0275\u0275template"](6,pe,6,5,"button",44),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275reference"](5),r=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("matMenuTriggerFor",i),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngForOf",r.actionCellDescriptors)("ngForTrackBy",r.trackByActionCellDescriptionId)}}function fe(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-cell",35),a["\u0275\u0275elementStart"](1,"div",36),a["\u0275\u0275template"](2,ue,4,5,"button",37),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](3,me,7,3,"div",38),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle.gt-md",a["\u0275\u0275pureFunction3"](4,ce,40*n.actionCellDescriptors.length+"px",40*n.actionCellDescriptors.length+"px",40*n.actionCellDescriptors.length+"px")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",n.actionCellDescriptors)("ngForTrackBy",n.trackByActionCellDescriptionId),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.actionCellDescriptors.length)}}var he=function(e){return{"mat-row-select":e}};function ge(e,t){if(1&e&&a["\u0275\u0275element"](0,"mat-header-row",46),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](1,he,n.enableSelection))}}var Ae=function(e,t,n,i){return{"mat-row-select":e,"mat-selected":t,"tb-current-entity":n,invisible:i}};function be(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-row",47),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit;return a["\u0275\u0275nextContext"]().onRowClick(e,i)}),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=t.index,o=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction4"](2,Ae,o.enableSelection,o.alarmsDatasource.isSelected(i),o.alarmsDatasource.isCurrentAlarm(i),o.alarmsDatasource.dataLoading))("ngStyle",o.rowStyle(i,r))}}function ye(e,t){1&e&&a["\u0275\u0275element"](0,"mat-divider")}function ve(e,t){if(1&e&&(a["\u0275\u0275element"](0,"mat-paginator",48),a["\u0275\u0275pipe"](1,"async")),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("length",a["\u0275\u0275pipeBind1"](1,4,n.alarmsDatasource.total()))("pageIndex",n.pageLink.page)("pageSize",n.pageLink.pageSize)("pageSizeOptions",n.pageSizeOptions)}}var Ce=function(e){return{count:e}},xe=function(t){function n(e,n,i,a,r,o,s,l,c,d,u,p){var m=t.call(this,e)||this;return m.store=e,m.elementRef=n,m.ngZone=i,m.overlay=a,m.viewContainerRef=r,m.utils=o,m.translate=s,m.domSanitizer=l,m.datePipe=c,m.dialog=d,m.dialogService=u,m.alarmService=p,m.enableSelection=!0,m.displayPagination=!0,m.enableStickyHeader=!0,m.enableStickyAction=!1,m.textSearchMode=!1,m.columns=[],m.displayedColumns=[],m.actionCellDescriptors=[],m.cellContentCache=[],m.cellStyleCache=[],m.rowStyleCache=[],m.displayDetails=!0,m.allowAcknowledgment=!0,m.allowClear=!0,m.defaultPageSize=10,m.defaultSortOrder="-"+F.e.createdTime.value,m.contentsInfo={},m.stylesInfo={},m.columnWidth={},m.columnDefaultVisibility={},m.columnSelectionAvailability={},m.searchAction={name:"action.search",show:!0,icon:"search",onAction:function(){m.enterFilterMode()}},m.columnDisplayAction={name:"entity.columns-to-display",show:!0,icon:"view_column",onAction:function(e){m.editColumnsToDisplay(e)}},m.alarmFilterAction={name:"alarm.alarm-filter",show:!0,onAction:function(e){m.editAlarmFilter(e)},icon:"filter_list"},m.pageLink={page:0,pageSize:m.defaultPageSize,textSearch:null},m}return Object(i.d)(n,t),n.prototype.ngOnInit=function(){this.ctx.$scope.alarmsTableWidget=this,this.settings=this.ctx.settings,this.widgetConfig=this.ctx.widgetConfig,this.subscription=this.ctx.defaultSubscription,this.initializeConfig(),this.updateAlarmSource(),this.ctx.updateWidgetParams()},n.prototype.ngAfterViewInit=function(){var e=this;Object(p.a)(this.searchInputField.nativeElement,"keyup").pipe(Object(b.a)(150),Object(y.a)(),Object(v.a)(function(){e.displayPagination&&(e.paginator.pageIndex=0),e.updateData()})).subscribe(),this.displayPagination&&this.sort.sortChange.subscribe(function(){return e.paginator.pageIndex=0}),(this.displayPagination?Object(m.a)(this.sort.sortChange,this.paginator.page):this.sort.sortChange).pipe(Object(v.a)(function(){return e.updateData()})).subscribe(),this.updateData()},n.prototype.onDataUpdated=function(){this.updateTitle(!0),this.alarmsDatasource.updateAlarms(),this.clearCache(),this.ctx.detectChanges()},n.prototype.pageLinkSortDirection=function(){return Object(k.r)(this.pageLink)},n.prototype.initializeConfig=function(){var t;this.ctx.widgetActions=[this.searchAction,this.alarmFilterAction,this.columnDisplayAction],this.displayDetails=!Object(s.n)(this.settings.displayDetails)||this.settings.displayDetails,this.allowAcknowledgment=!Object(s.n)(this.settings.allowAcknowledgment)||this.settings.allowAcknowledgment,this.allowClear=!Object(s.n)(this.settings.allowClear)||this.settings.allowClear,this.displayDetails&&this.actionCellDescriptors.push({displayName:this.translate.instant("alarm.details"),icon:"more_horiz",details:!0}),this.allowAcknowledgment&&this.actionCellDescriptors.push({displayName:this.translate.instant("alarm.acknowledge"),icon:"done",acknowledge:!0}),this.allowClear&&this.actionCellDescriptors.push({displayName:this.translate.instant("alarm.clear"),icon:"clear",clear:!0}),this.actionCellDescriptors=this.actionCellDescriptors.concat(this.ctx.actionsApi.getActionDescriptors("actionCellButton")),this.settings.alarmsTitle&&this.settings.alarmsTitle.length?this.alarmsTitlePattern=this.utils.customTranslation(this.settings.alarmsTitle,this.settings.alarmsTitle):this.alarmsTitlePattern=this.translate.instant("alarm.alarms"),this.updateTitle(!1),this.enableSelection=!Object(s.n)(this.settings.enableSelection)||this.settings.enableSelection,this.allowAcknowledgment||this.allowClear||(this.enableSelection=!1),this.searchAction.show=!Object(s.n)(this.settings.enableSearch)||this.settings.enableSearch,this.displayPagination=!Object(s.n)(this.settings.displayPagination)||this.settings.displayPagination,this.enableStickyHeader=!Object(s.n)(this.settings.enableStickyHeader)||this.settings.enableStickyHeader,this.enableStickyAction=!!Object(s.n)(this.settings.enableStickyAction)&&this.settings.enableStickyAction,this.columnDisplayAction.show=!Object(s.n)(this.settings.enableSelectColumnDisplay)||this.settings.enableSelectColumnDisplay,t=Object(s.n)(this.settings.enableFilter)?this.settings.enableFilter:!Object(s.n)(this.settings.enableStatusFilter)||this.settings.enableStatusFilter,this.alarmFilterAction.show=t,this.rowStylesInfo=Object(E.m)(this.settings,"alarm, ctx");var n=this.settings.defaultPageSize;Object(s.n)(n)&&Object(s.x)(n)&&n>0&&(this.defaultPageSize=n),this.pageSizeOptions=[this.defaultPageSize,2*this.defaultPageSize,3*this.defaultPageSize],this.pageLink.pageSize=this.displayPagination?this.defaultPageSize:1024,this.pageLink.searchPropagatedAlarms=!Object(s.n)(this.widgetConfig.searchPropagatedAlarms)||this.widgetConfig.searchPropagatedAlarms;var i=[];Object(s.n)(this.widgetConfig.alarmStatusList)&&this.widgetConfig.alarmStatusList.length?i=this.widgetConfig.alarmStatusList:Object(s.n)(this.widgetConfig.alarmSearchStatus)&&this.widgetConfig.alarmSearchStatus!==F.b.ANY&&(i=[this.widgetConfig.alarmSearchStatus]),this.pageLink.statusList=i,this.pageLink.severityList=Object(s.n)(this.widgetConfig.alarmSeverityList)?this.widgetConfig.alarmSeverityList:[],this.pageLink.typeList=Object(s.n)(this.widgetConfig.alarmTypeList)?this.widgetConfig.alarmTypeList:[];var a=Object(E.a)(this.widgetConfig),r=new l.a;r.testMode=!1;var o="alarms-table-"+Object(s.l)(a);r.cssPreviewNamespace=o,r.createStyleElement(o,a),e(this.elementRef.nativeElement).addClass(o)},n.prototype.updateTitle=function(e){void 0===e&&(e=!1);var t=Object(s.d)(this.subscription.alarmSource,this.alarmsTitlePattern);this.ctx.widgetTitle!==t&&(this.ctx.widgetTitle=t,e&&this.ctx.updateWidgetParams())},n.prototype.updateAlarmSource=function(){var e,t=this;this.enableSelection&&this.displayedColumns.push("select");var n,i=[];this.subscription.alarmSource&&(this.subscription.alarmSource.dataKeys.forEach(function(e){var n=Object(s.e)(e);n.entityKey=Object(k.n)(e),n.label=t.utils.customTranslation(n.label,n.label),n.title=n.label,n.def="def"+t.columns.length;var a=n.settings;if(n.type===_.h.alarm&&!Object(s.n)(a.columnWidth)){var r=F.e[n.name];r&&r.time&&(a.columnWidth="120px")}t.stylesInfo[n.def]=Object(E.h)(a,"value, alarm, ctx"),t.contentsInfo[n.def]=Object(E.g)(a,"value, alarm, ctx"),t.contentsInfo[n.def].units=n.units,t.contentsInfo[n.def].decimals=n.decimals,t.columnWidth[n.def]=Object(E.k)(a),t.columnDefaultVisibility[n.def]=Object(E.i)(a),t.columnSelectionAvailability[n.def]=Object(E.j)(a),t.columns.push(n),n.type!==_.h.alarm&&i.push(n)}),(e=this.displayedColumns).push.apply(e,this.columns.filter(function(e){return t.columnDefaultVisibility[e.def]}).map(function(e){return e.def}))),this.settings.defaultSortOrder&&this.settings.defaultSortOrder.length&&(this.defaultSortOrder=this.utils.customTranslation(this.settings.defaultSortOrder,this.settings.defaultSortOrder)),this.pageLink.sortOrder=Object(E.b)(this.defaultSortOrder,this.columns),this.pageLink.sortOrder&&(n=Object(E.c)(this.pageLink.sortOrder.key,this.columns)),this.sortOrderProperty=n?n.def:null,this.actionCellDescriptors.length&&this.displayedColumns.push("actions"),this.alarmsDatasource=new we(this.subscription,i,this.ngZone),this.enableSelection&&this.alarmsDatasource.selectionModeChanged$.subscribe(function(e){var n=e||t.textSearchMode;t.ctx.hideTitlePanel!==n?(t.ctx.hideTitlePanel=n,t.ctx.detectChanges(!0)):t.ctx.detectChanges()})},n.prototype.editColumnsToDisplay=function(e){var t=this;e&&e.stopPropagation();var n=e.target||e.srcElement||e.currentTarget,i=new I.OverlayConfig;i.backdropClass="cdk-overlay-transparent-backdrop",i.hasBackdrop=!0;i.positionStrategy=this.overlay.position().flexibleConnectedTo(n).withPositions([{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}]);var r=this.overlay.create(i);r.backdropClick().subscribe(function(){r.dispose()});var o=this.columns.map(function(e){return{title:e.title,def:e.def,display:t.displayedColumns.indexOf(e.def)>-1,selectable:t.columnSelectionAvailability[e.def]}}),s=[{provide:T.a,useValue:{columns:o,columnsUpdated:function(e){t.displayedColumns=e.filter(function(e){return e.display}).map(function(e){return e.def}),t.enableSelection&&t.displayedColumns.unshift("select"),t.actionCellDescriptors.length&&t.displayedColumns.push("actions"),t.clearCache()}}},{provide:I.OverlayRef,useValue:r}],l=a.Injector.create({parent:this.viewContainerRef.injector,providers:s});r.attach(new O.ComponentPortal(T.b,this.viewContainerRef,l)),this.ctx.detectChanges()},n.prototype.editAlarmFilter=function(e){var t=this;e&&e.stopPropagation();var n=e.target||e.srcElement||e.currentTarget,i=new I.OverlayConfig;i.backdropClass="cdk-overlay-transparent-backdrop",i.hasBackdrop=!0;i.positionStrategy=this.overlay.position().flexibleConnectedTo(n).withPositions([{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}]);var r=this.overlay.create(i);r.backdropClick().subscribe(function(){r.dispose()});var o=[{provide:L.a,useValue:{statusList:this.pageLink.statusList,severityList:this.pageLink.severityList,typeList:this.pageLink.typeList}},{provide:I.OverlayRef,useValue:r}],s=a.Injector.create({parent:this.viewContainerRef.injector,providers:o}),l=r.attach(new O.ComponentPortal(L.b,this.viewContainerRef,s));l.onDestroy(function(){if(l.instance.result){var e=l.instance.result;t.pageLink.statusList=e.statusList,t.pageLink.severityList=e.severityList,t.pageLink.typeList=e.typeList,t.updateData()}}),this.ctx.detectChanges()},n.prototype.enterFilterMode=function(){var e=this;this.textSearchMode=!0,this.pageLink.textSearch="",this.ctx.hideTitlePanel=!0,this.ctx.detectChanges(!0),setTimeout(function(){e.searchInputField.nativeElement.focus(),e.searchInputField.nativeElement.setSelectionRange(0,0)},10)},n.prototype.exitFilterMode=function(){this.textSearchMode=!1,this.pageLink.textSearch=null,this.displayPagination&&(this.paginator.pageIndex=0),this.updateData(),this.ctx.hideTitlePanel=!1,this.ctx.detectChanges(!0)},n.prototype.updateData=function(){this.displayPagination?(this.pageLink.page=this.paginator.pageIndex,this.pageLink.pageSize=this.paginator.pageSize):this.pageLink.page=0;var e=Object(E.d)(this.sort.active,this.columns);this.pageLink.sortOrder=e?{key:e,direction:d.a[this.sort.direction.toUpperCase()]}:null;var t=Object(E.e)(this.sort.active,this.columns);this.alarmsDatasource.loadAlarms(this.pageLink,t,null),this.ctx.detectChanges()},n.prototype.trackByColumnDef=function(e,t){return t.def},n.prototype.trackByAlarmId=function(e,t){return t.id.id},n.prototype.trackByActionCellDescriptionId=function(e,t){return t.id},n.prototype.headerStyle=function(e){var t=this.columnWidth[e.def];return Object(E.n)(t)},n.prototype.rowStyle=function(e,t){var n=this.rowStyleCache[t];if(!n){if(n={},e&&this.rowStylesInfo.useRowStyleFunction&&this.rowStylesInfo.rowStyleFunction)try{if(n=this.rowStylesInfo.rowStyleFunction(e,this.ctx),!Object(s.z)(n))throw new TypeError((null===n?"null":typeof n)+" instead of style object");if(Array.isArray(n))throw new TypeError("Array instead of style object")}catch(i){n={},console.warn("Row style function in widget '"+this.ctx.widgetTitle+"' returns '"+i+"'. Please check your row style function.")}this.rowStyleCache[t]=n}return n},n.prototype.cellStyle=function(e,t,n){var i=this.columns.indexOf(t),a=n*this.columns.length+i,r=this.cellStyleCache[a];if(!r){if(r={},e&&t){var o=this.stylesInfo[t.def],l=Object(E.f)(e,t);if(o.useCellStyleFunction&&o.cellStyleFunction)try{if(r=o.cellStyleFunction(l,e,this.ctx),!Object(s.z)(r))throw new TypeError((null===r?"null":typeof r)+" instead of style object");if(Array.isArray(r))throw new TypeError("Array instead of style object")}catch(d){r={},console.warn("Cell style function for data key '"+t.label+"' in widget '"+this.ctx.widgetTitle+"' returns '"+d+"'. Please check your cell style function.")}else r=this.defaultStyle(t,l)}this.cellStyleCache[a]=r}if(!r.width){var c=this.columnWidth[t.def];r=Object.assign(r,Object(E.n)(c))}return r},n.prototype.cellContent=function(e,t,n){var i=this.columns.indexOf(t),a=n*this.columns.length+i,r=this.cellContentCache[a];if(Object(s.B)(r)){if(r="",e&&t){var o=this.contentsInfo[t.def],l=Object(E.f)(e,t),c="";if(o.useCellContentFunction&&o.cellContentFunction)try{c=o.cellContentFunction(l,e,this.ctx)}catch(d){c=""+l}else c=this.defaultContent(t,o,l);if(Object(s.n)(c))switch(typeof(c=this.utils.customTranslation(c,c))){case"string":r=this.domSanitizer.bypassSecurityTrustHtml(c);break;default:r=c}}this.cellContentCache[a]=r}return r},n.prototype.onRowClick=function(e,t){e&&e.stopPropagation(),this.alarmsDatasource.toggleCurrentAlarm(t);var n=this.ctx.actionsApi.getActionDescriptors("rowClick");if(n.length){var i=void 0,a=void 0;t&&t.originator&&(i=t.originator,a=t.originatorName),this.ctx.actionsApi.handleWidgetAction(e,n[0],i,a,{alarm:t})}},n.prototype.onActionButtonClick=function(e,t,n){if(n.details)this.openAlarmDetails(e,t);else if(n.acknowledge)this.ackAlarm(e,t);else if(n.clear)this.clearAlarm(e,t);else{e&&e.stopPropagation();var i=void 0,a=void 0;t&&t.originator&&(i=t.originator,a=t.originatorName),this.ctx.actionsApi.handleWidgetAction(e,n,i,a,{alarm:t})}},n.prototype.actionEnabled=function(e,t){return t.acknowledge?e.status===F.d.ACTIVE_UNACK||e.status===F.d.CLEARED_UNACK:!t.clear||(e.status===F.d.ACTIVE_ACK||e.status===F.d.ACTIVE_UNACK)},n.prototype.openAlarmDetails=function(e,t){var n=this;e&&e.stopPropagation(),t&&t.id&&t.id.id!==M.a&&this.dialog.open(B.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{alarmId:t.id.id,allowAcknowledgment:this.allowAcknowledgment,allowClear:this.allowClear,displayDetails:!0}}).afterClosed().subscribe(function(e){e&&n.subscription.update()})},n.prototype.ackAlarm=function(e,t){var n=this;e&&e.stopPropagation(),t&&t.id&&t.id.id!==M.a&&this.dialogService.confirm(this.translate.instant("alarm.aknowledge-alarm-title"),this.translate.instant("alarm.aknowledge-alarm-text"),this.translate.instant("action.no"),this.translate.instant("action.yes")).subscribe(function(e){e&&e&&n.alarmService.ackAlarm(t.id.id).subscribe(function(){n.subscription.update()})})},n.prototype.ackAlarms=function(e){var t=this;if(e&&e.stopPropagation(),this.alarmsDatasource.selection.hasValue()){var n=this.alarmsDatasource.selection.selected.filter(function(e){return e!==M.a});if(n.length){var i=this.translate.instant("alarm.aknowledge-alarms-title",{count:n.length}),a=this.translate.instant("alarm.aknowledge-alarms-text",{count:n.length});this.dialogService.confirm(i,a,this.translate.instant("action.no"),this.translate.instant("action.yes")).subscribe(function(e){if(e&&e){for(var i=[],a=0,r=n;a<r.length;a++){var o=r[a];i.push(t.alarmService.ackAlarm(o))}Object(f.a)(i).subscribe(function(){t.alarmsDatasource.clearSelection(),t.subscription.update()})}})}}},n.prototype.clearAlarm=function(e,t){var n=this;e&&e.stopPropagation(),t&&t.id&&t.id.id!==M.a&&this.dialogService.confirm(this.translate.instant("alarm.clear-alarm-title"),this.translate.instant("alarm.clear-alarm-text"),this.translate.instant("action.no"),this.translate.instant("action.yes")).subscribe(function(e){e&&e&&n.alarmService.clearAlarm(t.id.id).subscribe(function(){n.subscription.update()})})},n.prototype.clearAlarms=function(e){var t=this;if(e&&e.stopPropagation(),this.alarmsDatasource.selection.hasValue()){var n=this.alarmsDatasource.selection.selected.filter(function(e){return e!==M.a});if(n.length){var i=this.translate.instant("alarm.clear-alarms-title",{count:n.length}),a=this.translate.instant("alarm.clear-alarms-text",{count:n.length});this.dialogService.confirm(i,a,this.translate.instant("action.no"),this.translate.instant("action.yes")).subscribe(function(e){if(e&&e){for(var i=[],a=0,r=n;a<r.length;a++){var o=r[a];i.push(t.alarmService.clearAlarm(o))}Object(f.a)(i).subscribe(function(){t.alarmsDatasource.clearSelection(),t.subscription.update()})}})}}},n.prototype.defaultContent=function(e,t,n){if(Object(s.n)(n)){var i=F.e[e.name];if(i)return i.time?n?this.datePipe.transform(n,"yyyy-MM-dd HH:mm:ss"):"":i.value===F.e.severity.value?this.translate.instant(F.h.get(n)):i.value===F.e.status.value?this.translate.instant(F.i.get(n)):i.value===F.e.originatorType.value?this.translate.instant(A.d.get(n).type):n;var a=j.a[e.name];if(a&&a.time)return this.datePipe.transform(n,"yyyy-MM-dd HH:mm:ss");var r=t.decimals||0===t.decimals?t.decimals:this.ctx.widgetConfig.decimals,o=t.units||this.ctx.widgetConfig.units;return this.ctx.utils.formatValue(n,r,o,!0)}return""},n.prototype.defaultStyle=function(e,t){if(Object(s.n)(t)){var n=F.e[e.name];return n&&n.value===F.e.severity.value?{fontWeight:"bold",color:F.g.get(t)}:{}}return{}},n.prototype.isSorting=function(e){return e.type===_.h.alarm&&e.name.startsWith("details.")},n.prototype.clearCache=function(){this.cellContentCache.length=0,this.cellStyleCache.length=0,this.rowStyleCache.length=0},n.\u0275fac=function(e){return new(e||n)(a["\u0275\u0275directiveInject"](N.Store),a["\u0275\u0275directiveInject"](a.ElementRef),a["\u0275\u0275directiveInject"](a.NgZone),a["\u0275\u0275directiveInject"](I.Overlay),a["\u0275\u0275directiveInject"](a.ViewContainerRef),a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](R.TranslateService),a["\u0275\u0275directiveInject"](U.DomSanitizer),a["\u0275\u0275directiveInject"](V.DatePipe),a["\u0275\u0275directiveInject"](Q.MatDialog),a["\u0275\u0275directiveInject"](P.a),a["\u0275\u0275directiveInject"](D.a))},n.\u0275cmp=a["\u0275\u0275defineComponent"]({type:n,selectors:[["tb-alarms-table-widget"]],viewQuery:function(e,t){if(1&e&&(a["\u0275\u0275viewQuery"](ne,1),a["\u0275\u0275viewQuery"](w.MatPaginator,1),a["\u0275\u0275viewQuery"](S.MatSort,1)),2&e){var n=void 0;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.searchInputField=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.paginator=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.sort=n.first)}},inputs:{ctx:"ctx"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:49,vars:43,consts:[[1,"tb-table-widget","tb-absolute-fill"],["fxFlex","","fxLayout","column",1,"tb-absolute-fill"],[1,"mat-table-toolbar",3,"fxShow"],[1,"mat-toolbar-tools"],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"matTooltip"],["fxFlex",""],["matInput","",3,"ngModel","placeholder","ngModelChange"],["searchInput",""],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"matTooltip","click"],["color","accent",1,"mat-table-toolbar",3,"fxShow"],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click",4,"ngIf"],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click"],["fxFlex","",1,"table-container"],["mat-table","","matSort","","matSortDisableClear","",3,"dataSource","trackBy","matSortActive","matSortDirection"],["matColumnDef","select","sticky",""],["style","width: 30px;",4,"matHeaderCellDef"],[4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf","ngForTrackBy"],["matColumnDef","actions",3,"stickyEnd"],[3,"ngStyle.gt-md",4,"matHeaderCellDef"],[3,"ngStyle.gt-md",4,"matCellDef"],[3,"ngClass",4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"ngClass","ngStyle","click",4,"matRowDef","matRowDefColumns"],["fxLayoutAlign","center center","translate","",1,"no-data-found",3,"fxShow"],["fxLayoutAlign","center center",1,"no-data-found",3,"fxShow"],[4,"ngIf"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions",4,"ngIf"],[2,"width","30px"],[3,"checked","indeterminate","change"],[3,"checked","click","change"],[3,"matColumnDef"],["mat-sort-header","",3,"ngStyle","disabled",4,"matHeaderCellDef"],[3,"innerHTML","ngStyle",4,"matCellDef"],["mat-sort-header","",3,"ngStyle","disabled"],[3,"innerHTML","ngStyle"],[3,"ngStyle.gt-md"],["fxHide","","fxShow.gt-md","","fxFlex","","fxLayout","row","fxLayoutAlign","end"],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click",4,"ngFor","ngForOf","ngForTrackBy"],["fxHide","","fxShow.lt-lg","",4,"ngIf"],["fxHide","","fxShow.lt-lg",""],["mat-button","","mat-icon-button","",3,"matMenuTriggerFor","click"],[1,"material-icons"],["xPosition","before"],["cellActionsMenu","matMenu"],["mat-menu-item","",3,"disabled","click",4,"ngFor","ngForOf","ngForTrackBy"],["mat-menu-item","",3,"disabled","click"],[3,"ngClass"],[3,"ngClass","ngStyle","click"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"mat-toolbar",2),a["\u0275\u0275elementStart"](3,"div",3),a["\u0275\u0275elementStart"](4,"button",4),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275elementStart"](6,"mat-icon"),a["\u0275\u0275text"](7,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"mat-form-field",5),a["\u0275\u0275elementStart"](9,"mat-label"),a["\u0275\u0275text"](10,"\xa0"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"input",6,7),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.pageLink.textSearch=e}),a["\u0275\u0275pipe"](13,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"button",8),a["\u0275\u0275listener"]("click",function(){return t.exitFilterMode()}),a["\u0275\u0275pipe"](15,"translate"),a["\u0275\u0275elementStart"](16,"mat-icon"),a["\u0275\u0275text"](17,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"mat-toolbar",9),a["\u0275\u0275elementStart"](19,"div",3),a["\u0275\u0275elementStart"](20,"span"),a["\u0275\u0275text"](21),a["\u0275\u0275pipe"](22,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](23,"span",5),a["\u0275\u0275template"](24,ie,5,6,"button",10),a["\u0275\u0275elementStart"](25,"button",11),a["\u0275\u0275listener"]("click",function(e){return t.clearAlarms(e)}),a["\u0275\u0275pipe"](26,"async"),a["\u0275\u0275pipe"](27,"translate"),a["\u0275\u0275elementStart"](28,"mat-icon"),a["\u0275\u0275text"](29,"clear"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](30,"div",12),a["\u0275\u0275elementStart"](31,"table",13),a["\u0275\u0275elementContainerStart"](32,14),a["\u0275\u0275template"](33,ae,4,6,"mat-header-cell",15),a["\u0275\u0275template"](34,re,2,1,"mat-cell",16),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275template"](35,le,3,1,"ng-container",17),a["\u0275\u0275elementContainerStart"](36,18),a["\u0275\u0275template"](37,de,1,5,"mat-header-cell",19),a["\u0275\u0275template"](38,fe,4,8,"mat-cell",20),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275template"](39,ge,1,3,"mat-header-row",21),a["\u0275\u0275template"](40,be,1,7,"mat-row",22),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](41,"span",23),a["\u0275\u0275pipe"](42,"async"),a["\u0275\u0275text"](43,"alarm.no-alarms-prompt"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](44,"span",24),a["\u0275\u0275text"](45),a["\u0275\u0275pipe"](46,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](47,ye,1,0,"mat-divider",25),a["\u0275\u0275template"](48,ve,2,6,"mat-paginator",26),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",t.textSearchMode&&t.alarmsDatasource.selection.isEmpty()),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](5,25,"action.search")),a["\u0275\u0275advance"](7),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](13,27,"alarm.search")),a["\u0275\u0275property"]("ngModel",t.pageLink.textSearch),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](15,29,"action.close")),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("fxShow",!t.alarmsDatasource.selection.isEmpty()),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](22,31,t.translate.get("alarm.selected-alarms",a["\u0275\u0275pureFunction1"](41,Ce,t.alarmsDatasource.selection.selected.length)))," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",t.allowAcknowledgment),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](27,35,"alarm.clear")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](26,33,t.isLoading$)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("dataSource",t.alarmsDatasource)("trackBy",t.trackByAlarmId)("matSortActive",t.sortOrderProperty)("matSortDirection",t.pageLinkSortDirection()),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngForOf",t.columns)("ngForTrackBy",t.trackByColumnDef),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("stickyEnd",t.enableStickyAction),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",t.enableStickyHeader),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("matRowDefColumns",t.displayedColumns),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",a["\u0275\u0275pipeBind1"](42,37,t.alarmsDatasource.isEmpty())&&!t.alarmsDatasource.dataLoading),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("fxShow",t.alarmsDatasource.dataLoading),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](46,39,"common.loading")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",t.displayPagination),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.displayPagination))},directives:[G.b,G.f,H.MatToolbar,K.d,q.MatButton,z.MatTooltip,W.MatIcon,X.MatFormField,X.MatLabel,$.MatInput,J.DefaultValueAccessor,J.NgControlStatus,J.NgModel,V.NgIf,Y.MatTable,S.MatSort,Y.MatColumnDef,Y.MatHeaderCellDef,Y.MatCellDef,V.NgForOf,Y.MatHeaderRowDef,Y.MatRowDef,G.e,R.TranslateDirective,Y.MatHeaderCell,Z.MatCheckbox,Y.MatCell,S.MatSortHeader,V.NgStyle,K.e,ee.MatMenuTrigger,ee.MatMenu,ee.MatMenuItem,Y.MatHeaderRow,V.NgClass,K.b,Y.MatRow,te.MatDivider,w.MatPaginator],pipes:[R.TranslatePipe,V.AsyncPipe],styles:["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-row.invisible[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   span.no-data-found[_ngcontent-%COMP%]{position:absolute;top:60px;bottom:0;left:0;right:0}","[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-paginator[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar.mat-table-toolbar[_ngcontent-%COMP%]:not([color=accent]){background:transparent}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]{height:39px;max-height:39px}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{height:39px;max-height:39px}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-footer-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-header-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-footer-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-header-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2){padding:0 5px}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:nth-child(2){padding:0 5px}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2){padding:0 5px}.tb-has-timewindow[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%], .tb-has-timewindow   [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]{height:65px;max-height:65px}.tb-has-timewindow[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%], .tb-has-timewindow   [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{height:65px;max-height:65px}"]}),n}(r.a);0,void 0;var we=function(){function e(e,t,n){this.subscription=e,this.dataKeys=t,this.ngZone=n,this.alarmsSubject=new h.a([]),this.pageDataSubject=new h.a(Object(g.a)()),this.selection=new u.SelectionModel(!0,[],!1),this.selectionModeChanged=new a.EventEmitter,this.selectionModeChanged$=this.selectionModeChanged.asObservable(),this.currentAlarm=null,this.dataLoading=!0}return e.prototype.connect=function(e){return this.alarmsSubject.asObservable()},e.prototype.disconnect=function(e){this.alarmsSubject.complete(),this.pageDataSubject.complete()},e.prototype.loadAlarms=function(e,t,n){this.dataLoading=!0,this.appliedPageLink=e,this.appliedSortOrderLabel=t,this.subscription.subscribeForAlarms(e,n)},e.prototype.clear=function(){this.selection.hasValue()&&(this.selection.clear(),this.onSelectionModeChanged(!1)),this.alarmsSubject.next([]),this.pageDataSubject.next(Object(g.a)())},e.prototype.updateAlarms=function(){var e,t=this,n=this.subscription.alarms,i=new Array,a=!1;if(n.data.forEach(function(e){i.push(t.alarmDataToInfo(e))}),this.appliedSortOrderLabel&&this.appliedSortOrderLabel.length){var r=this.appliedPageLink.sortOrder.direction===d.a.ASC;i=i.sort(function(e,n){return Object(c.e)(e,n,t.appliedSortOrderLabel,r)})}if(this.selection.hasValue()){var o=i.map(function(e){return e.id.id}),s=this.selection.selected.filter(function(e){return-1===o.indexOf(e)});(e=this.selection).deselect.apply(e,s),this.selection.isEmpty()&&(a=!0)}var l={data:i,totalPages:n.totalPages,totalElements:n.totalElements,hasNext:n.hasNext};this.ngZone.run(function(){a&&t.onSelectionModeChanged(!1),t.alarmsSubject.next(i),t.pageDataSubject.next(l),t.dataLoading=!1})},e.prototype.alarmDataToInfo=function(e){var t=Object(s.e)(e);delete t.latest;var n=e.latest;return this.dataKeys.forEach(function(e,i){var a=Object(k.o)(e.type),r="";if(a&&n&&n[a]){var o=n[a][e.name];o&&(r=o.value)}t[e.label]=r}),t},e.prototype.isAllSelected=function(){var e=this.selection.selected.length;return this.alarmsSubject.pipe(Object(C.a)(function(t){return e===t.length}))},e.prototype.isEmpty=function(){return this.alarmsSubject.pipe(Object(C.a)(function(e){return!e.length}))},e.prototype.total=function(){return this.pageDataSubject.pipe(Object(C.a)(function(e){return e.totalElements}))},e.prototype.toggleSelection=function(e){var t=this.selection.hasValue();this.selection.toggle(e.id.id),t!==this.selection.hasValue()&&this.onSelectionModeChanged(this.selection.hasValue())},e.prototype.isSelected=function(e){return this.selection.isSelected(e.id.id)},e.prototype.clearSelection=function(){this.selection.hasValue()&&(this.selection.clear(),this.onSelectionModeChanged(!1))},e.prototype.masterToggle=function(){var e=this;this.alarmsSubject.pipe(Object(v.a)(function(t){var n=e.selection.selected.length;n===t.length?(e.selection.clear(),n>0&&e.onSelectionModeChanged(!1)):(t.forEach(function(t){e.selection.select(t.id.id)}),0===n&&e.onSelectionModeChanged(!0))}),Object(x.a)(1)).subscribe()},e.prototype.toggleCurrentAlarm=function(e){return this.currentAlarm!==e&&(this.currentAlarm=e,!0)},e.prototype.isCurrentAlarm=function(e){return this.currentAlarm&&e&&this.currentAlarm.id&&e.id&&this.currentAlarm.id.id===e.id.id},e.prototype.onSelectionModeChanged=function(e){this.selectionModeChanged.emit(e)},e}()}).call(this,n("xexB"))},o3UX:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n("mrSG"),a=n("fXoL"),r=n("JTB5"),o=n("UZbx"),s=n("l7P3"),l=n("kmnG"),c=n("sYmb"),d=n("d3UM"),u=n("3Pt+"),p=n("ofXK"),m=n("FKr1");function f(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",4),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.alarmSearchStatusTranslationsMap.get(i.alarmSearchStatusEnum[n]))," ")}}var h=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n.alarmSearchStatusTranslationsMap=o.f,n.alarmSearchStatusTypes=Object.keys(o.b),n.alarmSearchStatusEnum=o.b,n}return Object(i.d)(t,e),Object.defineProperty(t.prototype,"alarmTableConfig",{get:function(){return this.entitiesTableConfig},enumerable:!1,configurable:!0}),t.prototype.searchStatusChanged=function(e){this.alarmTableConfig.searchStatus=e,this.alarmTableConfig.table.resetSortAndFilter(!0,!0)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](s.Store))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-alarm-table-header"]],features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:2,consts:[[1,"mat-block"],["translate",""],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-form-field",0),a["\u0275\u0275elementStart"](1,"mat-label",1),a["\u0275\u0275text"](2,"alarm.alarm-status"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"mat-select",2),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.searchStatusChanged(e)}),a["\u0275\u0275template"](4,f,3,4,"mat-option",3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngModel",t.alarmTableConfig.searchStatus),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",t.alarmSearchStatusTypes))},directives:[l.MatFormField,l.MatLabel,c.TranslateDirective,d.MatSelect,u.NgControlStatus,u.NgModel,p.NgForOf,m.MatOption],pipes:[c.TranslatePipe],styles:["[_nghost-%COMP%]{padding-right:8px;min-width:160px}[_nghost-%COMP%]     mat-form-field{font-size:16px;width:200px}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     mat-form-field .mat-form-field-underline{bottom:0}@media screen and (max-width:599px){[_nghost-%COMP%]     mat-form-field{width:100%}[_nghost-%COMP%]     mat-form-field .mat-form-field-infix{width:auto!important}}"]}),t}(r.a);0,void 0},"oPR/":function(e,t,n){"use strict";n.d(t,"a",function(){return V});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("OiFK"),d=n("//Q6"),u=n("4j5O"),p=n("Qrxw"),m=n("l7P3"),f=n("tyNb"),h=n("sYmb"),g=n("/t3+"),A=n("XiUz"),b=n("bTqV"),y=n("NFeN"),v=n("ofXK"),C=n("bv9b"),x=n("kmnG"),w=n("d3UM"),S=n("1jcm"),E=n("nii4"),I=n("0HhY"),O=n("qFsG");function T(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",13)}function F(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",33),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n," ")}}function B(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",14),a["\u0275\u0275elementStart"](1,"mat-form-field",15),a["\u0275\u0275elementStart"](2,"mat-label",2),a["\u0275\u0275text"](3,"dashboard.state-controller"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"mat-select",16),a["\u0275\u0275template"](5,F,2,2,"mat-option",17),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"fieldset",18),a["\u0275\u0275elementStart"](7,"legend",19),a["\u0275\u0275text"](8,"dashboard.title-settings"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"mat-slide-toggle",20),a["\u0275\u0275text"](10),a["\u0275\u0275pipe"](11,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](12,"tb-color-input",21),a["\u0275\u0275pipe"](13,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"fieldset",22),a["\u0275\u0275elementStart"](15,"legend",19),a["\u0275\u0275text"](16,"dashboard.dashboard-logo-settings"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"mat-slide-toggle",23),a["\u0275\u0275text"](18),a["\u0275\u0275pipe"](19,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](20,"tb-image-input",24),a["\u0275\u0275pipe"](21,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"fieldset",22),a["\u0275\u0275elementStart"](23,"legend",19),a["\u0275\u0275text"](24,"dashboard.toolbar-settings"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](25,"mat-slide-toggle",25),a["\u0275\u0275text"](26),a["\u0275\u0275pipe"](27,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"mat-slide-toggle",26),a["\u0275\u0275text"](29),a["\u0275\u0275pipe"](30,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](31,"mat-slide-toggle",27),a["\u0275\u0275text"](32),a["\u0275\u0275pipe"](33,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](34,"mat-slide-toggle",28),a["\u0275\u0275text"](35),a["\u0275\u0275pipe"](36,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](37,"mat-slide-toggle",29),a["\u0275\u0275text"](38),a["\u0275\u0275pipe"](39,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](40,"mat-slide-toggle",30),a["\u0275\u0275text"](41),a["\u0275\u0275pipe"](42,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](43,"mat-slide-toggle",31),a["\u0275\u0275text"](44),a["\u0275\u0275pipe"](45,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](46,"mat-slide-toggle",32),a["\u0275\u0275text"](47),a["\u0275\u0275pipe"](48,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("formGroup",n.settingsFormGroup),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngForOf",n.stateControllerIds),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](11,14,"dashboard.display-title")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](13,16,"dashboard.title-color")),a["\u0275\u0275advance"](6),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](19,18,"dashboard.display-dashboard-logo")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](21,20,"dashboard.dashboard-logo-image")),a["\u0275\u0275advance"](6),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](27,22,"dashboard.hide-toolbar")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](30,24,"dashboard.toolbar-always-open")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](33,26,"dashboard.display-dashboards-selection")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](36,28,"dashboard.display-entities-selection")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](39,30,"dashboard.display-filters")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](42,32,"dashboard.display-dashboard-timewindow")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](45,34,"dashboard.display-dashboard-export")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](48,36,"dashboard.display-update-dashboard-image")," ")}}function M(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.columns-count-required")," "))}function P(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.min-columns-count-message")," "))}function D(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.max-columns-count-message")," "))}function k(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.margin-required")," "))}function _(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.min-margin-message")," "))}function L(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.max-margin-message")," "))}function j(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.mobile-row-height-required")," "))}function N(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.min-mobile-row-height-message")," "))}function R(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.max-mobile-row-height-message")," "))}function U(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",14),a["\u0275\u0275elementStart"](1,"fieldset",22),a["\u0275\u0275elementStart"](2,"legend",19),a["\u0275\u0275text"](3,"dashboard.layout-settings"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"mat-form-field",15),a["\u0275\u0275elementStart"](5,"mat-label",2),a["\u0275\u0275text"](6,"dashboard.columns-count"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](7,"input",34),a["\u0275\u0275template"](8,M,3,3,"mat-error",35),a["\u0275\u0275template"](9,P,3,3,"mat-error",35),a["\u0275\u0275template"](10,D,3,3,"mat-error",35),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"mat-form-field",36),a["\u0275\u0275elementStart"](12,"mat-label",2),a["\u0275\u0275text"](13,"dashboard.widgets-margins"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](14,"input",37),a["\u0275\u0275template"](15,k,3,3,"mat-error",35),a["\u0275\u0275template"](16,_,3,3,"mat-error",35),a["\u0275\u0275template"](17,L,3,3,"mat-error",35),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"mat-slide-toggle",38),a["\u0275\u0275text"](19),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](21,"tb-color-input",39),a["\u0275\u0275pipe"](22,"translate"),a["\u0275\u0275element"](23,"tb-image-input",40),a["\u0275\u0275pipe"](24,"translate"),a["\u0275\u0275elementStart"](25,"mat-form-field",15),a["\u0275\u0275elementStart"](26,"mat-label",2),a["\u0275\u0275text"](27,"dashboard.background-size-mode"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"mat-select",41),a["\u0275\u0275elementStart"](29,"mat-option",42),a["\u0275\u0275text"](30,"Fit width"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](31,"mat-option",43),a["\u0275\u0275text"](32,"Fit height"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](33,"mat-option",44),a["\u0275\u0275text"](34,"Cover"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](35,"mat-option",45),a["\u0275\u0275text"](36,"Contain"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](37,"mat-option",46),a["\u0275\u0275text"](38,"Original size"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](39,"fieldset",18),a["\u0275\u0275elementStart"](40,"legend",19),a["\u0275\u0275text"](41,"dashboard.mobile-layout"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](42,"mat-slide-toggle",47),a["\u0275\u0275text"](43),a["\u0275\u0275pipe"](44,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](45,"mat-form-field",36),a["\u0275\u0275elementStart"](46,"mat-label",2),a["\u0275\u0275text"](47,"dashboard.mobile-row-height"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](48,"input",48),a["\u0275\u0275template"](49,j,3,3,"mat-error",35),a["\u0275\u0275template"](50,N,3,3,"mat-error",35),a["\u0275\u0275template"](51,R,3,3,"mat-error",35),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("formGroup",n.gridSettingsFormGroup),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("ngIf",n.gridSettingsFormGroup.get("columns").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.gridSettingsFormGroup.get("columns").hasError("min")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.gridSettingsFormGroup.get("columns").hasError("max")),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",n.gridSettingsFormGroup.get("margin").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.gridSettingsFormGroup.get("margin").hasError("min")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.gridSettingsFormGroup.get("margin").hasError("max")),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](20,14,"dashboard.autofill-height")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](22,16,"dashboard.background-color")),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](24,18,"dashboard.background-image")),a["\u0275\u0275advance"](20),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](44,20,"dashboard.autofill-height")," "),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",n.gridSettingsFormGroup.get("mobileRowHeight").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.gridSettingsFormGroup.get("mobileRowHeight").hasError("min")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.gridSettingsFormGroup.get("mobileRowHeight").hasError("max"))}}var V=function(e){function t(t,n,i,a,r,o,l,c,u,p){var m=e.call(this,t,n,r)||this;if(m.store=t,m.router=n,m.data=i,m.errorStateMatcher=a,m.dialogRef=r,m.fb=o,m.utils=l,m.dashboardUtils=c,m.translate=u,m.statesControllerService=p,m.submitted=!1,m.stateControllerIds=Object.keys(m.statesControllerService.getStateControllers()),m.settings=m.data.settings,m.gridSettings=m.data.gridSettings,m.settings){var f=!!Object(d.B)(m.settings.showTitle)||m.settings.showTitle,h=!Object(d.B)(m.settings.showDashboardLogo)&&m.settings.showDashboardLogo,g=!Object(d.B)(m.settings.hideToolbar)&&m.settings.hideToolbar;m.settingsFormGroup=m.fb.group({stateControllerId:[Object(d.B)(m.settings.stateControllerId)?"entity":m.settings.stateControllerId,[]],showTitle:[f,[]],titleColor:[{value:Object(d.B)(m.settings.titleColor)?"rgba(0,0,0,0.870588)":m.settings.titleColor,disabled:!f},[]],showDashboardLogo:[h,[]],dashboardLogoUrl:[{value:Object(d.B)(m.settings.dashboardLogoUrl)?null:m.settings.dashboardLogoUrl,disabled:!h},[]],hideToolbar:[g,[]],toolbarAlwaysOpen:[{value:!!Object(d.B)(m.settings.toolbarAlwaysOpen)||m.settings.toolbarAlwaysOpen,disabled:g},[]],showDashboardsSelect:[{value:!!Object(d.B)(m.settings.showDashboardsSelect)||m.settings.showDashboardsSelect,disabled:g},[]],showEntitiesSelect:[{value:!!Object(d.B)(m.settings.showEntitiesSelect)||m.settings.showEntitiesSelect,disabled:g},[]],showFilters:[{value:!!Object(d.B)(m.settings.showFilters)||m.settings.showFilters,disabled:g},[]],showDashboardTimewindow:[{value:!!Object(d.B)(m.settings.showDashboardTimewindow)||m.settings.showDashboardTimewindow,disabled:g},[]],showDashboardExport:[{value:!!Object(d.B)(m.settings.showDashboardExport)||m.settings.showDashboardExport,disabled:g},[]],showUpdateDashboardImage:[{value:!!Object(d.B)(m.settings.showUpdateDashboardImage)||m.settings.showUpdateDashboardImage,disabled:g},[]]}),m.settingsFormGroup.get("stateControllerId").valueChanges.subscribe(function(e){"default"!==e&&m.settingsFormGroup.get("toolbarAlwaysOpen").setValue(!0)}),m.settingsFormGroup.get("showTitle").valueChanges.subscribe(function(e){e?m.settingsFormGroup.get("titleColor").enable():m.settingsFormGroup.get("titleColor").disable()}),m.settingsFormGroup.get("showDashboardLogo").valueChanges.subscribe(function(e){e?m.settingsFormGroup.get("dashboardLogoUrl").enable():m.settingsFormGroup.get("dashboardLogoUrl").disable()}),m.settingsFormGroup.get("hideToolbar").valueChanges.subscribe(function(e){e?(m.settingsFormGroup.get("toolbarAlwaysOpen").disable(),m.settingsFormGroup.get("showDashboardsSelect").disable(),m.settingsFormGroup.get("showEntitiesSelect").disable(),m.settingsFormGroup.get("showFilters").disable(),m.settingsFormGroup.get("showDashboardTimewindow").disable(),m.settingsFormGroup.get("showDashboardExport").disable(),m.settingsFormGroup.get("showUpdateDashboardImage").disable()):(m.settingsFormGroup.get("toolbarAlwaysOpen").enable(),m.settingsFormGroup.get("showDashboardsSelect").enable(),m.settingsFormGroup.get("showEntitiesSelect").enable(),m.settingsFormGroup.get("showFilters").enable(),m.settingsFormGroup.get("showDashboardTimewindow").enable(),m.settingsFormGroup.get("showDashboardExport").enable(),m.settingsFormGroup.get("showUpdateDashboardImage").enable())})}else m.settingsFormGroup=m.fb.group({});if(m.gridSettings){var A=!Object(d.B)(m.gridSettings.mobileAutoFillHeight)&&m.gridSettings.mobileAutoFillHeight;m.gridSettingsFormGroup=m.fb.group({columns:[m.gridSettings.columns||24,[s.Validators.required,s.Validators.min(10),s.Validators.max(1e3)]],margin:[Object(d.n)(m.gridSettings.margin)?m.gridSettings.margin:10,[s.Validators.required,s.Validators.min(0),s.Validators.max(50)]],autoFillHeight:[!Object(d.B)(m.gridSettings.autoFillHeight)&&m.gridSettings.autoFillHeight,[]],backgroundColor:[m.gridSettings.backgroundColor||"rgba(0,0,0,0)",[]],backgroundImageUrl:[m.gridSettings.backgroundImageUrl,[]],backgroundSizeMode:[m.gridSettings.backgroundSizeMode||"100%",[]],mobileAutoFillHeight:[A,[]],mobileRowHeight:[{value:Object(d.B)(m.gridSettings.mobileRowHeight)?70:m.gridSettings.mobileRowHeight,disabled:A},[s.Validators.required,s.Validators.min(5),s.Validators.max(200)]]}),m.gridSettingsFormGroup.get("mobileAutoFillHeight").valueChanges.subscribe(function(e){e?m.gridSettingsFormGroup.get("mobileRowHeight").disable():m.gridSettingsFormGroup.get("mobileRowHeight").enable()})}else m.gridSettingsFormGroup=m.fb.group({});return m}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.save=function(){this.submitted=!0;var e=null,t=null;this.settings&&(e=Object(i.a)(Object(i.a)({},this.settings),this.settingsFormGroup.getRawValue())),this.gridSettings&&(t=Object(i.a)(Object(i.a)({},this.gridSettings),this.gridSettingsFormGroup.getRawValue())),this.dialogRef.close({settings:e,gridSettings:t})},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](m.Store),a["\u0275\u0275directiveInject"](f.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](u.a),a["\u0275\u0275directiveInject"](h.TranslateService),a["\u0275\u0275directiveInject"](p.a))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-dashboard-settings-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:24,vars:21,consts:[[2,"width","750px",3,"ngSubmit"],["color","accent"],["translate",""],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["fxLayout","column",3,"formGroup",4,"ngIf"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],["fxLayout","column",3,"formGroup"],[1,"mat-block"],["required","","formControlName","stateControllerId"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","column","fxLayout.gt-sm","row","fxLayoutAlign.gt-sm","start center","fxLayoutGap","8px",1,"fields-group"],["translate","",1,"group-title"],["fxFlex","","formControlName","showTitle"],["fxFlex","","icon","format_color_fill","openOnInput","","formControlName","titleColor",3,"label"],["fxLayout","column","fxLayoutGap","8px",1,"fields-group"],["formControlName","showDashboardLogo"],["fxFlex","","formControlName","dashboardLogoUrl",3,"label"],["formControlName","hideToolbar"],["formControlName","toolbarAlwaysOpen"],["formControlName","showDashboardsSelect"],["formControlName","showEntitiesSelect"],["formControlName","showFilters"],["formControlName","showDashboardTimewindow"],["formControlName","showDashboardExport"],["formControlName","showUpdateDashboardImage"],[3,"value"],["matInput","","formControlName","columns","type","number","step","any","min","10","max","1000","required",""],[4,"ngIf"],["fxFlex","",1,"mat-block"],["matInput","","formControlName","margin","type","number","step","any","min","0","max","50","required",""],["fxFlex","","formControlName","autoFillHeight",2,"display","block","padding-bottom","12px"],["fxFlex","","icon","format_color_fill","openOnInput","","formControlName","backgroundColor",3,"label"],["fxFlex","","formControlName","backgroundImageUrl",3,"label"],["formControlName","backgroundSizeMode"],["value","100%"],["value","auto 100%"],["value","cover"],["value","contain"],["value","auto"],["fxFlex","","formControlName","mobileAutoFillHeight"],["matInput","","formControlName","mobileRowHeight","type","number","step","any","min","5","max","200","required",""]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2",2),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",3),a["\u0275\u0275elementStart"](5,"button",4),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](6,"mat-icon",5),a["\u0275\u0275text"](7,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,T,1,0,"mat-progress-bar",6),a["\u0275\u0275pipe"](9,"async"),a["\u0275\u0275elementStart"](10,"div",7),a["\u0275\u0275elementStart"](11,"fieldset",8),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275template"](13,B,49,38,"div",9),a["\u0275\u0275template"](14,U,52,22,"div",9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"div",10),a["\u0275\u0275elementStart"](16,"button",11),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](17,"async"),a["\u0275\u0275text"](18),a["\u0275\u0275pipe"](19,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](20,"button",12),a["\u0275\u0275pipe"](21,"async"),a["\u0275\u0275text"](22),a["\u0275\u0275pipe"](23,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.settings?"dashboard.settings":"layout.settings"),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](9,9,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](12,11,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",t.settings),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.gridSettings),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](17,13,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](19,15,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](21,17,t.isLoading$)||t.settingsFormGroup.invalid||t.gridSettingsFormGroup.invalid||!t.settingsFormGroup.dirty&&!t.gridSettingsFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](23,19,"action.save")," "))},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.NgForm,g.MatToolbar,h.TranslateDirective,A.b,b.MatButton,y.MatIcon,v.NgIf,o.MatDialogContent,o.MatDialogActions,A.e,C.MatProgressBar,A.f,s.FormGroupDirective,x.MatFormField,x.MatLabel,w.MatSelect,s.RequiredValidator,s.NgControlStatus,s.FormControlName,v.NgForOf,A.g,S.MatSlideToggle,E.a,I.a,r.MatOption,O.MatInput,s.DefaultValueAccessor,s.NumberValueAccessor,x.MatError],pipes:[v.AsyncPipe,h.TranslatePipe],styles:["[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]{padding:0 8px 8px;margin:10px 0;border:1px groove rgba(0,0,0,.25);border-radius:4px}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{color:rgba(0,0,0,.7);width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}[_nghost-%COMP%]     .mat-slide-toggle-content{white-space:normal}"]}),t}(l.a);0,void 0},oTDE:function(e,t,n){"use strict";n.r(t),n.d(t,"TripAnimationComponent",function(){return M}),n.d(t,"TbTripAnimationWidget",function(){return P});var i=n("mrSG"),a=n("LvDl"),r=n.n(a),o=n("Zss7"),s=n.n(o),l=n("fXoL"),c=n("Hl1W"),d=n("bHFI"),u=n("3QxM"),p=(n("0G7Z"),n("t+jE")),m=n("wd/R"),f=n.n(m),h=n("//Q6"),g=n("HR/i"),A=n("jhN1"),b=n("ofXK"),y=n("XiUz"),v=n("znSr"),C=n("bTqV"),x=n("NFeN"),w=n("dUlv"),S=["map"];function E(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",10),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",n.label," ")}}function I(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",11),l["\u0275\u0275listener"]("click",function(){l["\u0275\u0275restoreView"](n);var e=l["\u0275\u0275nextContext"]();return e.visibleTooltip=!e.visibleTooltip}),l["\u0275\u0275elementStart"](1,"mat-icon"),l["\u0275\u0275text"](2,"info_outline"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}}function O(e,t){if(1&e&&l["\u0275\u0275element"](0,"div",12),2&e){var n=t.$implicit;l["\u0275\u0275property"]("innerHTML",n,l["\u0275\u0275sanitizeHtml"])}}function T(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"tb-history-selector",13),l["\u0275\u0275listener"]("timeUpdated",function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().timeUpdated(e)}),l["\u0275\u0275elementEnd"]()}if(2&e){var i=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("settings",i.settings)("minTime",i.minTime)("maxTime",i.maxTime)("step",i.normalizationStep)("anchors",i.anchors)("useAnchors",i.useAnchors)}}var F=function(e){return{"trip-animation-tooltip-hidden":e}},B=function(e,t,n){return{"background-color":e,opacity:t,color:n}},M=function(){function e(e,t){var n=this;this.cd=e,this.sanitizer=t,this.interpolatedTimeData=[],this.mainTooltips=[],this.visibleTooltip=!1,this.anchors=[],this.calcTooltip=function(e){var t=e||n.activeTrip,i=n.settings.useTooltipFunction?Object(p.r)(n.settings.tooltipFunction,[t,n.historicalData,e.dsIndex]):n.settings.tooltipPattern;return p.p.parseTemplate(i,t,!0)}}return e.getSettingsSchema=function(){var e=Object(d.d)();return Object(d.c)(e,Object(p.j)(null,!0)),Object(d.b)(e,"Map Provider Settings"),Object(d.c)(e,u.j),Object(d.b)(e,"Trip Animation Settings"),Object(d.c)(e,u.f),Object(d.b)(e,"Path Settings"),Object(d.c)(e,Object(d.a)(u.g,"model.showPoints === true",["showPoints"])),Object(d.b)(e,"Path Points Settings"),Object(d.c)(e,Object(d.a)(u.b,"model.showPolygon === true",["showPolygon"])),Object(d.b)(e,"Polygon Settings"),e},e.prototype.ngOnInit=function(){var e=this;this.widgetConfig=this.ctx.widgetConfig;var t={normalizationStep:1e3,showLabel:!1,buttonColor:s()(this.widgetConfig.color).setAlpha(.54).toRgbString(),disabledButtonColor:s()(this.widgetConfig.color).setAlpha(.3).toRgbString(),rotationAngle:0};this.settings=Object(i.a)(Object(i.a)({},t),this.ctx.settings),this.useAnchors=this.settings.showPoints&&this.settings.usePointAsAnchor,this.settings.pointAsAnchorFunction=Object(p.o)(this.settings.pointAsAnchorFunction,["data","dsData","dsIndex"]),this.settings.tooltipFunction=Object(p.o)(this.settings.tooltipFunction,["data","dsData","dsIndex"]),this.settings.labelFunction=Object(p.o)(this.settings.labelFunction,["data","dsData","dsIndex"]),this.settings.colorPointFunction=Object(p.o)(this.settings.colorPointFunction,["data","dsData","dsIndex"]),this.normalizationStep=this.settings.normalizationStep,this.ctx.defaultSubscription.callbacks.onDataUpdated=function(){var t;e.historicalData=Object(p.m)(e.ctx.data).filter(function(e){return e.length}),e.historicalData.length&&(e.calculateIntervals(),e.timeUpdated(e.minTime)),null===(t=e.mapWidget.map.map)||void 0===t||t.invalidateSize(),e.cd.detectChanges()}},e.prototype.ngAfterViewInit=function(){var e=this;n.e(8).then(n.bind(null,"n4i3")).then(function(t){e.mapWidget=new t.MapWidgetController(c.b.openstreet,!1,e.ctx,e.mapContainer.nativeElement),e.mapResize$=new g.a(function(){e.mapWidget.resize()}),e.mapResize$.observe(e.mapContainer.nativeElement)})},e.prototype.ngOnDestroy=function(){this.mapResize$&&this.mapResize$.disconnect()},e.prototype.timeUpdated=function(e){var t=this;this.currentTime=e;for(var n=this.interpolatedTimeData.map(function(t){return t[e]}),a=0;a<this.interpolatedTimeData.length;a++)if(Object(h.B)(n[a]))for(var o=Object.keys(this.interpolatedTimeData[a]).map(function(e){return parseInt(e,10)}),s=1;s<o.length;s++)if(o[s-1]<e&&o[s]>e){var l=this.interpolatedTimeData[a][o[s-1]],c=this.interpolatedTimeData[a][o[s]],d=Object(p.k)(o[s-1],o[s],e);n[a]=Object(i.a)(Object(i.a)(Object(i.a)({},l),{time:e}),Object(p.l)(l,c,this.settings.latKeyName,this.settings.lngKeyName,d));break}for(a=0;a<this.interpolatedTimeData.length;a++)Object(h.B)(n[a])&&(n[a]=this.calculateLastPoints(this.interpolatedTimeData[a],e));if(this.calcLabel(),this.calcMainTooltip(n),this.mapWidget&&this.mapWidget.map&&this.mapWidget.map.map){var u=this.interpolatedTimeData.map(function(e){return r.a.values(e)});this.mapWidget.map.updatePolylines(u,!0),this.settings.showPolygon&&this.mapWidget.map.updatePolygons(this.interpolatedTimeData),this.settings.showPoints&&this.mapWidget.map.updatePoints(u.map(function(e){return r.a.union(e)}),this.calcTooltip),this.mapWidget.map.updateMarkers(n,!0,function(e){t.activeTrip=e,t.timeUpdated(t.currentTime)})}},e.prototype.setActiveTrip=function(){},e.prototype.calculateLastPoints=function(e,t){var n=Object.keys(e),i=n.findIndex(function(e){return Number(e)>=t});return-1!==i?Number(n[i])!==t&&0!==i&&i--:i=n.length-1,e[n[i]]},e.prototype.calculateIntervals=function(){var e=this;if(this.historicalData.forEach(function(t,n){var i,a;e.minTime=(null===(i=t[0])||void 0===i?void 0:i.time)||1/0,e.maxTime=(null===(a=t[t.length-1])||void 0===a?void 0:a.time)||-1/0,e.interpolatedTimeData[n]=e.interpolateArray(t)}),this.activeTrip||(this.activeTrip=this.interpolatedTimeData.map(function(t){return t[e.minTime]}).filter(function(e){return e})[0]),this.useAnchors){var t=Object.entries(r.a.union(this.interpolatedTimeData)[0]);this.anchors=t.filter(function(n){return Object(p.r)(e.settings.pointAsAnchorFunction,[n[1],t,n[1].dsIndex])}).map(function(e){return parseInt(e[0],10)})}},e.prototype.calcMainTooltip=function(e){for(var t=[],n=0,i=e;n<i.length;n++){var a=i[n];t.push(this.sanitizer.sanitize(l.SecurityContext.HTML,this.calcTooltip(a)))}this.mainTooltips=t},e.prototype.calcLabel=function(){var e=this.activeTrip,t=this.settings.useLabelFunction?Object(p.r)(this.settings.labelFunction,[e,this.historicalData,e.dsIndex]):this.settings.label;this.label=p.p.parseTemplate(t,e,!0)},e.prototype.interpolateArray=function(e){for(var t={},n=this.settings.latKeyName,a=this.settings.lngKeyName,r=0,o=e;r<o.length;r++){var s=o[r],l=s.time;t[this.minTime+Math.ceil((l-this.minTime)/this.normalizationStep)*this.normalizationStep]=Object(i.a)(Object(i.a)({},s),{minTime:this.minTime!==1/0?f()(this.minTime).format("YYYY-MM-DD HH:mm:ss"):"",maxTime:this.maxTime!==-1/0?f()(this.maxTime).format("YYYY-MM-DD HH:mm:ss"):"",rotationAngle:this.settings.rotationAngle})}for(var c=Object.keys(t),d=0;d<c.length-1;d++)t[c[d]].rotationAngle+=Object(p.f)(t[c[d]],t[c[d+1]],n,a);return t},e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](l.ChangeDetectorRef),l["\u0275\u0275directiveInject"](A.DomSanitizer))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["trip-animation"]],viewQuery:function(e,t){if(1&e&&l["\u0275\u0275viewQuery"](S,1),2&e){var n;l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(t.mapContainer=n.first)}},inputs:{ctx:"ctx"},decls:10,vars:12,consts:[[1,"trip-animation-widget"],["class","trip-animation-label-container",4,"ngIf"],["fxLayout","column",1,"trip-animation-container"],[1,"map"],["map",""],["fxLayout","row",1,"trip-animation-info-panel"],["class","tooltip-button","mat-mini-fab","","color","accent","aria-label","tooltip",3,"click",4,"ngIf"],["fxLayout","column",1,"trip-animation-tooltip","md-whiteframe-z4",3,"ngClass","ngStyle"],["style","padding: 10px 0",3,"innerHTML",4,"ngFor","ngForOf"],[3,"settings","minTime","maxTime","step","anchors","useAnchors","timeUpdated",4,"ngIf"],[1,"trip-animation-label-container"],["mat-mini-fab","","color","accent","aria-label","tooltip",1,"tooltip-button",3,"click"],[2,"padding","10px 0",3,"innerHTML"],[3,"settings","minTime","maxTime","step","anchors","useAnchors","timeUpdated"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275template"](1,E,2,1,"div",1),l["\u0275\u0275elementStart"](2,"div",2),l["\u0275\u0275element"](3,"div",3,4),l["\u0275\u0275elementStart"](5,"div",5),l["\u0275\u0275template"](6,I,3,0,"button",6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"div",7),l["\u0275\u0275template"](8,O,1,1,"div",8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](9,T,1,6,"tb-history-selector",9),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.settings.showLabel),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngIf",t.settings.showTooltip),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction1"](6,F,!t.visibleTooltip))("ngStyle",l["\u0275\u0275pureFunction3"](8,B,t.settings.tooltipColor,t.settings.tooltipOpacity,t.settings.tooltipFontColor)),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngForOf",t.mainTooltips),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.historicalData))},directives:[b.NgIf,y.f,b.NgClass,v.b,b.NgStyle,v.e,b.NgForOf,C.MatButton,x.MatIcon,w.a],styles:[".trip-animation-widget[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;font-size:16px;line-height:24px;display:flex;flex-direction:column}.trip-animation-widget[_ngcontent-%COMP%]   .trip-animation-label-container[_ngcontent-%COMP%]{height:24px}.trip-animation-widget[_ngcontent-%COMP%]   .trip-animation-container[_ngcontent-%COMP%]{position:relative;z-index:1;flex:1;width:100%}.trip-animation-widget[_ngcontent-%COMP%]   .trip-animation-container[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]{width:100%;height:100%}.trip-animation-widget[_ngcontent-%COMP%]   .trip-animation-container[_ngcontent-%COMP%]   .trip-animation-info-panel[_ngcontent-%COMP%]{position:absolute;top:0;right:0;pointer-events:none}.trip-animation-widget[_ngcontent-%COMP%]   .trip-animation-container[_ngcontent-%COMP%]   .trip-animation-info-panel[_ngcontent-%COMP%]   .tooltip-button[_ngcontent-%COMP%]{top:0;left:0;width:32px;min-width:32px;height:32px;min-height:32px;padding:0 0 2px;margin:2px;line-height:24px;z-index:999}.trip-animation-widget[_ngcontent-%COMP%]   .trip-animation-container[_ngcontent-%COMP%]   .trip-animation-info-panel[_ngcontent-%COMP%]   .tooltip-button[_ngcontent-%COMP%]  .mat-button-wrapper{padding:0}.trip-animation-widget[_ngcontent-%COMP%]   .trip-animation-container[_ngcontent-%COMP%]   .trip-animation-info-panel[_ngcontent-%COMP%]   .tooltip-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:24px;height:24px}.trip-animation-widget[_ngcontent-%COMP%]   .trip-animation-container[_ngcontent-%COMP%]   .trip-animation-info-panel[_ngcontent-%COMP%]   .tooltip-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:inherit;height:inherit}.trip-animation-widget[_ngcontent-%COMP%]   .trip-animation-container[_ngcontent-%COMP%]   .trip-animation-tooltip[_ngcontent-%COMP%]{display:flex;overflow:auto;max-height:90%;position:absolute;top:30px;right:0;z-index:1000;padding:5px;background-color:#fff;transition:.3s ease-in-out}.trip-animation-widget[_ngcontent-%COMP%]   .trip-animation-container[_ngcontent-%COMP%]   .trip-animation-tooltip-hidden[_ngcontent-%COMP%]{transform:translateX(110%)}"]}),e}();0,void 0;var P=M},oook:function(e,t,n){"use strict";n.d(t,"a",function(){return w});var i=n("mrSG"),a=n("fXoL"),r=n("3Pt+"),o=n("NEMC"),s=n("xKAQ"),l=(n("qxrw"),n("G8Aa")),c=n("l7P3"),d=n("sYmb"),u=n("ofXK"),p=n("XiUz"),m=n("kmnG"),f=n("qFsG"),h=n("bSwM"),g=n("RX5c"),A=n("bTqV"),b=n("znSr"),y=n("Dvla"),v=n("NFeN");function C(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",14),a["\u0275\u0275elementStart"](1,"button",15),a["\u0275\u0275listener"]("click",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onEntityAction(e,"setDefault")}),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"button",15),a["\u0275\u0275listener"]("click",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onEntityAction(e,"delete")}),a["\u0275\u0275pipe"](6,"async"),a["\u0275\u0275text"](7),a["\u0275\u0275pipe"](8,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"div",16),a["\u0275\u0275elementStart"](10,"button",17),a["\u0275\u0275listener"]("cbOnSuccess",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onTenantProfileIdCopied(e)}),a["\u0275\u0275element"](11,"mat-icon",18),a["\u0275\u0275elementStart"](12,"span",5),a["\u0275\u0275text"](13,"tenant-profile.copyId"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](2,8,i.isLoading$))("fxShow",!(i.isEdit||null!=i.entity&&i.entity.default)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](4,10,"tenant-profile.set-default")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](6,12,i.isLoading$))("fxShow",!i.hideDelete()&&!i.isEdit),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](8,14,"tenant-profile.delete")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("cbContent",null==i.entity||null==i.entity.id?null:i.entity.id.id)("fxShow",!i.isEdit)}}function x(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"tenant-profile.name-required")," "))}var w=function(e){function t(t,n,i,a,r,o){var s=e.call(this,t,r,i,a,o)||this;return s.store=t,s.translate=n,s.entityValue=i,s.entitiesTableConfigValue=a,s.fb=r,s.cd=o,s.standalone=!1,s}return Object(i.d)(t,e),t.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},t.prototype.buildForm=function(e){return this.fb.group({name:[e?e.name:"",[r.Validators.required]],isolatedTbCore:[!!e&&e.isolatedTbCore,[]],isolatedTbRuleEngine:[!!e&&e.isolatedTbRuleEngine,[]],profileData:[e&&!this.isAdd?e.profileData:{configuration:Object(o.b)(o.a.DEFAULT)},[]],description:[e?e.description:"",[]]})},t.prototype.updateForm=function(e){this.entityForm.patchValue({name:e.name}),this.entityForm.patchValue({isolatedTbCore:e.isolatedTbCore}),this.entityForm.patchValue({isolatedTbRuleEngine:e.isolatedTbRuleEngine}),this.entityForm.patchValue({profileData:this.isAdd?{configuration:Object(o.b)(o.a.DEFAULT)}:e.profileData}),this.entityForm.patchValue({description:e.description})},t.prototype.updateFormState=function(){this.entityForm&&(this.isEditValue?(this.entityForm.enable({emitEvent:!1}),this.isAdd||(this.entityForm.get("isolatedTbCore").disable({emitEvent:!1}),this.entityForm.get("isolatedTbRuleEngine").disable({emitEvent:!1}))):this.entityForm.disable({emitEvent:!1}))},t.prototype.onTenantProfileIdCopied=function(e){this.store.dispatch(new s.b({message:this.translate.instant("tenant-profile.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](c.Store),a["\u0275\u0275directiveInject"](d.TranslateService),a["\u0275\u0275directiveInject"]("entity",8),a["\u0275\u0275directiveInject"]("entitiesTableConfig",8),a["\u0275\u0275directiveInject"](r.FormBuilder),a["\u0275\u0275directiveInject"](a.ChangeDetectorRef))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-tenant-profile"]],inputs:{standalone:"standalone"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:30,vars:18,consts:[["class","tb-details-buttons","fxLayout.xs","column",4,"ngIf"],["fxLayout","column",1,"mat-padding"],[3,"formGroup"],[3,"disabled"],[1,"mat-block"],["translate",""],["matInput","","formControlName","name","required",""],[4,"ngIf"],["fxLayout","column"],["formControlName","isolatedTbCore",1,"hinted-checkbox"],[1,"tb-hint"],["formControlName","isolatedTbRuleEngine",1,"hinted-checkbox"],["formControlName","profileData","required",""],["matInput","","formControlName","description","rows","2"],["fxLayout.xs","column",1,"tb-details-buttons"],["mat-raised-button","","color","accent",3,"disabled","fxShow","click"],["fxLayout","row","fxLayout.xs","column"],["mat-raised-button","","ngxClipboard","",3,"cbContent","fxShow","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"]],template:function(e,t){1&e&&(a["\u0275\u0275template"](0,C,14,16,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"form",2),a["\u0275\u0275elementStart"](3,"fieldset",3),a["\u0275\u0275pipe"](4,"async"),a["\u0275\u0275elementStart"](5,"mat-form-field",4),a["\u0275\u0275elementStart"](6,"mat-label",5),a["\u0275\u0275text"](7,"tenant-profile.name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](8,"input",6),a["\u0275\u0275template"](9,x,3,3,"mat-error",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"div",8),a["\u0275\u0275elementStart"](11,"mat-checkbox",9),a["\u0275\u0275elementStart"](12,"div"),a["\u0275\u0275text"](13),a["\u0275\u0275pipe"](14,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"div",10),a["\u0275\u0275text"](16),a["\u0275\u0275pipe"](17,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"mat-checkbox",11),a["\u0275\u0275elementStart"](19,"div"),a["\u0275\u0275text"](20),a["\u0275\u0275pipe"](21,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"div",10),a["\u0275\u0275text"](23),a["\u0275\u0275pipe"](24,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](25,"tb-tenant-profile-data",12),a["\u0275\u0275elementStart"](26,"mat-form-field",4),a["\u0275\u0275elementStart"](27,"mat-label",5),a["\u0275\u0275text"](28,"tenant-profile.description"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](29,"textarea",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("ngIf",!t.standalone),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("formGroup",t.entityForm),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](4,8,t.isLoading$)||!t.isEdit),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",t.entityForm.get("name").hasError("required")),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](14,10,"tenant.isolated-tb-core")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](17,12,"tenant.isolated-tb-core-details")),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](21,14,"tenant.isolated-tb-rule-engine")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](24,16,"tenant.isolated-tb-rule-engine-details")))},directives:[u.NgIf,p.f,r["\u0275angular_packages_forms_forms_ba"],r.NgControlStatusGroup,r.FormGroupDirective,m.MatFormField,m.MatLabel,d.TranslateDirective,f.MatInput,r.DefaultValueAccessor,r.NgControlStatus,r.FormControlName,r.RequiredValidator,h.MatCheckbox,g.a,A.MatButton,b.d,y.a,v.MatIcon,m.MatError],pipes:[u.AsyncPipe,d.TranslatePipe],styles:["[_nghost-%COMP%]     .mat-checkbox.hinted-checkbox .mat-checkbox-inner-container{margin-top:4px}[_nghost-%COMP%]     .mat-checkbox .mat-checkbox-layout{white-space:normal}"]}),t}(l.a);0,void 0},ou6H:function(e,t,n){"use strict";n.d(t,"a",function(){return C});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("xKAQ"),d=n("l7P3"),u=n("tyNb"),p=n("/t3+"),m=n("sYmb"),f=n("XiUz"),h=n("bTqV"),g=n("NFeN"),A=n("ofXK"),b=n("XGqO"),y=n("bv9b");function v(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",14)}var C=function(e){function t(t,n,i,a,r,o){var l=e.call(this,t,n,r)||this;return l.store=t,l.router=n,l.data=i,l.errorStateMatcher=a,l.dialogRef=r,l.fb=o,l.submitted=!1,l.importTitle=i.importTitle,l.importFileLabel=i.importFileLabel,l.importFormGroup=l.fb.group({jsonContent:[null,[s.Validators.required]]}),l}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.loadDataFromJsonContent=function(e){try{return JSON.parse(e)}catch(t){return this.store.dispatch(new c.b({message:t.message,type:"error"})),null}},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.importFromJson=function(){this.submitted=!0;var e=this.importFormGroup.get("jsonContent").value;this.dialogRef.close(e)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](d.Store),a["\u0275\u0275directiveInject"](u.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-import-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:26,vars:27,consts:[[3,"formGroup","ngSubmit"],["color","accent"],["translate",""],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["fxFlex","","fxLayout","column"],["formControlName","jsonContent","required","","accept",".json,application/json","allowedExtensions","json",3,"contentConvertFunction","label","dropLabel"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.importFromJson()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2",2),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",3),a["\u0275\u0275elementStart"](5,"button",4),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](6,"mat-icon",5),a["\u0275\u0275text"](7,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,v,1,0,"mat-progress-bar",6),a["\u0275\u0275pipe"](9,"async"),a["\u0275\u0275elementStart"](10,"div",7),a["\u0275\u0275elementStart"](11,"fieldset",8),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",9),a["\u0275\u0275element"](14,"tb-file-input",10),a["\u0275\u0275pipe"](15,"translate"),a["\u0275\u0275pipe"](16,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"div",11),a["\u0275\u0275elementStart"](18,"button",12),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](19,"async"),a["\u0275\u0275text"](20),a["\u0275\u0275pipe"](21,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"button",13),a["\u0275\u0275pipe"](23,"async"),a["\u0275\u0275text"](24),a["\u0275\u0275pipe"](25,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.importFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.importTitle),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](9,11,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](12,13,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](15,15,t.importFileLabel)),a["\u0275\u0275propertyInterpolate"]("dropLabel",a["\u0275\u0275pipeBind1"](16,17,"import.drop-file")),a["\u0275\u0275property"]("contentConvertFunction",t.loadDataFromJsonContent),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](19,19,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](21,21,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](23,23,t.isLoading$)||t.importFormGroup.invalid||!t.importFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](25,25,"action.import")," "))},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,p.MatToolbar,m.TranslateDirective,f.b,h.MatButton,g.MatIcon,A.NgIf,o.MatDialogContent,f.f,b.a,s.NgControlStatus,s.FormControlName,s.RequiredValidator,o.MatDialogActions,f.e,y.MatProgressBar],pipes:[A.AsyncPipe,m.TranslatePipe],encapsulation:2}),t}(l.a);0,void 0},"p/3Z":function(e,t,n){"use strict";n.d(t,"a",function(){return O});var i=n("mrSG"),a=n("fXoL"),r=n("0IaG"),o=n("YnEf"),s=n("xKAQ"),l=n("gmuX"),c=n("l7P3"),d=n("tyNb"),u=n("sYmb"),p=n("3Pt+"),m=n("/t3+"),f=n("XiUz"),h=n("bTqV"),g=n("NFeN"),A=n("ofXK"),b=n("rezs"),y=n("Dvla"),v=n("Qu3c"),C=n("5yRj"),x=n("bv9b");function w(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",17)}function S(e,t){1&e&&a["\u0275\u0275element"](0,"div",18)}var E=function(e,t){return{dashboardTitle:e,publicLink:t}},I=function(e){return{dashboardTitle:e}},O=function(e){function t(t,n,i,a,r,o,s){var l=e.call(this,t,n,o)||this;return l.store=t,l.router=n,l.data=i,l.translate=a,l.dashboardService=r,l.dialogRef=o,l.fb=s,l.dashboard=i.dashboard,l.publicLink=r.getPublicDashboardLink(l.dashboard),l}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){},t.prototype.close=function(){this.dialogRef.close()},t.prototype.onPublicLinkCopied=function(e){this.store.dispatch(new s.b({message:this.translate.instant("dashboard.public-link-copied-message"),type:"success",target:"makeDashboardPublicDialogContent",duration:750,verticalPosition:"bottom",horizontalPosition:"left"}))},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](c.Store),a["\u0275\u0275directiveInject"](d.Router),a["\u0275\u0275directiveInject"](r.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](u.TranslateService),a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](r.MatDialogRef),a["\u0275\u0275directiveInject"](p.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-make-dashboard-public-dialog"]],features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:34,vars:42,consts:[[2,"min-width","400px","position","relative"],["fxLayout","row","color","accent"],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content","","tb-toast","","toastTarget","makeDashboardPublicDialogContent"],[3,"innerHTML"],["fxLayout","row","fxLayoutAlign","start center"],["fxFlex","",1,"tb-highlight"],["mat-button","","mat-icon-button","","ngxClipboard","","matTooltipPosition","above",3,"cbContent","matTooltip","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"],[1,"tb-notice",3,"innerHTML"],["shareHashTags","thingsboard, iot",2,"padding-top","15px",3,"shareTitle","shareText","shareLink"],["mat-dialog-actions","","fxLayout","row"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",function(){return t.close()}),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,w,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,S,1,0,"div",6),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275element"](14,"span",8),a["\u0275\u0275pipe"](15,"async"),a["\u0275\u0275elementStart"](16,"div",9),a["\u0275\u0275elementStart"](17,"pre",10),a["\u0275\u0275elementStart"](18,"code"),a["\u0275\u0275text"](19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](20,"button",11),a["\u0275\u0275listener"]("cbOnSuccess",function(e){return t.onPublicLinkCopied(e)}),a["\u0275\u0275pipe"](21,"translate"),a["\u0275\u0275element"](22,"mat-icon",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](23,"div",13),a["\u0275\u0275pipe"](24,"translate"),a["\u0275\u0275element"](25,"tb-social-share-panel",14),a["\u0275\u0275pipe"](26,"translate"),a["\u0275\u0275pipe"](27,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"div",15),a["\u0275\u0275element"](29,"span",2),a["\u0275\u0275elementStart"](30,"button",16),a["\u0275\u0275listener"]("click",function(){return t.close()}),a["\u0275\u0275pipe"](31,"async"),a["\u0275\u0275text"](32),a["\u0275\u0275pipe"](33,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,13,"dashboard.public-dashboard-title")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,15,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,17,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("innerHTML",a["\u0275\u0275pipeBind1"](15,19,t.translate.get("dashboard.public-dashboard-text",a["\u0275\u0275pureFunction2"](35,E,t.dashboard.title,t.publicLink))),a["\u0275\u0275sanitizeHtml"]),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate"](t.publicLink),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("cbContent",t.publicLink),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](21,21,"dashboard.copy-public-link")),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("innerHTML",a["\u0275\u0275pipeBind1"](24,23,"dashboard.public-dashboard-notice"),a["\u0275\u0275sanitizeHtml"]),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("shareTitle",a["\u0275\u0275pipeBind2"](26,25,"dashboard.socialshare-title",a["\u0275\u0275pureFunction1"](38,I,t.dashboard.title))),a["\u0275\u0275propertyInterpolate"]("shareText",a["\u0275\u0275pipeBind2"](27,28,"dashboard.socialshare-text",a["\u0275\u0275pureFunction1"](40,I,t.dashboard.title))),a["\u0275\u0275propertyInterpolate"]("shareLink",t.publicLink),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](31,31,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](33,33,"action.ok")," "))},directives:[m.MatToolbar,f.f,f.b,h.MatButton,g.MatIcon,A.NgIf,r.MatDialogContent,b.b,f.e,y.a,v.MatTooltip,C.a,r.MatDialogActions,x.MatProgressBar],pipes:[u.TranslatePipe,A.AsyncPipe],encapsulation:2}),t}(l.a);0,void 0},"p0+G":function(e,t,n){"use strict";n.d(t,"a",function(){return O});var i=n("mrSG"),a=n("fXoL"),r=n("G8Aa"),o=n("3Pt+"),s=n("xKAQ"),l=n("IktG"),c=n("YnEf"),d=(n("qxrw"),n("//Q6")),u=n("l7P3"),p=n("sYmb"),m=n("XiUz"),f=n("bTqV"),h=n("znSr"),g=n("kmnG"),A=n("qFsG"),b=n("5yRj"),y=n("Dvla"),v=n("Qu3c"),C=n("NFeN"),x=n("ofXK"),w=n("0HhY"),S=n("bSwM");function E(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.title-required")," "))}var I=function(e){return{dashboardTitle:e}},O=function(e){function t(t,n,i,a,r,o,s){var l=e.call(this,t,o,a,r,s)||this;return l.store=t,l.translate=n,l.dashboardService=i,l.entityValue=a,l.entitiesTableConfigValue=r,l.fb=o,l.cd=s,l}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){this.dashboardScope=this.entitiesTableConfig.componentsData.dashboardScope,this.customerId=this.entitiesTableConfig.componentsData.customerId,e.prototype.ngOnInit.call(this)},t.prototype.isPublic=function(e){return Object(l.c)(e)},t.prototype.isCurrentPublicCustomer=function(e){return Object(l.b)(e,this.customerId)},t.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},t.prototype.buildForm=function(e){return this.updateFields(e),this.fb.group({title:[e?e.title:"",[o.Validators.required]],image:[e?e.image:null],mobileHide:[!!e&&e.mobileHide],mobileOrder:[e?e.mobileOrder:null,[o.Validators.pattern(/^-?[0-9]+$/)]],configuration:this.fb.group({description:[e&&e.configuration?e.configuration.description:""]})})},t.prototype.updateForm=function(e){this.updateFields(e),this.entityForm.patchValue({title:e.title}),this.entityForm.patchValue({image:e.image}),this.entityForm.patchValue({mobileHide:e.mobileHide}),this.entityForm.patchValue({mobileOrder:e.mobileOrder}),this.entityForm.patchValue({configuration:{description:e.configuration?e.configuration.description:""}})},t.prototype.prepareFormValue=function(t){var n=e.prototype.prepareFormValue.call(this,t);return n.configuration=Object(i.a)(Object(i.a)({},this.entity.configuration||{}),n.configuration||{}),n},t.prototype.onPublicLinkCopied=function(e){this.store.dispatch(new s.b({message:this.translate.instant("dashboard.public-link-copied-message"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},t.prototype.updateFields=function(e){e&&!Object(d.r)(e,{})&&(this.assignedCustomersText=Object(l.a)(e),this.publicLink=this.dashboardService.getPublicDashboardLink(e))},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](u.Store),a["\u0275\u0275directiveInject"](p.TranslateService),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"]("entity"),a["\u0275\u0275directiveInject"]("entitiesTableConfig"),a["\u0275\u0275directiveInject"](o.FormBuilder),a["\u0275\u0275directiveInject"](a.ChangeDetectorRef))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-dashboard-form"]],features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:74,vars:88,consts:[["fxLayout.xs","column",1,"tb-details-buttons"],["mat-raised-button","","color","accent",3,"disabled","fxShow","click"],["fxLayout","column",1,"mat-padding"],[1,"mat-block",3,"fxShow"],["translate",""],["matInput","","disabled","",3,"ngModel"],["fxLayout","column",3,"fxShow"],["shareHashTags","thingsboard, iot",2,"padding-bottom","1.25em",3,"shareTitle","shareText","shareLink"],["fxLayout","row"],["fxFlex","",1,"mat-block"],["mat-button","","mat-icon-button","","ngxClipboard","","matTooltipPosition","above",2,"margin-top","8px",3,"cbContent","matTooltip","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"],[3,"formGroup"],[3,"disabled"],[1,"mat-block"],["matInput","","formControlName","title","required",""],[4,"ngIf"],["formGroupName","configuration","fxLayout","column"],["matInput","","formControlName","description","rows","2"],["translate","",2,"padding-bottom","16px"],["fxFlex","","maxSizeByte","524288","formControlName","image",3,"label"],["fxFlex","","formControlName","mobileHide",2,"padding-bottom","16px","padding-top","16px"],["matInput","","formControlName","mobileOrder","type","number","step","1"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"button",1),a["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"open")}),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"button",1),a["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"export")}),a["\u0275\u0275pipe"](6,"async"),a["\u0275\u0275text"](7),a["\u0275\u0275pipe"](8,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"button",1),a["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"makePublic")}),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275text"](11),a["\u0275\u0275pipe"](12,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](13,"button",1),a["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"makePrivate")}),a["\u0275\u0275pipe"](14,"async"),a["\u0275\u0275text"](15),a["\u0275\u0275pipe"](16,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"button",1),a["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"manageAssignedCustomers")}),a["\u0275\u0275pipe"](18,"async"),a["\u0275\u0275text"](19),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"button",1),a["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"unassignFromCustomer")}),a["\u0275\u0275pipe"](22,"async"),a["\u0275\u0275text"](23),a["\u0275\u0275pipe"](24,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](25,"button",1),a["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"unassignFromEdge")}),a["\u0275\u0275pipe"](26,"async"),a["\u0275\u0275text"](27),a["\u0275\u0275pipe"](28,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](29,"button",1),a["\u0275\u0275listener"]("click",function(e){return t.onEntityAction(e,"delete")}),a["\u0275\u0275pipe"](30,"async"),a["\u0275\u0275text"](31),a["\u0275\u0275pipe"](32,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](33,"div",2),a["\u0275\u0275elementStart"](34,"mat-form-field",3),a["\u0275\u0275elementStart"](35,"mat-label",4),a["\u0275\u0275text"](36,"dashboard.assignedToCustomers"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](37,"input",5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](38,"div",6),a["\u0275\u0275element"](39,"tb-social-share-panel",7),a["\u0275\u0275pipe"](40,"translate"),a["\u0275\u0275pipe"](41,"translate"),a["\u0275\u0275elementStart"](42,"div",8),a["\u0275\u0275elementStart"](43,"mat-form-field",9),a["\u0275\u0275elementStart"](44,"mat-label",4),a["\u0275\u0275text"](45,"dashboard.public-link"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](46,"input",5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](47,"button",10),a["\u0275\u0275listener"]("cbOnSuccess",function(e){return t.onPublicLinkCopied(e)}),a["\u0275\u0275pipe"](48,"translate"),a["\u0275\u0275element"](49,"mat-icon",11),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](50,"form",12),a["\u0275\u0275elementStart"](51,"fieldset",13),a["\u0275\u0275pipe"](52,"async"),a["\u0275\u0275elementStart"](53,"mat-form-field",14),a["\u0275\u0275elementStart"](54,"mat-label",4),a["\u0275\u0275text"](55,"dashboard.title"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](56,"input",15),a["\u0275\u0275template"](57,E,3,3,"mat-error",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](58,"div",17),a["\u0275\u0275elementStart"](59,"mat-form-field",14),a["\u0275\u0275elementStart"](60,"mat-label",4),a["\u0275\u0275text"](61,"dashboard.description"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](62,"textarea",18),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](63,"div",19),a["\u0275\u0275text"](64,"dashboard.mobile-app-settings"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](65,"tb-image-input",20),a["\u0275\u0275pipe"](66,"translate"),a["\u0275\u0275elementStart"](67,"mat-checkbox",21),a["\u0275\u0275text"](68),a["\u0275\u0275pipe"](69,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](70,"mat-form-field",14),a["\u0275\u0275elementStart"](71,"mat-label",4),a["\u0275\u0275text"](72,"dashboard.mobile-order"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](73,"input",22),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](2,38,t.isLoading$))("fxShow",!t.isEdit),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](4,40,"dashboard.open-dashboard")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](6,42,t.isLoading$))("fxShow",!t.isEdit&&"tenant"===t.dashboardScope),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](8,44,"dashboard.export")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](10,46,t.isLoading$))("fxShow",!t.isEdit&&"tenant"===t.dashboardScope&&!t.isPublic(t.entity)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](12,48,"dashboard.make-public")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](14,50,t.isLoading$))("fxShow",!t.isEdit&&("tenant"===t.dashboardScope&&t.isPublic(t.entity)||"customer"===t.dashboardScope&&t.isCurrentPublicCustomer(t.entity))),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](16,52,"dashboard.make-private")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](18,54,t.isLoading$))("fxShow",!t.isEdit&&"tenant"===t.dashboardScope),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](20,56,"dashboard.manage-assigned-customers")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](22,58,t.isLoading$))("fxShow",!t.isEdit&&"customer"===t.dashboardScope&&!t.isCurrentPublicCustomer(t.entity)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](24,60,"dashboard.unassign-from-customer")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](26,62,t.isLoading$))("fxShow",!t.isEdit&&"edge"===t.dashboardScope),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](28,64,"edge.unassign-from-edge")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](30,66,t.isLoading$))("fxShow",!t.hideDelete()&&!t.isEdit),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](32,68,"dashboard.delete")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("fxShow",!t.isEdit&&(null==t.assignedCustomersText?null:t.assignedCustomersText.length)&&"tenant"===t.dashboardScope),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngModel",t.assignedCustomersText),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",!t.isEdit&&("tenant"===t.dashboardScope&&t.isPublic(t.entity)||"customer"===t.dashboardScope&&t.isCurrentPublicCustomer(t.entity))),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("shareTitle",a["\u0275\u0275pipeBind2"](40,70,"dashboard.socialshare-title",a["\u0275\u0275pureFunction1"](84,I,null==t.entity?null:t.entity.title))),a["\u0275\u0275propertyInterpolate"]("shareText",a["\u0275\u0275pipeBind2"](41,73,"dashboard.socialshare-text",a["\u0275\u0275pureFunction1"](86,I,null==t.entity?null:t.entity.title))),a["\u0275\u0275propertyInterpolate"]("shareLink",t.publicLink),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("ngModel",t.publicLink),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("cbContent",t.publicLink),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](48,76,"dashboard.copy-public-link")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("formGroup",t.entityForm),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](52,78,t.isLoading$)||!t.isEdit),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",t.entityForm.get("title").hasError("required")),a["\u0275\u0275advance"](8),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](66,80,"dashboard.image")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](69,82,"dashboard.mobile-hide")," "))},directives:[m.f,f.MatButton,h.d,g.MatFormField,g.MatLabel,p.TranslateDirective,A.MatInput,o.DefaultValueAccessor,o.NgControlStatus,o.NgModel,b.a,m.b,y.a,v.MatTooltip,C.MatIcon,o["\u0275angular_packages_forms_forms_ba"],o.NgControlStatusGroup,o.FormGroupDirective,o.FormControlName,o.RequiredValidator,x.NgIf,o.FormGroupName,w.a,S.MatCheckbox,o.NumberValueAccessor,g.MatError],pipes:[x.AsyncPipe,p.TranslatePipe],styles:[""]}),t}(r.a);0,void 0},"p4Q/":function(e,t,n){"use strict";n.d(t,"a",function(){return X});var i=n("mrSG"),a=n("fXoL"),r=n("3Pt+"),o=n("LRne"),s=n("mbhL"),l=n("4r/P"),c=n("vkgz"),d=n("lJxs"),u=n("Kj3r"),p=n("/uUt"),m=n("eIep"),f=n("w1tV"),h=n("JIr8"),g=n("8LU1"),A=n("WeLn"),b=n("T4sd"),y=n("FtGj"),v=n("zkya"),C=n("JIJk"),x=n("g+M/"),w=n("6oqA"),S=n("eriv"),E=n("Duvn"),I=n("l7P3"),O=n("sYmb"),T=n("0IaG"),F=n("kmnG"),B=n("qFsG"),M=n("/1cH"),P=n("ofXK"),D=n("bTqV"),k=n("NFeN"),_=n("Qu3c"),L=n("FKr1"),j=n("d5eY"),N=["deviceProfileInput"],R=["deviceProfileAutocomplete"];function U(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",10),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().clear()}),a["\u0275\u0275elementStart"](1,"mat-icon",11),a["\u0275\u0275text"](2,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}}function V(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",12),a["\u0275\u0275listener"]("click",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().editDeviceProfile(e)}),a["\u0275\u0275pipe"](1,"translate"),a["\u0275\u0275elementStart"](2,"mat-icon",11),a["\u0275\u0275text"](3,"edit"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}2&e&&a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](1,1,"device-profile.edit"))}function Q(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",13),a["\u0275\u0275element"](1,"span",14),a["\u0275\u0275pipe"](2,"highlight"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("innerHTML",a["\u0275\u0275pipeBind2"](2,2,n.name,i.searchText),a["\u0275\u0275sanitizeHtml"])}}function G(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275elementStart"](1,"span",19),a["\u0275\u0275text"](2,"device-profile.no-device-profiles-found"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]())}var H=function(e){return{entity:e}};function K(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"span"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"span"),a["\u0275\u0275elementStart"](4,"a",20),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var t=a["\u0275\u0275nextContext"](2);return t.createDeviceProfile(e,t.searchText)}),a["\u0275\u0275text"](5,"device-profile.create-new-device-profile"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,i.translate.get("device-profile.no-device-profiles-matching",a["\u0275\u0275pureFunction1"](3,H,i.truncate.transform(i.searchText,!0,6,"..."))))," ")}}function q(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",15),a["\u0275\u0275elementStart"](1,"div",16),a["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),a["\u0275\u0275template"](2,G,3,0,"div",17),a["\u0275\u0275template"](3,K,6,5,"ng-template",null,18,a["\u0275\u0275templateRefExtractor"]),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275reference"](4),i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",null),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!i.textIsNotEmpty(i.searchText)||!i.addNewProfile)("ngIfElse",n)}}function z(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.device-profile-required")," "))}function W(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-hint"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](2,1,n.hint))}}var X=function(){function e(e,t,n,i,r,o,s){this.store=e,this.translate=t,this.truncate=n,this.deviceProfileService=i,this.fb=r,this.zone=o,this.dialog=s,this.selectDefaultProfile=!1,this.selectFirstProfile=!1,this.displayAllOnEmpty=!1,this.editProfileEnabled=!0,this.addNewProfile=!0,this.transportType=null,this.deviceProfileUpdated=new a.EventEmitter,this.deviceProfileChanged=new a.EventEmitter,this.searchText="",this.dirty=!1,this.ignoreClosedPanel=!1,this.allDeviceProfile={name:this.translate.instant("device-profile.all-device-profiles"),type:C.h.DEFAULT,transportType:C.j.DEFAULT,id:null},this.propagateChange=function(e){},this.selectDeviceProfileFormGroup=this.fb.group({deviceProfile:[null]})}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(g.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.filteredDeviceProfiles=this.selectDeviceProfileFormGroup.get("deviceProfile").valueChanges.pipe(Object(c.a)(function(t){var n;n="string"!=typeof t&&t?t:null,e.displayAllOnEmpty&&!n||e.updateView(n)}),Object(d.a)(function(t){return t?"string"==typeof t?t:e.displayAllOnEmpty&&t===e.allDeviceProfile?"":t.name:""}),Object(u.a)(150),Object(p.a)(),Object(m.a)(function(t){return e.fetchDeviceProfiles(t)}),Object(f.a)())},e.prototype.ngOnChanges=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t],a=e[i];a.firstChange||a.currentValue===a.previousValue||"transportType"===i&&this.writeValue(null)}},e.prototype.selectDefaultDeviceProfileIfNeeded=function(){var e=this;this.selectDefaultProfile&&!this.modelValue?this.deviceProfileService.getDefaultDeviceProfileInfo().subscribe(function(t){!t||e.transportType&&t.transportType!==e.transportType?e.selectFirstDeviceProfileIfNeeded():(e.selectDeviceProfileFormGroup.get("deviceProfile").patchValue(t,{emitEvent:!1}),e.updateView(t))}):this.selectFirstDeviceProfileIfNeeded()},e.prototype.selectFirstDeviceProfileIfNeeded=function(){var e=this;if(this.selectFirstProfile&&!this.modelValue){var t=new s.b(1,0,null,{property:"createdTime",direction:l.a.DESC});this.deviceProfileService.getDeviceProfileInfos(t,this.transportType,{ignoreLoading:!0}).subscribe(function(t){var n=t.data;n.length&&(e.selectDeviceProfileFormGroup.get("deviceProfile").patchValue(n[0],{emitEvent:!1}),e.updateView(n[0]))})}},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.selectDeviceProfileFormGroup.disable():this.selectDeviceProfileFormGroup.enable()},e.prototype.writeValue=function(e){var t=this;this.searchText="",null!=e?this.deviceProfileService.getDeviceProfileInfo(e.id).subscribe(function(e){t.modelValue=new v.a(e.id.id),t.selectDeviceProfileFormGroup.get("deviceProfile").patchValue(e,{emitEvent:!1}),t.deviceProfileChanged.emit(e)}):this.displayAllOnEmpty?(this.modelValue=null,this.selectDeviceProfileFormGroup.get("deviceProfile").patchValue(this.allDeviceProfile,{emitEvent:!1})):(this.modelValue=null,this.selectDeviceProfileFormGroup.get("deviceProfile").patchValue(null,{emitEvent:!1}),this.selectDefaultDeviceProfileIfNeeded()),this.dirty=!0},e.prototype.onFocus=function(){this.dirty&&(this.selectDeviceProfileFormGroup.get("deviceProfile").updateValueAndValidity({onlySelf:!0,emitEvent:!0}),this.dirty=!1)},e.prototype.onPanelClosed=function(){var e=this;this.ignoreClosedPanel?this.ignoreClosedPanel=!1:this.displayAllOnEmpty&&!this.selectDeviceProfileFormGroup.get("deviceProfile").value&&this.zone.run(function(){e.selectDeviceProfileFormGroup.get("deviceProfile").patchValue(e.allDeviceProfile,{emitEvent:!0})},0)},e.prototype.updateView=function(e){var t=e&&e.id?new v.a(e.id.id):null;Object(A.a)(this.modelValue,t)||(this.modelValue=t,this.propagateChange(this.modelValue),this.deviceProfileChanged.emit(e))},e.prototype.displayDeviceProfileFn=function(e){return e?e.name:void 0},e.prototype.fetchDeviceProfiles=function(e){var t=this;this.searchText=e;var n=new s.b(10,0,e,{property:"name",direction:l.a.ASC});return this.deviceProfileService.getDeviceProfileInfos(n,this.transportType,{ignoreLoading:!0}).pipe(Object(h.a)(function(){return Object(o.a)(Object(E.a)())}),Object(d.a)(function(e){var n=e.data;return t.displayAllOnEmpty&&(n=Object(i.h)([t.allDeviceProfile],n)),n}))},e.prototype.clear=function(){var e=this;this.ignoreClosedPanel=!0,this.selectDeviceProfileFormGroup.get("deviceProfile").patchValue(null,{emitEvent:!0}),setTimeout(function(){e.deviceProfileInput.nativeElement.blur(),e.deviceProfileInput.nativeElement.focus()},0)},e.prototype.textIsNotEmpty=function(e){return e&&e.length>0},e.prototype.deviceProfileEnter=function(e){this.editProfileEnabled&&e.keyCode===y.ENTER&&(e.preventDefault(),this.modelValue||this.createDeviceProfile(e,this.searchText))},e.prototype.createDeviceProfile=function(e,t){e.preventDefault();var n={name:t,transportType:this.transportType};this.addNewProfile&&this.openDeviceProfileDialog(n,!0)},e.prototype.editDeviceProfile=function(e){var t=this;e.preventDefault(),this.deviceProfileService.getDeviceProfile(this.modelValue.id).subscribe(function(e){t.openDeviceProfileDialog(e,!1)})},e.prototype.openDeviceProfileDialog=function(e,t){var n=this;(t?this.dialog.open(S.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{deviceProfileName:e.name,transportType:e.transportType}}).afterClosed():this.dialog.open(w.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{isAdd:!1,deviceProfile:e}}).afterClosed()).subscribe(function(e){e?n.deviceProfileService.getDeviceProfileInfo(e.id.id).subscribe(function(i){n.modelValue=new v.a(i.id.id),n.selectDeviceProfileFormGroup.get("deviceProfile").patchValue(i,{emitEvent:!0}),t?n.propagateChange(n.modelValue):n.deviceProfileUpdated.next(e.id),n.deviceProfileChanged.emit(i)}):setTimeout(function(){n.deviceProfileInput.nativeElement.blur(),n.deviceProfileInput.nativeElement.focus()},0)})},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](I.Store),a["\u0275\u0275directiveInject"](O.TranslateService),a["\u0275\u0275directiveInject"](b.a),a["\u0275\u0275directiveInject"](x.a),a["\u0275\u0275directiveInject"](r.FormBuilder),a["\u0275\u0275directiveInject"](a.NgZone),a["\u0275\u0275directiveInject"](T.MatDialog))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-device-profile-autocomplete"]],viewQuery:function(e,t){if(1&e&&(a["\u0275\u0275viewQuery"](N,3),a["\u0275\u0275viewQuery"](R,3)),2&e){var n=void 0;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.deviceProfileInput=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.deviceProfileAutocomplete=n.first)}},inputs:{selectDefaultProfile:"selectDefaultProfile",selectFirstProfile:"selectFirstProfile",displayAllOnEmpty:"displayAllOnEmpty",editProfileEnabled:"editProfileEnabled",addNewProfile:"addNewProfile",transportType:"transportType",required:"required",disabled:"disabled",hint:"hint"},outputs:{deviceProfileUpdated:"deviceProfileUpdated",deviceProfileChanged:"deviceProfileChanged"},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)(function(){return e}),multi:!0}]),a["\u0275\u0275NgOnChangesFeature"]],decls:14,vars:17,consts:[[1,"mat-block",3,"formGroup"],["matInput","","type","text","formControlName","deviceProfile",3,"placeholder","required","matAutocomplete","focusin","keydown","keypress"],["deviceProfileInput",""],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Edit","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],[1,"tb-autocomplete",3,"displayWith","closed"],["deviceProfileAutocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["class","tb-not-found",3,"value",4,"ngIf"],[4,"ngIf"],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"material-icons"],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Edit","matTooltipPosition","above",3,"matTooltip","click"],[3,"value"],[3,"innerHTML"],[1,"tb-not-found",3,"value"],[1,"tb-not-found-content",3,"click"],[4,"ngIf","ngIfElse"],["searchNotEmpty",""],["translate",""],["translate","",3,"click"]],template:function(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-form-field",0),a["\u0275\u0275elementStart"](1,"input",1,2),a["\u0275\u0275listener"]("focusin",function(){return t.onFocus()})("keydown",function(e){return t.deviceProfileEnter(e)})("keypress",function(e){return t.deviceProfileEnter(e)}),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](4,U,3,0,"button",3),a["\u0275\u0275template"](5,V,4,3,"button",4),a["\u0275\u0275elementStart"](6,"mat-autocomplete",5,6),a["\u0275\u0275listener"]("closed",function(){return t.onPanelClosed()}),a["\u0275\u0275template"](8,Q,3,5,"mat-option",7),a["\u0275\u0275pipe"](9,"async"),a["\u0275\u0275template"](10,q,5,3,"mat-option",8),a["\u0275\u0275pipe"](11,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](12,z,3,3,"mat-error",9),a["\u0275\u0275template"](13,W,3,3,"mat-hint",9),a["\u0275\u0275elementEnd"]()),2&e){var n,i=a["\u0275\u0275reference"](7);a["\u0275\u0275property"]("formGroup",t.selectDeviceProfileFormGroup),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](3,11,"device-profile.device-profile")),a["\u0275\u0275property"]("required",t.required)("matAutocomplete",i),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",t.selectDeviceProfileFormGroup.get("deviceProfile").value&&!t.disabled),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.selectDeviceProfileFormGroup.get("deviceProfile").value&&!t.disabled&&t.editProfileEnabled),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("displayWith",t.displayDeviceProfileFn),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",a["\u0275\u0275pipeBind1"](9,13,t.filteredDeviceProfiles)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!(null!=(n=a["\u0275\u0275pipeBind1"](11,15,t.filteredDeviceProfiles))&&n.length)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",t.selectDeviceProfileFormGroup.get("deviceProfile").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.hint&&!t.disabled)}},directives:[F.MatFormField,r.NgControlStatusGroup,r.FormGroupDirective,B.MatInput,r.DefaultValueAccessor,M.MatAutocompleteTrigger,r.NgControlStatus,r.FormControlName,r.RequiredValidator,P.NgIf,M.MatAutocomplete,P.NgForOf,D.MatButton,F.MatSuffix,k.MatIcon,_.MatTooltip,L.MatOption,O.TranslateDirective,F.MatError,F.MatHint],pipes:[O.TranslatePipe,P.AsyncPipe,j.a],encapsulation:2}),e}();0,void 0},pNH3:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var i=n("fXoL"),a=n("gGt+"),r=n("1G5W"),o=n("XNiG"),s=n("3Pt+"),l=n("kmnG"),c=n("XiUz"),d=n("d3UM"),u=n("ofXK"),p=n("FKr1"),m=n("4aul"),f=n("sYmb");function h(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",7),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("value",null),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,2,"device-profile.power-saving-mode-type.default")))}function g(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",7),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,a.powerModeTranslationMap.get(n))," ")}}function A(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"section",1),i["\u0275\u0275element"](1,"tb-time-unit-select",8),i["\u0275\u0275element"](2,"tb-time-unit-select",9),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("labelText","device-profile.edrx-cycle")("requiredText","device-profile.edrx-cycle-required")("patternText","device-profile.edrx-cycle-pattern")("minTime",5120)("minText","device-profile.edrx-cycle-min"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("labelText","device-profile.paging-transmission-window")("requiredText","device-profile.paging-transmission-window-required")("patternText","device-profile.paging-transmission-window-pattern")("minTime",1280)("minText","device-profile.paging-transmission-window-min"))}function b(e,t){1&e&&i["\u0275\u0275element"](0,"tb-time-unit-select",10),2&e&&i["\u0275\u0275property"]("labelText","device-profile.psm-activity-timer")("requiredText","device-profile.psm-activity-timer-required")("patternText","device-profile.psm-activity-timer-pattern")("minTime",1280)("minText","device-profile.psm-activity-timer-min")}var y=function(){function e(){this.powerMods=Object.values(a.y),this.powerModeTranslationMap=a.z,this.destroy$=new o.b,this.isDeviceSetting=!1}return e.prototype.ngOnInit=function(){var e=this;this.parentForm.get("powerMode").valueChanges.pipe(Object(r.a)(this.destroy$)).subscribe(function(t){t===a.y.E_DRX?(e.parentForm.get("edrxCycle").enable({emitEvent:!1}),e.parentForm.get("pagingTransmissionWindow").enable({emitEvent:!1}),e.disablePSKMode()):t===a.y.PSM?(e.parentForm.get("psmActivityTimer").enable({emitEvent:!1}),e.disableEdrxMode()):(e.disableEdrxMode(),e.disablePSKMode())})},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e.prototype.disablePSKMode=function(){this.parentForm.get("psmActivityTimer").disable({emitEvent:!1}),this.parentForm.get("psmActivityTimer").reset(a.p,{emitEvent:!1})},e.prototype.disableEdrxMode=function(){this.parentForm.get("edrxCycle").disable({emitEvent:!1}),this.parentForm.get("edrxCycle").reset(a.g,{emitEvent:!1}),this.parentForm.get("pagingTransmissionWindow").disable({emitEvent:!1}),this.parentForm.get("pagingTransmissionWindow").reset(a.m,{emitEvent:!1})},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-power-mode-settings"]],inputs:{parentForm:"parentForm",isDeviceSetting:"isDeviceSetting"},decls:10,vars:8,consts:[[3,"formGroup"],["fxFlex","",1,"mat-block"],["formControlName","powerMode"],[3,"value",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["class","mat-block","fxFlex","",4,"ngIf"],["formControlName","psmActivityTimer",3,"labelText","requiredText","patternText","minTime","minText",4,"ngIf"],[3,"value"],["formControlName","edrxCycle",3,"labelText","requiredText","patternText","minTime","minText"],["formControlName","pagingTransmissionWindow",3,"labelText","requiredText","patternText","minTime","minText"],["formControlName","psmActivityTimer",3,"labelText","requiredText","patternText","minTime","minText"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"section",0),i["\u0275\u0275elementStart"](1,"mat-form-field",1),i["\u0275\u0275elementStart"](2,"mat-label"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"mat-select",2),i["\u0275\u0275template"](6,h,3,4,"mat-option",3),i["\u0275\u0275template"](7,g,3,4,"mat-option",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,A,3,10,"section",5),i["\u0275\u0275template"](9,b,1,5,"tb-time-unit-select",6),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.parentForm),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](t.isDeviceSetting?i["\u0275\u0275pipeBind1"](4,6,"device-profile.power-saving-mode"):" "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",t.isDeviceSetting),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",t.powerMods),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","E_DRX"===t.parentForm.get("powerMode").value),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","PSM"===t.parentForm.get("powerMode").value))},directives:[s.NgControlStatusGroup,s.FormGroupDirective,l.MatFormField,c.b,l.MatLabel,d.MatSelect,s.NgControlStatus,s.FormControlName,u.NgIf,u.NgForOf,p.MatOption,m.a],pipes:[f.TranslatePipe],encapsulation:2}),e}();0,void 0},"pf+U":function(e,t,n){"use strict";n.d(t,"a",function(){return k});var i=n("fXoL"),a=n("3Pt+"),r=n("LRne"),o=n("vkgz"),s=n("lJxs"),l=n("5+tZ"),c=n("w1tV"),d=n("8LU1"),u=n("T4sd"),p=n("/1cH"),m=n("FtGj"),f=n("FKr1"),h=n("l7P3"),g=n("sYmb"),A=n("kmnG"),b=n("ofXK"),y=n("qFsG"),v=n("bTqV"),C=n("NFeN"),x=n("d5eY"),w=["filterAutocomplete"],S=["autocomplete"],E=["filterInput"];function I(e,t){1&e&&i["\u0275\u0275element"](0,"mat-label")}function O(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",9),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().clear()}),i["\u0275\u0275elementStart"](1,"mat-icon",10),i["\u0275\u0275text"](2,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function T(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",11),i["\u0275\u0275element"](1,"span",12),i["\u0275\u0275pipe"](2,"highlight"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind2"](2,2,n.filter,a.searchText),i["\u0275\u0275sanitizeHtml"])}}function F(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"span",18),i["\u0275\u0275text"](2,"filter.no-filters-found"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}var B=function(e){return{filter:e}};function M(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,n.translate.get("filter.no-filter-matching",i["\u0275\u0275pureFunction1"](3,B,n.truncate.transform(n.searchText,!0,6,"..."))))," ")}}function P(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-option",13),i["\u0275\u0275elementStart"](1,"div",14),i["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),i["\u0275\u0275template"](2,F,3,0,"div",15),i["\u0275\u0275template"](3,M,3,5,"ng-template",null,16,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementStart"](5,"span"),i["\u0275\u0275elementStart"](6,"a",17),i["\u0275\u0275listener"]("click",function(e){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"]();return t.createFilter(e,t.searchText)}),i["\u0275\u0275text"](7,"filter.create-new-filter"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=i["\u0275\u0275reference"](4),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",null),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!r.textIsNotEmpty(r.searchText))("ngIfElse",a)}}function D(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"filter.filter-required")," "))}var k=function(){function e(e,t,n,i,a){this.store=e,this.errorStateMatcher=t,this.translate=n,this.truncate=i,this.fb=a,this.filterList=[],this.searchText="",this.dirty=!1,this.creatingFilter=!1,this.propagateChange=function(e){},this.selectFilterFormGroup=this.fb.group({filter:[null]})}return Object.defineProperty(e.prototype,"tbRequired",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(d.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){for(var e=this,t=this.aliasController.getFilters(),n=0,i=Object.keys(t);n<i.length;n++){var a=i[n];this.filterList.push(t[a])}this.filteredFilters=this.selectFilterFormGroup.get("filter").valueChanges.pipe(Object(o.a)(function(t){var n;n="string"!=typeof t&&t?t:null,e.updateView(n),null===t&&e.clear()}),Object(s.a)(function(e){return e?"string"==typeof e?e:e.filter:""}),Object(l.b)(function(t){return e.fetchFilters(t)}),Object(c.a)())},e.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=this.tbRequired&&!this.modelValue;return n||i},e.prototype.ngAfterViewInit=function(){},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.selectFilterFormGroup.disable({emitEvent:!1}):this.selectFilterFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){this.searchText="";var t=null;if(null!=e){var n=this.aliasController.getFilters();n[e]&&(t=n[e])}null!=t?(this.modelValue=t.id,this.selectFilterFormGroup.get("filter").patchValue(t,{emitEvent:!1})):(this.modelValue=null,this.selectFilterFormGroup.get("filter").patchValue("",{emitEvent:!1})),this.dirty=!0},e.prototype.onFocus=function(){this.dirty&&(this.selectFilterFormGroup.get("filter").updateValueAndValidity({onlySelf:!0,emitEvent:!0}),this.dirty=!1)},e.prototype.updateView=function(e){var t=e?e.id:null;this.modelValue!==t&&(this.modelValue=t,this.propagateChange(this.modelValue))},e.prototype.displayFilterFn=function(e){return e?e.filter:void 0},e.prototype.fetchFilters=function(e){this.searchText=e;var t=this.filterList;return e&&e.length&&(t=this.filterList.filter(function(t){return t.filter.toLowerCase().includes(e.toLowerCase())})),Object(r.a)(t)},e.prototype.clear=function(e){var t=this;void 0===e&&(e=""),this.filterInput.nativeElement.value=e,this.selectFilterFormGroup.get("filter").patchValue(e,{emitEvent:!0}),setTimeout(function(){t.filterInput.nativeElement.blur(),t.filterInput.nativeElement.focus()},0)},e.prototype.textIsNotEmpty=function(e){return!!(e&&null!=e&&e.length>0)},e.prototype.filterEnter=function(e){e.keyCode===m.ENTER&&(e.preventDefault(),this.modelValue||this.createFilter(e,this.searchText))},e.prototype.createFilter=function(e,t){var n=this;e.preventDefault(),this.creatingFilter=!0,this.callbacks&&this.callbacks.createFilter&&this.callbacks.createFilter(t).subscribe(function(e){e?(n.filterList.push(e),n.modelValue=e.id,n.selectFilterFormGroup.get("filter").patchValue(e,{emitEvent:!0}),n.propagateChange(n.modelValue)):setTimeout(function(){n.filterInput.nativeElement.blur(),n.filterInput.nativeElement.focus()},0)})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](f.ErrorStateMatcher,4),i["\u0275\u0275directiveInject"](g.TranslateService),i["\u0275\u0275directiveInject"](u.a),i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-filter-select"]],viewQuery:function(e,t){if(1&e&&(i["\u0275\u0275viewQuery"](w,1),i["\u0275\u0275viewQuery"](S,1,p.MatAutocompleteTrigger),i["\u0275\u0275viewQuery"](E,3)),2&e){var n=void 0;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.filterAutocomplete=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.autoCompleteTrigger=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.filterInput=n.first)}},inputs:{aliasController:"aliasController",callbacks:"callbacks",showLabel:"showLabel",tbRequired:"tbRequired",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:f.ErrorStateMatcher,useExisting:e}])],decls:13,vars:18,consts:[[1,"mat-block",3,"floatLabel","hideRequiredMarker","formGroup"],[4,"ngIf"],["matInput","","type","text","formControlName","filter",3,"placeholder","required","matAutocomplete","focusin","keydown","keypress"],["filterInput",""],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"tb-autocomplete",3,"displayWith"],["filterAutocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["class","tb-not-found",3,"value",4,"ngIf"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"material-icons"],[3,"value"],[3,"innerHTML"],[1,"tb-not-found",3,"value"],[1,"tb-not-found-content",3,"click"],[4,"ngIf","ngIfElse"],["searchNotEmpty",""],["translate","",3,"click"],["translate",""]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-form-field",0),i["\u0275\u0275template"](1,I,1,0,"mat-label",1),i["\u0275\u0275elementStart"](2,"input",2,3),i["\u0275\u0275listener"]("focusin",function(){return t.onFocus()})("keydown",function(e){return t.filterEnter(e)})("keypress",function(e){return t.filterEnter(e)}),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](5,O,3,0,"button",4),i["\u0275\u0275elementStart"](6,"mat-autocomplete",5,6),i["\u0275\u0275template"](8,T,3,5,"mat-option",7),i["\u0275\u0275pipe"](9,"async"),i["\u0275\u0275template"](10,P,8,3,"mat-option",8),i["\u0275\u0275pipe"](11,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](12,D,3,3,"mat-error",1),i["\u0275\u0275elementEnd"]()),2&e){var n,a=i["\u0275\u0275reference"](7);i["\u0275\u0275property"]("floatLabel",t.showLabel?"auto":"always")("hideRequiredMarker",!t.showLabel)("formGroup",t.selectFilterFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.showLabel),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](4,12,"filter.filter")),i["\u0275\u0275property"]("required",t.tbRequired)("matAutocomplete",a),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",t.selectFilterFormGroup.get("filter").value&&!t.disabled),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("displayWith",t.displayFilterFn),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](9,14,t.filteredFilters)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!(null!=(n=i["\u0275\u0275pipeBind1"](11,16,t.filteredFilters))&&n.length)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!t.modelValue&&t.tbRequired)}},directives:[A.MatFormField,a.NgControlStatusGroup,a.FormGroupDirective,b.NgIf,y.MatInput,a.DefaultValueAccessor,p.MatAutocompleteTrigger,a.NgControlStatus,a.FormControlName,a.RequiredValidator,p.MatAutocomplete,b.NgForOf,A.MatLabel,v.MatButton,A.MatSuffix,C.MatIcon,f.MatOption,g.TranslateDirective,A.MatError],pipes:[g.TranslatePipe,b.AsyncPipe,x.a],styles:["[_nghost-%COMP%]     .mat-form-field-infix{border-top:none}"]}),e}();0,void 0},qCKp:function(e,t,n){"use strict";n.r(t),n.d(t,"Observable",function(){return i.a}),n.d(t,"ConnectableObservable",function(){return a.a}),n.d(t,"GroupedObservable",function(){return r.a}),n.d(t,"observable",function(){return o.a}),n.d(t,"Subject",function(){return s.b}),n.d(t,"BehaviorSubject",function(){return l.a}),n.d(t,"ReplaySubject",function(){return c.a}),n.d(t,"AsyncSubject",function(){return d.a}),n.d(t,"asap",function(){return u.a}),n.d(t,"asapScheduler",function(){return u.b}),n.d(t,"async",function(){return p.a}),n.d(t,"asyncScheduler",function(){return p.b}),n.d(t,"queue",function(){return m.a}),n.d(t,"queueScheduler",function(){return m.b}),n.d(t,"animationFrame",function(){return f.a}),n.d(t,"animationFrameScheduler",function(){return f.b}),n.d(t,"VirtualTimeScheduler",function(){return x}),n.d(t,"VirtualAction",function(){return w}),n.d(t,"Scheduler",function(){return S.a}),n.d(t,"Subscription",function(){return E.a}),n.d(t,"Subscriber",function(){return I.a}),n.d(t,"Notification",function(){return O.a}),n.d(t,"NotificationKind",function(){return O.b}),n.d(t,"pipe",function(){return T.a}),n.d(t,"noop",function(){return F.a}),n.d(t,"identity",function(){return B.a}),n.d(t,"isObservable",function(){return M.a}),n.d(t,"ArgumentOutOfRangeError",function(){return P.a}),n.d(t,"EmptyError",function(){return D.a}),n.d(t,"ObjectUnsubscribedError",function(){return k.a}),n.d(t,"UnsubscriptionError",function(){return _.a}),n.d(t,"TimeoutError",function(){return L.a}),n.d(t,"bindCallback",function(){return Q}),n.d(t,"bindNodeCallback",function(){return K}),n.d(t,"combineLatest",function(){return X.b}),n.d(t,"concat",function(){return $.a}),n.d(t,"defer",function(){return J.a}),n.d(t,"empty",function(){return Y.b}),n.d(t,"forkJoin",function(){return Z.a}),n.d(t,"from",function(){return ee.a}),n.d(t,"fromEvent",function(){return te.a}),n.d(t,"fromEventPattern",function(){return ie}),n.d(t,"generate",function(){return ae}),n.d(t,"iif",function(){return oe}),n.d(t,"interval",function(){return se.a}),n.d(t,"merge",function(){return le.a}),n.d(t,"never",function(){return ce.b}),n.d(t,"of",function(){return de.a}),n.d(t,"onErrorResumeNext",function(){return ue}),n.d(t,"pairs",function(){return pe}),n.d(t,"partition",function(){return Ae}),n.d(t,"race",function(){return be.a}),n.d(t,"range",function(){return ye}),n.d(t,"throwError",function(){return Ce.a}),n.d(t,"timer",function(){return xe.a}),n.d(t,"using",function(){return we}),n.d(t,"zip",function(){return Se.b}),n.d(t,"scheduled",function(){return Ee.a}),n.d(t,"EMPTY",function(){return Y.a}),n.d(t,"NEVER",function(){return ce.a}),n.d(t,"config",function(){return Ie.a});var i=n("HDdC"),a=n("EQ5u"),r=n("OQgR"),o=n("kJWO"),s=n("XNiG"),l=n("2Vo4"),c=n("jtHE"),d=n("NHP+"),u=n("7Hc7"),p=n("D0XW"),m=n("qgXg"),f=n("eNwd"),h=n("t9bE"),g=n("KUzl"),A=n("MGFw"),b=n("WtWf"),y=n("mvVQ"),v=n("/E8u"),C=n("3N8a"),x=function(e){Object(y.a)(n,e);var t=Object(v.a)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;return Object(A.a)(this,n),(e=t.call(this,i,function(){return e.frame})).maxFrames=a,e.frame=0,e.index=-1,e}return Object(b.a)(n,[{key:"flush",value:function(){for(var e,t,n=this.actions,i=this.maxFrames;(t=n[0])&&t.delay<=i&&(n.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=n.shift();)t.unsubscribe();throw e}}}]),n}(n("IjjT").a);x.frameTimeFactor=10;var w=function(e){Object(y.a)(n,e);var t=Object(v.a)(n);function n(e,i){var a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.index+=1;return Object(A.a)(this,n),(a=t.call(this,e,i)).scheduler=e,a.work=i,a.index=r,a.active=!0,a.index=e.index=r,a}return Object(b.a)(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.id)return Object(h.a)(Object(g.a)(n.prototype),"schedule",this).call(this,e,t);this.active=!1;var i=new n(this.scheduler,this.work);return this.add(i),i.schedule(e,t)}},{key:"requestAsyncId",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.delay=e.frame+i;var a=e.actions;return a.push(this),a.sort(n.sortActions),!0}},{key:"recycleAsyncId",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},{key:"_execute",value:function(e,t){if(!0===this.active)return Object(h.a)(Object(g.a)(n.prototype),"_execute",this).call(this,e,t)}}],[{key:"sortActions",value:function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1}}]),n}(C.a),S=n("Y/cZ"),E=n("quSY"),I=n("7o/Q"),O=n("WMd4"),T=n("mCNh"),F=n("KqfI"),B=n("SpAZ"),M=n("7+OI"),P=n("4I5i"),D=n("sVev"),k=n("9ppp"),_=n("pjAE"),L=n("Y6u4"),j=n("8vcG"),N=n("lJxs"),R=n("8Qeq"),U=n("DH7j"),V=n("z+Ro");function Q(e,t,n){if(t){if(!Object(V.a)(t))return function(){return Q(e,n).apply(void 0,arguments).pipe(Object(N.a)(function(e){return Object(U.a)(e)?t.apply(void 0,Object(j.a)(e)):t(e)}))};n=t}return function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];var o,s=this,l={context:s,subject:o,callbackFunc:e,scheduler:n};return new i.a(function(t){if(n){var i={args:a,subscriber:t,params:l};return n.schedule(G,0,i)}if(!o){o=new d.a;try{e.apply(s,[].concat(a,[function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.next(t.length<=1?t[0]:t),o.complete()}]))}catch(r){Object(R.a)(o)?o.error(r):console.warn(r)}}return o.subscribe(t)})}}function G(e){var t=this,n=e.args,i=e.subscriber,a=e.params,r=a.callbackFunc,o=a.context,s=a.scheduler,l=a.subject;if(!l){l=a.subject=new d.a;try{r.apply(o,[].concat(Object(j.a)(n),[function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var a=n.length<=1?n[0]:n;t.add(s.schedule(H,0,{value:a,subject:l}))}]))}catch(c){l.error(c)}}this.add(l.subscribe(i))}function H(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function K(e,t,n){if(t){if(!Object(V.a)(t))return function(){return K(e,n).apply(void 0,arguments).pipe(Object(N.a)(function(e){return Object(U.a)(e)?t.apply(void 0,Object(j.a)(e)):t(e)}))};n=t}return function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];var o={subject:void 0,args:a,callbackFunc:e,scheduler:n,context:this};return new i.a(function(t){var i=o.context,r=o.subject;if(n)return n.schedule(q,0,{params:o,subscriber:t,context:i});if(!r){r=o.subject=new d.a;try{e.apply(i,[].concat(a,[function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.shift();if(i)return r.error(i),void 0;r.next(t.length<=1?t[0]:t),r.complete()}]))}catch(s){Object(R.a)(r)?r.error(s):console.warn(s)}}return r.subscribe(t)})}}function q(e){var t=this,n=e.params,i=e.subscriber,a=e.context,r=n.callbackFunc,o=n.args,s=n.scheduler,l=n.subject;if(!l){l=n.subject=new d.a;try{r.apply(a,[].concat(Object(j.a)(o),[function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var a=n.shift();if(a)t.add(s.schedule(W,0,{err:a,subject:l}));else{var r=n.length<=1?n[0]:n;t.add(s.schedule(z,0,{value:r,subject:l}))}}]))}catch(c){this.add(s.schedule(W,0,{err:c,subject:l}))}}this.add(l.subscribe(i))}function z(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function W(e){var t=e.err;e.subject.error(t)}var X=n("itXk"),$=n("GyhO"),J=n("NXyV"),Y=n("EY2u"),Z=n("cp0P"),ee=n("Cfvw"),te=n("xgIS"),ne=n("n6bG");function ie(e,t,n){return n?ie(e,t).pipe(Object(N.a)(function(e){return Object(U.a)(e)?n.apply(void 0,Object(j.a)(e)):n(e)})):new i.a(function(n){var i,a=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n.next(1===t.length?t[0]:t)};try{i=e(a)}catch(r){return n.error(r),void 0}if(Object(ne.a)(t))return function(){return t(a,i)}})}function ae(e,t,n,a,r){var o,s;if(1==arguments.length){var l=e;s=l.initialState,t=l.condition,n=l.iterate,o=l.resultSelector||B.a,r=l.scheduler}else void 0===a||Object(V.a)(a)?(s=e,o=B.a,r=a):(s=e,o=a);return new i.a(function(e){var i=s;if(r)return r.schedule(re,0,{subscriber:e,iterate:n,condition:t,resultSelector:o,state:i});for(;;){if(t){var a=void 0;try{a=t(i)}catch(c){return e.error(c),void 0}if(!a){e.complete();break}}var l=void 0;try{l=o(i)}catch(c){return e.error(c),void 0}if(e.next(l),e.closed)break;try{i=n(i)}catch(c){return e.error(c),void 0}1}})}function re(e){var t=e.subscriber,n=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(r){return t.error(r),void 0}else e.needIterate=!0;if(n){var i;try{i=n(e.state)}catch(r){return t.error(r),void 0}if(!i)return t.complete(),void 0;if(t.closed)return}var a;try{a=e.resultSelector(e.state)}catch(r){return t.error(r),void 0}if(!t.closed&&(t.next(a),!t.closed))return this.schedule(e)}}function oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y.a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y.a;return Object(J.a)(function(){return e()?t:n})}var se=n("l5mm"),le=n("VRyK"),ce=n("5yfJ"),de=n("LRne");function ue(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return Y.a;var a=t[0],r=t.slice(1);return 1===t.length&&Object(U.a)(a)?ue.apply(void 0,Object(j.a)(a)):new i.a(function(e){var t=function(){return e.add(ue.apply(void 0,Object(j.a)(r)).subscribe(e))};return Object(ee.a)(a).subscribe({next:function(t){e.next(t)},error:t,complete:t})})}function pe(e,t){return t?new i.a(function(n){var i=Object.keys(e),a=new E.a;return a.add(t.schedule(me,0,{keys:i,index:0,subscriber:n,subscription:a,obj:e})),a}):new i.a(function(t){for(var n=Object.keys(e),i=0;i<n.length&&!t.closed;i++){var a=n[i];e.hasOwnProperty(a)&&t.next([a,e[a]])}t.complete()})}function me(e){var t=e.keys,n=e.index,i=e.subscriber,a=e.subscription,r=e.obj;if(!i.closed)if(n<t.length){var o=t[n];i.next([o,r[o]]),a.add(this.schedule({keys:t,index:n+1,subscriber:i,subscription:a,obj:r}))}else i.complete()}var fe=n("F97/"),he=n("SeVD"),ge=n("pLZG");function Ae(e,t,n){return[Object(ge.a)(t,n)(new i.a(Object(he.a)(e))),Object(ge.a)(Object(fe.a)(t,n))(new i.a(Object(he.a)(e)))]}var be=n("Nv8m");function ye(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return new i.a(function(i){void 0===t&&(t=e,e=0);var a=0,r=e;if(n)return n.schedule(ve,0,{index:a,count:t,start:e,subscriber:i});for(;;){if(a++>=t){i.complete();break}if(i.next(r++),i.closed)break;1}})}function ve(e){var t=e.start,n=e.index,i=e.count,a=e.subscriber;if(n>=i)return a.complete(),void 0;a.next(t),a.closed||(e.index=n+1,e.start=t+1,this.schedule(e))}var Ce=n("z6cu"),xe=n("PqYM");function we(e,t){return new i.a(function(n){var i,a;try{i=e()}catch(o){return n.error(o),void 0}try{a=t(i)}catch(o){return n.error(o),void 0}var r=(a?Object(ee.a)(a):Y.a).subscribe(n);return function(){r.unsubscribe(),i&&i.unsubscribe()}})}var Se=n("1uah"),Ee=n("7HRe"),Ie=n("2fFW")},qlrG:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var i=n("fXoL"),a=n("3Pt+"),r=n("xw5a"),o=n("XiUz"),s=n("kmnG"),l=n("d3UM"),c=n("ofXK"),d=n("cXYG"),u=n("FKr1"),p=n("sYmb");function m(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",5),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,a.numericOperationTranslations.get(a.numericOperationEnum[n]))," ")}}var f=function(){function e(e){this.fb=e,this.allowUserDynamicSource=!0,this.onlyUserDynamicSource=!1,this.valueTypeEnum=r.e,this.numericOperations=Object.keys(r.g),this.numericOperationEnum=r.g,this.numericOperationTranslations=r.H,this.propagateChange=null}return e.prototype.ngOnInit=function(){var e=this;this.numericFilterPredicateFormGroup=this.fb.group({operation:[r.g.EQUAL,[a.Validators.required]],value:[null,[a.Validators.required]]}),this.numericFilterPredicateFormGroup.valueChanges.subscribe(function(){e.updateModel()})},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.numericFilterPredicateFormGroup.disable({emitEvent:!1}):this.numericFilterPredicateFormGroup.enable({emitEvent:!1})},e.prototype.validate=function(){return this.numericFilterPredicateFormGroup.valid?null:{numericFilterPredicate:{valid:!1}}},e.prototype.writeValue=function(e){this.numericFilterPredicateFormGroup.get("operation").patchValue(e.operation,{emitEvent:!1}),this.numericFilterPredicateFormGroup.get("value").patchValue(e.value,{emitEvent:!1})},e.prototype.updateModel=function(){var e=this.numericFilterPredicateFormGroup.getRawValue();e.type=r.f.NUMERIC,this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-numeric-filter-predicate"]],inputs:{disabled:"disabled",allowUserDynamicSource:"allowUserDynamicSource",onlyUserDynamicSource:"onlyUserDynamicSource",valueType:"valueType"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:7,vars:8,consts:[["fxFlex","","fxLayout","row","fxLayoutAlign","start start","fxLayoutGap","8px",3,"formGroup"],["floatLabel","always","hideRequiredMarker","","fxFlex","30",1,"mat-block"],["required","","formControlName","operation",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","70","formControlName","value",3,"allowUserDynamicSource","onlyUserDynamicSource","valueType"],[3,"value"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"mat-form-field",1),i["\u0275\u0275element"](2,"mat-label"),i["\u0275\u0275elementStart"](3,"mat-select",2),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275template"](5,m,3,4,"mat-option",3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](6,"tb-filter-predicate-value",4),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.numericFilterPredicateFormGroup),i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](4,6,"filter.operation.operation")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.numericOperations),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("allowUserDynamicSource",t.allowUserDynamicSource)("onlyUserDynamicSource",t.onlyUserDynamicSource)("valueType",t.valueType))},directives:[o.b,o.f,o.e,o.g,a.NgControlStatusGroup,a.FormGroupDirective,s.MatFormField,s.MatLabel,l.MatSelect,a.RequiredValidator,a.NgControlStatus,a.FormControlName,c.NgForOf,d.a,u.MatOption],pipes:[p.TranslatePipe],styles:["[_nghost-%COMP%]   .tb-hint[_ngcontent-%COMP%]{padding-bottom:0}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-infix{border-top-width:.2em;width:auto;min-width:auto}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-underline{bottom:0}"]}),e}();0,void 0},qxrw:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"d",function(){return y}),n.d(t,"c",function(){return v}),n.d(t,"b",function(){return C}),n.d(t,"e",function(){return x}),n.d(t,"f",function(){return w});var i,a=n("mrSG"),r=n("2Vo4"),o=n("jtHE"),s=n("LRne"),l=n("Duvn"),c=n("0EQZ"),d=n("vkgz"),u=n("JIr8"),p=n("lJxs"),m=n("w1tV"),f=n("IzEk"),h=function(){function e(e,t,n){this.fetchFunction=e,this.selectionEnabledFunction=t,this.dataLoadedFunction=n,this.entitiesSubject=new r.a([]),this.pageDataSubject=new r.a(Object(l.a)()),this.pageData$=this.pageDataSubject.asObservable(),this.selection=new c.SelectionModel(!0,[]),this.currentEntity=null,this.dataLoading=!0}return e.prototype.connect=function(e){return this.entitiesSubject.asObservable()},e.prototype.disconnect=function(e){this.entitiesSubject.complete(),this.pageDataSubject.complete()},e.prototype.reset=function(){var e=Object(l.a)();this.onEntities(e.data),this.pageDataSubject.next(e),this.dataLoadedFunction()},e.prototype.loadEntities=function(e){var t=this;this.dataLoading=!0;var n=new o.a;return this.fetchFunction(e).pipe(Object(d.a)(function(){t.selection.clear()}),Object(u.a)(function(){return Object(s.a)(Object(l.a)())})).subscribe(function(e){t.onEntities(e.data),t.pageDataSubject.next(e),n.next(e),t.dataLoadedFunction(),t.dataLoading=!1}),n},e.prototype.onEntities=function(e){this.entitiesSubject.next(e)},e.prototype.isAllSelected=function(){var e=this,t=this.selection.selected.length;return this.entitiesSubject.pipe(Object(p.a)(function(n){return t===e.selectableEntitiesCount(n)}),Object(m.a)())},e.prototype.isEmpty=function(){return this.entitiesSubject.pipe(Object(p.a)(function(e){return!e.length}),Object(m.a)())},e.prototype.total=function(){return this.pageDataSubject.pipe(Object(p.a)(function(e){return e.totalElements}),Object(m.a)())},e.prototype.toggleCurrentEntity=function(e){return this.currentEntity!==e&&(this.currentEntity=e,!0)},e.prototype.isCurrentEntity=function(e){return this.currentEntity&&e&&this.currentEntity.id&&e.id&&this.currentEntity.id.id===e.id.id},e.prototype.masterToggle=function(){var e=this;this.entitiesSubject.pipe(Object(d.a)(function(t){e.selection.selected.length===e.selectableEntitiesCount(t)?e.selection.clear():t.forEach(function(t){e.selectionEnabledFunction(t)&&e.selection.select(t)})}),Object(f.a)(1)).subscribe()},e.prototype.selectableEntitiesCount=function(e){var t=this;return e.filter(function(e){return t.selectionEnabledFunction(e)}).length},e}(),g=n("4r/P"),A=n("aX2P");!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.COPY_BUTTON=1]="COPY_BUTTON"}(i||(i={}));var b=function(e,t,n,i,a,r,o){void 0===i&&(i="0px"),void 0===a&&(a=!0),void 0===r&&(r=!1),void 0===o&&(o=!1),this.type=e,this.key=t,this.title=n,this.width=i,this.sortable=a,this.ignoreTranslate=r,this.mobileHide=o},y=function(e){function t(t,n,i,a,r,o,s,l,c,d){void 0===i&&(i="0px"),void 0===a&&(a=function(e,t){return e[t]?e[t]:""}),void 0===r&&(r=function(){return{}}),void 0===o&&(o=!0),void 0===s&&(s=function(){return{}}),void 0===l&&(l=function(){}),void 0===c&&(c=!1),void 0===d&&(d=null);var u=e.call(this,"content",t,n,i,o)||this;return u.key=t,u.title=n,u.width=i,u.cellContentFunction=a,u.cellStyleFunction=r,u.sortable=o,u.headerCellStyleFunction=s,u.cellTooltipFunction=l,u.isNumberColumn=c,u.actionCell=d,u}return Object(a.d)(t,e),t}(b),v=function(e){function t(t,n,i,a){void 0===a&&(a="0px");var r=e.call(this,"action",t,n,a,!1)||this;return r.key=t,r.title=n,r.actionDescriptor=i,r.width=a,r}return Object(a.d)(t,e),t}(b),C=function(e){function t(t,n,i,a,r,o){return void 0===a&&(a="0px"),void 0===r&&(r="yyyy-MM-dd HH:mm:ss"),void 0===o&&(o=function(){return{}}),e.call(this,t,n,a,function(e,t){return i.transform(e[t],r)},o)||this}return Object(a.d)(t,e),t}(y),x=function(){var e=this;this.componentsData=null,this.loadDataOnInit=!0,this.onLoadAction=null,this.table=null,this.useTimePageLink=!1,this.defaultTimewindowInterval=Object(A.I)(A.b),this.entityType=null,this.tableTitle="",this.selectionEnabled=!0,this.searchEnabled=!0,this.addEnabled=!0,this.entitiesDeleteEnabled=!0,this.detailsPanelEnabled=!0,this.hideDetailsTabsOnEdit=!0,this.actionsColumnTitle=null,this.addDialogStyle={},this.defaultSortOrder={property:"createdTime",direction:g.a.DESC},this.displayPagination=!0,this.defaultPageSize=10,this.columns=[],this.cellActionDescriptors=[],this.groupActionDescriptors=[],this.headerActionDescriptors=[],this.addActionDescriptors=[],this.addEntity=null,this.dataSource=function(t){return new h(e.entitiesFetchFunction,e.entitySelectionEnabled,t)},this.detailsReadonly=function(){return!1},this.entitySelectionEnabled=function(){return!0},this.deleteEnabled=function(){return!0},this.deleteEntityTitle=function(){return""},this.deleteEntityContent=function(){return""},this.deleteEntitiesTitle=function(){return""},this.deleteEntitiesContent=function(){return""},this.loadEntity=function(){return Object(s.a)()},this.saveEntity=function(e,t){return Object(s.a)(e)},this.deleteEntity=function(){return Object(s.a)()},this.entitiesFetchFunction=function(){return Object(s.a)(Object(l.a)())},this.onEntityAction=function(){return!1},this.handleRowClick=function(){return!1},this.entityTitle=function(e){return null==e?void 0:e.name},this.entityAdded=function(){},this.entityUpdated=function(){},this.entitiesDeleted=function(){}};function w(e){return'<mat-icon class="material-icons mat-icon">'+(e?"check_box":"check_box_outline_blank")+"</mat-icon>"}},"t+jE":function(e,t,n){"use strict";(function(e){n.d(t,"j",function(){return p}),n.d(t,"k",function(){return m}),n.d(t,"l",function(){return f}),n.d(t,"f",function(){return h}),n.d(t,"i",function(){return g}),n.d(t,"a",function(){return b}),n.d(t,"q",function(){return w}),n.d(t,"e",function(){return S}),n.d(t,"p",function(){return E}),n.d(t,"n",function(){return I}),n.d(t,"g",function(){return O}),n.d(t,"m",function(){return T}),n.d(t,"o",function(){return F}),n.d(t,"r",function(){return B}),n.d(t,"h",function(){return M}),n.d(t,"b",function(){return P}),n.d(t,"d",function(){return D}),n.d(t,"c",function(){return k});var i=n("mrSG"),a=n("//Q6"),r=n("HDdC"),o=n("LRne"),s=n("lJxs"),l=n("LvDl"),c=n.n(l),d=n("3QxM"),u=n("bHFI");function p(e,t){var n,a;void 0===t&&(t=!1);var r=c.a.cloneDeep(d.c);return e&&(r.schema.properties.provider.default=e),t&&(r.form[0].items=null===(n=r.form[0])||void 0===n?void 0:n.items.filter(function(e){return"image-map"!==e.value})),Object(u.e)(Object(i.h)([r],null===(a=Object.keys(d.h))||void 0===a?void 0:a.map(function(e){var t=d.h[e];return Object(u.a)(null==t?void 0:t.schema,"model.provider === '"+t.name+"'")})))}function m(e,t,n){return(n-e)/(t-e)}function f(e,t,n,i,a){var r;return(r={})[n]=e[n]+(t[n]-e[n])*a,r[i]=e[i]+(t[i]-e[i])*a,r}function h(e,t,n,i){if(Object(a.B)(e)||Object(a.B)(t))return 0;var r=-Math.atan2(t[n]-e[n],t[i]-e[i]);return r=180*r/Math.PI,parseInt(r.toFixed(2),10)}function g(e){return"string"==typeof e?e.split(","):"object"==typeof e?e:[0,0]}var A={};function b(e){if(null==e?void 0:e.length){var t=Object(a.l)(e),n=A[t];return n?Object(o.a)(n):function(e){return new r.a(function(t){var n=document.createElement("img");n.style.position="absolute",n.style.left="-99999px",n.style.top="-99999px",n.onload=function(){t.next(n),document.body.removeChild(n),t.complete()},n.onerror=function(e){t.error(e),document.body.removeChild(n),t.complete()},document.body.appendChild(n),n.src=e})}(e).pipe(Object(s.a)(function(e){return n=e.width/e.height,A[t]=n,n}))}}var y=/<link-act name=['"]([^['"]*)['"]>([^<]*)<\/link-act>/g,v=/<button-act name=['"]([^['"]*)['"]>([^<]*)<\/button-act>/g;function C(e,t){return'<a href="javascript:void(0);" class="tb-custom-action" data-action-name='+e+">"+t+"</a>"}function x(e,t){return'<button mat-button class="tb-custom-action" data-action-name='+e+">"+t+"</button>"}function w(e,t){var n=[];try{for(var i=/\${([^}]*)}/g,a=i.exec(e);null!==a;){var r={dataKeyName:"",valDec:2,variable:""},o=a[0],s=a[1],l=2,c=s.split(":");if(c.length>1&&(s=c[0],l=parseFloat(c[1])),r.variable=o,r.valDec=l,s.startsWith("#")){var d=s.substring(1),u=Math.floor(Number(d));String(u)===d&&u>=0&&(r.dataKeyName=t.$datasource.dataKeys[u].label)}else r.dataKeyName=s;n.push(r),a=i.exec(e)}}catch(p){console.log(p,e)}return n}function S(e,t,n){var i=Object(a.d)(n.$datasource,e);if(t)for(var r=0,o=t;r<o.length;r++){var s=o[r],l="";if(s.dataKeyName&&Object(a.o)(n[s.dataKeyName])){var c=n[s.dataKeyName];l=Object(a.x)(c)?Object(a.J)(c,s.valDec):c}i=i.replace(s.variable,l)}return i}var E={translateFn:null,translate:function(e,t){if(this.translateFn)return this.translateFn(e,t);throw console.error("Translate not assigned")},parseTemplate:function(e,t,n){return void 0===n&&(n=!1),function(e,t,n){var i="";try{n&&(e=n(e)),e=Object(a.d)(t.$datasource,e);for(var r=/\${([^}]*)}/g.exec(e);null!==r;){var o=r[0],s=r[1],l=2,c=s.split(":");if(c.length>1&&(s=c[0],l=parseFloat(c[1])),s.startsWith("#")){var d=s.substring(1),u=Math.floor(Number(d));String(u)===d&&u>=0&&(s=t.$datasource.dataKeys[u].label)}var p=t[s]||"",m=void 0;m=Object(a.x)(p)?Object(a.J)(p,l):p,e=e.replace(o,m),r=/\${([^}]*)}/g.exec(e)}var f=void 0,h=void 0;for(r=y.exec(e);null!==r;)f=r[0],h=C(r[1],r[2]),e=e.replace(f,h),r=y.exec(e);for(r=v.exec(e);null!==r;)f=r[0],h=x(r[1],r[2]),e=e.replace(f,h),r=v.exec(e);i=e}catch(g){console.log(g,e)}return i}(n?this.translate(e):e,t,this.translate.bind(this))},prepareProcessPattern:function(e,t){return void 0===t&&(t=!1),function(e,t){var n,i;t&&(e=t(e));for(var a=y.exec(e);null!==a;)n=a[0],i=C(a[1],a[2]),e=e.replace(n,i),a=y.exec(e);for(a=v.exec(e);null!==a;)n=a[0],i=x(a[1],a[2]),e=e.replace(n,i),a=v.exec(e);return e}(t?this.translate(e):e,this.translate.bind(this))},setTranslate:function(e){this.translateFn=e}};function I(e){return c()(e).groupBy(function(e){return(null==e?void 0:e.datasource.entityName)+(null==e?void 0:e.datasource.entityType)}).values().value().map(function(e,t){var n,i,a={entityName:null===(i=null===(n=e[0])||void 0===n?void 0:n.datasource)||void 0===i?void 0:i.entityName,entityId:e[0].datasource.entityId,entityType:e[0].datasource.entityType,$datasource:e[0].datasource,dsIndex:t,deviceType:null};return e.filter(function(e){return e.data.length}).forEach(function(e){var t=e.data.length?e.data.length-1:0;a.hasOwnProperty(e.dataKey.label)&&""===e.data[t][1]||(a[e.dataKey.label]=e.data[t][1],a[e.dataKey.label+"|ts"]=e.data[t][0],"type"===e.dataKey.label&&(a.deviceType=e.data[t][1]))}),a})}function O(e){var t={};if(e.length){for(var n=0,a=e;n<a.length;n++){var r=a[n];t=Object(i.a)(Object(i.a)({},t),r)}t.entityName=e[0].entityName,t.entityId=e[0].entityId,t.entityType=e[0].entityType,t.$datasource=e[0].$datasource,t.dsIndex=e[0].dsIndex,t.deviceType=e[0].deviceType}return t}function T(e){return c()(e).groupBy(function(e){var t;return null===(t=null==e?void 0:e.datasource)||void 0===t?void 0:t.entityName}).values().value().map(function(e){return e[0].data.map(function(t,n){var i,a,r,o,s,l,c,d={entityName:null===(a=null===(i=e[0])||void 0===i?void 0:i.datasource)||void 0===a?void 0:a.entityName,entityId:null===(o=null===(r=e[0])||void 0===r?void 0:r.datasource)||void 0===o?void 0:o.entityId,entityType:null===(l=null===(s=e[0])||void 0===s?void 0:s.datasource)||void 0===l?void 0:l.entityType,$datasource:null===(c=e[0])||void 0===c?void 0:c.datasource,dsIndex:n,time:t[0],deviceType:null};return e.filter(function(e){return e.data.length&&e.data[n]}).forEach(function(e){var t,i,a;d[null===(t=null==e?void 0:e.dataKey)||void 0===t?void 0:t.label]=null==e?void 0:e.data[n][1],d[(null===(i=null==e?void 0:e.dataKey)||void 0===i?void 0:i.label)+"|ts"]=null==e?void 0:e.data[0][0],"type"===(null===(a=null==e?void 0:e.dataKey)||void 0===a?void 0:a.label)&&(d.deviceType=null==e?void 0:e.data[0][1])}),d})})}function F(e,t){void 0===t&&(t=["def"]);var n=null;if(null==e?void 0:e.length)try{n=new(Function.bind.apply(Function,Object(i.h)([void 0],t,[e])))}catch(a){n=null}return n}function B(e,t){void 0===t&&(t=[]);var n=null;if(e&&"function"==typeof e)try{n=e.apply(void 0,t)}catch(i){console.log("error in external function:",i),n=null}return n}function M(e,t,n,i){var r;if(void 0===n&&(n=[]),e&&Object(a.n)(t)&&Object(a.s)(t))try{r=t.apply(void 0,n),Object(a.o)(r)&&""!==r||(r=i)}catch(o){r=i,console.log("error in external function:",o)}else r=i;return r}function P(e,t){var n=e/t;return n<0?n=0:n>1&&(n=1),n}function D(t){return e('\n    <div style="\n          z-index: 12;\n          position: absolute;\n          top: 0;\n          bottom: 0;\n          left: 0;\n          right: 0;\n          flex-direction: column;\n          align-content: center;\n          align-items: center;\n          justify-content: center;\n          display: flex;\n          background: rgba(255,255,255,0.7);\n          font-size: 16px;\n          font-family: Roboto;\n          font-weight: 400;\n          text-transform:  uppercase;\n        ">\n        <span>'+t+"</span>\n    </div>\n  ")}function k(e,t,n,i){void 0===i&&(i=0);var a=n.lng-i,r=t.lng+i,o=n.lat-i,s=t.lat+i;return e.lng>a?e.lng=a:e.lng<r&&(e.lng=r),e.lat>o?e.lat=o:e.lat<s&&(e.lat=s),e}}).call(this,n("xexB"))},t2OX:function(e,t,n){"use strict";n.d(t,"a",function(){return B});var i=n("fXoL"),a=n("3Pt+"),r=n("JIJk"),o=n("XNiG"),s=n("//Q6"),l=n("1G5W"),c=n("XiUz"),d=n("ofXK"),u=n("kmnG"),p=n("sYmb"),m=n("d3UM"),f=n("f0Cb"),h=n("cWLi"),g=n("FKr1"),A=n("qFsG"),b=n("bTqV"),y=n("Qu3c"),v=n("NFeN");function C(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",13),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]().index,r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n)("disabled",r.isDisabledSeverity(n,a)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",r.snmpSpecTypeTranslationMap.get(n)," ")}}function x(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.snmp.scope-required")," "))}function w(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.snmp.querying-frequency-required")," "))}function S(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.snmp.querying-frequency-invalid-format")," "))}function E(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-form-field"),i["\u0275\u0275elementStart"](1,"mat-label",6),i["\u0275\u0275text"](2,"device-profile.snmp.querying-frequency"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](3,"input",14),i["\u0275\u0275template"](4,w,3,3,"mat-error",2),i["\u0275\u0275template"](5,S,3,3,"mat-error",2),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",n.get("queryingFrequencyMs").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.get("queryingFrequencyMs").hasError("pattern")||n.get("queryingFrequencyMs").hasError("min"))}}function I(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",15),i["\u0275\u0275listener"]("click",function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"]().index;return i["\u0275\u0275nextContext"]().removeCommunicationConfig(e)}),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275elementStart"](2,"mat-icon"),i["\u0275\u0275text"](3,"remove_circle_outline"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}2&e&&i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](1,1,"action.remove"))}function O(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",3),i["\u0275\u0275elementStart"](1,"div",4),i["\u0275\u0275elementStart"](2,"mat-form-field",5),i["\u0275\u0275elementStart"](3,"mat-label",6),i["\u0275\u0275text"](4,"device-profile.snmp.scope"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"mat-select",7),i["\u0275\u0275template"](6,C,2,3,"mat-option",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](7,x,3,3,"mat-error",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](8,"mat-divider",9),i["\u0275\u0275elementStart"](9,"section",10),i["\u0275\u0275template"](10,E,6,2,"mat-form-field",2),i["\u0275\u0275element"](11,"tb-snmp-device-profile-mapping",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](12,I,4,3,"button",12),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("formGroup",n),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngForOf",a.snmpSpecTypes),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.get("spec").hasError("required")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",a.isShowFrequency(n.get("spec").value)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!a.disabled)}}function T(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"span",16),i["\u0275\u0275text"](2,"device-profile.snmp.please-add-communication-config"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}function F(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"button",17),i["\u0275\u0275listener"]("click",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().addCommunicationConfig()}),i["\u0275\u0275elementStart"](2,"mat-icon",18),i["\u0275\u0275text"](3,"add_circle_outline"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](4),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](5,1,"device-profile.snmp.add-communication-config")," "))}var B=function(){function e(e){this.fb=e,this.snmpSpecTypes=Object.values(r.p),this.snmpSpecTypeTranslationMap=r.q,this.usedSpecType=[],this.valueChange$=null,this.destroy$=new o.b,this.propagateChange=function(e){}}return e.prototype.ngOnInit=function(){this.deviceProfileCommunicationConfig=this.fb.group({communicationConfig:this.fb.array([])})},e.prototype.ngOnDestroy=function(){this.valueChange$&&this.valueChange$.unsubscribe(),this.destroy$.next(),this.destroy$.complete()},e.prototype.communicationConfigFormArray=function(){return this.deviceProfileCommunicationConfig.get("communicationConfig")},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.deviceProfileCommunicationConfig.disable({emitEvent:!1}):this.deviceProfileCommunicationConfig.enable({emitEvent:!1})},e.prototype.writeValue=function(e){var t=this;this.valueChange$&&this.valueChange$.unsubscribe();var n=[];e&&e.forEach(function(e){n.push(t.createdFormGroup(e))}),this.deviceProfileCommunicationConfig.setControl("communicationConfig",this.fb.array(n)),e&&e.length||this.addCommunicationConfig(),this.disabled?this.deviceProfileCommunicationConfig.disable({emitEvent:!1}):this.deviceProfileCommunicationConfig.enable({emitEvent:!1}),this.valueChange$=this.deviceProfileCommunicationConfig.valueChanges.subscribe(function(){t.updateModel()}),this.updateUsedSpecType(),this.disabled||this.deviceProfileCommunicationConfig.valid||this.updateModel()},e.prototype.validate=function(){return this.deviceProfileCommunicationConfig.valid&&this.deviceProfileCommunicationConfig.value.communicationConfig.length?null:{communicationConfig:!1}},e.prototype.removeCommunicationConfig=function(e){this.communicationConfigFormArray().removeAt(e)},Object.defineProperty(e.prototype,"isAddEnabled",{get:function(){return this.communicationConfigFormArray().length!==Object.keys(r.p).length},enumerable:!1,configurable:!0}),e.prototype.addCommunicationConfig=function(){this.communicationConfigFormArray().push(this.createdFormGroup()),this.deviceProfileCommunicationConfig.updateValueAndValidity(),this.deviceProfileCommunicationConfig.valid||this.updateModel()},e.prototype.getFirstUnusedSeverity=function(){for(var e=0,t=Object.values(r.p);e<t.length;e++){var n=t[e];if(-1===this.usedSpecType.indexOf(n))return n}return null},e.prototype.isDisabledSeverity=function(e,t){var n=this.usedSpecType.indexOf(e);return n>-1&&n!==t},e.prototype.isShowFrequency=function(e){return e===r.p.TELEMETRY_QUERYING||e===r.p.CLIENT_ATTRIBUTES_QUERYING},e.prototype.updateUsedSpecType=function(){var e=this;this.usedSpecType=[],this.deviceProfileCommunicationConfig.get("communicationConfig").value.forEach(function(t,n){e.usedSpecType[n]=t.spec})},e.prototype.createdFormGroup=function(e){var t=this;Object(s.C)(e)&&(e={spec:this.getFirstUnusedSeverity(),queryingFrequencyMs:5e3,mappings:null});var n=this.fb.group({spec:[e.spec,a.Validators.required],mappings:[e.mappings]});return this.isShowFrequency(e.spec)&&n.addControl("queryingFrequencyMs",this.fb.control(e.queryingFrequencyMs,[a.Validators.required,a.Validators.min(0),a.Validators.pattern("[0-9]*")])),n.get("spec").valueChanges.pipe(Object(l.a)(this.destroy$)).subscribe(function(e){t.isShowFrequency(e)?n.addControl("queryingFrequencyMs",t.fb.control(5e3,[a.Validators.required,a.Validators.min(0),a.Validators.pattern("[0-9]*")])):n.removeControl("queryingFrequencyMs")}),n},e.prototype.updateModel=function(){var e=this,t=this.deviceProfileCommunicationConfig.get("communicationConfig").value;t.forEach(function(t){e.isShowFrequency(t.spec)||delete t.queryingFrequencyMs}),this.updateUsedSpecType(),this.propagateChange(t)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-snmp-device-profile-communication-config"]],inputs:{disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:4,vars:3,consts:[["fxLayout","column"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","class","scope-row",3,"formGroup",4,"ngFor","ngForOf"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px",1,"scope-row",3,"formGroup"],["fxFlex","","fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","start",1,"communication-config"],["floatLabel","always","hideRequiredMarker","",1,"spec","mat-block"],["translate",""],["formControlName","spec","required",""],[3,"value","disabled",4,"ngFor","ngForOf"],["vertical",""],["fxFlex","","fxLayout","column"],["formControlName","mappings"],["mat-icon-button","","color","accent","style","min-width: 40px;","type","button","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],[3,"value","disabled"],["matInput","","formControlName","queryingFrequencyMs","type","number","min","0","required",""],["mat-icon-button","","color","accent","type","button","matTooltipPosition","above",2,"min-width","40px",3,"matTooltip","click"],["fxLayoutAlign","center center","translate","",1,"tb-prompt","required","required-text"],["mat-stroked-button","","color","accent","type","button",3,"click"],[1,"button-icon"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,O,13,5,"div",1),i["\u0275\u0275template"](2,T,3,0,"div",2),i["\u0275\u0275template"](3,F,6,3,"div",2),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",t.communicationConfigFormArray().controls),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.communicationConfigFormArray().controls.length&&!t.disabled),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!t.disabled&&t.isAddEnabled))},directives:[c.f,d.NgForOf,d.NgIf,c.e,c.g,a.NgControlStatusGroup,a.FormGroupDirective,c.b,u.MatFormField,u.MatLabel,p.TranslateDirective,m.MatSelect,a.NgControlStatus,a.FormControlName,a.RequiredValidator,f.MatDivider,h.a,g.MatOption,u.MatError,A.MatInput,a.DefaultValueAccessor,a.NumberValueAccessor,b.MatButton,y.MatTooltip,v.MatIcon],pipes:[p.TranslatePipe],styles:["[_nghost-%COMP%]   .communication-config[_ngcontent-%COMP%]{border:2px groove rgba(0,0,0,.25);border-radius:4px;padding:8px;min-width:0}[_nghost-%COMP%]   .scope-row[_ngcontent-%COMP%]{padding-bottom:8px}[_nghost-%COMP%]   .required-text[_ngcontent-%COMP%]{margin:16px 0}[_nghost-%COMP%]     .mat-form-field.spec .mat-form-field-infix{width:160px}[_nghost-%COMP%]     .button-icon{font-size:20px;width:20px;height:20px}"]}),e}();0,void 0},tM37:function(e,t,n){"use strict";n.d(t,"a",function(){return T});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("DaoB"),c=n("U3y+"),d=n("cp0P"),u=n("1y+p"),p=n("j37L"),m=n("YnEf"),f=n("gmuX"),h=n("y7gY"),g=n("l7P3"),A=n("tyNb"),b=n("/t3+"),y=n("XiUz"),v=n("bTqV"),C=n("NFeN"),x=n("ofXK"),w=n("EdYI"),S=n("bv9b"),E=n("sYmb");function I(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",13)}function O(e,t){1&e&&a["\u0275\u0275element"](0,"div",14)}var T=function(e){function t(t,n,i,a,r,o,s,l,c,d,u){var p=e.call(this,t,n,d)||this;return p.store=t,p.router=n,p.data=i,p.deviceService=a,p.assetService=r,p.edgeService=o,p.entityViewService=s,p.dashboardService=l,p.errorStateMatcher=c,p.dialogRef=d,p.fb=u,p.submitted=!1,p.entityType=i.entityType,p}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){switch(this.addEntitiesToCustomerFormGroup=this.fb.group({entityIds:[null,[s.Validators.required]]}),this.data.entityType){case c.b.DEVICE:this.assignToCustomerTitle="device.assign-device-to-customer",this.assignToCustomerText="device.assign-device-to-customer-text";break;case c.b.ASSET:this.assignToCustomerTitle="asset.assign-asset-to-customer",this.assignToCustomerText="asset.assign-asset-to-customer-text";break;case c.b.EDGE:this.assignToCustomerTitle="edge.assign-edge-to-customer",this.assignToCustomerText="edge.assign-edge-to-customer-text";break;case c.b.ENTITY_VIEW:this.assignToCustomerTitle="entity-view.assign-entity-view-to-customer",this.assignToCustomerText="entity-view.assign-entity-view-to-customer-text";break;case c.b.DASHBOARD:this.assignToCustomerTitle="dashboard.assign-dashboard-to-customer",this.assignToCustomerText="dashboard.assign-dashboard-to-customer-text"}},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.cancel=function(){this.dialogRef.close(!1)},t.prototype.assign=function(){var e=this;this.submitted=!0;var t=this.addEntitiesToCustomerFormGroup.get("entityIds").value,n=[];t.forEach(function(t){n.push(e.getAssignToCustomerTask(e.data.customerId,t))}),Object(d.a)(n).subscribe(function(){e.dialogRef.close(!0)})},t.prototype.getAssignToCustomerTask=function(e,t){switch(this.data.entityType){case c.b.DEVICE:return this.deviceService.assignDeviceToCustomer(e,t);case c.b.ASSET:return this.assetService.assignAssetToCustomer(e,t);case c.b.EDGE:return this.edgeService.assignEdgeToCustomer(e,t);case c.b.ENTITY_VIEW:return this.entityViewService.assignEntityViewToCustomer(e,t);case c.b.DASHBOARD:return this.dashboardService.assignDashboardToCustomer(e,t)}},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](g.Store),a["\u0275\u0275directiveInject"](A.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](u.a),a["\u0275\u0275directiveInject"](h.a),a["\u0275\u0275directiveInject"](p.a),a["\u0275\u0275directiveInject"](m.a),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-add-entities-to-customer-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:29,vars:29,consts:[[3,"formGroup","ngSubmit"],["color","accent"],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["formControlName","entityIds","required","",3,"entityType"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.assign()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,I,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,O,1,0,"div",6),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275elementStart"](14,"fieldset",8),a["\u0275\u0275pipe"](15,"async"),a["\u0275\u0275elementStart"](16,"span"),a["\u0275\u0275text"](17),a["\u0275\u0275pipe"](18,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](19,"tb-entity-list",9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](20,"div",10),a["\u0275\u0275elementStart"](21,"button",11),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](22,"async"),a["\u0275\u0275text"](23),a["\u0275\u0275pipe"](24,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](25,"button",12),a["\u0275\u0275pipe"](26,"async"),a["\u0275\u0275text"](27),a["\u0275\u0275pipe"](28,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.addEntitiesToCustomerFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,11,t.assignToCustomerTitle)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,13,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,15,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](15,17,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](18,19,t.assignToCustomerText)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("entityType",t.entityType),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](22,21,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](24,23,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](26,25,t.isLoading$)||t.addEntitiesToCustomerFormGroup.invalid||!t.addEntitiesToCustomerFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](28,27,"action.assign")," "))},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,b.MatToolbar,y.b,v.MatButton,C.MatIcon,x.NgIf,o.MatDialogContent,w.a,s.NgControlStatus,s.FormControlName,s.RequiredValidator,o.MatDialogActions,y.e,S.MatProgressBar],pipes:[E.TranslatePipe,x.AsyncPipe],encapsulation:2}),t}(f.a);0,void 0},txsh:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n("mrSG"),a=n("0IaG"),r=n("fXoL"),o=n("gmuX"),s=n("llUh"),l=n("l7P3"),c=n("tyNb"),d=function(e){function t(t,n,o,l,c){var d=e.call(this,t,n,l)||this;d.store=t,d.router=n,d.viewContainerRef=o,d.dialogRef=l,d.data=c,d.height="0px";var u={controller:d.data.controller};d.data.data&&(u=Object(i.a)(Object(i.a)({},u),d.data.data));var p=r.Injector.create({providers:[{provide:s.a,useValue:u},{provide:a.MatDialogRef,useValue:l}]});return d.customComponentRef=d.viewContainerRef.createComponent(d.data.customComponentFactory,0,p),d}return Object(i.d)(t,e),t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.customComponentRef&&this.customComponentRef.destroy()},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](l.Store),r["\u0275\u0275directiveInject"](c.Router),r["\u0275\u0275directiveInject"](r.ViewContainerRef),r["\u0275\u0275directiveInject"](a.MatDialogRef),r["\u0275\u0275directiveInject"](a.MAT_DIALOG_DATA))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-custom-dialog-container-component"]],hostVars:2,hostBindings:function(e,t){2&e&&r["\u0275\u0275styleProp"]("height",t.height)},features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:0,vars:0,template:function(e,t){},encapsulation:2}),t}(o.a);0,void 0},uPsX:function(e,t,n){"use strict";n.d(t,"a",function(){return O});var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("DaoB"),c=n("U3y+"),d=n("cp0P"),u=n("1y+p"),p=n("j37L"),m=n("gmuX"),f=n("y7gY"),h=n("l7P3"),g=n("tyNb"),A=n("/t3+"),b=n("XiUz"),y=n("bTqV"),v=n("NFeN"),C=n("ofXK"),x=n("TSBb"),w=n("bv9b"),S=n("sYmb");function E(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",14)}function I(e,t){1&e&&a["\u0275\u0275element"](0,"div",15)}var O=function(e){function t(t,n,i,a,r,o,s,l,d,u){var p=e.call(this,t,n,d)||this;return p.store=t,p.router=n,p.data=i,p.deviceService=a,p.assetService=r,p.edgeService=o,p.entityViewService=s,p.errorStateMatcher=l,p.dialogRef=d,p.fb=u,p.submitted=!1,p.entityType=c.b,p}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){switch(this.assignToCustomerFormGroup=this.fb.group({customerId:[null,[s.Validators.required]]}),this.data.entityType){case c.b.DEVICE:this.assignToCustomerTitle="device.assign-device-to-customer",this.assignToCustomerText="device.assign-to-customer-text";break;case c.b.ASSET:this.assignToCustomerTitle="asset.assign-asset-to-customer",this.assignToCustomerText="asset.assign-to-customer-text";break;case c.b.EDGE:this.assignToCustomerTitle="edge.assign-edge-to-customer",this.assignToCustomerText="edge.assign-to-customer-text";break;case c.b.ENTITY_VIEW:this.assignToCustomerTitle="entity-view.assign-entity-view-to-customer",this.assignToCustomerText="entity-view.assign-to-customer-text"}},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),i=!!(e&&e.invalid&&this.submitted);return n||i},t.prototype.cancel=function(){this.dialogRef.close(!1)},t.prototype.assign=function(){var e=this;this.submitted=!0;var t=this.assignToCustomerFormGroup.get("customerId").value,n=[];this.data.entityIds.forEach(function(i){n.push(e.getAssignToCustomerTask(t,i.id))}),Object(d.a)(n).subscribe(function(){e.dialogRef.close(!0)})},t.prototype.getAssignToCustomerTask=function(e,t){switch(this.data.entityType){case c.b.DEVICE:return this.deviceService.assignDeviceToCustomer(e,t);case c.b.ASSET:return this.assetService.assignAssetToCustomer(e,t);case c.b.EDGE:return this.edgeService.assignEdgeToCustomer(e,t);case c.b.ENTITY_VIEW:return this.entityViewService.assignEntityViewToCustomer(e,t)}},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](h.Store),a["\u0275\u0275directiveInject"](g.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](u.a),a["\u0275\u0275directiveInject"](f.a),a["\u0275\u0275directiveInject"](p.a),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-assign-to-customer-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:t}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:29,vars:29,consts:[[3,"formGroup","ngSubmit"],["color","accent"],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],[2,"padding-bottom","0.5em"],["formControlName","customerId","required","",3,"entityType"],["mat-dialog-actions","","fxLayout","row","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.assign()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,E,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,I,1,0,"div",6),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275elementStart"](14,"fieldset",8),a["\u0275\u0275pipe"](15,"async"),a["\u0275\u0275elementStart"](16,"div",9),a["\u0275\u0275text"](17),a["\u0275\u0275pipe"](18,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](19,"tb-entity-autocomplete",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](20,"div",11),a["\u0275\u0275elementStart"](21,"button",12),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](22,"async"),a["\u0275\u0275text"](23),a["\u0275\u0275pipe"](24,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](25,"button",13),a["\u0275\u0275pipe"](26,"async"),a["\u0275\u0275text"](27),a["\u0275\u0275pipe"](28,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.assignToCustomerFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,11,t.assignToCustomerTitle)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,13,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,15,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](15,17,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](18,19,t.assignToCustomerText)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("entityType",t.entityType.CUSTOMER),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](22,21,t.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](24,23,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](26,25,t.isLoading$)||t.assignToCustomerFormGroup.invalid||!t.assignToCustomerFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](28,27,"action.assign")," "))},directives:[s["\u0275angular_packages_forms_forms_ba"],s.NgControlStatusGroup,s.FormGroupDirective,A.MatToolbar,b.b,y.MatButton,v.MatIcon,C.NgIf,o.MatDialogContent,x.a,s.NgControlStatus,s.FormControlName,s.RequiredValidator,o.MatDialogActions,b.f,b.e,w.MatProgressBar],pipes:[S.TranslatePipe,C.AsyncPipe],encapsulation:2}),t}(m.a);0,void 0},unUE:function(e,t,n){"use strict";n.d(t,"a",function(){return I}),n.d(t,"b",function(){return O});var i=n("fXoL"),a=n("3Pt+"),r=n("U3y+"),o=n("//Q6"),s=n("rDax"),l=n("XiUz"),c=n("ofXK"),d=n("bTqV"),u=n("kmnG"),p=n("d3UM"),m=n("FKr1"),f=n("qFsG"),h=n("Ww7o"),g=n("znSr"),A=n("sYmb");function b(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",9),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n," ")}}function y(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-form-field"),i["\u0275\u0275elementStart"](1,"mat-label"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mat-select",8),i["\u0275\u0275elementStart"](5,"mat-option",9),i["\u0275\u0275text"](6),i["\u0275\u0275pipe"](7,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,b,2,2,"mat-option",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]().$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3,4,n.title)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("formControlName",n.key),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](7,6,"event.all-events")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",a.selectorValues(n.key))}}function v(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"event.min-value")," "))}function C(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-form-field"),i["\u0275\u0275elementStart"](1,"mat-label"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"input",11),i["\u0275\u0275template"](5,v,3,3,"mat-error",12),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]().$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3,4,n.title)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("name",n.key)("formControlName",n.key),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.eventFilterFormGroup.get(n.key).hasError("min"))}}function x(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"tb-checkbox",13),i["\u0275\u0275listener"]("ngModelChange",function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).changeIsError(e)}),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275property"]("falseValue",""),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,"event.has-error")," "))}function w(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-form-field",14),i["\u0275\u0275elementStart"](1,"mat-label"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"input",15),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]().$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("fxShow",a.showErrorMsgFields()),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3,2,n.title))}}function S(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"mat-form-field"),i["\u0275\u0275elementStart"](2,"mat-label"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](5,"input",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,3,n.title)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("name",n.key)("formControlName",n.key)}}function E(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementContainerStart"](1,5),i["\u0275\u0275template"](2,y,9,8,"ng-template",6),i["\u0275\u0275template"](3,C,6,6,"ng-template",6),i["\u0275\u0275template"](4,x,3,4,"ng-template",6),i["\u0275\u0275template"](5,w,5,4,"ng-template",6),i["\u0275\u0275template"](6,S,6,5,"ng-container",7),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitch",n.key),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",a.isSelector(n.key)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",a.isNumberFields(n.key)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase","isError"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase","error")}}var I=new i.InjectionToken("AlarmFilterPanelData"),O=function(){function e(e,t,n){var i=this;this.data=e,this.overlayRef=t,this.fb=n,this.conditionError=!1,this.msgDirectionTypes=["IN","OUT"],this.statusTypes=["Success","Failure"],this.entityTypes=Object.keys(r.b),this.showColumns=[],this.eventFilterFormGroup=this.fb.group({}),this.data.columns.forEach(function(e){i.showColumns.push(e);var t=[];i.isNumberFields(e.key)&&t.push(a.Validators.min(0)),i.eventFilterFormGroup.addControl(e.key,i.fb.control(i.data.filterParams[e.key]||"",t)),"isError"===e.key&&(i.conditionError=!0)})}return e.prototype.isSelector=function(e){return["msgDirectionType","status","entityName"].includes(e)?e:""},e.prototype.isNumberFields=function(e){return["messagesProcessed","errorsOccurred"].includes(e)?e:""},e.prototype.selectorValues=function(e){switch(e){case"msgDirectionType":return this.msgDirectionTypes;case"status":return this.statusTypes;case"entityName":return this.entityTypes}},e.prototype.update=function(){var e=Object(o.f)(Object.fromEntries(Object.entries(this.eventFilterFormGroup.value).filter(function(e){e[0];return""!==e[1]})));this.result={filterParams:e,columns:this.data.columns},this.overlayRef.dispose()},e.prototype.showErrorMsgFields=function(){return!this.conditionError||""!==this.eventFilterFormGroup.get("isError").value},e.prototype.cancel=function(){this.overlayRef.dispose()},e.prototype.changeIsError=function(e){this.conditionError&&""===e&&this.eventFilterFormGroup.get("error").reset("",{emitEvent:!1})},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](I),i["\u0275\u0275directiveInject"](s.OverlayRef),i["\u0275\u0275directiveInject"](a.FormBuilder))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-event-filter-panel"]],decls:9,vars:9,consts:[["fxLayout","column",1,"mat-content","mat-padding",3,"formGroup","ngSubmit"],[4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","end center",1,"tb-panel-actions"],["type","button","mat-button","",3,"click"],["type","submit","mat-raised-button","","color","accent",3,"disabled"],[3,"ngSwitch"],[3,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"formControlName"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","min","0",3,"name","formControlName"],[4,"ngIf"],["formControlName","isError",3,"falseValue","ngModelChange"],["fxHide","",3,"fxShow"],["matInput","","type","text","name","errorSearchText","formControlName","error"],["matInput","","type","text",3,"name","formControlName"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"form",0),i["\u0275\u0275listener"]("ngSubmit",function(){return t.update()}),i["\u0275\u0275template"](1,E,7,5,"ng-container",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275elementStart"](3,"button",3),i["\u0275\u0275listener"]("click",function(){return t.cancel()}),i["\u0275\u0275text"](4),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"button",4),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.eventFilterFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",t.showColumns),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](5,5,"action.cancel")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",t.eventFilterFormGroup.invalid||!t.eventFilterFormGroup.dirty),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](8,7,"action.update")," "))},directives:[a["\u0275angular_packages_forms_forms_ba"],a.NgControlStatusGroup,l.f,a.FormGroupDirective,c.NgForOf,l.e,d.MatButton,c.NgSwitch,c.NgSwitchCase,c.NgSwitchDefault,u.MatFormField,u.MatLabel,p.MatSelect,a.NgControlStatus,a.FormControlName,m.MatOption,f.MatInput,a.NumberValueAccessor,a.DefaultValueAccessor,c.NgIf,u.MatError,h.a,g.d],pipes:[A.TranslatePipe],styles:["[_nghost-%COMP%]{width:100%;min-width:300px;overflow:auto;background:#fff;border-radius:4px;box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12)}[_nghost-%COMP%]   .mat-content[_ngcontent-%COMP%]{overflow:hidden;background-color:#fff}[_nghost-%COMP%]   .mat-padding[_ngcontent-%COMP%]{padding:16px}"]}),e}();0,void 0},vW25:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("fXoL");function a(e){return function(t,n,a){Object(i.Inject)(e)(t,n,a)}}},"vY+p":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=new(n("fXoL").InjectionToken)("EMBED_DASHBOARD_DIALOG_TOKEN")},vnPf:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("fXoL"),a=n("Y8nr"),r=n("tk/3"),o=function(){function e(e){this.http=e}return e.prototype.getTenantProfiles=function(e,t){return this.http.get("/api/tenantProfiles"+e.toQuery(),Object(a.b)(t))},e.prototype.getTenantProfile=function(e,t){return this.http.get("/api/tenantProfile/"+e,Object(a.b)(t))},e.prototype.saveTenantProfile=function(e,t){return this.http.post("/api/tenantProfile",e,Object(a.b)(t))},e.prototype.deleteTenantProfile=function(e,t){return this.http.delete("/api/tenantProfile/"+e,Object(a.b)(t))},e.prototype.setDefaultTenantProfile=function(e,t){return this.http.post("/api/tenantProfile/"+e+"/default",Object(a.b)(t))},e.prototype.getDefaultTenantProfileInfo=function(e){return this.http.get("/api/tenantProfileInfo/default",Object(a.b)(e))},e.prototype.getTenantProfileInfo=function(e,t){return this.http.get("/api/tenantProfileInfo/"+e,Object(a.b)(t))},e.prototype.getTenantProfileInfos=function(e,t){return this.http.get("/api/tenantProfileInfos"+e.toQuery(),Object(a.b)(t))},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](r.HttpClient))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();0,void 0},"w0k+":function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return s}),n.d(t,"d",function(){return i}),n.d(t,"e",function(){return l}),n.d(t,"f",function(){return c}),n.d(t,"g",function(){return d});var i,a=n("mrSG"),r=128,o=134,s=/^[-+]?[0-9A-Fa-f]+\.?[0-9A-Fa-f]*?$/;!function(e){e.PSK="PSK",e.RPK="RPK",e.X509="X509",e.NO_SEC="NO_SEC"}(i||(i={}));var l=new Map([[i.PSK,"Pre-Shared Key"],[i.RPK,"Raw Public Key"],[i.X509,"X.509 Certificate"],[i.NO_SEC,"No Security"]]);function c(e,t){void 0===t&&(t="");var n={securityConfigClientMode:e,endpoint:t,identity:"",key:""};switch(e){case i.X509:n=Object(a.a)(Object(a.a)({},n),{cert:""});break;case i.PSK:n=Object(a.a)(Object(a.a)({},n),{identity:t,key:""});break;case i.RPK:n=Object(a.a)(Object(a.a)({},n),{key:""})}return n}function d(){return{securityMode:i.NO_SEC}}},wIJ8:function(e,t,n){"use strict";n.d(t,"a",function(){return A});var i=n("fXoL"),a=n("rDax"),r=n("+rOU"),o=n("0dMK"),s=n("//Q6"),l=n("MBk6"),c=n("sYmb"),d=n("0MNC"),u=n("XiUz"),p=n("bTqV"),m=n("Qu3c"),f=n("NFeN"),h=n("znSr"),g=["aliasEntitySelectPanelOrigin"],A=function(){function e(e,t,n,i,a){this.translate=e,this.overlay=t,this.cd=n,this.breakpointObserver=i,this.viewContainerRef=a,this.tooltipPosition="above",this.entityAliasesInfo={},this.hasSelectableAliasEntities=!1,this.rxSubscriptions=new Array}return Object.defineProperty(e.prototype,"aliasController",{get:function(){return this.aliasControllerValue},set:function(e){this.aliasControllerValue=e,this.setupAliasController(this.aliasControllerValue)},enumerable:!1,configurable:!0}),e.prototype.setupAliasController=function(e){var t=this;this.rxSubscriptions.forEach(function(e){e.unsubscribe()}),this.rxSubscriptions.length=0,e&&(this.rxSubscriptions.push(e.entityAliasesChanged.subscribe(function(){setTimeout(function(){t.updateDisplayValue(),t.updateEntityAliasesInfo()},0)})),this.rxSubscriptions.push(e.entityAliasResolved.subscribe(function(){setTimeout(function(){t.updateDisplayValue(),t.updateEntityAliasesInfo()},0)})))},e.prototype.ngOnInit=function(){},e.prototype.ngOnDestroy=function(){this.rxSubscriptions.forEach(function(e){e.unsubscribe()}),this.rxSubscriptions.length=0},e.prototype.openEditMode=function(){if(!this.disabled&&this.hasSelectableAliasEntities){var e=this.overlay.position(),t=new a.OverlayConfig({panelClass:"tb-aliases-entity-select-panel",backdropClass:"cdk-overlay-transparent-backdrop",hasBackdrop:!0});t.positionStrategy=e.flexibleConnectedTo(this.aliasEntitySelectPanelOrigin.elementRef).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}]);var n=this.overlay.create(t);n.backdropClick().subscribe(function(){n.dispose()});var i=this._createAliasesEntitySelectPanelInjector(n,{aliasController:this.aliasController,entityAliasesInfo:Object(s.e)(this.entityAliasesInfo)});n.attach(new r.ComponentPortal(o.b,this.viewContainerRef,i))}},e.prototype._createAliasesEntitySelectPanelInjector=function(e,t){var n=[{provide:o.a,useValue:t},{provide:a.OverlayRef,useValue:e}];return i.Injector.create({parent:this.viewContainerRef.injector,providers:n})},e.prototype.updateDisplayValue=function(){for(var e,t,n=!0,i=this.aliasController.getEntityAliases(),a=0,r=Object.keys(i);a<r.length;a++){var o=r[a];if(!i[o].filter.resolveMultiple){var s=this.aliasController.getInstantAliasInfo(o);if(s&&s.currentEntity){if(t){n=!1;break}t=o}}}n&&t?e=this.aliasController.getInstantAliasInfo(t).currentEntity.name:e=this.translate.instant("entity.entities");this.displayValue=e,this.cd.detectChanges()},e.prototype.updateEntityAliasesInfo=function(){var e=this.aliasController.getEntityAliases();this.entityAliasesInfo={},this.hasSelectableAliasEntities=!1;for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t],a=this.aliasController.getInstantAliasInfo(i);a&&!a.resolveMultiple&&a.currentEntity&&a.entityFilter&&a.entityFilter.type!==l.a.singleEntity&&(this.entityAliasesInfo[i]=Object(s.e)(a),this.hasSelectableAliasEntities=!0)}},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](c.TranslateService),i["\u0275\u0275directiveInject"](a.Overlay),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](d.BreakpointObserver),i["\u0275\u0275directiveInject"](i.ViewContainerRef))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-aliases-entity-select"]],viewQuery:function(e,t){if(1&e&&i["\u0275\u0275viewQuery"](g,1),2&e){var n;i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.aliasEntitySelectPanelOrigin=n.first)}},inputs:{aliasController:"aliasController",tooltipPosition:"tooltipPosition",disabled:"disabled"},decls:9,vars:9,consts:[["fxLayout","row","fxLayoutAlign","start center",1,"tb-aliases-entity-select"],["mat-icon-button","","cdkOverlayOrigin","",3,"matTooltip","matTooltipPosition","click"],["aliasEntitySelectPanelOrigin","cdkOverlayOrigin"],[1,"material-icons"],["fxHide.lt-lg","",3,"matTooltip","matTooltipPosition","click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"section",0),i["\u0275\u0275elementStart"](1,"button",1,2),i["\u0275\u0275listener"]("click",function(){return t.openEditMode()}),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementStart"](4,"mat-icon",3),i["\u0275\u0275text"](5,"devices_other"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"span",4),i["\u0275\u0275listener"]("click",function(){return t.openEditMode()}),i["\u0275\u0275pipe"](7,"translate"),i["\u0275\u0275text"](8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("matTooltip",t.hasSelectableAliasEntities?i["\u0275\u0275pipeBind1"](3,5,"entity.select-entities"):""),i["\u0275\u0275property"]("matTooltipPosition",t.tooltipPosition),i["\u0275\u0275advance"](5),i["\u0275\u0275propertyInterpolate"]("matTooltip",t.hasSelectableAliasEntities?i["\u0275\u0275pipeBind1"](7,7,"entity.select-entities"):""),i["\u0275\u0275property"]("matTooltipPosition",t.tooltipPosition),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",t.displayValue," "))},directives:[u.f,u.e,p.MatButton,a.CdkOverlayOrigin,m.MatTooltip,f.MatIcon,h.d],pipes:[c.TranslatePipe],styles:["[_nghost-%COMP%]{min-width:52px}[_nghost-%COMP%]   section.tb-aliases-entity-select[_ngcontent-%COMP%]{min-height:32px;padding:0 6px}@media screen and (max-width:959px){[_nghost-%COMP%]   section.tb-aliases-entity-select[_ngcontent-%COMP%]{padding:0}}[_nghost-%COMP%]   section.tb-aliases-entity-select[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;pointer-events:all;cursor:pointer}"]}),e}();0,void 0},wOnQ:function(e,t,n){void(e.exports=function(){"use strict";var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};function t(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var n=function(){return(n=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function i(e,t,n,i){return new(n||(n=Promise))(function(a,r){function o(e){try{l(i.next(e))}catch(t){r(t)}}function s(e){try{l(i.throw(e))}catch(t){r(t)}}function l(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,s)}l((i=i.apply(e,t||[])).next())})}function a(e,t){var n,i,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(s){r=[6,s],i=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}for(var r=function(){function e(e,t,n,i){this.left=e,this.top=t,this.width=n,this.height=i}return e.prototype.add=function(t,n,i,a){return new e(this.left+t,this.top+n,this.width+i,this.height+a)},e.fromClientRect=function(t){return new e(t.left,t.top,t.width,t.height)},e}(),o=function(e){return r.fromClientRect(e.getBoundingClientRect())},s=function(e){for(var t=[],n=0,i=e.length;n<i;){var a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<i){var r=e.charCodeAt(n++);56320==(64512&r)?t.push(((1023&a)<<10)+(1023&r)+65536):(t.push(a),n--)}else t.push(a)}return t},l=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var i=[],a=-1,r="";++a<n;){var o=e[a];o<=65535?i.push(o):(o-=65536,i.push(55296+(o>>10),o%1024+56320)),(a+1===n||i.length>16384)&&(r+=String.fromCharCode.apply(String,i),i.length=0)}return r},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d="undefined"==typeof Uint8Array?[]:new Uint8Array(256),u=0;u<c.length;u++)d[c.charCodeAt(u)]=u;var p,m=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},f=function(){function e(e,t,n,i,a,r){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=i,this.index=a,this.data=r}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>5])<<2)+(31&e),this.data[t];if(e<=65535)return t=((t=this.index[2048+(e-55296>>5)])<<2)+(31&e),this.data[t];if(e<this.highStart)return t=2080+(e>>11),t=this.index[t],t+=e>>5&63,t=((t=this.index[t])<<2)+(31&e),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),h=10,g=13,A=15,b=17,y=18,v=19,C=20,x=21,w=22,S=24,E=25,I=26,O=27,T=28,F=30,B=32,M=33,P=34,D=35,k=37,_=38,L=39,j=40,N=42,R=function(e){var t,n,i,a=function(e){var t,n,i,a,r,o=.75*e.length,s=e.length,l=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var c="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(o):new Array(o),u=Array.isArray(c)?c:new Uint8Array(c);for(t=0;t<s;t+=4)n=d[e.charCodeAt(t)],i=d[e.charCodeAt(t+1)],a=d[e.charCodeAt(t+2)],r=d[e.charCodeAt(t+3)],u[l++]=n<<2|i>>4,u[l++]=(15&i)<<4|a>>2,u[l++]=(3&a)<<6|63&r;return c}(e),r=Array.isArray(a)?function(e){for(var t=e.length,n=[],i=0;i<t;i+=4)n.push(e[i+3]<<24|e[i+2]<<16|e[i+1]<<8|e[i]);return n}(a):new Uint32Array(a),o=Array.isArray(a)?function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n.push(e[i+1]<<8|e[i]);return n}(a):new Uint16Array(a),s=m(o,12,r[4]/2),l=2===r[5]?m(o,(24+r[4])/2):(t=r,n=Math.ceil((24+r[4])/4),t.slice?t.slice(n,i):new Uint32Array(Array.prototype.slice.call(t,n,i)));return new f(r[0],r[1],r[2],r[3],s,l)}("KwAAAAAAAAAACA4AIDoAAPAfAAACAAAAAAAIABAAGABAAEgAUABYAF4AZgBeAGYAYABoAHAAeABeAGYAfACEAIAAiACQAJgAoACoAK0AtQC9AMUAXgBmAF4AZgBeAGYAzQDVAF4AZgDRANkA3gDmAOwA9AD8AAQBDAEUARoBIgGAAIgAJwEvATcBPwFFAU0BTAFUAVwBZAFsAXMBewGDATAAiwGTAZsBogGkAawBtAG8AcIBygHSAdoB4AHoAfAB+AH+AQYCDgIWAv4BHgImAi4CNgI+AkUCTQJTAlsCYwJrAnECeQKBAk0CiQKRApkCoQKoArACuALAAsQCzAIwANQC3ALkAjAA7AL0AvwCAQMJAxADGAMwACADJgMuAzYDPgOAAEYDSgNSA1IDUgNaA1oDYANiA2IDgACAAGoDgAByA3YDfgOAAIQDgACKA5IDmgOAAIAAogOqA4AAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAK8DtwOAAIAAvwPHA88D1wPfAyAD5wPsA/QD/AOAAIAABAQMBBIEgAAWBB4EJgQuBDMEIAM7BEEEXgBJBCADUQRZBGEEaQQwADAAcQQ+AXkEgQSJBJEEgACYBIAAoASoBK8EtwQwAL8ExQSAAIAAgACAAIAAgACgAM0EXgBeAF4AXgBeAF4AXgBeANUEXgDZBOEEXgDpBPEE+QQBBQkFEQUZBSEFKQUxBTUFPQVFBUwFVAVcBV4AYwVeAGsFcwV7BYMFiwWSBV4AmgWgBacFXgBeAF4AXgBeAKsFXgCyBbEFugW7BcIFwgXIBcIFwgXQBdQF3AXkBesF8wX7BQMGCwYTBhsGIwYrBjMGOwZeAD8GRwZNBl4AVAZbBl4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAGMGXgBqBnEGXgBeAF4AXgBeAF4AXgBeAF4AXgB5BoAG4wSGBo4GkwaAAIADHgR5AF4AXgBeAJsGgABGA4AAowarBrMGswagALsGwwbLBjAA0wbaBtoG3QbaBtoG2gbaBtoG2gblBusG8wb7BgMHCwcTBxsHCwcjBysHMAc1BzUHOgdCB9oGSgdSB1oHYAfaBloHaAfaBlIH2gbaBtoG2gbaBtoG2gbaBjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHbQdeAF4ANQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQd1B30HNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B4MH2gaKB68EgACAAIAAgACAAIAAgACAAI8HlwdeAJ8HpweAAIAArwe3B14AXgC/B8UHygcwANAH2AfgB4AA6AfwBz4B+AcACFwBCAgPCBcIogEYAR8IJwiAAC8INwg/CCADRwhPCFcIXwhnCEoDGgSAAIAAgABvCHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIhAiLCI4IMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAANQc1BzUHNQc1BzUHNQc1BzUHNQc1B54INQc1B6II2gaqCLIIugiAAIAAvgjGCIAAgACAAIAAgACAAIAAgACAAIAAywiHAYAA0wiAANkI3QjlCO0I9Aj8CIAAgACAAAIJCgkSCRoJIgknCTYHLwk3CZYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiAAIAAAAFAAXgBeAGAAcABeAHwAQACQAKAArQC9AJ4AXgBeAE0A3gBRAN4A7AD8AMwBGgEAAKcBNwEFAUwBXAF4QkhCmEKnArcCgAHHAsABz4LAAcABwAHAAd+C6ABoAG+C/4LAAcABwAHAAc+DF4MAAcAB54M3gweDV4Nng3eDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEeDqABVg6WDqABoQ6gAaABoAHXDvcONw/3DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DncPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB7cPPwlGCU4JMACAAIAAgABWCV4JYQmAAGkJcAl4CXwJgAkwADAAMAAwAIgJgACLCZMJgACZCZ8JowmrCYAAswkwAF4AXgB8AIAAuwkABMMJyQmAAM4JgADVCTAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAqwYWBNkIMAAwADAAMADdCeAJ6AnuCR4E9gkwAP4JBQoNCjAAMACAABUK0wiAAB0KJAosCjQKgAAwADwKQwqAAEsKvQmdCVMKWwowADAAgACAALcEMACAAGMKgABrCjAAMAAwADAAMAAwADAAMAAwADAAMAAeBDAAMAAwADAAMAAwADAAMAAwADAAMAAwAIkEPQFzCnoKiQSCCooKkAqJBJgKoAqkCokEGAGsCrQKvArBCjAAMADJCtEKFQHZCuEK/gHpCvEKMAAwADAAMACAAIwE+QowAIAAPwEBCzAAMAAwADAAMACAAAkLEQswAIAAPwEZCyELgAAOCCkLMAAxCzkLMAAwADAAMAAwADAAXgBeAEELMAAwADAAMAAwADAAMAAwAEkLTQtVC4AAXAtkC4AAiQkwADAAMAAwADAAMAAwADAAbAtxC3kLgAuFC4sLMAAwAJMLlwufCzAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAApwswADAAMACAAIAAgACvC4AAgACAAIAAgACAALcLMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAvwuAAMcLgACAAIAAgACAAIAAyguAAIAAgACAAIAA0QswADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAANkLgACAAIAA4AswADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACJCR4E6AswADAAhwHwC4AA+AsADAgMEAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMACAAIAAGAwdDCUMMAAwAC0MNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQw1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHPQwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADUHNQc1BzUHNQc1BzUHNQc2BzAAMAA5DDUHNQc1BzUHNQc1BzUHNQc1BzUHNQdFDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAATQxSDFoMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAF4AXgBeAF4AXgBeAF4AYgxeAGoMXgBxDHkMfwxeAIUMXgBeAI0MMAAwADAAMAAwAF4AXgCVDJ0MMAAwADAAMABeAF4ApQxeAKsMswy7DF4Awgy9DMoMXgBeAF4AXgBeAF4AXgBeAF4AXgDRDNkMeQBqCeAM3Ax8AOYM7Az0DPgMXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgCgAAANoAAHDQ4NFg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAeDSYNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAC4NMABeAF4ANg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAD4NRg1ODVYNXg1mDTAAbQ0wADAAMAAwADAAMAAwADAA2gbaBtoG2gbaBtoG2gbaBnUNeg3CBYANwgWFDdoGjA3aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gaUDZwNpA2oDdoG2gawDbcNvw3HDdoG2gbPDdYN3A3fDeYN2gbsDfMN2gbaBvoN/g3aBgYODg7aBl4AXgBeABYOXgBeACUG2gYeDl4AJA5eACwO2w3aBtoGMQ45DtoG2gbaBtoGQQ7aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B1EO2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQdZDjUHNQc1BzUHNQc1B2EONQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHaA41BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B3AO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B2EO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBkkOeA6gAKAAoAAwADAAMAAwAKAAoACgAKAAoACgAKAAgA4wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAD//wQABAAEAAQABAAEAAQABAAEAA0AAwABAAEAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAKABMAFwAeABsAGgAeABcAFgASAB4AGwAYAA8AGAAcAEsASwBLAEsASwBLAEsASwBLAEsAGAAYAB4AHgAeABMAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAFgAbABIAHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYADQARAB4ABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkAFgAaABsAGwAbAB4AHQAdAB4ATwAXAB4ADQAeAB4AGgAbAE8ATwAOAFAAHQAdAB0ATwBPABcATwBPAE8AFgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwArAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAAQABAANAA0ASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAUAArACsAKwArACsAKwArACsABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAGgAaAFAAUABQAFAAUABMAB4AGwBQAB4AKwArACsABAAEAAQAKwBQAFAAUABQAFAAUAArACsAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUAArAFAAUAArACsABAArAAQABAAEAAQABAArACsAKwArAAQABAArACsABAAEAAQAKwArACsABAArACsAKwArACsAKwArAFAAUABQAFAAKwBQACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwAEAAQAUABQAFAABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQAKwArAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeABsAKwArACsAKwArACsAKwBQAAQABAAEAAQABAAEACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAKwArACsAKwArACsAKwArAAQABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwAEAFAAKwBQAFAAUABQAFAAUAArACsAKwBQAFAAUAArAFAAUABQAFAAKwArACsAUABQACsAUAArAFAAUAArACsAKwBQAFAAKwArACsAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQAKwArACsABAAEAAQAKwAEAAQABAAEACsAKwBQACsAKwArACsAKwArAAQAKwArACsAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAB4AHgAeAB4AHgAeABsAHgArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArAFAAUABQACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAB4AUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArACsAKwArACsAKwArAFAAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwArAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAKwBcAFwAKwBcACsAKwBcACsAKwArACsAKwArAFwAXABcAFwAKwBcAFwAXABcAFwAXABcACsAXABcAFwAKwBcACsAXAArACsAXABcACsAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgArACoAKgBcACsAKwBcAFwAXABcAFwAKwBcACsAKgAqACoAKgAqACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAFwAXABcAFwAUAAOAA4ADgAOAB4ADgAOAAkADgAOAA0ACQATABMAEwATABMACQAeABMAHgAeAB4ABAAEAB4AHgAeAB4AHgAeAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUAANAAQAHgAEAB4ABAAWABEAFgARAAQABABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAAQABAAEAAQABAANAAQABABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsADQANAB4AHgAeAB4AHgAeAAQAHgAeAB4AHgAeAB4AKwAeAB4ADgAOAA0ADgAeAB4AHgAeAB4ACQAJACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgAeAB4AHgBcAFwAXABcAFwAXAAqACoAKgAqAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAKgAqACoAKgAqACoAKgBcAFwAXAAqACoAKgAqAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAXAAqAEsASwBLAEsASwBLAEsASwBLAEsAKgAqACoAKgAqACoAUABQAFAAUABQAFAAKwBQACsAKwArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQACsAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwAEAAQABAAeAA0AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAEQArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAADQANAA0AUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAA0ADQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoADQANABUAXAANAB4ADQAbAFwAKgArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAB4AHgATABMADQANAA4AHgATABMAHgAEAAQABAAJACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAUABQAFAAUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwAeACsAKwArABMAEwBLAEsASwBLAEsASwBLAEsASwBLAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwBcAFwAXABcAFwAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcACsAKwArACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwAeAB4AXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsABABLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKgAqACoAKgAqACoAKgBcACoAKgAqACoAKgAqACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAUABQAFAAUABQAFAAUAArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4ADQANAA0ADQAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAHgAeAB4AHgBQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwANAA0ADQANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwBQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsABAAEAAQAHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAABABQAFAAUABQAAQABAAEAFAAUAAEAAQABAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAKwBQACsAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAKwArAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAKwAeAB4AHgAeAB4AHgAeAA4AHgArAA0ADQANAA0ADQANAA0ACQANAA0ADQAIAAQACwAEAAQADQAJAA0ADQAMAB0AHQAeABcAFwAWABcAFwAXABYAFwAdAB0AHgAeABQAFAAUAA0AAQABAAQABAAEAAQABAAJABoAGgAaABoAGgAaABoAGgAeABcAFwAdABUAFQAeAB4AHgAeAB4AHgAYABYAEQAVABUAFQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgANAB4ADQANAA0ADQAeAA0ADQANAAcAHgAeAB4AHgArAAQABAAEAAQABAAEAAQABAAEAAQAUABQACsAKwBPAFAAUABQAFAAUAAeAB4AHgAWABEATwBQAE8ATwBPAE8AUABQAFAAUABQAB4AHgAeABYAEQArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGgAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgBQABoAHgAdAB4AUAAeABoAHgAeAB4AHgAeAB4AHgAeAB4ATwAeAFAAGwAeAB4AUABQAFAAUABQAB4AHgAeAB0AHQAeAFAAHgBQAB4AUAAeAFAATwBQAFAAHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AUABQAFAAUABPAE8AUABQAFAAUABQAE8AUABQAE8AUABPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAE8ATwBPAE8ATwBPAE8ATwBPAE8AUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAATwAeAB4AKwArACsAKwAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB0AHQAeAB4AHgAdAB0AHgAeAB0AHgAeAB4AHQAeAB0AGwAbAB4AHQAeAB4AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB0AHgAdAB4AHQAdAB0AHQAdAB0AHgAdAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAdAB0AHQAdAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAlACUAHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB0AHQAeAB4AHgAeAB0AHQAdAB4AHgAdAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB0AHQAeAB4AHQAeAB4AHgAeAB0AHQAeAB4AHgAeACUAJQAdAB0AJQAeACUAJQAlACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHQAdAB0AHgAdACUAHQAdAB4AHQAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHQAdAB0AHQAlAB4AJQAlACUAHQAlACUAHQAdAB0AJQAlAB0AHQAlAB0AHQAlACUAJQAeAB0AHgAeAB4AHgAdAB0AJQAdAB0AHQAdAB0AHQAlACUAJQAlACUAHQAlACUAIAAlAB0AHQAlACUAJQAlACUAJQAlACUAHgAeAB4AJQAlACAAIAAgACAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeABcAFwAXABcAFwAXAB4AEwATACUAHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACUAJQBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwArACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAE8ATwBPAE8ATwBPAE8ATwAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeACsAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUAArACsAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQBQAFAAUABQACsAKwArACsAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAABAAEAAQAKwAEAAQAKwArACsAKwArAAQABAAEAAQAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsABAAEAAQAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsADQANAA0ADQANAA0ADQANAB4AKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAUABQAFAAUABQAA0ADQANAA0ADQANABQAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwANAA0ADQANAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAeAAQABAAEAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLACsADQArAB4AKwArAAQABAAEAAQAUABQAB4AUAArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwAEAAQABAAEAAQABAAEAAQABAAOAA0ADQATABMAHgAeAB4ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0AUABQAFAAUAAEAAQAKwArAAQADQANAB4AUAArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXABcAA0ADQANACoASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUAArACsAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANACsADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEcARwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwAeAAQABAANAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAEAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUAArACsAUAArACsAUABQACsAKwBQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAeAB4ADQANAA0ADQAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAArAAQABAArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAEAAQABAAEAAQABAAEACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAFgAWAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAKwBQACsAKwArACsAKwArAFAAKwArACsAKwBQACsAUAArAFAAKwBQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQACsAUAArAFAAKwBQACsAUABQACsAUAArACsAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAUABQAFAAUAArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUAArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAlACUAJQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeACUAJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeACUAJQAlACUAJQAeACUAJQAlACUAJQAgACAAIAAlACUAIAAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIQAhACEAIQAhACUAJQAgACAAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAIAAlACUAJQAlACAAJQAgACAAIAAgACAAIAAgACAAIAAlACUAJQAgACUAJQAlACUAIAAgACAAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeACUAHgAlAB4AJQAlACUAJQAlACAAJQAlACUAJQAeACUAHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAIAAgACAAIAAgAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFwAXABcAFQAVABUAHgAeAB4AHgAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAlACAAIAAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsA"),U=[F,36],V=[1,2,3,5],Q=[h,8],G=[O,I],H=V.concat(Q),K=[_,L,j,P,D],q=[A,g],z=function(e,t,n,i){var a=i[n];if(Array.isArray(e)?-1!==e.indexOf(a):e===a)for(var r=n;r<=i.length;){if((l=i[++r])===t)return!0;if(l!==h)break}if(a===h)for(r=n;r>0;){var o=i[--r];if(Array.isArray(e)?-1!==e.indexOf(o):e===o)for(var s=n;s<=i.length;){var l;if((l=i[++s])===t)return!0;if(l!==h)break}if(o!==h)break}return!1},W=function(e,t){for(var n=e;n>=0;){var i=t[n];if(i!==h)return i;n--}return 0},X=function(e,t,n,i,a){if(0===n[i])return"\xd7";var r=i-1;if(Array.isArray(a)&&!0===a[r])return"\xd7";var o=r-1,s=r+1,l=t[r],c=o>=0?t[o]:0,d=t[s];if(2===l&&3===d)return"\xd7";if(-1!==V.indexOf(l))return"!";if(-1!==V.indexOf(d))return"\xd7";if(-1!==Q.indexOf(d))return"\xd7";if(8===W(r,t))return"\xf7";if(11===R.get(e[r])&&(d===k||d===B||d===M))return"\xd7";if(7===l||7===d)return"\xd7";if(9===l)return"\xd7";if(-1===[h,g,A].indexOf(l)&&9===d)return"\xd7";if(-1!==[b,y,v,S,T].indexOf(d))return"\xd7";if(W(r,t)===w)return"\xd7";if(z(23,w,r,t))return"\xd7";if(z([b,y],x,r,t))return"\xd7";if(z(12,12,r,t))return"\xd7";if(l===h)return"\xf7";if(23===l||23===d)return"\xd7";if(16===d||16===l)return"\xf7";if(-1!==[g,A,x].indexOf(d)||14===l)return"\xd7";if(36===c&&-1!==q.indexOf(l))return"\xd7";if(l===T&&36===d)return"\xd7";if(d===C&&-1!==U.concat(C,v,E,k,B,M).indexOf(l))return"\xd7";if(-1!==U.indexOf(d)&&l===E||-1!==U.indexOf(l)&&d===E)return"\xd7";if(l===O&&-1!==[k,B,M].indexOf(d)||-1!==[k,B,M].indexOf(l)&&d===I)return"\xd7";if(-1!==U.indexOf(l)&&-1!==G.indexOf(d)||-1!==G.indexOf(l)&&-1!==U.indexOf(d))return"\xd7";if(-1!==[O,I].indexOf(l)&&(d===E||-1!==[w,A].indexOf(d)&&t[s+1]===E)||-1!==[w,A].indexOf(l)&&d===E||l===E&&-1!==[E,T,S].indexOf(d))return"\xd7";if(-1!==[E,T,S,b,y].indexOf(d))for(var u=r;u>=0;){if((p=t[u])===E)return"\xd7";if(-1===[T,S].indexOf(p))break;u--}if(-1!==[O,I].indexOf(d))for(u=-1!==[b,y].indexOf(l)?o:r;u>=0;){var p;if((p=t[u])===E)return"\xd7";if(-1===[T,S].indexOf(p))break;u--}if(_===l&&-1!==[_,L,P,D].indexOf(d)||-1!==[L,P].indexOf(l)&&-1!==[L,j].indexOf(d)||-1!==[j,D].indexOf(l)&&d===j)return"\xd7";if(-1!==K.indexOf(l)&&-1!==[C,I].indexOf(d)||-1!==K.indexOf(d)&&l===O)return"\xd7";if(-1!==U.indexOf(l)&&-1!==U.indexOf(d))return"\xd7";if(l===S&&-1!==U.indexOf(d))return"\xd7";if(-1!==U.concat(E).indexOf(l)&&d===w||-1!==U.concat(E).indexOf(d)&&l===y)return"\xd7";if(41===l&&41===d){for(var m=n[r],f=1;m>0&&41===t[--m];)f++;if(f%2!=0)return"\xd7"}return l===B&&d===M?"\xd7":"\xf7"},$=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var n=function(e,t){void 0===t&&(t="strict");var n=[],i=[],a=[];return e.forEach(function(e,r){var o=R.get(e);if(o>50?(a.push(!0),o-=50):a.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return i.push(r),n.push(16);if(4===o||11===o){if(0===r)return i.push(r),n.push(F);var s=n[r-1];return-1===H.indexOf(s)?(i.push(i[r-1]),n.push(s)):(i.push(r),n.push(F))}return i.push(r),31===o?n.push("strict"===t?x:k):o===N||29===o?n.push(F):43===o?e>=131072&&e<=196605||e>=196608&&e<=262141?n.push(k):n.push(F):(n.push(o),void 0)}),[i,n,a]}(e,t.lineBreak),i=n[0],a=n[1],r=n[2];return"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(a=a.map(function(e){return-1!==[E,F,N].indexOf(e)?k:e})),[i,a,"keep-all"===t.wordBreak?r.map(function(t,n){return t&&e[n]>=19968&&e[n]<=40959}):void 0]},J=function(){function e(e,t,n,i){this.codePoints=e,this.required="!"===t,this.start=n,this.end=i}return e.prototype.slice=function(){return l.apply(void 0,this.codePoints.slice(this.start,this.end))},e}();!function(e){e[e.STRING_TOKEN=0]="STRING_TOKEN",e[e.BAD_STRING_TOKEN=1]="BAD_STRING_TOKEN",e[e.LEFT_PARENTHESIS_TOKEN=2]="LEFT_PARENTHESIS_TOKEN",e[e.RIGHT_PARENTHESIS_TOKEN=3]="RIGHT_PARENTHESIS_TOKEN",e[e.COMMA_TOKEN=4]="COMMA_TOKEN",e[e.HASH_TOKEN=5]="HASH_TOKEN",e[e.DELIM_TOKEN=6]="DELIM_TOKEN",e[e.AT_KEYWORD_TOKEN=7]="AT_KEYWORD_TOKEN",e[e.PREFIX_MATCH_TOKEN=8]="PREFIX_MATCH_TOKEN",e[e.DASH_MATCH_TOKEN=9]="DASH_MATCH_TOKEN",e[e.INCLUDE_MATCH_TOKEN=10]="INCLUDE_MATCH_TOKEN",e[e.LEFT_CURLY_BRACKET_TOKEN=11]="LEFT_CURLY_BRACKET_TOKEN",e[e.RIGHT_CURLY_BRACKET_TOKEN=12]="RIGHT_CURLY_BRACKET_TOKEN",e[e.SUFFIX_MATCH_TOKEN=13]="SUFFIX_MATCH_TOKEN",e[e.SUBSTRING_MATCH_TOKEN=14]="SUBSTRING_MATCH_TOKEN",e[e.DIMENSION_TOKEN=15]="DIMENSION_TOKEN",e[e.PERCENTAGE_TOKEN=16]="PERCENTAGE_TOKEN",e[e.NUMBER_TOKEN=17]="NUMBER_TOKEN",e[e.FUNCTION=18]="FUNCTION",e[e.FUNCTION_TOKEN=19]="FUNCTION_TOKEN",e[e.IDENT_TOKEN=20]="IDENT_TOKEN",e[e.COLUMN_TOKEN=21]="COLUMN_TOKEN",e[e.URL_TOKEN=22]="URL_TOKEN",e[e.BAD_URL_TOKEN=23]="BAD_URL_TOKEN",e[e.CDC_TOKEN=24]="CDC_TOKEN",e[e.CDO_TOKEN=25]="CDO_TOKEN",e[e.COLON_TOKEN=26]="COLON_TOKEN",e[e.SEMICOLON_TOKEN=27]="SEMICOLON_TOKEN",e[e.LEFT_SQUARE_BRACKET_TOKEN=28]="LEFT_SQUARE_BRACKET_TOKEN",e[e.RIGHT_SQUARE_BRACKET_TOKEN=29]="RIGHT_SQUARE_BRACKET_TOKEN",e[e.UNICODE_RANGE_TOKEN=30]="UNICODE_RANGE_TOKEN",e[e.WHITESPACE_TOKEN=31]="WHITESPACE_TOKEN",e[e.EOF_TOKEN=32]="EOF_TOKEN"}(p||(p={}));var Y=function(e){return e>=48&&e<=57},Z=function(e){return Y(e)||e>=65&&e<=70||e>=97&&e<=102},ee=function(e){return 10===e||9===e||32===e},te=function(e){return function(e){return function(e){return e>=97&&e<=122}(e)||function(e){return e>=65&&e<=90}(e)}(e)||function(e){return e>=128}(e)||95===e},ne=function(e){return te(e)||Y(e)||45===e},ie=function(e){return e>=0&&e<=8||11===e||e>=14&&e<=31||127===e},ae=function(e,t){return 92===e&&10!==t},re=function(e,t,n){return 45===e?te(t)||ae(t,n):!!te(e)||!(92!==e||!ae(e,t))},oe=function(e,t,n){return 43===e||45===e?!!Y(t)||46===t&&Y(n):Y(46===e?t:e)},se=function(e){var t=0,n=1;43!==e[t]&&45!==e[t]||(45===e[t]&&(n=-1),t++);for(var i=[];Y(e[t]);)i.push(e[t++]);var a=i.length?parseInt(l.apply(void 0,i),10):0;46===e[t]&&t++;for(var r=[];Y(e[t]);)r.push(e[t++]);var o=r.length,s=o?parseInt(l.apply(void 0,r),10):0;69!==e[t]&&101!==e[t]||t++;var c=1;43!==e[t]&&45!==e[t]||(45===e[t]&&(c=-1),t++);for(var d=[];Y(e[t]);)d.push(e[t++]);var u=d.length?parseInt(l.apply(void 0,d),10):0;return n*(a+s*Math.pow(10,-o))*Math.pow(10,c*u)},le={type:p.LEFT_PARENTHESIS_TOKEN},ce={type:p.RIGHT_PARENTHESIS_TOKEN},de={type:p.COMMA_TOKEN},ue={type:p.SUFFIX_MATCH_TOKEN},pe={type:p.PREFIX_MATCH_TOKEN},me={type:p.COLUMN_TOKEN},fe={type:p.DASH_MATCH_TOKEN},he={type:p.INCLUDE_MATCH_TOKEN},ge={type:p.LEFT_CURLY_BRACKET_TOKEN},Ae={type:p.RIGHT_CURLY_BRACKET_TOKEN},be={type:p.SUBSTRING_MATCH_TOKEN},ye={type:p.BAD_URL_TOKEN},ve={type:p.BAD_STRING_TOKEN},Ce={type:p.CDO_TOKEN},xe={type:p.CDC_TOKEN},we={type:p.COLON_TOKEN},Se={type:p.SEMICOLON_TOKEN},Ee={type:p.LEFT_SQUARE_BRACKET_TOKEN},Ie={type:p.RIGHT_SQUARE_BRACKET_TOKEN},Oe={type:p.WHITESPACE_TOKEN},Te={type:p.EOF_TOKEN},Fe=function(){function e(){this._value=[]}return e.prototype.write=function(e){this._value=this._value.concat(s(e))},e.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==Te;)e.push(t),t=this.consumeToken();return e},e.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case 34:return this.consumeStringToken(34);case 35:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),i=this.peekCodePoint(2);if(ne(t)||ae(n,i)){var a=re(t,n,i)?2:1,r=this.consumeName();return{type:p.HASH_TOKEN,value:r,flags:a}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),ue;break;case 39:return this.consumeStringToken(39);case 40:return le;case 41:return ce;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),be;break;case 43:if(oe(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case 44:return de;case 45:var o=e,s=this.peekCodePoint(0),c=this.peekCodePoint(1);if(oe(o,s,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(re(o,s,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(45===s&&62===c)return this.consumeCodePoint(),this.consumeCodePoint(),xe;break;case 46:if(oe(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(42===d&&47===(d=this.consumeCodePoint()))return this.consumeToken();if(-1===d)return this.consumeToken()}break;case 58:return we;case 59:return Se;case 60:if(33===this.peekCodePoint(0)&&45===this.peekCodePoint(1)&&45===this.peekCodePoint(2))return this.consumeCodePoint(),this.consumeCodePoint(),Ce;break;case 64:var u=this.peekCodePoint(0),m=this.peekCodePoint(1),f=this.peekCodePoint(2);if(re(u,m,f))return r=this.consumeName(),{type:p.AT_KEYWORD_TOKEN,value:r};break;case 91:return Ee;case 92:if(ae(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case 93:return Ie;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),pe;break;case 123:return ge;case 125:return Ae;case 117:case 85:var h=this.peekCodePoint(0),g=this.peekCodePoint(1);return 43!==h||!Z(g)&&63!==g||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),fe;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),me;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),he;break;case-1:return Te}return ee(e)?(this.consumeWhiteSpace(),Oe):Y(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):te(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:p.DELIM_TOKEN,value:l(e)}},e.prototype.consumeCodePoint=function(){var e=this._value.shift();return void 0===e?-1:e},e.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},e.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},e.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();Z(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var n=!1;63===t&&e.length<6;)e.push(t),t=this.consumeCodePoint(),n=!0;if(n){var i=parseInt(l.apply(void 0,e.map(function(e){return 63===e?48:e})),16),a=parseInt(l.apply(void 0,e.map(function(e){return 63===e?70:e})),16);return{type:p.UNICODE_RANGE_TOKEN,start:i,end:a}}var r=parseInt(l.apply(void 0,e),16);if(45===this.peekCodePoint(0)&&Z(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var o=[];Z(t)&&o.length<6;)o.push(t),t=this.consumeCodePoint();return a=parseInt(l.apply(void 0,o),16),{type:p.UNICODE_RANGE_TOKEN,start:r,end:a}}return{type:p.UNICODE_RANGE_TOKEN,start:r,end:r}},e.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return"url"===e.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:p.FUNCTION_TOKEN,value:e}):{type:p.IDENT_TOKEN,value:e}},e.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),-1===this.peekCodePoint(0))return{type:p.URL_TOKEN,value:""};var t=this.peekCodePoint(0);if(39===t||34===t){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===p.STRING_TOKEN&&(this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:p.URL_TOKEN,value:n.value}):(this.consumeBadUrlRemnants(),ye)}for(;;){var i=this.consumeCodePoint();if(-1===i||41===i)return{type:p.URL_TOKEN,value:l.apply(void 0,e)};if(ee(i))return this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:p.URL_TOKEN,value:l.apply(void 0,e)}):(this.consumeBadUrlRemnants(),ye);if(34===i||39===i||40===i||ie(i))return this.consumeBadUrlRemnants(),ye;if(92===i){if(!ae(i,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),ye;e.push(this.consumeEscapedCodePoint())}else e.push(i)}},e.prototype.consumeWhiteSpace=function(){for(;ee(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(41===e||-1===e)return;ae(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(e){for(var t="";e>0;){var n=Math.min(6e4,e);t+=l.apply(void 0,this._value.splice(0,n)),e-=n}return this._value.shift(),t},e.prototype.consumeStringToken=function(e){for(var t="",n=0;;){var i=this._value[n];if(-1===i||void 0===i||i===e)return t+=this.consumeStringSlice(n),{type:p.STRING_TOKEN,value:t};if(10===i)return this._value.splice(0,n),ve;if(92===i){var a=this._value[n+1];-1!==a&&void 0!==a&&(10===a?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):ae(i,a)&&(t+=this.consumeStringSlice(n),t+=l(this.consumeEscapedCodePoint()),n=-1))}n++}},e.prototype.consumeNumber=function(){var e=[],t=4,n=this.peekCodePoint(0);for(43!==n&&45!==n||e.push(this.consumeCodePoint());Y(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var i=this.peekCodePoint(1);if(46===n&&Y(i))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=8;Y(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),i=this.peekCodePoint(1);var a=this.peekCodePoint(2);if((69===n||101===n)&&((43===i||45===i)&&Y(a)||Y(i)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=8;Y(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[se(e),t]},e.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],i=this.peekCodePoint(0),a=this.peekCodePoint(1),r=this.peekCodePoint(2);if(re(i,a,r)){var o=this.consumeName();return{type:p.DIMENSION_TOKEN,number:t,flags:n,unit:o}}return 37===i?(this.consumeCodePoint(),{type:p.PERCENTAGE_TOKEN,number:t,flags:n}):{type:p.NUMBER_TOKEN,number:t,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Z(e)){for(var t=l(e);Z(this.peekCodePoint(0))&&t.length<6;)t+=l(this.consumeCodePoint());ee(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return 0===n||function(e){return e>=55296&&e<=57343}(n)||n>1114111?65533:n}return-1===e?65533:e},e.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(ne(t))e+=l(t);else{if(!ae(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),e;e+=l(this.consumeEscapedCodePoint())}}},e}(),Be=function(){function e(e){this._tokens=e}return e.create=function(t){var n=new Fe;return n.write(t),new e(n.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===p.WHITESPACE_TOKEN;)e=this.consumeToken();if(e.type===p.EOF_TOKEN)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do{e=this.consumeToken()}while(e.type===p.WHITESPACE_TOKEN);if(e.type===p.EOF_TOKEN)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===p.EOF_TOKEN)return e;e.push(t),e.push()}},e.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case p.LEFT_CURLY_BRACKET_TOKEN:case p.LEFT_SQUARE_BRACKET_TOKEN:case p.LEFT_PARENTHESIS_TOKEN:return this.consumeSimpleBlock(e.type);case p.FUNCTION_TOKEN:return this.consumeFunction(e)}return e},e.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},n=this.consumeToken();;){if(n.type===p.EOF_TOKEN||Re(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:p.FUNCTION};;){var n=this.consumeToken();if(n.type===p.EOF_TOKEN||n.type===p.RIGHT_PARENTHESIS_TOKEN)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var e=this._tokens.shift();return void 0===e?Te:e},e.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},e}(),Me=function(e){return e.type===p.DIMENSION_TOKEN},Pe=function(e){return e.type===p.NUMBER_TOKEN},De=function(e){return e.type===p.IDENT_TOKEN},ke=function(e){return e.type===p.STRING_TOKEN},_e=function(e,t){return De(e)&&e.value===t},Le=function(e){return e.type!==p.WHITESPACE_TOKEN},je=function(e){return e.type!==p.WHITESPACE_TOKEN&&e.type!==p.COMMA_TOKEN},Ne=function(e){var t=[],n=[];return e.forEach(function(e){if(e.type===p.COMMA_TOKEN){if(0===n.length)throw new Error("Error parsing function args, zero tokens for arg");return t.push(n),n=[],void 0}e.type!==p.WHITESPACE_TOKEN&&n.push(e)}),n.length&&t.push(n),t},Re=function(e,t){return t===p.LEFT_CURLY_BRACKET_TOKEN&&e.type===p.RIGHT_CURLY_BRACKET_TOKEN||t===p.LEFT_SQUARE_BRACKET_TOKEN&&e.type===p.RIGHT_SQUARE_BRACKET_TOKEN||t===p.LEFT_PARENTHESIS_TOKEN&&e.type===p.RIGHT_PARENTHESIS_TOKEN},Ue=function(e){return e.type===p.NUMBER_TOKEN||e.type===p.DIMENSION_TOKEN},Ve=function(e){return e.type===p.PERCENTAGE_TOKEN||Ue(e)},Qe=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Ge={type:p.NUMBER_TOKEN,number:0,flags:4},He={type:p.PERCENTAGE_TOKEN,number:50,flags:4},Ke={type:p.PERCENTAGE_TOKEN,number:100,flags:4},qe=function(e,t,n){var i=e[0],a=e[1];return[ze(i,t),ze(void 0!==a?a:i,n)]},ze=function(e,t){if(e.type===p.PERCENTAGE_TOKEN)return e.number/100*t;if(Me(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},We=function(e){if(e.type===p.DIMENSION_TOKEN)switch(e.unit){case"deg":return Math.PI*e.number/180;case"grad":return Math.PI/200*e.number;case"rad":return e.number;case"turn":return 2*Math.PI*e.number}throw new Error("Unsupported angle type")},Xe=function(e){return e.type===p.DIMENSION_TOKEN&&("deg"===e.unit||"grad"===e.unit||"rad"===e.unit||"turn"===e.unit)},$e=function(e){switch(e.filter(De).map(function(e){return e.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Ge,Ge];case"to top":case"bottom":return Je(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Ge,Ke];case"to right":case"left":return Je(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Ke,Ke];case"to bottom":case"top":return Je(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Ke,Ge];case"to left":case"right":return Je(270)}return 0},Je=function(e){return Math.PI*e/180},Ye=function(e){if(e.type===p.FUNCTION){var t=lt[e.name];if(void 0===t)throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(e.values)}if(e.type===p.HASH_TOKEN){if(3===e.value.length){var n=e.value.substring(0,1),i=e.value.substring(1,2),a=e.value.substring(2,3);return tt(parseInt(n+n,16),parseInt(i+i,16),parseInt(a+a,16),1)}if(4===e.value.length){n=e.value.substring(0,1),i=e.value.substring(1,2),a=e.value.substring(2,3);var r=e.value.substring(3,4);return tt(parseInt(n+n,16),parseInt(i+i,16),parseInt(a+a,16),parseInt(r+r,16)/255)}if(6===e.value.length)return n=e.value.substring(0,2),i=e.value.substring(2,4),a=e.value.substring(4,6),tt(parseInt(n,16),parseInt(i,16),parseInt(a,16),1);if(8===e.value.length)return n=e.value.substring(0,2),i=e.value.substring(2,4),a=e.value.substring(4,6),r=e.value.substring(6,8),tt(parseInt(n,16),parseInt(i,16),parseInt(a,16),parseInt(r,16)/255)}if(e.type===p.IDENT_TOKEN){var o=ct[e.value.toUpperCase()];if(void 0!==o)return o}return ct.TRANSPARENT},Ze=function(e){return 0==(255&e)},et=function(e){var t=255&e,n=255&e>>8,i=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+i+","+n+","+t/255+")":"rgb("+a+","+i+","+n+")"},tt=function(e,t,n,i){return(e<<24|t<<16|n<<8|Math.round(255*i)<<0)>>>0},nt=function(e,t){if(e.type===p.NUMBER_TOKEN)return e.number;if(e.type===p.PERCENTAGE_TOKEN){var n=3===t?1:255;return 3===t?e.number/100*n:Math.round(e.number/100*n)}return 0},it=function(e){var t=e.filter(je);if(3===t.length){var n=t.map(nt),i=n[0],a=n[1],r=n[2];return tt(i,a,r,1)}if(4===t.length){var o=t.map(nt),s=(i=o[0],a=o[1],r=o[2],o[3]);return tt(i,a,r,s)}return 0};function at(e,t,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(t-e)*n*6+e:n<.5?t:n<2/3?6*(t-e)*(2/3-n)+e:e}var rt,ot,st=function(e){var t=e.filter(je),n=t[0],i=t[1],a=t[2],r=t[3],o=(n.type===p.NUMBER_TOKEN?Je(n.number):We(n))/(2*Math.PI),s=Ve(i)?i.number/100:0,l=Ve(a)?a.number/100:0,c=void 0!==r&&Ve(r)?ze(r,1):1;if(0===s)return tt(255*l,255*l,255*l,1);var d=l<=.5?l*(s+1):l+s-l*s,u=2*l-d,m=at(u,d,o+1/3),f=at(u,d,o),h=at(u,d,o-1/3);return tt(255*m,255*f,255*h,c)},lt={hsl:st,hsla:st,rgb:it,rgba:it},ct={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199};(function(e){e[e.VALUE=0]="VALUE",e[e.LIST=1]="LIST",e[e.IDENT_VALUE=2]="IDENT_VALUE",e[e.TYPE_VALUE=3]="TYPE_VALUE",e[e.TOKEN_VALUE=4]="TOKEN_VALUE"})(rt||(rt={})),function(e){e[e.BORDER_BOX=0]="BORDER_BOX",e[e.PADDING_BOX=1]="PADDING_BOX",e[e.CONTENT_BOX=2]="CONTENT_BOX"}(ot||(ot={}));var dt,ut,pt,mt={name:"background-clip",initialValue:"border-box",prefix:!1,type:rt.LIST,parse:function(e){return e.map(function(e){if(De(e))switch(e.value){case"padding-box":return ot.PADDING_BOX;case"content-box":return ot.CONTENT_BOX}return ot.BORDER_BOX})}},ft={name:"background-color",initialValue:"transparent",prefix:!1,type:rt.TYPE_VALUE,format:"color"},ht=function(e){var t=Ye(e[0]),n=e[1];return n&&Ve(n)?{color:t,stop:n}:{color:t,stop:null}},gt=function(e,t){var n=e[0],i=e[e.length-1];null===n.stop&&(n.stop=Ge),null===i.stop&&(i.stop=Ke);for(var a=[],r=0,o=0;o<e.length;o++){var s=e[o].stop;if(null!==s){var l=ze(s,t);l>r?a.push(l):a.push(r),r=l}else a.push(null)}var c=null;for(o=0;o<a.length;o++){var d=a[o];if(null===d)null===c&&(c=o);else if(null!==c){for(var u=o-c,p=(d-a[c-1])/(u+1),m=1;m<=u;m++)a[c+m-1]=p*m;c=null}}return e.map(function(e,n){return{color:e.color,stop:Math.max(Math.min(1,a[n]/t),0)}})},At=function(e,t,n){var i="number"==typeof e?e:function(e,t,n){var i=t/2,a=n/2,r=ze(e[0],t)-i,o=a-ze(e[1],n);return(Math.atan2(o,r)+2*Math.PI)%(2*Math.PI)}(e,t,n),a=Math.abs(t*Math.sin(i))+Math.abs(n*Math.cos(i)),r=t/2,o=n/2,s=a/2,l=Math.sin(i-Math.PI/2)*s,c=Math.cos(i-Math.PI/2)*s;return[a,r-c,r+c,o-l,o+l]},bt=function(e,t){return Math.sqrt(e*e+t*t)},yt=function(e,t,n,i,a){return[[0,0],[0,t],[e,0],[e,t]].reduce(function(e,t){var r=t[0],o=t[1],s=bt(n-r,i-o);return(a?s<e.optimumDistance:s>e.optimumDistance)?{optimumCorner:t,optimumDistance:s}:e},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},vt=function(e){var t=Je(180),n=[];return Ne(e).forEach(function(e,i){if(0===i){var a=e[0];if(a.type===p.IDENT_TOKEN&&-1!==["top","left","right","bottom"].indexOf(a.value))return t=$e(e),void 0;if(Xe(a))return t=(We(a)+Je(270))%Je(360),void 0}var r=ht(e);n.push(r)}),{angle:t,stops:n,type:dt.LINEAR_GRADIENT}},Ct=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},xt=function(e,t,n,i,a){var r="http://www.w3.org/2000/svg",o=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return o.setAttributeNS(null,"width",e.toString()),o.setAttributeNS(null,"height",t.toString()),s.setAttributeNS(null,"width","100%"),s.setAttributeNS(null,"height","100%"),s.setAttributeNS(null,"x",n.toString()),s.setAttributeNS(null,"y",i.toString()),s.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(s),s.appendChild(a),o},wt=function(e){return new Promise(function(t,n){var i=new Image;i.onload=function(){return t(i)},i.onerror=n,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))})},St={get SUPPORT_RANGE_BOUNDS(){var e=function(e){if(e.createRange){var t=e.createRange();if(t.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height="123px",n.style.display="block",e.body.appendChild(n),t.selectNode(n);var i=t.getBoundingClientRect(),a=Math.round(i.height);if(e.body.removeChild(n),123===a)return!0}}return!1}(document);return Object.defineProperty(St,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=function(e){var t=new Image,n=e.createElement("canvas"),i=n.getContext("2d");if(!i)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{i.drawImage(t,0,0),n.toDataURL()}catch(a){return!1}return!0}(document);return Object.defineProperty(St,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"==typeof Array.from&&"function"==typeof window.fetch?function(e){var t=e.createElement("canvas");t.width=100,t.height=100;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,100,100);var i=new Image,a=t.toDataURL();i.src=a;var r=xt(100,100,0,0,i);return n.fillStyle="red",n.fillRect(0,0,100,100),wt(r).then(function(t){n.drawImage(t,0,0);var i=n.getImageData(0,0,100,100).data;n.fillStyle="red",n.fillRect(0,0,100,100);var r=e.createElement("div");return r.style.backgroundImage="url("+a+")",r.style.height="100px",Ct(i)?wt(xt(100,100,0,0,r)):Promise.reject(!1)}).then(function(e){return n.drawImage(e,0,0),Ct(n.getImageData(0,0,100,100).data)}).catch(function(){return!1})}(document):Promise.resolve(!1);return Object.defineProperty(St,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=void 0!==(new Image).crossOrigin;return Object.defineProperty(St,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(St,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(St,"SUPPORT_CORS_XHR",{value:e}),e}},Et=function(){function e(e){var t=e.id,n=e.enabled;this.id=t,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,[this.id,this.getTime()+"ms"].concat(e)):this.info.apply(this,e))},e.prototype.getTime=function(){return Date.now()-this.start},e.create=function(t){e.instances[t.id]=new e(t)},e.destroy=function(t){delete e.instances[t]},e.getInstance=function(t){var n=e.instances[t];if(void 0===n)throw new Error("No logger instance found with id "+t);return n},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,[this.id,this.getTime()+"ms"].concat(e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,[this.id,this.getTime()+"ms"].concat(e)):this.info.apply(this,e))},e.instances={},e}(),It=function(){function e(){}return e.create=function(t,n){return e._caches[t]=new Ot(t,n)},e.destroy=function(t){delete e._caches[t]},e.open=function(t){var n=e._caches[t];if(void 0!==n)return n;throw new Error('Cache with key "'+t+'" not found')},e.getOrigin=function(t){var n=e._link;return n?(n.href=t,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e.getInstance=function(){var t=e._current;if(null===t)throw new Error("No cache instance attached");return t},e.attachInstance=function(t){e._current=t},e.detachInstance=function(){e._current=null},e._caches={},e._origin="about:blank",e._current=null,e}(),Ot=function(){function e(e,t){this.id=e,this._options=t,this._cache={}}return e.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)?t:kt(e)||Mt(e)?(this._cache[e]=this.loadImage(e),t):t},e.prototype.match=function(e){return this._cache[e]},e.prototype.loadImage=function(e){return i(this,void 0,void 0,function(){var t,n,i,r,o=this;return a(this,function(a){switch(a.label){case 0:return t=It.isSameOrigin(e),n=!Pt(e)&&!0===this._options.useCORS&&St.SUPPORT_CORS_IMAGES&&!t,i=!Pt(e)&&!t&&"string"==typeof this._options.proxy&&St.SUPPORT_CORS_XHR&&!n,t||!1!==this._options.allowTaint||Pt(e)||i||n?(r=e,i?[4,this.proxy(r)]:[3,2]):[2];case 1:r=a.sent(),a.label=2;case 2:return Et.getInstance(this.id).debug("Added image "+e.substring(0,256)),[4,new Promise(function(e,t){var i=new Image;i.onload=function(){return e(i)},i.onerror=t,(Dt(r)||n)&&(i.crossOrigin="anonymous"),i.src=r,!0===i.complete&&setTimeout(function(){return e(i)},500),o._options.imageTimeout>0&&setTimeout(function(){return t("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},e.prototype.has=function(e){return void 0!==this._cache[e]},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(e){var t=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var i=e.substring(0,256);return new Promise(function(a,r){var o=St.SUPPORT_RESPONSE_TYPE?"blob":"text",s=new XMLHttpRequest;if(s.onload=function(){if(200===s.status)if("text"===o)a(s.response);else{var e=new FileReader;e.addEventListener("load",function(){return a(e.result)},!1),e.addEventListener("error",function(e){return r(e)},!1),e.readAsDataURL(s.response)}else r("Failed to proxy resource "+i+" with status code "+s.status)},s.onerror=r,s.open("GET",n+"?url="+encodeURIComponent(e)+"&responseType="+o),"text"!==o&&s instanceof XMLHttpRequest&&(s.responseType=o),t._options.imageTimeout){var l=t._options.imageTimeout;s.timeout=l,s.ontimeout=function(){return r("Timed out ("+l+"ms) proxying "+i)}}s.send()})},e}(),Tt=/^data:image\/svg\+xml/i,Ft=/^data:image\/.*;base64,/i,Bt=/^data:image\/.*/i,Mt=function(e){return St.SUPPORT_SVG_DRAWING||!_t(e)},Pt=function(e){return Bt.test(e)},Dt=function(e){return Ft.test(e)},kt=function(e){return"blob"===e.substr(0,4)},_t=function(e){return"svg"===e.substr(-3).toLowerCase()||Tt.test(e)},Lt=function(e){var t=ut.CIRCLE,n=pt.FARTHEST_CORNER,i=[],a=[];return Ne(e).forEach(function(e,r){var o=!0;if(0===r?o=e.reduce(function(e,t){if(De(t))switch(t.value){case"center":return a.push(He),!1;case"top":case"left":return a.push(Ge),!1;case"right":case"bottom":return a.push(Ke),!1}else if(Ve(t)||Ue(t))return a.push(t),!1;return e},o):1===r&&(o=e.reduce(function(e,i){if(De(i))switch(i.value){case"circle":return t=ut.CIRCLE,!1;case"ellipse":return t=ut.ELLIPSE,!1;case"contain":case"closest-side":return n=pt.CLOSEST_SIDE,!1;case"farthest-side":return n=pt.FARTHEST_SIDE,!1;case"closest-corner":return n=pt.CLOSEST_CORNER,!1;case"cover":case"farthest-corner":return n=pt.FARTHEST_CORNER,!1}else if(Ue(i)||Ve(i))return Array.isArray(n)||(n=[]),n.push(i),!1;return e},o)),o){var s=ht(e);i.push(s)}}),{size:n,shape:t,stops:i,position:a,type:dt.RADIAL_GRADIENT}};!function(e){e[e.URL=0]="URL",e[e.LINEAR_GRADIENT=1]="LINEAR_GRADIENT",e[e.RADIAL_GRADIENT=2]="RADIAL_GRADIENT"}(dt||(dt={})),function(e){e[e.CIRCLE=0]="CIRCLE",e[e.ELLIPSE=1]="ELLIPSE"}(ut||(ut={})),function(e){e[e.CLOSEST_SIDE=0]="CLOSEST_SIDE",e[e.FARTHEST_SIDE=1]="FARTHEST_SIDE",e[e.CLOSEST_CORNER=2]="CLOSEST_CORNER",e[e.FARTHEST_CORNER=3]="FARTHEST_CORNER"}(pt||(pt={}));var jt,Nt=function(e){if(e.type===p.URL_TOKEN){var t={url:e.value,type:dt.URL};return It.getInstance().addImage(e.value),t}if(e.type===p.FUNCTION){var n=Rt[e.name];if(void 0===n)throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(e.values)}throw new Error("Unsupported image type")},Rt={"linear-gradient":function(e){var t=Je(180),n=[];return Ne(e).forEach(function(e,i){if(0===i){var a=e[0];if(a.type===p.IDENT_TOKEN&&"to"===a.value)return t=$e(e),void 0;if(Xe(a))return t=We(a),void 0}var r=ht(e);n.push(r)}),{angle:t,stops:n,type:dt.LINEAR_GRADIENT}},"-moz-linear-gradient":vt,"-ms-linear-gradient":vt,"-o-linear-gradient":vt,"-webkit-linear-gradient":vt,"radial-gradient":function(e){var t=ut.CIRCLE,n=pt.FARTHEST_CORNER,i=[],a=[];return Ne(e).forEach(function(e,r){var o=!0;if(0===r){var s=!1;o=e.reduce(function(e,i){if(s)if(De(i))switch(i.value){case"center":return a.push(He),e;case"top":case"left":return a.push(Ge),e;case"right":case"bottom":return a.push(Ke),e}else(Ve(i)||Ue(i))&&a.push(i);else if(De(i))switch(i.value){case"circle":return t=ut.CIRCLE,!1;case"ellipse":return t=ut.ELLIPSE,!1;case"at":return s=!0,!1;case"closest-side":return n=pt.CLOSEST_SIDE,!1;case"cover":case"farthest-side":return n=pt.FARTHEST_SIDE,!1;case"contain":case"closest-corner":return n=pt.CLOSEST_CORNER,!1;case"farthest-corner":return n=pt.FARTHEST_CORNER,!1}else if(Ue(i)||Ve(i))return Array.isArray(n)||(n=[]),n.push(i),!1;return e},o)}if(o){var l=ht(e);i.push(l)}}),{size:n,shape:t,stops:i,position:a,type:dt.RADIAL_GRADIENT}},"-moz-radial-gradient":Lt,"-ms-radial-gradient":Lt,"-o-radial-gradient":Lt,"-webkit-radial-gradient":Lt,"-webkit-gradient":function(e){var t=Je(180),n=[],i=dt.LINEAR_GRADIENT,a=ut.CIRCLE,r=pt.FARTHEST_CORNER;return Ne(e).forEach(function(e,t){var a=e[0];if(0===t){if(De(a)&&"linear"===a.value)return i=dt.LINEAR_GRADIENT,void 0;if(De(a)&&"radial"===a.value)return i=dt.RADIAL_GRADIENT,void 0}if(a.type===p.FUNCTION)if("from"===a.name){var r=Ye(a.values[0]);n.push({stop:Ge,color:r})}else if("to"===a.name)r=Ye(a.values[0]),n.push({stop:Ke,color:r});else if("color-stop"===a.name){var o=a.values.filter(je);if(2===o.length){r=Ye(o[1]);var s=o[0];Pe(s)&&n.push({stop:{type:p.PERCENTAGE_TOKEN,number:100*s.number,flags:s.flags},color:r})}}}),i===dt.LINEAR_GRADIENT?{angle:(t+Je(180))%Je(360),stops:n,type:i}:{size:r,shape:a,stops:n,position:[],type:i}}},Ut={name:"background-image",initialValue:"none",type:rt.LIST,prefix:!1,parse:function(e){if(0===e.length)return[];var t=e[0];return t.type===p.IDENT_TOKEN&&"none"===t.value?[]:e.filter(function(e){return je(e)&&function(e){return e.type!==p.FUNCTION||Rt[e.name]}(e)}).map(Nt)}},Vt={name:"background-origin",initialValue:"border-box",prefix:!1,type:rt.LIST,parse:function(e){return e.map(function(e){if(De(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Qt={name:"background-position",initialValue:"0% 0%",type:rt.LIST,prefix:!1,parse:function(e){return Ne(e).map(function(e){return e.filter(Ve)}).map(Qe)}};!function(e){e[e.REPEAT=0]="REPEAT",e[e.NO_REPEAT=1]="NO_REPEAT",e[e.REPEAT_X=2]="REPEAT_X",e[e.REPEAT_Y=3]="REPEAT_Y"}(jt||(jt={}));var Gt,Ht={name:"background-repeat",initialValue:"repeat",prefix:!1,type:rt.LIST,parse:function(e){return Ne(e).map(function(e){return e.filter(De).map(function(e){return e.value}).join(" ")}).map(Kt)}},Kt=function(e){switch(e){case"no-repeat":return jt.NO_REPEAT;case"repeat-x":case"repeat no-repeat":return jt.REPEAT_X;case"repeat-y":case"no-repeat repeat":return jt.REPEAT_Y;case"repeat":default:return jt.REPEAT}};!function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"}(Gt||(Gt={}));var qt,zt={name:"background-size",initialValue:"0",prefix:!1,type:rt.LIST,parse:function(e){return Ne(e).map(function(e){return e.filter(Wt)})}},Wt=function(e){return De(e)||Ve(e)},Xt=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:rt.TYPE_VALUE,format:"color"}},$t=Xt("top"),Jt=Xt("right"),Yt=Xt("bottom"),Zt=Xt("left"),en=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:rt.LIST,parse:function(e){return Qe(e.filter(Ve))}}},tn=en("top-left"),nn=en("top-right"),an=en("bottom-right"),rn=en("bottom-left");!function(e){e[e.NONE=0]="NONE",e[e.SOLID=1]="SOLID"}(qt||(qt={}));var on,sn=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:rt.IDENT_VALUE,parse:function(e){switch(e){case"none":return qt.NONE}return qt.SOLID}}},ln=sn("top"),cn=sn("right"),dn=sn("bottom"),un=sn("left"),pn=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:rt.VALUE,prefix:!1,parse:function(e){return Me(e)?e.number:0}}},mn=pn("top"),fn=pn("right"),hn=pn("bottom"),gn=pn("left"),An={name:"color",initialValue:"transparent",prefix:!1,type:rt.TYPE_VALUE,format:"color"},bn={name:"display",initialValue:"inline-block",prefix:!1,type:rt.LIST,parse:function(e){return e.filter(De).reduce(function(e,t){return e|yn(t.value)},0)}},yn=function(e){switch(e){case"block":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0};!function(e){e[e.NONE=0]="NONE",e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT",e[e.INLINE_START=3]="INLINE_START",e[e.INLINE_END=4]="INLINE_END"}(on||(on={}));var vn,Cn={name:"float",initialValue:"none",prefix:!1,type:rt.IDENT_VALUE,parse:function(e){switch(e){case"left":return on.LEFT;case"right":return on.RIGHT;case"inline-start":return on.INLINE_START;case"inline-end":return on.INLINE_END}return on.NONE}},xn={name:"letter-spacing",initialValue:"0",prefix:!1,type:rt.VALUE,parse:function(e){return e.type===p.IDENT_TOKEN&&"normal"===e.value?0:e.type===p.NUMBER_TOKEN||e.type===p.DIMENSION_TOKEN?e.number:0}};!function(e){e.NORMAL="normal",e.STRICT="strict"}(vn||(vn={}));var wn,Sn={name:"line-break",initialValue:"normal",prefix:!1,type:rt.IDENT_VALUE,parse:function(e){switch(e){case"strict":return vn.STRICT;case"normal":default:return vn.NORMAL}}},En={name:"line-height",initialValue:"normal",prefix:!1,type:rt.TOKEN_VALUE},In={name:"list-style-image",initialValue:"none",type:rt.VALUE,prefix:!1,parse:function(e){return e.type===p.IDENT_TOKEN&&"none"===e.value?null:Nt(e)}};!function(e){e[e.INSIDE=0]="INSIDE",e[e.OUTSIDE=1]="OUTSIDE"}(wn||(wn={}));var On,Tn={name:"list-style-position",initialValue:"outside",prefix:!1,type:rt.IDENT_VALUE,parse:function(e){switch(e){case"inside":return wn.INSIDE;case"outside":default:return wn.OUTSIDE}}};!function(e){e[e.NONE=-1]="NONE",e[e.DISC=0]="DISC",e[e.CIRCLE=1]="CIRCLE",e[e.SQUARE=2]="SQUARE",e[e.DECIMAL=3]="DECIMAL",e[e.CJK_DECIMAL=4]="CJK_DECIMAL",e[e.DECIMAL_LEADING_ZERO=5]="DECIMAL_LEADING_ZERO",e[e.LOWER_ROMAN=6]="LOWER_ROMAN",e[e.UPPER_ROMAN=7]="UPPER_ROMAN",e[e.LOWER_GREEK=8]="LOWER_GREEK",e[e.LOWER_ALPHA=9]="LOWER_ALPHA",e[e.UPPER_ALPHA=10]="UPPER_ALPHA",e[e.ARABIC_INDIC=11]="ARABIC_INDIC",e[e.ARMENIAN=12]="ARMENIAN",e[e.BENGALI=13]="BENGALI",e[e.CAMBODIAN=14]="CAMBODIAN",e[e.CJK_EARTHLY_BRANCH=15]="CJK_EARTHLY_BRANCH",e[e.CJK_HEAVENLY_STEM=16]="CJK_HEAVENLY_STEM",e[e.CJK_IDEOGRAPHIC=17]="CJK_IDEOGRAPHIC",e[e.DEVANAGARI=18]="DEVANAGARI",e[e.ETHIOPIC_NUMERIC=19]="ETHIOPIC_NUMERIC",e[e.GEORGIAN=20]="GEORGIAN",e[e.GUJARATI=21]="GUJARATI",e[e.GURMUKHI=22]="GURMUKHI",e[e.HEBREW=22]="HEBREW",e[e.HIRAGANA=23]="HIRAGANA",e[e.HIRAGANA_IROHA=24]="HIRAGANA_IROHA",e[e.JAPANESE_FORMAL=25]="JAPANESE_FORMAL",e[e.JAPANESE_INFORMAL=26]="JAPANESE_INFORMAL",e[e.KANNADA=27]="KANNADA",e[e.KATAKANA=28]="KATAKANA",e[e.KATAKANA_IROHA=29]="KATAKANA_IROHA",e[e.KHMER=30]="KHMER",e[e.KOREAN_HANGUL_FORMAL=31]="KOREAN_HANGUL_FORMAL",e[e.KOREAN_HANJA_FORMAL=32]="KOREAN_HANJA_FORMAL",e[e.KOREAN_HANJA_INFORMAL=33]="KOREAN_HANJA_INFORMAL",e[e.LAO=34]="LAO",e[e.LOWER_ARMENIAN=35]="LOWER_ARMENIAN",e[e.MALAYALAM=36]="MALAYALAM",e[e.MONGOLIAN=37]="MONGOLIAN",e[e.MYANMAR=38]="MYANMAR",e[e.ORIYA=39]="ORIYA",e[e.PERSIAN=40]="PERSIAN",e[e.SIMP_CHINESE_FORMAL=41]="SIMP_CHINESE_FORMAL",e[e.SIMP_CHINESE_INFORMAL=42]="SIMP_CHINESE_INFORMAL",e[e.TAMIL=43]="TAMIL",e[e.TELUGU=44]="TELUGU",e[e.THAI=45]="THAI",e[e.TIBETAN=46]="TIBETAN",e[e.TRAD_CHINESE_FORMAL=47]="TRAD_CHINESE_FORMAL",e[e.TRAD_CHINESE_INFORMAL=48]="TRAD_CHINESE_INFORMAL",e[e.UPPER_ARMENIAN=49]="UPPER_ARMENIAN",e[e.DISCLOSURE_OPEN=50]="DISCLOSURE_OPEN",e[e.DISCLOSURE_CLOSED=51]="DISCLOSURE_CLOSED"}(On||(On={}));var Fn,Bn={name:"list-style-type",initialValue:"none",prefix:!1,type:rt.IDENT_VALUE,parse:function(e){switch(e){case"disc":return On.DISC;case"circle":return On.CIRCLE;case"square":return On.SQUARE;case"decimal":return On.DECIMAL;case"cjk-decimal":return On.CJK_DECIMAL;case"decimal-leading-zero":return On.DECIMAL_LEADING_ZERO;case"lower-roman":return On.LOWER_ROMAN;case"upper-roman":return On.UPPER_ROMAN;case"lower-greek":return On.LOWER_GREEK;case"lower-alpha":return On.LOWER_ALPHA;case"upper-alpha":return On.UPPER_ALPHA;case"arabic-indic":return On.ARABIC_INDIC;case"armenian":return On.ARMENIAN;case"bengali":return On.BENGALI;case"cambodian":return On.CAMBODIAN;case"cjk-earthly-branch":return On.CJK_EARTHLY_BRANCH;case"cjk-heavenly-stem":return On.CJK_HEAVENLY_STEM;case"cjk-ideographic":return On.CJK_IDEOGRAPHIC;case"devanagari":return On.DEVANAGARI;case"ethiopic-numeric":return On.ETHIOPIC_NUMERIC;case"georgian":return On.GEORGIAN;case"gujarati":return On.GUJARATI;case"gurmukhi":return On.GURMUKHI;case"hebrew":return On.HEBREW;case"hiragana":return On.HIRAGANA;case"hiragana-iroha":return On.HIRAGANA_IROHA;case"japanese-formal":return On.JAPANESE_FORMAL;case"japanese-informal":return On.JAPANESE_INFORMAL;case"kannada":return On.KANNADA;case"katakana":return On.KATAKANA;case"katakana-iroha":return On.KATAKANA_IROHA;case"khmer":return On.KHMER;case"korean-hangul-formal":return On.KOREAN_HANGUL_FORMAL;case"korean-hanja-formal":return On.KOREAN_HANJA_FORMAL;case"korean-hanja-informal":return On.KOREAN_HANJA_INFORMAL;case"lao":return On.LAO;case"lower-armenian":return On.LOWER_ARMENIAN;case"malayalam":return On.MALAYALAM;case"mongolian":return On.MONGOLIAN;case"myanmar":return On.MYANMAR;case"oriya":return On.ORIYA;case"persian":return On.PERSIAN;case"simp-chinese-formal":return On.SIMP_CHINESE_FORMAL;case"simp-chinese-informal":return On.SIMP_CHINESE_INFORMAL;case"tamil":return On.TAMIL;case"telugu":return On.TELUGU;case"thai":return On.THAI;case"tibetan":return On.TIBETAN;case"trad-chinese-formal":return On.TRAD_CHINESE_FORMAL;case"trad-chinese-informal":return On.TRAD_CHINESE_INFORMAL;case"upper-armenian":return On.UPPER_ARMENIAN;case"disclosure-open":return On.DISCLOSURE_OPEN;case"disclosure-closed":return On.DISCLOSURE_CLOSED;case"none":default:return On.NONE}}},Mn=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:rt.TOKEN_VALUE}},Pn=Mn("top"),Dn=Mn("right"),kn=Mn("bottom"),_n=Mn("left");!function(e){e[e.VISIBLE=0]="VISIBLE",e[e.HIDDEN=1]="HIDDEN",e[e.SCROLL=2]="SCROLL",e[e.AUTO=3]="AUTO"}(Fn||(Fn={}));var Ln,jn={name:"overflow",initialValue:"visible",prefix:!1,type:rt.LIST,parse:function(e){return e.filter(De).map(function(e){switch(e.value){case"hidden":return Fn.HIDDEN;case"scroll":return Fn.SCROLL;case"auto":return Fn.AUTO;case"visible":default:return Fn.VISIBLE}})}};!function(e){e.NORMAL="normal",e.BREAK_WORD="break-word"}(Ln||(Ln={}));var Nn,Rn={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:rt.IDENT_VALUE,parse:function(e){switch(e){case"break-word":return Ln.BREAK_WORD;case"normal":default:return Ln.NORMAL}}},Un=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:rt.TYPE_VALUE,format:"length-percentage"}},Vn=Un("top"),Qn=Un("right"),Gn=Un("bottom"),Hn=Un("left");!function(e){e[e.LEFT=0]="LEFT",e[e.CENTER=1]="CENTER",e[e.RIGHT=2]="RIGHT"}(Nn||(Nn={}));var Kn,qn={name:"text-align",initialValue:"left",prefix:!1,type:rt.IDENT_VALUE,parse:function(e){switch(e){case"right":return Nn.RIGHT;case"center":case"justify":return Nn.CENTER;case"left":default:return Nn.LEFT}}};!function(e){e[e.STATIC=0]="STATIC",e[e.RELATIVE=1]="RELATIVE",e[e.ABSOLUTE=2]="ABSOLUTE",e[e.FIXED=3]="FIXED",e[e.STICKY=4]="STICKY"}(Kn||(Kn={}));var zn,Wn={name:"position",initialValue:"static",prefix:!1,type:rt.IDENT_VALUE,parse:function(e){switch(e){case"relative":return Kn.RELATIVE;case"absolute":return Kn.ABSOLUTE;case"fixed":return Kn.FIXED;case"sticky":return Kn.STICKY}return Kn.STATIC}},Xn={name:"text-shadow",initialValue:"none",type:rt.LIST,prefix:!1,parse:function(e){return 1===e.length&&_e(e[0],"none")?[]:Ne(e).map(function(e){for(var t={color:ct.TRANSPARENT,offsetX:Ge,offsetY:Ge,blur:Ge},n=0,i=0;i<e.length;i++){var a=e[i];Ue(a)?(0===n?t.offsetX=a:1===n?t.offsetY=a:t.blur=a,n++):t.color=Ye(a)}return t})}};!function(e){e[e.NONE=0]="NONE",e[e.LOWERCASE=1]="LOWERCASE",e[e.UPPERCASE=2]="UPPERCASE",e[e.CAPITALIZE=3]="CAPITALIZE"}(zn||(zn={}));var $n,Jn={name:"text-transform",initialValue:"none",prefix:!1,type:rt.IDENT_VALUE,parse:function(e){switch(e){case"uppercase":return zn.UPPERCASE;case"lowercase":return zn.LOWERCASE;case"capitalize":return zn.CAPITALIZE}return zn.NONE}},Yn={name:"transform",initialValue:"none",prefix:!0,type:rt.VALUE,parse:function(e){if(e.type===p.IDENT_TOKEN&&"none"===e.value)return null;if(e.type===p.FUNCTION){var t=Zn[e.name];if(void 0===t)throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}return null}},Zn={matrix:function(e){var t=e.filter(function(e){return e.type===p.NUMBER_TOKEN}).map(function(e){return e.number});return 6===t.length?t:null},matrix3d:function(e){var t=e.filter(function(e){return e.type===p.NUMBER_TOKEN}).map(function(e){return e.number}),n=t[0],i=t[1],a=(t[2],t[3],t[4]),r=t[5],o=(t[6],t[7],t[8],t[9],t[10],t[11],t[12]),s=t[13];return t[14],t[15],16===t.length?[n,i,a,r,o,s]:null}},ei={type:p.PERCENTAGE_TOKEN,number:50,flags:4},ti=[ei,ei],ni={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:rt.LIST,parse:function(e){var t=e.filter(Ve);return 2!==t.length?ti:[t[0],t[1]]}};!function(e){e[e.VISIBLE=0]="VISIBLE",e[e.HIDDEN=1]="HIDDEN",e[e.COLLAPSE=2]="COLLAPSE"}($n||($n={}));var ii,ai={name:"visible",initialValue:"none",prefix:!1,type:rt.IDENT_VALUE,parse:function(e){switch(e){case"hidden":return $n.HIDDEN;case"collapse":return $n.COLLAPSE;case"visible":default:return $n.VISIBLE}}};!function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"}(ii||(ii={}));var ri,oi={name:"word-break",initialValue:"normal",prefix:!1,type:rt.IDENT_VALUE,parse:function(e){switch(e){case"break-all":return ii.BREAK_ALL;case"keep-all":return ii.KEEP_ALL;case"normal":default:return ii.NORMAL}}},si={name:"z-index",initialValue:"auto",prefix:!1,type:rt.VALUE,parse:function(e){if(e.type===p.IDENT_TOKEN)return{auto:!0,order:0};if(Pe(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},li={name:"opacity",initialValue:"1",type:rt.VALUE,prefix:!1,parse:function(e){return Pe(e)?e.number:1}},ci={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:rt.TYPE_VALUE,format:"color"},di={name:"text-decoration-line",initialValue:"none",prefix:!1,type:rt.LIST,parse:function(e){return e.filter(De).map(function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(e){return 0!==e})}},ui={name:"font-family",initialValue:"",prefix:!1,type:rt.LIST,parse:function(e){var t=[],n=[];return e.forEach(function(e){switch(e.type){case p.IDENT_TOKEN:case p.STRING_TOKEN:t.push(e.value);break;case p.NUMBER_TOKEN:t.push(e.number.toString());break;case p.COMMA_TOKEN:n.push(t.join(" ")),t.length=0}}),t.length&&n.push(t.join(" ")),n.map(function(e){return-1===e.indexOf(" ")?e:"'"+e+"'"})}},pi={name:"font-size",initialValue:"0",prefix:!1,type:rt.TYPE_VALUE,format:"length"},mi={name:"font-weight",initialValue:"normal",type:rt.VALUE,prefix:!1,parse:function(e){if(Pe(e))return e.number;if(De(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},fi={name:"font-variant",initialValue:"none",type:rt.LIST,prefix:!1,parse:function(e){return e.filter(De).map(function(e){return e.value})}};!function(e){e.NORMAL="normal",e.ITALIC="italic",e.OBLIQUE="oblique"}(ri||(ri={}));var hi,gi={name:"font-style",initialValue:"normal",prefix:!1,type:rt.IDENT_VALUE,parse:function(e){switch(e){case"oblique":return ri.OBLIQUE;case"italic":return ri.ITALIC;case"normal":default:return ri.NORMAL}}},Ai=function(e,t){return 0!=(e&t)},bi={name:"content",initialValue:"none",type:rt.LIST,prefix:!1,parse:function(e){if(0===e.length)return[];var t=e[0];return t.type===p.IDENT_TOKEN&&"none"===t.value?[]:e}},yi={name:"counter-increment",initialValue:"none",prefix:!0,type:rt.LIST,parse:function(e){if(0===e.length)return null;var t=e[0];if(t.type===p.IDENT_TOKEN&&"none"===t.value)return null;for(var n=[],i=e.filter(Le),a=0;a<i.length;a++){var r=i[a],o=i[a+1];if(r.type===p.IDENT_TOKEN){var s=o&&Pe(o)?o.number:1;n.push({counter:r.value,increment:s})}}return n}},vi={name:"counter-reset",initialValue:"none",prefix:!0,type:rt.LIST,parse:function(e){if(0===e.length)return[];for(var t=[],n=e.filter(Le),i=0;i<n.length;i++){var a=n[i],r=n[i+1];if(De(a)&&"none"!==a.value){var o=r&&Pe(r)?r.number:0;t.push({counter:a.value,reset:o})}}return t}},Ci={name:"quotes",initialValue:"none",prefix:!0,type:rt.LIST,parse:function(e){if(0===e.length)return null;var t=e[0];if(t.type===p.IDENT_TOKEN&&"none"===t.value)return null;var n=[],i=e.filter(ke);if(i.length%2!=0)return null;for(var a=0;a<i.length;a+=2){var r=i[a].value,o=i[a+1].value;n.push({open:r,close:o})}return n}},xi=function(e,t,n){if(!e)return"";var i=e[Math.min(t,e.length-1)];return i?n?i.open:i.close:""},wi={name:"box-shadow",initialValue:"none",type:rt.LIST,prefix:!1,parse:function(e){return 1===e.length&&_e(e[0],"none")?[]:Ne(e).map(function(e){for(var t={color:255,offsetX:Ge,offsetY:Ge,blur:Ge,spread:Ge,inset:!1},n=0,i=0;i<e.length;i++){var a=e[i];_e(a,"inset")?t.inset=!0:Ue(a)?(0===n?t.offsetX=a:1===n?t.offsetY=a:2===n?t.blur=a:t.spread=a,n++):t.color=Ye(a)}return t})}},Si=function(){function e(e){this.backgroundClip=Oi(mt,e.backgroundClip),this.backgroundColor=Oi(ft,e.backgroundColor),this.backgroundImage=Oi(Ut,e.backgroundImage),this.backgroundOrigin=Oi(Vt,e.backgroundOrigin),this.backgroundPosition=Oi(Qt,e.backgroundPosition),this.backgroundRepeat=Oi(Ht,e.backgroundRepeat),this.backgroundSize=Oi(zt,e.backgroundSize),this.borderTopColor=Oi($t,e.borderTopColor),this.borderRightColor=Oi(Jt,e.borderRightColor),this.borderBottomColor=Oi(Yt,e.borderBottomColor),this.borderLeftColor=Oi(Zt,e.borderLeftColor),this.borderTopLeftRadius=Oi(tn,e.borderTopLeftRadius),this.borderTopRightRadius=Oi(nn,e.borderTopRightRadius),this.borderBottomRightRadius=Oi(an,e.borderBottomRightRadius),this.borderBottomLeftRadius=Oi(rn,e.borderBottomLeftRadius),this.borderTopStyle=Oi(ln,e.borderTopStyle),this.borderRightStyle=Oi(cn,e.borderRightStyle),this.borderBottomStyle=Oi(dn,e.borderBottomStyle),this.borderLeftStyle=Oi(un,e.borderLeftStyle),this.borderTopWidth=Oi(mn,e.borderTopWidth),this.borderRightWidth=Oi(fn,e.borderRightWidth),this.borderBottomWidth=Oi(hn,e.borderBottomWidth),this.borderLeftWidth=Oi(gn,e.borderLeftWidth),this.boxShadow=Oi(wi,e.boxShadow),this.color=Oi(An,e.color),this.display=Oi(bn,e.display),this.float=Oi(Cn,e.cssFloat),this.fontFamily=Oi(ui,e.fontFamily),this.fontSize=Oi(pi,e.fontSize),this.fontStyle=Oi(gi,e.fontStyle),this.fontVariant=Oi(fi,e.fontVariant),this.fontWeight=Oi(mi,e.fontWeight),this.letterSpacing=Oi(xn,e.letterSpacing),this.lineBreak=Oi(Sn,e.lineBreak),this.lineHeight=Oi(En,e.lineHeight),this.listStyleImage=Oi(In,e.listStyleImage),this.listStylePosition=Oi(Tn,e.listStylePosition),this.listStyleType=Oi(Bn,e.listStyleType),this.marginTop=Oi(Pn,e.marginTop),this.marginRight=Oi(Dn,e.marginRight),this.marginBottom=Oi(kn,e.marginBottom),this.marginLeft=Oi(_n,e.marginLeft),this.opacity=Oi(li,e.opacity);var t=Oi(jn,e.overflow);this.overflowX=t[0],this.overflowY=t[t.length>1?1:0],this.overflowWrap=Oi(Rn,e.overflowWrap),this.paddingTop=Oi(Vn,e.paddingTop),this.paddingRight=Oi(Qn,e.paddingRight),this.paddingBottom=Oi(Gn,e.paddingBottom),this.paddingLeft=Oi(Hn,e.paddingLeft),this.position=Oi(Wn,e.position),this.textAlign=Oi(qn,e.textAlign),this.textDecorationColor=Oi(ci,e.textDecorationColor||e.color),this.textDecorationLine=Oi(di,e.textDecorationLine),this.textShadow=Oi(Xn,e.textShadow),this.textTransform=Oi(Jn,e.textTransform),this.transform=Oi(Yn,e.transform),this.transformOrigin=Oi(ni,e.transformOrigin),this.visibility=Oi(ai,e.visibility),this.wordBreak=Oi(oi,e.wordBreak),this.zIndex=Oi(si,e.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===$n.VISIBLE},e.prototype.isTransparent=function(){return Ze(this.backgroundColor)},e.prototype.isTransformed=function(){return null!==this.transform},e.prototype.isPositioned=function(){return this.position!==Kn.STATIC},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==on.NONE},e.prototype.isInlineLevel=function(){return Ai(this.display,4)||Ai(this.display,33554432)||Ai(this.display,268435456)||Ai(this.display,536870912)||Ai(this.display,67108864)||Ai(this.display,134217728)},e}(),Ei=function(e){this.content=Oi(bi,e.content),this.quotes=Oi(Ci,e.quotes)},Ii=function(e){this.counterIncrement=Oi(yi,e.counterIncrement),this.counterReset=Oi(vi,e.counterReset)},Oi=function(e,t){var n=new Fe,i=null!=t?t.toString():e.initialValue;n.write(i);var a=new Be(n.read());switch(e.type){case rt.IDENT_VALUE:var r=a.parseComponentValue();return e.parse(De(r)?r.value:e.initialValue);case rt.VALUE:return e.parse(a.parseComponentValue());case rt.LIST:return e.parse(a.parseComponentValues());case rt.TOKEN_VALUE:return a.parseComponentValue();case rt.TYPE_VALUE:switch(e.format){case"angle":return We(a.parseComponentValue());case"color":return Ye(a.parseComponentValue());case"image":return Nt(a.parseComponentValue());case"length":var o=a.parseComponentValue();return Ue(o)?o:Ge;case"length-percentage":var s=a.parseComponentValue();return Ve(s)?s:Ge}}throw new Error("Attempting to parse unsupported css format type "+e.format)},Ti=function(e){this.styles=new Si(window.getComputedStyle(e,null)),this.textNodes=[],this.elements=[],null!==this.styles.transform&&aa(e)&&(e.style.transform="none"),this.bounds=o(e),this.flags=0},Fi=function(e,t){this.text=e,this.bounds=t},Bi=function(e){var t=e.ownerDocument;if(t){var n=t.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var i=e.parentNode;if(i){i.replaceChild(n,e);var a=o(n);return n.firstChild&&i.replaceChild(n.firstChild,n),a}}return new r(0,0,0,0)},Mi=function(e,t,n){var i=e.ownerDocument;if(!i)throw new Error("Node has no owner document");var a=i.createRange();return a.setStart(e,t),a.setEnd(e,t+n),r.fromClientRect(a.getBoundingClientRect())},Pi=function(e,t){return 0!==t.letterSpacing?s(e).map(function(e){return l(e)}):Di(e,t)},Di=function(e,t){for(var n,i=function(e,t){var n=s(e),i=$(n,t),a=i[0],r=i[1],o=i[2],l=n.length,c=0,d=0;return{next:function(){if(d>=l)return{done:!0,value:null};for(var e="\xd7";d<l&&"\xd7"===(e=X(n,r,a,++d,o)););if("\xd7"!==e||d===l){var t=new J(n,e,c,d);return c=d,{value:t,done:!1}}return{done:!0,value:null}}}}(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap===Ln.BREAK_WORD?"break-word":t.wordBreak}),a=[];!(n=i.next()).done;)n.value&&a.push(n.value.slice());return a},ki=function(e,t){this.text=_i(e.data,t.textTransform),this.textBounds=function(e,t,n){var i=Pi(e,t),a=[],r=0;return i.forEach(function(e){if(t.textDecorationLine.length||e.trim().length>0)if(St.SUPPORT_RANGE_BOUNDS)a.push(new Fi(e,Mi(n,r,e.length)));else{var i=n.splitText(e.length);a.push(new Fi(e,Bi(n))),n=i}else St.SUPPORT_RANGE_BOUNDS||(n=n.splitText(e.length));r+=e.length}),a}(this.text,t,e)},_i=function(e,t){switch(t){case zn.LOWERCASE:return e.toLowerCase();case zn.CAPITALIZE:return e.replace(Li,ji);case zn.UPPERCASE:return e.toUpperCase();default:return e}},Li=/(^|\s|:|-|\(|\))([a-z])/g,ji=function(e,t,n){return e.length>0?t+n.toUpperCase():e},Ni=function(e){function n(t){var n=e.call(this,t)||this;return n.src=t.currentSrc||t.src,n.intrinsicWidth=t.naturalWidth,n.intrinsicHeight=t.naturalHeight,It.getInstance().addImage(n.src),n}return t(n,e),n}(Ti),Ri=function(e){function n(t){var n=e.call(this,t)||this;return n.canvas=t,n.intrinsicWidth=t.width,n.intrinsicHeight=t.height,n}return t(n,e),n}(Ti),Ui=function(e){function n(t){var n=e.call(this,t)||this,i=new XMLSerializer;return n.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(t)),n.intrinsicWidth=t.width.baseVal.value,n.intrinsicHeight=t.height.baseVal.value,It.getInstance().addImage(n.svg),n}return t(n,e),n}(Ti),Vi=function(e){function n(t){var n=e.call(this,t)||this;return n.value=t.value,n}return t(n,e),n}(Ti),Qi=function(e){function n(t){var n=e.call(this,t)||this;return n.start=t.start,n.reversed="boolean"==typeof t.reversed&&!0===t.reversed,n}return t(n,e),n}(Ti),Gi=[{type:p.DIMENSION_TOKEN,flags:0,unit:"px",number:3}],Hi=[{type:p.PERCENTAGE_TOKEN,flags:0,number:50}],Ki="password",qi=function(e){function n(t){var n,i,a,o=e.call(this,t)||this;switch(o.type=t.type.toLowerCase(),o.checked=t.checked,o.value=0===(i=(n=t).type===Ki?new Array(n.value.length+1).join("\u2022"):n.value).length?n.placeholder||"":i,"checkbox"!==o.type&&"radio"!==o.type||(o.styles.backgroundColor=3739148031,o.styles.borderTopColor=o.styles.borderRightColor=o.styles.borderBottomColor=o.styles.borderLeftColor=2779096575,o.styles.borderTopWidth=o.styles.borderRightWidth=o.styles.borderBottomWidth=o.styles.borderLeftWidth=1,o.styles.borderTopStyle=o.styles.borderRightStyle=o.styles.borderBottomStyle=o.styles.borderLeftStyle=qt.SOLID,o.styles.backgroundClip=[ot.BORDER_BOX],o.styles.backgroundOrigin=[0],o.bounds=(a=o.bounds).width>a.height?new r(a.left+(a.width-a.height)/2,a.top,a.height,a.height):a.width<a.height?new r(a.left,a.top+(a.height-a.width)/2,a.width,a.width):a),o.type){case"checkbox":o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=Gi;break;case"radio":o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=Hi}return o}return t(n,e),n}(Ti),zi=function(e){function n(t){var n=e.call(this,t)||this,i=t.options[t.selectedIndex||0];return n.value=i&&i.text||"",n}return t(n,e),n}(Ti),Wi=function(e){function n(t){var n=e.call(this,t)||this;return n.value=t.value,n}return t(n,e),n}(Ti),Xi=function(e){return Ye(Be.create(e).parseComponentValue())},$i=function(e){function n(t){var n=e.call(this,t)||this;n.src=t.src,n.width=parseInt(t.width,10)||0,n.height=parseInt(t.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(t.contentWindow&&t.contentWindow.document&&t.contentWindow.document.documentElement){n.tree=Zi(t.contentWindow.document.documentElement);var i=t.contentWindow.document.documentElement?Xi(getComputedStyle(t.contentWindow.document.documentElement).backgroundColor):ct.TRANSPARENT,a=t.contentWindow.document.body?Xi(getComputedStyle(t.contentWindow.document.body).backgroundColor):ct.TRANSPARENT;n.backgroundColor=Ze(i)?Ze(a)?n.styles.backgroundColor:a:i}}catch(r){}return n}return t(n,e),n}(Ti),Ji=["OL","UL","MENU"],Yi=function(e){return pa(e)?new Ni(e):ua(e)?new Ri(e):ca(e)?new Ui(e):oa(e)?new Vi(e):sa(e)?new Qi(e):la(e)?new qi(e):Aa(e)?new zi(e):ga(e)?new Wi(e):ma(e)?new $i(e):new Ti(e)},Zi=function(e){var t=Yi(e);return t.flags|=4,function e(t,n,i){for(var a=t.firstChild,r=void 0;a;a=r)if(r=a.nextSibling,na(a)&&a.data.trim().length>0)n.textNodes.push(new ki(a,n.styles));else if(ia(a)){var o=Yi(a);o.styles.isVisible()&&(ea(a,o,i)?o.flags|=4:ta(o.styles)&&(o.flags|=2),-1!==Ji.indexOf(a.tagName)&&(o.flags|=8),n.elements.push(o),ga(a)||ca(a)||Aa(a)||e(a,o,i))}}(e,t,t),t},ea=function(e,t,n){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||da(e)&&n.styles.isTransparent()},ta=function(e){return e.isPositioned()||e.isFloating()},na=function(e){return e.nodeType===Node.TEXT_NODE},ia=function(e){return e.nodeType===Node.ELEMENT_NODE},aa=function(e){return ia(e)&&void 0!==e.style&&!ra(e)},ra=function(e){return"object"==typeof e.className},oa=function(e){return"LI"===e.tagName},sa=function(e){return"OL"===e.tagName},la=function(e){return"INPUT"===e.tagName},ca=function(e){return"svg"===e.tagName},da=function(e){return"BODY"===e.tagName},ua=function(e){return"CANVAS"===e.tagName},pa=function(e){return"IMG"===e.tagName},ma=function(e){return"IFRAME"===e.tagName},fa=function(e){return"STYLE"===e.tagName},ha=function(e){return"SCRIPT"===e.tagName},ga=function(e){return"TEXTAREA"===e.tagName},Aa=function(e){return"SELECT"===e.tagName},ba=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},e.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},e.prototype.pop=function(e){var t=this;e.forEach(function(e){return t.counters[e].pop()})},e.prototype.parse=function(e){var t=this,n=e.counterIncrement,i=e.counterReset,a=!0;null!==n&&n.forEach(function(e){var n=t.counters[e.counter];n&&0!==e.increment&&(a=!1,n[Math.max(0,n.length-1)]+=e.increment)});var r=[];return a&&i.forEach(function(e){var n=t.counters[e.counter];r.push(e.counter),n||(n=t.counters[e.counter]=[]),n.push(e.reset)}),r},e}(),ya={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},va={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054f","\u054e","\u054d","\u054c","\u054b","\u054a","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053f","\u053e","\u053d","\u053c","\u053b","\u053a","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},Ca={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05d9\u05f3","\u05d8\u05f3","\u05d7\u05f3","\u05d6\u05f3","\u05d5\u05f3","\u05d4\u05f3","\u05d3\u05f3","\u05d2\u05f3","\u05d1\u05f3","\u05d0\u05f3","\u05ea","\u05e9","\u05e8","\u05e7","\u05e6","\u05e4","\u05e2","\u05e1","\u05e0","\u05de","\u05dc","\u05db","\u05d9\u05d8","\u05d9\u05d7","\u05d9\u05d6","\u05d8\u05d6","\u05d8\u05d5","\u05d9","\u05d8","\u05d7","\u05d6","\u05d5","\u05d4","\u05d3","\u05d2","\u05d1","\u05d0"]},xa={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10f5","\u10f0","\u10ef","\u10f4","\u10ee","\u10ed","\u10ec","\u10eb","\u10ea","\u10e9","\u10e8","\u10e7","\u10e6","\u10e5","\u10e4","\u10f3","\u10e2","\u10e1","\u10e0","\u10df","\u10de","\u10dd","\u10f2","\u10dc","\u10db","\u10da","\u10d9","\u10d8","\u10d7","\u10f1","\u10d6","\u10d5","\u10d4","\u10d3","\u10d2","\u10d1","\u10d0"]},wa=function(e,t,n,i,a,r){return e<t||e>n?Ta(e,a,r.length>0):i.integers.reduce(function(t,n,a){for(;e>=n;)e-=n,t+=i.values[a];return t},"")+r},Sa=function(e,t,n,i){var a="";do{n||e--,a=i(e)+a,e/=t}while(e*t>=t);return a},Ea=function(e,t,n,i,a){var r=n-t+1;return(e<0?"-":"")+(Sa(Math.abs(e),r,i,function(e){return l(Math.floor(e%r)+t)})+a)},Ia=function(e,t,n){void 0===n&&(n=". ");var i=t.length;return Sa(Math.abs(e),i,!1,function(e){return t[Math.floor(e%i)]})+n},Oa=function(e,t,n,i,a,r){if(e<-9999||e>9999)return Ta(e,On.CJK_DECIMAL,a.length>0);var o=Math.abs(e),s=a;if(0===o)return t[0]+s;for(var l=0;o>0&&l<=4;l++){var c=o%10;0===c&&Ai(r,1)&&""!==s?s=t[c]+s:c>1||1===c&&0===l||1===c&&1===l&&Ai(r,2)||1===c&&1===l&&Ai(r,4)&&e>100||1===c&&l>1&&Ai(r,8)?s=t[c]+(l>0?n[l-1]:"")+s:1===c&&l>0&&(s=n[l-1]+s),o=Math.floor(o/10)}return(e<0?i:"")+s},Ta=function(e,t,n){var i=n?". ":"",a=n?"\u3001":"",r=n?", ":"",o=n?" ":"";switch(t){case On.DISC:return"\u2022"+o;case On.CIRCLE:return"\u25e6"+o;case On.SQUARE:return"\u25fe"+o;case On.DECIMAL_LEADING_ZERO:var s=Ea(e,48,57,!0,i);return s.length<4?"0"+s:s;case On.CJK_DECIMAL:return Ia(e,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",a);case On.LOWER_ROMAN:return wa(e,1,3999,ya,On.DECIMAL,i).toLowerCase();case On.UPPER_ROMAN:return wa(e,1,3999,ya,On.DECIMAL,i);case On.LOWER_GREEK:return Ea(e,945,969,!1,i);case On.LOWER_ALPHA:return Ea(e,97,122,!1,i);case On.UPPER_ALPHA:return Ea(e,65,90,!1,i);case On.ARABIC_INDIC:return Ea(e,1632,1641,!0,i);case On.ARMENIAN:case On.UPPER_ARMENIAN:return wa(e,1,9999,va,On.DECIMAL,i);case On.LOWER_ARMENIAN:return wa(e,1,9999,va,On.DECIMAL,i).toLowerCase();case On.BENGALI:return Ea(e,2534,2543,!0,i);case On.CAMBODIAN:case On.KHMER:return Ea(e,6112,6121,!0,i);case On.CJK_EARTHLY_BRANCH:return Ia(e,"\u5b50\u4e11\u5bc5\u536f\u8fb0\u5df3\u5348\u672a\u7533\u9149\u620c\u4ea5",a);case On.CJK_HEAVENLY_STEM:return Ia(e,"\u7532\u4e59\u4e19\u4e01\u620a\u5df1\u5e9a\u8f9b\u58ec\u7678",a);case On.CJK_IDEOGRAPHIC:case On.TRAD_CHINESE_INFORMAL:return Oa(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c","\u8ca0",a,14);case On.TRAD_CHINESE_FORMAL:return Oa(e,"\u96f6\u58f9\u8cb3\u53c3\u8086\u4f0d\u9678\u67d2\u634c\u7396","\u62fe\u4f70\u4edf\u842c","\u8ca0",a,15);case On.SIMP_CHINESE_INFORMAL:return Oa(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c","\u8d1f",a,14);case On.SIMP_CHINESE_FORMAL:return Oa(e,"\u96f6\u58f9\u8d30\u53c1\u8086\u4f0d\u9646\u67d2\u634c\u7396","\u62fe\u4f70\u4edf\u842c","\u8d1f",a,15);case On.JAPANESE_INFORMAL:return Oa(e,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u4e07","\u30de\u30a4\u30ca\u30b9",a,0);case On.JAPANESE_FORMAL:return Oa(e,"\u96f6\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343\u4e07","\u30de\u30a4\u30ca\u30b9",a,7);case On.KOREAN_HANGUL_FORMAL:return Oa(e,"\uc601\uc77c\uc774\uc0bc\uc0ac\uc624\uc721\uce60\ud314\uad6c","\uc2ed\ubc31\ucc9c\ub9cc","\ub9c8\uc774\ub108\uc2a4",r,7);case On.KOREAN_HANJA_INFORMAL:return Oa(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c","\ub9c8\uc774\ub108\uc2a4",r,0);case On.KOREAN_HANJA_FORMAL:return Oa(e,"\u96f6\u58f9\u8cb3\u53c3\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343","\ub9c8\uc774\ub108\uc2a4",r,7);case On.DEVANAGARI:return Ea(e,2406,2415,!0,i);case On.GEORGIAN:return wa(e,1,19999,xa,On.DECIMAL,i);case On.GUJARATI:return Ea(e,2790,2799,!0,i);case On.GURMUKHI:return Ea(e,2662,2671,!0,i);case On.HEBREW:return wa(e,1,10999,Ca,On.DECIMAL,i);case On.HIRAGANA:return Ia(e,"\u3042\u3044\u3046\u3048\u304a\u304b\u304d\u304f\u3051\u3053\u3055\u3057\u3059\u305b\u305d\u305f\u3061\u3064\u3066\u3068\u306a\u306b\u306c\u306d\u306e\u306f\u3072\u3075\u3078\u307b\u307e\u307f\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308a\u308b\u308c\u308d\u308f\u3090\u3091\u3092\u3093");case On.HIRAGANA_IROHA:return Ia(e,"\u3044\u308d\u306f\u306b\u307b\u3078\u3068\u3061\u308a\u306c\u308b\u3092\u308f\u304b\u3088\u305f\u308c\u305d\u3064\u306d\u306a\u3089\u3080\u3046\u3090\u306e\u304a\u304f\u3084\u307e\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304d\u3086\u3081\u307f\u3057\u3091\u3072\u3082\u305b\u3059");case On.KANNADA:return Ea(e,3302,3311,!0,i);case On.KATAKANA:return Ia(e,"\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d2\u30d5\u30d8\u30db\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f0\u30f1\u30f2\u30f3",a);case On.KATAKANA_IROHA:return Ia(e,"\u30a4\u30ed\u30cf\u30cb\u30db\u30d8\u30c8\u30c1\u30ea\u30cc\u30eb\u30f2\u30ef\u30ab\u30e8\u30bf\u30ec\u30bd\u30c4\u30cd\u30ca\u30e9\u30e0\u30a6\u30f0\u30ce\u30aa\u30af\u30e4\u30de\u30b1\u30d5\u30b3\u30a8\u30c6\u30a2\u30b5\u30ad\u30e6\u30e1\u30df\u30b7\u30f1\u30d2\u30e2\u30bb\u30b9",a);case On.LAO:return Ea(e,3792,3801,!0,i);case On.MONGOLIAN:return Ea(e,6160,6169,!0,i);case On.MYANMAR:return Ea(e,4160,4169,!0,i);case On.ORIYA:return Ea(e,2918,2927,!0,i);case On.PERSIAN:return Ea(e,1776,1785,!0,i);case On.TAMIL:return Ea(e,3046,3055,!0,i);case On.TELUGU:return Ea(e,3174,3183,!0,i);case On.THAI:return Ea(e,3664,3673,!0,i);case On.TIBETAN:return Ea(e,3872,3881,!0,i);case On.DECIMAL:default:return Ea(e,48,57,!0,i)}},Fa=function(){function e(e,t){if(this.options=t,this.scrolledElements=[],this.referenceElement=e,this.counters=new ba,this.quoteDepth=0,!e.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(e.ownerDocument.documentElement)}return e.prototype.toIFrame=function(e,t){var n=this,r=Ma(e,t);if(!r.contentWindow)return Promise.reject("Unable to find iframe window");var o=e.defaultView.pageXOffset,s=e.defaultView.pageYOffset,l=r.contentWindow,c=l.document,d=Pa(r).then(function(){return i(n,void 0,void 0,function(){var e;return a(this,function(n){switch(n.label){case 0:return this.scrolledElements.forEach(La),l&&(l.scrollTo(t.left,t.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||l.scrollY===t.top&&l.scrollX===t.left||(c.documentElement.style.top=-t.top+"px",c.documentElement.style.left=-t.left+"px",c.documentElement.style.position="absolute")),e=this.options.onclone,void 0===this.clonedReferenceElement?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:n.sent(),n.label=2;case 2:return"function"==typeof e?[2,Promise.resolve().then(function(){return e(c)}).then(function(){return r})]:[2,r]}})})});return c.open(),c.write(ka(document.doctype)+"<html></html>"),_a(this.referenceElement.ownerDocument,o,s),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),d},e.prototype.createElementClone=function(e){if(ua(e))return this.createCanvasClone(e);if(fa(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return pa(t)&&"lazy"===t.loading&&(t.loading="eager"),t},e.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var n=[].slice.call(t.cssRules,0).reduce(function(e,t){return t&&"string"==typeof t.cssText?e+t.cssText:e},""),i=e.cloneNode(!1);return i.textContent=n,i}}catch(a){if(Et.getInstance(this.options.id).error("Unable to access cssRules property",a),"SecurityError"!==a.name)throw a}return e.cloneNode(!1)},e.prototype.createCanvasClone=function(e){if(this.options.inlineImages&&e.ownerDocument){var t=e.ownerDocument.createElement("img");try{return t.src=e.toDataURL(),t}catch(r){Et.getInstance(this.options.id).info("Unable to clone canvas contents, canvas is tainted")}}var n=e.cloneNode(!1);try{n.width=e.width,n.height=e.height;var i=e.getContext("2d"),a=n.getContext("2d");return a&&(i?a.putImageData(i.getImageData(0,0,e.width,e.height),0,0):a.drawImage(e,0,0)),n}catch(r){}return n},e.prototype.cloneNode=function(e){if(na(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var t=e.ownerDocument.defaultView;if(t&&ia(e)&&(aa(e)||ra(e))){var n=this.createElementClone(e),i=t.getComputedStyle(e),a=t.getComputedStyle(e,":before"),r=t.getComputedStyle(e,":after");this.referenceElement===e&&aa(n)&&(this.clonedReferenceElement=n),da(n)&&Ra(n);for(var o=this.counters.parse(new Ii(i)),s=this.resolvePseudoContent(e,n,a,hi.BEFORE),l=e.firstChild;l;l=l.nextSibling)ia(l)&&(ha(l)||l.hasAttribute("data-html2canvas-ignore")||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(l))||this.options.copyStyles&&ia(l)&&fa(l)||n.appendChild(this.cloneNode(l));s&&n.insertBefore(s,n.firstChild);var c=this.resolvePseudoContent(e,n,r,hi.AFTER);return c&&n.appendChild(c),this.counters.pop(o),i&&(this.options.copyStyles||ra(e))&&!ma(e)&&Da(i,n),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([n,e.scrollLeft,e.scrollTop]),(ga(e)||Aa(e))&&(ga(n)||Aa(n))&&(n.value=e.value),n}return e.cloneNode(!1)},e.prototype.resolvePseudoContent=function(e,t,n,i){var a=this;if(n){var r=n.content,o=t.ownerDocument;if(o&&r&&"none"!==r&&"-moz-alt-content"!==r&&"none"!==n.display){this.counters.parse(new Ii(n));var s=new Ei(n),l=o.createElement("html2canvaspseudoelement");Da(n,l),s.content.forEach(function(t){if(t.type===p.STRING_TOKEN)l.appendChild(o.createTextNode(t.value));else if(t.type===p.URL_TOKEN){var n=o.createElement("img");n.src=t.value,n.style.opacity="1",l.appendChild(n)}else if(t.type===p.FUNCTION){if("attr"===t.name){var i=t.values.filter(De);i.length&&l.appendChild(o.createTextNode(e.getAttribute(i[0].value)||""))}else if("counter"===t.name){var r=t.values.filter(je),c=r[0],d=r[1];if(c&&De(c)){var u=a.counters.getCounterValue(c.value),m=d&&De(d)?Bn.parse(d.value):On.DECIMAL;l.appendChild(o.createTextNode(Ta(u,m,!1)))}}else if("counters"===t.name){var f=t.values.filter(je),h=(c=f[0],f[1]);if(d=f[2],c&&De(c)){var g=a.counters.getCounterValues(c.value),A=d&&De(d)?Bn.parse(d.value):On.DECIMAL,b=h&&h.type===p.STRING_TOKEN?h.value:"",y=g.map(function(e){return Ta(e,A,!1)}).join(b);l.appendChild(o.createTextNode(y))}}}else if(t.type===p.IDENT_TOKEN)switch(t.value){case"open-quote":l.appendChild(o.createTextNode(xi(s.quotes,a.quoteDepth++,!0)));break;case"close-quote":l.appendChild(o.createTextNode(xi(s.quotes,--a.quoteDepth,!1)));break;default:l.appendChild(o.createTextNode(t.value))}}),l.className=ja+" "+Na;var c=i===hi.BEFORE?" "+ja:" "+Na;return ra(t)?t.className.baseValue+=c:t.className+=c,l}}},e.destroy=function(e){return!!e.parentNode&&(e.parentNode.removeChild(e),!0)},e}();!function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"}(hi||(hi={}));var Ba,Ma=function(e,t){var n=e.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute("data-html2canvas-ignore","true"),e.body.appendChild(n),n},Pa=function(e){return new Promise(function(t,n){var i=e.contentWindow;if(!i)return n("No window assigned for iframe");var a=i.document;i.onload=e.onload=a.onreadystatechange=function(){i.onload=e.onload=a.onreadystatechange=null;var n=setInterval(function(){a.body.childNodes.length>0&&"complete"===a.readyState&&(clearInterval(n),t(e))},50)}})},Da=function(e,t){for(var n=e.length-1;n>=0;n--){var i=e.item(n);"content"!==i&&t.style.setProperty(i,e.getPropertyValue(i))}return t},ka=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},_a=function(e,t,n){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||n!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,n)},La=function(e){var t=e[0],n=e[1],i=e[2];t.scrollLeft=n,t.scrollTop=i},ja="___html2canvas___pseudoelement_before",Na="___html2canvas___pseudoelement_after",Ra=function(e){Ua(e,"."+ja+':before{\n    content: "" !important;\n    display: none !important;\n}\n         .'+Na+':after{\n    content: "" !important;\n    display: none !important;\n}')},Ua=function(e,t){var n=e.ownerDocument;if(n){var i=n.createElement("style");i.textContent=t,e.appendChild(i)}};!function(e){e[e.VECTOR=0]="VECTOR",e[e.BEZIER_CURVE=1]="BEZIER_CURVE"}(Ba||(Ba={}));var Va,Qa=function(e,t){return e.length===t.length&&e.some(function(e,n){return e===t[n]})},Ga=function(){function e(e,t){this.type=Ba.VECTOR,this.x=e,this.y=t}return e.prototype.add=function(t,n){return new e(this.x+t,this.y+n)},e}(),Ha=function(e,t,n){return new Ga(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)},Ka=function(){function e(e,t,n,i){this.type=Ba.BEZIER_CURVE,this.start=e,this.startControl=t,this.endControl=n,this.end=i}return e.prototype.subdivide=function(t,n){var i=Ha(this.start,this.startControl,t),a=Ha(this.startControl,this.endControl,t),r=Ha(this.endControl,this.end,t),o=Ha(i,a,t),s=Ha(a,r,t),l=Ha(o,s,t);return n?new e(this.start,i,o,l):new e(l,s,r,this.end)},e.prototype.add=function(t,n){return new e(this.start.add(t,n),this.startControl.add(t,n),this.endControl.add(t,n),this.end.add(t,n))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),qa=function(e){return e.type===Ba.BEZIER_CURVE},za=function(e){var t=e.styles,n=e.bounds,i=qe(t.borderTopLeftRadius,n.width,n.height),a=i[0],r=i[1],o=qe(t.borderTopRightRadius,n.width,n.height),s=o[0],l=o[1],c=qe(t.borderBottomRightRadius,n.width,n.height),d=c[0],u=c[1],p=qe(t.borderBottomLeftRadius,n.width,n.height),m=p[0],f=p[1],h=[];h.push((a+s)/n.width),h.push((m+d)/n.width),h.push((r+f)/n.height),h.push((l+u)/n.height);var g=Math.max.apply(Math,h);g>1&&(a/=g,r/=g,s/=g,l/=g,d/=g,u/=g,m/=g,f/=g);var A=n.width-s,b=n.height-u,y=n.width-d,v=n.height-f,C=t.borderTopWidth,x=t.borderRightWidth,w=t.borderBottomWidth,S=t.borderLeftWidth,E=ze(t.paddingTop,e.bounds.width),I=ze(t.paddingRight,e.bounds.width),O=ze(t.paddingBottom,e.bounds.width),T=ze(t.paddingLeft,e.bounds.width);this.topLeftBorderBox=a>0||r>0?Wa(n.left,n.top,a,r,Va.TOP_LEFT):new Ga(n.left,n.top),this.topRightBorderBox=s>0||l>0?Wa(n.left+A,n.top,s,l,Va.TOP_RIGHT):new Ga(n.left+n.width,n.top),this.bottomRightBorderBox=d>0||u>0?Wa(n.left+y,n.top+b,d,u,Va.BOTTOM_RIGHT):new Ga(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=m>0||f>0?Wa(n.left,n.top+v,m,f,Va.BOTTOM_LEFT):new Ga(n.left,n.top+n.height),this.topLeftPaddingBox=a>0||r>0?Wa(n.left+S,n.top+C,Math.max(0,a-S),Math.max(0,r-C),Va.TOP_LEFT):new Ga(n.left+S,n.top+C),this.topRightPaddingBox=s>0||l>0?Wa(n.left+Math.min(A,n.width+S),n.top+C,A>n.width+S?0:s-S,l-C,Va.TOP_RIGHT):new Ga(n.left+n.width-x,n.top+C),this.bottomRightPaddingBox=d>0||u>0?Wa(n.left+Math.min(y,n.width-S),n.top+Math.min(b,n.height+C),Math.max(0,d-x),u-w,Va.BOTTOM_RIGHT):new Ga(n.left+n.width-x,n.top+n.height-w),this.bottomLeftPaddingBox=m>0||f>0?Wa(n.left+S,n.top+v,Math.max(0,m-S),f-w,Va.BOTTOM_LEFT):new Ga(n.left+S,n.top+n.height-w),this.topLeftContentBox=a>0||r>0?Wa(n.left+S+T,n.top+C+E,Math.max(0,a-(S+T)),Math.max(0,r-(C+E)),Va.TOP_LEFT):new Ga(n.left+S+T,n.top+C+E),this.topRightContentBox=s>0||l>0?Wa(n.left+Math.min(A,n.width+S+T),n.top+C+E,A>n.width+S+T?0:s-S+T,l-(C+E),Va.TOP_RIGHT):new Ga(n.left+n.width-(x+I),n.top+C+E),this.bottomRightContentBox=d>0||u>0?Wa(n.left+Math.min(y,n.width-(S+T)),n.top+Math.min(b,n.height+C+E),Math.max(0,d-(x+I)),u-(w+O),Va.BOTTOM_RIGHT):new Ga(n.left+n.width-(x+I),n.top+n.height-(w+O)),this.bottomLeftContentBox=m>0||f>0?Wa(n.left+S+T,n.top+v,Math.max(0,m-(S+T)),f-(w+O),Va.BOTTOM_LEFT):new Ga(n.left+S+T,n.top+n.height-(w+O))};!function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(Va||(Va={}));var Wa=function(e,t,n,i,a){var r=(Math.sqrt(2)-1)/3*4,o=n*r,s=i*r,l=e+n,c=t+i;switch(a){case Va.TOP_LEFT:return new Ka(new Ga(e,c),new Ga(e,c-s),new Ga(l-o,t),new Ga(l,t));case Va.TOP_RIGHT:return new Ka(new Ga(e,t),new Ga(e+o,t),new Ga(l,c-s),new Ga(l,c));case Va.BOTTOM_RIGHT:return new Ka(new Ga(l,t),new Ga(l,t+s),new Ga(e+o,c),new Ga(e,c));case Va.BOTTOM_LEFT:default:return new Ka(new Ga(l,c),new Ga(l-o,c),new Ga(e,t+s),new Ga(e,t))}},Xa=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},$a=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},Ja=function(e,t,n){this.type=0,this.offsetX=e,this.offsetY=t,this.matrix=n,this.target=6},Ya=function(e,t){this.type=1,this.target=t,this.path=e},Za=function(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},er=function(){function e(e,t){if(this.container=e,this.effects=t.slice(0),this.curves=new za(e),null!==e.styles.transform){var n=e.bounds.left+e.styles.transformOrigin[0].number,i=e.bounds.top+e.styles.transformOrigin[1].number,a=e.styles.transform;this.effects.push(new Ja(n,i,a))}if(e.styles.overflowX!==Fn.VISIBLE){var r=Xa(this.curves),o=$a(this.curves);Qa(r,o)?this.effects.push(new Ya(r,6)):(this.effects.push(new Ya(r,2)),this.effects.push(new Ya(o,4)))}}return e.prototype.getParentEffects=function(){var e=this.effects.slice(0);if(this.container.styles.overflowX!==Fn.VISIBLE){var t=Xa(this.curves),n=$a(this.curves);Qa(t,n)||e.push(new Ya(n,6))}return e},e}(),tr=function(e,t){for(var n=e instanceof Qi?e.start:1,i=e instanceof Qi&&e.reversed,a=0;a<t.length;a++){var r=t[a];r.container instanceof Vi&&"number"==typeof r.container.value&&0!==r.container.value&&(n=r.container.value),r.listValue=Ta(n,r.container.styles.listStyleType,!0),n+=i?-1:1}},nr=function(e){var t=new er(e,[]),n=new Za(t),i=[];return!function e(t,n,i,a){t.container.elements.forEach(function(r){var o=Ai(r.flags,4),s=Ai(r.flags,2),l=new er(r,t.getParentEffects());Ai(r.styles.display,2048)&&a.push(l);var c=Ai(r.flags,8)?[]:a;if(o||s){var d=o||r.styles.isPositioned()?i:n,u=new Za(l);if(r.styles.isPositioned()||r.styles.opacity<1||r.styles.isTransformed()){var p=r.styles.zIndex.order;if(p<0){var m=0;d.negativeZIndex.some(function(e,t){return p>e.element.container.styles.zIndex.order?(m=t,!1):m>0}),d.negativeZIndex.splice(m,0,u)}else if(p>0){var f=0;d.positiveZIndex.some(function(e,t){return p>=e.element.container.styles.zIndex.order?(f=t+1,!1):f>0}),d.positiveZIndex.splice(f,0,u)}else d.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else r.styles.isFloating()?d.nonPositionedFloats.push(u):d.nonPositionedInlineLevel.push(u);e(l,u,o?u:i,c)}else r.styles.isInlineLevel()?n.inlineLevel.push(l):n.nonInlineLevel.push(l),e(l,n,i,c);Ai(r.flags,8)&&tr(r,c)})}(t,n,n,i),tr(t.container,i),n},ir=function(e,t,n,i){var a=[];return qa(e)?a.push(e.subdivide(.5,!1)):a.push(e),qa(n)?a.push(n.subdivide(.5,!0)):a.push(n),qa(i)?a.push(i.subdivide(.5,!0).reverse()):a.push(i),qa(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},ar=function(e){var t=e.bounds,n=e.styles;return t.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},rr=function(e){var t=e.styles,n=e.bounds,i=ze(t.paddingLeft,n.width),a=ze(t.paddingRight,n.width),r=ze(t.paddingTop,n.width),o=ze(t.paddingBottom,n.width);return n.add(i+t.borderLeftWidth,r+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+i+a),-(t.borderTopWidth+t.borderBottomWidth+r+o))},or=function(e,t,n){var i=function(e,t){return 0===e?t.bounds:2===e?rr(t):ar(t)}(dr(e.styles.backgroundOrigin,t),e),a=function(e,t){return e===ot.BORDER_BOX?t.bounds:e===ot.CONTENT_BOX?rr(t):ar(t)}(dr(e.styles.backgroundClip,t),e),r=cr(dr(e.styles.backgroundSize,t),n,i),o=r[0],s=r[1],l=qe(dr(e.styles.backgroundPosition,t),i.width-o,i.height-s);return[ur(dr(e.styles.backgroundRepeat,t),l,r,i,a),Math.round(i.left+l[0]),Math.round(i.top+l[1]),o,s]},sr=function(e){return De(e)&&e.value===Gt.AUTO},lr=function(e){return"number"==typeof e},cr=function(e,t,n){var i=t[0],a=t[1],r=t[2],o=e[0],s=e[1];if(Ve(o)&&s&&Ve(s))return[ze(o,n.width),ze(s,n.height)];var l=lr(r);if(De(o)&&(o.value===Gt.CONTAIN||o.value===Gt.COVER))return lr(r)?n.width/n.height<r!=(o.value===Gt.COVER)?[n.width,n.width/r]:[n.height*r,n.height]:[n.width,n.height];var c=lr(i),d=lr(a),u=c||d;if(sr(o)&&(!s||sr(s)))return c&&d?[i,a]:l||u?u&&l?[c?i:a*r,d?a:i/r]:[c?i:n.width,d?a:n.height]:[n.width,n.height];if(l){var p=0,m=0;return Ve(o)?p=ze(o,n.width):Ve(s)&&(m=ze(s,n.height)),sr(o)?p=m*r:s&&!sr(s)||(m=p/r),[p,m]}var f=null,h=null;if(Ve(o)?f=ze(o,n.width):s&&Ve(s)&&(h=ze(s,n.height)),null===f||s&&!sr(s)||(h=c&&d?f/i*a:n.height),null!==h&&sr(o)&&(f=c&&d?h/a*i:n.width),null!==f&&null!==h)return[f,h];throw new Error("Unable to calculate background-size for element")},dr=function(e,t){var n=e[t];return void 0===n?e[0]:n},ur=function(e,t,n,i,a){var r=t[0],o=t[1],s=n[0],l=n[1];switch(e){case jt.REPEAT_X:return[new Ga(Math.round(i.left),Math.round(i.top+o)),new Ga(Math.round(i.left+i.width),Math.round(i.top+o)),new Ga(Math.round(i.left+i.width),Math.round(l+i.top+o)),new Ga(Math.round(i.left),Math.round(l+i.top+o))];case jt.REPEAT_Y:return[new Ga(Math.round(i.left+r),Math.round(i.top)),new Ga(Math.round(i.left+r+s),Math.round(i.top)),new Ga(Math.round(i.left+r+s),Math.round(i.height+i.top)),new Ga(Math.round(i.left+r),Math.round(i.height+i.top))];case jt.NO_REPEAT:return[new Ga(Math.round(i.left+r),Math.round(i.top+o)),new Ga(Math.round(i.left+r+s),Math.round(i.top+o)),new Ga(Math.round(i.left+r+s),Math.round(i.top+o+l)),new Ga(Math.round(i.left+r),Math.round(i.top+o+l))];default:return[new Ga(Math.round(a.left),Math.round(a.top)),new Ga(Math.round(a.left+a.width),Math.round(a.top)),new Ga(Math.round(a.left+a.width),Math.round(a.height+a.top)),new Ga(Math.round(a.left),Math.round(a.height+a.top))]}},pr=function(){function e(e){this._data={},this._document=e}return e.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),i=this._document.createElement("img"),a=this._document.createElement("span"),r=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",r.appendChild(n),i.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",a.style.fontFamily=e,a.style.fontSize=t,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode("Hidden Text")),n.appendChild(a),n.appendChild(i);var o=i.offsetTop-a.offsetTop+2;n.removeChild(a),n.appendChild(this._document.createTextNode("Hidden Text")),n.style.lineHeight="normal",i.style.verticalAlign="super";var s=i.offsetTop-n.offsetTop+2;return r.removeChild(n),{baseline:o,middle:s}},e.prototype.getMetrics=function(e,t){var n=e+" "+t;return void 0===this._data[n]&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},e}(),mr=function(){function e(e){this._activeEffects=[],this.canvas=e.canvas?e.canvas:document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.options=e,e.canvas||(this.canvas.width=Math.floor(e.width*e.scale),this.canvas.height=Math.floor(e.height*e.scale),this.canvas.style.width=e.width+"px",this.canvas.style.height=e.height+"px"),this.fontMetrics=new pr(document),this.ctx.scale(this.options.scale,this.options.scale),this.ctx.translate(-e.x+e.scrollX,-e.y+e.scrollY),this.ctx.textBaseline="bottom",this._activeEffects=[],Et.getInstance(e.id).debug("Canvas renderer initialized ("+e.width+"x"+e.height+" at "+e.x+","+e.y+") with scale "+e.scale)}return e.prototype.applyEffects=function(e,t){for(var n=this;this._activeEffects.length;)this.popEffect();e.filter(function(e){return Ai(e.target,t)}).forEach(function(e){return n.applyEffect(e)})},e.prototype.applyEffect=function(e){this.ctx.save(),function(e){return 0===e.type}(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),function(e){return 1===e.type}(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(e){return i(this,void 0,void 0,function(){var t;return a(this,function(n){switch(n.label){case 0:return(t=e.element.container.styles).isVisible()?(this.ctx.globalAlpha=t.opacity,[4,this.renderStackContent(e)]):[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(e){return i(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return t.sent(),[4,this.renderNodeContent(e)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(e,t){var n=this;0===t?this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+e.bounds.height):s(e.text).map(function(e){return l(e)}).reduce(function(t,i){return n.ctx.fillText(i,t,e.bounds.top+e.bounds.height),t+n.ctx.measureText(i).width},e.bounds.left)},e.prototype.createFontStyle=function(e){var t=e.fontVariant.filter(function(e){return"normal"===e||"small-caps"===e}).join(""),n=e.fontFamily.join(", "),i=Me(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,t,e.fontWeight,i,n].join(" "),n,i]},e.prototype.renderTextNode=function(e,t){return i(this,void 0,void 0,function(){var n,i,r,o,s=this;return a(this,function(a){return n=this.createFontStyle(t),i=n[0],r=n[1],o=n[2],this.ctx.font=i,e.textBounds.forEach(function(e){s.ctx.fillStyle=et(t.color),s.renderTextWithLetterSpacing(e,t.letterSpacing);var n=t.textShadow;n.length&&e.text.trim().length&&(n.slice(0).reverse().forEach(function(t){s.ctx.shadowColor=et(t.color),s.ctx.shadowOffsetX=t.offsetX.number*s.options.scale,s.ctx.shadowOffsetY=t.offsetY.number*s.options.scale,s.ctx.shadowBlur=t.blur.number,s.ctx.fillText(e.text,e.bounds.left,e.bounds.top+e.bounds.height)}),s.ctx.shadowColor="",s.ctx.shadowOffsetX=0,s.ctx.shadowOffsetY=0,s.ctx.shadowBlur=0),t.textDecorationLine.length&&(s.ctx.fillStyle=et(t.textDecorationColor||t.color),t.textDecorationLine.forEach(function(t){switch(t){case 1:var n=s.fontMetrics.getMetrics(r,o).baseline;s.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top+n),e.bounds.width,1);break;case 2:s.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1);break;case 3:var i=s.fontMetrics.getMetrics(r,o).middle;s.ctx.fillRect(e.bounds.left,Math.ceil(e.bounds.top+i),e.bounds.width,1)}}))}),[2]})})},e.prototype.renderReplacedElement=function(e,t,n){if(n&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var i=rr(e),a=$a(t);this.path(a),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,e.intrinsicWidth,e.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return i(this,void 0,void 0,function(){var n,i,o,s,l,c,d,u,m,f,h,g,A,b;return a(this,function(a){switch(a.label){case 0:this.applyEffects(t.effects,4),n=t.container,i=t.curves,o=n.styles,s=0,l=n.textNodes,a.label=1;case 1:return s<l.length?(c=l[s],[4,this.renderTextNode(c,o)]):[3,4];case 2:a.sent(),a.label=3;case 3:return s++,[3,1];case 4:if(!(n instanceof Ni))return[3,8];a.label=5;case 5:return a.trys.push([5,7,,8]),[4,this.options.cache.match(n.src)];case 6:return g=a.sent(),this.renderReplacedElement(n,i,g),[3,8];case 7:return a.sent(),Et.getInstance(this.options.id).error("Error loading image "+n.src),[3,8];case 8:if(n instanceof Ri&&this.renderReplacedElement(n,i,n.canvas),!(n instanceof Ui))return[3,12];a.label=9;case 9:return a.trys.push([9,11,,12]),[4,this.options.cache.match(n.svg)];case 10:return g=a.sent(),this.renderReplacedElement(n,i,g),[3,12];case 11:return a.sent(),Et.getInstance(this.options.id).error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof $i&&n.tree?[4,new e({id:this.options.id,scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,scrollX:0,scrollY:0,width:n.width,height:n.height,cache:this.options.cache,windowWidth:n.width,windowHeight:n.height}).render(n.tree)]:[3,14];case 13:d=a.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),a.label=14;case 14:if(n instanceof qi&&(u=Math.min(n.bounds.width,n.bounds.height),"checkbox"===n.type?n.checked&&(this.ctx.save(),this.path([new Ga(n.bounds.left+.39363*u,n.bounds.top+.79*u),new Ga(n.bounds.left+.16*u,n.bounds.top+.5549*u),new Ga(n.bounds.left+.27347*u,n.bounds.top+.44071*u),new Ga(n.bounds.left+.39694*u,n.bounds.top+.5649*u),new Ga(n.bounds.left+.72983*u,n.bounds.top+.23*u),new Ga(n.bounds.left+.84*u,n.bounds.top+.34085*u),new Ga(n.bounds.left+.39363*u,n.bounds.top+.79*u)]),this.ctx.fillStyle=et(707406591),this.ctx.fill(),this.ctx.restore()):"radio"===n.type&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+u/2,n.bounds.top+u/2,u/4,0,2*Math.PI,!0),this.ctx.fillStyle=et(707406591),this.ctx.fill(),this.ctx.restore())),fr(n)&&n.value.length){switch(this.ctx.font=this.createFontStyle(o)[0],this.ctx.fillStyle=et(o.color),this.ctx.textBaseline="middle",this.ctx.textAlign=gr(n.styles.textAlign),b=rr(n),m=0,n.styles.textAlign){case Nn.CENTER:m+=b.width/2;break;case Nn.RIGHT:m+=b.width}f=b.add(m,0,0,-b.height/2+1),this.ctx.save(),this.path([new Ga(b.left,b.top),new Ga(b.left+b.width,b.top),new Ga(b.left+b.width,b.top+b.height),new Ga(b.left,b.top+b.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Fi(n.value,f),o.letterSpacing),this.ctx.restore(),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"}if(!Ai(n.styles.display,2048))return[3,20];if(null===n.styles.listStyleImage)return[3,19];if((h=n.styles.listStyleImage).type!==dt.URL)return[3,18];g=void 0,A=h.url,a.label=15;case 15:return a.trys.push([15,17,,18]),[4,this.options.cache.match(A)];case 16:return g=a.sent(),this.ctx.drawImage(g,n.bounds.left-(g.width+10),n.bounds.top),[3,18];case 17:return a.sent(),Et.getInstance(this.options.id).error("Error loading list-style-image "+A),[3,18];case 18:return[3,20];case 19:t.listValue&&n.styles.listStyleType!==On.NONE&&(this.ctx.font=this.createFontStyle(o)[0],this.ctx.fillStyle=et(o.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",b=new r(n.bounds.left,n.bounds.top+ze(n.styles.paddingTop,n.bounds.width),n.bounds.width,function(e,t){return De(e)&&"normal"===e.value?1.2*t:e.type===p.NUMBER_TOKEN?t*e.number:Ve(e)?ze(e,t):t}(o.lineHeight,o.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Fi(t.listValue,b),o.letterSpacing),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),a.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(e){return i(this,void 0,void 0,function(){var t,n,i,r,o,s,l,c,d,u,p,m,f,h,g;return a(this,function(a){switch(a.label){case 0:return[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:a.sent(),t=0,n=e.negativeZIndex,a.label=2;case 2:return t<n.length?(g=n[t],[4,this.renderStack(g)]):[3,5];case 3:a.sent(),a.label=4;case 4:return t++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:a.sent(),i=0,r=e.nonInlineLevel,a.label=7;case 7:return i<r.length?(g=r[i],[4,this.renderNode(g)]):[3,10];case 8:a.sent(),a.label=9;case 9:return i++,[3,7];case 10:o=0,s=e.nonPositionedFloats,a.label=11;case 11:return o<s.length?(g=s[o],[4,this.renderStack(g)]):[3,14];case 12:a.sent(),a.label=13;case 13:return o++,[3,11];case 14:l=0,c=e.nonPositionedInlineLevel,a.label=15;case 15:return l<c.length?(g=c[l],[4,this.renderStack(g)]):[3,18];case 16:a.sent(),a.label=17;case 17:return l++,[3,15];case 18:d=0,u=e.inlineLevel,a.label=19;case 19:return d<u.length?(g=u[d],[4,this.renderNode(g)]):[3,22];case 20:a.sent(),a.label=21;case 21:return d++,[3,19];case 22:p=0,m=e.zeroOrAutoZIndexOrTransformedOrOpacity,a.label=23;case 23:return p<m.length?(g=m[p],[4,this.renderStack(g)]):[3,26];case 24:a.sent(),a.label=25;case 25:return p++,[3,23];case 26:f=0,h=e.positiveZIndex,a.label=27;case 27:return f<h.length?(g=h[f],[4,this.renderStack(g)]):[3,30];case 28:a.sent(),a.label=29;case 29:return f++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},e.prototype.formatPath=function(e){var t=this;e.forEach(function(e,n){var i=qa(e)?e.start:e;0===n?t.ctx.moveTo(i.x,i.y):t.ctx.lineTo(i.x,i.y),qa(e)&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)})},e.prototype.renderRepeat=function(e,t,n,i){this.path(e),this.ctx.fillStyle=t,this.ctx.translate(n,i),this.ctx.fill(),this.ctx.translate(-n,-i)},e.prototype.resizeImage=function(e,t,n){if(e.width===t&&e.height===n)return e;var i=this.canvas.ownerDocument.createElement("canvas");return i.width=t,i.height=n,i.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,n),i},e.prototype.renderBackgroundImage=function(e){return i(this,void 0,void 0,function(){var t,n,i,r,o,s;return a(this,function(l){switch(l.label){case 0:t=e.styles.backgroundImage.length-1,n=function(n){var r,o,s,l,c,d,u,p,m,f,h,g,A,b,y,v,C,x,w,S,E,I,O,T,F,B,M,P,D,k,_;return a(this,function(a){switch(a.label){case 0:if(n.type!==dt.URL)return[3,5];r=void 0,o=n.url,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,i.options.cache.match(o)];case 2:return r=a.sent(),[3,4];case 3:return a.sent(),Et.getInstance(i.options.id).error("Error loading background-image "+o),[3,4];case 4:return r&&(s=or(e,t,[r.width,r.height,r.width/r.height]),v=s[0],I=s[1],O=s[2],w=s[3],S=s[4],b=i.ctx.createPattern(i.resizeImage(r,w,S),"repeat"),i.renderRepeat(v,b,I,O)),[3,6];case 5:n.type===dt.LINEAR_GRADIENT?(l=or(e,t,[null,null,null]),v=l[0],I=l[1],O=l[2],w=l[3],S=l[4],c=At(n.angle,w,S),d=c[0],u=c[1],p=c[2],m=c[3],f=c[4],(h=document.createElement("canvas")).width=w,h.height=S,g=h.getContext("2d"),A=g.createLinearGradient(u,m,p,f),gt(n.stops,d).forEach(function(e){return A.addColorStop(e.stop,et(e.color))}),g.fillStyle=A,g.fillRect(0,0,w,S),w>0&&S>0&&(b=i.ctx.createPattern(h,"repeat"),i.renderRepeat(v,b,I,O))):function(e){return e.type===dt.RADIAL_GRADIENT}(n)&&(y=or(e,t,[null,null,null]),v=y[0],C=y[1],x=y[2],w=y[3],S=y[4],E=0===n.position.length?[He]:n.position,I=ze(E[0],w),O=ze(E[E.length-1],S),T=function(e,t,n,i,a){var r=0,o=0;switch(e.size){case pt.CLOSEST_SIDE:e.shape===ut.CIRCLE?r=o=Math.min(Math.abs(t),Math.abs(t-i),Math.abs(n),Math.abs(n-a)):e.shape===ut.ELLIPSE&&(r=Math.min(Math.abs(t),Math.abs(t-i)),o=Math.min(Math.abs(n),Math.abs(n-a)));break;case pt.CLOSEST_CORNER:if(e.shape===ut.CIRCLE)r=o=Math.min(bt(t,n),bt(t,n-a),bt(t-i,n),bt(t-i,n-a));else if(e.shape===ut.ELLIPSE){var s=Math.min(Math.abs(n),Math.abs(n-a))/Math.min(Math.abs(t),Math.abs(t-i)),l=yt(i,a,t,n,!0),c=l[0],d=l[1];o=s*(r=bt(c-t,(d-n)/s))}break;case pt.FARTHEST_SIDE:e.shape===ut.CIRCLE?r=o=Math.max(Math.abs(t),Math.abs(t-i),Math.abs(n),Math.abs(n-a)):e.shape===ut.ELLIPSE&&(r=Math.max(Math.abs(t),Math.abs(t-i)),o=Math.max(Math.abs(n),Math.abs(n-a)));break;case pt.FARTHEST_CORNER:if(e.shape===ut.CIRCLE)r=o=Math.max(bt(t,n),bt(t,n-a),bt(t-i,n),bt(t-i,n-a));else if(e.shape===ut.ELLIPSE){s=Math.max(Math.abs(n),Math.abs(n-a))/Math.max(Math.abs(t),Math.abs(t-i));var u=yt(i,a,t,n,!1);c=u[0],d=u[1],o=s*(r=bt(c-t,(d-n)/s))}}return Array.isArray(e.size)&&(r=ze(e.size[0],i),o=2===e.size.length?ze(e.size[1],a):r),[r,o]}(n,I,O,w,S),F=T[0],B=T[1],F>0&&F>0&&(M=i.ctx.createRadialGradient(C+I,x+O,0,C+I,x+O,F),gt(n.stops,2*F).forEach(function(e){return M.addColorStop(e.stop,et(e.color))}),i.path(v),i.ctx.fillStyle=M,F!==B?(P=e.bounds.left+.5*e.bounds.width,D=e.bounds.top+.5*e.bounds.height,_=1/(k=B/F),i.ctx.save(),i.ctx.translate(P,D),i.ctx.transform(1,0,0,k,0,0),i.ctx.translate(-P,-D),i.ctx.fillRect(C,_*(x-D)+D,w,S*_),i.ctx.restore()):i.ctx.fill())),a.label=6;case 6:return t--,[2]}})},i=this,r=0,o=e.styles.backgroundImage.slice(0).reverse(),l.label=1;case 1:return r<o.length?(s=o[r],[5,n(s)]):[3,4];case 2:l.sent(),l.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},e.prototype.renderBorder=function(e,t,n){return i(this,void 0,void 0,function(){return a(this,function(i){return this.path(function(e,t){switch(t){case 0:return ir(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return ir(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return ir(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return ir(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}}(n,t)),this.ctx.fillStyle=et(e),this.ctx.fill(),[2]})})},e.prototype.renderNodeBackgroundAndBorders=function(e){return i(this,void 0,void 0,function(){var t,n,i,r,o,s,l,c,d=this;return a(this,function(a){switch(a.label){case 0:return this.applyEffects(e.effects,2),t=e.container.styles,n=!Ze(t.backgroundColor)||t.backgroundImage.length,i=[{style:t.borderTopStyle,color:t.borderTopColor},{style:t.borderRightStyle,color:t.borderRightColor},{style:t.borderBottomStyle,color:t.borderBottomColor},{style:t.borderLeftStyle,color:t.borderLeftColor}],r=hr(dr(t.backgroundClip,0),e.curves),n||t.boxShadow.length?(this.ctx.save(),this.path(r),this.ctx.clip(),Ze(t.backgroundColor)||(this.ctx.fillStyle=et(t.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:a.sent(),this.ctx.restore(),t.boxShadow.slice(0).reverse().forEach(function(t){d.ctx.save();var n,i,a,r,o,s=Xa(e.curves),l=t.inset?0:1e4,c=(n=s,i=-l+(t.inset?1:-1)*t.spread.number,a=(t.inset?1:-1)*t.spread.number,r=t.spread.number*(t.inset?-2:2),o=t.spread.number*(t.inset?-2:2),n.map(function(e,t){switch(t){case 0:return e.add(i,a);case 1:return e.add(i+r,a);case 2:return e.add(i+r,a+o);case 3:return e.add(i,a+o)}return e}));t.inset?(d.path(s),d.ctx.clip(),d.mask(c)):(d.mask(s),d.ctx.clip(),d.path(c)),d.ctx.shadowOffsetX=t.offsetX.number+l,d.ctx.shadowOffsetY=t.offsetY.number,d.ctx.shadowColor=et(t.color),d.ctx.shadowBlur=t.blur.number,d.ctx.fillStyle=t.inset?et(t.color):"rgba(0,0,0,1)",d.ctx.fill(),d.ctx.restore()}),a.label=2;case 2:o=0,s=0,l=i,a.label=3;case 3:return s<l.length?(c=l[s]).style===qt.NONE||Ze(c.color)?[3,5]:[4,this.renderBorder(c.color,o,e.curves)]:[3,7];case 4:a.sent(),a.label=5;case 5:o++,a.label=6;case 6:return s++,[3,3];case 7:return[2]}})})},e.prototype.render=function(e){return i(this,void 0,void 0,function(){var t;return a(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=et(this.options.backgroundColor),this.ctx.fillRect(this.options.x-this.options.scrollX,this.options.y-this.options.scrollY,this.options.width,this.options.height)),t=nr(e),[4,this.renderStack(t)];case 1:return n.sent(),this.applyEffects([],2),[2,this.canvas]}})})},e}(),fr=function(e){return e instanceof Wi||e instanceof zi||e instanceof qi&&"radio"!==e.type&&"checkbox"!==e.type},hr=function(e,t){switch(e){case ot.BORDER_BOX:return Xa(t);case ot.CONTENT_BOX:return function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]}(t);case ot.PADDING_BOX:default:return $a(t)}},gr=function(e){switch(e){case Nn.CENTER:return"center";case Nn.RIGHT:return"right";case Nn.LEFT:default:return"left"}},Ar=function(){function e(e){this.canvas=e.canvas?e.canvas:document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.options=e,this.canvas.width=Math.floor(e.width*e.scale),this.canvas.height=Math.floor(e.height*e.scale),this.canvas.style.width=e.width+"px",this.canvas.style.height=e.height+"px",this.ctx.scale(this.options.scale,this.options.scale),this.ctx.translate(-e.x+e.scrollX,-e.y+e.scrollY),Et.getInstance(e.id).debug("EXPERIMENTAL ForeignObject renderer initialized ("+e.width+"x"+e.height+" at "+e.x+","+e.y+") with scale "+e.scale)}return e.prototype.render=function(e){return i(this,void 0,void 0,function(){var t,n;return a(this,function(i){switch(i.label){case 0:return t=xt(Math.max(this.options.windowWidth,this.options.width)*this.options.scale,Math.max(this.options.windowHeight,this.options.height)*this.options.scale,this.options.scrollX*this.options.scale,this.options.scrollY*this.options.scale,e),[4,br(t)];case 1:return n=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=et(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(),br=function(e){return new Promise(function(t,n){var i=new Image;i.onload=function(){t(i)},i.onerror=n,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))})},yr=function(e){return Ye(Be.create(e).parseComponentValue())};"undefined"!=typeof window&&It.setContext(window);var vr=function(e,t){return i(void 0,void 0,void 0,function(){var i,s,l,c,d,u,p,m,f,h,g,A,b,y,v,C,x,w,S,E,I,O,T;return a(this,function(a){switch(a.label){case 0:if(!(i=e.ownerDocument))throw new Error("Element is not attached to a Document");if(!(s=i.defaultView))throw new Error("Document is not attached to a Window");return l=(Math.round(1e3*Math.random())+Date.now()).toString(16),c=da(e)||"HTML"===e.tagName?function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw new Error("Unable to get document size");var i=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),a=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new r(0,0,i,a)}(i):o(e),d=c.width,u=c.height,p=c.left,m=c.top,f=n({},{allowTaint:!1,imageTimeout:15e3,proxy:void 0,useCORS:!1},t),h={backgroundColor:"#ffffff",cache:t.cache?t.cache:It.create(l,f),logging:!0,removeContainer:!0,foreignObjectRendering:!1,scale:s.devicePixelRatio||1,windowWidth:s.innerWidth,windowHeight:s.innerHeight,scrollX:s.pageXOffset,scrollY:s.pageYOffset,x:p,y:m,width:Math.ceil(d),height:Math.ceil(u),id:l},g=n({},h,f,t),A=new r(g.scrollX,g.scrollY,g.windowWidth,g.windowHeight),Et.create({id:l,enabled:g.logging}),Et.getInstance(l).debug("Starting document clone"),b=new Fa(e,{id:l,onclone:g.onclone,ignoreElements:g.ignoreElements,inlineImages:g.foreignObjectRendering,copyStyles:g.foreignObjectRendering}),(y=b.clonedReferenceElement)?[4,b.toIFrame(i,A)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return v=a.sent(),C=i.documentElement?yr(getComputedStyle(i.documentElement).backgroundColor):ct.TRANSPARENT,x=i.body?yr(getComputedStyle(i.body).backgroundColor):ct.TRANSPARENT,w=t.backgroundColor,S="string"==typeof w?yr(w):null===w?ct.TRANSPARENT:4294967295,E=e===i.documentElement?Ze(C)?Ze(x)?S:x:C:S,I={id:l,cache:g.cache,canvas:g.canvas,backgroundColor:E,scale:g.scale,x:g.x,y:g.y,scrollX:g.scrollX,scrollY:g.scrollY,width:g.width,height:g.height,windowWidth:g.windowWidth,windowHeight:g.windowHeight},g.foreignObjectRendering?(Et.getInstance(l).debug("Document cloned, using foreign object rendering"),[4,new Ar(I).render(y)]):[3,3];case 2:return O=a.sent(),[3,5];case 3:return Et.getInstance(l).debug("Document cloned, using computed rendering"),It.attachInstance(g.cache),Et.getInstance(l).debug("Starting DOM parsing"),T=Zi(y),It.detachInstance(),E===T.styles.backgroundColor&&(T.styles.backgroundColor=ct.TRANSPARENT),Et.getInstance(l).debug("Starting renderer"),[4,new mr(I).render(T)];case 4:O=a.sent(),a.label=5;case 5:return!0===g.removeContainer&&(Fa.destroy(v)||Et.getInstance(l).error("Cannot detach cloned iframe as it is not in the DOM anymore")),Et.getInstance(l).debug("Finished rendering"),Et.destroy(l),It.destroy(l),[2,O]}})})};return function(e,t){return void 0===t&&(t={}),vr(e,t)}}())},wSoN:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("fXoL"),a=n("Y8nr"),r=n("tk/3"),o=function(){function e(e){this.http=e}return e.prototype.getOAuth2Settings=function(e){return this.http.get("/api/oauth2/config",Object(a.b)(e))},e.prototype.getOAuth2Template=function(e){return this.http.get("/api/oauth2/config/template",Object(a.b)(e))},e.prototype.saveOAuth2Settings=function(e,t){return this.http.post("/api/oauth2/config",e,Object(a.b)(t))},e.prototype.getLoginProcessingUrl=function(e){return this.http.get("/api/oauth2/loginProcessingUrl",Object(a.b)(e))},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](r.HttpClient))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();0,void 0},wst2:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("fXoL"),a=n("ofXK"),r=n("PCNd"),o=n("10j8"),s=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({imports:[[a.CommonModule,r.a]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](s,{declarations:[o.a],imports:[a.CommonModule,r.a],exports:[o.a]})),0},x7Md:function(e,t,n){"use strict";n.d(t,"a",function(){return x});var i=n("mrSG"),a=n("fXoL"),r=n("rDax"),o=n("//Q6"),s=n("xw5a"),l=n("xze0"),c=n("+rOU"),d=n("A1kC"),u=n("sYmb"),p=n("0MNC"),m=n("0IaG"),f=n("ofXK"),h=n("XiUz"),g=n("bTqV"),A=n("Qu3c"),b=n("NFeN"),y=n("znSr"),v=["filtersEditPanelOrigin"];function C(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"section",1),a["\u0275\u0275elementStart"](1,"button",2,3),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().openEditMode()}),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementStart"](4,"mat-icon"),a["\u0275\u0275text"](5,"filter_list"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"span",4),a["\u0275\u0275listener"]("click",function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().openEditMode()}),a["\u0275\u0275pipe"](7,"translate"),a["\u0275\u0275text"](8),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](3,5,"filter.filters")),a["\u0275\u0275property"]("matTooltipPosition",i.tooltipPosition),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](7,7,"filter.filters")),a["\u0275\u0275property"]("matTooltipPosition",i.tooltipPosition),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](9,9,"filter.filters")," ")}}var x=function(){function e(e,t,n,i,a){this.translate=e,this.overlay=t,this.breakpointObserver=n,this.viewContainerRef=i,this.dialog=a,this.tooltipPosition="above",this.filtersInfo={},this.hasEditableFilters=!1,this.rxSubscriptions=new Array}return Object.defineProperty(e.prototype,"aliasController",{get:function(){return this.aliasControllerValue},set:function(e){this.aliasControllerValue=e,this.setupAliasController(this.aliasControllerValue)},enumerable:!1,configurable:!0}),e.prototype.setupAliasController=function(e){var t=this;this.rxSubscriptions.forEach(function(e){e.unsubscribe()}),this.rxSubscriptions.length=0,e&&(this.rxSubscriptions.push(e.filtersChanged.subscribe(function(){setTimeout(function(){t.updateFiltersInfo()},0)})),setTimeout(function(){t.updateFiltersInfo()},0))},e.prototype.ngOnInit=function(){},e.prototype.ngOnDestroy=function(){this.rxSubscriptions.forEach(function(e){e.unsubscribe()}),this.rxSubscriptions.length=0},e.prototype.openEditMode=function(){var e=this;if(!this.disabled&&this.hasEditableFilters){var t=Object.entries(this.filtersInfo);if(1===t.length){var n=Object(i.a)({id:t[0][0]},t[0][1]);this.dialog.open(d.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{filter:n}}).afterClosed().subscribe(function(t){t&&(e.filtersInfo[t.id]=t,e.aliasController.updateUserFilter(t))})}else{var a=this.overlay.position(),s=new r.OverlayConfig({panelClass:"tb-filters-edit-panel",backdropClass:"cdk-overlay-transparent-backdrop",hasBackdrop:!0});s.positionStrategy=a.flexibleConnectedTo(this.filtersEditPanelOrigin.elementRef).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}]);var u=this.overlay.create(s);u.backdropClick().subscribe(function(){u.dispose()});var p=this._createFiltersEditPanelInjector(u,{aliasController:this.aliasController,filtersInfo:Object(o.e)(this.filtersInfo)});u.attach(new c.ComponentPortal(l.b,this.viewContainerRef,p))}}},e.prototype._createFiltersEditPanelInjector=function(e,t){var n=[{provide:l.a,useValue:t},{provide:r.OverlayRef,useValue:e}];return a.Injector.create({parent:this.viewContainerRef.injector,providers:n})},e.prototype.updateFiltersInfo=function(){var e=this.aliasController.getFilters();this.filtersInfo={},this.hasEditableFilters=!1;for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t],a=this.aliasController.getFilterInfo(i);a&&Object(s.D)(a)&&(this.filtersInfo[i]=Object(o.e)(a),this.hasEditableFilters=!0)}},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](u.TranslateService),a["\u0275\u0275directiveInject"](r.Overlay),a["\u0275\u0275directiveInject"](p.BreakpointObserver),a["\u0275\u0275directiveInject"](a.ViewContainerRef),a["\u0275\u0275directiveInject"](m.MatDialog))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-filters-edit"]],viewQuery:function(e,t){if(1&e&&a["\u0275\u0275viewQuery"](v,1),2&e){var n;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.filtersEditPanelOrigin=n.first)}},inputs:{aliasController:"aliasController",tooltipPosition:"tooltipPosition",disabled:"disabled"},decls:1,vars:1,consts:[["class","tb-filters-edit","fxLayout","row","fxLayoutAlign","start center",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center",1,"tb-filters-edit"],["mat-icon-button","","cdkOverlayOrigin","",3,"matTooltip","matTooltipPosition","click"],["filtersEditPanelOrigin","cdkOverlayOrigin"],["fxHide.lt-lg","",3,"matTooltip","matTooltipPosition","click"]],template:function(e,t){1&e&&a["\u0275\u0275template"](0,C,10,11,"section",0),2&e&&a["\u0275\u0275property"]("ngIf",t.hasEditableFilters)},directives:[f.NgIf,h.f,h.e,g.MatButton,r.CdkOverlayOrigin,A.MatTooltip,b.MatIcon,y.d],pipes:[u.TranslatePipe],styles:["[_nghost-%COMP%]   section.tb-filters-edit[_ngcontent-%COMP%]{min-height:32px;padding:0 6px}@media screen and (max-width:959px){[_nghost-%COMP%]   section.tb-filters-edit[_ngcontent-%COMP%]{padding:0}}[_nghost-%COMP%]   section.tb-filters-edit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;pointer-events:all;cursor:pointer}"]}),e}();0,void 0},xFtW:function(e,t,n){"use strict";n.d(t,"a",function(){return S});var i=n("DaoB"),a=n("1y+p"),r=n("BsGH"),o=n("Bjlt"),s=n("21Fy"),l=n("S+vS"),c=n("g8Nv"),d=n("ofXK"),u=n("OiFK"),p=n("sYmb"),m=n("tk/3"),f=n("j37L"),h=n("ktVl"),g=n("YnEf"),A=n("9D3k"),b=n("7ZKe"),y=n("tyNb"),v=n("gM18"),C=n("9HAa"),x=n("g+M/"),w=n("Dnot"),S=new Map([["broadcastService",v.a],["deviceService",i.a],["alarmService",b.a],["assetService",a.a],["entityViewService",f.a],["customerService",h.a],["dashboardService",g.a],["userService",A.a],["attributeService",r.a],["entityRelationService",o.a],["entityService",s.a],["dialogs",l.a],["customDialog",c.a],["date",d.DatePipe],["utils",u.a],["translate",p.TranslateService],["http",m.HttpClient],["router",y.Router],["importExport",C.a],["deviceProfileService",x.a],["otaPackageService",w.a]])},xRAe:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return ce});var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=(n("0G7Z"),n("0lYY")),s=n("OiFK"),l=n("//Q6"),c=n("Neop"),d=n("mbhL"),u=n("4r/P"),p=n("xgIS"),m=n("VRyK"),f=n("2Vo4"),h=n("LRne"),g=n("Duvn"),A=n("Kj3r"),b=n("/uUt"),y=n("vkgz"),v=n("JIr8"),C=n("lJxs"),x=n("M9IT"),w=n("Dh3D"),S=n("fr2l"),E=n("l7P3"),I=n("rDax"),O=n("sYmb"),T=n("jhN1"),F=n("ofXK"),B=n("XiUz"),M=n("/t3+"),P=n("znSr"),D=n("bTqV"),k=n("Qu3c"),_=n("NFeN"),L=n("kmnG"),j=n("qFsG"),N=n("3Pt+"),R=n("wZkO"),U=n("+0xr"),V=n("STbY"),Q=n("f0Cb"),G=["searchInput"];function H(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",28),a["\u0275\u0275text"](1,"Timestamp"),a["\u0275\u0275elementEnd"]())}function K(e,t){if(1&e&&a["\u0275\u0275element"](0,"mat-cell",29),2&e){var n=t.$implicit,i=t.index,r=a["\u0275\u0275nextContext"](3).$implicit,o=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("innerHTML",o.cellContent(r,0,n,n[0],i),a["\u0275\u0275sanitizeHtml"])("ngStyle",o.cellStyle(r,0,n,n[0],i))}}function q(e,t){1&e&&(a["\u0275\u0275elementContainerStart"](0,25),a["\u0275\u0275template"](1,H,2,0,"mat-header-cell",26),a["\u0275\u0275template"](2,K,1,2,"mat-cell",27),a["\u0275\u0275elementContainerEnd"]()),2&e&&a["\u0275\u0275property"]("matColumnDef","0")}function z(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",28),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.dataKey.label," ")}}function W(e,t){if(1&e&&a["\u0275\u0275element"](0,"mat-cell",29),2&e){var n=t.$implicit,i=t.index,r=a["\u0275\u0275nextContext"]().$implicit,o=a["\u0275\u0275nextContext"](2).$implicit,s=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("innerHTML",s.cellContent(o,r.index,n,n[r.index],i),a["\u0275\u0275sanitizeHtml"])("ngStyle",s.cellStyle(o,r.index,n,n[r.index],i))}}function X(e,t){if(1&e&&(a["\u0275\u0275elementContainerStart"](0,25),a["\u0275\u0275template"](1,z,2,1,"mat-header-cell",26),a["\u0275\u0275template"](2,W,1,2,"mat-cell",27),a["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;a["\u0275\u0275property"]("matColumnDef",n.index+"")}}var $=function(e,t,n){return{minWidth:e,maxWidth:t,width:n}};function J(e,t){if(1&e&&a["\u0275\u0275element"](0,"mat-header-cell",30),2&e){var n=a["\u0275\u0275nextContext"](3);a["\u0275\u0275property"]("ngStyle.gt-md",a["\u0275\u0275pureFunction3"](1,$,40*n.actionCellDescriptors.length+"px",40*n.actionCellDescriptors.length+"px",40*n.actionCellDescriptors.length+"px"))}}function Y(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",34),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit,r=a["\u0275\u0275nextContext"]().$implicit;return a["\u0275\u0275nextContext"](3).onActionButtonClick(e,r,i)}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=a["\u0275\u0275nextContext"](4);a["\u0275\u0275propertyInterpolate"]("matTooltip",i.displayName),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,3,r.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](i.icon)}}function Z(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",41),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit,r=a["\u0275\u0275nextContext"](2).$implicit;return a["\u0275\u0275nextContext"](3).onActionButtonClick(e,r,i)}),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"span"),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=a["\u0275\u0275nextContext"](5);a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,3,r.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](i.icon),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](i.displayName)}}function ee(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",35),a["\u0275\u0275elementStart"](1,"button",36),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var t=a["\u0275\u0275nextContext"](4);return e.stopPropagation(),t.ctx.detectChanges()}),a["\u0275\u0275elementStart"](2,"mat-icon",37),a["\u0275\u0275text"](3,"more_vert"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"mat-menu",38,39),a["\u0275\u0275template"](6,Z,6,5,"button",40),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275reference"](5),r=a["\u0275\u0275nextContext"](4);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("matMenuTriggerFor",i),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngForOf",r.actionCellDescriptors)("ngForTrackBy",r.trackByActionCellDescriptionId)}}function te(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-cell",30),a["\u0275\u0275elementStart"](1,"div",31),a["\u0275\u0275template"](2,Y,4,5,"button",32),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](3,ee,7,3,"div",33),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](3);a["\u0275\u0275property"]("ngStyle.gt-md",a["\u0275\u0275pureFunction3"](4,$,40*n.actionCellDescriptors.length+"px",40*n.actionCellDescriptors.length+"px",40*n.actionCellDescriptors.length+"px")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",n.actionCellDescriptors)("ngForTrackBy",n.trackByActionCellDescriptionId),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.actionCellDescriptors.length)}}function ne(e,t){1&e&&a["\u0275\u0275element"](0,"mat-header-row")}function ie(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-row",42),a["\u0275\u0275listener"]("click",function(e){a["\u0275\u0275restoreView"](n);var i=t.$implicit;return a["\u0275\u0275nextContext"](3).onRowClick(e,i)}),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=t.index,o=a["\u0275\u0275nextContext"](2).$implicit,s=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle",s.rowStyle(o,i,r))}}function ae(e,t){1&e&&a["\u0275\u0275element"](0,"mat-divider")}function re(e,t){if(1&e&&(a["\u0275\u0275element"](0,"mat-paginator",43),a["\u0275\u0275pipe"](1,"async")),2&e){var n=a["\u0275\u0275nextContext"](2).$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("length",a["\u0275\u0275pipeBind1"](1,4,n.timeseriesDatasource.total()))("pageIndex",n.pageLink.page)("pageSize",n.pageLink.pageSize)("pageSizeOptions",i.pageSizeOptions)}}function oe(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",13),a["\u0275\u0275elementStart"](1,"table",14),a["\u0275\u0275template"](2,q,3,1,"ng-container",15),a["\u0275\u0275template"](3,X,3,1,"ng-container",16),a["\u0275\u0275elementContainerStart"](4,17),a["\u0275\u0275template"](5,J,1,5,"mat-header-cell",18),a["\u0275\u0275template"](6,te,4,8,"mat-cell",19),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275template"](7,ne,1,0,"mat-header-row",20),a["\u0275\u0275template"](8,ie,1,1,"mat-row",21),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"span",22),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275text"](11,"widget.no-data-found"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](12,ae,1,0,"mat-divider",23),a["\u0275\u0275template"](13,re,2,6,"mat-paginator",24)),2&e){var n=a["\u0275\u0275nextContext"]().$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("dataSource",n.timeseriesDatasource)("trackBy",i.trackByRowTimestamp)("matSortActive",n.pageLink.sortOrder.property)("matSortDirection",n.pageLink.sortDirection()),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",i.showTimestamp),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",n.header)("ngForTrackBy",i.trackByColumnIndex),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("stickyEnd",i.enableStickyAction),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",i.enableStickyHeader),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("matRowDefColumns",n.displayedColumns),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",a["\u0275\u0275pipeBind1"](10,14,n.timeseriesDatasource.isEmpty())),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",i.displayPagination),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",i.displayPagination)}}function se(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-tab",11),a["\u0275\u0275template"](1,oe,14,16,"ng-template",12),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=t.index,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("label",r.getTabLabel(n)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",r.isActiveTab(i))}}var le=function(e){return{"tb-headless":e}},ce=function(t){function n(e,n,i,a,r,o,s,l,c){var d=t.call(this,e)||this;return d.store=e,d.elementRef=n,d.ngZone=i,d.overlay=a,d.viewContainerRef=r,d.utils=o,d.translate=s,d.domSanitizer=l,d.datePipe=c,d.displayPagination=!0,d.enableStickyHeader=!0,d.enableStickyAction=!0,d.textSearchMode=!1,d.textSearch=null,d.cellContentCache=[],d.cellStyleCache=[],d.rowStyleCache=[],d.defaultPageSize=10,d.defaultSortOrder="-0",d.hideEmptyLines=!1,d.showTimestamp=!0,d.useEntityLabel=!1,d.subscriptions=[],d.searchAction={name:"action.search",show:!0,icon:"search",onAction:function(){d.enterFilterMode()}},d}return Object(i.d)(n,t),n.prototype.ngOnInit=function(){this.ctx.$scope.timeseriesTableWidget=this,this.settings=this.ctx.settings,this.widgetConfig=this.ctx.widgetConfig,this.data=this.ctx.data,this.datasources=this.ctx.datasources,this.initialize(),this.ctx.updateWidgetParams()},n.prototype.ngAfterViewInit=function(){var e=this;Object(p.a)(this.searchInputField.nativeElement,"keyup").pipe(Object(A.a)(150),Object(b.a)(),Object(y.a)(function(){e.sources.forEach(function(t){t.pageLink.textSearch=e.textSearch,e.displayPagination&&(t.pageLink.page=0)}),e.loadCurrentSourceRow(),e.ctx.detectChanges()})).subscribe(),this.sorts.changes.subscribe(function(){e.initSubscriptionsToSortAndPaginator()}),this.initSubscriptionsToSortAndPaginator()},n.prototype.onDataUpdated=function(){this.updateCurrentSourceData(),this.clearCache()},n.prototype.initialize=function(){this.ctx.widgetActions=[this.searchAction],this.actionCellDescriptors=this.ctx.actionsApi.getActionDescriptors("actionCellButton"),this.searchAction.show=!Object(l.n)(this.settings.enableSearch)||this.settings.enableSearch,this.displayPagination=!Object(l.n)(this.settings.displayPagination)||this.settings.displayPagination,this.enableStickyHeader=!Object(l.n)(this.settings.enableStickyHeader)||this.settings.enableStickyHeader,this.enableStickyAction=!Object(l.n)(this.settings.enableStickyAction)||this.settings.enableStickyAction,this.hideEmptyLines=!!Object(l.n)(this.settings.hideEmptyLines)&&this.settings.hideEmptyLines,this.useEntityLabel=!!Object(l.n)(this.widgetConfig.settings.useEntityLabel)&&this.widgetConfig.settings.useEntityLabel,this.showTimestamp=!1!==this.settings.showTimestamp,this.dateFormatFilter=!0!==this.settings.showMilliseconds?"yyyy-MM-dd HH:mm:ss":"yyyy-MM-dd HH:mm:ss.SSS",this.rowStylesInfo=Object(S.m)(this.settings,"rowData, ctx");var t=this.settings.defaultPageSize;Object(l.n)(t)&&Object(l.x)(t)&&t>0&&(this.defaultPageSize=t),this.pageSizeOptions=[this.defaultPageSize,2*this.defaultPageSize,3*this.defaultPageSize];var n=Object(S.a)(this.widgetConfig);n+=".tb-table-widget mat-toolbar.mat-table-toolbar:not([color=primary]) {\nbackground-color: "+(this.widgetConfig.backgroundColor||"rgb(255, 255, 255)")+" !important;\n}\n";var i=new c.a;i.testMode=!1;var a="ts-table-"+Object(l.l)(n);i.cssPreviewNamespace=a,i.createStyleElement(a,n),e(this.elementRef.nativeElement).addClass(a),this.updateDatasources()},n.prototype.getTabLabel=function(e){return this.useEntityLabel&&e.datasource.entityLabel||e.datasource.entityName},n.prototype.updateDatasources=function(){this.sources=[],this.sourceIndex=0;var e=0,t=this.displayPagination?this.defaultPageSize:Number.POSITIVE_INFINITY;if(this.datasources)for(var n=0,i=this.datasources;n<i.length;n++){var a=i[n],r=Object(u.b)(this.defaultSortOrder),o={};o.keyStartIndex=e,e+=a.dataKeys.length,o.keyEndIndex=e,o.datasource=a,o.data=[],o.rawData=[],o.displayedColumns=[],o.pageLink=new d.b(t,0,null,r),o.header=[],o.stylesInfo=[],o.contentsInfo=[],o.rowDataTemplate={},o.rowDataTemplate.Timestamp=null,this.showTimestamp&&o.displayedColumns.push("0");for(var s=0;s<a.dataKeys.length;s++){var l=a.dataKeys[s],c=l.settings,p=s+1;o.header.push({index:p,dataKey:l}),o.displayedColumns.push(p+""),o.rowDataTemplate[l.label]=null,o.stylesInfo.push(Object(S.h)(c,"value, rowData, ctx"));var m=Object(S.g)(c,"value, rowData, ctx");m.units=l.units,m.decimals=l.decimals,o.contentsInfo.push(m)}this.actionCellDescriptors.length&&o.displayedColumns.push("actions"),new de(o,this.hideEmptyLines,this.dateFormatFilter,this.datePipe,this.ngZone).dataUpdated(this.data),this.sources.push(o)}this.updateActiveEntityInfo()},n.prototype.updateActiveEntityInfo=function(){var e=this.sources[this.sourceIndex],t=null;if(e){var n=e.datasource;n.type===o.a.entity&&n.entityType&&n.entityId&&(t={entityId:{entityType:n.entityType,id:n.entityId},entityName:n.entityName,entityLabel:n.entityLabel,entityDescription:n.entityDescription})}this.ctx.activeEntityInfo=t},n.prototype.initSubscriptionsToSortAndPaginator=function(){var e=this;this.subscriptions.forEach(function(e){return e.unsubscribe()}),this.sorts.forEach(function(t,n){var i=null,a=[t.sortChange];e.displayPagination&&(i=e.paginators.toArray()[n],e.subscriptions.push(t.sortChange.subscribe(function(){return i.pageIndex=0})),a.push(i.page)),e.updateData(t,i),e.subscriptions.push(m.a.apply(void 0,a).pipe(Object(y.a)(function(){return e.updateData(t,i)})).subscribe())})},n.prototype.onSourceIndexChanged=function(){this.updateCurrentSourceData(),this.updateActiveEntityInfo(),this.clearCache()},n.prototype.enterFilterMode=function(){var e=this;this.textSearchMode=!0,this.textSearch="",this.sources.forEach(function(t){t.pageLink.textSearch=e.textSearch}),this.ctx.hideTitlePanel=!0,this.ctx.detectChanges(!0),setTimeout(function(){e.searchInputField.nativeElement.focus(),e.searchInputField.nativeElement.setSelectionRange(0,0)},10)},n.prototype.exitFilterMode=function(){var e=this;this.textSearchMode=!1,this.textSearch=null,this.sources.forEach(function(t){t.pageLink.textSearch=e.textSearch,e.displayPagination&&(t.pageLink.page=0)}),this.loadCurrentSourceRow(),this.ctx.hideTitlePanel=!1,this.ctx.detectChanges(!0)},n.prototype.updateData=function(e,t){var n=this.sources[this.sourceIndex];this.displayPagination?(n.pageLink.page=t.pageIndex,n.pageLink.pageSize=t.pageSize):n.pageLink.page=0,n.pageLink.sortOrder.property=e.active,n.pageLink.sortOrder.direction=u.a[e.direction.toUpperCase()],n.timeseriesDatasource.loadRows(),this.clearCache(),this.ctx.detectChanges()},n.prototype.trackByColumnIndex=function(e,t){return t.index},n.prototype.trackByRowTimestamp=function(e){return e},n.prototype.trackByActionCellDescriptionId=function(e,t){return t.id},n.prototype.trackBySourcesIndex=function(e,t){return t.datasource.entityId},n.prototype.rowStyle=function(e,t,n){var i=this.rowStyleCache[n];if(!i){if(i={},this.rowStylesInfo.useRowStyleFunction&&this.rowStylesInfo.rowStyleFunction)try{var a=e.rowDataTemplate;if(a.Timestamp=t[0],e.header.forEach(function(e){a[e.dataKey.name]=t[e.index]}),i=this.rowStylesInfo.rowStyleFunction(a,this.ctx),!Object(l.z)(i))throw new TypeError((null===i?"null":typeof i)+" instead of style object");if(Array.isArray(i))throw new TypeError("Array instead of style object")}catch(r){i={},console.warn("Row style function in widget '"+this.ctx.widgetConfig.title+"' returns '"+r+"'. Please check your row style function.")}this.rowStyleCache[n]=i}return i},n.prototype.cellStyle=function(e,t,n,i,a){var r=a*(e.header.length+1)+t,o=this.cellStyleCache[r];if(!o){if(o={},t>0){var s=e.stylesInfo[t-1];if(s.useCellStyleFunction&&s.cellStyleFunction)try{var c=e.rowDataTemplate;if(c.Timestamp=n[0],e.header.forEach(function(e){c[e.dataKey.name]=n[e.index]}),o=s.cellStyleFunction(i,c,this.ctx),!Object(l.z)(o))throw new TypeError((null===o?"null":typeof o)+" instead of style object");if(Array.isArray(o))throw new TypeError("Array instead of style object")}catch(d){o={},console.warn("Cell style function for data key '"+e.header[t-1].dataKey.label+"' in widget '"+this.ctx.widgetConfig.title+"' returns '"+d+"'. Please check your cell style function.")}}this.cellStyleCache[r]=o}return o},n.prototype.cellContent=function(e,t,n,i,a){var r=a*(e.header.length+1)+t,o=this.cellContentCache[r];if(Object(l.B)(o)){if(o="",0===t)o=n.formattedTs;else{var s=void 0,c=e.contentsInfo[t-1];if(c.useCellContentFunction&&c.cellContentFunction)try{var d=e.rowDataTemplate;d.Timestamp=n[0],e.header.forEach(function(e){d[e.dataKey.name]=n[e.index]}),s=c.cellContentFunction(i,d,this.ctx)}catch(m){s=""+i}else{var u=c.decimals||0===c.decimals?c.decimals:this.ctx.widgetConfig.decimals,p=c.units||this.ctx.widgetConfig.units;s=this.ctx.utils.formatValue(i,u,p,!0)}if(Object(l.n)(s))switch(typeof(s=this.utils.customTranslation(s,s))){case"string":o=this.domSanitizer.bypassSecurityTrustHtml(s);break;default:o=s}}this.cellContentCache[r]=o}return o},n.prototype.onRowClick=function(e,t){var n=this.ctx.actionsApi.getActionDescriptors("rowClick");if(n.length){e&&e.stopPropagation();var i=void 0,a=void 0,r=void 0;this.ctx.activeEntityInfo&&(i=this.ctx.activeEntityInfo.entityId,a=this.ctx.activeEntityInfo.entityName,r=this.ctx.activeEntityInfo.entityLabel),this.ctx.actionsApi.handleWidgetAction(e,n[0],i,a,t,r)}},n.prototype.onActionButtonClick=function(e,t,n){var i,a,r;e&&e.stopPropagation(),this.ctx.activeEntityInfo&&(i=this.ctx.activeEntityInfo.entityId,a=this.ctx.activeEntityInfo.entityName,r=this.ctx.activeEntityInfo.entityLabel),this.ctx.actionsApi.handleWidgetAction(e,n,i,a,t,r)},n.prototype.isActiveTab=function(e){return e===this.sourceIndex},n.prototype.updateCurrentSourceData=function(){this.sources[this.sourceIndex].timeseriesDatasource.dataUpdated(this.data)},n.prototype.loadCurrentSourceRow=function(){this.sources[this.sourceIndex].timeseriesDatasource.loadRows(),this.clearCache()},n.prototype.clearCache=function(){this.cellContentCache.length=0,this.cellStyleCache.length=0,this.rowStyleCache.length=0},n.\u0275fac=function(e){return new(e||n)(a["\u0275\u0275directiveInject"](E.Store),a["\u0275\u0275directiveInject"](a.ElementRef),a["\u0275\u0275directiveInject"](a.NgZone),a["\u0275\u0275directiveInject"](I.Overlay),a["\u0275\u0275directiveInject"](a.ViewContainerRef),a["\u0275\u0275directiveInject"](s.a),a["\u0275\u0275directiveInject"](O.TranslateService),a["\u0275\u0275directiveInject"](T.DomSanitizer),a["\u0275\u0275directiveInject"](F.DatePipe))},n.\u0275cmp=a["\u0275\u0275defineComponent"]({type:n,selectors:[["tb-timeseries-table-widget"]],viewQuery:function(e,t){if(1&e&&(a["\u0275\u0275viewQuery"](G,1),a["\u0275\u0275viewQuery"](x.MatPaginator,1),a["\u0275\u0275viewQuery"](w.MatSort,1)),2&e){var n=void 0;a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.searchInputField=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.paginators=n),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.sorts=n)}},inputs:{ctx:"ctx"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:20,vars:17,consts:[[1,"tb-table-widget","tb-absolute-fill"],["fxFlex","","fxLayout","column",1,"tb-absolute-fill"],[1,"mat-table-toolbar",3,"fxShow"],[1,"mat-toolbar-tools"],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"matTooltip"],["fxFlex",""],["matInput","",3,"ngModel","placeholder","ngModelChange"],["searchInput",""],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"matTooltip","click"],["fxFlex","",3,"ngClass","selectedIndex","selectedIndexChange"],[3,"label",4,"ngFor","ngForOf","ngForTrackBy"],[3,"label"],[3,"ngIf"],["fxFlex","",1,"table-container"],["mat-table","","matSort","","matSortDisableClear","",3,"dataSource","trackBy","matSortActive","matSortDirection"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef",4,"ngFor","ngForOf","ngForTrackBy"],["matColumnDef","actions",3,"stickyEnd"],[3,"ngStyle.gt-md",4,"matHeaderCellDef"],[3,"ngStyle.gt-md",4,"matCellDef"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"ngStyle","click",4,"matRowDef","matRowDefColumns"],["fxLayoutAlign","center center","translate","",1,"no-data-found",3,"fxShow"],[4,"ngIf"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions",4,"ngIf"],[3,"matColumnDef"],["mat-sort-header","",4,"matHeaderCellDef"],[3,"innerHTML","ngStyle",4,"matCellDef"],["mat-sort-header",""],[3,"innerHTML","ngStyle"],[3,"ngStyle.gt-md"],["fxHide","","fxShow.gt-md","","fxFlex","","fxLayout","row","fxLayoutAlign","end"],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click",4,"ngFor","ngForOf","ngForTrackBy"],["fxHide","","fxShow.lt-lg","",4,"ngIf"],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click"],["fxHide","","fxShow.lt-lg",""],["mat-button","","mat-icon-button","",3,"matMenuTriggerFor","click"],[1,"material-icons"],["xPosition","before"],["cellActionsMenu","matMenu"],["mat-menu-item","",3,"disabled","click",4,"ngFor","ngForOf","ngForTrackBy"],["mat-menu-item","",3,"disabled","click"],[3,"ngStyle","click"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"mat-toolbar",2),a["\u0275\u0275elementStart"](3,"div",3),a["\u0275\u0275elementStart"](4,"button",4),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275elementStart"](6,"mat-icon"),a["\u0275\u0275text"](7,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"mat-form-field",5),a["\u0275\u0275elementStart"](9,"mat-label"),a["\u0275\u0275text"](10,"\xa0"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"input",6,7),a["\u0275\u0275listener"]("ngModelChange",function(e){return t.textSearch=e}),a["\u0275\u0275pipe"](13,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"button",8),a["\u0275\u0275listener"]("click",function(){return t.exitFilterMode()}),a["\u0275\u0275pipe"](15,"translate"),a["\u0275\u0275elementStart"](16,"mat-icon"),a["\u0275\u0275text"](17,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"mat-tab-group",9),a["\u0275\u0275listener"]("selectedIndexChange",function(e){return t.sourceIndex=e})("selectedIndexChange",function(){return t.onSourceIndexChanged()}),a["\u0275\u0275template"](19,se,2,2,"mat-tab",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",t.textSearchMode),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](5,9,"action.search")),a["\u0275\u0275advance"](7),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](13,11,"widget.search-data")),a["\u0275\u0275property"]("ngModel",t.textSearch),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](15,13,"action.close")),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](15,le,1===t.sources.length))("selectedIndex",t.sourceIndex),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",t.sources)("ngForTrackBy",t.trackBySourcesIndex))},directives:[B.b,B.f,M.MatToolbar,P.d,D.MatButton,k.MatTooltip,_.MatIcon,L.MatFormField,L.MatLabel,j.MatInput,N.DefaultValueAccessor,N.NgControlStatus,N.NgModel,R.MatTabGroup,F.NgClass,P.b,F.NgForOf,R.MatTab,F.NgIf,U.MatTable,w.MatSort,U.MatColumnDef,U.MatHeaderCellDef,U.MatCellDef,U.MatHeaderRowDef,U.MatRowDef,B.e,O.TranslateDirective,U.MatHeaderCell,w.MatSortHeader,U.MatCell,F.NgStyle,P.e,V.MatMenuTrigger,V.MatMenu,V.MatMenuItem,U.MatHeaderRow,U.MatRow,Q.MatDivider,x.MatPaginator],pipes:[O.TranslatePipe,F.AsyncPipe],styles:["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-footer-row[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]{height:38px}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]{height:40px}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]{z-index:10}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   span.no-data-found[_ngcontent-%COMP%]{height:calc(100% - 44px)}[_nghost-%COMP%]     .tb-table-widget .mat-tab-group{height:100%;overflow:hidden}[_nghost-%COMP%]     .tb-table-widget .mat-tab-body-wrapper{height:100%}[_nghost-%COMP%]     .tb-table-widget .mat-tab-body-content{display:flex;flex-direction:column}","[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-paginator[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar.mat-table-toolbar[_ngcontent-%COMP%]:not([color=accent]){background:transparent}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]{height:39px;max-height:39px}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{height:39px;max-height:39px}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-footer-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-header-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-footer-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-header-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2){padding:0 5px}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:nth-child(2){padding:0 5px}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2){padding:0 5px}.tb-has-timewindow[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%], .tb-has-timewindow   [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]{height:65px;max-height:65px}.tb-has-timewindow[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%], .tb-has-timewindow   [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{height:65px;max-height:65px}"]}),n}(r.a);0,void 0;var de=function(){function e(e,t,n,i,a){this.source=e,this.hideEmptyLines=t,this.dateFormatFilter=n,this.datePipe=i,this.ngZone=a,this.rowsSubject=new f.a([]),this.pageDataSubject=new f.a(Object(g.a)()),this.allRowsSubject=new f.a([]),this.allRows$=this.allRowsSubject.asObservable(),this.source.timeseriesDatasource=this}return e.prototype.connect=function(e){return this.rowsSubject.isStopped&&(this.rowsSubject.isStopped=!1,this.pageDataSubject.isStopped=!1),this.rowsSubject.asObservable()},e.prototype.disconnect=function(e){this.rowsSubject.complete(),this.pageDataSubject.complete()},e.prototype.loadRows=function(){var e=this;this.fetchRows(this.source.pageLink).pipe(Object(v.a)(function(){return Object(h.a)(Object(g.a)())})).subscribe(function(t){e.ngZone.run(function(){e.rowsSubject.next(t.data),e.pageDataSubject.next(t)})})},e.prototype.dataUpdated=function(e){this.source.rawData=e.slice(this.source.keyStartIndex,this.source.keyEndIndex),this.updateSourceData()},e.prototype.updateSourceData=function(){this.source.data=this.convertData(this.source.rawData),this.allRowsSubject.next(this.source.data)},e.prototype.convertData=function(e){for(var t=this,n={},i=function(i){e[i].data.forEach(function(a){var r=a[0],o=n[r];if(!o){(o={formattedTs:t.datePipe.transform(r,t.dateFormatFilter)})[0]=r;for(var s=0;s<e.length;s++)o[s+1]=void 0;n[r]=o}o[i+1]=a[1]})},a=0;a<e.length;a++)i(a);var r=[];if(this.hideEmptyLines)for(var o=0,s=Object.keys(n);o<s.length;o++){for(var l=s[o],c=!0,d=0;d<e.length&&c;d++)n[l][d+1]&&(c=!1);c||r.push(n[l])}else r=Object.keys(n).map(function(e){return n[e]});return r},e.prototype.isEmpty=function(){return this.rowsSubject.pipe(Object(C.a)(function(e){return!e.length}))},e.prototype.total=function(){return this.pageDataSubject.pipe(Object(C.a)(function(e){return e.totalElements}))},e.prototype.fetchRows=function(e){return this.allRows$.pipe(Object(C.a)(function(t){return e.filterData(t)}))},e}()}).call(this,n("xexB"))},xkYi:function(e,t,n){"use strict";n.d(t,"a",function(){return I});var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("JIJk"),s=n("//Q6"),l=n("xKAQ"),c=n("l7P3"),d=n("sYmb"),u=n("kmnG"),p=n("d3UM"),m=n("ofXK"),f=n("FKr1"),h=n("XiUz"),g=n("qFsG"),A=n("bTqV"),b=n("Dvla"),y=n("Qu3c"),v=n("NFeN");function C(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-option",7),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,a.deviceProvisionTypeTranslateMap.get(n))," ")}}function x(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.provision-strategy-required")," "))}function w(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.provision-device-key-required")," "))}function S(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.provision-device-secret-required")," "))}function E(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"section",8),i["\u0275\u0275elementStart"](1,"mat-form-field",9),i["\u0275\u0275elementStart"](2,"mat-label",2),i["\u0275\u0275text"](3,"device-profile.provision-device-key"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"input",10),i["\u0275\u0275elementStart"](5,"button",11),i["\u0275\u0275listener"]("cbOnSuccess",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onProvisionCopied(!0)}),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275element"](7,"mat-icon",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,w,3,3,"mat-error",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"mat-form-field",9),i["\u0275\u0275elementStart"](10,"mat-label",2),i["\u0275\u0275text"](11,"device-profile.provision-device-secret"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](12,"input",13),i["\u0275\u0275elementStart"](13,"button",11),i["\u0275\u0275listener"]("cbOnSuccess",function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onProvisionCopied(!1)}),i["\u0275\u0275pipe"](14,"translate"),i["\u0275\u0275element"](15,"mat-icon",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](16,S,3,3,"mat-error",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](5),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](6,6,"device-profile.copy-provision-key")),i["\u0275\u0275property"]("cbContent",a.provisionConfigurationFormGroup.get("provisionDeviceKey").value),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",a.provisionConfigurationFormGroup.get("provisionDeviceKey").hasError("required")),i["\u0275\u0275advance"](5),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](14,8,"device-profile.copy-provision-secret")),i["\u0275\u0275property"]("cbContent",a.provisionConfigurationFormGroup.get("provisionDeviceSecret").value),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",a.provisionConfigurationFormGroup.get("provisionDeviceSecret").hasError("required"))}}var I=function(){function e(e,t,n){this.store=e,this.fb=t,this.translate=n,this.deviceProvisionType=o.i,this.deviceProvisionTypes=Object.keys(o.i),this.deviceProvisionTypeTranslateMap=o.I,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(r.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.provisionConfigurationFormGroup=this.fb.group({type:[o.i.DISABLED,a.Validators.required],provisionDeviceSecret:[{value:null,disabled:!0},a.Validators.required],provisionDeviceKey:[{value:null,disabled:!0},a.Validators.required]}),this.provisionConfigurationFormGroup.get("type").valueChanges.subscribe(function(t){if(t===o.i.DISABLED)e.provisionConfigurationFormGroup.get("provisionDeviceSecret").disable({emitEvent:!1}),e.provisionConfigurationFormGroup.get("provisionDeviceSecret").patchValue(null,{emitEvent:!1}),e.provisionConfigurationFormGroup.get("provisionDeviceKey").disable({emitEvent:!1}),e.provisionConfigurationFormGroup.get("provisionDeviceKey").patchValue(null);else{var n=e.provisionConfigurationFormGroup.get("provisionDeviceSecret").value;n&&n.length||e.provisionConfigurationFormGroup.get("provisionDeviceSecret").patchValue(Object(s.i)(20),{emitEvent:!1});var i=e.provisionConfigurationFormGroup.get("provisionDeviceKey").value;i&&i.length||e.provisionConfigurationFormGroup.get("provisionDeviceKey").patchValue(Object(s.i)(20),{emitEvent:!1}),e.provisionConfigurationFormGroup.get("provisionDeviceSecret").enable({emitEvent:!1}),e.provisionConfigurationFormGroup.get("provisionDeviceKey").enable({emitEvent:!1})}}),this.provisionConfigurationFormGroup.valueChanges.subscribe(function(){e.updateModel()})},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.writeValue=function(e){Object(s.o)(e)?this.provisionConfigurationFormGroup.patchValue(e,{emitEvent:!1}):this.provisionConfigurationFormGroup.patchValue({type:o.i.DISABLED})},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.provisionConfigurationFormGroup.disable():this.provisionConfigurationFormGroup.get("type").value!==o.i.DISABLED?this.provisionConfigurationFormGroup.enable({emitEvent:!1}):this.provisionConfigurationFormGroup.get("type").enable({emitEvent:!1})},e.prototype.validate=function(e){return this.provisionConfigurationFormGroup.valid?null:{provisionConfiguration:{valid:!1}}},e.prototype.updateModel=function(){var e=null;this.provisionConfigurationFormGroup.valid&&(e=this.provisionConfigurationFormGroup.getRawValue()),this.propagateChange(e)},e.prototype.onProvisionCopied=function(e){this.store.dispatch(new l.b({message:this.translate.instant(e?"device-profile.provision-key-copied-message":"device-profile.provision-secret-copied-message"),type:"success",duration:1200,verticalPosition:"bottom",horizontalPosition:"right"}))},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](c.Store),i["\u0275\u0275directiveInject"](a.FormBuilder),i["\u0275\u0275directiveInject"](d.TranslateService))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-device-profile-provision-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)(function(){return e}),multi:!0}])],decls:8,vars:4,consts:[[3,"formGroup"],[1,"mat-block"],["translate",""],["formControlName","type","required",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["fxLayoutGap.gt-xs","8px","fxLayout","row","fxLayout.xs","column",4,"ngIf"],[3,"value"],["fxLayoutGap.gt-xs","8px","fxLayout","row","fxLayout.xs","column"],["fxFlex","",1,"mat-block"],["matInput","","formControlName","provisionDeviceKey","required",""],["mat-button","","matSuffix","","mat-icon-button","","ngxClipboard","","matTooltipPosition","above",3,"cbContent","matTooltip","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left",2,"font-size","20px"],["matInput","","formControlName","provisionDeviceSecret","required",""]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"mat-form-field",1),i["\u0275\u0275elementStart"](2,"mat-label",2),i["\u0275\u0275text"](3,"device-profile.provision-strategy"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mat-select",3),i["\u0275\u0275template"](5,C,3,4,"mat-option",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,x,3,3,"mat-error",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](7,E,17,10,"section",6),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.provisionConfigurationFormGroup),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngForOf",t.deviceProvisionTypes),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.provisionConfigurationFormGroup.get("type").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.provisionConfigurationFormGroup.get("type").value!==t.deviceProvisionType.DISABLED))},directives:[a.NgControlStatusGroup,a.FormGroupDirective,u.MatFormField,u.MatLabel,d.TranslateDirective,p.MatSelect,a.NgControlStatus,a.FormControlName,a.RequiredValidator,m.NgForOf,m.NgIf,f.MatOption,u.MatError,h.g,h.f,h.b,g.MatInput,a.DefaultValueAccessor,A.MatButton,u.MatSuffix,b.a,y.MatTooltip,v.MatIcon],pipes:[d.TranslatePipe],encapsulation:2}),e}();0,void 0},xzJA:function(e,t,n){"use strict";n.d(t,"a",function(){return N});var i=n("fXoL"),a=n("oKkZ"),r=n("5xOD"),o=n("w1tV"),s=n("/uUt"),l=n("eIep"),c=n("lJxs"),d=n("vkgz"),u=n("05l1"),p=n("x+ZX"),m=n("2Vo4"),f=n("itXk"),h=n("LRne"),g=n("//Q6"),A=n("jhN1"),b=n("ofXK"),y=n("XiUz"),v=n("Wp6s"),C=n("Xa2L"),x=n("sYmb");function w(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-card-content"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.description," ")}}function S(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",7),i["\u0275\u0275elementStart"](1,"mat-card",8),i["\u0275\u0275listener"]("click",function(e){i["\u0275\u0275restoreView"](n);var a=t.$implicit;return i["\u0275\u0275nextContext"](3).onWidgetClicked(e,a)}),i["\u0275\u0275elementStart"](2,"div",9),i["\u0275\u0275element"](3,"img",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",11),i["\u0275\u0275elementStart"](5,"mat-card-title"),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"mat-card-subtitle"),i["\u0275\u0275text"](8),i["\u0275\u0275pipe"](9,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](10,w,2,1,"mat-card-content",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,r=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate"]("alt",a.title),i["\u0275\u0275property"]("src",r.getPreviewImage(a.image),i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](a.title),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](9,5,"widget."+a.type)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",a.description)}}function E(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",5),i["\u0275\u0275template"](1,S,11,7,"div",6),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](2,1,n.widgets$))}}function I(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",15),i["\u0275\u0275elementStart"](1,"span",16),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"mat-spinner",17),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](3,1,"widget.loading-widgets")," "))}function O(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span",18),i["\u0275\u0275text"](1,"widgets-bundle.empty"),i["\u0275\u0275elementEnd"]())}function T(e,t){if(1&e&&(i["\u0275\u0275template"](0,I,5,3,"div",13),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275template"](2,O,2,0,"ng-template",null,14,i["\u0275\u0275templateRefExtractor"])),2&e){var n=i["\u0275\u0275reference"](3),a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](1,2,a.loadingWidgets$))("ngIfElse",n)}}function F(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275template"](1,E,3,3,"div",3),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275template"](3,T,4,4,"ng-template",null,4,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"]()),2&e){var n,a=i["\u0275\u0275reference"](4),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==(n=i["\u0275\u0275pipeBind1"](2,2,r.widgets$))?null:n.length)("ngIfElse",a)}}function B(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-card-subtitle",21),i["\u0275\u0275text"](1,"widgets-bundle.system"),i["\u0275\u0275elementEnd"]())}function M(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-card-content"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.description," ")}}function P(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",7),i["\u0275\u0275elementStart"](1,"mat-card",8),i["\u0275\u0275listener"]("click",function(e){i["\u0275\u0275restoreView"](n);var a=t.$implicit;return i["\u0275\u0275nextContext"](3).selectBundle(e,a)}),i["\u0275\u0275elementStart"](2,"div",9),i["\u0275\u0275element"](3,"img",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",11),i["\u0275\u0275elementStart"](5,"mat-card-title"),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](7,B,2,0,"mat-card-subtitle",20),i["\u0275\u0275template"](8,M,2,1,"mat-card-content",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,r=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate"]("alt",a.title),i["\u0275\u0275property"]("src",r.getPreviewImage(a.image),i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](a.title),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",r.isSystem(a)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.description)}}function D(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",5),i["\u0275\u0275template"](1,P,9,5,"div",6),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](2,1,n.widgetsBundles$))}}function k(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",15),i["\u0275\u0275elementStart"](1,"span",16),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"mat-spinner",23),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](3,1,"widgets-bundle.loading-widgets-bundles")," "))}function _(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"span",18),i["\u0275\u0275text"](1,"widgets-bundle.no-widgets-bundles-text"),i["\u0275\u0275elementEnd"]())}function L(e,t){if(1&e&&(i["\u0275\u0275template"](0,k,5,3,"div",13),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275template"](2,_,2,0,"ng-template",null,22,i["\u0275\u0275templateRefExtractor"])),2&e){var n=i["\u0275\u0275reference"](3),a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](1,2,a.loadingWidgetBundles$))("ngIfElse",n)}}function j(e,t){if(1&e&&(i["\u0275\u0275template"](0,D,3,3,"div",3),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275template"](2,L,4,4,"ng-template",null,19,i["\u0275\u0275templateRefExtractor"])),2&e){var n,a=i["\u0275\u0275reference"](3),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngIf",null==(n=i["\u0275\u0275pipeBind1"](1,2,r.widgetsBundles$))?null:n.length)("ngIfElse",a)}}var N=function(){function e(e,t,n){var a=this;this.widgetsService=e,this.sanitizer=t,this.cd=n,this.search$=new m.a(""),this.filterWidgetTypes$=new m.a(null),this.widgetTypes=new Set,this.loadingWidgetsSubject=new m.a(!1),this.loadingWidgets$=this.loadingWidgetsSubject.pipe(Object(o.a)()),this.loadingWidgetBundlesSubject=new m.a(!0),this.loadingWidgetBundles$=this.loadingWidgetBundlesSubject.pipe(Object(o.a)()),this.widgetSelected=new i.EventEmitter,this.widgetsBundleSelected=new i.EventEmitter,this.widgetsBundles$=this.search$.asObservable().pipe(Object(s.a)(),Object(l.a)(function(e){return a.fetchWidgetBundle(e)})),this.widgets$=Object(f.b)([this.search$.asObservable(),this.filterWidgetTypes$.asObservable()]).pipe(Object(s.a)(function(e,t){return JSON.stringify(e)===JSON.stringify(t)}),Object(l.a)(function(e){return a.fetchWidget.apply(a,e)}))}return Object.defineProperty(e.prototype,"widgetsBundle",{get:function(){return this.widgetsBundleValue},set:function(e){this.widgetsBundleValue!==e&&(this.widgetsBundleValue=e,null===e&&this.widgetTypes.clear(),this.filterWidgetTypes$.next(null),this.widgetsInfo=null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"searchBundle",{set:function(e){this.search$.next(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filterWidgetTypes",{get:function(){return this.filterWidgetTypes$.value},set:function(e){this.filterWidgetTypes$.next(e)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.getWidgets=function(){var e=this;if(!this.widgetsInfo)if(null!==this.widgetsBundle){var t=this.widgetsBundle.alias,n=this.widgetsBundle.tenantId.id===a.a;this.loadingWidgetsSubject.next(!0),this.widgetsInfo=this.widgetsService.getBundleWidgetTypeInfos(t,n).pipe(Object(c.a)(function(i){i=i.sort(function(e,t){return t.createdTime-e.createdTime});var a=new Set,r=i.map(function(e){return a.add(e.widgetType),{isSystemType:n,bundleAlias:t,typeAlias:e.alias,type:e.widgetType,title:e.name,image:e.image,description:e.description}});return setTimeout(function(){e.widgetTypes=a,e.cd.markForCheck()}),r}),Object(d.a)(function(){e.loadingWidgetsSubject.next(!1)}),Object(u.a)(1),Object(p.a)())}else this.widgetsInfo=Object(h.a)([]);return this.widgetsInfo},e.prototype.onWidgetClicked=function(e,t){this.widgetSelected.emit(t)},e.prototype.isSystem=function(e){return e&&e.tenantId.id===a.a},e.prototype.selectBundle=function(e,t){e.preventDefault(),this.widgetsBundle=t,this.search$.next(""),this.widgetsBundleSelected.emit(t)},e.prototype.getPreviewImage=function(e){return Object(g.o)(e)?this.sanitizer.bypassSecurityTrustUrl(e):"/assets/widget-preview-empty.svg"},e.prototype.getWidgetsBundle=function(){var e=this;return this.widgetsService.getAllWidgetsBundles().pipe(Object(d.a)(function(){return e.loadingWidgetBundlesSubject.next(!1)}),Object(u.a)(1),Object(p.a)())},e.prototype.fetchWidgetBundle=function(e){return this.getWidgetsBundle().pipe(Object(c.a)(function(t){return e?t.filter(function(t){var n,i;return(null===(n=t.title)||void 0===n?void 0:n.toLowerCase().includes(e.toLowerCase()))||(null===(i=t.description)||void 0===i?void 0:i.toLowerCase().includes(e.toLowerCase()))}):t}))},e.prototype.fetchWidget=function(e,t){return this.getWidgets().pipe(Object(c.a)(function(e){return t?e.filter(function(e){return t.includes(e.type)}):e}),Object(c.a)(function(t){return e?t.filter(function(t){var n,i;return(null===(n=t.title)||void 0===n?void 0:n.toLowerCase().includes(e.toLowerCase()))||(null===(i=t.description)||void 0===i?void 0:i.toLowerCase().includes(e.toLowerCase()))}):t}))},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](r.a),i["\u0275\u0275directiveInject"](A.DomSanitizer),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-dashboard-widget-select"]],inputs:{aliasController:"aliasController",searchBundle:"searchBundle",filterWidgetTypes:"filterWidgetTypes"},outputs:{widgetSelected:"widgetSelected",widgetsBundleSelected:"widgetsBundleSelected"},decls:4,vars:2,consts:[[1,"widget-select"],[4,"ngIf","ngIfElse"],["bundles",""],["fxFlexFill","","fxLayoutGap","12px grid","fxLayout","row wrap",4,"ngIf","ngIfElse"],["loadingWidgets",""],["fxFlexFill","","fxLayoutGap","12px grid","fxLayout","row wrap"],["class","mat-card-container",4,"ngFor","ngForOf"],[1,"mat-card-container"],["fxFlexFill","","fxLayout","row","fxLayoutGap","16px",3,"click"],["fxFlex","45",1,"preview-container"],[1,"preview",3,"src","alt"],["fxFlex","","fxLayout","column"],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","tb-absolute-fill",4,"ngIf","ngIfElse"],["emptyBundle",""],["fxLayout","column","fxLayoutAlign","center center",1,"tb-absolute-fill"],[1,"mat-headline",2,"padding-bottom","20px"],["color","accent","strokeWidth","5"],["translate","","fxLayoutAlign","center center",1,"mat-headline","tb-absolute-fill",2,"display","flex"],["loadingWidgetBundles",""],["translate","",4,"ngIf"],["translate",""],["noWidgetBundles",""],["strokeWidth","5"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,F,5,4,"div",1),i["\u0275\u0275template"](2,j,4,4,"ng-template",null,2,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.widgetsBundle)("ngIfElse",n)}},directives:[b.NgIf,y.k,y.g,y.f,b.NgForOf,v.MatCard,y.b,v.MatCardTitle,v.MatCardSubtitle,v.MatCardContent,y.e,C.MatSpinner,x.TranslateDirective],pipes:[b.AsyncPipe,x.TranslatePipe],styles:["[_nghost-%COMP%]{min-width:100%;min-height:100%;position:absolute;background-color:#cfd8dc}[_nghost-%COMP%]   .widget-select[_ngcontent-%COMP%]{padding:12px 0 12px 12px;background-color:#cfd8dc}[_nghost-%COMP%]   .widget-select[_ngcontent-%COMP%]   .mat-card-container[_ngcontent-%COMP%]{flex:0 0 100%;max-width:100%}[_nghost-%COMP%]   .widget-select[_ngcontent-%COMP%]   .mat-card-container[_ngcontent-%COMP%]:hover   .mat-card[_ngcontent-%COMP%]{box-shadow:0 2px 6px 6px rgba(0,0,0,.2),0 1px 4px 2px rgba(0,0,0,.14),0 1px 6px 0 rgba(0,0,0,.12)}[_nghost-%COMP%]   .widget-select[_ngcontent-%COMP%]   .mat-card-container[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]{cursor:pointer;transition:box-shadow .2s}[_nghost-%COMP%]   .widget-select[_ngcontent-%COMP%]   .mat-card-container[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]{text-align:center;margin:auto 0}[_nghost-%COMP%]   .widget-select[_ngcontent-%COMP%]   .mat-card-container[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{max-width:100%;max-height:100%;-o-object-fit:contain;object-fit:contain}[_nghost-%COMP%]   .widget-select[_ngcontent-%COMP%]   .mat-card-container[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{font-size:20px}[_nghost-%COMP%]   .widget-select[_ngcontent-%COMP%]   .mat-card-container[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]   .mat-card-content[_ngcontent-%COMP%]{font-size:14px;line-height:18px;color:#666}@media screen and (min-width:600px){[_nghost-%COMP%]   .widget-select[_ngcontent-%COMP%]   .mat-card-container[_ngcontent-%COMP%]{flex:0 0 50%;max-width:50%}}@media screen and (min-width:2000px){[_nghost-%COMP%]   .widget-select[_ngcontent-%COMP%]   .mat-card-container[_ngcontent-%COMP%]{flex:0 0 33.333333%;max-width:33.333333%}}"]}),e}();0,void 0},xze0:function(e,t,n){"use strict";n.d(t,"a",function(){return b}),n.d(t,"b",function(){return y});var i=n("mrSG"),a=n("fXoL"),r=n("//Q6"),o=n("A1kC"),s=n("0IaG"),l=n("XiUz"),c=n("ofXK"),d=n("kmnG"),u=n("bTqV"),p=n("Qu3c"),m=n("NFeN"),f=n("f0Cb"),h=n("sYmb");function g(e,t){1&e&&a["\u0275\u0275element"](0,"mat-divider")}function A(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275elementStart"](1,"div",2),a["\u0275\u0275elementStart"](2,"mat-label",3),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"button",4),a["\u0275\u0275listener"]("click",function(){a["\u0275\u0275restoreView"](n);var e=t.$implicit;return a["\u0275\u0275nextContext"]().editFilter(e.key,e.value)}),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275elementStart"](6,"mat-icon"),a["\u0275\u0275text"](7,"edit"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,g,1,0,"mat-divider",5),a["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,r=t.last;a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](i.value.filter),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](5,3,"filter.edit")),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",!r)}}var b=new a.InjectionToken("FiltersEditPanelData"),y=function(){function e(e,t){this.data=e,this.dialog=t,this.filtersInfo=this.data.filtersInfo}return e.prototype.editFilter=function(e,t){var n=this,a=Object(i.a)({id:e},Object(r.e)(t));this.dialog.open(o.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{filter:a}}).afterClosed().subscribe(function(e){e&&(n.filtersInfo[e.id]=e,n.data.aliasController.updateUserFilter(e))})},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](b),a["\u0275\u0275directiveInject"](s.MatDialog))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-filters-edit-panel"]],decls:3,vars:3,consts:[["fxLayout","column",1,"mat-content","mat-padding"],[4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center"],["fxFlex",""],["mat-icon-button","","color","accent","type","button","matTooltipPosition","above",2,"min-width","40px",3,"matTooltip","click"],[4,"ngIf"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275template"](1,A,9,5,"div",1),a["\u0275\u0275pipe"](2,"keyvalue"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",a["\u0275\u0275pipeBind1"](2,1,t.filtersInfo)))},directives:[l.f,c.NgForOf,l.e,d.MatLabel,l.b,u.MatButton,p.MatTooltip,m.MatIcon,c.NgIf,f.MatDivider],pipes:[c.KeyValuePipe,h.TranslatePipe],styles:["[_nghost-%COMP%]{min-width:300px;max-height:150px;overflow-x:hidden;overflow-y:auto;background:#fff;border-radius:4px;box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12)}@media (min-height:350px){[_nghost-%COMP%]{max-height:250px}}[_nghost-%COMP%]   .mat-content[_ngcontent-%COMP%]{background-color:#fff}"]}),e}();0,void 0},yOwA:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n("mrSG"),a=n("fXoL"),r=n("AUWA"),o=n("l7P3"),s=n("ofXK"),l=n("wZkO"),c=n("igfJ"),d=n("sYmb");function u(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-tab",1,2),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275element"](3,"tb-audit-log-table",3),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275reference"](1),i=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](2,4,"audit-log.audit-logs")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("active",n.isActive)("auditLogMode",i.auditLogModes.ENTITY)("entityId",i.entity.id)}}var p=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](o.Store))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-dashboard-tabs"]],features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:1,consts:[[3,"label",4,"ngIf"],[3,"label"],["auditLogsTab","matTab"],["detailsMode","true",3,"active","auditLogMode","entityId"]],template:function(e,t){1&e&&a["\u0275\u0275template"](0,u,4,6,"mat-tab",0),2&e&&a["\u0275\u0275property"]("ngIf",t.entity&&t.authUser.authority===t.authorities.TENANT_ADMIN)},directives:[s.NgIf,l.MatTab,c.a],pipes:[d.TranslatePipe],encapsulation:2}),t}(r.a);0,void 0},z0mp:function(e,t,n){"use strict";n.d(t,"a",function(){return k});var i=n("mrSG"),a=n("fXoL"),r=n("0IaG"),o=n("3Pt+"),s=n("gmuX"),l=n("YnEf"),c=n("wOnQ"),d=n.n(c),u=n("w1tV"),p=n("lJxs"),m=n("2Vo4"),f=n("Cfvw"),h=n("//Q6"),g=n("l7P3"),A=n("tyNb"),b=n("jhN1"),y=n("/t3+"),v=n("sYmb"),C=n("XiUz"),x=n("bTqV"),w=n("NFeN"),S=n("ofXK"),E=n("kmnG"),I=n("qFsG"),O=n("0HhY"),T=n("bv9b"),F=n("Xa2L");function B(e,t){1&e&&a["\u0275\u0275element"](0,"mat-progress-bar",27)}function M(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](2,1,"dashboard.no-image")))}function P(e,t){if(1&e&&a["\u0275\u0275element"](0,"img",28),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("src",n.safeImageUrl,a["\u0275\u0275sanitizeUrl"])}}function D(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",29),a["\u0275\u0275element"](1,"mat-progress-spinner",30),a["\u0275\u0275elementEnd"]())}var k=function(e){function t(t,n,i,a,r,s,l){var c=e.call(this,t,n,a)||this;c.store=t,c.router=n,c.data=i,c.dialogRef=a,c.dashboardService=r,c.sanitizer=s,c.fb=l,c.takingScreenshotSubject=new m.a(!1),c.takingScreenshot$=c.takingScreenshotSubject.asObservable().pipe(Object(u.a)()),c.dashboardId=c.data.dashboardId,c.updateImage(c.data.currentImage),c.dashboardElement=c.data.dashboardElement;c.dashboardElement.getBoundingClientRect();return c.dashboardRectFormGroup=c.fb.group({left:[0,[o.Validators.min(0),o.Validators.max(100)]],top:[0,[o.Validators.min(0),o.Validators.max(100)]],right:[100,[o.Validators.min(0),o.Validators.max(100)]],bottom:[100,[o.Validators.min(0),o.Validators.max(100)]]}),c.dashboardImageFormGroup=c.fb.group({dashboardImage:[c.data.currentImage]}),c.dashboardImageFormGroup.get("dashboardImage").valueChanges.subscribe(function(e){c.updateImage(e)}),c}return Object(i.d)(t,e),t.prototype.convertUserPercent=function(e,t){return Object(h.x)(e)?Math.max(0,Math.min(100,e))/100:t},t.prototype.takeScreenShot=function(){var e=this;this.takingScreenshotSubject.next(!0);var t=this.dashboardElement.getBoundingClientRect(),n=this.convertUserPercent(this.dashboardRectFormGroup.get("left").value,0),i=this.convertUserPercent(this.dashboardRectFormGroup.get("top").value,0),a=this.convertUserPercent(this.dashboardRectFormGroup.get("right").value,100),r=this.convertUserPercent(this.dashboardRectFormGroup.get("bottom").value,100),o=n*t.width,s=i*t.height,l=a*t.width,c=r*t.height,u=t.left+o,m=t.top+s,h=l-o,g=c-s;h=Math.max(1,h),g=Math.max(1,g),Object(f.a)(d()(this.dashboardElement,{logging:!1,useCORS:!0,foreignObjectRendering:!1,scale:512/h,x:u,y:m,width:h,height:g})).pipe(Object(p.a)(function(e){return e.toDataURL()})).subscribe(function(t){e.updateImage(t),e.dashboardImageFormGroup.patchValue({dashboardImage:t},{emitEvent:!1}),e.dashboardImageFormGroup.markAsDirty(),e.takingScreenshotSubject.next(!1)},function(t){e.takingScreenshotSubject.next(!1)})},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.save=function(){var e=this;this.dashboardService.getDashboard(this.dashboardId.id).subscribe(function(t){var n=e.dashboardImageFormGroup.get("dashboardImage").value;t.image=n,e.dashboardService.saveDashboard(t).subscribe(function(){e.dialogRef.close({image:n})})})},t.prototype.updateImage=function(e){this.safeImageUrl=e?this.sanitizer.bypassSecurityTrustUrl(e):null},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](g.Store),a["\u0275\u0275directiveInject"](A.Router),a["\u0275\u0275directiveInject"](r.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.MatDialogRef),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](b.DomSanitizer),a["\u0275\u0275directiveInject"](o.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-dashboard-image-dialog"]],features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:58,vars:44,consts:[[3,"ngSubmit"],["color","accent"],["translate",""],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content","",2,"position","relative"],["fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","8px",3,"disabled"],["fxLayout","column","fxLayoutGap","8px","fxLayoutAlign","center center",3,"formGroup"],[1,"rect-field"],["matInput","","formControlName","top","type","number","step","1","min","0","max","100"],["fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","center center"],["matInput","","formControlName","left","type","number","step","1","min","0","max","100"],[1,"tb-image-preview-container"],[4,"ngIf","ngIfElse"],["elseBlock",""],["matInput","","formControlName","right","type","number","step","1","min","0","max","100"],["matInput","","formControlName","bottom","type","number","step","1","min","0","max","100"],["fxFlex","","fxLayout","row","fxLayoutGap","8px",3,"formGroup"],["mat-raised-button","","color","accent","type","button",3,"disabled","click"],[3,"formGroup"],["formControlName","dashboardImage",3,"showPreview","label"],["class","taking-screenshot-progress tb-absolute-fill","fxLayout","column","fxLayoutAlign","center center",4,"ngIf"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","accent","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[1,"tb-image-preview",3,"src"],["fxLayout","column","fxLayoutAlign","center center",1,"taking-screenshot-progress","tb-absolute-fill"],["color","accent","mode","indeterminate"]],template:function(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",function(){return t.save()}),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2",2),a["\u0275\u0275text"](3,"dashboard.update-image"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",3),a["\u0275\u0275elementStart"](5,"button",4),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275elementStart"](6,"mat-icon",5),a["\u0275\u0275text"](7,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,B,1,0,"mat-progress-bar",6),a["\u0275\u0275pipe"](9,"async"),a["\u0275\u0275elementStart"](10,"div",7),a["\u0275\u0275elementStart"](11,"fieldset",8),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275pipe"](13,"async"),a["\u0275\u0275elementStart"](14,"div",9),a["\u0275\u0275elementStart"](15,"mat-form-field",10),a["\u0275\u0275elementStart"](16,"mat-label"),a["\u0275\u0275text"](17,"Top %"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](18,"input",11),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"div",12),a["\u0275\u0275elementStart"](20,"mat-form-field",10),a["\u0275\u0275elementStart"](21,"mat-label"),a["\u0275\u0275text"](22,"Left %"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](23,"input",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](24,"div",14),a["\u0275\u0275template"](25,M,3,3,"div",15),a["\u0275\u0275template"](26,P,1,1,"ng-template",null,16,a["\u0275\u0275templateRefExtractor"]),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"mat-form-field",10),a["\u0275\u0275elementStart"](29,"mat-label"),a["\u0275\u0275text"](30,"Right %"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](31,"input",17),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](32,"mat-form-field",10),a["\u0275\u0275elementStart"](33,"mat-label"),a["\u0275\u0275text"](34,"Bottom %"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](35,"input",18),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](36,"div",19),a["\u0275\u0275elementStart"](37,"button",20),a["\u0275\u0275listener"]("click",function(){return t.takeScreenShot()}),a["\u0275\u0275pipe"](38,"async"),a["\u0275\u0275pipe"](39,"async"),a["\u0275\u0275text"](40),a["\u0275\u0275pipe"](41,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](42,"div",21),a["\u0275\u0275element"](43,"tb-image-input",22),a["\u0275\u0275pipe"](44,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](45,D,2,0,"div",23),a["\u0275\u0275pipe"](46,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](47,"div",24),a["\u0275\u0275elementStart"](48,"button",25),a["\u0275\u0275listener"]("click",function(){return t.cancel()}),a["\u0275\u0275pipe"](49,"async"),a["\u0275\u0275pipe"](50,"async"),a["\u0275\u0275text"](51),a["\u0275\u0275pipe"](52,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](53,"button",26),a["\u0275\u0275pipe"](54,"async"),a["\u0275\u0275pipe"](55,"async"),a["\u0275\u0275text"](56),a["\u0275\u0275pipe"](57,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275reference"](27);a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](9,16,t.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](12,18,t.isLoading$)||a["\u0275\u0275pipeBind1"](13,20,t.takingScreenshot$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("formGroup",t.dashboardRectFormGroup),a["\u0275\u0275advance"](11),a["\u0275\u0275property"]("ngIf",!t.safeImageUrl)("ngIfElse",n),a["\u0275\u0275advance"](11),a["\u0275\u0275property"]("formGroup",t.dashboardRectFormGroup),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](38,22,t.isLoading$)||a["\u0275\u0275pipeBind1"](39,24,t.takingScreenshot$)),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](41,26,"dashboard.take-screenshot")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("formGroup",t.dashboardImageFormGroup),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](44,28,"dashboard.image")),a["\u0275\u0275property"]("showPreview",!1),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](46,30,t.takingScreenshot$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](49,32,t.isLoading$)||a["\u0275\u0275pipeBind1"](50,34,t.takingScreenshot$)),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](52,36,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](54,38,t.isLoading$)||a["\u0275\u0275pipeBind1"](55,40,t.takingScreenshot$)||!t.dashboardImageFormGroup.dirty),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](57,42,"action.update")," ")}},directives:[o["\u0275angular_packages_forms_forms_ba"],o.NgControlStatusGroup,o.NgForm,y.MatToolbar,v.TranslateDirective,C.b,x.MatButton,w.MatIcon,S.NgIf,r.MatDialogContent,C.f,C.e,C.g,o.FormGroupDirective,E.MatFormField,E.MatLabel,I.MatInput,o.DefaultValueAccessor,o.NumberValueAccessor,o.NgControlStatus,o.FormControlName,O.a,r.MatDialogActions,T.MatProgressBar,F.MatProgressSpinner],pipes:[S.AsyncPipe,v.TranslatePipe],styles:["[_nghost-%COMP%]   mat-form-field.rect-field[_ngcontent-%COMP%]{max-width:60px}[_nghost-%COMP%]   .tb-image-preview[_ngcontent-%COMP%]{width:auto;max-width:298px;height:auto;max-height:298px}[_nghost-%COMP%]   .tb-image-preview-container[_ngcontent-%COMP%]{position:relative;float:left;width:300px;height:300px;margin-right:12px;vertical-align:top;border:1px solid}[_nghost-%COMP%]   .tb-image-preview-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;font-size:18px;text-align:center}[_nghost-%COMP%]   .tb-image-preview-container[_ngcontent-%COMP%]   .tb-image-preview[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-image-preview-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}[_nghost-%COMP%]   .taking-screenshot-progress[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.65)}"]}),t}(s.a);0,void 0},z3OR:function(e,t,n){"use strict";var i;n.d(t,"a",function(){return i}),n.d(t,"f",function(){return a}),n.d(t,"e",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return l}),function(e){e.name="NAME",e.type="TYPE",e.label="LABEL",e.clientAttribute="CLIENT_ATTRIBUTE",e.sharedAttribute="SHARED_ATTRIBUTE",e.serverAttribute="SERVER_ATTRIBUTE",e.timeseries="TIMESERIES",e.entityField="ENTITY_FIELD",e.accessToken="ACCESS_TOKEN",e.isGateway="IS_GATEWAY",e.description="DESCRIPTION",e.edgeLicenseKey="EDGE_LICENSE_KEY",e.cloudEndpoint="CLOUD_ENDPOINT",e.routingKey="ROUTING_KEY",e.secret="SECRET"}(i||(i={}));var a=[i.name,i.type,i.accessToken],r=new Map([[i.name,"import.column-type.name"],[i.type,"import.column-type.type"],[i.label,"import.column-type.label"],[i.clientAttribute,"import.column-type.client-attribute"],[i.sharedAttribute,"import.column-type.shared-attribute"],[i.serverAttribute,"import.column-type.server-attribute"],[i.timeseries,"import.column-type.timeseries"],[i.entityField,"import.column-type.entity-field"],[i.accessToken,"import.column-type.access-token"],[i.isGateway,"import.column-type.isgateway"],[i.description,"import.column-type.description"],[i.edgeLicenseKey,"import.column-type.edge-license-key"],[i.cloudEndpoint,"import.column-type.cloud-endpoint"],[i.routingKey,"import.column-type.routing-key"],[i.secret,"import.column-type.secret"]]),o={mimeType:"text/json",extension:"json"},s={mimeType:"application/zip",extension:"zip"};function l(e,t,n){var i=(t=t||{}).delim||",",a=t.header||!1,r={},o=e.split(/[\r\n]+/),s=c(o[0],i);if(s.length<2)return n("import.import-csv-number-columns-error"),-1;var l=a?o.slice(1,o.length):o;r.headers=s,r.rows=[];for(var u=0,p=l;u<p.length;u++){var m=p[u];if(0===m.length)break;var f=c(m,i);if(f.length!==r.headers.length)return n("import.import-csv-invalid-format-error",{line:a?r.rows.length+2:r.rows.length+1}),-1;for(var h=0;h<f.length;h++)f[h]=d(f[h]);r.rows.push(f)}return r}function c(e,t){var n,i,a;for(i=(n=e.split(t=t||",")).length-1,a;i>=0;i--)'"'===n[i].replace(/"\s+$/,'"').charAt(n[i].length-1)?(a=n[i].replace(/^\s+"/,'"')).length>1&&'"'===a.charAt(0)?n[i]=n[i].replace(/^\s*"|"\s*$/g,"").replace(/""/g,'"'):i?n.splice(i-1,2,[n[i-1],n[i]].join(t)):n=n.shift().split(t).concat(n):n[i].replace(/""/g,'"');return n}function d(e){return function(e){return(e=e.replace(",","."))-parseFloat(e)+1>=0&&Number(e).toString()===e}(e.replace(",","."))?parseFloat(e.replace(",",".")):0===e.search(/^(true|false)$/im)?"true"===e.toLowerCase():""===e?null:e}},z5iZ:function(e,t,n){"use strict";n.d(t,"a",function(){return S});var i=n("mrSG"),a=n("fXoL"),r=n("3Pt+"),o=n("8LU1"),s=n("//Q6"),l=n("IVUU"),c=n("YjEJ"),d=n("OiFK"),u=n("0IaG"),p=n("XiUz"),m=n("9joC"),f=n("4Nnk"),h=n("ofXK"),g=n("bTqV"),A=n("Qu3c"),b=n("NFeN"),y=n("XMqU"),v=n("sYmb");function C(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"span",9),a["\u0275\u0275listener"]("click",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).openEditDetailsDialog(e)}),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("innerHTML",i.alarmDetailsText,a["\u0275\u0275sanitizeHtml"])}}function x(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",5),a["\u0275\u0275elementStart"](1,"span",6),a["\u0275\u0275listener"]("click",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().openEditDetailsDialog(e)}),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](5,C,1,1,"span",7),a["\u0275\u0275elementStart"](6,"button",8),a["\u0275\u0275listener"]("click",function(e){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().openEditDetailsDialog(e)}),a["\u0275\u0275pipe"](7,"translate"),a["\u0275\u0275elementStart"](8,"mat-icon"),a["\u0275\u0275text"](9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",i.alarmRuleFormGroup.get("alarmDetails").value?a["\u0275\u0275pipeBind1"](3,4,"device-profile.alarm-rule-details")+": ":a["\u0275\u0275pipeBind1"](4,6,"device-profile.add-alarm-rule-details")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",i.alarmRuleFormGroup.get("alarmDetails").value),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](7,8,i.disabled?"action.view":"action.edit")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](i.disabled?"visibility":i.alarmRuleFormGroup.get("alarmDetails").value?"edit":"add")}}function w(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",10),a["\u0275\u0275elementStart"](1,"span",11),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"tb-dashboard-autocomplete",12),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275elementStart"](6,"div",13),a["\u0275\u0275text"](7),a["\u0275\u0275pipe"](8,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](3,3,"device-profile.alarm-rule-mobile-dashboard")+": "," "),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](5,5,"device-profile.alarm-rule-no-mobile-dashboard")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](8,7,"device-profile.alarm-rule-mobile-dashboard-hint")))}var S=function(){function e(e,t,n){this.dialog=e,this.utils=t,this.fb=n,this.expandAlarmDetails=!1,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(o.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.alarmRuleFormGroup=this.fb.group({condition:[null,[r.Validators.required]],schedule:[null],alarmDetails:[null],dashboardId:[null]}),this.alarmRuleFormGroup.valueChanges.subscribe(function(){e.updateModel()})},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.alarmRuleFormGroup.disable({emitEvent:!1}):this.alarmRuleFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){var t;this.modelValue=e;var n=this.modelValue?Object(i.a)(Object(i.a)({},this.modelValue),{dashboardId:null===(t=this.modelValue.dashboardId)||void 0===t?void 0:t.id}):null;this.alarmRuleFormGroup.reset(n||void 0,{emitEvent:!1})},e.prototype.openEditDetailsDialog=function(e){var t=this;e&&e.stopPropagation(),this.dialog.open(l.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{alarmDetails:this.alarmRuleFormGroup.get("alarmDetails").value,readonly:this.disabled}}).afterClosed().subscribe(function(e){Object(s.o)(e)&&t.alarmRuleFormGroup.patchValue({alarmDetails:e})})},e.prototype.validate=function(e){return!this.required&&!this.modelValue||this.alarmRuleFormGroup.valid?null:{alarmRule:{valid:!1}}},Object.defineProperty(e.prototype,"alarmDetailsText",{get:function(){var e=this.alarmRuleFormGroup.get("alarmDetails").value;return this.utils.customTranslation(e,e)},enumerable:!1,configurable:!0}),e.prototype.updateModel=function(){var e=this.alarmRuleFormGroup.value;this.modelValue&&(this.modelValue=Object(i.a)(Object(i.a)(Object(i.a)({},this.modelValue),e),{dashboardId:e.dashboardId?new c.a(e.dashboardId):null}),this.propagateChange(this.modelValue))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](u.MatDialog),a["\u0275\u0275directiveInject"](d.a),a["\u0275\u0275directiveInject"](r.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-alarm-rule"]],inputs:{disabled:"disabled",required:"required",deviceProfileId:"deviceProfileId"},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)(function(){return e}),multi:!0},{provide:r.NG_VALIDATORS,useExisting:Object(a.forwardRef)(function(){return e}),multi:!0}])],decls:5,vars:4,consts:[["fxLayout","column",3,"formGroup"],["formControlName","condition",3,"deviceProfileId"],["formControlName","schedule"],["fxLayout","row","fxLayoutAlign","start center",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start start","fxLayout.gt-sm","row","fxLayoutAlign.gt-sm","start center",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center"],[1,"tb-alarm-rule-details","title",3,"click"],["class","tb-alarm-rule-details",3,"innerHTML","click",4,"ngIf"],["mat-icon-button","","color","accent","type","button","matTooltipPosition","above",3,"matTooltip","click"],[1,"tb-alarm-rule-details",3,"innerHTML","click"],["fxLayout","column","fxLayoutAlign","start start","fxLayout.gt-sm","row","fxLayoutAlign.gt-sm","start center"],[1,"tb-alarm-rule-dashboard","title"],["floatLabel","never","formControlName","dashboardId",1,"tb-alarm-rule-dashboard","dashboard",3,"placeholder"],["tb-hint",""]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275element"](1,"tb-alarm-rule-condition",1),a["\u0275\u0275element"](2,"tb-alarm-schedule-info",2),a["\u0275\u0275template"](3,x,10,10,"div",3),a["\u0275\u0275template"](4,w,9,9,"div",4),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("formGroup",t.alarmRuleFormGroup),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("deviceProfileId",t.deviceProfileId),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!t.disabled||t.alarmRuleFormGroup.get("alarmDetails").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!t.disabled||t.alarmRuleFormGroup.get("dashboardId").value))},directives:[p.f,r.NgControlStatusGroup,r.FormGroupDirective,m.a,r.NgControlStatus,r.FormControlName,f.a,h.NgIf,p.e,g.MatButton,A.MatTooltip,b.MatIcon,y.a],pipes:[v.TranslatePipe],styles:["[_nghost-%COMP%]{min-width:0}[_nghost-%COMP%]   .row[_ngcontent-%COMP%]{margin-top:1em}[_nghost-%COMP%]   .tb-alarm-rule-dashboard[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-alarm-rule-details[_ngcontent-%COMP%]{padding:4px}[_nghost-%COMP%]   .tb-alarm-rule-dashboard.title[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-alarm-rule-details.title[_ngcontent-%COMP%]{opacity:.7;overflow:visible}[_nghost-%COMP%]   .tb-alarm-rule-details[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;cursor:pointer}[_nghost-%COMP%]   .tb-alarm-rule-dashboard.dashboard[_ngcontent-%COMP%]{width:100%;max-width:350px}"]}),e}();0,void 0},zkya:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("U3y+"),a=function(e){this.entityType=i.b.DEVICE_PROFILE,this.id=e}}}]);