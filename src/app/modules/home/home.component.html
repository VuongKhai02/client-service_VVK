<!--

    Copyright © 2016-2021 The Thingsboard Authors

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

-->
<mat-sidenav-container>
  <mat-sidenav #sidenav class="tb-site-sidenav mat-elevation-z2" [disableClose]="sidenavOpened"
    (click)="sidenavClicked()" [mode]="sidenavMode" [opened]="sidenavOpened && !forceFullscreen">
    <header *ngIf="this.sideNavOpen_k ==true" class="tb-nav-header">
      <mat-toolbar color="accent" class="tb-nav-header-toolbar">
        <!-- khai -->
        <div fxFlex="auto" fxLayout="row" class="header_img">
          <svg width="194" height="54" viewBox="0 0 194 54" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M46 40.05V14.85L24.4 29.25V52.146L46 40.05Z" fill="white" />
            <path
              d="M46 14.85V40.05L24.4 52.146M46 14.85V13.95L23.5 1.35L1 13.95V40.05L23.5 52.65L24.4 52.146M46 14.85L24.4 29.25V52.146"
              stroke="white" />
            <path
              d="M63.5 39V15.7273H79.8636V20.8182H69.8182V24.8182H78.8636V29.9091H69.8182V39H63.5ZM86.767 39.2727C85.6534 39.2727 84.6686 39.0909 83.8125 38.7273C82.964 38.3561 82.2973 37.7955 81.8125 37.0455C81.3277 36.2955 81.0852 35.3409 81.0852 34.1818C81.0852 33.2273 81.2481 32.4129 81.5739 31.7386C81.8996 31.0568 82.3542 30.5 82.9375 30.0682C83.5208 29.6364 84.1989 29.3068 84.9716 29.0795C85.7519 28.8523 86.5928 28.7045 87.4943 28.6364C88.4716 28.5606 89.2557 28.4697 89.8466 28.3636C90.4451 28.25 90.8769 28.0947 91.142 27.8977C91.4072 27.6932 91.5398 27.4242 91.5398 27.0909V27.0455C91.5398 26.5909 91.3655 26.2424 91.017 26C90.6686 25.7576 90.2216 25.6364 89.6761 25.6364C89.0777 25.6364 88.589 25.7689 88.2102 26.0341C87.839 26.2917 87.6155 26.6894 87.5398 27.2273H81.767C81.8428 26.1667 82.1799 25.1894 82.7784 24.2955C83.3845 23.3939 84.267 22.6742 85.4261 22.1364C86.5852 21.5909 88.0322 21.3182 89.767 21.3182C91.017 21.3182 92.1383 21.4659 93.1307 21.7614C94.1231 22.0492 94.9678 22.4545 95.6648 22.9773C96.3617 23.4924 96.892 24.0985 97.2557 24.7955C97.6269 25.4848 97.8125 26.2348 97.8125 27.0455V39H91.9489V36.5455H91.8125C91.464 37.197 91.0398 37.7235 90.5398 38.125C90.0473 38.5265 89.483 38.8182 88.8466 39C88.2178 39.1818 87.5246 39.2727 86.767 39.2727ZM88.8125 35.3182C89.2898 35.3182 89.7367 35.2197 90.1534 35.0227C90.5777 34.8258 90.9223 34.5417 91.1875 34.1705C91.4527 33.7992 91.5852 33.3485 91.5852 32.8182V31.3636C91.4186 31.4318 91.2405 31.4962 91.0511 31.5568C90.8693 31.6174 90.6723 31.6742 90.4602 31.7273C90.2557 31.7803 90.036 31.8295 89.8011 31.875C89.5739 31.9205 89.3352 31.9621 89.0852 32C88.6004 32.0758 88.2027 32.2008 87.892 32.375C87.589 32.5417 87.3617 32.75 87.2102 33C87.0663 33.2424 86.9943 33.5152 86.9943 33.8182C86.9943 34.303 87.1648 34.6742 87.5057 34.9318C87.8466 35.1894 88.2822 35.3182 88.8125 35.3182ZM109.219 39.3182C107.325 39.3182 105.704 38.9432 104.355 38.1932C103.007 37.4356 101.973 36.3826 101.253 35.0341C100.533 33.678 100.173 32.1061 100.173 30.3182C100.173 28.5303 100.533 26.9621 101.253 25.6136C101.973 24.2576 103.007 23.2045 104.355 22.4545C105.704 21.697 107.325 21.3182 109.219 21.3182C110.931 21.3182 112.412 21.6288 113.662 22.25C114.92 22.8636 115.893 23.7348 116.582 24.8636C117.272 25.9848 117.62 27.303 117.628 28.8182H111.81C111.726 27.9015 111.461 27.2045 111.014 26.7273C110.575 26.2424 110.007 26 109.31 26C108.764 26 108.287 26.1591 107.878 26.4773C107.469 26.7879 107.151 27.2614 106.923 27.8977C106.696 28.5265 106.582 29.3182 106.582 30.2727C106.582 31.2273 106.696 32.0227 106.923 32.6591C107.151 33.2879 107.469 33.7614 107.878 34.0795C108.287 34.3902 108.764 34.5455 109.31 34.5455C109.772 34.5455 110.181 34.4394 110.537 34.2273C110.893 34.0076 111.181 33.6894 111.401 33.2727C111.628 32.8485 111.764 32.3333 111.81 31.7273H117.628C117.605 33.2652 117.253 34.6061 116.571 35.75C115.889 36.8864 114.923 37.7652 113.673 38.3864C112.431 39.0076 110.946 39.3182 109.219 39.3182ZM128.58 39.3182C126.716 39.3182 125.11 38.9621 123.761 38.25C122.42 37.5303 121.386 36.5 120.659 35.1591C119.939 33.8106 119.58 32.197 119.58 30.3182C119.58 28.5152 119.943 26.9394 120.67 25.5909C121.398 24.2424 122.424 23.1932 123.75 22.4432C125.076 21.6932 126.64 21.3182 128.443 21.3182C129.761 21.3182 130.955 21.5227 132.023 21.9318C133.091 22.3409 134.004 22.9356 134.761 23.7159C135.519 24.4886 136.102 25.428 136.511 26.5341C136.92 27.6402 137.125 28.8864 137.125 30.2727V31.7273H121.534V28.2727H131.352C131.345 27.7727 131.216 27.3333 130.966 26.9545C130.723 26.5682 130.394 26.2689 129.977 26.0568C129.568 25.8371 129.102 25.7273 128.58 25.7273C128.072 25.7273 127.606 25.8371 127.182 26.0568C126.758 26.2689 126.417 26.5644 126.159 26.9432C125.909 27.322 125.777 27.7652 125.761 28.2727V32C125.761 32.5606 125.879 33.0606 126.114 33.5C126.348 33.9394 126.686 34.2841 127.125 34.5341C127.564 34.7841 128.095 34.9091 128.716 34.9091C129.148 34.9091 129.542 34.8485 129.898 34.7273C130.261 34.6061 130.572 34.4318 130.83 34.2045C131.087 33.9697 131.277 33.6894 131.398 33.3636H137.125C136.928 34.5758 136.462 35.6288 135.727 36.5227C134.992 37.4091 134.019 38.0985 132.807 38.5909C131.602 39.0758 130.193 39.3182 128.58 39.3182ZM159.73 15.7273V39H154.457L146.048 26.7727H145.912V39H139.594V15.7273H144.957L153.23 27.9091H153.412V15.7273H159.73ZM171.173 39.3182C169.31 39.3182 167.704 38.9621 166.355 38.25C165.014 37.5303 163.98 36.5 163.253 35.1591C162.533 33.8106 162.173 32.197 162.173 30.3182C162.173 28.5152 162.537 26.9394 163.264 25.5909C163.991 24.2424 165.018 23.1932 166.344 22.4432C167.67 21.6932 169.234 21.3182 171.037 21.3182C172.355 21.3182 173.548 21.5227 174.616 21.9318C175.685 22.3409 176.598 22.9356 177.355 23.7159C178.113 24.4886 178.696 25.428 179.105 26.5341C179.514 27.6402 179.719 28.8864 179.719 30.2727V31.7273H164.128V28.2727H173.946C173.938 27.7727 173.81 27.3333 173.56 26.9545C173.317 26.5682 172.988 26.2689 172.571 26.0568C172.162 25.8371 171.696 25.7273 171.173 25.7273C170.666 25.7273 170.2 25.8371 169.776 26.0568C169.351 26.2689 169.01 26.5644 168.753 26.9432C168.503 27.322 168.37 27.7652 168.355 28.2727V32C168.355 32.5606 168.473 33.0606 168.707 33.5C168.942 33.9394 169.279 34.2841 169.719 34.5341C170.158 34.7841 170.688 34.9091 171.31 34.9091C171.741 34.9091 172.135 34.8485 172.491 34.7273C172.855 34.6061 173.166 34.4318 173.423 34.2045C173.681 33.9697 173.87 33.6894 173.991 33.3636H179.719C179.522 34.5758 179.056 35.6288 178.321 36.5227C177.586 37.4091 176.613 38.0985 175.401 38.5909C174.196 39.0758 172.787 39.3182 171.173 39.3182ZM192.688 21.5455V26.0909H181.188V21.5455H192.688ZM183.415 17.3636H189.688V33.3864C189.688 33.6288 189.729 33.8333 189.812 34C189.896 34.1591 190.025 34.2803 190.199 34.3636C190.373 34.4394 190.597 34.4773 190.869 34.4773C191.059 34.4773 191.278 34.4545 191.528 34.4091C191.786 34.3636 191.975 34.3258 192.097 34.2955L193.006 38.7045C192.725 38.7879 192.324 38.8902 191.801 39.0114C191.286 39.1326 190.672 39.2121 189.96 39.25C188.521 39.3258 187.313 39.178 186.335 38.8068C185.358 38.428 184.623 37.8333 184.131 37.0227C183.638 36.2121 183.4 35.197 183.415 33.9773V17.3636Z"
              fill="white" />
          </svg>

        </div>
      </mat-toolbar>
    </header>
    <header *ngIf="this.sideNavOpen_k ==false" class="tb-nav-header tb_nav_cusom_k">
      <mat-toolbar color="accent" class="tb-nav-header-toolbar">
        <!-- khai -->
        <div fxFlex="auto" fxLayout="row" class="header_img">
          <!-- <img [src]="logo"
               aria-label="logo" class="tb-logo-title"/> -->
          <!-- <div class="tb-logo-title">Rạng Đông SCADA</div> -->
          <!-- khai -->
          <svg class="img_header_custom_k" width="47" height="54" viewBox="0 0 47 54" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path d="M46 40.05V14.85L24.4 29.25V52.146L46 40.05Z" fill="white" />
            <path
              d="M46 14.85V40.05L24.4 52.146M46 14.85V13.95L23.5 1.34998L1 13.95V40.05L23.5 52.65L24.4 52.146M46 14.85L24.4 29.25V52.146"
              stroke="white" />
          </svg>
        </div>
      </mat-toolbar>
    </header>
    <mat-toolbar color="accent" fxFlex="0%" class="tb-side-menu-toolbar" fxLayout="column" role="navigation">
      <tb-side-menu (menuToggleClicked)="openNav()" [isSideNavOpen_k]="this.sideNavOpen_k"></tb-side-menu>

    </mat-toolbar>
  </mat-sidenav>
  <mat-sidenav-content>
    <div fxLayout="column" role="main" style="height: 100%;">
      <mat-toolbar fxLayout="row" color="accent"
        class="mat-elevation-z1 tb-accent-toolbar mat_custom_k d-flex justify_between">
        <div class="d_flex align_center justify_between ">
          <button [fxShow]="!forceFullscreen" mat-icon-button id="main" class="tb-visible" fxHide.gt-sm
            (click)="toggleClick()">
            <mat-icon class="material-icons">menu</mat-icon>
          </button>
          <div>
            <p class="header_text">{{'common.header' | translate}}</p>
          </div>
          <!-- khai -->
          <button [fxShow]="forceFullscreen" mat-icon-button [ngClass]="{'tb-invisible': displaySearchMode()}"
            (click)="goBack()">
            <mat-icon class="material-icons">arrow_back</mat-icon>
          </button>
          <button mat-icon-button [ngClass]="{'tb-invisible': !displaySearchMode()}" (click)="closeSearch()">
            <mat-icon class="material-icons">arrow_back</mat-icon>
          </button>
          <!-- khai, thành breadcum -->
          <!-- <tb-breadcrumb [fxShow]="!displaySearchMode()" fxFlex [activeComponent]="activeComponent"
            class="mat-toolbar-tools">
          </tb-breadcrumb> -->
          <div [fxShow]="displaySearchMode()" fxFlex fxLayout="row" class="tb-dark">
            <mat-form-field fxFlex floatLabel="always">
              <mat-label></mat-label>
              <input #searchInput matInput [(ngModel)]="searchText"
                placeholder="{{ 'common.enter-search' | translate }}" />
            </mat-form-field>
          </div>
          <button [fxShow]="searchEnabled" mat-icon-button (click)="openSearch()">
            <mat-icon class="material-icons">search</mat-icon>
          </button>
        </div>
        <!--  -->
        <div class="d_flex align_center justify_between ">
          <button matTooltip="{{'custom_k.full-screen' | translate}}" *ngIf="fullscreenEnabled"
            [fxShow]="!displaySearchMode()" mat-icon-button fxHide.lt-md (click)="toggleFullscreen()">
            <mat-icon class="material-icons">{{ isFullscreen() ? 'fullscreen_exit' : 'fullscreen' }}</mat-icon>
          </button>
          <tb-user-menu [defaultLang_Home]="this.defaultLang" [displayUserInfo]="!displaySearchMode()"></tb-user-menu>

        </div>
        <!--  -->
      </mat-toolbar>
      <mat-progress-bar color="warn" style="z-index: 10; margin-bottom: -4px; width: 100%;" mode="indeterminate"
        *ngIf="isLoading$ | async">
      </mat-progress-bar>
      <div fxFlex fxLayout="column" tb-toast class="tb-main-content">
        <tb-breadcrumb [fxShow]="!displaySearchMode()" fxFlex [activeComponent]="activeComponent"
          class="mat-toolbar-tools breadcrumb_custome_k">
        </tb-breadcrumb>
        <router-outlet (activate)="activeComponentChanged($event)"></router-outlet>
      </div>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>