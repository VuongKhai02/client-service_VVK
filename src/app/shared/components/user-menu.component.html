<!--

    Copyright © 2016-2021 The Thingsboard Authors

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

-->
<section fxLayout="row">
  <div fxHide.lt-lg *ngIf="displayUserInfo" class="tb-user-info" fxLayout="row">
    <button matTooltip="Profile" mat-menu-item class="avartar_btn_custom_k" (click)="openProfile()">
      <mat-icon class="material-icons tb-mini-avatar avatar_custom_k">account_circle</mat-icon>
    </button>
    <div fxLayout="column" fxLayoutAlign="center">
      <span *ngIf="userDisplayName$ | async; let userDisplayName" class="tb-user-display-name">{{ userDisplayName
        }}</span>
      <span *ngIf="authorityName$ | async; let authorityName" class="tb-user-authority">{{ authorityName | translate
        }}</span>
    </div>
  </div>
  <mat-form-field class="mat-block">
    <div class="d_flex">
      <img class="img_lang" src="{{'custom_k.lang-img' | translate}}">
      <mat-select class="mg_a_05" [(ngModel)]="defaultLang" (selectionChange)="selectLangEvent($event)">
        <mat-option *ngFor="let lang of languageList" [value]="lang">
          {{ lang ? ('language.locales.' + lang | translate) : ''}}
        </mat-option>
      </mat-select>
    </div>
  </mat-form-field>
  <div class="notifications_custome_k mg_a_05">
    <button matTooltip="{{'custom_k.notifications' | translate}}" mat-button [matMenuTriggerFor]="menu"
      class="bg-transparent">
      <div [matBadge]="matBadgeCount" matBadgeColor="warn">
        <svg width="27" height="26" viewBox="0 0 27 28" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M21.7576 16.8012L20.6326 14.9338C20.3963 14.5175 20.1826 13.73 20.1826 13.2688V10.4225C20.1826 7.77875 18.6301 5.495 16.3913 4.42625C15.8063 3.39125 14.7263 2.75 13.4888 2.75C12.2626 2.75 11.1601 3.41375 10.5751 4.46C8.38131 5.55125 6.86256 7.8125 6.86256 10.4225V13.2688C6.86256 13.73 6.64881 14.5175 6.41256 14.9225L5.27631 16.8012C4.82631 17.555 4.72506 18.3875 5.00631 19.1525C5.27631 19.9062 5.91756 20.4913 6.75006 20.7725C8.93256 21.515 11.2276 21.875 13.5226 21.875C15.8176 21.875 18.1126 21.515 20.2951 20.7838C21.0826 20.525 21.6901 19.9287 21.9826 19.1525C22.2751 18.3763 22.1963 17.5212 21.7576 16.8012Z"
            fill="white" />
          <path
            d="M16.6838 23.0113C16.2113 24.3163 14.9625 25.25 13.5 25.25C12.6113 25.25 11.7338 24.89 11.115 24.2488C10.755 23.9113 10.485 23.4613 10.3275 23C10.4738 23.0225 10.62 23.0337 10.7775 23.0562C11.0363 23.09 11.3063 23.1237 11.5763 23.1462C12.2175 23.2025 12.87 23.2362 13.5225 23.2362C14.1638 23.2362 14.805 23.2025 15.435 23.1462C15.6713 23.1237 15.9075 23.1125 16.1325 23.0787C16.3125 23.0562 16.4925 23.0338 16.6838 23.0113Z"
            fill="white" />
        </svg>

      </div>

    </button>
    <mat-menu #menu="matMenu" style="background-color:
    rgb(131,131,131)">
      <div class="matMenu_custom_k">
        <div class="d_flex justify_between">
          <h3 class="txt_white">Thông báo</h3>
          <button class="btn_setting_custom_k">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M13.0966 23.6667H10.8916C10.3718 23.6667 9.87323 23.4602 9.50566 23.0926C9.13809 22.725 8.93159 22.2265 8.93159 21.7067V20.435C8.92527 20.3601 8.89779 20.2885 8.85234 20.2286C8.8069 20.1687 8.74537 20.1229 8.67492 20.0967C8.60353 20.0509 8.52053 20.0266 8.43575 20.0266C8.35097 20.0266 8.26797 20.0509 8.19659 20.0967L7.33325 21.03C7.15216 21.2124 6.93677 21.3571 6.6995 21.4559C6.46223 21.5546 6.20776 21.6055 5.95075 21.6055C5.69374 21.6055 5.43928 21.5546 5.202 21.4559C4.96473 21.3571 4.74935 21.2124 4.56825 21.03L2.96992 19.4667C2.78491 19.2859 2.63797 19.07 2.53779 18.8315C2.4376 18.5931 2.38619 18.337 2.38659 18.0783C2.38734 17.5493 2.59699 17.0419 2.96992 16.6667L3.83325 15.8033C3.87493 15.7391 3.89711 15.6641 3.89711 15.5875C3.89711 15.5109 3.87493 15.4359 3.83325 15.3717C3.76325 15.1967 3.64659 15.0683 3.48325 15.0683H2.29325C1.77236 15.0653 1.27385 14.8562 0.906609 14.4867C0.539369 14.1173 0.333243 13.6176 0.333252 13.0967V10.8917C0.333252 10.3718 0.539751 9.87331 0.907323 9.50574C1.27489 9.13817 1.77343 8.93167 2.29325 8.93167H3.56492C3.63984 8.92535 3.71143 8.89787 3.77133 8.85242C3.83123 8.80698 3.87698 8.74545 3.90325 8.675C3.94899 8.60361 3.9733 8.52061 3.9733 8.43583C3.9733 8.35105 3.94899 8.26805 3.90325 8.19667L2.96992 7.33333C2.78755 7.15224 2.64281 6.93685 2.54405 6.69958C2.44528 6.46231 2.39443 6.20784 2.39443 5.95083C2.39443 5.69382 2.44528 5.43936 2.54405 5.20208C2.64281 4.96481 2.78755 4.74943 2.96992 4.56833L4.53325 2.97C4.71222 2.78586 4.92621 2.6394 5.16264 2.53922C5.39906 2.43903 5.65314 2.38717 5.90992 2.38667C6.17387 2.38551 6.43546 2.43644 6.6797 2.53653C6.92394 2.63663 7.14603 2.78393 7.33325 2.97L8.19659 3.83333C8.26086 3.87501 8.33582 3.89719 8.41242 3.89719C8.48902 3.89719 8.56398 3.87501 8.62825 3.83333C8.80325 3.76333 8.93159 3.64667 8.93159 3.48333V2.29333C8.93467 1.77244 9.14376 1.27393 9.51318 0.906689C9.88261 0.539449 10.3823 0.333323 10.9033 0.333332H13.1666C13.6864 0.333332 14.1849 0.539832 14.5525 0.907403C14.9201 1.27497 15.1266 1.77351 15.1266 2.29333V3.565C15.1329 3.63992 15.1604 3.71151 15.2058 3.77141C15.2513 3.83131 15.3128 3.87706 15.3833 3.90333C15.4546 3.94907 15.5376 3.97338 15.6224 3.97338C15.7072 3.97338 15.7902 3.94907 15.8616 3.90333L16.6666 2.97C16.8477 2.78763 17.0631 2.64289 17.3003 2.54413C17.5376 2.44536 17.7921 2.39451 18.0491 2.39451C18.3061 2.39451 18.5606 2.44536 18.7978 2.54413C19.0351 2.64289 19.2505 2.78763 19.4316 2.97L21.0299 4.53333C21.2144 4.71447 21.361 4.93051 21.4611 5.16886C21.5613 5.40722 21.613 5.66313 21.6133 5.92167C21.6189 6.18451 21.57 6.44566 21.4696 6.68864C21.3691 6.93162 21.2195 7.15113 21.0299 7.33333L20.1666 8.19667C20.1249 8.26094 20.1027 8.3359 20.1027 8.4125C20.1027 8.4891 20.1249 8.56406 20.1666 8.62833C20.2366 8.80333 20.3533 8.93167 20.5166 8.93167H21.7883C22.2948 8.95567 22.7727 9.17395 23.1225 9.54114C23.4723 9.90833 23.6672 10.3962 23.6666 10.9033V13.1667C23.6666 13.6865 23.4601 14.185 23.0925 14.5526C22.7249 14.9202 22.2264 15.1267 21.7066 15.1267H20.4349C20.36 15.133 20.2884 15.1605 20.2285 15.2059C20.1686 15.2514 20.1229 15.3129 20.0966 15.3833C20.0549 15.4476 20.0327 15.5226 20.0327 15.5992C20.0327 15.6758 20.0549 15.7507 20.0966 15.815L20.9949 16.7133C21.1773 16.8944 21.322 17.1098 21.4208 17.3471C21.5196 17.5844 21.5704 17.8388 21.5704 18.0958C21.5704 18.3528 21.5196 18.6073 21.4208 18.8446C21.322 19.0819 21.1773 19.2972 20.9949 19.4783L19.4666 21.03C19.2876 21.2141 19.0736 21.3606 18.8372 21.4608C18.6008 21.561 18.3467 21.6128 18.0899 21.6133C17.569 21.6065 17.0711 21.3973 16.7016 21.03L15.8033 20.1667C15.739 20.125 15.664 20.1028 15.5874 20.1028C15.5108 20.1028 15.4359 20.125 15.3716 20.1667C15.1966 20.2367 15.0683 20.3533 15.0683 20.5167V21.7883C15.0442 22.2949 14.826 22.7728 14.4588 23.1226C14.0916 23.4724 13.6037 23.6672 13.0966 23.6667ZM11.2649 21.3333H12.7349V20.435C12.7399 19.897 12.9044 19.3726 13.2076 18.9281C13.5108 18.4837 13.9391 18.1392 14.4383 17.9383C14.9394 17.7193 15.4945 17.6544 16.0326 17.7521C16.5708 17.8497 17.0677 18.1055 17.4599 18.4867L18.0899 19.1167L19.1166 18.09L18.4866 17.4483C18.1078 17.062 17.8523 16.5719 17.7526 16.0401C17.6529 15.5084 17.7135 14.959 17.9266 14.4617C18.1293 13.9647 18.4745 13.5389 18.9188 13.2379C19.3631 12.9368 19.8866 12.774 20.4233 12.77H21.3333V11.265H20.4349C19.8969 11.26 19.3725 11.0955 18.928 10.7923C18.4836 10.4891 18.1391 10.0608 17.9383 9.56167C17.7192 9.0605 17.6544 8.50545 17.752 7.96728C17.8497 7.42912 18.1054 6.93224 18.4866 6.54L19.1166 5.91L18.0899 4.88333L17.4483 5.51333C17.0559 5.87169 16.5694 6.11049 16.0459 6.20161C15.5224 6.29273 14.9838 6.23238 14.4935 6.02767C14.0031 5.82295 13.5815 5.4824 13.2782 5.0461C12.9749 4.60981 12.8026 4.09594 12.7816 3.565V2.66667H11.2649V3.565C11.26 4.103 11.0954 4.62743 10.7922 5.07188C10.489 5.51633 10.0607 5.86079 9.56159 6.06167C9.06042 6.28073 8.50537 6.34557 7.9672 6.24791C7.42904 6.15025 6.93216 5.89452 6.53992 5.51333L5.90992 4.88333L4.88325 5.91L5.51325 6.55167C5.87161 6.94399 6.11041 7.43053 6.20153 7.95401C6.29265 8.4775 6.2323 9.01612 6.02759 9.50645C5.82287 9.99678 5.48232 10.4184 5.04602 10.7217C4.60973 11.025 4.09586 11.1973 3.56492 11.2183H2.66659V12.6883H3.56492C4.10292 12.6933 4.62735 12.8578 5.0718 13.161C5.51625 13.4643 5.86071 13.8925 6.06159 14.3917C6.28065 14.8928 6.34549 15.4479 6.24783 15.9861C6.15017 16.5242 5.89444 17.0211 5.51325 17.4133L4.88325 18.0433L5.90992 19.07L6.55159 18.44C6.94391 18.0816 7.43045 17.8428 7.95393 17.7517C8.47742 17.6606 9.01604 17.721 9.50637 17.9257C9.9967 18.1304 10.4183 18.4709 10.7216 18.9072C11.0249 19.3435 11.1972 19.8574 11.2183 20.3883L11.2649 21.3333Z"
                fill="white" />
              <path
                d="M11.9998 16.0833C11.1922 16.0833 10.4028 15.8438 9.73126 15.3952C9.05976 14.9465 8.53639 14.3088 8.22733 13.5626C7.91827 12.8165 7.83741 11.9955 7.99497 11.2034C8.15252 10.4113 8.54142 9.68371 9.11249 9.11265C9.68355 8.54158 10.4111 8.15268 11.2032 7.99513C11.9953 7.83757 12.8163 7.91843 13.5625 8.22749C14.3086 8.53655 14.9463 9.05992 15.395 9.73142C15.8437 10.4029 16.0832 11.1924 16.0832 12C16.0832 13.083 15.653 14.1216 14.8872 14.8874C14.1214 15.6531 13.0828 16.0833 11.9998 16.0833ZM11.9998 10.25C11.6537 10.25 11.3154 10.3526 11.0276 10.5449C10.7398 10.7372 10.5155 11.0105 10.3831 11.3303C10.2506 11.6501 10.2159 12.0019 10.2835 12.3414C10.351 12.6809 10.5177 12.9927 10.7624 13.2374C11.0071 13.4822 11.319 13.6488 11.6584 13.7164C11.9979 13.7839 12.3498 13.7492 12.6695 13.6168C12.9893 13.4843 13.2626 13.26 13.4549 12.9722C13.6472 12.6845 13.7498 12.3461 13.7498 12C13.7498 11.5359 13.5655 11.0908 13.2373 10.7626C12.9091 10.4344 12.464 10.25 11.9998 10.25Z"
                fill="white" />
            </svg>

          </button>
        </div>
        <button mat-menu-item class="btn_menu_custom_k">
          <div>
            <h5>Cập nhật</h5>
            <div>
              <p class="btn_menu_time">1 giờ trước</p>
              <p class="btn_menu_time">Hôm nay</p>
            </div>
          </div>
          <div>
            <p>Máy tạo phôi đến</p>
          </div>
        </button>
        <button mat-menu-item class="btn_menu_custom_k">
          <div>
            <h5>Cập nhật</h5>
            <div>
              <p class="btn_menu_time">1 giờ trước</p>
              <p class="btn_menu_time">Hôm nay</p>
            </div>
          </div>
          <div>
            <p>Máy tạo phôi đến</p>
          </div>
        </button>

      </div>
    </mat-menu>
  </div>
  <div class="mg_a_05">
    <button matTooltip="{{'custom_k.log-out' | translate}}" class="bg-transparent" (click)="openDialog(template)">
      <svg width="22" height="26" viewBox="0 0 22 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M10 20C4.477 20 0 15.523 0 10C0 4.477 4.477 -9.96412e-07 10 -9.96412e-07C11.5527 -0.00116746 13.0842 0.359772 14.4729 1.05414C15.8617 1.74851 17.0693 2.75717 18 4H15.29C14.1352 2.98176 12.7112 2.31836 11.1887 2.0894C9.66625 1.86044 8.11007 2.07565 6.70689 2.70921C5.30371 3.34277 4.11315 4.36776 3.27807 5.66119C2.44299 6.95461 1.99887 8.46153 1.999 10.0011C1.99913 11.5407 2.4435 13.0475 3.27879 14.3408C4.11409 15.6341 5.30482 16.6589 6.7081 17.2922C8.11139 17.9255 9.66761 18.1405 11.19 17.9113C12.7125 17.6821 14.1364 17.0184 15.291 16H18.001C17.0702 17.243 15.8624 18.2517 14.4735 18.9461C13.0846 19.6405 11.5528 20.0013 10 20ZM17 14V11H9V9H17V6L22 10L17 14Z"
          fill="white" />
      </svg>
    </button>
    <ng-template #template>
      <div class=" dialog_custome_k">
        <!-- <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g clip-path="url(#clip0_525_2)">
            <path
              d="M20 10C20 12.6522 18.9464 15.1957 17.0711 17.0711C15.1957 18.9464 12.6522 20 10 20C7.34784 20 4.8043 18.9464 2.92893 17.0711C1.05357 15.1957 0 12.6522 0 10C0 7.34784 1.05357 4.8043 2.92893 2.92893C4.8043 1.05357 7.34784 0 10 0C12.6522 0 15.1957 1.05357 17.0711 2.92893C18.9464 4.8043 20 7.34784 20 10ZM6.87 7.54125H7.90125C8.07375 7.54125 8.21125 7.4 8.23375 7.22875C8.34625 6.40875 8.90875 5.81125 9.91125 5.81125C10.7687 5.81125 11.5538 6.24 11.5538 7.27125C11.5538 8.065 11.0862 8.43 10.3475 8.985C9.50625 9.59625 8.84 10.31 8.8875 11.4688L8.89125 11.74C8.89256 11.822 8.92606 11.9002 8.98453 11.9577C9.04299 12.0153 9.12173 12.0475 9.20375 12.0475H10.2175C10.3004 12.0475 10.3799 12.0146 10.4385 11.956C10.4971 11.8974 10.53 11.8179 10.53 11.735V11.6037C10.53 10.7062 10.8713 10.445 11.7925 9.74625C12.5538 9.1675 13.3475 8.525 13.3475 7.17625C13.3475 5.2875 11.7525 4.375 10.0063 4.375C8.4225 4.375 6.6875 5.1125 6.56875 7.2325C6.56704 7.27287 6.5736 7.31316 6.58804 7.3509C6.60248 7.38863 6.62448 7.42302 6.65269 7.45194C6.68091 7.48085 6.71474 7.5037 6.75211 7.51906C6.78949 7.53442 6.8296 7.54197 6.87 7.54125ZM9.77625 15.595C10.5388 15.595 11.0625 15.1025 11.0625 14.4362C11.0625 13.7462 10.5375 13.2613 9.77625 13.2613C9.04625 13.2613 8.515 13.7462 8.515 14.4362C8.515 15.1025 9.045 15.595 9.77625 15.595Z"
              fill="#FE6108" />
          </g>
          <defs>
            <clipPath id="clip0_525_2">
              <rect width="20" height="20" fill="white" />
            </clipPath>
          </defs>
        </svg> -->

        <h4 style="
        color: #FF7A00;">Đăng xuất?</h4>
        <h6 style="text-align: center;font-size: 1.1rem;">Bạn có chắc chắn muốn đăng xuất?</h6>
        <button (click)="cancel()" class="exit_btn_custom_k">
          <svg width="17" height="17" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M11.7803 10.5208L19.6245 2.6483C20.1252 2.14934 20.1252 1.37318 19.6245 0.87422C19.1238 0.37526 18.3449 0.37526 17.8442 0.87422L10 8.74671L2.10014 0.92966C1.65508 0.4307 0.820584 0.4307 0.375522 0.92966C-0.125174 1.42862 -0.125174 2.20478 0.375522 2.70374L8.21975 10.5208L0.375522 18.3378C-0.125174 18.8368 -0.125174 19.613 0.375522 20.1119C0.598053 20.3337 0.93185 20.5 1.26565 20.5C1.59944 20.5 1.93324 20.3891 2.15577 20.1119L10 12.2949L17.8442 20.1119C18.0668 20.3337 18.4006 20.5 18.7344 20.5C19.0681 20.5 19.4019 20.3891 19.6245 20.1119C20.1252 19.613 20.1252 18.8368 19.6245 18.3378L11.7803 10.5208Z"
              fill="#8C8C8C" />
          </svg>
        </button>
      </div>
      <div class="btn_dialog_k">
        <button mat-stroked-button style="background: #E5E5E5;color:#000" (click)="cancel()">Hủy</button>
        <button mat-stroked-button style="background: #FF7A00; margin-right:1rem" (click)="logout()">Đăng xuất</button>
      </div>
    </ng-template>
  </div>
  <!-- khai -->
  <!-- <button mat-button mat-icon-button [matMenuTriggerFor]="userMenu">
    <mat-icon class="material-icons">more_vert</mat-icon>
  </button> -->
  <!-- <mat-menu #userMenu="matMenu" xPosition="before">
    <div class="tb-user-menu-items" *ngIf="authority$ | async; let authority">
      <button mat-menu-item (click)="openProfile()">
        <mat-icon class="material-icons">account_circle</mat-icon>
        <span translate>home.profile</span>
      </button>
      <button mat-menu-item (click)="logout()">
        <mat-icon class="material-icons">exit_to_app</mat-icon>
        <span translate>home.logout</span>
      </button>
    </div>
  </mat-menu> -->
</section>